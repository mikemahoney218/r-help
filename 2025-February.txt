From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Sun Feb  2 15:58:31 2025
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Sun, 2 Feb 2025 14:58:31 +0000
Subject: [R] R CMD check error: File `inconsolata.sty' not found
Message-ID: <9141AF1E-5E6B-4786-8BE5-203F594C28E8@hotmail.com>

R CMD check <package> gives me below message at the end.  There does not seem to be a problem with my TeX installation.  Is it possible that R CMD check is not looking in the correct location?  How can this problem be fixed?

Thanks,
Naresh

* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! LaTeX Error: File `inconsolata.sty' not found.

Type X to quit or <RETURN> to proceed,
or enter new name. (Default extension: sty)

! Emergency stop.
<read *> 
         
l.326 ^^M
         
!  ==> Fatal error occurred, no output PDF file produced!
* checking PDF version of manual without index ... OK
* DONE

My Mac has the latest version of TeX installed from texlive.  Below are top few lines from running tlmgr conf

=========================== version information ==========================
tlmgr revision 73493 (2025-01-17 23:28:29 +0100)
tlmgr using installation: /usr/local/texlive/2024
TeX Live (https://tug.org/texlive) version 2024
==================== executables found by searching PATH =================
PATH: /usr/local/texlive/2024/bin/universal-darwin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/texlive/2024/bin/universal-darwin
dvipdfmx:  /usr/local/texlive/2024/bin/universal-darwin/dvipdfmx
dvips:     /usr/local/texlive/2024/bin/universal-darwin/dvips
fmtutil:   /usr/local/texlive/2024/bin/universal-darwin/fmtutil
kpsewhich: /usr/local/texlive/2024/bin/universal-darwin/kpsewhich
luatex:    /usr/local/texlive/2024/bin/universal-darwin/luatex
mktexpk:   /usr/local/texlive/2024/bin/universal-darwin/mktexpk
pdftex:    /usr/local/texlive/2024/bin/universal-darwin/pdftex
tex:       /usr/local/texlive/2024/bin/universal-darwin/tex
tlmgr:     /usr/local/texlive/2024/bin/universal-darwin/tlmgr
updmap:    /usr/local/texlive/2024/bin/universal-darwin/updmap
xetex:     /usr/local/texlive/2024/bin/universal-darwin/xetex

On the command line, I tried updating incosolata package

bash-3.2$ sudo tlmgr install inconsolata
Password:
tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
tlmgr install: package already present: inconsolata

bash-3.2$ sudo tlmgr update inconsolata
tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
tlmgr: saving backups to /usr/local/texlive/2024/tlpkg/backups
tlmgr: no updates available

From m@rc_grt @end|ng |rom y@hoo@|r  Wed Feb  5 10:46:22 2025
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Wed, 5 Feb 2025 10:46:22 +0100
Subject: [R] Error when loading optimx package and a solution
References: <21fb5b76-8add-4a1a-b075-38f6c358ed1a.ref@yahoo.fr>
Message-ID: <21fb5b76-8add-4a1a-b075-38f6c358ed1a@yahoo.fr>

Dear R-help members

Since this morning (5/2/2025), I get an error when I try to load optimx 
package. I solve it and I send my solution but if someone has a better 
idea or understand what's happened, I will be most happy to know.

MacOSX 15.3

R 4.4.2

nlopt installed using
brew install nlopt

Here are the steps to produce the error and a solution to solve it. Some 
parts are in French. I don't know how to "ask" to R to not use French 
for some system messages.

Marc


 > library("optimx")
Erreur : le chargement du package ou de l'espace de noms a ?chou? pour 
?optimx? in dyn.load(file, DLLpath = DLLpath, ...) :
impossible de charger l'objet partag? 
'/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so'?:
dlopen(/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so, 
0x0006): Library not loaded: /opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib
 ? Referenced from: <2A7DAFE2-8123-3555-9569-F28214328E47> 
/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so
 ? Reason: tried: '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no 
such file), 
'/System/Volumes/Preboot/Cryptexes/OS/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' 
(no such file), '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such 
file), '/Library/Frameworks/R.framework/Resources/lib/libnlopt.0.dylib' 
(no such file), 
'/Library/Java/JavaVirtualMachines/jdk-11.0.18+10/Contents/Home/lib/server/libnlopt.0.d
It seems that the file libnlopt.0.dylib is not find.

When I check in this folder, indeed it is not present:

? lib % cd /opt/homebrew/opt/nlopt/lib
? lib % ls
cmake??????????? libnlopt.1.dylib??? pkgconfig
libnlopt.1.0.0.dylib??? libnlopt.dylib

I create a symlink:

? lib % sudo ln -s libnlopt.1.dylib libnlopt.0.dylib
Password:
? lib % ls -al
total 880
drwxr-xr-x?? 8 marcgirondot? admin???? 256? 5 f?v 10:28 .
drwxr-xr-x? 15 marcgirondot? admin???? 480? 5 f?v 10:26 ..
drwxr-xr-x?? 3 marcgirondot? admin????? 96? 4 f?v 19:29 cmake
lrwxr-xr-x?? 1 root????????? admin????? 16? 5 f?v 10:28 libnlopt.0.dylib 
-> libnlopt.1.dylib
-r--r--r--?? 1 marcgirondot? admin? 447936? 5 f?v 10:26 libnlopt.1.0.0.dylib
lrwxr-xr-x?? 1 marcgirondot? admin????? 20? 4 f?v 19:29 libnlopt.1.dylib 
-> libnlopt.1.0.0.dylib
lrwxr-xr-x?? 1 marcgirondot? admin????? 16? 4 f?v 19:29 libnlopt.dylib 
-> libnlopt.1.dylib
drwxr-xr-x?? 3 marcgirondot? admin????? 96? 5 f?v 10:26 pkgconfig

and I reinstall optimx from source

 > remove.packages("optimx")
Elimination du package de 
?/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library?
(car ?lib? n'est pas sp?cifi?)
 > install.packages("optimx", type="source")
essai de l'URL 'https://cran.irsn.fr/src/contrib/optimx_2024-12.2.tar.gz'
Content type 'application/x-gzip' length 2259525 bytes (2.2 MB)
==================================================
downloaded 2.2 MB

* installing *source* package ?optimx? ...
** package ?optimx? correctement d?compress? et sommes MD5 v?rifi?es
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation 
path
* DONE (optimx)

Les packages source t?l?charg?s sont dans
 ??? ?/private/tmp/Rtmpsb2lpE/downloaded_packages?


From pro|jcn@@h @end|ng |rom gm@||@com  Wed Feb  5 14:05:21 2025
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Wed, 5 Feb 2025 08:05:21 -0500
Subject: [R] Error when loading optimx package and a solution
In-Reply-To: <21fb5b76-8add-4a1a-b075-38f6c358ed1a@yahoo.fr>
References: <21fb5b76-8add-4a1a-b075-38f6c358ed1a.ref@yahoo.fr>
 <21fb5b76-8add-4a1a-b075-38f6c358ed1a@yahoo.fr>
Message-ID: <3c90a854-2fbf-4423-9966-ab0ab71351d0@gmail.com>

Hi,

That looks like the dependency on nlopt for nloptr (used by several of the
solvers) was somehow missing. There is SUPPOSED to be a check of what is installed
and a warning issued, but possibly one got missed. Even some base packages
do sometimes need the external libraries manually installed, and I find I'm
doing that after various OS updates or resets when the long term support
runs out.

Some updates and minor extensions to optimx, mostly convenience features or
checks that dependencies available, are on the github version, which is a bit
ahead of CRAN (https://github.com/nashjc/optimx). I find doing all the checks
and revdeps for the package now getting heavy enough that it is worth waiting
a bit unless there's a critical bug, which I don't think there has been for
a long while.

I don't have a Mac, and am currently away from home (actually in Nice, FR for
a couple of weeks), but would be interested in knowing if the github version
needs an independent install of nlopt on Mac, or indeed on any platform.

Cheers,

John Nash
maintainer, optimx


On 2025-02-05 04:46, Marc Girondot via R-help wrote:
> Dear R-help members
> 
> Since this morning (5/2/2025), I get an error when I try to load optimx package. I solve it and I send my solution but 
> if someone has a better idea or understand what's happened, I will be most happy to know.
> 
> MacOSX 15.3
> 
> R 4.4.2
> 
> nlopt installed using
> brew install nlopt
> 
> Here are the steps to produce the error and a solution to solve it. Some parts are in French. I don't know how to "ask" 
> to R to not use French for some system messages.
> 
> Marc
> 
> 
>  > library("optimx")
> Erreur : le chargement du package ou de l'espace de noms a ?chou? pour ?optimx? in dyn.load(file, DLLpath = DLLpath, ...) :
> impossible de charger l'objet partag? '/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/ 
> nloptr.so'?:
> dlopen(/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so, 0x0006): Library not 
> loaded: /opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib
>  ? Referenced from: <2A7DAFE2-8123-3555-9569-F28214328E47> /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/ 
> library/nloptr/libs/nloptr.so
>  ? Reason: tried: '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/System/Volumes/Preboot/Cryptexes/OS/ 
> opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such 
> file), '/Library/Frameworks/R.framework/Resources/lib/libnlopt.0.dylib' (no such file), '/Library/Java/ 
> JavaVirtualMachines/jdk-11.0.18+10/Contents/Home/lib/server/libnlopt.0.d
> It seems that the file libnlopt.0.dylib is not find.
> 
> When I check in this folder, indeed it is not present:
> 
> ? lib % cd /opt/homebrew/opt/nlopt/lib
> ? lib % ls
> cmake??????????? libnlopt.1.dylib??? pkgconfig
> libnlopt.1.0.0.dylib??? libnlopt.dylib
> 
> I create a symlink:
> 
> ? lib % sudo ln -s libnlopt.1.dylib libnlopt.0.dylib
> Password:
> ? lib % ls -al
> total 880
> drwxr-xr-x?? 8 marcgirondot? admin???? 256? 5 f?v 10:28 .
> drwxr-xr-x? 15 marcgirondot? admin???? 480? 5 f?v 10:26 ..
> drwxr-xr-x?? 3 marcgirondot? admin????? 96? 4 f?v 19:29 cmake
> lrwxr-xr-x?? 1 root????????? admin????? 16? 5 f?v 10:28 libnlopt.0.dylib -> libnlopt.1.dylib
> -r--r--r--?? 1 marcgirondot? admin? 447936? 5 f?v 10:26 libnlopt.1.0.0.dylib
> lrwxr-xr-x?? 1 marcgirondot? admin????? 20? 4 f?v 19:29 libnlopt.1.dylib -> libnlopt.1.0.0.dylib
> lrwxr-xr-x?? 1 marcgirondot? admin????? 16? 4 f?v 19:29 libnlopt.dylib -> libnlopt.1.dylib
> drwxr-xr-x?? 3 marcgirondot? admin????? 96? 5 f?v 10:26 pkgconfig
> 
> and I reinstall optimx from source
> 
>  > remove.packages("optimx")
> Elimination du package de ?/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library?
> (car ?lib? n'est pas sp?cifi?)
>  > install.packages("optimx", type="source")
> essai de l'URL 'https://cran.irsn.fr/src/contrib/optimx_2024-12.2.tar.gz'
> Content type 'application/x-gzip' length 2259525 bytes (2.2 MB)
> ==================================================
> downloaded 2.2 MB
> 
> * installing *source* package ?optimx? ...
> ** package ?optimx? correctement d?compress? et sommes MD5 v?rifi?es
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation path
> * DONE (optimx)
> 
> Les packages source t?l?charg?s sont dans
>  ??? ?/private/tmp/Rtmpsb2lpE/downloaded_packages?
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pd@|gd @end|ng |rom gm@||@com  Wed Feb  5 14:39:32 2025
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 5 Feb 2025 14:39:32 +0100
Subject: [R] Error when loading optimx package and a solution
In-Reply-To: <3c90a854-2fbf-4423-9966-ab0ab71351d0@gmail.com>
References: <21fb5b76-8add-4a1a-b075-38f6c358ed1a.ref@yahoo.fr>
 <21fb5b76-8add-4a1a-b075-38f6c358ed1a@yahoo.fr>
 <3c90a854-2fbf-4423-9966-ab0ab71351d0@gmail.com>
Message-ID: <79CB359F-C07F-4534-BEC8-9C6D7792630E@gmail.com>

I think the operative words here are "brew install". I.e., this is a homebrew installation, and thus nothing to do with CRAN.

Nothing wrong with homebrew as far as R Core and the CRAN team knows, we just don't support it, so you have to hope for response from other homebrew users.


- Peter D.


> On 5 Feb 2025, at 14:05 , J C Nash <profjcnash at gmail.com> wrote:
> 
> Hi,
> 
> That looks like the dependency on nlopt for nloptr (used by several of the
> solvers) was somehow missing. There is SUPPOSED to be a check of what is installed
> and a warning issued, but possibly one got missed. Even some base packages
> do sometimes need the external libraries manually installed, and I find I'm
> doing that after various OS updates or resets when the long term support
> runs out.
> 
> Some updates and minor extensions to optimx, mostly convenience features or
> checks that dependencies available, are on the github version, which is a bit
> ahead of CRAN (https://github.com/nashjc/optimx). I find doing all the checks
> and revdeps for the package now getting heavy enough that it is worth waiting
> a bit unless there's a critical bug, which I don't think there has been for
> a long while.
> 
> I don't have a Mac, and am currently away from home (actually in Nice, FR for
> a couple of weeks), but would be interested in knowing if the github version
> needs an independent install of nlopt on Mac, or indeed on any platform.
> 
> Cheers,
> 
> John Nash
> maintainer, optimx
> 
> 
> On 2025-02-05 04:46, Marc Girondot via R-help wrote:
>> Dear R-help members
>> Since this morning (5/2/2025), I get an error when I try to load optimx package. I solve it and I send my solution but if someone has a better idea or understand what's happened, I will be most happy to know.
>> MacOSX 15.3
>> R 4.4.2
>> nlopt installed using
>> brew install nlopt
>> Here are the steps to produce the error and a solution to solve it. Some parts are in French. I don't know how to "ask" to R to not use French for some system messages.
>> Marc
>> > library("optimx")
>> Erreur : le chargement du package ou de l'espace de noms a ?chou? pour ?optimx? in dyn.load(file, DLLpath = DLLpath, ...) :
>> impossible de charger l'objet partag? '/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/ nloptr.so'?:
>> dlopen(/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so, 0x0006): Library not loaded: /opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib
>>   Referenced from: <2A7DAFE2-8123-3555-9569-F28214328E47> /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/ library/nloptr/libs/nloptr.so
>>   Reason: tried: '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/System/Volumes/Preboot/Cryptexes/OS/ opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/Library/Frameworks/R.framework/Resources/lib/libnlopt.0.dylib' (no such file), '/Library/Java/ JavaVirtualMachines/jdk-11.0.18+10/Contents/Home/lib/server/libnlopt.0.d
>> It seems that the file libnlopt.0.dylib is not find.
>> When I check in this folder, indeed it is not present:
>> ? lib % cd /opt/homebrew/opt/nlopt/lib
>> ? lib % ls
>> cmake            libnlopt.1.dylib    pkgconfig
>> libnlopt.1.0.0.dylib    libnlopt.dylib
>> I create a symlink:
>> ? lib % sudo ln -s libnlopt.1.dylib libnlopt.0.dylib
>> Password:
>> ? lib % ls -al
>> total 880
>> drwxr-xr-x   8 marcgirondot  admin     256  5 f?v 10:28 .
>> drwxr-xr-x  15 marcgirondot  admin     480  5 f?v 10:26 ..
>> drwxr-xr-x   3 marcgirondot  admin      96  4 f?v 19:29 cmake
>> lrwxr-xr-x   1 root          admin      16  5 f?v 10:28 libnlopt.0.dylib -> libnlopt.1.dylib
>> -r--r--r--   1 marcgirondot  admin  447936  5 f?v 10:26 libnlopt.1.0.0.dylib
>> lrwxr-xr-x   1 marcgirondot  admin      20  4 f?v 19:29 libnlopt.1.dylib -> libnlopt.1.0.0.dylib
>> lrwxr-xr-x   1 marcgirondot  admin      16  4 f?v 19:29 libnlopt.dylib -> libnlopt.1.dylib
>> drwxr-xr-x   3 marcgirondot  admin      96  5 f?v 10:26 pkgconfig
>> and I reinstall optimx from source
>> > remove.packages("optimx")
>> Elimination du package de ?/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library?
>> (car ?lib? n'est pas sp?cifi?)
>> > install.packages("optimx", type="source")
>> essai de l'URL 'https://cran.irsn.fr/src/contrib/optimx_2024-12.2.tar.gz'
>> Content type 'application/x-gzip' length 2259525 bytes (2.2 MB)
>> ==================================================
>> downloaded 2.2 MB
>> * installing *source* package ?optimx? ...
>> ** package ?optimx? correctement d?compress? et sommes MD5 v?rifi?es
>> ** using staged installation
>> ** R
>> ** inst
>> ** byte-compile and prepare package for lazy loading
>> ** help
>> *** installing help indices
>> ** building package indices
>> ** installing vignettes
>> ** testing if installed package can be loaded from temporary location
>> ** testing if installed package can be loaded from final location
>> ** testing if installed package keeps a record of temporary installation path
>> * DONE (optimx)
>> Les packages source t?l?charg?s sont dans
>>     ?/private/tmp/Rtmpsb2lpE/downloaded_packages?
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb  5 14:44:12 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Feb 2025 08:44:12 -0500
Subject: [R] Looking for simple line-splitting code
Message-ID: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>

If I have this object:

   x <- c("abc\ndef", "", "ghi")

and I write it to a file using `writeLines(x, "test.txt")`, my text 
editor sees a 5 line file:

   1: abc
   2: def
   3:
   4: ghi
   5:

which is what I'd expect:  the last line in the editor is empty.  If I 
use `readLines("test.txt")` on that file, I get the vector

   c("abc", "def", "", "ghi")

and all of that is fine.

What I'm looking for is simple code that modifies x to the `readLines()` 
output, without actually writing and reading it.

My first attempt doesn't work:

   unlist(strsplit(x, "\n"))

because it leaves out the blank line 3.  I can fix that with this ugly code:

   lines <- strsplit(x, "\n")
   lines[sapply(lines, length) == 0] <- list("")
   lines <- unlist(lines)

Surely there's a simpler way to do this?  I'd like to use just base 
functions, no other packages.

Duncan Murdoch


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Feb  5 14:52:08 2025
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 5 Feb 2025 13:52:08 +0000
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
Message-ID: <8597ae86-ee91-4558-9990-08628b035950@sapo.pt>

?s 13:44 de 05/02/2025, Duncan Murdoch escreveu:
> If I have this object:
> 
>  ? x <- c("abc\ndef", "", "ghi")
> 
> and I write it to a file using `writeLines(x, "test.txt")`, my text 
> editor sees a 5 line file:
> 
>  ? 1: abc
>  ? 2: def
>  ? 3:
>  ? 4: ghi
>  ? 5:
> 
> which is what I'd expect:? the last line in the editor is empty.? If I 
> use `readLines("test.txt")` on that file, I get the vector
> 
>  ? c("abc", "def", "", "ghi")
> 
> and all of that is fine.
> 
> What I'm looking for is simple code that modifies x to the `readLines()` 
> output, without actually writing and reading it.
> 
> My first attempt doesn't work:
> 
>  ? unlist(strsplit(x, "\n"))
> 
> because it leaves out the blank line 3.? I can fix that with this ugly 
> code:
> 
>  ? lines <- strsplit(x, "\n")
>  ? lines[sapply(lines, length) == 0] <- list("")
>  ? lines <- unlist(lines)
> 
> Surely there's a simpler way to do this?? I'd like to use just base 
> functions, no other packages.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting- 
> guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Use ?textConnection.
The 5th line is left out, just like in your code.


x <- c("abc\ndef", "", "ghi")
x |> textConnection() |> readLines()
# [1] "abc" "def" ""    "ghi"


Hope this helps,

Rui Barradas



-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From pd@|gd @end|ng |rom gm@||@com  Wed Feb  5 15:13:00 2025
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 5 Feb 2025 15:13:00 +0100
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
Message-ID: <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>

This also seems to work:

> strsplit(paste(x,collapse="\n"),"\n")[[1]]
[1] "abc" "def" ""    "ghi"


> On 5 Feb 2025, at 14:44 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> If I have this object:
> 
>  x <- c("abc\ndef", "", "ghi")
> 
> and I write it to a file using `writeLines(x, "test.txt")`, my text editor sees a 5 line file:
> 
>  1: abc
>  2: def
>  3:
>  4: ghi
>  5:
> 
> which is what I'd expect:  the last line in the editor is empty.  If I use `readLines("test.txt")` on that file, I get the vector
> 
>  c("abc", "def", "", "ghi")
> 
> and all of that is fine.
> 
> What I'm looking for is simple code that modifies x to the `readLines()` output, without actually writing and reading it.
> 
> My first attempt doesn't work:
> 
>  unlist(strsplit(x, "\n"))
> 
> because it leaves out the blank line 3.  I can fix that with this ugly code:
> 
>  lines <- strsplit(x, "\n")
>  lines[sapply(lines, length) == 0] <- list("")
>  lines <- unlist(lines)
> 
> Surely there's a simpler way to do this?  I'd like to use just base functions, no other packages.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@@hr@ng@ @end|ng |rom y@hoo@com  Wed Feb  5 15:19:52 2025
From: m@@hr@ng@ @end|ng |rom y@hoo@com (Mohammad Tanvir Ahamed)
Date: Wed, 5 Feb 2025 14:19:52 +0000 (UTC)
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
Message-ID: <753785940.8791528.1738765192014@mail.yahoo.com>

x <- c("abc\ndef", "", "ghi")

unlist(strsplit(gsub("^$", "\n", x), "\n"))

or?

x %>%
? gsub("^$", "\n", .) %>%
? strsplit("\n") %>%
? unlist()


Regards.............
Tanvir Ahamed 
Stockholm, Sweden???? |??mashranga at yahoo.com 

On Wednesday, February 5, 2025 at 02:44:37 PM GMT+1, Duncan Murdoch <murdoch.duncan at gmail.com> wrote: 

If I have this object:

? x <- c("abc\ndef", "", "ghi")

and I write it to a file using `writeLines(x, "test.txt")`, my text 
editor sees a 5 line file:

? 1: abc
? 2: def
? 3:
? 4: ghi
? 5:

which is what I'd expect:? the last line in the editor is empty.? If I 
use `readLines("test.txt")` on that file, I get the vector

? c("abc", "def", "", "ghi")

and all of that is fine.

What I'm looking for is simple code that modifies x to the `readLines()` 
output, without actually writing and reading it.

My first attempt doesn't work:

? unlist(strsplit(x, "\n"))

because it leaves out the blank line 3.? I can fix that with this ugly code:

? lines <- strsplit(x, "\n")
? lines[sapply(lines, length) == 0] <- list("")
? lines <- unlist(lines)

Surely there's a simpler way to do this?? I'd like to use just base 
functions, no other packages.

Duncan Murdoch

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb  5 15:35:24 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Feb 2025 09:35:24 -0500
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
Message-ID: <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>

Thanks to Rui, Peter and Tanvir!  Peter's seems to be the fastest of the 
3 suggestions so far on the little test case, but on the real data 
(where x contains several thousand lines), Rui's seems best.

Duncan

On 2025-02-05 9:13 a.m., peter dalgaard wrote:
> This also seems to work:
> 
>> strsplit(paste(x,collapse="\n"),"\n")[[1]]
> [1] "abc" "def" ""    "ghi"
> 
> 
>> On 5 Feb 2025, at 14:44 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> If I have this object:
>>
>>   x <- c("abc\ndef", "", "ghi")
>>
>> and I write it to a file using `writeLines(x, "test.txt")`, my text editor sees a 5 line file:
>>
>>   1: abc
>>   2: def
>>   3:
>>   4: ghi
>>   5:
>>
>> which is what I'd expect:  the last line in the editor is empty.  If I use `readLines("test.txt")` on that file, I get the vector
>>
>>   c("abc", "def", "", "ghi")
>>
>> and all of that is fine.
>>
>> What I'm looking for is simple code that modifies x to the `readLines()` output, without actually writing and reading it.
>>
>> My first attempt doesn't work:
>>
>>   unlist(strsplit(x, "\n"))
>>
>> because it leaves out the blank line 3.  I can fix that with this ugly code:
>>
>>   lines <- strsplit(x, "\n")
>>   lines[sapply(lines, length) == 0] <- list("")
>>   lines <- unlist(lines)
>>
>> Surely there's a simpler way to do this?  I'd like to use just base functions, no other packages.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From e@ @end|ng |rom enr|co@chum@nn@net  Wed Feb  5 20:17:58 2025
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Wed, 05 Feb 2025 20:17:58 +0100
Subject: [R] R CMD check error: File `inconsolata.sty' not found
In-Reply-To: <9141AF1E-5E6B-4786-8BE5-203F594C28E8@hotmail.com> (Naresh
 Gurbuxani's message of "Sun, 2 Feb 2025 14:58:31 +0000")
References: <9141AF1E-5E6B-4786-8BE5-203F594C28E8@hotmail.com>
Message-ID: <87y0ykp5eh.fsf@enricoschumann.net>

On Sun, 02 Feb 2025, Naresh Gurbuxani writes:

> R CMD check <package> gives me below message at the
> end.  There does not seem to be a problem with my TeX
> installation.  Is it possible that R CMD check is not
> looking in the correct location?  How can this problem
> be fixed?
>
> Thanks,
> Naresh
>
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! LaTeX Error: File `inconsolata.sty' not found.
>
> Type X to quit or <RETURN> to proceed,
> or enter new name. (Default extension: sty)
>
> ! Emergency stop.
> <read *> 
>          
> l.326 ^^M
>          
> !  ==> Fatal error occurred, no output PDF file produced!
> * checking PDF version of manual without index ... OK
> * DONE
>
> My Mac has the latest version of TeX installed from texlive.  Below are top few lines from running tlmgr conf
>
> =========================== version information ==========================
> tlmgr revision 73493 (2025-01-17 23:28:29 +0100)
> tlmgr using installation: /usr/local/texlive/2024
> TeX Live (https://tug.org/texlive) version 2024
> ==================== executables found by searching PATH =================
> PATH: /usr/local/texlive/2024/bin/universal-darwin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/texlive/2024/bin/universal-darwin
> dvipdfmx:  /usr/local/texlive/2024/bin/universal-darwin/dvipdfmx
> dvips:     /usr/local/texlive/2024/bin/universal-darwin/dvips
> fmtutil:   /usr/local/texlive/2024/bin/universal-darwin/fmtutil
> kpsewhich: /usr/local/texlive/2024/bin/universal-darwin/kpsewhich
> luatex:    /usr/local/texlive/2024/bin/universal-darwin/luatex
> mktexpk:   /usr/local/texlive/2024/bin/universal-darwin/mktexpk
> pdftex:    /usr/local/texlive/2024/bin/universal-darwin/pdftex
> tex:       /usr/local/texlive/2024/bin/universal-darwin/tex
> tlmgr:     /usr/local/texlive/2024/bin/universal-darwin/tlmgr
> updmap:    /usr/local/texlive/2024/bin/universal-darwin/updmap
> xetex:     /usr/local/texlive/2024/bin/universal-darwin/xetex
>
> On the command line, I tried updating incosolata package
>
> bash-3.2$ sudo tlmgr install inconsolata
> Password:
> tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
> tlmgr install: package already present: inconsolata
>
> bash-3.2$ sudo tlmgr update inconsolata
> tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
> tlmgr: saving backups to /usr/local/texlive/2024/tlpkg/backups
> tlmgr: no updates available

What does 

     kpsewhich inconsolata.sty

(on the command line) say?  (It should show the
location of the file.)

The 'Installation and Administration' manual briefly
discusses how to build the manual for a package, also
without 'inconsolata':

  https://cran.r-project.org/doc/manuals/R-admin.html#Making-the-manuals


-- 
Enrico Schumann
Lucerne, Switzerland
https://enricoschumann.net


From pd@|gd @end|ng |rom gm@||@com  Wed Feb  5 21:27:09 2025
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 5 Feb 2025 21:27:09 +0100
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
 <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>
Message-ID: <17DCA5E2-A799-484C-A1B8-E2F4E8BD94CC@gmail.com>

A 3rd option could be

scan(text=x, what="", blank.lines.skip=FALSE)

(all because readLines() doesn't obey the text=x convention, perhaps it should? I'm unsure whether the textConnection is left open in Rui's method.)

-pd

> On 5 Feb 2025, at 15:35 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> Thanks to Rui, Peter and Tanvir!  Peter's seems to be the fastest of the 3 suggestions so far on the little test case, but on the real data (where x contains several thousand lines), Rui's seems best.
> 
> Duncan
> 
> On 2025-02-05 9:13 a.m., peter dalgaard wrote:
>> This also seems to work:
>>> strsplit(paste(x,collapse="\n"),"\n")[[1]]
>> [1] "abc" "def" ""    "ghi"
>>> On 5 Feb 2025, at 14:44 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> 
>>> If I have this object:
>>> 
>>>  x <- c("abc\ndef", "", "ghi")
>>> 
>>> and I write it to a file using `writeLines(x, "test.txt")`, my text editor sees a 5 line file:
>>> 
>>>  1: abc
>>>  2: def
>>>  3:
>>>  4: ghi
>>>  5:
>>> 
>>> which is what I'd expect:  the last line in the editor is empty.  If I use `readLines("test.txt")` on that file, I get the vector
>>> 
>>>  c("abc", "def", "", "ghi")
>>> 
>>> and all of that is fine.
>>> 
>>> What I'm looking for is simple code that modifies x to the `readLines()` output, without actually writing and reading it.
>>> 
>>> My first attempt doesn't work:
>>> 
>>>  unlist(strsplit(x, "\n"))
>>> 
>>> because it leaves out the blank line 3.  I can fix that with this ugly code:
>>> 
>>>  lines <- strsplit(x, "\n")
>>>  lines[sapply(lines, length) == 0] <- list("")
>>>  lines <- unlist(lines)
>>> 
>>> Surely there's a simpler way to do this?  I'd like to use just base functions, no other packages.
>>> 
>>> Duncan Murdoch
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ro||turner @end|ng |rom po@teo@net  Wed Feb  5 23:20:45 2025
From: ro||turner @end|ng |rom po@teo@net (Rolf Turner)
Date: Wed,  5 Feb 2025 22:20:45 +0000
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
Message-ID: <20250206112045.43e9dea8@new-hp>


On Wed, 5 Feb 2025 08:44:12 -0500
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> If I have this object:
> 
>    x <- c("abc\ndef", "", "ghi")
> 
> and I write it to a file using `writeLines(x, "test.txt")`, my text 
> editor sees a 5 line file:
> 
>    1: abc
>    2: def
>    3:
>    4: ghi
>    5:
> 
> which is what I'd expect:  the last line in the editor is empty.If I 
> use `readLines("test.txt")` on that file, I get the vector
> 
>    c("abc", "def", "", "ghi")


<SNIP>

Apologies for muddying the waters with my ignorance, but why would you
expect a 5 line file?   I would expect a 4 line file, and that is
indeed what I get when I try the code in question.

If I append an empty line at the end of my test.txt and then
apply readLines() to that file, I get [1] "abc" "def" ""    "ghi" "",
again as *I* would expect.

What am I missing?  Sorry for being a thicko.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:readLines("test.txt")
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Feb  5 23:38:48 2025
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 5 Feb 2025 22:38:48 +0000
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <17DCA5E2-A799-484C-A1B8-E2F4E8BD94CC@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
 <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>
 <17DCA5E2-A799-484C-A1B8-E2F4E8BD94CC@gmail.com>
Message-ID: <1f352f99-1651-43ef-9833-681ee7b57d8a@sapo.pt>

Hello,

Inline.

?s 20:27 de 05/02/2025, peter dalgaard escreveu:
> A 3rd option could be
> 
> scan(text=x, what="", blank.lines.skip=FALSE)
> 
> (all because readLines() doesn't obey the text=x convention, perhaps it should? I'm unsure whether the textConnection is left open in Rui's method.)

No, it is not left open. Use ?showConnections to check it.


x <- c("abc\ndef", "", "ghi")

x |> textConnection() |> readLines()
showConnections()

# this creates and opens a connection
tc <- textConnection(x)
showConnections()
readLines(tc)
showConnections()
close(tc)
showConnections()


Hope this helps,

Rui Barradas

> 
> -pd
> 
>> On 5 Feb 2025, at 15:35 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> Thanks to Rui, Peter and Tanvir!  Peter's seems to be the fastest of the 3 suggestions so far on the little test case, but on the real data (where x contains several thousand lines), Rui's seems best.
>>
>> Duncan
>>
>> On 2025-02-05 9:13 a.m., peter dalgaard wrote:
>>> This also seems to work:
>>>> strsplit(paste(x,collapse="\n"),"\n")[[1]]
>>> [1] "abc" "def" ""    "ghi"
>>>> On 5 Feb 2025, at 14:44 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>
>>>> If I have this object:
>>>>
>>>>   x <- c("abc\ndef", "", "ghi")
>>>>
>>>> and I write it to a file using `writeLines(x, "test.txt")`, my text editor sees a 5 line file:
>>>>
>>>>   1: abc
>>>>   2: def
>>>>   3:
>>>>   4: ghi
>>>>   5:
>>>>
>>>> which is what I'd expect:  the last line in the editor is empty.  If I use `readLines("test.txt")` on that file, I get the vector
>>>>
>>>>   c("abc", "def", "", "ghi")
>>>>
>>>> and all of that is fine.
>>>>
>>>> What I'm looking for is simple code that modifies x to the `readLines()` output, without actually writing and reading it.
>>>>
>>>> My first attempt doesn't work:
>>>>
>>>>   unlist(strsplit(x, "\n"))
>>>>
>>>> because it leaves out the blank line 3.  I can fix that with this ugly code:
>>>>
>>>>   lines <- strsplit(x, "\n")
>>>>   lines[sapply(lines, length) == 0] <- list("")
>>>>   lines <- unlist(lines)
>>>>
>>>> Surely there's a simpler way to do this?  I'd like to use just base functions, no other packages.
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
> 


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb  6 00:04:30 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Feb 2025 18:04:30 -0500
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <20250206112045.43e9dea8@new-hp>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <20250206112045.43e9dea8@new-hp>
Message-ID: <b17ed335-4457-4151-b4f1-ba00fa130bd5@gmail.com>

On 2025-02-05 5:20 p.m., Rolf Turner wrote:
> 
> On Wed, 5 Feb 2025 08:44:12 -0500
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> If I have this object:
>>
>>     x <- c("abc\ndef", "", "ghi")
>>
>> and I write it to a file using `writeLines(x, "test.txt")`, my text
>> editor sees a 5 line file:
>>
>>     1: abc
>>     2: def
>>     3:
>>     4: ghi
>>     5:
>>
>> which is what I'd expect:  the last line in the editor is empty.If I
>> use `readLines("test.txt")` on that file, I get the vector
>>
>>     c("abc", "def", "", "ghi")
> 
> 
> <SNIP>
> 
> Apologies for muddying the waters with my ignorance, but why would you
> expect a 5 line file?   I would expect a 4 line file, and that is
> indeed what I get when I try the code in question.
> 
> If I append an empty line at the end of my test.txt and then
> apply readLines() to that file, I get [1] "abc" "def" ""    "ghi" "",
> again as *I* would expect.
> 
> What am I missing?  Sorry for being a thicko.
> 

That fifth line is more a function of the editor (RStudio) than the 
file.  The last line ends with a newline.  The editor shows this by 
including a blank 5th line.  If the last line just stopped at the last 
letter, the editor would display it as a 4 line file.

Duncan Murdoch


