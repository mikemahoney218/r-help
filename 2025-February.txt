From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Sun Feb  2 15:58:31 2025
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Sun, 2 Feb 2025 14:58:31 +0000
Subject: [R] R CMD check error: File `inconsolata.sty' not found
Message-ID: <9141AF1E-5E6B-4786-8BE5-203F594C28E8@hotmail.com>

R CMD check <package> gives me below message at the end.  There does not seem to be a problem with my TeX installation.  Is it possible that R CMD check is not looking in the correct location?  How can this problem be fixed?

Thanks,
Naresh

* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! LaTeX Error: File `inconsolata.sty' not found.

Type X to quit or <RETURN> to proceed,
or enter new name. (Default extension: sty)

! Emergency stop.
<read *> 
         
l.326 ^^M
         
!  ==> Fatal error occurred, no output PDF file produced!
* checking PDF version of manual without index ... OK
* DONE

My Mac has the latest version of TeX installed from texlive.  Below are top few lines from running tlmgr conf

=========================== version information ==========================
tlmgr revision 73493 (2025-01-17 23:28:29 +0100)
tlmgr using installation: /usr/local/texlive/2024
TeX Live (https://tug.org/texlive) version 2024
==================== executables found by searching PATH =================
PATH: /usr/local/texlive/2024/bin/universal-darwin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/texlive/2024/bin/universal-darwin
dvipdfmx:  /usr/local/texlive/2024/bin/universal-darwin/dvipdfmx
dvips:     /usr/local/texlive/2024/bin/universal-darwin/dvips
fmtutil:   /usr/local/texlive/2024/bin/universal-darwin/fmtutil
kpsewhich: /usr/local/texlive/2024/bin/universal-darwin/kpsewhich
luatex:    /usr/local/texlive/2024/bin/universal-darwin/luatex
mktexpk:   /usr/local/texlive/2024/bin/universal-darwin/mktexpk
pdftex:    /usr/local/texlive/2024/bin/universal-darwin/pdftex
tex:       /usr/local/texlive/2024/bin/universal-darwin/tex
tlmgr:     /usr/local/texlive/2024/bin/universal-darwin/tlmgr
updmap:    /usr/local/texlive/2024/bin/universal-darwin/updmap
xetex:     /usr/local/texlive/2024/bin/universal-darwin/xetex

On the command line, I tried updating incosolata package

bash-3.2$ sudo tlmgr install inconsolata
Password:
tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
tlmgr install: package already present: inconsolata

bash-3.2$ sudo tlmgr update inconsolata
tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
tlmgr: saving backups to /usr/local/texlive/2024/tlpkg/backups
tlmgr: no updates available

From m@rc_grt @end|ng |rom y@hoo@|r  Wed Feb  5 10:46:22 2025
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Wed, 5 Feb 2025 10:46:22 +0100
Subject: [R] Error when loading optimx package and a solution
References: <21fb5b76-8add-4a1a-b075-38f6c358ed1a.ref@yahoo.fr>
Message-ID: <21fb5b76-8add-4a1a-b075-38f6c358ed1a@yahoo.fr>

Dear R-help members

Since this morning (5/2/2025), I get an error when I try to load optimx 
package. I solve it and I send my solution but if someone has a better 
idea or understand what's happened, I will be most happy to know.

MacOSX 15.3

R 4.4.2

nlopt installed using
brew install nlopt

Here are the steps to produce the error and a solution to solve it. Some 
parts are in French. I don't know how to "ask" to R to not use French 
for some system messages.

Marc


 > library("optimx")
Erreur : le chargement du package ou de l'espace de noms a ?chou? pour 
?optimx? in dyn.load(file, DLLpath = DLLpath, ...) :
impossible de charger l'objet partag? 
'/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so'?:
dlopen(/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so, 
0x0006): Library not loaded: /opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib
 ? Referenced from: <2A7DAFE2-8123-3555-9569-F28214328E47> 
/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so
 ? Reason: tried: '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no 
such file), 
'/System/Volumes/Preboot/Cryptexes/OS/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' 
(no such file), '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such 
file), '/Library/Frameworks/R.framework/Resources/lib/libnlopt.0.dylib' 
(no such file), 
'/Library/Java/JavaVirtualMachines/jdk-11.0.18+10/Contents/Home/lib/server/libnlopt.0.d
It seems that the file libnlopt.0.dylib is not find.

When I check in this folder, indeed it is not present:

? lib % cd /opt/homebrew/opt/nlopt/lib
? lib % ls
cmake??????????? libnlopt.1.dylib??? pkgconfig
libnlopt.1.0.0.dylib??? libnlopt.dylib

I create a symlink:

? lib % sudo ln -s libnlopt.1.dylib libnlopt.0.dylib
Password:
? lib % ls -al
total 880
drwxr-xr-x?? 8 marcgirondot? admin???? 256? 5 f?v 10:28 .
drwxr-xr-x? 15 marcgirondot? admin???? 480? 5 f?v 10:26 ..
drwxr-xr-x?? 3 marcgirondot? admin????? 96? 4 f?v 19:29 cmake
lrwxr-xr-x?? 1 root????????? admin????? 16? 5 f?v 10:28 libnlopt.0.dylib 
-> libnlopt.1.dylib
-r--r--r--?? 1 marcgirondot? admin? 447936? 5 f?v 10:26 libnlopt.1.0.0.dylib
lrwxr-xr-x?? 1 marcgirondot? admin????? 20? 4 f?v 19:29 libnlopt.1.dylib 
-> libnlopt.1.0.0.dylib
lrwxr-xr-x?? 1 marcgirondot? admin????? 16? 4 f?v 19:29 libnlopt.dylib 
-> libnlopt.1.dylib
drwxr-xr-x?? 3 marcgirondot? admin????? 96? 5 f?v 10:26 pkgconfig

and I reinstall optimx from source

 > remove.packages("optimx")
Elimination du package de 
?/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library?
(car ?lib? n'est pas sp?cifi?)
 > install.packages("optimx", type="source")
essai de l'URL 'https://cran.irsn.fr/src/contrib/optimx_2024-12.2.tar.gz'
Content type 'application/x-gzip' length 2259525 bytes (2.2 MB)
==================================================
downloaded 2.2 MB

* installing *source* package ?optimx? ...
** package ?optimx? correctement d?compress? et sommes MD5 v?rifi?es
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation 
path
* DONE (optimx)

Les packages source t?l?charg?s sont dans
 ??? ?/private/tmp/Rtmpsb2lpE/downloaded_packages?


From pro|jcn@@h @end|ng |rom gm@||@com  Wed Feb  5 14:05:21 2025
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Wed, 5 Feb 2025 08:05:21 -0500
Subject: [R] Error when loading optimx package and a solution
In-Reply-To: <21fb5b76-8add-4a1a-b075-38f6c358ed1a@yahoo.fr>
References: <21fb5b76-8add-4a1a-b075-38f6c358ed1a.ref@yahoo.fr>
 <21fb5b76-8add-4a1a-b075-38f6c358ed1a@yahoo.fr>
Message-ID: <3c90a854-2fbf-4423-9966-ab0ab71351d0@gmail.com>

Hi,

That looks like the dependency on nlopt for nloptr (used by several of the
solvers) was somehow missing. There is SUPPOSED to be a check of what is installed
and a warning issued, but possibly one got missed. Even some base packages
do sometimes need the external libraries manually installed, and I find I'm
doing that after various OS updates or resets when the long term support
runs out.

Some updates and minor extensions to optimx, mostly convenience features or
checks that dependencies available, are on the github version, which is a bit
ahead of CRAN (https://github.com/nashjc/optimx). I find doing all the checks
and revdeps for the package now getting heavy enough that it is worth waiting
a bit unless there's a critical bug, which I don't think there has been for
a long while.

I don't have a Mac, and am currently away from home (actually in Nice, FR for
a couple of weeks), but would be interested in knowing if the github version
needs an independent install of nlopt on Mac, or indeed on any platform.

Cheers,

John Nash
maintainer, optimx


On 2025-02-05 04:46, Marc Girondot via R-help wrote:
> Dear R-help members
> 
> Since this morning (5/2/2025), I get an error when I try to load optimx package. I solve it and I send my solution but 
> if someone has a better idea or understand what's happened, I will be most happy to know.
> 
> MacOSX 15.3
> 
> R 4.4.2
> 
> nlopt installed using
> brew install nlopt
> 
> Here are the steps to produce the error and a solution to solve it. Some parts are in French. I don't know how to "ask" 
> to R to not use French for some system messages.
> 
> Marc
> 
> 
>  > library("optimx")
> Erreur : le chargement du package ou de l'espace de noms a ?chou? pour ?optimx? in dyn.load(file, DLLpath = DLLpath, ...) :
> impossible de charger l'objet partag? '/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/ 
> nloptr.so'?:
> dlopen(/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so, 0x0006): Library not 
> loaded: /opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib
>  ? Referenced from: <2A7DAFE2-8123-3555-9569-F28214328E47> /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/ 
> library/nloptr/libs/nloptr.so
>  ? Reason: tried: '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/System/Volumes/Preboot/Cryptexes/OS/ 
> opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such 
> file), '/Library/Frameworks/R.framework/Resources/lib/libnlopt.0.dylib' (no such file), '/Library/Java/ 
> JavaVirtualMachines/jdk-11.0.18+10/Contents/Home/lib/server/libnlopt.0.d
> It seems that the file libnlopt.0.dylib is not find.
> 
> When I check in this folder, indeed it is not present:
> 
> ? lib % cd /opt/homebrew/opt/nlopt/lib
> ? lib % ls
> cmake??????????? libnlopt.1.dylib??? pkgconfig
> libnlopt.1.0.0.dylib??? libnlopt.dylib
> 
> I create a symlink:
> 
> ? lib % sudo ln -s libnlopt.1.dylib libnlopt.0.dylib
> Password:
> ? lib % ls -al
> total 880
> drwxr-xr-x?? 8 marcgirondot? admin???? 256? 5 f?v 10:28 .
> drwxr-xr-x? 15 marcgirondot? admin???? 480? 5 f?v 10:26 ..
> drwxr-xr-x?? 3 marcgirondot? admin????? 96? 4 f?v 19:29 cmake
> lrwxr-xr-x?? 1 root????????? admin????? 16? 5 f?v 10:28 libnlopt.0.dylib -> libnlopt.1.dylib
> -r--r--r--?? 1 marcgirondot? admin? 447936? 5 f?v 10:26 libnlopt.1.0.0.dylib
> lrwxr-xr-x?? 1 marcgirondot? admin????? 20? 4 f?v 19:29 libnlopt.1.dylib -> libnlopt.1.0.0.dylib
> lrwxr-xr-x?? 1 marcgirondot? admin????? 16? 4 f?v 19:29 libnlopt.dylib -> libnlopt.1.dylib
> drwxr-xr-x?? 3 marcgirondot? admin????? 96? 5 f?v 10:26 pkgconfig
> 
> and I reinstall optimx from source
> 
>  > remove.packages("optimx")
> Elimination du package de ?/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library?
> (car ?lib? n'est pas sp?cifi?)
>  > install.packages("optimx", type="source")
> essai de l'URL 'https://cran.irsn.fr/src/contrib/optimx_2024-12.2.tar.gz'
> Content type 'application/x-gzip' length 2259525 bytes (2.2 MB)
> ==================================================
> downloaded 2.2 MB
> 
> * installing *source* package ?optimx? ...
> ** package ?optimx? correctement d?compress? et sommes MD5 v?rifi?es
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation path
> * DONE (optimx)
> 
> Les packages source t?l?charg?s sont dans
>  ??? ?/private/tmp/Rtmpsb2lpE/downloaded_packages?
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pd@|gd @end|ng |rom gm@||@com  Wed Feb  5 14:39:32 2025
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 5 Feb 2025 14:39:32 +0100
Subject: [R] Error when loading optimx package and a solution
In-Reply-To: <3c90a854-2fbf-4423-9966-ab0ab71351d0@gmail.com>
References: <21fb5b76-8add-4a1a-b075-38f6c358ed1a.ref@yahoo.fr>
 <21fb5b76-8add-4a1a-b075-38f6c358ed1a@yahoo.fr>
 <3c90a854-2fbf-4423-9966-ab0ab71351d0@gmail.com>
Message-ID: <79CB359F-C07F-4534-BEC8-9C6D7792630E@gmail.com>

I think the operative words here are "brew install". I.e., this is a homebrew installation, and thus nothing to do with CRAN.

Nothing wrong with homebrew as far as R Core and the CRAN team knows, we just don't support it, so you have to hope for response from other homebrew users.


- Peter D.


> On 5 Feb 2025, at 14:05 , J C Nash <profjcnash at gmail.com> wrote:
> 
> Hi,
> 
> That looks like the dependency on nlopt for nloptr (used by several of the
> solvers) was somehow missing. There is SUPPOSED to be a check of what is installed
> and a warning issued, but possibly one got missed. Even some base packages
> do sometimes need the external libraries manually installed, and I find I'm
> doing that after various OS updates or resets when the long term support
> runs out.
> 
> Some updates and minor extensions to optimx, mostly convenience features or
> checks that dependencies available, are on the github version, which is a bit
> ahead of CRAN (https://github.com/nashjc/optimx). I find doing all the checks
> and revdeps for the package now getting heavy enough that it is worth waiting
> a bit unless there's a critical bug, which I don't think there has been for
> a long while.
> 
> I don't have a Mac, and am currently away from home (actually in Nice, FR for
> a couple of weeks), but would be interested in knowing if the github version
> needs an independent install of nlopt on Mac, or indeed on any platform.
> 
> Cheers,
> 
> John Nash
> maintainer, optimx
> 
> 
> On 2025-02-05 04:46, Marc Girondot via R-help wrote:
>> Dear R-help members
>> Since this morning (5/2/2025), I get an error when I try to load optimx package. I solve it and I send my solution but if someone has a better idea or understand what's happened, I will be most happy to know.
>> MacOSX 15.3
>> R 4.4.2
>> nlopt installed using
>> brew install nlopt
>> Here are the steps to produce the error and a solution to solve it. Some parts are in French. I don't know how to "ask" to R to not use French for some system messages.
>> Marc
>> > library("optimx")
>> Erreur : le chargement du package ou de l'espace de noms a ?chou? pour ?optimx? in dyn.load(file, DLLpath = DLLpath, ...) :
>> impossible de charger l'objet partag? '/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/ nloptr.so'?:
>> dlopen(/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/nloptr/libs/nloptr.so, 0x0006): Library not loaded: /opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib
>>   Referenced from: <2A7DAFE2-8123-3555-9569-F28214328E47> /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/ library/nloptr/libs/nloptr.so
>>   Reason: tried: '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/System/Volumes/Preboot/Cryptexes/OS/ opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/opt/homebrew/opt/nlopt/lib/libnlopt.0.dylib' (no such file), '/Library/Frameworks/R.framework/Resources/lib/libnlopt.0.dylib' (no such file), '/Library/Java/ JavaVirtualMachines/jdk-11.0.18+10/Contents/Home/lib/server/libnlopt.0.d
>> It seems that the file libnlopt.0.dylib is not find.
>> When I check in this folder, indeed it is not present:
>> ? lib % cd /opt/homebrew/opt/nlopt/lib
>> ? lib % ls
>> cmake            libnlopt.1.dylib    pkgconfig
>> libnlopt.1.0.0.dylib    libnlopt.dylib
>> I create a symlink:
>> ? lib % sudo ln -s libnlopt.1.dylib libnlopt.0.dylib
>> Password:
>> ? lib % ls -al
>> total 880
>> drwxr-xr-x   8 marcgirondot  admin     256  5 f?v 10:28 .
>> drwxr-xr-x  15 marcgirondot  admin     480  5 f?v 10:26 ..
>> drwxr-xr-x   3 marcgirondot  admin      96  4 f?v 19:29 cmake
>> lrwxr-xr-x   1 root          admin      16  5 f?v 10:28 libnlopt.0.dylib -> libnlopt.1.dylib
>> -r--r--r--   1 marcgirondot  admin  447936  5 f?v 10:26 libnlopt.1.0.0.dylib
>> lrwxr-xr-x   1 marcgirondot  admin      20  4 f?v 19:29 libnlopt.1.dylib -> libnlopt.1.0.0.dylib
>> lrwxr-xr-x   1 marcgirondot  admin      16  4 f?v 19:29 libnlopt.dylib -> libnlopt.1.dylib
>> drwxr-xr-x   3 marcgirondot  admin      96  5 f?v 10:26 pkgconfig
>> and I reinstall optimx from source
>> > remove.packages("optimx")
>> Elimination du package de ?/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library?
>> (car ?lib? n'est pas sp?cifi?)
>> > install.packages("optimx", type="source")
>> essai de l'URL 'https://cran.irsn.fr/src/contrib/optimx_2024-12.2.tar.gz'
>> Content type 'application/x-gzip' length 2259525 bytes (2.2 MB)
>> ==================================================
>> downloaded 2.2 MB
>> * installing *source* package ?optimx? ...
>> ** package ?optimx? correctement d?compress? et sommes MD5 v?rifi?es
>> ** using staged installation
>> ** R
>> ** inst
>> ** byte-compile and prepare package for lazy loading
>> ** help
>> *** installing help indices
>> ** building package indices
>> ** installing vignettes
>> ** testing if installed package can be loaded from temporary location
>> ** testing if installed package can be loaded from final location
>> ** testing if installed package keeps a record of temporary installation path
>> * DONE (optimx)
>> Les packages source t?l?charg?s sont dans
>>     ?/private/tmp/Rtmpsb2lpE/downloaded_packages?
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb  5 14:44:12 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Feb 2025 08:44:12 -0500
Subject: [R] Looking for simple line-splitting code
Message-ID: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>

If I have this object:

   x <- c("abc\ndef", "", "ghi")

and I write it to a file using `writeLines(x, "test.txt")`, my text 
editor sees a 5 line file:

   1: abc
   2: def
   3:
   4: ghi
   5:

which is what I'd expect:  the last line in the editor is empty.  If I 
use `readLines("test.txt")` on that file, I get the vector

   c("abc", "def", "", "ghi")

and all of that is fine.

What I'm looking for is simple code that modifies x to the `readLines()` 
output, without actually writing and reading it.

My first attempt doesn't work:

   unlist(strsplit(x, "\n"))

because it leaves out the blank line 3.  I can fix that with this ugly code:

   lines <- strsplit(x, "\n")
   lines[sapply(lines, length) == 0] <- list("")
   lines <- unlist(lines)

Surely there's a simpler way to do this?  I'd like to use just base 
functions, no other packages.

Duncan Murdoch


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Feb  5 14:52:08 2025
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 5 Feb 2025 13:52:08 +0000
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
Message-ID: <8597ae86-ee91-4558-9990-08628b035950@sapo.pt>

?s 13:44 de 05/02/2025, Duncan Murdoch escreveu:
> If I have this object:
> 
>  ? x <- c("abc\ndef", "", "ghi")
> 
> and I write it to a file using `writeLines(x, "test.txt")`, my text 
> editor sees a 5 line file:
> 
>  ? 1: abc
>  ? 2: def
>  ? 3:
>  ? 4: ghi
>  ? 5:
> 
> which is what I'd expect:? the last line in the editor is empty.? If I 
> use `readLines("test.txt")` on that file, I get the vector
> 
>  ? c("abc", "def", "", "ghi")
> 
> and all of that is fine.
> 
> What I'm looking for is simple code that modifies x to the `readLines()` 
> output, without actually writing and reading it.
> 
> My first attempt doesn't work:
> 
>  ? unlist(strsplit(x, "\n"))
> 
> because it leaves out the blank line 3.? I can fix that with this ugly 
> code:
> 
>  ? lines <- strsplit(x, "\n")
>  ? lines[sapply(lines, length) == 0] <- list("")
>  ? lines <- unlist(lines)
> 
> Surely there's a simpler way to do this?? I'd like to use just base 
> functions, no other packages.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting- 
> guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Use ?textConnection.
The 5th line is left out, just like in your code.


x <- c("abc\ndef", "", "ghi")
x |> textConnection() |> readLines()
# [1] "abc" "def" ""    "ghi"


Hope this helps,

Rui Barradas



-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From pd@|gd @end|ng |rom gm@||@com  Wed Feb  5 15:13:00 2025
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 5 Feb 2025 15:13:00 +0100
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
Message-ID: <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>

This also seems to work:

> strsplit(paste(x,collapse="\n"),"\n")[[1]]
[1] "abc" "def" ""    "ghi"


> On 5 Feb 2025, at 14:44 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> If I have this object:
> 
>  x <- c("abc\ndef", "", "ghi")
> 
> and I write it to a file using `writeLines(x, "test.txt")`, my text editor sees a 5 line file:
> 
>  1: abc
>  2: def
>  3:
>  4: ghi
>  5:
> 
> which is what I'd expect:  the last line in the editor is empty.  If I use `readLines("test.txt")` on that file, I get the vector
> 
>  c("abc", "def", "", "ghi")
> 
> and all of that is fine.
> 
> What I'm looking for is simple code that modifies x to the `readLines()` output, without actually writing and reading it.
> 
> My first attempt doesn't work:
> 
>  unlist(strsplit(x, "\n"))
> 
> because it leaves out the blank line 3.  I can fix that with this ugly code:
> 
>  lines <- strsplit(x, "\n")
>  lines[sapply(lines, length) == 0] <- list("")
>  lines <- unlist(lines)
> 
> Surely there's a simpler way to do this?  I'd like to use just base functions, no other packages.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@@hr@ng@ @end|ng |rom y@hoo@com  Wed Feb  5 15:19:52 2025
From: m@@hr@ng@ @end|ng |rom y@hoo@com (Mohammad Tanvir Ahamed)
Date: Wed, 5 Feb 2025 14:19:52 +0000 (UTC)
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
Message-ID: <753785940.8791528.1738765192014@mail.yahoo.com>

x <- c("abc\ndef", "", "ghi")

unlist(strsplit(gsub("^$", "\n", x), "\n"))

or?

x %>%
? gsub("^$", "\n", .) %>%
? strsplit("\n") %>%
? unlist()


Regards.............
Tanvir Ahamed 
Stockholm, Sweden???? |??mashranga at yahoo.com 

On Wednesday, February 5, 2025 at 02:44:37 PM GMT+1, Duncan Murdoch <murdoch.duncan at gmail.com> wrote: 

If I have this object:

? x <- c("abc\ndef", "", "ghi")

and I write it to a file using `writeLines(x, "test.txt")`, my text 
editor sees a 5 line file:

? 1: abc
? 2: def
? 3:
? 4: ghi
? 5:

which is what I'd expect:? the last line in the editor is empty.? If I 
use `readLines("test.txt")` on that file, I get the vector

? c("abc", "def", "", "ghi")

and all of that is fine.

What I'm looking for is simple code that modifies x to the `readLines()` 
output, without actually writing and reading it.

My first attempt doesn't work:

? unlist(strsplit(x, "\n"))

because it leaves out the blank line 3.? I can fix that with this ugly code:

? lines <- strsplit(x, "\n")
? lines[sapply(lines, length) == 0] <- list("")
? lines <- unlist(lines)

Surely there's a simpler way to do this?? I'd like to use just base 
functions, no other packages.

Duncan Murdoch

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb  5 15:35:24 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Feb 2025 09:35:24 -0500
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
Message-ID: <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>

Thanks to Rui, Peter and Tanvir!  Peter's seems to be the fastest of the 
3 suggestions so far on the little test case, but on the real data 
(where x contains several thousand lines), Rui's seems best.

Duncan

On 2025-02-05 9:13 a.m., peter dalgaard wrote:
> This also seems to work:
> 
>> strsplit(paste(x,collapse="\n"),"\n")[[1]]
> [1] "abc" "def" ""    "ghi"
> 
> 
>> On 5 Feb 2025, at 14:44 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> If I have this object:
>>
>>   x <- c("abc\ndef", "", "ghi")
>>
>> and I write it to a file using `writeLines(x, "test.txt")`, my text editor sees a 5 line file:
>>
>>   1: abc
>>   2: def
>>   3:
>>   4: ghi
>>   5:
>>
>> which is what I'd expect:  the last line in the editor is empty.  If I use `readLines("test.txt")` on that file, I get the vector
>>
>>   c("abc", "def", "", "ghi")
>>
>> and all of that is fine.
>>
>> What I'm looking for is simple code that modifies x to the `readLines()` output, without actually writing and reading it.
>>
>> My first attempt doesn't work:
>>
>>   unlist(strsplit(x, "\n"))
>>
>> because it leaves out the blank line 3.  I can fix that with this ugly code:
>>
>>   lines <- strsplit(x, "\n")
>>   lines[sapply(lines, length) == 0] <- list("")
>>   lines <- unlist(lines)
>>
>> Surely there's a simpler way to do this?  I'd like to use just base functions, no other packages.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From e@ @end|ng |rom enr|co@chum@nn@net  Wed Feb  5 20:17:58 2025
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Wed, 05 Feb 2025 20:17:58 +0100
Subject: [R] R CMD check error: File `inconsolata.sty' not found
In-Reply-To: <9141AF1E-5E6B-4786-8BE5-203F594C28E8@hotmail.com> (Naresh
 Gurbuxani's message of "Sun, 2 Feb 2025 14:58:31 +0000")
References: <9141AF1E-5E6B-4786-8BE5-203F594C28E8@hotmail.com>
Message-ID: <87y0ykp5eh.fsf@enricoschumann.net>

On Sun, 02 Feb 2025, Naresh Gurbuxani writes:

> R CMD check <package> gives me below message at the
> end.  There does not seem to be a problem with my TeX
> installation.  Is it possible that R CMD check is not
> looking in the correct location?  How can this problem
> be fixed?
>
> Thanks,
> Naresh
>
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! LaTeX Error: File `inconsolata.sty' not found.
>
> Type X to quit or <RETURN> to proceed,
> or enter new name. (Default extension: sty)
>
> ! Emergency stop.
> <read *> 
>          
> l.326 ^^M
>          
> !  ==> Fatal error occurred, no output PDF file produced!
> * checking PDF version of manual without index ... OK
> * DONE
>
> My Mac has the latest version of TeX installed from texlive.  Below are top few lines from running tlmgr conf
>
> =========================== version information ==========================
> tlmgr revision 73493 (2025-01-17 23:28:29 +0100)
> tlmgr using installation: /usr/local/texlive/2024
> TeX Live (https://tug.org/texlive) version 2024
> ==================== executables found by searching PATH =================
> PATH: /usr/local/texlive/2024/bin/universal-darwin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/texlive/2024/bin/universal-darwin
> dvipdfmx:  /usr/local/texlive/2024/bin/universal-darwin/dvipdfmx
> dvips:     /usr/local/texlive/2024/bin/universal-darwin/dvips
> fmtutil:   /usr/local/texlive/2024/bin/universal-darwin/fmtutil
> kpsewhich: /usr/local/texlive/2024/bin/universal-darwin/kpsewhich
> luatex:    /usr/local/texlive/2024/bin/universal-darwin/luatex
> mktexpk:   /usr/local/texlive/2024/bin/universal-darwin/mktexpk
> pdftex:    /usr/local/texlive/2024/bin/universal-darwin/pdftex
> tex:       /usr/local/texlive/2024/bin/universal-darwin/tex
> tlmgr:     /usr/local/texlive/2024/bin/universal-darwin/tlmgr
> updmap:    /usr/local/texlive/2024/bin/universal-darwin/updmap
> xetex:     /usr/local/texlive/2024/bin/universal-darwin/xetex
>
> On the command line, I tried updating incosolata package
>
> bash-3.2$ sudo tlmgr install inconsolata
> Password:
> tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
> tlmgr install: package already present: inconsolata
>
> bash-3.2$ sudo tlmgr update inconsolata
> tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
> tlmgr: saving backups to /usr/local/texlive/2024/tlpkg/backups
> tlmgr: no updates available

What does 

     kpsewhich inconsolata.sty

(on the command line) say?  (It should show the
location of the file.)

The 'Installation and Administration' manual briefly
discusses how to build the manual for a package, also
without 'inconsolata':

  https://cran.r-project.org/doc/manuals/R-admin.html#Making-the-manuals


-- 
Enrico Schumann
Lucerne, Switzerland
https://enricoschumann.net


From pd@|gd @end|ng |rom gm@||@com  Wed Feb  5 21:27:09 2025
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 5 Feb 2025 21:27:09 +0100
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
 <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>
Message-ID: <17DCA5E2-A799-484C-A1B8-E2F4E8BD94CC@gmail.com>

A 3rd option could be

scan(text=x, what="", blank.lines.skip=FALSE)

(all because readLines() doesn't obey the text=x convention, perhaps it should? I'm unsure whether the textConnection is left open in Rui's method.)

-pd

> On 5 Feb 2025, at 15:35 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> Thanks to Rui, Peter and Tanvir!  Peter's seems to be the fastest of the 3 suggestions so far on the little test case, but on the real data (where x contains several thousand lines), Rui's seems best.
> 
> Duncan
> 
> On 2025-02-05 9:13 a.m., peter dalgaard wrote:
>> This also seems to work:
>>> strsplit(paste(x,collapse="\n"),"\n")[[1]]
>> [1] "abc" "def" ""    "ghi"
>>> On 5 Feb 2025, at 14:44 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> 
>>> If I have this object:
>>> 
>>>  x <- c("abc\ndef", "", "ghi")
>>> 
>>> and I write it to a file using `writeLines(x, "test.txt")`, my text editor sees a 5 line file:
>>> 
>>>  1: abc
>>>  2: def
>>>  3:
>>>  4: ghi
>>>  5:
>>> 
>>> which is what I'd expect:  the last line in the editor is empty.  If I use `readLines("test.txt")` on that file, I get the vector
>>> 
>>>  c("abc", "def", "", "ghi")
>>> 
>>> and all of that is fine.
>>> 
>>> What I'm looking for is simple code that modifies x to the `readLines()` output, without actually writing and reading it.
>>> 
>>> My first attempt doesn't work:
>>> 
>>>  unlist(strsplit(x, "\n"))
>>> 
>>> because it leaves out the blank line 3.  I can fix that with this ugly code:
>>> 
>>>  lines <- strsplit(x, "\n")
>>>  lines[sapply(lines, length) == 0] <- list("")
>>>  lines <- unlist(lines)
>>> 
>>> Surely there's a simpler way to do this?  I'd like to use just base functions, no other packages.
>>> 
>>> Duncan Murdoch
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ro||turner @end|ng |rom po@teo@net  Wed Feb  5 23:20:45 2025
From: ro||turner @end|ng |rom po@teo@net (Rolf Turner)
Date: Wed,  5 Feb 2025 22:20:45 +0000
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
Message-ID: <20250206112045.43e9dea8@new-hp>


On Wed, 5 Feb 2025 08:44:12 -0500
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> If I have this object:
> 
>    x <- c("abc\ndef", "", "ghi")
> 
> and I write it to a file using `writeLines(x, "test.txt")`, my text 
> editor sees a 5 line file:
> 
>    1: abc
>    2: def
>    3:
>    4: ghi
>    5:
> 
> which is what I'd expect:  the last line in the editor is empty.If I 
> use `readLines("test.txt")` on that file, I get the vector
> 
>    c("abc", "def", "", "ghi")


<SNIP>

Apologies for muddying the waters with my ignorance, but why would you
expect a 5 line file?   I would expect a 4 line file, and that is
indeed what I get when I try the code in question.

If I append an empty line at the end of my test.txt and then
apply readLines() to that file, I get [1] "abc" "def" ""    "ghi" "",
again as *I* would expect.

What am I missing?  Sorry for being a thicko.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:readLines("test.txt")
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Feb  5 23:38:48 2025
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 5 Feb 2025 22:38:48 +0000
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <17DCA5E2-A799-484C-A1B8-E2F4E8BD94CC@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
 <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>
 <17DCA5E2-A799-484C-A1B8-E2F4E8BD94CC@gmail.com>
Message-ID: <1f352f99-1651-43ef-9833-681ee7b57d8a@sapo.pt>

Hello,

Inline.

?s 20:27 de 05/02/2025, peter dalgaard escreveu:
> A 3rd option could be
> 
> scan(text=x, what="", blank.lines.skip=FALSE)
> 
> (all because readLines() doesn't obey the text=x convention, perhaps it should? I'm unsure whether the textConnection is left open in Rui's method.)

No, it is not left open. Use ?showConnections to check it.


x <- c("abc\ndef", "", "ghi")

x |> textConnection() |> readLines()
showConnections()

# this creates and opens a connection
tc <- textConnection(x)
showConnections()
readLines(tc)
showConnections()
close(tc)
showConnections()


Hope this helps,

Rui Barradas

> 
> -pd
> 
>> On 5 Feb 2025, at 15:35 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> Thanks to Rui, Peter and Tanvir!  Peter's seems to be the fastest of the 3 suggestions so far on the little test case, but on the real data (where x contains several thousand lines), Rui's seems best.
>>
>> Duncan
>>
>> On 2025-02-05 9:13 a.m., peter dalgaard wrote:
>>> This also seems to work:
>>>> strsplit(paste(x,collapse="\n"),"\n")[[1]]
>>> [1] "abc" "def" ""    "ghi"
>>>> On 5 Feb 2025, at 14:44 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>
>>>> If I have this object:
>>>>
>>>>   x <- c("abc\ndef", "", "ghi")
>>>>
>>>> and I write it to a file using `writeLines(x, "test.txt")`, my text editor sees a 5 line file:
>>>>
>>>>   1: abc
>>>>   2: def
>>>>   3:
>>>>   4: ghi
>>>>   5:
>>>>
>>>> which is what I'd expect:  the last line in the editor is empty.  If I use `readLines("test.txt")` on that file, I get the vector
>>>>
>>>>   c("abc", "def", "", "ghi")
>>>>
>>>> and all of that is fine.
>>>>
>>>> What I'm looking for is simple code that modifies x to the `readLines()` output, without actually writing and reading it.
>>>>
>>>> My first attempt doesn't work:
>>>>
>>>>   unlist(strsplit(x, "\n"))
>>>>
>>>> because it leaves out the blank line 3.  I can fix that with this ugly code:
>>>>
>>>>   lines <- strsplit(x, "\n")
>>>>   lines[sapply(lines, length) == 0] <- list("")
>>>>   lines <- unlist(lines)
>>>>
>>>> Surely there's a simpler way to do this?  I'd like to use just base functions, no other packages.
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
> 


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb  6 00:04:30 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Feb 2025 18:04:30 -0500
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <20250206112045.43e9dea8@new-hp>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <20250206112045.43e9dea8@new-hp>
Message-ID: <b17ed335-4457-4151-b4f1-ba00fa130bd5@gmail.com>

On 2025-02-05 5:20 p.m., Rolf Turner wrote:
> 
> On Wed, 5 Feb 2025 08:44:12 -0500
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> If I have this object:
>>
>>     x <- c("abc\ndef", "", "ghi")
>>
>> and I write it to a file using `writeLines(x, "test.txt")`, my text
>> editor sees a 5 line file:
>>
>>     1: abc
>>     2: def
>>     3:
>>     4: ghi
>>     5:
>>
>> which is what I'd expect:  the last line in the editor is empty.If I
>> use `readLines("test.txt")` on that file, I get the vector
>>
>>     c("abc", "def", "", "ghi")
> 
> 
> <SNIP>
> 
> Apologies for muddying the waters with my ignorance, but why would you
> expect a 5 line file?   I would expect a 4 line file, and that is
> indeed what I get when I try the code in question.
> 
> If I append an empty line at the end of my test.txt and then
> apply readLines() to that file, I get [1] "abc" "def" ""    "ghi" "",
> again as *I* would expect.
> 
> What am I missing?  Sorry for being a thicko.
> 

That fifth line is more a function of the editor (RStudio) than the 
file.  The last line ends with a newline.  The editor shows this by 
including a blank 5th line.  If the last line just stopped at the last 
letter, the editor would display it as a 4 line file.

Duncan Murdoch


From k|mmo@e|o @end|ng |rom ue|@||  Thu Feb  6 08:34:09 2025
From: k|mmo@e|o @end|ng |rom ue|@|| (Kimmo Elo)
Date: Thu, 6 Feb 2025 07:34:09 +0000
Subject: [R] Looking for simple line-splitting code
In-Reply-To: <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>
References: <cc02f160-3147-4bfc-89d0-21c5633cbbc5@gmail.com>
 <07740212-AF66-4219-B235-F985BE744CA8@gmail.com>
 <fdff731e-d1f5-4ef2-bf3e-8a450f143e59@gmail.com>
Message-ID: <d67f3dd9d987c4f741c0d8b7afc0f0b2af89d48b.camel@uef.fi>

Hi,

using the library "stringi" allows this:

> unlist(stringr::str_split(x, "\n"))
[1] "abc" "def" ""    "ghi"

Best,
Kimmo

ke, 2025-02-05 kello 09:35 -0500, Duncan Murdoch kirjoitti:
> Thanks to Rui, Peter and Tanvir!  Peter's seems to be the fastest of
> the
> 3 suggestions so far on the little test case, but on the real data
> (where x contains several thousand lines), Rui's seems best.
>
> Duncan
>
> On 2025-02-05 9:13 a.m., peter dalgaard wrote:
> > This also seems to work:
> >
> > > strsplit(paste(x,collapse="\n"),"\n")[[1]]
> > [1] "abc" "def" ""    "ghi"
> >
> >
> > > On 5 Feb 2025, at 14:44 , Duncan Murdoch
> > > <murdoch.duncan at gmail.com> wrote:
> > >
> > > If I have this object:
> > >
> > >   x <- c("abc\ndef", "", "ghi")
> > >
> > > and I write it to a file using `writeLines(x, "test.txt")`, my
> > > text editor sees a 5 line file:
> > >
> > >   1: abc
> > >   2: def
> > >   3:
> > >   4: ghi
> > >   5:
> > >
> > > which is what I'd expect:  the last line in the editor is empty.
> > > If I use `readLines("test.txt")` on that file, I get the vector
> > >
> > >   c("abc", "def", "", "ghi")
> > >
> > > and all of that is fine.
> > >
> > > What I'm looking for is simple code that modifies x to the
> > > `readLines()` output, without actually writing and reading it.
> > >
> > > My first attempt doesn't work:
> > >
> > >   unlist(strsplit(x, "\n"))
> > >
> > > because it leaves out the blank line 3.  I can fix that with this
> > > ugly code:
> > >
> > >   lines <- strsplit(x, "\n")
> > >   lines[sapply(lines, length) == 0] <- list("")
> > >   lines <- unlist(lines)
> > >
> > > Surely there's a simpler way to do this?  I'd like to use just
> > > base functions, no other packages.
> > >
> > > Duncan Murdoch
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > https://www.r-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible
> > > code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> https://www.r-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m|m@|tr@ @end|ng |rom gmx@com  Thu Feb  6 04:32:17 2025
From: m|m@|tr@ @end|ng |rom gmx@com (Ranjan Maitra)
Date: Wed, 5 Feb 2025 21:32:17 -0600
Subject: [R] pairs plot
Message-ID: <Z6QtQcmXeTvs8Ck7@iastate.edu>

According to the help for pairs, the diag.panel function is supposed to
take a panel.hist as in:

 pairs(USJudgeRatings[1:5], panel = panel.smooth,
           cex = 1.5, pch = 24, bg = "light blue", horOdd=TRUE,
           diag.panel = panel.hist, cex.labels = 2, font.labels = 2)

Error: object 'panel.hist' not found

I know that this used to work in the past so I wonder if this was changed and the documentation was not corrected.
Anyway, what is the current way of doing this?

Many thanks and best wishes,
Ranjan


From bgunter@4567 @end|ng |rom gm@||@com  Thu Feb  6 17:15:45 2025
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 6 Feb 2025 08:15:45 -0800
Subject: [R] pairs plot
In-Reply-To: <Z6QtQcmXeTvs8Ck7@iastate.edu>
References: <Z6QtQcmXeTvs8Ck7@iastate.edu>
Message-ID: <CAGxFJbR+NNtoTtRq7QZ=fCjPc5UR20qeRH1H53AWXRKGnSXovg@mail.gmail.com>

Possibly because:
panel.hist is not an existing R function -- you have to first create
it so pairs() can use it. ?pairs shows you how in the Help examples,
i.e.

panel.hist <- function(x, ...)
{
    usr <- par("usr")
    par(usr = c(usr[1:2], 0, 1.5) )
    h <- hist(x, plot = FALSE)
    breaks <- h$breaks; nB <- length(breaks)
    y <- h$counts; y <- y/max(y)
    rect(breaks[-nB], 0, breaks[-1], y, col = "cyan", ...)
}

Cheers,
Bert


On Thu, Feb 6, 2025 at 8:01?AM Ranjan Maitra via R-help
<r-help at r-project.org> wrote:
>
> According to the help for pairs, the diag.panel function is supposed to
> take a panel.hist as in:
>
>  pairs(USJudgeRatings[1:5], panel = panel.smooth,
>            cex = 1.5, pch = 24, bg = "light blue", horOdd=TRUE,
>            diag.panel = panel.hist, cex.labels = 2, font.labels = 2)
>
> Error: object 'panel.hist' not found
>
> I know that this used to work in the past so I wonder if this was changed and the documentation was not corrected.
> Anyway, what is the current way of doing this?
>
> Many thanks and best wishes,
> Ranjan
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Feb  6 17:27:27 2025
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 6 Feb 2025 17:27:27 +0100
Subject: [R] pairs plot
In-Reply-To: <Z6QtQcmXeTvs8Ck7@iastate.edu>
References: <Z6QtQcmXeTvs8Ck7@iastate.edu>
Message-ID: <16888c06-1183-4277-8091-8000ba5a992b@statistik.tu-dortmund.de>

On 06.02.2025 04:32, Ranjan Maitra via R-help wrote:
> According to the help for pairs, the diag.panel function is supposed to
> take a panel.hist as in:
> 
>   pairs(USJudgeRatings[1:5], panel = panel.smooth,
>             cex = 1.5, pch = 24, bg = "light blue", horOdd=TRUE,
>             diag.panel = panel.hist, cex.labels = 2, font.labels = 2)
> 
> Error: object 'panel.hist' not found

Function panel.hist is only defined in the example section of pairs.

Best,
Uwe Ligges


> I know that this used to work in the past so I wonder if this was changed and the documentation was not corrected.
> Anyway, what is the current way of doing this?
> 
> Many thanks and best wishes,
> Ranjan
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @rii@mstei@ m@iii@g oii gm@ii@com  Thu Feb  6 18:36:23 2025
From: @rii@mstei@ m@iii@g oii gm@ii@com (@rii@mstei@ m@iii@g oii gm@ii@com)
Date: Thu, 6 Feb 2025 09:36:23 -0800
Subject: [R] install.packages and package dependencies
Message-ID: <CAEO2kuJfzGdeQOFKKPcyJbzct_5oOy178Ss1tsnbaYboA2xyNA@mail.gmail.com>

It appears that install.packages does not automatically install package
dependencies when the package is installed via a URL. As an example, here
is what I get when I attempt to install the latest ggplot2 tarball via its
URL on CRAN:

> install.packages("
https://cran.r-project.org/src/contrib/ggplot2_3.5.1.tar.gz")
inferring 'repos = NULL' from 'pkgs'
trying URL 'https://cran.r-project.org/src/contrib/ggplot2_3.5.1.tar.gz'
Content type 'application/x-gzip' length 3604371 bytes (3.4 MB)
==================================================
downloaded 3.4 MB

ERROR: dependencies ?cli?, ?glue?, ?gtable?, ?isoband?, ?lifecycle?,
?rlang?, ?scales?, ?tibble?, ?vctrs?, ?withr? are not available for package
?ggplot2?
* removing
?/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/ggplot2?
Warning in install.packages :
  installation of package
?/var/folders/m7/ztk511fj6vl4m6bw7vh47nk40000gn/T//RtmpmmFBOH/downloaded_packages/ggplot2_3.5.1.tar.gz?
had non-zero exit status
>

Is there a parameter I can give to install.packages so that it will
automatically install all the packages the package (in this example
ggplot2) needs? I've read the documentation of install.packages several
times, and am confused by the interplay of the various parameters. When I
type getOption('repos') I get:

                       CRAN
"https://cran.rstudio.com/"
attr(,"RStudio")
[1] TRUE

Without this it looks like installing from a URL is a 2-step process:

install.packages(c(<packages the package needs>))
install.packages("<url of package tarball>")

I am aware that there are some contributed packages (such as devtools and
remotes) that do this for you in a single line. But I am curious whether
this is possible via install.packages alone.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Feb  6 21:37:50 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 6 Feb 2025 15:37:50 -0500
Subject: [R] install.packages and package dependencies
In-Reply-To: <CAEO2kuJfzGdeQOFKKPcyJbzct_5oOy178Ss1tsnbaYboA2xyNA@mail.gmail.com>
References: <CAEO2kuJfzGdeQOFKKPcyJbzct_5oOy178Ss1tsnbaYboA2xyNA@mail.gmail.com>
Message-ID: <56e8caed-82de-4142-9f24-62255a796eab@gmail.com>

I don't think install.packages() can do what you want.  If you are 
specifying a URL, then install.packages() assumes it has no way to know 
where the other dependencies are supposed to come from.

The typical way I install an unusual version of a package is to install 
the CRAN version first (install.packages("ggplot2") will do that, and 
will get all the deps), then reinstall the special version, and hope 
I've got all the right dependencies.

Duncan Murdoch

On 2025-02-06 12:36 p.m., arilamstein at gmail.com wrote:
> It appears that install.packages does not automatically install package
> dependencies when the package is installed via a URL. As an example, here
> is what I get when I attempt to install the latest ggplot2 tarball via its
> URL on CRAN:
> 
>> install.packages("
> https://cran.r-project.org/src/contrib/ggplot2_3.5.1.tar.gz")
> inferring 'repos = NULL' from 'pkgs'
> trying URL 'https://cran.r-project.org/src/contrib/ggplot2_3.5.1.tar.gz'
> Content type 'application/x-gzip' length 3604371 bytes (3.4 MB)
> ==================================================
> downloaded 3.4 MB
> 
> ERROR: dependencies ?cli?, ?glue?, ?gtable?, ?isoband?, ?lifecycle?,
> ?rlang?, ?scales?, ?tibble?, ?vctrs?, ?withr? are not available for package
> ?ggplot2?
> * removing
> ?/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/ggplot2?
> Warning in install.packages :
>    installation of package
> ?/var/folders/m7/ztk511fj6vl4m6bw7vh47nk40000gn/T//RtmpmmFBOH/downloaded_packages/ggplot2_3.5.1.tar.gz?
> had non-zero exit status
>>
> 
> Is there a parameter I can give to install.packages so that it will
> automatically install all the packages the package (in this example
> ggplot2) needs? I've read the documentation of install.packages several
> times, and am confused by the interplay of the various parameters. When I
> type getOption('repos') I get:
> 
>                         CRAN
> "https://cran.rstudio.com/"
> attr(,"RStudio")
> [1] TRUE
> 
> Without this it looks like installing from a URL is a 2-step process:
> 
> install.packages(c(<packages the package needs>))
> install.packages("<url of package tarball>")
> 
> I am aware that there are some contributed packages (such as devtools and
> remotes) that do this for you in a single line. But I am curious whether
> this is possible via install.packages alone.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m|m@|tr@ @end|ng |rom gmx@com  Fri Feb  7 05:30:25 2025
From: m|m@|tr@ @end|ng |rom gmx@com (Ranjan Maitra)
Date: Thu, 6 Feb 2025 22:30:25 -0600
Subject: [R] pairs plot
In-Reply-To: <CAGxFJbR+NNtoTtRq7QZ=fCjPc5UR20qeRH1H53AWXRKGnSXovg@mail.gmail.com>
References: <Z6QtQcmXeTvs8Ck7@iastate.edu>
 <CAGxFJbR+NNtoTtRq7QZ=fCjPc5UR20qeRH1H53AWXRKGnSXovg@mail.gmail.com>
Message-ID: <Z6WMYSe_2_rWSTtQ@iastate.edu>

Bert,

Thanks very much!

Oops! I can not believe I completely  missed this!

Best wishes,
Ranjan



On Thu Feb06'25 08:15:45AM, Bert Gunter wrote:
> From: Bert Gunter <bgunter.4567 at gmail.com>
> Date: Thu, 6 Feb 2025 08:15:45 -0800
> To: Ranjan Maitra <mlmaitra at gmx.com>
> Cc: R-Help <r-help at r-project.org>
> Subject: Re: [R] pairs plot
>
> Possibly because:
> panel.hist is not an existing R function -- you have to first create
> it so pairs() can use it. ?pairs shows you how in the Help examples,
> i.e.
>
> panel.hist <- function(x, ...)
> {
>     usr <- par("usr")
>     par(usr = c(usr[1:2], 0, 1.5) )
>     h <- hist(x, plot = FALSE)
>     breaks <- h$breaks; nB <- length(breaks)
>     y <- h$counts; y <- y/max(y)
>     rect(breaks[-nB], 0, breaks[-1], y, col = "cyan", ...)
> }
>
> Cheers,
> Bert
>
>
> On Thu, Feb 6, 2025 at 8:01?AM Ranjan Maitra via R-help
> <r-help at r-project.org> wrote:
> >
> > According to the help for pairs, the diag.panel function is supposed to
> > take a panel.hist as in:
> >
> >  pairs(USJudgeRatings[1:5], panel = panel.smooth,
> >            cex = 1.5, pch = 24, bg = "light blue", horOdd=TRUE,
> >            diag.panel = panel.hist, cex.labels = 2, font.labels = 2)
> >
> > Error: object 'panel.hist' not found
> >
> > I know that this used to work in the past so I wonder if this was changed and the documentation was not corrected.
> > Anyway, what is the current way of doing this?
> >
> > Many thanks and best wishes,
> > Ranjan
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Sat Feb  8 13:26:18 2025
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Sat, 8 Feb 2025 12:26:18 +0000
Subject: [R] R CMD check error: File `inconsolata.sty' not found
In-Reply-To: <9310363F-7D97-4AB3-9E16-0A28E42F6F5F@hotmail.com>
References: <9141AF1E-5E6B-4786-8BE5-203F594C28E8@hotmail.com>
 <48d44dd7-28de-4aa6-ad38-52ed86dc4688@universite-paris-saclay.fr>
 <9310363F-7D97-4AB3-9E16-0A28E42F6F5F@hotmail.com>
Message-ID: <61691479-9C46-4AC7-A6FC-331A631C6FC1@hotmail.com>

This is about LaTeX install and not about R.  My problem was multiple installations of LaTeX: first using MacTex, then newer version using texlive.  I had also tried to install then uninstall using MacPorts.  It seems MacPorts uninstall was not clean.  I had to manually delete several sym links.  MacTex install inserts /etc/paths.d/TeX, which has the path /Library/TeX/texbin.  So to get TeX to use the more recent texlive install, PATH should be updated so that texlive comes before /Library/TeX/texbin.

With above corrections, my problem is solved.

This might help some other users:
1.  Check tex installation.  Multiple installs using different methods (MacTex, MacPorts, texlive using perl) can interfere with one another.
2.  Ensure that, in PATH variable, desired tex installation comes first.
3.  Verify that different tex family commands use the same tex installation.  For example, tlmgr - - version, tex - - version, should both point to the same installation.   

> On Feb 2, 2025, at 11:31?AM, Naresh Gurbuxani <naresh_gurbuxani at hotmail.com> wrote:
> 
> This did not help.  I removed inconsolata.sty, then reinstalled inconsolata.
> 
> bash-3.2$ sudo tlmgr install -reinstall inconsolata
> Password:
> Sorry, try again.
> Password:
> tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
> [1/1, ??:??/??:??] reinstall: inconsolata [468k]
> running mktexlsr ...
> done running mktexlsr.
> running updmap-sys ...
> done running updmap-sys.
> tlmgr: package log updated: /usr/local/texlive/2024/texmf-var/web2c/tlmgr.log
> tlmgr: command log updated: /usr/local/texlive/2024/texmf-var/web2c/tlmgr-commands.log
> bash-3.2$ tlmgr info inconsolata
> package:     inconsolata
> category:    Package
> shortdesc:   A monospaced font, with support files for use with TeX
> longdesc:    Inconsolata is a monospaced font designed by Raph Levien. This package contains the font (in both Adobe Type 1 and OpenType formats) in regular and bold weights, with additional glyphs and options to control slashed zero, upright quotes and a shapelier lower-case L, plus metric files for use with TeX, and LaTeX font definition and other relevant files.
> installed:   Yes
> revision:    54512
> sizes:       doc: 597k, run: 1201k
> relocatable: No
> cat-version: 1.121
> cat-license: ofl apache2 lppl1.3
> cat-topics:  font font-mono font-type1 font-otf font-t1enc
> cat-contact-home: http://levien.com/type/myfonts/inconsolata.html
> collection:  collection-fontsextra
> 
> On running R CMD check, below is the bottom of the messages:
> 
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! LaTeX Error: File `inconsolata.sty' not found.
> 
> Type X to quit or <RETURN> to proceed,
> or enter new name. (Default extension: sty)
> 
> ! Emergency stop.
> <read *> 
>         l.326 ^^M
>         !  ==> Fatal error occurred, no output PDF file produced!
> * checking PDF version of manual without index ... OK
> * DONE
> Status: 1 WARNING
> 
> 
>> On Feb 2, 2025, at 10:13?AM, Marc Girondot <marc.girondot at universite-paris-saclay.fr> wrote:
>> 
>> Hi Naresh
>> 
>> I have nearly the same configuration as yours:
>> I have this file installed (you must activate locate database to use locate):
>> locate inconsolata.sty
>> /usr/local/texlive/2024/texmf-dist/tex/latex/inconsolata/inconsolata.sty
>> 
>> Have you the file ?
>> 
>> If you have it, a solution could be to remove it and reinstall.
>> 
>> Marc
>> 
>> Le 02/02/2025 ? 15:58, Naresh Gurbuxani a ?crit :
>>> R CMD check <package> gives me below message at the end. There does not seem to be a problem with my TeX installation. Is it possible that R CMD check is not looking in the correct location? How can this problem be fixed?
>>> 
>>> Thanks,
>>> Naresh
>>> 
>>> * checking PDF version of manual ... WARNING
>>> LaTeX errors when creating PDF version.
>>> This typically indicates Rd problems.
>>> LaTeX errors found:
>>> ! LaTeX Error: File `inconsolata.sty' not found.
>>> 
>>> Type X to quit or <RETURN> to proceed,
>>> or enter new name. (Default extension: sty)
>>> 
>>> ! Emergency stop.
>>> <read *> 
>>> 
>>> l.326 ^^M
>>> 
>>> ! ==> Fatal error occurred, no output PDF file produced!
>>> * checking PDF version of manual without index ... OK
>>> * DONE
>>> 
>>> My Mac has the latest version of TeX installed from texlive. Below are top few lines from running tlmgr conf
>>> 
>>> =========================== version information ==========================
>>> tlmgr revision 73493 (2025-01-17 23:28:29 +0100)
>>> tlmgr using installation: /usr/local/texlive/2024
>>> TeX Live (https://tug.org/texlive) version 2024
>>> ==================== executables found by searching PATH =================
>>> PATH: /usr/local/texlive/2024/bin/universal-darwin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/texlive/2024/bin/universal-darwin
>>> dvipdfmx: /usr/local/texlive/2024/bin/universal-darwin/dvipdfmx
>>> dvips: /usr/local/texlive/2024/bin/universal-darwin/dvips
>>> fmtutil: /usr/local/texlive/2024/bin/universal-darwin/fmtutil
>>> kpsewhich: /usr/local/texlive/2024/bin/universal-darwin/kpsewhich
>>> luatex: /usr/local/texlive/2024/bin/universal-darwin/luatex
>>> mktexpk: /usr/local/texlive/2024/bin/universal-darwin/mktexpk
>>> pdftex: /usr/local/texlive/2024/bin/universal-darwin/pdftex
>>> tex: /usr/local/texlive/2024/bin/universal-darwin/tex
>>> tlmgr: /usr/local/texlive/2024/bin/universal-darwin/tlmgr
>>> updmap: /usr/local/texlive/2024/bin/universal-darwin/updmap
>>> xetex: /usr/local/texlive/2024/bin/universal-darwin/xetex
>>> 
>>> On the command line, I tried updating incosolata package
>>> 
>>> bash-3.2$ sudo tlmgr install inconsolata
>>> Password:
>>> tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
>>> tlmgr install: package already present: inconsolata
>>> 
>>> bash-3.2$ sudo tlmgr update inconsolata
>>> tlmgr: package repository https://ctan.tinycomputers.io/tex-archive/systems/texlive/tlnet (verified)
>>> tlmgr: saving backups to /usr/local/texlive/2024/tlpkg/backups
>>> tlmgr: no updates available
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>> 
>> Marc Girondot, Pr
>> Laboratoire Ecologie, Soci?t?, Evolution
>> Equipe de Processus Ecologiques et Pressions Anthropiques
>> CNRS, AgroParisTech et Universit? Paris-Saclay, UMR 8079
>> 91190 Gif-sur-Yvette, France
>> Tel: +33 (0)1.69.15.72.30 Mobile: +33 (0)6.20.18.22.16
>> e-mail: marc.girondot at universite-paris-saclay.fr
>> marc.girondot at gmail.com
>> Web: http://hebergement.universite-paris-saclay.fr/marcgirondot/
> 


