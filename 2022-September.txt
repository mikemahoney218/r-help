From j@b@y@t194 @end|ng |rom gm@||@com  Thu Sep  1 07:23:57 2022
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Thu, 1 Sep 2022 09:53:57 +0430
Subject: [R] Combine two dataframe with different row number and
 interpolation between values
In-Reply-To: <BN6PR2201MB1553ACD3653959F1FEE4081BCF789@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CANTxAm+qPT_39eEuZT20LtBJ2hOaDCstrFMi-e-WiCJZc4fXfQ@mail.gmail.com>
 <BN6PR2201MB1553ACD3653959F1FEE4081BCF789@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CANTxAmL_T_02b-uyQ6kw4735C5kbaFcwmOSyxFbjEdZ05w4LzA@mail.gmail.com>

 Dear Tim;
The dplyr did not work for me. My data frames have exactly similar columns
but different row numbers.
Mr Petr sent this code and the code worked but it copied the second
dataframe into the first one and did not replace the corresponding row.
> df3 = merge(df1, df2, all = TRUE)
Regarding filling the "NA" data, it does not matter for me to interpolate
between numbers or put the mean of numbers.
Sincerely






On Wed, Aug 31, 2022 at 5:17 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> Can I interest you in the join functions in dplyr?
> https://www.datasciencemadesimple.com/join-in-r-merge-in-r/
>
> Filling in missing data is a useful practice when the fake (simulated)
> data is a small proportion of all data. When 2/3 of the data is fake one
> must wonder if anything based on those numbers is real or an artifact of
> assumptions made to generate the numbers.
>
> I deal with weather data and some weather stations are set up to average
> measurements between recorded values and others take a single reading at
> regular intervals. How you interpolate might depend on which option
> describes your data. The alternative is to use the method for recording ws
> and apply it to the other data that will be merged with these data. I
> assume there is more data, otherwise I see little point in expanding these
> values out.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
> Sent: Wednesday, August 31, 2022 2:09 AM
> To: r-help at r-project.org
> Subject: [R] Combine two dataframe with different row number and
> interpolation between values
>
> [External Email]
>
>  Dear all,
> I am trying to combine two large dataframe in order to make a dataframe
> with exactly the dimension of the second dataframe.
> The first df is as follows:
>
> df1 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 2920), d =
> rep(c(1:365,1:365,1:365,1:365,1:365),each=8),
>       h = rep(c(seq(3,24, by = 3),seq(3,24, by = 3),seq(3,24, by =
> 3),seq(3,24, by = 3),seq(3,24, by = 3)),365),
>       ws = rnorm(1:14600, mean=20))
> > head(df1)
>      y       d   h        ws
> 1  2010  1  3     20.71488
> 2  2010  1  6     19.70125
> 3  2010  1  9     21.00180
> 4  2010  1 12     20.29236
> 5  2010  1 15     20.12317
> 6  2010  1 18     19.47782
>
> The data in the "ws" column were measured with 3 hours frequency and I
> need data with one hour frequency. I have made a second df as follows with
> one hour frequency for the "ws" column.
>
> df2 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 8760), d =
> rep(c(1:365,1:365,1:365,1:365,1:365),each=24),
>       h = rep(c(1:24,1:24,1:24,1:24,1:24),365), ws = "NA")
> > head(df2)
>       y      d    h   ws
> 1  2010  1    1   NA
> 2  2010  1    2   NA
> 3  2010  1    3   NA
> 4  2010  1    4   NA
> 5  2010  1    5   NA
> 6  2010  1    6   NA
>
> What I am trying to do is combine these two dataframes so as to the rows in
> df1 (based on the values of "y", "d", "h" columns) that have values
> exactly similar to df2's rows copied in its place in the new df (df3).
> For example, in the first dataframe the first row was measured at 3
> o'clock on the first day of 2010 and this row must be placed on the third
> row of the second dataframe which has a similar value (2010, 1, 3). Like
> the below
> table:
>       y      d    h   ws
> 1  2010  1    1   NA
> 2  2010  1    2   NA
> 3  2010  1    3   20.71488
> 4  2010  1    4   NA
> 5  2010  1    5   NA
> 6  2010  1    6   19.70125
>
> But regarding the values of the "ws" column for df2 that do not have value
> (at 4 and 5 o'clock), I need to interpolate between the before and after
> values to fill in the missing data of the "ws".
> I have tried the following codes but they did not work correctly.
>
> > df3 = merge(df1, df2, by = "y")
> Error: cannot allocate vector of size 487.9 Mb or
> > library(dplyr)
> > df3<- df1%>% full_join(df2)
>
>
> Is there any way to do this?
> Sincerely
>
>
>
>
>
> --
> Best Regards
> Javad Bayat
> M.Sc. Environment Engineering
> Alternative Mail: bayat194 at yahoo.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9e63e590cb834ddc23d908da8b1802e2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637975232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=WigJVAmdLn%2FK7ZtJq28%2Buv4aDmUjNXu6QPabdt5h2iQ%3D&amp;reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9e63e590cb834ddc23d908da8b1802e2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637975232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=m1VCPBpnYy%2FwqlOuf5froUVEMBDJKwDuAWS4cFNx1wI%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Best Regards
Javad Bayat
M.Sc. Environment Engineering
Alternative Mail: bayat194 at yahoo.com

	[[alternative HTML version deleted]]


From @|@y@hz@k@r|@ @end|ng |rom un|m@p@edu@my  Thu Sep  1 05:21:39 2022
From: @|@y@hz@k@r|@ @end|ng |rom un|m@p@edu@my (SITI AISYAH ZAKARIA)
Date: Thu, 1 Sep 2022 11:21:39 +0800
Subject: [R] How to solve this?
Message-ID: <CALcx2Bk7UhcvQhZsJTockB-ERtVS2NsEPwcCTSfDOMZvRjwU8A@mail.gmail.com>

Hi everyone,

Can some one help me?

If my coding come out the error like this "Error in optim(start, nhl, ...,
method = method) : non-finite value supplied by optim". What it means?
How can I solve this?

Thank you.

-- 





"..Millions of trees are used to make papers, only to be thrown away 
after a couple of minutes reading from them. Our planet is at stake. Please 
be considerate. THINK TWICE BEFORE PRINTING THIS.."

DISCLAIMER:?This email \ and any files transmitte...{{dropped:24}}


From pik@pp@@devei m@iii@g oii gm@ii@com  Thu Sep  1 09:28:32 2022
From: pik@pp@@devei m@iii@g oii gm@ii@com (pik@pp@@devei m@iii@g oii gm@ii@com)
Date: Thu, 1 Sep 2022 09:28:32 +0200
Subject: [R] How to solve this?
In-Reply-To: <CALcx2Bk7UhcvQhZsJTockB-ERtVS2NsEPwcCTSfDOMZvRjwU8A@mail.gmail.com>
References: <CALcx2Bk7UhcvQhZsJTockB-ERtVS2NsEPwcCTSfDOMZvRjwU8A@mail.gmail.com>
Message-ID: <000801d8bdd4$7097e9b0$51c7bd10$@gmail.com>

Hi Zakaria,

I had such an issue before, and in my case, the problem was that the calculation of the objective for some values used by the optimizer gave back a non-finite result. In general, this might be because the objective function has poles, and the calculation returns inf. Alternatively, there might be a calculation error somewhere in the objective function's code resulting in a nan value. I think that first, you need to determine more precisely what the problem is in your case. You could try evaluating the objective at different points (for instance, your initialization values) to see how it behaves.

I hope this helps!
Pantelis

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of SITI AISYAH ZAKARIA
Sent: Thursday, September 1, 2022 5:22 AM
To: r-help mailing list <r-help at r-project.org>
Subject: [R] How to solve this?

Hi everyone,

Can some one help me?

If my coding come out the error like this "Error in optim(start, nhl, ..., method = method) : non-finite value supplied by optim". What it means?
How can I solve this?

Thank you.

-- 





"..Millions of trees are used to make papers, only to be thrown away after a couple of minutes reading from them. Our planet is at stake. Please be considerate. THINK TWICE BEFORE PRINTING THIS.."

DISCLAIMER: This email \ and any files transmitte...{{dr...{{dropped:9}}


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Sep  1 10:54:08 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 1 Sep 2022 09:54:08 +0100
Subject: [R] How to solve this?
In-Reply-To: <000801d8bdd4$7097e9b0$51c7bd10$@gmail.com>
References: <CALcx2Bk7UhcvQhZsJTockB-ERtVS2NsEPwcCTSfDOMZvRjwU8A@mail.gmail.com>
 <000801d8bdd4$7097e9b0$51c7bd10$@gmail.com>
Message-ID: <ab5c1b84-5e10-dffc-ac59-bdfc7b665ef0@sapo.pt>

Hello,

Can you post the code you've tried and sample data? Please post the code 
you ran and the output of `dput(df)`. Or, if it is too big with the 
output of `dput(head(df, 20))`. (Note: `df` is a placeholder for the 
name of your data set.)

Hope this helps,

Rui Barradas


?s 08:28 de 01/09/2022, pikappa.devel at gmail.com escreveu:
> Hi Zakaria,
> 
> I had such an issue before, and in my case, the problem was that the calculation of the objective for some values used by the optimizer gave back a non-finite result. In general, this might be because the objective function has poles, and the calculation returns inf. Alternatively, there might be a calculation error somewhere in the objective function's code resulting in a nan value. I think that first, you need to determine more precisely what the problem is in your case. You could try evaluating the objective at different points (for instance, your initialization values) to see how it behaves.
> 
> I hope this helps!
> Pantelis
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of SITI AISYAH ZAKARIA
> Sent: Thursday, September 1, 2022 5:22 AM
> To: r-help mailing list <r-help at r-project.org>
> Subject: [R] How to solve this?
> 
> Hi everyone,
> 
> Can some one help me?
> 
> If my coding come out the error like this "Error in optim(start, nhl, ..., method = method) : non-finite value supplied by optim". What it means?
> How can I solve this?
> 
> Thank you.
>


From drj|m|emon @end|ng |rom gm@||@com  Thu Sep  1 11:31:15 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 1 Sep 2022 19:31:15 +1000
Subject: [R] Combine two dataframe with different row number and
 interpolation between values
In-Reply-To: <CANTxAmL_T_02b-uyQ6kw4735C5kbaFcwmOSyxFbjEdZ05w4LzA@mail.gmail.com>
References: <CANTxAm+qPT_39eEuZT20LtBJ2hOaDCstrFMi-e-WiCJZc4fXfQ@mail.gmail.com>
 <BN6PR2201MB1553ACD3653959F1FEE4081BCF789@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CANTxAmL_T_02b-uyQ6kw4735C5kbaFcwmOSyxFbjEdZ05w4LzA@mail.gmail.com>
Message-ID: <CA+8X3fUascDz4oRhxk4yYb5fhzhPhW_JGbePU1kiWU-NVHAKjw@mail.gmail.com>

Hi Javad,
You seem to have the data frame join worked out, so here is a function
to interpolate over sequences of NAs. I have found it quite useful.

# interpolate over sequences of NAs
# NA sequences at the beginning of a file are replaced with the first
nonNA value
# NA sequences at the end are filled with the last nonNA value
# sequences of all NAs are returned unaltered
interpNA<-function(x) {
 if(any(is.na(x))) {
  xrle<-rle(is.na(x))
  begin<-end<-1
  # if the sequence begins with NA
  # set the initial run of NAs to the 1st non-NA
  if(is.na(x[1])) x[1:xrle$lengths[1]]<-x[xrle$lengths[1]+1]
  for(i in 1:length(xrle$values)) {
   # if this is a run of NA, fill it
   if(xrle$values[i]) {
    end<-begin+xrle$lengths[i]+(i>1)
    if(is.na(x[end])) x[begin:(end-1)]<-x[begin]
    else x[begin:end]<-seq(x[begin],x[end],length.out=1+end-begin)
    begin<-end+xrle$lengths[i]-1
  }
   else {
    # set begin to the end of the non-NA values
    begin<-end+xrle$lengths[i]-1
   }
  }
 }
 return(x)
}

Jim

On Thu, Sep 1, 2022 at 3:29 PM javad bayat <j.bayat194 at gmail.com> wrote:
>
>  Dear Tim;
> The dplyr did not work for me. My data frames have exactly similar columns
> but different row numbers.
> Mr Petr sent this code and the code worked but it copied the second
> dataframe into the first one and did not replace the corresponding row.
> > df3 = merge(df1, df2, all = TRUE)
> Regarding filling the "NA" data, it does not matter for me to interpolate
> between numbers or put the mean of numbers.
> Sincerely
>
>
>
>
>
>
> On Wed, Aug 31, 2022 at 5:17 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
> > Can I interest you in the join functions in dplyr?
> > https://www.datasciencemadesimple.com/join-in-r-merge-in-r/
> >
> > Filling in missing data is a useful practice when the fake (simulated)
> > data is a small proportion of all data. When 2/3 of the data is fake one
> > must wonder if anything based on those numbers is real or an artifact of
> > assumptions made to generate the numbers.
> >
> > I deal with weather data and some weather stations are set up to average
> > measurements between recorded values and others take a single reading at
> > regular intervals. How you interpolate might depend on which option
> > describes your data. The alternative is to use the method for recording ws
> > and apply it to the other data that will be merged with these data. I
> > assume there is more data, otherwise I see little point in expanding these
> > values out.
> >
> > Tim
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
> > Sent: Wednesday, August 31, 2022 2:09 AM
> > To: r-help at r-project.org
> > Subject: [R] Combine two dataframe with different row number and
> > interpolation between values
> >
> > [External Email]
> >
> >  Dear all,
> > I am trying to combine two large dataframe in order to make a dataframe
> > with exactly the dimension of the second dataframe.
> > The first df is as follows:
> >
> > df1 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 2920), d =
> > rep(c(1:365,1:365,1:365,1:365,1:365),each=8),
> >       h = rep(c(seq(3,24, by = 3),seq(3,24, by = 3),seq(3,24, by =
> > 3),seq(3,24, by = 3),seq(3,24, by = 3)),365),
> >       ws = rnorm(1:14600, mean=20))
> > > head(df1)
> >      y       d   h        ws
> > 1  2010  1  3     20.71488
> > 2  2010  1  6     19.70125
> > 3  2010  1  9     21.00180
> > 4  2010  1 12     20.29236
> > 5  2010  1 15     20.12317
> > 6  2010  1 18     19.47782
> >
> > The data in the "ws" column were measured with 3 hours frequency and I
> > need data with one hour frequency. I have made a second df as follows with
> > one hour frequency for the "ws" column.
> >
> > df2 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 8760), d =
> > rep(c(1:365,1:365,1:365,1:365,1:365),each=24),
> >       h = rep(c(1:24,1:24,1:24,1:24,1:24),365), ws = "NA")
> > > head(df2)
> >       y      d    h   ws
> > 1  2010  1    1   NA
> > 2  2010  1    2   NA
> > 3  2010  1    3   NA
> > 4  2010  1    4   NA
> > 5  2010  1    5   NA
> > 6  2010  1    6   NA
> >
> > What I am trying to do is combine these two dataframes so as to the rows in
> > df1 (based on the values of "y", "d", "h" columns) that have values
> > exactly similar to df2's rows copied in its place in the new df (df3).
> > For example, in the first dataframe the first row was measured at 3
> > o'clock on the first day of 2010 and this row must be placed on the third
> > row of the second dataframe which has a similar value (2010, 1, 3). Like
> > the below
> > table:
> >       y      d    h   ws
> > 1  2010  1    1   NA
> > 2  2010  1    2   NA
> > 3  2010  1    3   20.71488
> > 4  2010  1    4   NA
> > 5  2010  1    5   NA
> > 6  2010  1    6   19.70125
> >
> > But regarding the values of the "ws" column for df2 that do not have value
> > (at 4 and 5 o'clock), I need to interpolate between the before and after
> > values to fill in the missing data of the "ws".
> > I have tried the following codes but they did not work correctly.
> >
> > > df3 = merge(df1, df2, by = "y")
> > Error: cannot allocate vector of size 487.9 Mb or
> > > library(dplyr)
> > > df3<- df1%>% full_join(df2)
> >
> >
> > Is there any way to do this?
> > Sincerely
> >
> >
> >
> >
> >
> > --
> > Best Regards
> > Javad Bayat
> > M.Sc. Environment Engineering
> > Alternative Mail: bayat194 at yahoo.com
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9e63e590cb834ddc23d908da8b1802e2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637975232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=WigJVAmdLn%2FK7ZtJq28%2Buv4aDmUjNXu6QPabdt5h2iQ%3D&amp;reserved=0
> > PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9e63e590cb834ddc23d908da8b1802e2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637975232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=m1VCPBpnYy%2FwqlOuf5froUVEMBDJKwDuAWS4cFNx1wI%3D&amp;reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
> --
> Best Regards
> Javad Bayat
> M.Sc. Environment Engineering
> Alternative Mail: bayat194 at yahoo.com
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Sep  1 11:33:42 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 1 Sep 2022 09:33:42 +0000
Subject: [R] Combine two dataframe with different row number and
 interpolation between values
In-Reply-To: <CANTxAmL_T_02b-uyQ6kw4735C5kbaFcwmOSyxFbjEdZ05w4LzA@mail.gmail.com>
References: <CANTxAm+qPT_39eEuZT20LtBJ2hOaDCstrFMi-e-WiCJZc4fXfQ@mail.gmail.com>
 <BN6PR2201MB1553ACD3653959F1FEE4081BCF789@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CANTxAmL_T_02b-uyQ6kw4735C5kbaFcwmOSyxFbjEdZ05w4LzA@mail.gmail.com>
Message-ID: <5c3a626c07d549599cb0341ae2f0b8ce@SRVEXCHCM1302.precheza.cz>

Hallo

This code do the merging without repeating the NA row.

df3 = merge(df1, df2, by=c("y", "d", "h"), all.y = TRUE)

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
> Sent: Thursday, September 1, 2022 7:24 AM
> To: Ebert,Timothy Aaron <tebert at ufl.edu>
> Cc: r-help at r-project.org
> Subject: Re: [R] Combine two dataframe with different row number and
> interpolation between values
> 
>  Dear Tim;
> The dplyr did not work for me. My data frames have exactly similar columns
but
> different row numbers.
> Mr Petr sent this code and the code worked but it copied the second
dataframe
> into the first one and did not replace the corresponding row.
> > df3 = merge(df1, df2, all = TRUE)
> Regarding filling the "NA" data, it does not matter for me to interpolate
between
> numbers or put the mean of numbers.
> Sincerely
> 
> 
> 
> 
> 
> 
> On Wed, Aug 31, 2022 at 5:17 PM Ebert,Timothy Aaron <tebert at ufl.edu>
> wrote:
> 
> > Can I interest you in the join functions in dplyr?
> > https://www.datasciencemadesimple.com/join-in-r-merge-in-r/
> >
> > Filling in missing data is a useful practice when the fake (simulated)
> > data is a small proportion of all data. When 2/3 of the data is fake
> > one must wonder if anything based on those numbers is real or an
> > artifact of assumptions made to generate the numbers.
> >
> > I deal with weather data and some weather stations are set up to
> > average measurements between recorded values and others take a single
> > reading at regular intervals. How you interpolate might depend on
> > which option describes your data. The alternative is to use the method
> > for recording ws and apply it to the other data that will be merged
> > with these data. I assume there is more data, otherwise I see little
> > point in expanding these values out.
> >
> > Tim
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
> > Sent: Wednesday, August 31, 2022 2:09 AM
> > To: r-help at r-project.org
> > Subject: [R] Combine two dataframe with different row number and
> > interpolation between values
> >
> > [External Email]
> >
> >  Dear all,
> > I am trying to combine two large dataframe in order to make a
> > dataframe with exactly the dimension of the second dataframe.
> > The first df is as follows:
> >
> > df1 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 2920), d
> > = rep(c(1:365,1:365,1:365,1:365,1:365),each=8),
> >       h = rep(c(seq(3,24, by = 3),seq(3,24, by = 3),seq(3,24, by =
> > 3),seq(3,24, by = 3),seq(3,24, by = 3)),365),
> >       ws = rnorm(1:14600, mean=20))
> > > head(df1)
> >      y       d   h        ws
> > 1  2010  1  3     20.71488
> > 2  2010  1  6     19.70125
> > 3  2010  1  9     21.00180
> > 4  2010  1 12     20.29236
> > 5  2010  1 15     20.12317
> > 6  2010  1 18     19.47782
> >
> > The data in the "ws" column were measured with 3 hours frequency and I
> > need data with one hour frequency. I have made a second df as follows
> > with one hour frequency for the "ws" column.
> >
> > df2 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 8760), d
> > = rep(c(1:365,1:365,1:365,1:365,1:365),each=24),
> >       h = rep(c(1:24,1:24,1:24,1:24,1:24),365), ws = "NA")
> > > head(df2)
> >       y      d    h   ws
> > 1  2010  1    1   NA
> > 2  2010  1    2   NA
> > 3  2010  1    3   NA
> > 4  2010  1    4   NA
> > 5  2010  1    5   NA
> > 6  2010  1    6   NA
> >
> > What I am trying to do is combine these two dataframes so as to the
> > rows in
> > df1 (based on the values of "y", "d", "h" columns) that have values
> > exactly similar to df2's rows copied in its place in the new df (df3).
> > For example, in the first dataframe the first row was measured at 3
> > o'clock on the first day of 2010 and this row must be placed on the
> > third row of the second dataframe which has a similar value (2010, 1,
> > 3). Like the below
> > table:
> >       y      d    h   ws
> > 1  2010  1    1   NA
> > 2  2010  1    2   NA
> > 3  2010  1    3   20.71488
> > 4  2010  1    4   NA
> > 5  2010  1    5   NA
> > 6  2010  1    6   19.70125
> >
> > But regarding the values of the "ws" column for df2 that do not have
> > value (at 4 and 5 o'clock), I need to interpolate between the before
> > and after values to fill in the missing data of the "ws".
> > I have tried the following codes but they did not work correctly.
> >
> > > df3 = merge(df1, df2, by = "y")
> > Error: cannot allocate vector of size 487.9 Mb or
> > > library(dplyr)
> > > df3<- df1%>% full_join(df2)
> >
> >
> > Is there any way to do this?
> > Sincerely
> >
> >
> >
> >
> >
> > --
> > Best Regards
> > Javad Bayat
> > M.Sc. Environment Engineering
> > Alternative Mail: bayat194 at yahoo.com
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> > .ethz.ch%2Fmailman%2Flistinfo%2Fr-
> help&amp;data=05%7C01%7Ctebert%40ufl
> >
> .edu%7C9e63e590cb834ddc23d908da8b1802e2%7C0d4da0f84a314d76ace6
> 0a62331e
> >
> 1b84%7C0%7C0%7C637975232519465332%7CUnknown%7CTWFpbGZsb3d8
> eyJWIjoiMC4w
> >
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
> %7C%7C
> >
> &amp;sdata=WigJVAmdLn%2FK7ZtJq28%2Buv4aDmUjNXu6QPabdt5h2iQ%3D
> &amp;rese
> > rved=0
> > PLEASE do read the posting guide
> >
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> > -project.org%2Fposting-
> guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> >
> 7C9e63e590cb834ddc23d908da8b1802e2%7C0d4da0f84a314d76ace60a623
> 31e1b84%
> >
> 7C0%7C0%7C637975232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIj
> oiMC4wLjAwM
> >
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7
> C&amp;
> >
> sdata=m1VCPBpnYy%2FwqlOuf5froUVEMBDJKwDuAWS4cFNx1wI%3D&amp;r
> eserved=0
> > and provide commented, minimal, self-contained, reproducible code.
> >
> 
> 
> --
> Best Regards
> Javad Bayat
> M.Sc. Environment Engineering
> Alternative Mail: bayat194 at yahoo.com
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From petr@p|k@| @end|ng |rom prechez@@cz  Thu Sep  1 12:29:09 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 1 Sep 2022 10:29:09 +0000
Subject: [R] Combine two dataframe with different row number and
 interpolation between values
In-Reply-To: <CA+8X3fUascDz4oRhxk4yYb5fhzhPhW_JGbePU1kiWU-NVHAKjw@mail.gmail.com>
References: <CANTxAm+qPT_39eEuZT20LtBJ2hOaDCstrFMi-e-WiCJZc4fXfQ@mail.gmail.com>
 <BN6PR2201MB1553ACD3653959F1FEE4081BCF789@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CANTxAmL_T_02b-uyQ6kw4735C5kbaFcwmOSyxFbjEdZ05w4LzA@mail.gmail.com>
 <CA+8X3fUascDz4oRhxk4yYb5fhzhPhW_JGbePU1kiWU-NVHAKjw@mail.gmail.com>
Message-ID: <8f3eea42758741d79a02fcc3a397ccb1@SRVEXCHCM1302.precheza.cz>

Hi

You could also use approxfun to fill NA values

fff <- approxfun(1:dim(df3)[1], df3$ws.x)
df3$ws2 <- fff(1:dim(df3)[1])
head(df3)
     y d h     ws.x ws.y      ws2
1 2010 1 1       NA   NA       NA
2 2010 1 2       NA   NA       NA
3 2010 1 3 20.46314   NA 20.46314
4 2010 1 4       NA   NA 20.74001
5 2010 1 5       NA   NA 21.01689
6 2010 1 6 21.29376   NA 21.29376

And fill starting or trailing NA by na.locf function from zoo package or
change starting or trailing NA to some value before calling approxfun.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
> Sent: Thursday, September 1, 2022 11:31 AM
> To: javad bayat <j.bayat194 at gmail.com>; r-help mailing list <r-help at r-
> project.org>
> Subject: Re: [R] Combine two dataframe with different row number and
> interpolation between values
> 
> Hi Javad,
> You seem to have the data frame join worked out, so here is a function
> to interpolate over sequences of NAs. I have found it quite useful.
> 
> # interpolate over sequences of NAs
> # NA sequences at the beginning of a file are replaced with the first
> nonNA value
> # NA sequences at the end are filled with the last nonNA value
> # sequences of all NAs are returned unaltered
> interpNA<-function(x) {
>  if(any(is.na(x))) {
>   xrle<-rle(is.na(x))
>   begin<-end<-1
>   # if the sequence begins with NA
>   # set the initial run of NAs to the 1st non-NA
>   if(is.na(x[1])) x[1:xrle$lengths[1]]<-x[xrle$lengths[1]+1]
>   for(i in 1:length(xrle$values)) {
>    # if this is a run of NA, fill it
>    if(xrle$values[i]) {
>     end<-begin+xrle$lengths[i]+(i>1)
>     if(is.na(x[end])) x[begin:(end-1)]<-x[begin]
>     else x[begin:end]<-seq(x[begin],x[end],length.out=1+end-begin)
>     begin<-end+xrle$lengths[i]-1
>   }
>    else {
>     # set begin to the end of the non-NA values
>     begin<-end+xrle$lengths[i]-1
>    }
>   }
>  }
>  return(x)
> }
> 
> Jim
> 
> On Thu, Sep 1, 2022 at 3:29 PM javad bayat <j.bayat194 at gmail.com> wrote:
> >
> >  Dear Tim;
> > The dplyr did not work for me. My data frames have exactly similar
columns
> > but different row numbers.
> > Mr Petr sent this code and the code worked but it copied the second
> > dataframe into the first one and did not replace the corresponding row.
> > > df3 = merge(df1, df2, all = TRUE)
> > Regarding filling the "NA" data, it does not matter for me to
interpolate
> > between numbers or put the mean of numbers.
> > Sincerely
> >
> >
> >
> >
> >
> >
> > On Wed, Aug 31, 2022 at 5:17 PM Ebert,Timothy Aaron <tebert at ufl.edu>
> wrote:
> >
> > > Can I interest you in the join functions in dplyr?
> > > https://www.datasciencemadesimple.com/join-in-r-merge-in-r/
> > >
> > > Filling in missing data is a useful practice when the fake (simulated)
> > > data is a small proportion of all data. When 2/3 of the data is fake
one
> > > must wonder if anything based on those numbers is real or an artifact
of
> > > assumptions made to generate the numbers.
> > >
> > > I deal with weather data and some weather stations are set up to
average
> > > measurements between recorded values and others take a single reading
at
> > > regular intervals. How you interpolate might depend on which option
> > > describes your data. The alternative is to use the method for
recording ws
> > > and apply it to the other data that will be merged with these data. I
> > > assume there is more data, otherwise I see little point in expanding
these
> > > values out.
> > >
> > > Tim
> > >
> > > -----Original Message-----
> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
> > > Sent: Wednesday, August 31, 2022 2:09 AM
> > > To: r-help at r-project.org
> > > Subject: [R] Combine two dataframe with different row number and
> > > interpolation between values
> > >
> > > [External Email]
> > >
> > >  Dear all,
> > > I am trying to combine two large dataframe in order to make a
dataframe
> > > with exactly the dimension of the second dataframe.
> > > The first df is as follows:
> > >
> > > df1 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 2920), d
=
> > > rep(c(1:365,1:365,1:365,1:365,1:365),each=8),
> > >       h = rep(c(seq(3,24, by = 3),seq(3,24, by = 3),seq(3,24, by =
> > > 3),seq(3,24, by = 3),seq(3,24, by = 3)),365),
> > >       ws = rnorm(1:14600, mean=20))
> > > > head(df1)
> > >      y       d   h        ws
> > > 1  2010  1  3     20.71488
> > > 2  2010  1  6     19.70125
> > > 3  2010  1  9     21.00180
> > > 4  2010  1 12     20.29236
> > > 5  2010  1 15     20.12317
> > > 6  2010  1 18     19.47782
> > >
> > > The data in the "ws" column were measured with 3 hours frequency and I
> > > need data with one hour frequency. I have made a second df as follows
with
> > > one hour frequency for the "ws" column.
> > >
> > > df2 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 8760), d
=
> > > rep(c(1:365,1:365,1:365,1:365,1:365),each=24),
> > >       h = rep(c(1:24,1:24,1:24,1:24,1:24),365), ws = "NA")
> > > > head(df2)
> > >       y      d    h   ws
> > > 1  2010  1    1   NA
> > > 2  2010  1    2   NA
> > > 3  2010  1    3   NA
> > > 4  2010  1    4   NA
> > > 5  2010  1    5   NA
> > > 6  2010  1    6   NA
> > >
> > > What I am trying to do is combine these two dataframes so as to the
rows in
> > > df1 (based on the values of "y", "d", "h" columns) that have values
> > > exactly similar to df2's rows copied in its place in the new df (df3).
> > > For example, in the first dataframe the first row was measured at 3
> > > o'clock on the first day of 2010 and this row must be placed on the
third
> > > row of the second dataframe which has a similar value (2010, 1, 3).
Like
> > > the below
> > > table:
> > >       y      d    h   ws
> > > 1  2010  1    1   NA
> > > 2  2010  1    2   NA
> > > 3  2010  1    3   20.71488
> > > 4  2010  1    4   NA
> > > 5  2010  1    5   NA
> > > 6  2010  1    6   19.70125
> > >
> > > But regarding the values of the "ws" column for df2 that do not have
value
> > > (at 4 and 5 o'clock), I need to interpolate between the before and
after
> > > values to fill in the missing data of the "ws".
> > > I have tried the following codes but they did not work correctly.
> > >
> > > > df3 = merge(df1, df2, by = "y")
> > > Error: cannot allocate vector of size 487.9 Mb or
> > > > library(dplyr)
> > > > df3<- df1%>% full_join(df2)
> > >
> > >
> > > Is there any way to do this?
> > > Sincerely
> > >
> > >
> > >
> > >
> > >
> > > --
> > > Best Regards
> > > Javad Bayat
> > > M.Sc. Environment Engineering
> > > Alternative Mail: bayat194 at yahoo.com
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >
> > >
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.et
> hz.ch%2Fmailman%2Flistinfo%2Fr-
> help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9e63e590cb834ddc23d90
> 8da8b1802e2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C6379
> 75232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&a
> mp;sdata=WigJVAmdLn%2FK7ZtJq28%2Buv4aDmUjNXu6QPabdt5h2iQ%3D&a
> mp;reserved=0
> > > PLEASE do read the posting guide
> > >
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-
> project.org%2Fposting-
> guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9e63e590cb834ddc
> 23d908da8b1802e2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7
> C637975232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> 7C&amp;sdata=m1VCPBpnYy%2FwqlOuf5froUVEMBDJKwDuAWS4cFNx1wI%3
> D&amp;reserved=0
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > Best Regards
> > Javad Bayat
> > M.Sc. Environment Engineering
> > Alternative Mail: bayat194 at yahoo.com
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From n|ckmwr@y @end|ng |rom gm@||@com  Thu Sep  1 12:49:31 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Thu, 1 Sep 2022 11:49:31 +0100
Subject: [R] GIS in R
Message-ID: <CABxY9BP4s8M_ZVtWD1W9SSpHN9+NEyWyOmaf=MDtOm9mjHfEfg@mail.gmail.com>

I hope that this is an allowable question - for my hydrological research I
need to create and manipulate maps (ideally in raster form), and get
conversant with GIS.  I have for example downloaded QGIS but am finding the
sites on it opaque, and more widely I am finding it hard to find useful
sources of information on GIS processing in R.

Does anyone know of any accessible sites or useful texts on GIS processing
in R?

Thanks Nick Wray

	[[alternative HTML version deleted]]


From te@3rd @end|ng |rom gm@||@com  Thu Sep  1 13:41:04 2022
From: te@3rd @end|ng |rom gm@||@com (Thomas Adams)
Date: Thu, 1 Sep 2022 07:41:04 -0400
Subject: [R] GIS in R
In-Reply-To: <CABxY9BP4s8M_ZVtWD1W9SSpHN9+NEyWyOmaf=MDtOm9mjHfEfg@mail.gmail.com>
References: <CABxY9BP4s8M_ZVtWD1W9SSpHN9+NEyWyOmaf=MDtOm9mjHfEfg@mail.gmail.com>
Message-ID: <CAGxgkWiNz1FF7KP-v9+aTAVS+2NHf+Q-yizoM8w8Skxqy72+sQ@mail.gmail.com>

Hi Nick,

First off, I would suggest going to:

https://cran.r-project.org/web/views/Spatial.html

also have a close look at
https://journal.r-project.org/archive/2017/RJ-2017-067/RJ-2017-067.pdf

And you might also consider the use of GRASS GIS, which interfaces with R
pretty seamlessly: https://grasswiki.osgeo.org/wiki/R_statistics/rgrass7

Best,
Tom

On Thu, Sep 1, 2022 at 6:50 AM Nick Wray <nickmwray at gmail.com> wrote:

> I hope that this is an allowable question - for my hydrological research I
> need to create and manipulate maps (ideally in raster form), and get
> conversant with GIS.  I have for example downloaded QGIS but am finding the
> sites on it opaque, and more widely I am finding it hard to find useful
> sources of information on GIS processing in R.
>
> Does anyone know of any accessible sites or useful texts on GIS processing
> in R?
>
> Thanks Nick Wray
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From t@v|b@r @end|ng |rom gm@||@com  Thu Sep  1 14:43:21 2022
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Thu, 1 Sep 2022 14:43:21 +0200
Subject: [R] GIS in R
In-Reply-To: <CABxY9BP4s8M_ZVtWD1W9SSpHN9+NEyWyOmaf=MDtOm9mjHfEfg@mail.gmail.com>
References: <CABxY9BP4s8M_ZVtWD1W9SSpHN9+NEyWyOmaf=MDtOm9mjHfEfg@mail.gmail.com>
Message-ID: <aee8323a-3237-b4e3-b091-253b1ac0bf60@gmail.com>

Two comments in addition to what Tom suggested:

This online book comes highly recommended:

https://geocompr.robinlovelace.net/


and when you encounter further questions specific to spatial analysis, 
you'll want to post to the R geo special interest group maillist:

https://stat.ethz.ch/mailman/listinfo/r-sig-geo


Regards,

Micha


On 9/1/22 12:49, Nick Wray wrote:
> I hope that this is an allowable question - for my hydrological research I
> need to create and manipulate maps (ideally in raster form), and get
> conversant with GIS.  I have for example downloaded QGIS but am finding the
> sites on it opaque, and more widely I am finding it hard to find useful
> sources of information on GIS processing in R.
>
> Does anyone know of any accessible sites or useful texts on GIS processing
> in R?
>
> Thanks Nick Wray
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918
https://orcid.org/0000-0002-1128-1325


From @@r@h@go@|ee @end|ng |rom gm@||@com  Thu Sep  1 16:11:56 2022
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Thu, 1 Sep 2022 10:11:56 -0400
Subject: [R] GIS in R
In-Reply-To: <CABxY9BP4s8M_ZVtWD1W9SSpHN9+NEyWyOmaf=MDtOm9mjHfEfg@mail.gmail.com>
References: <CABxY9BP4s8M_ZVtWD1W9SSpHN9+NEyWyOmaf=MDtOm9mjHfEfg@mail.gmail.com>
Message-ID: <CAM_vju=y7FDt0VO1dF4a23S9NWCb0CGj-AMrPDJstqNQtS+-PQ@mail.gmail.com>

Hi Nick,

There are a bunch of resources. You might start with this Spatial Data
Science with R book at https://rspatial.org

The book fondly known as ASDAR (
https://link.springer.com/book/10.1007/978-1-4614-7618-4 ) is a more
comprehensive survey of spatial data in R, but if you?re mainly doing
raster analysis the above may be what you need.

For specific questions, there?s a subject mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

Sarah

On Thu, Sep 1, 2022 at 6:50 AM Nick Wray <nickmwray at gmail.com> wrote:
>
> I hope that this is an allowable question - for my hydrological research I
> need to create and manipulate maps (ideally in raster form), and get
> conversant with GIS.  I have for example downloaded QGIS but am finding the
> sites on it opaque, and more widely I am finding it hard to find useful
> sources of information on GIS processing in R.
>
> Does anyone know of any accessible sites or useful texts on GIS processing
> in R?
>
> Thanks Nick Wray
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @erv|ce @end|ng |rom @hd@w@on@com  Thu Sep  1 17:45:15 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Thu, 1 Sep 2022 11:45:15 -0400
Subject: [R] Error Running arules
Message-ID: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>

Hi Everyone,


I upgraded my box recently. I am now running R at version 4.2. I 
attempted to do association rules today using arules. I am getting two 
errors.

My first guess is there is something in the build of the arules that is 
not found in r-base. My second guess is the script syntax needs further 
work.

Anyone have an idea how to interpret these two errors, pls?

***************************************************
stephen at LENOVO-SSD ~/Desktop $ dpkg -s r-base | grep Version
Version: 4.2.1-2.2204.0
stephen at LENOVO-SSD ~/Desktop $ dpkg -s r-cran-arules | grep Version
Version: 1.7-4-1cran1.2204.0
stephen at LENOVO-SSD ~/Desktop $ dpkg -s r-cran-Matrix | grep Version
Version: 1.4-1-1.2204.0
stephen at LENOVO-SSD ~/Desktop $ dpkg -s r-cran-psych | grep Version
Version: 2.2.5-1cran1.2204.0
stephen at LENOVO-SSD ~/Desktop $
***************************************************
setwd("/home/stephen/SHD-R")

library(Matrix)
library(arules)
library(psych)

Data <- read.csv("./input/DataSet.csv", header=T, colClasses='factor')

Groups <- Data[6:12]
Groups[Groups=="0"] <- NA
View(Groups)

rules <- apriori(Groups, parameter = list(ext = FALSE, minlen=2, 
supp=0.2, conf=0.5))
inspect(rules)
***************************************************
ERROR ONE
Attaching package: ?arules?

The following objects are masked from ?package:base?:

 ??? abbreviate, write
***************************************************
ERROR TWO
Error in eval(ei, envir) : object 'Insert' not found
***************************************************


Kindest Regards,
-- 
*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Sep  1 18:25:21 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 1 Sep 2022 17:25:21 +0100
Subject: [R] Problems with dataframe
In-Reply-To: <CANTxAmJt02SjHpsPwtOt=oG9=9UixrAn06m_TCXt26HVfsSjjA@mail.gmail.com>
References: <CANTxAmJt02SjHpsPwtOt=oG9=9UixrAn06m_TCXt26HVfsSjjA@mail.gmail.com>
Message-ID: <2cb4af8b-c759-60f2-5da3-3986be37b6d7@sapo.pt>

Hello,

The following code does not merge the two data sets, it creates a third one.

1. split the data by year and day
2. for each sub-df, assign the values in df1$ws to the corresponding df2$ws
3. loop through df3 interpolating the values in ws and replacing the NA 
by the new ones. This is linear interpolation, not to substitute the 
mean for NA's.
4. bind the sub-df's together and remove the temp sp1, sp2.
5. if you want to, you can write df2 wherever df3 occurs. In fact, there 
is no need for the new df3, I have coded it like this to make the 
several steps more clear but you can simply use df2 throughoutthe code 
below.


sp1 <- split(df1, list(df1$y, df1$d))
sp2 <- split(df2, list(df2$y, df2$d))

df3 <- Map(\(X, Y) {
   i <- match(X$h, Y$h)
   Y$ws[i] <- X$ws
   Y
}, sp1, sp2)

df3 <- lapply(df3, \(X) {
   X$ws <- approx(X$h, X$ws, xout = X$h)$y
   X
})

df3 <- do.call(rbind, df3)
str(df3)
rm(sp1, sp2)


Hope this helps,

Rui Barradas


?s 10:03 de 01/09/2022, javad bayat escreveu:
>   Dear Rui,
> I have sent this to the R mailing list but I did not receive a right
> solution. I apologize for sending this to you. Can you help me to fix this
> problem?
> 
> I am trying to combine two large dataframe in order to make a dataframe
> with exactly the dimension of the second dataframe.
> The first df is as follows:
> 
> df1 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 2920), d =
> rep(c(1:365,1:365,1:365,1:365,1:365),each=8),
>        h = rep(c(seq(3,24, by = 3),seq(3,24, by = 3),seq(3,24, by =
> 3),seq(3,24, by = 3),seq(3,24, by = 3)),365),
>        ws = rnorm(1:14600, mean=20))
>> head(df1)
>       y       d   h        ws
> 1  2010  1  3     20.71488
> 2  2010  1  6     19.70125
> 3  2010  1  9     21.00180
> 4  2010  1 12     20.29236
> 5  2010  1 15     20.12317
> 6  2010  1 18     19.47782
> 
> The data in the "ws" column were measured with 3 hours frequency and I need
> data with one hour frequency. I have made a second df as follows with one
> hour frequency for the "ws" column.
> 
> df2 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each = 8760), d =
> rep(c(1:365,1:365,1:365,1:365,1:365),each=24),
>        h = rep(c(1:24,1:24,1:24,1:24,1:24),365), ws = "NA")
>> head(df2)
>        y      d    h   ws
> 1  2010  1    1   NA
> 2  2010  1    2   NA
> 3  2010  1    3   NA
> 4  2010  1    4   NA
> 5  2010  1    5   NA
> 6  2010  1    6   NA
> 
> What I am trying to do is combine these two dataframes so as to the rows in
> df1 (based on the values of "y", "d", "h" columns) that have values exactly
> similar to df2's rows copied in its place in the new df (df3).
> For example, in the first dataframe the first row was measured at 3 o'clock
> on the first day of 2010 and this row must be placed on the third row of
> the second dataframe which has a similar value (2010, 1, 3). Like the below
> table:
>        y      d    h   ws
> 1  2010  1    1   NA
> 2  2010  1    2   NA
> 3  2010  1    3   20.71488
> 4  2010  1    4   NA
> 5  2010  1    5   NA
> 6  2010  1    6   19.70125
> 
> But regarding the values of the "ws" column for df2 that do not have value
> (at 4 and 5 o'clock), I need to interpolate between the before and after
> values to fill in the missing data of the "ws".
> I have tried the following codes but they did not work correctly.
> 
>> df3 = merge(df1, df2, by = "y")
> Error: cannot allocate vector of size 487.9 Mb
> or
>> library(dplyr)
>> df3<- df1%>% full_join(df2)
> 
> Pikal Petr has sent a code and the code worked but it copied the second
> dataframe into the first one and did not replace the corresponding row in
> the first one.
> 
>> df3 = merge(df1, df2, all = TRUE)
> 
> Regarding filling the "NA" data, it does not matter for me to interpolate
> between numbers or put the mean of numbers.
> The dplyr did not work for me. My data frames have exactly similar columns
> but different row numbers.
> 
> Is there any way to do this?
> Sincerely
> 
>


From y@ngk@|9999 @end|ng |rom y@hoo@com  Thu Sep  1 18:55:04 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Thu, 1 Sep 2022 16:55:04 +0000 (UTC)
Subject: [R] how to add vertical sliding bar in flexdashboard output
References: <193118096.1640482.1662051304265.ref@mail.yahoo.com>
Message-ID: <193118096.1640482.1662051304265@mail.yahoo.com>

Hello everyone,I generated an output using flexdashboard. But the output file doesn't have vertical sliding bar. How can I do to add it in? I attached my code below.Thank you,Kai
---title: "data report example"date: "`r Sys.Date()`"output:?? flexdashboard::flex_dashboard:? ? orientation: columns? ? vertical_layout: fill---

```{r setup, include=FALSE, echo=FALSE}library(flexdashboard)library(tidyverse)mtcars$gear_c <- as.character(mtcars$gear)
```
### anova analysis?```{r}################################################################below is anova analysis for assumption of equal variances
# Compute the analysis of varianceres.aov <- aov(qsec ~ gear_c, data = mtcars)# Summary of the analysisaov1 <- summary(res.aov)
#perform Tukey HSD test (look the difference between each group)aov1_par <- TukeyHSD(res.aov, conf.level=.95)#draw confidence interval plot, see this plot in the following plot tag#plot(TukeyHSD(res.aov, conf.level=.95), las =2)
################################################################ANOVA test with no assumption of equal variances
aov2 <- oneway.test(qsec ~ gear_c, data = mtcars)aov2_par <- pairwise.t.test(mtcars$qsec, mtcars$gear_c,? ? ? ? ? ? ? ? p.adjust.method = "holm", pool.sd = FALSE)
# Compute Kruskal-Wallis testaov3 <- kruskal.test(qsec ~ gear_c, data = mtcars)

#student ttestg34 <- subset(mtcars, gear_c != "5")t1 <- t.test(qsec ~ gear_c, data = g34)
g35 <- subset(mtcars, gear_c != "4")t2 <- t.test(qsec ~ gear_c, data = g35)
g45 <- subset(mtcars, gear_c != "3")t3 <- t.test(qsec ~ gear_c, data = g45)
aov_all <- paste0(aov1, aov1_par, aov2, aov2_par, aov3, t1, t2, t3, '\n')
print(aov1)print(aov1_par)print(aov2)print(aov2_par)print(aov3)print(t1)print(t2)print(t3)
```


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Sep  1 19:08:47 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 1 Sep 2022 10:08:47 -0700
Subject: [R] Error Running arules
In-Reply-To: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
Message-ID: <CAGxFJbRe=_stEYU0mLr58mn3TzW6sVrME4Xaw9m2ZNprZ8mDVw@mail.gmail.com>

I have no clue about #2, but do note
----------
ERROR ONE
Attaching package: ?arules?

The following objects are masked from ?package:base?:

     abbreviate, write
---------
is *NOT* an error.  It merely means that arules has its own versions
of abbreviate() and write(), which will be the functions called if you
do not prefix calling the base functions with 'base::', e.g. as in
base::abbreviate(...)

Cheers,
Bert

On Thu, Sep 1, 2022 at 8:46 AM Stephen H. Dawson, DSL via R-help
<r-help at r-project.org> wrote:
>
> Hi Everyone,
>
>
> I upgraded my box recently. I am now running R at version 4.2. I
> attempted to do association rules today using arules. I am getting two
> errors.
>
> My first guess is there is something in the build of the arules that is
> not found in r-base. My second guess is the script syntax needs further
> work.
>
> Anyone have an idea how to interpret these two errors, pls?
>
> ***************************************************
> stephen at LENOVO-SSD ~/Desktop $ dpkg -s r-base | grep Version
> Version: 4.2.1-2.2204.0
> stephen at LENOVO-SSD ~/Desktop $ dpkg -s r-cran-arules | grep Version
> Version: 1.7-4-1cran1.2204.0
> stephen at LENOVO-SSD ~/Desktop $ dpkg -s r-cran-Matrix | grep Version
> Version: 1.4-1-1.2204.0
> stephen at LENOVO-SSD ~/Desktop $ dpkg -s r-cran-psych | grep Version
> Version: 2.2.5-1cran1.2204.0
> stephen at LENOVO-SSD ~/Desktop $
> ***************************************************
> setwd("/home/stephen/SHD-R")
>
> library(Matrix)
> library(arules)
> library(psych)
>
> Data <- read.csv("./input/DataSet.csv", header=T, colClasses='factor')
>
> Groups <- Data[6:12]
> Groups[Groups=="0"] <- NA
> View(Groups)
>
> rules <- apriori(Groups, parameter = list(ext = FALSE, minlen=2,
> supp=0.2, conf=0.5))
> inspect(rules)
> ***************************************************
> ERROR ONE
> Attaching package: ?arules?
>
> The following objects are masked from ?package:base?:
>
>      abbreviate, write
> ***************************************************
> ERROR TWO
> Error in eval(ei, envir) : object 'Insert' not found
> ***************************************************
>
>
> Kindest Regards,
> --
> *Stephen Dawson, DSL*
> /Executive Strategy Consultant/
> Business & Technology
> +1 (865) 804-3454
> http://www.shdawson.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Thu Sep  1 19:11:58 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 1 Sep 2022 10:11:58 -0700
Subject: [R] how to add vertical sliding bar in flexdashboard output
In-Reply-To: <193118096.1640482.1662051304265@mail.yahoo.com>
References: <193118096.1640482.1662051304265.ref@mail.yahoo.com>
 <193118096.1640482.1662051304265@mail.yahoo.com>
Message-ID: <CAGxFJbQVMZDY-t2qLPoRDb++nENkoURhwAcbPyi0TRAp5jHO8A@mail.gmail.com>

Post in *Plain Text* so that your HTML does not get stripped and your
text mangled and thereby more likely to be ignored. If memory serves
(and my apology if it does not), you have been told this before.

Cheers,
Bert

On Thu, Sep 1, 2022 at 9:55 AM Kai Yang via R-help <r-help at r-project.org> wrote:
>
> Hello everyone,I generated an output using flexdashboard. But the output file doesn't have vertical sliding bar. How can I do to add it in? I attached my code below.Thank you,Kai
> ---title: "data report example"date: "`r Sys.Date()`"output:   flexdashboard::flex_dashboard:    orientation: columns    vertical_layout: fill---
>
> ```{r setup, include=FALSE, echo=FALSE}library(flexdashboard)library(tidyverse)mtcars$gear_c <- as.character(mtcars$gear)
> ```
> ### anova analysis ```{r}################################################################below is anova analysis for assumption of equal variances
> # Compute the analysis of varianceres.aov <- aov(qsec ~ gear_c, data = mtcars)# Summary of the analysisaov1 <- summary(res.aov)
> #perform Tukey HSD test (look the difference between each group)aov1_par <- TukeyHSD(res.aov, conf.level=.95)#draw confidence interval plot, see this plot in the following plot tag#plot(TukeyHSD(res.aov, conf.level=.95), las =2)
> ################################################################ANOVA test with no assumption of equal variances
> aov2 <- oneway.test(qsec ~ gear_c, data = mtcars)aov2_par <- pairwise.t.test(mtcars$qsec, mtcars$gear_c,                p.adjust.method = "holm", pool.sd = FALSE)
> # Compute Kruskal-Wallis testaov3 <- kruskal.test(qsec ~ gear_c, data = mtcars)
>
> #student ttestg34 <- subset(mtcars, gear_c != "5")t1 <- t.test(qsec ~ gear_c, data = g34)
> g35 <- subset(mtcars, gear_c != "4")t2 <- t.test(qsec ~ gear_c, data = g35)
> g45 <- subset(mtcars, gear_c != "3")t3 <- t.test(qsec ~ gear_c, data = g45)
> aov_all <- paste0(aov1, aov1_par, aov2, aov2_par, aov3, t1, t2, t3, '\n')
> print(aov1)print(aov1_par)print(aov2)print(aov2_par)print(aov3)print(t1)print(t2)print(t3)
> ```
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|nm@hodge@@ @end|ng |rom gm@||@com  Thu Sep  1 19:20:36 2022
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Thu, 1 Sep 2022 13:20:36 -0400
Subject: [R] how to add vertical sliding bar in flexdashboard output
In-Reply-To: <193118096.1640482.1662051304265@mail.yahoo.com>
References: <193118096.1640482.1662051304265.ref@mail.yahoo.com>
 <193118096.1640482.1662051304265@mail.yahoo.com>
Message-ID: <CACxE24kBE_=h5bWVYwG+A22d1iRQSav=KUu9RmzrOPcmKaLL5g@mail.gmail.com>

You may actually want to send an email to the RStudio community.  They deal
with this as a rule.

Thanks,
Erin

On Thu, Sep 1, 2022 at 12:55 PM Kai Yang via R-help <r-help at r-project.org>
wrote:

> Hello everyone,I generated an output using flexdashboard. But the output
> file doesn't have vertical sliding bar. How can I do to add it in? I
> attached my code below.Thank you,Kai
> ---title: "data report example"date: "`r Sys.Date()`"output:
> flexdashboard::flex_dashboard:    orientation: columns    vertical_layout:
> fill---
>
> ```{r setup, include=FALSE,
> echo=FALSE}library(flexdashboard)library(tidyverse)mtcars$gear_c <-
> as.character(mtcars$gear)
> ```
> ### anova
> analysis ```{r}################################################################below
> is anova analysis for assumption of equal variances
> # Compute the analysis of varianceres.aov <- aov(qsec ~ gear_c, data =
> mtcars)# Summary of the analysisaov1 <- summary(res.aov)
> #perform Tukey HSD test (look the difference between each group)aov1_par
> <- TukeyHSD(res.aov, conf.level=.95)#draw confidence interval plot, see
> this plot in the following plot tag#plot(TukeyHSD(res.aov, conf.level=.95),
> las =2)
> ################################################################ANOVA test
> with no assumption of equal variances
> aov2 <- oneway.test(qsec ~ gear_c, data = mtcars)aov2_par <-
> pairwise.t.test(mtcars$qsec, mtcars$gear_c,                p.adjust.method
> = "holm", pool.sd = FALSE)
> # Compute Kruskal-Wallis testaov3 <- kruskal.test(qsec ~ gear_c, data =
> mtcars)
>
> #student ttestg34 <- subset(mtcars, gear_c != "5")t1 <- t.test(qsec ~
> gear_c, data = g34)
> g35 <- subset(mtcars, gear_c != "4")t2 <- t.test(qsec ~ gear_c, data = g35)
> g45 <- subset(mtcars, gear_c != "3")t3 <- t.test(qsec ~ gear_c, data = g45)
> aov_all <- paste0(aov1, aov1_par, aov2, aov2_par, aov3, t1, t2, t3, '\n')
>
> print(aov1)print(aov1_par)print(aov2)print(aov2_par)print(aov3)print(t1)print(t2)print(t3)
> ```
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Sep  2 09:09:20 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 2 Sep 2022 09:09:20 +0200
Subject: [R] Error Running arules
In-Reply-To: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
Message-ID: <20220902090806.5a978489@parabola>

? Thu, 1 Sep 2022 11:45:15 -0400
"Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> ?????:

> Error in eval(ei, envir) : object 'Insert' not found

traceback() is invaluable when debugging errors like this.

It might be a bug in one of the packages you're running. You might end
up having to contact the maintainer (see the maintainer() function) of
one of them to have it fixed.

-- 
Best regards,
Ivan


From r-p@ck@ge@ @end|ng |rom r-project@org  Fri Sep  2 16:26:11 2022
From: r-p@ck@ge@ @end|ng |rom r-project@org (Zhu, Yalin via R-packages)
Date: Fri, 2 Sep 2022 14:26:11 +0000
Subject: [R] [R-pkgs] gMCPLite: Lightweight Graph Based Multiple Comparison
 Procedures
Message-ID: <SN4P106MB014480742C9B8DCA49C094B1FD7A9@SN4P106MB0144.NAMP106.PROD.OUTLOOK.COM>

Dear all,

I am happy to announce that {gMCPLite} is now on CRAN. It is a lightweight fork of {gMCP} for graph-based multiple comparison procedures, with {ggplot2} multiplicity graph visualizations, graphical testing for group sequential design workflows, and essential unit testing.

I hope you find it helpful. Please feel free to reach out with feedbacks or questions.

CRAN: https://cran.r-project.org/package=gMCPLite 
Documentation: https://merck.github.io/gMCPLite/ 

-Yalin Zhu

This e-mail message, together with any attachments, cont...{{dropped:10}}

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From @erv|ce @end|ng |rom @hd@w@on@com  Fri Sep  2 18:01:55 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Fri, 2 Sep 2022 12:01:55 -0400
Subject: [R] Error Running arules
In-Reply-To: <20220902090806.5a978489@parabola>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
Message-ID: <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>

Bert,
Thanks for the guidance. Do you have a documentation URL I can review to 
research your suggestion?

Ivan,
Thanks for the guidance. The traceback() revealed the same results that 
I shared originally.

This is a bigger problem than coding a command set to run against data. 
It does seem like a version problem with arules or how it leverages 
r-base. I will go to arules maintainer for further guidance.


Kindest Regards,
*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 9/2/22 03:09, Ivan Krylov wrote:
> ? Thu, 1 Sep 2022 11:45:15 -0400
> "Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> ?????:
>
>> Error in eval(ei, envir) : object 'Insert' not found
> traceback() is invaluable when debugging errors like this.
>
> It might be a bug in one of the packages you're running. You might end
> up having to contact the maintainer (see the maintainer() function) of
> one of them to have it fixed.
>


From bgunter@4567 @end|ng |rom gm@||@com  Fri Sep  2 18:46:14 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 2 Sep 2022 09:46:14 -0700
Subject: [R] Error Running arules
In-Reply-To: <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
Message-ID: <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>

1. I told you essentially everything there is to know.
2. Chapter 13.3 of "An Introduction to R" on 'namespaces'.
3. Search on "masking in R"

Bert

On Fri, Sep 2, 2022 at 9:01 AM Stephen H. Dawson, DSL
<service at shdawson.com> wrote:
>
> Bert,
> Thanks for the guidance. Do you have a documentation URL I can review to
> research your suggestion?
>
> Ivan,
> Thanks for the guidance. The traceback() revealed the same results that
> I shared originally.
>
> This is a bigger problem than coding a command set to run against data.
> It does seem like a version problem with arules or how it leverages
> r-base. I will go to arules maintainer for further guidance.
>
>
> Kindest Regards,
> *Stephen Dawson, DSL*
> /Executive Strategy Consultant/
> Business & Technology
> +1 (865) 804-3454
> http://www.shdawson.com
>
>
> On 9/2/22 03:09, Ivan Krylov wrote:
> > ? Thu, 1 Sep 2022 11:45:15 -0400
> > "Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> ?????:
> >
> >> Error in eval(ei, envir) : object 'Insert' not found
> > traceback() is invaluable when debugging errors like this.
> >
> > It might be a bug in one of the packages you're running. You might end
> > up having to contact the maintainer (see the maintainer() function) of
> > one of them to have it fixed.
> >
>


From @erv|ce @end|ng |rom @hd@w@on@com  Fri Sep  2 18:50:18 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Fri, 2 Sep 2022 12:50:18 -0400
Subject: [R] Error Running arules
In-Reply-To: <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
 <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
Message-ID: <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>

Go it, thanks.

*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 9/2/22 12:46, Bert Gunter wrote:
> 1. I told you essentially everything there is to know.
> 2. Chapter 13.3 of "An Introduction to R" on 'namespaces'.
> 3. Search on "masking in R"
>
> Bert
>
> On Fri, Sep 2, 2022 at 9:01 AM Stephen H. Dawson, DSL
> <service at shdawson.com> wrote:
>> Bert,
>> Thanks for the guidance. Do you have a documentation URL I can review to
>> research your suggestion?
>>
>> Ivan,
>> Thanks for the guidance. The traceback() revealed the same results that
>> I shared originally.
>>
>> This is a bigger problem than coding a command set to run against data.
>> It does seem like a version problem with arules or how it leverages
>> r-base. I will go to arules maintainer for further guidance.
>>
>>
>> Kindest Regards,
>> *Stephen Dawson, DSL*
>> /Executive Strategy Consultant/
>> Business & Technology
>> +1 (865) 804-3454
>> http://www.shdawson.com
>>
>>
>> On 9/2/22 03:09, Ivan Krylov wrote:
>>> ? Thu, 1 Sep 2022 11:45:15 -0400
>>> "Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> ?????:
>>>
>>>> Error in eval(ei, envir) : object 'Insert' not found
>>> traceback() is invaluable when debugging errors like this.
>>>
>>> It might be a bug in one of the packages you're running. You might end
>>> up having to contact the maintainer (see the maintainer() function) of
>>> one of them to have it fixed.
>>>


From k@r|@m@y0 @end|ng |rom |reenet@de  Fri Sep  2 10:29:21 2022
From: k@r|@m@y0 @end|ng |rom |reenet@de (Karl May)
Date: Fri, 02 Sep 2022 18:29:21 +1000
Subject: [R] stunning matrix multiplication differences Matrix vs. matrix
Message-ID: <2941249.iZASKD2KPV@ghpc>

Hi all,

can somebody help me out with an explanation of this:

> class(M);class(MM);class(RHS)
[1] "dgCMatrix"
attr(,"package")
[1] "Matrix"
[1] "matrix" "array" 
[1] "dgeMatrix"
attr(,"package")
[1] "Matrix"
> dim(M);dim(MM);dim(RHS)
[1] 29418 29418
[1] 29418 29418
[1] 29418     1
> max(abs(M-MM))
[1] 0
> t(RHS)%*%M%*%RHS
1 x 1 Matrix of class "dgeMatrix"
         [,1]
[1,] 7264.878
> t(RHS)%*%MM%*%RHS
1 x 1 Matrix of class "dgeMatrix"
         [,1]
[1,] 5765.366
> 

Apparently the two matrices "M" and "MM" are entirely identical but the 
difference in results from multiplying both with the same matrix is, say, 
significant.

Even when I transfer M into "matrix" and then back into "Matrix" the 
differences remain:

> M <- as.matrix(M)
> t(RHS)%*%M%*%RHS
1 x 1 Matrix of class "dgeMatrix"
         [,1]
[1,] 5765.366
> M <- Matrix(M)
> t(RHS)%*%M%*%RHS
1 x 1 Matrix of class "dgeMatrix"
         [,1]
[1,] 7264.878
> 

Frankly, I have no clue what's going on!!

This is the session info:

> sessionInfo()
R version 4.1.3 (2022-03-10)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Arch Linux
BLAS/LAPACK: /opt/intel/mkl/lib/intel64/libmkl_gf_lp64.so

 [1] LC_CTYPE=en_AU.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=C                  LC_COLLATE=en_AU.UTF-8    
 [5] LC_MONETARY=en_AU.UTF-8    LC_MESSAGES=en_AU.UTF-8   
 [7] LC_PAPER=en_AU.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_AU.UTF-8 LC_IDENTIFICATION=C       

[1] graphics  grDevices datasets  stats     utils     parallel  methods  
[8] base     
[1] pedigreemm_0.3-3  lme4_1.1-28       Matrix_1.4-0      bit64_4.0.5      
[5] bit_4.0.4         data.table_1.14.2

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.8      lattice_0.20-45 MASS_7.3-55     grid_4.1.3     
 [5] nlme_3.1-155    minqa_1.2.4     nloptr_2.0.0    boot_1.3-28    
 [9] splines_4.1.3   tools_4.1.3     compiler_4.1.3


From n||e@h@d|ghe @end|ng |rom b@yer@com  Fri Sep  2 13:15:24 2022
From: n||e@h@d|ghe @end|ng |rom b@yer@com (Nilesh Dighe)
Date: Fri, 2 Sep 2022 11:15:24 +0000
Subject: [R] Combine two dataframe with different row number and
 interpolation between values
In-Reply-To: <8f3eea42758741d79a02fcc3a397ccb1@SRVEXCHCM1302.precheza.cz>
References: <CANTxAm+qPT_39eEuZT20LtBJ2hOaDCstrFMi-e-WiCJZc4fXfQ@mail.gmail.com>
 <BN6PR2201MB1553ACD3653959F1FEE4081BCF789@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CANTxAmL_T_02b-uyQ6kw4735C5kbaFcwmOSyxFbjEdZ05w4LzA@mail.gmail.com>
 <CA+8X3fUascDz4oRhxk4yYb5fhzhPhW_JGbePU1kiWU-NVHAKjw@mail.gmail.com>
 <8f3eea42758741d79a02fcc3a397ccb1@SRVEXCHCM1302.precheza.cz>
Message-ID: <AS8PR05MB7591A3049C948B42EF48E02E847A9@AS8PR05MB7591.eurprd05.prod.outlook.com>

You can also use match function to combine the two dataframes as shown below:

wh<- match(interaction(df2[c("y", "d", "h")]), interaction(df1[c("y", "d", "h")])) matched <- !is.na(wh) df2[matched, "ws"] <- df1[wh[matched],"ws"]

head(df2)
# y d h               ws
# 1 2010 1 1               NA
# 2 2010 1 2               NA
# 3 2010 1 3 21.7863481620828
# 4 2010 1 4               NA
# 5 2010 1 5               NA
# 6 2010 1 6 21.9653408303519

Nilesh

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of PIKAL Petr
Sent: Thursday, September 1, 2022 6:29 AM
To: Jim Lemon <drjimlemon at gmail.com>; javad bayat <j.bayat194 at gmail.com>; r-help mailing list <r-help at r-project.org>
Subject: Re: [R] Combine two dataframe with different row number and interpolation between values

Hi

You could also use approxfun to fill NA values

fff <- approxfun(1:dim(df3)[1], df3$ws.x)
df3$ws2 <- fff(1:dim(df3)[1])
head(df3)
     y d h     ws.x ws.y      ws2
1 2010 1 1       NA   NA       NA
2 2010 1 2       NA   NA       NA
3 2010 1 3 20.46314   NA 20.46314
4 2010 1 4       NA   NA 20.74001
5 2010 1 5       NA   NA 21.01689
6 2010 1 6 21.29376   NA 21.29376

And fill starting or trailing NA by na.locf function from zoo package or change starting or trailing NA to some value before calling approxfun.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
> Sent: Thursday, September 1, 2022 11:31 AM
> To: javad bayat <j.bayat194 at gmail.com>; r-help mailing list <r-help at r-
> project.org>
> Subject: Re: [R] Combine two dataframe with different row number and
> interpolation between values
>
> Hi Javad,
> You seem to have the data frame join worked out, so here is a function
> to interpolate over sequences of NAs. I have found it quite useful.
>
> # interpolate over sequences of NAs
> # NA sequences at the beginning of a file are replaced with the first
> nonNA value # NA sequences at the end are filled with the last nonNA
> value # sequences of all NAs are returned unaltered
> interpNA<-function(x) {
>  if(any(is.na(x))) {
>   xrle<-rle(is.na(x))
>   begin<-end<-1
>   # if the sequence begins with NA
>   # set the initial run of NAs to the 1st non-NA
>   if(is.na(x[1])) x[1:xrle$lengths[1]]<-x[xrle$lengths[1]+1]
>   for(i in 1:length(xrle$values)) {
>    # if this is a run of NA, fill it
>    if(xrle$values[i]) {
>     end<-begin+xrle$lengths[i]+(i>1)
>     if(is.na(x[end])) x[begin:(end-1)]<-x[begin]
>     else x[begin:end]<-seq(x[begin],x[end],length.out=1+end-begin)
>     begin<-end+xrle$lengths[i]-1
>   }
>    else {
>     # set begin to the end of the non-NA values
>     begin<-end+xrle$lengths[i]-1
>    }
>   }
>  }
>  return(x)
> }
>
> Jim
>
> On Thu, Sep 1, 2022 at 3:29 PM javad bayat <j.bayat194 at gmail.com> wrote:
> >
> >  Dear Tim;
> > The dplyr did not work for me. My data frames have exactly similar
columns
> > but different row numbers.
> > Mr Petr sent this code and the code worked but it copied the second
> > dataframe into the first one and did not replace the corresponding row.
> > > df3 = merge(df1, df2, all = TRUE)
> > Regarding filling the "NA" data, it does not matter for me to
interpolate
> > between numbers or put the mean of numbers.
> > Sincerely
> >
> >
> >
> >
> >
> >
> > On Wed, Aug 31, 2022 at 5:17 PM Ebert,Timothy Aaron <tebert at ufl.edu>
> wrote:
> >
> > > Can I interest you in the join functions in dplyr?
> > > https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2F
> > > www.datasciencemadesimple.com%2Fjoin-in-r-merge-in-r%2F&amp;data=0
> > > 5%7C01%7C%7C22d32a92ea5f4aa85d3208da8c04dc0f%7Cfcb2b37b5da0466b9b8
> > > 30014b67a7c78%7C0%7C0%7C637976250192968351%7CUnknown%7CTWFpbGZsb3d
> > > 8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3
> > > D%7C2000%7C%7C%7C&amp;sdata=Vq0f9lMY7EzosUTCnsXEJXZZJYiEI5icCNql%2
> > > FBJNsaE%3D&amp;reserved=0
> > >
> > > Filling in missing data is a useful practice when the fake
> > > (simulated) data is a small proportion of all data. When 2/3 of
> > > the data is fake
one
> > > must wonder if anything based on those numbers is real or an
> > > artifact
of
> > > assumptions made to generate the numbers.
> > >
> > > I deal with weather data and some weather stations are set up to
average
> > > measurements between recorded values and others take a single
> > > reading
at
> > > regular intervals. How you interpolate might depend on which
> > > option describes your data. The alternative is to use the method
> > > for
recording ws
> > > and apply it to the other data that will be merged with these
> > > data. I assume there is more data, otherwise I see little point in
> > > expanding
these
> > > values out.
> > >
> > > Tim
> > >
> > > -----Original Message-----
> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of javad
> > > bayat
> > > Sent: Wednesday, August 31, 2022 2:09 AM
> > > To: r-help at r-project.org
> > > Subject: [R] Combine two dataframe with different row number and
> > > interpolation between values
> > >
> > > [External Email]
> > >
> > >  Dear all,
> > > I am trying to combine two large dataframe in order to make a
dataframe
> > > with exactly the dimension of the second dataframe.
> > > The first df is as follows:
> > >
> > > df1 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each =
> > > 2920), d
=
> > > rep(c(1:365,1:365,1:365,1:365,1:365),each=8),
> > >       h = rep(c(seq(3,24, by = 3),seq(3,24, by = 3),seq(3,24, by =
> > > 3),seq(3,24, by = 3),seq(3,24, by = 3)),365),
> > >       ws = rnorm(1:14600, mean=20))
> > > > head(df1)
> > >      y       d   h        ws
> > > 1  2010  1  3     20.71488
> > > 2  2010  1  6     19.70125
> > > 3  2010  1  9     21.00180
> > > 4  2010  1 12     20.29236
> > > 5  2010  1 15     20.12317
> > > 6  2010  1 18     19.47782
> > >
> > > The data in the "ws" column were measured with 3 hours frequency
> > > and I need data with one hour frequency. I have made a second df
> > > as follows
with
> > > one hour frequency for the "ws" column.
> > >
> > > df2 = data.frame(y = rep(c(2010,2011,2012,2013,2014), each =
> > > 8760), d
=
> > > rep(c(1:365,1:365,1:365,1:365,1:365),each=24),
> > >       h = rep(c(1:24,1:24,1:24,1:24,1:24),365), ws = "NA")
> > > > head(df2)
> > >       y      d    h   ws
> > > 1  2010  1    1   NA
> > > 2  2010  1    2   NA
> > > 3  2010  1    3   NA
> > > 4  2010  1    4   NA
> > > 5  2010  1    5   NA
> > > 6  2010  1    6   NA
> > >
> > > What I am trying to do is combine these two dataframes so as to
> > > the
rows in
> > > df1 (based on the values of "y", "d", "h" columns) that have
> > > values exactly similar to df2's rows copied in its place in the new df (df3).
> > > For example, in the first dataframe the first row was measured at
> > > 3 o'clock on the first day of 2010 and this row must be placed on
> > > the
third
> > > row of the second dataframe which has a similar value (2010, 1, 3).
Like
> > > the below
> > > table:
> > >       y      d    h   ws
> > > 1  2010  1    1   NA
> > > 2  2010  1    2   NA
> > > 3  2010  1    3   20.71488
> > > 4  2010  1    4   NA
> > > 5  2010  1    5   NA
> > > 6  2010  1    6   19.70125
> > >
> > > But regarding the values of the "ws" column for df2 that do not
> > > have
value
> > > (at 4 and 5 o'clock), I need to interpolate between the before and
after
> > > values to fill in the missing data of the "ws".
> > > I have tried the following codes but they did not work correctly.
> > >
> > > > df3 = merge(df1, df2, by = "y")
> > > Error: cannot allocate vector of size 487.9 Mb or
> > > > library(dplyr)
> > > > df3<- df1%>% full_join(df2)
> > >
> > >
> > > Is there any way to do this?
> > > Sincerely
> > >
> > >
> > >
> > >
> > >
> > > --
> > > Best Regards
> > > Javad Bayat
> > > M.Sc. Environment Engineering
> > > Alternative Mail: bayat194 at yahoo.com
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >
> > >
> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .et%2F&amp;data=05%7C01%7C%7C22d32a92ea5f4aa85d3208da8c04dc0f%7Cfcb2b3
> 7b5da0466b9b830014b67a7c78%7C0%7C0%7C637976250192968351%7CUnknown%7CTW
> FpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6
> Mn0%3D%7C2000%7C%7C%7C&amp;sdata=VR%2BQtSTNThYD2qRH%2FujMJvoAmSkj8ZWb6
> 9lQC4MNMGg%3D&amp;reserved=0
> hz.ch%2Fmailman%2Flistinfo%2Fr-
> help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9e63e590cb834ddc23d90
> 8da8b1802e2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C6379
> 75232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&a
> mp;sdata=WigJVAmdLn%2FK7ZtJq28%2Buv4aDmUjNXu6QPabdt5h2iQ%3D&a
> mp;reserved=0
> > > PLEASE do read the posting guide
> > >
> https://eur03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -%2F&amp;data=05%7C01%7C%7C22d32a92ea5f4aa85d3208da8c04dc0f%7Cfcb2b37b
> 5da0466b9b830014b67a7c78%7C0%7C0%7C637976250192968351%7CUnknown%7CTWFp
> bGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn
> 0%3D%7C2000%7C%7C%7C&amp;sdata=uAnoH%2BHi6aSg1mgtr7PBByegKlvksUnANfT2N
> BFpuSM%3D&amp;reserved=0
> project.org%2Fposting-
> guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9e63e590cb834ddc
> 23d908da8b1802e2%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7
> C637975232519465332%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> 7C&amp;sdata=m1VCPBpnYy%2FwqlOuf5froUVEMBDJKwDuAWS4cFNx1wI%3
> D&amp;reserved=0
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > Best Regards
> > Javad Bayat
> > M.Sc. Environment Engineering
> > Alternative Mail: bayat194 at yahoo.com
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7C%7C22d32
> > a92ea5f4aa85d3208da8c04dc0f%7Cfcb2b37b5da0466b9b830014b67a7c78%7C0%7
> > C0%7C637976250192968351%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAi
> > LCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000%7C%7C%7C&amp;s
> > data=aOg9DevOR31NX4GBBOMN%2Bk6uOCUMDXzSv%2B968vc2QG8%3D&amp;reserved
> > =0 PLEASE do read the posting guide
> > https://eur03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww
> > .r-project.org%2Fposting-&amp;data=05%7C01%7C%7C22d32a92ea5f4aa85d32
> > 08da8c04dc0f%7Cfcb2b37b5da0466b9b830014b67a7c78%7C0%7C0%7C6379762501
> > 92968351%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzI
> > iLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000%7C%7C%7C&amp;sdata=u1nQCr5eWi
> > 0zuXzen4C0CW4YSs8hXvmhepAVkD3We44%3D&amp;reserved=0
> guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7C%7C22d32a92e
> a5f4aa85d3208da8c04dc0f%7Cfcb2b37b5da0466b9b830014b67a7c78%7C0%7C0%7C6
> 37976250192968351%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoi
> V2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000%7C%7C%7C&amp;sdata=aOg9D
> evOR31NX4GBBOMN%2Bk6uOCUMDXzSv%2B968vc2QG8%3D&amp;reserved=0
> PLEASE do read the posting guide
https://eur03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7C%7C22d32a92ea5f4aa85d3208da8c04dc0f%7Cfcb2b37b5da0466b9b830014b67a7c78%7C0%7C0%7C637976250192968351%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000%7C%7C%7C&amp;sdata=zVgeOMKCYAFRaqqzUot0blLwXk%2FSgROm2qbmJu4hqFQ%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
________________________________

The information contained in this e-mail is for the excl...{{dropped:9}}


From bgunter@4567 @end|ng |rom gm@||@com  Sat Sep  3 10:22:59 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 3 Sep 2022 01:22:59 -0700
Subject: [R] 
 stunning matrix multiplication differences Matrix vs. matrix
In-Reply-To: <2941249.iZASKD2KPV@ghpc>
References: <2941249.iZASKD2KPV@ghpc>
Message-ID: <CAGxFJbQZNRqXH-Xak_CMj9xrFcvU1YOF8VqFqXxA-2ytuBhzhA@mail.gmail.com>

FAQ 7.31 ?
Your matrices have about 9*10e8 entries after all.

I know almost nothing about the Matrix package, but what does
crossprod(RHS, Z) %*% RHS give for the two versions of Z = M and MM
(assuming Matrix:::crossprod S4 method works here)?
Hopefully a knowledgeable Matrix user will correct me if this is wrong.

Cheers,
Bert




On Fri, Sep 2, 2022 at 3:23 PM Karl May <karl.may0 at freenet.de> wrote:
>
> Hi all,
>
> can somebody help me out with an explanation of this:
>
> > class(M);class(MM);class(RHS)
> [1] "dgCMatrix"
> attr(,"package")
> [1] "Matrix"
> [1] "matrix" "array"
> [1] "dgeMatrix"
> attr(,"package")
> [1] "Matrix"
> > dim(M);dim(MM);dim(RHS)
> [1] 29418 29418
> [1] 29418 29418
> [1] 29418     1
> > max(abs(M-MM))
> [1] 0
> > t(RHS)%*%M%*%RHS
> 1 x 1 Matrix of class "dgeMatrix"
>          [,1]
> [1,] 7264.878
> > t(RHS)%*%MM%*%RHS
> 1 x 1 Matrix of class "dgeMatrix"
>          [,1]
> [1,] 5765.366
> >
>
> Apparently the two matrices "M" and "MM" are entirely identical but the
> difference in results from multiplying both with the same matrix is, say,
> significant.
>
> Even when I transfer M into "matrix" and then back into "Matrix" the
> differences remain:
>
> > M <- as.matrix(M)
> > t(RHS)%*%M%*%RHS
> 1 x 1 Matrix of class "dgeMatrix"
>          [,1]
> [1,] 5765.366
> > M <- Matrix(M)
> > t(RHS)%*%M%*%RHS
> 1 x 1 Matrix of class "dgeMatrix"
>          [,1]
> [1,] 7264.878
> >
>
> Frankly, I have no clue what's going on!!
>
> This is the session info:
>
> > sessionInfo()
> R version 4.1.3 (2022-03-10)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Arch Linux
> BLAS/LAPACK: /opt/intel/mkl/lib/intel64/libmkl_gf_lp64.so
>
>  [1] LC_CTYPE=en_AU.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=C                  LC_COLLATE=en_AU.UTF-8
>  [5] LC_MONETARY=en_AU.UTF-8    LC_MESSAGES=en_AU.UTF-8
>  [7] LC_PAPER=en_AU.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_AU.UTF-8 LC_IDENTIFICATION=C
>
> [1] graphics  grDevices datasets  stats     utils     parallel  methods
> [8] base
> [1] pedigreemm_0.3-3  lme4_1.1-28       Matrix_1.4-0      bit64_4.0.5
> [5] bit_4.0.4         data.table_1.14.2
>
> loaded via a namespace (and not attached):
>  [1] Rcpp_1.0.8      lattice_0.20-45 MASS_7.3-55     grid_4.1.3
>  [5] nlme_3.1-155    minqa_1.2.4     nloptr_2.0.0    boot_1.3-28
>  [9] splines_4.1.3   tools_4.1.3     compiler_4.1.3
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From t@n@@@ @end|ng |rom gm@||@com  Sun Sep  4 00:39:11 2022
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Sat, 3 Sep 2022 15:39:11 -0700
Subject: [R] confidence intervals
In-Reply-To: <BN6PR2201MB1553E6071C9A5CE6769BD45CCF769@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CA+JEM01f88pCikn6gwr20vHx_KgQ7Tnik98hYuzZPcVF1H5k0Q@mail.gmail.com>
 <61194db7-dcd5-5de0-262d-dc5843490192@comcast.net>
 <CA+JEM0234ij2_4CUY_xC5CkxdFqbe_qZvdMTM9tNvjq52pTU3A@mail.gmail.com>
 <BN6PR2201MB1553E6071C9A5CE6769BD45CCF769@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CA+JEM01GyAtiXFHi0Xfevhhe+qsSYogbeUxaFwYFLVYf0R=tJQ@mail.gmail.com>

Dear Aaron, David, and everyone,

Thank you again for your comments on my question related to the confidence
intervals. I am sorry for the late reply.

The definition of the 95 confidence intervals where our discussion
originates from has been proposed by the authors of these two articles (I
am including the links to the articles just to show that the formula has
been published in a methods article a while ago; the articles are in the
field of biology though, where not too many of you are part of, I guess).
These authors have written the scripts and they have made those available
on github. I have asked a while ago the authors why they have chosen this
formula, however, I have not received any reply. In any case, at this
moment I will use the mathematical formulas described in the articles :

https://www.cell.com/molecular-cell/fulltext/S1097-2765(15)00304-4

https://www.nature.com/articles/s41596-019-0218-7

Wishing everyone a good weekend,

Bogdan



On Sun, Aug 28, 2022 at 6:53 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> I have a general dislike of "analysis emergencies." I would like to see a
> data emergency wherein someone must cram 3 years of data collection into 18
> months so that they have time to work out the correct analysis. I am sure
> others would suggest working out how analyze the data before starting the
> experiment.
>
> Our business office gives this advice to faculty members: An emergency on
> your part is not an emergency on our part.
>
> How about starting by answering the questions posted by the people you are
> hoping will help. Focus on David's middle paragraph. However, if you can
> re-code everything to work, then it would seem that you already know the
> answer and it might be simpler/faster to write the correct code.
>
> You might spend some time looking for a scientific paper that uses that
> equation for the confidence interval and thereby get some context to
> explain why the equation is correct.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bogdan Tanasa
> Sent: Sunday, August 28, 2022 8:55 PM
> To: David Winsemius <dwinsemius at comcast.net>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] confidence intervals
>
> [External Email]
>
> Hi David,
>
> Thank you for your comments, and feed-back message. I am very happy to
> learn from the experience of the people on R mailing list, and without any
> doubt, I am very thankful to you and to everyone for sharing their
> knowledge. I do apologize for any confusion that I have created unwillingly
> with my previous email.
>
> About my previous email related to the confidence intervals: indeed I have
> posted the question with a detailed description on stackoverflow, and the
> link is listed below.
>
> I have to admit that I have been in rush willing to have the suggestions
> of R-help members by Monday (if that would have been possible), as I have
> to make a decision at the beginning of this week on whether I need to
> re-code the shell script in R. I have a deadline on Wed. The script itself
> is less important per se, I have included it just to point our the origin
> of my question.
>
> I do certainly respect the principles of online R-help community, and I
> would very much appreciate if I could have your advice on the following :
> shall a "R code related emergency" arise, would it be acceptable to post
> the question on stackoverflow with the corresponding data tables and
> detailed code, and to refer the posting on R-help mailing list ?
>
> If it is acceptable at least for a single email, and if you do not mind, I
> could mention the link to stackoverflow, inviting our members to read it,
> shall they be comfortable with this topic.
>
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313343894313%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=8sF7j4OCgH12qx4d8NCiw1%2FDbPa6nrui27S9C3ZNuL0%3D&amp;reserved=0
>
> Thanks a lot, have  a good week !
>
> ~ Bogdan
>
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313343894313%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=8sF7j4OCgH12qx4d8NCiw1%2FDbPa6nrui27S9C3ZNuL0%3D&amp;reserved=0
>
> On Sat, Aug 27, 2022, 6:52 PM David Winsemius <dwinsemius at comcast.net>
> wrote:
>
> > You cross-posted this to StackOverflow and did not say so.  ... and
> > you posted in HTML Bad dog squared. I cast one of the close votes on
> > SO, but here I can only say ... READ the Posting Guide.
> >
> > You also give no citation other than someone's Github files with
> > minimal comments in that material. You should indicate whether this
> > code has any solid support. Why do you think this code is something to
> depend upon?
> >
> > After all, you been posting questions on R-help for several months.
> > Don't you think you should make a good faith effort to understand the
> > principles underlying this resource?
> >
> >
> > --
> >
> > David.
> >
> > On 8/26/22 17:55, Bogdan Tanasa wrote:
> > > Dear all,
> > >
> > > Although I know that it is not a statistics mailing list, given my
> > > work
> > on
> > > ICeChIP
> > >
> > >
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgith
> > ub.com%2Fshah-rohan%2Ficechip%2Fblob%2Fmaster%2FScripts%2FcomputeHMDan
> > dError&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da8
> > 9592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C63797331334389431
> > 3%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6
> > Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=9HOH72K0Lj30w7tE%2BMN
> > oXakPbO1sasaujUTsnHFwDZo%3D&amp;reserved=0
> > >
> > > I would appreciate to have the answer to a question :
> > >
> > > given two variables a and b (a and b can have 1000 paired-values)
> > > and a calibration number "cal",
> > >
> > > why the 95 confidence interval has been calculated as such for each
> > > value
> > > a(i) and b(i) :
> > >
> > > 100 / cal * sqrt (( a/ (b^2) + (a^2) / (b ^3)) * 1.96
> > >
> > > Thank you,
> > >
> > > Bogdan
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%4
> > > 0ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a
> > > 62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJW
> > > IjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C300
> > > 0%7C%7C%7C&amp;sdata=KfmZ6PvxUVrbCMzVZcz6S2H2sqfWQmw2WIZHERwKDEk%3D&
> > > amp;reserved=0
> > > PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> > -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> > 7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%
> > 7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> > DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> > sdata=127HvzZh7q9Xa7LaESHIEXIy3CdmUyQ3cxAVeOA%2Bukg%3D&amp;reserved=0
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KfmZ6PvxUVrbCMzVZcz6S2H2sqfWQmw2WIZHERwKDEk%3D&amp;reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=127HvzZh7q9Xa7LaESHIEXIy3CdmUyQ3cxAVeOA%2Bukg%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From me @end|ng |rom n@nx@me  Fri Sep  2 19:27:34 2022
From: me @end|ng |rom n@nx@me (Nan Xiao)
Date: Fri, 02 Sep 2022 13:27:34 -0400
Subject: [R] [R-pkgs] pkglite 0.2.1 is released
Message-ID: <472c1447-c521-4b9b-8274-321a602b56c9@www.fastmail.com>

Dear all,

A new version of pkglite (0.2.1) is now on CRAN (https://cran.r-project.org/package=pkglite). pkglite offers a tool, grammar, and standard to represent and exchange R package source code as text files.

This version brings expanded coverage of file types (before: 88.85%, after: 96.65%, tested among all files in all CRAN packages), fewer dependencies, and more low-level enhancements. Please see the changelog (https://merck.github.io/pkglite/news/) for details.

Thanks,
-Nan

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From @erv|ce @end|ng |rom @hd@w@on@com  Sun Sep  4 18:14:23 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Sun, 4 Sep 2022 12:14:23 -0400
Subject: [R] Error Running arules
In-Reply-To: <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
 <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
 <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>
Message-ID: <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>

I contacted the arules package maintainer.

He concluded the syntax I submitted to this original post is correct. 
The problem he estimates is a version mismatch within my R packages, 
although all packages I am using come from R repositories. Specifically, 
something is off on the r-base version I am running.

I will remove all of R from my box and look to other repositories.


*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 9/2/22 12:50, Stephen H. Dawson, DSL via R-help wrote:
> Go it, thanks.
>
> *Stephen Dawson, DSL*
> /Executive Strategy Consultant/
> Business & Technology
> +1 (865) 804-3454
> http://www.shdawson.com
>
>
> On 9/2/22 12:46, Bert Gunter wrote:
>> 1. I told you essentially everything there is to know.
>> 2. Chapter 13.3 of "An Introduction to R" on 'namespaces'.
>> 3. Search on "masking in R"
>>
>> Bert
>>
>> On Fri, Sep 2, 2022 at 9:01 AM Stephen H. Dawson, DSL
>> <service at shdawson.com> wrote:
>>> Bert,
>>> Thanks for the guidance. Do you have a documentation URL I can 
>>> review to
>>> research your suggestion?
>>>
>>> Ivan,
>>> Thanks for the guidance. The traceback() revealed the same results that
>>> I shared originally.
>>>
>>> This is a bigger problem than coding a command set to run against data.
>>> It does seem like a version problem with arules or how it leverages
>>> r-base. I will go to arules maintainer for further guidance.
>>>
>>>
>>> Kindest Regards,
>>> *Stephen Dawson, DSL*
>>> /Executive Strategy Consultant/
>>> Business & Technology
>>> +1 (865) 804-3454
>>> http://www.shdawson.com
>>>
>>>
>>> On 9/2/22 03:09, Ivan Krylov wrote:
>>>> ? Thu, 1 Sep 2022 11:45:15 -0400
>>>> "Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> ?????:
>>>>
>>>>> Error in eval(ei, envir) : object 'Insert' not found
>>>> traceback() is invaluable when debugging errors like this.
>>>>
>>>> It might be a bug in one of the packages you're running. You might end
>>>> up having to contact the maintainer (see the maintainer() function) of
>>>> one of them to have it fixed.
>>>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Sep  4 20:19:19 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 4 Sep 2022 19:19:19 +0100
Subject: [R] Error Running arules
In-Reply-To: <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
 <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
 <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>
 <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>
Message-ID: <398893a5-5afb-f1dc-ef7f-5bd9e18a4add@sapo.pt>

Hello,

Before removing all of R, why not run

update.packages()

?

Hope this helps,

Rui Barradas

?s 17:14 de 04/09/2022, Stephen H. Dawson, DSL via R-help escreveu:
> I contacted the arules package maintainer.
> 
> He concluded the syntax I submitted to this original post is correct. 
> The problem he estimates is a version mismatch within my R packages, 
> although all packages I am using come from R repositories. Specifically, 
> something is off on the r-base version I am running.
> 
> I will remove all of R from my box and look to other repositories.
> 
> 
> *Stephen Dawson, DSL*
> /Executive Strategy Consultant/
> Business & Technology
> +1 (865) 804-3454
> http://www.shdawson.com
> 
> 
> On 9/2/22 12:50, Stephen H. Dawson, DSL via R-help wrote:
>> Go it, thanks.
>>
>> *Stephen Dawson, DSL*
>> /Executive Strategy Consultant/
>> Business & Technology
>> +1 (865) 804-3454
>> http://www.shdawson.com
>>
>>
>> On 9/2/22 12:46, Bert Gunter wrote:
>>> 1. I told you essentially everything there is to know.
>>> 2. Chapter 13.3 of "An Introduction to R" on 'namespaces'.
>>> 3. Search on "masking in R"
>>>
>>> Bert
>>>
>>> On Fri, Sep 2, 2022 at 9:01 AM Stephen H. Dawson, DSL
>>> <service at shdawson.com> wrote:
>>>> Bert,
>>>> Thanks for the guidance. Do you have a documentation URL I can 
>>>> review to
>>>> research your suggestion?
>>>>
>>>> Ivan,
>>>> Thanks for the guidance. The traceback() revealed the same results that
>>>> I shared originally.
>>>>
>>>> This is a bigger problem than coding a command set to run against data.
>>>> It does seem like a version problem with arules or how it leverages
>>>> r-base. I will go to arules maintainer for further guidance.
>>>>
>>>>
>>>> Kindest Regards,
>>>> *Stephen Dawson, DSL*
>>>> /Executive Strategy Consultant/
>>>> Business & Technology
>>>> +1 (865) 804-3454
>>>> http://www.shdawson.com
>>>>
>>>>
>>>> On 9/2/22 03:09, Ivan Krylov wrote:
>>>>> ? Thu, 1 Sep 2022 11:45:15 -0400
>>>>> "Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> ?????:
>>>>>
>>>>>> Error in eval(ei, envir) : object 'Insert' not found
>>>>> traceback() is invaluable when debugging errors like this.
>>>>>
>>>>> It might be a bug in one of the packages you're running. You might end
>>>>> up having to contact the maintainer (see the maintainer() function) of
>>>>> one of them to have it fixed.
>>>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @erv|ce @end|ng |rom @hd@w@on@com  Sun Sep  4 20:29:38 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Sun, 4 Sep 2022 14:29:38 -0400
Subject: [R] Error Running arules
In-Reply-To: <398893a5-5afb-f1dc-ef7f-5bd9e18a4add@sapo.pt>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
 <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
 <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>
 <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>
 <398893a5-5afb-f1dc-ef7f-5bd9e18a4add@sapo.pt>
Message-ID: <dcc7b0b2-a272-1510-24d2-43dc51955112@shdawson.com>

Thought about it.

The arules maintainer said to remove and reinstall.

I am not a huge fan of having apps in my home directory.

Oddly, I had to wait for r-base to update to 4.2 as it is a requirement 
of arules.

I went with my distribution's repository for all things R. Then, I went 
for CRAN repository when I could not get r-base at 4.2 from my 
distribution's repository. I am thinking this could be where things got off.

Frankly, I cannot believe things are off. If the primary repository 
shoots me r-base 4.2, cloud.r-project.org got me arules, and the arules 
maintainer says nothing about a particular version of r-base beyond 4.2 
as prompted by arules, then I am wondering if I am about to spend time 
on this versioning effort for nothing.

stephen at LENOVO-SSD ~/Desktop $ grep ^[^#] /etc/apt/sources.list 
/etc/apt/sources.list.d/*
/etc/apt/sources.list.d/additional-repositories.list:deb 
https://cloud.r-project.org/bin/linux/ubuntu jammy-cran40/
/etc/apt/sources.list.d/c2d4u_team-c2d4u4_0_-jammy.list:deb 
http://ppa.launchpad.net/c2d4u.team/c2d4u4.0+/ubuntu jammy main
/etc/apt/sources.list.d/google-chrome.list:deb [arch=amd64] 
https://dl.google.com/linux/chrome/deb/ stable main
/etc/apt/sources.list.d/official-package-repositories.list:deb 
http://packages.linuxmint.com vanessa main upstream import backport 
#id:linuxmint_main
/etc/apt/sources.list.d/official-package-repositories.list:deb 
http://archive.ubuntu.com/ubuntu jammy main restricted universe multiverse
/etc/apt/sources.list.d/official-package-repositories.list:deb 
http://archive.ubuntu.com/ubuntu jammy-updates main restricted universe 
multiverse
/etc/apt/sources.list.d/official-package-repositories.list:deb 
http://archive.ubuntu.com/ubuntu jammy-backports main restricted 
universe multiverse
/etc/apt/sources.list.d/official-package-repositories.list:deb 
http://security.ubuntu.com/ubuntu/ jammy-security main restricted 
universe multiverse
/etc/apt/sources.list.d/skype-stable.list:deb [arch=amd64] 
https://repo.skype.com/deb stable main
/etc/apt/sources.list.d/teams.list:deb [arch=amd64] 
https://packages.microsoft.com/repos/ms-teams stable main
stephen at LENOVO-SSD ~/Desktop $

stephen at LENOVO-SSD ~/Desktop $ cat /etc/linuxmint/info
RELEASE=21
CODENAME=vanessa
EDITION="Cinnamon"
DESCRIPTION="Linux Mint 21 Vanessa"
DESKTOP=Gnome
TOOLKIT=GTK
NEW_FEATURES_URL=https://www.linuxmint.com/rel_vanessa_cinnamon_whatsnew.php
RELEASE_NOTES_URL=https://www.linuxmint.com/rel_vanessa_cinnamon.php
USER_GUIDE_URL=https://www.linuxmint.com/documentation.php
GRUB_TITLE=Linux Mint 21 Cinnamon
stephen at LENOVO-SSD ~/Desktop $ uname -a
Linux LENOVO-SSD 5.15.0-47-generic #51-Ubuntu SMP Thu Aug 11 07:51:15 
UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
stephen at LENOVO-SSD ~/Desktop $


I know I am not looking forward to this rinse-and-repeat exercise of 
building the box for R again.


*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 9/4/22 14:19, Rui Barradas wrote:
> Hello,
>
> Before removing all of R, why not run
>
> update.packages()
>
> ?
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 17:14 de 04/09/2022, Stephen H. Dawson, DSL via R-help escreveu:
>> I contacted the arules package maintainer.
>>
>> He concluded the syntax I submitted to this original post is correct. 
>> The problem he estimates is a version mismatch within my R packages, 
>> although all packages I am using come from R repositories. 
>> Specifically, something is off on the r-base version I am running.
>>
>> I will remove all of R from my box and look to other repositories.
>>
>>
>> *Stephen Dawson, DSL*
>> /Executive Strategy Consultant/
>> Business & Technology
>> +1 (865) 804-3454
>> http://www.shdawson.com
>>
>>
>> On 9/2/22 12:50, Stephen H. Dawson, DSL via R-help wrote:
>>> Go it, thanks.
>>>
>>> *Stephen Dawson, DSL*
>>> /Executive Strategy Consultant/
>>> Business & Technology
>>> +1 (865) 804-3454
>>> http://www.shdawson.com
>>>
>>>
>>> On 9/2/22 12:46, Bert Gunter wrote:
>>>> 1. I told you essentially everything there is to know.
>>>> 2. Chapter 13.3 of "An Introduction to R" on 'namespaces'.
>>>> 3. Search on "masking in R"
>>>>
>>>> Bert
>>>>
>>>> On Fri, Sep 2, 2022 at 9:01 AM Stephen H. Dawson, DSL
>>>> <service at shdawson.com> wrote:
>>>>> Bert,
>>>>> Thanks for the guidance. Do you have a documentation URL I can 
>>>>> review to
>>>>> research your suggestion?
>>>>>
>>>>> Ivan,
>>>>> Thanks for the guidance. The traceback() revealed the same results 
>>>>> that
>>>>> I shared originally.
>>>>>
>>>>> This is a bigger problem than coding a command set to run against 
>>>>> data.
>>>>> It does seem like a version problem with arules or how it leverages
>>>>> r-base. I will go to arules maintainer for further guidance.
>>>>>
>>>>>
>>>>> Kindest Regards,
>>>>> *Stephen Dawson, DSL*
>>>>> /Executive Strategy Consultant/
>>>>> Business & Technology
>>>>> +1 (865) 804-3454
>>>>> http://www.shdawson.com
>>>>>
>>>>>
>>>>> On 9/2/22 03:09, Ivan Krylov wrote:
>>>>>> ? Thu, 1 Sep 2022 11:45:15 -0400
>>>>>> "Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> ?????:
>>>>>>
>>>>>>> Error in eval(ei, envir) : object 'Insert' not found
>>>>>> traceback() is invaluable when debugging errors like this.
>>>>>>
>>>>>> It might be a bug in one of the packages you're running. You 
>>>>>> might end
>>>>>> up having to contact the maintainer (see the maintainer() 
>>>>>> function) of
>>>>>> one of them to have it fixed.
>>>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Mon Sep  5 08:29:03 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Mon, 5 Sep 2022 08:29:03 +0200
Subject: [R] How to use AUC metric in caret
Message-ID: <CA+nrPnu05fFRZmjNDBpp7MW3g8q8G7KfpEiZ3cyK7YMnf6m63Q@mail.gmail.com>

Hello everyone

I am using nested resampling in caret (5-fold outer and bootstrap inner
resampling) and by default, it shows the "Accuracy" metric. How can I use
it for the ROC/AUC metric?

My code is:

d=readARFF("apns.arff")
index <- createDataPartition(d$isKilled , p = .70,list = FALSE)
tr <- d[index, ]
ts <- d[-index, ]

boot <- trainControl(method = "boot", number=100, search="random",
classProbs = TRUE, summaryFunction = twoClassSummary)

outer_folds <- createFolds(d$isKilled, k = 5)
boot <- trainControl(method = "boot", number=10)

CV1 <- lapply(outer_folds, function(index){
  tr <- d[-index, ]
  ts <- d[index,]

  cart1 <-train(isKilled ~ ., data = tr,
                method = "rpart",

                    tuneLength = 20,
                 metric = "Accuracy",
                 preProc = c("center", "scale", "nzv"),
                 trControl = boot)

  postResample(predict(cart1, ts), ts$isKilled)
})
sapply(CV1, function(x) x[3]) -> CV_MAE1
CV_MAE1

	[[alternative HTML version deleted]]


From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Mon Sep  5 13:31:00 2022
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Mon, 5 Sep 2022 17:01:00 +0530
Subject: [R] Clustering of datasets
Message-ID: <CAOFE=kMwHNdi0USgSqs1_91YmqmP-yTy8HpAKK5qKpsKRVCaCw@mail.gmail.com>

Dear all,

I am about to cluster my datasets by using K-mean clustering techniques in
R, but getting some type of scattered results. Herewith I pasted my code
below. Please suggest to me where I am lacking in my code. I was pasting my
data before applying the K-mean method as follows.

DMs<-read.table(text="Country DATA
                      IS -0.0092
                      BA -0.0235
                      HK -0.0239
                      JA -0.0333
                      KU -0.0022
                      OM -0.0963
                      QA -0.0706
                      SK -0.0322
                      SA -0.1233
                      SI -0.0141
                      TA -0.0142
                      UAE -0.0656
                      AUS -0.0230
                     BEL -0.0006
                     CYP -0.0085
                     CR  -0.0398
                    DEN  -0.0423
                      EST -0.0604
                      FIN -0.0227
                      FRA -0.0085
                     GER -0.0272
                     GrE -0.3519
                     ICE -0.0210
                     IRE -0.0057
                     LAT -0.0595
                    LITH -0.0451
                    LUXE -0.0023
                    MAL  -0.0351
                    NETH -0.0048
                      NOR -0.0495
                      POL -0.0081
                    PORT -0.0044
                    SLOVA -0.1210
                    SLOVE -0.0031
                      SPA -0.0213
                      SWE -0.0106
                    SWIT -0.0152
                      UK -0.0030
                    HUNG -0.0086
                      CAN -0.0144
                    CHIL -0.0078
                      USA -0.0042
                    BERM -0.0035
                    AUST -0.0211
                    NEWZ -0.0538" ,
                 header = TRUE,stringsAsFactors=FALSE)
library(cluster)
k1<-kmeans(DMs[,2],centers=2,nstart=25)
plot(DMs[,2],col=k1$cluster,pch=19,xlim=c(1,46), ylim=c(-0.12,0))
text(1:46,DMs[,2],DMs[,1],col=k1$cluster)
legend(10,1,c("cluster 1: Highly Integrated","cluster 2: Less Integrated"),
col=1:2,pch=19)


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
Sender
notified by
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
09/05/22,
04:55:22 PM

	[[alternative HTML version deleted]]


From @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com  Mon Sep  5 14:04:39 2022
From: @ubh@m|tr@@p@tr@ @end|ng |rom gm@||@com (Subhamitra Patra)
Date: Mon, 5 Sep 2022 17:34:39 +0530
Subject: [R] Clustering of datasets
In-Reply-To: <CAOFE=kMwHNdi0USgSqs1_91YmqmP-yTy8HpAKK5qKpsKRVCaCw@mail.gmail.com>
References: <CAOFE=kMwHNdi0USgSqs1_91YmqmP-yTy8HpAKK5qKpsKRVCaCw@mail.gmail.com>
Message-ID: <CAOFE=kMCzDM2yOsEaRXQvje4kwK9U9jrwPV2AXGkqjzF0rvo6A@mail.gmail.com>

Dear all,

I also tried the k-mean method in some other parts of my data, but still
not getting the perfect result as expected.

Herewith I attached the related code as below. Please suggest to me where I
am lacking in my below code.

 DMs<-read.table(text="Country Data
                 Israel 0.087320199
                Bahrein 0.37991129
              HongKong 0.037552721
                  Japan 0.235350891
                Kuwait 0.286427554
                  oman 0.400096249
                  Qatar 0.270693298
            SouthKorea 0.007407618
            SaudiArabia 0.187578553
              Singapore 0.008528448
                Taiwan 0.027371676
                    UAE 0.276795224
                Austria 0.015132794
                Belgium 0.008513907
                Cyprus  -0.000938601
          CzechRepublic 0.017460065
                Denmark 0.029490066
                Estonia 0.114144041
                Finland 0.016245116
                France 0.007217465
                Germany 0.00371948
                Greece -0.008527501
                Iceland 0.748097785
                Ireland 0.023309721
                Latvia 0.178227267
              Lithuania 0.100033752
              Luxemborg 0.044546393
                  Malta 0.128679817
            Netherland 0.010188604
                Norway 0.003437861
                Poland 0.006426383
              Portugal 0.00753412
              Slovakia 0.505992775
              Slovenia 0.162475815
                  Spain 0.00267973
                Sweden 0.009967609
            Switzerland 0.020557185
                    UK 0.009340789
                Hungary 0.005389885
                Canada -0.000531982
                  Chile 0.007080471
                    USA 0.013516878
                Bermuda -0.338491435
              Australia 0.113039242
            Newzealand 0.154508239",
                 header = TRUE,stringsAsFactors=FALSE)
library(cluster)
k1<-kmeans(DMs[,2],centers=2,nstart=25)
plot(DMs[,2],col=k1$cluster,pch=19,xlim=c(1,45), ylim=c(-0.001,2.5))
text(1:45+0.5,DMs[,2]+0.05,DMs[,1],col=k1$cluster)
legend(2,1,c("cluster 1: Highly efficient DMs","cluster 2: Less efficient
DMs"),
       col=1:5,pch=19)

[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
Sender
notified by
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
09/05/22,
05:34:10 PM

On Mon, Sep 5, 2022 at 5:01 PM Subhamitra Patra <subhamitra.patra at gmail.com>
wrote:

> Dear all,
>
> I am about to cluster my datasets by using K-mean clustering techniques in
> R, but getting some type of scattered results. Herewith I pasted my code
> below. Please suggest to me where I am lacking in my code. I was pasting my
> data before applying the K-mean method as follows.
>
> DMs<-read.table(text="Country DATA
>                       IS -0.0092
>                       BA -0.0235
>                       HK -0.0239
>                       JA -0.0333
>                       KU -0.0022
>                       OM -0.0963
>                       QA -0.0706
>                       SK -0.0322
>                       SA -0.1233
>                       SI -0.0141
>                       TA -0.0142
>                       UAE -0.0656
>                       AUS -0.0230
>                      BEL -0.0006
>                      CYP -0.0085
>                      CR  -0.0398
>                     DEN  -0.0423
>                       EST -0.0604
>                       FIN -0.0227
>                       FRA -0.0085
>                      GER -0.0272
>                      GrE -0.3519
>                      ICE -0.0210
>                      IRE -0.0057
>                      LAT -0.0595
>                     LITH -0.0451
>                     LUXE -0.0023
>                     MAL  -0.0351
>                     NETH -0.0048
>                       NOR -0.0495
>                       POL -0.0081
>                     PORT -0.0044
>                     SLOVA -0.1210
>                     SLOVE -0.0031
>                       SPA -0.0213
>                       SWE -0.0106
>                     SWIT -0.0152
>                       UK -0.0030
>                     HUNG -0.0086
>                       CAN -0.0144
>                     CHIL -0.0078
>                       USA -0.0042
>                     BERM -0.0035
>                     AUST -0.0211
>                     NEWZ -0.0538" ,
>                  header = TRUE,stringsAsFactors=FALSE)
> library(cluster)
> k1<-kmeans(DMs[,2],centers=2,nstart=25)
> plot(DMs[,2],col=k1$cluster,pch=19,xlim=c(1,46), ylim=c(-0.12,0))
> text(1:46,DMs[,2],DMs[,1],col=k1$cluster)
> legend(10,1,c("cluster 1: Highly Integrated","cluster 2: Less Integrated"),
> col=1:2,pch=19)
>
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>
> [image: Mailtrack]
> <https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&> Sender
> notified by
> Mailtrack
> <https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&> 09/05/22,
> 04:55:22 PM
>


-- 
*Best Regards,*
*Subhamitra Patra*
*Phd. Research Scholar*
*Department of Humanities and Social Sciences*
*Indian Institute of Technology, Kharagpur*
*INDIA*

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Mon Sep  5 14:06:37 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 5 Sep 2022 22:06:37 +1000
Subject: [R] Clustering of datasets
In-Reply-To: <CAOFE=kMwHNdi0USgSqs1_91YmqmP-yTy8HpAKK5qKpsKRVCaCw@mail.gmail.com>
References: <CAOFE=kMwHNdi0USgSqs1_91YmqmP-yTy8HpAKK5qKpsKRVCaCw@mail.gmail.com>
Message-ID: <CA+8X3fXUxtVkosif01NukdAU1qbPpzQmz+w8q+HX1bCSyHsJpw@mail.gmail.com>

Hi Subhamitra,
I think the fact that you are passing a vector of values rather than a
matrix is part of the problem. As you have only one value for each
country, The points plotted will be the index on the x-axis and the
value for each country on the y-axis. Passing a value for ylim= means
that you are cutting off the lowest points. Here is an example that
will give you two clusters and show the values for the centers in the
middle of the plot. Perhaps this is all you need, but I suspect there
is more work to be done.

k2<-kmeans(DMs[,2],centers=2)
plot(DMs[,2],col=k2$cluster,pch=19,xlim=c(1,46))
text(1:46,DMs[,2],DMs[,1],col=k2$cluster)
points(rep(23,2),k2$centers,pch=1:2,cex=2,col=k2$cluster)
legend(10,1,c("cluster 1: Highly Integrated","cluster 2: Less Integrated"),
col=1:2,pch=19)

Jim

On Mon, Sep 5, 2022 at 9:31 PM Subhamitra Patra
<subhamitra.patra at gmail.com> wrote:
>
> Dear all,
>
> I am about to cluster my datasets by using K-mean clustering techniques in
> R, but getting some type of scattered results. Herewith I pasted my code
> below. Please suggest to me where I am lacking in my code. I was pasting my
> data before applying the K-mean method as follows.
>
> DMs<-read.table(text="Country DATA
>                       IS -0.0092
>                       BA -0.0235
>                       HK -0.0239
>                       JA -0.0333
>                       KU -0.0022
>                       OM -0.0963
>                       QA -0.0706
>                       SK -0.0322
>                       SA -0.1233
>                       SI -0.0141
>                       TA -0.0142
>                       UAE -0.0656
>                       AUS -0.0230
>                      BEL -0.0006
>                      CYP -0.0085
>                      CR  -0.0398
>                     DEN  -0.0423
>                       EST -0.0604
>                       FIN -0.0227
>                       FRA -0.0085
>                      GER -0.0272
>                      GrE -0.3519
>                      ICE -0.0210
>                      IRE -0.0057
>                      LAT -0.0595
>                     LITH -0.0451
>                     LUXE -0.0023
>                     MAL  -0.0351
>                     NETH -0.0048
>                       NOR -0.0495
>                       POL -0.0081
>                     PORT -0.0044
>                     SLOVA -0.1210
>                     SLOVE -0.0031
>                       SPA -0.0213
>                       SWE -0.0106
>                     SWIT -0.0152
>                       UK -0.0030
>                     HUNG -0.0086
>                       CAN -0.0144
>                     CHIL -0.0078
>                       USA -0.0042
>                     BERM -0.0035
>                     AUST -0.0211
>                     NEWZ -0.0538" ,
>                  header = TRUE,stringsAsFactors=FALSE)
> library(cluster)
> k1<-kmeans(DMs[,2],centers=2,nstart=25)
> plot(DMs[,2],col=k1$cluster,pch=19,xlim=c(1,46), ylim=c(-0.12,0))
> text(1:46,DMs[,2],DMs[,1],col=k1$cluster)
> legend(10,1,c("cluster 1: Highly Integrated","cluster 2: Less Integrated"),
> col=1:2,pch=19)
>
>
> --
> *Best Regards,*
> *Subhamitra Patra*
> *Phd. Research Scholar*
> *Department of Humanities and Social Sciences*
> *Indian Institute of Technology, Kharagpur*
> *INDIA*
>
> [image: Mailtrack]
> <https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
> Sender
> notified by
> Mailtrack
> <https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
> 09/05/22,
> 04:55:22 PM
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Sep  5 15:02:35 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 5 Sep 2022 14:02:35 +0100
Subject: [R] Clustering of datasets
In-Reply-To: <CAOFE=kMwHNdi0USgSqs1_91YmqmP-yTy8HpAKK5qKpsKRVCaCw@mail.gmail.com>
References: <CAOFE=kMwHNdi0USgSqs1_91YmqmP-yTy8HpAKK5qKpsKRVCaCw@mail.gmail.com>
Message-ID: <ab77836a-756e-f121-7608-9870ef8e945a@sapo.pt>

Hello,

I am not at all sure that the following answers the question.
The code below ries to find the optimal number of clusters. One of the 
changes I have made to your call to kmeans is to subset DMs not dropping 
the dim attribute.


library(cluster)

max_clust <- 10
wss <- numeric(max_clust)

for(k in 1:max_clust) {
   km <- kmeans(DMs[,2], centers = k, nstart = 25)
   wss[k] <- km$tot.withinss
}
plot(wss, type = "b")

dm <- DMs[, 2, drop = FALSE]
# Where is the elbow, at 2 or at 4?
factoextra::fviz_nbclust(dm, kmeans, method = "wss")
factoextra::fviz_nbclust(dm, kmeans, method = "silhouette")

k2 <- kmeans(dm, centers = 2, nstart = 25)
k3 <- kmeans(dm, centers = 3, nstart = 25)
k4 <- kmeans(dm, centers = 4, nstart = 25)

main2 <- paste(length(k2$centers), "clusters")
main3 <- paste(length(k3$centers), "clusters")
main4 <- paste(length(k4$centers), "clusters")

old_par <- par(mfcol = c(1, 3))
plot(DMs[,2], col = k2$cluster, pch = 19, main = main2)
plot(DMs[,2], col = k3$cluster, pch = 19, main = main3)
plot(DMs[,2], col = k4$cluster, pch = 19, main = main4)
par(old_par)


Hope this helps,

Rui Barradas


?s 12:31 de 05/09/2022, Subhamitra Patra escreveu:
> Dear all,
> 
> I am about to cluster my datasets by using K-mean clustering techniques in
> R, but getting some type of scattered results. Herewith I pasted my code
> below. Please suggest to me where I am lacking in my code. I was pasting my
> data before applying the K-mean method as follows.
> 
> DMs<-read.table(text="Country DATA
>                        IS -0.0092
>                        BA -0.0235
>                        HK -0.0239
>                        JA -0.0333
>                        KU -0.0022
>                        OM -0.0963
>                        QA -0.0706
>                        SK -0.0322
>                        SA -0.1233
>                        SI -0.0141
>                        TA -0.0142
>                        UAE -0.0656
>                        AUS -0.0230
>                       BEL -0.0006
>                       CYP -0.0085
>                       CR  -0.0398
>                      DEN  -0.0423
>                        EST -0.0604
>                        FIN -0.0227
>                        FRA -0.0085
>                       GER -0.0272
>                       GrE -0.3519
>                       ICE -0.0210
>                       IRE -0.0057
>                       LAT -0.0595
>                      LITH -0.0451
>                      LUXE -0.0023
>                      MAL  -0.0351
>                      NETH -0.0048
>                        NOR -0.0495
>                        POL -0.0081
>                      PORT -0.0044
>                      SLOVA -0.1210
>                      SLOVE -0.0031
>                        SPA -0.0213
>                        SWE -0.0106
>                      SWIT -0.0152
>                        UK -0.0030
>                      HUNG -0.0086
>                        CAN -0.0144
>                      CHIL -0.0078
>                        USA -0.0042
>                      BERM -0.0035
>                      AUST -0.0211
>                      NEWZ -0.0538" ,
>                   header = TRUE,stringsAsFactors=FALSE)
> library(cluster)
> k1<-kmeans(DMs[,2],centers=2,nstart=25)
> plot(DMs[,2],col=k1$cluster,pch=19,xlim=c(1,46), ylim=c(-0.12,0))
> text(1:46,DMs[,2],DMs[,1],col=k1$cluster)
> legend(10,1,c("cluster 1: Highly Integrated","cluster 2: Less Integrated"),
> col=1:2,pch=19)
> 
>


From j@zh@o @end|ng |rom ye@h@net  Tue Sep  6 04:45:38 2022
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 6 Sep 2022 10:45:38 +0800
Subject: [R] expand a matrix
Message-ID: <cb3fe723-7f90-10fe-da10-e41002b84e11@yeah.net>

Hi there,

I have a matrix likes:
 > m
      [,1] [,2] [,3] [,4]
[1,]   NA    1    2    3
[2,]    1   NA    6    5
[3,]    2    6   NA    4
[4,]    3    5    4   NA

I hope to expand it to 10 by 10 matrix, M, likes:
 > M
       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
  [1,]   NA   NA   NA   NA    1    1    2    3    3     3
  [2,]   NA   NA   NA   NA    1    1    2    3    3     3
  [3,]   NA   NA   NA   NA    1    1    2    3    3     3
  [4,]   NA   NA   NA   NA    1    1    2    3    3     3
  [5,]    1    1    1    1   NA   NA    6    5    5     5
  [6,]    1    1    1    1   NA   NA    6    5    5     5
  [7,]    2    2    2    2    6    6   NA    4    4     4
  [8,]    3    3    3    3    5    5    4   NA   NA    NA
  [9,]    3    3    3    3    5    5    4   NA   NA    NA
[10,]    3    3    3    3    5    5    4   NA   NA    NA

I use the following code:

M <- matrix(NA, 10, 10)

for (i in 1:10) {
    for (j in 1:10) {
       if (i %in% 1:4 & j %in% 5:6) M[i,j] <- M[j,i] <- m[1,2]
       if (i %in% 1:4 & j == 7) M[i,j] <- M[j,i] <-m[1,3]
       if (i %in% 1:4 & j %in% 8:10) M[i,j] <- M[j,i] <-m[1,4]
       if (i %in% 5:6 & j == 7) M[i,j] <- M[j,i] <-m[2,3]
       if (i %in% 5:6 & j %in% 8:10) M[i,j] <- M[j,i] <-m[2,4]
       if (i == 7 & j %in% 8:10) M[i,j] <- M[j,i] <-m[3,4]
    }
}

Is there any convenience way to do it? Thanks!

Best,
Jinsong


From @kw@|mmo @end|ng |rom gm@||@com  Tue Sep  6 05:11:23 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Mon, 5 Sep 2022 23:11:23 -0400
Subject: [R] expand a matrix
In-Reply-To: <cb3fe723-7f90-10fe-da10-e41002b84e11@yeah.net>
References: <cb3fe723-7f90-10fe-da10-e41002b84e11@yeah.net>
Message-ID: <CAPcHnpQm1HPYOGuKPnc9wy1XbQQzbL=TRpC4urnbdXymJsVFbw@mail.gmail.com>

You can specify multiple indexes to replace at once, so you can avoid
a for loop entirely like this:
M <- matrix(nrow = 10, ncol = 10)
M[1:4, 5: 6] <- M[5: 6, 1:4] <- m[1, 2]
M[1:4,    7] <- M[   7, 1:4] <- m[1, 3]
M[1:4, 8:10] <- M[8:10, 1:4] <- m[1, 4]
M[5:6,    7] <- M[   7, 5:6] <- m[2, 3]
M[5:6, 8:10] <- M[8:10, 5:6] <- m[2, 4]
M[  7, 8:10] <- M[8:10,   7] <- m[3, 4]
M


You could also specify it directly with function 'matrix', it is
somewhat ugly though:
M <- matrix(c(
        NA,     NA,     NA,     NA, m[1,2], m[1,2], m[1,3], m[1,4],
m[1,4], m[1,4],
        NA,     NA,     NA,     NA, m[1,2], m[1,2], m[1,3], m[1,4],
m[1,4], m[1,4],
        NA,     NA,     NA,     NA, m[1,2], m[1,2], m[1,3], m[1,4],
m[1,4], m[1,4],
        NA,     NA,     NA,     NA, m[1,2], m[1,2], m[1,3], m[1,4],
m[1,4], m[1,4],
    m[1,2], m[1,2], m[1,2], m[1,2],     NA,     NA, m[2,3], m[2,4],
m[2,4], m[2,4],
    m[1,2], m[1,2], m[1,2], m[1,2],     NA,     NA, m[2,3], m[2,4],
m[2,4], m[2,4],
    m[1,3], m[1,3], m[1,3], m[1,3], m[2,3], m[2,3],     NA, m[3,4],
m[3,4], m[3,4],
    m[1,4], m[1,4], m[1,4], m[1,4], m[2,4], m[2,4], m[3,4],     NA,
 NA,     NA,
    m[1,4], m[1,4], m[1,4], m[1,4], m[2,4], m[2,4], m[3,4],     NA,
 NA,     NA,
    m[1,4], m[1,4], m[1,4], m[1,4], m[2,4], m[2,4], m[3,4],     NA,
 NA,     NA
), nrow = 10, ncol = 10, byrow = TRUE)
M


If it interests you, you could take a look at package 'Matrix', it
contains classes for specific types of matrices, including upper
triangular matrices. This package helps to improve speed of linear
algebra computations and reduce the memory size of matrices.

On Mon, Sep 5, 2022 at 10:46 PM Jinsong Zhao <jszhao at yeah.net> wrote:
>
> Hi there,
>
> I have a matrix likes:
>  > m
>       [,1] [,2] [,3] [,4]
> [1,]   NA    1    2    3
> [2,]    1   NA    6    5
> [3,]    2    6   NA    4
> [4,]    3    5    4   NA
>
> I hope to expand it to 10 by 10 matrix, M, likes:
>  > M
>        [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
>   [1,]   NA   NA   NA   NA    1    1    2    3    3     3
>   [2,]   NA   NA   NA   NA    1    1    2    3    3     3
>   [3,]   NA   NA   NA   NA    1    1    2    3    3     3
>   [4,]   NA   NA   NA   NA    1    1    2    3    3     3
>   [5,]    1    1    1    1   NA   NA    6    5    5     5
>   [6,]    1    1    1    1   NA   NA    6    5    5     5
>   [7,]    2    2    2    2    6    6   NA    4    4     4
>   [8,]    3    3    3    3    5    5    4   NA   NA    NA
>   [9,]    3    3    3    3    5    5    4   NA   NA    NA
> [10,]    3    3    3    3    5    5    4   NA   NA    NA
>
> I use the following code:
>
> M <- matrix(NA, 10, 10)
>
> for (i in 1:10) {
>     for (j in 1:10) {
>        if (i %in% 1:4 & j %in% 5:6) M[i,j] <- M[j,i] <- m[1,2]
>        if (i %in% 1:4 & j == 7) M[i,j] <- M[j,i] <-m[1,3]
>        if (i %in% 1:4 & j %in% 8:10) M[i,j] <- M[j,i] <-m[1,4]
>        if (i %in% 5:6 & j == 7) M[i,j] <- M[j,i] <-m[2,3]
>        if (i %in% 5:6 & j %in% 8:10) M[i,j] <- M[j,i] <-m[2,4]
>        if (i == 7 & j %in% 8:10) M[i,j] <- M[j,i] <-m[3,4]
>     }
> }
>
> Is there any convenience way to do it? Thanks!
>
> Best,
> Jinsong
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Tue Sep  6 08:30:00 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Tue, 6 Sep 2022 12:00:00 +0530
Subject: [R] expand a matrix
In-Reply-To: <cb3fe723-7f90-10fe-da10-e41002b84e11@yeah.net>
References: <cb3fe723-7f90-10fe-da10-e41002b84e11@yeah.net>
Message-ID: <CADfFDC7-WMR=p2+6CU4dppidcbZnVMqPkteSfERrvXESigehVQ@mail.gmail.com>

On Tue, Sep 6, 2022 at 8:16 AM Jinsong Zhao <jszhao at yeah.net> wrote:
>
> Hi there,
>
> I have a matrix likes:
>  > m
>       [,1] [,2] [,3] [,4]
> [1,]   NA    1    2    3
> [2,]    1   NA    6    5
> [3,]    2    6   NA    4
> [4,]    3    5    4   NA
>
> I hope to expand it to 10 by 10 matrix, M, likes:
>  > M
>        [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
>   [1,]   NA   NA   NA   NA    1    1    2    3    3     3
>   [2,]   NA   NA   NA   NA    1    1    2    3    3     3
>   [3,]   NA   NA   NA   NA    1    1    2    3    3     3
>   [4,]   NA   NA   NA   NA    1    1    2    3    3     3
>   [5,]    1    1    1    1   NA   NA    6    5    5     5
>   [6,]    1    1    1    1   NA   NA    6    5    5     5
>   [7,]    2    2    2    2    6    6   NA    4    4     4
>   [8,]    3    3    3    3    5    5    4   NA   NA    NA
>   [9,]    3    3    3    3    5    5    4   NA   NA    NA
> [10,]    3    3    3    3    5    5    4   NA   NA    NA
>
> I use the following code:
>
> M <- matrix(NA, 10, 10)
>
> for (i in 1:10) {
>     for (j in 1:10) {
>        if (i %in% 1:4 & j %in% 5:6) M[i,j] <- M[j,i] <- m[1,2]
>        if (i %in% 1:4 & j == 7) M[i,j] <- M[j,i] <-m[1,3]
>        if (i %in% 1:4 & j %in% 8:10) M[i,j] <- M[j,i] <-m[1,4]
>        if (i %in% 5:6 & j == 7) M[i,j] <- M[j,i] <-m[2,3]
>        if (i %in% 5:6 & j %in% 8:10) M[i,j] <- M[j,i] <-m[2,4]
>        if (i == 7 & j %in% 8:10) M[i,j] <- M[j,i] <-m[3,4]
>     }
> }
>
> Is there any convenience way to do it? Thanks!

Assuming I understand what you are trying to do, perhaps

i <- rep(1:4, c(4, 2, 1, 3))
m[i, i]

Like most operations in R, indexing is vectorized.

Best,
-Deepayan


> Best,
> Jinsong
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@zh@o @end|ng |rom ye@h@net  Tue Sep  6 10:09:44 2022
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 6 Sep 2022 16:09:44 +0800
Subject: [R] expand a matrix
In-Reply-To: <CADfFDC7-WMR=p2+6CU4dppidcbZnVMqPkteSfERrvXESigehVQ@mail.gmail.com>
References: <cb3fe723-7f90-10fe-da10-e41002b84e11@yeah.net>
 <CADfFDC7-WMR=p2+6CU4dppidcbZnVMqPkteSfERrvXESigehVQ@mail.gmail.com>
Message-ID: <e9b2f9d4-14cd-2a57-4e79-1c716ef22fbd@yeah.net>

On 2022/9/6 14:30, Deepayan Sarkar wrote:
> On Tue, Sep 6, 2022 at 8:16 AM Jinsong Zhao <jszhao at yeah.net> wrote:
>>
>> Hi there,
>>
>> I have a matrix likes:
>>   > m
>>        [,1] [,2] [,3] [,4]
>> [1,]   NA    1    2    3
>> [2,]    1   NA    6    5
>> [3,]    2    6   NA    4
>> [4,]    3    5    4   NA
>>
>> I hope to expand it to 10 by 10 matrix, M, likes:
>>   > M
>>         [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
>>    [1,]   NA   NA   NA   NA    1    1    2    3    3     3
>>    [2,]   NA   NA   NA   NA    1    1    2    3    3     3
>>    [3,]   NA   NA   NA   NA    1    1    2    3    3     3
>>    [4,]   NA   NA   NA   NA    1    1    2    3    3     3
>>    [5,]    1    1    1    1   NA   NA    6    5    5     5
>>    [6,]    1    1    1    1   NA   NA    6    5    5     5
>>    [7,]    2    2    2    2    6    6   NA    4    4     4
>>    [8,]    3    3    3    3    5    5    4   NA   NA    NA
>>    [9,]    3    3    3    3    5    5    4   NA   NA    NA
>> [10,]    3    3    3    3    5    5    4   NA   NA    NA
>>
>> I use the following code:
>>
>> M <- matrix(NA, 10, 10)
>>
>> for (i in 1:10) {
>>      for (j in 1:10) {
>>         if (i %in% 1:4 & j %in% 5:6) M[i,j] <- M[j,i] <- m[1,2]
>>         if (i %in% 1:4 & j == 7) M[i,j] <- M[j,i] <-m[1,3]
>>         if (i %in% 1:4 & j %in% 8:10) M[i,j] <- M[j,i] <-m[1,4]
>>         if (i %in% 5:6 & j == 7) M[i,j] <- M[j,i] <-m[2,3]
>>         if (i %in% 5:6 & j %in% 8:10) M[i,j] <- M[j,i] <-m[2,4]
>>         if (i == 7 & j %in% 8:10) M[i,j] <- M[j,i] <-m[3,4]
>>      }
>> }
>>
>> Is there any convenience way to do it? Thanks!
> 
> Assuming I understand what you are trying to do, perhaps
> 
> i <- rep(1:4, c(4, 2, 1, 3))
> m[i, i]
> 
> Like most operations in R, indexing is vectorized.

That is exactly what I expected. Thanks a lot!

Best,
Jinsong

> 
> Best,
> -Deepayan
> 
> 
>> Best,
>> Jinsong
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From grond @end|ng |rom number|@nd@de  Tue Sep  6 11:39:52 2022
From: grond @end|ng |rom number|@nd@de (Wolfgang Grond)
Date: Tue, 6 Sep 2022 11:39:52 +0200
Subject: [R] Reading PDF files with German umlauts using tabulizer
Message-ID: <09dd654e-3f0e-8b1d-ef5c-e52d94d17e3e@numberland.de>

Dear all,

I have some trouble with reading PDF files in German language.

I want to extract text and tables with the tabulizer package, and every 
things goes well as long as I read English texts.

When I try the same code

text <- extract_text(file = "Pub_001.pdf")

with documents in German language

German umlauts are not recognized.

They are either replaced by a combination of characters.

Instead of

"Entmischung und Kristallisation in Gl?sern des Systems"
                                      --
I get

"Entmischung und Kristallisation in GHisern des Systems"
                                      --

or replaced by ascii like this

instead of

"In Gl?sern des Systems"
       -
I get

"In Glasern des Systems"
       -

Opening the file with Adobe Reader tells me that encoding is "Ansi"

Is there a way to read this file correctly?

Thanks in advance for any idea.

Regards


From drj|m|emon @end|ng |rom gm@||@com  Tue Sep  6 13:06:25 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 6 Sep 2022 21:06:25 +1000
Subject: [R] Clustering of datasets
In-Reply-To: <CAOFE=kNDFKE6RPEfz=gy5KaX_p=bk--EKknsfwLfwk+LbxbgJg@mail.gmail.com>
References: <CAOFE=kMwHNdi0USgSqs1_91YmqmP-yTy8HpAKK5qKpsKRVCaCw@mail.gmail.com>
 <CAOFE=kMCzDM2yOsEaRXQvje4kwK9U9jrwPV2AXGkqjzF0rvo6A@mail.gmail.com>
 <CAOFE=kNDFKE6RPEfz=gy5KaX_p=bk--EKknsfwLfwk+LbxbgJg@mail.gmail.com>
Message-ID: <CA+8X3fXki5d8TSes6g3ijj7QWd9YzSyhSDtY0iDo9OyEtnsxmA@mail.gmail.com>

Hi Subhamitra,
I've had a look at this and made some guesses about what you might be
trying to do. If I create a data frame with country, integration and
efficiency, I get a reasonable looking three cluster solution. This may be
completely wrong as far as what you want. When you plot the clusters of the
separate measures, the "Index" values are just the order of the countries
in the data frame. I can't see how this means anything unless you have
ordered the countries on some measure unknown to me. Also, I'm unsure of
what the two measures you are using represent. This may give you a start on
getting sensible clusters. Let me know how you go with it.

# create a data frame with both measures
DMs<-data.frame(Country=DMs1$Country,Integration=DMs1$DATA,
 Efficiency=DMs2$Data)
# perform the clustering
km<-kmeans(DMs[,2:3],centers=3)
# plot the result
plot(DMs$Integration,DMs$Efficiency,
 main="DM clusters by Integration and Efficiency",
 xlab="Integration",ylab="Efficiency",pch=19,
 col=km$cluster)
text(DMs$Integration,DMs$Efficiency+0.03,DMs$Country,col=km$cluster)
points(km$centers,pch=rep(19,3),cex=3,col=1:3)
legend(-0.3,-0.1,
 c("cluster 1","cluster 2","cluster 3"),
 col=1:3,pch=19)

Jim

-------------- next part --------------
A non-text attachment was scrubbed...
Name: sp_km1.png
Type: image/png
Size: 32739 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20220906/7476a136/attachment.png>

From kry|ov@r00t @end|ng |rom gm@||@com  Tue Sep  6 19:15:59 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 6 Sep 2022 19:15:59 +0200
Subject: [R] Error Running arules
In-Reply-To: <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
 <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
 <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>
 <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>
Message-ID: <20220906191559.14c5aba2@parabola>

On Sun, 4 Sep 2022 12:14:23 -0400
"Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> wrote:

> The problem he estimates is a version mismatch within my R packages, 
> although all packages I am using come from R repositories.
> Specifically, something is off on the r-base version I am running.

Could you provide a small example (including a small, anonymised
version of ./input/DataSet.csv) that would reproduce the problem? In my
opinion, there's debugging to be done, but that's relatively
complicated. I would start with options(error = recover), browse the
variables at the point of the crash (who's calling eval()? what's the
expression being evaluated? what's in the environment?) and try to
figure out why the expectations of the expression aren't met by the
environment.

What's suspicious is that I can't find any mention of a variable named
"Insert" or a piece of code saying eval(ei, envir) in the code of the
"arules" package, and it doesn't have any non-core or recommended hard
dependencies except "generics". The reason I asked for a traceback() is
to clarify where exactly the error happens and perhaps uncover a reason
for the failure through that.

-- 
Best regards,
Ivan


From @erv|ce @end|ng |rom @hd@w@on@com  Tue Sep  6 21:47:20 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Tue, 6 Sep 2022 15:47:20 -0400
Subject: [R] Error Running arules
In-Reply-To: <20220906191559.14c5aba2@parabola>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
 <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
 <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>
 <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>
 <20220906191559.14c5aba2@parabola>
Message-ID: <d8289355-8248-7887-1c85-3d81c78c2fb0@shdawson.com>

Hi Ivan,


Thanks for the response.

I added the line to the top of my script:
traceback()

I ran my script with my arules code today. Now, there are no errors. I 
am now getting the expected output from my install, the same output as 
the arules package maintainer is getting per his email to me on his 
findings.

I looked over my notes from the past few days. I did get a kernel update 
from my distribution repository after posting to the help list. I have 
not had the time over the weekend to run the arules script again to 
determine if things are working as expected. I also wanted to take the 
time and think about the problem from a distance to gain perspective.

I can only conclude at this point the kernel used when running the code 
last week was not compatible with r-base 4.2.

I will be grateful for the little things in life being resolved without 
the pain of doing a rinse-and-repeat exercise of uninstalling and 
installing R.


Kindest Regards,
*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 9/6/22 13:15, Ivan Krylov wrote:
> On Sun, 4 Sep 2022 12:14:23 -0400
> "Stephen H. Dawson, DSL via R-help" <r-help at r-project.org> wrote:
>
>> The problem he estimates is a version mismatch within my R packages,
>> although all packages I am using come from R repositories.
>> Specifically, something is off on the r-base version I am running.
> Could you provide a small example (including a small, anonymised
> version of ./input/DataSet.csv) that would reproduce the problem? In my
> opinion, there's debugging to be done, but that's relatively
> complicated. I would start with options(error = recover), browse the
> variables at the point of the crash (who's calling eval()? what's the
> expression being evaluated? what's in the environment?) and try to
> figure out why the expectations of the expression aren't met by the
> environment.
>
> What's suspicious is that I can't find any mention of a variable named
> "Insert" or a piece of code saying eval(ei, envir) in the code of the
> "arules" package, and it doesn't have any non-core or recommended hard
> dependencies except "generics". The reason I asked for a traceback() is
> to clarify where exactly the error happens and perhaps uncover a reason
> for the failure through that.
>


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Sep  6 22:36:05 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 6 Sep 2022 22:36:05 +0200
Subject: [R] Error Running arules
In-Reply-To: <d8289355-8248-7887-1c85-3d81c78c2fb0@shdawson.com>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
 <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
 <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>
 <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>
 <20220906191559.14c5aba2@parabola>
 <d8289355-8248-7887-1c85-3d81c78c2fb0@shdawson.com>
Message-ID: <20220906223605.63612c5f@parabola>

On Tue, 6 Sep 2022 15:47:20 -0400
"Stephen H. Dawson, DSL" <service at shdawson.com> wrote:

> I added the line to the top of my script:
> traceback()

The best way to use traceback() is to run it immediately after getting
an error:

f <- function() g()
g <- function() h()
h <- function() stop("I'm causing an error")
f()
# Error in h() : I'm causing an error
traceback()
# 4: stop("I'm causing an error") at #1
# 3: h() at #1
# 2: g() at #1
# 1: f()

Depending on how you run scripts, placing a traceback() right after the
line that crashes may be not enough: R stops the whole execution
process, requiring you to type traceback() manually. Alternatively,
options(error = traceback) will run it for you every time an unhandled
error happens, including interrupts (which is annoying).

options(error = recover) will let you interactively inspect the values
of the variables at the time of the crash. Using dump.frames (see its
help page) will save the variables into file or global variable to
inspect them later. I haven't seen them shared on the mailing list (too
large?), but it could be an option. options(error = NULL) restores the
default behaviour.

When debugging is unavoidable, R Inferno
<https://www.burns-stat.com/documents/books/the-r-inferno/> is one of
good resources on how to do it with R code.

> I ran my script with my arules code today. Now, there are no errors.

Congratulations on having it solve itself! Let's hope the error won't
return.

-- 
Best regards,
Ivan


From @erv|ce @end|ng |rom @hd@w@on@com  Tue Sep  6 22:45:31 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Tue, 6 Sep 2022 16:45:31 -0400
Subject: [R] Error Running arules
In-Reply-To: <20220906223605.63612c5f@parabola>
References: <6a9b48c4-dbb3-2996-da5c-c11893531454@shdawson.com>
 <20220902090806.5a978489@parabola>
 <b999a04b-3b63-ef76-174f-66a870012fca@shdawson.com>
 <CAGxFJbS1f+FZWZ=N==1HT4yb8xBADtAqy3vdOW9A9aiAeyskeA@mail.gmail.com>
 <3b0840dc-f414-0666-9fb2-c95ce9ebc0e0@shdawson.com>
 <36e20317-dac8-f238-55e9-037300d02663@shdawson.com>
 <20220906191559.14c5aba2@parabola>
 <d8289355-8248-7887-1c85-3d81c78c2fb0@shdawson.com>
 <20220906223605.63612c5f@parabola>
Message-ID: <f952e01d-e255-e1d5-ed29-c8638a2c0a02@shdawson.com>

Thanks, Ivan. I appreciate all of your kind assistance and your 
encouragement.


*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 9/6/22 16:36, Ivan Krylov wrote:
> On Tue, 6 Sep 2022 15:47:20 -0400
> "Stephen H. Dawson, DSL" <service at shdawson.com> wrote:
>
>> I added the line to the top of my script:
>> traceback()
> The best way to use traceback() is to run it immediately after getting
> an error:
>
> f <- function() g()
> g <- function() h()
> h <- function() stop("I'm causing an error")
> f()
> # Error in h() : I'm causing an error
> traceback()
> # 4: stop("I'm causing an error") at #1
> # 3: h() at #1
> # 2: g() at #1
> # 1: f()
>
> Depending on how you run scripts, placing a traceback() right after the
> line that crashes may be not enough: R stops the whole execution
> process, requiring you to type traceback() manually. Alternatively,
> options(error = traceback) will run it for you every time an unhandled
> error happens, including interrupts (which is annoying).
>
> options(error = recover) will let you interactively inspect the values
> of the variables at the time of the crash. Using dump.frames (see its
> help page) will save the variables into file or global variable to
> inspect them later. I haven't seen them shared on the mailing list (too
> large?), but it could be an option. options(error = NULL) restores the
> default behaviour.
>
> When debugging is unavoidable, R Inferno
> <https://www.burns-stat.com/documents/books/the-r-inferno/> is one of
> good resources on how to do it with R code.
>
>> I ran my script with my arules code today. Now, there are no errors.
> Congratulations on having it solve itself! Let's hope the error won't
> return.
>


From k|mmo@e|o @end|ng |rom utu@||  Wed Sep  7 10:03:06 2022
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Wed, 7 Sep 2022 08:03:06 +0000
Subject: [R] Reading PDF files with German umlauts using tabulizer
In-Reply-To: <09dd654e-3f0e-8b1d-ef5c-e52d94d17e3e@numberland.de>
References: <09dd654e-3f0e-8b1d-ef5c-e52d94d17e3e@numberland.de>
Message-ID: <8ab91f435e0a000af88206fb6f001aa9b5bf46dd.camel@utu.fi>

Hi!

The package "tabulizer" seems to be removed from package repositories,
so it is a bit hard to test.

I found the documentation and the syntax of "extract_text" is:

extract_text(file, pages = NULL, area = NULL, password = NULL,
  encoding = NULL, copy = FALSE)

So have you tried to set the "encoding" parameter?

HTH,
Kimmo

ti, 2022-09-06 kello 11:39 +0200, Wolfgang Grond kirjoitti:
> Dear all,
> 
> I have some trouble with reading PDF files in German language.
> 
> I want to extract text and tables with the tabulizer package, and
> every 
> things goes well as long as I read English texts.
> 
> When I try the same code
> 
> text <- extract_text(file = "Pub_001.pdf")
> 
> with documents in German language
> 
> German umlauts are not recognized.
> 
> They are either replaced by a combination of characters.
> 
> Instead of
> 
> "Entmischung und Kristallisation in Gl?sern des Systems"
> ????????????????????????????????????? --
> I get
> 
> "Entmischung und Kristallisation in GHisern des Systems"
> ????????????????????????????????????? --
> 
> or replaced by ascii like this
> 
> instead of
> 
> "In Gl?sern des Systems"
> ?????? -
> I get
> 
> "In Glasern des Systems"
> ?????? -
> 
> Opening the file with Adobe Reader tells me that encoding is "Ansi"
> 
> Is there a way to read this file correctly?
> 
> Thanks in advance for any idea.
> 
> Regards
> 
> ______________________________________________
> R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Sep  7 20:35:30 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Sep 2022 18:35:30 +0000
Subject: [R] inconsistency in switch statements.....
Message-ID: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             The following is my code:

> Stst <- 2
> switch(Stst, 1 = print("NO"), 2 = print("YES"))
Error: unexpected '=' in "switch(Stst, 1 ="

Why isn't it printing "YES" on to the console?

many thanks in advance.

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Wed Sep  7 20:38:35 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 7 Sep 2022 14:38:35 -0400
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAPcHnpSp-XOH33sLoDwF2XQF+4TBwgAmtNAHNAC4waTG5jOf_A@mail.gmail.com>

1 and 2 are not valid identifiers in R, so you need to surround them with
backticks to make them valid, the same as quoting a string:

switch(Stst, `1` = print("NO"), `2` = print("YES"))


On Wed., Sep. 7, 2022, 14:35 akshay kulkarni, <akshay_e4 at hotmail.com> wrote:

> Dear members,
>                              The following is my code:
>
> > Stst <- 2
> > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> Error: unexpected '=' in "switch(Stst, 1 ="
>
> Why isn't it printing "YES" on to the console?
>
> many thanks in advance.
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Sep  7 20:43:12 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Sep 2022 18:43:12 +0000
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <CAPcHnpSp-XOH33sLoDwF2XQF+4TBwgAmtNAHNAC4waTG5jOf_A@mail.gmail.com>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpSp-XOH33sLoDwF2XQF+4TBwgAmtNAHNAC4waTG5jOf_A@mail.gmail.com>
Message-ID: <PU4P216MB15686B38988F1E567E926841C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Andrew,
                         Its working. Thanks a lot....

Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Andrew Simmons <akwsimmo at gmail.com>
Sent: Thursday, September 8, 2022 12:08 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] inconsistency in switch statements.....

1 and 2 are not valid identifiers in R, so you need to surround them with backticks to make them valid, the same as quoting a string:

switch(Stst, `1` = print("NO"), `2` = print("YES"))


On Wed., Sep. 7, 2022, 14:35 akshay kulkarni, <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear members,
                             The following is my code:

> Stst <- 2
> switch(Stst, 1 = print("NO"), 2 = print("YES"))
Error: unexpected '=' in "switch(Stst, 1 ="

Why isn't it printing "YES" on to the console?

many thanks in advance.

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Sep  7 20:58:30 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 7 Sep 2022 11:58:30 -0700
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <PU4P216MB15686B38988F1E567E926841C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpSp-XOH33sLoDwF2XQF+4TBwgAmtNAHNAC4waTG5jOf_A@mail.gmail.com>
 <PU4P216MB15686B38988F1E567E926841C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAHqSRuTrsw-4gyE+51S9hGq7zK7Akv6OYts17XFQfrMg=DoQ=Q@mail.gmail.com>

It doesn't really work.  If the first argument to switch() is a character
string then it chooses the argument by name; for a number it chooses by
position.  In your case the name and position matched so you did not notice
the difference.

> switch(2, `2` = "first", `1` = "second")
[1] "second"
> switch("2", `2` = "first", `1` = "second")
[1] "first"

-Bill



On Wed, Sep 7, 2022 at 11:46 AM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> Dear Andrew,
>                          Its working. Thanks a lot....
>
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Andrew Simmons <akwsimmo at gmail.com>
> Sent: Thursday, September 8, 2022 12:08 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] inconsistency in switch statements.....
>
> 1 and 2 are not valid identifiers in R, so you need to surround them with
> backticks to make them valid, the same as quoting a string:
>
> switch(Stst, `1` = print("NO"), `2` = print("YES"))
>
>
> On Wed., Sep. 7, 2022, 14:35 akshay kulkarni, <akshay_e4 at hotmail.com
> <mailto:akshay_e4 at hotmail.com>> wrote:
> Dear members,
>                              The following is my code:
>
> > Stst <- 2
> > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> Error: unexpected '=' in "switch(Stst, 1 ="
>
> Why isn't it printing "YES" on to the console?
>
> many thanks in advance.
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To
> UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Sep  7 21:10:33 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Sep 2022 19:10:33 +0000
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <CAHqSRuTrsw-4gyE+51S9hGq7zK7Akv6OYts17XFQfrMg=DoQ=Q@mail.gmail.com>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpSp-XOH33sLoDwF2XQF+4TBwgAmtNAHNAC4waTG5jOf_A@mail.gmail.com>
 <PU4P216MB15686B38988F1E567E926841C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAHqSRuTrsw-4gyE+51S9hGq7zK7Akv6OYts17XFQfrMg=DoQ=Q@mail.gmail.com>
Message-ID: <PU4P216MB1568F3790DB1C3EEAB3BD184C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bill,
                  Thanks for the accurate reply....

yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Bill Dunlap <williamwdunlap at gmail.com>
Sent: Thursday, September 8, 2022 12:28 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: Andrew Simmons <akwsimmo at gmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] inconsistency in switch statements.....

It doesn't really work.  If the first argument to switch() is a character string then it chooses the argument by name; for a number it chooses by position.  In your case the name and position matched so you did not notice the difference.

> switch(2, `2` = "first", `1` = "second")
[1] "second"
> switch("2", `2` = "first", `1` = "second")
[1] "first"

-Bill



On Wed, Sep 7, 2022 at 11:46 AM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Andrew,
                         Its working. Thanks a lot....

Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Andrew Simmons <akwsimmo at gmail.com<mailto:akwsimmo at gmail.com>>
Sent: Thursday, September 8, 2022 12:08 AM
To: akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>
Cc: R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] inconsistency in switch statements.....

1 and 2 are not valid identifiers in R, so you need to surround them with backticks to make them valid, the same as quoting a string:

switch(Stst, `1` = print("NO"), `2` = print("YES"))


On Wed., Sep. 7, 2022, 14:35 akshay kulkarni, <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com><mailto:akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>> wrote:
Dear members,
                             The following is my code:

> Stst <- 2
> switch(Stst, 1 = print("NO"), 2 = print("YES"))
Error: unexpected '=' in "switch(Stst, 1 ="

Why isn't it printing "YES" on to the console?

many thanks in advance.

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org><mailto:R-help at r-project.org<mailto:R-help at r-project.org>> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Sep  7 21:10:44 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 7 Sep 2022 12:10:44 -0700
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>
Message-ID: <CAGxFJbT2CukeQVutvMN5rY-3KRu_WLaZz7N2cG3pVrpJfiZMwA@mail.gmail.com>

(Typos in my last paragraph corrected for clarity)

On Wed, Sep 7, 2022 at 12:09 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> Well, as it states on the Help page, which should always be the first
> place to look for, ummm, help:
>
> "If the value of EXPR is not a character string it is coerced to
> integer. Note that this also happens for factors, with a warning, as
> typically the character level is meant. If the integer is between 1
> and nargs()-1 then the corresponding element of ... is evaluated and
> the result returned: thus if the first argument is 3 then the fourth
> argument is evaluated and returned."
>
> So following up on Bill's comment, the arguments do not even need to
> be named when Stst evaluates to an integer:
>
> > Stst <- 2
> > switch(Stst, print("NO"), print("YES"))
> [1] "YES"
>
> Cheers,
> Bert
>
> On Wed, Sep 7, 2022 at 11:35 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear members,
> >                              The following is my code:
> >
> > > Stst <- 2
> > > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> > Error: unexpected '=' in "switch(Stst, 1 ="
> >
> > Why isn't it printing "YES" on to the console?
> >
> > many thanks in advance.
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Sep  7 21:09:31 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 7 Sep 2022 12:09:31 -0700
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>

Well, as it states on the Help page, which should always be the first
place to look for, ummm, help:

"If the value of EXPR is not a character string it is coerced to
integer. Note that this also happens for factors, with a warning, as
typically the character level is meant. If the integer is between 1
and nargs()-1 then the corresponding element of ... is evaluated and
the result returned: thus if the first argument is 3 then the fourth
argument is evaluated and returned."

So following up on Bill's comment, the arguments do not even need to
be names when Stst evaluates to) an integer:

> Stst <- 2
> switch(Stst, print("NO"), print("YES"))
[1] "YES"

Cheers,
Bert

On Wed, Sep 7, 2022 at 11:35 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear members,
>                              The following is my code:
>
> > Stst <- 2
> > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> Error: unexpected '=' in "switch(Stst, 1 ="
>
> Why isn't it printing "YES" on to the console?
>
> many thanks in advance.
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Sep  7 21:18:54 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 7 Sep 2022 19:18:54 +0000
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>
Message-ID: <PU4P216MB15689BAB39C002F7284E7C49C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bert,
                    Thanks...I went through the doc pages but couldn't glean from that that for numeric options one has to backtick it. I is not given in the doc page...I actually had hundreds of different choices and so cannot depend on evaluation by position...Thanks again...I got to know that 2 is not a valid identifier but`2` is!

Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Thursday, September 8, 2022 12:39 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] inconsistency in switch statements.....

Well, as it states on the Help page, which should always be the first
place to look for, ummm, help:

"If the value of EXPR is not a character string it is coerced to
integer. Note that this also happens for factors, with a warning, as
typically the character level is meant. If the integer is between 1
and nargs()-1 then the corresponding element of ... is evaluated and
the result returned: thus if the first argument is 3 then the fourth
argument is evaluated and returned."

So following up on Bill's comment, the arguments do not even need to
be names when Stst evaluates to) an integer:

> Stst <- 2
> switch(Stst, print("NO"), print("YES"))
[1] "YES"

Cheers,
Bert

On Wed, Sep 7, 2022 at 11:35 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear members,
>                              The following is my code:
>
> > Stst <- 2
> > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> Error: unexpected '=' in "switch(Stst, 1 ="
>
> Why isn't it printing "YES" on to the console?
>
> many thanks in advance.
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Wed Sep  7 22:35:50 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Wed, 7 Sep 2022 21:35:50 +0100
Subject: [R] radials in "circular" function
Message-ID: <CABxY9BNSg0t8Q1v3Rg6_mWx3BT639TcjgY8kJkrEFSbgqeHBsg@mail.gmail.com>

Hello.  I am plotting circular statistical data but would like to add
"spokes" ie radials to the points of the circumference.  The function
"lines.circular" would seem to be right, but I simply can't create spokes
with it.   The example given on lines.circular function - RDocumentation
<https://www.rdocumentation.org/packages/circular/versions/0.4-95/topics/lines.circular>
is
not clear and doesn't give spokes.   There's also the arrows.circular
function but I don't want the arrow heads.  basically can anyone tell me
how to draw a line from the centre of the circle to a specified plot on the
rim in "circular"?

Thanks Nick Wray

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Sep  7 22:42:36 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 7 Sep 2022 13:42:36 -0700
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <PU4P216MB15689BAB39C002F7284E7C49C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>
 <PU4P216MB15689BAB39C002F7284E7C49C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbQEOkH1cgkuhKeWM6GdCad1BuFzPc+eK5CqwrjS8gbJYA@mail.gmail.com>

Inline.

On Wed, Sep 7, 2022 at 12:18 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Bert,
>                     Thanks...I went through the doc pages but couldn't glean from that that for numeric options one has to backtick it.

That's because your statement is false. Perhaps you misstated what you
meant, but for numeric options, the match is **always** chosen by
position, whether or not the arguments are labeled, whether or not the
labels are backticked numerics or not.

> a <- 2
> switch(a, `44` = 'No', howdy_pardner = 'Yes')
[1] "Yes"
> a = 44 ## can't work with only two positional choices
> switch(a, `44` = 'No', howdy_pardner = 'Yes')
> ## No match, so none returned and printed as above

"I is not given in the doc page...I actually had hundreds of different
choices and so cannot depend on evaluation by position..."

.... which, to repeat, is false if choices evaluate to/can be coerced
to integers. Evaluation is *always* by position in that case.

> a <- 2.3
> switch(a, `44` = 'No', howdy_pardner = 'Yes')
[1] "Yes"
## because
> as.integer(2.3)
[1] 2

-- 
Bert

>
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Bert Gunter <bgunter.4567 at gmail.com>
> Sent: Thursday, September 8, 2022 12:39 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] inconsistency in switch statements.....
>
> Well, as it states on the Help page, which should always be the first
> place to look for, ummm, help:
>
> "If the value of EXPR is not a character string it is coerced to
> integer. Note that this also happens for factors, with a warning, as
> typically the character level is meant. If the integer is between 1
> and nargs()-1 then the corresponding element of ... is evaluated and
> the result returned: thus if the first argument is 3 then the fourth
> argument is evaluated and returned."
>
> So following up on Bill's comment, the arguments do not even need to
> be names when Stst evaluates to) an integer:
>
> > Stst <- 2
> > switch(Stst, print("NO"), print("YES"))
> [1] "YES"
>
> Cheers,
> Bert
>
> On Wed, Sep 7, 2022 at 11:35 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > Dear members,
> >                              The following is my code:
> >
> > > Stst <- 2
> > > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> > Error: unexpected '=' in "switch(Stst, 1 ="
> >
> > Why isn't it printing "YES" on to the console?
> >
> > many thanks in advance.
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Sep  7 22:51:44 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 7 Sep 2022 13:51:44 -0700
Subject: [R] radials in "circular" function
In-Reply-To: <CABxY9BNSg0t8Q1v3Rg6_mWx3BT639TcjgY8kJkrEFSbgqeHBsg@mail.gmail.com>
References: <CABxY9BNSg0t8Q1v3Rg6_mWx3BT639TcjgY8kJkrEFSbgqeHBsg@mail.gmail.com>
Message-ID: <CAGxFJbQ7VuRews8KZb07rVFdekOaH-5YmeEEo4JXvDeARUD5tw@mail.gmail.com>

The Help for arrows.circular has a ... argument which it tells you is
passed on to the (graphics package) arrows() function. ?arrows tells
you that this function has a 'length' argument that controls the
length of the arrow head edges. So set length = 0 in your
arrows.circular call to remove the arrowheads, i.e. plot only the
'spokes'.

Cheers,
Bert

On Wed, Sep 7, 2022 at 1:36 PM Nick Wray <nickmwray at gmail.com> wrote:
>
> Hello.  I am plotting circular statistical data but would like to add
> "spokes" ie radials to the points of the circumference.  The function
> "lines.circular" would seem to be right, but I simply can't create spokes
> with it.   The example given on lines.circular function - RDocumentation
> <https://www.rdocumentation.org/packages/circular/versions/0.4-95/topics/lines.circular>
> is
> not clear and doesn't give spokes.   There's also the arrows.circular
> function but I don't want the arrow heads.  basically can anyone tell me
> how to draw a line from the centre of the circle to a specified plot on the
> rim in "circular"?
>
> Thanks Nick Wray
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Sep  8 01:41:25 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 7 Sep 2022 16:41:25 -0700
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <PU4P216MB15689BAB39C002F7284E7C49C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>
 <PU4P216MB15689BAB39C002F7284E7C49C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAHqSRuTZzWYJbfRbLX2TK+Awu2_G_b4uBJbsg2qFZ7u0auuVcg@mail.gmail.com>

The argument names given to any function, including switch(), must be
parsable as R 'names' (a.k.a. 'symbols').   Names are either
   a) sequences of letters, numbers, and underscores that begin with a
letter
or
   b) the contents of a backticked set of characters (with a few
exceptions, like no \uxxxx sequences)

Since calls to switch() are parsed with the same rules as any other
function call, this is not mentioned in the help page for switch().

[Note that your original code died with a syntax error, not a run-time
error that would be specific to switch().]

-Bill

On Wed, Sep 7, 2022 at 12:46 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> Dear Bert,
>                     Thanks...I went through the doc pages but couldn't
> glean from that that for numeric options one has to backtick it. I is not
> given in the doc page...I actually had hundreds of different choices and so
> cannot depend on evaluation by position...Thanks again...I got to know that
> 2 is not a valid identifier but`2` is!
>
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Bert Gunter <bgunter.4567 at gmail.com>
> Sent: Thursday, September 8, 2022 12:39 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] inconsistency in switch statements.....
>
> Well, as it states on the Help page, which should always be the first
> place to look for, ummm, help:
>
> "If the value of EXPR is not a character string it is coerced to
> integer. Note that this also happens for factors, with a warning, as
> typically the character level is meant. If the integer is between 1
> and nargs()-1 then the corresponding element of ... is evaluated and
> the result returned: thus if the first argument is 3 then the fourth
> argument is evaluated and returned."
>
> So following up on Bill's comment, the arguments do not even need to
> be names when Stst evaluates to) an integer:
>
> > Stst <- 2
> > switch(Stst, print("NO"), print("YES"))
> [1] "YES"
>
> Cheers,
> Bert
>
> On Wed, Sep 7, 2022 at 11:35 AM akshay kulkarni <akshay_e4 at hotmail.com>
> wrote:
> >
> > Dear members,
> >                              The following is my code:
> >
> > > Stst <- 2
> > > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> > Error: unexpected '=' in "switch(Stst, 1 ="
> >
> > Why isn't it printing "YES" on to the console?
> >
> > many thanks in advance.
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Thu Sep  8 08:41:20 2022
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Thu, 8 Sep 2022 18:41:20 +1200
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <PU4P216MB15689BAB39C002F7284E7C49C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>
 <PU4P216MB15689BAB39C002F7284E7C49C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CABcYAdJcrQd83oQCM+maDM2g5cw5PaE7k4ycBBqwACdU7the9g@mail.gmail.com>

You DON'T need to use backticks.  switch() is much older than backticks.
Ordinary quotation marks are fine.
> switch(as.character(1), "2"="YES", "1"="NO")
[1] "NO"


On Thu, 8 Sept 2022 at 07:46, akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear Bert,
>                     Thanks...I went through the doc pages but couldn't
> glean from that that for numeric options one has to backtick it. I is not
> given in the doc page...I actually had hundreds of different choices and so
> cannot depend on evaluation by position...Thanks again...I got to know that
> 2 is not a valid identifier but`2` is!
>
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Bert Gunter <bgunter.4567 at gmail.com>
> Sent: Thursday, September 8, 2022 12:39 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] inconsistency in switch statements.....
>
> Well, as it states on the Help page, which should always be the first
> place to look for, ummm, help:
>
> "If the value of EXPR is not a character string it is coerced to
> integer. Note that this also happens for factors, with a warning, as
> typically the character level is meant. If the integer is between 1
> and nargs()-1 then the corresponding element of ... is evaluated and
> the result returned: thus if the first argument is 3 then the fourth
> argument is evaluated and returned."
>
> So following up on Bill's comment, the arguments do not even need to
> be names when Stst evaluates to) an integer:
>
> > Stst <- 2
> > switch(Stst, print("NO"), print("YES"))
> [1] "YES"
>
> Cheers,
> Bert
>
> On Wed, Sep 7, 2022 at 11:35 AM akshay kulkarni <akshay_e4 at hotmail.com>
> wrote:
> >
> > Dear members,
> >                              The following is my code:
> >
> > > Stst <- 2
> > > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> > Error: unexpected '=' in "switch(Stst, 1 ="
> >
> > Why isn't it printing "YES" on to the console?
> >
> > many thanks in advance.
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Thu Sep  8 15:00:02 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Thu, 8 Sep 2022 14:00:02 +0100
Subject: [R] GIS in R vs QGIS
Message-ID: <CABxY9BP1rNC7tAyx5X9hD+7uPzTPUzoO52ZuLtGf1ap7kqftkg@mail.gmail.com>

A bit of a philosophical question maybe?  I am no expert in R but I feel at
home in it.  On the other hand I have been wrestling with QGIS, buying
books on it, finding online guides etc and I'm still finding it really
tricky.  For my research I need to analyse both topological data (locations
of streamflow gauges for example) and vector data such as precipitation or
temperature.  There seems to be a fair amount of geospatial stuff in R, as
well as books like Robin Lovelace's, so I am wondering whether I can throw
aside the QGIS stuff and do everything in R with the needed packages etc.
It would give me a lot more time, if nothing else.

I'd appreciate any thoughts about this
Thanks Nick Wray

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Thu Sep  8 16:06:28 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Thu, 8 Sep 2022 14:06:28 +0000
Subject: [R] GIS in R vs QGIS
In-Reply-To: <CABxY9BP1rNC7tAyx5X9hD+7uPzTPUzoO52ZuLtGf1ap7kqftkg@mail.gmail.com>
References: <CABxY9BP1rNC7tAyx5X9hD+7uPzTPUzoO52ZuLtGf1ap7kqftkg@mail.gmail.com>
Message-ID: <DM5PR2201MB156435C5AFDF2C4C65F4A283CF409@DM5PR2201MB1564.namprd22.prod.outlook.com>

Do not learn a new software unless you must. I would find a copy of "Geocomputation with R" and skim through it to see if it has figures or chapter/section titles that would suggest that it can do all of the tasks I need. If the answer looks even close to "yes" then I would go that route because the software is more familiar. However now that you have spent time with QGIS, it is all about your guess as to the shortest distance to your goal.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Nick Wray
Sent: Thursday, September 8, 2022 9:00 AM
To: r-help at r-project.org
Subject: [R] GIS in R vs QGIS

[External Email]

A bit of a philosophical question maybe?  I am no expert in R but I feel at home in it.  On the other hand I have been wrestling with QGIS, buying books on it, finding online guides etc and I'm still finding it really tricky.  For my research I need to analyse both topological data (locations of streamflow gauges for example) and vector data such as precipitation or temperature.  There seems to be a fair amount of geospatial stuff in R, as well as books like Robin Lovelace's, so I am wondering whether I can throw aside the QGIS stuff and do everything in R with the needed packages etc.
It would give me a lot more time, if nothing else.

I'd appreciate any thoughts about this
Thanks Nick Wray

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7Caa3305a6aaa04cf32e9d08da919a4159%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982388966719768%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=GF0ipIoGxF8YzrAM9n4n85cGiwwJfnfLsT1T3ki%2Fs1M%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7Caa3305a6aaa04cf32e9d08da919a4159%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982388966719768%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=C8mYPj3DfshKUjlIN1P7ba24XWWFy6ANegnzgmhVz6I%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Sep  8 16:30:37 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 8 Sep 2022 07:30:37 -0700
Subject: [R] inconsistency in switch statements.....
In-Reply-To: <CABcYAdJcrQd83oQCM+maDM2g5cw5PaE7k4ycBBqwACdU7the9g@mail.gmail.com>
References: <PU4P216MB1568EEE38486AB1174AEE081C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbSG3bPBdLK+uo0yWGEbvztR-XOs882fChLX29TH6oM_8w@mail.gmail.com>
 <PU4P216MB15689BAB39C002F7284E7C49C8419@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CABcYAdJcrQd83oQCM+maDM2g5cw5PaE7k4ycBBqwACdU7the9g@mail.gmail.com>
Message-ID: <CAHqSRuRae1WxnBHkayBsEZNpsJ8xLhWJzWfPNKn5q2zbTNhWCQ@mail.gmail.com>

The same is true for any function call; switch() is not special in this
regard.

> f <- function(x, ...) list(...)
> f("x"=1, "2"=2, `3`=3)
$`2`
[1] 2

$`3`
[1] 3

The backticks are required when defining a function with a non-syntactical
name, but the call can use either form.

> f <- function(x, `2`) x - `2`
> f("2"=7, 18)
[1] 11
> f(`2`=7, 18)
[1] 11


-Bill

On Wed, Sep 7, 2022 at 11:41 PM Richard O'Keefe <raoknz at gmail.com> wrote:

> You DON'T need to use backticks.  switch() is much older than backticks.
> Ordinary quotation marks are fine.
> > switch(as.character(1), "2"="YES", "1"="NO")
> [1] "NO"
>
>
> On Thu, 8 Sept 2022 at 07:46, akshay kulkarni <akshay_e4 at hotmail.com>
> wrote:
>
> > Dear Bert,
> >                     Thanks...I went through the doc pages but couldn't
> > glean from that that for numeric options one has to backtick it. I is not
> > given in the doc page...I actually had hundreds of different choices and
> so
> > cannot depend on evaluation by position...Thanks again...I got to know
> that
> > 2 is not a valid identifier but`2` is!
> >
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > ________________________________
> > From: Bert Gunter <bgunter.4567 at gmail.com>
> > Sent: Thursday, September 8, 2022 12:39 AM
> > To: akshay kulkarni <akshay_e4 at hotmail.com>
> > Cc: R help Mailing list <r-help at r-project.org>
> > Subject: Re: [R] inconsistency in switch statements.....
> >
> > Well, as it states on the Help page, which should always be the first
> > place to look for, ummm, help:
> >
> > "If the value of EXPR is not a character string it is coerced to
> > integer. Note that this also happens for factors, with a warning, as
> > typically the character level is meant. If the integer is between 1
> > and nargs()-1 then the corresponding element of ... is evaluated and
> > the result returned: thus if the first argument is 3 then the fourth
> > argument is evaluated and returned."
> >
> > So following up on Bill's comment, the arguments do not even need to
> > be names when Stst evaluates to) an integer:
> >
> > > Stst <- 2
> > > switch(Stst, print("NO"), print("YES"))
> > [1] "YES"
> >
> > Cheers,
> > Bert
> >
> > On Wed, Sep 7, 2022 at 11:35 AM akshay kulkarni <akshay_e4 at hotmail.com>
> > wrote:
> > >
> > > Dear members,
> > >                              The following is my code:
> > >
> > > > Stst <- 2
> > > > switch(Stst, 1 = print("NO"), 2 = print("YES"))
> > > Error: unexpected '=' in "switch(Stst, 1 ="
> > >
> > > Why isn't it printing "YES" on to the console?
> > >
> > > many thanks in advance.
> > >
> > > Thanking you,
> > > Yours sincerely,
> > > AKSHAY M KULKARNI
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Fri Sep  9 02:50:42 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 8 Sep 2022 17:50:42 -0700
Subject: [R] confidence intervals
In-Reply-To: <CA+JEM01GyAtiXFHi0Xfevhhe+qsSYogbeUxaFwYFLVYf0R=tJQ@mail.gmail.com>
References: <CA+JEM01GyAtiXFHi0Xfevhhe+qsSYogbeUxaFwYFLVYf0R=tJQ@mail.gmail.com>
Message-ID: <F9AB27D6-6B7F-447E-9AC3-8E0CEDE3B0FA@comcast.net>

The first article had no code and did not describe a formula that I could find which matched your code. The second article is behind a paywall. 

? 
David. 

Sent from my iPhone

> On Sep 3, 2022, at 3:39 PM, Bogdan Tanasa <tanasa at gmail.com> wrote:
> 
> ?
> Dear Aaron, David, and everyone,
> 
> Thank you again for your comments on my question related to the confidence intervals. I am sorry for the late reply. 
> 
> The definition of the 95 confidence intervals where our discussion originates from has been proposed by the authors of these two articles (I am including the links to the articles just to show that the formula has been published in a methods article a while ago; the articles are in the field of biology though, where not too many of you are part of, I guess). These authors have written the scripts and they have made those available on github. I have asked a while ago the authors why they have chosen this formula, however, I have not received any reply. In any case, at this moment I will use the mathematical formulas described in the articles :
> 
> https://www.cell.com/molecular-cell/fulltext/S1097-2765(15)00304-4
> 
> https://www.nature.com/articles/s41596-019-0218-7
> 
> Wishing everyone a good weekend, 
> 
> Bogdan
> 
> 
> 
>> On Sun, Aug 28, 2022 at 6:53 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>> I have a general dislike of "analysis emergencies." I would like to see a data emergency wherein someone must cram 3 years of data collection into 18 months so that they have time to work out the correct analysis. I am sure others would suggest working out how analyze the data before starting the experiment.
>> 
>> Our business office gives this advice to faculty members: An emergency on your part is not an emergency on our part. 
>> 
>> How about starting by answering the questions posted by the people you are hoping will help. Focus on David's middle paragraph. However, if you can re-code everything to work, then it would seem that you already know the answer and it might be simpler/faster to write the correct code.
>> 
>> You might spend some time looking for a scientific paper that uses that equation for the confidence interval and thereby get some context to explain why the equation is correct.
>> 
>> Tim
>> 
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bogdan Tanasa
>> Sent: Sunday, August 28, 2022 8:55 PM
>> To: David Winsemius <dwinsemius at comcast.net>
>> Cc: r-help <r-help at r-project.org>
>> Subject: Re: [R] confidence intervals
>> 
>> [External Email]
>> 
>> Hi David,
>> 
>> Thank you for your comments, and feed-back message. I am very happy to learn from the experience of the people on R mailing list, and without any doubt, I am very thankful to you and to everyone for sharing their knowledge. I do apologize for any confusion that I have created unwillingly with my previous email.
>> 
>> About my previous email related to the confidence intervals: indeed I have posted the question with a detailed description on stackoverflow, and the link is listed below.
>> 
>> I have to admit that I have been in rush willing to have the suggestions of R-help members by Monday (if that would have been possible), as I have to make a decision at the beginning of this week on whether I need to re-code the shell script in R. I have a deadline on Wed. The script itself is less important per se, I have included it just to point our the origin of my question.
>> 
>> I do certainly respect the principles of online R-help community, and I would very much appreciate if I could have your advice on the following :
>> shall a "R code related emergency" arise, would it be acceptable to post the question on stackoverflow with the corresponding data tables and detailed code, and to refer the posting on R-help mailing list ?
>> 
>> If it is acceptable at least for a single email, and if you do not mind, I could mention the link to stackoverflow, inviting our members to read it, shall they be comfortable with this topic.
>> 
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313343894313%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=8sF7j4OCgH12qx4d8NCiw1%2FDbPa6nrui27S9C3ZNuL0%3D&amp;reserved=0
>> 
>> Thanks a lot, have  a good week !
>> 
>> ~ Bogdan
>> 
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313343894313%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=8sF7j4OCgH12qx4d8NCiw1%2FDbPa6nrui27S9C3ZNuL0%3D&amp;reserved=0
>> 
>> On Sat, Aug 27, 2022, 6:52 PM David Winsemius <dwinsemius at comcast.net>
>> wrote:
>> 
>> > You cross-posted this to StackOverflow and did not say so.  ... and 
>> > you posted in HTML Bad dog squared. I cast one of the close votes on 
>> > SO, but here I can only say ... READ the Posting Guide.
>> >
>> > You also give no citation other than someone's Github files with 
>> > minimal comments in that material. You should indicate whether this 
>> > code has any solid support. Why do you think this code is something to depend upon?
>> >
>> > After all, you been posting questions on R-help for several months.
>> > Don't you think you should make a good faith effort to understand the 
>> > principles underlying this resource?
>> >
>> >
>> > --
>> >
>> > David.
>> >
>> > On 8/26/22 17:55, Bogdan Tanasa wrote:
>> > > Dear all,
>> > >
>> > > Although I know that it is not a statistics mailing list, given my 
>> > > work
>> > on
>> > > ICeChIP
>> > >
>> > >
>> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgith
>> > ub.com%2Fshah-rohan%2Ficechip%2Fblob%2Fmaster%2FScripts%2FcomputeHMDan
>> > dError&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da8
>> > 9592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C63797331334389431
>> > 3%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6
>> > Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=9HOH72K0Lj30w7tE%2BMN
>> > oXakPbO1sasaujUTsnHFwDZo%3D&amp;reserved=0
>> > >
>> > > I would appreciate to have the answer to a question :
>> > >
>> > > given two variables a and b (a and b can have 1000 paired-values) 
>> > > and a calibration number "cal",
>> > >
>> > > why the 95 confidence interval has been calculated as such for each 
>> > > value
>> > > a(i) and b(i) :
>> > >
>> > > 100 / cal * sqrt (( a/ (b^2) + (a^2) / (b ^3)) * 1.96
>> > >
>> > > Thank you,
>> > >
>> > > Bogdan
>> > >
>> > >       [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%4
>> > > 0ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a
>> > > 62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJW
>> > > IjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C300
>> > > 0%7C%7C%7C&amp;sdata=KfmZ6PvxUVrbCMzVZcz6S2H2sqfWQmw2WIZHERwKDEk%3D&
>> > > amp;reserved=0
>> > > PLEASE do read the posting guide
>> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>> > -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
>> > 7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%
>> > 7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
>> > DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
>> > sdata=127HvzZh7q9Xa7LaESHIEXIy3CdmUyQ3cxAVeOA%2Bukg%3D&amp;reserved=0
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>> 
>>         [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KfmZ6PvxUVrbCMzVZcz6S2H2sqfWQmw2WIZHERwKDEk%3D&amp;reserved=0
>> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=127HvzZh7q9Xa7LaESHIEXIy3CdmUyQ3cxAVeOA%2Bukg%3D&amp;reserved=0
>> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @tyen @end|ng |rom ntu@edu@tw  Fri Sep  9 10:46:00 2022
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Fri, 9 Sep 2022 16:46:00 +0800
Subject: [R] Help with a simple subroutine
Message-ID: <69533285-0c2c-f442-58f0-20042d466497@ntu.edu.tw>

Can someone help me with this simple replicable subroutine?
I am expecting the line? t<-gamma/sgamma to produce two different
values. But I confirm that it is doing
tt<-gamma[1]/sgamma[1]
Thanks.

 > b<-v$est[j]; b
log.gamma1 log.gamma2
 ? -1.82378?? -1.11313
 > v<-v$stat$vb[j,j]; v
 ?????????? log.gamma1 log.gamma2
log.gamma1? 0.0842252? 0.0138778
log.gamma2? 0.0138778? 0.0793592
 > delta <- function(b,v){
+ # ***********************************************
+ # Delta method for exponential transformation
+ # ***********************************************
+?? df<-5140; #df<-nrow(mydata)
+?? gamma<-exp(b)
+?? vgamma<-gamma^2*v[2,2]
+?? sgamma<-sqrt(vgamma)
+?? t<-gamma/sgamma
+?? tt<-gamma[1]/sgamma[1]
+?? p<-2*(1-pt(abs(t),df))
+ list(gamma=gamma,sgamma=sgamma,b=b,t=t,p=p,tt=tt)
+ }
 > options(digits=6)
 > delta(b,v)$b
log.gamma1 log.gamma2
 ? -1.82378?? -1.11313
 > delta(b,v)$gamma
log.gamma1 log.gamma2
 ? 0.161414?? 0.328529
 > delta(b,v)$sgamma
log.gamma1 log.gamma2
 ?0.0454716? 0.0925490
 > delta(b,v)$t
log.gamma1 log.gamma2
 ?? 3.54978??? 3.54978
 > delta(b,v)$tt
log.gamma1
 ?? 3.54978
 > delta(b,v)$p
 ?log.gamma1? log.gamma2
0.000389002 0.000389002


From @kw@|mmo @end|ng |rom gm@||@com  Fri Sep  9 10:57:50 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Fri, 9 Sep 2022 04:57:50 -0400
Subject: [R] Help with a simple subroutine
In-Reply-To: <69533285-0c2c-f442-58f0-20042d466497@ntu.edu.tw>
References: <69533285-0c2c-f442-58f0-20042d466497@ntu.edu.tw>
Message-ID: <CAPcHnpTn=C2ec_q4mJkCRjSePACyNz7K+FkjWHsmKLty-7dYmw@mail.gmail.com>

I think you must've written your formula incorrectly. t can be simplified
like this:

t
gamma/sgamma
gamma/sqrt(vgamma)
gamma/sqrt(gamma^2 * v[2, 2])
gamma/sqrt(gamma^2)/sqrt(v[2, 2])
gamma/gamma              /sqrt(v[2, 2])
rep(1, length(gamma))   /sqrt(v[2, 2])

so I'm not surprised that both values of t are equal.

On Fri., Sep. 9, 2022, 04:46 Steven T. Yen, <styen at ntu.edu.tw> wrote:

> Can someone help me with this simple replicable subroutine?
> I am expecting the line  t<-gamma/sgamma to produce two different
> values. But I confirm that it is doing
> tt<-gamma[1]/sgamma[1]
> Thanks.
>
>  > b<-v$est[j]; b
> log.gamma1 log.gamma2
>    -1.82378   -1.11313
>  > v<-v$stat$vb[j,j]; v
>             log.gamma1 log.gamma2
> log.gamma1  0.0842252  0.0138778
> log.gamma2  0.0138778  0.0793592
>  > delta <- function(b,v){
> + # ***********************************************
> + # Delta method for exponential transformation
> + # ***********************************************
> +   df<-5140; #df<-nrow(mydata)
> +   gamma<-exp(b)
> +   vgamma<-gamma^2*v[2,2]
> +   sgamma<-sqrt(vgamma)
> +   t<-gamma/sgamma
> +   tt<-gamma[1]/sgamma[1]
> +   p<-2*(1-pt(abs(t),df))
> + list(gamma=gamma,sgamma=sgamma,b=b,t=t,p=p,tt=tt)
> + }
>  > options(digits=6)
>  > delta(b,v)$b
> log.gamma1 log.gamma2
>    -1.82378   -1.11313
>  > delta(b,v)$gamma
> log.gamma1 log.gamma2
>    0.161414   0.328529
>  > delta(b,v)$sgamma
> log.gamma1 log.gamma2
>   0.0454716  0.0925490
>  > delta(b,v)$t
> log.gamma1 log.gamma2
>     3.54978    3.54978
>  > delta(b,v)$tt
> log.gamma1
>     3.54978
>  > delta(b,v)$p
>   log.gamma1  log.gamma2
> 0.000389002 0.000389002
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Sep  9 11:03:11 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 9 Sep 2022 11:03:11 +0200
Subject: [R] Help with a simple subroutine
In-Reply-To: <69533285-0c2c-f442-58f0-20042d466497@ntu.edu.tw>
References: <69533285-0c2c-f442-58f0-20042d466497@ntu.edu.tw>
Message-ID: <20220909110311.396a3cd1@parabola>

? Fri, 9 Sep 2022 16:46:00 +0800
"Steven T. Yen" <styen at ntu.edu.tw> ?????:

> I am expecting the line? t<-gamma/sgamma to produce two different
> values. But I confirm that it is doing
> tt<-gamma[1]/sgamma[1]

No, it just happens that gamma[1]/sgamma[1] is the same as
gamma[2]/sgamma[2], subject to rounding errors:

> +?? gamma<-exp(b)
> +?? vgamma<-gamma^2*v[2,2]
> +?? sgamma<-sqrt(vgamma)
> +?? t<-gamma/sgamma

t = gamma / sgamma = gamma / sqrt(gamma^2 * v[2,2]) =
  = gamma / (abs(gamma) * sqrt(v[2,2])) =
(given gamma = exp(b) > 0)
  = 1 / sqrt(v[2,2]).

-- 
Best regards,
Ivan


From b@row||ng@on @end|ng |rom |@nc@@ter@@c@uk  Fri Sep  9 11:03:43 2022
From: b@row||ng@on @end|ng |rom |@nc@@ter@@c@uk (Barry Rowlingson)
Date: Fri, 9 Sep 2022 10:03:43 +0100
Subject: [R] [External]  GIS in R vs QGIS
In-Reply-To: <a170574b134a47b58ea25db56a1a6d72@LO2P265MB3344.GBRP265.PROD.OUTLOOK.COM>
References: <a170574b134a47b58ea25db56a1a6d72@LO2P265MB3344.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CANVKczPxSwaf5Xvyo5vfZe+uCDecSpo3qag=gDtmaHaCrKxP=A@mail.gmail.com>

On Thu, Sep 8, 2022 at 2:01 PM Nick Wray <nickmwray at gmail.com> wrote:

> A bit of a philosophical question maybe?  I am no expert in R but I feel at
> home in it.  On the other hand I have been wrestling with QGIS, buying
> books on it, finding online guides etc and I'm still finding it really
> tricky.

R is a programming language, designed for working with data, and
there's add-on packages for spatial data. Once you know how to get and
set aspects of the spatial data objects,
you can do anything computable on spatial data objects. This is true
for any programming language with spatial data packages, such as
Python or Javascript.

If you are wrestling with QGIS to do stuff that you find easy in R,
then you are probably trying to do something "programmatic" in QGIS.
Its data structures are more limited, basically
to spatial features and tables. Without resorting to Python code
(which is integrated into QGIS) there's not a lot you can do to make
repetitive activity easy in QGIS, although there's
the graphical analysis pipeline builder in the toolbox which can be very useful.

What I mostly use QGIS for is input, editing, and visualising multiple
layers of spatial data. There are things that QGIS cartographic engine
can do easily that R's graphics cannot do.
Although you can make "publication quality" maps in R, if you want
high quality cartographic output then it's more easily done in QGIS.

> For my research I need to analyse both topological data (locations
> of streamflow gauges for example) and vector data such as precipitation or
> temperature.  There seems to be a fair amount of geospatial stuff in R, as
> well as books like Robin Lovelace's, so I am wondering whether I can throw
> aside the QGIS stuff and do everything in R with the needed packages etc.
> It would give me a lot more time, if nothing else.

 I'd suggest you do your analysis in R (there are also R packages that
let you use QGIS' processing algorithms if you need them, and also
GRASS and other GIS tools). But if you want to
map your gauges over a base layer and zoom and pan to inspect it, or
you need fine adjustment of mapping output, then use QGIS.  R and QGIS
can both use open spatial data formats
for interoperability, so if you save from R into a GeoPackage then
reading it in QGIS is easy, and vice versa.


From tebert @end|ng |rom u||@edu  Fri Sep  9 14:39:48 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 9 Sep 2022 12:39:48 +0000
Subject: [R] Help with a simple subroutine
In-Reply-To: <20220909110311.396a3cd1@parabola>
References: <69533285-0c2c-f442-58f0-20042d466497@ntu.edu.tw>
 <20220909110311.396a3cd1@parabola>
Message-ID: <BN6PR2201MB1553ECA5C8D169FD479C598ACF439@BN6PR2201MB1553.namprd22.prod.outlook.com>

If t = 1/sqrt(v[2,2]) and there is no code to change the value of v[2,2] and no code to change to a different cell why would you get two different values? 

One approach to debugging is to make a small example and see if the code output matches (line-by-line) the output you get from doing a manual calculation. If they do not match you at least know where to start looking for a problem. Hand calculation can use pencil and paper or Excel or other tools. It is a tedious task but very effective.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Krylov
Sent: Friday, September 9, 2022 5:03 AM
To: Steven T. Yen <styen at ntu.edu.tw>
Cc: R-help Mailing List <r-help at r-project.org>
Subject: Re: [R] Help with a simple subroutine

[External Email]

? Fri, 9 Sep 2022 16:46:00 +0800
"Steven T. Yen" <styen at ntu.edu.tw> ?????:

> I am expecting the line  t<-gamma/sgamma to produce two different 
> values. But I confirm that it is doing tt<-gamma[1]/sgamma[1]

No, it just happens that gamma[1]/sgamma[1] is the same as gamma[2]/sgamma[2], subject to rounding errors:

> +   gamma<-exp(b)
> +   vgamma<-gamma^2*v[2,2]
> +   sgamma<-sqrt(vgamma)
> +   t<-gamma/sgamma

t = gamma / sgamma = gamma / sqrt(gamma^2 * v[2,2]) =
  = gamma / (abs(gamma) * sqrt(v[2,2])) = (given gamma = exp(b) > 0)
  = 1 / sqrt(v[2,2]).

--
Best regards,
Ivan

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C96597c0724d947d3c1ea08da9242e073%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637983113179778561%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=EnaoCEmoUJNXsukvk8jqZVZ1tIveOeUCIX%2Bic5tMRLM%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C96597c0724d947d3c1ea08da9242e073%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637983113179778561%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=18MG1xlJnQE%2Bqo54jNxYAIAGqSQC%2FFQOgTOkl7Ysvc8%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Fri Sep  9 16:13:48 2022
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Fri, 9 Sep 2022 22:13:48 +0800
Subject: [R] Help with a simple subroutine
In-Reply-To: <BN6PR2201MB1553ECA5C8D169FD479C598ACF439@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <69533285-0c2c-f442-58f0-20042d466497@ntu.edu.tw>
 <20220909110311.396a3cd1@parabola>
 <BN6PR2201MB1553ECA5C8D169FD479C598ACF439@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <5f176c38-c93f-01dc-72a9-9596e0a7f255@ntu.edu.tw>

Thanks to all. It was just programming error. The following now works. 
Essentially, to impose non-negative restrictions I estimated the natural 
logs of two parameters and then do exponential transformation to uncover 
the parameters, with mathematical transformation (delta method) for 
their standard errors.

I believe deltaMethod {car} does that sort of things. I have yet to look 
up if it does that for nonlinear regression object. But since the 
exponential transformation is a simple transformation (with a derivative 
equal to itself), I tried to program my own. Thanks to all.

 > obj<-cbp11.pooled
 > j<-grep("gamma",names(obj$est),value=TRUE); j
[1] "log.gamma1" "log.gamma2"
 > obj$estimate[j]
log.gamma1 log.gamma2
 ? -1.82378?? -1.11313
 > obj$stat$vb[j,j]
 ?????????? log.gamma1 log.gamma2
log.gamma1? 0.0842252? 0.0138778
log.gamma2? 0.0138778? 0.0793592
 > mydelta <- function(obj,j){
+ # *******************************************
+ # Delta method for exponential transformation
+ # *******************************************
+?? b<-obj$estimate[j]
+?? v<-obj$stat$vb[j,j]; v
+?? gamma<-exp(b)
+?? db<-gamma
+?? vgamma<-db^2*v
+?? sgamma<-sqrt(diag(vgamma))
+?? t<-gamma/sgamma
+?? df<-n<-obj$stat$n
+?? p<-2*(1-pt(abs(t),df))
+?? list(gamma=gamma,sgamma=sgamma,b=b,t=t,p=p)
+ }
 > v<-mydelta(obj,j)
 > v$b
log.gamma1 log.gamma2
 ? -1.82378?? -1.11313
 > v$gamma
log.gamma1 log.gamma2
 ? 0.161414?? 0.328529
 > v$sgamma
log.gamma1 log.gamma2
 ?0.0468449? 0.0925490
 > v$t
log.gamma1 log.gamma2
 ?? 3.44571??? 3.54978
 > v$p
 ?log.gamma1? log.gamma2
0.000574108 0.000388996
 >

On 9/9/2022 8:39 PM, Ebert,Timothy Aaron wrote:

> If t = 1/sqrt(v[2,2]) and there is no code to change the value of v[2,2] and no code to change to a different cell why would you get two different values?
>
> One approach to debugging is to make a small example and see if the code output matches (line-by-line) the output you get from doing a manual calculation. If they do not match you at least know where to start looking for a problem. Hand calculation can use pencil and paper or Excel or other tools. It is a tedious task but very effective.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ivan Krylov
> Sent: Friday, September 9, 2022 5:03 AM
> To: Steven T. Yen <styen at ntu.edu.tw>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] Help with a simple subroutine
>
> [External Email]
>
> ? Fri, 9 Sep 2022 16:46:00 +0800
> "Steven T. Yen" <styen at ntu.edu.tw> ?????:
>
>> I am expecting the line  t<-gamma/sgamma to produce two different
>> values. But I confirm that it is doing tt<-gamma[1]/sgamma[1]
> No, it just happens that gamma[1]/sgamma[1] is the same as gamma[2]/sgamma[2], subject to rounding errors:
>
>> +   gamma<-exp(b)
>> +   vgamma<-gamma^2*v[2,2]
>> +   sgamma<-sqrt(vgamma)
>> +   t<-gamma/sgamma
> t = gamma / sgamma = gamma / sqrt(gamma^2 * v[2,2]) =
>    = gamma / (abs(gamma) * sqrt(v[2,2])) = (given gamma = exp(b) > 0)
>    = 1 / sqrt(v[2,2]).
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C96597c0724d947d3c1ea08da9242e073%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637983113179778561%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=EnaoCEmoUJNXsukvk8jqZVZ1tIveOeUCIX%2Bic5tMRLM%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C96597c0724d947d3c1ea08da9242e073%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637983113179778561%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=18MG1xlJnQE%2Bqo54jNxYAIAGqSQC%2FFQOgTOkl7Ysvc8%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Fri Sep  9 17:44:45 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 9 Sep 2022 15:44:45 +0000
Subject: [R] confidence intervals
In-Reply-To: <F9AB27D6-6B7F-447E-9AC3-8E0CEDE3B0FA@comcast.net>
References: <CA+JEM01GyAtiXFHi0Xfevhhe+qsSYogbeUxaFwYFLVYf0R=tJQ@mail.gmail.com>
 <F9AB27D6-6B7F-447E-9AC3-8E0CEDE3B0FA@comcast.net>
Message-ID: <BN6PR2201MB15538B1531773E9E5359193DCF439@BN6PR2201MB1553.namprd22.prod.outlook.com>

Not to worry, the second article did not have equations either. It had a couple bits of code and a github link to icechip (page 3295).
I got through the paywall using a link through the University of Florida library system.

Maybe the linked papers include citations that describe the analysis in enough detail, but that effort exceeds my time limit for this activity.

Tim

From: David Winsemius <dwinsemius at comcast.net>
Sent: Thursday, September 8, 2022 8:51 PM
To: Bogdan Tanasa <tanasa at gmail.com>
Cc: Ebert,Timothy Aaron <tebert at ufl.edu>; r-help <r-help at r-project.org>
Subject: Re: [R] confidence intervals

[External Email]
The first article had no code and did not describe a formula that I could find which matched your code. The second article is behind a paywall.

?
David.
Sent from my iPhone


On Sep 3, 2022, at 3:39 PM, Bogdan Tanasa <tanasa at gmail.com<mailto:tanasa at gmail.com>> wrote:
?
Dear Aaron, David, and everyone,

Thank you again for your comments on my question related to the confidence intervals. I am sorry for the late reply.

The definition of the 95 confidence intervals where our discussion originates from has been proposed by the authors of these two articles (I am including the links to the articles just to show that the formula has been published in a methods article a while ago; the articles are in the field of biology though, where not too many of you are part of, I guess). These authors have written the scripts and they have made those available on github. I have asked a while ago the authors why they have chosen this formula, however, I have not received any reply. In any case, at this moment I will use the mathematical formulas described in the articles :

https://www.cell.com/molecular-cell/fulltext/S1097-2765(15)00304-4<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.cell.com%2Fmolecular-cell%2Ffulltext%2FS1097-2765(15)00304-4&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996716811%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=vkeF5mjxFkAJtsshVbzOEblOakQVe9TUVG9WUy79KRI%3D&reserved=0>

https://www.nature.com/articles/s41596-019-0218-7<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41596-019-0218-7&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996716811%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=QisH5QlhY699g3ExBEh89nrtR3H3ZX9AarqtvUMKzpw%3D&reserved=0>

Wishing everyone a good weekend,

Bogdan



On Sun, Aug 28, 2022 at 6:53 PM Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>> wrote:
I have a general dislike of "analysis emergencies." I would like to see a data emergency wherein someone must cram 3 years of data collection into 18 months so that they have time to work out the correct analysis. I am sure others would suggest working out how analyze the data before starting the experiment.

Our business office gives this advice to faculty members: An emergency on your part is not an emergency on our part.

How about starting by answering the questions posted by the people you are hoping will help. Focus on David's middle paragraph. However, if you can re-code everything to work, then it would seem that you already know the answer and it might be simpler/faster to write the correct code.

You might spend some time looking for a scientific paper that uses that equation for the confidence interval and thereby get some context to explain why the equation is correct.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of Bogdan Tanasa
Sent: Sunday, August 28, 2022 8:55 PM
To: David Winsemius <dwinsemius at comcast.net<mailto:dwinsemius at comcast.net>>
Cc: r-help <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] confidence intervals

[External Email]

Hi David,

Thank you for your comments, and feed-back message. I am very happy to learn from the experience of the people on R mailing list, and without any doubt, I am very thankful to you and to everyone for sharing their knowledge. I do apologize for any confusion that I have created unwillingly with my previous email.

About my previous email related to the confidence intervals: indeed I have posted the question with a detailed description on stackoverflow, and the link is listed below.

I have to admit that I have been in rush willing to have the suggestions of R-help members by Monday (if that would have been possible), as I have to make a decision at the beginning of this week on whether I need to re-code the shell script in R. I have a deadline on Wed. The script itself is less important per se, I have included it just to point our the origin of my question.

I do certainly respect the principles of online R-help community, and I would very much appreciate if I could have your advice on the following :
shall a "R code related emergency" arise, would it be acceptable to post the question on stackoverflow with the corresponding data tables and detailed code, and to refer the posting on R-help mailing list ?

If it is acceptable at least for a single email, and if you do not mind, I could mention the link to stackoverflow, inviting our members to read it, shall they be comfortable with this topic.

https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313343894313%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=8sF7j4OCgH12qx4d8NCiw1%2FDbPa6nrui27S9C3ZNuL0%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996716811%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=4QuLHm0fSa9LPG2Vnf%2BnisdfMfnJQ1Y0zEXWgIyE16w%3D&reserved=0>

Thanks a lot, have  a good week !

~ Bogdan

https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313343894313%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=8sF7j4OCgH12qx4d8NCiw1%2FDbPa6nrui27S9C3ZNuL0%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996716811%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=4QuLHm0fSa9LPG2Vnf%2BnisdfMfnJQ1Y0zEXWgIyE16w%3D&reserved=0>

On Sat, Aug 27, 2022, 6:52 PM David Winsemius <dwinsemius at comcast.net<mailto:dwinsemius at comcast.net>>
wrote:

> You cross-posted this to StackOverflow and did not say so.  ... and
> you posted in HTML Bad dog squared. I cast one of the close votes on
> SO, but here I can only say ... READ the Posting Guide.
>
> You also give no citation other than someone's Github files with
> minimal comments in that material. You should indicate whether this
> code has any solid support. Why do you think this code is something to depend upon?
>
> After all, you been posting questions on R-help for several months.
> Don't you think you should make a good faith effort to understand the
> principles underlying this resource?
>
>
> --
>
> David.
>
> On 8/26/22 17:55, Bogdan Tanasa wrote:
> > Dear all,
> >
> > Although I know that it is not a statistics mailing list, given my
> > work
> on
> > ICeChIP
> >
> >
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgith
> ub.com<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fub.com%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=em3fMdYfIwItLsX5ueMZXs%2F76Gs8hevXHWEbmZdGvdg%3D&reserved=0>%2Fshah-rohan%2Ficechip%2Fblob%2Fmaster%2FScripts%2FcomputeHMDan
> dError&amp;data=05%7C01%7Ctebert%40ufl.edu<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2F40ufl.edu%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=OrK1X0ZajWbvB0b9rrFbqcyINBGOzWdx1DF6qsXFL6o%3D&reserved=0>%7C0ba5d535471b46c05ec508da8
> 9592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C63797331334389431
> 3%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6
> Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=9HOH72K0Lj30w7tE%2BMN
> oXakPbO1sasaujUTsnHFwDZo%3D&amp;reserved=0
> >
> > I would appreciate to have the answer to a question :
> >
> > given two variables a and b (a and b can have 1000 paired-values)
> > and a calibration number "cal",
> >
> > why the 95 confidence interval has been calculated as such for each
> > value
> > a(i) and b(i) :
> >
> > 100 / cal * sqrt (( a/ (b^2) + (a^2) / (b ^3)) * 1.96
> >
> > Thank you,
> >
> > Bogdan
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at.ethz.ch<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fat.ethz.ch%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GwN4PEwjH8pLOmNxg4h3vri9lwSfOjI35T7NY3o%2BlUQ%3D&reserved=0>%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%4
> > 0ufl.edu<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2F0ufl.edu%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=XFiqLbwUEZIYxD6PakZ2wUon5WbMNq5M%2FExYV3NQyuc%3D&reserved=0>%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a
> > 62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJW
> > IjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C300
> > 0%7C%7C%7C&amp;sdata=KfmZ6PvxUVrbCMzVZcz6S2H2sqfWQmw2WIZHERwKDEk%3D&
> > amp;reserved=0
> > PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iGxY98c0YGqMi53P9cCNaf7m02afdGomEqbmrItjYtg%3D&reserved=0>
> -project.org<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fproject.org%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=LO6k5YzUAN4H3yMRL9k5qkOBj%2BNXq2M%2BAnKVqMiNJ%2Bk%3D&reserved=0>%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2F40ufl.edu%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=OrK1X0ZajWbvB0b9rrFbqcyINBGOzWdx1DF6qsXFL6o%3D&reserved=0>%
> 7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=127HvzZh7q9Xa7LaESHIEXIy3CdmUyQ3cxAVeOA%2Bukg%3D&amp;reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KfmZ6PvxUVrbCMzVZcz6S2H2sqfWQmw2WIZHERwKDEk%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=dOZN0X9vdJd481cVZUFSCTpKxP33qwxsDJHgHxn6eU4%3D&reserved=0>
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=127HvzZh7q9Xa7LaESHIEXIy3CdmUyQ3cxAVeOA%2Bukg%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814997029285%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2FpbdlAPXXtKg%2BRllG45yD4fm9NoPhxjgPSBwF%2BFCpyM%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sat Sep 10 23:08:21 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sat, 10 Sep 2022 23:08:21 +0200
Subject: [R] Interpreting fa.diagram from package psych
Message-ID: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>

Hello,
I have plotted data from exploratory factor analysis, and I got a
graph similar to FIGURE 11 (PAGE 36) of this link
file:///home/gigiux/Downloads/An_overview_of_the_psych_package.pdf
How do I interpret the figure? In particular, how do I know what the
colors represent?
Thank you


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Sep 10 23:33:05 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 10 Sep 2022 14:33:05 -0700
Subject: [R] Interpreting fa.diagram from package psych
In-Reply-To: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>
References: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>
Message-ID: <2e402663-9062-ac68-295f-0b7e1d61e57e@comcast.net>


On 9/10/22 14:08, Luigi Marongiu wrote:
> Hello,
> I have plotted data from exploratory factor analysis, and I got a
> graph similar to FIGURE 11 (PAGE 36) of this link
> file:///home/gigiux/Downloads/An_overview_of_the_psych_package.pdf
This appears to be a link you a file on your personal device rather than 
an attachment.
> How do I interpret the figure? In particular, how do I know what the
> colors represent?
> Thank you


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sun Sep 11 09:02:28 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sun, 11 Sep 2022 09:02:28 +0200
Subject: [R] Interpreting fa.diagram from package psych
In-Reply-To: <2e402663-9062-ac68-295f-0b7e1d61e57e@comcast.net>
References: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>
 <2e402663-9062-ac68-295f-0b7e1d61e57e@comcast.net>
Message-ID: <CAMk+s2SZOAOZEKsgmBCWqQV8VJ_6y2g0dmYm0bxNPFNQ5YFfjQ@mail.gmail.com>

Sorry, the file was automatically downloaded and opened with the
browser instead of pointing to the webpage.
Here is a better link:
https://cran.r-project.org/web/packages/psychTools/vignettes/factor.pdf
The figure is on page 22.
The question is: The dots have different colors; how do I know what
they represent?
Is there a way to show an auto-legend?
Thank you

On Sat, Sep 10, 2022 at 11:33 PM David Winsemius <dwinsemius at comcast.net> wrote:
>
>
> On 9/10/22 14:08, Luigi Marongiu wrote:
> > Hello,
> > I have plotted data from exploratory factor analysis, and I got a
> > graph similar to FIGURE 11 (PAGE 36) of this link
> > file:///home/gigiux/Downloads/An_overview_of_the_psych_package.pdf
> This appears to be a link you a file on your personal device rather than
> an attachment.
> > How do I interpret the figure? In particular, how do I know what the
> > colors represent?
> > Thank you
>


-- 
Best regards,
Luigi


From tebert @end|ng |rom u||@edu  Sun Sep 11 16:17:46 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sun, 11 Sep 2022 14:17:46 +0000
Subject: [R] Interpreting fa.diagram from package psych
In-Reply-To: <CAMk+s2SZOAOZEKsgmBCWqQV8VJ_6y2g0dmYm0bxNPFNQ5YFfjQ@mail.gmail.com>
References: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>
 <2e402663-9062-ac68-295f-0b7e1d61e57e@comcast.net>
 <CAMk+s2SZOAOZEKsgmBCWqQV8VJ_6y2g0dmYm0bxNPFNQ5YFfjQ@mail.gmail.com>
Message-ID: <BN6PR2201MB1553A2EE2F51DD70D734A727CF459@BN6PR2201MB1553.namprd22.prod.outlook.com>

It is a bad graphic as the legend that should explain the color coding is missing. The next option is to copy the data and code and see if you can reproduce the figure. You can then play with the code and read a bit about the procedures to figure out what is going on. It should not be too hard. My guess is that there is some additional variable with three states that is being used. If this were the iris data set I would guess it was the three species: setosa, versicolor, and virginica.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
Sent: Sunday, September 11, 2022 3:02 AM
To: David Winsemius <dwinsemius at comcast.net>
Cc: r-help <r-help at r-project.org>
Subject: Re: [R] Interpreting fa.diagram from package psych

[External Email]

Sorry, the file was automatically downloaded and opened with the browser instead of pointing to the webpage.
Here is a better link:
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FpsychTools%2Fvignettes%2Ffactor.pdf&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9d0e49ff1aab4d5db2d308da93c3ac01%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637984765998607455%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=2OxukCvxcx9xFJQiAInt2ulqC23qiBjQRPU128O%2Bjn8%3D&amp;reserved=0
The figure is on page 22.
The question is: The dots have different colors; how do I know what they represent?
Is there a way to show an auto-legend?
Thank you

On Sat, Sep 10, 2022 at 11:33 PM David Winsemius <dwinsemius at comcast.net> wrote:
>
>
> On 9/10/22 14:08, Luigi Marongiu wrote:
> > Hello,
> > I have plotted data from exploratory factor analysis, and I got a 
> > graph similar to FIGURE 11 (PAGE 36) of this link 
> > file:///home/gigiux/Downloads/An_overview_of_the_psych_package.pdf
> This appears to be a link you a file on your personal device rather 
> than an attachment.
> > How do I interpret the figure? In particular, how do I know what the 
> > colors represent?
> > Thank you
>


--
Best regards,
Luigi

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9d0e49ff1aab4d5db2d308da93c3ac01%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637984765998607455%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KfsnfNKp3klZMJcvvuPD4gqI6fffn95FkpaPm8KyEnA%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9d0e49ff1aab4d5db2d308da93c3ac01%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637984765998607455%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=7CZst6A76lzHADI4iRNJ%2FVI2%2FMOGLCAVnTL8aRLNjVA%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Sep 11 18:22:01 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Sep 2022 16:22:01 +0000
Subject: [R] inadequacy in as.integer....
Message-ID: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             I came across this queer thing during my analysis:
> as.integer("09098")
9098

Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From jrg @end|ng |rom |oe@|@u@  Sun Sep 11 18:27:57 2022
From: jrg @end|ng |rom |oe@|@u@ (JRG)
Date: Sun, 11 Sep 2022 16:27:57 +0000
Subject: [R] inadequacy in as.integer....
In-Reply-To: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <f5591d81-3f31-f81a-3a54-288199f6e74e@loesl.us>

On 9/11/22 12:22, akshay kulkarni wrote:
> Dear members,
> I came across this queer thing during my analysis:
>> as.integer("09098")
> 9098
>
> Any idea on how to retain the "0"?

Don't use as.integer(), which has performed precisely the service that
it advertises?


I certainly wouldn't call this an 'inadequacy'.


And please stop posting in html.


---JRG



> Yours sincerely,
> AKSHAY M KULKARNI
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Sun Sep 11 20:37:21 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sun, 11 Sep 2022 18:37:21 +0000
Subject: [R] inadequacy in as.integer....
In-Reply-To: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <BN6PR2201MB1553509A3A19297DD867CE8BCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>

Keep as character. 

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Sunday, September 11, 2022 12:22 PM
To: R help Mailing list <r-help at r-project.org>
Subject: [R] inadequacy in as.integer....

[External Email]

Dear members,
                             I came across this queer thing during my analysis:
> as.integer("09098")
9098

Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=%2FV4NoU8j%2F9KIYX5ExaY93fwQf%2FPqx1kisbt87Mj9%2F7Q%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=BA0o8oGcR%2FFBX9Vth5DuitlZnTGG7rNDmFga3ixZ9j4%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Sep 11 20:57:45 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Sep 2022 18:57:45 +0000
Subject: [R] inadequacy in as.integer....
In-Reply-To: <BN6PR2201MB1553509A3A19297DD867CE8BCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <BN6PR2201MB1553509A3A19297DD867CE8BCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <PU4P216MB156867ACC12961420434D895C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Tim,
                  So there is no way to coerce "09098" to 09098?

Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Ebert,Timothy Aaron <tebert at ufl.edu>
Sent: Monday, September 12, 2022 12:07 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: RE: inadequacy in as.integer....

Keep as character.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Sunday, September 11, 2022 12:22 PM
To: R help Mailing list <r-help at r-project.org>
Subject: [R] inadequacy in as.integer....

[External Email]

Dear members,
                             I came across this queer thing during my analysis:
> as.integer("09098")


Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=%2FV4NoU8j%2F9KIYX5ExaY93fwQf%2FPqx1kisbt87Mj9%2F7Q%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=BA0o8oGcR%2FFBX9Vth5DuitlZnTGG7rNDmFga3ixZ9j4%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Sun Sep 11 21:00:20 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sun, 11 Sep 2022 15:00:20 -0400
Subject: [R] inadequacy in as.integer....
In-Reply-To: <PU4P216MB156867ACC12961420434D895C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <BN6PR2201MB1553509A3A19297DD867CE8BCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <PU4P216MB156867ACC12961420434D895C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAPcHnpQX3EuRWAAa3q+hqpOXwsm0TY78haSCCLwm0zY2mrq=YQ@mail.gmail.com>

What you're asking for doesn't make sense: 9098 and 09098 are the same

9098L == 09098L

If you mean specifically while printing, you could use sprintf:

cat(sprintf("%05d", 9098))

On Sun., Sep. 11, 2022, 14:58 akshay kulkarni, <akshay_e4 at hotmail.com>
wrote:

> Dear Tim,
>                   So there is no way to coerce "09098" to 09098?
>
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Ebert,Timothy Aaron <tebert at ufl.edu>
> Sent: Monday, September 12, 2022 12:07 AM
> To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <
> r-help at r-project.org>
> Subject: RE: inadequacy in as.integer....
>
> Keep as character.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
> Sent: Sunday, September 11, 2022 12:22 PM
> To: R help Mailing list <r-help at r-project.org>
> Subject: [R] inadequacy in as.integer....
>
> [External Email]
>
> Dear members,
>                              I came across this queer thing during my
> analysis:
> > as.integer("09098")
>
>
> Any idea on how to retain the "0"?
>
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=%2FV4NoU8j%2F9KIYX5ExaY93fwQf%2FPqx1kisbt87Mj9%2F7Q%3D&amp;reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=BA0o8oGcR%2FFBX9Vth5DuitlZnTGG7rNDmFga3ixZ9j4%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Sep 11 21:00:32 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 11 Sep 2022 12:00:32 -0700
Subject: [R] inadequacy in as.integer....
In-Reply-To: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbTmf+gf6NndR4BNre6si5mfQ06ZR9aiXrGB8=FO80QLFQ@mail.gmail.com>

You seem to be confusing **what** is printed with *how* it is printed.

> print(9) ## a numeric (not an integer, actually. That would be 9L)
[1] 9   ## default print format
> print(formatC(9, width =2, flag = "0")) ## format specification
[1] "09"
> print(formatC(9, width =2, flag = "0"), quote = FALSE) # don't show quotes
[1] 09

See ?formatC and ?print.default for details

-- Bert

On Sun, Sep 11, 2022 at 9:22 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear members,
>                              I came across this queer thing during my analysis:
> > as.integer("09098")
> 9098
>
> Any idea on how to retain the "0"?
>
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Sun Sep 11 21:00:54 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sun, 11 Sep 2022 19:00:54 +0000
Subject: [R] inadequacy in as.integer....
In-Reply-To: <PU4P216MB156867ACC12961420434D895C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <BN6PR2201MB1553509A3A19297DD867CE8BCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <PU4P216MB156867ACC12961420434D895C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <BN6PR2201MB1553DF9C513F40F09240984DCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>

Can you tell us why you want to do this? Is there something special about 09098 versus 9098 or 0000009098? In any mathematical operation these are all the same number.

Tim

From: akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Sunday, September 11, 2022 2:58 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>; R help Mailing list <r-help at r-project.org>
Subject: Re: inadequacy in as.integer....

[External Email]
Dear Tim,
                  So there is no way to coerce "09098" to 09098?

Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>>
Sent: Monday, September 12, 2022 12:07 AM
To: akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>; R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: RE: inadequacy in as.integer....

Keep as character.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of akshay kulkarni
Sent: Sunday, September 11, 2022 12:22 PM
To: R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: [R] inadequacy in as.integer....

[External Email]

Dear members,
                             I came across this queer thing during my analysis:
> as.integer("09098")
9098

Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=%2FV4NoU8j%2F9KIYX5ExaY93fwQf%2FPqx1kisbt87Mj9%2F7Q%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C6a2c6801bcbf4bf0e6f708da94278655%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985194721617829%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=IimcrUXv0HF%2F2FyD5S699dgqmGAZe5%2FKcRqHTiHDyvE%3D&reserved=0>
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=BA0o8oGcR%2FFBX9Vth5DuitlZnTGG7rNDmFga3ixZ9j4%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C6a2c6801bcbf4bf0e6f708da94278655%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985194721617829%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HQmvbdpGZj4Mt64EwTre5pdzE9xHJ8mdWHN8c%2Fye3CY%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Sep 11 21:06:13 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Sep 2022 19:06:13 +0000
Subject: [R] inadequacy in as.integer....
In-Reply-To: <CAPcHnpQX3EuRWAAa3q+hqpOXwsm0TY78haSCCLwm0zY2mrq=YQ@mail.gmail.com>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <BN6PR2201MB1553509A3A19297DD867CE8BCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <PU4P216MB156867ACC12961420434D895C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpQX3EuRWAAa3q+hqpOXwsm0TY78haSCCLwm0zY2mrq=YQ@mail.gmail.com>
Message-ID: <PU4P216MB1568372E067F329EE3B770DCC8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Andrew,
                         THanks for the reply. I am using a integer in a switch statement which has leading zeroes. So I have to coerce it to a character with leading zeroes to compare it. But I think now that I can make do with just the character value. Thanks anyways...

Yours sincerely
AKSHAY M KULKARNI
________________________________
From: Andrew Simmons <akwsimmo at gmail.com>
Sent: Monday, September 12, 2022 12:30 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: Ebert,Timothy Aaron <tebert at ufl.edu>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] inadequacy in as.integer....

What you're asking for doesn't make sense: 9098 and 09098 are the same

9098L == 09098L

If you mean specifically while printing, you could use sprintf:

cat(sprintf("%05d", 9098))

On Sun., Sep. 11, 2022, 14:58 akshay kulkarni, <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Tim,
                  So there is no way to coerce "09098" to 09098?

Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>>
Sent: Monday, September 12, 2022 12:07 AM
To: akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>; R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: RE: inadequacy in as.integer....

Keep as character.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of akshay kulkarni
Sent: Sunday, September 11, 2022 12:22 PM
To: R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: [R] inadequacy in as.integer....

[External Email]

Dear members,
                             I came across this queer thing during my analysis:
> as.integer("09098")


Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=%2FV4NoU8j%2F9KIYX5ExaY93fwQf%2FPqx1kisbt87Mj9%2F7Q%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=BA0o8oGcR%2FFBX9Vth5DuitlZnTGG7rNDmFga3ixZ9j4%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Sep 11 21:17:29 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 11 Sep 2022 19:17:29 +0000
Subject: [R] inadequacy in as.integer....
In-Reply-To: <BN6PR2201MB1553DF9C513F40F09240984DCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <BN6PR2201MB1553509A3A19297DD867CE8BCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <PU4P216MB156867ACC12961420434D895C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <BN6PR2201MB1553DF9C513F40F09240984DCF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <PU4P216MB1568698A981BDA0D3DBD3706C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Tim,
                  I am using the result of cumsum(), which has leading zeroes, (like 0 0 1 1 2 2), coerce it to a character vector, collapse it, and then coerce it back to an integer to compare it in a switch statement. But now I got it. I can just use the collapsed character value...THanks anyways...

Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Ebert,Timothy Aaron <tebert at ufl.edu>
Sent: Monday, September 12, 2022 12:30 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: RE: inadequacy in as.integer....


Can you tell us why you want to do this? Is there something special about 09098 versus 9098 or 0000009098? In any mathematical operation these are all the same number.



Tim



From: akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Sunday, September 11, 2022 2:58 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>; R help Mailing list <r-help at r-project.org>
Subject: Re: inadequacy in as.integer....



[External Email]

Dear Tim,

                  So there is no way to coerce "09098" to 09098?



Yours sincerely,

AKSHAY M KULKARNI

________________________________

From: Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>>
Sent: Monday, September 12, 2022 12:07 AM
To: akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>; R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: RE: inadequacy in as.integer....



Keep as character.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of akshay kulkarni
Sent: Sunday, September 11, 2022 12:22 PM
To: R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: [R] inadequacy in as.integer....

[External Email]

Dear members,
                             I came across this queer thing during my analysis:
> as.integer("09098")


Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=%2FV4NoU8j%2F9KIYX5ExaY93fwQf%2FPqx1kisbt87Mj9%2F7Q%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C6a2c6801bcbf4bf0e6f708da94278655%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985194721617829%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=IimcrUXv0HF%2F2FyD5S699dgqmGAZe5%2FKcRqHTiHDyvE%3D&reserved=0>
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C70a6ae074d1e42c17e9108da9411d934%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985101625267716%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=BA0o8oGcR%2FFBX9Vth5DuitlZnTGG7rNDmFga3ixZ9j4%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C6a2c6801bcbf4bf0e6f708da94278655%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985194721617829%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HQmvbdpGZj4Mt64EwTre5pdzE9xHJ8mdWHN8c%2Fye3CY%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Sun Sep 11 21:42:54 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sun, 11 Sep 2022 15:42:54 -0400
Subject: [R] inadequacy in as.integer....
In-Reply-To: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <003d01d8c616$b012ec80$1038c580$@gmail.com>

As others pointed out, if you call as.integer()  it converts a string, if
possible, to a particular storage method for an integer. Leading zeroes
either are ignored or in some cases may mean the number is in hexadecimal as
in "0x400" 

If you really must keep track of leading zeroes then keep the string
representation around and use that OR use a plan B. The storage
representation of an integer as 32 bits or 64 bits, or of a float/double,
does not retain any info on leading zeroes.

You can for example pass a string like "0123" or "000000123" and count the
leading zeroes in one of many ways. In the examples above, these are 1 and 6
leading zeroes respectively. There are many ways to count them from the
string version and save that number in a variable. 

Latter, if you need to include the leading zeroes then you can put them back
and combine it. As one of many ways, you can match a regular expression
against "000000123" that matches any initial run of zero or more zeroes
(saving the result) and then matches the remainder of the string, again
perhaps remembering it. This method would now store not the number of zeroes
but a string like "000000" alongside another string for "123".

If some method like that is useful, it can of course be instantiated as some
kind of R object (S3, S4, etc.) that can accept an arbitrary string version
of a number and break it into addressable parts including string and numeric
representations and when printed, recombine them and so on.

But the bottom line is that R is not planning on meeting your specific need.
There may be a package out there that has similar needs BUT that does not
mean everything else will work with such an implementation. Mostly integers
are integers with no leading zeroes.

Avi


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Sunday, September 11, 2022 12:22 PM
To: R help Mailing list <r-help at r-project.org>
Subject: [R] inadequacy in as.integer....

Dear members,
                             I came across this queer thing during my
analysis:
> as.integer("09098")
9098

Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Sep 12 05:50:01 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 11 Sep 2022 20:50:01 -0700
Subject: [R] Interpreting fa.diagram from package psych
In-Reply-To: <BN6PR2201MB1553A2EE2F51DD70D734A727CF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>
 <2e402663-9062-ac68-295f-0b7e1d61e57e@comcast.net>
 <CAMk+s2SZOAOZEKsgmBCWqQV8VJ_6y2g0dmYm0bxNPFNQ5YFfjQ@mail.gmail.com>
 <BN6PR2201MB1553A2EE2F51DD70D734A727CF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <f46aefbb-0f34-7a36-26f0-000ab5027cc8@comcast.net>


On 9/11/22 07:17, Ebert,Timothy Aaron wrote:
> It is a bad graphic as the legend that should explain the color coding is missing. The next option is to copy the data and code and see if you can reproduce the figure. You can then play with the code and read a bit about the procedures to figure out what is going on. It should not be too hard. My guess is that there is some additional variable with three states that is being used. If this were the iris data set I would guess it was the three species: setosa, versicolor, and virginica.

Pretty sure that guess is incorrect.

I'm not sure there should be a legend. The colors just indicate group 
membership derived from a mathematical process that has attempted to 
separate case into distinct groups that maximize the correlations within 
individual groupings. And therefore maximizes the distance separating 
the groups. The number of groups is specified in the function call. You 
should go to the earlier results and see if you can construct the 
groupings to maximize internal correlations. Psychometricians do this 
when they don't really have a theoretical basis for doing classification 
and are asking the data do it for them. If they are doing this on a 
questionnaire dataset, they often go back to the specific 
questions/answer pairings within groupings and try to assign meaning to 
them.? They then build post-hoc explanations and often do further 
studies to see if they can replicate the results and achieve some sort 
of stable synthetic construct.? It's a rather theory-free strategy and 
so trying to assign labels automatically would be difficult.

-- 

David

> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> Sent: Sunday, September 11, 2022 3:02 AM
> To: David Winsemius <dwinsemius at comcast.net>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] Interpreting fa.diagram from package psych
>
> [External Email]
>
> Sorry, the file was automatically downloaded and opened with the browser instead of pointing to the webpage.
> Here is a better link:
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2FpsychTools%2Fvignettes%2Ffactor.pdf&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9d0e49ff1aab4d5db2d308da93c3ac01%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637984765998607455%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=2OxukCvxcx9xFJQiAInt2ulqC23qiBjQRPU128O%2Bjn8%3D&amp;reserved=0
> The figure is on page 22.
> The question is: The dots have different colors; how do I know what they represent?
> Is there a way to show an auto-legend?
> Thank you
>
> On Sat, Sep 10, 2022 at 11:33 PM David Winsemius <dwinsemius at comcast.net> wrote:
>>
>> On 9/10/22 14:08, Luigi Marongiu wrote:
>>> Hello,
>>> I have plotted data from exploratory factor analysis, and I got a
>>> graph similar to FIGURE 11 (PAGE 36) of this link
>>> file:///home/gigiux/Downloads/An_overview_of_the_psych_package.pdf
>> This appears to be a link you a file on your personal device rather
>> than an attachment.
>>> How do I interpret the figure? In particular, how do I know what the
>>> colors represent?
>>> Thank you
>
> --
> Best regards,
> Luigi
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9d0e49ff1aab4d5db2d308da93c3ac01%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637984765998607455%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KfsnfNKp3klZMJcvvuPD4gqI6fffn95FkpaPm8KyEnA%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C9d0e49ff1aab4d5db2d308da93c3ac01%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637984765998607455%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=7CZst6A76lzHADI4iRNJ%2FVI2%2FMOGLCAVnTL8aRLNjVA%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Sep 12 13:42:14 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 12 Sep 2022 11:42:14 +0000
Subject: [R] Interpreting fa.diagram from package psych
In-Reply-To: <f46aefbb-0f34-7a36-26f0-000ab5027cc8@comcast.net>
References: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>
 <2e402663-9062-ac68-295f-0b7e1d61e57e@comcast.net>
 <CAMk+s2SZOAOZEKsgmBCWqQV8VJ_6y2g0dmYm0bxNPFNQ5YFfjQ@mail.gmail.com>
 <BN6PR2201MB1553A2EE2F51DD70D734A727CF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <f46aefbb-0f34-7a36-26f0-000ab5027cc8@comcast.net>
Message-ID: <BN6PR2201MB1553CF4518F61C800B779691CF449@BN6PR2201MB1553.namprd22.prod.outlook.com>

Ok, in looking at the code that makes more sense. The code specifies three groups, so there will be three colors. As the groups do not have meaning (hopefully supplied by the user at a later date) there is no legend. They are there to help the user see overlap between groups (none in this case).

-----Original Message-----
From: David Winsemius <dwinsemius at comcast.net> 
Sent: Sunday, September 11, 2022 11:50 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>; Luigi Marongiu <marongiu.luigi at gmail.com>
Cc: r-help <r-help at r-project.org>
Subject: Re: [R] Interpreting fa.diagram from package psych

[External Email]

On 9/11/22 07:17, Ebert,Timothy Aaron wrote:
> It is a bad graphic as the legend that should explain the color coding is missing. The next option is to copy the data and code and see if you can reproduce the figure. You can then play with the code and read a bit about the procedures to figure out what is going on. It should not be too hard. My guess is that there is some additional variable with three states that is being used. If this were the iris data set I would guess it was the three species: setosa, versicolor, and virginica.

Pretty sure that guess is incorrect.

I'm not sure there should be a legend. The colors just indicate group membership derived from a mathematical process that has attempted to separate case into distinct groups that maximize the correlations within individual groupings. And therefore maximizes the distance separating the groups. The number of groups is specified in the function call. You should go to the earlier results and see if you can construct the groupings to maximize internal correlations. Psychometricians do this when they don't really have a theoretical basis for doing classification and are asking the data do it for them. If they are doing this on a questionnaire dataset, they often go back to the specific questions/answer pairings within groupings and try to assign meaning to them.  They then build post-hoc explanations and often do further studies to see if they can replicate the results and achieve some sort of stable synthetic construct.  It's a rather theory-free strategy and so trying to assign labels automatically would be difficult.

--

David

> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi 
> Marongiu
> Sent: Sunday, September 11, 2022 3:02 AM
> To: David Winsemius <dwinsemius at comcast.net>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] Interpreting fa.diagram from package psych
>
> [External Email]
>
> Sorry, the file was automatically downloaded and opened with the browser instead of pointing to the webpage.
> Here is a better link:
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran
> .r-project.org%2Fweb%2Fpackages%2FpsychTools%2Fvignettes%2Ffactor.pdf&
> amp;data=05%7C01%7Ctebert%40ufl.edu%7C1dcd24dd7d3f415768d308da9471f65d
> %7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985514593519914%7CUnk
> nown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWw
> iLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=lzFXWWfT0dWdXegsbLDuh5RcdW79
> xJXTsN%2Bkj%2FuMrxo%3D&amp;reserved=0
> The figure is on page 22.
> The question is: The dots have different colors; how do I know what they represent?
> Is there a way to show an auto-legend?
> Thank you
>
> On Sat, Sep 10, 2022 at 11:33 PM David Winsemius <dwinsemius at comcast.net> wrote:
>>
>> On 9/10/22 14:08, Luigi Marongiu wrote:
>>> Hello,
>>> I have plotted data from exploratory factor analysis, and I got a 
>>> graph similar to FIGURE 11 (PAGE 36) of this link 
>>> file:///home/gigiux/Downloads/An_overview_of_the_psych_package.pdf
>> This appears to be a link you a file on your personal device rather 
>> than an attachment.
>>> How do I interpret the figure? In particular, how do I know what the 
>>> colors represent?
>>> Thank you
>
> --
> Best regards,
> Luigi
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7C1dcd24dd7d3f415768d308da9471f65d%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C637985514593519914%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=hZSv1rtzkhlgMUvJO6jmHN1IIUDsVIa8PVeAo8KE0%2Fw%3D&amp;reserv
> ed=0 PLEASE do read the posting guide 
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7C1dcd24dd7d3f415768d308da9471f65d%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C637985514593519914%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=oxdhuTBv3NWlhalSpYYVYa6zIfpoaqLgUzRfCXxc%2FbQ%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Sep 12 15:31:59 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 12 Sep 2022 15:31:59 +0200
Subject: [R] Interpreting fa.diagram from package psych
In-Reply-To: <BN6PR2201MB1553CF4518F61C800B779691CF449@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>
 <2e402663-9062-ac68-295f-0b7e1d61e57e@comcast.net>
 <CAMk+s2SZOAOZEKsgmBCWqQV8VJ_6y2g0dmYm0bxNPFNQ5YFfjQ@mail.gmail.com>
 <BN6PR2201MB1553A2EE2F51DD70D734A727CF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <f46aefbb-0f34-7a36-26f0-000ab5027cc8@comcast.net>
 <BN6PR2201MB1553CF4518F61C800B779691CF449@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CAMk+s2RLvUKeAoisV2AAGVqrCmLCxH+bvLg4Lv5ZQnboN+pXvg@mail.gmail.com>

I see, so the plot in itself is rather NOT informative -- I need to
make one myself after knowing what groups are there... Fair enough.
Thank you.

On Mon, Sep 12, 2022 at 1:42 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
> Ok, in looking at the code that makes more sense. The code specifies three groups, so there will be three colors. As the groups do not have meaning (hopefully supplied by the user at a later date) there is no legend. They are there to help the user see overlap between groups (none in this case).
>
> -----Original Message-----
> From: David Winsemius <dwinsemius at comcast.net>
> Sent: Sunday, September 11, 2022 11:50 PM
> To: Ebert,Timothy Aaron <tebert at ufl.edu>; Luigi Marongiu <marongiu.luigi at gmail.com>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] Interpreting fa.diagram from package psych
>
> [External Email]
>
> On 9/11/22 07:17, Ebert,Timothy Aaron wrote:
> > It is a bad graphic as the legend that should explain the color coding is missing. The next option is to copy the data and code and see if you can reproduce the figure. You can then play with the code and read a bit about the procedures to figure out what is going on. It should not be too hard. My guess is that there is some additional variable with three states that is being used. If this were the iris data set I would guess it was the three species: setosa, versicolor, and virginica.
>
> Pretty sure that guess is incorrect.
>
> I'm not sure there should be a legend. The colors just indicate group membership derived from a mathematical process that has attempted to separate case into distinct groups that maximize the correlations within individual groupings. And therefore maximizes the distance separating the groups. The number of groups is specified in the function call. You should go to the earlier results and see if you can construct the groupings to maximize internal correlations. Psychometricians do this when they don't really have a theoretical basis for doing classification and are asking the data do it for them. If they are doing this on a questionnaire dataset, they often go back to the specific questions/answer pairings within groupings and try to assign meaning to them.  They then build post-hoc explanations and often do further studies to see if they can replicate the results and achieve some sort of stable synthetic construct.  It's a rather theory-free strategy and so trying to assign labels automatically would be difficult.
>
> --
>
> David
>
> > Tim
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi
> > Marongiu
> > Sent: Sunday, September 11, 2022 3:02 AM
> > To: David Winsemius <dwinsemius at comcast.net>
> > Cc: r-help <r-help at r-project.org>
> > Subject: Re: [R] Interpreting fa.diagram from package psych
> >
> > [External Email]
> >
> > Sorry, the file was automatically downloaded and opened with the browser instead of pointing to the webpage.
> > Here is a better link:
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran
> > .r-project.org%2Fweb%2Fpackages%2FpsychTools%2Fvignettes%2Ffactor.pdf&
> > amp;data=05%7C01%7Ctebert%40ufl.edu%7C1dcd24dd7d3f415768d308da9471f65d
> > %7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985514593519914%7CUnk
> > nown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWw
> > iLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=lzFXWWfT0dWdXegsbLDuh5RcdW79
> > xJXTsN%2Bkj%2FuMrxo%3D&amp;reserved=0
> > The figure is on page 22.
> > The question is: The dots have different colors; how do I know what they represent?
> > Is there a way to show an auto-legend?
> > Thank you
> >
> > On Sat, Sep 10, 2022 at 11:33 PM David Winsemius <dwinsemius at comcast.net> wrote:
> >>
> >> On 9/10/22 14:08, Luigi Marongiu wrote:
> >>> Hello,
> >>> I have plotted data from exploratory factor analysis, and I got a
> >>> graph similar to FIGURE 11 (PAGE 36) of this link
> >>> file:///home/gigiux/Downloads/An_overview_of_the_psych_package.pdf
> >> This appears to be a link you a file on your personal device rather
> >> than an attachment.
> >>> How do I interpret the figure? In particular, how do I know what the
> >>> colors represent?
> >>> Thank you
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> > .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> > .edu%7C1dcd24dd7d3f415768d308da9471f65d%7C0d4da0f84a314d76ace60a62331e
> > 1b84%7C0%7C0%7C637985514593519914%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> > LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> > &amp;sdata=hZSv1rtzkhlgMUvJO6jmHN1IIUDsVIa8PVeAo8KE0%2Fw%3D&amp;reserv
> > ed=0 PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> > -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> > 7C1dcd24dd7d3f415768d308da9471f65d%7C0d4da0f84a314d76ace60a62331e1b84%
> > 7C0%7C0%7C637985514593519914%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> > DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> > sdata=oxdhuTBv3NWlhalSpYYVYa6zIfpoaqLgUzRfCXxc%2FbQ%3D&amp;reserved=0
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From tebert @end|ng |rom u||@edu  Mon Sep 12 16:27:47 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 12 Sep 2022 14:27:47 +0000
Subject: [R] Interpreting fa.diagram from package psych
In-Reply-To: <CAMk+s2RLvUKeAoisV2AAGVqrCmLCxH+bvLg4Lv5ZQnboN+pXvg@mail.gmail.com>
References: <CAMk+s2TmFTStRBekL27iG+5TXUN3_ij5iFdCSBqPyr3M9EYKTA@mail.gmail.com>
 <2e402663-9062-ac68-295f-0b7e1d61e57e@comcast.net>
 <CAMk+s2SZOAOZEKsgmBCWqQV8VJ_6y2g0dmYm0bxNPFNQ5YFfjQ@mail.gmail.com>
 <BN6PR2201MB1553A2EE2F51DD70D734A727CF459@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <f46aefbb-0f34-7a36-26f0-000ab5027cc8@comcast.net>
 <BN6PR2201MB1553CF4518F61C800B779691CF449@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CAMk+s2RLvUKeAoisV2AAGVqrCmLCxH+bvLg4Lv5ZQnboN+pXvg@mail.gmail.com>
Message-ID: <BN6PR2201MB155360B6EB4AD0C874591894CF449@BN6PR2201MB1553.namprd22.prod.outlook.com>

Not quite. What you see in the plot are three distinct groups. The outcome in your application may differ: the groups might be closer together with less clear group boundaries. If the method is successful, you should always ask why? What is the data trying to tell me, and with that information can I see the new pattern in the real world? Here is an example with less clear group boundaries: https://www.qualtrics.com/experience-management/research/factor-analysis/

Also, this is unsupervised learning. At the start of factor analysis you will not know that there are three groups. If you do know and the goal is to predict membership in a group then maybe something like discriminant analysis would be a better approach.

Tim

-----Original Message-----
From: Luigi Marongiu <marongiu.luigi at gmail.com> 
Sent: Monday, September 12, 2022 9:32 AM
To: Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: David Winsemius <dwinsemius at comcast.net>; r-help <r-help at r-project.org>
Subject: Re: [R] Interpreting fa.diagram from package psych

[External Email]

I see, so the plot in itself is rather NOT informative -- I need to make one myself after knowing what groups are there... Fair enough.
Thank you.

On Mon, Sep 12, 2022 at 1:42 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
> Ok, in looking at the code that makes more sense. The code specifies three groups, so there will be three colors. As the groups do not have meaning (hopefully supplied by the user at a later date) there is no legend. They are there to help the user see overlap between groups (none in this case).
>
> -----Original Message-----
> From: David Winsemius <dwinsemius at comcast.net>
> Sent: Sunday, September 11, 2022 11:50 PM
> To: Ebert,Timothy Aaron <tebert at ufl.edu>; Luigi Marongiu 
> <marongiu.luigi at gmail.com>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] Interpreting fa.diagram from package psych
>
> [External Email]
>
> On 9/11/22 07:17, Ebert,Timothy Aaron wrote:
> > It is a bad graphic as the legend that should explain the color coding is missing. The next option is to copy the data and code and see if you can reproduce the figure. You can then play with the code and read a bit about the procedures to figure out what is going on. It should not be too hard. My guess is that there is some additional variable with three states that is being used. If this were the iris data set I would guess it was the three species: setosa, versicolor, and virginica.
>
> Pretty sure that guess is incorrect.
>
> I'm not sure there should be a legend. The colors just indicate group membership derived from a mathematical process that has attempted to separate case into distinct groups that maximize the correlations within individual groupings. And therefore maximizes the distance separating the groups. The number of groups is specified in the function call. You should go to the earlier results and see if you can construct the groupings to maximize internal correlations. Psychometricians do this when they don't really have a theoretical basis for doing classification and are asking the data do it for them. If they are doing this on a questionnaire dataset, they often go back to the specific questions/answer pairings within groupings and try to assign meaning to them.  They then build post-hoc explanations and often do further studies to see if they can replicate the results and achieve some sort of stable synthetic construct.  It's a rather theory-free strategy and so trying to assign labels automatically would be difficult.
>
> --
>
> David
>
> > Tim
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi 
> > Marongiu
> > Sent: Sunday, September 11, 2022 3:02 AM
> > To: David Winsemius <dwinsemius at comcast.net>
> > Cc: r-help <r-help at r-project.org>
> > Subject: Re: [R] Interpreting fa.diagram from package psych
> >
> > [External Email]
> >
> > Sorry, the file was automatically downloaded and opened with the browser instead of pointing to the webpage.
> > Here is a better link:
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcr
> > an 
> > .r-project.org%2Fweb%2Fpackages%2FpsychTools%2Fvignettes%2Ffactor.pd
> > f& 
> > amp;data=05%7C01%7Ctebert%40ufl.edu%7C1dcd24dd7d3f415768d308da9471f6
> > 5d 
> > %7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637985514593519914%7CU
> > nk 
> > nown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1ha
> > Ww
> > iLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=lzFXWWfT0dWdXegsbLDuh5RcdW
> > 79
> > xJXTsN%2Bkj%2FuMrxo%3D&amp;reserved=0
> > The figure is on page 22.
> > The question is: The dots have different colors; how do I know what they represent?
> > Is there a way to show an auto-legend?
> > Thank you
> >
> > On Sat, Sep 10, 2022 at 11:33 PM David Winsemius <dwinsemius at comcast.net> wrote:
> >>
> >> On 9/10/22 14:08, Luigi Marongiu wrote:
> >>> Hello,
> >>> I have plotted data from exploratory factor analysis, and I got a 
> >>> graph similar to FIGURE 11 (PAGE 36) of this link 
> >>> file:///home/gigiux/Downloads/An_overview_of_the_psych_package.pdf
> >> This appears to be a link you a file on your personal device rather 
> >> than an attachment.
> >>> How do I interpret the figure? In particular, how do I know what 
> >>> the colors represent?
> >>> Thank you
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at 
> > .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40u
> > fl 
> > .edu%7C1dcd24dd7d3f415768d308da9471f65d%7C0d4da0f84a314d76ace60a6233
> > 1e 
> > 1b84%7C0%7C0%7C637985514593519914%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC
> > 4w 
> > LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> > 7C 
> > &amp;sdata=hZSv1rtzkhlgMUvJO6jmHN1IIUDsVIa8PVeAo8KE0%2Fw%3D&amp;rese
> > rv
> > ed=0 PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww
> > .r%2F&amp;data=05%7C01%7Ctebert%40ufl.edu%7C535999f82365459051cb08da
> > 94c33ea1%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C63798586353119
> > 5176%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJ
> > BTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=EVXIewxffSxBWT
> > S7zIliW%2FsEcVlrdjq%2BqtuD%2FTrFjUY%3D&amp;reserved=0
> > -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.ed
> > u% 
> > 7C1dcd24dd7d3f415768d308da9471f65d%7C0d4da0f84a314d76ace60a62331e1b8
> > 4% 
> > 7C0%7C0%7C637985514593519914%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjA
> > wM 
> > DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&am
> > p;
> > sdata=oxdhuTBv3NWlhalSpYYVYa6zIfpoaqLgUzRfCXxc%2FbQ%3D&amp;reserved=
> > 0 and provide commented, minimal, self-contained, reproducible code.



--
Best regards,
Luigi


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Sep 13 06:58:38 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 13 Sep 2022 06:58:38 +0200
Subject: [R] Gap between plots, how to reduce
Message-ID: <CA+nrPnvVPLxYXLbcJEVwBStNY_WcH1aMY6v0sdR=OU+yJiWc9A@mail.gmail.com>

Hi

There is a gap between plots (white spaces) when I draw the boxplot. I want
to reduce the spaces between the plots so that the boxplot takes a small
space. When I just adjust "boxwex" values, the length of individual plots
increases/decreases but the white spaces is still there.

My code:

RF= c(100,100,100,33.3,100,100)
Ranger= c(66.6, 100, 100, 33.3, 100, 81.8)
SVM= c(81.8, 100, 100, 66.6, 81.8, 81.8)
KNN= c(33.3, 25, 53.8, 25, 11.1, 5.2)
DT= c(100, 100, 100, 25, 100, 100)

mean(DT)

colors = rep("green",6)
at.x <- seq(1,by=.4, length.out = 10)
boxplot(RF,Ranger, SVM, KNN, DT, range = 0, boxwex=0.4,col=colors, names=
c("RF","Ranger", "SVM", "KNN", "DT"),main="Consistent features with 10-fold
vs LOO ")

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Sep 13 07:08:31 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 13 Sep 2022 06:08:31 +0100
Subject: [R] Gap between plots, how to reduce
In-Reply-To: <CA+nrPnvVPLxYXLbcJEVwBStNY_WcH1aMY6v0sdR=OU+yJiWc9A@mail.gmail.com>
References: <CA+nrPnvVPLxYXLbcJEVwBStNY_WcH1aMY6v0sdR=OU+yJiWc9A@mail.gmail.com>
Message-ID: <bc045e5f-0383-034c-8794-359a4b9f9e0c@sapo.pt>

Hello,

I may be wrong but if you do not change boxwex the deafual boxwex=0.8 is 
used and the white space is reduced.
And if you increase the value, for instance to boxwex = 0.9, the white 
space is even smaller.

Is this what you want?

Hope this helps,

Rui Barradas

?s 05:58 de 13/09/2022, Neha gupta escreveu:
> Hi
> 
> There is a gap between plots (white spaces) when I draw the boxplot. I want
> to reduce the spaces between the plots so that the boxplot takes a small
> space. When I just adjust "boxwex" values, the length of individual plots
> increases/decreases but the white spaces is still there.
> 
> My code:
> 
> RF= c(100,100,100,33.3,100,100)
> Ranger= c(66.6, 100, 100, 33.3, 100, 81.8)
> SVM= c(81.8, 100, 100, 66.6, 81.8, 81.8)
> KNN= c(33.3, 25, 53.8, 25, 11.1, 5.2)
> DT= c(100, 100, 100, 25, 100, 100)
> 
> mean(DT)
> 
> colors = rep("green",6)
> at.x <- seq(1,by=.4, length.out = 10)
> boxplot(RF,Ranger, SVM, KNN, DT, range = 0, boxwex=0.4,col=colors, names=
> c("RF","Ranger", "SVM", "KNN", "DT"),main="Consistent features with 10-fold
> vs LOO ")
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Sep 13 07:15:55 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 13 Sep 2022 07:15:55 +0200
Subject: [R] Gap between plots, how to reduce
In-Reply-To: <bc045e5f-0383-034c-8794-359a4b9f9e0c@sapo.pt>
References: <CA+nrPnvVPLxYXLbcJEVwBStNY_WcH1aMY6v0sdR=OU+yJiWc9A@mail.gmail.com>
 <bc045e5f-0383-034c-8794-359a4b9f9e0c@sapo.pt>
Message-ID: <CA+nrPnus31DzdY98Ujc9vebgC0xj2zWuHY-g+pOWCeMkzNZJrA@mail.gmail.com>

Thank you for your reply.

Actually when I adjust boxwex (up to 0.8), it increases the width of the
plot. What I want is to reduce the size of the container (where all the
plots are displayed) so that it takes a small space on the paper.

Best regards

On Tue, Sep 13, 2022 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> I may be wrong but if you do not change boxwex the deafual boxwex=0.8 is
> used and the white space is reduced.
> And if you increase the value, for instance to boxwex = 0.9, the white
> space is even smaller.
>
> Is this what you want?
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 05:58 de 13/09/2022, Neha gupta escreveu:
> > Hi
> >
> > There is a gap between plots (white spaces) when I draw the boxplot. I
> want
> > to reduce the spaces between the plots so that the boxplot takes a small
> > space. When I just adjust "boxwex" values, the length of individual plots
> > increases/decreases but the white spaces is still there.
> >
> > My code:
> >
> > RF= c(100,100,100,33.3,100,100)
> > Ranger= c(66.6, 100, 100, 33.3, 100, 81.8)
> > SVM= c(81.8, 100, 100, 66.6, 81.8, 81.8)
> > KNN= c(33.3, 25, 53.8, 25, 11.1, 5.2)
> > DT= c(100, 100, 100, 25, 100, 100)
> >
> > mean(DT)
> >
> > colors = rep("green",6)
> > at.x <- seq(1,by=.4, length.out = 10)
> > boxplot(RF,Ranger, SVM, KNN, DT, range = 0, boxwex=0.4,col=colors, names=
> > c("RF","Ranger", "SVM", "KNN", "DT"),main="Consistent features with
> 10-fold
> > vs LOO ")
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Sep 13 07:25:26 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 13 Sep 2022 06:25:26 +0100
Subject: [R] Gap between plots, how to reduce
In-Reply-To: <CA+nrPnus31DzdY98Ujc9vebgC0xj2zWuHY-g+pOWCeMkzNZJrA@mail.gmail.com>
References: <CA+nrPnvVPLxYXLbcJEVwBStNY_WcH1aMY6v0sdR=OU+yJiWc9A@mail.gmail.com>
 <bc045e5f-0383-034c-8794-359a4b9f9e0c@sapo.pt>
 <CA+nrPnus31DzdY98Ujc9vebgC0xj2zWuHY-g+pOWCeMkzNZJrA@mail.gmail.com>
Message-ID: <9a541634-d26e-9cfb-a5a2-524fd487bbeb@sapo.pt>

Hello,

OK, if you force the plot area to be square, it will become smaller.
Below, I do not change boxwex.


old_par <- par(pty = "s")  # plot type = square

colors = rep("green",6)
at.x <- seq(1,by=.4, length.out = 10)
boxplot(RF,Ranger, SVM, KNN, DT,
         range = 0,
         col = colors,
         names = c("RF","Ranger", "SVM", "KNN", "DT"),
         main = "Consistent features with 10-fold vs LOO ")

par(old_par)    # put the default back


Hope this helps,

Rui Barradas

?s 06:15 de 13/09/2022, Neha gupta escreveu:
> Thank you for your reply.
> 
> Actually when I adjust boxwex (up to 0.8), it increases the width of the
> plot. What I want is to reduce the size of the container (where all the
> plots are displayed) so that it takes a small space on the paper.
> 
> Best regards
> 
> On Tue, Sep 13, 2022 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
>> Hello,
>>
>> I may be wrong but if you do not change boxwex the deafual boxwex=0.8 is
>> used and the white space is reduced.
>> And if you increase the value, for instance to boxwex = 0.9, the white
>> space is even smaller.
>>
>> Is this what you want?
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 05:58 de 13/09/2022, Neha gupta escreveu:
>>> Hi
>>>
>>> There is a gap between plots (white spaces) when I draw the boxplot. I
>> want
>>> to reduce the spaces between the plots so that the boxplot takes a small
>>> space. When I just adjust "boxwex" values, the length of individual plots
>>> increases/decreases but the white spaces is still there.
>>>
>>> My code:
>>>
>>> RF= c(100,100,100,33.3,100,100)
>>> Ranger= c(66.6, 100, 100, 33.3, 100, 81.8)
>>> SVM= c(81.8, 100, 100, 66.6, 81.8, 81.8)
>>> KNN= c(33.3, 25, 53.8, 25, 11.1, 5.2)
>>> DT= c(100, 100, 100, 25, 100, 100)
>>>
>>> mean(DT)
>>>
>>> colors = rep("green",6)
>>> at.x <- seq(1,by=.4, length.out = 10)
>>> boxplot(RF,Ranger, SVM, KNN, DT, range = 0, boxwex=0.4,col=colors, names=
>>> c("RF","Ranger", "SVM", "KNN", "DT"),main="Consistent features with
>> 10-fold
>>> vs LOO ")
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Sep 13 07:56:18 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 13 Sep 2022 07:56:18 +0200
Subject: [R] Gap between plots, how to reduce
In-Reply-To: <9a541634-d26e-9cfb-a5a2-524fd487bbeb@sapo.pt>
References: <CA+nrPnvVPLxYXLbcJEVwBStNY_WcH1aMY6v0sdR=OU+yJiWc9A@mail.gmail.com>
 <bc045e5f-0383-034c-8794-359a4b9f9e0c@sapo.pt>
 <CA+nrPnus31DzdY98Ujc9vebgC0xj2zWuHY-g+pOWCeMkzNZJrA@mail.gmail.com>
 <9a541634-d26e-9cfb-a5a2-524fd487bbeb@sapo.pt>
Message-ID: <CA+nrPnuNyCieQp2JPXW2xMwRGWUWg8oP8rwuL69RYOY7MvziWQ@mail.gmail.com>

@Rui Barradas <ruipbarradas at sapo.pt> , thank you so much. It was really
helpful.

Best regards

On Tue, Sep 13, 2022 at 7:25 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> OK, if you force the plot area to be square, it will become smaller.
> Below, I do not change boxwex.
>
>
> old_par <- par(pty = "s")  # plot type = square
>
> colors = rep("green",6)
> at.x <- seq(1,by=.4, length.out = 10)
> boxplot(RF,Ranger, SVM, KNN, DT,
>          range = 0,
>          col = colors,
>          names = c("RF","Ranger", "SVM", "KNN", "DT"),
>          main = "Consistent features with 10-fold vs LOO ")
>
> par(old_par)    # put the default back
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 06:15 de 13/09/2022, Neha gupta escreveu:
> > Thank you for your reply.
> >
> > Actually when I adjust boxwex (up to 0.8), it increases the width of the
> > plot. What I want is to reduce the size of the container (where all the
> > plots are displayed) so that it takes a small space on the paper.
> >
> > Best regards
> >
> > On Tue, Sep 13, 2022 at 7:08 AM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >
> >> Hello,
> >>
> >> I may be wrong but if you do not change boxwex the deafual boxwex=0.8 is
> >> used and the white space is reduced.
> >> And if you increase the value, for instance to boxwex = 0.9, the white
> >> space is even smaller.
> >>
> >> Is this what you want?
> >>
> >> Hope this helps,
> >>
> >> Rui Barradas
> >>
> >> ?s 05:58 de 13/09/2022, Neha gupta escreveu:
> >>> Hi
> >>>
> >>> There is a gap between plots (white spaces) when I draw the boxplot. I
> >> want
> >>> to reduce the spaces between the plots so that the boxplot takes a
> small
> >>> space. When I just adjust "boxwex" values, the length of individual
> plots
> >>> increases/decreases but the white spaces is still there.
> >>>
> >>> My code:
> >>>
> >>> RF= c(100,100,100,33.3,100,100)
> >>> Ranger= c(66.6, 100, 100, 33.3, 100, 81.8)
> >>> SVM= c(81.8, 100, 100, 66.6, 81.8, 81.8)
> >>> KNN= c(33.3, 25, 53.8, 25, 11.1, 5.2)
> >>> DT= c(100, 100, 100, 25, 100, 100)
> >>>
> >>> mean(DT)
> >>>
> >>> colors = rep("green",6)
> >>> at.x <- seq(1,by=.4, length.out = 10)
> >>> boxplot(RF,Ranger, SVM, KNN, DT, range = 0, boxwex=0.4,col=colors,
> names=
> >>> c("RF","Ranger", "SVM", "KNN", "DT"),main="Consistent features with
> >> 10-fold
> >>> vs LOO ")
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Sep 13 09:35:02 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 13 Sep 2022 07:35:02 +0000
Subject: [R] inadequacy in as.integer....
In-Reply-To: <003d01d8c616$b012ec80$1038c580$@gmail.com>
References: <PU4P216MB156891A37BFB8C82597CEE26C8459@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <003d01d8c616$b012ec80$1038c580$@gmail.com>
Message-ID: <PU4P216MB15686276926CB98C83D894EEC8479@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Avi,
               Thanks for the comprehensive reply...

Yours sincerley,
AKSHAY M KULKARNI
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Monday, September 12, 2022 1:12 AM
To: 'R help Mailing list' <r-help at r-project.org>
Subject: Re: [R] inadequacy in as.integer....

As others pointed out, if you call as.integer()  it converts a string, if
possible, to a particular storage method for an integer. Leading zeroes
either are ignored or in some cases may mean the number is in hexadecimal as
in "0x400"

If you really must keep track of leading zeroes then keep the string
representation around and use that OR use a plan B. The storage
representation of an integer as 32 bits or 64 bits, or of a float/double,
does not retain any info on leading zeroes.

You can for example pass a string like "0123" or "000000123" and count the
leading zeroes in one of many ways. In the examples above, these are 1 and 6
leading zeroes respectively. There are many ways to count them from the
string version and save that number in a variable.

Latter, if you need to include the leading zeroes then you can put them back
and combine it. As one of many ways, you can match a regular expression
against "000000123" that matches any initial run of zero or more zeroes
(saving the result) and then matches the remainder of the string, again
perhaps remembering it. This method would now store not the number of zeroes
but a string like "000000" alongside another string for "123".

If some method like that is useful, it can of course be instantiated as some
kind of R object (S3, S4, etc.) that can accept an arbitrary string version
of a number and break it into addressable parts including string and numeric
representations and when printed, recombine them and so on.

But the bottom line is that R is not planning on meeting your specific need.
There may be a package out there that has similar needs BUT that does not
mean everything else will work with such an implementation. Mostly integers
are integers with no leading zeroes.

Avi


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Sunday, September 11, 2022 12:22 PM
To: R help Mailing list <r-help at r-project.org>
Subject: [R] inadequacy in as.integer....

Dear members,
                             I came across this queer thing during my
analysis:
> as.integer("09098")


Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From JH@rm@e @end|ng |rom roku@com  Tue Sep 13 16:54:57 2022
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Tue, 13 Sep 2022 14:54:57 +0000
Subject: [R] inadequacy in as.integer....
In-Reply-To: <mailman.367704.1.1663063201.53480.r-help@r-project.org>
References: <mailman.367704.1.1663063201.53480.r-help@r-project.org>
Message-ID: <MW4PR01MB6465A04A1333EE2D3F8ABF3CDC479@MW4PR01MB6465.prod.exchangelabs.com>

Akshay Kulkarni makes an interesting point, and R supports a further step. If you really want something that supports integer computation but retains the string information then you can shoehorn the latter into an attribute.

x <- as.integer(s) # or some computation that handles octal & hexadecimal
attr(x,?string?) <- s

Now you can compute 2L*x or whatever, but the string travels with x, so it?s easier to recover than if you put it in a separate variable. You?ll have to check the rules for when the result of a computation acquires the attributes of an input.

Regards,
Jorgen.


------------------------------

Message: 9
Date: Tue, 13 Sep 2022 07:35:02 +0000
From: akshay kulkarni <akshay_e4 at hotmail.com>
To: "avi.e.gross at gmail.com" <avi.e.gross at gmail.com>, "'R help Mailing
        list'" <r-help at r-project.org>
Subject: Re: [R] inadequacy in as.integer....
Message-ID:
        <PU4P216MB15686276926CB98C83D894EEC8479 at PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Content-Type: text/plain; charset="utf-8"

Dear Avi,
               Thanks for the comprehensive reply...

Yours sincerley,
AKSHAY M KULKARNI
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Monday, September 12, 2022 1:12 AM
To: 'R help Mailing list' <r-help at r-project.org>
Subject: Re: [R] inadequacy in as.integer....

As others pointed out, if you call as.integer()  it converts a string, if
possible, to a particular storage method for an integer. Leading zeroes
either are ignored or in some cases may mean the number is in hexadecimal as
in "0x400"

If you really must keep track of leading zeroes then keep the string
representation around and use that OR use a plan B. The storage
representation of an integer as 32 bits or 64 bits, or of a float/double,
does not retain any info on leading zeroes.

You can for example pass a string like "0123" or "000000123" and count the
leading zeroes in one of many ways. In the examples above, these are 1 and 6
leading zeroes respectively. There are many ways to count them from the
string version and save that number in a variable.

Latter, if you need to include the leading zeroes then you can put them back
and combine it. As one of many ways, you can match a regular expression
against "000000123" that matches any initial run of zero or more zeroes
(saving the result) and then matches the remainder of the string, again
perhaps remembering it. This method would now store not the number of zeroes
but a string like "000000" alongside another string for "123".

If some method like that is useful, it can of course be instantiated as some
kind of R object (S3, S4, etc.) that can accept an arbitrary string version
of a number and break it into addressable parts including string and numeric
representations and when printed, recombine them and so on.

But the bottom line is that R is not planning on meeting your specific need.
There may be a package out there that has similar needs BUT that does not
mean everything else will work with such an implementation. Mostly integers
are integers with no leading zeroes.

Avi


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Sunday, September 11, 2022 12:22 PM
To: R help Mailing list <r-help at r-project.org>
Subject: [R] inadequacy in as.integer....

Dear members,
                             I came across this queer thing during my
analysis:
> as.integer("09098")


Any idea on how to retain the "0"?

Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 235, Issue 13
***************************************

	[[alternative HTML version deleted]]


From j@me@||200116 @end|ng |rom gm@||@com  Wed Sep 14 08:00:45 2022
From: j@me@||200116 @end|ng |rom gm@||@com (James Li)
Date: Wed, 14 Sep 2022 15:00:45 +0900
Subject: [R] Install Rmpi on Linux on a HPC
Message-ID: <CAA6xY=VSdQF1Rf6=3yQ9=RtHMzMbVTvkWihmXXHqO-Jj6A32VA@mail.gmail.com>

Hi,

Recently, I have had a hard time installing and running the package on an
HPC.

The HPC sysadmin installed Rmpi package without any error.

However, when he tried a simple R script with only one line:
 library(Rmpi)
the job caused "Segmentation Fault" error.

Currently, we have no clue to solve this problem. I am writing this
email to ask for help.

System info
uname -a
Linux ito-1 3.10.0-514.26.2.el7.x86_64 #1 SMP Fri Jun 30 05:26:04 UTC 2017
x86_64 x86_64 x86_64 GNU/Linux

Thank you

Best regards

-- 
---------------------------------------------------
Li

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Sep 14 09:35:35 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 14 Sep 2022 10:35:35 +0300
Subject: [R] Install Rmpi on Linux on a HPC
In-Reply-To: <CAA6xY=VSdQF1Rf6=3yQ9=RtHMzMbVTvkWihmXXHqO-Jj6A32VA@mail.gmail.com>
References: <CAA6xY=VSdQF1Rf6=3yQ9=RtHMzMbVTvkWihmXXHqO-Jj6A32VA@mail.gmail.com>
Message-ID: <20220914103535.6f331611@Tarkus>

On Wed, 14 Sep 2022 15:00:45 +0900
James Li <jamesli200116 at gmail.com> wrote:

> However, when he tried a simple R script with only one line:
>  library(Rmpi)
> the job caused "Segmentation Fault" error.

Is there a job submission system on the HPC that is required for
programs that need MPI? Does the error still happen if you use it,
sacrificing the ability to run R with Rmpi interactively?

Do you have a debugger (probably gdb) available to you? Debugging
segmentation faults without a debugger is, in theory, possible, but
requires a lot of experience and effort. We'll need at least a
backtrace in order to start debugging, and for that we'll need the
debugging symbols.

What does the HPC sysadmin say about this problem? You'll probably have
to contact this person anyway in order to get access to a debugger and
ensure that the debugging symbols are available.

-- 
Best regards,
Ivan


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Sep 15 07:46:45 2022
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 15 Sep 2022 05:46:45 +0000
Subject: [R] Overlapping barplots and lines
Message-ID: <7e3147661427493f9ff29c9697bfbca1@regione.marche.it>

Dear R-list users,

I have a silly problem with plot that I am not able to solve. I tried to find a solution through the web, with no success.


I need to overlap a barplot with points:


barplot(c(55, 80, 120, 90, 105), lwd=1, lend=1, main="", ylab="cm", width=1, ylim=c(0, 120), axes=F)

lines(c(70, 50, 100, 60, 70), type="p", pch=21, bg="red")

axis(1, at=c(1, 2, 3, 4, 5), labels=c("Dec", "Jan", "Feb", "Mar", "Apr"), pos=-1, cex.axis=0.8)
axis(2, at=seq(0, 120, 10), pos=0)


Points and x-axis are not centered with barplots. How can I fix it?


Thank you for your help

Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Sep 15 08:04:24 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 15 Sep 2022 08:04:24 +0200
Subject: [R] Overlapping barplots and lines
In-Reply-To: <7e3147661427493f9ff29c9697bfbca1@regione.marche.it>
References: <7e3147661427493f9ff29c9697bfbca1@regione.marche.it>
Message-ID: <ac1ba979-6b35-30ed-0020-c9a99721df0c@statistik.tu-dortmund.de>



On 15.09.2022 07:46, Stefano Sofia wrote:
> Dear R-list users,
> 
> I have a silly problem with plot that I am not able to solve. I tried to find a solution through the web, with no success.
> 
> 
> I need to overlap a barplot with points:
> 
> 
> barplot(c(55, 80, 120, 90, 105), lwd=1, lend=1, main="", ylab="cm", width=1, ylim=c(0, 120), axes=F)

with

bp <- barplot(c(55, 80, 120, 90, 105), lwd=1, lend=1, main="", 
ylab="cm", width=1, ylim=c(0, 120), axes=F)

you store the locations of the bars.
Then:

lines(bp, c(70, 50, 100, 60, 70), type="p", pch=21, bg="red")


Best,
Uwe Ligges

> lines(c(70, 50, 100, 60, 70), type="p", pch=21, bg="red")
> 
> axis(1, at=c(1, 2, 3, 4, 5), labels=c("Dec", "Jan", "Feb", "Mar", "Apr"), pos=-1, cex.axis=0.8)
> axis(2, at=seq(0, 120, 10), pos=0)
> 
> 
> Points and x-axis are not centered with barplots. How can I fix it?
> 
> 
> Thank you for your help
> 
> Stefano
> 
> 
>           (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------------------------------
> 
> ________________________________
> 
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> 
> --
> 
> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
> 
> This message was scanned by Libraesva ESG and is believed to be clean.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |@r@h@@|@@||| @end|ng |rom uzh@ch  Wed Sep 14 17:49:18 2022
From: |@r@h@@|@@||| @end|ng |rom uzh@ch (Farah Al Saifi)
Date: Wed, 14 Sep 2022 15:49:18 +0000
Subject: [R] Problem with installing packages in R
Message-ID: <ZR0P278MB0821AE70429657EC2BF1D02993469@ZR0P278MB0821.CHEP278.PROD.OUTLOOK.COM>

Dear Sir/Madam

After the update of the new version of R 4.2.1, an error message ( Error in nchar(homeDir): invalid multibyte string, element 1)  appears every time i open RStudio. Also the following warning message appears in the console: In normalizePath (path.expand(path),  winslash, mustwork): path[1]="C:/Users/41784/oneDrive - Universit?t z?rich UZH/Dokumente": the system cannot find the given path.

I would be glad, if you can tell me the solution for this problem. Thank you for your consideration.

Best,


	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Sep 15 10:27:05 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 15 Sep 2022 11:27:05 +0300
Subject: [R] Install Rmpi on Linux on a HPC
In-Reply-To: <CAA6xY=U6NRhwuS=qaYZUbpdq8BF60LW-31u=r1_x6jePDTbokw@mail.gmail.com>
References: <CAA6xY=VSdQF1Rf6=3yQ9=RtHMzMbVTvkWihmXXHqO-Jj6A32VA@mail.gmail.com>
 <20220914103535.6f331611@Tarkus>
 <CAA6xY=U6NRhwuS=qaYZUbpdq8BF60LW-31u=r1_x6jePDTbokw@mail.gmail.com>
Message-ID: <20220915112705.49053c57@Tarkus>

On Thu, 15 Sep 2022 14:39:42 +0900
James Li <jamesli200116 at gmail.com> wrote:

>  *** caught segfault ***
> address 0x1, cause 'memory not mapped'
> 
> Traceback:
>  1: fun(libname, pkgname)
>  2: doTryCatch(return(expr), name, parentenv, handler)
>  3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>  4: tryCatchList(expr, classes, parentenv, handlers)
>  5: tryCatch(fun(libname, pkgname), error = identity)
>  6: runHook(".onLoad", env, package.lib, package)
>  7: loadNamespace(package, lib.loc)
>  8: doTryCatch(return(expr), name, parentenv, handler)
>  9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 10: tryCatchList(expr, classes, parentenv, handlers)
> 11: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <-
> loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos =
> pos, deps, exclude, include.only)}, error = function(e) {    P <- if
> (!is.null(cc <- conditionCall(e)))         paste(" in",
> deparse(cc)[1L]) else ""    msg <- gettextf("package or namespace
> load failed for %s%s:\n %s",         sQuote(package), P,
> conditionMessage(e))    if (logical.return)
> message(paste("Error:", msg), domain = NA)    else stop(msg, call. =
> FALSE, domain = NA)})
> 12: library(Rmpi)

This is a bit useful. The crash is happening in Rmpi:::.onLoad() during
the first line of the script, library(Rmpi), and the reason is that
something takes the number 1 and tries to dereference it as a pointer.

Rmpi's .onLoad does a number of different things [*], and the crash is
happening inside some C code anyway, so we need the debugger.

> Reading symbols from
> /home/exp/R/4.0.5-gcc10.2.0-openmpi-debug/lib64/R/bin/exec/R...done.
> (gdb) quit

In order to get useful information from GDB, you need to type "run" in
the GDB prompt (without the " quotes) and reproduce the crash (for
example, by running library(Rmpi)). Once the R process crashes, you
will return back to the GDB prompt, where you'll need to run "bt full"
(again, without the quotes). After that you can quit.

-- 
Best regards,
Ivan

[*] https://github.com/cran/Rmpi/blob/master/R/zzz.R


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Sep 15 10:39:35 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 15 Sep 2022 11:39:35 +0300
Subject: [R] Problem with installing packages in R
In-Reply-To: <ZR0P278MB0821AE70429657EC2BF1D02993469@ZR0P278MB0821.CHEP278.PROD.OUTLOOK.COM>
References: <ZR0P278MB0821AE70429657EC2BF1D02993469@ZR0P278MB0821.CHEP278.PROD.OUTLOOK.COM>
Message-ID: <20220915113935.051d896e@Tarkus>

On Wed, 14 Sep 2022 15:49:18 +0000
Farah Al Saifi <farah.alsaifi at uzh.ch> wrote:

> After the update of the new version of R 4.2.1, an error message (
> Error in nchar(homeDir): invalid multibyte string, element 1)
> appears every time i open RStudio.

Does the error message happen when you run Rgui instead of Rstudio?

What is your sessionInfo()? R has greatly improved its support for
strings not representable in the current ANSI codepage, but that
requires a recent version of Windows 10.

-- 
Best regards,
Ivan


From er|cjberger @end|ng |rom gm@||@com  Thu Sep 15 10:44:26 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 15 Sep 2022 11:44:26 +0300
Subject: [R] Problem with installing packages in R
In-Reply-To: <ZR0P278MB0821AE70429657EC2BF1D02993469@ZR0P278MB0821.CHEP278.PROD.OUTLOOK.COM>
References: <ZR0P278MB0821AE70429657EC2BF1D02993469@ZR0P278MB0821.CHEP278.PROD.OUTLOOK.COM>
Message-ID: <CAGgJW77f0G5w653=enmE1AmJVnNGHbWUpztD5DG4x_9xuCW+TQ@mail.gmail.com>

Can you bring up R in a shell? Do you get the same message?
(Also, set your email to send plain text. HTML versions are deleted.)



On Thu, Sep 15, 2022 at 11:27 AM Farah Al Saifi <farah.alsaifi at uzh.ch> wrote:
>
> Dear Sir/Madam
>
> After the update of the new version of R 4.2.1, an error message ( Error in nchar(homeDir): invalid multibyte string, element 1)  appears every time i open RStudio. Also the following warning message appears in the console: In normalizePath (path.expand(path),  winslash, mustwork): path[1]="C:/Users/41784/oneDrive - Universit?t z?rich UZH/Dokumente": the system cannot find the given path.
>
> I would be glad, if you can tell me the solution for this problem. Thank you for your consideration.
>
> Best,
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@me@||200116 @end|ng |rom gm@||@com  Thu Sep 15 07:39:42 2022
From: j@me@||200116 @end|ng |rom gm@||@com (James Li)
Date: Thu, 15 Sep 2022 14:39:42 +0900
Subject: [R] Install Rmpi on Linux on a HPC
In-Reply-To: <20220914103535.6f331611@Tarkus>
References: <CAA6xY=VSdQF1Rf6=3yQ9=RtHMzMbVTvkWihmXXHqO-Jj6A32VA@mail.gmail.com>
 <20220914103535.6f331611@Tarkus>
Message-ID: <CAA6xY=U6NRhwuS=qaYZUbpdq8BF60LW-31u=r1_x6jePDTbokw@mail.gmail.com>

Hi, Ivan,

Thank you for your reply.

Our distribution is  Open MPI 3.1.6. gdb is available on my HPC.

I list the code I run on the HPC and the result also:

Linux script:
=======================
#!/bin/bash
#PJM -L "rscunit=ito-a"
#PJM -L "rscgrp=ito-s-dbg"
#PJM -L "vnode=4"
#PJM -L "vnode-core=36"
#PJM -L "elapse=00:05:00"
#PJM -j
#PJM -X

module use /home/exp/modulefiles
module load gcc/10.2.0
module load exp-openmpi/3.1.6-nocuda-gcc10.2.0
module load exp-R/4.0.5-gcc10.2.0-openmpi-debug
module load exp-libtool/2.4.6

echo {with the command \(without gdb option\):}
mpirun -np 4 --map-by ppr:1:node --bind-to none -mca plm_rsh_agent
/bin/pjrsh -machinefile ${PJM_O_NODEINF} R --no-save -q -f
/home/usr6/q70176a/testReturnCoreMememory.R

echo {with the command \(with gdb option\)}:
mpirun -np 4 --map-by ppr:1:node --bind-to none -mca plm_rsh_agent
/bin/pjrsh -machinefile ${PJM_O_NODEINF} R -d gdb --no-save -q -f
/home/usr6/q70176a/testReturnCoreMememory.R
=======================

R code:
=======================
library(Rmpi)
mpi.spawn.Rslaves(nslaves=4)
tailslave.log()
mpi.remote.exec(rnorm(10))
mpi.close.Rslaves()
=======================

Results:
=======================
{with the command (without gdb option):}
> > > > library(Rmpi)
library(Rmpi)
library(Rmpi)
library(Rmpi)

 *** caught segfault ***
address 0x1, cause 'memory not mapped'

 *** caught segfault ***
address 0x1, cause 'memory not mapped'

 *** caught segfault ***
address 0x1, cause 'memory not mapped'

 *** caught segfault ***
address 0x1, cause 'memory not mapped'

Traceback:
 1: fun(libname, pkgname)
 2: doTryCatch(return(expr), name, parentenv, handler)
 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
 4: tryCatchList(expr, classes, parentenv, handlers)
 5: tryCatch(fun(libname, pkgname), error = identity)
 6: runHook(".onLoad", env, package.lib, package)
 7: loadNamespace(package, lib.loc)
 8: doTryCatch(return(expr), name, parentenv, handler)
 9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
10: tryCatchList(expr, classes, parentenv, handlers)
11: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <-
loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
deps, exclude, include.only)}, error = function(e) {    P <- if
(!is.null(cc <- conditionCall(e)))         paste(" in", deparse(cc)[1L])
 else ""    msg <- gettextf("package or namespace load failed for %s%s:\n
%s",         sQuote(package), P, conditionMessage(e))    if
(logical.return)         message(paste("Error:", msg), domain = NA)    else
stop(msg, call. = FALSE, domain = NA)})
12: library(Rmpi)
An irrecoverable exception occurred. R is aborting now ...

Traceback:
 1: fun(libname, pkgname)
 2: doTryCatch(return(expr), name, parentenv, handler)
 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
 4: tryCatchList(expr, classes, parentenv, handlers)
 5: tryCatch(fun(libname, pkgname), error = identity)
 6: runHook(".onLoad", env, package.lib, package)
 7: loadNamespace(package, lib.loc)
 8: doTryCatch(return(expr), name, parentenv, handler)
 9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
10: tryCatchList(expr, classes, parentenv, handlers)
11: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <-
loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
deps, exclude, include.only)}, error = function(e) {    P <- if
(!is.null(cc <- conditionCall(e)))         paste(" in", deparse(cc)[1L])
 else ""    msg <- gettextf("package or namespace load failed for %s%s:\n
%s",         sQuote(package), P, conditionMessage(e))    if
(logical.return)         message(paste("Error:", msg), domain = NA)    else
stop(msg, call. = FALSE, domain = NA)})
12: library(Rmpi)
An irrecoverable exception occurred. R is aborting now ...

Traceback:
 1: fun(libname, pkgname)
 2: doTryCatch(return(expr), name, parentenv, handler)
 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
 4: tryCatchList(expr, classes, parentenv, handlers)
 5: tryCatch(fun(libname, pkgname), error = identity)
 6: runHook(".onLoad", env, package.lib, package)
 7: loadNamespace(package, lib.loc)
 8: doTryCatch(return(expr), name, parentenv, handler)
 9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
10: tryCatchList(expr, classes, parentenv, handlers)
11: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <-
loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
deps, exclude, include.only)}, error = function(e) {    P <- if
(!is.null(cc <- conditionCall(e)))         paste(" in", deparse(cc)[1L])
 else ""    msg <- gettextf("package or namespace load failed for %s%s:\n
%s",         sQuote(package), P, conditionMessage(e))    if
(logical.return)         message(paste("Error:", msg), domain = NA)    else
stop(msg, call. = FALSE, domain = NA)})
12: library(Rmpi)
An irrecoverable exception occurred. R is aborting now ...

Traceback:
 1: fun(libname, pkgname)
 2: doTryCatch(return(expr), name, parentenv, handler)
 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
 4: tryCatchList(expr, classes, parentenv, handlers)
 5: tryCatch(fun(libname, pkgname), error = identity)
 6: runHook(".onLoad", env, package.lib, package)
 7: loadNamespace(package, lib.loc)
 8: doTryCatch(return(expr), name, parentenv, handler)
 9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
10: tryCatchList(expr, classes, parentenv, handlers)
11: tryCatch({    attr(package, "LibPath") <- which.lib.loc    ns <-
loadNamespace(package, lib.loc)    env <- attachNamespace(ns, pos = pos,
deps, exclude, include.only)}, error = function(e) {    P <- if
(!is.null(cc <- conditionCall(e)))         paste(" in", deparse(cc)[1L])
 else ""    msg <- gettextf("package or namespace load failed for %s%s:\n
%s",         sQuote(package), P, conditionMessage(e))    if
(logical.return)         message(paste("Error:", msg), domain = NA)    else
stop(msg, call. = FALSE, domain = NA)})
12: library(Rmpi)
An irrecoverable exception occurred. R is aborting now ...
--------------------------------------------------------------------------
Primary job  terminated normally, but 1 process returned
a non-zero exit code. Per user-direction, the job has been aborted.
--------------------------------------------------------------------------
--------------------------------------------------------------------------
mpirun noticed that process rank 0 with PID 0 on node sca0171 exited on
signal 11 (Segmentation fault).
--------------------------------------------------------------------------
3 total processes killed (some possibly by mpirun during cleanup)
{with the command (with gdb option)}:
[?1034hGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-120.el7
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html
>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
[?1034hGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-120.el7
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html
>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
[?1034hGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-120.el7
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html
>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
[?1034hGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-120.el7
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html
>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from
/home/exp/R/4.0.5-gcc10.2.0-openmpi-debug/lib64/R/bin/exec/R...Reading
symbols from
/home/exp/R/4.0.5-gcc10.2.0-openmpi-debug/lib64/R/bin/exec/R...Reading
symbols from
/home/exp/R/4.0.5-gcc10.2.0-openmpi-debug/lib64/R/bin/exec/R...Reading
symbols from
/home/exp/R/4.0.5-gcc10.2.0-openmpi-debug/lib64/R/bin/exec/R...done.
done.
done.
(gdb) quit
done.
(gdb) quit
(gdb) quit
(gdb) quit
=======================

Thank you

Best Regards

Ivan Krylov <krylov.r00t at gmail.com> ?2022?9?14??? 16:35???

> On Wed, 14 Sep 2022 15:00:45 +0900
> James Li <jamesli200116 at gmail.com> wrote:
>
> > However, when he tried a simple R script with only one line:
> >  library(Rmpi)
> > the job caused "Segmentation Fault" error.
>
> Is there a job submission system on the HPC that is required for
> programs that need MPI? Does the error still happen if you use it,
> sacrificing the ability to run R with Rmpi interactively?
>
> Do you have a debugger (probably gdb) available to you? Debugging
> segmentation faults without a debugger is, in theory, possible, but
> requires a lot of experience and effort. We'll need at least a
> backtrace in order to start debugging, and for that we'll need the
> debugging symbols.
>
> What does the HPC sysadmin say about this problem? You'll probably have
> to contact this person anyway in order to get access to a debugger and
> ensure that the debugging symbols are available.
>
> --
> Best regards,
> Ivan
>


-- 
---------------------------------------------------
James Li
This is a machine email!

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Sep 15 11:03:35 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 15 Sep 2022 19:03:35 +1000
Subject: [R] Overlapping barplots and lines
In-Reply-To: <7e3147661427493f9ff29c9697bfbca1@regione.marche.it>
References: <7e3147661427493f9ff29c9697bfbca1@regione.marche.it>
Message-ID: <CA+8X3fW=kaQc6b8_Xu+P9+i=L6ptwtC-CeOxynNofbydF2C+fg@mail.gmail.com>

Hi Stefano,
The bar x centers are returned by the barplot function. You can also
use the barp function (plotrix package) that places the bars at unit
intervals by default.

Jim

On Thu, Sep 15, 2022 at 3:47 PM Stefano Sofia
<stefano.sofia at regione.marche.it> wrote:
>
> Dear R-list users,
>
> I have a silly problem with plot that I am not able to solve. I tried to find a solution through the web, with no success.
>
>
> I need to overlap a barplot with points:
>
>
> barplot(c(55, 80, 120, 90, 105), lwd=1, lend=1, main="", ylab="cm", width=1, ylim=c(0, 120), axes=F)
>
> lines(c(70, 50, 100, 60, 70), type="p", pch=21, bg="red")
>
> axis(1, at=c(1, 2, 3, 4, 5), labels=c("Dec", "Jan", "Feb", "Mar", "Apr"), pos=-1, cex.axis=0.8)
> axis(2, at=seq(0, 120, 10), pos=0)
>
>
> Points and x-axis are not centered with barplots. How can I fix it?
>
>
> Thank you for your help
>
> Stefano
>
>
>          (oo)
> --oOO--( )--OOo--------------------------------------
> Stefano Sofia PhD
> Civil Protection - Marche Region - Italy
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona (AN)
> Uff: +39 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------------------------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>
> --
> Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
> This message was scanned by Libraesva ESG and is believed to be clean.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From n|ckmwr@y @end|ng |rom gm@||@com  Thu Sep 15 13:10:30 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Thu, 15 Sep 2022 12:10:30 +0100
Subject: [R] opening nimroad tar gz files in R
Message-ID: <CABxY9BNK-PXqJvznffdA6acnHn0NJJhRxG3+hLyPHz5VpaEx3g@mail.gmail.com>

Hello

I am trying to download data sets from the 1 km Resolution UK Composite
Rainfall Data from the Met Office Nimrod System

Eg

CEDA Archive Web Browser
<https://data.ceda.ac.uk/badc/ukmo-nimrod/data/composite/uk-1km/2004>
/badc/ukmo_nimrod/data/composite/uk-1km/2004

I can download an individual file (there are lots for each year) as a
.gz.tar and then it appears as a TAR file in the directory I am using.

I have then used the instruction untar() (targeted on the correct
directory) and what this produces is about a dozen these files which are
labelled as .gz files.  They appear in the same folder as the original TAR
folder but as R files (ie although they have .gz in the name they have the
R icon next to them as do any R progs which I have).  I can?t open them
though as R progs (which I don?t really think they can be) and trying to
just takes me back to the R studio interface.

I?ve tried  -- read.table (gzfile
("metoffice-c-band-rain-radar_uk_200404062250_1km-composite.dat.gz")) but
that just gives a load of error messages and I haven?t found any other way
of opening them as .gz files.

I?m rather baffled ? can anyone make any suggestions?  Thanks Nick Wray

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Thu Sep 15 13:44:28 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 15 Sep 2022 14:44:28 +0300
Subject: [R] opening nimroad tar gz files in R
In-Reply-To: <CABxY9BNK-PXqJvznffdA6acnHn0NJJhRxG3+hLyPHz5VpaEx3g@mail.gmail.com>
References: <CABxY9BNK-PXqJvznffdA6acnHn0NJJhRxG3+hLyPHz5VpaEx3g@mail.gmail.com>
Message-ID: <CAGgJW777qgn9Qkd6X4oXjDzsSCiBvU7N-F=0EK=VOes_fnVVtA@mail.gmail.com>

Is there a way to download a file from that site without registering for
the site?
If you have a unix/linux shell, what does the 'file' command output?

$ file foo.gz



On Thu, Sep 15, 2022 at 2:11 PM Nick Wray <nickmwray at gmail.com> wrote:

> Hello
>
> I am trying to download data sets from the 1 km Resolution UK Composite
> Rainfall Data from the Met Office Nimrod System
>
> Eg
>
> CEDA Archive Web Browser
> <https://data.ceda.ac.uk/badc/ukmo-nimrod/data/composite/uk-1km/2004>
> /badc/ukmo_nimrod/data/composite/uk-1km/2004
>
> I can download an individual file (there are lots for each year) as a
> .gz.tar and then it appears as a TAR file in the directory I am using.
>
> I have then used the instruction untar() (targeted on the correct
> directory) and what this produces is about a dozen these files which are
> labelled as .gz files.  They appear in the same folder as the original TAR
> folder but as R files (ie although they have .gz in the name they have the
> R icon next to them as do any R progs which I have).  I can?t open them
> though as R progs (which I don?t really think they can be) and trying to
> just takes me back to the R studio interface.
>
> I?ve tried  -- read.table (gzfile
> ("metoffice-c-band-rain-radar_uk_200404062250_1km-composite.dat.gz")) but
> that just gives a load of error messages and I haven?t found any other way
> of opening them as .gz files.
>
> I?m rather baffled ? can anyone make any suggestions?  Thanks Nick Wray
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From o1b|gtenor @end|ng |rom gm@||@com  Thu Sep 15 13:48:36 2022
From: o1b|gtenor @end|ng |rom gm@||@com (o1bigtenor)
Date: Thu, 15 Sep 2022 06:48:36 -0500
Subject: [R] Fwd:  opening nimroad tar gz files in R
In-Reply-To: <CAPpdf59F0ZpYOsET_Xw29PcpzYiZBHhuGa63tc5OTCO_TsWatg@mail.gmail.com>
References: <CABxY9BNK-PXqJvznffdA6acnHn0NJJhRxG3+hLyPHz5VpaEx3g@mail.gmail.com>
 <CAPpdf59F0ZpYOsET_Xw29PcpzYiZBHhuGa63tc5OTCO_TsWatg@mail.gmail.com>
Message-ID: <CAPpdf5_Z-4GObbMdoBMBx-xA3JaEjWiDou=Uz3MaFyuYjj0VXw@mail.gmail.com>

On Thu, Sep 15, 2022 at 6:11 AM Nick Wray <nickmwray at gmail.com> wrote:
>
> Hello
>
> I am trying to download data sets from the 1 km Resolution UK Composite
> Rainfall Data from the Met Office Nimrod System
>
> Eg
>
> CEDA Archive Web Browser
> <https://data.ceda.ac.uk/badc/ukmo-nimrod/data/composite/uk-1km/2004>
> /badc/ukmo_nimrod/data/composite/uk-1km/2004
>
> I can download an individual file (there are lots for each year) as a
> .gz.tar and then it appears as a TAR file in the directory I am using.
>
> I have then used the instruction untar() (targeted on the correct
> directory) and what this produces is about a dozen these files which are
> labelled as .gz files.  They appear in the same folder as the original TAR
> folder but as R files (ie although they have .gz in the name they have the
> R icon next to them as do any R progs which I have).  I can?t open them
> though as R progs (which I don?t really think they can be) and trying to
> just takes me back to the R studio interface.
>
> I?ve tried  -- read.table (gzfile
> ("metoffice-c-band-rain-radar_uk_200404062250_1km-composite.dat.gz")) but
> that just gives a load of error messages and I haven?t found any other way
> of opening them as .gz files.
>
> I?m rather baffled ? can anyone make any suggestions?  Thanks Nick Wray
>
>

Hmmmmm - - - - not speaking as any kind of 'R' expert but I have a little bit
of familiarity with the use of 'linux'.

I was taught to open files that are in this format :

  metoffice-c-band-rain-radar_uk_20040406_1km-composite.dat.gz.tar

(first file in your proffered url)
in this fashion.

$ tar -xvf archive.tar.gz

this means that you are not just 'untarring' the file you need to also remove
the .gz which is another compression mechanism (gunzip is the command
for just that).

Try that - - - if further difficulties someone else will have a better answer.

HTH


(for example you would have :
$ tar -xvf metoffice-c-band-rain-radar_uk_20040406_1km-composite.dat.gz.tar
for that first file.)


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Sep 15 15:49:38 2022
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 15 Sep 2022 13:49:38 +0000
Subject: [R] Overlapping barplots and lines
In-Reply-To: <CAExDFnik5o6fhBJwJDL59KNKoCmry75CwerPWxD=H2_NvegPpw@mail.gmail.com>
References: <7e3147661427493f9ff29c9697bfbca1@regione.marche.it>,
 <CAExDFnik5o6fhBJwJDL59KNKoCmry75CwerPWxD=H2_NvegPpw@mail.gmail.com>
Message-ID: <7130bba3121540fd89bd741822c6eb11@regione.marche.it>

Thanks to Jian and all who replied.

Your suggestions have been perfect.


Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------------------------------


________________________________
Da: Jian MA <majian03 at gmail.com>
Inviato: gioved? 15 settembre 2022 08:39
A: Stefano Sofia
Oggetto: Re: [R] Overlapping barplots and lines

Dear Sofia,

try the following codes:

b1 = barplot(c(55, 80, 120, 90, 105), lwd=1, lend=1, main="", ylab="cm", width=1, ylim=c(0, 120), axes=F)
lines(x = b1, c(70, 50, 100, 60, 70), type="p", pch=21, bg="red")
axis(1, at=b1, labels=c("Dec", "Jan", "Feb", "Mar", "Apr"), pos=-1, cex.axis=0.8)
axis(2, at=seq(0, 120, 10), pos=0)

Best Wishes,
Jian Ma, PhD

On Thu, Sep 15, 2022 at 1:47 PM Stefano Sofia <stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>> wrote:
Dear R-list users,

I have a silly problem with plot that I am not able to solve. I tried to find a solution through the web, with no success.


I need to overlap a barplot with points:


barplot(c(55, 80, 120, 90, 105), lwd=1, lend=1, main="", ylab="cm", width=1, ylim=c(0, 120), axes=F)

lines(c(70, 50, 100, 60, 70), type="p", pch=21, bg="red")

axis(1, at=c(1, 2, 3, 4, 5), labels=c("Dec", "Jan", "Feb", "Mar", "Apr"), pos=-1, cex.axis=0.8)
axis(2, at=seq(0, 120, 10), pos=0)


Points and x-axis are not centered with barplots. How can I fix it?


Thank you for your help

Stefano


         (oo)
--oOO--( )--OOo--------------------------------------
Stefano Sofia PhD
Civil Protection - Marche Region - Italy
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona (AN)
Uff: +39 071 806 7743
E-mail: stefano.sofia at regione.marche.it<mailto:stefano.sofia at regione.marche.it>
---Oo---------oO----------------------------------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=5a635173&h=06ff70f3&f=y&p=y>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=5a635173&h=e12f63e8&f=y&p=y>
and provide commented, minimal, self-contained, reproducible code.

--
Questo messaggio ? stato analizzato con Libraesva ESG ed ? risultato non infetto

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell'art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libraesva ESG ed  risultato non infetto.
This message was scanned by Libraesva ESG and is believed to be clean.


	[[alternative HTML version deleted]]


From tr|ng @end|ng |rom gvdnet@dk  Fri Sep 16 08:05:22 2022
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 16 Sep 2022 08:05:22 +0200
Subject: [R] uniroot problem
Message-ID: <33b85c27-b7d2-4dfa-4686-ab79b552059a@gvdnet.dk>

Dear friends - I have a problem with root finding using uniroot as goes:

I have the function

ASTA <- function(SID,H,ATOT,KA) {H + SID - kw/H - ATOT*KA/KA+H }

I know SID = 0.01199 - and I know H = 10^-4.57 - and I know kw = 1e-14

Therefore, as I make KA = 10^-seq(1,10,length=100), by letting ASTA = 0, 
I can find ATOT for each KA as

ATOT <-? (H+SID-kw/H)*(KA+H)/KA


and

 ? summary(ATOT) =??? Min.? 1st Qu.?? Median???? Mean? 3rd Qu. Max.
 ???????????????????????????????????? 0.012??? 0.013??? 0.115 171.263?? 
18.278 3234.407

However, if I make use of uniroot by:

KA <- seq(1,10,length=100)
KA <- 10^-KA

ATOT <- c()

for (i in 1:100) {
 ? ATOT[i] <- uniroot(ASTA,c(-1e3,1e3),tol=1e-20,maxiter=1e4,
 ???????????????????? SID=SID,KA=KA[i],H=10^-pH[1])$root
}

I get 100 identical ATOT values of 0.01204383 and no warnings.

I'm on Windows 10, using slightly old

$version.string
[1] "R version 4.0.5 (2021-03-31)"

Best wishes

Troels Ring, MD
Aalborg, Denmark


From @kw@|mmo @end|ng |rom gm@||@com  Fri Sep 16 08:21:47 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Fri, 16 Sep 2022 02:21:47 -0400
Subject: [R] uniroot problem
In-Reply-To: <33b85c27-b7d2-4dfa-4686-ab79b552059a@gvdnet.dk>
References: <33b85c27-b7d2-4dfa-4686-ab79b552059a@gvdnet.dk>
Message-ID: <CAPcHnpRhN7+mX=LT7hV06yZsVJVWtBYu0MSZzikDOej20rNtTg@mail.gmail.com>

In this line:

for (i in 1:100) {
   ATOT[i] <- uniroot(ASTA,c(-1e3,1e3),tol=1e-20,maxiter=1e4,
                      SID=SID,KA=KA[i],H=10^-pH[1])$root
}

you've used variable pH, but have no definition for this variable.


Also, I can't tell which location has a mistake, but these aren't equivalent:

ASTA <- H + SID - kw/H - ATOT*KA/KA+H
ATOT <-  (H+SID-kw/H)*(KA+H)/KA

I'm assuming the first one is incorrect, it seems redundant to
multiply then divide by KA, so change ASTA to:

ASTA <- function(SID,H,ATOT,KA) H + SID - kw/H - ATOT*KA/(KA+H)

I tried something like this:

ASTA <- function(SID,H,ATOT,KA) H + SID - kw/H - ATOT*KA/(KA+H)

SID <- 0.01199
H <- 10^-4.57
kw <- 1e-14

KA <- 10^-seq(1, 10, length.out = 100)

ATOT1 <- (H + SID - kw/H) * (KA + H)/KA

ATOT2 <- vapply(KA, function(ka) {
    uniroot(ASTA, c(-10000, 10000), SID = SID, H = H, KA = ka, tol =
1e-20, maxiter = 10000)$root
}, 0)


ASTA(SID, H, ATOT1, KA)
ASTA(SID, H, ATOT2, KA)

and it seems to work for me. The biggest absolute diff is ~1e-13

On Fri, Sep 16, 2022 at 2:05 AM Troels Ring <tring at gvdnet.dk> wrote:
>
> Dear friends - I have a problem with root finding using uniroot as goes:
>
> I have the function
>
> ASTA <- function(SID,H,ATOT,KA) {H + SID - kw/H - ATOT*KA/KA+H }
>
> I know SID = 0.01199 - and I know H = 10^-4.57 - and I know kw = 1e-14
>
> Therefore, as I make KA = 10^-seq(1,10,length=100), by letting ASTA = 0,
> I can find ATOT for each KA as
>
> ATOT <-  (H+SID-kw/H)*(KA+H)/KA
>
>
> and
>
>    summary(ATOT) =    Min.  1st Qu.   Median     Mean  3rd Qu. Max.
>                                       0.012    0.013    0.115 171.263
> 18.278 3234.407
>
> However, if I make use of uniroot by:
>
> KA <- seq(1,10,length=100)
> KA <- 10^-KA
>
> ATOT <- c()
>
> for (i in 1:100) {
>    ATOT[i] <- uniroot(ASTA,c(-1e3,1e3),tol=1e-20,maxiter=1e4,
>                       SID=SID,KA=KA[i],H=10^-pH[1])$root
> }
>
> I get 100 identical ATOT values of 0.01204383 and no warnings.
>
> I'm on Windows 10, using slightly old
>
> $version.string
> [1] "R version 4.0.5 (2021-03-31)"
>
> Best wishes
>
> Troels Ring, MD
> Aalborg, Denmark
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tr|ng @end|ng |rom gvdnet@dk  Fri Sep 16 10:06:19 2022
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 16 Sep 2022 10:06:19 +0200
Subject: [R] Fwd:  uniroot problem
In-Reply-To: <3c470ce3-496a-e01b-6560-7bc07226b42d@gvdnet.dk>
References: <3c470ce3-496a-e01b-6560-7bc07226b42d@gvdnet.dk>
Message-ID: <da7a6a1d-3a2e-d30d-070d-27e8f3264426@gvdnet.dk>




-------- Videresendt meddelelse --------
Emne: 	Re: [R] uniroot problem
Dato: 	Fri, 16 Sep 2022 10:05:43 +0200
Fra: 	Troels Ring <tring at gvdnet.dk>
Til: 	Andrew Simmons <akwsimmo at gmail.com>



Thanks a lot? - sorry for the confusion - pH[1] was the known pH 4.57.

 ?But you were rigth: I made simple errors:

ASTA was exactly as you deduced

ASTA <- H + SID - kw/H - ATOT*KA/(KA+H)

And this cures the problem! And had nothing to do with uniroot!
Thanks a lot!!!

Den 16-09-2022 kl. 08:21 skrev Andrew Simmons:
> In this line:
>
> for (i in 1:100) {
>      ATOT[i] <- uniroot(ASTA,c(-1e3,1e3),tol=1e-20,maxiter=1e4,
>                         SID=SID,KA=KA[i],H=10^-pH[1])$root
> }
>
> you've used variable pH, but have no definition for this variable.
>
>
> Also, I can't tell which location has a mistake, but these aren't equivalent:
>
> ASTA <- H + SID - kw/H - ATOT*KA/KA+H
> ATOT <-  (H+SID-kw/H)*(KA+H)/KA
>
> I'm assuming the first one is incorrect, it seems redundant to
> multiply then divide by KA, so change ASTA to:
>
> ASTA <- function(SID,H,ATOT,KA) H + SID - kw/H - ATOT*KA/(KA+H)
>
> I tried something like this:
>
> ASTA <- function(SID,H,ATOT,KA) H + SID - kw/H - ATOT*KA/(KA+H)
>
> SID <- 0.01199
> H <- 10^-4.57
> kw <- 1e-14
>
> KA <- 10^-seq(1, 10, length.out = 100)
>
> ATOT1 <- (H + SID - kw/H) * (KA + H)/KA
>
> ATOT2 <- vapply(KA, function(ka) {
>       uniroot(ASTA, c(-10000, 10000), SID = SID, H = H, KA = ka, tol =
> 1e-20, maxiter = 10000)$root
> }, 0)
>
>
> ASTA(SID, H, ATOT1, KA)
> ASTA(SID, H, ATOT2, KA)
>
> and it seems to work for me. The biggest absolute diff is ~1e-13
>
> On Fri, Sep 16, 2022 at 2:05 AM Troels Ring<tring at gvdnet.dk>  wrote:
>> Dear friends - I have a problem with root finding using uniroot as goes:
>>
>> I have the function
>>
>> ASTA <- function(SID,H,ATOT,KA) {H + SID - kw/H - ATOT*KA/KA+H }
>>
>> I know SID = 0.01199 - and I know H = 10^-4.57 - and I know kw = 1e-14
>>
>> Therefore, as I make KA = 10^-seq(1,10,length=100), by letting ASTA = 0,
>> I can find ATOT for each KA as
>>
>> ATOT <-  (H+SID-kw/H)*(KA+H)/KA
>>
>>
>> and
>>
>>      summary(ATOT) =    Min.  1st Qu.   Median     Mean  3rd Qu. Max.
>>                                         0.012    0.013    0.115 171.263
>> 18.278 3234.407
>>
>> However, if I make use of uniroot by:
>>
>> KA <- seq(1,10,length=100)
>> KA <- 10^-KA
>>
>> ATOT <- c()
>>
>> for (i in 1:100) {
>>      ATOT[i] <- uniroot(ASTA,c(-1e3,1e3),tol=1e-20,maxiter=1e4,
>>                         SID=SID,KA=KA[i],H=10^-pH[1])$root
>> }
>>
>> I get 100 identical ATOT values of 0.01204383 and no warnings.
>>
>> I'm on Windows 10, using slightly old
>>
>> $version.string
>> [1] "R version 4.0.5 (2021-03-31)"
>>
>> Best wishes
>>
>> Troels Ring, MD
>> Aalborg, Denmark
>>
>> ______________________________________________
>> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guidehttp://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guidehttp://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
	[[alternative HTML version deleted]]


From y@ngk@|9999 @end|ng |rom y@hoo@com  Fri Sep 16 19:26:45 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Fri, 16 Sep 2022 17:26:45 +0000 (UTC)
Subject: [R] rename files in R
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
Message-ID: <1179852228.2613336.1663349205099@mail.yahoo.com>

Hello,I have a lot of files with not meaningful name, such as:? file1.txt, file2.txt ...... I need to rename them using the information from the first row of the files. Now I can get the information from the first row of each file. Now, I need know how to rename them in R (using loop?).?Thank you for your helpKai


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Sep 16 19:38:26 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 16 Sep 2022 18:38:26 +0100
Subject: [R] rename files in R
In-Reply-To: <1179852228.2613336.1663349205099@mail.yahoo.com>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
Message-ID: <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>

Hello,

Please post the first row of 2 or 3 files and the expected result.

You can rename files with ?file.rename. This function is vectorized its 
on arguments so you do not need a loop, only the source and destination 
filenames. Both vectors should have the same length, if not strange 
things will occur including data loss.

Hope this helps,

Rui Barradas

?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
> Hello,I have a lot of files with not meaningful name, such as:? file1.txt, file2.txt ...... I need to rename them using the information from the first row of the files. Now I can get the information from the first row of each file. Now, I need know how to rename them in R (using loop?).?Thank you for your helpKai
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From y@ngk@|9999 @end|ng |rom y@hoo@com  Fri Sep 16 19:51:49 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Fri, 16 Sep 2022 17:51:49 +0000 (UTC)
Subject: [R] rename files in R
In-Reply-To: <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
Message-ID: <1484246431.2613424.1663350709591@mail.yahoo.com>

 Hello,Here is the example:??
??file name? ? first row??file1.txt? ? ?abc.txt??file2.txt? ? ?bed.txt??file3.txt? ? ?gogo.txt??.?.?file1243.txt? ? last.txt????
I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated.?Thanks,?Kai    On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:  
 
 Hello,

Please post the first row of 2 or 3 files and the expected result.

You can rename files with ?file.rename. This function is vectorized its 
on arguments so you do not need a loop, only the source and destination 
filenames. Both vectors should have the same length, if not strange 
things will occur including data loss.

Hope this helps,

Rui Barradas

?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
> Hello,I have a lot of files with not meaningful name, such as:? file1.txt, file2.txt ...... I need to rename them using the information from the first row of the files. Now I can get the information from the first row of each file. Now, I need know how to rename them in R (using loop?).?Thank you for your helpKai
> 
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Sep 16 20:01:28 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 16 Sep 2022 19:01:28 +0100
Subject: [R] rename files in R
In-Reply-To: <1484246431.2613424.1663350709591@mail.yahoo.com>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
Message-ID: <5976c8fc-2070-aa81-69ed-59325cfd1dd7@sapo.pt>

Hello,

Something like the following might work.



filenames <- list.files(pattern = "^file\\d+\\.txt$")
destnames <- sapply(filenames, scan, what = character(), sep = "\n", n = 
1L, strip.white = TRUE)

if(length(filenames) == length(destnames))
   file.rename(filenames, destnames)
else message("something went wrong")



But I would make copies of 2 or 3 files first and test with, say,

filenames[1:2] and destnames[1:2]


Hope this helps,

Rui Barradas

?s 18:51 de 16/09/2022, Kai Yang escreveu:
>   Hello,Here is the example:
>  ??file name? ? first row??file1.txt? ? ?abc.txt??file2.txt? ? ?bed.txt??file3.txt? ? ?gogo.txt??.?.?file1243.txt? ? last.txt
> I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated.?Thanks,?Kai    On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>   
>   Hello,
> 
> Please post the first row of 2 or 3 files and the expected result.
> 
> You can rename files with ?file.rename. This function is vectorized its
> on arguments so you do not need a loop, only the source and destination
> filenames. Both vectors should have the same length, if not strange
> things will occur including data loss.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
>> Hello,I have a lot of files with not meaningful name, such as:? file1.txt, file2.txt ...... I need to rename them using the information from the first row of the files. Now I can get the information from the first row of each file. Now, I need know how to rename them in R (using loop?).?Thank you for your helpKai
>>
>>
>>  ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From y@ngk@|9999 @end|ng |rom y@hoo@com  Fri Sep 16 20:24:28 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Fri, 16 Sep 2022 18:24:28 +0000 (UTC)
Subject: [R] rename files in R
In-Reply-To: <5976c8fc-2070-aa81-69ed-59325cfd1dd7@sapo.pt>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
 <5976c8fc-2070-aa81-69ed-59325cfd1dd7@sapo.pt>
Message-ID: <1757366261.2612528.1663352668960@mail.yahoo.com>

 Thank you. I'll try this. --- Kai
    On Friday, September 16, 2022 at 11:01:33 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:  
 
 Hello,

Something like the following might work.



filenames <- list.files(pattern = "^file\\d+\\.txt$")
destnames <- sapply(filenames, scan, what = character(), sep = "\n", n = 
1L, strip.white = TRUE)

if(length(filenames) == length(destnames))
? file.rename(filenames, destnames)
else message("something went wrong")



But I would make copies of 2 or 3 files first and test with, say,

filenames[1:2] and destnames[1:2]


Hope this helps,

Rui Barradas

?s 18:51 de 16/09/2022, Kai Yang escreveu:
>? Hello,Here is the example:
>? ??file name? ? first row??file1.txt? ? ?abc.txt??file2.txt? ? ?bed.txt??file3.txt? ? ?gogo.txt??.?.?file1243.txt? ? last.txt
> I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated.?Thanks,?Kai? ? On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>? 
>? Hello,
> 
> Please post the first row of 2 or 3 files and the expected result.
> 
> You can rename files with ?file.rename. This function is vectorized its
> on arguments so you do not need a loop, only the source and destination
> filenames. Both vectors should have the same length, if not strange
> things will occur including data loss.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
>> Hello,I have a lot of files with not meaningful name, such as:? file1.txt, file2.txt ...... I need to rename them using the information from the first row of the files. Now I can get the information from the first row of each file. Now, I need know how to rename them in R (using loop?).?Thank you for your helpKai
>>
>>
>>? ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>? ? 
  
	[[alternative HTML version deleted]]


From k@y|@@b@zz@n@ @end|ng |rom m@||@utoronto@c@  Fri Sep 16 15:48:55 2022
From: k@y|@@b@zz@n@ @end|ng |rom m@||@utoronto@c@ (Kayla Bazzana)
Date: Fri, 16 Sep 2022 13:48:55 +0000
Subject: [R] nlme gls issue
Message-ID: <YT3PR01MB5938E2E96B2E94B331AC62E4CA489@YT3PR01MB5938.CANPRD01.PROD.OUTLOOK.COM>

Hi there,

I'm having issues running a gls within the nlme package that neither I nor any of my colleagues can figure out. The gls itself seems to run fine (i.e. doesn't give an error message and produces a seemingly normal summary output), but when I try to calculate the rsquared of the gls model, it simply returns an "NA". Is this an issue you've encountered before? If so, can you point me in the right direction of how to remedy it?

Thank you!
Kayla

-------------------
Kayla Bazzana (she/her)
Ph.D. Candidate, Evans Lab
Department of Natural History, Royal Ontario Museum
Department of Ecology and Evolutionary Biology, University of Toronto


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Sep 17 00:34:38 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 16 Sep 2022 23:34:38 +0100
Subject: [R] rename files in R
In-Reply-To: <1757366261.2612528.1663352668960@mail.yahoo.com>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
 <5976c8fc-2070-aa81-69ed-59325cfd1dd7@sapo.pt>
 <1757366261.2612528.1663352668960@mail.yahoo.com>
Message-ID: <3d75fd33-b1be-a0b3-3c6e-d9ea60a35ff5@sapo.pt>

Hello,

Sorry, it should be


if(length(filenames) == length(destnames)) {
   file.ename(filenames, destname)
} else message("something went wrong")


Hope this helps,

Rui Barradas

?s 19:24 de 16/09/2022, Kai Yang escreveu:
>   Thank you. I'll try this. --- Kai
>      On Friday, September 16, 2022 at 11:01:33 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>   
>   Hello,
> 
> Something like the following might work.
> 
> 
> 
> filenames <- list.files(pattern = "^file\\d+\\.txt$")
> destnames <- sapply(filenames, scan, what = character(), sep = "\n", n =
> 1L, strip.white = TRUE)
> 
> if(length(filenames) == length(destnames))
>  ? file.rename(filenames, destnames)
> else message("something went wrong")
> 
> 
> 
> But I would make copies of 2 or 3 files first and test with, say,
> 
> filenames[1:2] and destnames[1:2]
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 18:51 de 16/09/2022, Kai Yang escreveu:
>>  ? Hello,Here is the example:
>>  ? ??file name? ? first row??file1.txt? ? ?abc.txt??file2.txt? ? ?bed.txt??file3.txt? ? ?gogo.txt??.?.?file1243.txt? ? last.txt
>> I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated.?Thanks,?Kai? ? On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>    
>>  ? Hello,
>>
>> Please post the first row of 2 or 3 files and the expected result.
>>
>> You can rename files with ?file.rename. This function is vectorized its
>> on arguments so you do not need a loop, only the source and destination
>> filenames. Both vectors should have the same length, if not strange
>> things will occur including data loss.
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
>>> Hello,I have a lot of files with not meaningful name, such as:? file1.txt, file2.txt ...... I need to rename them using the information from the first row of the files. Now I can get the information from the first row of each file. Now, I need know how to rename them in R (using loop?).?Thank you for your helpKai
>>>
>>>
>>>  ? ??? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>      
>


From @vi@e@gross m@iii@g oii gm@ii@com  Sat Sep 17 02:06:40 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Fri, 16 Sep 2022 20:06:40 -0400
Subject: [R] rename files in R
In-Reply-To: <3d75fd33-b1be-a0b3-3c6e-d9ea60a35ff5@sapo.pt>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
 <5976c8fc-2070-aa81-69ed-59325cfd1dd7@sapo.pt>
 <1757366261.2612528.1663352668960@mail.yahoo.com>
 <3d75fd33-b1be-a0b3-3c6e-d9ea60a35ff5@sapo.pt>
Message-ID: <005701d8ca29$5d4fa440$17eeecc0$@gmail.com>

Just a suggestion to add to blindly renaming a file.

The request was for opening a file and reading something on the first line that is used to construct a filename.

Fine but make a checklist including items like this that may apply to your need.

- CLOSE any open file before renaming it.
- Make sure the name is UNIQUE so you do not over-write an existing file or fail because the new name is in use.
- Make sure the filename chosen  is valid on your target device and usable. That may mean avoiding some characters or suppressing spaces or replacing them with an underscore, making sure it does not start with a digit if that matters, and so on. And make sure you have a period and extension characters like .txt if that is needed and any number of other such considerations.
- Until you are SURE consider making a backup copy of the files in some way rather than just blindly renaming them.

If you encounter issues, decide on a secondary strategy. For example, if the header line on two files is identical, thus by the time you get to the second, file XYY.txt already appears, what do you do? Do you leave file69 alone or maybe name it XYZ2.txt or some other scheme of your choice? Note that this can get complex if you have dozens of files trying to be named the same.

Only YOU know what your files and data are like and what results you want. People here can only answer your question on the mechanics of how to do the one thing you asked for: renaming. Even then, please look carefully as the example blow accidentally asks you to "ename(...)" and my guess is that won't do what you want.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rui Barradas
Sent: Friday, September 16, 2022 6:35 PM
To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
Subject: Re: [R] rename files in R

Hello,

Sorry, it should be


if(length(filenames) == length(destnames)) {
   file.ename(filenames, destname)
} else message("something went wrong")


Hope this helps,

Rui Barradas

?s 19:24 de 16/09/2022, Kai Yang escreveu:
>   Thank you. I'll try this. --- Kai
>      On Friday, September 16, 2022 at 11:01:33 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>   
>   Hello,
> 
> Something like the following might work.
> 
> 
> 
> filenames <- list.files(pattern = "^file\\d+\\.txt$") destnames <- 
> sapply(filenames, scan, what = character(), sep = "\n", n = 1L, 
> strip.white = TRUE)
> 
> if(length(filenames) == length(destnames))
>    file.rename(filenames, destnames)
> else message("something went wrong")
> 
> 
> 
> But I would make copies of 2 or 3 files first and test with, say,
> 
> filenames[1:2] and destnames[1:2]
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 18:51 de 16/09/2022, Kai Yang escreveu:
>>    Hello,Here is the example:
>>      file name    first row  file1.txt     abc.txt  file2.txt     
>> bed.txt  file3.txt     gogo.txt  . . file1243.txt    last.txt I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated. Thanks, Kai    On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>    
>>    Hello,
>>
>> Please post the first row of 2 or 3 files and the expected result.
>>
>> You can rename files with ?file.rename. This function is vectorized 
>> its on arguments so you do not need a loop, only the source and 
>> destination filenames. Both vectors should have the same length, if 
>> not strange things will occur including data loss.
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
>>> Hello,I have a lot of files with not meaningful name, such as:  
>>> file1.txt, file2.txt ...... I need to rename them using the 
>>> information from the first row of the files. Now I can get the 
>>> information from the first row of each file. Now, I need know how to 
>>> rename them in R (using loop?). Thank you for your helpKai
>>>
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>      
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Sat Sep 17 03:29:31 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sat, 17 Sep 2022 01:29:31 +0000
Subject: [R] rename files in R
In-Reply-To: <1484246431.2613424.1663350709591@mail.yahoo.com>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
Message-ID: <BN6PR2201MB1553037FD6E66739C5D5C00FCF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>

The syntax might not be quite right, but why not something like file.rename(colnames(dataframe)[1]) -- Using colnames to get the names of the columns that are in the first row, selecting the first element from colnames() and setting the file name equal to that.

Do a for loop using current file names in some folder, and save to a new folder.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
Sent: Friday, September 16, 2022 1:52 PM
To: R-help Mailing List <r-help at r-project.org>; Rui Barradas <ruipbarradas at sapo.pt>
Subject: Re: [R] rename files in R

[External Email]

 Hello,Here is the example:
  file name    first row  file1.txt     abc.txt  file2.txt     bed.txt  file3.txt     gogo.txt  . . file1243.txt    last.txt
I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated. Thanks, Kai    On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:

 Hello,

Please post the first row of 2 or 3 files and the expected result.

You can rename files with ?file.rename. This function is vectorized its on arguments so you do not need a loop, only the source and destination filenames. Both vectors should have the same length, if not strange things will occur including data loss.

Hope this helps,

Rui Barradas

?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
> Hello,I have a lot of files with not meaningful name, such as:  
> file1.txt, file2.txt ...... I need to rename them using the 
> information from the first row of the files. Now I can get the 
> information from the first row of each file. Now, I need know how to 
> rename them in R (using loop?). Thank you for your helpKai
>
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C637989475519163868%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=lPW2XrQntw3V7eJmxkaoOXK75%2FO1hWgRv7FO3%2B5O3OQ%3D&amp;rese
> rved=0 PLEASE do read the posting guide 
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&amp;reserve
> d=0 and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=tCreTbW2QEMePdooZNVmtpl6kKSVMXv9E0oIBYBTMBQ%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Sep 17 05:29:56 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 17 Sep 2022 15:29:56 +1200
Subject: [R] nlme gls issue
In-Reply-To: <YT3PR01MB5938E2E96B2E94B331AC62E4CA489@YT3PR01MB5938.CANPRD01.PROD.OUTLOOK.COM>
References: <YT3PR01MB5938E2E96B2E94B331AC62E4CA489@YT3PR01MB5938.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <20220917152956.00229140@rolf-Latitude-E7470>


On Fri, 16 Sep 2022 13:48:55 +0000
Kayla Bazzana <kayla.bazzana at mail.utoronto.ca> wrote:

> Hi there,
> 
> I'm having issues running a gls within the nlme package that neither
> I nor any of my colleagues can figure out. The gls itself seems to
> run fine (i.e. doesn't give an error message and produces a seemingly
> normal summary output), but when I try to calculate the rsquared of
> the gls model, it simply returns an "NA". Is this an issue you've
> encountered before? If so, can you point me in the right direction of
> how to remedy it?

I believe that fortunes::fortune(254), although not directly
applicable, might be relevant. :-)

If you *really* believe that r-squared makes some kind of sense in the
context of *generalised* least squares, you should probably direct
further enquires to r-sig-mixed-models.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Sep 17 05:32:50 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 17 Sep 2022 04:32:50 +0100
Subject: [R] rename files in R
In-Reply-To: <BN6PR2201MB1553037FD6E66739C5D5C00FCF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
 <BN6PR2201MB1553037FD6E66739C5D5C00FCF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <b16efed9-c366-d1a2-dac8-223b989c9749@sapo.pt>

Hello,

My understanding of the problem is different, the files' first row is 
not tabular data, I might be wrong but it seems to me that it's 
something like

first row [of] file1.txt [is]:
abc.txt

file2.txt:
bed.txt

etc.

That's why the sapply loop reads one datum only and exits.

Hope this helps,

Rui Barradas

?s 02:29 de 17/09/2022, Ebert,Timothy Aaron escreveu:
> The syntax might not be quite right, but why not something like file.rename(colnames(dataframe)[1]) -- Using colnames to get the names of the columns that are in the first row, selecting the first element from colnames() and setting the file name equal to that.
> 
> Do a for loop using current file names in some folder, and save to a new folder.
> 
> Tim
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
> Sent: Friday, September 16, 2022 1:52 PM
> To: R-help Mailing List <r-help at r-project.org>; Rui Barradas <ruipbarradas at sapo.pt>
> Subject: Re: [R] rename files in R
> 
> [External Email]
> 
>   Hello,Here is the example:
>    file name    first row  file1.txt     abc.txt  file2.txt     bed.txt  file3.txt     gogo.txt  . . file1243.txt    last.txt
> I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated. Thanks, Kai    On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
>   Hello,
> 
> Please post the first row of 2 or 3 files and the expected result.
> 
> You can rename files with ?file.rename. This function is vectorized its on arguments so you do not need a loop, only the source and destination filenames. Both vectors should have the same length, if not strange things will occur including data loss.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
>> Hello,I have a lot of files with not meaningful name, such as:
>> file1.txt, file2.txt ...... I need to rename them using the
>> information from the first row of the files. Now I can get the
>> information from the first row of each file. Now, I need know how to
>> rename them in R (using loop?). Thank you for your helpKai
>>
>>
>>      [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
>> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
>> .edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e
>> 1b84%7C0%7C0%7C637989475519163868%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
>> &amp;sdata=lPW2XrQntw3V7eJmxkaoOXK75%2FO1hWgRv7FO3%2B5O3OQ%3D&amp;rese
>> rved=0 PLEASE do read the posting guide
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
>> 7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%
>> 7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
>> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
>> sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&amp;reserve
>> d=0 and provide commented, minimal, self-contained, reproducible code.
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=tCreTbW2QEMePdooZNVmtpl6kKSVMXv9E0oIBYBTMBQ%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.


From @kw@|mmo @end|ng |rom gm@||@com  Sat Sep 17 07:40:33 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sat, 17 Sep 2022 01:40:33 -0400
Subject: [R] Returning Visibly / / Invisibly from C Function
Message-ID: <CAPcHnpSygi6n6=nO_0_S24ns51mWAWjMmeuKG_OXwYC=BfZy4g@mail.gmail.com>

Hello,


I'm working on a function envvars() which I'd like to get, set, and
remove environment variables in a manner similar to options(). At the
R level, I have this function:

envvars <- function (...)
.External2(C_envvars, pairlist(...))

and then at the C level:

#define set_R_Visible(X) (eval( (X) ? R_NilValue :
lang1(install("invisible")) , R_BaseEnv))

SEXP do_envvars(SEXP call, SEXP op, SEXP args, SEXP rho)
{
    // details omitted
    set_R_Visible(visible);  /* 0 or 1 for invisible or visible return */
    UNPROTECT(nprotect);
    return value;
}

This seems to work as intended, it returns invisibly when getting 0
environment variables (setting/unsetting are not counted as getting)
and returns visibly when getting >= 1 environment variables.

My concern is that this solution feels hack-ish, like it could easily
break in a future update. So, does anyone know of a more official way
to change the visibility of a return value from a C function? Thank
you!


From |uc@@heber @end|ng |rom out|ook@com  Sat Sep 17 22:07:08 2022
From: |uc@@heber @end|ng |rom out|ook@com (Lucas Heber Mariano Dos Santos)
Date: Sat, 17 Sep 2022 20:07:08 +0000
Subject: [R] nlme gls issue
In-Reply-To: <20220917152956.00229140@rolf-Latitude-E7470>
References: <YT3PR01MB5938E2E96B2E94B331AC62E4CA489@YT3PR01MB5938.CANPRD01.PROD.OUTLOOK.COM>
 <20220917152956.00229140@rolf-Latitude-E7470>
Message-ID: <BL3PR14MB5532EAB6F68D4A21D820F5E2CC4B9@BL3PR14MB5532.namprd14.prod.outlook.com>

You shouldn't use use r-squared in the context of glm, in fact it's not possible. But if you need try calculating pseudo r-squared values
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Rolf Turner <r.turner at auckland.ac.nz>
Sent: Saturday, September 17, 2022 12:29:56 AM
To: Kayla Bazzana <kayla.bazzana at mail.utoronto.ca>
Cc: R-help at r-project.org <R-help at r-project.org>
Subject: Re: [R] nlme gls issue


On Fri, 16 Sep 2022 13:48:55 +0000
Kayla Bazzana <kayla.bazzana at mail.utoronto.ca> wrote:

> Hi there,
>
> I'm having issues running a gls within the nlme package that neither
> I nor any of my colleagues can figure out. The gls itself seems to
> run fine (i.e. doesn't give an error message and produces a seemingly
> normal summary output), but when I try to calculate the rsquared of
> the gls model, it simply returns an "NA". Is this an issue you've
> encountered before? If so, can you point me in the right direction of
> how to remedy it?

I believe that fortunes::fortune(254), although not directly
applicable, might be relevant. :-)

If you *really* believe that r-squared makes some kind of sense in the
context of *generalised* least squares, you should probably direct
further enquires to r-sig-mixed-models.

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sun Sep 18 02:09:58 2022
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Sun, 18 Sep 2022 00:09:58 +0000
Subject: [R] Remove line from data file
Message-ID: <BE4F56C5-997C-4618-ABED-CFE4343EE098@indiana.edu>

I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it.  I?ve created a data file and need to delete one row from it.  How do I do that?

DFP (iPad)

From po|c1410 @end|ng |rom gm@||@com  Sun Sep 18 13:25:15 2022
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sun, 18 Sep 2022 12:25:15 +0100
Subject: [R] Remove line from data file
In-Reply-To: <BE4F56C5-997C-4618-ABED-CFE4343EE098@indiana.edu>
References: <BE4F56C5-997C-4618-ABED-CFE4343EE098@indiana.edu>
Message-ID: <CA+etgPnAjYK+d40NGEJ4qtuHtdEbU79jCnCrAwKiX3Lswx9ALA@mail.gmail.com>

From the file? Or the data frame once its loaded?

What format is the file? CSV?

Do you know the line that needs deleted?

mydf <- read.csv("myfile.csv")

mydf2 <- mydf[-columnName == "valuetodelete", ]
# Note the - infront of column name
# or perhaps columnName != "value to delete", ]

write.csv(mydf2, "mydeletedfile.csv")




On Sun, 18 Sep 2022, 10:33 Parkhurst, David, <parkhurs at indiana.edu> wrote:

> I?ve been retired since ?06 and have forgotten most of R.  Now I have a
> use for it.  I?ve created a data file and need to delete one row from it.
> How do I do that?
>
> DFP (iPad)
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From po|c1410 @end|ng |rom gm@||@com  Sun Sep 18 14:55:23 2022
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sun, 18 Sep 2022 13:55:23 +0100
Subject: [R] Remove line from data file
In-Reply-To: <BN7PR08MB41140606AC40227B2116F0D5D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BE4F56C5-997C-4618-ABED-CFE4343EE098@indiana.edu>
 <CA+etgPnAjYK+d40NGEJ4qtuHtdEbU79jCnCrAwKiX3Lswx9ALA@mail.gmail.com>
 <BN7PR08MB41140606AC40227B2116F0D5D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <CA+etgP=W5vH4xAgNVD67FzMcebScQ6sLBB+n-WN4VH8o-+bZWQ@mail.gmail.com>

If you want to delete row 18 you can do

mydf <- mydf[-18,]

This selects all rows other than row 18, and all columns and 'saves' it
back to the original data frame. Many people prefer to allocate to a new
dataframe so that if the -18 is wrong they can simply fix things.

I wasn't sure if you knew the row you wanted to delete. If you had a frame
with names and ages in. David Parkhurst might be row 18 and you might want
to delete him. But if the data is ever updated, he may move row.  If you
always want to delete David, it would be better to do:

mydf2 <- mydf[name != "David Parkhurst", ]




On Sun, 18 Sep 2022, 13:48 Parkhurst, David, <parkhurs at indiana.edu> wrote:

> Thank you for your reply.  I meant from the dataframe, but that?s one of
> the terms I had forgotten.  I created that from read.csv, the csv file
> coming from Excel.  Last night I went ahead and made the change(s) using
> Excel.
>
>
>
> For future reference, when I look at your solutions below, what do you
> mean by ?value to delete??  Could that just be a row number?  I was wanting
> to delete something like the 18th row in the dataframe?
>
>
>
> *From: *CALUM POLWART <polc1410 at gmail.com>
> *Date: *Sunday, September 18, 2022 at 7:25 AM
> *To: *Parkhurst, David <parkhurs at indiana.edu>
> *Cc: *R-help at r-project.org <R-help at r-project.org>
> *Subject: *Re: [R] Remove line from data file
>
> From the file? Or the data frame once its loaded?
>
>
>
> What format is the file? CSV?
>
>
>
> Do you know the line that needs deleted?
>
>
>
> mydf <- read.csv("myfile.csv")
>
>
>
> mydf2 <- mydf[-columnName == "valuetodelete", ]
>
> # Note the - infront of column name
>
> # or perhaps columnName != "value to delete", ]
>
>
>
> write.csv(mydf2, "mydeletedfile.csv")
>
>
>
>
>
>
>
>
>
> On Sun, 18 Sep 2022, 10:33 Parkhurst, David, <parkhurs at indiana.edu> wrote:
>
> I?ve been retired since ?06 and have forgotten most of R.  Now I have a
> use for it.  I?ve created a data file and need to delete one row from it.
> How do I do that?
>
> DFP (iPad)
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Sun Sep 18 21:39:50 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sun, 18 Sep 2022 20:39:50 +0100
Subject: [R] removing non-table lines
Message-ID: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>

Hello - I am having to download lots of rainfall and temperature data in
csv form from the UK Met Office.  The data isn't a problem - it's in nice
columns and can be read into R easily - the problem is that in each csv
there are 60 or so lines of information first which are not part of the
columnar data.  If I read the whole csv into R the column data is now
longer in columns but in some disorganised form - if I manually delete all
the text lines above and download I get a nice neat data table.  As the
text lines can't be identified in R by line numbers etc I can't find a way
of deleting them in R and atm have to do it by hand which is slow.  It
might be possible to write a complicated and dirty algorithm to rearrange
the meteorological data back into columns but I suspect that it might be
hard to get right and consistent across every csv sheet and any errors
might be hard to spot.   I can't find anything on the net about this - has
anyone else had to deal with this problem and if so do they have any
solutions using R?
Thanks Nick Wray

	[[alternative HTML version deleted]]


From po|c1410 @end|ng |rom gm@||@com  Sun Sep 18 21:45:05 2022
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sun, 18 Sep 2022 20:45:05 +0100
Subject: [R] removing non-table lines
In-Reply-To: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>
References: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>
Message-ID: <CA+etgP=z2Z90zXu615Q6E5uQFASsC+QvX7Ym_2zPotz9ThGuDg@mail.gmail.com>

Can you provide a sample of say the first 3 rows then the last 2 rows
before the CSV starts.

Are there always the same number of lines at the top? Or can it vary
depending what non-sense the Met Office decided to contaminate it with?

This should be solvable with some sample data.

Base R or Tidyverse? Any limitations on packages (e.g. stringr?)

On Sun, 18 Sep 2022, 20:40 Nick Wray, <nickmwray at gmail.com> wrote:

> Hello - I am having to download lots of rainfall and temperature data in
> csv form from the UK Met Office.  The data isn't a problem - it's in nice
> columns and can be read into R easily - the problem is that in each csv
> there are 60 or so lines of information first which are not part of the
> columnar data.  If I read the whole csv into R the column data is now
> longer in columns but in some disorganised form - if I manually delete all
> the text lines above and download I get a nice neat data table.  As the
> text lines can't be identified in R by line numbers etc I can't find a way
> of deleting them in R and atm have to do it by hand which is slow.  It
> might be possible to write a complicated and dirty algorithm to rearrange
> the meteorological data back into columns but I suspect that it might be
> hard to get right and consistent across every csv sheet and any errors
> might be hard to spot.   I can't find anything on the net about this - has
> anyone else had to deal with this problem and if so do they have any
> solutions using R?
> Thanks Nick Wray
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Sep 18 23:31:56 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 18 Sep 2022 14:31:56 -0700
Subject: [R] removing non-table lines
In-Reply-To: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>
References: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>
Message-ID: <267647C8-62D2-4C8B-811C-71F9C4CCD3C3@dcn.davis.ca.us>

Use the skip parameter if the number of header lines is always the same.

On September 18, 2022 12:39:50 PM PDT, Nick Wray <nickmwray at gmail.com> wrote:
>Hello - I am having to download lots of rainfall and temperature data in
>csv form from the UK Met Office.  The data isn't a problem - it's in nice
>columns and can be read into R easily - the problem is that in each csv
>there are 60 or so lines of information first which are not part of the
>columnar data.  If I read the whole csv into R the column data is now
>longer in columns but in some disorganised form - if I manually delete all
>the text lines above and download I get a nice neat data table.  As the
>text lines can't be identified in R by line numbers etc I can't find a way
>of deleting them in R and atm have to do it by hand which is slow.  It
>might be possible to write a complicated and dirty algorithm to rearrange
>the meteorological data back into columns but I suspect that it might be
>hard to get right and consistent across every csv sheet and any errors
>might be hard to spot.   I can't find anything on the net about this - has
>anyone else had to deal with this problem and if so do they have any
>solutions using R?
>Thanks Nick Wray
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Sep 19 00:18:36 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 18 Sep 2022 23:18:36 +0100
Subject: [R] removing non-table lines
In-Reply-To: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>
References: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>
Message-ID: <c992cd75-65ee-79e8-dcc6-af6b184f1668@sapo.pt>

Helo,

Unfortunatelly there are many files with a non tabular data section 
followed by the data. R's read.table has a skip argument:

skip	
integer: the number of lines of the data file to skip before beginning 
to read data.

If you do not know how many lines to skip because it's not always the 
same number, here are some ideas.

Is there a pattern in the initial section? Maybe a end-of-section line 
or maybe the text lines come in a specified order and a last line in 
that order can be detected with a regex.

Is there a pattern in the tables' column headers? Once again a regex 
might be the solution.

Is the number of initial lines variable because there are file versions? 
If there are, did the versions evolve over time, a frequent case?

What you describe is not unfrequent, it's always a nuisance and error 
prone but it should be solvable once patterns are found. Inspect a small 
number of files with a text editor and try to find both common points 
and differences. That's half way to a solution.

Hope this helps,

Rui Barradas

?s 20:39 de 18/09/2022, Nick Wray escreveu:
> Hello - I am having to download lots of rainfall and temperature data in
> csv form from the UK Met Office.  The data isn't a problem - it's in nice
> columns and can be read into R easily - the problem is that in each csv
> there are 60 or so lines of information first which are not part of the
> columnar data.  If I read the whole csv into R the column data is now
> longer in columns but in some disorganised form - if I manually delete all
> the text lines above and download I get a nice neat data table.  As the
> text lines can't be identified in R by line numbers etc I can't find a way
> of deleting them in R and atm have to do it by hand which is slow.  It
> might be possible to write a complicated and dirty algorithm to rearrange
> the meteorological data back into columns but I suspect that it might be
> hard to get right and consistent across every csv sheet and any errors
> might be hard to spot.   I can't find anything on the net about this - has
> anyone else had to deal with this problem and if so do they have any
> solutions using R?
> Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @vi@e@gross m@iii@g oii gm@ii@com  Mon Sep 19 01:25:50 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sun, 18 Sep 2022 19:25:50 -0400
Subject: [R] removing non-table lines
In-Reply-To: <c992cd75-65ee-79e8-dcc6-af6b184f1668@sapo.pt>
References: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>
 <c992cd75-65ee-79e8-dcc6-af6b184f1668@sapo.pt>
Message-ID: <001c01d8cbb5$fd8f3690$f8ada3b0$@gmail.com>

Adding to what Nick said, extra lines like those described often are in some comment format like beginning with "#" or some consistent characters that can be filtered out using comment.char='#' for example in read.csv() or comment="string" in the tidyverse function read_csv().

And, of course you can skip lines if that makes sense albeit it can be tricky with header lines.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rui Barradas
Sent: Sunday, September 18, 2022 6:19 PM
To: Nick Wray <nickmwray at gmail.com>; r-help at r-project.org
Subject: Re: [R] removing non-table lines

Helo,

Unfortunatelly there are many files with a non tabular data section followed by the data. R's read.table has a skip argument:

skip	
integer: the number of lines of the data file to skip before beginning to read data.

If you do not know how many lines to skip because it's not always the same number, here are some ideas.

Is there a pattern in the initial section? Maybe a end-of-section line or maybe the text lines come in a specified order and a last line in that order can be detected with a regex.

Is there a pattern in the tables' column headers? Once again a regex might be the solution.

Is the number of initial lines variable because there are file versions? 
If there are, did the versions evolve over time, a frequent case?

What you describe is not unfrequent, it's always a nuisance and error prone but it should be solvable once patterns are found. Inspect a small number of files with a text editor and try to find both common points and differences. That's half way to a solution.

Hope this helps,

Rui Barradas

?s 20:39 de 18/09/2022, Nick Wray escreveu:
> Hello - I am having to download lots of rainfall and temperature data 
> in csv form from the UK Met Office.  The data isn't a problem - it's 
> in nice columns and can be read into R easily - the problem is that in 
> each csv there are 60 or so lines of information first which are not 
> part of the columnar data.  If I read the whole csv into R the column 
> data is now longer in columns but in some disorganised form - if I 
> manually delete all the text lines above and download I get a nice 
> neat data table.  As the text lines can't be identified in R by line 
> numbers etc I can't find a way of deleting them in R and atm have to 
> do it by hand which is slow.  It might be possible to write a 
> complicated and dirty algorithm to rearrange the meteorological data 
> back into columns but I suspect that it might be hard to get right and consistent across every csv sheet and any errors
> might be hard to spot.   I can't find anything on the net about this - has
> anyone else had to deal with this problem and if so do they have any 
> solutions using R?
> Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From p@u|bern@|07 @end|ng |rom gm@||@com  Mon Sep 19 06:01:43 2022
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Sun, 18 Sep 2022 23:01:43 -0500
Subject: [R] Issues when trying to fit a curve when generating random
 deviates
Message-ID: <CAMOcQfMOFC7T30YGvPapRFEjR7_cg3t=CBGqzYJm1axdTQdSrQ@mail.gmail.com>

Dear friends,

Hope you are doing great.

I first generated random deviates from a binomial distribution with the
following code (I had to generate from a B(20,0.4) dist):
#Setting seed
set.seed(1234567)

#Generating 1000 random deviates from a B(20,0.4) Distribution
x <- rbinom(1000,20,0.4)
#Generating histogram for x
hist(x, col = c("green"),main="Histogram of Binomial Distribution
B(20,0.4)",freq=F)
#Generating the curve for x
There were 50 or more warnings (use warnings() to see the first 50)
warnings()
#the first 5 warnings are shown, but all the warnings are similar
Warning messages:
1: In dbinom(x, 1000, 0.4) : non-integer x = 2.120000
2: In dbinom(x, 1000, 0.4) : non-integer x = 2.240000
3: In dbinom(x, 1000, 0.4) : non-integer x = 2.360000
4: In dbinom(x, 1000, 0.4) : non-integer x = 2.480000
5: In dbinom(x, 1000, 0.4) : non-integer x = 2.600000
and the curve was not generated for the histogram.

Any ideas on what I could be doing wrong?

Best regards,

Paul

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Sep 19 06:44:29 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 19 Sep 2022 05:44:29 +0100
Subject: [R] Issues when trying to fit a curve when generating random
 deviates
In-Reply-To: <CAMOcQfMOFC7T30YGvPapRFEjR7_cg3t=CBGqzYJm1axdTQdSrQ@mail.gmail.com>
References: <CAMOcQfMOFC7T30YGvPapRFEjR7_cg3t=CBGqzYJm1axdTQdSrQ@mail.gmail.com>
Message-ID: <eb4e89ef-47d1-5811-882c-54338159b005@sapo.pt>

Hello,

I cannot reproduce the error.

Anyway, if the data is discrete a bar plot might be more appropriate.


barplot(table(x),
         col = "green",
         main = "Bar plot of Binomial Distribution B(20,0.4)")


Or, to have proportions,

barplot(table(x)/length(x), etc)


Hope this helps,

Rui Barradas

?s 05:01 de 19/09/2022, Paul Bernal escreveu:
> Dear friends,
> 
> Hope you are doing great.
> 
> I first generated random deviates from a binomial distribution with the
> following code (I had to generate from a B(20,0.4) dist):
> #Setting seed
> set.seed(1234567)
> 
> #Generating 1000 random deviates from a B(20,0.4) Distribution
> x <- rbinom(1000,20,0.4)
> #Generating histogram for x
> hist(x, col = c("green"),main="Histogram of Binomial Distribution
> B(20,0.4)",freq=F)
> #Generating the curve for x
> There were 50 or more warnings (use warnings() to see the first 50)
> warnings()
> #the first 5 warnings are shown, but all the warnings are similar
> Warning messages:
> 1: In dbinom(x, 1000, 0.4) : non-integer x = 2.120000
> 2: In dbinom(x, 1000, 0.4) : non-integer x = 2.240000
> 3: In dbinom(x, 1000, 0.4) : non-integer x = 2.360000
> 4: In dbinom(x, 1000, 0.4) : non-integer x = 2.480000
> 5: In dbinom(x, 1000, 0.4) : non-integer x = 2.600000
> and the curve was not generated for the histogram.
> 
> Any ideas on what I could be doing wrong?
> 
> Best regards,
> 
> Paul
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From djnord|und @end|ng |rom gm@||@com  Mon Sep 19 08:16:49 2022
From: djnord|und @end|ng |rom gm@||@com (Daniel Nordlund)
Date: Sun, 18 Sep 2022 23:16:49 -0700
Subject: [R] Issues when trying to fit a curve when generating random
 deviates
In-Reply-To: <eb4e89ef-47d1-5811-882c-54338159b005@sapo.pt>
References: <CAMOcQfMOFC7T30YGvPapRFEjR7_cg3t=CBGqzYJm1axdTQdSrQ@mail.gmail.com>
 <eb4e89ef-47d1-5811-882c-54338159b005@sapo.pt>
Message-ID: <52137750-ab0a-06cf-ae5c-9b5a4a883fc6@gmail.com>

On 9/18/2022 9:44 PM, Rui Barradas wrote:
> Hello,
>
> I cannot reproduce the error.
>
> Anyway, if the data is discrete a bar plot might be more appropriate.
>
>
> barplot(table(x),
> ??????? col = "green",
> ??????? main = "Bar plot of Binomial Distribution B(20,0.4)")
>
>
> Or, to have proportions,
>
> barplot(table(x)/length(x), etc)
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 05:01 de 19/09/2022, Paul Bernal escreveu:
>> Dear friends,
>>
>> Hope you are doing great.
>>
>> I first generated random deviates from a binomial distribution with the
>> following code (I had to generate from a B(20,0.4) dist):
>> #Setting seed
>> set.seed(1234567)
>>
>> #Generating 1000 random deviates from a B(20,0.4) Distribution
>> x <- rbinom(1000,20,0.4)
>> #Generating histogram for x
>> hist(x, col = c("green"),main="Histogram of Binomial Distribution
>> B(20,0.4)",freq=F)
>> #Generating the curve for x
>> There were 50 or more warnings (use warnings() to see the first 50)
>> warnings()
>> #the first 5 warnings are shown, but all the warnings are similar
>> Warning messages:
>> 1: In dbinom(x, 1000, 0.4) : non-integer x = 2.120000
>> 2: In dbinom(x, 1000, 0.4) : non-integer x = 2.240000
>> 3: In dbinom(x, 1000, 0.4) : non-integer x = 2.360000
>> 4: In dbinom(x, 1000, 0.4) : non-integer x = 2.480000
>> 5: In dbinom(x, 1000, 0.4) : non-integer x = 2.600000
>> and the curve was not generated for the histogram.
>>
>> Any ideas on what I could be doing wrong?
>>
>> Best regards,
>>
>> Paul
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Paul,

I don't see the code you used to generate the curve. What kind of curve 
are you trying to plot, and why are you trying to plot that curve? As 
Rui suggested, it typically doesn't make sense to use line plots to 
represent discrete data.? If you explain what your end goal is, someone 
may be able to provide better help.

Dan

-- 
Daniel Nordlund
Port Townsend, WA  USA


-- 
This email has been checked for viruses by Avast antivirus software.
www.avast.com


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sun Sep 18 14:48:47 2022
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Sun, 18 Sep 2022 12:48:47 +0000
Subject: [R] Remove line from data file
In-Reply-To: <CA+etgPnAjYK+d40NGEJ4qtuHtdEbU79jCnCrAwKiX3Lswx9ALA@mail.gmail.com>
References: <BE4F56C5-997C-4618-ABED-CFE4343EE098@indiana.edu>
 <CA+etgPnAjYK+d40NGEJ4qtuHtdEbU79jCnCrAwKiX3Lswx9ALA@mail.gmail.com>
Message-ID: <BN7PR08MB41140606AC40227B2116F0D5D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>

Thank you for your reply.  I meant from the dataframe, but that?s one of the terms I had forgotten.  I created that from read.csv, the csv file coming from Excel.  Last night I went ahead and made the change(s) using Excel.

For future reference, when I look at your solutions below, what do you mean by ?value to delete??  Could that just be a row number?  I was wanting to delete something like the 18th row in the dataframe?

From: CALUM POLWART <polc1410 at gmail.com>
Date: Sunday, September 18, 2022 at 7:25 AM
To: Parkhurst, David <parkhurs at indiana.edu>
Cc: R-help at r-project.org <R-help at r-project.org>
Subject: Re: [R] Remove line from data file
From the file? Or the data frame once its loaded?

What format is the file? CSV?

Do you know the line that needs deleted?

mydf <- read.csv("myfile.csv")

mydf2 <- mydf[-columnName == "valuetodelete", ]
# Note the - infront of column name
# or perhaps columnName != "value to delete", ]

write.csv(mydf2, "mydeletedfile.csv")




On Sun, 18 Sep 2022, 10:33 Parkhurst, David, <parkhurs at indiana.edu<mailto:parkhurs at indiana.edu>> wrote:
I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it.  I?ve created a data file and need to delete one row from it.  How do I do that?

DFP (iPad)
______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Sep 19 10:23:11 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 19 Sep 2022 11:23:11 +0300
Subject: [R] removing non-table lines
In-Reply-To: <001c01d8cbb5$fd8f3690$f8ada3b0$@gmail.com>
References: <CABxY9BNkd_WUk1S9RQuNUj_ZpivTS=+x_0yr0SENmeh2hJP6Pg@mail.gmail.com>
 <c992cd75-65ee-79e8-dcc6-af6b184f1668@sapo.pt>
 <001c01d8cbb5$fd8f3690$f8ada3b0$@gmail.com>
Message-ID: <CAGgJW759=so0t1u0Jh6ZU9Bo_6ZWF59=WPRHdq74_HfwoyiK3g@mail.gmail.com>

Hi Nick,

Here's one way to do it. It is based on the heuristic that you keep
each line with the correct number of fields. The correct number of
fields is automatically determined by the number of fields in the last
line of the file.

Here's the contents of a sample csv file - "tmp3.csv" where the first
few rows contain random garbage text.

Collecting numpy
Downloading numpy-1.23.1.tar.gz (10.7 MB)
???????????????????????
10.7/10.7 MB 14.8 MB/s eta 0:00:00
Installing build dependencies: started
Installing build dependencies: finished with status 'error'
2003-07-25,100,100
2003-07-28,102.51597849244192,100
2003-07-29,102.85076595312975,102.51597849244192
2003-07-30,101.62321193060768,102.85076595312975
2003-07-31,102.008724764127,101.62321193060768

Here is my R code to process this file

library(readr)

g <- function(s) { length(unlist(strsplit(s,","))) }

processFile <- function(filename) {
    a <- readr::read_lines(filename)
    N <- g(a[length(a)]) ## get the "correct" number of columns from
the last row
    a2 <- sapply(a, \(x) strsplit(x,","))   ## split each row into its
comma-separated fields
    names(a2) <- NULL
    iV <- unlist(lapply(a2, function(x) {g(x) == N}))   ## identify
the rows with exactly N fields
    a2 <- a2[iV] ## heuristic: keep only the lines with N fields
    a3 <- as.data.frame(do.call(rbind,a2))
    a3
}

myDf <- processFile("tmp3.csv")
print(myDf)

HTH,
Eric

On Mon, Sep 19, 2022 at 2:26 AM <avi.e.gross at gmail.com> wrote:
>
> Adding to what Nick said, extra lines like those described often are in some comment format like beginning with "#" or some consistent characters that can be filtered out using comment.char='#' for example in read.csv() or comment="string" in the tidyverse function read_csv().
>
> And, of course you can skip lines if that makes sense albeit it can be tricky with header lines.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Rui Barradas
> Sent: Sunday, September 18, 2022 6:19 PM
> To: Nick Wray <nickmwray at gmail.com>; r-help at r-project.org
> Subject: Re: [R] removing non-table lines
>
> Helo,
>
> Unfortunatelly there are many files with a non tabular data section followed by the data. R's read.table has a skip argument:
>
> skip
> integer: the number of lines of the data file to skip before beginning to read data.
>
> If you do not know how many lines to skip because it's not always the same number, here are some ideas.
>
> Is there a pattern in the initial section? Maybe a end-of-section line or maybe the text lines come in a specified order and a last line in that order can be detected with a regex.
>
> Is there a pattern in the tables' column headers? Once again a regex might be the solution.
>
> Is the number of initial lines variable because there are file versions?
> If there are, did the versions evolve over time, a frequent case?
>
> What you describe is not unfrequent, it's always a nuisance and error prone but it should be solvable once patterns are found. Inspect a small number of files with a text editor and try to find both common points and differences. That's half way to a solution.
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 20:39 de 18/09/2022, Nick Wray escreveu:
> > Hello - I am having to download lots of rainfall and temperature data
> > in csv form from the UK Met Office.  The data isn't a problem - it's
> > in nice columns and can be read into R easily - the problem is that in
> > each csv there are 60 or so lines of information first which are not
> > part of the columnar data.  If I read the whole csv into R the column
> > data is now longer in columns but in some disorganised form - if I
> > manually delete all the text lines above and download I get a nice
> > neat data table.  As the text lines can't be identified in R by line
> > numbers etc I can't find a way of deleting them in R and atm have to
> > do it by hand which is slow.  It might be possible to write a
> > complicated and dirty algorithm to rearrange the meteorological data
> > back into columns but I suspect that it might be hard to get right and consistent across every csv sheet and any errors
> > might be hard to spot.   I can't find anything on the net about this - has
> > anyone else had to deal with this problem and if so do they have any
> > solutions using R?
> > Thanks Nick Wray
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Sun Sep 18 22:27:00 2022
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Sun, 18 Sep 2022 20:27:00 +0000
Subject: [R] Need help plotting
Message-ID: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>

I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it, with some data from Bloomington?s Environmental Commission.

I have a dataframe (obtained from read.csv) that contains numerous columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from two air quality instruments.

I?d like a plot of both the NO2 measurements against time.  I be happy to use either ordinary R plots or ggplot2 ones, if that would be a better way.  I?d much appreciate help.

	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Sep 19 02:56:47 2022
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Mon, 19 Sep 2022 00:56:47 +0000
Subject: [R] Converting time format
Message-ID: <BN7PR08MB4114F982E70E477961F394B8D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>

I have a dataframe obtained using read.csv from an excel file.  Its first column is times, running from 18:00 to 19:30.  If I want to plot other columns against time, do I need to convert those somehow, and how would I do that?

If I run plot(b$time,b$myvar) I get a decent plot, but a friend suggests that R is just treating those numbers as text, and putting them in alphabetical order.  True?

	[[alternative HTML version deleted]]


From tibor@kiss m@iii@g oii rub@de  Mon Sep 19 12:10:47 2022
From: tibor@kiss m@iii@g oii rub@de (tibor@kiss m@iii@g oii rub@de)
Date: Mon, 19 Sep 2022 12:10:47 +0200
Subject: [R] Question concerning side effects of treating invalid factor
 levels
Message-ID: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>

Dear List members,

I have tried now for several times to find out about a side effect of treating invalid factor levels, but did not find an answer. Various answers on stackexchange etc. produce the stuff that irritates me without even mentioning it. 
So I am asking the list (apologies if this has been treated in the past).

If you add an invalid factor level to a column in a data frame, this has the side effect of turning a numerical column into a column with character strings. Here is a simple example:

> df <- data.frame(
	P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
	ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))), 
	RT = round(runif(6, 7000, 16000), 0))

> str(df)
'data.frame':	6 obs. of  3 variables:
$ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1
$ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1
$ RT    : num  11157 13719 14388 14527 14686 ..

> df <- rbind(df, c("in", "V>N", round(runif(1, 7000, 16000), 0)))

> str(df)
'data.frame':	7 obs. of  3 variables:
$ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1 NA
$ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1 NA
$ RT    : chr  "11478" "15819" "8305" "8852" ?

You see that RT has changed from _num_ to _chr_ as a side effect of adding the invalid factor level as NA. I would appreciate understanding what the purpose of the type coercion is.

Thanks in advance


Tibor

From er|cjberger @end|ng |rom gm@||@com  Mon Sep 19 13:19:47 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 19 Sep 2022 14:19:47 +0300
Subject: [R] Converting time format
In-Reply-To: <BN7PR08MB4114F982E70E477961F394B8D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114F982E70E477961F394B8D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <CAGgJW77NDWtE_6WU23RHQ=-T9xxEP6nqqXp6dBMwipE=cdHZkg@mail.gmail.com>

What is the output of

> class(b$time)

?

Also, start sending your emails in plaint text format, if possible.

On Mon, Sep 19, 2022 at 2:12 PM Parkhurst, David <parkhurs at indiana.edu> wrote:
>
> I have a dataframe obtained using read.csv from an excel file.  Its first column is times, running from 18:00 to 19:30.  If I want to plot other columns against time, do I need to convert those somehow, and how would I do that?
>
> If I run plot(b$time,b$myvar) I get a decent plot, but a friend suggests that R is just treating those numbers as text, and putting them in alphabetical order.  True?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Mon Sep 19 13:31:59 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 19 Sep 2022 14:31:59 +0300
Subject: [R] Question concerning side effects of treating invalid factor
 levels
In-Reply-To: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
References: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
Message-ID: <CAGgJW74k=rXJOSBYhvHR4E7bVhxcNUBn0SqcO0EwQf8XVCxtVA@mail.gmail.com>

You are misinterpreting what is going on.
The rbind command includes c(char, char, int) which produces a
character vector of length 3.
This is what you are rbind-ing which changes the type of the RT column.

If you do rbind(df, data.frame(P="in", ANSWER="V>N",
RT=round(runif(1,7000,16000),0)))
you will see that everything is fine. (New factor values are created.)

HTH,
Eric

On Mon, Sep 19, 2022 at 2:14 PM Tibor Kiss via R-help
<r-help at r-project.org> wrote:
>
> Dear List members,
>
> I have tried now for several times to find out about a side effect of treating invalid factor levels, but did not find an answer. Various answers on stackexchange etc. produce the stuff that irritates me without even mentioning it.
> So I am asking the list (apologies if this has been treated in the past).
>
> If you add an invalid factor level to a column in a data frame, this has the side effect of turning a numerical column into a column with character strings. Here is a simple example:
>
> > df <- data.frame(
>         P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
>         ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))),
>         RT = round(runif(6, 7000, 16000), 0))
>
> > str(df)
> 'data.frame':   6 obs. of  3 variables:
> $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1
> $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1
> $ RT    : num  11157 13719 14388 14527 14686 ..
>
> > df <- rbind(df, c("in", "V>N", round(runif(1, 7000, 16000), 0)))
>
> > str(df)
> 'data.frame':   7 obs. of  3 variables:
> $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1 NA
> $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1 NA
> $ RT    : chr  "11478" "15819" "8305" "8852" ?
>
> You see that RT has changed from _num_ to _chr_ as a side effect of adding the invalid factor level as NA. I would appreciate understanding what the purpose of the type coercion is.
>
> Thanks in advance
>
>
> Tibor
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Sep 19 13:59:02 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 19 Sep 2022 11:59:02 +0000
Subject: [R] Question concerning side effects of treating invalid factor
 levels
In-Reply-To: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
References: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
Message-ID: <BN6PR2201MB15539A97C31A408428FCC118CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>

In your example code, the variable remains a class factor, and all entries are valid. The variables will behave as expected given the factor levels in the original dataframe.

(At least on my system R 4.2, in RStudio, in Windows) R returns a couple of error messages warning me that I was bad.
What you get is NA for "not available", or "not appropriate" or a missing value. You gave the system an invalid factor level so it was entered as missing. If you get data that has a new factor level, you need to tell R to expect a new factor level first.

levels(f1) <- c(levels(f1),"New Level")
levels(f1) <- c(levels(f1),c("NL1","NL2"))


Tim
-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Tibor Kiss via R-help
Sent: Monday, September 19, 2022 6:11 AM
To: r-help at r-project.org
Subject: [R] Question concerning side effects of treating invalid factor levels

[External Email]

Dear List members,

I have tried now for several times to find out about a side effect of treating invalid factor levels, but did not find an answer. Various answers on stackexchange etc. produce the stuff that irritates me without even mentioning it.
So I am asking the list (apologies if this has been treated in the past).

If you add an invalid factor level to a column in a data frame, this has the side effect of turning a numerical column into a column with character strings. Here is a simple example:

> df <- data.frame(
        P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
        ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))),
        RT = round(runif(6, 7000, 16000), 0))

> str(df)
'data.frame':   6 obs. of  3 variables:
$ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1
$ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1
$ RT    : num  11157 13719 14388 14527 14686 ..

> df <- rbind(df, c("in", "V>N", round(runif(1, 7000, 16000), 0)))

> str(df)
'data.frame':   7 obs. of  3 variables:
$ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1 NA
$ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1 NA
$ RT    : chr  "11478" "15819" "8305" "8852" ...

You see that RT has changed from _num_ to _chr_ as a side effect of adding the invalid factor level as NA. I would appreciate understanding what the purpose of the type coercion is.

Thanks in advance


Tibor
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C6ee1a1f50c14442beef508da9a301bde%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991828670135028%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=sNDYEJKhjSu%2FtrTIwZx5yVemKgDheQYXLrcQqJ2mOgo%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C6ee1a1f50c14442beef508da9a301bde%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991828670135028%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=AP%2B4fa5pvbGr3IfwdiQvjXwkOdY90CIWIWWWmpIHH7w%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Sep 19 14:13:20 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 19 Sep 2022 12:13:20 +0000
Subject: [R] Need help plotting
In-Reply-To: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>

My version of this email has a bunch of ? that I do not know how to interpret. Emails to this group need to be in plain text. HTML content is deleted or converted and impossible or at least difficult to interpret.

Do not share confidential data. Please change some numbers or variable names and share that.
If this helps:
1) Make sure your time variable is a datetime object. 
2) At least in ggplot it should now behave as expected.
ggplot(df, aes(y=NO2, x=datetime)) + geom_point()

That will be a start as a scatterplot, but the graph can be customized or changed if scatterplot was not desired.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst, David
Sent: Sunday, September 18, 2022 4:27 PM
To: r-help at r-project.org
Subject: [R] Need help plotting

[External Email]

I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it, with some data from Bloomington?s Environmental Commission.

I have a dataframe (obtained from read.csv) that contains numerous columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from two air quality instruments.

I?d like a plot of both the NO2 measurements against time.  I be happy to use either ordinary R plots or ggplot2 ones, if that would be a better way.  I?d much appreciate help.

        [[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Mon Sep 19 14:22:04 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 19 Sep 2022 12:22:04 +0000
Subject: [R] Question concerning side effects of treating invalid factor
 levels
In-Reply-To: <EC96012D-CB9A-47B1-84A1-90A6C3845129@rub.de>
References: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
 <BN6PR2201MB15539A97C31A408428FCC118CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <EC96012D-CB9A-47B1-84A1-90A6C3845129@rub.de>
Message-ID: <BN6PR2201MB15534506ACCE2B7DC989B742CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>


Sorry, My bad.
A vector must be of a single class. When you declare c("in", "V>N", round(runif(1, 7000, 16000), 0)) R will calculate the random number, but then convert it to a character class to conform with the other two elements in that vector. R then binds this to your original df and finds that it must add a character to a numeric vector. To keep the vector of all the same class it converts everything to character.

Better?

Tim

From: tibor.kiss at rub.de <tibor.kiss at rub.de>
Sent: Monday, September 19, 2022 8:07 AM
To: Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: r-help at r-project.org
Subject: Re: [R] Question concerning side effects of treating invalid factor levels

[External Email]
Hi,

this is a misunderstanding of my question. I wasn't worried about invalid factor levels that produce NA. My question was why a column changes its class, which I thought was a side effect. If you add a vector containing one character string, the class of the whole vector becomes _chr_. And after this element has been added to a column, we have two NAs for the column which are factors, and a character string, which is responsible for the change of a numerical vector into a character string vector (see ?c, where you find: "The output type is determined from the highest type of the components in the hierarchy NULL < raw < logical < integer < double < complex < character < list < expression.").


Best


Tibor




Am 19.09.2022 um 13:59 schrieb Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>>:

In your example code, the variable remains a class factor, and all entries are valid. The variables will behave as expected given the factor levels in the original dataframe.

(At least on my system R 4.2, in RStudio, in Windows) R returns a couple of error messages warning me that I was bad.
What you get is NA for "not available", or "not appropriate" or a missing value. You gave the system an invalid factor level so it was entered as missing. If you get data that has a new factor level, you need to tell R to expect a new factor level first.

levels(f1) <- c(levels(f1),"New Level")
levels(f1) <- c(levels(f1),c("NL1","NL2"))


Tim
-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of Tibor Kiss via R-help
Sent: Monday, September 19, 2022 6:11 AM
To: r-help at r-project.org<mailto:r-help at r-project.org>
Subject: [R] Question concerning side effects of treating invalid factor levels

[External Email]

Dear List members,

I have tried now for several times to find out about a side effect of treating invalid factor levels, but did not find an answer. Various answers on stackexchange etc. produce the stuff that irritates me without even mentioning it.
So I am asking the list (apologies if this has been treated in the past).

If you add an invalid factor level to a column in a data frame, this has the side effect of turning a numerical column into a column with character strings. Here is a simple example:


df <- data.frame(
       P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
       ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))),
       RT = round(runif(6, 7000, 16000), 0))


str(df)
'data.frame':   6 obs. of  3 variables:
$ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1
$ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1
$ RT    : num  11157 13719 14388 14527 14686 ..


df <- rbind(df, c("in", "V>N", round(runif(1, 7000, 16000), 0)))


str(df)
'data.frame':   7 obs. of  3 variables:
$ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1 NA
$ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1 NA
$ RT    : chr  "11478" "15819" "8305" "8852" ...

You see that RT has changed from _num_ to _chr_ as a side effect of adding the invalid factor level as NA. I would appreciate understanding what the purpose of the type coercion is.

Thanks in advance


Tibor
______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C6ee1a1f50c14442beef508da9a301bde%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991828670135028%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=sNDYEJKhjSu%2FtrTIwZx5yVemKgDheQYXLrcQqJ2mOgo%3D&amp;reserved=0<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C8befab72dd954eeba5fe08da9a378808%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991860540901330%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7RLCA5Mv33uyvGvYhNdZNU1EedIlseTtQEgiRsQhZN8%3D&reserved=0>
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C6ee1a1f50c14442beef508da9a301bde%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991828670135028%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=AP%2B4fa5pvbGr3IfwdiQvjXwkOdY90CIWIWWWmpIHH7w%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Sep 19 16:56:33 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 19 Sep 2022 07:56:33 -0700
Subject: [R] Need help plotting
In-Reply-To: <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CAGxFJbT2QBsH62rvvfrYoHVKTX4CE0=mVe9aqPy57R237-Jjhw@mail.gmail.com>

See ?date-time and/or ?strptime for how to convert what I presume is
character data in your datetime column to a POSIXct object. (you may first
need to convert from a factor to character with as.character() ). Then
follow Tim's prescription for ggplot or see ?axis.Date (especially the
examples) for how to do it with base R plots.

Cheers,
Bert

On Mon, Sep 19, 2022 at 5:15 AM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> My version of this email has a bunch of ? that I do not know how to
> interpret. Emails to this group need to be in plain text. HTML content is
> deleted or converted and impossible or at least difficult to interpret.
>
> Do not share confidential data. Please change some numbers or variable
> names and share that.
> If this helps:
> 1) Make sure your time variable is a datetime object.
> 2) At least in ggplot it should now behave as expected.
> ggplot(df, aes(y=NO2, x=datetime)) + geom_point()
>
> That will be a start as a scatterplot, but the graph can be customized or
> changed if scatterplot was not desired.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst, David
> Sent: Sunday, September 18, 2022 4:27 PM
> To: r-help at r-project.org
> Subject: [R] Need help plotting
>
> [External Email]
>
> I?ve been retired since ?06 and have forgotten most of R.  Now I have a
> use for it, with some data from Bloomington?s Environmental Commission.
>
> I have a dataframe (obtained from read.csv) that contains numerous
> columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from
> two air quality instruments.
>
> I?d like a plot of both the NO2 measurements against time.  I be happy to
> use either ordinary R plots or ggplot2 ones, if that would be a better
> way.  I?d much appreciate help.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Mon Sep 19 18:18:07 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Mon, 19 Sep 2022 12:18:07 -0400
Subject: [R] Remove line from data file
In-Reply-To: <BN7PR08MB41140606AC40227B2116F0D5D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BE4F56C5-997C-4618-ABED-CFE4343EE098@indiana.edu>
 <CA+etgPnAjYK+d40NGEJ4qtuHtdEbU79jCnCrAwKiX3Lswx9ALA@mail.gmail.com>
 <BN7PR08MB41140606AC40227B2116F0D5D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <004401d8cc43$67edea30$37c9be90$@gmail.com>

David,

As others have said, there are many possible answers for a vague enough question.

For one-time data it is often easiest to simply change the data source as you say you did in EXCEL.

Deleting the 18th row can easily be done in R and might make sense if you get daily data and decided the 18th reporting station is not reliable and should always be excluded. As has been shown, the usual paradigm in R is to filter the data through a set of conditions and a very simple one is to specify which indices in rows and/or columns to exclude.

If you already have your data in mydata.old, then you can make a mydata.new that excludes that 18th row with something as simple as:

mydata.new <- mydata.old[ -18, ]

Since your question was not focused, the answer mentioned that it is common to delete based on all kinds of conditions. An example would be if you did not want to remove row 18 specifically but any row where a column says the collector/reporter of the info was "Smith" which may remove many rows in the data, or you wanted only data with a column giving a date in 2021 and not before or after.

This filter method is not a deletion per se, but a selective retention, and often has the same result. If your goal includes making the deletion of selected data permanent, of course, it is wise then to save the altered data in another file so later use starts with what you want. 

Actually removing a row from an original data.frame is not something people normally do. A data.frame is a list of vectors of some length and generally does not allow operations that might produce vectors of unequal length. You can set the entire row to be filled with NA if you want but removing the actual row in-place is the kind of thing  I do not normally see. In a sense, R is wasteful that way as you often end up making near-copies of your data and sometimes simply re-assigning the result to the same variable and expecting the old version to be garbage collected. As I said, the paradigm is selection more than alteration/deletion.

It is, of course, possible to create your own data structures where you could do something closer to a deletion of a row while leaving the rest in place but there likely is no need for your small amount of data. 

Note columns in R can be deleted easily because they are a top level entry in a LIST. mydata$colname <- NULL or similar variants will remove a column cleanly in the original data.frame. But as noted, rows in R do not really exist other than as a construct that tries to bind the nth elements of each underlying vector representing the columns. 

Of course we now can have list-columns in things like tibbles which makes me wonder ... 




-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst, David
Sent: Sunday, September 18, 2022 8:49 AM
To: CALUM POLWART <polc1410 at gmail.com>
Cc: R-help at r-project.org
Subject: Re: [R] Remove line from data file

Thank you for your reply.  I meant from the dataframe, but that s one of the terms I had forgotten.  I created that from read.csv, the csv file coming from Excel.  Last night I went ahead and made the change(s) using Excel.

For future reference, when I look at your solutions below, what do you mean by  value to delete ?  Could that just be a row number?  I was wanting to delete something like the 18th row in the dataframe?

From: CALUM POLWART <polc1410 at gmail.com>
Date: Sunday, September 18, 2022 at 7:25 AM
To: Parkhurst, David <parkhurs at indiana.edu>
Cc: R-help at r-project.org <R-help at r-project.org>
Subject: Re: [R] Remove line from data file From the file? Or the data frame once its loaded?

What format is the file? CSV?

Do you know the line that needs deleted?

mydf <- read.csv("myfile.csv")

mydf2 <- mydf[-columnName == "valuetodelete", ] # Note the - infront of column name # or perhaps columnName != "value to delete", ]

write.csv(mydf2, "mydeletedfile.csv")




On Sun, 18 Sep 2022, 10:33 Parkhurst, David, <parkhurs at indiana.edu<mailto:parkhurs at indiana.edu>> wrote:
I ve been retired since  06 and have forgotten most of R.  Now I have a use for it.  I ve created a data file and need to delete one row from it.  How do I do that?

DFP (iPad)
______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Sep 19 19:27:41 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 19 Sep 2022 18:27:41 +0100
Subject: [R] Converting time format
In-Reply-To: <BN7PR08MB4114F982E70E477961F394B8D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114F982E70E477961F394B8D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <21e88f94-0c9f-9e40-3edb-faf785f49ea1@sapo.pt>

Hello,

I will run the examples below with the following data:


x <- c("12:00", "12:15", "12:30", "12:45", "13:00", "13:15", "13:30",
        "13:45", "14:00", "14:15", "14:30", "14:45", "15:00", "15:15",
        "15:30", "15:45", "16:00", "16:15", "16:30", "16:45", "17:00",
        "17:15", "17:30", "17:45", "18:00")
b <- data.frame(time = x, myvar = sin(2*pi*seq_along(x)/length(x)))


Are they are saying is true, the vector b$myvar is a character vector 
and that's what is being displayed.

In what follows I will first give examples of base graphics. The times 
are first coerced to a proper time class with package chron.



library(chron)

b$time <- as.times(b$time)

# see ?plot.default for the meaning of
# argument 'type'
plot(myvar ~ time, b)
plot(myvar ~ time, b, type = "l")
plot(myvar ~ time, b, type = "b")



With ggplot2, there is no need to load a date/time class package, R can 
do it with ?as.POSXct but the labels are datetime_breaks and 
datetime_labels.



library(ggplot2)

b |>
   dplyr::mutate(time = paste(Sys.Date(), time),
                 time = as.POSIXct(time)) |>
   ggplot(aes(time, myvar)) +
   geom_line() +
   geom_point() +
   scale_x_datetime(date_breaks = "1 hour", date_labels = "%H:%M") +
   theme_bw()



Hope this helps,

Rui Barradas


?s 01:56 de 19/09/2022, Parkhurst, David escreveu:
> I have a dataframe obtained using read.csv from an excel file.  Its first column is times, running from 18:00 to 19:30.  If I want to plot other columns against time, do I need to convert those somehow, and how would I do that?
> 
> If I run plot(b$time,b$myvar) I get a decent plot, but a friend suggests that R is just treating those numbers as text, and putting them in alphabetical order.  True?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From y@ngk@|9999 @end|ng |rom y@hoo@com  Mon Sep 19 19:35:35 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Mon, 19 Sep 2022 17:35:35 +0000 (UTC)
Subject: [R] rename files in R
In-Reply-To: <b16efed9-c366-d1a2-dac8-223b989c9749@sapo.pt>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
 <BN6PR2201MB1553037FD6E66739C5D5C00FCF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <b16efed9-c366-d1a2-dac8-223b989c9749@sapo.pt>
Message-ID: <778265234.3138029.1663608935414@mail.yahoo.com>

 Hi Rui,I put original file names and target file names into data frame: total_name. I can use
file.rename("out_1.pdf", "abc_title.pdf")

to rename a single file. But I hope to use loop to complete the task. So I write? a code below:
for (i in seq_len(nrow(total_name)))
{
? with(
? ? total_name[i, ],?
? ? {
? ? ? file.rename(total_name$orig, total_name$target)
? ? }
? )
}? ? ?
But I got error message:?
Error in file.rename(total_name$orig, total_name$target) :?
invalid 'from' argument

I think the problem happen due to quotation problem. Do you know how to fix it?
Thanks,
Kai    On Friday, September 16, 2022 at 08:32:53 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:  
 
 Hello,

My understanding of the problem is different, the files' first row is 
not tabular data, I might be wrong but it seems to me that it's 
something like

first row [of] file1.txt [is]:
abc.txt

file2.txt:
bed.txt

etc.

That's why the sapply loop reads one datum only and exits.

Hope this helps,

Rui Barradas

?s 02:29 de 17/09/2022, Ebert,Timothy Aaron escreveu:
> The syntax might not be quite right, but why not something like file.rename(colnames(dataframe)[1]) -- Using colnames to get the names of the columns that are in the first row, selecting the first element from colnames() and setting the file name equal to that.
> 
> Do a for loop using current file names in some folder, and save to a new folder.
> 
> Tim
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
> Sent: Friday, September 16, 2022 1:52 PM
> To: R-help Mailing List <r-help at r-project.org>; Rui Barradas <ruipbarradas at sapo.pt>
> Subject: Re: [R] rename files in R
> 
> [External Email]
> 
>? Hello,Here is the example:
>? ? file name? ? first row? file1.txt? ? abc.txt? file2.txt? ? bed.txt? file3.txt? ? gogo.txt? . . file1243.txt? ? last.txt
> I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated. Thanks, Kai? ? On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
>? Hello,
> 
> Please post the first row of 2 or 3 files and the expected result.
> 
> You can rename files with ?file.rename. This function is vectorized its on arguments so you do not need a loop, only the source and destination filenames. Both vectors should have the same length, if not strange things will occur including data loss.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
>> Hello,I have a lot of files with not meaningful name, such as:
>> file1.txt, file2.txt ...... I need to rename them using the
>> information from the first row of the files. Now I can get the
>> information from the first row of each file. Now, I need know how to
>> rename them in R (using loop?). Thank you for your helpKai
>>
>>
>>? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
>> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
>> .edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e
>> 1b84%7C0%7C0%7C637989475519163868%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
>> &amp;sdata=lPW2XrQntw3V7eJmxkaoOXK75%2FO1hWgRv7FO3%2B5O3OQ%3D&amp;rese
>> rved=0 PLEASE do read the posting guide
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
>> 7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%
>> 7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
>> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
>> sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&amp;reserve
>> d=0 and provide commented, minimal, self-contained, reproducible code.
> 
>? ? ? ? ? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=tCreTbW2QEMePdooZNVmtpl6kKSVMXv9E0oIBYBTMBQ%3D&reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Mon Sep 19 20:11:22 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 19 Sep 2022 18:11:22 +0000
Subject: [R] Need help plotting
In-Reply-To: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <BN6PR2201MB155335E3B9B6235AF40F89E0CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>

David,
   Do these work for you? (I am resending this so others can see. The original only went to you.)

library(lubridate)
a<-c(4, 5, 6)
b<-c("18:00", "18:01", "18:02")
c<-as.data.frame(cbind(a,b))
c$d<-hm(c$b)
c$d$minute[2]

I could do it manually like this (where FrHour is fractional hour)
a<-c(4, 5, 6)
b<-c("18:00", "18:09", "18:42")
c<-as.data.frame(cbind(a,b))
c$d<-hm(c$b)
c$d$minute[2]
c$Hour=as.numeric(substr(c$b,1,2))
c$Second=as.numeric(substr(c$b,4,5))
c$FrHour <- c$Hour + c$Second/60

As I was writing Rui posted another option with code for graphing.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst, David
Sent: Sunday, September 18, 2022 4:27 PM
To: r-help at r-project.org
Subject: [R] Need help plotting

[External Email]

I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it, with some data from Bloomington?s Environmental Commission.

I have a dataframe (obtained from read.csv) that contains numerous columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from two air quality instruments.

I?d like a plot of both the NO2 measurements against time.  I be happy to use either ordinary R plots or ggplot2 ones, if that would be a better way.  I?d much appreciate help.

        [[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Sep 19 20:46:58 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 19 Sep 2022 11:46:58 -0700
Subject: [R] rename files in R
In-Reply-To: <778265234.3138029.1663608935414@mail.yahoo.com>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
 <BN6PR2201MB1553037FD6E66739C5D5C00FCF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <b16efed9-c366-d1a2-dac8-223b989c9749@sapo.pt>
 <778265234.3138029.1663608935414@mail.yahoo.com>
Message-ID: <CAGxFJbSwU7AJScD6q8NT-p=+8eJQ8aHiDdTqh8B+QCYANVQHPw@mail.gmail.com>

I haven't tracked what went before, but your syntax here is totally messed
up:

for (i in seq_len(nrow(total_name)))
{
  with(
    total_name[i, ],
    {
      file.rename(total_name$orig, total_name$target)
    }
  )
}

Also, you don't need looping because file.rename is already vectorized --
you need to read the Help file more carefully. So something like this
should do what you want:

with(total_name, file.rename (orig, target))

where orig and target should be character (not factor) columns in your data
frame.

Cheers,
Bert

On Mon, Sep 19, 2022 at 10:38 AM Kai Yang via R-help <r-help at r-project.org>
wrote:

>  Hi Rui,I put original file names and target file names into data frame:
> total_name. I can use
> file.rename("out_1.pdf", "abc_title.pdf")
>
> to rename a single file. But I hope to use loop to complete the task. So I
> write  a code below:
> for (i in seq_len(nrow(total_name)))
> {
>   with(
>     total_name[i, ],
>     {
>       file.rename(total_name$orig, total_name$target)
>     }
>   )
> }
> But I got error message:
> Error in file.rename(total_name$orig, total_name$target) :
> invalid 'from' argument
>
> I think the problem happen due to quotation problem. Do you know how to
> fix it?
> Thanks,
> Kai    On Friday, September 16, 2022 at 08:32:53 PM PDT, Rui Barradas <
> ruipbarradas at sapo.pt> wrote:
>
>  Hello,
>
> My understanding of the problem is different, the files' first row is
> not tabular data, I might be wrong but it seems to me that it's
> something like
>
> first row [of] file1.txt [is]:
> abc.txt
>
> file2.txt:
> bed.txt
>
> etc.
>
> That's why the sapply loop reads one datum only and exits.
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 02:29 de 17/09/2022, Ebert,Timothy Aaron escreveu:
> > The syntax might not be quite right, but why not something like
> file.rename(colnames(dataframe)[1]) -- Using colnames to get the names of
> the columns that are in the first row, selecting the first element from
> colnames() and setting the file name equal to that.
> >
> > Do a for loop using current file names in some folder, and save to a new
> folder.
> >
> > Tim
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via
> R-help
> > Sent: Friday, September 16, 2022 1:52 PM
> > To: R-help Mailing List <r-help at r-project.org>; Rui Barradas <
> ruipbarradas at sapo.pt>
> > Subject: Re: [R] rename files in R
> >
> > [External Email]
> >
> >  Hello,Here is the example:
> >    file name    first row  file1.txt    abc.txt  file2.txt    bed.txt
> file3.txt    gogo.txt  . . file1243.txt    last.txt
> > I want to use loop because I need to read the first row information for
> first file, and then rename the file, then go to next file. I'm not sure if
> this is right way to approach my goal. Any suggestion will be appreciated.
> Thanks, Kai    On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui
> Barradas <ruipbarradas at sapo.pt> wrote:
> >
> >  Hello,
> >
> > Please post the first row of 2 or 3 files and the expected result.
> >
> > You can rename files with ?file.rename. This function is vectorized its
> on arguments so you do not need a loop, only the source and destination
> filenames. Both vectors should have the same length, if not strange things
> will occur including data loss.
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> > ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
> >> Hello,I have a lot of files with not meaningful name, such as:
> >> file1.txt, file2.txt ...... I need to rename them using the
> >> information from the first row of the files. Now I can get the
> >> information from the first row of each file. Now, I need know how to
> >> rename them in R (using loop?). Thank you for your helpKai
> >>
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> >> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> >> .edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e
> >> 1b84%7C0%7C0%7C637989475519163868%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> >> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> >> &amp;sdata=lPW2XrQntw3V7eJmxkaoOXK75%2FO1hWgRv7FO3%2B5O3OQ%3D&amp;rese
> >> rved=0 PLEASE do read the posting guide
> >> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> >> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> >> 7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%
> >> 7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> >> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> >> sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&amp;reserve
> >> d=0 and provide commented, minimal, self-contained, reproducible code.
> >
> >          [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=tCreTbW2QEMePdooZNVmtpl6kKSVMXv9E0oIBYBTMBQ%3D&reserved=0
> > PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Sep 19 20:54:16 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 19 Sep 2022 19:54:16 +0100
Subject: [R] rename files in R
In-Reply-To: <778265234.3138029.1663608935414@mail.yahoo.com>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
 <BN6PR2201MB1553037FD6E66739C5D5C00FCF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <b16efed9-c366-d1a2-dac8-223b989c9749@sapo.pt>
 <778265234.3138029.1663608935414@mail.yahoo.com>
Message-ID: <68135f17-6756-3b71-ea6f-296bfc47019f@sapo.pt>

Hello,

Can you post the output of

dput(head(total_name))

?

Rui Barradas

?s 18:35 de 19/09/2022, Kai Yang escreveu:
>   Hi Rui,I put original file names and target file names into data frame: total_name. I can use
> file.rename("out_1.pdf", "abc_title.pdf")
> 
> to rename a single file. But I hope to use loop to complete the task. So I write? a code below:
> for (i in seq_len(nrow(total_name)))
> {
>  ? with(
>  ? ? total_name[i, ],
>  ? ? {
>  ? ? ? file.rename(total_name$orig, total_name$target)
>  ? ? }
>  ? )
> }
> But I got error message:
> Error in file.rename(total_name$orig, total_name$target) :
> invalid 'from' argument
> 
> I think the problem happen due to quotation problem. Do you know how to fix it?
> Thanks,
> Kai    On Friday, September 16, 2022 at 08:32:53 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>   
>   Hello,
> 
> My understanding of the problem is different, the files' first row is
> not tabular data, I might be wrong but it seems to me that it's
> something like
> 
> first row [of] file1.txt [is]:
> abc.txt
> 
> file2.txt:
> bed.txt
> 
> etc.
> 
> That's why the sapply loop reads one datum only and exits.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 02:29 de 17/09/2022, Ebert,Timothy Aaron escreveu:
>> The syntax might not be quite right, but why not something like file.rename(colnames(dataframe)[1]) -- Using colnames to get the names of the columns that are in the first row, selecting the first element from colnames() and setting the file name equal to that.
>>
>> Do a for loop using current file names in some folder, and save to a new folder.
>>
>> Tim
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
>> Sent: Friday, September 16, 2022 1:52 PM
>> To: R-help Mailing List <r-help at r-project.org>; Rui Barradas <ruipbarradas at sapo.pt>
>> Subject: Re: [R] rename files in R
>>
>> [External Email]
>>
>>  ? Hello,Here is the example:
>>  ? ? file name? ? first row? file1.txt? ? abc.txt? file2.txt? ? bed.txt? file3.txt? ? gogo.txt? . . file1243.txt? ? last.txt
>> I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated. Thanks, Kai? ? On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>>  ? Hello,
>>
>> Please post the first row of 2 or 3 files and the expected result.
>>
>> You can rename files with ?file.rename. This function is vectorized its on arguments so you do not need a loop, only the source and destination filenames. Both vectors should have the same length, if not strange things will occur including data loss.
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
>>> Hello,I have a lot of files with not meaningful name, such as:
>>> file1.txt, file2.txt ...... I need to rename them using the
>>> information from the first row of the files. Now I can get the
>>> information from the first row of each file. Now, I need know how to
>>> rename them in R (using loop?). Thank you for your helpKai
>>>
>>>
>>>  ? ? ? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
>>> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
>>> .edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e
>>> 1b84%7C0%7C0%7C637989475519163868%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
>>> &amp;sdata=lPW2XrQntw3V7eJmxkaoOXK75%2FO1hWgRv7FO3%2B5O3OQ%3D&amp;rese
>>> rved=0 PLEASE do read the posting guide
>>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>>> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
>>> 7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%
>>> 7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
>>> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
>>> sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&amp;reserve
>>> d=0 and provide commented, minimal, self-contained, reproducible code.
>>
>>  ? ? ? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=tCreTbW2QEMePdooZNVmtpl6kKSVMXv9E0oIBYBTMBQ%3D&reserved=0
>> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>


From y@ngk@|9999 @end|ng |rom y@hoo@com  Mon Sep 19 20:52:29 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Mon, 19 Sep 2022 18:52:29 +0000 (UTC)
Subject: [R] rename files in R
In-Reply-To: <CAGxFJbSwU7AJScD6q8NT-p=+8eJQ8aHiDdTqh8B+QCYANVQHPw@mail.gmail.com>
References: <1179852228.2613336.1663349205099.ref@mail.yahoo.com>
 <1179852228.2613336.1663349205099@mail.yahoo.com>
 <bd1a87eb-00a3-3a54-3020-8ed744df05b5@sapo.pt>
 <1484246431.2613424.1663350709591@mail.yahoo.com>
 <BN6PR2201MB1553037FD6E66739C5D5C00FCF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <b16efed9-c366-d1a2-dac8-223b989c9749@sapo.pt>
 <778265234.3138029.1663608935414@mail.yahoo.com>
 <CAGxFJbSwU7AJScD6q8NT-p=+8eJQ8aHiDdTqh8B+QCYANVQHPw@mail.gmail.com>
Message-ID: <1859660472.29308.1663613549595@mail.yahoo.com>

 Thank you for your help. I'll check this out.Kai
    On Monday, September 19, 2022 at 11:47:11 AM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:  
 
 I haven't tracked what went before, but your syntax here is totally messed up:
for (i in seq_len(nrow(total_name)))
{
? with(
? ? total_name[i, ],?
? ? {
? ? ? file.rename(total_name$orig, total_name$target)
? ? }
? )
}
Also, you don't need looping because file.rename is already vectorized -- you need to read the Help file more carefully. So something like this should do what you want:
with(total_name, file.rename (orig, target))
where orig and target should be character (not factor) columns in your data frame.

Cheers,Bert? ?? 
On Mon, Sep 19, 2022 at 10:38 AM Kai Yang via R-help <r-help at r-project.org> wrote:

?Hi Rui,I put original file names and target file names into data frame: total_name. I can use
file.rename("out_1.pdf", "abc_title.pdf")

to rename a single file. But I hope to use loop to complete the task. So I write? a code below:
for (i in seq_len(nrow(total_name)))
{
? with(
? ? total_name[i, ],?
? ? {
? ? ? file.rename(total_name$orig, total_name$target)
? ? }
? )
}? ? ?
But I got error message:?
Error in file.rename(total_name$orig, total_name$target) :?
invalid 'from' argument

I think the problem happen due to quotation problem. Do you know how to fix it?
Thanks,
Kai? ? On Friday, September 16, 2022 at 08:32:53 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:? 

?Hello,

My understanding of the problem is different, the files' first row is 
not tabular data, I might be wrong but it seems to me that it's 
something like

first row [of] file1.txt [is]:
abc.txt

file2.txt:
bed.txt

etc.

That's why the sapply loop reads one datum only and exits.

Hope this helps,

Rui Barradas

?s 02:29 de 17/09/2022, Ebert,Timothy Aaron escreveu:
> The syntax might not be quite right, but why not something like file.rename(colnames(dataframe)[1]) -- Using colnames to get the names of the columns that are in the first row, selecting the first element from colnames() and setting the file name equal to that.
> 
> Do a for loop using current file names in some folder, and save to a new folder.
> 
> Tim
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
> Sent: Friday, September 16, 2022 1:52 PM
> To: R-help Mailing List <r-help at r-project.org>; Rui Barradas <ruipbarradas at sapo.pt>
> Subject: Re: [R] rename files in R
> 
> [External Email]
> 
>? Hello,Here is the example:
>? ? file name? ? first row? file1.txt? ? abc.txt? file2.txt? ? bed.txt? file3.txt? ? gogo.txt? . . file1243.txt? ? last.txt
> I want to use loop because I need to read the first row information for first file, and then rename the file, then go to next file. I'm not sure if this is right way to approach my goal. Any suggestion will be appreciated. Thanks, Kai? ? On Friday, September 16, 2022 at 10:38:32 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
>? Hello,
> 
> Please post the first row of 2 or 3 files and the expected result.
> 
> You can rename files with ?file.rename. This function is vectorized its on arguments so you do not need a loop, only the source and destination filenames. Both vectors should have the same length, if not strange things will occur including data loss.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 18:26 de 16/09/2022, Kai Yang via R-help escreveu:
>> Hello,I have a lot of files with not meaningful name, such as:
>> file1.txt, file2.txt ...... I need to rename them using the
>> information from the first row of the files. Now I can get the
>> information from the first row of each file. Now, I need know how to
>> rename them in R (using loop?). Thank you for your helpKai
>>
>>
>>? ? ? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
>> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
>> .edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e
>> 1b84%7C0%7C0%7C637989475519163868%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
>> &amp;sdata=lPW2XrQntw3V7eJmxkaoOXK75%2FO1hWgRv7FO3%2B5O3OQ%3D&amp;rese
>> rved=0 PLEASE do read the posting guide
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
>> 7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%
>> 7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
>> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
>> sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&amp;reserve
>> d=0 and provide commented, minimal, self-contained, reproducible code.
> 
>? ? ? ? ? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=tCreTbW2QEMePdooZNVmtpl6kKSVMXv9E0oIBYBTMBQ%3D&reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C559ca95ca7d34937799a08da980c3995%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637989475519320101%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2FaSxvb47qFp7Mo6MFlCEQcvinHvV%2FWA%2Brs3keoNuTqk%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.

? ? ? ? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

  
	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Mon Sep 19 23:28:15 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 20 Sep 2022 07:28:15 +1000
Subject: [R] Need help plotting
In-Reply-To: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <CA+8X3fWEpyYOyV2C0Lm3aR-TrNvY1R53NfrDYMhQ4bvT3ir6KQ@mail.gmail.com>

Hi David,
Since you used read.csv to get the data frame, the file must be i text
format. If you can include a few lines of the input (with made up NO2
values if necessary), it would be easy to respond with the required
commands and a plot.

Jim

On Mon, Sep 19, 2022 at 9:12 PM Parkhurst, David <parkhurs at indiana.edu> wrote:
>
> I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it, with some data from Bloomington?s Environmental Commission.
>
> I have a dataframe (obtained from read.csv) that contains numerous columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from two air quality instruments.
>
> I?d like a plot of both the NO2 measurements against time.  I be happy to use either ordinary R plots or ggplot2 ones, if that would be a better way.  I?d much appreciate help.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Mon Sep 19 23:49:22 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 20 Sep 2022 07:49:22 +1000
Subject: [R] Need help plotting
In-Reply-To: <699E4236-A27D-4A9B-BA3C-B420DCBBF218@indiana.edu>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <CA+8X3fWEpyYOyV2C0Lm3aR-TrNvY1R53NfrDYMhQ4bvT3ir6KQ@mail.gmail.com>
 <699E4236-A27D-4A9B-BA3C-B420DCBBF218@indiana.edu>
Message-ID: <CA+8X3fW=4C-E=Mm11ZyLGszDWrOF+oqwEQiTrJ++iFzFmbgVxA@mail.gmail.com>

Hi David,
All I got was the rather cryptic "DFP (iPad)" below your message.
Whatever format you used for the data was blocked by the R-help mail
server. Try this command in your R session:

dput(test)

and cut and paste the output into your email. That should do it.

Jim

On Tue, Sep 20, 2022 at 7:41 AM Parkhurst, David <parkhurs at indiana.edu> wrote:
>
> I just sent a subset of the data, with a dataframe called test.  Can you see that?  It may not have been approved by the moderator yet.
>
> DFP (iPad)
>
> > On Sep 19, 2022, at 5:29 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > ?Hi David,
> > Since you used read.csv to get the data frame, the file must be i text
> > format. If you can include a few lines of the input (with made up NO2
> > values if necessary), it would be easy to respond with the required
> > commands and a plot.
> >
> > Jim
> >
> >> On Mon, Sep 19, 2022 at 9:12 PM Parkhurst, David <parkhurs at indiana.edu> wrote:
> >>
> >> I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it, with some data from Bloomington?s Environmental Commission.
> >>
> >> I have a dataframe (obtained from read.csv) that contains numerous columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from two air quality instruments.
> >>
> >> I?d like a plot of both the NO2 measurements against time.  I be happy to use either ordinary R plots or ggplot2 ones, if that would be a better way.  I?d much appreciate help.
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Sep 19 14:19:00 2022
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Mon, 19 Sep 2022 12:19:00 +0000
Subject: [R] Need help plotting
In-Reply-To: <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <254C06FF-BDBA-492C-A4AA-9BACD5CB558C@indiana.edu>

Thank you.

DFP (iPad)

> On Sep 19, 2022, at 8:15 AM, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
> 
> ?My version of this email has a bunch of ? that I do not know how to interpret. Emails to this group need to be in plain text. HTML content is deleted or converted and impossible or at least difficult to interpret.
> 
> Do not share confidential data. Please change some numbers or variable names and share that.
> If this helps:
> 1) Make sure your time variable is a datetime object. 
> 2) At least in ggplot it should now behave as expected.
> ggplot(df, aes(y=NO2, x=datetime)) + geom_point()
> 
> That will be a start as a scatterplot, but the graph can be customized or changed if scatterplot was not desired.
> 
> Tim
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst, David
> Sent: Sunday, September 18, 2022 4:27 PM
> To: r-help at r-project.org
> Subject: [R] Need help plotting
> 
> [External Email]
> 
> I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it, with some data from Bloomington?s Environmental Commission.
> 
> I have a dataframe (obtained from read.csv) that contains numerous columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from two air quality instruments.
> 
> I?d like a plot of both the NO2 measurements against time.  I be happy to use either ordinary R plots or ggplot2 ones, if that would be a better way.  I?d much appreciate help.
> 
>        [[alternative HTML version deleted]]
> 

From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Sep 19 20:11:38 2022
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Mon, 19 Sep 2022 18:11:38 +0000
Subject: [R] Converting time format
In-Reply-To: <21e88f94-0c9f-9e40-3edb-faf785f49ea1@sapo.pt>
References: <BN7PR08MB4114F982E70E477961F394B8D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <21e88f94-0c9f-9e40-3edb-faf785f49ea1@sapo.pt>
Message-ID: <BN7PR08MB4114D179982CC3E703A1B551D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>

Thank you.  I?ll see what I can do with that.

From: Rui Barradas <ruipbarradas at sapo.pt>
Date: Monday, September 19, 2022 at 1:28 PM
To: Parkhurst, David <parkhurs at indiana.edu>, r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Converting time format
Hello,

I will run the examples below with the following data:


x <- c("12:00", "12:15", "12:30", "12:45", "13:00", "13:15", "13:30",
        "13:45", "14:00", "14:15", "14:30", "14:45", "15:00", "15:15",
        "15:30", "15:45", "16:00", "16:15", "16:30", "16:45", "17:00",
        "17:15", "17:30", "17:45", "18:00")
b <- data.frame(time = x, myvar = sin(2*pi*seq_along(x)/length(x)))


Are they are saying is true, the vector b$myvar is a character vector
and that's what is being displayed.

In what follows I will first give examples of base graphics. The times
are first coerced to a proper time class with package chron.



library(chron)

b$time <- as.times(b$time)

# see ?plot.default for the meaning of
# argument 'type'
plot(myvar ~ time, b)
plot(myvar ~ time, b, type = "l")
plot(myvar ~ time, b, type = "b")



With ggplot2, there is no need to load a date/time class package, R can
do it with ?as.POSXct but the labels are datetime_breaks and
datetime_labels.



library(ggplot2)

b |>
   dplyr::mutate(time = paste(Sys.Date(), time),
                 time = as.POSIXct(time)) |>
   ggplot(aes(time, myvar)) +
   geom_line() +
   geom_point() +
   scale_x_datetime(date_breaks = "1 hour", date_labels = "%H:%M") +
   theme_bw()



Hope this helps,

Rui Barradas


?s 01:56 de 19/09/2022, Parkhurst, David escreveu:
> I have a dataframe obtained using read.csv from an excel file.  Its first column is times, running from 18:00 to 19:30.  If I want to plot other columns against time, do I need to convert those somehow, and how would I do that?
>
> If I run plot(b$time,b$myvar) I get a decent plot, but a friend suggests that R is just treating those numbers as text, and putting them in alphabetical order.  True?
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Mon Sep 19 20:24:55 2022
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Mon, 19 Sep 2022 18:24:55 +0000
Subject: [R] Converting time format
In-Reply-To: <21e88f94-0c9f-9e40-3edb-faf785f49ea1@sapo.pt>
References: <BN7PR08MB4114F982E70E477961F394B8D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <21e88f94-0c9f-9e40-3edb-faf785f49ea1@sapo.pt>
Message-ID: <BN7PR08MB4114828EE8358EA2B785B195D04D9@BN7PR08MB4114.namprd08.prod.outlook.com>

Thank you.

From: Rui Barradas <ruipbarradas at sapo.pt>
Date: Monday, September 19, 2022 at 1:28 PM
To: Parkhurst, David <parkhurs at indiana.edu>, R-help at r-project.org <R-help at r-project.org>
Subject: Re: [R] Converting time format
Hello,

I will run the examples below with the following data:


x <- c("12:00", "12:15", "12:30", "12:45", "13:00", "13:15", "13:30",
        "13:45", "14:00", "14:15", "14:30", "14:45", "15:00", "15:15",
        "15:30", "15:45", "16:00", "16:15", "16:30", "16:45", "17:00",
        "17:15", "17:30", "17:45", "18:00")
b <- data.frame(time = x, myvar = sin(2*pi*seq_along(x)/length(x)))


Are they are saying is true, the vector b$myvar is a character vector
and that's what is being displayed.

In what follows I will first give examples of base graphics. The times
are first coerced to a proper time class with package chron.



library(chron)

b$time <- as.times(b$time)

# see ?plot.default for the meaning of
# argument 'type'
plot(myvar ~ time, b)
plot(myvar ~ time, b, type = "l")
plot(myvar ~ time, b, type = "b")



With ggplot2, there is no need to load a date/time class package, R can
do it with ?as.POSXct but the labels are datetime_breaks and
datetime_labels.



library(ggplot2)

b |>
   dplyr::mutate(time = paste(Sys.Date(), time),
                 time = as.POSIXct(time)) |>
   ggplot(aes(time, myvar)) +
   geom_line() +
   geom_point() +
   scale_x_datetime(date_breaks = "1 hour", date_labels = "%H:%M") +
   theme_bw()



Hope this helps,

Rui Barradas


?s 01:56 de 19/09/2022, Parkhurst, David escreveu:
> I have a dataframe obtained using read.csv from an excel file.  Its first column is times, running from 18:00 to 19:30.  If I want to plot other columns against time, do I need to convert those somehow, and how would I do that?
>
> If I run plot(b$time,b$myvar) I get a decent plot, but a friend suggests that R is just treating those numbers as text, and putting them in alphabetical order.  True?
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Tue Sep 20 09:37:50 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 20 Sep 2022 17:37:50 +1000
Subject: [R] Need help plotting
In-Reply-To: <254C06FF-BDBA-492C-A4AA-9BACD5CB558C@indiana.edu>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <254C06FF-BDBA-492C-A4AA-9BACD5CB558C@indiana.edu>
Message-ID: <CA+8X3fUkm0C1UT1KL9SG-kP7E0PgVqee-ki0AEEdL9s25u1phA@mail.gmail.com>

Hi David,
I'm back home again. Try this:

b<-read.table(text=
"Dtime DNO2 DVOC     Dpm10    Dpm2.5 Dpm1 Mtime MNO2 MVOC    Mpm10 Mpm2.5 Mpm1
 18:00   28  164  81.34773 24.695435   14 18:00   19  151 3.000000      2    1
 18:01   27  163  74.44034 23.751198   14 18:01   20  148 3.000000      2    1
 18:02   30  160  72.21975 22.463129   13 18:02   19  150 3.000000      2    1",
 header=TRUE,stringsAsFactors=FALSE)
b$POSIXtime<-strptime(paste("2022-09-20",b$Dtime),"%Y-%m-%d %H:%M")
png("DFPNO2.png")
plot(b$POSIXtime,b$DNO2,type="b",main="NO2 readings (2022-09-20)",
 xlab="Date/time",ylab="NO2",ylim=range(c(b$DNO2,b$MNO2)),
 pch=19,col="red")
 points(b$POSIXtime,b$MNO2,type="b",pch=19,col="blue")
 legend("center",legend=c("DNO2","MNO2"),pch=19,col=c("red","blue"))
dev.off()

If you have more than one day, it will show up on the x axis. You can
also format the tick labels if you want the full dates for only one
day.

Jim

PS thanks Avi

On Tue, Sep 20, 2022 at 4:49 PM Parkhurst, David <parkhurs at indiana.edu> wrote:
>
> Thank you.
>
> DFP (iPad)
>
> > On Sep 19, 2022, at 8:15 AM, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
> >
> > ?My version of this email has a bunch of ? that I do not know how to interpret. Emails to this group need to be in plain text. HTML content is deleted or converted and impossible or at least difficult to interpret.
> >
> > Do not share confidential data. Please change some numbers or variable names and share that.
> > If this helps:
> > 1) Make sure your time variable is a datetime object.
> > 2) At least in ggplot it should now behave as expected.
> > ggplot(df, aes(y=NO2, x=datetime)) + geom_point()
> >
> > That will be a start as a scatterplot, but the graph can be customized or changed if scatterplot was not desired.
> >
> > Tim
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst, David
> > Sent: Sunday, September 18, 2022 4:27 PM
> > To: r-help at r-project.org
> > Subject: [R] Need help plotting
> >
> > [External Email]
> >
> > I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it, with some data from Bloomington?s Environmental Commission.
> >
> > I have a dataframe (obtained from read.csv) that contains numerous columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from two air quality instruments.
> >
> > I?d like a plot of both the NO2 measurements against time.  I be happy to use either ordinary R plots or ggplot2 ones, if that would be a better way.  I?d much appreciate help.
> >
> >        [[alternative HTML version deleted]]
> >
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: DFPNO2.png
Type: image/png
Size: 16491 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20220920/a2fded16/attachment.png>

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Sep 20 10:51:33 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 20 Sep 2022 09:51:33 +0100
Subject: [R] Need help plotting
In-Reply-To: <CA+8X3fUkm0C1UT1KL9SG-kP7E0PgVqee-ki0AEEdL9s25u1phA@mail.gmail.com>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <254C06FF-BDBA-492C-A4AA-9BACD5CB558C@indiana.edu>
 <CA+8X3fUkm0C1UT1KL9SG-kP7E0PgVqee-ki0AEEdL9s25u1phA@mail.gmail.com>
Message-ID: <a73a2750-f7c6-0bfc-aca6-c10d73f6659e@sapo.pt>

Hello,

Now with data, here are base R and ggplot2 plots.


b <- read.table(text=
                 "Dtime DNO2 DVOC     Dpm10    Dpm2.5 Dpm1 Mtime MNO2 
MVOC    Mpm10 Mpm2.5 Mpm1
  18:00   28  164  81.34773 24.695435   14 18:00   19  151 3.000000 
  2    1
  18:01   27  163  74.44034 23.751198   14 18:01   20  148 3.000000 
  2    1
  18:02   30  160  72.21975 22.463129   13 18:02   19  150 3.000000 
  2    1",
               header=TRUE,stringsAsFactors=FALSE)


# This base R plot needs package chron
library(chron)

# first make a real time class column
b$Dtime2 <- paste(b$Dtime, "00", sep = ":")
b$Dtime2 <- as.times(b$Dtime2)

# get the plot height and make room for
# the legend by adding 2 to y max
ylim <- range(unlist(b[c("DNO2", "MNO2")])) + c(0, 2)

# now plot one line
plot(DNO2 ~ Dtime2, b, type = "b", col = "orange", ylim = ylim)
# add the second line
points(MNO2 ~ Dtime2, b, type = "b", col = "skyblue")
# and the horizontal legend at the top center
legend("top", legend = c("DNO2", "MNO2"), horiz = TRUE,
        lty = "solid", col = c("orange", "skyblue"))


#-------

library(ggplot2)
library(dplyr)
library(tidyr)

b %>%
   mutate(Dtime = paste(Sys.Date(), Dtime),
                 Dtime = as.POSIXct(Dtime)) %>%
   select(Dtime, DNO2, MNO2) %>%
   # reshape to long format
   pivot_longer(-Dtime, names_to = "NO2") %>%
   # now plot
   ggplot(aes(Dtime, value, color = NO2)) +
   geom_line() +
   geom_point() +
   scale_color_manual(values = c("orange", "skyblue")) +
   # make datetime labels
   scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
   theme_bw()


Hope this helps,

Rui Barradas


?s 08:37 de 20/09/2022, Jim Lemon escreveu:
> Hi David,
> I'm back home again. Try this:
> 
> b<-read.table(text=
> "Dtime DNO2 DVOC     Dpm10    Dpm2.5 Dpm1 Mtime MNO2 MVOC    Mpm10 Mpm2.5 Mpm1
>   18:00   28  164  81.34773 24.695435   14 18:00   19  151 3.000000      2    1
>   18:01   27  163  74.44034 23.751198   14 18:01   20  148 3.000000      2    1
>   18:02   30  160  72.21975 22.463129   13 18:02   19  150 3.000000      2    1",
>   header=TRUE,stringsAsFactors=FALSE)
> b$POSIXtime<-strptime(paste("2022-09-20",b$Dtime),"%Y-%m-%d %H:%M")
> png("DFPNO2.png")
> plot(b$POSIXtime,b$DNO2,type="b",main="NO2 readings (2022-09-20)",
>   xlab="Date/time",ylab="NO2",ylim=range(c(b$DNO2,b$MNO2)),
>   pch=19,col="red")
>   points(b$POSIXtime,b$MNO2,type="b",pch=19,col="blue")
>   legend("center",legend=c("DNO2","MNO2"),pch=19,col=c("red","blue"))
> dev.off()
> 
> If you have more than one day, it will show up on the x axis. You can
> also format the tick labels if you want the full dates for only one
> day.
> 
> Jim
> 
> PS thanks Avi
> 
> On Tue, Sep 20, 2022 at 4:49 PM Parkhurst, David <parkhurs at indiana.edu> wrote:
>>
>> Thank you.
>>
>> DFP (iPad)
>>
>>> On Sep 19, 2022, at 8:15 AM, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>>>
>>> ?My version of this email has a bunch of ? that I do not know how to interpret. Emails to this group need to be in plain text. HTML content is deleted or converted and impossible or at least difficult to interpret.
>>>
>>> Do not share confidential data. Please change some numbers or variable names and share that.
>>> If this helps:
>>> 1) Make sure your time variable is a datetime object.
>>> 2) At least in ggplot it should now behave as expected.
>>> ggplot(df, aes(y=NO2, x=datetime)) + geom_point()
>>>
>>> That will be a start as a scatterplot, but the graph can be customized or changed if scatterplot was not desired.
>>>
>>> Tim
>>>
>>> -----Original Message-----
>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Parkhurst, David
>>> Sent: Sunday, September 18, 2022 4:27 PM
>>> To: r-help at r-project.org
>>> Subject: [R] Need help plotting
>>>
>>> [External Email]
>>>
>>> I?ve been retired since ?06 and have forgotten most of R.  Now I have a use for it, with some data from Bloomington?s Environmental Commission.
>>>
>>> I have a dataframe (obtained from read.csv) that contains numerous columns, including time (in Excel?s 18:00 format), and DNO2, and MNO2 from two air quality instruments.
>>>
>>> I?d like a plot of both the NO2 measurements against time.  I be happy to use either ordinary R plots or ggplot2 ones, if that would be a better way.  I?d much appreciate help.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From j@un20 @end|ng |rom @|b@ny@edu  Mon Sep 19 20:58:47 2022
From: j@un20 @end|ng |rom @|b@ny@edu (Sun, John)
Date: Mon, 19 Sep 2022 18:58:47 +0000
Subject: [R] How to find the variance-covariance matrix of a random-vector
 using R
Message-ID: <BL0PR04MB4563DA1D963568745F5F2416B94D9@BL0PR04MB4563.namprd04.prod.outlook.com>

Dear All,
Reposting as plain text rather than html. 

I realized that R does not support finding the variance-covariance matrix of a random-vector. It must take two arguments. Numpy's cov doesn't give sensible results.
I ask in a bigger context of finding the variance-covariance matrix of the vector of the dependent variables per subject which is the covariance form of the working-correlation matrix in GEE by Liang-Zeger (1986). Knowing it gives me better inference via efficiency improvement.

I have not received a reply on these posts, so I ask.
https://stats.stackexchange.com/questions/589022/how-to-find-covy-i-using-software-in-the-context-sum-i-1-mathrmk 
https://stackoverflow.com/questions/73755242/is-there-a-r-function-or-python-for-finding-the-covariance-matrix-of-a-random-ve

Best regards,
Kpjm


From tibor@kiss m@iii@g oii rub@de  Mon Sep 19 13:38:33 2022
From: tibor@kiss m@iii@g oii rub@de (tibor@kiss m@iii@g oii rub@de)
Date: Mon, 19 Sep 2022 13:38:33 +0200
Subject: [R] Question concerning side effects of treating invalid factor
 levels
In-Reply-To: <CAGgJW74k=rXJOSBYhvHR4E7bVhxcNUBn0SqcO0EwQf8XVCxtVA@mail.gmail.com>
References: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
 <CAGgJW74k=rXJOSBYhvHR4E7bVhxcNUBn0SqcO0EwQf8XVCxtVA@mail.gmail.com>
Message-ID: <CF27B150-2967-41DC-BE42-AD488FE57D41@rub.de>

Dear Eric,

thank you very much. I wouldn?t have come to the idea to look up the help page for _c()_, which of course explains the coercion to the highest type. 

Best

T.


> Am 19.09.2022 um 13:31 schrieb Eric Berger <ericjberger at gmail.com>:
> 
> You are misinterpreting what is going on.
> The rbind command includes c(char, char, int) which produces a
> character vector of length 3.
> This is what you are rbind-ing which changes the type of the RT column.
> 
> If you do rbind(df, data.frame(P="in", ANSWER="V>N",
> RT=round(runif(1,7000,16000),0)))
> you will see that everything is fine. (New factor values are created.)
> 
> HTH,
> Eric
> 
> On Mon, Sep 19, 2022 at 2:14 PM Tibor Kiss via R-help
> <r-help at r-project.org> wrote:
>> 
>> Dear List members,
>> 
>> I have tried now for several times to find out about a side effect of treating invalid factor levels, but did not find an answer. Various answers on stackexchange etc. produce the stuff that irritates me without even mentioning it.
>> So I am asking the list (apologies if this has been treated in the past).
>> 
>> If you add an invalid factor level to a column in a data frame, this has the side effect of turning a numerical column into a column with character strings. Here is a simple example:
>> 
>>> df <- data.frame(
>>        P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
>>        ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))),
>>        RT = round(runif(6, 7000, 16000), 0))
>> 
>>> str(df)
>> 'data.frame':   6 obs. of  3 variables:
>> $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1
>> $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1
>> $ RT    : num  11157 13719 14388 14527 14686 ..
>> 
>>> df <- rbind(df, c("in", "V>N", round(runif(1, 7000, 16000), 0)))
>> 
>>> str(df)
>> 'data.frame':   7 obs. of  3 variables:
>> $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1 NA
>> $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1 NA
>> $ RT    : chr  "11478" "15819" "8305" "8852" ?
>> 
>> You see that RT has changed from _num_ to _chr_ as a side effect of adding the invalid factor level as NA. I would appreciate understanding what the purpose of the type coercion is.
>> 
>> Thanks in advance
>> 
>> 
>> Tibor
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From tibor@kiss m@iii@g oii rub@de  Mon Sep 19 14:07:12 2022
From: tibor@kiss m@iii@g oii rub@de (tibor@kiss m@iii@g oii rub@de)
Date: Mon, 19 Sep 2022 14:07:12 +0200
Subject: [R] Question concerning side effects of treating invalid factor
 levels
In-Reply-To: <BN6PR2201MB15539A97C31A408428FCC118CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
 <BN6PR2201MB15539A97C31A408428FCC118CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <EC96012D-CB9A-47B1-84A1-90A6C3845129@rub.de>

Hi, 

this is a misunderstanding of my question. I wasn?t worried about invalid factor levels that produce NA. My question was why a column changes its class, which I thought was a side effect. If you add a vector containing one character string, the class of the whole vector becomes _chr_. And after this element has been added to a column, we have two NAs for the column which are factors, and a character string, which is responsible for the change of a numerical vector into a character string vector (see ?c, where you find: "The output type is determined from the highest type of the components in the hierarchy NULL < raw < logical < integer < double < complex < character < list < expression.?).

 
Best


Tibor



> Am 19.09.2022 um 13:59 schrieb Ebert,Timothy Aaron <tebert at ufl.edu>:
> 
> In your example code, the variable remains a class factor, and all entries are valid. The variables will behave as expected given the factor levels in the original dataframe.
> 
> (At least on my system R 4.2, in RStudio, in Windows) R returns a couple of error messages warning me that I was bad.
> What you get is NA for "not available", or "not appropriate" or a missing value. You gave the system an invalid factor level so it was entered as missing. If you get data that has a new factor level, you need to tell R to expect a new factor level first.
> 
> levels(f1) <- c(levels(f1),"New Level")
> levels(f1) <- c(levels(f1),c("NL1","NL2"))
> 
> 
> Tim
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Tibor Kiss via R-help
> Sent: Monday, September 19, 2022 6:11 AM
> To: r-help at r-project.org
> Subject: [R] Question concerning side effects of treating invalid factor levels
> 
> [External Email]
> 
> Dear List members,
> 
> I have tried now for several times to find out about a side effect of treating invalid factor levels, but did not find an answer. Various answers on stackexchange etc. produce the stuff that irritates me without even mentioning it.
> So I am asking the list (apologies if this has been treated in the past).
> 
> If you add an invalid factor level to a column in a data frame, this has the side effect of turning a numerical column into a column with character strings. Here is a simple example:
> 
>> df <- data.frame(
>        P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
>        ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))),
>        RT = round(runif(6, 7000, 16000), 0))
> 
>> str(df)
> 'data.frame':   6 obs. of  3 variables:
> $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1
> $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1
> $ RT    : num  11157 13719 14388 14527 14686 ..
> 
>> df <- rbind(df, c("in", "V>N", round(runif(1, 7000, 16000), 0)))
> 
>> str(df)
> 'data.frame':   7 obs. of  3 variables:
> $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1 NA
> $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1 NA
> $ RT    : chr  "11478" "15819" "8305" "8852" ...
> 
> You see that RT has changed from _num_ to _chr_ as a side effect of adding the invalid factor level as NA. I would appreciate understanding what the purpose of the type coercion is.
> 
> Thanks in advance
> 
> 
> Tibor
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C6ee1a1f50c14442beef508da9a301bde%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991828670135028%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=sNDYEJKhjSu%2FtrTIwZx5yVemKgDheQYXLrcQqJ2mOgo%3D&amp;reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C6ee1a1f50c14442beef508da9a301bde%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991828670135028%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=AP%2B4fa5pvbGr3IfwdiQvjXwkOdY90CIWIWWWmpIHH7w%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From @@r@h@go@|ee @end|ng |rom gm@||@com  Tue Sep 20 15:02:07 2022
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Tue, 20 Sep 2022 09:02:07 -0400
Subject: [R] Question concerning side effects of treating invalid factor
 levels
In-Reply-To: <EC96012D-CB9A-47B1-84A1-90A6C3845129@rub.de>
References: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
 <BN6PR2201MB15539A97C31A408428FCC118CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <EC96012D-CB9A-47B1-84A1-90A6C3845129@rub.de>
Message-ID: <CAM_vjumGY-vocE_RPvizJW-EeZ2j6NxozeAX+zRayT5vXSzOKw@mail.gmail.com>

Hi Tibor,

No, you are misunderstanding the source of the problem. It has nothing
to do with factors.

Instead, it has to do with the inability of a vector to hold more than
one class.

You are using rbind() to add a new row to your data frame, but that
vector is being coerced to character. That's what is forcing your
numeric column to become character: you're adding a character to it.

> c("in", "V>N", round(runif(1, 7000, 16000), 0))
[1] "in"    "V>N"   "15709"

It has nothing whatsoever to do with factors or factor levels, and
would occur if you were adding it to a data frame with character
values.

If you want to mix types, you cannot use a vector.

c2 <- data.frame(P = "in", ANSWER = "V>N", RT = round(runif(1, 7000, 16000), 0))
> str(rbind(df, c2))
'data.frame': 7 obs. of  3 variables:
 $ P     : Factor w/ 4 levels "mit","mittels",..: 2 1 2 3 1 1 4
 $ ANSWER: Factor w/ 3 levels "OBJ>PP","PP>OBJ",..: 2 2 2 2 1 1 3
 $ RT    : num  10867 14808 11600 15881 8984 ...


Sarah

On Tue, Sep 20, 2022 at 8:45 AM Tibor Kiss via R-help
<r-help at r-project.org> wrote:
>
> Hi,
>
> this is a misunderstanding of my question. I wasn?t worried about invalid factor levels that produce NA. My question was why a column changes its class, which I thought was a side effect. If you add a vector containing one character string, the class of the whole vector becomes _chr_. And after this element has been added to a column, we have two NAs for the column which are factors, and a character string, which is responsible for the change of a numerical vector into a character string vector (see ?c, where you find: "The output type is determined from the highest type of the components in the hierarchy NULL < raw < logical < integer < double < complex < character < list < expression.?).
>
>
> Best
>
>
> Tibor
>
>
>
> > Am 19.09.2022 um 13:59 schrieb Ebert,Timothy Aaron <tebert at ufl.edu>:
> >
> > In your example code, the variable remains a class factor, and all entries are valid. The variables will behave as expected given the factor levels in the original dataframe.
> >
> > (At least on my system R 4.2, in RStudio, in Windows) R returns a couple of error messages warning me that I was bad.
> > What you get is NA for "not available", or "not appropriate" or a missing value. You gave the system an invalid factor level so it was entered as missing. If you get data that has a new factor level, you need to tell R to expect a new factor level first.
> >
> > levels(f1) <- c(levels(f1),"New Level")
> > levels(f1) <- c(levels(f1),c("NL1","NL2"))
> >
> >
> > Tim
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Tibor Kiss via R-help
> > Sent: Monday, September 19, 2022 6:11 AM
> > To: r-help at r-project.org
> > Subject: [R] Question concerning side effects of treating invalid factor levels
> >
> > [External Email]
> >
> > Dear List members,
> >
> > I have tried now for several times to find out about a side effect of treating invalid factor levels, but did not find an answer. Various answers on stackexchange etc. produce the stuff that irritates me without even mentioning it.
> > So I am asking the list (apologies if this has been treated in the past).
> >
> > If you add an invalid factor level to a column in a data frame, this has the side effect of turning a numerical column into a column with character strings. Here is a simple example:
> >
> >> df <- data.frame(
> >        P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
> >        ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))),
> >        RT = round(runif(6, 7000, 16000), 0))
> >
> >> str(df)
> > 'data.frame':   6 obs. of  3 variables:
> > $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1
> > $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1
> > $ RT    : num  11157 13719 14388 14527 14686 ..
> >
> >> df <- rbind(df, c("in", "V>N", round(runif(1, 7000, 16000), 0)))
> >
> >> str(df)
> > 'data.frame':   7 obs. of  3 variables:
> > $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1 NA
> > $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1 NA
> > $ RT    : chr  "11478" "15819" "8305" "8852" ...
> >
> > You see that RT has changed from _num_ to _chr_ as a side effect of adding the invalid factor level as NA. I would appreciate understanding what the purpose of the type coercion is.
> >
> > Thanks in advance
> >
> >
> > Tibor
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C6ee1a1f50c14442beef508da9a301bde%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991828670135028%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=sNDYEJKhjSu%2FtrTIwZx5yVemKgDheQYXLrcQqJ2mOgo%3D&amp;reserved=0
> > PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C6ee1a1f50c14442beef508da9a301bde%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637991828670135028%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=AP%2B4fa5pvbGr3IfwdiQvjXwkOdY90CIWIWWWmpIHH7w%3D&amp;reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From tebert @end|ng |rom u||@edu  Tue Sep 20 15:41:15 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 20 Sep 2022 13:41:15 +0000
Subject: [R] Question concerning side effects of treating invalid factor
 levels
In-Reply-To: <CAM_vjumGY-vocE_RPvizJW-EeZ2j6NxozeAX+zRayT5vXSzOKw@mail.gmail.com>
References: <9FC2F91A-9EA6-44BC-9B56-72B9FAA31EEE@rub.de>
 <BN6PR2201MB15539A97C31A408428FCC118CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <EC96012D-CB9A-47B1-84A1-90A6C3845129@rub.de>
 <CAM_vjumGY-vocE_RPvizJW-EeZ2j6NxozeAX+zRayT5vXSzOKw@mail.gmail.com>
Message-ID: <BN6PR2201MB1553195C09F0994661FC0DABCF4C9@BN6PR2201MB1553.namprd22.prod.outlook.com>

Hi Tibor,
   I'll try again. Your problem has nothing to do with factors and everything to do with trying to bind a vector to a dataframe and not understanding that a vector must be of one class and that a column in a data frame is a vector and therefore must also be of one class. If you want to add a new row of data to your existing data frame use a new data frame with one row.

df <- data.frame(
  P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
  ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))),
  RT = round(runif(6, 7000, 16000), 0)
)

dq<-data.frame(
  P = factor("in"),
  ANSWER = factor("V>N"),
  RT = round(runif(1,7000, 16000), 0)
)

df2 <- rbind(df,dq)
df2

In this approach R kindly adds the new class to the factor variables and the numeric value to the numeric variable.
Keeping in mind that a vector can only be of one class will save you many debugging hours later on.

Tim

-----Original Message-----
From: Sarah Goslee <sarah.goslee at gmail.com> 
Sent: Tuesday, September 20, 2022 9:02 AM
To: tibor.kiss at rub.de
Cc: Ebert,Timothy Aaron <tebert at ufl.edu>; r-help at r-project.org
Subject: Re: [R] Question concerning side effects of treating invalid factor levels

[External Email]

Hi Tibor,

No, you are misunderstanding the source of the problem. It has nothing to do with factors.

Instead, it has to do with the inability of a vector to hold more than one class.

You are using rbind() to add a new row to your data frame, but that vector is being coerced to character. That's what is forcing your numeric column to become character: you're adding a character to it.

> c("in", "V>N", round(runif(1, 7000, 16000), 0))
[1] "in"    "V>N"   "15709"

It has nothing whatsoever to do with factors or factor levels, and would occur if you were adding it to a data frame with character values.

If you want to mix types, you cannot use a vector.

c2 <- data.frame(P = "in", ANSWER = "V>N", RT = round(runif(1, 7000, 16000), 0))
> str(rbind(df, c2))
'data.frame': 7 obs. of  3 variables:
 $ P     : Factor w/ 4 levels "mit","mittels",..: 2 1 2 3 1 1 4
 $ ANSWER: Factor w/ 3 levels "OBJ>PP","PP>OBJ",..: 2 2 2 2 1 1 3
 $ RT    : num  10867 14808 11600 15881 8984 ...


Sarah

On Tue, Sep 20, 2022 at 8:45 AM Tibor Kiss via R-help <r-help at r-project.org> wrote:
>
> Hi,
>
> this is a misunderstanding of my question. I wasn't worried about invalid factor levels that produce NA. My question was why a column changes its class, which I thought was a side effect. If you add a vector containing one character string, the class of the whole vector becomes _chr_. And after this element has been added to a column, we have two NAs for the column which are factors, and a character string, which is responsible for the change of a numerical vector into a character string vector (see ?c, where you find: "The output type is determined from the highest type of the components in the hierarchy NULL < raw < logical < integer < double < complex < character < list < expression.").
>
>
> Best
>
>
> Tibor
>
>
>
> > Am 19.09.2022 um 13:59 schrieb Ebert,Timothy Aaron <tebert at ufl.edu>:
> >
> > In your example code, the variable remains a class factor, and all entries are valid. The variables will behave as expected given the factor levels in the original dataframe.
> >
> > (At least on my system R 4.2, in RStudio, in Windows) R returns a couple of error messages warning me that I was bad.
> > What you get is NA for "not available", or "not appropriate" or a missing value. You gave the system an invalid factor level so it was entered as missing. If you get data that has a new factor level, you need to tell R to expect a new factor level first.
> >
> > levels(f1) <- c(levels(f1),"New Level")
> > levels(f1) <- c(levels(f1),c("NL1","NL2"))
> >
> >
> > Tim
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Tibor Kiss 
> > via R-help
> > Sent: Monday, September 19, 2022 6:11 AM
> > To: r-help at r-project.org
> > Subject: [R] Question concerning side effects of treating invalid 
> > factor levels
> >
> > [External Email]
> >
> > Dear List members,
> >
> > I have tried now for several times to find out about a side effect of treating invalid factor levels, but did not find an answer. Various answers on stackexchange etc. produce the stuff that irritates me without even mentioning it.
> > So I am asking the list (apologies if this has been treated in the past).
> >
> > If you add an invalid factor level to a column in a data frame, this has the side effect of turning a numerical column into a column with character strings. Here is a simple example:
> >
> >> df <- data.frame(
> >        P = factor(c("mittels", "mit", "mittels", "ueber", "mit", "mit")),
> >        ANSWER = factor(c(rep("PP>OBJ", 4), rep("OBJ>PP", 2))),
> >        RT = round(runif(6, 7000, 16000), 0))
> >
> >> str(df)
> > 'data.frame':   6 obs. of  3 variables:
> > $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1
> > $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1
> > $ RT    : num  11157 13719 14388 14527 14686 ..
> >
> >> df <- rbind(df, c("in", "V>N", round(runif(1, 7000, 16000), 0)))
> >
> >> str(df)
> > 'data.frame':   7 obs. of  3 variables:
> > $ P     : Factor w/ 3 levels "mit","mittels",..: 2 1 2 3 1 1 NA
> > $ ANSWER: Factor w/ 2 levels "OBJ>PP","PP>OBJ": 2 2 2 2 1 1 NA
> > $ RT    : chr  "11478" "15819" "8305" "8852" ...
> >
> > You see that RT has changed from _num_ to _chr_ as a side effect of adding the invalid factor level as NA. I would appreciate understanding what the purpose of the type coercion is.
> >
> > Thanks in advance
> >
> >
> > Tibor
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%4
> > 0ufl.edu%7C89299159318e49b22f6f08da9b087b9f%7C0d4da0f84a314d76ace60a
> > 62331e1b84%7C0%7C0%7C637992757973393617%7CUnknown%7CTWFpbGZsb3d8eyJW
> > IjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C300
> > 0%7C%7C%7C&amp;sdata=QDDwdMoIrtcm%2BQrDk4VirkyLIMSaZ29nDo2Ly5qkbjA%3
> > D&amp;reserved=0 PLEASE do read the posting guide 
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww
> > .r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.
> > edu%7C89299159318e49b22f6f08da9b087b9f%7C0d4da0f84a314d76ace60a62331
> > e1b84%7C0%7C0%7C637992757973393617%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiM
> > C4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%
> > 7C%7C&amp;sdata=PBnIfaLo0LvQ87W5EQETGbat%2BtWcDGCjNitIyYWnEMw%3D&amp
> > ;reserved=0 and provide commented, minimal, self-contained, 
> > reproducible code.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7C89299159318e49b22f6f08da9b087b9f%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C637992757973393617%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=QDDwdMoIrtcm%2BQrDk4VirkyLIMSaZ29nDo2Ly5qkbjA%3D&amp;reserv
> ed=0 PLEASE do read the posting guide 
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7C89299159318e49b22f6f08da9b087b9f%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C637992757973393617%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=PBnIfaLo0LvQ87W5EQETGbat%2BtWcDGCjNitIyYWnEMw%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.



--
Sarah Goslee (she/her)
https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.numberwright.com%2F&amp;data=05%7C01%7Ctebert%40ufl.edu%7C89299159318e49b22f6f08da9b087b9f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637992757973393617%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=qhuoctVqUZSBK4BKhVtLqfr2iQDXNwCswZaSlAqF5qQ%3D&amp;reserved=0


From w||||@mwdun|@p @end|ng |rom gm@||@com  Tue Sep 20 17:04:24 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Tue, 20 Sep 2022 08:04:24 -0700
Subject: [R] 
 How to find the variance-covariance matrix of a random-vector
 using R
In-Reply-To: <BL0PR04MB4563DA1D963568745F5F2416B94D9@BL0PR04MB4563.namprd04.prod.outlook.com>
References: <BL0PR04MB4563DA1D963568745F5F2416B94D9@BL0PR04MB4563.namprd04.prod.outlook.com>
Message-ID: <CAHqSRuQxT3PDSZSXNYS6U0eu4box2uo9MaBsgm-rUyBPk02+5A@mail.gmail.com>

?var

E.g.,

> x <- mvtnorm::rmvnorm(1e5, mean=101:105, sigma=matrix(1,5,5)+diag(11:15))
> dim(x)
[1] 100000      5
> var(x)
           [,1]       [,2]       [,3]       [,4]      [,5]
[1,] 11.9666055  1.0603876  0.9627672  1.0371084  0.983217
[2,]  1.0603876 13.0774518  1.0228972  0.9261868  1.059799
[3,]  0.9627672  1.0228972 13.9296063  1.0444007  1.051089
[4,]  1.0371084  0.9261868  1.0444007 15.1556199  1.052573
[5,]  0.9832170  1.0597985  1.0510888  1.0525734 15.965351

-Bill

On Tue, Sep 20, 2022 at 4:24 AM Sun, John <jsun20 at albany.edu> wrote:

> Dear All,
> Reposting as plain text rather than html.
>
> I realized that R does not support finding the variance-covariance matrix
> of a random-vector. It must take two arguments. Numpy's cov doesn't give
> sensible results.
> I ask in a bigger context of finding the variance-covariance matrix of the
> vector of the dependent variables per subject which is the covariance form
> of the working-correlation matrix in GEE by Liang-Zeger (1986). Knowing it
> gives me better inference via efficiency improvement.
>
> I have not received a reply on these posts, so I ask.
>
> https://stats.stackexchange.com/questions/589022/how-to-find-covy-i-using-software-in-the-context-sum-i-1-mathrmk
>
> https://stackoverflow.com/questions/73755242/is-there-a-r-function-or-python-for-finding-the-covariance-matrix-of-a-random-ve
>
> Best regards,
> Kpjm
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@rkhur@ @end|ng |rom |nd|@n@@edu  Tue Sep 20 14:44:39 2022
From: p@rkhur@ @end|ng |rom |nd|@n@@edu (Parkhurst, David)
Date: Tue, 20 Sep 2022 12:44:39 +0000
Subject: [R] Need help plotting
In-Reply-To: <a73a2750-f7c6-0bfc-aca6-c10d73f6659e@sapo.pt>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <254C06FF-BDBA-492C-A4AA-9BACD5CB558C@indiana.edu>
 <CA+8X3fUkm0C1UT1KL9SG-kP7E0PgVqee-ki0AEEdL9s25u1phA@mail.gmail.com>
 <a73a2750-f7c6-0bfc-aca6-c10d73f6659e@sapo.pt>
Message-ID: <BN7PR08MB411460AC2A445E66B958A3A9D04C9@BN7PR08MB4114.namprd08.prod.outlook.com>

I like the looks of what you are doing here.

However, this from my system:
> library(chron)
Error in library(chron) : there is no package called ?chron?

How can I get chron?

Also, IU?s tech support told me yesterday that if I responded to a message that came as plain text, my response would go out as plain text.  Is that true for this response, or is it in HTML?

From: Rui Barradas <ruipbarradas at sapo.pt>
Date: Tuesday, September 20, 2022 at 4:52 AM
To: Jim Lemon <drjimlemon at gmail.com>, Parkhurst, David <parkhurs at indiana.edu>, r-help mailing list <r-help at r-project.org>
Subject: Re: [R] Need help plotting
Hello,

Now with data, here are base R and ggplot2 plots.


b <- read.table(text=
                 "Dtime DNO2 DVOC     Dpm10    Dpm2.5 Dpm1 Mtime MNO2
MVOC    Mpm10 Mpm2.5 Mpm1
  18:00   28  164  81.34773 24.695435   14 18:00   19  151 3.000000
  2    1
  18:01   27  163  74.44034 23.751198   14 18:01   20  148 3.000000
  2    1
  18:02   30  160  72.21975 22.463129   13 18:02   19  150 3.000000
  2    1",
               header=TRUE,stringsAsFactors=FALSE)


# This base R plot needs package chron
library(chron)


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Sep 20 17:57:17 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 20 Sep 2022 08:57:17 -0700
Subject: [R] Need help plotting
In-Reply-To: <BN7PR08MB411460AC2A445E66B958A3A9D04C9@BN7PR08MB4114.namprd08.prod.outlook.com>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <254C06FF-BDBA-492C-A4AA-9BACD5CB558C@indiana.edu>
 <CA+8X3fUkm0C1UT1KL9SG-kP7E0PgVqee-ki0AEEdL9s25u1phA@mail.gmail.com>
 <a73a2750-f7c6-0bfc-aca6-c10d73f6659e@sapo.pt>
 <BN7PR08MB411460AC2A445E66B958A3A9D04C9@BN7PR08MB4114.namprd08.prod.outlook.com>
Message-ID: <CAGxFJbSoVZ-3-kCEORmfxcDxM=BjD46GVqY9ArMWdkUdOyWCpw@mail.gmail.com>

"Also, IU?s tech support told me yesterday that if I responded to a message
that came as plain text, my response would go out as plain text.  Is that
true for this response, or is it in HTML?"

Nope, HTML. You need to set your email client to send in plain text. Do an
internet search on how to do this, e.g. with "How to send plain text email
for <<your email client here>>".

Also see "?download.packages" for how to get packages from an R package
repository (though RStudio and no doubt other IDE's have an interface
through which to do this).

Cheers,
Bert

On Tue, Sep 20, 2022 at 8:49 AM Parkhurst, David <parkhurs at indiana.edu>
wrote:

> I like the looks of what you are doing here.
>
> However, this from my system:
> > library(chron)
> Error in library(chron) : there is no package called ?chron?
>
> How can I get chron?
>
> Also, IU?s tech support told me yesterday that if I responded to a message
> that came as plain text, my response would go out as plain text.  Is that
> true for this response, or is it in HTML?
>
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Date: Tuesday, September 20, 2022 at 4:52 AM
> To: Jim Lemon <drjimlemon at gmail.com>, Parkhurst, David <
> parkhurs at indiana.edu>, r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] Need help plotting
> Hello,
>
> Now with data, here are base R and ggplot2 plots.
>
>
> b <- read.table(text=
>                  "Dtime DNO2 DVOC     Dpm10    Dpm2.5 Dpm1 Mtime MNO2
> MVOC    Mpm10 Mpm2.5 Mpm1
>   18:00   28  164  81.34773 24.695435   14 18:00   19  151 3.000000
>   2    1
>   18:01   27  163  74.44034 23.751198   14 18:01   20  148 3.000000
>   2    1
>   18:02   30  160  72.21975 22.463129   13 18:02   19  150 3.000000
>   2    1",
>                header=TRUE,stringsAsFactors=FALSE)
>
>
> # This base R plot needs package chron
> library(chron)
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ph|||p@m|th @end|ng |rom proton@me  Mon Sep 19 22:47:55 2022
From: ph|||p@m|th @end|ng |rom proton@me (Phil Smith)
Date: Mon, 19 Sep 2022 20:47:55 +0000
Subject: [R] getDividents() doesn't work
Message-ID: <jtIBIu-WT3YSSsG17WkqR7HElqbF7LBJiiqwfwWT5uzmwrbEknbnXVcsNmcUUsm-lP2xv3UVjN6qcUrZJ4FY6kVh3aMxMDNHZoRGKyRLpMc=@proton.me>

Hi R-Help People!

I'm using the current version of R for Ubuntu: R version 4.2.1 (2022-06-23) -- "Funny-Looking Kid."

I'm using the quantmod package and am having difficulty with the getDividends() function from the quantmod package.

Here is my code:

> library(quantmod)

>
> getDividends( "VOX" )

Here is the output:
Warning message:
In read.table(file = file, header = header, sep = sep, quote = quote, :
incomplete final line found by readTableHeader on 'https://query1.finance.yahoo.com/v7/finance/download/VOX?period1=-2208988800&period2=1663545600&interval=1d&events=split'>

There was not an object in my work space like "VOC.div" or anything like that, so I'm pretty sure getDividends failed completely....

.... except for the slight possiblity that I did something wrong!

Can somebody please tell me how to get getDividends to work?

Thank you!
Daryl
Daryl's Rural Roadside Honor System Vegetable and Flower Stand and Occasional Dairy Produce
Rural area, USA
	[[alternative HTML version deleted]]


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Tue Sep 20 18:51:35 2022
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Tue, 20 Sep 2022 11:51:35 -0500
Subject: [R] getDividents() doesn't work
In-Reply-To: <jtIBIu-WT3YSSsG17WkqR7HElqbF7LBJiiqwfwWT5uzmwrbEknbnXVcsNmcUUsm-lP2xv3UVjN6qcUrZJ4FY6kVh3aMxMDNHZoRGKyRLpMc=@proton.me>
References: <jtIBIu-WT3YSSsG17WkqR7HElqbF7LBJiiqwfwWT5uzmwrbEknbnXVcsNmcUUsm-lP2xv3UVjN6qcUrZJ4FY6kVh3aMxMDNHZoRGKyRLpMc=@proton.me>
Message-ID: <CAPPM_gQ94kE27TFvGU4wL62yc3YxRoRkYTvRRjQajOyKBrfMUQ@mail.gmail.com>

You need to assign the result to an object.

vox_div <- quantmod::getDividends("VOX")

You should check to see if the dividends are split-adjusted or not.
Yahoo has changed that several times over the years. Use the
`split.adjust` argument to get the (un)adjusted dividends. The boolean
may be backward because of Yahoo's changes.

Best,
Josh

On Tue, Sep 20, 2022 at 11:48 AM Phil Smith via R-help
<r-help at r-project.org> wrote:
>
> Hi R-Help People!
>
> I'm using the current version of R for Ubuntu: R version 4.2.1 (2022-06-23) -- "Funny-Looking Kid."
>
> I'm using the quantmod package and am having difficulty with the getDividends() function from the quantmod package.
>
> Here is my code:
>
> > library(quantmod)
>
> >
> > getDividends( "VOX" )
>
> Here is the output:
> Warning message:
> In read.table(file = file, header = header, sep = sep, quote = quote, :
> incomplete final line found by readTableHeader on 'https://query1.finance.yahoo.com/v7/finance/download/VOX?period1=-2208988800&period2=1663545600&interval=1d&events=split'>
>
> There was not an object in my work space like "VOC.div" or anything like that, so I'm pretty sure getDividends failed completely....
>
> .... except for the slight possiblity that I did something wrong!
>
> Can somebody please tell me how to get getDividends to work?
>
> Thank you!
> Daryl
> Daryl's Rural Roadside Honor System Vegetable and Flower Stand and Occasional Dairy Produce
> Rural area, USA
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From bgunter@4567 @end|ng |rom gm@||@com  Tue Sep 20 19:00:39 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 20 Sep 2022 10:00:39 -0700
Subject: [R] getDividents() doesn't work
In-Reply-To: <jtIBIu-WT3YSSsG17WkqR7HElqbF7LBJiiqwfwWT5uzmwrbEknbnXVcsNmcUUsm-lP2xv3UVjN6qcUrZJ4FY6kVh3aMxMDNHZoRGKyRLpMc=@proton.me>
References: <jtIBIu-WT3YSSsG17WkqR7HElqbF7LBJiiqwfwWT5uzmwrbEknbnXVcsNmcUUsm-lP2xv3UVjN6qcUrZJ4FY6kVh3aMxMDNHZoRGKyRLpMc=@proton.me>
Message-ID: <CAGxFJbTVnSCMC=kh6ZZF2d4G66MwSMZ8wmmn4QdBL2r1V1+qtQ@mail.gmail.com>

... and do note that a "warning" is not an "error." Often the correct
result will still be obtained.

-- Bert

On Tue, Sep 20, 2022 at 9:48 AM Phil Smith via R-help <r-help at r-project.org>
wrote:

> Hi R-Help People!
>
> I'm using the current version of R for Ubuntu: R version 4.2.1
> (2022-06-23) -- "Funny-Looking Kid."
>
> I'm using the quantmod package and am having difficulty with the
> getDividends() function from the quantmod package.
>
> Here is my code:
>
> > library(quantmod)
>
> >
> > getDividends( "VOX" )
>
> Here is the output:
> Warning message:
> In read.table(file = file, header = header, sep = sep, quote = quote, :
> incomplete final line found by readTableHeader on '
> https://query1.finance.yahoo.com/v7/finance/download/VOX?period1=-2208988800&period2=1663545600&interval=1d&events=split
> '>
>
> There was not an object in my work space like "VOC.div" or anything like
> that, so I'm pretty sure getDividends failed completely....
>
> .... except for the slight possiblity that I did something wrong!
>
> Can somebody please tell me how to get getDividends to work?
>
> Thank you!
> Daryl
> Daryl's Rural Roadside Honor System Vegetable and Flower Stand and
> Occasional Dairy Produce
> Rural area, USA
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Sep 20 19:04:32 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 20 Sep 2022 20:04:32 +0300
Subject: [R] getDividents() doesn't work
In-Reply-To: <jtIBIu-WT3YSSsG17WkqR7HElqbF7LBJiiqwfwWT5uzmwrbEknbnXVcsNmcUUsm-lP2xv3UVjN6qcUrZJ4FY6kVh3aMxMDNHZoRGKyRLpMc=@proton.me>
References: <jtIBIu-WT3YSSsG17WkqR7HElqbF7LBJiiqwfwWT5uzmwrbEknbnXVcsNmcUUsm-lP2xv3UVjN6qcUrZJ4FY6kVh3aMxMDNHZoRGKyRLpMc=@proton.me>
Message-ID: <20220920200432.5489f34c@arachnoid>

On Mon, 19 Sep 2022 20:47:55 +0000
Phil Smith via R-help <r-help at r-project.org> wrote:

> incomplete final line found by readTableHeader on
> 'https://query1.finance.yahoo.com/v7/finance/download/VOX?period1=-2208988800&period2=1663545600&interval=1d&events=split'

When I follow the link myself, I get a CSV file that contains a single
header line and no data lines at all. Not sure whether it's Yahoo's
problem or quantmod's problem, but it's definitely related.

-- 
Best regards,
Ivan


From tebert @end|ng |rom u||@edu  Tue Sep 20 19:30:37 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 20 Sep 2022 17:30:37 +0000
Subject: [R] Need help plotting
In-Reply-To: <CAGxFJbSoVZ-3-kCEORmfxcDxM=BjD46GVqY9ArMWdkUdOyWCpw@mail.gmail.com>
References: <BN7PR08MB4114139FFA4A15C3F11D7C13D04A9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <BN6PR2201MB1553CEC1F2CA69424090E735CF4D9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <254C06FF-BDBA-492C-A4AA-9BACD5CB558C@indiana.edu>
 <CA+8X3fUkm0C1UT1KL9SG-kP7E0PgVqee-ki0AEEdL9s25u1phA@mail.gmail.com>
 <a73a2750-f7c6-0bfc-aca6-c10d73f6659e@sapo.pt>
 <BN7PR08MB411460AC2A445E66B958A3A9D04C9@BN7PR08MB4114.namprd08.prod.outlook.com>
 <CAGxFJbSoVZ-3-kCEORmfxcDxM=BjD46GVqY9ArMWdkUdOyWCpw@mail.gmail.com>
Message-ID: <BN6PR2201MB155361B57083FD48FF36E519CF4C9@BN6PR2201MB1553.namprd22.prod.outlook.com>

Have you done something like this first?
install.packages("chron")

After that comes

library(chron)

and the rest of your code.

Tim
-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Bert Gunter
Sent: Tuesday, September 20, 2022 11:57 AM
To: Parkhurst, David <parkhurs at indiana.edu>
Cc: r-help at r-project.org
Subject: Re: [R] Need help plotting

[External Email]

"Also, IU's tech support told me yesterday that if I responded to a message that came as plain text, my response would go out as plain text.  Is that true for this response, or is it in HTML?"

Nope, HTML. You need to set your email client to send in plain text. Do an internet search on how to do this, e.g. with "How to send plain text email for <<your email client here>>".

Also see "?download.packages" for how to get packages from an R package repository (though RStudio and no doubt other IDE's have an interface through which to do this).

Cheers,
Bert

On Tue, Sep 20, 2022 at 8:49 AM Parkhurst, David <parkhurs at indiana.edu>
wrote:

> I like the looks of what you are doing here.
>
> However, this from my system:
> > library(chron)
> Error in library(chron) : there is no package called 'chron'
>
> How can I get chron?
>
> Also, IU's tech support told me yesterday that if I responded to a 
> message that came as plain text, my response would go out as plain 
> text.  Is that true for this response, or is it in HTML?
>
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Date: Tuesday, September 20, 2022 at 4:52 AM
> To: Jim Lemon <drjimlemon at gmail.com>, Parkhurst, David < 
> parkhurs at indiana.edu>, r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] Need help plotting
> Hello,
>
> Now with data, here are base R and ggplot2 plots.
>
>
> b <- read.table(text=
>                  "Dtime DNO2 DVOC     Dpm10    Dpm2.5 Dpm1 Mtime MNO2
> MVOC    Mpm10 Mpm2.5 Mpm1
>   18:00   28  164  81.34773 24.695435   14 18:00   19  151 3.000000
>   2    1
>   18:01   27  163  74.44034 23.751198   14 18:01   20  148 3.000000
>   2    1
>   18:02   30  160  72.21975 22.463129   13 18:02   19  150 3.000000
>   2    1",
>                header=TRUE,stringsAsFactors=FALSE)
>
>
> # This base R plot needs package chron
> library(chron)
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7C8fab207eca574151439308da9b2115b3%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C637992863653204275%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=aiBOxqQsZI1Mc1vF3tDW5skxG7dTAw2J0ZOCvnJdJFc%3D&amp;reserved
> =0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7C8fab207eca574151439308da9b2115b3%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C637992863653204275%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=ujwOnmg30fp6NUKoTk17Uev0pg2LBf0i8qvUtM%2F%2Fjvk%3D&amp;reserved=
> 0 and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C8fab207eca574151439308da9b2115b3%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637992863653204275%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=aiBOxqQsZI1Mc1vF3tDW5skxG7dTAw2J0ZOCvnJdJFc%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C8fab207eca574151439308da9b2115b3%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637992863653360508%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=dFIosQzsmHgaofIKXLjVlEOcHUSlSpchBhyr%2BMMKJiU%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From pr@k@@h@n@n| @end|ng |rom gm@||@com  Sat Sep 17 10:50:52 2022
From: pr@k@@h@n@n| @end|ng |rom gm@||@com (K Purna Prakash)
Date: Sat, 17 Sep 2022 14:20:52 +0530
Subject: [R] Mathematical working procedure of imputation methods
 (medianImpute, knnImpute, and bagImpute) in caret package R
Message-ID: <CAOGJCosj-ojUTBqBbxp9gXMbH9A_tPJYCe-3aAQ4UCJwpnaXrg@mail.gmail.com>

Dear Sir/Madam,
Greetings!!!

Kindly provide the detailed internal mathematical working mechanism of the
following median, KNN, and bagging imputation methods available in caret
package R.

 preProcess(train_data, method = "medianImpute")
 preProcess(train_data, method = "knnnImpute")
 preProcess(train_data method = "bagImpute")

The details provided by you will help me a lot for a better understanding
of these imputation methods especially while dealing with large sets of
data.

I will look forward to hearing from you.

Thanks and regards,
K. Purna Prakash.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Sep 20 23:46:39 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 20 Sep 2022 14:46:39 -0700
Subject: [R] Mathematical working procedure of imputation methods
 (medianImpute, knnImpute, and bagImpute) in caret package R
In-Reply-To: <CAOGJCosj-ojUTBqBbxp9gXMbH9A_tPJYCe-3aAQ4UCJwpnaXrg@mail.gmail.com>
References: <CAOGJCosj-ojUTBqBbxp9gXMbH9A_tPJYCe-3aAQ4UCJwpnaXrg@mail.gmail.com>
Message-ID: <CAGxFJbTf8VhzbqSP_krVcm0VSgnsmOzTDRgng++X7DYCJ4T18w@mail.gmail.com>

R is open source. Look at the code and read it.
Alternatively, look at references for all of this. e.g. on Wikipedia or via
web search. We generally do not provide statistical instruction on this
list.

Bert

On Tue, Sep 20, 2022 at 2:20 PM K Purna Prakash <prakash.nani at gmail.com>
wrote:

> Dear Sir/Madam,
> Greetings!!!
>
> Kindly provide the detailed internal mathematical working mechanism of the
> following median, KNN, and bagging imputation methods available in caret
> package R.
>
>  preProcess(train_data, method = "medianImpute")
>  preProcess(train_data, method = "knnnImpute")
>  preProcess(train_data method = "bagImpute")
>
> The details provided by you will help me a lot for a better understanding
> of these imputation methods especially while dealing with large sets of
> data.
>
> I will look forward to hearing from you.
>
> Thanks and regards,
> K. Purna Prakash.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Wed Sep 21 03:53:50 2022
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 21 Sep 2022 13:53:50 +1200
Subject: [R] Mathematical working procedure of imputation methods
 (medianImpute, knnImpute, and bagImpute) in caret package R
In-Reply-To: <CAOGJCosj-ojUTBqBbxp9gXMbH9A_tPJYCe-3aAQ4UCJwpnaXrg@mail.gmail.com>
References: <CAOGJCosj-ojUTBqBbxp9gXMbH9A_tPJYCe-3aAQ4UCJwpnaXrg@mail.gmail.com>
Message-ID: <CABcYAdK=fvZ6DzjacSp1cds7wkqBs9OUeY-e2F_nN4xYxhoK-g@mail.gmail.com>

?preProcess
     k-nearest neighbor imputation is carried out by finding the k
     closest samples (Euclidian distance) in the training set.
     Imputation via bagging fits a bagged tree model for each predictor
     (as a function of all the others). This method is simple, accurate
     and accepts missing values, but it has much higher computational
     cost. Imputation via medians takes the median of each predictor in
     the training set, and uses them to fill missing values. This
     method is simple, fast, and accepts missing values, but treats
     each predictor independently, and may be inaccurate.
...
References:

     <http://topepo.github.io/caret/pre-processing.html>

     Kuhn and Johnson (2013), Applied Predictive Modeling, Springer,
     New York (chapter 4)

     Kuhn (2008), Building predictive models in R using the caret
     (doi:10.18637/jss.v028.i05
     <https://doi.org/10.18637/jss.v028.i05>)

There are more references, but you really should read Kuhn (2008).

It's not clear what kind of understanding you need.
How the methods work?  The description above TELLS you what they do.
How WELL the methods work?  Again the description above is pretty
clear.  It says such and such is fast and so and so "has much higher
computational cost", which is surely what you want to know for large
amounts of data?  How fast the methods will be on your machine with
your data can only be determined by benchmarking, and you do not
need the internals for that.

All of this is open source so you can easily find the internals for
yourself if you really want to.  If nothing else, it's at
https://github.com/topepo/caret



On Wed, 21 Sept 2022 at 09:20, K Purna Prakash <prakash.nani at gmail.com>
wrote:

> Dear Sir/Madam,
> Greetings!!!
>
> Kindly provide the detailed internal mathematical working mechanism of the
> following median, KNN, and bagging imputation methods available in caret
> package R.
>
>  preProcess(train_data, method = "medianImpute")
>  preProcess(train_data, method = "knnnImpute")
>  preProcess(train_data method = "bagImpute")
>
> The details provided by you will help me a lot for a better understanding
> of these imputation methods especially while dealing with large sets of
> data.
>
> I will look forward to hearing from you.
>
> Thanks and regards,
> K. Purna Prakash.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@b@y@t194 @end|ng |rom gm@||@com  Wed Sep 21 08:09:03 2022
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Wed, 21 Sep 2022 10:39:03 +0430
Subject: [R] Write text file in Fortran format
Message-ID: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: Air.txt
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20220921/fea9097c/attachment.txt>

From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Wed Sep 21 11:54:19 2022
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Wed, 21 Sep 2022 11:54:19 +0200
Subject: [R] aplpack / bagplot
Message-ID: <9c8ff892-b5fb-8823-d764-dcca9c03cce9@wiwi.hu-berlin.de>

Hi,

I get an error when I use bagplot from the package aplpack. Any ideas 
what theproblem is with the data set?

library("aplpack")

x <- c(5, 2, 1, 6, 3, 5, 4, 7, 4, 4, 3, 4, 5, 4, 6, 3, 3)

y <- c(2, 3, 4, 6, 7, 8, 10, 11, 12, 13, 1, 14, 17, 18, 19, 20, 22)

bagplot(y,x) # works

bagplot(x,y) # Error in pg[segm.no, 2] : (subscript) boolean index too long

Thanks Sigbert

-- 
https://hu.berlin/sk
https://www.stat.de/faqs
https://hu.berlin/mmstat
https://hu.berlin/mmstat-int
https://hu.berlin/mmstat-ar


From er|cjberger @end|ng |rom gm@||@com  Wed Sep 21 12:09:22 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 21 Sep 2022 13:09:22 +0300
Subject: [R] aplpack / bagplot
In-Reply-To: <9c8ff892-b5fb-8823-d764-dcca9c03cce9@wiwi.hu-berlin.de>
References: <9c8ff892-b5fb-8823-d764-dcca9c03cce9@wiwi.hu-berlin.de>
Message-ID: <CAGgJW77t9Wa32GOkBBy4Yv8d=SBvgrU3Vrcp-qCQGH1RBg=ggg@mail.gmail.com>

Hi Sigbert,
I have never used the aplpack package but out of curiosity I tried it out.
Doing a scatter plot of your (x,y) data shows that there are many repeated
x values, and this seems to be the source of the error.
There are no repeated y values. It seems that the bagplot() function does
not handle repeated x-values.
I tried adding some noise to the x-values and that worked fine.

x2 <- x + rnorm(length(x),0,1.e-5)
bagplot(x2,y)

HTH,
Eric



On Wed, Sep 21, 2022 at 12:54 PM Sigbert Klinke <sigbert at wiwi.hu-berlin.de>
wrote:

> Hi,
>
> I get an error when I use bagplot from the package aplpack. Any ideas
> what theproblem is with the data set?
>
> library("aplpack")
>
> x <- c(5, 2, 1, 6, 3, 5, 4, 7, 4, 4, 3, 4, 5, 4, 6, 3, 3)
>
> y <- c(2, 3, 4, 6, 7, 8, 10, 11, 12, 13, 1, 14, 17, 18, 19, 20, 22)
>
> bagplot(y,x) # works
>
> bagplot(x,y) # Error in pg[segm.no, 2] : (subscript) boolean index too
> long
>
> Thanks Sigbert
>
> --
> https://hu.berlin/sk
> https://www.stat.de/faqs
> https://hu.berlin/mmstat
> https://hu.berlin/mmstat-int
> https://hu.berlin/mmstat-ar
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Wed Sep 21 12:11:05 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 21 Sep 2022 13:11:05 +0300
Subject: [R] aplpack / bagplot
In-Reply-To: <9c8ff892-b5fb-8823-d764-dcca9c03cce9@wiwi.hu-berlin.de>
References: <9c8ff892-b5fb-8823-d764-dcca9c03cce9@wiwi.hu-berlin.de>
Message-ID: <CAGgJW745XVZ3Htq0y-LWDefdC6aNmVyi+qAq4VE=KNdQe3=kkA@mail.gmail.com>

[re-sending as plain text]

Hi Sigbert,
I have never used the aplpack package but out of curiosity I tried it out.
Doing a scatter plot of your (x,y) data shows that there are many
repeated x values, and this seems to be the source of the error.
There are no repeated y values. It seems that the bagplot() function
does not handle repeated x-values.
I tried adding some noise to the x-values and that worked fine.

x2 <- x + rnorm(length(x),0,1.e-5)
bagplot(x2,y)

HTH,
Eric

On Wed, Sep 21, 2022 at 12:54 PM Sigbert Klinke
<sigbert at wiwi.hu-berlin.de> wrote:
>
> Hi,
>
> I get an error when I use bagplot from the package aplpack. Any ideas
> what theproblem is with the data set?
>
> library("aplpack")
>
> x <- c(5, 2, 1, 6, 3, 5, 4, 7, 4, 4, 3, 4, 5, 4, 6, 3, 3)
>
> y <- c(2, 3, 4, 6, 7, 8, 10, 11, 12, 13, 1, 14, 17, 18, 19, 20, 22)
>
> bagplot(y,x) # works
>
> bagplot(x,y) # Error in pg[segm.no, 2] : (subscript) boolean index too long
>
> Thanks Sigbert
>
> --
> https://hu.berlin/sk
> https://www.stat.de/faqs
> https://hu.berlin/mmstat
> https://hu.berlin/mmstat-int
> https://hu.berlin/mmstat-ar
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Wed Sep 21 12:24:11 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Wed, 21 Sep 2022 10:24:11 +0000
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
Message-ID: <BN6PR2201MB15531E675034AAAEEEC6F6CDCF4F9@BN6PR2201MB1553.namprd22.prod.outlook.com>

This post was empty.

Tim

From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
Sent: Wednesday, September 21, 2022 2:09 AM
To: R-help at r-project.org
Subject: [R] Write text file in Fortran format



	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Wed Sep 21 12:59:02 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 21 Sep 2022 20:59:02 +1000
Subject: [R] Write text file in Fortran format
In-Reply-To: <BN6PR2201MB15531E675034AAAEEEC6F6CDCF4F9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <BN6PR2201MB15531E675034AAAEEEC6F6CDCF4F9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CA+8X3fUh28ieSdDtw5b0CodZb0LxxvbR9wAmfzusp3d5-pZi5Q@mail.gmail.com>

Hi,
There was a .txt attachment that is some type of data file. Maybe what
you mean is can the header be stripped and the rest written out in a
format that can be input with a FORTRAN read routine. Yes, you just
have to read it into a data frame and write it out so that it is in
either free or fixed format. You will have to define the variable
names in your FORTRAN code and work out the input format
specifications for the fields.

Jim

On Wed, Sep 21, 2022 at 8:30 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
> This post was empty.
>
> Tim
>
> From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
> Sent: Wednesday, September 21, 2022 2:09 AM
> To: R-help at r-project.org
> Subject: [R] Write text file in Fortran format
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Sep 21 14:16:08 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 21 Sep 2022 13:16:08 +0100
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
Message-ID: <ad3eb16f-b60e-e43b-0e66-4dd06215bfb3@sapo.pt>

Hello,

The attached file ends with R-Help's end message. This is unrelated to 
computer languages, Fortran, R or other.

And there is no such thing as a Fortran format.

Can you please describe the problem you have?

Rui Barradas

?s 07:09 de 21/09/2022, javad bayat escreveu:


From jr@| @end|ng |rom po@teo@no  Wed Sep 21 15:48:57 2022
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 21 Sep 2022 13:48:57 +0000
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
Message-ID: <YysWSdDs2jdCQnk4@posteo.no>

Dear Javad,

Perhaps you were looking to read the 
table in Air.txt (is this Fortran 
format?) into R? 

	b <- readLines("Air.txt")  # The text MIME attachment w/Mailman footer ...
	b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman footer (at end of df)
	idx <- max(grep("^\\*", b))+1  # Start of df after header uline
	header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", "", b[idx-2])), "_")[[1]])
	b <- read.table(text=b[-(1:idx)], header=F)
	colnames(b) <- header[header!=""]
	b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove constant cols

str(b)

	'data.frame':   31324 obs. of  6 variables:
	 $ x           : num  583500 584000 584500 585000 585500 ...
	 $ y           : num  3018700 3018700 3018700 3018700 3018700 ...
	 $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
	 $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
	 $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
	 $ date(conc)  : int  16101706 16101706 16101706 16101706 16101706 ...

Best,
Rasmus


From @h@rt @end|ng |rom d|m@uch||e@c|  Wed Sep 21 16:31:53 2022
From: @h@rt @end|ng |rom d|m@uch||e@c| (Andrew Hart)
Date: Wed, 21 Sep 2022 11:31:53 -0300
Subject: [R] How to set default encoding for sourced files
Message-ID: <55104fd6-0da5-4c2b-6cca-16ccc4460028@dim.uchile.cl>

Hi there. I'm working with some utf-8 incoded csv files which gives me 
data frames with utf-8 encoded headers. This means when I write things like
dat$proporci?n
in an R script and then source it, I have to make sure the R script is 
incoded using utf-8 (and not latin1) and then I also have to explicitly 
tell R that the encoding is utf-8 every time I source the file, that is, 
I need to type
source("sr.R", encoding="utf-8").

Sure, I could eliminate accents and so forth from the headers by 
renaming the data frame columns, and I have done and do do this, but I 
shouldn't be required to do this just to avoid encoding issues.
We're living in the 21st century and imho Unicode-based encodings should 
be the de facto standard these days. I'm aware that R is pretty clever 
and stores the encoding along with the string value in all character 
objects and then converts on the fly as necessary. However, Almost 
everything I work with is in utf-8 or ASCII (which is compatible with 
utf-8 anyway),
so I'd like R to behave as though it does everything natively in utf-8 
so I don't have to worry about it.
Is there something in Rprofile.site or the user Rprofile or an 
environment variable I can set or some other way to instruct R to always 
assume that input stream encodings will be utf-8  unless otherwise 
specified? This way, I would only ever have to supply an encoding or 
fileEncoding argument to specify "latin1" if I happ	en to encounter it.

Many thanks,
Andrew.


From er|cjberger @end|ng |rom gm@||@com  Wed Sep 21 16:45:13 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 21 Sep 2022 17:45:13 +0300
Subject: [R] How to set default encoding for sourced files
In-Reply-To: <55104fd6-0da5-4c2b-6cca-16ccc4460028@dim.uchile.cl>
References: <55104fd6-0da5-4c2b-6cca-16ccc4460028@dim.uchile.cl>
Message-ID: <CAGgJW74h63T3D=rP+JR=gVEyWRWSLkZOHCY-97M6TOzqAJuC6w@mail.gmail.com>

Hi Andrew,
If you look at ?source you see its default value for encoding is
picked up from getOption("encoding"). Couldn't you just set this
option in your Rprofile?

HTH,
Eric


On Wed, Sep 21, 2022 at 5:34 PM Andrew Hart via R-help
<r-help at r-project.org> wrote:
>
> Hi there. I'm working with some utf-8 incoded csv files which gives me
> data frames with utf-8 encoded headers. This means when I write things like
> dat$proporci?n
> in an R script and then source it, I have to make sure the R script is
> incoded using utf-8 (and not latin1) and then I also have to explicitly
> tell R that the encoding is utf-8 every time I source the file, that is,
> I need to type
> source("sr.R", encoding="utf-8").
>
> Sure, I could eliminate accents and so forth from the headers by
> renaming the data frame columns, and I have done and do do this, but I
> shouldn't be required to do this just to avoid encoding issues.
> We're living in the 21st century and imho Unicode-based encodings should
> be the de facto standard these days. I'm aware that R is pretty clever
> and stores the encoding along with the string value in all character
> objects and then converts on the fly as necessary. However, Almost
> everything I work with is in utf-8 or ASCII (which is compatible with
> utf-8 anyway),
> so I'd like R to behave as though it does everything natively in utf-8
> so I don't have to worry about it.
> Is there something in Rprofile.site or the user Rprofile or an
> environment variable I can set or some other way to instruct R to always
> assume that input stream encodings will be utf-8  unless otherwise
> specified? This way, I would only ever have to supply an encoding or
> fileEncoding argument to specify "latin1" if I happ     en to encounter it.
>
> Many thanks,
> Andrew.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Sep 21 16:46:17 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 21 Sep 2022 07:46:17 -0700
Subject: [R] How to set default encoding for sourced files
In-Reply-To: <55104fd6-0da5-4c2b-6cca-16ccc4460028@dim.uchile.cl>
References: <55104fd6-0da5-4c2b-6cca-16ccc4460028@dim.uchile.cl>
Message-ID: <CAGxFJbTPaKW16=EujZxeWa1xc54C_eD-EPE87DAOb3En04WdRg@mail.gmail.com>

?options

options(encoding = "utf-8")
in a startup file or function should presumably do it. See ?Startup

Bert

On Wed, Sep 21, 2022 at 7:34 AM Andrew Hart via R-help <r-help at r-project.org>
wrote:

> Hi there. I'm working with some utf-8 incoded csv files which gives me
> data frames with utf-8 encoded headers. This means when I write things like
> dat$proporci?n
> in an R script and then source it, I have to make sure the R script is
> incoded using utf-8 (and not latin1) and then I also have to explicitly
> tell R that the encoding is utf-8 every time I source the file, that is,
> I need to type
> source("sr.R", encoding="utf-8").
>
> Sure, I could eliminate accents and so forth from the headers by
> renaming the data frame columns, and I have done and do do this, but I
> shouldn't be required to do this just to avoid encoding issues.
> We're living in the 21st century and imho Unicode-based encodings should
> be the de facto standard these days. I'm aware that R is pretty clever
> and stores the encoding along with the string value in all character
> objects and then converts on the fly as necessary. However, Almost
> everything I work with is in utf-8 or ASCII (which is compatible with
> utf-8 anyway),
> so I'd like R to behave as though it does everything natively in utf-8
> so I don't have to worry about it.
> Is there something in Rprofile.site or the user Rprofile or an
> environment variable I can set or some other way to instruct R to always
> assume that input stream encodings will be utf-8  unless otherwise
> specified? This way, I would only ever have to supply an encoding or
> fileEncoding argument to specify "latin1" if I happ     en to encounter it.
>
> Many thanks,
> Andrew.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From x|ongt@oxd @end|ng |rom gm@||@com  Wed Sep 21 01:04:55 2022
From: x|ongt@oxd @end|ng |rom gm@||@com (Xiongtao Dai)
Date: Tue, 20 Sep 2022 16:04:55 -0700
Subject: [R] S4 dispatch ambiguity
Message-ID: <48aaf22f-c0b2-1ffd-0996-58d16059f289@gmail.com>

I am trying to make sense why the following does *not* result in 
ambiguous method selection and thus a warning:

 > setClass("A", slots=c(a? = "numeric"))
 > setClass("B", slots=c(b? = "numeric"))
 > setClass("AB", contains=c("A", "B"))
 > setGeneric("myg", function(object) standardGeneric("myg"))
[1] "myg"
 >
 > setMethod("myg", "A", function(object) 1)
 > setMethod("myg", "B", function(object) 2)
 > ab <- new("AB", a=1, b=2)
 > myg(ab)
[1] 1

On the other hand, the following code gives me a warning

 > setMethod("+", c("A", "B"), function(e1, e2) 1)
 > setMethod("+", c("B", "A"), function(e1, e2) 2)
 > ab+ab
Note: method with signature ?A#B? chosen for function ?+?,
 ?target signature ?AB#AB?.
 ?"B#A" would also be valid
[1] 1

It appears that S4 is using the order of the superclasses A and B for 
dispatching, and that this is not regarded as an ambiguity. Is this the 
expected behavior? I am using R 4.2.1.

It seems this is contradictory to what the documentation of 
methods::setMethod says: "The first possible source of ambiguity arises 
if the class has several direct superclasses and methods have been 
defined for more than one of those; R will consider these equally valid 
and report an ambiguous choice."

Best,
Xiongtao


From j@b@y@t194 @end|ng |rom gm@||@com  Wed Sep 21 16:58:33 2022
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Wed, 21 Sep 2022 14:58:33 +0000
Subject: [R] Write text file in Fortran format
In-Reply-To: <YysWSdDs2jdCQnk4@posteo.no>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <YysWSdDs2jdCQnk4@posteo.no>
Message-ID: <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>

Dear Rasmus;
I have no knowledge of the FORTRAN language. The text file that has been
attached is a model's output file and I know that the format is in FORTRAN.
I want to write a text file exactly similar to the attached text file using
R programming.
The steps below explain my goal:
1- Read the text file without the first 8 and last 2 rows as a dataframe.
2- Double the 3rd column values (or multiply by specific number).
3- Insert the removed first 8 rows of the original text file as header in
the dataframe.
4- Insert the removed last 2 rows of the original text file at the end of
dataframe.
5- Write the dataframe as a new text file exactly similar to the original
text file.

I have used excel but when I save it as text file, the format changes and
is not similar to the attached text file.
Sincerely

On Wed, 21 Sep 2022, 18:17 Rasmus Liland, <jral at posteo.no> wrote:

> Dear Javad,
>
> Perhaps you were looking to read the
> table in Air.txt (is this Fortran
> format?) into R?
>
>         b <- readLines("Air.txt")  # The text MIME attachment w/Mailman
> footer ...
>         b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman footer (at
> end of df)
>         idx <- max(grep("^\\*", b))+1  # Start of df after header uline
>         header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", "",
> b[idx-2])), "_")[[1]])
>         b <- read.table(text=b[-(1:idx)], header=F)
>         colnames(b) <- header[header!=""]
>         b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove constant
> cols
>
> str(b)
>
>         'data.frame':   31324 obs. of  6 variables:
>          $ x           : num  583500 584000 584500 585000 585500 ...
>          $ y           : num  3018700 3018700 3018700 3018700 3018700 ...
>          $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
>          $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
>          $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
>          $ date(conc)  : int  16101706 16101706 16101706 16101706 16101706
> ...
>
> Best,
> Rasmus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Sep 21 18:12:42 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 21 Sep 2022 17:12:42 +0100
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmLkjMoOgUybJq6xsTXvmOWhU36yS2MbtP=xix9KX+iskA@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <ad3eb16f-b60e-e43b-0e66-4dd06215bfb3@sapo.pt>
 <CANTxAmLkjMoOgUybJq6xsTXvmOWhU36yS2MbtP=xix9KX+iskA@mail.gmail.com>
Message-ID: <24a26a81-75e9-63de-c79c-bdf9b57207ef@sapo.pt>

Hello,

You forgot to cc the list.

Here is a solution, I believe the comments explain the several steps.
It's a matter to read in the file, separate the table from the rest, 
update the 3rd column, assemble the pieces back together and write to file.


# this path depends on the OP's system
path <- "~/Temp"
fl <- list.files(path, pattern = "Air.txt", full.names = TRUE)
# read the file as text
txt <- readLines(fl)

# find lines starting with an asterisk
i <- grep("^\\*", txt)
# keep the other lines
txt_table <- txt[-i]
# find the lines starting or after the first blank line
j <- which(seq_along(txt_table) >= which(txt_table == ""))
# keep the other lines
txt_table <- txt_table[-j]
txt_table <- trimws(txt_table)

df1 <- read.table(text = txt_table)
# multiply 3rd column by 2
df1[[3]] <- 2*df1[[3]]

# format the table's lines to write them back to file
fmt <- "%14.5f %13.5f %13.5f %8.2f %8.2f %8.2f %7s %8s %10s %9s %9d"
new_data <- sprintf(fmt,
                     df1[[1]], df1[[2]], df1[[3]], df1[[4]],
                     df1[[5]], df1[[6]], df1[[7]], df1[[8]],
                     df1[[9]], df1[[10]], df1[[11]])

j <- which(seq_along(txt) >= which(txt == ""))
# assemble the header, the table and the footer
txt_new <- c(txt[i], new_data, txt[j])

# this is not in the question,
# I'm not rewriting the original
fl2 <- file.path(dirname(fl), "Air2.txt")
writeLines(txt_new, fl2)



Hope this helps,

rui Barradas

?s 15:55 de 21/09/2022, javad bayat escreveu:
> Dear Rui;
> I have no knowledge of the FORTRAN language. The text file that has been
> attached is a model's output file and I know that the format is in FORTRAN.
> I want to write a text file exactly similar to the attached text file using
> R programming.
> The steps below explain my goal:
> 1- Read the text file without the first 8 and last 2 rows as a dataframe.
> 2- Double the 3rd column values (or multiply by specific number).
> 3- Insert the removed first 8 rows of the original text file as header in
> the dataframe.
> 4- Insert the removed last 2 rows of the original text file at the end of
> dataframe.
> 5- Write the dataframe as a new text file exactly similar to the original
> text file.
> 
> I have used excel but when I save it as text file, the format changes and
> is not similar to the attached text file.
> Sincerely
> 
> On Wed, 21 Sep 2022, 16:46 Rui Barradas, <ruipbarradas at sapo.pt> wrote:
> 
>> Hello,
>>
>> The attached file ends with R-Help's end message. This is unrelated to
>> computer languages, Fortran, R or other.
>>
>> And there is no such thing as a Fortran format.
>>
>> Can you please describe the problem you have?
>>
>> Rui Barradas
>>
>> ?s 07:09 de 21/09/2022, javad bayat escreveu:
>>
>


From @h@rt @end|ng |rom d|m@uch||e@c|  Wed Sep 21 20:05:13 2022
From: @h@rt @end|ng |rom d|m@uch||e@c| (Andrew Hart)
Date: Wed, 21 Sep 2022 15:05:13 -0300
Subject: [R] How to set default encoding for sourced files
In-Reply-To: <CAGxFJbTPaKW16=EujZxeWa1xc54C_eD-EPE87DAOb3En04WdRg@mail.gmail.com>
References: <55104fd6-0da5-4c2b-6cca-16ccc4460028@dim.uchile.cl>
 <CAGxFJbTPaKW16=EujZxeWa1xc54C_eD-EPE87DAOb3En04WdRg@mail.gmail.com>
Message-ID: <266797ae-62f4-c894-4ab4-4e875128d514@dim.uchile.cl>

On 21/09/2022 11:46, Bert Gunter wrote:
> ?options
> 
> options(encoding = "utf-8")
> in a startup file or function should presumably do it. See ?Startup
> 
> Bert

Thanks everyone. Setting encoding in options in Rprofile.site has taken 
care of it.

Curiously, it doesn't seem to solve the whole problem for Rscript 
though. I checked that Rscript is indeed picking up the default encoding 
from options, but it's complaining about seeing an unexpected input in
dat$l?nea <- ....
immediately following the l when I run
Rscript myfile.R.
So, it would appear that Rscript is not using source to read in the R 
script. Mind you, if I do
Rscript -e source('myfile.R')
it works properly just like in Rgui.

Once again, Thanks heaps.

Cheers,
Andrew.


From @v|@e@gro@@ @end|ng |rom gm@||@com  Wed Sep 21 19:22:51 2022
From: @v|@e@gro@@ @end|ng |rom gm@||@com (Avi Gross)
Date: Wed, 21 Sep 2022 13:22:51 -0400
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <YysWSdDs2jdCQnk4@posteo.no>
 <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>
Message-ID: <CABaFrRbk6iVn0hJhRoL1rkiqNsNSHcnLVXs8s1cTXJ_NXgaNCg@mail.gmail.com>

Javad,

It would help if you stopped calling it FORTRAN format. I doubt anyone
cares about names as compared to what kind of structure it holds.

It likely is some variant on a file commonly used in R such as one that
uses tabs or whitespace. It may have lines above with headers or comments
and you likely can read it into an R data.frame with some twiddling.

Once there, you can make your various adjustments assuming it got read in
correctly. Look at it before randomly chopping out parts you think are
there.

Then you can save the file in various formats. But note, if you want weird
things added such as a line of underscores below a header line, that may
not be standard. You can do such things, perhaps, in stages you combine
into a final output file.

Note if your files are in some well-known format, there likely may be a
package that handles that for you. If your file has a name with a suffix
like .TSV or .DAT that may provide a hint.

FORTRAN is an evolving language but I doubt it reads or writes one unique
format. You want a compatible output file whatever it is.

Avi

On Wed, Sep 21, 2022, 12:16 PM javad bayat <j.bayat194 at gmail.com> wrote:

> Dear Rasmus;
> I have no knowledge of the FORTRAN language. The text file that has been
> attached is a model's output file and I know that the format is in FORTRAN.
> I want to write a text file exactly similar to the attached text file using
> R programming.
> The steps below explain my goal:
> 1- Read the text file without the first 8 and last 2 rows as a dataframe.
> 2- Double the 3rd column values (or multiply by specific number).
> 3- Insert the removed first 8 rows of the original text file as header in
> the dataframe.
> 4- Insert the removed last 2 rows of the original text file at the end of
> dataframe.
> 5- Write the dataframe as a new text file exactly similar to the original
> text file.
>
> I have used excel but when I save it as text file, the format changes and
> is not similar to the attached text file.
> Sincerely
>
> On Wed, 21 Sep 2022, 18:17 Rasmus Liland, <jral at posteo.no> wrote:
>
> > Dear Javad,
> >
> > Perhaps you were looking to read the
> > table in Air.txt (is this Fortran
> > format?) into R?
> >
> >         b <- readLines("Air.txt")  # The text MIME attachment w/Mailman
> > footer ...
> >         b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman footer (at
> > end of df)
> >         idx <- max(grep("^\\*", b))+1  # Start of df after header uline
> >         header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", "",
> > b[idx-2])), "_")[[1]])
> >         b <- read.table(text=b[-(1:idx)], header=F)
> >         colnames(b) <- header[header!=""]
> >         b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove constant
> > cols
> >
> > str(b)
> >
> >         'data.frame':   31324 obs. of  6 variables:
> >          $ x           : num  583500 584000 584500 585000 585500 ...
> >          $ y           : num  3018700 3018700 3018700 3018700 3018700 ...
> >          $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
> >          $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
> >          $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
> >          $ date(conc)  : int  16101706 16101706 16101706 16101706
> 16101706
> > ...
> >
> > Best,
> > Rasmus
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@ych@o||u @end|ng |rom gm@||@com  Wed Sep 21 21:20:36 2022
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Wed, 21 Sep 2022 15:20:36 -0400
Subject: [R] Error in if (class(networks) == "matrix") from a function
Message-ID: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>

Dear R-Help community,

This is a crosspost on SO but I've had no luck so far. So I have a function
which computes a centrality index for the nodes in a network or matrix.
Here is the function:

library(igraph) #load package igraph
centrality <- function (networks, type = c("indegree", "outdegree", "freeman",
    "betweenness", "flow", "closeness", "eigenvector", "information",
    "load", "bonpow"), directed = TRUE, lag = 0, rescale = FALSE,
    center = FALSE, coefname = NULL, ...) {
    if (is.null(directed) || !is.logical(directed)) {
        stop("'directed' must be TRUE or FALSE.")
    }
    else if (length(directed) != 1) {
        stop("The 'directed' argument must contain a single logical
value only.")
    }
    else if (directed == FALSE) {
        gmode <- "graph"
    }
    else {
        gmode <- "digraph"
    }
    objects <- checkDataTypes(y = NULL, networks = networks,
        lag = lag)
    centlist <- list()
    for (i in 1:objects$time.steps) {
        if (type[1] == "indegree") {
            cent <- degree(objects$networks[[i]], gmode = gmode,
                cmode = "indegree", rescale = rescale, ...)
        }
        else if (type[1] == "outdegree") {
            cent <- degree(objects$networks[[i]], gmode = gmode,
                cmode = "outdegree", rescale = rescale, ...)
        }
        else if (type[1] == "freeman") {
            cent <- degree(objects$networks[[i]], gmode = gmode,
                cmode = "freeman", rescale = rescale, ...)
        }
        else if (type[1] == "betweenness") {
            cent <- betweenness(objects$networks[[i]], gmode = gmode,
                rescale = rescale, ...)
        }
        else if (type[1] == "flow") {
            cent <- flowbet(objects$networks[[i]], gmode = gmode,
                rescale = rescale, ...)
        }
        else if (type[1] == "closeness") {
            cent <- closeness(objects$networks[[i]], gmode = gmode,
                rescale = rescale, ...)
        }
        else if (type[1] == "eigenvector") {
            cent <- evcent(objects$networks[[i]], gmode = gmode,
                rescale = rescale, ...)
        }
        else if (type[1] == "information") {
            cent <- infocent(objects$networks[[i]], gmode = gmode,
                rescale = rescale, ...)
        }
        else if (type[1] == "load") {
            cent <- loadcent(objects$networks[[i]], gmode = gmode,
                rescale = rescale, ...)
        }
        else if (type[1] == "bonpow") {
            cent <- bonpow(objects$networks[[i]], gmode = gmode,
                rescale = rescale, tol = 1e-20, ...)
        }
        else {
            stop("'type' argument was not recognized.")
        }
        centlist[[i]] <- cent
    }
    time <- numeric()
    y <- numeric()
    for (i in 1:objects$time.steps) {
        time <- c(time, rep(i, objects$n[[i]]))
        if (is.null(centlist[[i]])) {
            y <- c(y, rep(NA, objects$n[[i]]))
        }
        else {
            if (center == TRUE) {
                centlist[[i]] <- centlist[[i]] - mean(centlist[[i]],
                  na.rm = TRUE)
            }
            y <- c(y, centlist[[i]])
        }
    }
    if (is.null(coefname) || !is.character(coefname) || length(coefname) >
        1) {
        coeflabel <- ""
    }
    else {
        coeflabel <- paste0(".", coefname)
    }
    if (lag == 0) {
        laglabel <- ""
    }
    else {
        laglabel <- paste0(".lag", paste(lag, collapse = "."))
    }
    label <- paste0(type[1], coeflabel, laglabel)
    dat <- data.frame(y, time = time, node = objects$nodelabels)
    dat$node <- as.character(dat$node)
    colnames(dat)[1] <- label
    attributes(dat)$lag <- lag
    return(dat)}

Here is the matrix:

dat <- read.table(text="A B #this is edgelist
1 2
1 3
1 2
2 1
2 3
3 1
3 2
3 1", header=TRUE)
datmat <- as.matrix(get.adjacency(graph.edgelist(as.matrix(dat),
directed=TRUE))) #this is the matrix
colnames(datmat) <- c("1", "2", "3") #rename the columns

When I applied the function to a matrix
centrality(datmat,type="flow",center=TRUE), it returns the error:

Error in if (class(networks) == "matrix") { :
  the condition has length > 1

What is the cause of this error? How to fix it? Any help will be greatly
appreciated!


Best,

Chao

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Wed Sep 21 21:26:39 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 21 Sep 2022 22:26:39 +0300
Subject: [R] Error in if (class(networks) == "matrix") from a function
In-Reply-To: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
References: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
Message-ID: <CAGgJW75Z+Sh-YYshDDp_L=Up-gNJAsZNYApWVCckgOftJLS=JA@mail.gmail.com>

In R 4.2.0 there is a significant change. When you use an if() statement
with a condition of length > 1 this now reports an error.
e.g. this link mentions it as a change
https://www.jumpingrivers.com/blog/new-features-r420/

In your case this is because class(obj) can return a character vector of
length > 1 (all the classes).
One possible workaround would be:

if ( "matrix" %in% class(networks) ) ...

HTH,
Eric


On Wed, Sep 21, 2022 at 10:21 PM Chao Liu <psychaoliu at gmail.com> wrote:

> Dear R-Help community,
>
> This is a crosspost on SO but I've had no luck so far. So I have a function
> which computes a centrality index for the nodes in a network or matrix.
> Here is the function:
>
> library(igraph) #load package igraph
> centrality <- function (networks, type = c("indegree", "outdegree",
> "freeman",
>     "betweenness", "flow", "closeness", "eigenvector", "information",
>     "load", "bonpow"), directed = TRUE, lag = 0, rescale = FALSE,
>     center = FALSE, coefname = NULL, ...) {
>     if (is.null(directed) || !is.logical(directed)) {
>         stop("'directed' must be TRUE or FALSE.")
>     }
>     else if (length(directed) != 1) {
>         stop("The 'directed' argument must contain a single logical
> value only.")
>     }
>     else if (directed == FALSE) {
>         gmode <- "graph"
>     }
>     else {
>         gmode <- "digraph"
>     }
>     objects <- checkDataTypes(y = NULL, networks = networks,
>         lag = lag)
>     centlist <- list()
>     for (i in 1:objects$time.steps) {
>         if (type[1] == "indegree") {
>             cent <- degree(objects$networks[[i]], gmode = gmode,
>                 cmode = "indegree", rescale = rescale, ...)
>         }
>         else if (type[1] == "outdegree") {
>             cent <- degree(objects$networks[[i]], gmode = gmode,
>                 cmode = "outdegree", rescale = rescale, ...)
>         }
>         else if (type[1] == "freeman") {
>             cent <- degree(objects$networks[[i]], gmode = gmode,
>                 cmode = "freeman", rescale = rescale, ...)
>         }
>         else if (type[1] == "betweenness") {
>             cent <- betweenness(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "flow") {
>             cent <- flowbet(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "closeness") {
>             cent <- closeness(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "eigenvector") {
>             cent <- evcent(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "information") {
>             cent <- infocent(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "load") {
>             cent <- loadcent(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "bonpow") {
>             cent <- bonpow(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, tol = 1e-20, ...)
>         }
>         else {
>             stop("'type' argument was not recognized.")
>         }
>         centlist[[i]] <- cent
>     }
>     time <- numeric()
>     y <- numeric()
>     for (i in 1:objects$time.steps) {
>         time <- c(time, rep(i, objects$n[[i]]))
>         if (is.null(centlist[[i]])) {
>             y <- c(y, rep(NA, objects$n[[i]]))
>         }
>         else {
>             if (center == TRUE) {
>                 centlist[[i]] <- centlist[[i]] - mean(centlist[[i]],
>                   na.rm = TRUE)
>             }
>             y <- c(y, centlist[[i]])
>         }
>     }
>     if (is.null(coefname) || !is.character(coefname) || length(coefname) >
>         1) {
>         coeflabel <- ""
>     }
>     else {
>         coeflabel <- paste0(".", coefname)
>     }
>     if (lag == 0) {
>         laglabel <- ""
>     }
>     else {
>         laglabel <- paste0(".lag", paste(lag, collapse = "."))
>     }
>     label <- paste0(type[1], coeflabel, laglabel)
>     dat <- data.frame(y, time = time, node = objects$nodelabels)
>     dat$node <- as.character(dat$node)
>     colnames(dat)[1] <- label
>     attributes(dat)$lag <- lag
>     return(dat)}
>
> Here is the matrix:
>
> dat <- read.table(text="A B #this is edgelist
> 1 2
> 1 3
> 1 2
> 2 1
> 2 3
> 3 1
> 3 2
> 3 1", header=TRUE)
> datmat <- as.matrix(get.adjacency(graph.edgelist(as.matrix(dat),
> directed=TRUE))) #this is the matrix
> colnames(datmat) <- c("1", "2", "3") #rename the columns
>
> When I applied the function to a matrix
> centrality(datmat,type="flow",center=TRUE), it returns the error:
>
> Error in if (class(networks) == "matrix") { :
>   the condition has length > 1
>
> What is the cause of this error? How to fix it? Any help will be greatly
> appreciated!
>
>
> Best,
>
> Chao
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Wed Sep 21 21:29:40 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 21 Sep 2022 15:29:40 -0400
Subject: [R] Error in if (class(networks) == "matrix") from a function
In-Reply-To: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
References: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
Message-ID: <CAPcHnpRE2R=wg3k1gCs5YmeJ3o4iYs1ksJmSAfXW5f2xTL2ZJA@mail.gmail.com>

In general, you should be using inherits(netwotks, "matrix") or
is(networks, "matrix") instead of class() ==

Your function fails because your object has multiple classes so class==
returns multiple logical values so if will fail.

But inherits or is will return one logical value, so if will not raise an
error.

On Wed., Sep. 21, 2022, 15:21 Chao Liu, <psychaoliu at gmail.com> wrote:

> Dear R-Help community,
>
> This is a crosspost on SO but I've had no luck so far. So I have a function
> which computes a centrality index for the nodes in a network or matrix.
> Here is the function:
>
> library(igraph) #load package igraph
> centrality <- function (networks, type = c("indegree", "outdegree",
> "freeman",
>     "betweenness", "flow", "closeness", "eigenvector", "information",
>     "load", "bonpow"), directed = TRUE, lag = 0, rescale = FALSE,
>     center = FALSE, coefname = NULL, ...) {
>     if (is.null(directed) || !is.logical(directed)) {
>         stop("'directed' must be TRUE or FALSE.")
>     }
>     else if (length(directed) != 1) {
>         stop("The 'directed' argument must contain a single logical
> value only.")
>     }
>     else if (directed == FALSE) {
>         gmode <- "graph"
>     }
>     else {
>         gmode <- "digraph"
>     }
>     objects <- checkDataTypes(y = NULL, networks = networks,
>         lag = lag)
>     centlist <- list()
>     for (i in 1:objects$time.steps) {
>         if (type[1] == "indegree") {
>             cent <- degree(objects$networks[[i]], gmode = gmode,
>                 cmode = "indegree", rescale = rescale, ...)
>         }
>         else if (type[1] == "outdegree") {
>             cent <- degree(objects$networks[[i]], gmode = gmode,
>                 cmode = "outdegree", rescale = rescale, ...)
>         }
>         else if (type[1] == "freeman") {
>             cent <- degree(objects$networks[[i]], gmode = gmode,
>                 cmode = "freeman", rescale = rescale, ...)
>         }
>         else if (type[1] == "betweenness") {
>             cent <- betweenness(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "flow") {
>             cent <- flowbet(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "closeness") {
>             cent <- closeness(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "eigenvector") {
>             cent <- evcent(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "information") {
>             cent <- infocent(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "load") {
>             cent <- loadcent(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, ...)
>         }
>         else if (type[1] == "bonpow") {
>             cent <- bonpow(objects$networks[[i]], gmode = gmode,
>                 rescale = rescale, tol = 1e-20, ...)
>         }
>         else {
>             stop("'type' argument was not recognized.")
>         }
>         centlist[[i]] <- cent
>     }
>     time <- numeric()
>     y <- numeric()
>     for (i in 1:objects$time.steps) {
>         time <- c(time, rep(i, objects$n[[i]]))
>         if (is.null(centlist[[i]])) {
>             y <- c(y, rep(NA, objects$n[[i]]))
>         }
>         else {
>             if (center == TRUE) {
>                 centlist[[i]] <- centlist[[i]] - mean(centlist[[i]],
>                   na.rm = TRUE)
>             }
>             y <- c(y, centlist[[i]])
>         }
>     }
>     if (is.null(coefname) || !is.character(coefname) || length(coefname) >
>         1) {
>         coeflabel <- ""
>     }
>     else {
>         coeflabel <- paste0(".", coefname)
>     }
>     if (lag == 0) {
>         laglabel <- ""
>     }
>     else {
>         laglabel <- paste0(".lag", paste(lag, collapse = "."))
>     }
>     label <- paste0(type[1], coeflabel, laglabel)
>     dat <- data.frame(y, time = time, node = objects$nodelabels)
>     dat$node <- as.character(dat$node)
>     colnames(dat)[1] <- label
>     attributes(dat)$lag <- lag
>     return(dat)}
>
> Here is the matrix:
>
> dat <- read.table(text="A B #this is edgelist
> 1 2
> 1 3
> 1 2
> 2 1
> 2 3
> 3 1
> 3 2
> 3 1", header=TRUE)
> datmat <- as.matrix(get.adjacency(graph.edgelist(as.matrix(dat),
> directed=TRUE))) #this is the matrix
> colnames(datmat) <- c("1", "2", "3") #rename the columns
>
> When I applied the function to a matrix
> centrality(datmat,type="flow",center=TRUE), it returns the error:
>
> Error in if (class(networks) == "matrix") { :
>   the condition has length > 1
>
> What is the cause of this error? How to fix it? Any help will be greatly
> appreciated!
>
>
> Best,
>
> Chao
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Sep 21 21:35:39 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 21 Sep 2022 20:35:39 +0100
Subject: [R] Error in if (class(networks) == "matrix") from a function
In-Reply-To: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
References: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
Message-ID: <e15e9efe-0a7c-f942-096a-2774d0c6dd92@sapo.pt>

Hello,

Check what class(datmat) returns and use ?inherits instead.


class(datmat)
#[1] "matrix" "array"
inherits(datmat, "matrix")
#[1] TRUE


Also, the error the posted code gives is

centrality(datmat,type="flow",center=TRUE)
Error in checkDataTypes(y = NULL, networks = networks, lag = lag) :
   could not find function "checkDataTypes"


but I assume you have function checkDataTypes somewhere in your session, 
the problem should be solved with inherits().

Hope this helps,

Rui Barradas

?s 20:20 de 21/09/2022, Chao Liu escreveu:
> Dear R-Help community,
> 
> This is a crosspost on SO but I've had no luck so far. So I have a function
> which computes a centrality index for the nodes in a network or matrix.
> Here is the function:
> 
> library(igraph) #load package igraph
> centrality <- function (networks, type = c("indegree", "outdegree", "freeman",
>      "betweenness", "flow", "closeness", "eigenvector", "information",
>      "load", "bonpow"), directed = TRUE, lag = 0, rescale = FALSE,
>      center = FALSE, coefname = NULL, ...) {
>      if (is.null(directed) || !is.logical(directed)) {
>          stop("'directed' must be TRUE or FALSE.")
>      }
>      else if (length(directed) != 1) {
>          stop("The 'directed' argument must contain a single logical
> value only.")
>      }
>      else if (directed == FALSE) {
>          gmode <- "graph"
>      }
>      else {
>          gmode <- "digraph"
>      }
>      objects <- checkDataTypes(y = NULL, networks = networks,
>          lag = lag)
>      centlist <- list()
>      for (i in 1:objects$time.steps) {
>          if (type[1] == "indegree") {
>              cent <- degree(objects$networks[[i]], gmode = gmode,
>                  cmode = "indegree", rescale = rescale, ...)
>          }
>          else if (type[1] == "outdegree") {
>              cent <- degree(objects$networks[[i]], gmode = gmode,
>                  cmode = "outdegree", rescale = rescale, ...)
>          }
>          else if (type[1] == "freeman") {
>              cent <- degree(objects$networks[[i]], gmode = gmode,
>                  cmode = "freeman", rescale = rescale, ...)
>          }
>          else if (type[1] == "betweenness") {
>              cent <- betweenness(objects$networks[[i]], gmode = gmode,
>                  rescale = rescale, ...)
>          }
>          else if (type[1] == "flow") {
>              cent <- flowbet(objects$networks[[i]], gmode = gmode,
>                  rescale = rescale, ...)
>          }
>          else if (type[1] == "closeness") {
>              cent <- closeness(objects$networks[[i]], gmode = gmode,
>                  rescale = rescale, ...)
>          }
>          else if (type[1] == "eigenvector") {
>              cent <- evcent(objects$networks[[i]], gmode = gmode,
>                  rescale = rescale, ...)
>          }
>          else if (type[1] == "information") {
>              cent <- infocent(objects$networks[[i]], gmode = gmode,
>                  rescale = rescale, ...)
>          }
>          else if (type[1] == "load") {
>              cent <- loadcent(objects$networks[[i]], gmode = gmode,
>                  rescale = rescale, ...)
>          }
>          else if (type[1] == "bonpow") {
>              cent <- bonpow(objects$networks[[i]], gmode = gmode,
>                  rescale = rescale, tol = 1e-20, ...)
>          }
>          else {
>              stop("'type' argument was not recognized.")
>          }
>          centlist[[i]] <- cent
>      }
>      time <- numeric()
>      y <- numeric()
>      for (i in 1:objects$time.steps) {
>          time <- c(time, rep(i, objects$n[[i]]))
>          if (is.null(centlist[[i]])) {
>              y <- c(y, rep(NA, objects$n[[i]]))
>          }
>          else {
>              if (center == TRUE) {
>                  centlist[[i]] <- centlist[[i]] - mean(centlist[[i]],
>                    na.rm = TRUE)
>              }
>              y <- c(y, centlist[[i]])
>          }
>      }
>      if (is.null(coefname) || !is.character(coefname) || length(coefname) >
>          1) {
>          coeflabel <- ""
>      }
>      else {
>          coeflabel <- paste0(".", coefname)
>      }
>      if (lag == 0) {
>          laglabel <- ""
>      }
>      else {
>          laglabel <- paste0(".lag", paste(lag, collapse = "."))
>      }
>      label <- paste0(type[1], coeflabel, laglabel)
>      dat <- data.frame(y, time = time, node = objects$nodelabels)
>      dat$node <- as.character(dat$node)
>      colnames(dat)[1] <- label
>      attributes(dat)$lag <- lag
>      return(dat)}
> 
> Here is the matrix:
> 
> dat <- read.table(text="A B #this is edgelist
> 1 2
> 1 3
> 1 2
> 2 1
> 2 3
> 3 1
> 3 2
> 3 1", header=TRUE)
> datmat <- as.matrix(get.adjacency(graph.edgelist(as.matrix(dat),
> directed=TRUE))) #this is the matrix
> colnames(datmat) <- c("1", "2", "3") #rename the columns
> 
> When I applied the function to a matrix
> centrality(datmat,type="flow",center=TRUE), it returns the error:
> 
> Error in if (class(networks) == "matrix") { :
>    the condition has length > 1
> 
> What is the cause of this error? How to fix it? Any help will be greatly
> appreciated!
> 
> 
> Best,
> 
> Chao
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @kw@|mmo @end|ng |rom gm@||@com  Wed Sep 21 21:40:29 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 21 Sep 2022 15:40:29 -0400
Subject: [R] How to set default encoding for sourced files
In-Reply-To: <266797ae-62f4-c894-4ab4-4e875128d514@dim.uchile.cl>
References: <55104fd6-0da5-4c2b-6cca-16ccc4460028@dim.uchile.cl>
 <CAGxFJbTPaKW16=EujZxeWa1xc54C_eD-EPE87DAOb3En04WdRg@mail.gmail.com>
 <266797ae-62f4-c894-4ab4-4e875128d514@dim.uchile.cl>
Message-ID: <CAPcHnpTMzvqb=7o4Qhgm_+-Lo5aSM--bZPpyLQj7g25j22-EdQ@mail.gmail.com>

If you're running it from Rscript, you'll have to specify the encoding like
this:

Rscript --encoding UTF-8 file

If you're using R for Windows, I'm surprised this issue would come up since
R 4.2.0 added support for UTF-8. At least on my own Windows machine, I can
run exactly what you wrote and not have any issues. Are you using an older
version of R?


On Wed., Sep. 21, 2022, 14:20 Andrew Hart via R-help, <r-help at r-project.org>
wrote:

> On 21/09/2022 11:46, Bert Gunter wrote:
> > ?options
> >
> > options(encoding = "utf-8")
> > in a startup file or function should presumably do it. See ?Startup
> >
> > Bert
>
> Thanks everyone. Setting encoding in options in Rprofile.site has taken
> care of it.
>
> Curiously, it doesn't seem to solve the whole problem for Rscript
> though. I checked that Rscript is indeed picking up the default encoding
> from options, but it's complaining about seeing an unexpected input in
> dat$l?nea <- ....
> immediately following the l when I run
> Rscript myfile.R.
> So, it would appear that Rscript is not using source to read in the R
> script. Mind you, if I do
> Rscript -e source('myfile.R')
> it works properly just like in Rgui.
>
> Once again, Thanks heaps.
>
> Cheers,
> Andrew.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Wed Sep 21 21:55:55 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 21 Sep 2022 15:55:55 -0400
Subject: [R] S4 dispatch ambiguity
In-Reply-To: <48aaf22f-c0b2-1ffd-0996-58d16059f289@gmail.com>
References: <48aaf22f-c0b2-1ffd-0996-58d16059f289@gmail.com>
Message-ID: <CAPcHnpQG_HXC2jOcf5oQAWfjnf-nUpt_5LhuYbQ96_j1POC=hg@mail.gmail.com>

In the first scenario, your object is class AB, then class A with distance
1, then class B with distance 2. This means that method A is preferable
since it is less distance away than method B.

However, in your second function, both methods are a total distance of 3
away, so (as far as I know) it chooses the first choice in the list and
raises a warning that both are acceptable.

Using contains = c("A", "B") as an ordered set of classes is intended. The
same is true of other multi-inheritance languages, such as python.

I had a similar problem when I was defining methods myself, I had something
like:

row.match <- function (x, table, ...) {}
setGeneric(row.match)
setMethod(row.match, c("data.frame", "ANY"), ...)
setMethod(row.match, c("ANY", "data.frame"), ...)

The easiest thing to do is the define another method like this:
setMethod(row.match, c("data.frame", "data.frame"), ...)

And that removes the ambiguity. For your scenario, I would define two
methods like:
setMethod(`+`, c("A", "A"), ...)
setMethod(`+`, c("B", "B"), ...)

and that should remove your ambiguity.

On Wed., Sep. 21, 2022, 12:06 Xiongtao Dai, <xiongtaoxd at gmail.com> wrote:

> I am trying to make sense why the following does *not* result in
> ambiguous method selection and thus a warning:
>
>  > setClass("A", slots=c(a  = "numeric"))
>  > setClass("B", slots=c(b  = "numeric"))
>  > setClass("AB", contains=c("A", "B"))
>  > setGeneric("myg", function(object) standardGeneric("myg"))
> [1] "myg"
>  >
>  > setMethod("myg", "A", function(object) 1)
>  > setMethod("myg", "B", function(object) 2)
>  > ab <- new("AB", a=1, b=2)
>  > myg(ab)
> [1] 1
>
> On the other hand, the following code gives me a warning
>
>  > setMethod("+", c("A", "B"), function(e1, e2) 1)
>  > setMethod("+", c("B", "A"), function(e1, e2) 2)
>  > ab+ab
> Note: method with signature ?A#B? chosen for function ?+?,
>   target signature ?AB#AB?.
>   "B#A" would also be valid
> [1] 1
>
> It appears that S4 is using the order of the superclasses A and B for
> dispatching, and that this is not regarded as an ambiguity. Is this the
> expected behavior? I am using R 4.2.1.
>
> It seems this is contradictory to what the documentation of
> methods::setMethod says: "The first possible source of ambiguity arises
> if the class has several direct superclasses and methods have been
> defined for more than one of those; R will consider these equally valid
> and report an ambiguous choice."
>
> Best,
> Xiongtao
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Sep 21 23:12:53 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 21 Sep 2022 22:12:53 +0100
Subject: [R] Error in if (class(networks) == "matrix") from a function
In-Reply-To: <e15e9efe-0a7c-f942-096a-2774d0c6dd92@sapo.pt>
References: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
 <e15e9efe-0a7c-f942-096a-2774d0c6dd92@sapo.pt>
Message-ID: <8defa9c4-0d9b-5f26-b00c-e4ec1994f514@sapo.pt>

Hello,

In my previous I forgot that this, for matrices to have 2 classes , is 
relatively new. It was introduced in R 4.0.0. From the News file [1], 
point 2:


R News
[R logo] CHANGES IN 4.0.0
SIGNIFICANT USER-VISIBLE CHANGES

matrix objects now also inherit from class "array", so e.g., 
class(diag(1)) is c("matrix", "array"). This invalidates code 
incorrectly assuming that class(matrix_obj)) has length one.


So the R Core Team did an excelent job once again and warned R users. 
This was a major R version, where changes like this generally happen and 
are anounced with antecipation. (I remeber to have seen it but cannot 
place it.) Old code needs to be changed, it might break.


[1] https://cran.r-project.org/bin/windows/base/old/4.0.0/NEWS.R-4.0.0.html

Hope this helps,

Rui Barradas

?s 20:35 de 21/09/2022, Rui Barradas escreveu:
> Hello,
> 
> Check what class(datmat) returns and use ?inherits instead.
> 
> 
> class(datmat)
> #[1] "matrix" "array"
> inherits(datmat, "matrix")
> #[1] TRUE
> 
> 
> Also, the error the posted code gives is
> 
> centrality(datmat,type="flow",center=TRUE)
> Error in checkDataTypes(y = NULL, networks = networks, lag = lag) :
>  ? could not find function "checkDataTypes"
> 
> 
> but I assume you have function checkDataTypes somewhere in your session, 
> the problem should be solved with inherits().
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 20:20 de 21/09/2022, Chao Liu escreveu:
>> Dear R-Help community,
>>
>> This is a crosspost on SO but I've had no luck so far. So I have a 
>> function
>> which computes a centrality index for the nodes in a network or matrix.
>> Here is the function:
>>
>> library(igraph) #load package igraph
>> centrality <- function (networks, type = c("indegree", "outdegree", 
>> "freeman",
>> ???? "betweenness", "flow", "closeness", "eigenvector", "information",
>> ???? "load", "bonpow"), directed = TRUE, lag = 0, rescale = FALSE,
>> ???? center = FALSE, coefname = NULL, ...) {
>> ???? if (is.null(directed) || !is.logical(directed)) {
>> ???????? stop("'directed' must be TRUE or FALSE.")
>> ???? }
>> ???? else if (length(directed) != 1) {
>> ???????? stop("The 'directed' argument must contain a single logical
>> value only.")
>> ???? }
>> ???? else if (directed == FALSE) {
>> ???????? gmode <- "graph"
>> ???? }
>> ???? else {
>> ???????? gmode <- "digraph"
>> ???? }
>> ???? objects <- checkDataTypes(y = NULL, networks = networks,
>> ???????? lag = lag)
>> ???? centlist <- list()
>> ???? for (i in 1:objects$time.steps) {
>> ???????? if (type[1] == "indegree") {
>> ???????????? cent <- degree(objects$networks[[i]], gmode = gmode,
>> ???????????????? cmode = "indegree", rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "outdegree") {
>> ???????????? cent <- degree(objects$networks[[i]], gmode = gmode,
>> ???????????????? cmode = "outdegree", rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "freeman") {
>> ???????????? cent <- degree(objects$networks[[i]], gmode = gmode,
>> ???????????????? cmode = "freeman", rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "betweenness") {
>> ???????????? cent <- betweenness(objects$networks[[i]], gmode = gmode,
>> ???????????????? rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "flow") {
>> ???????????? cent <- flowbet(objects$networks[[i]], gmode = gmode,
>> ???????????????? rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "closeness") {
>> ???????????? cent <- closeness(objects$networks[[i]], gmode = gmode,
>> ???????????????? rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "eigenvector") {
>> ???????????? cent <- evcent(objects$networks[[i]], gmode = gmode,
>> ???????????????? rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "information") {
>> ???????????? cent <- infocent(objects$networks[[i]], gmode = gmode,
>> ???????????????? rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "load") {
>> ???????????? cent <- loadcent(objects$networks[[i]], gmode = gmode,
>> ???????????????? rescale = rescale, ...)
>> ???????? }
>> ???????? else if (type[1] == "bonpow") {
>> ???????????? cent <- bonpow(objects$networks[[i]], gmode = gmode,
>> ???????????????? rescale = rescale, tol = 1e-20, ...)
>> ???????? }
>> ???????? else {
>> ???????????? stop("'type' argument was not recognized.")
>> ???????? }
>> ???????? centlist[[i]] <- cent
>> ???? }
>> ???? time <- numeric()
>> ???? y <- numeric()
>> ???? for (i in 1:objects$time.steps) {
>> ???????? time <- c(time, rep(i, objects$n[[i]]))
>> ???????? if (is.null(centlist[[i]])) {
>> ???????????? y <- c(y, rep(NA, objects$n[[i]]))
>> ???????? }
>> ???????? else {
>> ???????????? if (center == TRUE) {
>> ???????????????? centlist[[i]] <- centlist[[i]] - mean(centlist[[i]],
>> ?????????????????? na.rm = TRUE)
>> ???????????? }
>> ???????????? y <- c(y, centlist[[i]])
>> ???????? }
>> ???? }
>> ???? if (is.null(coefname) || !is.character(coefname) || 
>> length(coefname) >
>> ???????? 1) {
>> ???????? coeflabel <- ""
>> ???? }
>> ???? else {
>> ???????? coeflabel <- paste0(".", coefname)
>> ???? }
>> ???? if (lag == 0) {
>> ???????? laglabel <- ""
>> ???? }
>> ???? else {
>> ???????? laglabel <- paste0(".lag", paste(lag, collapse = "."))
>> ???? }
>> ???? label <- paste0(type[1], coeflabel, laglabel)
>> ???? dat <- data.frame(y, time = time, node = objects$nodelabels)
>> ???? dat$node <- as.character(dat$node)
>> ???? colnames(dat)[1] <- label
>> ???? attributes(dat)$lag <- lag
>> ???? return(dat)}
>>
>> Here is the matrix:
>>
>> dat <- read.table(text="A B #this is edgelist
>> 1 2
>> 1 3
>> 1 2
>> 2 1
>> 2 3
>> 3 1
>> 3 2
>> 3 1", header=TRUE)
>> datmat <- as.matrix(get.adjacency(graph.edgelist(as.matrix(dat),
>> directed=TRUE))) #this is the matrix
>> colnames(datmat) <- c("1", "2", "3") #rename the columns
>>
>> When I applied the function to a matrix
>> centrality(datmat,type="flow",center=TRUE), it returns the error:
>>
>> Error in if (class(networks) == "matrix") { :
>> ?? the condition has length > 1
>>
>> What is the cause of this error? How to fix it? Any help will be greatly
>> appreciated!
>>
>>
>> Best,
>>
>> Chao
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From d|pgnu @end|ng |rom gm@||@com  Thu Sep 22 00:18:22 2022
From: d|pgnu @end|ng |rom gm@||@com (DFP)
Date: Wed, 21 Sep 2022 18:18:22 -0400
Subject: [R] Need help plotting
Message-ID: <3f461678-729f-8bcd-4e22-a38dc18d1d34@comcast.net>

Thank you for the ideas below.? That did work.? I thought I had tried 
"10 mins" before, but maybe I used just 10 min.

===============

Yes, you can have date_breaks = "n mins" where n is any integer.

date_breaks = "15 mins"
date_breaks = "30 mins"
date_breaks = "1 hour"?? # or "1 hours", plural

The only way I know is to try different values until you find one suitable.


	[[alternative HTML version deleted]]


From d|pgnu @end|ng |rom gm@||@com  Thu Sep 22 00:35:17 2022
From: d|pgnu @end|ng |rom gm@||@com (DFP)
Date: Wed, 21 Sep 2022 18:35:17 -0400
Subject: [R] Need help plotting
Message-ID: <ac73c195-26a3-cf03-9130-be10b1e5a9b5@comcast.net>

As I said, the lines below that you provided worked well for me. Can you 
explain what this line does?:

# reshape to long format
 ?? pivot_longer(-Dtime, names_to = "NO2") %>%

-------------------------------------------------

library(ggplot2)
library(dplyr)
library(tidyr)

b %>%
 ?? mutate(Dtime = paste(Sys.Date(), Dtime),
 ???????????????? Dtime = as.POSIXct(Dtime)) %>%
 ?? select(Dtime, DNO2, MNO2) %>%
 ?? # reshape to long format
 ?? pivot_longer(-Dtime, names_to = "NO2") %>%
 ?? # now plot
 ?? ggplot(aes(Dtime, value, color = NO2)) +
 ?? geom_line() +
 ?? geom_point() +
 ?? scale_color_manual(values = c("orange", "skyblue")) +
 ?? # make datetime labels
 ?? scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
 ?? theme_bw()


	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Sep 22 00:51:47 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 22 Sep 2022 08:51:47 +1000
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmJ66CW39_35dqhxcbvmgRqz1hhsW2Qm_j0xJUT2Mk8N4A@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <BN6PR2201MB15531E675034AAAEEEC6F6CDCF4F9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CA+8X3fUh28ieSdDtw5b0CodZb0LxxvbR9wAmfzusp3d5-pZi5Q@mail.gmail.com>
 <CANTxAmJ66CW39_35dqhxcbvmgRqz1hhsW2Qm_j0xJUT2Mk8N4A@mail.gmail.com>
Message-ID: <CA+8X3fUyQN0MuXk2mroE-rJeU7s1yV7KkYEu6TVqLsN6N7qPUw@mail.gmail.com>

Hi Javad,
The example text file you sent doesn't appear to have the two
"trailer" lines that you describe. I would try this brute force method
as all you seem to want is to multiply the third column values by a
constant:

air<-readLines("Air.txt")
# define the column 3 field
begincol3<-29
endcol3<-42
widthcol3<-14
lenline<-117
for(airline in 1:length(air)) {
 # is this a data line?
 if(substr(air[airline]) == " ")
 air[airline]<-paste0(substr(inputline,1,begincol3-1),
  formatC(as.double(substr(inputline,begincol3,endcol3))*mult3,
   digits=5,width=widthcol3,format="f"),
  substr(inputline,endcol3+1,lenline))
}
writeLines(air,"Air2.txt")

Jim

On Wed, Sep 21, 2022 at 9:25 PM javad bayat <j.bayat194 at gmail.com> wrote:
>
> Dear Jim;
> I have no knowledge of the FORTRAN language. The text file is a model's output file and I know that the format is in FORTRAN. I want to write a text file exactly similar to the attached text file using R programming. The steps below show my goal:
> 1- Read the text file without the first 8 and last 2 rows as a dataframe.
> 2- Double the 3rd column values (or multiply by specific number).
> 3- Insert the removed first 8 rows of the original text file as header in the dataframe.
> 4- Insert the last 2 rows of the original text file at the end of dataframe.
> 5- Write the dataframe as a new text file exactly similar to the original text file.
> Is it possible?
> Sincerely
>
>
>
>
>
>
> On Wed, Sep 21, 2022 at 3:29 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi,
>> There was a .txt attachment that is some type of data file. Maybe what
>> you mean is can the header be stripped and the rest written out in a
>> format that can be input with a FORTRAN read routine. Yes, you just
>> have to read it into a data frame and write it out so that it is in
>> either free or fixed format. You will have to define the variable
>> names in your FORTRAN code and work out the input format
>> specifications for the fields.
>>
>> Jim
>>
>> On Wed, Sep 21, 2022 at 8:30 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>> >
>> > This post was empty.
>> >
>> > Tim
>> >
>> > From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
>> > Sent: Wednesday, September 21, 2022 2:09 AM
>> > To: R-help at r-project.org
>> > Subject: [R] Write text file in Fortran format
>> >
>> >
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Best Regards
> Javad Bayat
> M.Sc. Environment Engineering
> Alternative Mail: bayat194 at yahoo.com


From drj|m|emon @end|ng |rom gm@||@com  Thu Sep 22 00:54:30 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 22 Sep 2022 08:54:30 +1000
Subject: [R] Write text file in Fortran format
In-Reply-To: <CA+8X3fUyQN0MuXk2mroE-rJeU7s1yV7KkYEu6TVqLsN6N7qPUw@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <BN6PR2201MB15531E675034AAAEEEC6F6CDCF4F9@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CA+8X3fUh28ieSdDtw5b0CodZb0LxxvbR9wAmfzusp3d5-pZi5Q@mail.gmail.com>
 <CANTxAmJ66CW39_35dqhxcbvmgRqz1hhsW2Qm_j0xJUT2Mk8N4A@mail.gmail.com>
 <CA+8X3fUyQN0MuXk2mroE-rJeU7s1yV7KkYEu6TVqLsN6N7qPUw@mail.gmail.com>
Message-ID: <CA+8X3fWOxC8t1XF7zUBd7mSRZY_ziK8qq=+Te5+AVe4pNoP9fg@mail.gmail.com>

Sorry, line 9 should be:

if(substr(air[airline],1,1) == " ")

Jim

On Thu, Sep 22, 2022 at 8:51 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Javad,
> The example text file you sent doesn't appear to have the two
> "trailer" lines that you describe. I would try this brute force method
> as all you seem to want is to multiply the third column values by a
> constant:
>
> air<-readLines("Air.txt")
> # define the column 3 field
> begincol3<-29
> endcol3<-42
> widthcol3<-14
> lenline<-117
> for(airline in 1:length(air)) {
>  # is this a data line?
>  if(substr(air[airline]) == " ")
>  air[airline]<-paste0(substr(inputline,1,begincol3-1),
>   formatC(as.double(substr(inputline,begincol3,endcol3))*mult3,
>    digits=5,width=widthcol3,format="f"),
>   substr(inputline,endcol3+1,lenline))
> }
> writeLines(air,"Air2.txt")
>
> Jim
>
> On Wed, Sep 21, 2022 at 9:25 PM javad bayat <j.bayat194 at gmail.com> wrote:
> >
> > Dear Jim;
> > I have no knowledge of the FORTRAN language. The text file is a model's output file and I know that the format is in FORTRAN. I want to write a text file exactly similar to the attached text file using R programming. The steps below show my goal:
> > 1- Read the text file without the first 8 and last 2 rows as a dataframe.
> > 2- Double the 3rd column values (or multiply by specific number).
> > 3- Insert the removed first 8 rows of the original text file as header in the dataframe.
> > 4- Insert the last 2 rows of the original text file at the end of dataframe.
> > 5- Write the dataframe as a new text file exactly similar to the original text file.
> > Is it possible?
> > Sincerely
> >
> >
> >
> >
> >
> >
> > On Wed, Sep 21, 2022 at 3:29 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >>
> >> Hi,
> >> There was a .txt attachment that is some type of data file. Maybe what
> >> you mean is can the header be stripped and the rest written out in a
> >> format that can be input with a FORTRAN read routine. Yes, you just
> >> have to read it into a data frame and write it out so that it is in
> >> either free or fixed format. You will have to define the variable
> >> names in your FORTRAN code and work out the input format
> >> specifications for the fields.
> >>
> >> Jim
> >>
> >> On Wed, Sep 21, 2022 at 8:30 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
> >> >
> >> > This post was empty.
> >> >
> >> > Tim
> >> >
> >> > From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
> >> > Sent: Wednesday, September 21, 2022 2:09 AM
> >> > To: R-help at r-project.org
> >> > Subject: [R] Write text file in Fortran format
> >> >
> >> >
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >
> >
> >
> > --
> > Best Regards
> > Javad Bayat
> > M.Sc. Environment Engineering
> > Alternative Mail: bayat194 at yahoo.com


From r@oknz @end|ng |rom gm@||@com  Thu Sep 22 02:31:16 2022
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Thu, 22 Sep 2022 12:31:16 +1200
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
Message-ID: <CABcYAdLmVRX_NkjtAKGsCkcXQDo77ME_MVPKh5rfKEo7qQ4Y6Q@mail.gmail.com>

Background: there is a data file whose records, after a header,
can be describedby the Fortran format given in the header.

YES, you can easily read that file in R, and you don't even need to know
anything about Fortran formats to do it.

You can read the file as a data frame using read.table
using the skip=8 parameter to skip the header and the
colnames=c("x", "y", ...) parameter to supply the column
names.  You will need to supply the column names yourself
because one of the column names given has a space in it.



On Wed, 21 Sept 2022 at 20:29, javad bayat <j.bayat194 at gmail.com> wrote:

>

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Thu Sep 22 04:06:38 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Thu, 22 Sep 2022 02:06:38 +0000
Subject: [R] Need help plotting
In-Reply-To: <ac73c195-26a3-cf03-9130-be10b1e5a9b5@comcast.net>
References: <ac73c195-26a3-cf03-9130-be10b1e5a9b5@comcast.net>
Message-ID: <BN6PR2201MB155320E4DAC60885779B232CCF4E9@BN6PR2201MB1553.namprd22.prod.outlook.com>

Yes, but if you want to learn R (or relearn R) it would be better for you to decompress the code.
You know what b looks like so add the next step. If you want to be able to see the original then save the output to another data frame.
New_df <- b %>%
    mutate(Dtime = paste(Sys.Date(), Dtime),
                  Dtime = as.POSIXct(Dtime))

What do you have now?
Then add the next pipe %>% and code until the next %>%. 
When you look at the dataframe after reshape() it will be very obvious, though if you still have questions please ask.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of DFP
Sent: Wednesday, September 21, 2022 6:35 PM
To: Rui Barradas <ruipbarradas at sapo.pt>; r-help at r-project.org
Subject: Re: [R] Need help plotting

[External Email]

As I said, the lines below that you provided worked well for me. Can you explain what this line does?:

# reshape to long format
    pivot_longer(-Dtime, names_to = "NO2") %>%

-------------------------------------------------

library(ggplot2)
library(dplyr)
library(tidyr)

b %>%
    mutate(Dtime = paste(Sys.Date(), Dtime),
                  Dtime = as.POSIXct(Dtime)) %>%
    select(Dtime, DNO2, MNO2) %>%
    # reshape to long format
    pivot_longer(-Dtime, names_to = "NO2") %>%
    # now plot
    ggplot(aes(Dtime, value, color = NO2)) +
    geom_line() +
    geom_point() +
    scale_color_manual(values = c("orange", "skyblue")) +
    # make datetime labels
    scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
    theme_bw()


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C2e922af564854b594aae08da9c21a172%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637993965506049641%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=gnPZJIDTjVr8cv9s3foPjzYYUXWYX5Y18%2FLRKQpXyp4%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C2e922af564854b594aae08da9c21a172%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637993965506049641%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=aLDvzRXPm3MSdulLOCbKDUSL59bO3RvhwAAkGl%2B%2BJ8M%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From j@b@y@t194 @end|ng |rom gm@||@com  Thu Sep 22 05:28:28 2022
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Thu, 22 Sep 2022 06:58:28 +0330
Subject: [R] Write text file in Fortran format
In-Reply-To: <CABcYAd+fuOyCcPGierBirNsZ8Tq0V6Z0-r+AOQ8Ck5iAgPkviA@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <YysWSdDs2jdCQnk4@posteo.no>
 <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>
 <CABcYAd+fuOyCcPGierBirNsZ8Tq0V6Z0-r+AOQ8Ck5iAgPkviA@mail.gmail.com>
Message-ID: <CANTxAm+Un39LrKta57nO7M4LGYLQJw0Ck_W7sFj4_dyDYyXOxA@mail.gmail.com>

Dear all;
I apologise, I didn't know that I have to cc the list.
Thank you Mr Rui for reminding me.
Let me clarify more.
I have no knowledge of the FORTRAN language. The text file that has been
attached is a model's output file and I know that the format is in FORTRAN.
I want to write a text file exactly similar to the attached text file using
R programming.
The steps below explain my goal:
1- Read the text file without the first 8 and last 2 rows as a dataframe.
Maybe I have removed the last 2 lines, but at the end it had 2 lines
similar the first 8 lines which starts with asterisk.
2- Double the 3rd column values (or multiply by specific number).
3- Insert the removed first 8 lines of the original text file as header in
the dataframe.
4- Insert the removed last 2 lines of the original text file at the end of
dataframe.
5- Write the dataframe as a new text file exactly similar to the original
text file.

I have used excel but when I save it as text file, the format changes and
is not similar to the attached text file.
I will try all your codes in a few hours, cause I am out of office.
Sincerely yours.



On Thu, 22 Sep 2022, 04:20 Richard O'Keefe, <raoknz at gmail.com> wrote:

> Oh, so you want to WRITE a file *like* that.
> Use ?sprintf.
> (3(1X,F13.5),3(1X,F8.2),3X,A5,2X,A8,2X,A5,5X,A8,2X,I8)
>
> Fortran sprintf
> 1X      a space
> 3X      3 spaces
> F13.5   %13.5f
> F8.2    %8.2f
> A5      %5s
> A8      %8s
> I8      %8d
> 3(...)  the translation of ... written 3 times
>
> We can simplify 1X,F13.5 to F14.5
> Here's the sprintf() equivalent of the Fortran format,
> except you'll need to change the dots to spaces.
>
> "%14.5f%14.5f%14.5f%9.2f%9.2f%9.2f...%5s..%8s..%5s.....%8s%10d\n
>
> On Thu, 22 Sept 2022 at 04:17, javad bayat <j.bayat194 at gmail.com> wrote:
>
>> Dear Rasmus;
>> I have no knowledge of the FORTRAN language. The text file that has been
>> attached is a model's output file and I know that the format is in
>> FORTRAN.
>> I want to write a text file exactly similar to the attached text file
>> using
>> R programming.
>> The steps below explain my goal:
>> 1- Read the text file without the first 8 and last 2 rows as a dataframe.
>> 2- Double the 3rd column values (or multiply by specific number).
>> 3- Insert the removed first 8 rows of the original text file as header in
>> the dataframe.
>> 4- Insert the removed last 2 rows of the original text file at the end of
>> dataframe.
>> 5- Write the dataframe as a new text file exactly similar to the original
>> text file.
>>
>> I have used excel but when I save it as text file, the format changes and
>> is not similar to the attached text file.
>> Sincerely
>>
>> On Wed, 21 Sep 2022, 18:17 Rasmus Liland, <jral at posteo.no> wrote:
>>
>> > Dear Javad,
>> >
>> > Perhaps you were looking to read the
>> > table in Air.txt (is this Fortran
>> > format?) into R?
>> >
>> >         b <- readLines("Air.txt")  # The text MIME attachment w/Mailman
>> > footer ...
>> >         b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman footer (at
>> > end of df)
>> >         idx <- max(grep("^\\*", b))+1  # Start of df after header uline
>> >         header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", "",
>> > b[idx-2])), "_")[[1]])
>> >         b <- read.table(text=b[-(1:idx)], header=F)
>> >         colnames(b) <- header[header!=""]
>> >         b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove constant
>> > cols
>> >
>> > str(b)
>> >
>> >         'data.frame':   31324 obs. of  6 variables:
>> >          $ x           : num  583500 584000 584500 585000 585500 ...
>> >          $ y           : num  3018700 3018700 3018700 3018700 3018700
>> ...
>> >          $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
>> >          $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
>> >          $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
>> >          $ date(conc)  : int  16101706 16101706 16101706 16101706
>> 16101706
>> > ...
>> >
>> > Best,
>> > Rasmus
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Sep 22 06:25:19 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 22 Sep 2022 05:25:19 +0100
Subject: [R] Need help plotting
In-Reply-To: <ac73c195-26a3-cf03-9130-be10b1e5a9b5@comcast.net>
References: <ac73c195-26a3-cf03-9130-be10b1e5a9b5@comcast.net>
Message-ID: <37b9b4d1-8156-36ca-e853-86c62c0b5156@sapo.pt>

Hello,

This type of problems generally has to do with reshaping the data. The 
format should be the long format and the data is in wide format.

Inline.

?s 23:35 de 21/09/2022, DFP escreveu:
> As I said, the lines below that you provided worked well for me. Can you 
> explain what this line does?:
> 
> # reshape to long format
>  ?? pivot_longer(-Dtime, names_to = "NO2") %>%
> 
> -------------------------------------------------
> 
> library(ggplot2)
> library(dplyr)
> library(tidyr)
> 
> b %>%
>  ?? mutate(Dtime = paste(Sys.Date(), Dtime),
>  ???????????????? Dtime = as.POSIXct(Dtime)) %>%
>  ?? select(Dtime, DNO2, MNO2) %>%
>  ?? # reshape to long format
>  ?? pivot_longer(-Dtime, names_to = "NO2") %>%


After selecting only the columns Dtime and *NO2 you need to reshape the 
data to long format. Some ways of telling pivot_longer what are the 
columns to become one are

  - explicitly writing all columns to be pivotted;
  - with negative indexing, all others will be put under the new name "NO2";
  - with a selection function such as ends_with("NO2"). This is probably 
more readable code if you return to it some time from now.


     pivot_longer(ends_with("NO2"), names_to = "NO2") %>%


With data in the long format map column NO2 to the color aesthetic and 
ggplot will automatically understand that you have 2 groups, DNO2 and 
MNO2, and plot 2 lines and 2 groups of points (one for each color) .

Hope this helps,

Rui Barradas


>  ?? # now plot
>  ?? ggplot(aes(Dtime, value, color = NO2)) +
>  ?? geom_line() +
>  ?? geom_point() +
>  ?? scale_color_manual(values = c("orange", "skyblue")) +
>  ?? # make datetime labels
>  ?? scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
>  ?? theme_bw()
> 
>


From j@b@y@t194 @end|ng |rom gm@||@com  Thu Sep 22 07:44:52 2022
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Thu, 22 Sep 2022 09:14:52 +0330
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAm+Un39LrKta57nO7M4LGYLQJw0Ck_W7sFj4_dyDYyXOxA@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <YysWSdDs2jdCQnk4@posteo.no>
 <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>
 <CABcYAd+fuOyCcPGierBirNsZ8Tq0V6Z0-r+AOQ8Ck5iAgPkviA@mail.gmail.com>
 <CANTxAm+Un39LrKta57nO7M4LGYLQJw0Ck_W7sFj4_dyDYyXOxA@mail.gmail.com>
Message-ID: <CANTxAmKFjQuNCu0jec_4A2S=-Gh-2CEtD+1P-6mne5hAXrroMA@mail.gmail.com>

Dear all; Many thanks for your useful comments and codes.
I tried both Rui's and Jim's codes.
Jim's codes gave an error as below:
"Error in substr(inputline, 1, begincol3 - 1) :
  object 'inputline' not found"
I don't know what's wrong.
The Rui's codes worked correctly for the attached file. But I have edited
that file and removed 2 last lines from the file because I could not read
it into R.
These 2 lines were:
"
** CONCUNIT ug/m^3
** DEPUNIT g/m^2
"
When I tried to run the code for my file that has these 2 lines at the end,
it gave me this error:
"
> df1 <- read.table(text = txt_table)
Error in read.table(text = txt_table) : no lines available in input
"
The codes before the "df1 <- read.table(text = txt_table)" were run
correctly.
Sincerely



On Thu, Sep 22, 2022 at 6:58 AM javad bayat <j.bayat194 at gmail.com> wrote:

> Dear all;
> I apologise, I didn't know that I have to cc the list.
> Thank you Mr Rui for reminding me.
> Let me clarify more.
> I have no knowledge of the FORTRAN language. The text file that has been
> attached is a model's output file and I know that the format is in FORTRAN.
> I want to write a text file exactly similar to the attached text file using
> R programming.
> The steps below explain my goal:
> 1- Read the text file without the first 8 and last 2 rows as a dataframe.
> Maybe I have removed the last 2 lines, but at the end it had 2 lines
> similar the first 8 lines which starts with asterisk.
> 2- Double the 3rd column values (or multiply by specific number).
> 3- Insert the removed first 8 lines of the original text file as header in
> the dataframe.
> 4- Insert the removed last 2 lines of the original text file at the end of
> dataframe.
> 5- Write the dataframe as a new text file exactly similar to the original
> text file.
>
> I have used excel but when I save it as text file, the format changes and
> is not similar to the attached text file.
> I will try all your codes in a few hours, cause I am out of office.
> Sincerely yours.
>
>
>
> On Thu, 22 Sep 2022, 04:20 Richard O'Keefe, <raoknz at gmail.com> wrote:
>
>> Oh, so you want to WRITE a file *like* that.
>> Use ?sprintf.
>> (3(1X,F13.5),3(1X,F8.2),3X,A5,2X,A8,2X,A5,5X,A8,2X,I8)
>>
>> Fortran sprintf
>> 1X      a space
>> 3X      3 spaces
>> F13.5   %13.5f
>> F8.2    %8.2f
>> A5      %5s
>> A8      %8s
>> I8      %8d
>> 3(...)  the translation of ... written 3 times
>>
>> We can simplify 1X,F13.5 to F14.5
>> Here's the sprintf() equivalent of the Fortran format,
>> except you'll need to change the dots to spaces.
>>
>> "%14.5f%14.5f%14.5f%9.2f%9.2f%9.2f...%5s..%8s..%5s.....%8s%10d\n
>>
>> On Thu, 22 Sept 2022 at 04:17, javad bayat <j.bayat194 at gmail.com> wrote:
>>
>>> Dear Rasmus;
>>> I have no knowledge of the FORTRAN language. The text file that has been
>>> attached is a model's output file and I know that the format is in
>>> FORTRAN.
>>> I want to write a text file exactly similar to the attached text file
>>> using
>>> R programming.
>>> The steps below explain my goal:
>>> 1- Read the text file without the first 8 and last 2 rows as a dataframe.
>>> 2- Double the 3rd column values (or multiply by specific number).
>>> 3- Insert the removed first 8 rows of the original text file as header in
>>> the dataframe.
>>> 4- Insert the removed last 2 rows of the original text file at the end of
>>> dataframe.
>>> 5- Write the dataframe as a new text file exactly similar to the original
>>> text file.
>>>
>>> I have used excel but when I save it as text file, the format changes and
>>> is not similar to the attached text file.
>>> Sincerely
>>>
>>> On Wed, 21 Sep 2022, 18:17 Rasmus Liland, <jral at posteo.no> wrote:
>>>
>>> > Dear Javad,
>>> >
>>> > Perhaps you were looking to read the
>>> > table in Air.txt (is this Fortran
>>> > format?) into R?
>>> >
>>> >         b <- readLines("Air.txt")  # The text MIME attachment w/Mailman
>>> > footer ...
>>> >         b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman footer (at
>>> > end of df)
>>> >         idx <- max(grep("^\\*", b))+1  # Start of df after header uline
>>> >         header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", "",
>>> > b[idx-2])), "_")[[1]])
>>> >         b <- read.table(text=b[-(1:idx)], header=F)
>>> >         colnames(b) <- header[header!=""]
>>> >         b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove constant
>>> > cols
>>> >
>>> > str(b)
>>> >
>>> >         'data.frame':   31324 obs. of  6 variables:
>>> >          $ x           : num  583500 584000 584500 585000 585500 ...
>>> >          $ y           : num  3018700 3018700 3018700 3018700 3018700
>>> ...
>>> >          $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
>>> >          $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
>>> >          $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
>>> >          $ date(conc)  : int  16101706 16101706 16101706 16101706
>>> 16101706
>>> > ...
>>> >
>>> > Best,
>>> > Rasmus
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> > http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>> >
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

-- 
Best Regards
Javad Bayat
M.Sc. Environment Engineering
Alternative Mail: bayat194 at yahoo.com

	[[alternative HTML version deleted]]


From ke|022 @end|ng |rom buckne||@edu  Wed Sep 21 19:07:25 2022
From: ke|022 @end|ng |rom buckne||@edu (Kaitlyn Light)
Date: Wed, 21 Sep 2022 13:07:25 -0400
Subject: [R] Fatal Error: Contains Space
Message-ID: <CAAZRwnwN9gGLmYiOX69KhFsFJVNinO6Avb9caO9bgei0QmYp1w@mail.gmail.com>

Hello!
I recently downloaded R and RStudio to my windows laptop. I downloaded the
correct version and made sure it was for windows and not mac. However, when
I tried to open RStudio, a message saying " R_tempdir Fatal Error:
Contains Space" would pop-up. The program would open as a blank screen and
usually make the rest of my laptop stall until it was shut off. I tried
uninstalling and reinstalling the programs, however, the issue did not
change. I checked my Microsoft username to make sure it did not "contain
space" (as in spacebars) but it did not. I was hoping I would be able to
get some help moving forward on how to get this fixed. Thank you for your
help!

Best,
Kaitlyn Light

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Thu Sep 22 09:42:22 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 22 Sep 2022 10:42:22 +0300
Subject: [R] Fatal Error: Contains Space
In-Reply-To: <CAAZRwnwN9gGLmYiOX69KhFsFJVNinO6Avb9caO9bgei0QmYp1w@mail.gmail.com>
References: <CAAZRwnwN9gGLmYiOX69KhFsFJVNinO6Avb9caO9bgei0QmYp1w@mail.gmail.com>
Message-ID: <CAGgJW74BtTcLHEgf6Gz9KjM9Tgt_0=-jjgYB_mYsGwcV_OS74Q@mail.gmail.com>

Does this help?
https://stackoverflow.com/questions/72138987/r-studio-fatal-error-r-tempdircontains-space

On Thu, Sep 22, 2022 at 10:37 AM Kaitlyn Light <kel022 at bucknell.edu> wrote:

> Hello!
> I recently downloaded R and RStudio to my windows laptop. I downloaded the
> correct version and made sure it was for windows and not mac. However, when
> I tried to open RStudio, a message saying " R_tempdir Fatal Error:
> Contains Space" would pop-up. The program would open as a blank screen and
> usually make the rest of my laptop stall until it was shut off. I tried
> uninstalling and reinstalling the programs, however, the issue did not
> change. I checked my Microsoft username to make sure it did not "contain
> space" (as in spacebars) but it did not. I was hoping I would be able to
> get some help moving forward on how to get this fixed. Thank you for your
> help!
>
> Best,
> Kaitlyn Light
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Sep 22 09:44:48 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 22 Sep 2022 10:44:48 +0300
Subject: [R] Fatal Error: Contains Space
In-Reply-To: <CAAZRwnwN9gGLmYiOX69KhFsFJVNinO6Avb9caO9bgei0QmYp1w@mail.gmail.com>
References: <CAAZRwnwN9gGLmYiOX69KhFsFJVNinO6Avb9caO9bgei0QmYp1w@mail.gmail.com>
Message-ID: <20220922104448.52625135@Tarkus>

On Wed, 21 Sep 2022 13:07:25 -0400
Kaitlyn Light <kel022 at bucknell.edu> wrote:

> However, when I tried to open RStudio, a message saying " R_tempdir
> Fatal Error: Contains Space" would pop-up.

Does it work when you launch Rgui (part of R itself) instead of RStudio?

-- 
Best regards,
Ivan


From @kw@|mmo @end|ng |rom gm@||@com  Thu Sep 22 09:50:11 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Thu, 22 Sep 2022 03:50:11 -0400
Subject: [R] Fatal Error: Contains Space
In-Reply-To: <CAAZRwnwN9gGLmYiOX69KhFsFJVNinO6Avb9caO9bgei0QmYp1w@mail.gmail.com>
References: <CAAZRwnwN9gGLmYiOX69KhFsFJVNinO6Avb9caO9bgei0QmYp1w@mail.gmail.com>
Message-ID: <CAPcHnpSpZLmCE7AL5KxOKLX_=gv2-DM4iuAdmuNbbDjPruxxzg@mail.gmail.com>

Hello,


I'm going to quote the tempdir() doc page: "By default, tmpdir will be the
directory given by tempdir(). This will be a subdirectory of the
per-session temporary directory found by the following rule when the R
session is started. The environment variables TMPDIR, TMP and TEMP are
checked in turn and the first found which points to a writable directory is
used: if none succeeds the value of R_USER (see Rconsole) is used. If the
path to the directory contains a space in any of the components, the path
returned will use the shortnames version of the path."

You need to define one of the environment variables listed above. For
myself, I did something like

TEMP=C:\Users\iris\AppData\Local\Temp


On Thu., Sep. 22, 2022, 03:37 Kaitlyn Light, <kel022 at bucknell.edu> wrote:

> Hello!
> I recently downloaded R and RStudio to my windows laptop. I downloaded the
> correct version and made sure it was for windows and not mac. However, when
> I tried to open RStudio, a message saying " R_tempdir Fatal Error:
> Contains Space" would pop-up. The program would open as a blank screen and
> usually make the rest of my laptop stall until it was shut off. I tried
> uninstalling and reinstalling the programs, however, the issue did not
> change. I checked my Microsoft username to make sure it did not "contain
> space" (as in spacebars) but it did not. I was hoping I would be able to
> get some help moving forward on how to get this fixed. Thank you for your
> help!
>
> Best,
> Kaitlyn Light
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Sep 22 10:50:59 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 22 Sep 2022 09:50:59 +0100
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmKFjQuNCu0jec_4A2S=-Gh-2CEtD+1P-6mne5hAXrroMA@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <YysWSdDs2jdCQnk4@posteo.no>
 <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>
 <CABcYAd+fuOyCcPGierBirNsZ8Tq0V6Z0-r+AOQ8Ck5iAgPkviA@mail.gmail.com>
 <CANTxAm+Un39LrKta57nO7M4LGYLQJw0Ck_W7sFj4_dyDYyXOxA@mail.gmail.com>
 <CANTxAmKFjQuNCu0jec_4A2S=-Gh-2CEtD+1P-6mne5hAXrroMA@mail.gmail.com>
Message-ID: <d858293a-9f42-1379-d4f9-ef0195d67452@sapo.pt>

Hello,

Are those lines at the begining of the file?

Rui Barradas

?s 06:44 de 22/09/2022, javad bayat escreveu:
> Dear all; Many thanks for your useful comments and codes.
> I tried both Rui's and Jim's codes.
> Jim's codes gave an error as below:
> "Error in substr(inputline, 1, begincol3 - 1) :
>    object 'inputline' not found"
> I don't know what's wrong.
> The Rui's codes worked correctly for the attached file. But I have edited
> that file and removed 2 last lines from the file because I could not read
> it into R.
> These 2 lines were:
> "
> ** CONCUNIT ug/m^3
> ** DEPUNIT g/m^2
> "
> When I tried to run the code for my file that has these 2 lines at the end,
> it gave me this error:
> "
>> df1 <- read.table(text = txt_table)
> Error in read.table(text = txt_table) : no lines available in input
> "
> The codes before the "df1 <- read.table(text = txt_table)" were run
> correctly.
> Sincerely
> 
> 
> 
> On Thu, Sep 22, 2022 at 6:58 AM javad bayat <j.bayat194 at gmail.com> wrote:
> 
>> Dear all;
>> I apologise, I didn't know that I have to cc the list.
>> Thank you Mr Rui for reminding me.
>> Let me clarify more.
>> I have no knowledge of the FORTRAN language. The text file that has been
>> attached is a model's output file and I know that the format is in FORTRAN.
>> I want to write a text file exactly similar to the attached text file using
>> R programming.
>> The steps below explain my goal:
>> 1- Read the text file without the first 8 and last 2 rows as a dataframe.
>> Maybe I have removed the last 2 lines, but at the end it had 2 lines
>> similar the first 8 lines which starts with asterisk.
>> 2- Double the 3rd column values (or multiply by specific number).
>> 3- Insert the removed first 8 lines of the original text file as header in
>> the dataframe.
>> 4- Insert the removed last 2 lines of the original text file at the end of
>> dataframe.
>> 5- Write the dataframe as a new text file exactly similar to the original
>> text file.
>>
>> I have used excel but when I save it as text file, the format changes and
>> is not similar to the attached text file.
>> I will try all your codes in a few hours, cause I am out of office.
>> Sincerely yours.
>>
>>
>>
>> On Thu, 22 Sep 2022, 04:20 Richard O'Keefe, <raoknz at gmail.com> wrote:
>>
>>> Oh, so you want to WRITE a file *like* that.
>>> Use ?sprintf.
>>> (3(1X,F13.5),3(1X,F8.2),3X,A5,2X,A8,2X,A5,5X,A8,2X,I8)
>>>
>>> Fortran sprintf
>>> 1X      a space
>>> 3X      3 spaces
>>> F13.5   %13.5f
>>> F8.2    %8.2f
>>> A5      %5s
>>> A8      %8s
>>> I8      %8d
>>> 3(...)  the translation of ... written 3 times
>>>
>>> We can simplify 1X,F13.5 to F14.5
>>> Here's the sprintf() equivalent of the Fortran format,
>>> except you'll need to change the dots to spaces.
>>>
>>> "%14.5f%14.5f%14.5f%9.2f%9.2f%9.2f...%5s..%8s..%5s.....%8s%10d\n
>>>
>>> On Thu, 22 Sept 2022 at 04:17, javad bayat <j.bayat194 at gmail.com> wrote:
>>>
>>>> Dear Rasmus;
>>>> I have no knowledge of the FORTRAN language. The text file that has been
>>>> attached is a model's output file and I know that the format is in
>>>> FORTRAN.
>>>> I want to write a text file exactly similar to the attached text file
>>>> using
>>>> R programming.
>>>> The steps below explain my goal:
>>>> 1- Read the text file without the first 8 and last 2 rows as a dataframe.
>>>> 2- Double the 3rd column values (or multiply by specific number).
>>>> 3- Insert the removed first 8 rows of the original text file as header in
>>>> the dataframe.
>>>> 4- Insert the removed last 2 rows of the original text file at the end of
>>>> dataframe.
>>>> 5- Write the dataframe as a new text file exactly similar to the original
>>>> text file.
>>>>
>>>> I have used excel but when I save it as text file, the format changes and
>>>> is not similar to the attached text file.
>>>> Sincerely
>>>>
>>>> On Wed, 21 Sep 2022, 18:17 Rasmus Liland, <jral at posteo.no> wrote:
>>>>
>>>>> Dear Javad,
>>>>>
>>>>> Perhaps you were looking to read the
>>>>> table in Air.txt (is this Fortran
>>>>> format?) into R?
>>>>>
>>>>>          b <- readLines("Air.txt")  # The text MIME attachment w/Mailman
>>>>> footer ...
>>>>>          b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman footer (at
>>>>> end of df)
>>>>>          idx <- max(grep("^\\*", b))+1  # Start of df after header uline
>>>>>          header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", "",
>>>>> b[idx-2])), "_")[[1]])
>>>>>          b <- read.table(text=b[-(1:idx)], header=F)
>>>>>          colnames(b) <- header[header!=""]
>>>>>          b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove constant
>>>>> cols
>>>>>
>>>>> str(b)
>>>>>
>>>>>          'data.frame':   31324 obs. of  6 variables:
>>>>>           $ x           : num  583500 584000 584500 585000 585500 ...
>>>>>           $ y           : num  3018700 3018700 3018700 3018700 3018700
>>>> ...
>>>>>           $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
>>>>>           $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
>>>>>           $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
>>>>>           $ date(conc)  : int  16101706 16101706 16101706 16101706
>>>> 16101706
>>>>> ...
>>>>>
>>>>> Best,
>>>>> Rasmus
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>>          [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Sep 22 11:53:36 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 22 Sep 2022 11:53:36 +0200
Subject: [R] Error in if (class(networks) == "matrix") from a function
In-Reply-To: <CAGgJW75Z+Sh-YYshDDp_L=Up-gNJAsZNYApWVCckgOftJLS=JA@mail.gmail.com>
References: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
 <CAGgJW75Z+Sh-YYshDDp_L=Up-gNJAsZNYApWVCckgOftJLS=JA@mail.gmail.com>
Message-ID: <25388.12448.706333.710321@stat.math.ethz.ch>

>>>>> Eric Berger 
>>>>>     on Wed, 21 Sep 2022 22:26:39 +0300 writes:

    > In R 4.2.0 there is a significant change. When you use an if() statement
    > with a condition of length > 1 this now reports an error.
    > e.g. this link mentions it as a change
    > https://www.jumpingrivers.com/blog/new-features-r420/

    > In your case this is because class(obj) can return a character vector of
    > length > 1 (all the classes).
    > One possible workaround would be:

    > if ( "matrix" %in% class(networks) ) ...

Yes,  however, in general, the recommendation in the related R
blog,

would have been

      if(inherits(networks, "matrix"))

which I consider better *correctly readable* (and also expect
to be more efficient).

Lastly, in this special case, I'd try

	if(is.matrix(networks))

i.e., I'd try to see if the fast  is.matrix(.)  applies to your 'networks'
(and I'm guessing "yes" with high confidence ..).

Martin

    > HTH,
    > Eric


    > On Wed, Sep 21, 2022 at 10:21 PM Chao Liu <psychaoliu at gmail.com> wrote:

    >> Dear R-Help community,
    >> 
    >> This is a crosspost on SO but I've had no luck so far. So I have a function
    >> which computes a centrality index for the nodes in a network or matrix.
    >> Here is the function:
    >> 
    >> library(igraph) #load package igraph
    >> centrality <- function (networks, type = c("indegree", "outdegree",
    >> "freeman",
    >> "betweenness", "flow", "closeness", "eigenvector", "information",
    >> "load", "bonpow"), directed = TRUE, lag = 0, rescale = FALSE,
    >> center = FALSE, coefname = NULL, ...) {
    >> if (is.null(directed) || !is.logical(directed)) {
    >> stop("'directed' must be TRUE or FALSE.")
    >> }
    >> else if (length(directed) != 1) {
    >> stop("The 'directed' argument must contain a single logical
    >> value only.")
    >> }
    >> else if (directed == FALSE) {
    >> gmode <- "graph"
    >> }
    >> else {
    >> gmode <- "digraph"
    >> }
    >> objects <- checkDataTypes(y = NULL, networks = networks,
    >> lag = lag)
    >> centlist <- list()
    >> for (i in 1:objects$time.steps) {
    >> if (type[1] == "indegree") {
    >> cent <- degree(objects$networks[[i]], gmode = gmode,
    >> cmode = "indegree", rescale = rescale, ...)
    >> }
    >> else if (type[1] == "outdegree") {
    >> cent <- degree(objects$networks[[i]], gmode = gmode,
    >> cmode = "outdegree", rescale = rescale, ...)
    >> }
    >> else if (type[1] == "freeman") {
    >> cent <- degree(objects$networks[[i]], gmode = gmode,
    >> cmode = "freeman", rescale = rescale, ...)
    >> }
    >> else if (type[1] == "betweenness") {
    >> cent <- betweenness(objects$networks[[i]], gmode = gmode,
    >> rescale = rescale, ...)
    >> }
    >> else if (type[1] == "flow") {
    >> cent <- flowbet(objects$networks[[i]], gmode = gmode,
    >> rescale = rescale, ...)
    >> }
    >> else if (type[1] == "closeness") {
    >> cent <- closeness(objects$networks[[i]], gmode = gmode,
    >> rescale = rescale, ...)
    >> }
    >> else if (type[1] == "eigenvector") {
    >> cent <- evcent(objects$networks[[i]], gmode = gmode,
    >> rescale = rescale, ...)
    >> }
    >> else if (type[1] == "information") {
    >> cent <- infocent(objects$networks[[i]], gmode = gmode,
    >> rescale = rescale, ...)
    >> }
    >> else if (type[1] == "load") {
    >> cent <- loadcent(objects$networks[[i]], gmode = gmode,
    >> rescale = rescale, ...)
    >> }
    >> else if (type[1] == "bonpow") {
    >> cent <- bonpow(objects$networks[[i]], gmode = gmode,
    >> rescale = rescale, tol = 1e-20, ...)
    >> }
    >> else {
    >> stop("'type' argument was not recognized.")
    >> }
    >> centlist[[i]] <- cent
    >> }
    >> time <- numeric()
    >> y <- numeric()
    >> for (i in 1:objects$time.steps) {
    >> time <- c(time, rep(i, objects$n[[i]]))
    >> if (is.null(centlist[[i]])) {
    >> y <- c(y, rep(NA, objects$n[[i]]))
    >> }
    >> else {
    >> if (center == TRUE) {
    >> centlist[[i]] <- centlist[[i]] - mean(centlist[[i]],
    >> na.rm = TRUE)
    >> }
    >> y <- c(y, centlist[[i]])
    >> }
    >> }
    >> if (is.null(coefname) || !is.character(coefname) || length(coefname) >
    >> 1) {
    >> coeflabel <- ""
    >> }
    >> else {
    >> coeflabel <- paste0(".", coefname)
    >> }
    >> if (lag == 0) {
    >> laglabel <- ""
    >> }
    >> else {
    >> laglabel <- paste0(".lag", paste(lag, collapse = "."))
    >> }
    >> label <- paste0(type[1], coeflabel, laglabel)
    >> dat <- data.frame(y, time = time, node = objects$nodelabels)
    >> dat$node <- as.character(dat$node)
    >> colnames(dat)[1] <- label
    >> attributes(dat)$lag <- lag
    >> return(dat)}
    >> 
    >> Here is the matrix:
    >> 
    >> dat <- read.table(text="A B #this is edgelist
    >> 1 2
    >> 1 3
    >> 1 2
    >> 2 1
    >> 2 3
    >> 3 1
    >> 3 2
    >> 3 1", header=TRUE)
    >> datmat <- as.matrix(get.adjacency(graph.edgelist(as.matrix(dat),
    >> directed=TRUE))) #this is the matrix
    >> colnames(datmat) <- c("1", "2", "3") #rename the columns
    >> 
    >> When I applied the function to a matrix
    >> centrality(datmat,type="flow",center=TRUE), it returns the error:
    >> 
    >> Error in if (class(networks) == "matrix") { :
    >> the condition has length > 1
    >> 
    >> What is the cause of this error? How to fix it? Any help will be greatly
    >> appreciated!
    >> 
    >> 
    >> Best,
    >> 
    >> Chao
    >> 
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide
    >> http://www.R-project.org/posting-guide.html
    >> and provide commented, minimal, self-contained, reproducible code.
    >> 

    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From pr@k@@h@n@n| @end|ng |rom gm@||@com  Wed Sep 21 01:38:23 2022
From: pr@k@@h@n@n| @end|ng |rom gm@||@com (K Purna Prakash)
Date: Wed, 21 Sep 2022 05:08:23 +0530
Subject: [R] Mathematical working procedure of imputation methods
 (medianImpute, knnImpute, and bagImpute) in caret package R
In-Reply-To: <CAGxFJbTf8VhzbqSP_krVcm0VSgnsmOzTDRgng++X7DYCJ4T18w@mail.gmail.com>
References: <CAOGJCosj-ojUTBqBbxp9gXMbH9A_tPJYCe-3aAQ4UCJwpnaXrg@mail.gmail.com>
 <CAGxFJbTf8VhzbqSP_krVcm0VSgnsmOzTDRgng++X7DYCJ4T18w@mail.gmail.com>
Message-ID: <CAOGJCoviQ6wFDdO+4xOF37WRMA5EbhvJm8UY9O63XgOtDV4EZA@mail.gmail.com>

Thanks, I'll check them out.

On Wed, Sep 21, 2022, 03:16 Bert Gunter <bgunter.4567 at gmail.com> wrote:

> R is open source. Look at the code and read it.
> Alternatively, look at references for all of this. e.g. on Wikipedia or
> via web search. We generally do not provide statistical instruction on this
> list.
>
> Bert
>
> On Tue, Sep 20, 2022 at 2:20 PM K Purna Prakash <prakash.nani at gmail.com>
> wrote:
>
>> Dear Sir/Madam,
>> Greetings!!!
>>
>> Kindly provide the detailed internal mathematical working mechanism of the
>> following median, KNN, and bagging imputation methods available in caret
>> package R.
>>
>>  preProcess(train_data, method = "medianImpute")
>>  preProcess(train_data, method = "knnnImpute")
>>  preProcess(train_data method = "bagImpute")
>>
>> The details provided by you will help me a lot for a better understanding
>> of these imputation methods especially while dealing with large sets of
>> data.
>>
>> I will look forward to hearing from you.
>>
>> Thanks and regards,
>> K. Purna Prakash.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From j@b@y@t194 @end|ng |rom gm@||@com  Thu Sep 22 12:35:14 2022
From: j@b@y@t194 @end|ng |rom gm@||@com (javad bayat)
Date: Thu, 22 Sep 2022 14:05:14 +0330
Subject: [R] Write text file in Fortran format
In-Reply-To: <d858293a-9f42-1379-d4f9-ef0195d67452@sapo.pt>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <YysWSdDs2jdCQnk4@posteo.no>
 <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>
 <CABcYAd+fuOyCcPGierBirNsZ8Tq0V6Z0-r+AOQ8Ck5iAgPkviA@mail.gmail.com>
 <CANTxAm+Un39LrKta57nO7M4LGYLQJw0Ck_W7sFj4_dyDYyXOxA@mail.gmail.com>
 <CANTxAmKFjQuNCu0jec_4A2S=-Gh-2CEtD+1P-6mne5hAXrroMA@mail.gmail.com>
 <d858293a-9f42-1379-d4f9-ef0195d67452@sapo.pt>
Message-ID: <CANTxAmK93J+a0A9c4ugehf7H6KbKw_5Z52=kxdmwhww7VASSXw@mail.gmail.com>

These 2 lines were at the end of the text file, which I have attached but I
had removed them to read the text file in R.
Just like the first 8 line that start with asterisk (*).






On Thu, 22 Sep 2022, 12:21 Rui Barradas, <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Are those lines at the begining of the file?
>
> Rui Barradas
>
> ?s 06:44 de 22/09/2022, javad bayat escreveu:
> > Dear all; Many thanks for your useful comments and codes.
> > I tried both Rui's and Jim's codes.
> > Jim's codes gave an error as below:
> > "Error in substr(inputline, 1, begincol3 - 1) :
> >    object 'inputline' not found"
> > I don't know what's wrong.
> > The Rui's codes worked correctly for the attached file. But I have edited
> > that file and removed 2 last lines from the file because I could not read
> > it into R.
> > These 2 lines were:
> > "
> > ** CONCUNIT ug/m^3
> > ** DEPUNIT g/m^2
> > "
> > When I tried to run the code for my file that has these 2 lines at the
> end,
> > it gave me this error:
> > "
> >> df1 <- read.table(text = txt_table)
> > Error in read.table(text = txt_table) : no lines available in input
> > "
> > The codes before the "df1 <- read.table(text = txt_table)" were run
> > correctly.
> > Sincerely
> >
> >
> >
> > On Thu, Sep 22, 2022 at 6:58 AM javad bayat <j.bayat194 at gmail.com>
> wrote:
> >
> >> Dear all;
> >> I apologise, I didn't know that I have to cc the list.
> >> Thank you Mr Rui for reminding me.
> >> Let me clarify more.
> >> I have no knowledge of the FORTRAN language. The text file that has been
> >> attached is a model's output file and I know that the format is in
> FORTRAN.
> >> I want to write a text file exactly similar to the attached text file
> using
> >> R programming.
> >> The steps below explain my goal:
> >> 1- Read the text file without the first 8 and last 2 rows as a
> dataframe.
> >> Maybe I have removed the last 2 lines, but at the end it had 2 lines
> >> similar the first 8 lines which starts with asterisk.
> >> 2- Double the 3rd column values (or multiply by specific number).
> >> 3- Insert the removed first 8 lines of the original text file as header
> in
> >> the dataframe.
> >> 4- Insert the removed last 2 lines of the original text file at the end
> of
> >> dataframe.
> >> 5- Write the dataframe as a new text file exactly similar to the
> original
> >> text file.
> >>
> >> I have used excel but when I save it as text file, the format changes
> and
> >> is not similar to the attached text file.
> >> I will try all your codes in a few hours, cause I am out of office.
> >> Sincerely yours.
> >>
> >>
> >>
> >> On Thu, 22 Sep 2022, 04:20 Richard O'Keefe, <raoknz at gmail.com> wrote:
> >>
> >>> Oh, so you want to WRITE a file *like* that.
> >>> Use ?sprintf.
> >>> (3(1X,F13.5),3(1X,F8.2),3X,A5,2X,A8,2X,A5,5X,A8,2X,I8)
> >>>
> >>> Fortran sprintf
> >>> 1X      a space
> >>> 3X      3 spaces
> >>> F13.5   %13.5f
> >>> F8.2    %8.2f
> >>> A5      %5s
> >>> A8      %8s
> >>> I8      %8d
> >>> 3(...)  the translation of ... written 3 times
> >>>
> >>> We can simplify 1X,F13.5 to F14.5
> >>> Here's the sprintf() equivalent of the Fortran format,
> >>> except you'll need to change the dots to spaces.
> >>>
> >>> "%14.5f%14.5f%14.5f%9.2f%9.2f%9.2f...%5s..%8s..%5s.....%8s%10d\n
> >>>
> >>> On Thu, 22 Sept 2022 at 04:17, javad bayat <j.bayat194 at gmail.com>
> wrote:
> >>>
> >>>> Dear Rasmus;
> >>>> I have no knowledge of the FORTRAN language. The text file that has
> been
> >>>> attached is a model's output file and I know that the format is in
> >>>> FORTRAN.
> >>>> I want to write a text file exactly similar to the attached text file
> >>>> using
> >>>> R programming.
> >>>> The steps below explain my goal:
> >>>> 1- Read the text file without the first 8 and last 2 rows as a
> dataframe.
> >>>> 2- Double the 3rd column values (or multiply by specific number).
> >>>> 3- Insert the removed first 8 rows of the original text file as
> header in
> >>>> the dataframe.
> >>>> 4- Insert the removed last 2 rows of the original text file at the
> end of
> >>>> dataframe.
> >>>> 5- Write the dataframe as a new text file exactly similar to the
> original
> >>>> text file.
> >>>>
> >>>> I have used excel but when I save it as text file, the format changes
> and
> >>>> is not similar to the attached text file.
> >>>> Sincerely
> >>>>
> >>>> On Wed, 21 Sep 2022, 18:17 Rasmus Liland, <jral at posteo.no> wrote:
> >>>>
> >>>>> Dear Javad,
> >>>>>
> >>>>> Perhaps you were looking to read the
> >>>>> table in Air.txt (is this Fortran
> >>>>> format?) into R?
> >>>>>
> >>>>>          b <- readLines("Air.txt")  # The text MIME attachment
> w/Mailman
> >>>>> footer ...
> >>>>>          b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman footer
> (at
> >>>>> end of df)
> >>>>>          idx <- max(grep("^\\*", b))+1  # Start of df after header
> uline
> >>>>>          header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", "",
> >>>>> b[idx-2])), "_")[[1]])
> >>>>>          b <- read.table(text=b[-(1:idx)], header=F)
> >>>>>          colnames(b) <- header[header!=""]
> >>>>>          b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove
> constant
> >>>>> cols
> >>>>>
> >>>>> str(b)
> >>>>>
> >>>>>          'data.frame':   31324 obs. of  6 variables:
> >>>>>           $ x           : num  583500 584000 584500 585000 585500 ...
> >>>>>           $ y           : num  3018700 3018700 3018700 3018700
> 3018700
> >>>> ...
> >>>>>           $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
> >>>>>           $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
> >>>>>           $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
> >>>>>           $ date(conc)  : int  16101706 16101706 16101706 16101706
> >>>> 16101706
> >>>>> ...
> >>>>>
> >>>>> Best,
> >>>>> Rasmus
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>>
> >>>>
> >>>>          [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>
> >
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Sep 22 13:27:36 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 22 Sep 2022 12:27:36 +0100
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmK93J+a0A9c4ugehf7H6KbKw_5Z52=kxdmwhww7VASSXw@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <YysWSdDs2jdCQnk4@posteo.no>
 <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>
 <CABcYAd+fuOyCcPGierBirNsZ8Tq0V6Z0-r+AOQ8Ck5iAgPkviA@mail.gmail.com>
 <CANTxAm+Un39LrKta57nO7M4LGYLQJw0Ck_W7sFj4_dyDYyXOxA@mail.gmail.com>
 <CANTxAmKFjQuNCu0jec_4A2S=-Gh-2CEtD+1P-6mne5hAXrroMA@mail.gmail.com>
 <d858293a-9f42-1379-d4f9-ef0195d67452@sapo.pt>
 <CANTxAmK93J+a0A9c4ugehf7H6KbKw_5Z52=kxdmwhww7VASSXw@mail.gmail.com>
Message-ID: <e10a09f0-5ace-79e5-dd22-fc902c458d53@sapo.pt>

Hello,

Maybe the following solves the problem.
I hope it does if the mailman footer is no longer there.



# this path depends on the OP's system
path <- "~/Temp"
fl <- list.files(path, pattern = "Air.txt", full.names = TRUE)
# read the file as text
txt <- readLines(fl)

# find lines starting with an asterisk
i <- grep("^\\*", txt)
# keep the other lines
txt_table <- txt[-i]
txt_table <- trimws(txt_table)
df1 <- read.table(text = txt_table)
# multiply 3rd column by 2
df1[[3]] <- 2*df1[[3]]

# format the table's lines to write them back to file
fmt <- "%14.5f %13.5f %13.5f %8.2f %8.2f %8.2f %7s %8s %10s %9s %9d"
new_data <- sprintf(fmt,
                     df1[[1]], df1[[2]], df1[[3]], df1[[4]],
                     df1[[5]], df1[[6]], df1[[7]], df1[[8]],
                     df1[[9]], df1[[10]], df1[[11]])

# assemble the header and the table
txt_new <- c(txt[i], new_data)

# write to text file
fl2 <- file.path(dirname(fl), "Air2.txt")
writeLines(txt_new, fl2)


Hope this helps,

Rui Barradas

?s 11:35 de 22/09/2022, javad bayat escreveu:
> These 2 lines were at the end of the text file, which I have attached but I
> had removed them to read the text file in R.
> Just like the first 8 line that start with asterisk (*).
> 
> 
> 
> 
> 
> 
> On Thu, 22 Sep 2022, 12:21 Rui Barradas, <ruipbarradas at sapo.pt> wrote:
> 
>> Hello,
>>
>> Are those lines at the begining of the file?
>>
>> Rui Barradas
>>
>> ?s 06:44 de 22/09/2022, javad bayat escreveu:
>>> Dear all; Many thanks for your useful comments and codes.
>>> I tried both Rui's and Jim's codes.
>>> Jim's codes gave an error as below:
>>> "Error in substr(inputline, 1, begincol3 - 1) :
>>>     object 'inputline' not found"
>>> I don't know what's wrong.
>>> The Rui's codes worked correctly for the attached file. But I have edited
>>> that file and removed 2 last lines from the file because I could not read
>>> it into R.
>>> These 2 lines were:
>>> "
>>> ** CONCUNIT ug/m^3
>>> ** DEPUNIT g/m^2
>>> "
>>> When I tried to run the code for my file that has these 2 lines at the
>> end,
>>> it gave me this error:
>>> "
>>>> df1 <- read.table(text = txt_table)
>>> Error in read.table(text = txt_table) : no lines available in input
>>> "
>>> The codes before the "df1 <- read.table(text = txt_table)" were run
>>> correctly.
>>> Sincerely
>>>
>>>
>>>
>>> On Thu, Sep 22, 2022 at 6:58 AM javad bayat <j.bayat194 at gmail.com>
>> wrote:
>>>
>>>> Dear all;
>>>> I apologise, I didn't know that I have to cc the list.
>>>> Thank you Mr Rui for reminding me.
>>>> Let me clarify more.
>>>> I have no knowledge of the FORTRAN language. The text file that has been
>>>> attached is a model's output file and I know that the format is in
>> FORTRAN.
>>>> I want to write a text file exactly similar to the attached text file
>> using
>>>> R programming.
>>>> The steps below explain my goal:
>>>> 1- Read the text file without the first 8 and last 2 rows as a
>> dataframe.
>>>> Maybe I have removed the last 2 lines, but at the end it had 2 lines
>>>> similar the first 8 lines which starts with asterisk.
>>>> 2- Double the 3rd column values (or multiply by specific number).
>>>> 3- Insert the removed first 8 lines of the original text file as header
>> in
>>>> the dataframe.
>>>> 4- Insert the removed last 2 lines of the original text file at the end
>> of
>>>> dataframe.
>>>> 5- Write the dataframe as a new text file exactly similar to the
>> original
>>>> text file.
>>>>
>>>> I have used excel but when I save it as text file, the format changes
>> and
>>>> is not similar to the attached text file.
>>>> I will try all your codes in a few hours, cause I am out of office.
>>>> Sincerely yours.
>>>>
>>>>
>>>>
>>>> On Thu, 22 Sep 2022, 04:20 Richard O'Keefe, <raoknz at gmail.com> wrote:
>>>>
>>>>> Oh, so you want to WRITE a file *like* that.
>>>>> Use ?sprintf.
>>>>> (3(1X,F13.5),3(1X,F8.2),3X,A5,2X,A8,2X,A5,5X,A8,2X,I8)
>>>>>
>>>>> Fortran sprintf
>>>>> 1X      a space
>>>>> 3X      3 spaces
>>>>> F13.5   %13.5f
>>>>> F8.2    %8.2f
>>>>> A5      %5s
>>>>> A8      %8s
>>>>> I8      %8d
>>>>> 3(...)  the translation of ... written 3 times
>>>>>
>>>>> We can simplify 1X,F13.5 to F14.5
>>>>> Here's the sprintf() equivalent of the Fortran format,
>>>>> except you'll need to change the dots to spaces.
>>>>>
>>>>> "%14.5f%14.5f%14.5f%9.2f%9.2f%9.2f...%5s..%8s..%5s.....%8s%10d\n
>>>>>
>>>>> On Thu, 22 Sept 2022 at 04:17, javad bayat <j.bayat194 at gmail.com>
>> wrote:
>>>>>
>>>>>> Dear Rasmus;
>>>>>> I have no knowledge of the FORTRAN language. The text file that has
>> been
>>>>>> attached is a model's output file and I know that the format is in
>>>>>> FORTRAN.
>>>>>> I want to write a text file exactly similar to the attached text file
>>>>>> using
>>>>>> R programming.
>>>>>> The steps below explain my goal:
>>>>>> 1- Read the text file without the first 8 and last 2 rows as a
>> dataframe.
>>>>>> 2- Double the 3rd column values (or multiply by specific number).
>>>>>> 3- Insert the removed first 8 rows of the original text file as
>> header in
>>>>>> the dataframe.
>>>>>> 4- Insert the removed last 2 rows of the original text file at the
>> end of
>>>>>> dataframe.
>>>>>> 5- Write the dataframe as a new text file exactly similar to the
>> original
>>>>>> text file.
>>>>>>
>>>>>> I have used excel but when I save it as text file, the format changes
>> and
>>>>>> is not similar to the attached text file.
>>>>>> Sincerely
>>>>>>
>>>>>> On Wed, 21 Sep 2022, 18:17 Rasmus Liland, <jral at posteo.no> wrote:
>>>>>>
>>>>>>> Dear Javad,
>>>>>>>
>>>>>>> Perhaps you were looking to read the
>>>>>>> table in Air.txt (is this Fortran
>>>>>>> format?) into R?
>>>>>>>
>>>>>>>           b <- readLines("Air.txt")  # The text MIME attachment
>> w/Mailman
>>>>>>> footer ...
>>>>>>>           b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman footer
>> (at
>>>>>>> end of df)
>>>>>>>           idx <- max(grep("^\\*", b))+1  # Start of df after header
>> uline
>>>>>>>           header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", "",
>>>>>>> b[idx-2])), "_")[[1]])
>>>>>>>           b <- read.table(text=b[-(1:idx)], header=F)
>>>>>>>           colnames(b) <- header[header!=""]
>>>>>>>           b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove
>> constant
>>>>>>> cols
>>>>>>>
>>>>>>> str(b)
>>>>>>>
>>>>>>>           'data.frame':   31324 obs. of  6 variables:
>>>>>>>            $ x           : num  583500 584000 584500 585000 585500 ...
>>>>>>>            $ y           : num  3018700 3018700 3018700 3018700
>> 3018700
>>>>>> ...
>>>>>>>            $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
>>>>>>>            $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
>>>>>>>            $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
>>>>>>>            $ date(conc)  : int  16101706 16101706 16101706 16101706
>>>>>> 16101706
>>>>>>> ...
>>>>>>>
>>>>>>> Best,
>>>>>>> Rasmus
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>
>>>>>>
>>>>>>           [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>
>>>
>>
>


From p@ych@o||u @end|ng |rom gm@||@com  Thu Sep 22 15:50:57 2022
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Thu, 22 Sep 2022 09:50:57 -0400
Subject: [R] Error in if (class(networks) == "matrix") from a function
In-Reply-To: <25388.12448.706333.710321@stat.math.ethz.ch>
References: <CACCU-vMmvbk_y7X+4h2vVPqbRkwLDc9TYy5HqqAoP7wga0o=jQ@mail.gmail.com>
 <CAGgJW75Z+Sh-YYshDDp_L=Up-gNJAsZNYApWVCckgOftJLS=JA@mail.gmail.com>
 <25388.12448.706333.710321@stat.math.ethz.ch>
Message-ID: <CACCU-vNRvUZ0UnSqoaQ35ePePTEcQdX=HtnExUwhOaP5-OKXkA@mail.gmail.com>

Thank you Eric, Andrew, Rui and Martin for all your help and advice. I did
learn some good practices under the new R version!

Best,

Chao

On Thu, Sep 22, 2022 at 5:53 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Eric Berger
> >>>>>     on Wed, 21 Sep 2022 22:26:39 +0300 writes:
>
>     > In R 4.2.0 there is a significant change. When you use an if()
> statement
>     > with a condition of length > 1 this now reports an error.
>     > e.g. this link mentions it as a change
>     > https://www.jumpingrivers.com/blog/new-features-r420/
>
>     > In your case this is because class(obj) can return a character
> vector of
>     > length > 1 (all the classes).
>     > One possible workaround would be:
>
>     > if ( "matrix" %in% class(networks) ) ...
>
> Yes,  however, in general, the recommendation in the related R
> blog,
>
> would have been
>
>       if(inherits(networks, "matrix"))
>
> which I consider better *correctly readable* (and also expect
> to be more efficient).
>
> Lastly, in this special case, I'd try
>
>         if(is.matrix(networks))
>
> i.e., I'd try to see if the fast  is.matrix(.)  applies to your 'networks'
> (and I'm guessing "yes" with high confidence ..).
>
> Martin
>
>     > HTH,
>     > Eric
>
>
>     > On Wed, Sep 21, 2022 at 10:21 PM Chao Liu <psychaoliu at gmail.com>
> wrote:
>
>     >> Dear R-Help community,
>     >>
>     >> This is a crosspost on SO but I've had no luck so far. So I have a
> function
>     >> which computes a centrality index for the nodes in a network or
> matrix.
>     >> Here is the function:
>     >>
>     >> library(igraph) #load package igraph
>     >> centrality <- function (networks, type = c("indegree", "outdegree",
>     >> "freeman",
>     >> "betweenness", "flow", "closeness", "eigenvector", "information",
>     >> "load", "bonpow"), directed = TRUE, lag = 0, rescale = FALSE,
>     >> center = FALSE, coefname = NULL, ...) {
>     >> if (is.null(directed) || !is.logical(directed)) {
>     >> stop("'directed' must be TRUE or FALSE.")
>     >> }
>     >> else if (length(directed) != 1) {
>     >> stop("The 'directed' argument must contain a single logical
>     >> value only.")
>     >> }
>     >> else if (directed == FALSE) {
>     >> gmode <- "graph"
>     >> }
>     >> else {
>     >> gmode <- "digraph"
>     >> }
>     >> objects <- checkDataTypes(y = NULL, networks = networks,
>     >> lag = lag)
>     >> centlist <- list()
>     >> for (i in 1:objects$time.steps) {
>     >> if (type[1] == "indegree") {
>     >> cent <- degree(objects$networks[[i]], gmode = gmode,
>     >> cmode = "indegree", rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "outdegree") {
>     >> cent <- degree(objects$networks[[i]], gmode = gmode,
>     >> cmode = "outdegree", rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "freeman") {
>     >> cent <- degree(objects$networks[[i]], gmode = gmode,
>     >> cmode = "freeman", rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "betweenness") {
>     >> cent <- betweenness(objects$networks[[i]], gmode = gmode,
>     >> rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "flow") {
>     >> cent <- flowbet(objects$networks[[i]], gmode = gmode,
>     >> rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "closeness") {
>     >> cent <- closeness(objects$networks[[i]], gmode = gmode,
>     >> rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "eigenvector") {
>     >> cent <- evcent(objects$networks[[i]], gmode = gmode,
>     >> rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "information") {
>     >> cent <- infocent(objects$networks[[i]], gmode = gmode,
>     >> rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "load") {
>     >> cent <- loadcent(objects$networks[[i]], gmode = gmode,
>     >> rescale = rescale, ...)
>     >> }
>     >> else if (type[1] == "bonpow") {
>     >> cent <- bonpow(objects$networks[[i]], gmode = gmode,
>     >> rescale = rescale, tol = 1e-20, ...)
>     >> }
>     >> else {
>     >> stop("'type' argument was not recognized.")
>     >> }
>     >> centlist[[i]] <- cent
>     >> }
>     >> time <- numeric()
>     >> y <- numeric()
>     >> for (i in 1:objects$time.steps) {
>     >> time <- c(time, rep(i, objects$n[[i]]))
>     >> if (is.null(centlist[[i]])) {
>     >> y <- c(y, rep(NA, objects$n[[i]]))
>     >> }
>     >> else {
>     >> if (center == TRUE) {
>     >> centlist[[i]] <- centlist[[i]] - mean(centlist[[i]],
>     >> na.rm = TRUE)
>     >> }
>     >> y <- c(y, centlist[[i]])
>     >> }
>     >> }
>     >> if (is.null(coefname) || !is.character(coefname) ||
> length(coefname) >
>     >> 1) {
>     >> coeflabel <- ""
>     >> }
>     >> else {
>     >> coeflabel <- paste0(".", coefname)
>     >> }
>     >> if (lag == 0) {
>     >> laglabel <- ""
>     >> }
>     >> else {
>     >> laglabel <- paste0(".lag", paste(lag, collapse = "."))
>     >> }
>     >> label <- paste0(type[1], coeflabel, laglabel)
>     >> dat <- data.frame(y, time = time, node = objects$nodelabels)
>     >> dat$node <- as.character(dat$node)
>     >> colnames(dat)[1] <- label
>     >> attributes(dat)$lag <- lag
>     >> return(dat)}
>     >>
>     >> Here is the matrix:
>     >>
>     >> dat <- read.table(text="A B #this is edgelist
>     >> 1 2
>     >> 1 3
>     >> 1 2
>     >> 2 1
>     >> 2 3
>     >> 3 1
>     >> 3 2
>     >> 3 1", header=TRUE)
>     >> datmat <- as.matrix(get.adjacency(graph.edgelist(as.matrix(dat),
>     >> directed=TRUE))) #this is the matrix
>     >> colnames(datmat) <- c("1", "2", "3") #rename the columns
>     >>
>     >> When I applied the function to a matrix
>     >> centrality(datmat,type="flow",center=TRUE), it returns the error:
>     >>
>     >> Error in if (class(networks) == "matrix") { :
>     >> the condition has length > 1
>     >>
>     >> What is the cause of this error? How to fix it? Any help will be
> greatly
>     >> appreciated!
>     >>
>     >>
>     >> Best,
>     >>
>     >> Chao
>     >>
>     >> [[alternative HTML version deleted]]
>     >>
>     >> ______________________________________________
>     >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     >> https://stat.ethz.ch/mailman/listinfo/r-help
>     >> PLEASE do read the posting guide
>     >> http://www.R-project.org/posting-guide.html
>     >> and provide commented, minimal, self-contained, reproducible code.
>     >>
>
>     > [[alternative HTML version deleted]]
>
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Thu Sep 22 16:18:32 2022
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Thu, 22 Sep 2022 10:18:32 -0400
Subject: [R] Write text file in Fortran format
In-Reply-To: <CANTxAmK93J+a0A9c4ugehf7H6KbKw_5Z52=kxdmwhww7VASSXw@mail.gmail.com>
References: <CANTxAmLX1yhhC17b4pn+G-85A4pTGVV2K2qOxhGSSAFQOgCLPA@mail.gmail.com>
 <YysWSdDs2jdCQnk4@posteo.no>
 <CANTxAmKFMGAzYXGpyen9JDpMmxcXiyHc-mDnPOsCVUHBceGZow@mail.gmail.com>
 <CABcYAd+fuOyCcPGierBirNsZ8Tq0V6Z0-r+AOQ8Ck5iAgPkviA@mail.gmail.com>
 <CANTxAm+Un39LrKta57nO7M4LGYLQJw0Ck_W7sFj4_dyDYyXOxA@mail.gmail.com>
 <CANTxAmKFjQuNCu0jec_4A2S=-Gh-2CEtD+1P-6mne5hAXrroMA@mail.gmail.com>
 <d858293a-9f42-1379-d4f9-ef0195d67452@sapo.pt>
 <CANTxAmK93J+a0A9c4ugehf7H6KbKw_5Z52=kxdmwhww7VASSXw@mail.gmail.com>
Message-ID: <004601d8ce8e$328f0020$97ad0060$@gmail.com>

Javad,

After reading the exchanges, I conclude you are asking a somewhat different question than some of us expected and I see some have zoomed in on what you seem to want.

You seem to want to make a very focused change and save the results to be as identical as what you started with. You also note you really have no idea about 
the process that created the file or uses it so it is hard to know if just changing parts results in a valid file.

So maybe this looks like not one file but three files. You seem to have a header region of N lines you want kept intact but also placed in the output untouched. You seem to have a few lines at the end you also seem to want to leave untouched. You have lots of lines in the middle you want treated as if it contains multiple columns of data in some format that looks like it is whitespace-separated, or maybe tabs.

And I think you want to do this transformation perhaps only once so a general purpose solution is not required.

So how about you get your favorite text editor or tool and extract the first N lines from the file and place it in a file called HEADER. You may also then delete it from a copy of the original file if you wish.

Similarly, extract the last lines you want to keep from the file and place it in a file called FOOTER.

What is left behind in a copy of the file should then be something people here might easily work with. You can use one of many methods as you wish to read the data into some kind of data.frame and supply names for the columns and whatever. You can make your changes to what seems like one column. You can save the output conceptually to use the same format as the input and place it in a file called NEW_DATA.

Note no actual files are necessarily needed but conceptually you now have some text in places called HEADER, NEW_DATA and FOOTER and you can combine them carefully (as in no blank lines or two lines concatenated without a newline) and get a new output file that should look like the input.

If your data format in the middle section uses something like a tab, this should work. If it uses whitespace and perhaps a fixed-width per line, you have an issue to deal with if your changes need more room than is available or need adjustment to calculate how many spaces to remove or add to center or line up the columns visible.

I will end by saying some others have offered variations that are probably just as reasonable. The problem is we may suggest you skip the first lines and it turns out you want to preserve them. Most R functions and packages I know about have no interest in preserving what effectively are often just comments but it seems easy enough to do. Your lines at the end are a bigger problem if you use standard commands to read in the data BECAUSE many such programs do a look-ahead at perhaps the first thousand lines to try to determine the number of columns and the type of each. Your extra lines at the end may perturb that and there may be weird results in your data at the end or even things like an integer column being considered to be character.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of javad bayat
Sent: Thursday, September 22, 2022 6:35 AM
To: Rui Barradas <ruipbarradas at sapo.pt>
Cc: R-help at r-project.org
Subject: Re: [R] Write text file in Fortran format

These 2 lines were at the end of the text file, which I have attached but I had removed them to read the text file in R.
Just like the first 8 line that start with asterisk (*).






On Thu, 22 Sep 2022, 12:21 Rui Barradas, <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Are those lines at the begining of the file?
>
> Rui Barradas
>
> ?s 06:44 de 22/09/2022, javad bayat escreveu:
> > Dear all; Many thanks for your useful comments and codes.
> > I tried both Rui's and Jim's codes.
> > Jim's codes gave an error as below:
> > "Error in substr(inputline, 1, begincol3 - 1) :
> >    object 'inputline' not found"
> > I don't know what's wrong.
> > The Rui's codes worked correctly for the attached file. But I have 
> > edited that file and removed 2 last lines from the file because I 
> > could not read it into R.
> > These 2 lines were:
> > "
> > ** CONCUNIT ug/m^3
> > ** DEPUNIT g/m^2
> > "
> > When I tried to run the code for my file that has these 2 lines at 
> > the
> end,
> > it gave me this error:
> > "
> >> df1 <- read.table(text = txt_table)
> > Error in read.table(text = txt_table) : no lines available in input 
> > "
> > The codes before the "df1 <- read.table(text = txt_table)" were run 
> > correctly.
> > Sincerely
> >
> >
> >
> > On Thu, Sep 22, 2022 at 6:58 AM javad bayat <j.bayat194 at gmail.com>
> wrote:
> >
> >> Dear all;
> >> I apologise, I didn't know that I have to cc the list.
> >> Thank you Mr Rui for reminding me.
> >> Let me clarify more.
> >> I have no knowledge of the FORTRAN language. The text file that has 
> >> been attached is a model's output file and I know that the format 
> >> is in
> FORTRAN.
> >> I want to write a text file exactly similar to the attached text 
> >> file
> using
> >> R programming.
> >> The steps below explain my goal:
> >> 1- Read the text file without the first 8 and last 2 rows as a
> dataframe.
> >> Maybe I have removed the last 2 lines, but at the end it had 2 
> >> lines similar the first 8 lines which starts with asterisk.
> >> 2- Double the 3rd column values (or multiply by specific number).
> >> 3- Insert the removed first 8 lines of the original text file as 
> >> header
> in
> >> the dataframe.
> >> 4- Insert the removed last 2 lines of the original text file at the 
> >> end
> of
> >> dataframe.
> >> 5- Write the dataframe as a new text file exactly similar to the
> original
> >> text file.
> >>
> >> I have used excel but when I save it as text file, the format 
> >> changes
> and
> >> is not similar to the attached text file.
> >> I will try all your codes in a few hours, cause I am out of office.
> >> Sincerely yours.
> >>
> >>
> >>
> >> On Thu, 22 Sep 2022, 04:20 Richard O'Keefe, <raoknz at gmail.com> wrote:
> >>
> >>> Oh, so you want to WRITE a file *like* that.
> >>> Use ?sprintf.
> >>> (3(1X,F13.5),3(1X,F8.2),3X,A5,2X,A8,2X,A5,5X,A8,2X,I8)
> >>>
> >>> Fortran sprintf
> >>> 1X      a space
> >>> 3X      3 spaces
> >>> F13.5   %13.5f
> >>> F8.2    %8.2f
> >>> A5      %5s
> >>> A8      %8s
> >>> I8      %8d
> >>> 3(...)  the translation of ... written 3 times
> >>>
> >>> We can simplify 1X,F13.5 to F14.5
> >>> Here's the sprintf() equivalent of the Fortran format, except 
> >>> you'll need to change the dots to spaces.
> >>>
> >>> "%14.5f%14.5f%14.5f%9.2f%9.2f%9.2f...%5s..%8s..%5s.....%8s%10d\n
> >>>
> >>> On Thu, 22 Sept 2022 at 04:17, javad bayat <j.bayat194 at gmail.com>
> wrote:
> >>>
> >>>> Dear Rasmus;
> >>>> I have no knowledge of the FORTRAN language. The text file that 
> >>>> has
> been
> >>>> attached is a model's output file and I know that the format is 
> >>>> in FORTRAN.
> >>>> I want to write a text file exactly similar to the attached text 
> >>>> file using R programming.
> >>>> The steps below explain my goal:
> >>>> 1- Read the text file without the first 8 and last 2 rows as a
> dataframe.
> >>>> 2- Double the 3rd column values (or multiply by specific number).
> >>>> 3- Insert the removed first 8 rows of the original text file as
> header in
> >>>> the dataframe.
> >>>> 4- Insert the removed last 2 rows of the original text file at 
> >>>> the
> end of
> >>>> dataframe.
> >>>> 5- Write the dataframe as a new text file exactly similar to the
> original
> >>>> text file.
> >>>>
> >>>> I have used excel but when I save it as text file, the format 
> >>>> changes
> and
> >>>> is not similar to the attached text file.
> >>>> Sincerely
> >>>>
> >>>> On Wed, 21 Sep 2022, 18:17 Rasmus Liland, <jral at posteo.no> wrote:
> >>>>
> >>>>> Dear Javad,
> >>>>>
> >>>>> Perhaps you were looking to read the table in Air.txt (is this 
> >>>>> Fortran
> >>>>> format?) into R?
> >>>>>
> >>>>>          b <- readLines("Air.txt")  # The text MIME attachment
> w/Mailman
> >>>>> footer ...
> >>>>>          b <- b[1:(which(b=="")-1)]  # Remove the odd Mailman 
> >>>>> footer
> (at
> >>>>> end of df)
> >>>>>          idx <- max(grep("^\\*", b))+1  # Start of df after 
> >>>>> header
> uline
> >>>>>          header <- tolower(strsplit(gsub("  +", "_", gsub("\\*", 
> >>>>> "", b[idx-2])), "_")[[1]])
> >>>>>          b <- read.table(text=b[-(1:idx)], header=F)
> >>>>>          colnames(b) <- header[header!=""]
> >>>>>          b <- b[,sapply(b, \(i) length(unique(i)))>1]  # Remove
> constant
> >>>>> cols
> >>>>>
> >>>>> str(b)
> >>>>>
> >>>>>          'data.frame':   31324 obs. of  6 variables:
> >>>>>           $ x           : num  583500 584000 584500 585000 585500 ...
> >>>>>           $ y           : num  3018700 3018700 3018700 3018700
> 3018700
> >>>> ...
> >>>>>           $ average conc: num  32.8 33.1 33.4 33.5 33.6 ...
> >>>>>           $ zelev       : num  0 0 0 0 0 0 0 0 0 0 ...
> >>>>>           $ zhill       : num  0 0 0 0 0 0 0 0 0 0 ...
> >>>>>           $ date(conc)  : int  16101706 16101706 16101706 
> >>>>> 16101706
> >>>> 16101706
> >>>>> ...
> >>>>>
> >>>>> Best,
> >>>>> Rasmus
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, 
> >>>>> see https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide 
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>>
> >>>>
> >>>>          [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>
> >
>

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From d|pgnu @end|ng |rom gm@||@com  Thu Sep 22 21:40:33 2022
From: d|pgnu @end|ng |rom gm@||@com (DFP)
Date: Thu, 22 Sep 2022 15:40:33 -0400
Subject: [R] Need help plotting
Message-ID: <619e36e4-c675-a5e3-e9cd-0b189a44a28f@comcast.net>

I'm trying to do as you suggest, but I'm not understanding what I need 
to do.? I asked what the line pivot_longer(-time, names_to = "y1") would 
do if applied to this df:

 > tst
 ??? time y1 y2
1? 18:55 30 19
2? 18:56 30 19
3? 18:57 29 19
4? 18:58 31 19
5? 18:59 28 19
6? 19:00 28 19
7? 19:01 28 19
8? 19:02 28 19
9? 19:03 28 19
10 19:04 28 19
11 19:05 29 19

I tried to run these lines and then look at tst, but this is what I get:

 > tst %>%
+??? mutate(time = paste(Sys.Date(), time),
+????????????????? time = as.POSIXct(time)) %>%
+??? select(time, y1,y2) %>%
+??? # reshape to long format
+??? pivot_longer(-time, names_to = "y1")
Error in tst %>% mutate(time = paste(Sys.Date(), time), time = 
as.POSIXct(time)) %>%? :
 ? could not find function "%>%"

How can I learn what the pivot_longer has done to tst?

Darn it--Now I try to run the whole sequence that Rui suggested--it 
worked before--and now I get this:

 > tst %>%
+??? mutate(time = paste(Sys.Date(), time),
+????????????????? time = as.POSIXct(time)) %>%
+??? select(time, y1,y2) %>%
+??? # reshape to long format
+??? pivot_longer(-time, names_to = "y1") %>%
+??? # now plot
+??? ggplot(aes(time, value, color = y1)) +
+??? geom_line() +
+??? geom_point() +
+??? scale_color_manual(values = c("orange", "skyblue")) +
+??? # make datetime labels
+??? scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
+??? theme_bw()
Error in tst %>% mutate(time = paste(Sys.Date(), time), time = 
as.POSIXct(time)) %>%? :
 ? could not find function "%>%"
 >

What should I try next?


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Sep 22 23:04:00 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 22 Sep 2022 22:04:00 +0100
Subject: [R] Need help plotting
In-Reply-To: <619e36e4-c675-a5e3-e9cd-0b189a44a28f@comcast.net>
References: <619e36e4-c675-a5e3-e9cd-0b189a44a28f@comcast.net>
Message-ID: <a591c65f-7971-6fdd-6a2b-3873caf09c12@sapo.pt>

Hello,

You have to load the packages involved:


library(dplyr)
library(tidyr)
library(ggplot2)


then run the full sequence. Though this is not important, if you are 
pivotting columnns named y1 and y2, why not name the result just y?


pivot_longer(-time, names_to = "y")


And here is complete code, runs in a fresh R session.


tst  <- read.table(text = "
time y1 y2
1  18:55 30 19
2  18:56 30 19
3  18:57 29 19
4  18:58 31 19
5  18:59 28 19
6  19:00 28 19
7  19:01 28 19
8  19:02 28 19
9  19:03 28 19
10 19:04 28 19
11 19:05 29 19
", header = TRUE)

library(dplyr)
library(tidyr)
library(ggplot2)

tst %>%
   mutate(time = paste(Sys.Date(), time),
          time = as.POSIXct(time)) %>%
   select(time, y1, y2) %>%
   # reshape to long format
   pivot_longer(-time, names_to = "y") %>%
   # now plot
   ggplot(aes(time, value, color = y)) +
   geom_line() +
   geom_point() +
   scale_color_manual(values = c("orange", "skyblue")) +
   # make datetime labels
   scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
   theme_bw()


Hope this helps,

Rui Barradas

?s 20:40 de 22/09/2022, DFP escreveu:
> I'm trying to do as you suggest, but I'm not understanding what I need 
> to do.? I asked what the line pivot_longer(-time, names_to = "y1") would 
> do if applied to this df:
> 
>  > tst
>  ??? time y1 y2
> 1? 18:55 30 19
> 2? 18:56 30 19
> 3? 18:57 29 19
> 4? 18:58 31 19
> 5? 18:59 28 19
> 6? 19:00 28 19
> 7? 19:01 28 19
> 8? 19:02 28 19
> 9? 19:03 28 19
> 10 19:04 28 19
> 11 19:05 29 19
> 
> I tried to run these lines and then look at tst, but this is what I get:
> 
>  > tst %>%
> +??? mutate(time = paste(Sys.Date(), time),
> +????????????????? time = as.POSIXct(time)) %>%
> +??? select(time, y1,y2) %>%
> +??? # reshape to long format
> +??? pivot_longer(-time, names_to = "y1")
> Error in tst %>% mutate(time = paste(Sys.Date(), time), time = 
> as.POSIXct(time)) %>%? :
>  ? could not find function "%>%"
> 
> How can I learn what the pivot_longer has done to tst?
> 
> Darn it--Now I try to run the whole sequence that Rui suggested--it 
> worked before--and now I get this:
> 
>  > tst %>%
> +??? mutate(time = paste(Sys.Date(), time),
> +????????????????? time = as.POSIXct(time)) %>%
> +??? select(time, y1,y2) %>%
> +??? # reshape to long format
> +??? pivot_longer(-time, names_to = "y1") %>%
> +??? # now plot
> +??? ggplot(aes(time, value, color = y1)) +
> +??? geom_line() +
> +??? geom_point() +
> +??? scale_color_manual(values = c("orange", "skyblue")) +
> +??? # make datetime labels
> +??? scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
> +??? theme_bw()
> Error in tst %>% mutate(time = paste(Sys.Date(), time), time = 
> as.POSIXct(time)) %>%? :
>  ? could not find function "%>%"
>  >
> 
> What should I try next?
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Sep 22 23:17:05 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 22 Sep 2022 22:17:05 +0100
Subject: [R] Need help plotting
In-Reply-To: <7f5e74cf-7d84-4976-5e94-af7cb0b053b5@comcast.net>
References: <7f5e74cf-7d84-4976-5e94-af7cb0b053b5@comcast.net>
Message-ID: <7ff9145f-88e6-4139-da43-d69447f4237b@sapo.pt>

No you don't! I do!
I don't have tst on my system.

Rui Barradas

?s 22:11 de 22/09/2022, DFP escreveu:
> Do I need that read.table if the tst dataframe already exists in my 
> system?? If so, why?
> 
> --------------------------------------------------
> 
> Hello,
> 
> You have to load the packages involved:
> 
> 
> library(dplyr)
> library(tidyr)
> library(ggplot2)
> 
> 
> then run the full sequence. Though this is not important, if you are
> pivotting columnns named y1 and y2, why not name the result just y?
> 
> 
> pivot_longer(-time, names_to = "y")
> 
> 
> And here is complete code, runs in a fresh R session.
> 
> 
> tst? <- read.table(text = "
> time y1 y2
> 1? 18:55 30 19
> 2? 18:56 30 19
> 3? 18:57 29 19
> 4? 18:58 31 19
> 5? 18:59 28 19
> 6? 19:00 28 19
> 7? 19:01 28 19
> 8? 19:02 28 19
> 9? 19:03 28 19
> 10 19:04 28 19
> 11 19:05 29 19
> ", header = TRUE)
> 
> library(dplyr)
> library(tidyr)
> library(ggplot2)
> 
> tst %>%
>  ?? mutate(time = paste(Sys.Date(), time),
>  ????????? time = as.POSIXct(time)) %>%
>  ?? select(time, y1, y2) %>%
>  ?? # reshape to long format
>  ?? pivot_longer(-time, names_to = "y") %>%
>  ?? # now plot
>  ?? ggplot(aes(time, value, color = y)) +
>  ?? geom_line() +
>  ?? geom_point() +
>  ?? scale_color_manual(values = c("orange", "skyblue")) +
>  ?? # make datetime labels
>  ?? scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
>  ?? theme_bw()
> 
> 
> Hope this helps,
> 
> Rui Barradas
>


From d|pgnu @end|ng |rom gm@||@com  Fri Sep 23 02:43:43 2022
From: d|pgnu @end|ng |rom gm@||@com (DFP)
Date: Thu, 22 Sep 2022 20:43:43 -0400
Subject: [R] Need help plotting
Message-ID: <ed8df2a1-9e83-da6e-25e9-ffccfd583b9f@comcast.net>

That worked, and helped my understanding.? Thank you.

----------------------------------------

Hello,

You have to load the packages involved:


library(dplyr)
library(tidyr)
library(ggplot2)


then run the full sequence. Though this is not important, if you are
pivotting columnns named y1 and y2, why not name the result just y?


pivot_longer(-time, names_to = "y")


And here is complete code, runs in a fresh R session.


tst? <- read.table(text = "
time y1 y2
1? 18:55 30 19
2? 18:56 30 19
3? 18:57 29 19
4? 18:58 31 19
5? 18:59 28 19
6? 19:00 28 19
7? 19:01 28 19
8? 19:02 28 19
9? 19:03 28 19
10 19:04 28 19
11 19:05 29 19
", header = TRUE)

library(dplyr)
library(tidyr)
library(ggplot2)

tst %>%
 ?? mutate(time = paste(Sys.Date(), time),
 ????????? time = as.POSIXct(time)) %>%
 ?? select(time, y1, y2) %>%
 ?? # reshape to long format
 ?? pivot_longer(-time, names_to = "y") %>%
 ?? # now plot
 ?? ggplot(aes(time, value, color = y)) +
 ?? geom_line() +
 ?? geom_point() +
 ?? scale_color_manual(values = c("orange", "skyblue")) +
 ?? # make datetime labels
 ?? scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
 ?? theme_bw()


Hope this helps,

Rui Barradas

	[[alternative HTML version deleted]]


From @h@rt @end|ng |rom d|m@uch||e@c|  Thu Sep 22 23:08:30 2022
From: @h@rt @end|ng |rom d|m@uch||e@c| (Andrew Hart)
Date: Thu, 22 Sep 2022 18:08:30 -0300
Subject: [R] [Rd] Problem with accessibility in R 4.2.0 and 4.2.1.
In-Reply-To: <CALK03d36eK=VtUPPTTS1O5ch7dL+y2nKQvwdvAHkz5XL23vu9Q@mail.gmail.com>
References: <88b4bd63-0ec3-626b-1fa3-148f1419a8a3@dim.uchile.cl>
 <0836b27f-99cf-ef24-fa31-3f4af75f276d@gmail.com>
 <CALK03d36eK=VtUPPTTS1O5ch7dL+y2nKQvwdvAHkz5XL23vu9Q@mail.gmail.com>
Message-ID: <8130f913-0606-810e-9b8e-190bf9495613@dim.uchile.cl>

On 22/09/2022 16:42, Toby Hocking wrote:
> Another option is to use https://emacspeak.sourceforge.net/ 
> <https://emacspeak.sourceforge.net/> (version of emacs editor/ide which 
> can speak letters/words/lines -- has a blind maintainer) with 
> https://ess.r-project.org/ <https://ess.r-project.org/> (interface for 
> editing and running R code from within emacs)

Thanks everyone for all the suggestions. Of course, the optimal solution 
would be to figure out what is going on in Rgui, but, as is always the 
case, the blind user use case is a fairly niche one. I appreciate all 
the suggestions for finding an immediate solution to my problem.
I don't use any kind of IDE for working with R since I simply haven't 
found one that is accessible or that i understand how to use. There is a 
plug-in for the Eclipse IDE I installed a few years ago, but I didn't 
understand the first thing about how it was to be used. So I've just 
always worked with an editor open in one Window and R in another,
working interactively in R or bouncing over to the editor for more 
complex things and sourcing code into R as necessary. However, I only 
use the R console in Rgui. I went and had a look at Rterm, which I have 
never used on Windows; I've only ever used it when ssh-ing into Linux 
systems to use R. However, I've just found out that Rterm does a number 
of fairly important things that probably mean I can just use it instead 
of Rgui:
1. You can paste from the clipboard into the Rterm prompt;
2. It has a command history;
3. If you plot something, it opens a Window to draw the plot (I never 
realised it could do this and had always assumed Rgui was needed for 
this); and
4. It opens the HTML help if you ask for help on windows. I only ever 
saw it display text help on Linux, but I was logged in remotely. 
Text-based help is fine when ssh-ing into a machine, but HTML help is 
much nicer to read and navigate.

I think I'll just switch over to Rterm for a while, but I can also check 
out ess, which I wasn't aware of.

Thanks a lot,
Andrew.


From d|pgnu @end|ng |rom gm@||@com  Thu Sep 22 23:11:09 2022
From: d|pgnu @end|ng |rom gm@||@com (DFP)
Date: Thu, 22 Sep 2022 17:11:09 -0400
Subject: [R] Need help plotting
Message-ID: <7f5e74cf-7d84-4976-5e94-af7cb0b053b5@comcast.net>

Do I need that read.table if the tst dataframe already exists in my 
system?? If so, why?

--------------------------------------------------

Hello,

You have to load the packages involved:


library(dplyr)
library(tidyr)
library(ggplot2)


then run the full sequence. Though this is not important, if you are
pivotting columnns named y1 and y2, why not name the result just y?


pivot_longer(-time, names_to = "y")


And here is complete code, runs in a fresh R session.


tst? <- read.table(text = "
time y1 y2
1? 18:55 30 19
2? 18:56 30 19
3? 18:57 29 19
4? 18:58 31 19
5? 18:59 28 19
6? 19:00 28 19
7? 19:01 28 19
8? 19:02 28 19
9? 19:03 28 19
10 19:04 28 19
11 19:05 29 19
", header = TRUE)

library(dplyr)
library(tidyr)
library(ggplot2)

tst %>%
 ?? mutate(time = paste(Sys.Date(), time),
 ????????? time = as.POSIXct(time)) %>%
 ?? select(time, y1, y2) %>%
 ?? # reshape to long format
 ?? pivot_longer(-time, names_to = "y") %>%
 ?? # now plot
 ?? ggplot(aes(time, value, color = y)) +
 ?? geom_line() +
 ?? geom_point() +
 ?? scale_color_manual(values = c("orange", "skyblue")) +
 ?? # make datetime labels
 ?? scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
 ?? theme_bw()


Hope this helps,

Rui Barradas

	[[alternative HTML version deleted]]


From de@@yebe|@y @end|ng |rom out|ook@com  Fri Sep 23 09:35:25 2022
From: de@@yebe|@y @end|ng |rom out|ook@com (Dessye Belay)
Date: Fri, 23 Sep 2022 07:35:25 +0000
Subject: [R] Arguments to utils:::menuInstallPkgs
Message-ID: <GV1P194MB17646F029DC8348F81C9B95CB2519@GV1P194MB1764.EURP194.PROD.OUTLOOK.COM>



Sent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10


	[[alternative HTML version deleted]]


From @h@rt @end|ng |rom d|m@uch||e@c|  Fri Sep 23 16:01:12 2022
From: @h@rt @end|ng |rom d|m@uch||e@c| (Andrew Hart)
Date: Fri, 23 Sep 2022 11:01:12 -0300
Subject: [R] How to set default encoding for sourced files
In-Reply-To: <CAPcHnpTMzvqb=7o4Qhgm_+-Lo5aSM--bZPpyLQj7g25j22-EdQ@mail.gmail.com>
References: <55104fd6-0da5-4c2b-6cca-16ccc4460028@dim.uchile.cl>
 <CAGxFJbTPaKW16=EujZxeWa1xc54C_eD-EPE87DAOb3En04WdRg@mail.gmail.com>
 <266797ae-62f4-c894-4ab4-4e875128d514@dim.uchile.cl>
 <CAPcHnpTMzvqb=7o4Qhgm_+-Lo5aSM--bZPpyLQj7g25j22-EdQ@mail.gmail.com>
Message-ID: <816e0013-802f-ebfa-2fc0-d5538afa5ded@dim.uchile.cl>

Thanks. The --encoding option indeed makes it all work. Rscript --help 
does not show the --encoding option in the list of options.

And yes, you are right. I was using R 4.1.2 when I first wrote to the 
list. I was experiencing a technical  issue with R 4.2.1 which was 
preventing me from switching over to it but I have a satisfactory 
solution to the problem now and have just moved to R 4.2.1. It seems 
that, on Windows at least, R 4.2.1 does indeed use utf-8 as its native 
encoding. I didn't realise this. At any rate, it looks like merely 
upgrading solves my encoding concerns without the need to set options or 
specify the encoding with Rscript. Very nice and kudos to the R 
developers for taking the leap!

Thanks everyone for your help.

Cheers,
Andrew.


On 21/09/2022 16:40, Andrew Simmons wrote:
> If you're running it from Rscript, you'll have to specify the encoding 
> like this:
> 
> Rscript --encoding UTF-8 file
> 
> If you're using R for Windows, I'm surprised this issue would come up 
> since R 4.2.0 added support for UTF-8. At least on my own Windows 
> machine, I can run exactly what you wrote and not have any issues. Are 
> you using an older version of R?
> 
> 
> On Wed., Sep. 21, 2022, 14:20 Andrew Hart via R-help, 
> <r-help at r-project.org <mailto:r-help at r-project.org>> wrote:
> 
>     On 21/09/2022 11:46, Bert Gunter wrote:
>      > ?options
>      >
>      > options(encoding = "utf-8")
>      > in a startup file or function should presumably do it. See ?Startup
>      >
>      > Bert
> 
>     Thanks everyone. Setting encoding in options in Rprofile.site has taken
>     care of it.
> 
>     Curiously, it doesn't seem to solve the whole problem for Rscript
>     though. I checked that Rscript is indeed picking up the default
>     encoding
>     from options, but it's complaining about seeing an unexpected input in
>     dat$l?nea <- ....
>     immediately following the l when I run
>     Rscript myfile.R.
>     So, it would appear that Rscript is not using source to read in the R
>     script. Mind you, if I do
>     Rscript -e source('myfile.R')
>     it works properly just like in Rgui.
> 
>     Once again, Thanks heaps.
> 
>     Cheers,
>     Andrew.
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>


From drj|m|emon @end|ng |rom gm@||@com  Fri Sep 23 23:53:19 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 24 Sep 2022 07:53:19 +1000
Subject: [R] Need help plotting
In-Reply-To: <7f5e74cf-7d84-4976-5e94-af7cb0b053b5@comcast.net>
References: <7f5e74cf-7d84-4976-5e94-af7cb0b053b5@comcast.net>
Message-ID: <CA+8X3fU3dY8jnp6uwcTawg0yuwVSaYCkWpAZTHKeYt5bF6Xi2w@mail.gmail.com>

Hi David,
No, read.table converts a text representation of data into a data frame object.

Jim

On Sat, Sep 24, 2022 at 2:29 AM DFP <dfpgnu at gmail.com> wrote:
>
> Do I need that read.table if the tst dataframe already exists in my
> system?  If so, why?
>
> --------------------------------------------------
>
> Hello,
>
> You have to load the packages involved:
>
>
> library(dplyr)
> library(tidyr)
> library(ggplot2)
>
>
> then run the full sequence. Though this is not important, if you are
> pivotting columnns named y1 and y2, why not name the result just y?
>
>
> pivot_longer(-time, names_to = "y")
>
>
> And here is complete code, runs in a fresh R session.
>
>
> tst  <- read.table(text = "
> time y1 y2
> 1  18:55 30 19
> 2  18:56 30 19
> 3  18:57 29 19
> 4  18:58 31 19
> 5  18:59 28 19
> 6  19:00 28 19
> 7  19:01 28 19
> 8  19:02 28 19
> 9  19:03 28 19
> 10 19:04 28 19
> 11 19:05 29 19
> ", header = TRUE)
>
> library(dplyr)
> library(tidyr)
> library(ggplot2)
>
> tst %>%
>     mutate(time = paste(Sys.Date(), time),
>            time = as.POSIXct(time)) %>%
>     select(time, y1, y2) %>%
>     # reshape to long format
>     pivot_longer(-time, names_to = "y") %>%
>     # now plot
>     ggplot(aes(time, value, color = y)) +
>     geom_line() +
>     geom_point() +
>     scale_color_manual(values = c("orange", "skyblue")) +
>     # make datetime labels
>     scale_x_datetime(date_breaks = "1 mins", date_labels = "%H:%M") +
>     theme_bw()
>
>
> Hope this helps,
>
> Rui Barradas
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat Sep 24 07:45:04 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 24 Sep 2022 07:45:04 +0200
Subject: [R] [Rd] Problem with accessibility in R 4.2.0 and 4.2.1.
In-Reply-To: <8130f913-0606-810e-9b8e-190bf9495613@dim.uchile.cl>
References: <88b4bd63-0ec3-626b-1fa3-148f1419a8a3@dim.uchile.cl>
 <0836b27f-99cf-ef24-fa31-3f4af75f276d@gmail.com>
 <CALK03d36eK=VtUPPTTS1O5ch7dL+y2nKQvwdvAHkz5XL23vu9Q@mail.gmail.com>
 <8130f913-0606-810e-9b8e-190bf9495613@dim.uchile.cl>
Message-ID: <15885ddc-ac08-a499-1617-0f159dc1347d@statistik.tu-dortmund.de>

Note that the issues with the Rscript editor have been fixed in 
R-patched and R-devel.

Best,
Uwe Ligges


On 22.09.2022 23:08, Andrew Hart via R-help wrote:
> On 22/09/2022 16:42, Toby Hocking wrote:
>> Another option is to use https://emacspeak.sourceforge.net/ 
>> <https://emacspeak.sourceforge.net/> (version of emacs editor/ide 
>> which can speak letters/words/lines -- has a blind maintainer) with 
>> https://ess.r-project.org/ <https://ess.r-project.org/> (interface for 
>> editing and running R code from within emacs)
> 
> Thanks everyone for all the suggestions. Of course, the optimal solution 
> would be to figure out what is going on in Rgui, but, as is always the 
> case, the blind user use case is a fairly niche one. I appreciate all 
> the suggestions for finding an immediate solution to my problem.
> I don't use any kind of IDE for working with R since I simply haven't 
> found one that is accessible or that i understand how to use. There is a 
> plug-in for the Eclipse IDE I installed a few years ago, but I didn't 
> understand the first thing about how it was to be used. So I've just 
> always worked with an editor open in one Window and R in another,
> working interactively in R or bouncing over to the editor for more 
> complex things and sourcing code into R as necessary. However, I only 
> use the R console in Rgui. I went and had a look at Rterm, which I have 
> never used on Windows; I've only ever used it when ssh-ing into Linux 
> systems to use R. However, I've just found out that Rterm does a number 
> of fairly important things that probably mean I can just use it instead 
> of Rgui:
> 1. You can paste from the clipboard into the Rterm prompt;
> 2. It has a command history;
> 3. If you plot something, it opens a Window to draw the plot (I never 
> realised it could do this and had always assumed Rgui was needed for 
> this); and
> 4. It opens the HTML help if you ask for help on windows. I only ever 
> saw it display text help on Linux, but I was logged in remotely. 
> Text-based help is fine when ssh-ing into a machine, but HTML help is 
> much nicer to read and navigate.
> 
> I think I'll just switch over to Rterm for a while, but I can also check 
> out ess, which I wasn't aware of.
> 
> Thanks a lot,
> Andrew.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From b@rry@k|ng @end|ng |rom q|x@com  Sun Sep 25 02:29:10 2022
From: b@rry@k|ng @end|ng |rom q|x@com (Barry King)
Date: Sat, 24 Sep 2022 20:29:10 -0400
Subject: [R] Solve equality function with GA
Message-ID: <CAP8WkrykVmkcct3z__PLop=HV5MZ03-zck82fRrAiT7C1XHcSg@mail.gmail.com>

I am having difficulty solving for 5 in this coded snippet. Please help.
-------------------
library(GA)

# Solve for x where x^2 = 25, not x^2 <= 25

f <- function(x)
{
  x^2-25
}

fitness <- function(x) -f(x)

GA <- GA <- ga(type = "real-valued", fitness = fitness, lower = 0, upper =
10)
summary(GA)
-------------------------
Thank you,
Barry King

-- 






This message is for the intended recipient only and may contain
confidential and privileged information. If you are not the intended
recipient, please return this message to the sender and delete this message
and any attachments from your computer.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Sep 25 03:51:38 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 24 Sep 2022 18:51:38 -0700
Subject: [R] Solve equality function with GA
In-Reply-To: <CAP8WkrykVmkcct3z__PLop=HV5MZ03-zck82fRrAiT7C1XHcSg@mail.gmail.com>
References: <CAP8WkrykVmkcct3z__PLop=HV5MZ03-zck82fRrAiT7C1XHcSg@mail.gmail.com>
Message-ID: <CAGxFJbRENrTzL7seuPtWuFJAAj=AkxADrAG+cdDQnvJotC3GEg@mail.gmail.com>

We aren't supposed to do homework on this list.

Bert Gunter

On Sat, Sep 24, 2022 at 5:29 PM Barry King via R-help <r-help at r-project.org>
wrote:

> I am having difficulty solving for 5 in this coded snippet. Please help.
> -------------------
> library(GA)
>
> # Solve for x where x^2 = 25, not x^2 <= 25
>
> f <- function(x)
> {
>   x^2-25
> }
>
> fitness <- function(x) -f(x)
>
> GA <- GA <- ga(type = "real-valued", fitness = fitness, lower = 0, upper =
> 10)
> summary(GA)
> -------------------------
> Thank you,
> Barry King
>
> --
>
>
>
>
>
>
> This message is for the intended recipient only and may contain
> confidential and privileged information. If you are not the intended
> recipient, please return this message to the sender and delete this message
> and any attachments from your computer.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Sun Sep 25 10:43:37 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sun, 25 Sep 2022 11:43:37 +0300
Subject: [R] Solve equality function with GA
In-Reply-To: <CAGxFJbRENrTzL7seuPtWuFJAAj=AkxADrAG+cdDQnvJotC3GEg@mail.gmail.com>
References: <CAP8WkrykVmkcct3z__PLop=HV5MZ03-zck82fRrAiT7C1XHcSg@mail.gmail.com>
 <CAGxFJbRENrTzL7seuPtWuFJAAj=AkxADrAG+cdDQnvJotC3GEg@mail.gmail.com>
Message-ID: <CAGgJW75WFT-qHopcqPhPKp+e-bFMAYvzrPMbqQ6xk5=1ebLmtg@mail.gmail.com>

?ga states that ga() searches for the maximum of the fitness function.
The maximum of your fitness function is at x=0.



On Sun, Sep 25, 2022 at 4:52 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> We aren't supposed to do homework on this list.
>
> Bert Gunter
>
> On Sat, Sep 24, 2022 at 5:29 PM Barry King via R-help <
> r-help at r-project.org>
> wrote:
>
> > I am having difficulty solving for 5 in this coded snippet. Please help.
> > -------------------
> > library(GA)
> >
> > # Solve for x where x^2 = 25, not x^2 <= 25
> >
> > f <- function(x)
> > {
> >   x^2-25
> > }
> >
> > fitness <- function(x) -f(x)
> >
> > GA <- GA <- ga(type = "real-valued", fitness = fitness, lower = 0, upper
> =
> > 10)
> > summary(GA)
> > -------------------------
> > Thank you,
> > Barry King
> >
> > --
> >
> >
> >
> >
> >
> >
> > This message is for the intended recipient only and may contain
> > confidential and privileged information. If you are not the intended
> > recipient, please return this message to the sender and delete this
> message
> > and any attachments from your computer.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Sun Sep 25 10:53:39 2022
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sun, 25 Sep 2022 09:53:39 +0100
Subject: [R] reading text files directly into program from net
Message-ID: <CABxY9BMgDOWNfMk3-xy+5qY8oMZoYJ_SHLiTAJnT8t=8TgzzaQ@mail.gmail.com>

Hello   I am working with daily rainfall data for the UK from 1915 onwards
from the Met Office.  The data is on this site:

https://data.ceda.ac.uk/badc/ukmo-midas-open/data/uk-daily-rain-obs/dataset-version-201901

There are many files for the different counties.  For example there are
seven station files for Berwickshire in this site:

https://data.ceda.ac.uk/badc/ukmo-midas-open/data/uk-daily-rain-obs/dataset-version-201901/berwickshire


The first station in this dataset
 has the name  00265_mertoun
<https://data.ceda.ac.uk/badc/ukmo-midas-open/data/uk-daily-rain-obs/dataset-version-201901/berwickshire/00265_mertoun>
which
is a code and location name, again for example, and inside is a text file

It's easy but time-consuming to download the files one by one - I am sure
that it is possible to read them directly into an R program but whatever
coding or path I try to use I get an error.  I can't find an example online
which I can tweak to allow me to do this.

can anyone help?  Thanks Nick Wray

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Sep 25 11:08:41 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 25 Sep 2022 12:08:41 +0300
Subject: [R] reading text files directly into program from net
In-Reply-To: <CABxY9BMgDOWNfMk3-xy+5qY8oMZoYJ_SHLiTAJnT8t=8TgzzaQ@mail.gmail.com>
References: <CABxY9BMgDOWNfMk3-xy+5qY8oMZoYJ_SHLiTAJnT8t=8TgzzaQ@mail.gmail.com>
Message-ID: <20220925120841.54b15257@Tarkus>

On Sun, 25 Sep 2022 09:53:39 +0100
Nick Wray <nickmwray at gmail.com> wrote:

> The first station in this dataset has the name  00265_mertoun
> <https://data.ceda.ac.uk/badc/ukmo-midas-open/data/uk-daily-rain-obs/dataset-version-201901/berwickshire/00265_mertoun>
> which is a code and location name, again for example, and inside is a
> text file

Following the link to the file
<https://dap.ceda.ac.uk/badc/ukmo-midas-open/data/uk-daily-rain-obs/dataset-version-201901/berwickshire/00265_mertoun/midas-open_uk-daily-rain-obs_dv-201901_00265_mertoun_capability.csv?download=1>,
I get a login prompt. Same thing probably happens to R when it tries to
download those files.

Does CEDA Archive have an API for programmatic access? If not, you'll
either have to export the cookies from your browser and use the curl
package to send HTTP requests with those included, or use the developer
toolbar in your browser to find out how the login request is sent and
use the curl package to (1) send the login request, (2) receive cookies
and (3) use those cookies to download files. This is called "website
scraping" and may be brittle, depending on how much the website
administrators dislike bots.

Looking at the documentation, it seems that the datasets may be
available via FTP: https://help.ceda.ac.uk/article/280-ftp

It should be possible to use the curl package to download the files.
Depending on how R is built, it could also be possible to feed the FTP
URL directly to read.csv, if you put the username and the password
inside it: ftp://username:password at ftp-server.hostname/path/to/file.csv

-- 
Best regards,
Ivan


From bgunter@4567 @end|ng |rom gm@||@com  Sun Sep 25 16:45:37 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 25 Sep 2022 07:45:37 -0700
Subject: [R] Solve equality function with GA
In-Reply-To: <CAGgJW75WFT-qHopcqPhPKp+e-bFMAYvzrPMbqQ6xk5=1ebLmtg@mail.gmail.com>
References: <CAP8WkrykVmkcct3z__PLop=HV5MZ03-zck82fRrAiT7C1XHcSg@mail.gmail.com>
 <CAGxFJbRENrTzL7seuPtWuFJAAj=AkxADrAG+cdDQnvJotC3GEg@mail.gmail.com>
 <CAGgJW75WFT-qHopcqPhPKp+e-bFMAYvzrPMbqQ6xk5=1ebLmtg@mail.gmail.com>
Message-ID: <CAGxFJbQzCsHtTDf1FQkAU0JCLWAt+Y-4MYYXLhLk66mUqMsmRg@mail.gmail.com>

... and so you need f(x) = abs(x^2 - 25),
though I have no idea if GA handles non-continuously differentiable
functions.

-- Bert

On Sun, Sep 25, 2022 at 1:44 AM Eric Berger <ericjberger at gmail.com> wrote:

> ?ga states that ga() searches for the maximum of the fitness function.
> The maximum of your fitness function is at x=0.
>
>
>
> On Sun, Sep 25, 2022 at 4:52 AM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> We aren't supposed to do homework on this list.
>>
>> Bert Gunter
>>
>> On Sat, Sep 24, 2022 at 5:29 PM Barry King via R-help <
>> r-help at r-project.org>
>> wrote:
>>
>> > I am having difficulty solving for 5 in this coded snippet. Please help.
>> > -------------------
>> > library(GA)
>> >
>> > # Solve for x where x^2 = 25, not x^2 <= 25
>> >
>> > f <- function(x)
>> > {
>> >   x^2-25
>> > }
>> >
>> > fitness <- function(x) -f(x)
>> >
>> > GA <- GA <- ga(type = "real-valued", fitness = fitness, lower = 0,
>> upper =
>> > 10)
>> > summary(GA)
>> > -------------------------
>> > Thank you,
>> > Barry King
>> >
>> > --
>> >
>> >
>> >
>> >
>> >
>> >
>> > This message is for the intended recipient only and may contain
>> > confidential and privileged information. If you are not the intended
>> > recipient, please return this message to the sender and delete this
>> message
>> > and any attachments from your computer.
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Sep 25 17:11:16 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 25 Sep 2022 08:11:16 -0700
Subject: [R] Solve equality function with GA
In-Reply-To: <CAGxFJbQzCsHtTDf1FQkAU0JCLWAt+Y-4MYYXLhLk66mUqMsmRg@mail.gmail.com>
References: <CAP8WkrykVmkcct3z__PLop=HV5MZ03-zck82fRrAiT7C1XHcSg@mail.gmail.com>
 <CAGxFJbRENrTzL7seuPtWuFJAAj=AkxADrAG+cdDQnvJotC3GEg@mail.gmail.com>
 <CAGgJW75WFT-qHopcqPhPKp+e-bFMAYvzrPMbqQ6xk5=1ebLmtg@mail.gmail.com>
 <CAGxFJbQzCsHtTDf1FQkAU0JCLWAt+Y-4MYYXLhLk66mUqMsmRg@mail.gmail.com>
Message-ID: <CAGxFJbRrMap6jJ7jrgAkgY0Rh_Fjk-CDF9nQwpegoBD1EPcbYA@mail.gmail.com>

... oops. Ignore my last sentence. Need more coffee...
-- Bert

On Sun, Sep 25, 2022 at 7:45 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> ... and so you need f(x) = abs(x^2 - 25),
> though I have no idea if GA handles non-continuously differentiable
> functions.
>
> -- Bert
>
> On Sun, Sep 25, 2022 at 1:44 AM Eric Berger <ericjberger at gmail.com> wrote:
>
>> ?ga states that ga() searches for the maximum of the fitness function.
>> The maximum of your fitness function is at x=0.
>>
>>
>>
>> On Sun, Sep 25, 2022 at 4:52 AM Bert Gunter <bgunter.4567 at gmail.com>
>> wrote:
>>
>>> We aren't supposed to do homework on this list.
>>>
>>> Bert Gunter
>>>
>>> On Sat, Sep 24, 2022 at 5:29 PM Barry King via R-help <
>>> r-help at r-project.org>
>>> wrote:
>>>
>>> > I am having difficulty solving for 5 in this coded snippet. Please
>>> help.
>>> > -------------------
>>> > library(GA)
>>> >
>>> > # Solve for x where x^2 = 25, not x^2 <= 25
>>> >
>>> > f <- function(x)
>>> > {
>>> >   x^2-25
>>> > }
>>> >
>>> > fitness <- function(x) -f(x)
>>> >
>>> > GA <- GA <- ga(type = "real-valued", fitness = fitness, lower = 0,
>>> upper =
>>> > 10)
>>> > summary(GA)
>>> > -------------------------
>>> > Thank you,
>>> > Barry King
>>> >
>>> > --
>>> >
>>> >
>>> >
>>> >
>>> >
>>> >
>>> > This message is for the intended recipient only and may contain
>>> > confidential and privileged information. If you are not the intended
>>> > recipient, please return this message to the sender and delete this
>>> message
>>> > and any attachments from your computer.
>>> >
>>> >         [[alternative HTML version deleted]]
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> > http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>> >
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Sep 25 22:07:47 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 25 Sep 2022 21:07:47 +0100
Subject: [R] reading text files directly into program from net
In-Reply-To: <CABxY9BMgDOWNfMk3-xy+5qY8oMZoYJ_SHLiTAJnT8t=8TgzzaQ@mail.gmail.com>
References: <CABxY9BMgDOWNfMk3-xy+5qY8oMZoYJ_SHLiTAJnT8t=8TgzzaQ@mail.gmail.com>
Message-ID: <7d7651d5-87fa-5a5e-1506-7cca51adaec7@sapo.pt>

Hello,

Inline.

?s 09:53 de 25/09/2022, Nick Wray escreveu:
> Hello   I am working with daily rainfall data for the UK from 1915 onwards
> from the Met Office.  The data is on this site:
> 
> https://data.ceda.ac.uk/badc/ukmo-midas-open/data/uk-daily-rain-obs/dataset-version-201901
> 
> There are many files for the different counties.  For example there are
> seven station files for Berwickshire in this site:
> 
> https://data.ceda.ac.uk/badc/ukmo-midas-open/data/uk-daily-rain-obs/dataset-version-201901/berwickshire
> 
> 
> The first station in this dataset
>   has the name  00265_mertoun
> <https://data.ceda.ac.uk/badc/ukmo-midas-open/data/uk-daily-rain-obs/dataset-version-201901/berwickshire/00265_mertoun>
> which
> is a code and location name, again for example, and inside is a text file

The file is a csv file and there are also two directories

qc-version-0  empty
qc-version-1  has 10 csv files spanning the years 1961-1970


Which files do you want, these last ones?

Hope this helps,

Rui Barradas


> 
> It's easy but time-consuming to download the files one by one - I am sure
> that it is possible to read them directly into an R program but whatever
> coding or path I try to use I get an error.  I can't find an example online
> which I can tweak to allow me to do this.
> 
> can anyone help?  Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@d@td@n|e|@ @end|ng |rom gm@||@com  Sun Sep 25 23:30:06 2022
From: j@d@td@n|e|@ @end|ng |rom gm@||@com (Jada Daniels)
Date: Sun, 25 Sep 2022 16:30:06 -0500
Subject: [R] Ecological Detective worked solutions [R-wiki]
Message-ID: <CACR10CMH63bMW0LB2y3mqm=f0aGaBC+JQeQ18zznDeOQEq4tbw@mail.gmail.com>

Hi! I was recently referred to this webpage pertaining The Ecological
Detective(
http://wiki.r-project.org/rwiki/doku.php?id=guides:tutorials:ecological_detective)
, however, it will not pull up on my laptop. I was hoping to use the code
from chapter 6 to model a project after. Is there another link I could use?


Thanks so much,
Jada Daniels

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Mon Sep 26 14:53:19 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 26 Sep 2022 12:53:19 +0000
Subject: [R] Ecological Detective worked solutions [R-wiki]
In-Reply-To: <CACR10CMH63bMW0LB2y3mqm=f0aGaBC+JQeQ18zznDeOQEq4tbw@mail.gmail.com>
References: <CACR10CMH63bMW0LB2y3mqm=f0aGaBC+JQeQ18zznDeOQEq4tbw@mail.gmail.com>
Message-ID: <BN6PR2201MB155363A3D780C57E7079F4E3CF529@BN6PR2201MB1553.namprd22.prod.outlook.com>

Hi Jada,
Just so you know:
I tried the link, but my system responded that it would not find that page.
I got a note in the email that the HTML version was deleted. (That is expected given guidelines for posting)

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jada Daniels
Sent: Sunday, September 25, 2022 5:30 PM
To: r-help at r-project.org
Subject: [R] Ecological Detective worked solutions [R-wiki]

[External Email]

Hi! I was recently referred to this webpage pertaining The Ecological Detective(
https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwiki.r-project.org%2Frwiki%2Fdoku.php%3Fid%3Dguides%3Atutorials%3Aecological_detective&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cae607d63c8a94225187808da9fbce3ad%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637997930875086229%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=5NSauQxBicKo8t%2BMnQYBSqzzg%2FTCaAliYHQooBeocDs%3D&amp;reserved=0)
, however, it will not pull up on my laptop. I was hoping to use the code from chapter 6 to model a project after. Is there another link I could use?


Thanks so much,
Jada Daniels

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cae607d63c8a94225187808da9fbce3ad%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637997930875086229%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=D%2BMjf2wPDxGEqQlxGGI6%2FZiud5Dl0jNgMdDgKOweD1Q%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7Cae607d63c8a94225187808da9fbce3ad%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637997930875086229%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=B4aIqdytvOVGuVll9Qbtl1LFj1K9vJnoba%2BoajDWO7M%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Sep 26 15:10:34 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 26 Sep 2022 16:10:34 +0300
Subject: [R] Ecological Detective worked solutions [R-wiki]
In-Reply-To: <CACR10CMH63bMW0LB2y3mqm=f0aGaBC+JQeQ18zznDeOQEq4tbw@mail.gmail.com>
References: <CACR10CMH63bMW0LB2y3mqm=f0aGaBC+JQeQ18zznDeOQEq4tbw@mail.gmail.com>
Message-ID: <20220926161034.411dd490@arachnoid>

? Sun, 25 Sep 2022 16:30:06 -0500
Jada Daniels <jadatdaniels at gmail.com> ?????:

> I was recently referred to this webpage pertaining The Ecological
> Detective
> (http://wiki.r-project.org/rwiki/doku.php?id=guides:tutorials:ecological_detective),
> however, it will not pull up on my laptop.

Parts of the R wiki (I didn't know we had a wiki!) can be found in the
Internet Archive
<https://web.archive.org/web/20090405102858/http://wiki.r-project.org/rwiki/doku.php?id=guides:guides>,
but not the page you're interested in.

The wiki seems to have later been migrated to rwiki.sciviews.org
<https://web.archive.org/web/20130109061702/http://rwiki.sciviews.org/doku.php?id=guides:guides>,
but, again, the guide you're interested in seems to be missing.

All of it seems to vanish after July 2014. I'm not sure if anyone saved
a copy of R Wiki after that.

-- 
Best regards,
Ivan


From j@zh@o @end|ng |rom ye@h@net  Mon Sep 26 16:42:49 2022
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Mon, 26 Sep 2022 22:42:49 +0800
Subject: [R] apply to row and column of matrix
Message-ID: <50ffad2c-f0d5-c906-839c-79cab907c788@yeah.net>

Hi there,

I try to calculate the cumsum of row and column of a matrix as follows.

 > m <- matrix(1:10, ncol = 2)
 > m
 ???? [,1] [,2]
[1,]??? 1??? 6
[2,]??? 2??? 7
[3,]??? 3??? 8
[4,]??? 4??? 9
[5,]??? 5?? 10
 > apply(m, 1, cumsum)
 ???? [,1] [,2] [,3] [,4] [,5]
[1,]??? 1??? 2??? 3??? 4??? 5
[2,]??? 7??? 9?? 11?? 13?? 15
 > apply(m, 2, cumsum)
 ???? [,1] [,2]
[1,]??? 1??? 6
[2,]??? 3?? 13
[3,]??? 6?? 21
[4,]?? 10?? 30
[5,]?? 15?? 40

My question is why the dim of the return value of apply(m, 1, cumsum) is 
not 5x2, but 2x5.

Best,

Jinsong


From bgunter@4567 @end|ng |rom gm@||@com  Mon Sep 26 16:56:14 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 26 Sep 2022 07:56:14 -0700
Subject: [R] apply to row and column of matrix
In-Reply-To: <50ffad2c-f0d5-c906-839c-79cab907c788@yeah.net>
References: <50ffad2c-f0d5-c906-839c-79cab907c788@yeah.net>
Message-ID: <CAGxFJbQwj=kQ5T01m6fahfUj8dYFXpyVJC+-VHNjuKkUNVXa_Q@mail.gmail.com>

from ?apply:
"If each call to FUN returns a vector of length n, and simplify is
TRUE, then apply returns an array of dimension c(n, dim(X)[MARGIN]) ."

For margin = 1 (cumsum over rows), each call to cumsum return a vector
of length 2. Hence the array returned will be of dimension c(2,
c(5,2)[1]) = c(2,5).

Cheers,
Bert


On Mon, Sep 26, 2022 at 7:43 AM Jinsong Zhao <jszhao at yeah.net> wrote:
>
> Hi there,
>
> I try to calculate the cumsum of row and column of a matrix as follows.
>
>  > m <- matrix(1:10, ncol = 2)
>  > m
>       [,1] [,2]
> [1,]    1    6
> [2,]    2    7
> [3,]    3    8
> [4,]    4    9
> [5,]    5   10
>  > apply(m, 1, cumsum)
>       [,1] [,2] [,3] [,4] [,5]
> [1,]    1    2    3    4    5
> [2,]    7    9   11   13   15
>  > apply(m, 2, cumsum)
>       [,1] [,2]
> [1,]    1    6
> [2,]    3   13
> [3,]    6   21
> [4,]   10   30
> [5,]   15   40
>
> My question is why the dim of the return value of apply(m, 1, cumsum) is
> not 5x2, but 2x5.
>
> Best,
>
> Jinsong
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Mon Sep 26 17:46:51 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 26 Sep 2022 18:46:51 +0300
Subject: [R] apply to row and column of matrix
In-Reply-To: <CAGxFJbQwj=kQ5T01m6fahfUj8dYFXpyVJC+-VHNjuKkUNVXa_Q@mail.gmail.com>
References: <50ffad2c-f0d5-c906-839c-79cab907c788@yeah.net>
 <CAGxFJbQwj=kQ5T01m6fahfUj8dYFXpyVJC+-VHNjuKkUNVXa_Q@mail.gmail.com>
Message-ID: <CAGgJW74=7kXtQk3DNGx7KGFR=ip9auifhgq5Mmfs-V+Xiish8Q@mail.gmail.com>

Bert provided an excellent answer to your question.
FYI here is a different approach to do the calculation.
It uses data.frame rather than matrix. A data frame is a list of its columns.
Here the function supplied to sapply operates on each column of the data.frame.

> m <- as.data.frame(t(matrix(1:10,ncol=2)))
> m
   V1  V2  V3  V4  V5
1   1     2    3     4    5
2    6    7    8     9   10

> sapply(m, cumsum)
      V1  V2  V3  V4  V5
[1,]    1     2    3     4    5
[2,]    7     9   11   13  15





On Mon, Sep 26, 2022 at 5:57 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> from ?apply:
> "If each call to FUN returns a vector of length n, and simplify is
> TRUE, then apply returns an array of dimension c(n, dim(X)[MARGIN]) ."
>
> For margin = 1 (cumsum over rows), each call to cumsum return a vector
> of length 2. Hence the array returned will be of dimension c(2,
> c(5,2)[1]) = c(2,5).
>
> Cheers,
> Bert
>
>
> On Mon, Sep 26, 2022 at 7:43 AM Jinsong Zhao <jszhao at yeah.net> wrote:
> >
> > Hi there,
> >
> > I try to calculate the cumsum of row and column of a matrix as follows.
> >
> >  > m <- matrix(1:10, ncol = 2)
> >  > m
> >       [,1] [,2]
> > [1,]    1    6
> > [2,]    2    7
> > [3,]    3    8
> > [4,]    4    9
> > [5,]    5   10
> >  > apply(m, 1, cumsum)
> >       [,1] [,2] [,3] [,4] [,5]
> > [1,]    1    2    3    4    5
> > [2,]    7    9   11   13   15
> >  > apply(m, 2, cumsum)
> >       [,1] [,2]
> > [1,]    1    6
> > [2,]    3   13
> > [3,]    6   21
> > [4,]   10   30
> > [5,]   15   40
> >
> > My question is why the dim of the return value of apply(m, 1, cumsum) is
> > not 5x2, but 2x5.
> >
> > Best,
> >
> > Jinsong
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From t@n@@@ @end|ng |rom gm@||@com  Tue Sep 27 07:25:36 2022
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Mon, 26 Sep 2022 22:25:36 -0700
Subject: [R] confidence intervals
In-Reply-To: <BN6PR2201MB15538B1531773E9E5359193DCF439@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CA+JEM01GyAtiXFHi0Xfevhhe+qsSYogbeUxaFwYFLVYf0R=tJQ@mail.gmail.com>
 <F9AB27D6-6B7F-447E-9AC3-8E0CEDE3B0FA@comcast.net>
 <BN6PR2201MB15538B1531773E9E5359193DCF439@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CA+JEM034wq_T20VK3W2dpij_51vPtMjBoY3VGPJ_Xtw8y4PX0A@mail.gmail.com>

HI everyone,

THe conversation below is already old :) Just wanted to add that I received
the explanations regarding the confidence intervals that are computed in
the article(s) that we have briefly discussed.
The answers have been posted on stackoverflow, com :
https://stats.stackexchange.com/questions/587641/confidence-intervals-of-a-biological-assay/587715#587715

Thanks again for your time and help,

Bogdan



On Fri, Sep 9, 2022 at 8:44 AM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> Not to worry, the second article did not have equations either. It had a
> couple bits of code and a github link to icechip (page 3295).
>
> I got through the paywall using a link through the University of Florida
> library system.
>
>
>
> Maybe the linked papers include citations that describe the analysis in
> enough detail, but that effort exceeds my time limit for this activity.
>
>
>
> Tim
>
>
>
> *From:* David Winsemius <dwinsemius at comcast.net>
> *Sent:* Thursday, September 8, 2022 8:51 PM
> *To:* Bogdan Tanasa <tanasa at gmail.com>
> *Cc:* Ebert,Timothy Aaron <tebert at ufl.edu>; r-help <r-help at r-project.org>
> *Subject:* Re: [R] confidence intervals
>
>
>
> *[External Email]*
>
> The first article had no code and did not describe a formula that I could
> find which matched your code. The second article is behind a paywall.
>
>
>
> ?
>
> David.
>
> Sent from my iPhone
>
>
>
> On Sep 3, 2022, at 3:39 PM, Bogdan Tanasa <tanasa at gmail.com> wrote:
>
> ?
>
> Dear Aaron, David, and everyone,
>
>
>
> Thank you again for your comments on my question related to the confidence
> intervals. I am sorry for the late reply.
>
>
>
> The definition of the 95 confidence intervals where our discussion
> originates from has been proposed by the authors of these two articles (I
> am including the links to the articles just to show that the formula has
> been published in a methods article a while ago; the articles are in the
> field of biology though, where not too many of you are part of, I guess).
> These authors have written the scripts and they have made those available
> on github. I have asked a while ago the authors why they have chosen this
> formula, however, I have not received any reply. In any case, at this
> moment I will use the mathematical formulas described in the articles :
>
>
>
> https://www.cell.com/molecular-cell/fulltext/S1097-2765(15)00304-4
> <https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.cell.com%2Fmolecular-cell%2Ffulltext%2FS1097-2765(15)00304-4&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996716811%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=vkeF5mjxFkAJtsshVbzOEblOakQVe9TUVG9WUy79KRI%3D&reserved=0>
>
>
>
> https://www.nature.com/articles/s41596-019-0218-7
> <https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41596-019-0218-7&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996716811%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=QisH5QlhY699g3ExBEh89nrtR3H3ZX9AarqtvUMKzpw%3D&reserved=0>
>
>
>
> Wishing everyone a good weekend,
>
>
>
> Bogdan
>
>
>
>
>
>
>
> On Sun, Aug 28, 2022 at 6:53 PM Ebert,Timothy Aaron <tebert at ufl.edu>
> wrote:
>
> I have a general dislike of "analysis emergencies." I would like to see a
> data emergency wherein someone must cram 3 years of data collection into 18
> months so that they have time to work out the correct analysis. I am sure
> others would suggest working out how analyze the data before starting the
> experiment.
>
> Our business office gives this advice to faculty members: An emergency on
> your part is not an emergency on our part.
>
> How about starting by answering the questions posted by the people you are
> hoping will help. Focus on David's middle paragraph. However, if you can
> re-code everything to work, then it would seem that you already know the
> answer and it might be simpler/faster to write the correct code.
>
> You might spend some time looking for a scientific paper that uses that
> equation for the confidence interval and thereby get some context to
> explain why the equation is correct.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bogdan Tanasa
> Sent: Sunday, August 28, 2022 8:55 PM
> To: David Winsemius <dwinsemius at comcast.net>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] confidence intervals
>
> [External Email]
>
> Hi David,
>
> Thank you for your comments, and feed-back message. I am very happy to
> learn from the experience of the people on R mailing list, and without any
> doubt, I am very thankful to you and to everyone for sharing their
> knowledge. I do apologize for any confusion that I have created unwillingly
> with my previous email.
>
> About my previous email related to the confidence intervals: indeed I have
> posted the question with a detailed description on stackoverflow, and the
> link is listed below.
>
> I have to admit that I have been in rush willing to have the suggestions
> of R-help members by Monday (if that would have been possible), as I have
> to make a decision at the beginning of this week on whether I need to
> re-code the shell script in R. I have a deadline on Wed. The script itself
> is less important per se, I have included it just to point our the origin
> of my question.
>
> I do certainly respect the principles of online R-help community, and I
> would very much appreciate if I could have your advice on the following :
> shall a "R code related emergency" arise, would it be acceptable to post
> the question on stackoverflow with the corresponding data tables and
> detailed code, and to refer the posting on R-help mailing list ?
>
> If it is acceptable at least for a single email, and if you do not mind, I
> could mention the link to stackoverflow, inviting our members to read it,
> shall they be comfortable with this topic.
>
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313343894313%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=8sF7j4OCgH12qx4d8NCiw1%2FDbPa6nrui27S9C3ZNuL0%3D&amp;reserved=0
> <https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996716811%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=4QuLHm0fSa9LPG2Vnf%2BnisdfMfnJQ1Y0zEXWgIyE16w%3D&reserved=0>
>
> Thanks a lot, have  a good week !
>
> ~ Bogdan
>
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313343894313%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=8sF7j4OCgH12qx4d8NCiw1%2FDbPa6nrui27S9C3ZNuL0%3D&amp;reserved=0
> <https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F73507697%2Fconfidence-intervals-of-a-biological-assay%3Fnoredirect%3D1%23comment129816241_73507697&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996716811%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=4QuLHm0fSa9LPG2Vnf%2BnisdfMfnJQ1Y0zEXWgIyE16w%3D&reserved=0>
>
> On Sat, Aug 27, 2022, 6:52 PM David Winsemius <dwinsemius at comcast.net>
> wrote:
>
> > You cross-posted this to StackOverflow and did not say so.  ... and
> > you posted in HTML Bad dog squared. I cast one of the close votes on
> > SO, but here I can only say ... READ the Posting Guide.
> >
> > You also give no citation other than someone's Github files with
> > minimal comments in that material. You should indicate whether this
> > code has any solid support. Why do you think this code is something to
> depend upon?
> >
> > After all, you been posting questions on R-help for several months.
> > Don't you think you should make a good faith effort to understand the
> > principles underlying this resource?
> >
> >
> > --
> >
> > David.
> >
> > On 8/26/22 17:55, Bogdan Tanasa wrote:
> > > Dear all,
> > >
> > > Although I know that it is not a statistics mailing list, given my
> > > work
> > on
> > > ICeChIP
> > >
> > >
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgith
> > ub.com
> <https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fub.com%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=em3fMdYfIwItLsX5ueMZXs%2F76Gs8hevXHWEbmZdGvdg%3D&reserved=0>
> %2Fshah-rohan%2Ficechip%2Fblob%2Fmaster%2FScripts%2FcomputeHMDan
> > dError&amp;data=05%7C01%7Ctebert%40ufl.edu
> <https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2F40ufl.edu%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=OrK1X0ZajWbvB0b9rrFbqcyINBGOzWdx1DF6qsXFL6o%3D&reserved=0>
> %7C0ba5d535471b46c05ec508da8
> > 9592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C63797331334389431
> > 3%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6
> > Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=9HOH72K0Lj30w7tE%2BMN
> > oXakPbO1sasaujUTsnHFwDZo%3D&amp;reserved=0
> > >
> > > I would appreciate to have the answer to a question :
> > >
> > > given two variables a and b (a and b can have 1000 paired-values)
> > > and a calibration number "cal",
> > >
> > > why the 95 confidence interval has been calculated as such for each
> > > value
> > > a(i) and b(i) :
> > >
> > > 100 / cal * sqrt (( a/ (b^2) + (a^2) / (b ^3)) * 1.96
> > >
> > > Thank you,
> > >
> > > Bogdan
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > > at.ethz.ch
> <https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fat.ethz.ch%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GwN4PEwjH8pLOmNxg4h3vri9lwSfOjI35T7NY3o%2BlUQ%3D&reserved=0>
> %2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%4
> > > 0ufl.edu
> <https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2F0ufl.edu%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=XFiqLbwUEZIYxD6PakZ2wUon5WbMNq5M%2FExYV3NQyuc%3D&reserved=0>
> %7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a
> > > 62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJW
> > > IjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C300
> > > 0%7C%7C%7C&amp;sdata=KfmZ6PvxUVrbCMzVZcz6S2H2sqfWQmw2WIZHERwKDEk%3D&
> > > amp;reserved=0
> > > PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> <https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iGxY98c0YGqMi53P9cCNaf7m02afdGomEqbmrItjYtg%3D&reserved=0>
> > -project.org
> <https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fproject.org%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=LO6k5YzUAN4H3yMRL9k5qkOBj%2BNXq2M%2BAnKVqMiNJ%2Bk%3D&reserved=0>
> %2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu
> <https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2F40ufl.edu%2F&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=OrK1X0ZajWbvB0b9rrFbqcyINBGOzWdx1DF6qsXFL6o%3D&reserved=0>
> %
> > 7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%
> > 7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> > DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> > sdata=127HvzZh7q9Xa7LaESHIEXIy3CdmUyQ3cxAVeOA%2Bukg%3D&amp;reserved=0
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=KfmZ6PvxUVrbCMzVZcz6S2H2sqfWQmw2WIZHERwKDEk%3D&amp;reserved=0
> <https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814996873045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=dOZN0X9vdJd481cVZUFSCTpKxP33qwxsDJHgHxn6eU4%3D&reserved=0>
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C0ba5d535471b46c05ec508da89592c20%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637973313344050547%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=127HvzZh7q9Xa7LaESHIEXIy3CdmUyQ3cxAVeOA%2Bukg%3D&amp;reserved=0
> <https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Cb8ea3424c9174ac48ecc08da91fd737e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637982814997029285%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2FpbdlAPXXtKg%2BRllG45yD4fm9NoPhxjgPSBwF%2BFCpyM%3D&reserved=0>
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From ceo @end|ng |rom teo-en-m|ng-corp@com  Mon Sep 26 05:14:57 2022
From: ceo @end|ng |rom teo-en-m|ng-corp@com (Turritopsis Dohrnii Teo En Ming)
Date: Mon, 26 Sep 2022 11:14:57 +0800
Subject: [R] How long does it take to learn the R programming language?
Message-ID: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>

Subject: How long does it take to learn the R programming language?

Good day from Singapore,

How long does it take to learn the R programming language?

Is it easy? Is there a steep learning curve?

Thank you.

Regards,

Mr. Turritopsis Dohrnii Teo En Ming
Targeted Individual in Singapore
Blogs:
https://tdtemcerts.blogspot.com
https://tdtemcerts.wordpress.com


From @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r  Tue Sep 27 10:51:18 2022
From: @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r (Samuel Granjeaud)
Date: Tue, 27 Sep 2022 10:51:18 +0200
Subject: [R] Why R >= 4.1 warns about installing Rtools on Windows?
Message-ID: <041838f1-c07d-d7b3-f3cc-78960598b63a@inserm.fr>

Hi,

I don't understand why Rtoosl seems to be required even if a package is 
pure R. For sure, this is just a warning, but it frightens new comers. 
So, why encouraging people add stuff that will be probably unneeded?

Have a nice,
Samuel


From @erv|ce @end|ng |rom @hd@w@on@com  Tue Sep 27 17:20:33 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Tue, 27 Sep 2022 11:20:33 -0400
Subject: [R] Question about Line Ending Choice
Message-ID: <c640edfe-d402-10d6-cf84-510a6de5f5e8@shdawson.com>

Hi All,


I am writing with a question about choosing the line ending aspect of a 
file, please.

I use write.csv and write.table to export work to CSV files and TXT 
files. I am planning now on how to share my work with the Windows crowd 
beyond only sharing with the Linux crowd. I use my text editor to flip 
the line ending option from Linux to Windows after exporting. This is 
inefficient for me to accomplish if I ramp up production as I expect 
will occur.

Staying with the character encoding of UTF-8 seems fine for now from 
what I understand I need to deliver to my customers.

What seems more efficient to me is to learn how to use R to define the 
line ending aspect of the exported file. I have not found if this is an 
option within R.

QUESTION
Is it possible within R to define the line ending aspect of file output?


Kindest Regards,
-- 
*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


From @po|nter @end|ng |rom humd@|@net  Tue Sep 27 17:20:59 2022
From: @po|nter @end|ng |rom humd@|@net (Steve Pointer)
Date: Tue, 27 Sep 2022 16:20:59 +0100
Subject: [R] How long does it take to learn the R programming language?
In-Reply-To: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
References: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
Message-ID: <67b5978a-9311-47f3-956b-8e3433ec0b2d@www.fastmail.com>

The basics can be learnt in a short time.  The easiest way I found and have used to train a number in my team is to use the R library Swirl as a walkthrough. https://swirlstats.com/

Basically 

>install.packages("swirl")
>library("swirl")
>swirl()

... and then follow the on-screen guide.

Steve P


From bgunter@4567 @end|ng |rom gm@||@com  Tue Sep 27 17:29:10 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 27 Sep 2022 08:29:10 -0700
Subject: [R] Question about Line Ending Choice
In-Reply-To: <c640edfe-d402-10d6-cf84-510a6de5f5e8@shdawson.com>
References: <c640edfe-d402-10d6-cf84-510a6de5f5e8@shdawson.com>
Message-ID: <CAGxFJbQ3X3zsyinD=h4BioW=u86D_5SW=aW6g4WZo1qHxzvUNw@mail.gmail.com>

Did you not see the "eol" parameter in write.table ?

Bert

On Tue, Sep 27, 2022 at 8:23 AM Stephen H. Dawson, DSL via R-help <
r-help at r-project.org> wrote:

> Hi All,
>
>
> I am writing with a question about choosing the line ending aspect of a
> file, please.
>
> I use write.csv and write.table to export work to CSV files and TXT
> files. I am planning now on how to share my work with the Windows crowd
> beyond only sharing with the Linux crowd. I use my text editor to flip
> the line ending option from Linux to Windows after exporting. This is
> inefficient for me to accomplish if I ramp up production as I expect
> will occur.
>
> Staying with the character encoding of UTF-8 seems fine for now from
> what I understand I need to deliver to my customers.
>
> What seems more efficient to me is to learn how to use R to define the
> line ending aspect of the exported file. I have not found if this is an
> option within R.
>
> QUESTION
> Is it possible within R to define the line ending aspect of file output?
>
>
> Kindest Regards,
> --
> *Stephen Dawson, DSL*
> /Executive Strategy Consultant/
> Business & Technology
> +1 (865) 804-3454
> http://www.shdawson.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @erv|ce @end|ng |rom @hd@w@on@com  Tue Sep 27 17:35:54 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Tue, 27 Sep 2022 11:35:54 -0400
Subject: [R] Question about Line Ending Choice
In-Reply-To: <CAGxFJbQ3X3zsyinD=h4BioW=u86D_5SW=aW6g4WZo1qHxzvUNw@mail.gmail.com>
References: <c640edfe-d402-10d6-cf84-510a6de5f5e8@shdawson.com>
 <CAGxFJbQ3X3zsyinD=h4BioW=u86D_5SW=aW6g4WZo1qHxzvUNw@mail.gmail.com>
Message-ID: <04e458aa-e5f5-c932-da3c-1aa35db7daf7@shdawson.com>

Hi Bert,


Thanks for the reply.

I did see the parameter, but was not sure if this is the correct 
parameter to reference. I also see it in write.csv.

I take it you are saying the eol parameter is the best practice for 
exporting from R using these functions. Am I correct or is there another 
option other than write.csv and write.table I should be considering?


Thanks,
*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 9/27/22 11:29, Bert Gunter wrote:
> Did you not see the "eol" parameter in write.table ?
>
> Bert
>
> On Tue, Sep 27, 2022 at 8:23 AM Stephen H. Dawson, DSL via R-help 
> <r-help at r-project.org> wrote:
>
>     Hi All,
>
>
>     I am writing with a question about choosing the line ending aspect
>     of a
>     file, please.
>
>     I use write.csv and write.table to export work to CSV files and TXT
>     files. I am planning now on how to share my work with the Windows
>     crowd
>     beyond only sharing with the Linux crowd. I use my text editor to
>     flip
>     the line ending option from Linux to Windows after exporting. This is
>     inefficient for me to accomplish if I ramp up production as I expect
>     will occur.
>
>     Staying with the character encoding of UTF-8 seems fine for now from
>     what I understand I need to deliver to my customers.
>
>     What seems more efficient to me is to learn how to use R to define
>     the
>     line ending aspect of the exported file. I have not found if this
>     is an
>     option within R.
>
>     QUESTION
>     Is it possible within R to define the line ending aspect of file
>     output?
>
>
>     Kindest Regards,
>     -- 
>     *Stephen Dawson, DSL*
>     /Executive Strategy Consultant/
>     Business & Technology
>     +1 (865) 804-3454
>     http://www.shdawson.com
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Sep 27 17:44:50 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 27 Sep 2022 16:44:50 +0100
Subject: [R] How long does it take to learn the R programming language?
In-Reply-To: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
References: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
Message-ID: <f85dccb2-0232-d74f-3fed-b22d6fbd0645@sapo.pt>

Hello,

Inline

?s 04:14 de 26/09/2022, Turritopsis Dohrnii Teo En Ming escreveu:
> Subject: How long does it take to learn the R programming language?
> 
> Good day from Singapore,
> 
> How long does it take to learn the R programming language?
> 
> Is it easy? 

The basics, yes.

Is there a steep learning curve?

Right after the basics, yes, for a (short?) while.
I don't know if this is true but it is said that once you are 
comfortable with help("lapply"), you've made it.

Hope this helps,

Rui Barradas

> 
> Thank you.
> 
> Regards,
> 
> Mr. Turritopsis Dohrnii Teo En Ming
> Targeted Individual in Singapore
> Blogs:
> https://tdtemcerts.blogspot.com
> https://tdtemcerts.wordpress.com
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Tue Sep 27 18:32:10 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 27 Sep 2022 16:32:10 +0000
Subject: [R] How long does it take to learn the R programming language?
In-Reply-To: <f85dccb2-0232-d74f-3fed-b22d6fbd0645@sapo.pt>
References: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
 <f85dccb2-0232-d74f-3fed-b22d6fbd0645@sapo.pt>
Message-ID: <BN6PR2201MB1553CF088543C9696548B40DCF559@BN6PR2201MB1553.namprd22.prod.outlook.com>

It depends on what you mean by learn, and the final goal. It also depends on your starting point. "Computer literacy" is poorly defined. Finally, it depends on the quality of instruction, your innate ability to learn this skill, and the time you can devote to this task. You will be able to write your first code in a few minutes. Being able to write a package for inclusion in CRAN might take years. The learning curve can be steep, or appear that way, if you must learn R from a poorly written textbook with no outside help. High quality instruction building knowledge in a systematic way can lessen the curve, but there is still a great deal of content to learn.

Tim


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Rui Barradas
Sent: Tuesday, September 27, 2022 11:45 AM
To: Turritopsis Dohrnii Teo En Ming <ceo at teo-en-ming-corp.com>; r-help at r-project.org
Subject: Re: [R] How long does it take to learn the R programming language?

[External Email]

Hello,

Inline

?s 04:14 de 26/09/2022, Turritopsis Dohrnii Teo En Ming escreveu:
> Subject: How long does it take to learn the R programming language?
>
> Good day from Singapore,
>
> How long does it take to learn the R programming language?
>
> Is it easy?

The basics, yes.

Is there a steep learning curve?

Right after the basics, yes, for a (short?) while.
I don't know if this is true but it is said that once you are comfortable with help("lapply"), you've made it.

Hope this helps,

Rui Barradas

>
> Thank you.
>
> Regards,
>
> Mr. Turritopsis Dohrnii Teo En Ming
> Targeted Individual in Singapore
> Blogs:
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftdte
> mcerts.blogspot.com%2F&amp;data=05%7C01%7Ctebert%40ufl.edu%7C51d08ab9b
> 2c944ae040208daa0a34a4e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C6
> 37998920441110699%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoi
> V2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=r4c2z
> wBMjUX8TnTRVKKlOs%2FFUJm4GNUspqO1Z0pR4RQ%3D&amp;reserved=0
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftdte
> mcerts.wordpress.com%2F&amp;data=05%7C01%7Ctebert%40ufl.edu%7C51d08ab9
> b2c944ae040208daa0a34a4e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C
> 637998920441110699%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjo
> iV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=ReRZ
> NDHNAkJ1UPhQP2Ys4Y%2Fj%2FvOGvNmZxTRkjaleXII%3D&amp;reserved=0
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl
> .edu%7C51d08ab9b2c944ae040208daa0a34a4e%7C0d4da0f84a314d76ace60a62331e
> 1b84%7C0%7C0%7C637998920441110699%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C
> &amp;sdata=YwG2AX8PQC4xrvhL0t316xK40rdSZMpMbToiKjVB0QI%3D&amp;reserved
> =0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%
> 7C51d08ab9b2c944ae040208daa0a34a4e%7C0d4da0f84a314d76ace60a62331e1b84%
> 7C0%7C0%7C637998920441110699%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;
> sdata=s9T9TSe8Gxkp4dBNC%2FwjzHMrM6dgbZ3r5JVBvOLUMn4%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=05%7C01%7Ctebert%40ufl.edu%7C51d08ab9b2c944ae040208daa0a34a4e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637998920441110699%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=YwG2AX8PQC4xrvhL0t316xK40rdSZMpMbToiKjVB0QI%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=05%7C01%7Ctebert%40ufl.edu%7C51d08ab9b2c944ae040208daa0a34a4e%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C637998920441110699%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=s9T9TSe8Gxkp4dBNC%2FwjzHMrM6dgbZ3r5JVBvOLUMn4%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Sep 27 18:56:18 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 27 Sep 2022 09:56:18 -0700
Subject: [R] How long does it take to learn the R programming language?
In-Reply-To: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
References: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
Message-ID: <C2EC20D9-733C-4825-991C-68ABE30FD40E@dcn.davis.ca.us>

Q: How long does it take to learn English?

A: You never finish... the real question is what do you need to do and can you do that, and you have to ask yourself that. Everyone tackles it at their own pace.

On September 25, 2022 8:14:57 PM PDT, Turritopsis Dohrnii Teo En Ming <ceo at teo-en-ming-corp.com> wrote:
>Subject: How long does it take to learn the R programming language?
>
>Good day from Singapore,
>
>How long does it take to learn the R programming language?
>
>Is it easy? Is there a steep learning curve?
>
>Thank you.
>
>Regards,
>
>Mr. Turritopsis Dohrnii Teo En Ming
>Targeted Individual in Singapore
>Blogs:
>https://tdtemcerts.blogspot.com
>https://tdtemcerts.wordpress.com
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From t@v|b@r @end|ng |rom gm@||@com  Tue Sep 27 20:36:56 2022
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Tue, 27 Sep 2022 21:36:56 +0300
Subject: [R] How long does it take to learn the R programming language?
In-Reply-To: <f85dccb2-0232-d74f-3fed-b22d6fbd0645@sapo.pt>
References: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
 <f85dccb2-0232-d74f-3fed-b22d6fbd0645@sapo.pt>
Message-ID: <b1a31b5d-7f13-0eba-a778-445081a21df2@gmail.com>

Can I nominate this for a fortune entry?

:-)


On 27/09/2022 18:44, Rui Barradas wrote:
> I don't know if this is true but it is said that once you are 
> comfortable with help("lapply"), you've made it. 

-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918
https://orcid.org/0000-0002-1128-1325


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Sep 28 03:08:26 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 28 Sep 2022 14:08:26 +1300
Subject: [R] How long does it take to learn the R programming language?
In-Reply-To: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
References: <e324492ae6f0122f19fadb96c7c78297@teo-en-ming-corp.com>
Message-ID: <20220928140826.1ada9ab7@rolf-Latitude-E7470>


On Mon, 26 Sep 2022 11:14:57 +0800
Turritopsis Dohrnii Teo En Ming <ceo at teo-en-ming-corp.com> wrote:

> Subject: How long does it take to learn the R programming language?
> 
> Good day from Singapore,
> 
> How long does it take to learn the R programming language?

How long is a piece of string? :-)

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


