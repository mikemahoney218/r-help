From |kry|ov @end|ng |rom d|@root@org  Fri Nov  1 22:29:45 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Sat, 2 Nov 2024 00:29:45 +0300
Subject: [R] 
 Invalid term in model formula with gmm after formula.tools is loaded
In-Reply-To: <CALcKxsq+6FKxX_JFA9RDoc1JWfiuCNSqKopQ3j=ex=Z+hdN8Tg@mail.gmail.com>
References: <CALcKxsq+6FKxX_JFA9RDoc1JWfiuCNSqKopQ3j=ex=Z+hdN8Tg@mail.gmail.com>
Message-ID: <20241102002945.64b6c79a@Tarkus>

Hi Aristide and welcome to R-help!

Your message was a bit mangled [*]. It's best to compose messages to
this mailing list in plain text. Otherwise (when composed in HTML), the
mailing list eats the HTML part and we're left with the plain text part
automatically generated by your mailer, which isn't always readable.

? Wed, 30 Oct 2024 17:45:29 +0100
Elys?e Aristide <ariel92and at gmail.com> ?????:

> I am using the gmm function from the gmm package and encountered an
> unexpected error. No model can be estimated if I load formula.tools?I
> need to restart R each time.

I can reproduce the problem:

library(gmm)
data(Finance)
r <- Finance[1:300, 1:10]                                              
rm <- Finance[1:300, "rm"]                             
rf <- Finance[1:300, "rf"]
z <- as.matrix(r-rf) 
zm <- rm-rf
res <- gmm(z ~ zm, x = ~ zm)
library(formula.tools)
gmm(z ~ zm, x = ~ zm) # signals an error

Looking at the traceback(), I see the formula being transformed into NA
~ NA at some point:

10: terms.formula(formula, data = data) # <-- error happens here
9: terms(formula, data = data)
8: model.frame.default(data = object$data, formula = NA ~ NA, drop.unused.levels = TRUE, 
       na.action = "na.pass")
7: model.frame(data = object$data, formula = NA ~ NA, drop.unused.levels = TRUE, 
       na.action = "na.pass") # <-- formula is already NA ~ NA here
6: eval(mfh, parent.frame())
5: eval(mfh, parent.frame())
4: getDat(object$g, object$x, data = object$data)
3: getModel.baseGmm(all_args, ...)
2: getModel(all_args, ...)
1: gmm(z ~ zm, x = ~zm)

It seems that in base R, as.character(z ~ zm) returns a three-element
character vector, while with formula.tools loaded, it only returns a
single string, 'z ~ zm'. This breaks formula manipulation in getDat().

An immediate workaround is to replace the method provided by
formula.tools with one that immediately delegates back to R:

.S3method('as.character', 'formula', function (x, ...) NextMethod())
gmm(z ~ zm, x = ~ zm) # seems to work once again

(Is there a way to truly unregister an S3 method?)

Perhaps gmm::getDat could be made more robust by working directly on
the formula/call object instead of going through the string
representation.

-- 
Best regards,
Ivan

[*] https://stat.ethz.ch/pipermail/r-help/2024-October/480157.html


From @|by||e@@toeck|| @end|ng |rom gmx@ch  Sat Nov  2 09:23:14 2024
From: @|by||e@@toeck|| @end|ng |rom gmx@ch (=?utf-8?Q?Sibylle_St=C3=B6ckli?=)
Date: Sat, 2 Nov 2024 09:23:14 +0100
Subject: [R] foreSIGHT package
Message-ID: <0050F99A-A468-43BD-A9CD-B36AF05BD623@gmx.ch>

Dear community

I have started to use the foreSIGHT package fo calculate some climatic indicators.

Example
library(foreSIGHT)
func_avgDSD(WAAR$Ta, attArgs)

Dataset (WAAR, Ta = average daily temperature)
Year DOY Ta
1990 1 -2.45
1990 2 1.54
.
.
2001 1 4.54
,
2001 205 15.65
2001 206 20.14
.
2001 365 8.65
..
2023 1 0.45


Questions:
Is it possible to run the foreSIGHT with DOY numbers not dates (e.g. 1983-04-09 23.64) and additionally separate years? 
 
I have some problems to understand attArgs. Up to now I have not found any reference. How do I need to prepare the list? And where I can set the threshold?
 
Sometimes there are indicators without any definition of the threshold? E.g. cold seasons length: func_CSL (data) how is a cold day defined here (the threshold for cold days), there is no attArgs?

Many thanks 
Sibylle



	[[alternative HTML version deleted]]


From @r|e|92@nd @end|ng |rom gm@||@com  Sun Nov  3 12:53:52 2024
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Sun, 3 Nov 2024 12:53:52 +0100
Subject: [R] 
 Invalid term in model formula with gmm after formula.tools is loaded
In-Reply-To: <20241102002945.64b6c79a@Tarkus>
References: <CALcKxsq+6FKxX_JFA9RDoc1JWfiuCNSqKopQ3j=ex=Z+hdN8Tg@mail.gmail.com>
 <20241102002945.64b6c79a@Tarkus>
Message-ID: <CALcKxso-+3Fc22nL9Nfy9Zv3TQVjstXbU1bPHiPQK13ZvJR=wQ@mail.gmail.com>

Hi Ivan,

Thank you for your message. Does that mean that I should send a new
message? Or is it okay for this time?

Best,
Aristide

On Fri, Nov 1, 2024, 22:29 Ivan Krylov <ikrylov at disroot.org> wrote:

> Hi Aristide and welcome to R-help!
>
> Your message was a bit mangled [*]. It's best to compose messages to
> this mailing list in plain text. Otherwise (when composed in HTML), the
> mailing list eats the HTML part and we're left with the plain text part
> automatically generated by your mailer, which isn't always readable.
>
> ? Wed, 30 Oct 2024 17:45:29 +0100
> Elys?e Aristide <ariel92and at gmail.com> ?????:
>
> > I am using the gmm function from the gmm package and encountered an
> > unexpected error. No model can be estimated if I load formula.tools?I
> > need to restart R each time.
>
> I can reproduce the problem:
>
> library(gmm)
> data(Finance)
> r <- Finance[1:300, 1:10]
> rm <- Finance[1:300, "rm"]
> rf <- Finance[1:300, "rf"]
> z <- as.matrix(r-rf)
> zm <- rm-rf
> res <- gmm(z ~ zm, x = ~ zm)
> library(formula.tools)
> gmm(z ~ zm, x = ~ zm) # signals an error
>
> Looking at the traceback(), I see the formula being transformed into NA
> ~ NA at some point:
>
> 10: terms.formula(formula, data = data) # <-- error happens here
> 9: terms(formula, data = data)
> 8: model.frame.default(data = object$data, formula = NA ~ NA,
> drop.unused.levels = TRUE,
>        na.action = "na.pass")
> 7: model.frame(data = object$data, formula = NA ~ NA, drop.unused.levels =
> TRUE,
>        na.action = "na.pass") # <-- formula is already NA ~ NA here
> 6: eval(mfh, parent.frame())
> 5: eval(mfh, parent.frame())
> 4: getDat(object$g, object$x, data = object$data)
> 3: getModel.baseGmm(all_args, ...)
> 2: getModel(all_args, ...)
> 1: gmm(z ~ zm, x = ~zm)
>
> It seems that in base R, as.character(z ~ zm) returns a three-element
> character vector, while with formula.tools loaded, it only returns a
> single string, 'z ~ zm'. This breaks formula manipulation in getDat().
>
> An immediate workaround is to replace the method provided by
> formula.tools with one that immediately delegates back to R:
>
> .S3method('as.character', 'formula', function (x, ...) NextMethod())
> gmm(z ~ zm, x = ~ zm) # seems to work once again
>
> (Is there a way to truly unregister an S3 method?)
>
> Perhaps gmm::getDat could be made more robust by working directly on
> the formula/call object instead of going through the string
> representation.
>
> --
> Best regards,
> Ivan
>
> [*] https://stat.ethz.ch/pipermail/r-help/2024-October/480157.html
>

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Mon Nov  4 11:37:33 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Mon, 4 Nov 2024 13:37:33 +0300
Subject: [R] 
 Invalid term in model formula with gmm after formula.tools is loaded
In-Reply-To: <CALcKxso-+3Fc22nL9Nfy9Zv3TQVjstXbU1bPHiPQK13ZvJR=wQ@mail.gmail.com>
References: <CALcKxsq+6FKxX_JFA9RDoc1JWfiuCNSqKopQ3j=ex=Z+hdN8Tg@mail.gmail.com>
 <20241102002945.64b6c79a@Tarkus>
 <CALcKxso-+3Fc22nL9Nfy9Zv3TQVjstXbU1bPHiPQK13ZvJR=wQ@mail.gmail.com>
Message-ID: <20241104133733.6f3f7506@Tarkus>

? Sun, 3 Nov 2024 12:53:52 +0100
Elys?e Aristide <ariel92and at gmail.com> ?????:

> Does that mean that I should send a new message? Or is it okay for
> this time?

No need to post it again. Did it help to replace the as.character()
method for formulas provided by 'formula.tools'? I see the problem is
already reported to the 'formula.tools' maintainer [*], so there isn't
much else to do about it.

-- 
Best regards,
Ivan

[*] https://github.com/decisionpatterns/formula.tools/issues/11


From @r|e|92@nd @end|ng |rom gm@||@com  Mon Nov  4 13:37:24 2024
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Mon, 4 Nov 2024 13:37:24 +0100
Subject: [R] 
 Invalid term in model formula with gmm after formula.tools is loaded
In-Reply-To: <20241104133733.6f3f7506@Tarkus>
References: <CALcKxsq+6FKxX_JFA9RDoc1JWfiuCNSqKopQ3j=ex=Z+hdN8Tg@mail.gmail.com>
 <20241102002945.64b6c79a@Tarkus>
 <CALcKxso-+3Fc22nL9Nfy9Zv3TQVjstXbU1bPHiPQK13ZvJR=wQ@mail.gmail.com>
 <20241104133733.6f3f7506@Tarkus>
Message-ID: <CALcKxspZLE7ymTQXYT4F_bG5dNx=FZaMKoLKYB31dvtWFfBtdw@mail.gmail.com>

Hi Ivan,

I tried that solution, but unfortunately, it did not help.
The issue is about the formula of the instruments when converting into
data. I finally converted this formula to a matrix by myself and gave the
matrix to gmm directly. So, gmm does not need to convert tit.

Best regards,

Aristide




On Mon, Nov 4, 2024 at 11:37?AM Ivan Krylov <ikrylov at disroot.org> wrote:

> ? Sun, 3 Nov 2024 12:53:52 +0100
> Elys?e Aristide <ariel92and at gmail.com> ?????:
>
> > Does that mean that I should send a new message? Or is it okay for
> > this time?
>
> No need to post it again. Did it help to replace the as.character()
> method for formulas provided by 'formula.tools'? I see the problem is
> already reported to the 'formula.tools' maintainer [*], so there isn't
> much else to do about it.
>
> --
> Best regards,
> Ivan
>
> [*] https://github.com/decisionpatterns/formula.tools/issues/11
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Nov  4 18:06:36 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 4 Nov 2024 12:06:36 -0500
Subject: [R] 
 Invalid term in model formula with gmm after formula.tools is loaded
In-Reply-To: <20241104133733.6f3f7506@Tarkus>
References: <CALcKxsq+6FKxX_JFA9RDoc1JWfiuCNSqKopQ3j=ex=Z+hdN8Tg@mail.gmail.com>
 <20241102002945.64b6c79a@Tarkus>
 <CALcKxso-+3Fc22nL9Nfy9Zv3TQVjstXbU1bPHiPQK13ZvJR=wQ@mail.gmail.com>
 <20241104133733.6f3f7506@Tarkus>
Message-ID: <a47638c1-2872-47e1-b0ab-d8e4c6475eba@gmail.com>

On 2024-11-04 5:37 a.m., Ivan Krylov via R-help wrote:
> ? Sun, 3 Nov 2024 12:53:52 +0100
> Elys?e Aristide <ariel92and at gmail.com> ?????:
> 
>> Does that mean that I should send a new message? Or is it okay for
>> this time?
> 
> No need to post it again. Did it help to replace the as.character()
> method for formulas provided by 'formula.tools'? I see the problem is
> already reported to the 'formula.tools' maintainer [*], so there isn't
> much else to do about it.
> 

One thing Aristide or someone else could do is to fix the bug in 
formula.tools, and submit a PR.  Five years ago the author said he 
didn't have time to fix the bug.  Apparently nobody else has had time 
either.

Another choice is to recognize that there isn't much interest in 
supporting that package from the author or any of its users, and abandon it.

Duncan Murdoch


From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Tue Nov  5 13:26:07 2024
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Tue, 5 Nov 2024 12:26:07 +0000
Subject: [R] lattice subscripts with both condition and group
Message-ID: <IA1P223MB049910B784B00782216C74E2FA522@IA1P223MB0499.NAMP223.PROD.OUTLOOK.COM>

How can I use subscripts to draw the last graph with one call to ? ? ? ? ? ? ? ? ? ? ? ??
function xyplot()? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
Thanks, ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
Naresh ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
library(data.table) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
library(lattice) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
library(latticeExtra) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
mydt2024 <- data.table( ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? date = rep(as.Date(c("2024-11-01", "2024-11-04")), c(8, 8)), ? ? ? ? ? ? ? ? ? ? ? ??
? ? day_forward = rep(1:8, 2), ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? news_clicks = c(10, 12, 13, 18, 20, 21, 15, 11, 21, 23, 25, 18, 14, 12, ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? 12, 10), ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? days_to_election = rep(c(4, 1), c(8, 8)), ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? electyear = "Election 2024") ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
## Works when only condition is present ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
mydt2024[ ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? , xyplot(news_clicks ~ day_forward | date, type = c("l", "g"), ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ?panel = function(x, y, ..., subscripts) { ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ? ? ?panel.xyplot(x, y, ...) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ? ? ?panel.abline(v = days_to_election[subscripts][1], lty = 2) ? ? ? ? ? ? ? ?
? ? ? ? ? ?}) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
] ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
mydt2020 <- data.table( ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? date = rep(as.Date(c("2020-10-30", "2020-11-02")), c(8, 8)), ? ? ? ? ? ? ? ? ? ? ? ??
? ? day_forward = rep(1:8, 2), ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? news_clicks = c(9, 11, 12, 17, 21, 20, 14, 8, 20, 24, 28, 15, 12, 10, ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? 8, 6), ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? days_to_election = rep(c(4, 1), c(8, 8)), ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? electyear = "Election 2020" ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
mydt <- rbind(mydt2020, mydt2024) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
mydt[, `:=`(electlabel = paste(days_to_election, "Days Before"))] ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
## This does not work with both condition and group ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
mydt[ ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? , xyplot(news_clicks ~ day_forward | electlabel, groups = electyear, ? ? ? ? ? ? ? ? ??
? ? ? ? ? ?type = c("o", "g"), auto.key = list(columns = 2, space = "bottom"), ? ? ? ? ??
? ? ? ? ? ?panel = function(x, y, ..., subscripts) { ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ? ? ?panel.xyplot(x, y, ...) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ? ? ?panel.abline(v = days_to_election[subscripts][1], lty = 2) ? ? ? ? ? ? ? ?
? ? ? ? ? ?}) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
] ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
## This works ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
electplot <- mydt[ ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? , xyplot(news_clicks ~ day_forward | electlabel, groups = electyear, ? ? ? ? ? ? ? ? ??
? ? ? ? ? ?type = c("o", "g"), auto.key = list(columns = 2, space = "bottom")) ? ? ? ? ??
] ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
vlineplot <- mydt[ ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? , xyplot(news_clicks ~ day_forward | electlabel, ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ?panel = function(x, y, ..., subscripts) { ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ??
? ? ? ? ? ? ? ?panel.abline(v = days_to_election[subscripts][1], lty = 2) ? ? ? ? ? ? ? ?
? ? ? ? ? ?}) ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
] ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?
electplot + vlineplot ??

