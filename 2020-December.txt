From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Dec  1 02:33:52 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 1 Dec 2020 14:33:52 +1300
Subject: [R] A new versatile discrete distribution.
Message-ID: <20201201143352.1234d7b4@rolf-Latitude-E7470>


To all and sundry, near and far,
F. Christmas in particular ...

	--- A. A. Milne

Just ignore that second line .... :-)

A new package of mine, "hse", has just become available on CRAN.
The source package is there; Uwe Ligges has informed me that the
Windoze binary has been built so it should appear shortly.  I'm sure
that the Mac OSX binary will appear in due course.

The package provides tools for working with a new distribution for
discrete data with finitely many values.  I have found this
distribution to be useful for handling data to which the "standard"
discrete distributions (binomial, Poisson, geometric, ...) do not
readily apply.  My hope is that others will likewise find the "hse"
distribution to be useful.  In particular it could have application to
survey responses measured on an ordered discrete (e.g. 1 to 7 or
1 to 10) scale.

I would of course be grateful for any feedback, comments, criticisms,
corrections, etc.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Dec  1 17:16:39 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 1 Dec 2020 16:16:39 +0000
Subject: [R] PCA biplot customising point shape and legend
Message-ID: <1888b9aeb734425fb784814a167704c8@SRVEXCHCM1302.precheza.cz>

Dear all

 

I am struggling to customise biplot from FactoMineR pacakge

 

My code is almost correct but piece of information is missing

 

Here is data

 

temp  <- structure(list(leukocyte28 = c(96875L, 73438L, 68229L, 94479L, 

76563L, 141667L, 111042L, 93333L, 132083L, 103542L, 61667L, 77708L

), macrophage28 = c(60.29, 99.13, 97.04, 98.54, 98.46, 75.2, 

89.71, 98, 82, 98.83, 99.08, 98.54), pmn28 = c(38.58, 0.58, 2.71, 

0.92, 1, 24.25, 9.29, 1.5, 15.08, 0.92, 0.67, 1), lymphocyte28 = c(1.13, 

0.29, 0.25, 0.54, 0.54, 0.55, 1, 0.5, 2.92, 0.25, 0.25, 0.46), 

    leukocyte3 = c(186042L, 111250L, 114375L, 111146L, 98854L, 

    156250L, 250625L, 183125L, 202917L, 161875L, 184792L, 128333L

    ), macrophage3 = c(53.88, 95.96, 98.29, 98.92, 98.92, 78.3, 

    82.33, 97.83, 84.79, 97.25, 97.75, 98.46), pmn3 = c(44.75, 

    3.46, 1.29, 0.67, 0.71, 20.4, 16.67, 1.92, 14.04, 1.92, 1.67, 

    1.21), lymphocyte3 = c(1.38, 0.58, 0.42, 0.42, 0.38, 1.3, 

    1, 0.25, 1.17, 0.83, 0.58, 0.33), coating = structure(c(3L, 

    3L, 3L, 1L, 7L, 1L, 2L, 5L, 4L, 6L, 3L, 3L), .Label = c("alumina", 

    "both", "none", "phosphate", "silica", "tungsten", "zirconia"

    ), class = "factor"), size = structure(c(1L, 1L, 2L, 2L, 

    2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L), .Label = c("nano", "pigmentary"

    ), class = "factor")), class = "data.frame", row.names = c("G1-1", 

"G2-5", "G3-1", "G4-19", "G5-4", "G6-3", "G7-5", "G8-2", "G9-5", 

"G10-4", "E171-E", "Bayertitan T"))

 

and the code

 

library(factoextra)

library(factoMineR)

 

fit <- PCA(temp[,1:9], quali.sup=9)

 

fviz_pca_biplot(fit, col.ind = temp$coating, repel=T, col.var = "black",

palette = "lancet", invisible="quali", pointsize=5, pointshape=temp$size,

legend.title = list(col = "Coating"),

xlim=c(-6,6), title="Instillation results")

 

Which is quite close. Point shapes are triangles and circles in biplot, but
I would like to add them into legend too. If possible I would like to have
also filled shapes instead of open circle and triangle.

I tried many combinations, aded the size variable into PCA, scale_shape and
other options from ggplot but I was not able to get correct second legend
(size).

Any hint is greatly wellcommed.

 

Best regards.

Petr

 


From dpweyg@nd @end|ng |rom gm@||@com  Tue Dec  1 19:51:01 2020
From: dpweyg@nd @end|ng |rom gm@||@com (Dennis Weygand)
Date: Tue, 1 Dec 2020 13:51:01 -0500
Subject: [R] Readxl on Mac
Message-ID: <CAJgAAVTbA7-baa9c1Hsv1txDY1Jc7AeHH1RLL90Q5biP9vt8Zw@mail.gmail.com>

>From the following lines of code on an iMac running Catalina 10.15.7


library(readxl)
fname <-  "/Volumes/SD/LabData/Lorentz/Lorentz.xlsx"

Helm <- read_excel(fname,sheet="Helmholtz")

I get the following annoying error:
Error: Evaluation error: zip file

To me this makes no sense: the file in question is not a zip file. The
excel file in question, however, is either open on excel, or recently
opened in excel.
Does anyone know about this error, and what to do about it?
I am running R version 3.5.1

Thanks for any assistance you can provide.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Dec  1 20:21:10 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 1 Dec 2020 14:21:10 -0500
Subject: [R] Readxl on Mac
In-Reply-To: <CAJgAAVTbA7-baa9c1Hsv1txDY1Jc7AeHH1RLL90Q5biP9vt8Zw@mail.gmail.com>
References: <CAJgAAVTbA7-baa9c1Hsv1txDY1Jc7AeHH1RLL90Q5biP9vt8Zw@mail.gmail.com>
Message-ID: <96f985bd-57b3-424a-b175-c34cb9261311@gmail.com>

On 01/12/2020 1:51 p.m., Dennis Weygand wrote:
>  From the following lines of code on an iMac running Catalina 10.15.7
> 
> 
> library(readxl)
> fname <-  "/Volumes/SD/LabData/Lorentz/Lorentz.xlsx"
> 
> Helm <- read_excel(fname,sheet="Helmholtz")
> 
> I get the following annoying error:
> Error: Evaluation error: zip file
> 
> To me this makes no sense: the file in question is not a zip file. The
> excel file in question, however, is either open on excel, or recently
> opened in excel.
> Does anyone know about this error, and what to do about it?
> I am running R version 3.5.1
> 
> Thanks for any assistance you can provide.

The .xlsx file format is actually a zip file containing a number of XML 
files.  I'd guess that Excel locks it when it's open, to stop two 
spreadsheets from opening it at once.

So the error message could be more informative, but it's probably 
accurately reporting the immediate problem.

Duncan Murdoch


From m@rc_@chw@rtz @end|ng |rom me@com  Tue Dec  1 20:28:37 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Tue, 1 Dec 2020 14:28:37 -0500
Subject: [R] Readxl on Mac
In-Reply-To: <CAJgAAVTbA7-baa9c1Hsv1txDY1Jc7AeHH1RLL90Q5biP9vt8Zw@mail.gmail.com>
References: <CAJgAAVTbA7-baa9c1Hsv1txDY1Jc7AeHH1RLL90Q5biP9vt8Zw@mail.gmail.com>
Message-ID: <75EE2F8F-76E0-4C13-B28A-BBF81D032B9A@me.com>


> On Dec 1, 2020, at 1:51 PM, Dennis Weygand <dpweygand at gmail.com> wrote:
> 
> From the following lines of code on an iMac running Catalina 10.15.7
> 
> 
> library(readxl)
> fname <-  "/Volumes/SD/LabData/Lorentz/Lorentz.xlsx"
> 
> Helm <- read_excel(fname,sheet="Helmholtz")
> 
> I get the following annoying error:
> Error: Evaluation error: zip file
> 
> To me this makes no sense: the file in question is not a zip file. The
> excel file in question, however, is either open on excel, or recently
> opened in excel.
> Does anyone know about this error, and what to do about it?
> I am running R version 3.5.1
> 
> Thanks for any assistance you can provide.


Hi,

Current generation MS Office files (ending with an 'x' in the file extension) are ZIP compressed XML files. Thus, the zip error is relevant.

If the file that you are referencing actually exists, since the error can indicate a non-existent file (error in name and/or path), it is possible that the file is still open, and read_excel() presumably requires an exclusive read on the file, thus cannot open it in that manner.

You might be sure that the file is not in use by Excel or another application, precluding an exclusive lock on the file. If so, close out the other application.

Another possibility is that the Excel file is password protected, and thus cannot be read directly, without saving it in an unprotected fashion.

Regards,

Marc Schwartz


From r@ywong @end|ng |rom t@mu@edu  Tue Dec  1 20:54:00 2020
From: r@ywong @end|ng |rom t@mu@edu (Raymond Wong)
Date: Tue, 1 Dec 2020 13:54:00 -0600
Subject: [R] 2021 John M. Chambers Software Award
Message-ID: <52186554-A25B-4942-B5D1-085119F92F41@tamu.edu>

Dear R-help listers,

I would like to let you know that the submission window of the John M. Chambers Software Award is now open. The submission deadline is December 15, 2020.

The Statistical Computing Section of the American Statistical Association announces the competition for the John M. Chambers Statistical Software Award. In 1998 the Association for Computing Machinery (ACM) presented the ACM Software System Award to John Chambers for the design and development of S. Dr. Chambers generously donated his award to the Statistical Computing Section to endow an annual prize for statistical software written by, or in collaboration with, an undergraduate or graduate student.

Please visit http://asa.stat.uconn.edu for more information.

Best regards,

Raymond Wong

Awards Chair
ASA Section on Statistical Computing

Associate Professor
Department of Statistics
Texas A&M University

From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Wed Dec  2 11:32:02 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Wed, 2 Dec 2020 11:32:02 +0100
Subject: [R] scott-knot ESD effect size test
Message-ID: <CA+nrPnv5sfdZ-353WnQa0wC=J=LaRsTs+xFUW_q3HZFVn8=tDQ@mail.gmail.com>

I have the following data from resample

svm= svm$resample$RMSE
nn= nn$resample$RMSE

we perform the statistical tests like

wilcox.test(svm, nn)

I have a question, can we perform the scott-knot ESD test here? if yes, how?

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Wed Dec  2 11:54:29 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Wed, 2 Dec 2020 10:54:29 +0000
Subject: [R] scott-knot ESD effect size test
In-Reply-To: <CA+nrPnv5sfdZ-353WnQa0wC=J=LaRsTs+xFUW_q3HZFVn8=tDQ@mail.gmail.com>
References: <CA+nrPnv5sfdZ-353WnQa0wC=J=LaRsTs+xFUW_q3HZFVn8=tDQ@mail.gmail.com>
Message-ID: <a8c56cea-0d7e-8f9f-370e-2f7b44a24228@dewey.myzen.co.uk>

There seems to be a package on CRAN dedicated exclusively to this test. 
It is called ScottKnotESD rather unoriginally.

Michael.

On 02/12/2020 10:32, Neha gupta wrote:
> I have the following data from resample
> 
> svm= svm$resample$RMSE
> nn= nn$resample$RMSE
> 
> we perform the statistical tests like
> 
> wilcox.test(svm, nn)
> 
> I have a question, can we perform the scott-knot ESD test here? if yes, how?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Wed Dec  2 12:09:59 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Wed, 2 Dec 2020 12:09:59 +0100
Subject: [R] scott-knot ESD effect size test
In-Reply-To: <a8c56cea-0d7e-8f9f-370e-2f7b44a24228@dewey.myzen.co.uk>
References: <CA+nrPnv5sfdZ-353WnQa0wC=J=LaRsTs+xFUW_q3HZFVn8=tDQ@mail.gmail.com>
 <a8c56cea-0d7e-8f9f-370e-2f7b44a24228@dewey.myzen.co.uk>
Message-ID: <CA+nrPnvGTT3QeXyf0JeK3vWEhUugSdNWbG4E7G=Kr5XykT3UkQ@mail.gmail.com>

Thank you Michael,

But when we use the package, how to perform the test?

library(ScottKnottESD)

Can we do like

sk <- sk_esd(svm, nn) to measure the effect size between the svm and nn ?





On Wed, Dec 2, 2020 at 11:54 AM Michael Dewey <lists at dewey.myzen.co.uk>
wrote:

> There seems to be a package on CRAN dedicated exclusively to this test.
> It is called ScottKnotESD rather unoriginally.
>
> Michael.
>
> On 02/12/2020 10:32, Neha gupta wrote:
> > I have the following data from resample
> >
> > svm= svm$resample$RMSE
> > nn= nn$resample$RMSE
> >
> > we perform the statistical tests like
> >
> > wilcox.test(svm, nn)
> >
> > I have a question, can we perform the scott-knot ESD test here? if yes,
> how?
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>

	[[alternative HTML version deleted]]


From edrenth @end|ng |rom |ry@ke-@k@demy@n|  Wed Dec  2 13:42:19 2020
From: edrenth @end|ng |rom |ry@ke-@k@demy@n| (Eduard Drenth)
Date: Wed, 2 Dec 2020 12:42:19 +0000
Subject: [R] calling r from java
In-Reply-To: <f3180f4d80dcdc1a8bb6b1809bb82ae7e24595c8.camel@fryske-akademy.nl>
References: <fa5236c2ca174ba8e839129cb0b6b047527a0f67.camel@fryske-akademy.nl>
 <CAB8pepxoOo-=Nj7c0Jhk443AVsZANw_H7J0iTn8tZ0OhMKFVhw@mail.gmail.com>
 <d44b09923c04e49e95f57d2714af14ae609ca64e.camel@fryske-akademy.nl>
 <6d917f8f1c537cdb4afcfba1de75b35b4b6da206.camel@fryske-akademy.nl>
 <f3180f4d80dcdc1a8bb6b1809bb82ae7e24595c8.camel@fryske-akademy.nl>
Message-ID: <f257fa11ab502e70968cbac3cb0293646c74429a.camel@fryske-akademy.nl>

For those interested, I succeeded in creating a stable, fast Java/R
connection using https://search.maven.org/search?q=g:org.rosuda.REngine
. The whole solution has a maven/docker setup making it reproducable.



-----Original Message-----
From: Eduard Drenth <edrenth at fryske-akademy.nl>
To: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] calling r from java
Date: Mon, 30 Nov 2020 08:36:16 +0000

sun.misc that is
-----Original Message-----From: Eduard Drenth <
edrenth at fryske-akademy.nl>To: r-help at r-project.org <
r-help at r-project.org>Subject: Re: [R] calling r from javaDate: Mon, 30
Nov 2020 07:18:46 +0000
First attempts to use jri on ubuntu 20.04 stranded.Steps I followed:1)
download rJava from https://www.rforge.net/rJava/files/
2) create a symlink /usr/lib/libjvm.so to /usr/lib/jvm/java-8-openjdk-
amd64/jre/lib/amd64/server/libjvm.so3) configure and make jri4) createa
symlink /usr/lib/libjri.so5) put the built JRI.jar in local mavenrepo6)
include a dependency to the jar7) create and run a hello worldtest for
RengineThe test fails because com.misc.Unsafe.prefetchRead isn't found.
AsIunderstand depending on com.misc.Unsafe.* is a risk.I will not
follow this route any further for now, though I stillthinkhaving jri
available would be great. Steps to get there are Ithink:1) remove
com.misc.Unsafe usage from the solution2) make libjriavailable in
repositories (apt, yum, other)3) make JRI.jar available inmaven
centralBye, Eduard-----Original Message-----From: Eduard Drenth
<edrenth at fryske-akademy.nl>To: spurdle.a at gmail.com
<spurdle.a at gmail.com>Cc: r-help at r-project.org <r-help at r-
project.org>Subject: Re: [R] callingr from javaDate: Sat, 28 Nov 2020
11:57:49 +0000Thanks all, I'll go for https://www.rforge.net/JRI/ and
thelibrariesinmaven https://search.maven.org/search?q=jri

The maven library is build from  here 
https://www.rforge.net/rJava/files/ back in 2017.After this no new
libsare published to maven.It would be nice (understatement) if
publishingnew rJava componentstomaven becomes a regular part of R
deveopmentprocesses.This would promote R use from Java which I think is
good.Andof course I can help.Bye, Eduard-----Original Message-----From: 
AbbySpurdle <spurdle.a at gmail.com>To:Eduard Drenth <edrenth at fryske-
akademy.nl>Cc: r-help at r-project.org <r-help at r-project.org>Subject:
Re:[R] calling r from javaDate: Sat, 28Nov 2020 15:55:36 +1300Hi
Eduard,
> Now I developed a service that
> executesRscript(UsingProcessBuilder),sends text to stdin of the
> process andreadsfromstdout of theprocess.

This doesn't answer your question, but may be relevant.I have a java-
based application that works on a similar
principle.(Thecodeishorrendously bad and most of it should be thrown
away).I'mplanningto write a terminal emulator, in the
nearfuture.(Currently,secondplace on my top-level todo list).The
primary objective is tobuildobject-oriented and messagepassingAPIs on
top of the coreterminalemulation system, with at leastsomecross
platformfunctionality.Notingthat, in my opinion, the cross-platform
aspect ismoreimportant for R,than in many other IPC topics.Hence, I'm
interestedin hearing"wishlist" items
forsuchAPIs.______________________________________________R-help at r-
project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained,
reproduciblecode.______________________________________________R-
help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible
code.______________________________________________R-help at r-project.org 
mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
-- 
Eduard Drenth, Software Architekt

edrenth at fryske-akademy.nl

Doelestrjitte 8
8911 DX  Ljouwert
+31 58 234 30 47
+31 62 094 34 28 (priv?)

skype: eduarddrenth
https://github.com/eduarddrenth
frisian.eu
gpg: https://pgp.surfnet.nl/pks/lookup?search=eduarddrenth


Op freed bin ik th?s/wurkje ik minder





-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: This is a digitally signed message part
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20201202/07017b30/attachment.sig>

From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Dec  2 15:14:50 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 2 Dec 2020 08:14:50 -0600
Subject: [R] Add a third .libPath
References: <001001d6c8b5$80629b30$8127d190$.ref@sbcglobal.net>
Message-ID: <001001d6c8b5$80629b30$8127d190$@sbcglobal.net>

r-help Forum

 

My employer has not yet approved R/RStudio but has allowed me to run
R/RStudio from profile.  I need to add RTools but not sure I can run RTools
from the same location.  

So I unzipped Rtools and added the folder to my profile location containing
R and RStudio and then modified my Rprofile adding a third path to the
RTools folder as follows:

 

# my custom stuff

myPaths <- c(.libPaths(), "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40
<file://gold/home/ndw003/reichmjs/MyDocs/R/rtools40> ")

.libPaths(myPaths)

 

Not sure if this is the best method but seems to work;

 

> .libPaths()

[1] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/win-library/4.0
<file://gold/home/ndw003/reichmjs/MyDocs/R/win-library/4.0> "

[2] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/R-40.3/library
<file://gold/home/ndw003/reichmjs/MyDocs/R/R-40.3/library> "

[3] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40
<file://gold/home/ndw003/reichmjs/MyDocs/R/rtools40> "  

 

except when I run 

 

> has_rtools()

WARNING: Rtools is required to build R packages, but is not currently
installed.

 

Please download and install Rtools 4.0 from
https://cran.r-project.org/bin/windows/Rtools/.

 

I am assuming R isn't seeing Rtools

 

So can I run Rtools from the same profile location as R and RStudio? IF so
what do I need to do?

 

Jeff Reichman

 


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec  2 16:20:16 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 2 Dec 2020 10:20:16 -0500
Subject: [R] Add a third .libPath
In-Reply-To: <001001d6c8b5$80629b30$8127d190$@sbcglobal.net>
References: <001001d6c8b5$80629b30$8127d190$.ref@sbcglobal.net>
 <001001d6c8b5$80629b30$8127d190$@sbcglobal.net>
Message-ID: <3bbf8f0c-29db-bc67-6112-099f86104e18@gmail.com>

You are mixing up two different things.

The .libPaths() function returns paths where R searches for R packages.

Rtools is not an R package, it is a collection of utilities and support 
files to run in Windows.

For Rtools to be found, you need to add it to the Windows PATH variable, 
not to .libPaths().  You can see the current value of PATH by running 
this in R:

Sys.getenv("PATH")

This will give a long string variable with various directories separated 
by semicolons.  You want to make sure it contains the Rtools40 
executable directory (typically "C:/Rtools40/usr/bin", though for you it 
might be "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40/usr/bin").  If 
it doesn't (which would cause has_rtools() to fail, so I'll assume it's 
not in yours) you can add it temporarily using

Sys.setenv(PATH = paste(Sys.getenv("PATH"), 
"\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40/usr/bin", sep = ";"))

For a permanent addition you need to edit the system PATH setting.  You 
should probably ask an admin to do that for you.

Duncan Murdoch


On 02/12/2020 9:14 a.m., Jeff Reichman wrote:
> r-help Forum
> 
>   
> 
> My employer has not yet approved R/RStudio but has allowed me to run
> R/RStudio from profile.  I need to add RTools but not sure I can run RTools
> from the same location.
> 
> So I unzipped Rtools and added the folder to my profile location containing
> R and RStudio and then modified my Rprofile adding a third path to the
> RTools folder as follows:
> 
>   
> 
> # my custom stuff
> 
> myPaths <- c(.libPaths(), "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40
> <file://gold/home/ndw003/reichmjs/MyDocs/R/rtools40> ")
> 
> .libPaths(myPaths)
> 
>   
> 
> Not sure if this is the best method but seems to work;
> 
>   
> 
>> .libPaths()
> 
> [1] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/win-library/4.0
> <file://gold/home/ndw003/reichmjs/MyDocs/R/win-library/4.0> "
> 
> [2] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/R-40.3/library
> <file://gold/home/ndw003/reichmjs/MyDocs/R/R-40.3/library> "
> 
> [3] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40
> <file://gold/home/ndw003/reichmjs/MyDocs/R/rtools40> "
> 
>   
> 
> except when I run
> 
>   
> 
>> has_rtools()
> 
> WARNING: Rtools is required to build R packages, but is not currently
> installed.
> 
>   
> 
> Please download and install Rtools 4.0 from
> https://cran.r-project.org/bin/windows/Rtools/.
> 
>   
> 
> I am assuming R isn't seeing Rtools
> 
>   
> 
> So can I run Rtools from the same profile location as R and RStudio? IF so
> what do I need to do?
> 
>   
> 
> Jeff Reichman
> 
>   
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec  2 16:33:09 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 02 Dec 2020 07:33:09 -0800
Subject: [R] Add a third .libPath
In-Reply-To: <3bbf8f0c-29db-bc67-6112-099f86104e18@gmail.com>
References: <001001d6c8b5$80629b30$8127d190$.ref@sbcglobal.net>
 <001001d6c8b5$80629b30$8127d190$@sbcglobal.net>
 <3bbf8f0c-29db-bc67-6112-099f86104e18@gmail.com>
Message-ID: <673B4966-3ABC-4C2A-8F47-DE80A41EE8B4@dcn.davis.ca.us>

Current versions of Windows support user environment variables also, so having Administrator change the PATH should not be necessary.

On December 2, 2020 7:20:16 AM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>You are mixing up two different things.
>
>The .libPaths() function returns paths where R searches for R packages.
>
>Rtools is not an R package, it is a collection of utilities and support
>
>files to run in Windows.
>
>For Rtools to be found, you need to add it to the Windows PATH
>variable, 
>not to .libPaths().  You can see the current value of PATH by running 
>this in R:
>
>Sys.getenv("PATH")
>
>This will give a long string variable with various directories
>separated 
>by semicolons.  You want to make sure it contains the Rtools40 
>executable directory (typically "C:/Rtools40/usr/bin", though for you
>it 
>might be "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40/usr/bin"). 
>If 
>it doesn't (which would cause has_rtools() to fail, so I'll assume it's
>
>not in yours) you can add it temporarily using
>
>Sys.setenv(PATH = paste(Sys.getenv("PATH"), 
>"\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40/usr/bin", sep = ";"))
>
>For a permanent addition you need to edit the system PATH setting.  You
>
>should probably ask an admin to do that for you.
>
>Duncan Murdoch
>
>
>On 02/12/2020 9:14 a.m., Jeff Reichman wrote:
>> r-help Forum
>> 
>>   
>> 
>> My employer has not yet approved R/RStudio but has allowed me to run
>> R/RStudio from profile.  I need to add RTools but not sure I can run
>RTools
>> from the same location.
>> 
>> So I unzipped Rtools and added the folder to my profile location
>containing
>> R and RStudio and then modified my Rprofile adding a third path to
>the
>> RTools folder as follows:
>> 
>>   
>> 
>> # my custom stuff
>> 
>> myPaths <- c(.libPaths(),
>"\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40
>> <file://gold/home/ndw003/reichmjs/MyDocs/R/rtools40> ")
>> 
>> .libPaths(myPaths)
>> 
>>   
>> 
>> Not sure if this is the best method but seems to work;
>> 
>>   
>> 
>>> .libPaths()
>> 
>> [1] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/win-library/4.0
>> <file://gold/home/ndw003/reichmjs/MyDocs/R/win-library/4.0> "
>> 
>> [2] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/R-40.3/library
>> <file://gold/home/ndw003/reichmjs/MyDocs/R/R-40.3/library> "
>> 
>> [3] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40
>> <file://gold/home/ndw003/reichmjs/MyDocs/R/rtools40> "
>> 
>>   
>> 
>> except when I run
>> 
>>   
>> 
>>> has_rtools()
>> 
>> WARNING: Rtools is required to build R packages, but is not currently
>> installed.
>> 
>>   
>> 
>> Please download and install Rtools 4.0 from
>> https://cran.r-project.org/bin/windows/Rtools/.
>> 
>>   
>> 
>> I am assuming R isn't seeing Rtools
>> 
>>   
>> 
>> So can I run Rtools from the same profile location as R and RStudio?
>IF so
>> what do I need to do?
>> 
>>   
>> 
>> Jeff Reichman
>> 
>>   
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Dec  2 17:08:00 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 2 Dec 2020 10:08:00 -0600
Subject: [R] Add a third .libPath
In-Reply-To: <3bbf8f0c-29db-bc67-6112-099f86104e18@gmail.com>
References: <001001d6c8b5$80629b30$8127d190$.ref@sbcglobal.net>
 <001001d6c8b5$80629b30$8127d190$@sbcglobal.net>
 <3bbf8f0c-29db-bc67-6112-099f86104e18@gmail.com>
Message-ID: <005d01d6c8c5$4f7330b0$ee599210$@sbcglobal.net>

Duncan

Yea sort of knew that (lib path) but was hoping .... Anyway I'm sure our IT folks will allow your suggestion while they go about their actions to cert R / RStudio.

Jeff Newmiller provided another option too.

Jeff

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Wednesday, December 2, 2020 9:20 AM
To: reichmanj at sbcglobal.net; r-help at r-project.org
Subject: Re: [R] Add a third .libPath

You are mixing up two different things.

The .libPaths() function returns paths where R searches for R packages.

Rtools is not an R package, it is a collection of utilities and support files to run in Windows.

For Rtools to be found, you need to add it to the Windows PATH variable, not to .libPaths().  You can see the current value of PATH by running this in R:

Sys.getenv("PATH")

This will give a long string variable with various directories separated by semicolons.  You want to make sure it contains the Rtools40 executable directory (typically "C:/Rtools40/usr/bin", though for you it might be "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40/usr/bin").  If it doesn't (which would cause has_rtools() to fail, so I'll assume it's not in yours) you can add it temporarily using

Sys.setenv(PATH = paste(Sys.getenv("PATH"), "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40/usr/bin", sep = ";"))

For a permanent addition you need to edit the system PATH setting.  You should probably ask an admin to do that for you.

Duncan Murdoch


On 02/12/2020 9:14 a.m., Jeff Reichman wrote:
> r-help Forum
> 
>   
> 
> My employer has not yet approved R/RStudio but has allowed me to run 
> R/RStudio from profile.  I need to add RTools but not sure I can run 
> RTools from the same location.
> 
> So I unzipped Rtools and added the folder to my profile location 
> containing R and RStudio and then modified my Rprofile adding a third 
> path to the RTools folder as follows:
> 
>   
> 
> # my custom stuff
> 
> myPaths <- c(.libPaths(), 
> "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40
> <file://gold/home/ndw003/reichmjs/MyDocs/R/rtools40> ")
> 
> .libPaths(myPaths)
> 
>   
> 
> Not sure if this is the best method but seems to work;
> 
>   
> 
>> .libPaths()
> 
> [1] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/win-library/4.0
> <file://gold/home/ndw003/reichmjs/MyDocs/R/win-library/4.0> "
> 
> [2] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/R-40.3/library
> <file://gold/home/ndw003/reichmjs/MyDocs/R/R-40.3/library> "
> 
> [3] "\\\\gold/home/ndw003/reichmjs/MyDocs/R/rtools40
> <file://gold/home/ndw003/reichmjs/MyDocs/R/rtools40> "
> 
>   
> 
> except when I run
> 
>   
> 
>> has_rtools()
> 
> WARNING: Rtools is required to build R packages, but is not currently 
> installed.
> 
>   
> 
> Please download and install Rtools 4.0 from 
> https://cran.r-project.org/bin/windows/Rtools/.
> 
>   
> 
> I am assuming R isn't seeing Rtools
> 
>   
> 
> So can I run Rtools from the same profile location as R and RStudio? 
> IF so what do I need to do?
> 
>   
> 
> Jeff Reichman
> 
>   
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From gm@ne @end|ng |rom kno@o|@co@uk  Wed Dec  2 03:25:33 2020
From: gm@ne @end|ng |rom kno@o|@co@uk (Derek Jones)
Date: Wed, 2 Dec 2020 02:25:33 +0000
Subject: [R] RGB -> CYMK, with consistent colors
In-Reply-To: <CAGAA5bcZMLXm6-3izgs8hw26PKOem_e8zf3D4=YEEyuuZv2MTQ@mail.gmail.com>
References: <rpupql$99c$1@ciao.gmane.io>
 <CAGAA5bfU3vrdCHCfZC9yY8Vb_MENY--BjE=5Pz+paTO98Aa_dg@mail.gmail.com>
 <e8a1008c-82bf-b1a0-953a-bbedccee04a9@knosof.co.uk>
 <CAGAA5betTMJu5yKDev5q2P7sBoTYEcub4y7q-haO7yk5n5v06g@mail.gmail.com>
 <65f2cb57-0b88-9de9-acee-97c224f0d64d@knosof.co.uk>
 <CAGAA5bcZMLXm6-3izgs8hw26PKOem_e8zf3D4=YEEyuuZv2MTQ@mail.gmail.com>
Message-ID: <rq6tut$bqs$1@ciao.gmane.io>

Martin,

> However after some testing.
> I totally agree that CMYK handling in R using pdf(..., colormodel = "cmyk")
> is not correct.

Looking at the source code of the function PostScriptSetCol
in file src/librarygrDevices/src/devPS.c
the conversion to CMYK looks correct.

Looking at the generated pdf (qpdf: https://github.com/qpdf/qpdf is
needed to uncompress the pdf)
the numeric color values look correct, although the pdf contents don't exactly
match those generated by PostScriptSetCol

It is possible the problem is in the conversion that occurs when
displaying/printing a pdf.


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Wed Dec  2 18:53:41 2020
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Wed, 2 Dec 2020 17:53:41 +0000
Subject: [R] change frequency of wind data correctly
Message-ID: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>

Dear list users,
I have wind data with frequency of 10 minutes (three years data). For simplicity let me use only max wind speed.
I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20 and 30 minutes) of each hour.

The simple code here reported works well, but the column "interval" groups data forward, not backward:

init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
mydf$vmax <- round(rnorm(13, 35, 10))
mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
means <- aggregate(vmax ~ interval, mydf, mean)

    data_POSIX                  vmax  interval
1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
...

I should work with

    data_POSIX                  vmax  interval
1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
...


Is there a way to modify this code to groupp data correctly? (I would prefer using only the base package)

Thank you for your help
Stefano



         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Civil Protection - Marche Region
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------

________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
This message was scanned by Libra ESVA and is believed to be clean.


	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Wed Dec  2 22:44:58 2020
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Wed, 2 Dec 2020 15:44:58 -0600 (CST)
Subject: [R] 
 [External] Why is R making a copy-on-modification after using str?
In-Reply-To: <alpine.DEB.2.21.2011301224020.3003@luke-Latitude-7480>
References: <trinity-4420798e-945f-4280-a3cc-b59fe317de08-1606731160638@3c-app-gmx-bs55>
 <alpine.DEB.2.21.2011301224020.3003@luke-Latitude-7480>
Message-ID: <alpine.DEB.2.21.2012021540290.3003@luke-Latitude-7480>

On Mon, 30 Nov 2020, luke-tierney at uiowa.edu wrote:

> On Mon, 30 Nov 2020, Georg Kindermann wrote:
>
>> Dear list members,
>> 
>> I was wondering why R is making a copy-on-modification after using str.
>> 
>> m <- matrix(1:12, 3)
>> tracemem(m)
>> #[1] "<0x559df861af28>"
>> dim(m) <- 4:3
>> m[1,1] <- 0L
>> m[] <- 12:1
>> str(m)
>> # int [1:4, 1:3] 12 11 10 9 8 7 6 5 4 3 ...
>> dim(m) <- 3:4  #Here after str a copy is made
>> #tracemem[0x559df861af28 -> 0x559df838e4a8]:
>> dim(m) <- 3:4
>> str(m)
>> # int [1:3, 1:4] 12 11 10 9 8 7 6 5 4 3 ...
>> dim(m) <- 3:4 #Here again after str a copy
>> #tracemem[0x559df838e4a8 -> 0x559df82c9d78]:
>
> As of R 4.0.0 it is in some cases possible to reduce reference counts
> internally and so avoid a copy in cases like this. It would be too
> costly to try to detect all cases where a count can be dropped, but it
> this case we can do better. It turns out that the internals of
> pos.to.env were unnecessarily creating an extra reference to the call
> environment (here in a call to exists()). This is fixed in r79528.
> Thanks.
>
>> Also I was wondering why a copy is made when having a Task Callback.
>> 
>> TCB <- addTaskCallback(function(...) TRUE)
>> m <- matrix(1:12, nrow = 3)
>> tracemem(m)
>> #[1] "<0x559dfa79def8>"
>> dim(m) <- 4:3  #Copy on modification
>> #tracemem[0x559dfa79def8 -> 0x559dfa8998e8]:
>> removeTaskCallback(TCB)
>> #[1] TRUE
>> dim(m) <- 4:3  #No copy
>> 
>
> This _may_ be related to references created in the process of
> protecting the return value from evaluation. If so, addressing the
> debug issue raised by Duncan may resolve this. If not, someone will
> have to take a closer look.

It turns out there were some issues with the way calls to the
callbacks were handled. This has been revised in R-devel in r79541.
This example will no longere need to duplicate in R-devel.

Thanks for the report.

luke

>
> Best,
>
> luke
>
>> I am using R version 4.0.3.
>> 
>> Kind regards,
>> Georg
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From drj|m|emon @end|ng |rom gm@||@com  Thu Dec  3 04:10:40 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 3 Dec 2020 14:10:40 +1100
Subject: [R] change frequency of wind data correctly
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
Message-ID: <CA+8X3fWW9xgzkXhQajiTRd5sO6JKtYDLwtZXFBvBJHmH3t-UEA@mail.gmail.com>

Hi Stefano,
I read in your date-time as two separate fields for convenience. You
can split your single field at the space to get the same result.

ssdf<-read.table(text="date_POSIX time_POSIX vmax
 2018-02-01 00:00:00 27
 2018-02-01 00:10:00 41
 2018-02-01 00:20:00 46
 2018-02-01 00:30:00 39
 2018-02-01 00:40:00 34
 2018-02-01 00:50:00 32",
 header=TRUE,stringsAsFactors=FALSE)
# get the time of day as seconds from the time field
ssdf$seconds<-as.numeric(strptime(ssdf$time_POSIX,"%H:%M:%S"))
# subtract whatever current date strptime guesses for the date
ssdf$seconds<-ssdf$seconds-min(ssdf$seconds)
# create an AM/PM variable
ssdf$ampm<-ifelse(ssdf$seconds > 0 & ssdf$seconds <= 1800,"am","pm")
means<-aggregate(vmax~ampm,ssdf,mean)

Jim

On Thu, Dec 3, 2020 at 4:55 AM Stefano Sofia
<stefano.sofia at regione.marche.it> wrote:
>
> Dear list users,
> I have wind data with frequency of 10 minutes (three years data). For simplicity let me use only max wind speed.
> I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20 and 30 minutes) of each hour.
>
> The simple code here reported works well, but the column "interval" groups data forward, not backward:
>
> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> mydf$vmax <- round(rnorm(13, 35, 10))
> mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
> means <- aggregate(vmax ~ interval, mydf, mean)
>
>     data_POSIX                  vmax  interval
> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
> 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
> 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
> ...
>
> I should work with
>
>     data_POSIX                  vmax  interval
> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
> 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
> 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
> ...
>
>
> Is there a way to modify this code to groupp data correctly? (I would prefer using only the base package)
>
> Thank you for your help
> Stefano
>
>
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Civil Protection - Marche Region
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>
> --
> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> This message was scanned by Libra ESVA and is believed to be clean.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Thu Dec  3 04:41:06 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 3 Dec 2020 14:41:06 +1100
Subject: [R] change frequency of wind data correctly
In-Reply-To: <CA+8X3fWW9xgzkXhQajiTRd5sO6JKtYDLwtZXFBvBJHmH3t-UEA@mail.gmail.com>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
 <CA+8X3fWW9xgzkXhQajiTRd5sO6JKtYDLwtZXFBvBJHmH3t-UEA@mail.gmail.com>
Message-ID: <CA+8X3fWrKHrF1PWHcPZ26Z-0AEGYvLTFK20x4Fk1+7GPVbkdQg@mail.gmail.com>

Hi again,
Didn't realize that the example didn't even span a full day.

ssdf<-read.table(text="date_POSIX time_POSIX vmax
 2018-02-01 00:00:00 27
 2018-02-01 00:10:00 41
 2018-02-01 00:20:00 46
 2018-02-01 00:30:00 39
 2018-02-01 00:40:00 34
 2018-02-01 00:50:00 32
 2018-02-01 01:00:00 37
 2018-02-01 01:10:00 31
 2018-02-01 01:20:00 26
 2018-02-01 01:30:00 29
 2018-02-01 01:40:00 24
 2018-02-01 01:50:00 35",
 header=TRUE,stringsAsFactors=FALSE)
# extract the hour
ssdf$hour<-
 as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",1)))
# get the time of day as seconds from the time field
ssdf$mins<-
 as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",2)))
# create an AM/PM variable
ssdf$ampm<-ifelse(ssdf$mins > 0 & ssdf$mins <= 30,"am","pm")
# drop first row
ssdf<-ssdf[-1,]
means<-aggregate(vmax~hour+ampm,ssdf,mean)

This does a full day. To do more, add the date_POSIX field to the
aggregate command. If you have the date and time in one field you'll
have to split that. That will distinguish the AM/PM means in each day
as well as hour.

Jim

On Thu, Dec 3, 2020 at 2:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Stefano,
> I read in your date-time as two separate fields for convenience. You
> can split your single field at the space to get the same result.
>
> ssdf<-read.table(text="date_POSIX time_POSIX vmax
>  2018-02-01 00:00:00 27
>  2018-02-01 00:10:00 41
>  2018-02-01 00:20:00 46
>  2018-02-01 00:30:00 39
>  2018-02-01 00:40:00 34
>  2018-02-01 00:50:00 32",
>  header=TRUE,stringsAsFactors=FALSE)
> # get the time of day as seconds from the time field
> ssdf$seconds<-as.numeric(strptime(ssdf$time_POSIX,"%H:%M:%S"))
> # subtract whatever current date strptime guesses for the date
> ssdf$seconds<-ssdf$seconds-min(ssdf$seconds)
> # create an AM/PM variable
> ssdf$ampm<-ifelse(ssdf$seconds > 0 & ssdf$seconds <= 1800,"am","pm")
> means<-aggregate(vmax~ampm,ssdf,mean)
>
> Jim
>
> On Thu, Dec 3, 2020 at 4:55 AM Stefano Sofia
> <stefano.sofia at regione.marche.it> wrote:
> >
> > Dear list users,
> > I have wind data with frequency of 10 minutes (three years data). For simplicity let me use only max wind speed.
> > I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20 and 30 minutes) of each hour.
> >
> > The simple code here reported works well, but the column "interval" groups data forward, not backward:
> >
> > init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> > fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> > mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> > mydf$vmax <- round(rnorm(13, 35, 10))
> > mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
> > means <- aggregate(vmax ~ interval, mydf, mean)
> >
> >     data_POSIX                  vmax  interval
> > 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> > 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
> > 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
> > 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> > 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
> > 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
> > ...
> >
> > I should work with
> >
> >     data_POSIX                  vmax  interval
> > 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> > 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
> > 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
> > 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> > 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
> > 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
> > ...
> >
> >
> > Is there a way to modify this code to groupp data correctly? (I would prefer using only the base package)
> >
> > Thank you for your help
> > Stefano
> >
> >
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Civil Protection - Marche Region
> > Meteo Section
> > Snow Section
> > Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> >
> > --
> > Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Thu Dec  3 10:23:22 2020
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Thu, 3 Dec 2020 09:23:22 +0000
Subject: [R] change frequency of wind data correctly
In-Reply-To: <CA+8X3fWrKHrF1PWHcPZ26Z-0AEGYvLTFK20x4Fk1+7GPVbkdQg@mail.gmail.com>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
 <CA+8X3fWW9xgzkXhQajiTRd5sO6JKtYDLwtZXFBvBJHmH3t-UEA@mail.gmail.com>,
 <CA+8X3fWrKHrF1PWHcPZ26Z-0AEGYvLTFK20x4Fk1+7GPVbkdQg@mail.gmail.com>
Message-ID: <8B435C9568170B469AE31E8891E8CC4F80A02FBA@ESINO.regionemarche.intra>

Thank you Jim for your solution.
I understood everything. As you say, splitting the POSIXct field is the key.

I apologise for not having used dput. I never used it but I will get aknowleged with it in a short time.

Thank you
Stefano

         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Civil Protection - Marche Region
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------

________________________________________
Da: Jim Lemon [drjimlemon at gmail.com]
Inviato: gioved? 3 dicembre 2020 4.41
A: Stefano Sofia
Cc: r-help mailing list
Oggetto: Re: [R] change frequency of wind data correctly

Hi again,
Didn't realize that the example didn't even span a full day.

ssdf<-read.table(text="date_POSIX time_POSIX vmax
 2018-02-01 00:00:00 27
 2018-02-01 00:10:00 41
 2018-02-01 00:20:00 46
 2018-02-01 00:30:00 39
 2018-02-01 00:40:00 34
 2018-02-01 00:50:00 32
 2018-02-01 01:00:00 37
 2018-02-01 01:10:00 31
 2018-02-01 01:20:00 26
 2018-02-01 01:30:00 29
 2018-02-01 01:40:00 24
 2018-02-01 01:50:00 35",
 header=TRUE,stringsAsFactors=FALSE)
# extract the hour
ssdf$hour<-
 as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",1)))
# get the time of day as seconds from the time field
ssdf$mins<-
 as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",2)))
# create an AM/PM variable
ssdf$ampm<-ifelse(ssdf$mins > 0 & ssdf$mins <= 30,"am","pm")
# drop first row
ssdf<-ssdf[-1,]
means<-aggregate(vmax~hour+ampm,ssdf,mean)

This does a full day. To do more, add the date_POSIX field to the
aggregate command. If you have the date and time in one field you'll
have to split that. That will distinguish the AM/PM means in each day
as well as hour.

Jim

On Thu, Dec 3, 2020 at 2:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Stefano,
> I read in your date-time as two separate fields for convenience. You
> can split your single field at the space to get the same result.
>
> ssdf<-read.table(text="date_POSIX time_POSIX vmax
>  2018-02-01 00:00:00 27
>  2018-02-01 00:10:00 41
>  2018-02-01 00:20:00 46
>  2018-02-01 00:30:00 39
>  2018-02-01 00:40:00 34
>  2018-02-01 00:50:00 32",
>  header=TRUE,stringsAsFactors=FALSE)
> # get the time of day as seconds from the time field
> ssdf$seconds<-as.numeric(strptime(ssdf$time_POSIX,"%H:%M:%S"))
> # subtract whatever current date strptime guesses for the date
> ssdf$seconds<-ssdf$seconds-min(ssdf$seconds)
> # create an AM/PM variable
> ssdf$ampm<-ifelse(ssdf$seconds > 0 & ssdf$seconds <= 1800,"am","pm")
> means<-aggregate(vmax~ampm,ssdf,mean)
>
> Jim
>
> On Thu, Dec 3, 2020 at 4:55 AM Stefano Sofia
> <stefano.sofia at regione.marche.it> wrote:
> >
> > Dear list users,
> > I have wind data with frequency of 10 minutes (three years data). For simplicity let me use only max wind speed.
> > I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20 and 30 minutes) of each hour.
> >
> > The simple code here reported works well, but the column "interval" groups data forward, not backward:
> >
> > init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> > fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> > mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> > mydf$vmax <- round(rnorm(13, 35, 10))
> > mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
> > means <- aggregate(vmax ~ interval, mydf, mean)
> >
> >     data_POSIX                  vmax  interval
> > 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> > 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
> > 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
> > 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> > 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
> > 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
> > ...
> >
> > I should work with
> >
> >     data_POSIX                  vmax  interval
> > 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> > 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
> > 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
> > 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> > 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
> > 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
> > ...
> >
> >
> > Is there a way to modify this code to groupp data correctly? (I would prefer using only the base package)
> >
> > Thank you for your help
> > Stefano
> >
> >
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Civil Protection - Marche Region
> > Meteo Section
> > Snow Section
> > Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> >
> > --
> > Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >  https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=52342f8a&h=d46bc785&f=y&p=y
> > PLEASE do read the posting guide  https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=52342f8a&h=9b25bfd5&f=y&p=y
> > and provide commented, minimal, self-contained, reproducible code.

--

Questo messaggio  stato analizzato con Libra ESVA ed  risultato non infetto.


________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
This message was scanned by Libra ESVA and is believed to be clean.


From jo@e@t@d|@t|co @end|ng |rom gm@||@com  Thu Dec  3 12:06:46 2020
From: jo@e@t@d|@t|co @end|ng |rom gm@||@com (=?UTF-8?Q?Jos=C3=A9_Luis_Aguilar?=)
Date: Thu, 3 Dec 2020 12:06:46 +0100
Subject: [R] Download data ph soil
Message-ID: <CACt-d0jb_T5A54OyVuj-FzHvhYvgLdBqsY7RqOcZ7VLhTsk3Hg@mail.gmail.com>

Dear list members,

I am looking for soil pH data for Europe and Africa, but I don't.
I need them to set up a map in R for my research.

Please, someone where to find this data in tif formats preferably.

thank you

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Dec  3 12:40:35 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 3 Dec 2020 22:40:35 +1100
Subject: [R] Download data ph soil
In-Reply-To: <CACt-d0jb_T5A54OyVuj-FzHvhYvgLdBqsY7RqOcZ7VLhTsk3Hg@mail.gmail.com>
References: <CACt-d0jb_T5A54OyVuj-FzHvhYvgLdBqsY7RqOcZ7VLhTsk3Hg@mail.gmail.com>
Message-ID: <CA+8X3fU12-6B3Huc7pV8NY3kjDt7ZKpwQy-XLxzkBvWUx_wU-Q@mail.gmail.com>

Hi Jose,
Searching for "soil pH data" reveals a bucketload of sites with this
sort of data in lots of formats.

Jim



On Thu, Dec 3, 2020 at 10:07 PM Jos? Luis Aguilar
<josestadistico at gmail.com> wrote:
>
> Dear list members,
>
> I am looking for soil pH data for Europe and Africa, but I don't.
> I need them to set up a map in R for my research.
>
> Please, someone where to find this data in tif formats preferably.
>
> thank you
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From d|ego@hern@ngomezherrero @end|ng |rom gm@||@com  Thu Dec  3 10:10:56 2020
From: d|ego@hern@ngomezherrero @end|ng |rom gm@||@com (=?UTF-8?Q?Diego_Hernang=C3=B3mez_Herrero?=)
Date: Thu, 3 Dec 2020 10:10:56 +0100
Subject: [R] [R-pkgs] mapSpain on CRAN
Message-ID: <CAA-ibaw1T1uvV+DTYSmq1HZQZkH-sCcW3WMvXm+Y2-=sxzv8oQ@mail.gmail.com>

Dear R users:

mapSpain is now available on CRAN. This package provides the administrative
boundaries of Spain at several levels: all NUTS levels, Autonomous
Communities , Provinces and municipalities (sf objects).

The package also has the ability of downloading WMS/WMTS geotagged images
of different public organisms of Spain for static  maps, a leaflet plugin
for the same providers to use with R leaflet and many other features.

Full documentation and vignettes on:

https://dieghernan.github.io/mapSpain/


Hope this can be useful, regards
-- 



Have a nice day!

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From ||@| @end|ng |rom m@||@n|h@gov  Thu Dec  3 20:25:24 2020
From: ||@| @end|ng |rom m@||@n|h@gov (Li, Aiguo (NIH/NCI) [E])
Date: Thu, 3 Dec 2020 19:25:24 +0000
Subject: [R] A general question about targeted sequencing data analysis
Message-ID: <DM6PR09MB5303524B04E525B3E4E43A38EFF20@DM6PR09MB5303.namprd09.prod.outlook.com>

Dear all,

One of our PIs has a targeted sequencing dataset generated a while ago.  He is interested in finding out VAF of a group of genes.  This is the first dataset of this types we have.  I would be appreciative for any suggestions on pipelines for analyzing this type of data.

Thanks

Anna

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Dec  4 01:09:24 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 03 Dec 2020 16:09:24 -0800
Subject: [R] A general question about targeted sequencing data analysis
In-Reply-To: <DM6PR09MB5303524B04E525B3E4E43A38EFF20@DM6PR09MB5303.namprd09.prod.outlook.com>
References: <DM6PR09MB5303524B04E525B3E4E43A38EFF20@DM6PR09MB5303.namprd09.prod.outlook.com>
Message-ID: <E8CB3980-AAE3-4F16-8026-A8F8E40F8675@dcn.davis.ca.us>

My suggestion would be to ask this question in a forum devoted to that topic, such as the Bioconductor forum [1].

[1] https://www.bioconductor.org/help/support/

On December 3, 2020 11:25:24 AM PST, "Li, Aiguo (NIH/NCI) [E] via R-help" <r-help at r-project.org> wrote:
>Dear all,
>
>One of our PIs has a targeted sequencing dataset generated a while ago.
>He is interested in finding out VAF of a group of genes.  This is the
>first dataset of this types we have.  I would be appreciative for any
>suggestions on pipelines for analyzing this type of data.
>
>Thanks
>
>Anna
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Fri Dec  4 04:12:15 2020
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Fri, 4 Dec 2020 08:12:15 +0500
Subject: [R] Save Results in svg format
Message-ID: <CAG0CrLi8K6_eCzn6169iEdjju48VSvDNzE-dfhSouxHWXK7euQ@mail.gmail.com>

#Loading the required libraries
library(ape)
library(phangorn)
library(seqinr)
#Importing the required file
align_5 <- read.alignment("C:/Users/VAMSI/align 5.fasta", format = "fast")
align_119 <- read.alignment("C:/Users/VAMSI/align 119.fasta", format = "fasta")
Computing the distance matrix for both UPGMA and NJ algorithms implementation.
 matrix_5x5 <- dist.alignment(align_5, matrix = "identity")
summary(matrix_5x5)

matrix_119x119 <- dist.alignment(align_119, matrix = "identity")
summary(matrix_119x119)
#Implementation of UPGMA algorithm for a small matrix (5x5) and entire
matrix (119x119)
UPGMA_5x5 <- upgma(matrix_5x5)
UPGMA_119x119 <- upgma(matrix_119x119)
summary(UPGMA_5x5)

summary(UPGMA_119x119)
#Implementation of NJ algorithm for a small matrix (5x5) and entire
matrix (119x119)
NJ_5x5 <- NJ(matrix_5x5)
NJ_119x119 <- NJ(matrix_119x119)
summary(NJ_5x5)

summary(NJ_119x119)


I have done this whole analysis but don't know how can I  the save my
tree file in svg or some other image format

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Dec  4 04:24:59 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 3 Dec 2020 19:24:59 -0800
Subject: [R] Save Results in svg format
In-Reply-To: <CAG0CrLi8K6_eCzn6169iEdjju48VSvDNzE-dfhSouxHWXK7euQ@mail.gmail.com>
References: <CAG0CrLi8K6_eCzn6169iEdjju48VSvDNzE-dfhSouxHWXK7euQ@mail.gmail.com>
Message-ID: <CAGxFJbREba1LuEvHxM9Eo_nZT04=eNsBUdOc76r-K_PmLsinew@mail.gmail.com>

Warning: I have basically no idea what you are doing. I presume that you
have consulted ?svg, however. If not , you should probably do so.

Also, a search on "save as svg" on rseek.org  brought up the svglite
package, among other resources. You might want to see what that offers.

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Dec 3, 2020 at 7:12 PM Anas Jamshed <anasjamshed1994 at gmail.com>
wrote:

> #Loading the required libraries
> library(ape)
> library(phangorn)
> library(seqinr)
> #Importing the required file
> align_5 <- read.alignment("C:/Users/VAMSI/align 5.fasta", format = "fast")
> align_119 <- read.alignment("C:/Users/VAMSI/align 119.fasta", format =
> "fasta")
> Computing the distance matrix for both UPGMA and NJ algorithms
> implementation.
>  matrix_5x5 <- dist.alignment(align_5, matrix = "identity")
> summary(matrix_5x5)
>
> matrix_119x119 <- dist.alignment(align_119, matrix = "identity")
> summary(matrix_119x119)
> #Implementation of UPGMA algorithm for a small matrix (5x5) and entire
> matrix (119x119)
> UPGMA_5x5 <- upgma(matrix_5x5)
> UPGMA_119x119 <- upgma(matrix_119x119)
> summary(UPGMA_5x5)
>
> summary(UPGMA_119x119)
> #Implementation of NJ algorithm for a small matrix (5x5) and entire
> matrix (119x119)
> NJ_5x5 <- NJ(matrix_5x5)
> NJ_119x119 <- NJ(matrix_119x119)
> summary(NJ_5x5)
>
> summary(NJ_119x119)
>
>
> I have done this whole analysis but don't know how can I  the save my
> tree file in svg or some other image format
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @@m@nz@h|d22 @end|ng |rom gm@||@com  Fri Dec  4 04:54:16 2020
From: @@m@nz@h|d22 @end|ng |rom gm@||@com (Saman Zahid)
Date: Fri, 4 Dec 2020 04:54:16 +0100
Subject: [R] Is there any criteria to compare different models?
Message-ID: <CADdX5hkG9wbXjfL16M3xKgNgmJWxz2+oCwkKUUc79sjtAGgwOg@mail.gmail.com>

Hi,

I am trying to make comparison between the lm, gam(mgcv) and lme(nlme)
models. The problem is I am not able to find a single criterion on which
these 3 models are comparable.

I am using method "ML" for both gam and lme, yet the AIC and BIC formulas
differ due to the degrees of freedom.

Is there any statistical way to compare these three models?

I will really appreciate your help.

Thanks
Saman Zahid

	[[alternative HTML version deleted]]


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Fri Dec  4 05:16:25 2020
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Fri, 4 Dec 2020 09:16:25 +0500
Subject: [R] How to save Results in svg format
Message-ID: <CAG0CrLjntRNJe0FvbA9FOj3F+GVFpE=zg+ar35V_KGf2CBJ9oA@mail.gmail.com>

#Loading the required libraries
library(ape)
library(phangorn)
library(seqinr)
#Importing the required file
align_5 <- read.alignment("C:/Users/VAMSI/align 5.fasta", format = "fast")
align_119 <- read.alignment("C:/Users/VAMSI/align 119.fasta", format = "fasta")
Computing the distance matrix for both UPGMA and NJ algorithms implementation.
 matrix_5x5 <- dist.alignment(align_5, matrix = "identity")
summary(matrix_5x5)

matrix_119x119 <- dist.alignment(align_119, matrix = "identity")
summary(matrix_119x119)
#Implementation of UPGMA algorithm for a small matrix (5x5) and entire
matrix (119x119)
UPGMA_5x5 <- upgma(matrix_5x5)
UPGMA_119x119 <- upgma(matrix_119x119)
summary(UPGMA_5x5)

summary(UPGMA_119x119)
#Implementation of NJ algorithm for a small matrix (5x5) and entire
matrix (119x119)
NJ_5x5 <- NJ(matrix_5x5)
NJ_119x119 <- NJ(matrix_119x119)
summary(NJ_5x5)

summary(NJ_119x119)


I have done this whole analysis but don't know how can I  the save my
tree file in svg or some other image format . In the avove script , I
am applying the phylogenetic algorithm on the distance matrix which I
have created through fasta file

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Dec  4 06:01:45 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 3 Dec 2020 21:01:45 -0800
Subject: [R] Is there any criteria to compare different models?
In-Reply-To: <CADdX5hkG9wbXjfL16M3xKgNgmJWxz2+oCwkKUUc79sjtAGgwOg@mail.gmail.com>
References: <CADdX5hkG9wbXjfL16M3xKgNgmJWxz2+oCwkKUUc79sjtAGgwOg@mail.gmail.com>
Message-ID: <CAGxFJbT9UFkafQE98gZM4zSAoL06wwbu9fGCvEiKHC8BvXToqQ@mail.gmail.com>

Per the posting guide linked below (have you read it??):

"*Questions about statistics:* The R mailing lists are primarily intended
for questions and discussion about the R software. However, questions about
statistical methodology are sometimes posted. If the question is well-asked
and of interest to someone on the list, it *may* elicit an informative
up-to-date answer. See also the Usenet groups sci.stat.consult (applied
statistics and consulting) and sci.stat.math (mathematical stat and
probability).*"*

So don't be surprised if you don't receive any response.

You might also try posting at stats.stackexchange.com. No guarantees there
either.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Dec 3, 2020 at 8:09 PM Saman Zahid <samanzahid22 at gmail.com> wrote:

> Hi,
>
> I am trying to make comparison between the lm, gam(mgcv) and lme(nlme)
> models. The problem is I am not able to find a single criterion on which
> these 3 models are comparable.
>
> I am using method "ML" for both gam and lme, yet the AIC and BIC formulas
> differ due to the degrees of freedom.
>
> Is there any statistical way to compare these three models?
>
> I will really appreciate your help.
>
> Thanks
> Saman Zahid
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Fri Dec  4 06:10:14 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 3 Dec 2020 21:10:14 -0800
Subject: [R] Save Results in svg format
In-Reply-To: <CAG0CrLi8K6_eCzn6169iEdjju48VSvDNzE-dfhSouxHWXK7euQ@mail.gmail.com>
References: <CAG0CrLi8K6_eCzn6169iEdjju48VSvDNzE-dfhSouxHWXK7euQ@mail.gmail.com>
Message-ID: <ff123b2a-83f2-4914-31fe-56f02ecf7a6e@comcast.net>


On 12/3/20 7:12 PM, Anas Jamshed wrote:
> #Loading the required libraries
> library(ape)
> library(phangorn)
> library(seqinr)
> #Importing the required file
> align_5 <- read.alignment("C:/Users/VAMSI/align 5.fasta", format = "fast")
> align_119 <- read.alignment("C:/Users/VAMSI/align 119.fasta", format = "fasta")
> Computing the distance matrix for both UPGMA and NJ algorithms implementation.
>   matrix_5x5 <- dist.alignment(align_5, matrix = "identity")
> summary(matrix_5x5)
>
> matrix_119x119 <- dist.alignment(align_119, matrix = "identity")
> summary(matrix_119x119)
> #Implementation of UPGMA algorithm for a small matrix (5x5) and entire
> matrix (119x119)
> UPGMA_5x5 <- upgma(matrix_5x5)
> UPGMA_119x119 <- upgma(matrix_119x119)
> summary(UPGMA_5x5)
>
> summary(UPGMA_119x119)
> #Implementation of NJ algorithm for a small matrix (5x5) and entire
> matrix (119x119)
> NJ_5x5 <- NJ(matrix_5x5)
> NJ_119x119 <- NJ(matrix_119x119)
> summary(NJ_5x5)
>
> summary(NJ_119x119)
>
>
> I have done this whole analysis but don't know how can I  the save my
> tree file in svg or some other image format


SVG format is for graphics. I don't see any R graphics calls or anything 
I recognize as a "tree". (Perhaps the summary function for objects 
returned from `upgma` include graphics? I surely do not know.)

Cairo graphics is supported in the grDevices package. It should be 
loaded by default. Have your tried this at your console:


?svg


-- 

David.

>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dc@r|@on @end|ng |rom t@mu@edu  Fri Dec  4 06:21:37 2020
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Thu, 3 Dec 2020 23:21:37 -0600
Subject: [R] How to save Results in svg format
In-Reply-To: <CAG0CrLjntRNJe0FvbA9FOj3F+GVFpE=zg+ar35V_KGf2CBJ9oA@mail.gmail.com>
References: <CAG0CrLjntRNJe0FvbA9FOj3F+GVFpE=zg+ar35V_KGf2CBJ9oA@mail.gmail.com>
Message-ID: <CAE-dL2q-KV=gBW1DyUJPoPF-WVdAkZK=HdeaF7O8A1T82VhmXw@mail.gmail.com>

If you look at the examples on the manual pages for the upgma() and NJ()
functions you will see that the results are generally sent to the plot()
function. To save that graph as an .svg file you need to open a graphics
device using the svg() function, plot the data, and close the graphics
device. You probably need something like the following:

svg("UPGMA_5x5.svg")
plot(UPGMA_5x5)
dev.off()

or

svg("NJ_119x119.svg")
plot(NJ_119x119)
dev.off()

There are numerous arguments that set various details for the plot that you
should look at (?svg).

David L Carlson
Texas A&M University


On Thu, Dec 3, 2020 at 10:24 PM Anas Jamshed <anasjamshed1994 at gmail.com>
wrote:

> #Loading the required libraries
> library(ape)
> library(phangorn)
> library(seqinr)
> #Importing the required file
> align_5 <- read.alignment("C:/Users/VAMSI/align 5.fasta", format = "fast")
> align_119 <- read.alignment("C:/Users/VAMSI/align 119.fasta", format =
> "fasta")
> Computing the distance matrix for both UPGMA and NJ algorithms
> implementation.
>  matrix_5x5 <- dist.alignment(align_5, matrix = "identity")
> summary(matrix_5x5)
>
> matrix_119x119 <- dist.alignment(align_119, matrix = "identity")
> summary(matrix_119x119)
> #Implementation of UPGMA algorithm for a small matrix (5x5) and entire
> matrix (119x119)
> UPGMA_5x5 <- upgma(matrix_5x5)
> UPGMA_119x119 <- upgma(matrix_119x119)
> summary(UPGMA_5x5)
>
> summary(UPGMA_119x119)
> #Implementation of NJ algorithm for a small matrix (5x5) and entire
> matrix (119x119)
> NJ_5x5 <- NJ(matrix_5x5)
> NJ_119x119 <- NJ(matrix_119x119)
> summary(NJ_5x5)
>
> summary(NJ_119x119)
>
>
> I have done this whole analysis but don't know how can I  the save my
> tree file in svg or some other image format . In the avove script , I
> am applying the phylogenetic algorithm on the distance matrix which I
> have created through fasta file
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!T-8PRCLc041aD-rW1ehtb14tfQAVpWdpBddf_q6Raeho0RbG9wDodEK_QDpGMCc$
> PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!T-8PRCLc041aD-rW1ehtb14tfQAVpWdpBddf_q6Raeho0RbG9wDodEK_1H9sJRs$
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Dec  4 09:54:52 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 4 Dec 2020 02:54:52 -0600
Subject: [R] How to save Results in svg format
In-Reply-To: <CAE-dL2q-KV=gBW1DyUJPoPF-WVdAkZK=HdeaF7O8A1T82VhmXw@mail.gmail.com>
References: <CAG0CrLjntRNJe0FvbA9FOj3F+GVFpE=zg+ar35V_KGf2CBJ9oA@mail.gmail.com>
 <CAE-dL2q-KV=gBW1DyUJPoPF-WVdAkZK=HdeaF7O8A1T82VhmXw@mail.gmail.com>
Message-ID: <7cb5c7e3-fc1d-969a-5d9d-2edd4f1103ca@effectivedefense.org>

	  I often have trouble with font sizes in the svg files, because they 
rarely are the same as what I see on the screen.  I then have to read 
the documentation for "par" and play with the cex, cex.axis, cex.lab, 
cex.main, and cex.sub parameters until I get what I want in the svg 
file.  I may also need to play with the "mar" argument in "par". 
Occasionally, I may also have to research some of the other plot 
parameters.


	  In some cases, I may also need a png file.  I can use "png" in the 
same way as "svg", but the cex, etc., parameters must be set 
differently.  I've recently learned how to open an svg file in the free 
open-source software GIMP and adjust the "Resolution" from the 90 
pixels/in default to something more like 300 to get what I want.  I 
couldn't import an svg file recently into a Google Doc.  The 90 pixels 
per inch default conversion didn't look very clean and sharp after 
imported into a Google Doc.  I tried 600 pixels/in and found that Google 
Doc looked like it accepted it at first.  However, when I went back 
later, I found that it had subsequently malfunctioned.  I tried 300 
pixels/in, and I think that worked, though I'm not 100% certain.


	  hope this helps.
	  Spencer Graves


On 2020-12-03 23:21, David Carlson wrote:
> If you look at the examples on the manual pages for the upgma() and NJ()
> functions you will see that the results are generally sent to the plot()
> function. To save that graph as an .svg file you need to open a graphics
> device using the svg() function, plot the data, and close the graphics
> device. You probably need something like the following:
> 
> svg("UPGMA_5x5.svg")
> plot(UPGMA_5x5)
> dev.off()
> 
> or
> 
> svg("NJ_119x119.svg")
> plot(NJ_119x119)
> dev.off()
> 
> There are numerous arguments that set various details for the plot that you
> should look at (?svg).
> 
> David L Carlson
> Texas A&M University
> 
> 
> On Thu, Dec 3, 2020 at 10:24 PM Anas Jamshed <anasjamshed1994 at gmail.com>
> wrote:
> 
>> #Loading the required libraries
>> library(ape)
>> library(phangorn)
>> library(seqinr)
>> #Importing the required file
>> align_5 <- read.alignment("C:/Users/VAMSI/align 5.fasta", format = "fast")
>> align_119 <- read.alignment("C:/Users/VAMSI/align 119.fasta", format =
>> "fasta")
>> Computing the distance matrix for both UPGMA and NJ algorithms
>> implementation.
>>   matrix_5x5 <- dist.alignment(align_5, matrix = "identity")
>> summary(matrix_5x5)
>>
>> matrix_119x119 <- dist.alignment(align_119, matrix = "identity")
>> summary(matrix_119x119)
>> #Implementation of UPGMA algorithm for a small matrix (5x5) and entire
>> matrix (119x119)
>> UPGMA_5x5 <- upgma(matrix_5x5)
>> UPGMA_119x119 <- upgma(matrix_119x119)
>> summary(UPGMA_5x5)
>>
>> summary(UPGMA_119x119)
>> #Implementation of NJ algorithm for a small matrix (5x5) and entire
>> matrix (119x119)
>> NJ_5x5 <- NJ(matrix_5x5)
>> NJ_119x119 <- NJ(matrix_119x119)
>> summary(NJ_5x5)
>>
>> summary(NJ_119x119)
>>
>>
>> I have done this whole analysis but don't know how can I  the save my
>> tree file in svg or some other image format . In the avove script , I
>> am applying the phylogenetic algorithm on the distance matrix which I
>> have created through fasta file
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>
>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!T-8PRCLc041aD-rW1ehtb14tfQAVpWdpBddf_q6Raeho0RbG9wDodEK_QDpGMCc$
>> PLEASE do read the posting guide
>> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!T-8PRCLc041aD-rW1ehtb14tfQAVpWdpBddf_q6Raeho0RbG9wDodEK_1H9sJRs$
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From dc@r|@on @end|ng |rom t@mu@edu  Fri Dec  4 19:08:09 2020
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Fri, 4 Dec 2020 12:08:09 -0600
Subject: [R] How to save Results in svg format
In-Reply-To: <7cb5c7e3-fc1d-969a-5d9d-2edd4f1103ca@effectivedefense.org>
References: <CAG0CrLjntRNJe0FvbA9FOj3F+GVFpE=zg+ar35V_KGf2CBJ9oA@mail.gmail.com>
 <CAE-dL2q-KV=gBW1DyUJPoPF-WVdAkZK=HdeaF7O8A1T82VhmXw@mail.gmail.com>
 <7cb5c7e3-fc1d-969a-5d9d-2edd4f1103ca@effectivedefense.org>
Message-ID: <CAE-dL2pyT-NXVcRFODWUa7fDNcRBWsZggLVZYEDaRqb=M9_99g@mail.gmail.com>

Another option is to open the svg file in Inkscape which is a vector-based
editor. If you are planning to do this and work with the text labels, it is
easier to use svglite() in the package of the same name which draws text as
characters that can be selected and edited more easily than in files saved
with svg(). To see the difference look at the following files in a plain
text editor:

svg("Test.svg")

plot(0:1, 0:1, axes=FALSE, pch="", xlab="", ylab="")

text(.5, .5, "HELLO", cex=5)

dev.off()


library(svglite)

svglite("Testlite.svg")

plot(0:1, 0:1, axes=FALSE, pch="", xlab="", ylab="")

text(.5, .5, "HELLO", cex=5)

dev.off()

David L Carlson

On Fri, Dec 4, 2020 at 2:55 AM Spencer Graves <
spencer.graves at effectivedefense.org> wrote:

>           I often have trouble with font sizes in the svg files, because
> they
> rarely are the same as what I see on the screen.  I then have to read
> the documentation for "par" and play with the cex, cex.axis, cex.lab,
> cex.main, and cex.sub parameters until I get what I want in the svg
> file.  I may also need to play with the "mar" argument in "par".
> Occasionally, I may also have to research some of the other plot
> parameters.
>
>
>           In some cases, I may also need a png file.  I can use "png" in
> the
> same way as "svg", but the cex, etc., parameters must be set
> differently.  I've recently learned how to open an svg file in the free
> open-source software GIMP and adjust the "Resolution" from the 90
> pixels/in default to something more like 300 to get what I want.  I
> couldn't import an svg file recently into a Google Doc.  The 90 pixels
> per inch default conversion didn't look very clean and sharp after
> imported into a Google Doc.  I tried 600 pixels/in and found that Google
> Doc looked like it accepted it at first.  However, when I went back
> later, I found that it had subsequently malfunctioned.  I tried 300
> pixels/in, and I think that worked, though I'm not 100% certain.
>
>
>           hope this helps.
>           Spencer Graves
>
>
> On 2020-12-03 23:21, David Carlson wrote:
> > If you look at the examples on the manual pages for the upgma() and NJ()
> > functions you will see that the results are generally sent to the plot()
> > function. To save that graph as an .svg file you need to open a graphics
> > device using the svg() function, plot the data, and close the graphics
> > device. You probably need something like the following:
> >
> > svg("UPGMA_5x5.svg")
> > plot(UPGMA_5x5)
> > dev.off()
> >
> > or
> >
> > svg("NJ_119x119.svg")
> > plot(NJ_119x119)
> > dev.off()
> >
> > There are numerous arguments that set various details for the plot that
> you
> > should look at (?svg).
> >
> > David L Carlson
> > Texas A&M University
> >
> >
> > On Thu, Dec 3, 2020 at 10:24 PM Anas Jamshed <anasjamshed1994 at gmail.com>
> > wrote:
> >
> >> #Loading the required libraries
> >> library(ape)
> >> library(phangorn)
> >> library(seqinr)
> >> #Importing the required file
> >> align_5 <- read.alignment("C:/Users/VAMSI/align 5.fasta", format =
> "fast")
> >> align_119 <- read.alignment("C:/Users/VAMSI/align 119.fasta", format =
> >> "fasta")
> >> Computing the distance matrix for both UPGMA and NJ algorithms
> >> implementation.
> >>   matrix_5x5 <- dist.alignment(align_5, matrix = "identity")
> >> summary(matrix_5x5)
> >>
> >> matrix_119x119 <- dist.alignment(align_119, matrix = "identity")
> >> summary(matrix_119x119)
> >> #Implementation of UPGMA algorithm for a small matrix (5x5) and entire
> >> matrix (119x119)
> >> UPGMA_5x5 <- upgma(matrix_5x5)
> >> UPGMA_119x119 <- upgma(matrix_119x119)
> >> summary(UPGMA_5x5)
> >>
> >> summary(UPGMA_119x119)
> >> #Implementation of NJ algorithm for a small matrix (5x5) and entire
> >> matrix (119x119)
> >> NJ_5x5 <- NJ(matrix_5x5)
> >> NJ_119x119 <- NJ(matrix_119x119)
> >> summary(NJ_5x5)
> >>
> >> summary(NJ_119x119)
> >>
> >>
> >> I have done this whole analysis but don't know how can I  the save my
> >> tree file in svg or some other image format . In the avove script , I
> >> am applying the phylogenetic algorithm on the distance matrix which I
> >> have created through fasta file
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>
> >>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!T-8PRCLc041aD-rW1ehtb14tfQAVpWdpBddf_q6Raeho0RbG9wDodEK_QDpGMCc$
> >> PLEASE do read the posting guide
> >>
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!T-8PRCLc041aD-rW1ehtb14tfQAVpWdpBddf_q6Raeho0RbG9wDodEK_1H9sJRs$
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!UyfE3I-UOC7kXr5ggtIqqdFbBMGcbykadHewhBNQ1kCTKPtmITMg3Okvr-diJ3Y$
> > PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!UyfE3I-UOC7kXr5ggtIqqdFbBMGcbykadHewhBNQ1kCTKPtmITMg3OkvU0m1rBo$
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!UyfE3I-UOC7kXr5ggtIqqdFbBMGcbykadHewhBNQ1kCTKPtmITMg3Okvr-diJ3Y$
> PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!UyfE3I-UOC7kXr5ggtIqqdFbBMGcbykadHewhBNQ1kCTKPtmITMg3OkvU0m1rBo$
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Sun Dec  6 07:36:50 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sun, 6 Dec 2020 19:36:50 +1300
Subject: [R] graphics::rasterImage and grid::grid.raster,
 doubly upside down images
Message-ID: <CAB8pepwUskxU2ULZHSOs_qjWx_6jakyJoRoRKEVv8hDZ+iOOEg@mail.gmail.com>

Dear list,

I've been writing R-based software for image and spatial data. And
I've decided to support a dual implementation with both base graphics
and grid graphics, and the possibility of other graphics systems
later.

Also, I've decided to plot raster images with the vertical axis
flipped. Which means that each image also needs to be flipped.
(In rasterImage, ybottom/ytop are swapped, and in grid.raster, height
is negative).

This appears to work fine.
However, the help files don't explicitly say that height/etc can be
negative. And then go on to warn users about possible problems.

Given that both functions support scaling, I'm assuming that negative
scaling should be fine. But I thought I'd run it through the list, for
feedback/suggestions on any possible problems that one is likely to
encounter plotting raster images like this.

Examples follow:
(Requires the png package).

#required packages
library (png)
library (grid)

#base graphics wrapper function
base.wrapper <- function (x, y, colm, interpolate)
{   rasterImage (colm, x [1], y [2], x [2], y [1],
        interpolate=interpolate)
}

#grid graphics wrapper function
grid.wrapper <- function (x, y, colm, interpolate)
{   grid.raster (colm, mean (x), mean (y), x [2] - x [1], y [1] - y [2],
        default.units="native", interpolate=interpolate)
}

#create raster object
im <- readPNG (system.file ("img", "Rlogo.png", package="png") )
im <- as.raster (im)

#base graphics example
plot.new ()
plot.window (0:1, 1:0)
base.wrapper (0:1, 0:1, im, FALSE)
axis (2)

#grid graphics example
grid.newpage ()
pushViewport (viewport (xscale=0:1, yscale=1:0, width=0.75, height=0.75) )
grid.wrapper (0:1, 0:1, im, FALSE)
grid.yaxis ()


From bgunter@4567 @end|ng |rom gm@||@com  Sun Dec  6 17:23:44 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 6 Dec 2020 08:23:44 -0800
Subject: [R] Small R documentation bug in ?anyDuplicated
Message-ID: <CAGxFJbT19DZmGDo4RAbNyQ=TRpsLeCO5Uep8ydi3mc9ai0GGdg@mail.gmail.com>

All:

I did not want to bother R folks for an R Bugzilla account, so I'll just
note what appears to be a documentation bug here

In R version 4.0.3, ?anyDuplicated  says:
"anyDuplicated(.) is a ?generalized? more efficient shortcut for
any(duplicated(.)).

However, anyDuplicated returns an integer and any(duplicated)  -- that is
any() -- returns a logical.  I was bitten by this by a function expecting a
logical from anyDuplicated.

I realize that there are scare quotes around "generalized", which would
indicate that anyDuplicated and any(duplicated(.)) aren't identical.
However, I believe that the line above (especially 'shortcut') leads one to
expect that both return a logical. A simple addition such as: "Note,
however, that any() returns a logical and anyDuplicated's  returns an
integer' would avoid the confusion.

Best to all,
Bert

	[[alternative HTML version deleted]]


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Sun Dec  6 19:59:00 2020
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Sun, 6 Dec 2020 18:59:00 +0000
Subject: [R] change frequency of wind data correctly
In-Reply-To: <CA+8X3fWrKHrF1PWHcPZ26Z-0AEGYvLTFK20x4Fk1+7GPVbkdQg@mail.gmail.com>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
 <CA+8X3fWW9xgzkXhQajiTRd5sO6JKtYDLwtZXFBvBJHmH3t-UEA@mail.gmail.com>,
 <CA+8X3fWrKHrF1PWHcPZ26Z-0AEGYvLTFK20x4Fk1+7GPVbkdQg@mail.gmail.com>
Message-ID: <8B435C9568170B469AE31E8891E8CC4F80A03462@ESINO.regionemarche.intra>

Hi Jim.
I studied and implemented your solution in details. The idea is great, but after a sharp revision I came to the conclusion that unfortunately it des not work correctly: for the "am" side (10, 20, 30 minutes) it works well because the hour is exactly the same, while for the "pm" side (40, 50, 00) the algorithm it doesn't because the hour related to 40 and 50 minutes is different from the hour related to 00 (which is the following one). Am I wrong?
I tried to fix it keeping the easy structure of the algorithm, but with no success.

Any hint for that?
Thank you for your attention and your help

Stefano


         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Civil Protection - Marche Region
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------

________________________________________
Da: Jim Lemon [drjimlemon at gmail.com]
Inviato: gioved? 3 dicembre 2020 4.41
A: Stefano Sofia
Cc: r-help mailing list
Oggetto: Re: [R] change frequency of wind data correctly

Hi again,
Didn't realize that the example didn't even span a full day.

ssdf<-read.table(text="date_POSIX time_POSIX vmax
 2018-02-01 00:00:00 27
 2018-02-01 00:10:00 41
 2018-02-01 00:20:00 46
 2018-02-01 00:30:00 39
 2018-02-01 00:40:00 34
 2018-02-01 00:50:00 32
 2018-02-01 01:00:00 37
 2018-02-01 01:10:00 31
 2018-02-01 01:20:00 26
 2018-02-01 01:30:00 29
 2018-02-01 01:40:00 24
 2018-02-01 01:50:00 35",
 header=TRUE,stringsAsFactors=FALSE)
# extract the hour
ssdf$hour<-
 as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",1)))
# get the time of day as seconds from the time field
ssdf$mins<-
 as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",2)))
# create an AM/PM variable
ssdf$ampm<-ifelse(ssdf$mins > 0 & ssdf$mins <= 30,"am","pm")
# drop first row
ssdf<-ssdf[-1,]
means<-aggregate(vmax~hour+ampm,ssdf,mean)

This does a full day. To do more, add the date_POSIX field to the
aggregate command. If you have the date and time in one field you'll
have to split that. That will distinguish the AM/PM means in each day
as well as hour.

Jim

On Thu, Dec 3, 2020 at 2:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Stefano,
> I read in your date-time as two separate fields for convenience. You
> can split your single field at the space to get the same result.
>
> ssdf<-read.table(text="date_POSIX time_POSIX vmax
>  2018-02-01 00:00:00 27
>  2018-02-01 00:10:00 41
>  2018-02-01 00:20:00 46
>  2018-02-01 00:30:00 39
>  2018-02-01 00:40:00 34
>  2018-02-01 00:50:00 32",
>  header=TRUE,stringsAsFactors=FALSE)
> # get the time of day as seconds from the time field
> ssdf$seconds<-as.numeric(strptime(ssdf$time_POSIX,"%H:%M:%S"))
> # subtract whatever current date strptime guesses for the date
> ssdf$seconds<-ssdf$seconds-min(ssdf$seconds)
> # create an AM/PM variable
> ssdf$ampm<-ifelse(ssdf$seconds > 0 & ssdf$seconds <= 1800,"am","pm")
> means<-aggregate(vmax~ampm,ssdf,mean)
>
> Jim
>
> On Thu, Dec 3, 2020 at 4:55 AM Stefano Sofia
> <stefano.sofia at regione.marche.it> wrote:
> >
> > Dear list users,
> > I have wind data with frequency of 10 minutes (three years data). For simplicity let me use only max wind speed.
> > I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20 and 30 minutes) of each hour.
> >
> > The simple code here reported works well, but the column "interval" groups data forward, not backward:
> >
> > init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> > fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> > mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> > mydf$vmax <- round(rnorm(13, 35, 10))
> > mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
> > means <- aggregate(vmax ~ interval, mydf, mean)
> >
> >     data_POSIX                  vmax  interval
> > 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> > 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
> > 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
> > 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> > 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
> > 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
> > ...
> >
> > I should work with
> >
> >     data_POSIX                  vmax  interval
> > 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> > 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
> > 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
> > 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> > 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
> > 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
> > ...
> >
> >
> > Is there a way to modify this code to groupp data correctly? (I would prefer using only the base package)
> >
> > Thank you for your help
> > Stefano
> >
> >
> >
> >          (oo)
> > --oOO--( )--OOo----------------
> > Stefano Sofia PhD
> > Civil Protection - Marche Region
> > Meteo Section
> > Snow Section
> > Via del Colle Ameno 5
> > 60126 Torrette di Ancona, Ancona
> > Uff: 071 806 7743
> > E-mail: stefano.sofia at regione.marche.it
> > ---Oo---------oO----------------
> >
> > ________________________________
> >
> > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> > IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> >
> > --
> > Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> > This message was scanned by Libra ESVA and is believed to be clean.
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >  https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=52342f8a&h=d46bc785&f=y&p=y
> > PLEASE do read the posting guide  https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=52342f8a&h=9b25bfd5&f=y&p=y
> > and provide commented, minimal, self-contained, reproducible code.

--

Questo messaggio  stato analizzato con Libra ESVA ed  risultato non infetto.


________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
This message was scanned by Libra ESVA and is believed to be clean.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Dec  6 21:41:32 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 6 Dec 2020 12:41:32 -0800 (PST)
Subject: [R] change frequency of wind data correctly
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F80A03462@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
 <CA+8X3fWW9xgzkXhQajiTRd5sO6JKtYDLwtZXFBvBJHmH3t-UEA@mail.gmail.com>,
 <CA+8X3fWrKHrF1PWHcPZ26Z-0AEGYvLTFK20x4Fk1+7GPVbkdQg@mail.gmail.com>
 <8B435C9568170B469AE31E8891E8CC4F80A03462@ESINO.regionemarche.intra>
Message-ID: <alpine.BSF.2.00.2012061237050.30288@pedal.dcn.davis.ca.us>

I usually roll my own:

-----------
Sys.setenv( TZ = "GMT" )
ssdf$Dtm <- with( ssdf
                 , as.POSIXct( paste( date_POSIX, time_POSIX ) )
                 )

ceiling_dtmN <- function( dtm, mins ) {
   tm_base <- as.POSIXct( trunc( min( dtm ), units = "days" ) )
   x <- as.numeric( dtm - tm_base, units = "mins" )
   xceil <- ceiling( x %/% mins ) * mins
   tm_base + as.difftime( xceil, units = "mins" )
}

ssdf$Dtm30 <- ceiling_dtmN( ssdf$Dtm, mins = 30 )
ssdf
-----------

On Sun, 6 Dec 2020, Stefano Sofia wrote:

> Hi Jim.
> I studied and implemented your solution in details. The idea is great, but after a sharp revision I came to the conclusion that unfortunately it des not work correctly: for the "am" side (10, 20, 30 minutes) it works well because the hour is exactly the same, while for the "pm" side (40, 50, 00) the algorithm it doesn't because the hour related to 40 and 50 minutes is different from the hour related to 00 (which is the following one). Am I wrong?
> I tried to fix it keeping the easy structure of the algorithm, but with no success.
>
> Any hint for that?
> Thank you for your attention and your help
>
> Stefano
>
>
>         (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Civil Protection - Marche Region
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
>
> ________________________________________
> Da: Jim Lemon [drjimlemon at gmail.com]
> Inviato: gioved? 3 dicembre 2020 4.41
> A: Stefano Sofia
> Cc: r-help mailing list
> Oggetto: Re: [R] change frequency of wind data correctly
>
> Hi again,
> Didn't realize that the example didn't even span a full day.
>
> ssdf<-read.table(text="date_POSIX time_POSIX vmax
> 2018-02-01 00:00:00 27
> 2018-02-01 00:10:00 41
> 2018-02-01 00:20:00 46
> 2018-02-01 00:30:00 39
> 2018-02-01 00:40:00 34
> 2018-02-01 00:50:00 32
> 2018-02-01 01:00:00 37
> 2018-02-01 01:10:00 31
> 2018-02-01 01:20:00 26
> 2018-02-01 01:30:00 29
> 2018-02-01 01:40:00 24
> 2018-02-01 01:50:00 35",
> header=TRUE,stringsAsFactors=FALSE)
> # extract the hour
> ssdf$hour<-
> as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",1)))
> # get the time of day as seconds from the time field
> ssdf$mins<-
> as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",2)))
> # create an AM/PM variable
> ssdf$ampm<-ifelse(ssdf$mins > 0 & ssdf$mins <= 30,"am","pm")
> # drop first row
> ssdf<-ssdf[-1,]
> means<-aggregate(vmax~hour+ampm,ssdf,mean)
>
> This does a full day. To do more, add the date_POSIX field to the
> aggregate command. If you have the date and time in one field you'll
> have to split that. That will distinguish the AM/PM means in each day
> as well as hour.
>
> Jim
>
> On Thu, Dec 3, 2020 at 2:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Stefano,
>> I read in your date-time as two separate fields for convenience. You
>> can split your single field at the space to get the same result.
>>
>> ssdf<-read.table(text="date_POSIX time_POSIX vmax
>>  2018-02-01 00:00:00 27
>>  2018-02-01 00:10:00 41
>>  2018-02-01 00:20:00 46
>>  2018-02-01 00:30:00 39
>>  2018-02-01 00:40:00 34
>>  2018-02-01 00:50:00 32",
>>  header=TRUE,stringsAsFactors=FALSE)
>> # get the time of day as seconds from the time field
>> ssdf$seconds<-as.numeric(strptime(ssdf$time_POSIX,"%H:%M:%S"))
>> # subtract whatever current date strptime guesses for the date
>> ssdf$seconds<-ssdf$seconds-min(ssdf$seconds)
>> # create an AM/PM variable
>> ssdf$ampm<-ifelse(ssdf$seconds > 0 & ssdf$seconds <= 1800,"am","pm")
>> means<-aggregate(vmax~ampm,ssdf,mean)
>>
>> Jim
>>
>> On Thu, Dec 3, 2020 at 4:55 AM Stefano Sofia
>> <stefano.sofia at regione.marche.it> wrote:
>>>
>>> Dear list users,
>>> I have wind data with frequency of 10 minutes (three years data). For simplicity let me use only max wind speed.
>>> I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20 and 30 minutes) of each hour.
>>>
>>> The simple code here reported works well, but the column "interval" groups data forward, not backward:
>>>
>>> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
>>> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
>>> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
>>> mydf$vmax <- round(rnorm(13, 35, 10))
>>> mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
>>> means <- aggregate(vmax ~ interval, mydf, mean)
>>>
>>>     data_POSIX                  vmax  interval
>>> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
>>> 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
>>> 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
>>> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
>>> 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
>>> 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
>>> ...
>>>
>>> I should work with
>>>
>>>     data_POSIX                  vmax  interval
>>> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
>>> 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
>>> 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
>>> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
>>> 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
>>> 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
>>> ...
>>>
>>>
>>> Is there a way to modify this code to groupp data correctly? (I would prefer using only the base package)
>>>
>>> Thank you for your help
>>> Stefano
>>>
>>>
>>>
>>>          (oo)
>>> --oOO--( )--OOo----------------
>>> Stefano Sofia PhD
>>> Civil Protection - Marche Region
>>> Meteo Section
>>> Snow Section
>>> Via del Colle Ameno 5
>>> 60126 Torrette di Ancona, Ancona
>>> Uff: 071 806 7743
>>> E-mail: stefano.sofia at regione.marche.it
>>> ---Oo---------oO----------------
>>>
>>> ________________________________
>>>
>>> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
>>> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>>>
>>> --
>>> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
>>> This message was scanned by Libra ESVA and is believed to be clean.
>>>
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>  https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=52342f8a&h=d46bc785&f=y&p=y
>>> PLEASE do read the posting guide  https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=52342f8a&h=9b25bfd5&f=y&p=y
>>> and provide commented, minimal, self-contained, reproducible code.
>
> --
>
> Questo messaggio  stato analizzato con Libra ESVA ed  risultato non infetto.
>
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>
> --
> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> This message was scanned by Libra ESVA and is believed to be clean.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From mrgu|||oy|e @end|ng |rom gm@||@com  Sun Dec  6 21:29:09 2020
From: mrgu|||oy|e @end|ng |rom gm@||@com (Mathew Guilfoyle)
Date: Sun, 6 Dec 2020 20:29:09 +0000
Subject: [R] change frequency of wind data correctly
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
Message-ID: <4E335EF2-51B4-4EAC-8DAF-5E40A8B5C52B@gmail.com>

Hi Stefano

I think either of these does what you need...


1: This gets the interval column as you want it, but utilises the lubridate package:

library(lubridate)
mydf$interval = ceiling_date(mydf$data_POSIX, unit="30 minutes?)


2: Alternative in base R is a bit more long winded: convert the date to numeric (in seconds), divide by 1800 (seconds in 30min), take the ceiling, and convert back.

mydf$interval = as.POSIXct(ceiling(as.numeric(mydf$data_POSIX)/1800)*1800, origin="1970-01-01", tz="Etc/GMT-1")


Cheers


> On 2 Dec 2020, at 17:53, Stefano Sofia <stefano.sofia at regione.marche.it> wrote:
> 
> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> mydf$vmax <- round(rnorm(13, 35, 10))
> mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
> means <- aggregate(vmax ~ interval, mydf, mean)


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Dec  6 21:55:04 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 6 Dec 2020 12:55:04 -0800 (PST)
Subject: [R] change frequency of wind data correctly
In-Reply-To: <alpine.BSF.2.00.2012061237050.30288@pedal.dcn.davis.ca.us>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
 <CA+8X3fWW9xgzkXhQajiTRd5sO6JKtYDLwtZXFBvBJHmH3t-UEA@mail.gmail.com>,
 <CA+8X3fWrKHrF1PWHcPZ26Z-0AEGYvLTFK20x4Fk1+7GPVbkdQg@mail.gmail.com>
 <8B435C9568170B469AE31E8891E8CC4F80A03462@ESINO.regionemarche.intra>
 <alpine.BSF.2.00.2012061237050.30288@pedal.dcn.davis.ca.us>
Message-ID: <alpine.BSF.2.00.2012061254130.30288@pedal.dcn.davis.ca.us>

Sigh. Don't use integer division AND ceiling.

ceiling_dtmN <- function( dtm, mins ) {
   tm_base <- as.POSIXct( trunc( min( dtm ), units = "days" ) )
   x <- as.numeric( dtm - tm_base, units = "mins" )
   xceil <- ceiling( x / mins ) * mins
   tm_base + as.difftime( xceil, units = "mins" )
}

On Sun, 6 Dec 2020, Jeff Newmiller wrote:

> I usually roll my own:
>
> -----------
> Sys.setenv( TZ = "GMT" )
> ssdf$Dtm <- with( ssdf
>                , as.POSIXct( paste( date_POSIX, time_POSIX ) )
>                )
>
> ceiling_dtmN <- function( dtm, mins ) {
>  tm_base <- as.POSIXct( trunc( min( dtm ), units = "days" ) )
>  x <- as.numeric( dtm - tm_base, units = "mins" )
>  xceil <- ceiling( x %/% mins ) * mins
>  tm_base + as.difftime( xceil, units = "mins" )
> }
>
> ssdf$Dtm30 <- ceiling_dtmN( ssdf$Dtm, mins = 30 )
> ssdf
> -----------
>
> On Sun, 6 Dec 2020, Stefano Sofia wrote:
>
>> Hi Jim.
>> I studied and implemented your solution in details. The idea is great, but 
>> after a sharp revision I came to the conclusion that unfortunately it des 
>> not work correctly: for the "am" side (10, 20, 30 minutes) it works well 
>> because the hour is exactly the same, while for the "pm" side (40, 50, 00) 
>> the algorithm it doesn't because the hour related to 40 and 50 minutes is 
>> different from the hour related to 00 (which is the following one). Am I 
>> wrong?
>> I tried to fix it keeping the easy structure of the algorithm, but with no 
>> success.
>> 
>> Any hint for that?
>> Thank you for your attention and your help
>> 
>> Stefano
>> 
>>
>>         (oo)
>> --oOO--( )--OOo----------------
>> Stefano Sofia PhD
>> Civil Protection - Marche Region
>> Meteo Section
>> Snow Section
>> Via del Colle Ameno 5
>> 60126 Torrette di Ancona, Ancona
>> Uff: 071 806 7743
>> E-mail: stefano.sofia at regione.marche.it
>> ---Oo---------oO----------------
>> 
>> ________________________________________
>> Da: Jim Lemon [drjimlemon at gmail.com]
>> Inviato: gioved? 3 dicembre 2020 4.41
>> A: Stefano Sofia
>> Cc: r-help mailing list
>> Oggetto: Re: [R] change frequency of wind data correctly
>> 
>> Hi again,
>> Didn't realize that the example didn't even span a full day.
>> 
>> ssdf<-read.table(text="date_POSIX time_POSIX vmax
>> 2018-02-01 00:00:00 27
>> 2018-02-01 00:10:00 41
>> 2018-02-01 00:20:00 46
>> 2018-02-01 00:30:00 39
>> 2018-02-01 00:40:00 34
>> 2018-02-01 00:50:00 32
>> 2018-02-01 01:00:00 37
>> 2018-02-01 01:10:00 31
>> 2018-02-01 01:20:00 26
>> 2018-02-01 01:30:00 29
>> 2018-02-01 01:40:00 24
>> 2018-02-01 01:50:00 35",
>> header=TRUE,stringsAsFactors=FALSE)
>> # extract the hour
>> ssdf$hour<-
>> as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",1)))
>> # get the time of day as seconds from the time field
>> ssdf$mins<-
>> as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",2)))
>> # create an AM/PM variable
>> ssdf$ampm<-ifelse(ssdf$mins > 0 & ssdf$mins <= 30,"am","pm")
>> # drop first row
>> ssdf<-ssdf[-1,]
>> means<-aggregate(vmax~hour+ampm,ssdf,mean)
>> 
>> This does a full day. To do more, add the date_POSIX field to the
>> aggregate command. If you have the date and time in one field you'll
>> have to split that. That will distinguish the AM/PM means in each day
>> as well as hour.
>> 
>> Jim
>> 
>> On Thu, Dec 3, 2020 at 2:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>> 
>>> Hi Stefano,
>>> I read in your date-time as two separate fields for convenience. You
>>> can split your single field at the space to get the same result.
>>> 
>>> ssdf<-read.table(text="date_POSIX time_POSIX vmax
>>>  2018-02-01 00:00:00 27
>>>  2018-02-01 00:10:00 41
>>>  2018-02-01 00:20:00 46
>>>  2018-02-01 00:30:00 39
>>>  2018-02-01 00:40:00 34
>>>  2018-02-01 00:50:00 32",
>>>  header=TRUE,stringsAsFactors=FALSE)
>>> # get the time of day as seconds from the time field
>>> ssdf$seconds<-as.numeric(strptime(ssdf$time_POSIX,"%H:%M:%S"))
>>> # subtract whatever current date strptime guesses for the date
>>> ssdf$seconds<-ssdf$seconds-min(ssdf$seconds)
>>> # create an AM/PM variable
>>> ssdf$ampm<-ifelse(ssdf$seconds > 0 & ssdf$seconds <= 1800,"am","pm")
>>> means<-aggregate(vmax~ampm,ssdf,mean)
>>> 
>>> Jim
>>> 
>>> On Thu, Dec 3, 2020 at 4:55 AM Stefano Sofia
>>> <stefano.sofia at regione.marche.it> wrote:
>>>> 
>>>> Dear list users,
>>>> I have wind data with frequency of 10 minutes (three years data). For 
>>>> simplicity let me use only max wind speed.
>>>> I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of 
>>>> data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 
>>>> 20 and 30 minutes) of each hour.
>>>> 
>>>> The simple code here reported works well, but the column "interval" 
>>>> groups data forward, not backward:
>>>> 
>>>> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", 
>>>> tz="Etc/GMT-1")
>>>> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", 
>>>> tz="Etc/GMT-1")
>>>> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
>>>> mydf$vmax <- round(rnorm(13, 35, 10))
>>>> mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
>>>> means <- aggregate(vmax ~ interval, mydf, mean)
>>>>
>>>>     data_POSIX                  vmax  interval
>>>> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
>>>> 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
>>>> 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
>>>> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
>>>> 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
>>>> 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
>>>> ...
>>>> 
>>>> I should work with
>>>>
>>>>     data_POSIX                  vmax  interval
>>>> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
>>>> 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
>>>> 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
>>>> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
>>>> 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
>>>> 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
>>>> ...
>>>> 
>>>> 
>>>> Is there a way to modify this code to groupp data correctly? (I would 
>>>> prefer using only the base package)
>>>> 
>>>> Thank you for your help
>>>> Stefano
>>>> 
>>>> 
>>>>
>>>>          (oo)
>>>> --oOO--( )--OOo----------------
>>>> Stefano Sofia PhD
>>>> Civil Protection - Marche Region
>>>> Meteo Section
>>>> Snow Section
>>>> Via del Colle Ameno 5
>>>> 60126 Torrette di Ancona, Ancona
>>>> Uff: 071 806 7743
>>>> E-mail: stefano.sofia at regione.marche.it
>>>> ---Oo---------oO----------------
>>>> 
>>>> ________________________________
>>>> 
>>>> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere 
>>>> informazioni confidenziali, pertanto ? destinato solo a persone 
>>>> autorizzate alla ricezione. I messaggi di posta elettronica per i client 
>>>> di Regione Marche possono contenere informazioni confidenziali e con 
>>>> privilegi legali. Se non si ? il destinatario specificato, non leggere, 
>>>> copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo 
>>>> messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente 
>>>> dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 
>>>> 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al 
>>>> presente messaggio di posta elettronica pu? essere visionata da persone 
>>>> estranee al destinatario.
>>>> IMPORTANT NOTICE: This e-mail message is intended to be received only by 
>>>> persons entitled to receive the confidential information it may contain. 
>>>> E-mail messages to clients of Regione Marche may contain information that 
>>>> is confidential and legally privileged. Please do not read, copy, 
>>>> forward, or store this message unless you are an intended recipient of 
>>>> it. If you have received this message in error, please forward it to the 
>>>> sender and delete it completely from your computer system.
>>>> 
>>>> --
>>>> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non 
>>>> infetto.
>>>> This message was scanned by Libra ESVA and is believed to be clean.
>>>> 
>>>>
>>>>         [[alternative HTML version deleted]]
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>  https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=52342f8a&h=d46bc785&f=y&p=y
>>>> PLEASE do read the posting guide 
>>>> https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=52342f8a&h=9b25bfd5&f=y&p=y
>>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> --
>> 
>> Questo messaggio  stato analizzato con Libra ESVA ed  risultato non 
>> infetto.
>> 
>> 
>> ________________________________
>> 
>> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere 
>> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate 
>> alla ricezione. I messaggi di posta elettronica per i client di Regione 
>> Marche possono contenere informazioni confidenziali e con privilegi legali. 
>> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o 
>> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, 
>> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio 
>> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in 
>> caso di necessit? ed urgenza, la risposta al presente messaggio di posta 
>> elettronica pu? essere visionata da persone estranee al destinatario.
>> IMPORTANT NOTICE: This e-mail message is intended to be received only by 
>> persons entitled to receive the confidential information it may contain. 
>> E-mail messages to clients of Regione Marche may contain information that 
>> is confidential and legally privileged. Please do not read, copy, forward, 
>> or store this message unless you are an intended recipient of it. If you 
>> have received this message in error, please forward it to the sender and 
>> delete it completely from your computer system.
>> 
>> --
>> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
>> This message was scanned by Libra ESVA and is believed to be clean.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                      Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From btupper @end|ng |rom b|ge|ow@org  Sun Dec  6 23:51:41 2020
From: btupper @end|ng |rom b|ge|ow@org (Ben Tupper)
Date: Sun, 6 Dec 2020 17:51:41 -0500
Subject: [R] change frequency of wind data correctly
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F80A03462@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
 <CA+8X3fWW9xgzkXhQajiTRd5sO6JKtYDLwtZXFBvBJHmH3t-UEA@mail.gmail.com>
 <CA+8X3fWrKHrF1PWHcPZ26Z-0AEGYvLTFK20x4Fk1+7GPVbkdQg@mail.gmail.com>
 <8B435C9568170B469AE31E8891E8CC4F80A03462@ESINO.regionemarche.intra>
Message-ID: <CALrbzg3eucq_sx0ZH8967uDi8uy7-4ERXTY2YTXdy=M5TQTdPg@mail.gmail.com>

Hi,

Perhaps this might work for you.  It leverages findInterval() and a
simple look-up-table of times to do the grouping.  I made it return NA
when computing the mean when there are fewer than the three
observations.

Cheers,
Ben

n <- 144
x <- data.frame(
  datetime = seq(from = as.POSIXct("2018-02-01 00:00:00", tz = "UTC"),
                 by = "10 min",
                 length = n),
  vmax = sample(10:50, n, replace = TRUE)
)

lut <- seq(from = x$datetime[1],
           to = x$datetime[n],
           by = "30 min") + 1     # add one second so that 00 sorts
with 40, 50, 00
                                  # and the other grouping is 10, 20 30

x$interval <- findInterval(x$datetime, lut)
x

y <- aggregate(vmax ~ interval, data = x,
               FUN = function(x){
                 if (length(x) < 3){
                   r <- NA
                 } else {
                   r <- mean(x)
                 }
                 r
               })
y

On Sun, Dec 6, 2020 at 1:59 PM Stefano Sofia
<stefano.sofia at regione.marche.it> wrote:
>
> Hi Jim.
> I studied and implemented your solution in details. The idea is great, but after a sharp revision I came to the conclusion that unfortunately it des not work correctly: for the "am" side (10, 20, 30 minutes) it works well because the hour is exactly the same, while for the "pm" side (40, 50, 00) the algorithm it doesn't because the hour related to 40 and 50 minutes is different from the hour related to 00 (which is the following one). Am I wrong?
> I tried to fix it keeping the easy structure of the algorithm, but with no success.
>
> Any hint for that?
> Thank you for your attention and your help
>
> Stefano
>
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Civil Protection - Marche Region
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
>
> ________________________________________
> Da: Jim Lemon [drjimlemon at gmail.com]
> Inviato: gioved? 3 dicembre 2020 4.41
> A: Stefano Sofia
> Cc: r-help mailing list
> Oggetto: Re: [R] change frequency of wind data correctly
>
> Hi again,
> Didn't realize that the example didn't even span a full day.
>
> ssdf<-read.table(text="date_POSIX time_POSIX vmax
>  2018-02-01 00:00:00 27
>  2018-02-01 00:10:00 41
>  2018-02-01 00:20:00 46
>  2018-02-01 00:30:00 39
>  2018-02-01 00:40:00 34
>  2018-02-01 00:50:00 32
>  2018-02-01 01:00:00 37
>  2018-02-01 01:10:00 31
>  2018-02-01 01:20:00 26
>  2018-02-01 01:30:00 29
>  2018-02-01 01:40:00 24
>  2018-02-01 01:50:00 35",
>  header=TRUE,stringsAsFactors=FALSE)
> # extract the hour
> ssdf$hour<-
>  as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",1)))
> # get the time of day as seconds from the time field
> ssdf$mins<-
>  as.numeric(unlist(lapply(strsplit(ssdf$time_POSIX,":"),"[",2)))
> # create an AM/PM variable
> ssdf$ampm<-ifelse(ssdf$mins > 0 & ssdf$mins <= 30,"am","pm")
> # drop first row
> ssdf<-ssdf[-1,]
> means<-aggregate(vmax~hour+ampm,ssdf,mean)
>
> This does a full day. To do more, add the date_POSIX field to the
> aggregate command. If you have the date and time in one field you'll
> have to split that. That will distinguish the AM/PM means in each day
> as well as hour.
>
> Jim
>
> On Thu, Dec 3, 2020 at 2:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Stefano,
> > I read in your date-time as two separate fields for convenience. You
> > can split your single field at the space to get the same result.
> >
> > ssdf<-read.table(text="date_POSIX time_POSIX vmax
> >  2018-02-01 00:00:00 27
> >  2018-02-01 00:10:00 41
> >  2018-02-01 00:20:00 46
> >  2018-02-01 00:30:00 39
> >  2018-02-01 00:40:00 34
> >  2018-02-01 00:50:00 32",
> >  header=TRUE,stringsAsFactors=FALSE)
> > # get the time of day as seconds from the time field
> > ssdf$seconds<-as.numeric(strptime(ssdf$time_POSIX,"%H:%M:%S"))
> > # subtract whatever current date strptime guesses for the date
> > ssdf$seconds<-ssdf$seconds-min(ssdf$seconds)
> > # create an AM/PM variable
> > ssdf$ampm<-ifelse(ssdf$seconds > 0 & ssdf$seconds <= 1800,"am","pm")
> > means<-aggregate(vmax~ampm,ssdf,mean)
> >
> > Jim
> >
> > On Thu, Dec 3, 2020 at 4:55 AM Stefano Sofia
> > <stefano.sofia at regione.marche.it> wrote:
> > >
> > > Dear list users,
> > > I have wind data with frequency of 10 minutes (three years data). For simplicity let me use only max wind speed.
> > > I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20 and 30 minutes) of each hour.
> > >
> > > The simple code here reported works well, but the column "interval" groups data forward, not backward:
> > >
> > > init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> > > fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M", tz="Etc/GMT-1")
> > > mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> > > mydf$vmax <- round(rnorm(13, 35, 10))
> > > mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
> > > means <- aggregate(vmax ~ interval, mydf, mean)
> > >
> > >     data_POSIX                  vmax  interval
> > > 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> > > 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
> > > 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
> > > 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> > > 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
> > > 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
> > > ...
> > >
> > > I should work with
> > >
> > >     data_POSIX                  vmax  interval
> > > 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> > > 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
> > > 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
> > > 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> > > 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
> > > 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
> > > ...
> > >
> > >
> > > Is there a way to modify this code to groupp data correctly? (I would prefer using only the base package)
> > >
> > > Thank you for your help
> > > Stefano
> > >
> > >
> > >
> > >          (oo)
> > > --oOO--( )--OOo----------------
> > > Stefano Sofia PhD
> > > Civil Protection - Marche Region
> > > Meteo Section
> > > Snow Section
> > > Via del Colle Ameno 5
> > > 60126 Torrette di Ancona, Ancona
> > > Uff: 071 806 7743
> > > E-mail: stefano.sofia at regione.marche.it
> > > ---Oo---------oO----------------
> > >
> > > ________________________________
> > >
> > > AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> > > IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
> > >
> > > --
> > > Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> > > This message was scanned by Libra ESVA and is believed to be clean.
> > >
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >  https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=52342f8a&h=d46bc785&f=y&p=y
> > > PLEASE do read the posting guide  https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=52342f8a&h=9b25bfd5&f=y&p=y
> > > and provide commented, minimal, self-contained, reproducible code.
>
> --
>
> Questo messaggio  stato analizzato con Libra ESVA ed  risultato non infetto.
>
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.
>
> --
> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> This message was scanned by Libra ESVA and is believed to be clean.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Ben Tupper
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org


From r@oknz @end|ng |rom gm@||@com  Mon Dec  7 06:12:01 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Mon, 7 Dec 2020 18:12:01 +1300
Subject: [R] change frequency of wind data correctly
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
Message-ID: <CABcYAdJtXefOYrcUutR3b3=he1y_5HdvudU27fxL4Bk66HogfQ@mail.gmail.com>

To be honest, I would do this one of two ways.

(1) Use ?decimate from library(signal),
    decimating by a factor of three.

(2) Convert the variable to an (n/3)*3 matrix using
    as.matrix then use rowMeans or apply.

On Thu, 3 Dec 2020 at 06:55, Stefano Sofia <stefano.sofia at regione.marche.it>
wrote:

> Dear list users,
> I have wind data with frequency of 10 minutes (three years data). For
> simplicity let me use only max wind speed.
> I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of
> data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20
> and 30 minutes) of each hour.
>
> The simple code here reported works well, but the column "interval" groups
> data forward, not backward:
>
> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
> tz="Etc/GMT-1")
> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M",
> tz="Etc/GMT-1")
> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> mydf$vmax <- round(rnorm(13, 35, 10))
> mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
> means <- aggregate(vmax ~ interval, mydf, mean)
>
>     data_POSIX                  vmax  interval
> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
> 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
> 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
> ...
>
> I should work with
>
>     data_POSIX                  vmax  interval
> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
> 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
> 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
> ...
>
>
> Is there a way to modify this code to groupp data correctly? (I would
> prefer using only the base package)
>
> Thank you for your help
> Stefano
>
>
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Civil Protection - Marche Region
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
>
> --
> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> This message was scanned by Libra ESVA and is believed to be clean.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Dec  7 07:36:26 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 06 Dec 2020 22:36:26 -0800
Subject: [R] change frequency of wind data correctly
In-Reply-To: <CABcYAdJtXefOYrcUutR3b3=he1y_5HdvudU27fxL4Bk66HogfQ@mail.gmail.com>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
 <CABcYAdJtXefOYrcUutR3b3=he1y_5HdvudU27fxL4Bk66HogfQ@mail.gmail.com>
Message-ID: <CDA1E743-F8F5-4398-A902-DAF58347713A@dcn.davis.ca.us>

Beware of missing or extra records with these approaches. Also may be tricky to get the time aligned to the hour properly.

On December 6, 2020 9:12:01 PM PST, Richard O'Keefe <raoknz at gmail.com> wrote:
>To be honest, I would do this one of two ways.
>
>(1) Use ?decimate from library(signal),
>    decimating by a factor of three.
>
>(2) Convert the variable to an (n/3)*3 matrix using
>    as.matrix then use rowMeans or apply.
>
>On Thu, 3 Dec 2020 at 06:55, Stefano Sofia
><stefano.sofia at regione.marche.it>
>wrote:
>
>> Dear list users,
>> I have wind data with frequency of 10 minutes (three years data). For
>> simplicity let me use only max wind speed.
>> I need to reduce the frequency to 30 minutes,  at  00 (taking the
>mean of
>> data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at
>10, 20
>> and 30 minutes) of each hour.
>>
>> The simple code here reported works well, but the column "interval"
>groups
>> data forward, not backward:
>>
>> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
>> tz="Etc/GMT-1")
>> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M",
>> tz="Etc/GMT-1")
>> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
>> mydf$vmax <- round(rnorm(13, 35, 10))
>> mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
>> means <- aggregate(vmax ~ interval, mydf, mean)
>>
>>     data_POSIX                  vmax  interval
>> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
>> 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
>> 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
>> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
>> 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
>> 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
>> ...
>>
>> I should work with
>>
>>     data_POSIX                  vmax  interval
>> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
>> 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
>> 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
>> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
>> 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
>> 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
>> ...
>>
>>
>> Is there a way to modify this code to groupp data correctly? (I would
>> prefer using only the base package)
>>
>> Thank you for your help
>> Stefano
>>
>>
>>
>>          (oo)
>> --oOO--( )--OOo----------------
>> Stefano Sofia PhD
>> Civil Protection - Marche Region
>> Meteo Section
>> Snow Section
>> Via del Colle Ameno 5
>> 60126 Torrette di Ancona, Ancona
>> Uff: 071 806 7743
>> E-mail: stefano.sofia at regione.marche.it
>> ---Oo---------oO----------------
>>
>> ________________________________
>>
>> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu?
>contenere
>> informazioni confidenziali, pertanto ? destinato solo a persone
>autorizzate
>> alla ricezione. I messaggi di posta elettronica per i client di
>Regione
>> Marche possono contenere informazioni confidenziali e con privilegi
>legali.
>> Se non si ? il destinatario specificato, non leggere, copiare,
>inoltrare o
>> archiviare questo messaggio. Se si ? ricevuto questo messaggio per
>errore,
>> inoltrarlo al mittente ed eliminarlo completamente dal sistema del
>proprio
>> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che,
>in
>> caso di necessit? ed urgenza, la risposta al presente messaggio di
>posta
>> elettronica pu? essere visionata da persone estranee al destinatario.
>> IMPORTANT NOTICE: This e-mail message is intended to be received only
>by
>> persons entitled to receive the confidential information it may
>contain.
>> E-mail messages to clients of Regione Marche may contain information
>that
>> is confidential and legally privileged. Please do not read, copy,
>forward,
>> or store this message unless you are an intended recipient of it. If
>you
>> have received this message in error, please forward it to the sender
>and
>> delete it completely from your computer system.
>>
>> --
>> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non
>infetto.
>> This message was scanned by Libra ESVA and is believed to be clean.
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Dec  7 08:22:49 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 7 Dec 2020 07:22:49 +0000
Subject: [R] second legend in biplot
Message-ID: <5bbd05118bae4009b423273b6255965f@SRVEXCHCM1302.precheza.cz>

Dear all

I try to make fviz_pca_biplot with 2 (or more) legends. Below is data and
the code, which gives one legend (colour) for coating variable and correctly
shows triangles and circles for size variable. But this is not shown in the
legend. Hopefully somebody could help.

And before you ask, I tried to contact maintainer about a week ago but did
not get response, therefore I try to post again here. 

Even an answer that current version of fviz_pca_biplot does not support 2
legends with different point shapes is OK as it will send me either to adapt
source code or to stop trying impossible.

Best regards
Petr

library(factoextra)
library(FactoMineR)

fit <- PCA(temp, quali.sup=c(9,10))
fviz_pca_biplot(fit, col.ind = temp$coating, repel=T, col.var = "black",
palette = "lancet", invisible="quali", pointsize=5, pointshape=temp$size,
legend.title = list(col = "Coating", shape="Size"), xlim=c(-6,6),
title="Instillation results")

temp <- structure(list(leukocyte28 = c(96875L, 73438L, 68229L, 94479L, 
76563L, 141667L, 111042L, 93333L, 132083L, 103542L, 61667L, 77708L
), macrophage28 = c(60.29, 99.13, 97.04, 98.54, 98.46, 75.2, 
89.71, 98, 82, 98.83, 99.08, 98.54), pmn28 = c(38.58, 0.58, 2.71, 
0.92, 1, 24.25, 9.29, 1.5, 15.08, 0.92, 0.67, 1), lymphocyte28 = c(1.13, 
0.29, 0.25, 0.54, 0.54, 0.55, 1, 0.5, 2.92, 0.25, 0.25, 0.46), 
    leukocyte3 = c(186042L, 111250L, 114375L, 111146L, 98854L, 
    156250L, 250625L, 183125L, 202917L, 161875L, 184792L, 128333L
    ), macrophage3 = c(53.88, 95.96, 98.29, 98.92, 98.92, 78.3, 
    82.33, 97.83, 84.79, 97.25, 97.75, 98.46), pmn3 = c(44.75, 
    3.46, 1.29, 0.67, 0.71, 20.4, 16.67, 1.92, 14.04, 1.92, 1.67, 
    1.21), lymphocyte3 = c(1.38, 0.58, 0.42, 0.42, 0.38, 1.3, 
    1, 0.25, 1.17, 0.83, 0.58, 0.33), coating = structure(c(3L, 
    3L, 3L, 1L, 7L, 1L, 2L, 5L, 4L, 6L, 3L, 3L), .Label = c("alumina", 
    "both", "none", "phosphate", "silica", "tungsten", "zirconia"
    ), class = "factor"), size = structure(c(1L, 1L, 2L, 2L, 
    2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L), .Label = c("nano", "pigmentary"
    ), class = "factor")), class = "data.frame", row.names = c(NA, 
12L))


From @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t  Mon Dec  7 08:55:17 2020
From: @te|@no@@o||@ @end|ng |rom reg|one@m@rche@|t (Stefano Sofia)
Date: Mon, 7 Dec 2020 07:55:17 +0000
Subject: [R] change frequency of wind data correctly
In-Reply-To: <CDA1E743-F8F5-4398-A902-DAF58347713A@dcn.davis.ca.us>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
 <CABcYAdJtXefOYrcUutR3b3=he1y_5HdvudU27fxL4Bk66HogfQ@mail.gmail.com>,
 <CDA1E743-F8F5-4398-A902-DAF58347713A@dcn.davis.ca.us>
Message-ID: <8B435C9568170B469AE31E8891E8CC4F80A0353B@ESINO.regionemarche.intra>

This afternoon I will work on that.
I am thinking to stick to Jim's algorithm, changing the hours related to 40 and 50 mins. If I add one hour to them, everything should work correctly, because wind data at 40, 50 and 00 would have exactly the same hours.
This would not be elegant, but efficient.
Also missing data might be easily handled, changing the "mean" function with a function that accepts NA.
But I will study all the solutions that have been kindly proposed.

Thank you all of you
Stefano


         (oo)
--oOO--( )--OOo----------------
Stefano Sofia PhD
Civil Protection - Marche Region
Meteo Section
Snow Section
Via del Colle Ameno 5
60126 Torrette di Ancona, Ancona
Uff: 071 806 7743
E-mail: stefano.sofia at regione.marche.it
---Oo---------oO----------------

________________________________________
Da: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
Inviato: luned? 7 dicembre 2020 7.36
A: r-help at r-project.org; Richard O'Keefe; Stefano Sofia
Cc: r-help mailing list
Oggetto: Re: [R] change frequency of wind data correctly

Beware of missing or extra records with these approaches. Also may be tricky to get the time aligned to the hour properly.

On December 6, 2020 9:12:01 PM PST, Richard O'Keefe <raoknz at gmail.com> wrote:
>To be honest, I would do this one of two ways.
>
>(1) Use ?decimate from library(signal),
>    decimating by a factor of three.
>
>(2) Convert the variable to an (n/3)*3 matrix using
>    as.matrix then use rowMeans or apply.
>
>On Thu, 3 Dec 2020 at 06:55, Stefano Sofia
><stefano.sofia at regione.marche.it>
>wrote:
>
>> Dear list users,
>> I have wind data with frequency of 10 minutes (three years data). For
>> simplicity let me use only max wind speed.
>> I need to reduce the frequency to 30 minutes,  at  00 (taking the
>mean of
>> data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at
>10, 20
>> and 30 minutes) of each hour.
>>
>> The simple code here reported works well, but the column "interval"
>groups
>> data forward, not backward:
>>
>> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
>> tz="Etc/GMT-1")
>> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M",
>> tz="Etc/GMT-1")
>> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
>> mydf$vmax <- round(rnorm(13, 35, 10))
>> mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
>> means <- aggregate(vmax ~ interval, mydf, mean)
>>
>>     data_POSIX                  vmax  interval
>> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
>> 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
>> 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
>> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
>> 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
>> 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
>> ...
>>
>> I should work with
>>
>>     data_POSIX                  vmax  interval
>> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
>> 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
>> 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
>> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
>> 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
>> 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
>> ...
>>
>>
>> Is there a way to modify this code to groupp data correctly? (I would
>> prefer using only the base package)
>>
>> Thank you for your help
>> Stefano
>>
>>
>>
>>          (oo)
>> --oOO--( )--OOo----------------
>> Stefano Sofia PhD
>> Civil Protection - Marche Region
>> Meteo Section
>> Snow Section
>> Via del Colle Ameno 5
>> 60126 Torrette di Ancona, Ancona
>> Uff: 071 806 7743
>> E-mail: stefano.sofia at regione.marche.it
>> ---Oo---------oO----------------
>>
>> ________________________________
>>
>> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu?
>contenere
>> informazioni confidenziali, pertanto ? destinato solo a persone
>autorizzate
>> alla ricezione. I messaggi di posta elettronica per i client di
>Regione
>> Marche possono contenere informazioni confidenziali e con privilegi
>legali.
>> Se non si ? il destinatario specificato, non leggere, copiare,
>inoltrare o
>> archiviare questo messaggio. Se si ? ricevuto questo messaggio per
>errore,
>> inoltrarlo al mittente ed eliminarlo completamente dal sistema del
>proprio
>> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che,
>in
>> caso di necessit? ed urgenza, la risposta al presente messaggio di
>posta
>> elettronica pu? essere visionata da persone estranee al destinatario.
>> IMPORTANT NOTICE: This e-mail message is intended to be received only
>by
>> persons entitled to receive the confidential information it may
>contain.
>> E-mail messages to clients of Regione Marche may contain information
>that
>> is confidential and legally privileged. Please do not read, copy,
>forward,
>> or store this message unless you are an intended recipient of it. If
>you
>> have received this message in error, please forward it to the sender
>and
>> delete it completely from your computer system.
>>
>> --
>> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non
>infetto.
>> This message was scanned by Libra ESVA and is believed to be clean.
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>  https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=52342f8a&h=d46bc785&f=y&p=y
>> PLEASE do read the posting guide
>>  https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=52342f8a&h=9b25bfd5&f=y&p=y
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urlsand.esvalabs.com/?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&e=52342f8a&h=d46bc785&f=y&p=y
>PLEASE do read the posting guide
> https://urlsand.esvalabs.com/?u=http%3A%2F%2Fwww.R-project.org%2Fposting-guide.html&e=52342f8a&h=9b25bfd5&f=y&p=y
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

--

Questo messaggio  stato analizzato con Libra ESVA ed  risultato non infetto.


________________________________

AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere informazioni confidenziali, pertanto ? destinato solo a persone autorizzate alla ricezione. I messaggi di posta elettronica per i client di Regione Marche possono contenere informazioni confidenziali e con privilegi legali. Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore, inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in caso di necessit? ed urgenza, la risposta al presente messaggio di posta elettronica pu? essere visionata da persone estranee al destinatario.
IMPORTANT NOTICE: This e-mail message is intended to be received only by persons entitled to receive the confidential information it may contain. E-mail messages to clients of Regione Marche may contain information that is confidential and legally privileged. Please do not read, copy, forward, or store this message unless you are an intended recipient of it. If you have received this message in error, please forward it to the sender and delete it completely from your computer system.

--
Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
This message was scanned by Libra ESVA and is believed to be clean.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Dec  7 09:23:02 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 7 Dec 2020 09:23:02 +0100
Subject: [R] Small R documentation bug in ?anyDuplicated
In-Reply-To: <CAGxFJbT19DZmGDo4RAbNyQ=TRpsLeCO5Uep8ydi3mc9ai0GGdg@mail.gmail.com>
References: <CAGxFJbT19DZmGDo4RAbNyQ=TRpsLeCO5Uep8ydi3mc9ai0GGdg@mail.gmail.com>
Message-ID: <24525.58982.63543.502430@stat.math.ethz.ch>

>>>>> Bert Gunter 
>>>>>     on Sun, 6 Dec 2020 08:23:44 -0800 writes:

    > All: I did not want to bother R folks for an R Bugzilla
    > account, so I'll just note what appears to be a
    > documentation bug here

    > In R version 4.0.3, ?anyDuplicated says: "anyDuplicated(.)
    > is a ?generalized? more efficient shortcut for
    > any(duplicated(.)).

IIRC, I wrote that text there ..

    > However, anyDuplicated returns an integer and
    > any(duplicated) -- that is any() -- returns a logical.  I
    > was bitten by this by a function expecting a logical from
    > anyDuplicated.

well, I was very aware / conscious of that and here's why I even
more liked the term "generalized" :

I'd argue that in S and hence R,
{0,1}  are "almost the same" as {FALSE,TRUE},
(they are internally coded as integer 0, 1)
and e.g.

> identical(FALSE:TRUE,  0:1)
[1] TRUE
> 

    > I realize that there are scare quotes around
    > "generalized", which would indicate that anyDuplicated and
    > any(duplicated(.)) aren't identical.  However, I believe
    > that the line above (especially 'shortcut') leads one to
    > expect that both return a logical. A simple addition such
    > as: "Note, however, that any() returns a logical and
    > anyDuplicated's returns an integer' would avoid the
    > confusion.

anyDuplicated() is mostly useful for   if(.)  or  while(.)
and for these, it *is* a shortcut.

    > Best to all, Bert


I really think help pages should be allowed to use expressive
language at times.. notably in the section 'Description'.

There's the 'Value:' section which one should *really* read as
well where it clearly says that anyDuplicated returns the index
in case there are duplicates.

To such a bug report  I'm pretty strongly replying
   "Works as documented"

Martin


From drj|m|emon @end|ng |rom gm@||@com  Mon Dec  7 21:53:09 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 8 Dec 2020 07:53:09 +1100
Subject: [R] second legend in biplot
In-Reply-To: <5bbd05118bae4009b423273b6255965f@SRVEXCHCM1302.precheza.cz>
References: <5bbd05118bae4009b423273b6255965f@SRVEXCHCM1302.precheza.cz>
Message-ID: <CA+8X3fU9F7U+mmPJ_QR4o=k9HUWk3=-J8izJJtXP2CEhb03kZA@mail.gmail.com>

Hi Petr,
Here's an attempt, using the example in biplot.princomp:

biplot(princomp(USArrests))
> par("usr")
[1] -497.2263  624.8856 -497.2263  624.8856
legend(-180,600,c("State","Crime"),lty=1,col=c("black","red"))

Jim

On Mon, Dec 7, 2020 at 6:23 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Dear all
>
> I try to make fviz_pca_biplot with 2 (or more) legends. Below is data and
> the code, which gives one legend (colour) for coating variable and correctly
> shows triangles and circles for size variable. But this is not shown in the
> legend. Hopefully somebody could help.
>
> And before you ask, I tried to contact maintainer about a week ago but did
> not get response, therefore I try to post again here.
>
> Even an answer that current version of fviz_pca_biplot does not support 2
> legends with different point shapes is OK as it will send me either to adapt
> source code or to stop trying impossible.
>
> Best regards
> Petr
>
> library(factoextra)
> library(FactoMineR)
>
> fit <- PCA(temp, quali.sup=c(9,10))
> fviz_pca_biplot(fit, col.ind = temp$coating, repel=T, col.var = "black",
> palette = "lancet", invisible="quali", pointsize=5, pointshape=temp$size,
> legend.title = list(col = "Coating", shape="Size"), xlim=c(-6,6),
> title="Instillation results")
>
> temp <- structure(list(leukocyte28 = c(96875L, 73438L, 68229L, 94479L,
> 76563L, 141667L, 111042L, 93333L, 132083L, 103542L, 61667L, 77708L
> ), macrophage28 = c(60.29, 99.13, 97.04, 98.54, 98.46, 75.2,
> 89.71, 98, 82, 98.83, 99.08, 98.54), pmn28 = c(38.58, 0.58, 2.71,
> 0.92, 1, 24.25, 9.29, 1.5, 15.08, 0.92, 0.67, 1), lymphocyte28 = c(1.13,
> 0.29, 0.25, 0.54, 0.54, 0.55, 1, 0.5, 2.92, 0.25, 0.25, 0.46),
>     leukocyte3 = c(186042L, 111250L, 114375L, 111146L, 98854L,
>     156250L, 250625L, 183125L, 202917L, 161875L, 184792L, 128333L
>     ), macrophage3 = c(53.88, 95.96, 98.29, 98.92, 98.92, 78.3,
>     82.33, 97.83, 84.79, 97.25, 97.75, 98.46), pmn3 = c(44.75,
>     3.46, 1.29, 0.67, 0.71, 20.4, 16.67, 1.92, 14.04, 1.92, 1.67,
>     1.21), lymphocyte3 = c(1.38, 0.58, 0.42, 0.42, 0.38, 1.3,
>     1, 0.25, 1.17, 0.83, 0.58, 0.33), coating = structure(c(3L,
>     3L, 3L, 1L, 7L, 1L, 2L, 5L, 4L, 6L, 3L, 3L), .Label = c("alumina",
>     "both", "none", "phosphate", "silica", "tungsten", "zirconia"
>     ), class = "factor"), size = structure(c(1L, 1L, 2L, 2L,
>     2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L), .Label = c("nano", "pigmentary"
>     ), class = "factor")), class = "data.frame", row.names = c(NA,
> 12L))
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Mon Dec  7 22:08:56 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Mon, 7 Dec 2020 13:08:56 -0800
Subject: [R] change frequency of wind data correctly
In-Reply-To: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
References: <8B435C9568170B469AE31E8891E8CC4F80A02E48@ESINO.regionemarche.intra>
Message-ID: <CAHqSRuRjhpD64_EwmBbbCr3v1owcuRxwTNd4b7H+CeMnJs1V=w@mail.gmail.com>

Instead of using breaks="30 mins" construct the breaks explicitly with
seq() so you can control the start point.  E.g.,

> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
tz="Etc/GMT-1")
> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M",
tz="Etc/GMT-1")
> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> mydf$vmax <- seq_len(nrow(mydf)) # instead of rnorm so we can check
result more easily
> # the following line is not very general
> breaks <- seq(init_day-as.difftime(20,units="mins"), fin_day,
by=as.difftime(30,units="mins"))
> mydf$interval <- cut(mydf$data_POSIX, breaks=breaks)
> aggregate(vmax ~ interval, mydf, FUN=function(x)paste(x,collapse=",")) #
paste() so we can check results
             interval   vmax
1 2018-01-31 23:40:00      1
2 2018-02-01 00:10:00  2,3,4
3 2018-02-01 00:40:00  5,6,7
4 2018-02-01 01:10:00 8,9,10

On Wed, Dec 2, 2020 at 9:55 AM Stefano Sofia <
stefano.sofia at regione.marche.it> wrote:

> Dear list users,
> I have wind data with frequency of 10 minutes (three years data). For
> simplicity let me use only max wind speed.
> I need to reduce the frequency to 30 minutes,  at  00 (taking the mean of
> data at 40, 50 and 00 minutes) and at 30 (taking the mean of data at 10, 20
> and 30 minutes) of each hour.
>
> The simple code here reported works well, but the column "interval" groups
> data forward, not backward:
>
> init_day <- as.POSIXct("2018-02-01-00-00", format="%Y-%m-%d-%H-%M",
> tz="Etc/GMT-1")
> fin_day <- as.POSIXct("2018-02-01-02-00", format="%Y-%m-%d-%H-%M",
> tz="Etc/GMT-1")
> mydf <- data.frame(data_POSIX=seq(init_day, fin_day, by="10 mins"))
> mydf$vmax <- round(rnorm(13, 35, 10))
> mydf$interval <- cut(mydf$data_POSIX, , breaks="30 min")
> means <- aggregate(vmax ~ interval, mydf, mean)
>
>     data_POSIX                  vmax  interval
> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> 2  2018-02-01 00:10:00     41     2018-02-01 00:00:00
> 3  2018-02-01 00:20:00     46     2018-02-01 00:00:00
> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> 5  2018-02-01 00:40:00     34     2018-02-01 00:30:00
> 6  2018-02-01 00:50:00     32     2018-02-01 00:30:00
> ...
>
> I should work with
>
>     data_POSIX                  vmax  interval
> 1  2018-02-01 00:00:00     27     2018-02-01 00:00:00
> 2  2018-02-01 00:10:00     41     2018-02-01 00:30:00
> 3  2018-02-01 00:20:00     46     2018-02-01 00:30:00
> 4  2018-02-01 00:30:00     39     2018-02-01 00:30:00
> 5  2018-02-01 00:40:00     34     2018-02-01 00:00:00
> 6  2018-02-01 00:50:00     32     2018-02-01 00:00:00
> ...
>
>
> Is there a way to modify this code to groupp data correctly? (I would
> prefer using only the base package)
>
> Thank you for your help
> Stefano
>
>
>
>          (oo)
> --oOO--( )--OOo----------------
> Stefano Sofia PhD
> Civil Protection - Marche Region
> Meteo Section
> Snow Section
> Via del Colle Ameno 5
> 60126 Torrette di Ancona, Ancona
> Uff: 071 806 7743
> E-mail: stefano.sofia at regione.marche.it
> ---Oo---------oO----------------
>
> ________________________________
>
> AVVISO IMPORTANTE: Questo messaggio di posta elettronica pu? contenere
> informazioni confidenziali, pertanto ? destinato solo a persone autorizzate
> alla ricezione. I messaggi di posta elettronica per i client di Regione
> Marche possono contenere informazioni confidenziali e con privilegi legali.
> Se non si ? il destinatario specificato, non leggere, copiare, inoltrare o
> archiviare questo messaggio. Se si ? ricevuto questo messaggio per errore,
> inoltrarlo al mittente ed eliminarlo completamente dal sistema del proprio
> computer. Ai sensi dell?art. 6 della DGR n. 1394/2008 si segnala che, in
> caso di necessit? ed urgenza, la risposta al presente messaggio di posta
> elettronica pu? essere visionata da persone estranee al destinatario.
> IMPORTANT NOTICE: This e-mail message is intended to be received only by
> persons entitled to receive the confidential information it may contain.
> E-mail messages to clients of Regione Marche may contain information that
> is confidential and legally privileged. Please do not read, copy, forward,
> or store this message unless you are an intended recipient of it. If you
> have received this message in error, please forward it to the sender and
> delete it completely from your computer system.
>
> --
> Questo messaggio  stato analizzato da Libra ESVA ed  risultato non infetto.
> This message was scanned by Libra ESVA and is believed to be clean.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rrpr| @end|ng |rom emvt@net  Mon Dec  7 05:00:52 2020
From: rrpr| @end|ng |rom emvt@net (Richard Raubertas)
Date: Sun, 6 Dec 2020 23:00:52 -0500
Subject: [R] [R-pkgs] tablesgg: Presentation-quality tables displayed using
 'ggplot2'
Message-ID: <b941b96f-4b29-c0a9-6446-62938f24dcad@emvt.net>

I'm pleased to announce that package 'tablesgg' is now available:

CRAN: https://CRAN.R-project.org/package=tablesgg
GitHub:? https://github.com/rrprf/tablesgg

The package displays presentation-quality tables as plots on an R 
graphics device.? It is unique in combining two features:

* It is aware of the logical structure of the table being presented, and 
makes use of that for automatic layout and styling of the table.? This 
avoids the need for most manual adjustments to achieve an attractive 
result.

* It displays tables using `ggplot2` graphics.? External software such 
as LaTeX or HTML or their viewers is not required.

A full set of tools is provided to control table appearance, including 
titles, footnotes and reference marks, horizontal and vertical rules, 
and spacing or grouping of rows and columns.? Many properties can be set 
automatically by specifying _styles_.? Default styles are included, and 
the user can define custom styles.? There are also tools for low-level 
manipulation of the appearance of individual table elements if desired.

Methods are included to display data frames; tables created by R's 
ftable(), table(), and xtabs() functions; and tables created by the 
`tables` and `xtable` packages.? Methods can be added to display other 
table-like objects.

A vignette is included that illustrates usage and options available in 
the package.

Richard Raubertas

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From |@h@qb@b@ @end|ng |rom y@hoo@com  Tue Dec  8 10:00:36 2020
From: |@h@qb@b@ @end|ng |rom y@hoo@com (Ishaqbaba)
Date: Tue, 8 Dec 2020 09:00:36 +0000 (UTC)
Subject: [R] ON the installation of:  abnormally-distributed/cvreg
References: <1008868403.3520599.1607418036239.ref@mail.yahoo.com>
Message-ID: <1008868403.3520599.1607418036239@mail.yahoo.com>

Hello Sir,
Hope this email finds you hale, healthy and safe.

I have been having problem in installing this:?
install.packages("remotes")
remotes::install_github("abnormally-distributed/cvreg")I am cureently using R 3.6.2 and Rstudio 4.0.3
https://cran.r-project.org/web/packages/cvreg/index.html
when i use the above link to get even the older version from the archive i always got the following message: ?
Object not found!

The requested URL was not found on this server. If you entered the URL manually please check your spelling and try again

?
Hope you put more light for me on that.
Thank youIshaq 

	[[alternative HTML version deleted]]


From @@rnobguh@ @end|ng |rom gm@||@com  Tue Dec  8 10:09:44 2020
From: @@rnobguh@ @end|ng |rom gm@||@com (Aarnob Guha)
Date: Tue, 8 Dec 2020 22:09:44 +1300
Subject: [R] Google Summer of Code 2021
Message-ID: <CAHJJ=7v+Q2qRt0D59zN2jmrwp0u4sm05b2B2rZ26uRv1fS1jzw@mail.gmail.com>

Dear R Project for Statistical Computing,
My name is Aarnob Guha and I am very enthusiastic about participating in
Google Summer of Code in 2021. I've been going through past projects in the
Google Summer of Code archives for this organisation and I was curious as
to whether R Project for Statistical Computing has any projects planned for
2021? If so, I was curious as to what these projects might be so that I can
get an idea of what I need to learn in order to adequately do well in the
project if I end up doing it. If you are ok with disclosing it that is.
Otherwise, it is also fine. Thank you.

Also, I wasn't particularly sure which mailing list to send this email to,
so I just sent it to the general 'help' mailing list. I apologise for any
inconvenience caused by this.
Kind Regards,
Aarnob Guha.

<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Virus-free.
www.avast.com
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec  8 20:01:42 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 8 Dec 2020 11:01:42 -0800
Subject: [R] ON the installation of: abnormally-distributed/cvreg
In-Reply-To: <1008868403.3520599.1607418036239@mail.yahoo.com>
References: <1008868403.3520599.1607418036239.ref@mail.yahoo.com>
 <1008868403.3520599.1607418036239@mail.yahoo.com>
Message-ID: <CAGxFJbR2gwCktMJ-bDwRsEvSApTEe6BZE0aOAB1BBsWk+4YqHA@mail.gmail.com>

Do note in the posting guide linked below (Please read it!), it says:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<http://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

So have you done this?
(though you *might* get a reply here if you get lucky).

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Dec 8, 2020 at 10:48 AM Ishaqbaba via R-help <r-help at r-project.org>
wrote:

> Hello Sir,
> Hope this email finds you hale, healthy and safe.
>
> I have been having problem in installing this:
> install.packages("remotes")
> remotes::install_github("abnormally-distributed/cvreg")I am cureently
> using R 3.6.2 and Rstudio 4.0.3
> https://cran.r-project.org/web/packages/cvreg/index.html
> when i use the above link to get even the older version from the archive i
> always got the following message:
> Object not found!
>
> The requested URL was not found on this server. If you entered the URL
> manually please check your spelling and try again
>
>
> Hope you put more light for me on that.
> Thank youIshaq
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Dec  8 21:15:26 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 8 Dec 2020 14:15:26 -0600
Subject: [R] Google Summer of Code 2021
In-Reply-To: <CAHJJ=7v+Q2qRt0D59zN2jmrwp0u4sm05b2B2rZ26uRv1fS1jzw@mail.gmail.com>
References: <CAHJJ=7v+Q2qRt0D59zN2jmrwp0u4sm05b2B2rZ26uRv1fS1jzw@mail.gmail.com>
Message-ID: <fb1313a6-966d-939f-bb0b-fded0cad7d67@effectivedefense.org>

Hello, Aarnob Guha:


	  I'm not sure, but r-devel at r-project.org might be a better list for 
this question.


	  Over two years ago, I responded to a "Call For Proposals" from the R 
Consortium suggesting a project to improve the capabilities for 
searching R packages.  That proposal was not funded, but documentation 
of the basic idea is still available:


https://en.wikiversity.org/wiki/Draft_Proposal_for_improving_the_ability_of_R_users_to_search_R_packages


	  See also:


https://en.wikiversity.org/wiki/Searching_R_Packages


	  Hope this helps.
	  Spencer Graves
	

On 2020-12-08 03:09, Aarnob Guha wrote:
> Dear R Project for Statistical Computing,
> My name is Aarnob Guha and I am very enthusiastic about participating in
> Google Summer of Code in 2021. I've been going through past projects in the
> Google Summer of Code archives for this organisation and I was curious as
> to whether R Project for Statistical Computing has any projects planned for
> 2021? If so, I was curious as to what these projects might be so that I can
> get an idea of what I need to learn in order to adequately do well in the
> project if I end up doing it. If you are ok with disclosing it that is.
> Otherwise, it is also fine. Thank you.
> 
> Also, I wasn't particularly sure which mailing list to send this email to,
> so I just sent it to the general 'help' mailing list. I apologise for any
> inconvenience caused by this.
> Kind Regards,
> Aarnob Guha.
> 
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> Virus-free.
> www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From pro|jcn@@h @end|ng |rom gm@||@com  Tue Dec  8 21:36:05 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Tue, 8 Dec 2020 15:36:05 -0500
Subject: [R] Google Summer of Code 2021
In-Reply-To: <CAHJJ=7v+Q2qRt0D59zN2jmrwp0u4sm05b2B2rZ26uRv1fS1jzw@mail.gmail.com>
References: <CAHJJ=7v+Q2qRt0D59zN2jmrwp0u4sm05b2B2rZ26uRv1fS1jzw@mail.gmail.com>
Message-ID: <7b0ae9a9-fdfa-b2ac-3243-76e5ec40036f@gmail.com>

https://github.com/rstats-gsoc/gsoc2021/wiki

has been set up, but is NOT up to date as Google has announced changes
to the project structure, essentially making them half the size. That actually
fits with some work I'd like to see done to try to consolidate packages nlsr
and minpack.lm into an improved nls(). nls() is now getting quite ancient
and some fixes I've already proposed seem to be on their way into base R.
However, figuring out how to do these nicely so that legacy code is
preserved needs at least two pairs of eyes to find suitable patches. I'm
sure there are plenty of other projects of this type, and useRs are
encouraged to work up proposals.

I've sent a msg to some of the people who have been involved and am
waiting for a reply. I was co-admin in 2010 with Claudia Beleites, and
am considering upping my effort while things are locked down.

Best, JN

On 2020-12-08 4:09 a.m., Aarnob Guha wrote:
> Dear R Project for Statistical Computing,
> My name is Aarnob Guha and I am very enthusiastic about participating in
> Google Summer of Code in 2021. I've been going through past projects in the
> Google Summer of Code archives for this organisation and I was curious as
> to whether R Project for Statistical Computing has any projects planned for
> 2021? If so, I was curious as to what these projects might be so that I can
> get an idea of what I need to learn in order to adequately do well in the
> project if I end up doing it. If you are ok with disclosing it that is.
> Otherwise, it is also fine. Thank you.
> 
> Also, I wasn't particularly sure which mailing list to send this email to,
> so I just sent it to the general 'help' mailing list. I apologise for any
> inconvenience caused by this.
> Kind Regards,
> Aarnob Guha.
> 
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> Virus-free.
> www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @b@rr|ogor@k| @end|ng |rom gm@||@com  Tue Dec  8 19:48:29 2020
From: @b@rr|ogor@k| @end|ng |rom gm@||@com (Alejandra Barrio Gorski)
Date: Tue, 8 Dec 2020 10:48:29 -0800
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
Message-ID: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>

Dear fellow R users,

Greetings, I am new to this list. I joined because I am pioneering the use
of R for the agency I work for. I essentially work alone and would like to
reach out for help on an issue I have been having. Here it is:

   - From one day to the next, my RStudio does not execute commands when I
   press ctrl + enter. Nothing happens, and then after a few minutes out of
   nowhere, it runs everything at once. This makes it very hard to do my work.
   - I tried uninstalling and re-installing both R and Rstudio, but the
   error comes up again. I tested commands on my R program alone, and it works
   fine there. It could be the way that Rstudio connects to R.
   - I am on a Windows 10 computer. I work for a government agency so there
   may be a few firewall/virus protection issues.

I would love any pointers.

Thank you,
Alejandra

-- 

*Alejandra Barrio*
Linkedin <https://www.linkedin.com/in/alejandra-barrio/> | Website
<https://www.ocf.berkeley.edu/~alejandrabarrio/>
MPP | M.A., International and Area Studies
University of California, Berkeley

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec  8 23:54:10 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 8 Dec 2020 14:54:10 -0800
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
In-Reply-To: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
References: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
Message-ID: <CAGxFJbSJt8asyP_5nAYdg-R3cDeJKOGQPZdAzjfDFDwOmJvrjA@mail.gmail.com>

R and RStudio are separate products developed and supported by separate
organizations, although obviously there is a large intersection between the
two. Nevertheless, if you think this is an RStudio related problem, you
should post on their support site, not here:
https://support.rstudio.com/hc/en-us

One suggestion: You should try to run R using its own built in RGui (it
ships and installs with R) to see if your difficulties replicate there.
That should help pinpoint whether R or RStudio is the source of your
problems, which sound kind of fishy to me.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Dec 8, 2020 at 2:38 PM Alejandra Barrio Gorski <
abarriogorski at gmail.com> wrote:

> Dear fellow R users,
>
> Greetings, I am new to this list. I joined because I am pioneering the use
> of R for the agency I work for. I essentially work alone and would like to
> reach out for help on an issue I have been having. Here it is:
>
>    - From one day to the next, my RStudio does not execute commands when I
>    press ctrl + enter. Nothing happens, and then after a few minutes out of
>    nowhere, it runs everything at once. This makes it very hard to do my
> work.
>    - I tried uninstalling and re-installing both R and Rstudio, but the
>    error comes up again. I tested commands on my R program alone, and it
> works
>    fine there. It could be the way that Rstudio connects to R.
>    - I am on a Windows 10 computer. I work for a government agency so there
>    may be a few firewall/virus protection issues.
>
> I would love any pointers.
>
> Thank you,
> Alejandra
>
> --
>
> *Alejandra Barrio*
> Linkedin <https://www.linkedin.com/in/alejandra-barrio/> | Website
> <https://www.ocf.berkeley.edu/~alejandrabarrio/>
> MPP | M.A., International and Area Studies
> University of California, Berkeley
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Dec  9 02:47:59 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Tue, 8 Dec 2020 19:47:59 -0600
Subject: [R] read_delim {readr} - *.zip files
References: <001501d6cdcd$5384cc10$fa8e6430$.ref@sbcglobal.net>
Message-ID: <001501d6cdcd$5384cc10$fa8e6430$@sbcglobal.net>

r-help Forum

 

While read_csv will unzip and read a *.zip file will it read multiply files
in a *.zip file. For example

 

object <- read_csv(unz(description = "fileName.zip", filename =
"fiename1.csv"))  where filename.zip contains two file fileName1.csv and
fileName2.csv (note this line of code doesn't work). So I'm just curious if
read_csv will read a zip file that contains more than one file.

 

Jeff


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Dec  9 04:00:10 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 8 Dec 2020 19:00:10 -0800
Subject: [R] read_delim {readr} - *.zip files
In-Reply-To: <001501d6cdcd$5384cc10$fa8e6430$@sbcglobal.net>
References: <001501d6cdcd$5384cc10$fa8e6430$.ref@sbcglobal.net>
 <001501d6cdcd$5384cc10$fa8e6430$@sbcglobal.net>
Message-ID: <CAGxFJbR67xLnhrqE+JZW-VT2Xyq-cHEOhDsOC9K6pvpcyKhHHw@mail.gmail.com>

Per the posting guide linked below" (which you _have_ read, right?)

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<http://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

So have you done this? readr is part of the RStudio ecosystem, so posting
on their support page might be another alternative.
(Of course you may get a helpful response here if you get lucky. But you
shouldn't expect one).

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Dec 8, 2020 at 5:48 PM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> r-help Forum
>
>
>
> While read_csv will unzip and read a *.zip file will it read multiply files
> in a *.zip file. For example
>
>
>
> object <- read_csv(unz(description = "fileName.zip", filename =
> "fiename1.csv"))  where filename.zip contains two file fileName1.csv and
> fileName2.csv (note this line of code doesn't work). So I'm just curious if
> read_csv will read a zip file that contains more than one file.
>
>
>
> Jeff
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Dec  9 09:06:46 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 9 Dec 2020 21:06:46 +1300
Subject: [R] Subscript and superscript on one symbol; plotmath.
Message-ID: <20201209210646.1b16bbee@rolf-Latitude-E7470>


I would like to produce, as graphical annotation, the Greek letter sigma
with a superscript of 2 and a subcript of 11.  (I.e. the top left hand
entry of a covariance matrix.)

I've tried:

plot(1:10,main=expression({sigma^2}[11]))

(and variants).  This "sort of" works but there is an undesirable
gap between the sigma and the subscript 11. (IOW the subscript is to
the right of the superscript, whereas ideally the first "1" in "11"
should be vertically below the superscript.

I've also tried (hammer and hope!):

plot(1:10,main=expression(sigma*atop(scriptstyle(2),scriptstyle(11))))

and again this "sort of" works but places the putative superscript a
bit too high and the putative subscript a bit too low.

Is there any way to achieve, with plotmath, an effect like unto that
produced by the LaTeX expression $\sigma^2_{11}$?  Or should I just
give up and go to the pub? :-)

cheers,

Rolf Turner

P.S.  I've explicitly CC-ed Paul Murrell, who is obviously the go-to
guy on such matters, in case he does not regularly monitor this list.

R. T.

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From e| @end|ng |rom ||@@e@NA  Wed Dec  9 09:12:54 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Wed, 9 Dec 2020 10:12:54 +0200
Subject: [R] Subscript and superscript on one symbol; plotmath.
In-Reply-To: <20201209210646.1b16bbee@rolf-Latitude-E7470>
References: <20201209210646.1b16bbee@rolf-Latitude-E7470>
Message-ID: <ced32aba-1e5c-f626-06d3-4df58e195945@lisse.NA>

They let you guys go to the pup again? :-)-O

el

On 09/12/2020 10:06, Rolf Turner wrote:
[...]
> Is there any way to achieve, with plotmath, an effect like unto that
> produced by the LaTeX expression $\sigma^2_{11}$?  Or should I just
> give up and go to the pub? :-)
[...]
-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist 
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Dec  9 09:33:02 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 9 Dec 2020 08:33:02 +0000
Subject: [R] ON the installation of: abnormally-distributed/cvreg
In-Reply-To: <1008868403.3520599.1607418036239@mail.yahoo.com>
References: <1008868403.3520599.1607418036239.ref@mail.yahoo.com>
 <1008868403.3520599.1607418036239@mail.yahoo.com>
Message-ID: <d5833d27-f9e7-a818-1636-aee553309ce4@sapo.pt>

Hello,

There are R versions 3.6.2 and 4.0.3 but no RStudio 4.0.3, the latest is 
RStudio 1.3.1093. To see the versions of R and RStudio you are using run

R.version.string
#[1] "R version 4.0.3 (2020-10-10)"

RStudio.Version()$version
#[1] ?1.3.1093?


The following works with me:

devtools::install_github('abnormally-distributed/cvreg')


Hope this helps,

Rui Barradas

?s 09:00 de 08/12/20, Ishaqbaba via R-help escreveu:
> Hello Sir,
> Hope this email finds you hale, healthy and safe.
> 
> I have been having problem in installing this:
> install.packages("remotes")
> remotes::install_github("abnormally-distributed/cvreg")I am cureently using R 3.6.2 and Rstudio 4.0.3
> https://cran.r-project.org/web/packages/cvreg/index.html
> when i use the above link to get even the older version from the archive i always got the following message:
> Object not found!
> 
> The requested URL was not found on this server. If you entered the URL manually please check your spelling and try again
> 
>   
> Hope you put more light for me on that.
> Thank youIshaq
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Dec  9 10:35:16 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 9 Dec 2020 10:35:16 +0100
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
In-Reply-To: <CAGxFJbSJt8asyP_5nAYdg-R3cDeJKOGQPZdAzjfDFDwOmJvrjA@mail.gmail.com>
References: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
 <CAGxFJbSJt8asyP_5nAYdg-R3cDeJKOGQPZdAzjfDFDwOmJvrjA@mail.gmail.com>
Message-ID: <24528.39508.67535.190304@stat.math.ethz.ch>

>>>>> Bert Gunter 
>>>>>     on Tue, 8 Dec 2020 14:54:10 -0800 writes:

    > R and RStudio are separate products developed and
    > supported by separate organizations, although obviously
    > there is a large intersection between the
    > two. Nevertheless, if you think this is an RStudio related
    > problem, you should post on their support site, not here:
    > https://support.rstudio.com/hc/en-us

    > One suggestion: You should try to run R using its own
    > built in RGui (it ships and installs with R) to see if
    > your difficulties replicate there.  That should help
    > pinpoint whether R or RStudio is the source of your
    > problems, which sound kind of fishy to me.

    > Bert Gunter

Alejandra did say in her first post that things work fine when
she runs  R  "alone" ..

Welcome to the R user community, Alejandra!

Also, yes indeed, government (or company) firewalls *do* lead
to problems which are sometimes much more prominent when using R
via Rstudio, rather than using R "alone" (or via ESS which I use
99% of the time, "Emacs Speaks Statistics").

This is because Rstudio tries to do many things behind your back (*)
in order to be helpful to you later ...
((a little bit like Windows which you are using too,
  and I am happy I only have to do very rarely))

So, indeed, follow  Bert's advice to ask on the Rstudio
company support site.

Martin


---
*) e.g. looking at all your installed packages, which is still
 pretty detrimentous if you have full CRAN and much bioconductor
 installed as I;  also I think it installs things it needs from
 the internet without asking you, and then may get timeouts
 because of your firewall.






    > On Tue, Dec 8, 2020 at 2:38 PM Alejandra Barrio Gorski <
    > abarriogorski at gmail.com> wrote:

    >> Dear fellow R users,
    >> 
    >> Greetings, I am new to this list. I joined because I am
    >> pioneering the use of R for the agency I work for. I
    >> essentially work alone and would like to reach out for
    >> help on an issue I have been having. Here it is:
    >> 
    >> - From one day to the next, my RStudio does not execute
    >> commands when I press ctrl + enter. Nothing happens, and
    >> then after a few minutes out of nowhere, it runs
    >> everything at once. This makes it very hard to do my
    >> work.  - I tried uninstalling and re-installing both R
    >> and Rstudio, but the error comes up again. I tested
    >> commands on my R program alone, and it works fine
    >> there. It could be the way that Rstudio connects to R.  -
    >> I am on a Windows 10 computer. I work for a government
    >> agency so there may be a few firewall/virus protection
    >> issues.
    >> 
    >> I would love any pointers.
    >> 
    >> Thank you, Alejandra
    >> 
    >> --
    >> 
    >> *Alejandra Barrio* Linkedin
    >> <https://www.linkedin.com/in/alejandra-barrio/> | Website
    >> <https://www.ocf.berkeley.edu/~alejandrabarrio/> MPP |
    >> M.A., International and Area Studies University of
    >> California, Berkeley
    >> 
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide
    >> http://www.R-project.org/posting-guide.html and provide
    >> commented, minimal, self-contained, reproducible code.
    >> 

    > 	[[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Wed Dec  9 11:47:50 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 9 Dec 2020 12:47:50 +0200
Subject: [R] Subscript and superscript on one symbol; plotmath.
In-Reply-To: <ced32aba-1e5c-f626-06d3-4df58e195945@lisse.NA>
References: <20201209210646.1b16bbee@rolf-Latitude-E7470>
 <ced32aba-1e5c-f626-06d3-4df58e195945@lisse.NA>
Message-ID: <CAGgJW763yoo3_g_R5L-HwROhBQ0QMAns0ogXzhiO73fwwfowDA@mail.gmail.com>

Hi Rolf,
This is not addressing your implementation, but reformulates the goal.
Specifically, the covariance matrix is normally written as \Sigma (not
\sigma^2).
So to specify the upper left element you would write (in Latex)
\Sigma_{11}.
No superscript (so no problem!)

HTH,
Eric


On Wed, Dec 9, 2020 at 10:17 AM Dr Eberhard W Lisse <el at lisse.na> wrote:

> They let you guys go to the pup again? :-)-O
>
> el
>
> On 09/12/2020 10:06, Rolf Turner wrote:
> [...]
> > Is there any way to achieve, with plotmath, an effect like unto that
> > produced by the LaTeX expression $\sigma^2_{11}$?  Or should I just
> > give up and go to the pub? :-)
> [...]
> --
> Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
> el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
> PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
> 10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec  9 12:18:10 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 9 Dec 2020 06:18:10 -0500
Subject: [R] Subscript and superscript on one symbol; plotmath.
In-Reply-To: <20201209210646.1b16bbee@rolf-Latitude-E7470>
References: <20201209210646.1b16bbee@rolf-Latitude-E7470>
Message-ID: <e005a785-5816-7b2f-9d99-933aa78f8c2c@gmail.com>

On 09/12/2020 3:06 a.m., Rolf Turner wrote:
> 
> I would like to produce, as graphical annotation, the Greek letter sigma
> with a superscript of 2 and a subcript of 11.  (I.e. the top left hand
> entry of a covariance matrix.)
> 
> I've tried:
> 
> plot(1:10,main=expression({sigma^2}[11]))
> 
> (and variants).  This "sort of" works but there is an undesirable
> gap between the sigma and the subscript 11. (IOW the subscript is to
> the right of the superscript, whereas ideally the first "1" in "11"
> should be vertically below the superscript.

When I run

  plot(1:10,main=expression(sigma[11]^2))

I think I get what you want.

Duncan Murdoch

> 
> I've also tried (hammer and hope!):
> 
> plot(1:10,main=expression(sigma*atop(scriptstyle(2),scriptstyle(11))))
> 
> and again this "sort of" works but places the putative superscript a
> bit too high and the putative subscript a bit too low.
> 
> Is there any way to achieve, with plotmath, an effect like unto that
> produced by the LaTeX expression $\sigma^2_{11}$?  Or should I just
> give up and go to the pub? :-)
> 
> cheers,
> 
> Rolf Turner
> 
> P.S.  I've explicitly CC-ed Paul Murrell, who is obviously the go-to
> guy on such matters, in case he does not regularly monitor this list.
> 
> R. T.
>


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Dec  9 12:31:05 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 9 Dec 2020 11:31:05 +0000
Subject: [R] second legend in biplot
In-Reply-To: <CA+8X3fU9F7U+mmPJ_QR4o=k9HUWk3=-J8izJJtXP2CEhb03kZA@mail.gmail.com>
References: <5bbd05118bae4009b423273b6255965f@SRVEXCHCM1302.precheza.cz>
 <CA+8X3fU9F7U+mmPJ_QR4o=k9HUWk3=-J8izJJtXP2CEhb03kZA@mail.gmail.com>
Message-ID: <94ff7ea1bf4c4bdf9f71819be2a6aa61@SRVEXCHCM1302.precheza.cz>

Thank you Jim.

biplot can have distinct colours of points and arrows but not points coded 
according to some factor. In simple example I provided, points are coded 
according by 2 factors. What I would like to achieve is to colour points and 
have their shapes coded by second factor, which fviz_pca_biplot does, however 
it does not present this second factor in the legend.

Probably the last resort is to rewrite original code which I would like to 
avoid as I am not so experienced in grid graphics.

Best regards
Petr

> -----Original Message-----
> From: Jim Lemon <drjimlemon at gmail.com>
> Sent: Monday, December 7, 2020 9:53 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R mailing list <r-help at r-project.org>
> Subject: Re: [R] second legend in biplot
>
> Hi Petr,
> Here's an attempt, using the example in biplot.princomp:
>
> biplot(princomp(USArrests))
> > par("usr")
> [1] -497.2263  624.8856 -497.2263  624.8856
> legend(-180,600,c("State","Crime"),lty=1,col=c("black","red"))
>
> Jim
>
> On Mon, Dec 7, 2020 at 6:23 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Dear all
> >
> > I try to make fviz_pca_biplot with 2 (or more) legends. Below is data
> > and the code, which gives one legend (colour) for coating variable and
> > correctly shows triangles and circles for size variable. But this is
> > not shown in the legend. Hopefully somebody could help.
> >
> > And before you ask, I tried to contact maintainer about a week ago but
> > did not get response, therefore I try to post again here.
> >
> > Even an answer that current version of fviz_pca_biplot does not
> > support 2 legends with different point shapes is OK as it will send me
> > either to adapt source code or to stop trying impossible.
> >
> > Best regards
> > Petr
> >
> > library(factoextra)
> > library(FactoMineR)
> >
> > fit <- PCA(temp, quali.sup=c(9,10))
> > fviz_pca_biplot(fit, col.ind = temp$coating, repel=T, col.var =
> > "black", palette = "lancet", invisible="quali", pointsize=5,
> > pointshape=temp$size, legend.title = list(col = "Coating",
> > shape="Size"), xlim=c(-6,6), title="Instillation results")
> >
> > temp <- structure(list(leukocyte28 = c(96875L, 73438L, 68229L, 94479L,
> > 76563L, 141667L, 111042L, 93333L, 132083L, 103542L, 61667L, 77708L ),
> > macrophage28 = c(60.29, 99.13, 97.04, 98.54, 98.46, 75.2, 89.71, 98,
> > 82, 98.83, 99.08, 98.54), pmn28 = c(38.58, 0.58, 2.71, 0.92, 1, 24.25,
> > 9.29, 1.5, 15.08, 0.92, 0.67, 1), lymphocyte28 = c(1.13, 0.29, 0.25,
> > 0.54, 0.54, 0.55, 1, 0.5, 2.92, 0.25, 0.25, 0.46),
> >     leukocyte3 = c(186042L, 111250L, 114375L, 111146L, 98854L,
> >     156250L, 250625L, 183125L, 202917L, 161875L, 184792L, 128333L
> >     ), macrophage3 = c(53.88, 95.96, 98.29, 98.92, 98.92, 78.3,
> >     82.33, 97.83, 84.79, 97.25, 97.75, 98.46), pmn3 = c(44.75,
> >     3.46, 1.29, 0.67, 0.71, 20.4, 16.67, 1.92, 14.04, 1.92, 1.67,
> >     1.21), lymphocyte3 = c(1.38, 0.58, 0.42, 0.42, 0.38, 1.3,
> >     1, 0.25, 1.17, 0.83, 0.58, 0.33), coating = structure(c(3L,
> >     3L, 3L, 1L, 7L, 1L, 2L, 5L, 4L, 6L, 3L, 3L), .Label = c("alumina",
> >     "both", "none", "phosphate", "silica", "tungsten", "zirconia"
> >     ), class = "factor"), size = structure(c(1L, 1L, 2L, 2L,
> >     2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L), .Label = c("nano", "pigmentary"
> >     ), class = "factor")), class = "data.frame", row.names = c(NA,
> > 12L))
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

From tuech|er @end|ng |rom gmx@@t  Wed Dec  9 12:33:11 2020
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Wed, 9 Dec 2020 12:33:11 +0100
Subject: [R] svglite with multiple files
Message-ID: <9b07897b-43f0-1ba4-8485-30aa88741f39@gmx.at>

Dear All,

while svg() (package grDevices) can produce several files, svglite()
(package svglite) is limited to one file/page only (as documented in the
respective help page).
Is there a simple solution to make svglite() work like svg() to produce
several files?
Of course one could call svglite() before dev.off() after every plot.

best regards,

Heinz

## example
svg("Rplot%03d.svg")
plot(1)
plot(2)
plot(3)
dev.off()
## three files Rplot001.svg, Rplot002.svg, Rplot003.svg are produced

library(svglite)
svglite("Rplot-lite.svg")
plot(1)
plot(2) ## as documented: Error in plot.new() : svglite only supports
one page


From bgunter@4567 @end|ng |rom gm@||@com  Wed Dec  9 17:35:11 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 9 Dec 2020 08:35:11 -0800
Subject: [R] svglite with multiple files
In-Reply-To: <9b07897b-43f0-1ba4-8485-30aa88741f39@gmx.at>
References: <9b07897b-43f0-1ba4-8485-30aa88741f39@gmx.at>
Message-ID: <CAGxFJbRH8M=3DQhBrL50f3nTvbGpSCTjDXcJNYxO9pMWAJ13DQ@mail.gmail.com>

Sigh... Per the posting guide (which you have read, right?):

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<http://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.If the question relates to a *contributed package* ,
e.g., one downloaded from CRAN, try contacting the package maintainer
first. You can also use find("functionname") and
packageDescription("packagename") to find this information. *Only* send
such questions to R-help or R-devel if you get no reply or need further
assistance. This applies to both requests for help and to bug reports. "

This certainly sounds like a question for the svglite maintainer,
?maintainer, who might know about "tricks" that one could use. Though you
might get lucky here -- it's just that you should not expect to. If you
tried to contact the maintainer but received no response, do include that
info in your post.

Cheers,

Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Dec 9, 2020 at 3:33 AM Heinz Tuechler <tuechler at gmx.at> wrote:

> Dear All,
>
> while svg() (package grDevices) can produce several files, svglite()
> (package svglite) is limited to one file/page only (as documented in the
> respective help page).
> Is there a simple solution to make svglite() work like svg() to produce
> several files?
> Of course one could call svglite() before dev.off() after every plot.
>
> best regards,
>
> Heinz
>
> ## example
> svg("Rplot%03d.svg")
> plot(1)
> plot(2)
> plot(3)
> dev.off()
> ## three files Rplot001.svg, Rplot002.svg, Rplot003.svg are produced
>
> library(svglite)
> svglite("Rplot-lite.svg")
> plot(1)
> plot(2) ## as documented: Error in plot.new() : svglite only supports
> one page
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From tuech|er @end|ng |rom gmx@@t  Wed Dec  9 19:29:57 2020
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Wed, 9 Dec 2020 19:29:57 +0100
Subject: [R] svglite with multiple files
In-Reply-To: <CAGxFJbRH8M=3DQhBrL50f3nTvbGpSCTjDXcJNYxO9pMWAJ13DQ@mail.gmail.com>
References: <9b07897b-43f0-1ba4-8485-30aa88741f39@gmx.at>
 <CAGxFJbRH8M=3DQhBrL50f3nTvbGpSCTjDXcJNYxO9pMWAJ13DQ@mail.gmail.com>
Message-ID: <30d3d9de-315a-6c69-14b6-3f3bd0d64396@gmx.at>

Dear Bert,

of course I have read the posting guide, almost two decades ago, but
usually I focus on reading carefully a posting before replying.
To be more precise, I did *not* ask about the svglite-package, as it
works as described.
My question was: "Is there a simple solution to make svglite() work like
svg() to produce several files?"
To make it more explicit for you, I could add "using standard packages
distributed with R".
So maybe you or others have some ideas, how to solve that question in a
convenient way. As mentioned I know complicated solutions, as e.g. call
svglite() before dev.off() after every plot.

best,
Heinz


Bert Gunter wrote/hat geschrieben on/am 09.12.2020 17:35:
> Sigh... Per the posting guide (which you have read, right?):
>
> "For questions about functions in standard packages distributed with R (see
> the FAQ Add-on packages in R
> <http://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
> questions on R-help.If the question relates to a *contributed package* ,
> e.g., one downloaded from CRAN, try contacting the package maintainer
> first. You can also use find("functionname") and
> packageDescription("packagename") to find this information. *Only* send
> such questions to R-help or R-devel if you get no reply or need further
> assistance. This applies to both requests for help and to bug reports. "
>
> This certainly sounds like a question for the svglite maintainer,
> ?maintainer, who might know about "tricks" that one could use. Though you
> might get lucky here -- it's just that you should not expect to. If you
> tried to contact the maintainer but received no response, do include that
> info in your post.
>
> Cheers,
>
> Bert
>
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Wed, Dec 9, 2020 at 3:33 AM Heinz Tuechler <tuechler at gmx.at> wrote:
>
>> Dear All,
>>
>> while svg() (package grDevices) can produce several files, svglite()
>> (package svglite) is limited to one file/page only (as documented in the
>> respective help page).
>> Is there a simple solution to make svglite() work like svg() to produce
>> several files?
>> Of course one could call svglite() before dev.off() after every plot.
>>
>> best regards,
>>
>> Heinz
>>
>> ## example
>> svg("Rplot%03d.svg")
>> plot(1)
>> plot(2)
>> plot(3)
>> dev.off()
>> ## three files Rplot001.svg, Rplot002.svg, Rplot003.svg are produced
>>
>> library(svglite)
>> svglite("Rplot-lite.svg")
>> plot(1)
>> plot(2) ## as documented: Error in plot.new() : svglite only supports
>> one page
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From drj|m|emon @end|ng |rom gm@||@com  Wed Dec  9 23:37:08 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 10 Dec 2020 09:37:08 +1100
Subject: [R] second legend in biplot
In-Reply-To: <94ff7ea1bf4c4bdf9f71819be2a6aa61@SRVEXCHCM1302.precheza.cz>
References: <5bbd05118bae4009b423273b6255965f@SRVEXCHCM1302.precheza.cz>
 <CA+8X3fU9F7U+mmPJ_QR4o=k9HUWk3=-J8izJJtXP2CEhb03kZA@mail.gmail.com>
 <94ff7ea1bf4c4bdf9f71819be2a6aa61@SRVEXCHCM1302.precheza.cz>
Message-ID: <CA+8X3fWzZyNJ4tYJ-aSGUqkOg_4+qdNPP91JEmdXyn_1c0p0Pg@mail.gmail.com>

Hi Petr,
Perhaps legendg in plotrix can help:

legendg(-180,600,c("State","Crime"),lty=1,col=list("black","red"),pch=3:4)

Jim

On Wed, Dec 9, 2020 at 10:31 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Thank you Jim.
>
> biplot can have distinct colours of points and arrows but not points coded
> according to some factor. In simple example I provided, points are coded
> according by 2 factors. What I would like to achieve is to colour points and
> have their shapes coded by second factor, which fviz_pca_biplot does, however
> it does not present this second factor in the legend.
>
> Probably the last resort is to rewrite original code which I would like to
> avoid as I am not so experienced in grid graphics.
>
> Best regards
> Petr
>
> > -----Original Message-----
> > From: Jim Lemon <drjimlemon at gmail.com>
> > Sent: Monday, December 7, 2020 9:53 PM
> > To: PIKAL Petr <petr.pikal at precheza.cz>
> > Cc: R mailing list <r-help at r-project.org>
> > Subject: Re: [R] second legend in biplot
> >
> > Hi Petr,
> > Here's an attempt, using the example in biplot.princomp:
> >
> > biplot(princomp(USArrests))
> > > par("usr")
> > [1] -497.2263  624.8856 -497.2263  624.8856
> > legend(-180,600,c("State","Crime"),lty=1,col=c("black","red"))
> >
> > Jim
> >
> > On Mon, Dec 7, 2020 at 6:23 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> > >
> > > Dear all
> > >
> > > I try to make fviz_pca_biplot with 2 (or more) legends. Below is data
> > > and the code, which gives one legend (colour) for coating variable and
> > > correctly shows triangles and circles for size variable. But this is
> > > not shown in the legend. Hopefully somebody could help.
> > >
> > > And before you ask, I tried to contact maintainer about a week ago but
> > > did not get response, therefore I try to post again here.
> > >
> > > Even an answer that current version of fviz_pca_biplot does not
> > > support 2 legends with different point shapes is OK as it will send me
> > > either to adapt source code or to stop trying impossible.
> > >
> > > Best regards
> > > Petr
> > >
> > > library(factoextra)
> > > library(FactoMineR)
> > >
> > > fit <- PCA(temp, quali.sup=c(9,10))
> > > fviz_pca_biplot(fit, col.ind = temp$coating, repel=T, col.var =
> > > "black", palette = "lancet", invisible="quali", pointsize=5,
> > > pointshape=temp$size, legend.title = list(col = "Coating",
> > > shape="Size"), xlim=c(-6,6), title="Instillation results")
> > >
> > > temp <- structure(list(leukocyte28 = c(96875L, 73438L, 68229L, 94479L,
> > > 76563L, 141667L, 111042L, 93333L, 132083L, 103542L, 61667L, 77708L ),
> > > macrophage28 = c(60.29, 99.13, 97.04, 98.54, 98.46, 75.2, 89.71, 98,
> > > 82, 98.83, 99.08, 98.54), pmn28 = c(38.58, 0.58, 2.71, 0.92, 1, 24.25,
> > > 9.29, 1.5, 15.08, 0.92, 0.67, 1), lymphocyte28 = c(1.13, 0.29, 0.25,
> > > 0.54, 0.54, 0.55, 1, 0.5, 2.92, 0.25, 0.25, 0.46),
> > >     leukocyte3 = c(186042L, 111250L, 114375L, 111146L, 98854L,
> > >     156250L, 250625L, 183125L, 202917L, 161875L, 184792L, 128333L
> > >     ), macrophage3 = c(53.88, 95.96, 98.29, 98.92, 98.92, 78.3,
> > >     82.33, 97.83, 84.79, 97.25, 97.75, 98.46), pmn3 = c(44.75,
> > >     3.46, 1.29, 0.67, 0.71, 20.4, 16.67, 1.92, 14.04, 1.92, 1.67,
> > >     1.21), lymphocyte3 = c(1.38, 0.58, 0.42, 0.42, 0.38, 1.3,
> > >     1, 0.25, 1.17, 0.83, 0.58, 0.33), coating = structure(c(3L,
> > >     3L, 3L, 1L, 7L, 1L, 2L, 5L, 4L, 6L, 3L, 3L), .Label = c("alumina",
> > >     "both", "none", "phosphate", "silica", "tungsten", "zirconia"
> > >     ), class = "factor"), size = structure(c(1L, 1L, 2L, 2L,
> > >     2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L), .Label = c("nano", "pigmentary"
> > >     ), class = "factor")), class = "data.frame", row.names = c(NA,
> > > 12L))
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Dec 10 00:45:56 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 10 Dec 2020 12:45:56 +1300
Subject: [R] Subscript and superscript on one symbol; plotmath.
In-Reply-To: <e005a785-5816-7b2f-9d99-933aa78f8c2c@gmail.com>
References: <20201209210646.1b16bbee@rolf-Latitude-E7470>
 <e005a785-5816-7b2f-9d99-933aa78f8c2c@gmail.com>
Message-ID: <20201210124556.3944b4f5@rolf-Latitude-E7470>


On Wed, 9 Dec 2020 06:18:10 -0500
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 09/12/2020 3:06 a.m., Rolf Turner wrote:
> > 
> > I would like to produce, as graphical annotation, the Greek letter
> > sigma with a superscript of 2 and a subcript of 11.  (I.e. the top
> > left hand entry of a covariance matrix.)
> > 
> > I've tried:
> > 
> > plot(1:10,main=expression({sigma^2}[11]))
> > 
> > (and variants).  This "sort of" works but there is an undesirable
> > gap between the sigma and the subscript 11. (IOW the subscript is to
> > the right of the superscript, whereas ideally the first "1" in "11"
> > should be vertically below the superscript.  
> 
> When I run
> 
>   plot(1:10,main=expression(sigma[11]^2))
> 
> I think I get what you want.

<SNIP>

Dang!!! I was sure that that's one of the variants I'd tried!!!
Duh.  This is indeed exactly what I want.  Thanks Duncan.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Dec 10 02:03:01 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 9 Dec 2020 20:03:01 -0500
Subject: [R] Subscript and superscript on one symbol; plotmath.
In-Reply-To: <20201210124556.3944b4f5@rolf-Latitude-E7470>
References: <20201209210646.1b16bbee@rolf-Latitude-E7470>
 <e005a785-5816-7b2f-9d99-933aa78f8c2c@gmail.com>
 <20201210124556.3944b4f5@rolf-Latitude-E7470>
Message-ID: <8514f97d-3019-b2e3-05ef-88bd5dede54b@gmail.com>

On 09/12/2020 6:45 p.m., Rolf Turner wrote:
> 
> On Wed, 9 Dec 2020 06:18:10 -0500
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> On 09/12/2020 3:06 a.m., Rolf Turner wrote:
>>>
>>> I would like to produce, as graphical annotation, the Greek letter
>>> sigma with a superscript of 2 and a subcript of 11.  (I.e. the top
>>> left hand entry of a covariance matrix.)
>>>
>>> I've tried:
>>>
>>> plot(1:10,main=expression({sigma^2}[11]))
>>>
>>> (and variants).  This "sort of" works but there is an undesirable
>>> gap between the sigma and the subscript 11. (IOW the subscript is to
>>> the right of the superscript, whereas ideally the first "1" in "11"
>>> should be vertically below the superscript.
>>
>> When I run
>>
>>    plot(1:10,main=expression(sigma[11]^2))
>>
>> I think I get what you want.
> 
> <SNIP>
> 
> Dang!!! I was sure that that's one of the variants I'd tried!!!
> Duh.  This is indeed exactly what I want.  Thanks Duncan.

You probably did try it, but remember what Einstein is supposed to have 
said:

?Insanity is doing the same thing over and over and expecting different 
results.?

It just shows that it helps to be a little insane.

Duncan Murdoch


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Dec 10 09:47:27 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 10 Dec 2020 08:47:27 +0000
Subject: [R] second legend in biplot
In-Reply-To: <CA+8X3fWzZyNJ4tYJ-aSGUqkOg_4+qdNPP91JEmdXyn_1c0p0Pg@mail.gmail.com>
References: <5bbd05118bae4009b423273b6255965f@SRVEXCHCM1302.precheza.cz>
 <CA+8X3fU9F7U+mmPJ_QR4o=k9HUWk3=-J8izJJtXP2CEhb03kZA@mail.gmail.com>
 <94ff7ea1bf4c4bdf9f71819be2a6aa61@SRVEXCHCM1302.precheza.cz>
 <CA+8X3fWzZyNJ4tYJ-aSGUqkOg_4+qdNPP91JEmdXyn_1c0p0Pg@mail.gmail.com>
Message-ID: <f385d4710a204ee4bf5b80403eb9cc25@SRVEXCHCM1302.precheza.cz>

Thank you Jim

I am almost sure that biplot and prcomp itself cannot do point (text) coding 
according to some factor.

The closest way to what I want to achieve is to use result from prcomp and add 
points into existing biplot, something like that

PCA <- prcomp(iris[,-5], scale=T, center=T)
biplot(PCA)
points(PCA$x[,1:2], pch=20, col=iris$Species)
>
But maybe tweeking the code from fviz_pca_biplot could be easier as it is 
possible to have separate legend for point colour and shape but shape and 
colour is the same.
https://stackoverflow.com/questions/47482879/how-to-make-a-pretty-biplot-in-r-without-using-external-packages

I want shape and colour coded by different factors.

Anyway, thanks for your effort.

Cheers
Petr

> -----Original Message-----
> From: Jim Lemon <drjimlemon at gmail.com>
> Sent: Wednesday, December 9, 2020 11:37 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R mailing list <r-help at r-project.org>
> Subject: Re: [R] second legend in biplot
>
> Hi Petr,
> Perhaps legendg in plotrix can help:
>
> legendg(-180,600,c("State","Crime"),lty=1,col=list("black","red"),pch=3:4)
>
> Jim
>
> On Wed, Dec 9, 2020 at 10:31 PM PIKAL Petr <petr.pikal at precheza.cz>
> wrote:
> >
> > Thank you Jim.
> >
> > biplot can have distinct colours of points and arrows but not points
> > coded according to some factor. In simple example I provided, points
> > are coded according by 2 factors. What I would like to achieve is to
> > colour points and have their shapes coded by second factor, which
> > fviz_pca_biplot does, however it does not present this second factor in 
> > the
> legend.
> >
> > Probably the last resort is to rewrite original code which I would
> > like to avoid as I am not so experienced in grid graphics.
> >
> > Best regards
> > Petr
> >
> > > -----Original Message-----
> > > From: Jim Lemon <drjimlemon at gmail.com>
> > > Sent: Monday, December 7, 2020 9:53 PM
> > > To: PIKAL Petr <petr.pikal at precheza.cz>
> > > Cc: R mailing list <r-help at r-project.org>
> > > Subject: Re: [R] second legend in biplot
> > >
> > > Hi Petr,
> > > Here's an attempt, using the example in biplot.princomp:
> > >
> > > biplot(princomp(USArrests))
> > > > par("usr")
> > > [1] -497.2263  624.8856 -497.2263  624.8856
> > > legend(-180,600,c("State","Crime"),lty=1,col=c("black","red"))
> > >
> > > Jim
> > >
> > > On Mon, Dec 7, 2020 at 6:23 PM PIKAL Petr <petr.pikal at precheza.cz>
> wrote:
> > > >
> > > > Dear all
> > > >
> > > > I try to make fviz_pca_biplot with 2 (or more) legends. Below is
> > > > data and the code, which gives one legend (colour) for coating
> > > > variable and correctly shows triangles and circles for size
> > > > variable. But this is not shown in the legend. Hopefully somebody 
> > > > could
> help.
> > > >
> > > > And before you ask, I tried to contact maintainer about a week ago
> > > > but did not get response, therefore I try to post again here.
> > > >
> > > > Even an answer that current version of fviz_pca_biplot does not
> > > > support 2 legends with different point shapes is OK as it will
> > > > send me either to adapt source code or to stop trying impossible.
> > > >
> > > > Best regards
> > > > Petr
> > > >
> > > > library(factoextra)
> > > > library(FactoMineR)
> > > >
> > > > fit <- PCA(temp, quali.sup=c(9,10)) fviz_pca_biplot(fit, col.ind =
> > > > temp$coating, repel=T, col.var = "black", palette = "lancet",
> > > > invisible="quali", pointsize=5, pointshape=temp$size, legend.title
> > > > = list(col = "Coating", shape="Size"), xlim=c(-6,6),
> > > > title="Instillation results")
> > > >
> > > > temp <- structure(list(leukocyte28 = c(96875L, 73438L, 68229L,
> > > > 94479L, 76563L, 141667L, 111042L, 93333L, 132083L, 103542L,
> > > > 61667L, 77708L ),
> > > > macrophage28 = c(60.29, 99.13, 97.04, 98.54, 98.46, 75.2, 89.71,
> > > > 98, 82, 98.83, 99.08, 98.54), pmn28 = c(38.58, 0.58, 2.71, 0.92,
> > > > 1, 24.25, 9.29, 1.5, 15.08, 0.92, 0.67, 1), lymphocyte28 = c(1.13,
> > > > 0.29, 0.25, 0.54, 0.54, 0.55, 1, 0.5, 2.92, 0.25, 0.25, 0.46),
> > > >     leukocyte3 = c(186042L, 111250L, 114375L, 111146L, 98854L,
> > > >     156250L, 250625L, 183125L, 202917L, 161875L, 184792L, 128333L
> > > >     ), macrophage3 = c(53.88, 95.96, 98.29, 98.92, 98.92, 78.3,
> > > >     82.33, 97.83, 84.79, 97.25, 97.75, 98.46), pmn3 = c(44.75,
> > > >     3.46, 1.29, 0.67, 0.71, 20.4, 16.67, 1.92, 14.04, 1.92, 1.67,
> > > >     1.21), lymphocyte3 = c(1.38, 0.58, 0.42, 0.42, 0.38, 1.3,
> > > >     1, 0.25, 1.17, 0.83, 0.58, 0.33), coating = structure(c(3L,
> > > >     3L, 3L, 1L, 7L, 1L, 2L, 5L, 4L, 6L, 3L, 3L), .Label = c("alumina",
> > > >     "both", "none", "phosphate", "silica", "tungsten", "zirconia"
> > > >     ), class = "factor"), size = structure(c(1L, 1L, 2L, 2L,
> > > >     2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L), .Label = c("nano", "pigmentary"
> > > >     ), class = "factor")), class = "data.frame", row.names = c(NA,
> > > > 12L))
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.

From petr@p|k@| @end|ng |rom prechez@@cz  Thu Dec 10 10:36:26 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 10 Dec 2020 09:36:26 +0000
Subject: [R] second legend in biplot
In-Reply-To: <CA+8X3fUeYMnnfTs_UMQLR+tJbMfut-yKsOP24gpcSYrXka0ggg@mail.gmail.com>
References: <5bbd05118bae4009b423273b6255965f@SRVEXCHCM1302.precheza.cz>
 <CA+8X3fU9F7U+mmPJ_QR4o=k9HUWk3=-J8izJJtXP2CEhb03kZA@mail.gmail.com>
 <94ff7ea1bf4c4bdf9f71819be2a6aa61@SRVEXCHCM1302.precheza.cz>
 <CA+8X3fWzZyNJ4tYJ-aSGUqkOg_4+qdNPP91JEmdXyn_1c0p0Pg@mail.gmail.com>
 <f385d4710a204ee4bf5b80403eb9cc25@SRVEXCHCM1302.precheza.cz>
 <CA+8X3fUeYMnnfTs_UMQLR+tJbMfut-yKsOP24gpcSYrXka0ggg@mail.gmail.com>
Message-ID: <3373fa76dd2c46948ef4e2301a7eba65@SRVEXCHCM1302.precheza.cz>

Hallo Jim

It is OK, your discussion was helpful as I found another way how to present 
PCA results.

It is my job to tweek the code to suite my purpose.

Cheers
Petr

> -----Original Message-----
> From: Jim Lemon <drjimlemon at gmail.com>
> Sent: Thursday, December 10, 2020 9:57 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Subject: Re: [R] second legend in biplot
>
> Ah, gotcha. I thought you just wanted the fancy legend. Sorry, I haven't got
> time to rewrite functions at that moment.
>
> Jim
>
> On Thu, Dec 10, 2020 at 7:47 PM PIKAL Petr <petr.pikal at precheza.cz>
> wrote:
> >
> > Thank you Jim
> >
> > I am almost sure that biplot and prcomp itself cannot do point (text)
> > coding according to some factor.
> >
> > The closest way to what I want to achieve is to use result from prcomp
> > and add points into existing biplot, something like that
> >
> > PCA <- prcomp(iris[,-5], scale=T, center=T)
> > biplot(PCA)
> > points(PCA$x[,1:2], pch=20, col=iris$Species)
> > >
> > But maybe tweeking the code from fviz_pca_biplot could be easier as it
> > is possible to have separate legend for point colour and shape but
> > shape and colour is the same.
> > https://stackoverflow.com/questions/47482879/how-to-make-a-pretty-
> bipl
> > ot-in-r-without-using-external-packages
> >
> > I want shape and colour coded by different factors.
> >
> > Anyway, thanks for your effort.
> >
> > Cheers
> > Petr
> >
> > > -----Original Message-----
> > > From: Jim Lemon <drjimlemon at gmail.com>
> > > Sent: Wednesday, December 9, 2020 11:37 PM
> > > To: PIKAL Petr <petr.pikal at precheza.cz>
> > > Cc: R mailing list <r-help at r-project.org>
> > > Subject: Re: [R] second legend in biplot
> > >
> > > Hi Petr,
> > > Perhaps legendg in plotrix can help:
> > >
> > > legendg(-180,600,c("State","Crime"),lty=1,col=list("black","red"),pc
> > > h=3:4)
> > >
> > > Jim
> > >
> > > On Wed, Dec 9, 2020 at 10:31 PM PIKAL Petr <petr.pikal at precheza.cz>
> > > wrote:
> > > >
> > > > Thank you Jim.
> > > >
> > > > biplot can have distinct colours of points and arrows but not
> > > > points coded according to some factor. In simple example I
> > > > provided, points are coded according by 2 factors. What I would
> > > > like to achieve is to colour points and have their shapes coded by
> > > > second factor, which fviz_pca_biplot does, however it does not
> > > > present this second factor in the
> > > legend.
> > > >
> > > > Probably the last resort is to rewrite original code which I would
> > > > like to avoid as I am not so experienced in grid graphics.
> > > >
> > > > Best regards
> > > > Petr
> > > >
> > > > > -----Original Message-----
> > > > > From: Jim Lemon <drjimlemon at gmail.com>
> > > > > Sent: Monday, December 7, 2020 9:53 PM
> > > > > To: PIKAL Petr <petr.pikal at precheza.cz>
> > > > > Cc: R mailing list <r-help at r-project.org>
> > > > > Subject: Re: [R] second legend in biplot
> > > > >
> > > > > Hi Petr,
> > > > > Here's an attempt, using the example in biplot.princomp:
> > > > >
> > > > > biplot(princomp(USArrests))
> > > > > > par("usr")
> > > > > [1] -497.2263  624.8856 -497.2263  624.8856
> > > > > legend(-180,600,c("State","Crime"),lty=1,col=c("black","red"))
> > > > >
> > > > > Jim
> > > > >
> > > > > On Mon, Dec 7, 2020 at 6:23 PM PIKAL Petr
> > > > > <petr.pikal at precheza.cz>
> > > wrote:
> > > > > >
> > > > > > Dear all
> > > > > >
> > > > > > I try to make fviz_pca_biplot with 2 (or more) legends. Below
> > > > > > is data and the code, which gives one legend (colour) for
> > > > > > coating variable and correctly shows triangles and circles for
> > > > > > size variable. But this is not shown in the legend. Hopefully
> > > > > > somebody could
> > > help.
> > > > > >
> > > > > > And before you ask, I tried to contact maintainer about a week
> > > > > > ago but did not get response, therefore I try to post again here.
> > > > > >
> > > > > > Even an answer that current version of fviz_pca_biplot does
> > > > > > not support 2 legends with different point shapes is OK as it
> > > > > > will send me either to adapt source code or to stop trying
> impossible.
> > > > > >
> > > > > > Best regards
> > > > > > Petr
> > > > > >
> > > > > > library(factoextra)
> > > > > > library(FactoMineR)
> > > > > >
> > > > > > fit <- PCA(temp, quali.sup=c(9,10)) fviz_pca_biplot(fit,
> > > > > > col.ind = temp$coating, repel=T, col.var = "black", palette =
> > > > > > "lancet", invisible="quali", pointsize=5,
> > > > > > pointshape=temp$size, legend.title = list(col = "Coating",
> > > > > > shape="Size"), xlim=c(-6,6), title="Instillation results")
> > > > > >
> > > > > > temp <- structure(list(leukocyte28 = c(96875L, 73438L, 68229L,
> > > > > > 94479L, 76563L, 141667L, 111042L, 93333L, 132083L, 103542L,
> > > > > > 61667L, 77708L ),
> > > > > > macrophage28 = c(60.29, 99.13, 97.04, 98.54, 98.46, 75.2,
> > > > > > 89.71, 98, 82, 98.83, 99.08, 98.54), pmn28 = c(38.58, 0.58,
> > > > > > 2.71, 0.92, 1, 24.25, 9.29, 1.5, 15.08, 0.92, 0.67, 1),
> > > > > > lymphocyte28 = c(1.13, 0.29, 0.25, 0.54, 0.54, 0.55, 1, 0.5, 2.92,
> 0.25, 0.25, 0.46),
> > > > > >     leukocyte3 = c(186042L, 111250L, 114375L, 111146L, 98854L,
> > > > > >     156250L, 250625L, 183125L, 202917L, 161875L, 184792L,
> 128333L
> > > > > >     ), macrophage3 = c(53.88, 95.96, 98.29, 98.92, 98.92, 78.3,
> > > > > >     82.33, 97.83, 84.79, 97.25, 97.75, 98.46), pmn3 = c(44.75,
> > > > > >     3.46, 1.29, 0.67, 0.71, 20.4, 16.67, 1.92, 14.04, 1.92, 1.67,
> > > > > >     1.21), lymphocyte3 = c(1.38, 0.58, 0.42, 0.42, 0.38, 1.3,
> > > > > >     1, 0.25, 1.17, 0.83, 0.58, 0.33), coating = structure(c(3L,
> > > > > >     3L, 3L, 1L, 7L, 1L, 2L, 5L, 4L, 6L, 3L, 3L), .Label = 
> > > > > > c("alumina",
> > > > > >     "both", "none", "phosphate", "silica", "tungsten", "zirconia"
> > > > > >     ), class = "factor"), size = structure(c(1L, 1L, 2L, 2L,
> > > > > >     2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L), .Label = c("nano", 
> > > > > > "pigmentary"
> > > > > >     ), class = "factor")), class = "data.frame", row.names =
> > > > > > c(NA,
> > > > > > 12L))
> > > > > >
> > > > > > ______________________________________________
> > > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > > > > see https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > > PLEASE do read the posting guide
> > > > > > http://www.R-project.org/posting-guide.html
> > > > > > and provide commented, minimal, self-contained, reproducible
> code.

From motyoc@k@ @end|ng |rom y@hoo@com  Thu Dec 10 21:57:02 2020
From: motyoc@k@ @end|ng |rom y@hoo@com (Andras Farkas)
Date: Thu, 10 Dec 2020 20:57:02 +0000 (UTC)
Subject: [R] plotly: ability to drag points on x axis only and prevent
 change of y axis value
References: <1316249338.4240203.1607633822634.ref@mail.yahoo.com>
Message-ID: <1316249338.4240203.1607633822634@mail.yahoo.com>

Hello,

wonder if you could provide input on the following: please see toy example below, wanted to see if there is a way to have restrictions on how the points are dragged on the plot. More specifically I would like the points draggable horizontally ONLY and have their y axis value remain fixed, ie the movement vertically would be restricted and no change allowed to that direction for each point? much appreciate any input you may have,

library(plotly)
library(purrr)

# creates a list of 32 circle shapes (one for each row/car)
circles <- map2(
? mtcars$mpg,?
? mtcars$wt,?
? ~list(
? ? type = "circle",
? ? # anchor circles at (mpg, wt)
? ? xanchor = .x,
? ? yanchor = .y,
? ? # give each circle a 2 pixel diameter
? ? x0 = -5, x1 = 5,
? ? y0 = -5, y1 = 5,
? ? xsizemode = "pixel",?
? ? ysizemode = "pixel",
? ? # other visual properties
? ? fillcolor = "blue",
? ? line = list(color = "transparent")
? )
)


plot_ly() %>%
? layout(shapes = circles) %>%
? config(edits = list(shapePosition = TRUE))


appreciate the help,


thanks,

Andras?


From jerem|eju@te @end|ng |rom gm@||@com  Fri Dec 11 12:24:39 2020
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Fri, 11 Dec 2020 12:24:39 +0100
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
In-Reply-To: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
 (Alejandra Barrio Gorski's message of "Tue, 8 Dec 2020 10:48:29
 -0800")
References: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
Message-ID: <87pn3gfuvc.fsf@gmail.com>


Hello Alejandra,

|| On Tuesday,  8 Dec 2020 at 10:48, Alejandra Barrio Gorski wrote:

Welcome to the mailing list.
> Greetings, I am new to this list. I joined because I am pioneering the use
> of R for the agency I work for. I essentially work alone and would like to
> reach out for help on an issue I have been having. Here it is:
Pioneering R is far from an easy task especially if you are doing it on
your own. Hat for raising up to the challenge!

This is mailing list is dedicated to R usage and I'm afraid you won't
find a lot of help regarding the working of R-Studio here.

|| On Wednesday,  9 Dec 2020 at 10:35, Martin Maechler wrote:
> Also, yes indeed, government (or company) firewalls *do* lead
> to problems which are sometimes much more prominent when using R
> via Rstudio, rather than using R "alone" (or via ESS which I use
> 99% of the time, "Emacs Speaks Statistics").

That said, I take the opportunity Martin gave me to advertise that both
Emacs and  Emacs Speaks Statistics works on Windows as well. The entry cost might seem
expensive in the beginning but I assure you it will pay very quickly.

- For emacs
   - https://www.gnu.org/software/emacs/tour/
   - https://www.youtube.com/watch?v=Iagbv974GlQ
   - emacs mailing-list help-gnu-emacs at gnu.org

- For ESS
   -  https://ess.r-project.org/
   -  ESS mailing list https://stat.ethz.ch/mailman/listinfo/ess-help


Best regards,
Jeremie


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Fri Dec 11 14:08:11 2020
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Fri, 11 Dec 2020 18:08:11 +0500
Subject: [R] (no subject)
Message-ID: <CAG0CrLhCEzLPhLauU8_GmtW_jd=piAHX=oYSrQf7F6pnAE+5dg@mail.gmail.com>

when I tried to install oligo package by

if (!requireNamespace("BiocManager", quietly = TRUE))

    install.packages("BiocManager")

BiocManager::install("oligo

It gives me the following eroor:

Warning messages:
1: In file.copy(savedcopy, lib, recursive = TRUE) :
  problem copying
C:\Users\USER\Documents\R\win-library\4.0\00LOCK\bit\libs\x64\bit.dll
to C:\Users\USER\Documents\R\win-library\4.0\bit\libs\x64\bit.dll:
Permission denied
2: In file.copy(savedcopy, lib, recursive = TRUE) :
  problem copying
C:\Users\USER\Documents\R\win-library\4.0\00LOCK\matrixStats\libs\x64\matrixStats.dll
to C:\Users\USER\Documents\R\win-library\4.0\matrixStats\libs\x64\matrixStats.dll:
Permission denied

Also when i tried to:

#Load the target files which the information about the sample and
their corresponding group by

targets<-read.delim(file="targets.txt", header=T)and create design and
fit the design by
design <- model.matrix(~0+ conditions)

It gives me the error :

Error in model.frame.default(object, data, xlev = xlev) :
  invalid type (closure) for variable 'conditions'

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Fri Dec 11 14:37:03 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 11 Dec 2020 14:37:03 +0100
Subject: [R] (no subject)
In-Reply-To: <CAG0CrLhCEzLPhLauU8_GmtW_jd=piAHX=oYSrQf7F6pnAE+5dg@mail.gmail.com>
References: <CAG0CrLhCEzLPhLauU8_GmtW_jd=piAHX=oYSrQf7F6pnAE+5dg@mail.gmail.com>
Message-ID: <20201211133703.GA1504028@posteo.no>

On 2020-12-11 18:08 +0500, Anas Jamshed wrote:
> when I tried to install oligo package by
> 
> if (!requireNamespace("BiocManager", quietly = TRUE))
> 
>     install.packages("BiocManager")
> 
> BiocManager::install("oligo
> 
> It gives me the following eroor:
> 
> Warning messages:
> 1: In file.copy(savedcopy, lib, recursive = TRUE) :
>   problem copying
> C:\Users\USER\Documents\R\win-library\4.0\00LOCK\bit\libs\x64\bit.dll
> to C:\Users\USER\Documents\R\win-library\4.0\bit\libs\x64\bit.dll:
> Permission denied
> 2: In file.copy(savedcopy, lib, recursive = TRUE) :
>   problem copying
> C:\Users\USER\Documents\R\win-library\4.0\00LOCK\matrixStats\libs\x64\matrixStats.dll
> to C:\Users\USER\Documents\R\win-library\4.0\matrixStats\libs\x64\matrixStats.dll:
> Permission denied
> 
> Also when i tried to:
> 
> #Load the target files which the information about the sample and
> their corresponding group by
> 
> targets<-read.delim(file="targets.txt", header=T)and create design and
> fit the design by
> design <- model.matrix(~0+ conditions)
> 
> It gives me the error :
> 
> Error in model.frame.default(object, data, xlev = xlev) :
>   invalid type (closure) for variable 'conditions'

Anas Jamshed,

I found this

https://support.bioconductor.org/p/130817/

maybe it helps ...

Best,
Rasmus Liland


From jr@| @end|ng |rom po@teo@no  Fri Dec 11 15:48:41 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 11 Dec 2020 15:48:41 +0100
Subject: [R] (no subject)
In-Reply-To: <CAG0CrLgF2uzzmZ5CmkzbKBvknMf8HHhzbKRsASevE+gyR1y-hg@mail.gmail.com>
References: <CAG0CrLhCEzLPhLauU8_GmtW_jd=piAHX=oYSrQf7F6pnAE+5dg@mail.gmail.com>
 <20201211133703.GA1504028@posteo.no>
 <CAG0CrLgF2uzzmZ5CmkzbKBvknMf8HHhzbKRsASevE+gyR1y-hg@mail.gmail.com>
Message-ID: <20201211144841.GC1504028@posteo.no>

On 2020-12-11 19:16 +0500, Anas Jamshed wrote:
> On Fri, Dec 11, 2020 at 6:37 PM Rasmus Liland wrote:
> > On 2020-12-11 18:08 +0500, Anas Jamshed wrote:
> > >
> >
> > Anas Jamshed,
> >
> > I found this
> >
> > https://support.bioconductor.org/p/130817/
> >
> > maybe it helps ...
> 
> still have the problem in 2nd error
> 
> > > Also when i tried to:
> > >
> > > #Load the target files which the information about the sample and
> > > their corresponding group by
> > >
> > > targets<-read.delim(file="targets.txt", header=T)and create design and
> > > fit the design by
> > > design <- model.matrix(~0+ conditions)
> > >
> > > It gives me the error :
> > >
> > > Error in model.frame.default(object, data, xlev = xlev) :
> > >   invalid type (closure) for variable 'conditions'

Glad my suggestion helped.  

Do state how you solved that for someone 
else to find it another time (maybe 
yourself even ... ).

One problem at a time ... pocito pocito 
... 

Read here or something 
https://stackoverflow.com/questions/33023508/why-am-i-getting-the-error-invalid-type-closure
...

> https://postimg.cc/1fKPj1xg

Right, it says the object is not a 
matrix ... there is a flag there called 
?data,? perhaps look into specifying you 
matrix there ... 

It would be more helpful for me as a 
helper if you stated your problem in a 
small example code snippet, instead of 
just the error.  I might lack the 
sufficient amount of teaching emphathy 
there to se clearly through images and 
error messages from a distance.  E.g. 
use dput to paste some small dataset 
here ... 

R


From jov@n|@ouz@5 @end|ng |rom gm@||@com  Thu Dec 10 22:20:07 2020
From: jov@n|@ouz@5 @end|ng |rom gm@||@com (Jovani T. de Souza)
Date: Thu, 10 Dec 2020 18:20:07 -0300
Subject: [R] Use clusters.stats function from a hierarchical clustering in R
Message-ID: <CADs2LWTcyNHkYnoV3m8cWcDGgb5sQ-weSH081K4mRUNFHm8E+w@mail.gmail.com>

I would like a great help from you. I used the cluster.stats function that
is part of the `fpc` package to compare the similarity of two custer
solutions using a variety of validation criteria, as you can see in the
code. However, I have two questions:

1 ? Is it possible to know which is the most viable cluster, 2 clusters or
5 clusters? If so, could you explain me better how I can know.

2? Does this package only compare two in two cluster solutions, or is it
possible to compare two more cluster solutions at once?

Thank you so much!

Best Regards.

    library(rdist)
    library(geosphere)
    library(fpc)


    df<-structure(list(Industries = c(1,2,3,4,5,6),
                       Latitude = c(-23.8, -23.8, -23.9, -23.7,
-23.7,-23.7),
                       Longitude = c(-49.5, -49.6, -49.7, -49.8,
-49.6,-49.9),
                       Waste = c(526, 350, 526, 469, 534, 346)), class =
"data.frame", row.names = c(NA, -6L))

    df1<-df

    #clusters
    coordinates<-df[c("Latitude","Longitude")]
    d<-as.dist(distm(coordinates[,2:1]))
    fit.average<-hclust(d,method="average")

    clusters<-cutree(fit.average, k=2)
    df$cluster <- clusters

    clusters1<-cutree(fit.average, k=5)
    df1$cluster <- clusters1

    cluster.stats(d,df$cluster,df1$cluster)



[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
Remetente
notificado por
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
10/12/20
18:19:59

	[[alternative HTML version deleted]]


From ky2009w @end|ng |rom y@hoo@com  Fri Dec 11 02:53:31 2020
From: ky2009w @end|ng |rom y@hoo@com (K Y)
Date: Thu, 10 Dec 2020 20:53:31 -0500
Subject: [R] dglm()
References: <6637E812-1706-47B3-80EF-7223ABA70278.ref@yahoo.com>
Message-ID: <6637E812-1706-47B3-80EF-7223ABA70278@yahoo.com>

I used the double glm dglm() in R with "family=tweedie(var.power=p,link.power=0)", and need Chi-squared tests for the nested models of excluding each variable.

In order to do those tests,  I need the final working weights.

I was using the codes below to get the working weights from the deviance residuals, but I am not sure this is correct.  Also I wonder if there is a better way doing this.  Can anyone help?

y <- -(z$observed_target)^(2-p)

y <- y + (fitted(out))^(2-p)

y <- y / (2-p)

x <- (z$observed_target)^(2-p)

x <- x - z$observed_target * ((fitted(out))^(1-p))

x <- x / (1-p)



x <- 2 * (y + x)


y <- residuals(out, type = "deviance")

y <- y^2

y <- y / x #This should be the original weight mod by the modeled dispersion parameters or the final working weights.


	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Fri Dec 11 15:40:40 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 11 Dec 2020 15:40:40 +0100
Subject: [R] (no subject)
In-Reply-To: <CAG0CrLgF2uzzmZ5CmkzbKBvknMf8HHhzbKRsASevE+gyR1y-hg@mail.gmail.com>
References: <CAG0CrLhCEzLPhLauU8_GmtW_jd=piAHX=oYSrQf7F6pnAE+5dg@mail.gmail.com>
 <20201211133703.GA1504028@posteo.no>
 <CAG0CrLgF2uzzmZ5CmkzbKBvknMf8HHhzbKRsASevE+gyR1y-hg@mail.gmail.com>
Message-ID: <20201211144040.GB1504028@posteo.no>

On 2020-12-11 19:16 +0500, Anas Jamshed wrote:
> On Fri, Dec 11, 2020 at 6:37 PM Rasmus Liland wrote:
> > On 2020-12-11 18:08 +0500, Anas Jamshed wrote:
> > >
> >
> > Anas Jamshed,
> >
> > I found this
> >
> > https://support.bioconductor.org/p/130817/
> >
> > maybe it helps ...
> 
> still have the problem in 2nd error
> 
> > > Also when i tried to:
> > >
> > > #Load the target files which the information about the sample and
> > > their corresponding group by
> > >
> > > targets<-read.delim(file="targets.txt", header=T)and create design and
> > > fit the design by
> > > design <- model.matrix(~0+ conditions)
> > >
> > > It gives me the error :
> > >
> > > Error in model.frame.default(object, data, xlev = xlev) :
> > >   invalid type (closure) for variable 'conditions'

Glad my suggestion helped.  

Do state how you solved that for someone 
else to find it another time (maybe 
yourself even ... ).

One problem at a time ... pocito pocito 
... 

Read here or something 
https://stackoverflow.com/questions/33023508/why-am-i-getting-the-error-invalid-type-closure
...

> [image: anas.png]

Right, it says the object is not a 
matrix ... there is a flag there called 
?data,? perhaps look into specifying you 
matrix there ... 

It would be more helpful for me as a 
helper if you stated your problem in a 
small example code snippet, instead of 
just the error.  I might lack the 
sufficient amount of teaching emphathy 
there to se clearly through images and 
error messages from a distance.  E.g. 
use dput to paste some small dataset 
here ... 

R

-------------- next part --------------
A non-text attachment was scrubbed...
Name: anas.png
Type: image/png
Size: 248749 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20201211/0163bb60/attachment.png>

From jr@| @end|ng |rom po@teo@no  Fri Dec 11 16:36:56 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 11 Dec 2020 16:36:56 +0100
Subject: [R] (no subject)
In-Reply-To: <CAG0CrLjtp0+8i4wyv1ObYsdFECAXsJbFGM3TR0Pu-6Xrqwz7vA@mail.gmail.com>
References: <CAG0CrLhCEzLPhLauU8_GmtW_jd=piAHX=oYSrQf7F6pnAE+5dg@mail.gmail.com>
 <20201211133703.GA1504028@posteo.no>
 <CAG0CrLgF2uzzmZ5CmkzbKBvknMf8HHhzbKRsASevE+gyR1y-hg@mail.gmail.com>
 <20201211144841.GC1504028@posteo.no>
 <CAG0CrLjtp0+8i4wyv1ObYsdFECAXsJbFGM3TR0Pu-6Xrqwz7vA@mail.gmail.com>
Message-ID: <20201211153656.GD1504028@posteo.no>

On 2020-12-11 20:14 +0500, Anas Jamshed wrote:
> On Fri, Dec 11, 2020 at 7:49 PM Rasmus Liland <jral at posteo.no> wrote:
> 
> > On 2020-12-11 19:16 +0500, Anas Jamshed wrote:
> > > On Fri, Dec 11, 2020 at 6:37 PM Rasmus Liland wrote:
> > > > On 2020-12-11 18:08 +0500, Anas Jamshed wrote:
> > > > >
> > > >
> > > > Anas Jamshed,
> > > >
> > > > I found this
> > > >
> > > > https://support.bioconductor.org/p/130817/
> > > >
> > > > maybe it helps ...
> > >
> > > still have the problem in 2nd error
> > >
> > > > > Also when i tried to:
> > > > >
> > > > > #Load the target files which the information about the sample and
> > > > > their corresponding group by
> > > > >
> > > > > targets<-read.delim(file="targets.txt", header=T)and create design
> > and
> > > > > fit the design by
> > > > > design <- model.matrix(~0+ conditions)
> > > > >
> > > > > It gives me the error :
> > > > >
> > > > > Error in model.frame.default(object, data, xlev = xlev) :
> > > > >   invalid type (closure) for variable 'conditions'
> >
> > Glad my suggestion helped.
> >
> > Do state how you solved that for someone
> > else to find it another time (maybe
> > yourself even ... ).
> >
> > One problem at a time ... pocito pocito
> > ...
> >
> > Read here or something
> >
> > https://stackoverflow.com/questions/33023508/why-am-i-getting-the-error-invalid-type-closure
> > ...
> >
> > > https://postimg.cc/1fKPj1xg
> >
> > Right, it says the object is not a
> > matrix ... there is a flag there called
> > ?data,? perhaps look into specifying you
> > matrix there ...
> >
> > It would be more helpful for me as a
> > helper if you stated your problem in a
> > small example code snippet, instead of
> > just the error.  I might lack the
> > sufficient amount of teaching emphathy
> > there to se clearly through images and
> > error messages from a distance.  E.g.
> > use dput to paste some small dataset
> > here ...
> >
> > R
> 
> E-MTAB is an original sample data file and another one is normalized data
> file  but I don't know why I get just one gene(up reg) when I apply top
> table and decide test function
> 
> My R history file is :
> library(oligo)
> if (!requireNamespace("BiocManager", quietly = TRUE))
> install.packages("BiocManager")
> BiocManager::install("pd.hg.u133.plus.2")
> list.celfiles()
> setwd("C:/Users/USER/Desktop/RNA_Seq")
> list.celfiles()
> names = list.celfiles()
> array = read.celfiles(names)
> array
> eset = rma(array)
> write.exprs(eset, file = "data_normalized.txt") #this will be your
> normalized data by rma
> eset
> targets<-read.delim(file="targets.txt", header=T)
> targets<-read.delim(file="E-MTAB-5716.sdrf.txt", header=T)
> targets
> design <- model.matrix(~0+ conditions)
> fit <- lmFit(eset, design)
> fit <- lmFit(eset, targets)
> design <- model.matrix(~ description + 0, gset)
> design
> fit <- lmFit(eset, design)
> targets$Source.Name <-fl
> targets$Source.Name <-fl
> targets$Source.Name <-f1
> sml <- paste("G", sml, sep="")
> targets$Source.Name
> design <- model.matrix(~ description + 0, eset)
> design <- model.matrix(~ targets + 0, eset)
> design <- model.matrix(~ targets + 0, conditions())
> design <- model.matrix(~ targets + 0, conditions)
> design <- model.matrix(~0+ conditions)
> design <- model.matrix(~ description + 0 + conditions)
> design <- model.matrix(~ description + 0 , conditions)
> design <- model.matrix(~ description + 0, gset)
> design <- model.matrix(~ description + 0, eset)
> design <- model.matrix(~ targets + 0, eset)
> targets$Source.Name
> design <- model.matrix(~ Source.Name + 0, eset)
> design <- model.matrix(~ Source + 0, eset)
> gset
> gset$description
> eset <- eset[[idx]]
> eset
> design <- model.matrix(~ description + 0, eset)
> fvarLabels(eset) <- make.names(fvarLabels(eset))
> gsms <- paste0("000000000000000000000000000000XXXXXXXXXXXXXXX11111",
> "1111111111XXXXXXXXXXXXXXXXXXX")
> sml <- c()
> for (i in 1:nchar(gsms)) { sml[i] <- substr(gsms,i,i) }
> make.names()
> fvarLabels(eset) <- make.names(fvarLabels(eset))
> sel <- which(sml != "X")
> sml <- sml[sel]
> gset <- eset[ ,sel]
> eset
> design <- model.matrix(~0+ conditions)
> design <- model.matrix(~0+ eset)
> design
> fit <- lmFit(eset, design)
> fit
> contrast.matrix <- makeContrasts(group1=condition1-control,
> group2=condition2-control, levels = design)
> fit
> cont.matrix <- makeContrasts(G1-G0, levels=design)
> sml <- paste("G", sml, sep="")    # set group names
> fl <- as.factor(sml)
> sml
> cont.matrix <- makeContrasts(G1-G0, levels=design)
> design
> gset
> design
> cont.matrix <- makeContrasts(eset, levels=design)
> fit2 <- contrasts.fit(fit, cont.matrix)
> fit2
> fit3 <- eBayes(fit2, 0.01)
> fit3
> tT <- topTable(fit3, adjust="fdr", sort.by="B", number=1250)
> tT
> tT <- topTable(fit3, adjust="fdr", sort.by="B", number=500000)
> tT
> tT <- topTable(fit3, adjust="fdr", sort.by="B", number=500000,p=0.05)
> tT
> fit.cont <- contrasts.fit(fit, contrast.matrix)
> fit.cont <- contrasts.fit(fit, contrast.matrix)
> fit.cont <- contrasts.fit(fit2, contrast.matrix)
> fit.cont <- contrasts.fit(fit2, contrasts.fit())
> results<-decideTests(fit3,adjust.method="fdr",p=0.05)
> results
> summary(results)
> cont.matrix <- makeContrasts(eset, levels=design)
> fit.cont <- contrasts.fit(fit, cont.matrix)
> fit.cont
> fit.cont<- eBayes(fit.cont)
> fit.cont
> results<-decideTests(fit.cont,adjust.method="fdr",p=0.001)
> results
> summary(results)
> heatmap(results)
> heatmap(results[:,])
> heatmap(results[,])
> heatmap(results[,0])
> heatmap(results[1,4])
> heatmap(results[1,1])
> heatmap(results[2,2])
> heatmap(results[3,2])
> heatmap(results[,:])
> heatmap(results[:,])
> heatmap(results[1,])
> heatmap(results[1,:])

I think that's too many unspecific lines 
and too large files directly here on 
email (24MiB!).

Would you please narrow down your 
question.


From jr@| @end|ng |rom po@teo@no  Fri Dec 11 17:50:31 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 11 Dec 2020 17:50:31 +0100
Subject: [R] (no subject)
In-Reply-To: <CAG0CrLg5ZdOBwrx8yyRyzuC3Gtv8jO4sLPrgTXxdHi_GKVQjFw@mail.gmail.com>
References: <CAG0CrLhCEzLPhLauU8_GmtW_jd=piAHX=oYSrQf7F6pnAE+5dg@mail.gmail.com>
 <20201211133703.GA1504028@posteo.no>
 <CAG0CrLgF2uzzmZ5CmkzbKBvknMf8HHhzbKRsASevE+gyR1y-hg@mail.gmail.com>
 <20201211144841.GC1504028@posteo.no>
 <CAG0CrLjtp0+8i4wyv1ObYsdFECAXsJbFGM3TR0Pu-6Xrqwz7vA@mail.gmail.com>
 <20201211153656.GD1504028@posteo.no>
 <CAG0CrLithjwvf+MwQFnH9F5hdOmLss-deHLYw8_gTGJWJGVktQ@mail.gmail.com>
 <CAG0CrLg5ZdOBwrx8yyRyzuC3Gtv8jO4sLPrgTXxdHi_GKVQjFw@mail.gmail.com>
Message-ID: <20201211165031.GE1504028@posteo.no>

On 2020-12-11 21:04 +0500, Anas Jamshed wrote:
> On Fri, Dec 11, 2020 at 9:03 PM Anas Jamshed wrote:
> > On Fri, Dec 11, 2020 at 8:37 PM Rasmus Liland wrote:
> > >
> > > I think that's too many unspecific lines
> > > and too large files directly here on
> > > email (24MiB!).
> > >
> > > Would you please narrow down your
> > > question.
> >
> > E-MTAB is an original sample data file and another one is normalized data
> > file  but I don't know why I get just one gene(up reg) when I apply top
> > table and decide test function
> > results<-decideTests(fit3,adjust.method="fdr",p=0.05)
> > results
> > summary(results)
> > cont.matrix <- makeContrasts(eset, levels=design)
> > fit.cont <- contrasts.fit(fit, cont.matrix)
> > fit.cont
> > fit.cont<- eBayes(fit.cont)
> > fit.cont
> > results<-decideTests(fit.cont,adjust.method="fdr",p=0.001)
> 
> [image: image.png]

Say, how do I create fit3, eset, design, 
etc. ...

R


From jr@| @end|ng |rom po@teo@no  Fri Dec 11 18:17:12 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 11 Dec 2020 18:17:12 +0100
Subject: [R] (no subject)
In-Reply-To: <CAG0CrLh5xNqCa=MsVMhf0TcaAvLDO7B-3wZDk1f8Ff3EPp+U4A@mail.gmail.com>
References: <CAG0CrLhCEzLPhLauU8_GmtW_jd=piAHX=oYSrQf7F6pnAE+5dg@mail.gmail.com>
 <20201211133703.GA1504028@posteo.no>
 <CAG0CrLgF2uzzmZ5CmkzbKBvknMf8HHhzbKRsASevE+gyR1y-hg@mail.gmail.com>
 <20201211144841.GC1504028@posteo.no>
 <CAG0CrLjtp0+8i4wyv1ObYsdFECAXsJbFGM3TR0Pu-6Xrqwz7vA@mail.gmail.com>
 <20201211153656.GD1504028@posteo.no>
 <CAG0CrLithjwvf+MwQFnH9F5hdOmLss-deHLYw8_gTGJWJGVktQ@mail.gmail.com>
 <CAG0CrLg5ZdOBwrx8yyRyzuC3Gtv8jO4sLPrgTXxdHi_GKVQjFw@mail.gmail.com>
 <20201211165031.GE1504028@posteo.no>
 <CAG0CrLh5xNqCa=MsVMhf0TcaAvLDO7B-3wZDk1f8Ff3EPp+U4A@mail.gmail.com>
Message-ID: <20201211171712.GG1504028@posteo.no>

On 2020-12-11 22:09 +0500, Anas Jamshed wrote:
> On Fri, Dec 11, 2020 at 9:51 PM Rasmus Liland wrote:
> >
> > Say, how do I create fit3, eset, design,
> > etc. ...
> >
> > R
> 
> library(oligo)
> if (!requireNamespace("BiocManager", quietly = TRUE))
> install.packages("BiocManager")
> BiocManager::install("pd.hg.u133.plus.2")
> list.celfiles()
> setwd("C:/Users/USER/Desktop/RNA_Seq")
> list.celfiles()
> names = list.celfiles()
> array = read.celfiles(names)
> array
> eset = rma(array)
> write.exprs(eset, file = "data_normalized.txt") #this will be your
> normalized data by rma
> eset
> targets<-read.delim(file="targets.txt", header=T)
> targets<-read.delim(file="E-MTAB-5716.sdrf.txt", header=T)
> targets
> 
> eset <- eset[[idx]]
> 
> design <- model.matrix(~0+ eset)
> design
> fit <- lmFit(eset, design)
> fit
> 
> cont.matrix <- makeContrasts(eset, levels=design)
> fit2 <- contrasts.fit(fit, cont.matrix)
> fit2
> fit3 <- eBayes(fit2, 0.01)
> fit3
> tT <- topTable(fit3, adjust="fdr", sort.by="B", number=1250)
> tT

Sorry, I think I am too tired atm.  I 
took this pneumonia vaccine, and it 
really banged me up you know ...

Maybe someone else can row this ship 
ashore again ...

R


From jr@| @end|ng |rom po@teo@no  Fri Dec 11 21:12:12 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 11 Dec 2020 21:12:12 +0100
Subject: [R] (no subject)
In-Reply-To: <CAG0CrLjgEkNjmB-1y7mO=LPNXFgAiwkAa-8EPUp2sCB+=N=oEA@mail.gmail.com>
References: <CAG0CrLgF2uzzmZ5CmkzbKBvknMf8HHhzbKRsASevE+gyR1y-hg@mail.gmail.com>
 <20201211144841.GC1504028@posteo.no>
 <CAG0CrLjtp0+8i4wyv1ObYsdFECAXsJbFGM3TR0Pu-6Xrqwz7vA@mail.gmail.com>
 <20201211153656.GD1504028@posteo.no>
 <CAG0CrLithjwvf+MwQFnH9F5hdOmLss-deHLYw8_gTGJWJGVktQ@mail.gmail.com>
 <CAG0CrLg5ZdOBwrx8yyRyzuC3Gtv8jO4sLPrgTXxdHi_GKVQjFw@mail.gmail.com>
 <20201211165031.GE1504028@posteo.no>
 <CAG0CrLh5xNqCa=MsVMhf0TcaAvLDO7B-3wZDk1f8Ff3EPp+U4A@mail.gmail.com>
 <20201211171712.GG1504028@posteo.no>
 <CAG0CrLjgEkNjmB-1y7mO=LPNXFgAiwkAa-8EPUp2sCB+=N=oEA@mail.gmail.com>
Message-ID: <20201211201212.GH1504028@posteo.no>

On 2020-12-11 22:19 +0500, Anas Jamshed wrote:
> On Fri, Dec 11, 2020 at 10:17 PM Rasmus Liland wrote:
> >
> > Sorry, I think I am too tired atm.  I
> > took this pneumonia vaccine, and it
> > really banged me up you know ...
> >
> > Maybe someone else can row this ship
> > ashore again ...
> 
> why you are tired?

Anas Jamshed,

I do not need to explain why I am tired 
at all.  Not at all.


From jr@| @end|ng |rom po@teo@no  Fri Dec 11 21:35:16 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 11 Dec 2020 21:35:16 +0100
Subject: [R] (no subject)
In-Reply-To: <CAG0CrLjFhvpUREW3m_mDRvZtymFmN-0Xfqu9z2aGG=z76aKT_g@mail.gmail.com>
References: <CAG0CrLjtp0+8i4wyv1ObYsdFECAXsJbFGM3TR0Pu-6Xrqwz7vA@mail.gmail.com>
 <20201211153656.GD1504028@posteo.no>
 <CAG0CrLithjwvf+MwQFnH9F5hdOmLss-deHLYw8_gTGJWJGVktQ@mail.gmail.com>
 <CAG0CrLg5ZdOBwrx8yyRyzuC3Gtv8jO4sLPrgTXxdHi_GKVQjFw@mail.gmail.com>
 <20201211165031.GE1504028@posteo.no>
 <CAG0CrLh5xNqCa=MsVMhf0TcaAvLDO7B-3wZDk1f8Ff3EPp+U4A@mail.gmail.com>
 <20201211171712.GG1504028@posteo.no>
 <CAG0CrLjgEkNjmB-1y7mO=LPNXFgAiwkAa-8EPUp2sCB+=N=oEA@mail.gmail.com>
 <20201211201212.GH1504028@posteo.no>
 <CAG0CrLjFhvpUREW3m_mDRvZtymFmN-0Xfqu9z2aGG=z76aKT_g@mail.gmail.com>
Message-ID: <20201211203516.GI1504028@posteo.no>

On 2020-12-12 01:14 +0500, Anas Jamshed wrote:
> On Sat, Dec 12, 2020 at 1:12 AM Rasmus Liland wrote:
> >
> > Anas Jamshed,
> >
> > I do not need to explain why I am tired
> > at all.  Not at all.
> 
> but plz try to help me

Once upon a midnight dreary, while I pondered, weak and weary,
Over many a quaint and curious volume of forgotten lore?
    While I nodded, nearly napping, suddenly there came a tapping,
As of some one gently rapping, rapping at my chamber door.
??Tis some visitor,? I muttered, ?tapping at my chamber door?
            Only this and nothing more.?

    Ah, distinctly I remember it was in the bleak December;
And each separate dying ember wrought its ghost upon the floor.
    Eagerly I wished the morrow;?vainly I had sought to borrow
    From my books surcease of sorrow?sorrow for the lost Lenore?
For the rare and radiant maiden whom the angels name Lenore?
            Nameless here for evermore.

    And the silken, sad, uncertain rustling of each purple curtain
Thrilled me?filled me with fantastic terrors never felt before;
    So that now, to still the beating of my heart, I stood repeating
    ??Tis some visitor entreating entrance at my chamber door?
Some late visitor entreating entrance at my chamber door;?
            This it is and nothing more.?

    Presently my soul grew stronger; hesitating then no longer,
?Sir,? said I, ?or Madam, truly your forgiveness I implore;
    But the fact is I was napping, and so gently you came rapping,
    And so faintly you came tapping, tapping at my chamber door,
That I scarce was sure I heard you??here I opened wide the door;?
            Darkness there and nothing more.

    Deep into that darkness peering, long I stood there wondering, fearing,
Doubting, dreaming dreams no mortal ever dared to dream before;
    But the silence was unbroken, and the stillness gave no token,
    And the only word there spoken was the whispered word, ?Lenore??
This I whispered, and an echo murmured back the word, ?Lenore!??
            Merely this and nothing more.

    Back into the chamber turning, all my soul within me burning,
Soon again I heard a tapping somewhat louder than before.
    ?Surely,? said I, ?surely that is something at my window lattice;
      Let me see, then, what thereat is, and this mystery explore?
Let my heart be still a moment and this mystery explore;?
            ?Tis the wind and nothing more!?

    Open here I flung the shutter, when, with many a flirt and flutter,
In there stepped a stately Raven of the saintly days of yore;
    Not the least obeisance made he; not a minute stopped or stayed he;
    But, with mien of lord or lady, perched above my chamber door?
Perched upon a bust of Pallas just above my chamber door?
            Perched, and sat, and nothing more.

Then this ebony bird beguiling my sad fancy into smiling,
By the grave and stern decorum of the countenance it wore,
?Though thy crest be shorn and shaven, thou,? I said, ?art sure no craven,
Ghastly grim and ancient Raven wandering from the Nightly shore?
Tell me what thy lordly name is on the Night?s Plutonian shore!?
            Quoth the Raven ?Nevermore.?

    Much I marvelled this ungainly fowl to hear discourse so plainly,
Though its answer little meaning?little relevancy bore;
    For we cannot help agreeing that no living human being
    Ever yet was blessed with seeing bird above his chamber door?
Bird or beast upon the sculptured bust above his chamber door,
            With such name as ?Nevermore.?

    But the Raven, sitting lonely on the placid bust, spoke only
That one word, as if his soul in that one word he did outpour.
    Nothing farther then he uttered?not a feather then he fluttered?
    Till I scarcely more than muttered ?Other friends have flown before?
On the morrow he will leave me, as my Hopes have flown before.?
            Then the bird said ?Nevermore.?

    Startled at the stillness broken by reply so aptly spoken,
?Doubtless,? said I, ?what it utters is its only stock and store
    Caught from some unhappy master whom unmerciful Disaster
    Followed fast and followed faster till his songs one burden bore?
Till the dirges of his Hope that melancholy burden bore
            Of ?Never?nevermore?.?

    But the Raven still beguiling all my fancy into smiling,
Straight I wheeled a cushioned seat in front of bird, and bust and door;
    Then, upon the velvet sinking, I betook myself to linking
    Fancy unto fancy, thinking what this ominous bird of yore?
What this grim, ungainly, ghastly, gaunt, and ominous bird of yore
            Meant in croaking ?Nevermore.?

    This I sat engaged in guessing, but no syllable expressing
To the fowl whose fiery eyes now burned into my bosom?s core;
    This and more I sat divining, with my head at ease reclining
    On the cushion?s velvet lining that the lamp-light gloated o?er,
But whose velvet-violet lining with the lamp-light gloating o?er,
            She shall press, ah, nevermore!

    Then, methought, the air grew denser, perfumed from an unseen censer
Swung by Seraphim whose foot-falls tinkled on the tufted floor.
    ?Wretch,? I cried, ?thy God hath lent thee?by these angels he hath sent thee
    Respite?respite and nepenthe from thy memories of Lenore;
Quaff, oh quaff this kind nepenthe and forget this lost Lenore!?
            Quoth the Raven ?Nevermore.?

    ?Prophet!? said I, ?thing of evil!?prophet still, if bird or devil!?
Whether Tempter sent, or whether tempest tossed thee here ashore,
    Desolate yet all undaunted, on this desert land enchanted?
    On this home by Horror haunted?tell me truly, I implore?
Is there?is there balm in Gilead??tell me?tell me, I implore!?
            Quoth the Raven ?Nevermore.?

    ?Prophet!? said I, ?thing of evil!?prophet still, if bird or devil!
By that Heaven that bends above us?by that God we both adore?
    Tell this soul with sorrow laden if, within the distant Aidenn,
    It shall clasp a sainted maiden whom the angels name Lenore?
Clasp a rare and radiant maiden whom the angels name Lenore.?
            Quoth the Raven ?Nevermore.?

    ?Be that word our sign of parting, bird or fiend!? I shrieked, upstarting?
?Get thee back into the tempest and the Night?s Plutonian shore!
    Leave no black plume as a token of that lie thy soul hath spoken!
    Leave my loneliness unbroken!?quit the bust above my door!
Take thy beak from out my heart, and take thy form from off my door!?
            Quoth the Raven ?Nevermore.?

    And the Raven, never flitting, still is sitting, still is sitting
On the pallid bust of Pallas just above my chamber door;
    And his eyes have all the seeming of a demon?s that is dreaming,
    And the lamp-light o?er him streaming throws his shadow on the floor;
And my soul from out that shadow that lies floating on the floor
            Shall be lifted?nevermore!

https://www.youtube.com/watch?v=BefliMlEzZ8


From |r@|nj @end|ng |rom gm@||@com  Fri Dec 11 22:18:18 2020
From: |r@|nj @end|ng |rom gm@||@com (John C Frain)
Date: Fri, 11 Dec 2020 21:18:18 +0000
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
In-Reply-To: <87pn3gfuvc.fsf@gmail.com>
References: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
 <87pn3gfuvc.fsf@gmail.com>
Message-ID: <CAHrK5168j6vS2pm5Jb9T6AWDCWD+bm2b8XuZPFs1GUqKatd28Q@mail.gmail.com>

On Fri, 11 Dec 2020 at 11:25, Jeremie Juste <jeremiejuste at gmail.com> wrote:


snip

>
> That said, I take the opportunity Martin gave me to advertise that both
> Emacs and  Emacs Speaks Statistics works on Windows as well. The entry
> cost might seem
> expensive in the beginning but I assure you it will pay very quickly.
>
> - For emacs
>    - https://www.gnu.org/software/emacs/tour/
>    - https://www.youtube.com/watch?v=Iagbv974GlQ
>    - emacs mailing-list help-gnu-emacs at gnu.org
>
> - For ESS
>    -  https://ess.r-project.org/
>    -  ESS mailing list https://stat.ethz.ch/mailman/listinfo/ess-help
>
>
> Best regards,
> Jeremie
>
> For Windows, Vincent Goulet has a windows installer of emacs 27.1 that
includes ESS, Auctex for LaTex, and a lot of other emacs extras.  This
installer simplifies the installation of Emacs on windows

> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Dec 12 00:50:15 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 12 Dec 2020 12:50:15 +1300
Subject: [R] nls() syntax
Message-ID: <20201212125015.53b31218@rolf-Latitude-E7470>



I want to fit a model y = x/(x-a) where the value of a depends
on the level of a factor z.  I cannot figure out an appropriate
syntax for nls().  The "parameter" a (to be estimated) should be a
vector of length equal to the number of levels of z.

I tried:

strt <- rep(3,length(levels(z))
names(strt=levels(z)
fit <- nls(y ~ x/(x - a[z]),start=strt,data=xxx)

but of course got an error:

> Error in nls(y ~ x/(x - a[z]), start = strt, data = xxx) : 
>   parameters without starting value in 'data': a

I keep thinking that there is something obvious that I should
be doing, but I can't work out what it is.

Does there *exist* an appropriate syntax for doing what I want
to do?  Can anyone enlighten me?  The data set "xxx" is given
in dput() form at the end of this message.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

Data set "xxx":

structure(list(x = c(30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 
130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 
30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 
170, 180, 190, 200, 210, 220, 230, 240, 250, 30, 40, 50, 60, 
70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 
200, 210, 220, 230, 240, 250, 30, 40, 50, 60, 70, 80, 90, 100, 
110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 
240, 250, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 
150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250), y = c(1.27, 
1.16, 1.19, 1.15, 1.09, 1.07, 1.07, 1.05, 1.07, 1.03, 1.05, 1.07, 
1.06, 1.03, 1.05, 1.04, 1.03, 1.03, 1.03, 1.02, 1.02, 1.01, 1.01, 
1.21, 1.15, 1.1, 1.1, 1.06, 1.06, 1.05, 1.03, 1.07, 1.04, 1.04, 
1.02, 1.04, 1.02, 1.04, 1.03, 1.01, 1.03, 1.01, 1, 1.02, 1.03, 
1.02, 1.42, 1.27, 1.23, 1.14, 1.17, 1.08, 1.11, 1.06, 1.07, 1.08, 
1.06, 1.07, 1.04, 1.03, 1.07, 1.04, 1.03, 1.03, 1.03, 1.04, 1.03, 
1.03, 1.04, 1.85, 1.41, 1.35, 1.21, 1.22, 1.15, 1.14, 1.07, 1.1, 
1.09, 1.1, 1.09, 1.08, 1.08, 1.09, 1.09, 1.07, 1.06, 1.03, 1.08, 
1.05, 1.02, 1.05, 1.99, 1.6, 1.44, 1.4, 1.24, 1.3, 1.21, 1.23, 
1.18, 1.18, 1.12, 1.15, 1.09, 1.07, 1.13, 1.1, 1.05, 1.13, 1.09, 
1.03, 1.11, 1.07, 1.05), z = structure(c(1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L), .Label = c("p1", 
"p2", "p3", "p4", "p5"), class = "factor")), class = "data.frame", row.names = c(NA, 
-115L))


From ggrothend|eck @end|ng |rom gm@||@com  Sat Dec 12 01:20:26 2020
From: ggrothend|eck @end|ng |rom gm@||@com (Gabor Grothendieck)
Date: Fri, 11 Dec 2020 19:20:26 -0500
Subject: [R] nls() syntax
In-Reply-To: <20201212125015.53b31218@rolf-Latitude-E7470>
References: <20201212125015.53b31218@rolf-Latitude-E7470>
Message-ID: <CAP01uRm7RGdSQK=hDecbegvec9RkskzQVFtvr3SOTgE-cV5L=Q@mail.gmail.com>

The start= argument should be as follows:

 nls(y ~ x/(x - a[z]),start=list(a = strt),data=xxx)

On Fri, Dec 11, 2020 at 6:51 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
>
> I want to fit a model y = x/(x-a) where the value of a depends
> on the level of a factor z.  I cannot figure out an appropriate
> syntax for nls().  The "parameter" a (to be estimated) should be a
> vector of length equal to the number of levels of z.
>
> I tried:
>
> strt <- rep(3,length(levels(z))
> names(strt=levels(z)
> fit <- nls(y ~ x/(x - a[z]),start=strt,data=xxx)
>
> but of course got an error:
>
> > Error in nls(y ~ x/(x - a[z]), start = strt, data = xxx) :
> >   parameters without starting value in 'data': a
>
> I keep thinking that there is something obvious that I should
> be doing, but I can't work out what it is.
>
> Does there *exist* an appropriate syntax for doing what I want
> to do?  Can anyone enlighten me?  The data set "xxx" is given
> in dput() form at the end of this message.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> Data set "xxx":
>
> structure(list(x = c(30, 40, 50, 60, 70, 80, 90, 100, 110, 120,
> 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250,
> 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160,
> 170, 180, 190, 200, 210, 220, 230, 240, 250, 30, 40, 50, 60,
> 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190,
> 200, 210, 220, 230, 240, 250, 30, 40, 50, 60, 70, 80, 90, 100,
> 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230,
> 240, 250, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140,
> 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250), y = c(1.27,
> 1.16, 1.19, 1.15, 1.09, 1.07, 1.07, 1.05, 1.07, 1.03, 1.05, 1.07,
> 1.06, 1.03, 1.05, 1.04, 1.03, 1.03, 1.03, 1.02, 1.02, 1.01, 1.01,
> 1.21, 1.15, 1.1, 1.1, 1.06, 1.06, 1.05, 1.03, 1.07, 1.04, 1.04,
> 1.02, 1.04, 1.02, 1.04, 1.03, 1.01, 1.03, 1.01, 1, 1.02, 1.03,
> 1.02, 1.42, 1.27, 1.23, 1.14, 1.17, 1.08, 1.11, 1.06, 1.07, 1.08,
> 1.06, 1.07, 1.04, 1.03, 1.07, 1.04, 1.03, 1.03, 1.03, 1.04, 1.03,
> 1.03, 1.04, 1.85, 1.41, 1.35, 1.21, 1.22, 1.15, 1.14, 1.07, 1.1,
> 1.09, 1.1, 1.09, 1.08, 1.08, 1.09, 1.09, 1.07, 1.06, 1.03, 1.08,
> 1.05, 1.02, 1.05, 1.99, 1.6, 1.44, 1.4, 1.24, 1.3, 1.21, 1.23,
> 1.18, 1.18, 1.12, 1.15, 1.09, 1.07, 1.13, 1.1, 1.05, 1.13, 1.09,
> 1.03, 1.11, 1.07, 1.05), z = structure(c(1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
> 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
> 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L,
> 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L), .Label = c("p1",
> "p2", "p3", "p4", "p5"), class = "factor")), class = "data.frame", row.names = c(NA,
> -115L))
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Dec 12 03:25:11 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 11 Dec 2020 21:25:11 -0500
Subject: [R] nls() syntax
In-Reply-To: <20201212125015.53b31218@rolf-Latitude-E7470>
References: <20201212125015.53b31218@rolf-Latitude-E7470>
Message-ID: <6455747c-c652-4a13-eafd-7c7456321210@gmail.com>

On 11/12/2020 6:50 p.m., Rolf Turner wrote:
> 
> 
> I want to fit a model y = x/(x-a) where the value of a depends
> on the level of a factor z.  I cannot figure out an appropriate
> syntax for nls().  The "parameter" a (to be estimated) should be a
> vector of length equal to the number of levels of z.
> 
> I tried:
> 
> strt <- rep(3,length(levels(z))
> names(strt=levels(z)
> fit <- nls(y ~ x/(x - a[z]),start=strt,data=xxx)
> 
> but of course got an error:
> 
>> Error in nls(y ~ x/(x - a[z]), start = strt, data = xxx) :
>>    parameters without starting value in 'data': a
> 
> I keep thinking that there is something obvious that I should
> be doing, but I can't work out what it is.
> 
> Does there *exist* an appropriate syntax for doing what I want
> to do?  Can anyone enlighten me?  The data set "xxx" is given
> in dput() form at the end of this message.


I don't know of anything easy here.  I think you need to do some tricky 
stuff with formulas to get what you want.  For example,

pred <- function(x, z, ...) {
   a <- unlist(list(...))
   names(a) <- levels(xxx$z)
   x/(x-a[z])
}
strt <- rep(3,length(levels(xxx$z)))
names(strt) <- levels(xxx$z)
fla <- y ~ pred(x, z)
fla[[3]] <- as.call(c(as.list(fla[[3]]), lapply(levels(xxx$z), as.name)))
fit <- nls(fla,start=strt,data=xxx)

That line starting fla[[3]] is the ugly part:  it takes the simple 
formula y ~ pred(x, z) and changes it to y ~ pred(x, z, a1, a2, a3, a4, 
a5).  As far as I know, nls() can't handle vector paramters, it only 
deals with scalars, so this passes them each as a separate argument.

Maybe rlang or one of the other packages like that has code to make this 
less obscure.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Dec 12 03:39:11 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 12 Dec 2020 15:39:11 +1300
Subject: [R] nls() syntax
In-Reply-To: <CAP01uRm7RGdSQK=hDecbegvec9RkskzQVFtvr3SOTgE-cV5L=Q@mail.gmail.com>
References: <20201212125015.53b31218@rolf-Latitude-E7470>
 <CAP01uRm7RGdSQK=hDecbegvec9RkskzQVFtvr3SOTgE-cV5L=Q@mail.gmail.com>
Message-ID: <20201212153911.61d05c13@rolf-Latitude-E7470>


On Fri, 11 Dec 2020 19:20:26 -0500
Gabor Grothendieck <ggrothendieck at gmail.com> wrote:

> The start= argument should be as follows:
> 
>  nls(y ~ x/(x - a[z]),start=list(a = strt),data=xxx)

Nya-ha!  I, uh, clearly wasn't thinking clearly!  (Feel a bit *duh*
now!)

Thanks Gabor.

cheers,

Rolf

> 
> On Fri, Dec 11, 2020 at 6:51 PM Rolf Turner <r.turner at auckland.ac.nz>
> wrote:
> >
> >
> >
> > I want to fit a model y = x/(x-a) where the value of a depends
> > on the level of a factor z.  I cannot figure out an appropriate
> > syntax for nls().  The "parameter" a (to be estimated) should be a
> > vector of length equal to the number of levels of z.
> >
> > I tried:
> >
> > strt <- rep(3,length(levels(z))
> > names(strt=levels(z)
> > fit <- nls(y ~ x/(x - a[z]),start=strt,data=xxx)
> >
> > but of course got an error:
> >  
> > > Error in nls(y ~ x/(x - a[z]), start = strt, data = xxx) :
> > >   parameters without starting value in 'data': a  
> >
> > I keep thinking that there is something obvious that I should
> > be doing, but I can't work out what it is.
> >
> > Does there *exist* an appropriate syntax for doing what I want
> > to do?  Can anyone enlighten me?  The data set "xxx" is given
> > in dput() form at the end of this message.
> >
> > cheers,
> >
> > Rolf Turner
> >
> > --
> > Honorary Research Fellow
> > Department of Statistics
> > University of Auckland
> > Phone: +64-9-373-7599 ext. 88276
> >
> > Data set "xxx":
> >
> > structure(list(x = c(30, 40, 50, 60, 70, 80, 90, 100, 110, 120,
> > 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250,
> > 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160,
> > 170, 180, 190, 200, 210, 220, 230, 240, 250, 30, 40, 50, 60,
> > 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190,
> > 200, 210, 220, 230, 240, 250, 30, 40, 50, 60, 70, 80, 90, 100,
> > 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230,
> > 240, 250, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140,
> > 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250), y = c(1.27,
> > 1.16, 1.19, 1.15, 1.09, 1.07, 1.07, 1.05, 1.07, 1.03, 1.05, 1.07,
> > 1.06, 1.03, 1.05, 1.04, 1.03, 1.03, 1.03, 1.02, 1.02, 1.01, 1.01,
> > 1.21, 1.15, 1.1, 1.1, 1.06, 1.06, 1.05, 1.03, 1.07, 1.04, 1.04,
> > 1.02, 1.04, 1.02, 1.04, 1.03, 1.01, 1.03, 1.01, 1, 1.02, 1.03,
> > 1.02, 1.42, 1.27, 1.23, 1.14, 1.17, 1.08, 1.11, 1.06, 1.07, 1.08,
> > 1.06, 1.07, 1.04, 1.03, 1.07, 1.04, 1.03, 1.03, 1.03, 1.04, 1.03,
> > 1.03, 1.04, 1.85, 1.41, 1.35, 1.21, 1.22, 1.15, 1.14, 1.07, 1.1,
> > 1.09, 1.1, 1.09, 1.08, 1.08, 1.09, 1.09, 1.07, 1.06, 1.03, 1.08,
> > 1.05, 1.02, 1.05, 1.99, 1.6, 1.44, 1.4, 1.24, 1.3, 1.21, 1.23,
> > 1.18, 1.18, 1.12, 1.15, 1.09, 1.07, 1.13, 1.1, 1.05, 1.13, 1.09,
> > 1.03, 1.11, 1.07, 1.05), z = structure(c(1L, 1L, 1L, 1L, 1L,
> > 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> > 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
> > 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L,
> > 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L), .Label =
> > c("p1", "p2", "p3", "p4", "p5"), class = "factor")), class =
> > "data.frame", row.names = c(NA, -115L))


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sat Dec 12 05:44:28 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 11 Dec 2020 21:44:28 -0700
Subject: [R] A holiday related question
Message-ID: <CACxE24mGCM577R_O7uamg1AvNUcprL4sZNFQNpBU=mboNb9WWg@mail.gmail.com>

Hello everyone!

Hope you are all doing well and enjoying whatever December holiday you
celebrate.

Here is my question, please.  Has anyone put together R with a Raspberry Pi
or an Arduino to run music and Christmas lights, please?  I have seen a
little bit about using R with Raspberry Pi, but really nothing in this
vein.

In the past, I have used R with an Ubuntu laptop to run a temperature
sensor, which is a start.

Thanks for any suggestions.  Take care.

Sincerely,
Erin

-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From @pro @end|ng |rom un|me|b@edu@@u  Sat Dec 12 08:39:35 2020
From: @pro @end|ng |rom un|me|b@edu@@u (Andrew Robinson)
Date: Sat, 12 Dec 2020 07:39:35 +0000
Subject: [R] [EXT] Re:  nls() syntax
In-Reply-To: <20201212153911.61d05c13@rolf-Latitude-E7470>
References: <20201212125015.53b31218@rolf-Latitude-E7470>
 <CAP01uRm7RGdSQK=hDecbegvec9RkskzQVFtvr3SOTgE-cV5L=Q@mail.gmail.com>,
 <20201212153911.61d05c13@rolf-Latitude-E7470>
Message-ID: <MEAPR01MB45362421F4949BDD942B0467E2C90@MEAPR01MB4536.ausprd01.prod.outlook.com>

Hi Rolf,

It might also be worth experimenting to see if

y ~ 1 / ( 1 - a[z]/x )

yields the same result. It might be cleaner if x appears only once in the expression.

Cheers,

Andrew

--
Andrew Robinson
Director, CEBRA; Professor of Biosecurity
School of BioSciences
University of Melbourne, VIC 3010 Australia
Tel: (+61) 0403 138 955
Email: apro at unimelb.edu.au
Website: http://cebra.unimelb.edu.au/

I acknowledge the traditional owners of the land I inhabit and pay my respects to their elders.
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Rolf Turner <r.turner at auckland.ac.nz>
Sent: Saturday, December 12, 2020 1:39:11 PM
To: Gabor Grothendieck <ggrothendieck at gmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: [EXT] Re: [R] nls() syntax

UoM notice: External email. Be cautious of links, attachments, or impersonation attempts


On Fri, 11 Dec 2020 19:20:26 -0500
Gabor Grothendieck <ggrothendieck at gmail.com> wrote:

> The start= argument should be as follows:
>
>  nls(y ~ x/(x - a[z]),start=list(a = strt),data=xxx)

Nya-ha!  I, uh, clearly wasn't thinking clearly!  (Feel a bit *duh*
now!)

Thanks Gabor.

cheers,

Rolf

>
> On Fri, Dec 11, 2020 at 6:51 PM Rolf Turner <r.turner at auckland.ac.nz>
> wrote:
> >
> >
> >
> > I want to fit a model y = x/(x-a) where the value of a depends
> > on the level of a factor z.  I cannot figure out an appropriate
> > syntax for nls().  The "parameter" a (to be estimated) should be a
> > vector of length equal to the number of levels of z.
> >
> > I tried:
> >
> > strt <- rep(3,length(levels(z))
> > names(strt=levels(z)
> > fit <- nls(y ~ x/(x - a[z]),start=strt,data=xxx)
> >
> > but of course got an error:
> >
> > > Error in nls(y ~ x/(x - a[z]), start = strt, data = xxx) :
> > >   parameters without starting value in 'data': a
> >
> > I keep thinking that there is something obvious that I should
> > be doing, but I can't work out what it is.
> >
> > Does there *exist* an appropriate syntax for doing what I want
> > to do?  Can anyone enlighten me?  The data set "xxx" is given
> > in dput() form at the end of this message.
> >
> > cheers,
> >
> > Rolf Turner
> >
> > --
> > Honorary Research Fellow
> > Department of Statistics
> > University of Auckland
> > Phone: +64-9-373-7599 ext. 88276
> >
> > Data set "xxx":
> >
> > structure(list(x = c(30, 40, 50, 60, 70, 80, 90, 100, 110, 120,
> > 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250,
> > 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160,
> > 170, 180, 190, 200, 210, 220, 230, 240, 250, 30, 40, 50, 60,
> > 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190,
> > 200, 210, 220, 230, 240, 250, 30, 40, 50, 60, 70, 80, 90, 100,
> > 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230,
> > 240, 250, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140,
> > 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250), y = c(1.27,
> > 1.16, 1.19, 1.15, 1.09, 1.07, 1.07, 1.05, 1.07, 1.03, 1.05, 1.07,
> > 1.06, 1.03, 1.05, 1.04, 1.03, 1.03, 1.03, 1.02, 1.02, 1.01, 1.01,
> > 1.21, 1.15, 1.1, 1.1, 1.06, 1.06, 1.05, 1.03, 1.07, 1.04, 1.04,
> > 1.02, 1.04, 1.02, 1.04, 1.03, 1.01, 1.03, 1.01, 1, 1.02, 1.03,
> > 1.02, 1.42, 1.27, 1.23, 1.14, 1.17, 1.08, 1.11, 1.06, 1.07, 1.08,
> > 1.06, 1.07, 1.04, 1.03, 1.07, 1.04, 1.03, 1.03, 1.03, 1.04, 1.03,
> > 1.03, 1.04, 1.85, 1.41, 1.35, 1.21, 1.22, 1.15, 1.14, 1.07, 1.1,
> > 1.09, 1.1, 1.09, 1.08, 1.08, 1.09, 1.09, 1.07, 1.06, 1.03, 1.08,
> > 1.05, 1.02, 1.05, 1.99, 1.6, 1.44, 1.4, 1.24, 1.3, 1.21, 1.23,
> > 1.18, 1.18, 1.12, 1.15, 1.09, 1.07, 1.13, 1.1, 1.05, 1.13, 1.09,
> > 1.03, 1.11, 1.07, 1.05), z = structure(c(1L, 1L, 1L, 1L, 1L,
> > 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> > 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
> > 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L,
> > 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L), .Label =
> > c("p1", "p2", "p3", "p4", "p5"), class = "factor")), class =
> > "data.frame", row.names = c(NA, -115L))

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From jov@n|@ouz@5 @end|ng |rom gm@||@com  Sat Dec 12 16:27:18 2020
From: jov@n|@ouz@5 @end|ng |rom gm@||@com (Jovani T. de Souza)
Date: Sat, 12 Dec 2020 12:27:18 -0300
Subject: [R] Find the ideal cluster
Message-ID: <CADs2LWRPxb2h1-hv=RbYiwnLCwqXKFkKYD-SNoyT+DYc8zQTvQ@mail.gmail.com>

So, I and some other colleagues developed a hierarchical clustering
algorithm to basically find the main clusters involving agricultural
industries according to a particular city (e.g. London city).. We
structured this algorithm in R. It is working perfectly. So, according to
our filters that we inserted in the algorithm, we were able to generate 6
clustering scenarios to London city. For example, the first scenario
generated 2 clusters, the second scenario 5 clusters, and so on. I would
therefore like some help on how I can choose the most appropriate one. I
saw that there are some packages that help in this process, like `pvclust`,
but I couldn't use it for my case. I am inserting a brief executable code
below to show the essence of what I want.

Any help is welcome! If you know how to use using another package, feel
free to describe.

Best Regards.


    library(rdist)
    library(geosphere)
    library(fpc)


    df<-structure(list(Industries = c(1,2,3,4,5,6),
    +                    Latitude = c(-23.8, -23.8, -23.9, -23.7,
-23.7,-23.7),
    +                    Longitude = c(-49.5, -49.6, -49.7, -49.8,
-49.6,-49.9),
    +                    Waste = c(526, 350, 526, 469, 534, 346)), class =
"data.frame", row.names = c(NA, -6L))

    df1<-df

    #clusters
    coordinates<-df[c("Latitude","Longitude")]
    d<-as.dist(distm(coordinates[,2:1]))
    fit.average<-hclust(d,method="average")

    clusters<-cutree(fit.average, k=2)
    df$cluster <- clusters
    > df
      Industries Latitude Longitude Waste cluster
    1          1    -23.8     -49.5   526       1
    2          2    -23.8     -49.6   350       1
    3          3    -23.9     -49.7   526       1
    4          4    -23.7     -49.8   469       2
    5          5    -23.7     -49.6   534       1
    6          6    -23.7     -49.9   346       2
    >
    clusters1<-cutree(fit.average, k=5)
    df1$cluster <- clusters1
    > df1
      Industries Latitude Longitude Waste cluster
    1          1    -23.8     -49.5   526       1
    2          2    -23.8     -49.6   350       1
    3          3    -23.9     -49.7   526       2
    4          4    -23.7     -49.8   469       3
    5          5    -23.7     -49.6   534       4
    6          6    -23.7     -49.9   346       5
    >

	[[alternative HTML version deleted]]


From dc@r|@on @end|ng |rom t@mu@edu  Sat Dec 12 16:49:46 2020
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sat, 12 Dec 2020 09:49:46 -0600
Subject: [R] Find the ideal cluster
In-Reply-To: <CADs2LWRPxb2h1-hv=RbYiwnLCwqXKFkKYD-SNoyT+DYc8zQTvQ@mail.gmail.com>
References: <CADs2LWRPxb2h1-hv=RbYiwnLCwqXKFkKYD-SNoyT+DYc8zQTvQ@mail.gmail.com>
Message-ID: <CAE-dL2qk6itKwpoCLwQVsq15TC=9gxs96a8agSKGTMFqUrAC7w@mail.gmail.com>

Look at the Cluster Analysis Task View, particularly section
"Additional Functionality"
(https://cran.r-project.org/web/views/Cluster.html)

Maybe package clValid:

The R package clValid contains functions for validating the results
of a clustering analysis. There are three main types of cluster
validation measures available, ?internal?, ?stability?, and
?biological?. The user can choose from nine clustering algorithms in
existing R packages, including hierarchical, K-means, self-organizing
maps (SOM), and model based clustering. In addition, we provide a
function to perform the self-organizing tree algorithm (SOTA) method
of clustering. Any combination of validation measures and clustering
methods can be requested in a single function call. This allows the
user to simultaneously evaluate several clustering algorithms while
varying the number of clusters, to help determine the most appropriate
method and number of clusters for the dataset of interest.
Additionally, the package can automatically make use of the biological
information contained in the Gene Ontology (GO) database to calculate
the biological validation measures, via the annotation packages
available in Bioconductor. The function returns an object of S4 class
clValid, which has summary, plot, print, and additional methods which
allow the user to display the optimal validation scores and extract
clustering results.

David L Carlson
Professor Emeritus
Texas A&M University


On Sat, Dec 12, 2020 at 9:27 AM Jovani T. de Souza
<jovanisouza5 at gmail.com> wrote:
>
> So, I and some other colleagues developed a hierarchical clustering
> algorithm to basically find the main clusters involving agricultural
> industries according to a particular city (e.g. London city).. We
> structured this algorithm in R. It is working perfectly. So, according to
> our filters that we inserted in the algorithm, we were able to generate 6
> clustering scenarios to London city. For example, the first scenario
> generated 2 clusters, the second scenario 5 clusters, and so on. I would
> therefore like some help on how I can choose the most appropriate one. I
> saw that there are some packages that help in this process, like `pvclust`,
> but I couldn't use it for my case. I am inserting a brief executable code
> below to show the essence of what I want.
>
> Any help is welcome! If you know how to use using another package, feel
> free to describe.
>
> Best Regards.
>
>
>     library(rdist)
>     library(geosphere)
>     library(fpc)
>
>
>     df<-structure(list(Industries = c(1,2,3,4,5,6),
>     +                    Latitude = c(-23.8, -23.8, -23.9, -23.7,
> -23.7,-23.7),
>     +                    Longitude = c(-49.5, -49.6, -49.7, -49.8,
> -49.6,-49.9),
>     +                    Waste = c(526, 350, 526, 469, 534, 346)), class =
> "data.frame", row.names = c(NA, -6L))
>
>     df1<-df
>
>     #clusters
>     coordinates<-df[c("Latitude","Longitude")]
>     d<-as.dist(distm(coordinates[,2:1]))
>     fit.average<-hclust(d,method="average")
>
>     clusters<-cutree(fit.average, k=2)
>     df$cluster <- clusters
>     > df
>       Industries Latitude Longitude Waste cluster
>     1          1    -23.8     -49.5   526       1
>     2          2    -23.8     -49.6   350       1
>     3          3    -23.9     -49.7   526       1
>     4          4    -23.7     -49.8   469       2
>     5          5    -23.7     -49.6   534       1
>     6          6    -23.7     -49.9   346       2
>     >
>     clusters1<-cutree(fit.average, k=5)
>     df1$cluster <- clusters1
>     > df1
>       Industries Latitude Longitude Waste cluster
>     1          1    -23.8     -49.5   526       1
>     2          2    -23.8     -49.6   350       1
>     3          3    -23.9     -49.7   526       2
>     4          4    -23.7     -49.8   469       3
>     5          5    -23.7     -49.6   534       4
>     6          6    -23.7     -49.9   346       5
>     >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!Tws97pkPo-5PwOFVXUKnAB17jy4Wop-N5HsB9u3NBOLATWcys9Qz_h8zZmhqq5I$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!Tws97pkPo-5PwOFVXUKnAB17jy4Wop-N5HsB9u3NBOLATWcys9Qz_h8zUffJHwg$
> and provide commented, minimal, self-contained, reproducible code.


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Sat Dec 12 18:06:33 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Sat, 12 Dec 2020 17:06:33 +0000
Subject: [R] Find the ideal cluster
In-Reply-To: <CADs2LWRPxb2h1-hv=RbYiwnLCwqXKFkKYD-SNoyT+DYc8zQTvQ@mail.gmail.com>
References: <CADs2LWRPxb2h1-hv=RbYiwnLCwqXKFkKYD-SNoyT+DYc8zQTvQ@mail.gmail.com>
Message-ID: <b96a1756-7b1e-e3ac-b584-cba9eae45fdf@dewey.myzen.co.uk>

Dear Jovani

If you cross-post on CrossValidated as well as here it is polite to give 
a link so people do not answer here when someone has already answered 
there, or vice versa.

Michael

On 12/12/2020 15:27, Jovani T. de Souza wrote:
> So, I and some other colleagues developed a hierarchical clustering
> algorithm to basically find the main clusters involving agricultural
> industries according to a particular city (e.g. London city).. We
> structured this algorithm in R. It is working perfectly. So, according to
> our filters that we inserted in the algorithm, we were able to generate 6
> clustering scenarios to London city. For example, the first scenario
> generated 2 clusters, the second scenario 5 clusters, and so on. I would
> therefore like some help on how I can choose the most appropriate one. I
> saw that there are some packages that help in this process, like `pvclust`,
> but I couldn't use it for my case. I am inserting a brief executable code
> below to show the essence of what I want.
> 
> Any help is welcome! If you know how to use using another package, feel
> free to describe.
> 
> Best Regards.
> 
> 
>      library(rdist)
>      library(geosphere)
>      library(fpc)
> 
> 
>      df<-structure(list(Industries = c(1,2,3,4,5,6),
>      +                    Latitude = c(-23.8, -23.8, -23.9, -23.7,
> -23.7,-23.7),
>      +                    Longitude = c(-49.5, -49.6, -49.7, -49.8,
> -49.6,-49.9),
>      +                    Waste = c(526, 350, 526, 469, 534, 346)), class =
> "data.frame", row.names = c(NA, -6L))
> 
>      df1<-df
> 
>      #clusters
>      coordinates<-df[c("Latitude","Longitude")]
>      d<-as.dist(distm(coordinates[,2:1]))
>      fit.average<-hclust(d,method="average")
> 
>      clusters<-cutree(fit.average, k=2)
>      df$cluster <- clusters
>      > df
>        Industries Latitude Longitude Waste cluster
>      1          1    -23.8     -49.5   526       1
>      2          2    -23.8     -49.6   350       1
>      3          3    -23.9     -49.7   526       1
>      4          4    -23.7     -49.8   469       2
>      5          5    -23.7     -49.6   534       1
>      6          6    -23.7     -49.9   346       2
>      >
>      clusters1<-cutree(fit.average, k=5)
>      df1$cluster <- clusters1
>      > df1
>        Industries Latitude Longitude Waste cluster
>      1          1    -23.8     -49.5   526       1
>      2          2    -23.8     -49.6   350       1
>      3          3    -23.9     -49.7   526       2
>      4          4    -23.7     -49.8   469       3
>      5          5    -23.7     -49.6   534       4
>      6          6    -23.7     -49.9   346       5
>      >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From mr@|uced@n @end|ng |rom hotm@||@|t  Sat Dec 12 18:36:46 2020
From: mr@|uced@n @end|ng |rom hotm@||@|t (Luca Danieli)
Date: Sat, 12 Dec 2020 17:36:46 +0000
Subject: [R] Problem with contrast() - nonconforming number of contrast
 coefficients
Message-ID: <VI1PR03MB3677437078ED28CF4A965DD5F6C90@VI1PR03MB3677.eurprd03.prod.outlook.com>

Hello,

I have written this question on a problem that I have with the method contrast() in this Stackoverflow.
Is here anybody who can advise me on a method to do what I aim to do?

https://stackoverflow.com/questions/65267565/r-lsmeans-contrast-error-nonconforming-number-of-contrast-coefficients

Best
Luca

-----------------------------------------------
Luca Danieli
Ph.D. in music composition
University of Birmingham
http://www.lucadanieli.org
CV: https://bham.academia.edu/LucaDanieli/CurriculumVitae

	[[alternative HTML version deleted]]


From Br|@n@Beck@ge @end|ng |rom uvm@edu  Sun Dec 13 21:49:26 2020
From: Br|@n@Beck@ge @end|ng |rom uvm@edu (Brian Beckage)
Date: Sun, 13 Dec 2020 20:49:26 +0000
Subject: [R] ggplot2 + coord_cartesian + automatic ylim
Message-ID: <876A72CF-5663-42FB-81A3-E632C298ED87@uvm.edu>

As an example to illustrate my question, if I used the following code to plot the price of Apple stock using the tidyquant package and ggplot2


AAPL<-tq_get(x="AAPL")

AAPL %>%
  ggplot(aes(x = date, y = close)) +
  geom_line() +
  labs(title = "AAPL", y = "Closing Price", x = "") +
  coord_x_date(xlim=c(end-weeks(10),end),ylim=c(100,150)) +
  theme_tq()

but I would like the ylim to be set automatically based on the xlim.  In base R, this is a simple thing to do. ggplot is still a bit mysterious to me (not alway clear how it works) and so I would like to automatically set the ylim range based on the xlim range,  something  like the following, though it obviously does not work:


AAPL<-tq_get(x="AAPL")

AAPL %>%
  ggplot(aes(x = date, y = close)) +
  geom_line() +
  labs(title = "AAPL Line Chart", y = "Closing Price", x = "") +
  coord_x_date(xlim=c(end-weeks(10),end),ylim=c(min(y),max(y)) +
  theme_tq()

where the y vector corresponds to the y range delimited by xlim.  Note that coord_x_date is a wrapper for coord_cartesian.

So how do I ?see? and use the data and parms being utilized by ggplot to set the ylim?  Or more generally, how do you step through code like to this to examine for instance what exactly coord_x_date is doing?

Thanks,
Brian







	[[alternative HTML version deleted]]


From gregco@t@ @end|ng |rom me@com  Sat Dec 12 20:18:46 2020
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Sat, 12 Dec 2020 14:18:46 -0500
Subject: [R] How to specify year-month-day for a plot
Message-ID: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>

Starting with year-month-day, for the variable gallons, I can easily plot the variable gallons, while disregarding the date. 
gallons <- c (15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226, 14.338, 18.777, 19.652)
plot (gallons, type="l", xlab="X label", ylab="Y label", col="blue?)

How do I direct R to plot the variable gallons, at the appropriate, irregularly-spaced places on the X axis, while paying attention to the year-month-day?

format = "%Y-%m-%d?
2020-01-05 15.973
2020-02-15 18.832
2020-03-10 17.392
2020-05-04 14.774
2020-06-21 19.248
2020-08-01 14.913
2020-08-27 15.226
2020-09-28 14.338
2020-11-09 18.777
2020-12-11 19.652
	[[alternative HTML version deleted]]


From wen||ng||ng912 @end|ng |rom gm@||@com  Sat Dec 12 22:53:25 2020
From: wen||ng||ng912 @end|ng |rom gm@||@com (Lingling Wen)
Date: Sat, 12 Dec 2020 23:53:25 +0200
Subject: [R] multiple t-test with different species and treatments
Message-ID: <CAJ9SxKYWRgAJVpGZFb-v4pyMYGVsr2Hb5=nHn6t4zVc+SDQqxA@mail.gmail.com>

Dear R users,
I would like to ask for help with the code of multiple t-test. I have a
dataset as followed:
Species Treatment var1 var2 var2 var4 var5 var6
Blue D 0.022620093 0.125079631 0.04522571 0.010105835 0.013418019
1.455646741
Blue D 0.02117295 0.073544277 0.0311234 0.008742305 0.03261776 0.982196898
Blue D 0.021896521 0.112681274 0.05664344 0.013512548 0.032380618
1.777003683
Green D 0.032749726 0.087705198 0.13699174 0.009902168 0.083534492
1.553758965
Green D 0.036468693 0.115829755 0.10941521 0.012139481 0.206929915
2.610557732
Green D 0.043594022 0.062832712 0.12232853 0.015045559 0.111687593
1.99552401
Orange D 0.022617656 0.11465489 0.02882994 0.013304181 0.018175693
1.72075866
Orange D 0.026211773 0.099294867 0.03387876 0.013408254 0.02971197
2.184955376
Orange D 0.032205662 0.057267709 0.03883165 0.007744362 0.026553323
1.27255601
White D 0.041135469 0.085531343 0.06921425 0.011496168 0.010196895
0.573205411
White D 0.045142458 0.111429194 0.03546278 0.009196729 0.009968818
0.748529991
White D 0.031471913 0.050175149 0.05233851 0.011447205 0.010424973
0.92385457
Blue W 0.022222296 0.112334911 0.04080824 0.016064488 0.031047157
0.885523847
Blue W 0.040238733 0.121941307 0.04239768 0.010310538 0.020106944
0.751643349
Blue W 0.031508947 0.131547704 0.05212774 0.015720985 0.013932284
0.881234886
Green W 0.021070032 0.121018603 0.38202466 0.022152283 0.038479532
0.662605036
Green W 0.026562365 0.108269047 0.44028708 0.019344875 0.090798566
0.746330971
Green W 0.02926478 0.084080729 0.32376224 0.012609717 0.097744041
0.969301308
Orange W 0.02456562 0.134535891 0.09135624 0.007701481 0.017310058
0.966322354
Orange W 0.032095541 0.149347595 0.06048885 0.010332579 0.017457175
0.561561725
Orange W 0.039120696 0.141941743 0.02962146 0.005889924 0.017162941
0.502529091
White W 0.033903057 0.061460583 0.0492955 0.012457767 0.029929334 0.70986421
White W 0.033630233 0.115782233 0.02675399 0.021391535 0.023774961
1.176680075
White W 0.030638581 0.065074112 0.03678494 0.014781912 0.03529703
0.805500558
I wanted to perform a t-test between the treatment "D" and "W" of each
species for all of the variables (var1, var2,...).  Could anyone suggest
the packages or code for this analysis?

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sun Dec 13 23:42:11 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 14 Dec 2020 09:42:11 +1100
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
Message-ID: <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>

Hi Gregory,
Here's a start:

gcdf<-read.table(text="2020-01-05 15.973
2020-02-15 18.832
2020-03-10 17.392
2020-05-04 14.774
2020-06-21 19.248
2020-08-01 14.913
2020-08-27 15.226
2020-09-28 14.338
2020-11-09 18.777
2020-12-11 19.652",
header=TRUE,stringsAsFactors=FALSE,
col.names=c("date","gallons"))
gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
plot(gcdf$date,gcdf$gallons,main="Gallons by date",
xlab="Date",ylab="Gallons")

Jim

On Mon, Dec 14, 2020 at 9:33 AM Gregory Coats via R-help
<r-help at r-project.org> wrote:
>
> Starting with year-month-day, for the variable gallons, I can easily plot the variable gallons, while disregarding the date.
> gallons <- c (15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226, 14.338, 18.777, 19.652)
> plot (gallons, type="l", xlab="X label", ylab="Y label", col="blue?)
>
> How do I direct R to plot the variable gallons, at the appropriate, irregularly-spaced places on the X axis, while paying attention to the year-month-day?
>
> format = "%Y-%m-%d?
> 2020-01-05 15.973
> 2020-02-15 18.832
> 2020-03-10 17.392
> 2020-05-04 14.774
> 2020-06-21 19.248
> 2020-08-01 14.913
> 2020-08-27 15.226
> 2020-09-28 14.338
> 2020-11-09 18.777
> 2020-12-11 19.652
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Dec 14 00:06:47 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 13 Dec 2020 15:06:47 -0800
Subject: [R] ggplot2 + coord_cartesian + automatic ylim
In-Reply-To: <876A72CF-5663-42FB-81A3-E632C298ED87@uvm.edu>
References: <876A72CF-5663-42FB-81A3-E632C298ED87@uvm.edu>
Message-ID: <6ab67d64-c22b-2bac-21a9-b6bba2834bf6@comcast.net>


On 12/13/20 12:49 PM, Brian Beckage wrote:
> As an example to illustrate my question, if I used the following code to plot the price of Apple stock using the tidyquant package and ggplot2
>
>
> AAPL<-tq_get(x="AAPL")
>
> AAPL %>%
>    ggplot(aes(x = date, y = close)) +
>    geom_line() +
>    labs(title = "AAPL", y = "Closing Price", x = "") +
>    coord_x_date(xlim=c(end-weeks(10),end),ylim=c(100,150)) +
>    theme_tq()
>
> but I would like the ylim to be set automatically based on the xlim.  In base R, this is a simple thing to do. ggplot is still a bit mysterious to me (not alway clear how it works) and so I would like to automatically set the ylim range based on the xlim range,  something  like the following, though it obviously does not work:
>
>
> AAPL<-tq_get(x="AAPL")
>
> AAPL %>%
>    ggplot(aes(x = date, y = close)) +
>    geom_line() +
>    labs(title = "AAPL Line Chart", y = "Closing Price", x = "") +
>    coord_x_date(xlim=c(end-weeks(10),end),ylim=c(min(y),max(y)) +
>    theme_tq()
>
> where the y vector corresponds to the y range delimited by xlim.  Note that coord_x_date is a wrapper for coord_cartesian.


Why not let ggplot do it for you by "filtering" the data down to the 
date range you expect.


AAPL %>% filter(date > end-weeks(10)) %>%
 ??? ggplot(aes(x = date, y = close)) +
 ??? geom_line() +
 ??? labs(title = "AAPL", y = "Closing Price", x = "") +
 ??? coord_x_date(xlim=c(end-weeks(10),end)) +
 ??? theme_tq()


Might not even need `coord_x_date` call at all.

>
> So how do I ?see? and use the data and parms being utilized by ggplot to set the ylim?  Or more generally, how do you step through code like to this to examine for instance what exactly coord_x_date is doing?
>
> Thanks,
> Brian
>
>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Dec 14 00:08:11 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 13 Dec 2020 15:08:11 -0800
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
Message-ID: <B6B3F935-7DBB-4FA1-A085-87E4D263AFCD@dcn.davis.ca.us>

By converting the character date data into a time-like type... e.g. ?as.Date and plotting y-vs-x.

On December 12, 2020 11:18:46 AM PST, Gregory Coats via R-help <r-help at r-project.org> wrote:
>Starting with year-month-day, for the variable gallons, I can easily
>plot the variable gallons, while disregarding the date. 
>gallons <- c (15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226,
>14.338, 18.777, 19.652)
>plot (gallons, type="l", xlab="X label", ylab="Y label", col="blue?)
>
>How do I direct R to plot the variable gallons, at the appropriate,
>irregularly-spaced places on the X axis, while paying attention to the
>year-month-day?
>
>format = "%Y-%m-%d?
>2020-01-05 15.973
>2020-02-15 18.832
>2020-03-10 17.392
>2020-05-04 14.774
>2020-06-21 19.248
>2020-08-01 14.913
>2020-08-27 15.226
>2020-09-28 14.338
>2020-11-09 18.777
>2020-12-11 19.652
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Mon Dec 14 00:19:14 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 13 Dec 2020 15:19:14 -0800
Subject: [R] multiple t-test with different species and treatments
In-Reply-To: <CAJ9SxKYWRgAJVpGZFb-v4pyMYGVsr2Hb5=nHn6t4zVc+SDQqxA@mail.gmail.com>
References: <CAJ9SxKYWRgAJVpGZFb-v4pyMYGVsr2Hb5=nHn6t4zVc+SDQqxA@mail.gmail.com>
Message-ID: <CAGxFJbQoC4ZWU+QvCdRgy9EVH14pZqs4P5mqcbHkNcPdn6uxBA@mail.gmail.com>

1. Please read and follow the posting guide linked below.
2. No html -- this is a plain text list.
3. Use ?dput to provide us your data so that we don't have to convert it
for you.
4. We expect you to first make an effort to do your own coding. See
?t.test, which you could also
have found yourself by a web search (rseek.org is a reasonable place to
search from for R-related stuff,
though I have usually found that a plain google search does the job).
5. Is this homework? -- this list has a no homework policy (see the posting
guide).

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Dec 13, 2020 at 2:33 PM Lingling Wen <wenlingling912 at gmail.com>
wrote:

> Dear R users,
> I would like to ask for help with the code of multiple t-test. I have a
> dataset as followed:
> Species Treatment var1 var2 var2 var4 var5 var6
> Blue D 0.022620093 0.125079631 0.04522571 0.010105835 0.013418019
> 1.455646741
> Blue D 0.02117295 0.073544277 0.0311234 0.008742305 0.03261776 0.982196898
> Blue D 0.021896521 0.112681274 0.05664344 0.013512548 0.032380618
> 1.777003683
> Green D 0.032749726 0.087705198 0.13699174 0.009902168 0.083534492
> 1.553758965
> Green D 0.036468693 0.115829755 0.10941521 0.012139481 0.206929915
> 2.610557732
> Green D 0.043594022 0.062832712 0.12232853 0.015045559 0.111687593
> 1.99552401
> Orange D 0.022617656 0.11465489 0.02882994 0.013304181 0.018175693
> 1.72075866
> Orange D 0.026211773 0.099294867 0.03387876 0.013408254 0.02971197
> 2.184955376
> Orange D 0.032205662 0.057267709 0.03883165 0.007744362 0.026553323
> 1.27255601
> White D 0.041135469 0.085531343 0.06921425 0.011496168 0.010196895
> 0.573205411
> White D 0.045142458 0.111429194 0.03546278 0.009196729 0.009968818
> 0.748529991
> White D 0.031471913 0.050175149 0.05233851 0.011447205 0.010424973
> 0.92385457
> Blue W 0.022222296 0.112334911 0.04080824 0.016064488 0.031047157
> 0.885523847
> Blue W 0.040238733 0.121941307 0.04239768 0.010310538 0.020106944
> 0.751643349
> Blue W 0.031508947 0.131547704 0.05212774 0.015720985 0.013932284
> 0.881234886
> Green W 0.021070032 0.121018603 0.38202466 0.022152283 0.038479532
> 0.662605036
> Green W 0.026562365 0.108269047 0.44028708 0.019344875 0.090798566
> 0.746330971
> Green W 0.02926478 0.084080729 0.32376224 0.012609717 0.097744041
> 0.969301308
> Orange W 0.02456562 0.134535891 0.09135624 0.007701481 0.017310058
> 0.966322354
> Orange W 0.032095541 0.149347595 0.06048885 0.010332579 0.017457175
> 0.561561725
> Orange W 0.039120696 0.141941743 0.02962146 0.005889924 0.017162941
> 0.502529091
> White W 0.033903057 0.061460583 0.0492955 0.012457767 0.029929334
> 0.70986421
> White W 0.033630233 0.115782233 0.02675399 0.021391535 0.023774961
> 1.176680075
> White W 0.030638581 0.065074112 0.03678494 0.014781912 0.03529703
> 0.805500558
> I wanted to perform a t-test between the treatment "D" and "W" of each
> species for all of the variables (var1, var2,...).  Could anyone suggest
> the packages or code for this analysis?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From djnord|und @end|ng |rom gm@||@com  Mon Dec 14 00:36:22 2020
From: djnord|und @end|ng |rom gm@||@com (Daniel Nordlund)
Date: Sun, 13 Dec 2020 15:36:22 -0800
Subject: [R] ggplot2 + coord_cartesian + automatic ylim
In-Reply-To: <876A72CF-5663-42FB-81A3-E632C298ED87@uvm.edu>
References: <876A72CF-5663-42FB-81A3-E632C298ED87@uvm.edu>
Message-ID: <7bc64ffa-c923-e0bf-f186-1caab95b9627@gmail.com>

On 12/13/2020 12:49 PM, Brian Beckage wrote:
> As an example to illustrate my question, if I used the following code to plot the price of Apple stock using the tidyquant package and ggplot2
>
>
> AAPL<-tq_get(x="AAPL")
>
> AAPL %>%
>    ggplot(aes(x = date, y = close)) +
>    geom_line() +
>    labs(title = "AAPL", y = "Closing Price", x = "") +
>    coord_x_date(xlim=c(end-weeks(10),end),ylim=c(100,150)) +
>    theme_tq()
>
> but I would like the ylim to be set automatically based on the xlim.  In base R, this is a simple thing to do. ggplot is still a bit mysterious to me (not alway clear how it works) and so I would like to automatically set the ylim range based on the xlim range,  something  like the following, though it obviously does not work:
>
>
> AAPL<-tq_get(x="AAPL")
>
> AAPL %>%
>    ggplot(aes(x = date, y = close)) +
>    geom_line() +
>    labs(title = "AAPL Line Chart", y = "Closing Price", x = "") +
>    coord_x_date(xlim=c(end-weeks(10),end),ylim=c(min(y),max(y)) +
>    theme_tq()
>
> where the y vector corresponds to the y range delimited by xlim.  Note that coord_x_date is a wrapper for coord_cartesian.
>
> So how do I ?see? and use the data and parms being utilized by ggplot to set the ylim?  Or more generally, how do you step through code like to this to examine for instance what exactly coord_x_date is doing?
>
> Thanks,
> Brian
>
>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Brian,

I couldn't get your code to work, so I modified it slightly. Someone 
more adept at ggplot than me may be able to give you a better solution.

xmax<-AAPL$date[nrow(AAPL)]
xminmax <- c(xmax-weeks(10), xmax)
yminmax <- with(AAPL, range(AAPL[date>=xmin & date<=xmax,]$close))

AAPL %>%
 ? ggplot(aes(x = date, y = close)) +
 ? geom_line() +
 ? labs(title = "AAPL", y = "Closing Price", x = "") +
 ? coord_x_date(xlim=xminmax, ylim=yminmax) +
 ? theme_tq()


Hope this is helpful,

Dan

-- 
Daniel Nordlund
Port Townsend, WA  USA


From Br|@n@Beck@ge @end|ng |rom uvm@edu  Mon Dec 14 01:43:02 2020
From: Br|@n@Beck@ge @end|ng |rom uvm@edu (Brian Beckage)
Date: Mon, 14 Dec 2020 00:43:02 +0000
Subject: [R] ggplot2 + coord_cartesian + automatic ylim
In-Reply-To: <6ab67d64-c22b-2bac-21a9-b6bba2834bf6@comcast.net>
References: <876A72CF-5663-42FB-81A3-E632C298ED87@uvm.edu>
 <6ab67d64-c22b-2bac-21a9-b6bba2834bf6@comcast.net>
Message-ID: <FF2F8392-D879-4CB7-8210-6241CC0F43B2@uvm.edu>

David,

Great suggestion!

Thanks,
Brian






On Dec 13, 2020, at 6:06 PM, David Winsemius <dwinsemius at comcast.net<mailto:dwinsemius at comcast.net>> wrote:


On 12/13/20 12:49 PM, Brian Beckage wrote:
As an example to illustrate my question, if I used the following code to plot the price of Apple stock using the tidyquant package and ggplot2


AAPL<-tq_get(x="AAPL")

AAPL %>%
  ggplot(aes(x = date, y = close)) +
  geom_line() +
  labs(title = "AAPL", y = "Closing Price", x = "") +
  coord_x_date(xlim=c(end-weeks(10),end),ylim=c(100,150)) +
  theme_tq()

but I would like the ylim to be set automatically based on the xlim.  In base R, this is a simple thing to do. ggplot is still a bit mysterious to me (not alway clear how it works) and so I would like to automatically set the ylim range based on the xlim range,  something  like the following, though it obviously does not work:


AAPL<-tq_get(x="AAPL")

AAPL %>%
  ggplot(aes(x = date, y = close)) +
  geom_line() +
  labs(title = "AAPL Line Chart", y = "Closing Price", x = "") +
  coord_x_date(xlim=c(end-weeks(10),end),ylim=c(min(y),max(y)) +
  theme_tq()

where the y vector corresponds to the y range delimited by xlim.  Note that coord_x_date is a wrapper for coord_cartesian.


Why not let ggplot do it for you by "filtering" the data down to the date range you expect.


AAPL %>% filter(date > end-weeks(10)) %>%
    ggplot(aes(x = date, y = close)) +
    geom_line() +
    labs(title = "AAPL", y = "Closing Price", x = "") +
    coord_x_date(xlim=c(end-weeks(10),end)) +
    theme_tq()


Might not even need `coord_x_date` call at all.


So how do I ?see? and use the data and parms being utilized by ggplot to set the ylim?  Or more generally, how do you step through code like to this to examine for instance what exactly coord_x_date is doing?

Thanks,
Brian







[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From gregco@t@ @end|ng |rom me@com  Mon Dec 14 02:34:45 2020
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Sun, 13 Dec 2020 20:34:45 -0500
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
Message-ID: <215E4A16-5675-4021-BB09-A4B84977457A@me.com>

Hi Jim,
Thank you VERY much!
In what I tried, my values for the vertical Y were automatically understood by R.
But it appears that the string yyyy-mm-dd was NOT recognized by R as a date for the X axis, and gave a red error message.
My values for Year-Month-Day were NOT understood by R.
Is there a convenient way to tell R to interpret ?2020-12-13? as a date?

data <- data.frame(
  day = as.Date("2020-02-15", "2020-03-10", "2020-05-04", "2020-06-21", "2020-08-01", "2020-08-27", "2020-09-28", "2020-11-09", "2020-12-11")
  value = (15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226, 14.338, 18.777, 19.652))
p <- ggplot(data, aes(x=day, y=value))
  geom_line()
  xlab("X Label")
p
Error: unexpected symbol in:
"  day = as.Date("2020-02-15", "2020-03-10", "2020-05-04", "2020-06-21", "2020-08-01", "2020-08-27", "2020-09-28", "2020-11-09", "2020-12-11")
  value"

Greg Coats
gregcoats at me.com
Reston, Virginia USA

> On Dec 13, 2020, at 5:42 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
> 
> Hi Gregory,
> Here's a start:
> 
> gcdf<-read.table(text="2020-01-05 15.973
> 2020-02-15 18.832
> 2020-03-10 17.392
> 2020-05-04 14.774
> 2020-06-21 19.248
> 2020-08-01 14.913
> 2020-08-27 15.226
> 2020-09-28 14.338
> 2020-11-09 18.777
> 2020-12-11 19.652",
> header=TRUE,stringsAsFactors=FALSE,
> col.names=c("date","gallons"))
> gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
> plot(gcdf$date,gcdf$gallons,main="Gallons by date",
> xlab="Date",ylab="Gallons")
> 
> Jim
> 
> On Mon, Dec 14, 2020 at 9:33 AM Gregory Coats via R-help
> <r-help at r-project.org> wrote:
>> 
>> Starting with year-month-day, for the variable gallons, I can easily plot the variable gallons, while disregarding the date.
>> gallons <- c (15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226, 14.338, 18.777, 19.652)
>> plot (gallons, type="l", xlab="X label", ylab="Y label", col="blue?)
>> 
>> How do I direct R to plot the variable gallons, at the appropriate, irregularly-spaced places on the X axis, while paying attention to the year-month-day?
>> 
>> format = "%Y-%m-%d?
>> 2020-01-05 15.973
>> 2020-02-15 18.832
>> 2020-03-10 17.392
>> 2020-05-04 14.774
>> 2020-06-21 19.248
>> 2020-08-01 14.913
>> 2020-08-27 15.226
>> 2020-09-28 14.338
>> 2020-11-09 18.777
>> 2020-12-11 19.652
>>        [[alternative HTML version deleted]]
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Mon Dec 14 03:00:10 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Sun, 13 Dec 2020 18:00:10 -0800
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
Message-ID: <CAHqSRuSWwHnYH0SrjJJDLd-m41NrWKhcY4B=mfpbuMaR6h+aeg@mail.gmail.com>

You left out some calls to c().  Note that
   (2,3,5)
is not valid syntax for making a vector of numbers; use
   c(2,3,5)
You also left out a comma and gave different lengths for day and value.
You also left out plus signs between the various components of your ggplot
expression.

Try
 data <- data.frame(
     day = as.Date(c("2020-02-15", "2020-03-10", "2020-05-04",
"2020-06-21", "2020-08-01", "2020-08-27", "2020-09-28", "2020-11-09",
"2020-12-11", "2020-12-12")),
     value = c(15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226,
14.338, 18.777, 19.652))

 p <- ggplot(data, aes(x=day, y=value))+
       geom_line()+
       xlab("X Label")
 p

On Sun, Dec 13, 2020 at 5:35 PM Gregory Coats via R-help <
r-help at r-project.org> wrote:

> Hi Jim,
> Thank you VERY much!
> In what I tried, my values for the vertical Y were automatically
> understood by R.
> But it appears that the string yyyy-mm-dd was NOT recognized by R as a
> date for the X axis, and gave a red error message.
> My values for Year-Month-Day were NOT understood by R.
> Is there a convenient way to tell R to interpret ?2020-12-13? as a date?
>
> data <- data.frame(
>   day = as.Date("2020-02-15", "2020-03-10", "2020-05-04", "2020-06-21",
> "2020-08-01", "2020-08-27", "2020-09-28", "2020-11-09", "2020-12-11")
>   value = (15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226, 14.338,
> 18.777, 19.652))
> p <- ggplot(data, aes(x=day, y=value))
>   geom_line()
>   xlab("X Label")
> p
> Error: unexpected symbol in:
> "  day = as.Date("2020-02-15", "2020-03-10", "2020-05-04", "2020-06-21",
> "2020-08-01", "2020-08-27", "2020-09-28", "2020-11-09", "2020-12-11")
>   value"
>
> Greg Coats
> gregcoats at me.com
> Reston, Virginia USA
>
> > On Dec 13, 2020, at 5:42 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Gregory,
> > Here's a start:
> >
> > gcdf<-read.table(text="2020-01-05 15.973
> > 2020-02-15 18.832
> > 2020-03-10 17.392
> > 2020-05-04 14.774
> > 2020-06-21 19.248
> > 2020-08-01 14.913
> > 2020-08-27 15.226
> > 2020-09-28 14.338
> > 2020-11-09 18.777
> > 2020-12-11 19.652",
> > header=TRUE,stringsAsFactors=FALSE,
> > col.names=c("date","gallons"))
> > gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
> > plot(gcdf$date,gcdf$gallons,main="Gallons by date",
> > xlab="Date",ylab="Gallons")
> >
> > Jim
> >
> > On Mon, Dec 14, 2020 at 9:33 AM Gregory Coats via R-help
> > <r-help at r-project.org> wrote:
> >>
> >> Starting with year-month-day, for the variable gallons, I can easily
> plot the variable gallons, while disregarding the date.
> >> gallons <- c (15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226,
> 14.338, 18.777, 19.652)
> >> plot (gallons, type="l", xlab="X label", ylab="Y label", col="blue?)
> >>
> >> How do I direct R to plot the variable gallons, at the appropriate,
> irregularly-spaced places on the X axis, while paying attention to the
> year-month-day?
> >>
> >> format = "%Y-%m-%d?
> >> 2020-01-05 15.973
> >> 2020-02-15 18.832
> >> 2020-03-10 17.392
> >> 2020-05-04 14.774
> >> 2020-06-21 19.248
> >> 2020-08-01 14.913
> >> 2020-08-27 15.226
> >> 2020-09-28 14.338
> >> 2020-11-09 18.777
> >> 2020-12-11 19.652
> >>        [[alternative HTML version deleted]]
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Mon Dec 14 04:58:11 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 14 Dec 2020 14:58:11 +1100
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
Message-ID: <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>

Hi Gregory,

On Mon, Dec 14, 2020 at 12:34 PM Gregory Coats <gregcoats at me.com> wrote:
>...
> Is there a convenient way to tell R to interpret ?2020-12-13? as a date?
>
Notice the as.Date command in the code I sent to you. this converts a
string to a date with a resolution of one day. If you want a higher
time resolution, use strptime or one of the other POSIX date
conversion functions.

Jim


From bgunter@4567 @end|ng |rom gm@||@com  Mon Dec 14 05:32:00 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 13 Dec 2020 20:32:00 -0800
Subject: [R] A question on substitute()
Message-ID: <CAGxFJbQWY8EixeRfVhqa+jg1OKb8p8q=QyZFv54AO1hLcqSnwQ@mail.gmail.com>

I would appreciate any help in correcting my misunderstanding of the
following:

> substitute(quote(x+a), env = list(a=5))
quote(x + 5)  ## as expected
> substitute(quote(x+a), env = list2env(list(a=5)))
quote(x + 5)  ## as expected

> ### BUT
> .GlobalEnv$a
[1] 5
> substitute(quote(x+a), env = .GlobalEnv)
quote(x + a)  ## unexpected

I conclude from this that there is something special about .GlobalEnv that
does not allow it to behave as documented for the env argument in
?substitute, to wit:

"env:

an environment or a list object. Defaults to the current evaluation
environment."

I would be grateful for any insight, as I am clearly missing something.


Note: (though I don't think this matters):

> sessionInfo()
R version 4.0.3 (2020-10-10)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16


Cheers to all,

Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Dec 14 06:36:44 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 13 Dec 2020 21:36:44 -0800
Subject: [R] A question on substitute()
In-Reply-To: <CAGxFJbQWY8EixeRfVhqa+jg1OKb8p8q=QyZFv54AO1hLcqSnwQ@mail.gmail.com>
References: <CAGxFJbQWY8EixeRfVhqa+jg1OKb8p8q=QyZFv54AO1hLcqSnwQ@mail.gmail.com>
Message-ID: <CAGxFJbRuc4J-bFcWvS2=OKjdvJ9UgYV+nqppy-DofQmHeUdmug@mail.gmail.com>

Please disregard my previous post. My understanding is correct, and the
behavior is **AS DOCUMENTED**.
I failed to read the docs carefully. Mea Culpa.

Best,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Dec 13, 2020 at 8:32 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I would appreciate any help in correcting my misunderstanding of the
> following:
>
> > substitute(quote(x+a), env = list(a=5))
> quote(x + 5)  ## as expected
> > substitute(quote(x+a), env = list2env(list(a=5)))
> quote(x + 5)  ## as expected
>
> > ### BUT
> > .GlobalEnv$a
> [1] 5
> > substitute(quote(x+a), env = .GlobalEnv)
> quote(x + a)  ## unexpected
>
> I conclude from this that there is something special about .GlobalEnv that
> does not allow it to behave as documented for the env argument in
> ?substitute, to wit:
>
> "env:
>
> an environment or a list object. Defaults to the current evaluation
> environment."
>
> I would be grateful for any insight, as I am clearly missing something.
>
>
> Note: (though I don't think this matters):
>
> > sessionInfo()
> R version 4.0.3 (2020-10-10)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
>
>
> Cheers to all,
>
> Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Dec 14 06:45:21 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 13 Dec 2020 21:45:21 -0800
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
Message-ID: <8FF4DFC2-CBD8-4C06-8BD0-438AFE1BFC77@dcn.davis.ca.us>

Bill pointed out some errors in your code but you keep making the claim that YYYY-MM-DD is not recognized and I just want to make it completely clear that that is the default format for dates in R as it is an ISO standard. So focus on other issues until you get it working... this format is definitely not your problem.

On December 13, 2020 5:34:45 PM PST, Gregory Coats via R-help <r-help at r-project.org> wrote:
>Hi Jim,
>Thank you VERY much!
>In what I tried, my values for the vertical Y were automatically
>understood by R.
>But it appears that the string yyyy-mm-dd was NOT recognized by R as a
>date for the X axis, and gave a red error message.
>My values for Year-Month-Day were NOT understood by R.
>Is there a convenient way to tell R to interpret ?2020-12-13? as a
>date?
>
>data <- data.frame(
>day = as.Date("2020-02-15", "2020-03-10", "2020-05-04", "2020-06-21",
>"2020-08-01", "2020-08-27", "2020-09-28", "2020-11-09", "2020-12-11")
>value = (15.973, 18.832, 17.392, 14.774, 19.248, 14.913, 15.226,
>14.338, 18.777, 19.652))
>p <- ggplot(data, aes(x=day, y=value))
>  geom_line()
>  xlab("X Label")
>p
>Error: unexpected symbol in:
>"  day = as.Date("2020-02-15", "2020-03-10", "2020-05-04",
>"2020-06-21", "2020-08-01", "2020-08-27", "2020-09-28", "2020-11-09",
>"2020-12-11")
>  value"
>
>Greg Coats
>gregcoats at me.com
>Reston, Virginia USA
>
>> On Dec 13, 2020, at 5:42 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
>> 
>> Hi Gregory,
>> Here's a start:
>> 
>> gcdf<-read.table(text="2020-01-05 15.973
>> 2020-02-15 18.832
>> 2020-03-10 17.392
>> 2020-05-04 14.774
>> 2020-06-21 19.248
>> 2020-08-01 14.913
>> 2020-08-27 15.226
>> 2020-09-28 14.338
>> 2020-11-09 18.777
>> 2020-12-11 19.652",
>> header=TRUE,stringsAsFactors=FALSE,
>> col.names=c("date","gallons"))
>> gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
>> plot(gcdf$date,gcdf$gallons,main="Gallons by date",
>> xlab="Date",ylab="Gallons")
>> 
>> Jim
>> 
>> On Mon, Dec 14, 2020 at 9:33 AM Gregory Coats via R-help
>> <r-help at r-project.org> wrote:
>>> 
>>> Starting with year-month-day, for the variable gallons, I can easily
>plot the variable gallons, while disregarding the date.
>>> gallons <- c (15.973, 18.832, 17.392, 14.774, 19.248, 14.913,
>15.226, 14.338, 18.777, 19.652)
>>> plot (gallons, type="l", xlab="X label", ylab="Y label", col="blue?)
>>> 
>>> How do I direct R to plot the variable gallons, at the appropriate,
>irregularly-spaced places on the X axis, while paying attention to the
>year-month-day?
>>> 
>>> format = "%Y-%m-%d?
>>> 2020-01-05 15.973
>>> 2020-02-15 18.832
>>> 2020-03-10 17.392
>>> 2020-05-04 14.774
>>> 2020-06-21 19.248
>>> 2020-08-01 14.913
>>> 2020-08-27 15.226
>>> 2020-09-28 14.338
>>> 2020-11-09 18.777
>>> 2020-12-11 19.652
>>>        [[alternative HTML version deleted]]
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Dec 14 09:16:34 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 14 Dec 2020 08:16:34 +0000
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
In-Reply-To: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
References: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
Message-ID: <67cb1a2cef7a49319cde5dc1d75ad5f8@SRVEXCHCM1302.precheza.cz>

Hallo Alejandra

Although RStudio and ESS could help with some automation (each with its own
way), using R alone is not a big problem, especially if you are not familiar
with Emacs basics and perceiving RStudio issues. I use R with simple
external editor - it could be notepad but I could recommend TINN-R

https://sourceforge.net/projects/tinn-r/

which has syntax highlighting and works smoothly if R is console is set to
multiple windows. It is also quite easy to manage.

Good luck with R.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Alejandra Barrio
> Gorski
> Sent: Tuesday, December 8, 2020 7:48 PM
> To: R-help at r-project.org
> Subject: [R] Help with connection issue for R (just joined, leading R for
our
> agency)
> 
> Dear fellow R users,
> 
> Greetings, I am new to this list. I joined because I am pioneering the use
of R
> for the agency I work for. I essentially work alone and would like to
reach
> out for help on an issue I have been having. Here it is:
> 
>    - From one day to the next, my RStudio does not execute commands when
> I
>    press ctrl + enter. Nothing happens, and then after a few minutes out
of
>    nowhere, it runs everything at once. This makes it very hard to do my
work.
>    - I tried uninstalling and re-installing both R and Rstudio, but the
>    error comes up again. I tested commands on my R program alone, and it
> works
>    fine there. It could be the way that Rstudio connects to R.
>    - I am on a Windows 10 computer. I work for a government agency so
> there
>    may be a few firewall/virus protection issues.
> 
> I would love any pointers.
> 
> Thank you,
> Alejandra
> 
> --
> 
> *Alejandra Barrio*
> Linkedin <https://www.linkedin.com/in/alejandra-barrio/> | Website
> <https://www.ocf.berkeley.edu/~alejandrabarrio/>
> MPP | M.A., International and Area Studies University of California,
Berkeley
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From ||@t@ @end|ng |rom dewey@myzen@co@uk  Mon Dec 14 12:54:03 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Mon, 14 Dec 2020 11:54:03 +0000
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
In-Reply-To: <67cb1a2cef7a49319cde5dc1d75ad5f8@SRVEXCHCM1302.precheza.cz>
References: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
 <67cb1a2cef7a49319cde5dc1d75ad5f8@SRVEXCHCM1302.precheza.cz>
Message-ID: <03bbb44f-a954-ce95-01c9-88202b54c873@dewey.myzen.co.uk>

Just to add to Petr's comment there are other basic editors with syntax 
highlighting like Notepad++ which are also OK if you want a fairly 
minimalist approach.

Michael

On 14/12/2020 08:16, PIKAL Petr wrote:
> Hallo Alejandra
> 
> Although RStudio and ESS could help with some automation (each with its own
> way), using R alone is not a big problem, especially if you are not familiar
> with Emacs basics and perceiving RStudio issues. I use R with simple
> external editor - it could be notepad but I could recommend TINN-R
> 
> https://sourceforge.net/projects/tinn-r/
> 
> which has syntax highlighting and works smoothly if R is console is set to
> multiple windows. It is also quite easy to manage.
> 
> Good luck with R.
> 
> Cheers
> Petr
> 
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Alejandra Barrio
>> Gorski
>> Sent: Tuesday, December 8, 2020 7:48 PM
>> To: R-help at r-project.org
>> Subject: [R] Help with connection issue for R (just joined, leading R for
> our
>> agency)
>>
>> Dear fellow R users,
>>
>> Greetings, I am new to this list. I joined because I am pioneering the use
> of R
>> for the agency I work for. I essentially work alone and would like to
> reach
>> out for help on an issue I have been having. Here it is:
>>
>>     - From one day to the next, my RStudio does not execute commands when
>> I
>>     press ctrl + enter. Nothing happens, and then after a few minutes out
> of
>>     nowhere, it runs everything at once. This makes it very hard to do my
> work.
>>     - I tried uninstalling and re-installing both R and Rstudio, but the
>>     error comes up again. I tested commands on my R program alone, and it
>> works
>>     fine there. It could be the way that Rstudio connects to R.
>>     - I am on a Windows 10 computer. I work for a government agency so
>> there
>>     may be a few firewall/virus protection issues.
>>
>> I would love any pointers.
>>
>> Thank you,
>> Alejandra
>>
>> --
>>
>> *Alejandra Barrio*
>> Linkedin <https://www.linkedin.com/in/alejandra-barrio/> | Website
>> <https://www.ocf.berkeley.edu/~alejandrabarrio/>
>> MPP | M.A., International and Area Studies University of California,
> Berkeley
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-
>> guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From @@e||ck @end|ng |rom gm@||@com  Mon Dec 14 13:39:38 2020
From: @@e||ck @end|ng |rom gm@||@com (stephen sefick)
Date: Mon, 14 Dec 2020 07:39:38 -0500
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
In-Reply-To: <87pn3gfuvc.fsf@gmail.com>
References: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
 <87pn3gfuvc.fsf@gmail.com>
Message-ID: <CADKEMqhc5gfJ1awECGgB+1kqA5F4bijTRKciF_3m3uMX2Q_7SQ@mail.gmail.com>

Hello, I use ESS everyday for work. If you choose to explore this route,
spacemacs configuration files/layers may ease your transition to emacs.

Stephen Sefick, PhD

On Fri, Dec 11, 2020, 06:25 Jeremie Juste <jeremiejuste at gmail.com> wrote:

>
> Hello Alejandra,
>
> || On Tuesday,  8 Dec 2020 at 10:48, Alejandra Barrio Gorski wrote:
>
> Welcome to the mailing list.
> > Greetings, I am new to this list. I joined because I am pioneering the
> use
> > of R for the agency I work for. I essentially work alone and would like
> to
> > reach out for help on an issue I have been having. Here it is:
> Pioneering R is far from an easy task especially if you are doing it on
> your own. Hat for raising up to the challenge!
>
> This is mailing list is dedicated to R usage and I'm afraid you won't
> find a lot of help regarding the working of R-Studio here.
>
> || On Wednesday,  9 Dec 2020 at 10:35, Martin Maechler wrote:
> > Also, yes indeed, government (or company) firewalls *do* lead
> > to problems which are sometimes much more prominent when using R
> > via Rstudio, rather than using R "alone" (or via ESS which I use
> > 99% of the time, "Emacs Speaks Statistics").
>
> That said, I take the opportunity Martin gave me to advertise that both
> Emacs and  Emacs Speaks Statistics works on Windows as well. The entry
> cost might seem
> expensive in the beginning but I assure you it will pay very quickly.
>
> - For emacs
>    - https://www.gnu.org/software/emacs/tour/
>    - https://www.youtube.com/watch?v=Iagbv974GlQ
>    - emacs mailing-list help-gnu-emacs at gnu.org
>
> - For ESS
>    -  https://ess.r-project.org/
>    -  ESS mailing list https://stat.ethz.ch/mailman/listinfo/ess-help
>
>
> Best regards,
> Jeremie
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jo@chim m@iii@g oii zuck@reiii@de  Sun Dec 13 23:34:18 2020
From: jo@chim m@iii@g oii zuck@reiii@de (jo@chim m@iii@g oii zuck@reiii@de)
Date: Sun, 13 Dec 2020 23:34:18 +0100
Subject: [R] [R-pkgs] shinyfilter: 'Excel-like' interdependent column
 filters in Shiny tables
Message-ID: <008c01d6d1a0$18292310$487b6930$@zuckarelli.de>

Hello everyone,



I have been looking for 'Excel-like' column filters for reactable tables in
Shiny, and finally decided to developed this functionality myself. The basic
idea is that the selection options available in each column filter of a
table depend on the combined selection in all other filters, just as we know
it from popular spreadsheet applications.



As a result, my new package 'shinyfilter' is now available on CRAN (visit
https://CRAN.R-project.org/package=shinyfilter for more details). Install it
by executing

R> install.packages("shinyfilter", dependencies = TRUE)

in the R console.



You will find more information (including both, a comprehensive tutorial and
a short 'cookbook recipe') on GitHub
(https://github.com/jsugarelli/shinyfilter).



Best,



Joachim



----

Joachim L. Zuckarelli

E-mail: joachim at zuckarelli.de <mailto:joachim at zuckarelli.de>

Website: http://www.zuckarelli.de

Twitter: https://twitter.com/jsugarelli




	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From n|ko@@@n@gno@t@k|@ @end|ng |rom hotm@||@com  Mon Dec 14 16:14:17 2020
From: n|ko@@@n@gno@t@k|@ @end|ng |rom hotm@||@com (Nikolaos Anagnostakis)
Date: Mon, 14 Dec 2020 16:14:17 +0100
Subject: [R] Hello! Problem - function ''matord'' in R
Message-ID: <DB9PR01MB7322326929FB9AC1288153B58EC70@DB9PR01MB7322.eurprd01.prod.exchangelabs.com>

Hello! 

  I am developing an algorithm via the R program to create phylogenetic
trees and calculate values that interest me. On 2019 I had used a function
called ''matord'' but I can't find it anymore. Specifically I needed it for
calculation of two matrices for CI and RI.

  Is there anyone who could help me? 
  Is there a similar function?

Best Wishes

Nikos


From bgunter@4567 @end|ng |rom gm@||@com  Mon Dec 14 22:32:30 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 14 Dec 2020 13:32:30 -0800
Subject: [R] Hello! Problem - function ''matord'' in R
In-Reply-To: <DB9PR01MB7322326929FB9AC1288153B58EC70@DB9PR01MB7322.eurprd01.prod.exchangelabs.com>
References: <DB9PR01MB7322326929FB9AC1288153B58EC70@DB9PR01MB7322.eurprd01.prod.exchangelabs.com>
Message-ID: <CAGxFJbS3bfw6YcjdbJLruyZZJLho6LKCy3FsU8Se8pgyifna5Q@mail.gmail.com>

Are you sure you're not thinking of a matlab or some other software's
function? (Don't answer... but R has fairly extensive linear algebra
capabilities built into its standard distro, and this doesn't sound
familiar. I could well be wrong about this, of course).

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Dec 14, 2020 at 11:40 AM Nikolaos Anagnostakis <
nikos.anagnostakis at hotmail.com> wrote:

> Hello!
>
>   I am developing an algorithm via the R program to create phylogenetic
> trees and calculate values that interest me. On 2019 I had used a function
> called ''matord'' but I can't find it anymore. Specifically I needed it for
> calculation of two matrices for CI and RI.
>
>   Is there anyone who could help me?
>   Is there a similar function?
>
> Best Wishes
>
> Nikos
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m||net@ @end|ng |rom tut@@|o  Mon Dec 14 22:43:49 2020
From: m||net@ @end|ng |rom tut@@|o (T. A. Milne)
Date: Mon, 14 Dec 2020 22:43:49 +0100 (CET)
Subject: [R] Hello! Problem - function ''matord'' in R
Message-ID: <MOYCPJn--B-2@tuta.io>

Might the desired function "matord" be part of a Bioconductor package? This link
https://rdrr.io/bioc/clusterSeq/src/R/associatePosteriors.R

suggests that could be the case. 

- T. Arthur Milne


From jov@n|@ouz@5 @end|ng |rom gm@||@com  Mon Dec 14 23:11:59 2020
From: jov@n|@ouz@5 @end|ng |rom gm@||@com (Jovani T. de Souza)
Date: Mon, 14 Dec 2020 19:11:59 -0300
Subject: [R] Find the ideal cluster
In-Reply-To: <b96a1756-7b1e-e3ac-b584-cba9eae45fdf@dewey.myzen.co.uk>
References: <CADs2LWRPxb2h1-hv=RbYiwnLCwqXKFkKYD-SNoyT+DYc8zQTvQ@mail.gmail.com>
 <b96a1756-7b1e-e3ac-b584-cba9eae45fdf@dewey.myzen.co.uk>
Message-ID: <CADs2LWQoJ2tf=N1buMN--+xWn+8EBiTRAmaf+hk9Ot1a_tSVOQ@mail.gmail.com>

Thank you so much!

Sorry Michael, I will insert in the next.

Best regards.




[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
Remetente
notificado por
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
14/12/20
19:11:49

Em s?b., 12 de dez. de 2020 ?s 14:06, Michael Dewey <lists at dewey.myzen.co.uk>
escreveu:

> Dear Jovani
>
> If you cross-post on CrossValidated as well as here it is polite to give
> a link so people do not answer here when someone has already answered
> there, or vice versa.
>
> Michael
>
> On 12/12/2020 15:27, Jovani T. de Souza wrote:
> > So, I and some other colleagues developed a hierarchical clustering
> > algorithm to basically find the main clusters involving agricultural
> > industries according to a particular city (e.g. London city).. We
> > structured this algorithm in R. It is working perfectly. So, according to
> > our filters that we inserted in the algorithm, we were able to generate 6
> > clustering scenarios to London city. For example, the first scenario
> > generated 2 clusters, the second scenario 5 clusters, and so on. I would
> > therefore like some help on how I can choose the most appropriate one. I
> > saw that there are some packages that help in this process, like
> `pvclust`,
> > but I couldn't use it for my case. I am inserting a brief executable code
> > below to show the essence of what I want.
> >
> > Any help is welcome! If you know how to use using another package, feel
> > free to describe.
> >
> > Best Regards.
> >
> >
> >      library(rdist)
> >      library(geosphere)
> >      library(fpc)
> >
> >
> >      df<-structure(list(Industries = c(1,2,3,4,5,6),
> >      +                    Latitude = c(-23.8, -23.8, -23.9, -23.7,
> > -23.7,-23.7),
> >      +                    Longitude = c(-49.5, -49.6, -49.7, -49.8,
> > -49.6,-49.9),
> >      +                    Waste = c(526, 350, 526, 469, 534, 346)),
> class =
> > "data.frame", row.names = c(NA, -6L))
> >
> >      df1<-df
> >
> >      #clusters
> >      coordinates<-df[c("Latitude","Longitude")]
> >      d<-as.dist(distm(coordinates[,2:1]))
> >      fit.average<-hclust(d,method="average")
> >
> >      clusters<-cutree(fit.average, k=2)
> >      df$cluster <- clusters
> >      > df
> >        Industries Latitude Longitude Waste cluster
> >      1          1    -23.8     -49.5   526       1
> >      2          2    -23.8     -49.6   350       1
> >      3          3    -23.9     -49.7   526       1
> >      4          4    -23.7     -49.8   469       2
> >      5          5    -23.7     -49.6   534       1
> >      6          6    -23.7     -49.9   346       2
> >      >
> >      clusters1<-cutree(fit.average, k=5)
> >      df1$cluster <- clusters1
> >      > df1
> >        Industries Latitude Longitude Waste cluster
> >      1          1    -23.8     -49.5   526       1
> >      2          2    -23.8     -49.6   350       1
> >      3          3    -23.9     -49.7   526       2
> >      4          4    -23.7     -49.8   469       3
> >      5          5    -23.7     -49.6   534       4
> >      6          6    -23.7     -49.9   346       5
> >      >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>

	[[alternative HTML version deleted]]


From he||yj @end|ng |rom uc@d@edu  Mon Dec 14 23:24:38 2020
From: he||yj @end|ng |rom uc@d@edu (John Helly)
Date: Mon, 14 Dec 2020 12:24:38 -1000
Subject: [R] Weird change in behavior of summary() function
Message-ID: <89554752-dffd-6387-0de0-08e846ae5844@ucsd.edu>

Aloha.

I have been using the summary function (i.e., summary()) for years and, 
in the last few weeks, suddenly find it behaving in an obviously 
erroneous way.? I expect the DAUCO summary to be summary of the 
character variable but it has these weird NULL:00125 values listed for 
whatever the number of rows is.

It's not limited to this input data so I don't believe that it is 
data-dependent at this point.

This just started happening a number of weeks ago.? I've done some 
updates of the OS and apps since then and re-installed R from the Mac 
*.dmg distro.

I have provided details below and my main questions are 1) has anyone 
else seen this (I can't find any reports of it) and 2) how might I debug 
this?

Thank you.

================ Input data sample (first few records from a flat ASCII 
csv file) ================

DAUCO,Longitude,Latitude,Precipitation,Year,Month
00125,-121.416666667,41.9583333334,63.1469993591,1895,1
00125,-121.375,41.9583333334,63.6969985962,1895,1
00125,-121.333333333,41.9583333334,65.7460021973,1895,1
00125,-121.291666667,41.9583333334,69.4150009155,1895,1
00125,-121.25,41.9583333334,74.0780029297,1895,1

================ R commands and output 
=============================================
PRISM??????? = read.table(PRISM_INPUT,header=TRUE, sep=',',
colClasses=c('character','numeric','numeric','numeric','numeric','numeric'))

 > summary(PRISM)
 ? DAUCO???????? Longitude???????? Latitude Precipitation???????? 
Year????????? Month
 ?NULL:00125?? Min.?? :-121.4?? Min.?? :41.54?? Min.?? :? 0.00 Min.?? 
:1895?? Min.?? : 1.000
 ?NULL:00125?? 1st Qu.:-121.2?? 1st Qu.:41.71?? 1st Qu.: 10.65 1st 
Qu.:1926?? 1st Qu.: 3.000
 ?NULL:00125?? Median :-121.0?? Median :41.79?? Median : 24.41 Median 
:1957?? Median : 6.000
 ?NULL:00125?? Mean?? :-121.0?? Mean?? :41.79?? Mean?? : 31.09 Mean?? 
:1957?? Mean?? : 6.488
 ?NULL:00125?? 3rd Qu.:-120.9?? 3rd Qu.:41.88?? 3rd Qu.: 43.73 3rd 
Qu.:1989?? 3rd Qu.: 9.000
 ?NULL:00125?? Max.?? :-120.6?? Max.?? :41.96?? Max.?? :265.08 Max.?? 
:2020?? Max.?? :12.000
 ?NULL:00125
 ?NULL:00125

 > dput(head(PRISM))
structure(list(DAUCO = c("00125", "00125", "00125", "00125",
"00125", "00125"), Longitude = c(-121.416666667, -121.375, -121.333333333,
-121.291666667, -121.25, -121.208333333), Latitude = c(41.9583333334,
41.9583333334, 41.9583333334, 41.9583333334, 41.9583333334, 41.9583333334
), Precipitation = c(63.1469993591, 63.6969985962, 65.7460021973,
69.4150009155, 74.0780029297, 80.4290008545), Year = c(1895,
1895, 1895, 1895, 1895, 1895), Month = c(1, 1, 1, 1, 1, 1)), row.names = 
c(NA,
6L), class = "data.frame")
 >
 > sessionInfo()
R version 4.0.3 (2020-10-10)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Catalina 10.15.7

Matrix products: default
BLAS: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets? methods base

other attached packages:
[1] reshape_0.8.8 plyr_1.8.6??? ggplot2_3.3.2

loaded via a namespace (and not attached):
 ?[1] Rcpp_1.0.4.6????????? pillar_1.4.4 DEoptimR_1.0-8??????? 
compiler_4.0.3??????? RColorBrewer_1.1-2
 ?[6] iterators_1.0.12????? digest_0.6.25 lifecycle_0.2.0?????? 
tibble_3.0.1????????? gtable_0.3.0
[11] nlme_3.1-149????????? lattice_0.20-41 pkgconfig_2.0.3?????? 
rlang_0.4.6?????????? foreach_1.5.0
[16] Matrix_1.2-18???????? parallel_4.0.3 ergm_3.10.4?????????? 
coda_0.19-3?????????? withr_2.2.0
[21] dplyr_1.0.0?????????? generics_0.0.2 vctrs_0.3.1?????????? 
networkDynamic_0.10.1 trust_0.1-8
[26] grid_4.0.3??????????? tidyselect_1.1.0 deSolve_1.28????????? 
robustbase_0.93-6???? glue_1.4.1
[31] R6_2.4.1????????????? farver_2.0.3 purrr_0.3.4?????????? 
magrittr_1.5????????? codetools_0.2-16
[36] scales_1.1.1????????? ellipsis_0.3.1 MASS_7.3-53?????????? 
lpSolve_5.6.15??????? colorspace_1.4-1
[41] ape_5.4?????????????? labeling_0.3 network_1.16.0??????? 
lazyeval_0.2.2??????? doParallel_1.0.15
[46] EpiModel_1.8.0??????? munsell_0.5.0 tergm_3.6.1?????????? 
statnet.common_4.3.0? crayon_1.3.4




-- 
John Helly, University of California, San Diego / San Diego Supercomputer Center / Scripps Institution of Oceanography / 760 840 8660 mobile / http://www.sdsc.edu/~hellyj
ORCID ID: orcid.org/0000-0002-3779-0603


From jov@n|@ouz@5 @end|ng |rom gm@||@com  Mon Dec 14 23:37:56 2020
From: jov@n|@ouz@5 @end|ng |rom gm@||@com (Jovani T. de Souza)
Date: Mon, 14 Dec 2020 19:37:56 -0300
Subject: [R] Error pvclust package: Error in hclust(distance,
 method = method.hclust)
Message-ID: <CADs2LWS4Vjo4B+M2=PT2KnwZZH9Ba9d6GwOr6h98jC5eK3mZNA@mail.gmail.com>

This question was also made in
https://stackoverflow.com/questions/65290436/error-pvclust-package-error-in-hclustdistance-method-method-hclust-must

Question:

Could you help me resolve the following error:

    Error in hclust(distance, method = method.hclust) :
      must have n >= 2 objects to cluster

I'm trying to use the `pvclust` package, but I'm not able to generate the
dendogram. If I use all data from the df database, I can generate it, but
as I am restricting only to the coordinates (Latitude and Longitude), it is
not working, it gives the error that I mentioned. Below, I entered an
executable code.

Thank you so much!


    ###USING PVCLUST

    library(rdist)
    library(pvclust)
    library(geosphere)

    df <- structure(
      list(Industries = c(1,2,3,4,5,6,7), Latitude = c(-24.779225,
-24.789635, -24.763461, -24.794394, -24.747102,-24.781307,-24.761081),
           Longitude = c(-49.934816, -49.922324, -49.911616, -49.906262,
-49.890796,-49.8875254,-49.8875254),
           Waste = c(526, 350, 526, 469, 285, 433, 456)),class =
"data.frame", row.names = c(NA, -7L))

    mat <- as.data.frame.matrix(df)
    mat <- t(mat)
    fit <- pvclust(mat, method.hclust="average", method.dist="euclidean")
    fit
    plot(fit)
    pvrect(fit)


# RESTRICTING ONLY TO COORDINATES
    coordinates<-subset(df,select=c("Latitude","Longitude"))
    mat <- as.data.frame.matrix(coordinates)
    mat <- t(mat)
    fit <- pvclust(mat, method.hclust="average", method.dist="euclidean")
    > fit <- pvclust(mat, method.hclust="average", method.dist="euclidean")
    Bootstrap (r = 0.5)... Error in hclust(distance, method =
method.hclust) :
      must have n >= 2 objects to cluster*****




[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
Remetente
notificado por
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
14/12/20
19:37:37

	[[alternative HTML version deleted]]


From he||yj @end|ng |rom uc@d@edu  Mon Dec 14 23:41:37 2020
From: he||yj @end|ng |rom uc@d@edu (John Helly)
Date: Mon, 14 Dec 2020 12:41:37 -1000
Subject: [R] Weird change in behavior of summary() function
In-Reply-To: <89554752-dffd-6387-0de0-08e846ae5844@ucsd.edu>
References: <89554752-dffd-6387-0de0-08e846ae5844@ucsd.edu>
Message-ID: <71780b48-085a-593d-ebb4-b8515de876c1@ucsd.edu>

Follow-up:

I find that the problem does not occur on a Linux system, so it is 
either Mac-specific or some function of the libraries loaded on the 
problem machine.

J.

On 12/14/20 12:24, John Helly wrote:
> Aloha.
>
> I have been using the summary function (i.e., summary()) for years 
> and, in the last few weeks, suddenly find it behaving in an obviously 
> erroneous way.? I expect the DAUCO summary to be summary of the 
> character variable but it has these weird NULL:00125 values listed for 
> whatever the number of rows is.
>
> It's not limited to this input data so I don't believe that it is 
> data-dependent at this point.
>
> This just started happening a number of weeks ago.? I've done some 
> updates of the OS and apps since then and re-installed R from the Mac 
> *.dmg distro.
>
> I have provided details below and my main questions are 1) has anyone 
> else seen this (I can't find any reports of it) and 2) how might I 
> debug this?
>
> Thank you.
>
> ================ Input data sample (first few records from a flat 
> ASCII csv file) ================
>
> DAUCO,Longitude,Latitude,Precipitation,Year,Month
> 00125,-121.416666667,41.9583333334,63.1469993591,1895,1
> 00125,-121.375,41.9583333334,63.6969985962,1895,1
> 00125,-121.333333333,41.9583333334,65.7460021973,1895,1
> 00125,-121.291666667,41.9583333334,69.4150009155,1895,1
> 00125,-121.25,41.9583333334,74.0780029297,1895,1
>
> ================ R commands and output 
> =============================================
> PRISM??????? = read.table(PRISM_INPUT,header=TRUE, sep=',',
> colClasses=c('character','numeric','numeric','numeric','numeric','numeric')) 
>
>
> > summary(PRISM)
> ? DAUCO???????? Longitude???????? Latitude Precipitation Year????????? 
> Month
> ?NULL:00125?? Min.?? :-121.4?? Min.?? :41.54?? Min.?? :? 0.00 Min.?? 
> :1895?? Min.?? : 1.000
> ?NULL:00125?? 1st Qu.:-121.2?? 1st Qu.:41.71?? 1st Qu.: 10.65 1st 
> Qu.:1926?? 1st Qu.: 3.000
> ?NULL:00125?? Median :-121.0?? Median :41.79?? Median : 24.41 Median 
> :1957?? Median : 6.000
> ?NULL:00125?? Mean?? :-121.0?? Mean?? :41.79?? Mean?? : 31.09 Mean?? 
> :1957?? Mean?? : 6.488
> ?NULL:00125?? 3rd Qu.:-120.9?? 3rd Qu.:41.88?? 3rd Qu.: 43.73 3rd 
> Qu.:1989?? 3rd Qu.: 9.000
> ?NULL:00125?? Max.?? :-120.6?? Max.?? :41.96?? Max.?? :265.08 Max.?? 
> :2020?? Max.?? :12.000
> ?NULL:00125
> ?NULL:00125
>
> > dput(head(PRISM))
> structure(list(DAUCO = c("00125", "00125", "00125", "00125",
> "00125", "00125"), Longitude = c(-121.416666667, -121.375, 
> -121.333333333,
> -121.291666667, -121.25, -121.208333333), Latitude = c(41.9583333334,
> 41.9583333334, 41.9583333334, 41.9583333334, 41.9583333334, 41.9583333334
> ), Precipitation = c(63.1469993591, 63.6969985962, 65.7460021973,
> 69.4150009155, 74.0780029297, 80.4290008545), Year = c(1895,
> 1895, 1895, 1895, 1895, 1895), Month = c(1, 1, 1, 1, 1, 1)), row.names 
> = c(NA,
> 6L), class = "data.frame")
> >
> > sessionInfo()
> R version 4.0.3 (2020-10-10)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Catalina 10.15.7
>
> Matrix products: default
> BLAS: 
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
> LAPACK: 
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods base
>
> other attached packages:
> [1] reshape_0.8.8 plyr_1.8.6??? ggplot2_3.3.2
>
> loaded via a namespace (and not attached):
> ?[1] Rcpp_1.0.4.6????????? pillar_1.4.4 DEoptimR_1.0-8 
> compiler_4.0.3??????? RColorBrewer_1.1-2
> ?[6] iterators_1.0.12????? digest_0.6.25 lifecycle_0.2.0 
> tibble_3.0.1????????? gtable_0.3.0
> [11] nlme_3.1-149????????? lattice_0.20-41 pkgconfig_2.0.3 
> rlang_0.4.6?????????? foreach_1.5.0
> [16] Matrix_1.2-18???????? parallel_4.0.3 ergm_3.10.4 
> coda_0.19-3?????????? withr_2.2.0
> [21] dplyr_1.0.0?????????? generics_0.0.2 vctrs_0.3.1 
> networkDynamic_0.10.1 trust_0.1-8
> [26] grid_4.0.3??????????? tidyselect_1.1.0 deSolve_1.28 
> robustbase_0.93-6???? glue_1.4.1
> [31] R6_2.4.1????????????? farver_2.0.3 purrr_0.3.4 
> magrittr_1.5????????? codetools_0.2-16
> [36] scales_1.1.1????????? ellipsis_0.3.1 MASS_7.3-53 
> lpSolve_5.6.15??????? colorspace_1.4-1
> [41] ape_5.4?????????????? labeling_0.3 network_1.16.0 
> lazyeval_0.2.2??????? doParallel_1.0.15
> [46] EpiModel_1.8.0??????? munsell_0.5.0 tergm_3.6.1 
> statnet.common_4.3.0? crayon_1.3.4
>
>
>
>

-- 
John Helly, University of California, San Diego / San Diego Supercomputer Center / Scripps Institution of Oceanography / 760 840 8660 mobile / http://www.sdsc.edu/~hellyj
ORCID ID: orcid.org/0000-0002-3779-0603


From he||yj @end|ng |rom uc@d@edu  Mon Dec 14 23:46:26 2020
From: he||yj @end|ng |rom uc@d@edu (John Helly)
Date: Mon, 14 Dec 2020 12:46:26 -1000
Subject: [R] Weird change in behavior of summary() function
In-Reply-To: <71780b48-085a-593d-ebb4-b8515de876c1@ucsd.edu>
References: <89554752-dffd-6387-0de0-08e846ae5844@ucsd.edu>
 <71780b48-085a-593d-ebb4-b8515de876c1@ucsd.edu>
Message-ID: <1b3f964f-b6db-4a83-3610-dbedb50bf264@ucsd.edu>

Follow-up:

I have confirmed that it is something in my local R library such that 
when I remove /Users/hellyj/Library/R/4.0 the behavior of summary() 
returns to what I expect.

J.

 > summary(PRISM)
 ??? DAUCO???????????? Longitude???????? Latitude Precipitation???????? 
Year????????? Month
 ?Length:538790????? Min.?? :-121.4?? Min.?? :41.54?? Min.?? : 0.00?? 
Min.?? :1895?? Min.?? : 1.000
 ?Class :character?? 1st Qu.:-121.2?? 1st Qu.:41.71?? 1st Qu.: 10.65?? 
1st Qu.:1926?? 1st Qu.: 3.000
 ?Mode? :character?? Median :-121.0?? Median :41.79?? Median : 24.41?? 
Median :1957?? Median : 6.000
 ??????????????????? Mean?? :-121.0?? Mean?? :41.79?? Mean?? : 31.09?? 
Mean?? :1957?? Mean?? : 6.488
 ??????????????????? 3rd Qu.:-120.9?? 3rd Qu.:41.88?? 3rd Qu.: 43.73?? 
3rd Qu.:1989?? 3rd Qu.: 9.000
 ??????????????????? Max.?? :-120.6?? Max.?? :41.96?? Max. :265.08?? 
Max.?? :2020?? Max.?? :12.000



On 12/14/20 12:41, John Helly wrote:
> Follow-up:
>
> I find that the problem does not occur on a Linux system, so it is 
> either Mac-specific or some function of the libraries loaded on the 
> problem machine.
>
> J.
>
> On 12/14/20 12:24, John Helly wrote:
>> Aloha.
>>
>> I have been using the summary function (i.e., summary()) for years 
>> and, in the last few weeks, suddenly find it behaving in an obviously 
>> erroneous way.? I expect the DAUCO summary to be summary of the 
>> character variable but it has these weird NULL:00125 values listed 
>> for whatever the number of rows is.
>>
>> It's not limited to this input data so I don't believe that it is 
>> data-dependent at this point.
>>
>> This just started happening a number of weeks ago.? I've done some 
>> updates of the OS and apps since then and re-installed R from the Mac 
>> *.dmg distro.
>>
>> I have provided details below and my main questions are 1) has anyone 
>> else seen this (I can't find any reports of it) and 2) how might I 
>> debug this?
>>
>> Thank you.
>>
>> ================ Input data sample (first few records from a flat 
>> ASCII csv file) ================
>>
>> DAUCO,Longitude,Latitude,Precipitation,Year,Month
>> 00125,-121.416666667,41.9583333334,63.1469993591,1895,1
>> 00125,-121.375,41.9583333334,63.6969985962,1895,1
>> 00125,-121.333333333,41.9583333334,65.7460021973,1895,1
>> 00125,-121.291666667,41.9583333334,69.4150009155,1895,1
>> 00125,-121.25,41.9583333334,74.0780029297,1895,1
>>
>> ================ R commands and output 
>> =============================================
>> PRISM??????? = read.table(PRISM_INPUT,header=TRUE, sep=',',
>> colClasses=c('character','numeric','numeric','numeric','numeric','numeric')) 
>>
>>
>> > summary(PRISM)
>> ? DAUCO???????? Longitude???????? Latitude Precipitation 
>> Year????????? Month
>> ?NULL:00125?? Min.?? :-121.4?? Min.?? :41.54?? Min.?? :? 0.00 Min.?? 
>> :1895?? Min.?? : 1.000
>> ?NULL:00125?? 1st Qu.:-121.2?? 1st Qu.:41.71?? 1st Qu.: 10.65 1st 
>> Qu.:1926?? 1st Qu.: 3.000
>> ?NULL:00125?? Median :-121.0?? Median :41.79?? Median : 24.41 Median 
>> :1957?? Median : 6.000
>> ?NULL:00125?? Mean?? :-121.0?? Mean?? :41.79?? Mean?? : 31.09 Mean?? 
>> :1957?? Mean?? : 6.488
>> ?NULL:00125?? 3rd Qu.:-120.9?? 3rd Qu.:41.88?? 3rd Qu.: 43.73 3rd 
>> Qu.:1989?? 3rd Qu.: 9.000
>> ?NULL:00125?? Max.?? :-120.6?? Max.?? :41.96?? Max.?? :265.08 Max.?? 
>> :2020?? Max.?? :12.000
>> ?NULL:00125
>> ?NULL:00125
>>
>> > dput(head(PRISM))
>> structure(list(DAUCO = c("00125", "00125", "00125", "00125",
>> "00125", "00125"), Longitude = c(-121.416666667, -121.375, 
>> -121.333333333,
>> -121.291666667, -121.25, -121.208333333), Latitude = c(41.9583333334,
>> 41.9583333334, 41.9583333334, 41.9583333334, 41.9583333334, 
>> 41.9583333334
>> ), Precipitation = c(63.1469993591, 63.6969985962, 65.7460021973,
>> 69.4150009155, 74.0780029297, 80.4290008545), Year = c(1895,
>> 1895, 1895, 1895, 1895, 1895), Month = c(1, 1, 1, 1, 1, 1)), 
>> row.names = c(NA,
>> 6L), class = "data.frame")
>> >
>> > sessionInfo()
>> R version 4.0.3 (2020-10-10)
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>> Running under: macOS Catalina 10.15.7
>>
>> Matrix products: default
>> BLAS: 
>> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
>> LAPACK: 
>> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats???? graphics? grDevices utils???? datasets? methods base
>>
>> other attached packages:
>> [1] reshape_0.8.8 plyr_1.8.6??? ggplot2_3.3.2
>>
>> loaded via a namespace (and not attached):
>> ?[1] Rcpp_1.0.4.6????????? pillar_1.4.4 DEoptimR_1.0-8 
>> compiler_4.0.3??????? RColorBrewer_1.1-2
>> ?[6] iterators_1.0.12????? digest_0.6.25 lifecycle_0.2.0 
>> tibble_3.0.1????????? gtable_0.3.0
>> [11] nlme_3.1-149????????? lattice_0.20-41 pkgconfig_2.0.3 
>> rlang_0.4.6?????????? foreach_1.5.0
>> [16] Matrix_1.2-18???????? parallel_4.0.3 ergm_3.10.4 
>> coda_0.19-3?????????? withr_2.2.0
>> [21] dplyr_1.0.0?????????? generics_0.0.2 vctrs_0.3.1 
>> networkDynamic_0.10.1 trust_0.1-8
>> [26] grid_4.0.3??????????? tidyselect_1.1.0 deSolve_1.28 
>> robustbase_0.93-6???? glue_1.4.1
>> [31] R6_2.4.1????????????? farver_2.0.3 purrr_0.3.4 
>> magrittr_1.5????????? codetools_0.2-16
>> [36] scales_1.1.1????????? ellipsis_0.3.1 MASS_7.3-53 
>> lpSolve_5.6.15??????? colorspace_1.4-1
>> [41] ape_5.4?????????????? labeling_0.3 network_1.16.0 
>> lazyeval_0.2.2??????? doParallel_1.0.15
>> [46] EpiModel_1.8.0??????? munsell_0.5.0 tergm_3.6.1 
>> statnet.common_4.3.0? crayon_1.3.4
>>
>>
>>
>>
>

-- 
John Helly, University of California, San Diego / San Diego Supercomputer Center / Scripps Institution of Oceanography / 760 840 8660 mobile / http://www.sdsc.edu/~hellyj
ORCID ID: orcid.org/0000-0002-3779-0603


From peter@|@ng|e|der @end|ng |rom gm@||@com  Tue Dec 15 00:22:40 2020
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Mon, 14 Dec 2020 15:22:40 -0800
Subject: [R] Error pvclust package: Error in hclust(distance,
 method = method.hclust)
In-Reply-To: <CADs2LWS4Vjo4B+M2=PT2KnwZZH9Ba9d6GwOr6h98jC5eK3mZNA@mail.gmail.com>
References: <CADs2LWS4Vjo4B+M2=PT2KnwZZH9Ba9d6GwOr6h98jC5eK3mZNA@mail.gmail.com>
Message-ID: <CA+hbrhVhDTh4VW7vsY+bOMqfBY1VbwB-m-AtHesY00XmnmDkwQ@mail.gmail.com>

I don't use pvclust but from a cursory reading and from the error
indicating bootstrap I am guessing that pvclust carries out some sort of a
sampling of the features on which you cluster. Since you only retain two
features (coordinates), the sampling necessarily results in just one
feature being retained, leading to an error. Just my guess though;
understanding what pvclust does would help you diagnose the problem.

Peter

On Mon, Dec 14, 2020 at 2:48 PM Jovani T. de Souza <jovanisouza5 at gmail.com>
wrote:

> This question was also made in
>
> https://stackoverflow.com/questions/65290436/error-pvclust-package-error-in-hclustdistance-method-method-hclust-must
>
> Question:
>
> Could you help me resolve the following error:
>
>     Error in hclust(distance, method = method.hclust) :
>       must have n >= 2 objects to cluster
>
> I'm trying to use the `pvclust` package, but I'm not able to generate the
> dendogram. If I use all data from the df database, I can generate it, but
> as I am restricting only to the coordinates (Latitude and Longitude), it is
> not working, it gives the error that I mentioned. Below, I entered an
> executable code.
>
> Thank you so much!
>
>
>     ###USING PVCLUST
>
>     library(rdist)
>     library(pvclust)
>     library(geosphere)
>
>     df <- structure(
>       list(Industries = c(1,2,3,4,5,6,7), Latitude = c(-24.779225,
> -24.789635, -24.763461, -24.794394, -24.747102,-24.781307,-24.761081),
>            Longitude = c(-49.934816, -49.922324, -49.911616, -49.906262,
> -49.890796,-49.8875254,-49.8875254),
>            Waste = c(526, 350, 526, 469, 285, 433, 456)),class =
> "data.frame", row.names = c(NA, -7L))
>
>     mat <- as.data.frame.matrix(df)
>     mat <- t(mat)
>     fit <- pvclust(mat, method.hclust="average", method.dist="euclidean")
>     fit
>     plot(fit)
>     pvrect(fit)
>
>
> # RESTRICTING ONLY TO COORDINATES
>     coordinates<-subset(df,select=c("Latitude","Longitude"))
>     mat <- as.data.frame.matrix(coordinates)
>     mat <- t(mat)
>     fit <- pvclust(mat, method.hclust="average", method.dist="euclidean")
>     > fit <- pvclust(mat, method.hclust="average", method.dist="euclidean")
>     Bootstrap (r = 0.5)... Error in hclust(distance, method =
> method.hclust) :
>       must have n >= 2 objects to cluster*****
>
>
>
>
> [image: Mailtrack]
> <
> https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&
> >
> Remetente
> notificado por
> Mailtrack
> <
> https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&
> >
> 14/12/20
> 19:37:37
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Dec 15 01:45:05 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 14 Dec 2020 16:45:05 -0800
Subject: [R] Hello! Problem - function ''matord'' in R
In-Reply-To: <MOYCPJn--B-2@tuta.io>
References: <MOYCPJn--B-2@tuta.io>
Message-ID: <A46D6F4A-9288-4E51-9952-D149BB8C248A@dcn.davis.ca.us>

... and if so, then you are on the wrong mailing list...

On December 14, 2020 1:43:49 PM PST, "T. A. Milne via R-help" <r-help at r-project.org> wrote:
>Might the desired function "matord" be part of a Bioconductor package?
>This link
>https://rdrr.io/bioc/clusterSeq/src/R/associatePosteriors.R
>
>suggests that could be the case. 
>
>- T. Arthur Milne
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @z@mj@@|@r| @end|ng |rom y@hoo@com  Mon Dec 14 21:16:24 2020
From: @z@mj@@|@r| @end|ng |rom y@hoo@com (azam jaafari)
Date: Mon, 14 Dec 2020 20:16:24 +0000 (UTC)
Subject: [R] space between bars of a group in ggplot2
References: <1986923615.446973.1607976984551.ref@mail.yahoo.com>
Message-ID: <1986923615.446973.1607976984551@mail.yahoo.com>

Hello Dear
I want to make a barplot for groups with three repetitions and same values. dataset is like this: 

groups: ?? ?? ? ? ? ? ?? a???? ? ?? ? ? ? ? ? ? ? ? ? ? b?? ? ? ? ? ? ? ? ? ? ?? c
value:? ? ? ? ?? 1.2, 1.2, 1.2 ??????????? 2.5, 2.5,2.5?????????? 
Condition:???? sat, sat, sat,???????? unsat,unsat,unsat,???? 

that bars fill based on "condition"
I used the below code: 

data%>%ggplot(aes(x=factor(groups), y=value, fill=factor(condition), group=condition)) +
? geom_bar(olour="black",stat="identity", position = position_dodge(width = 0.8), width=0.7)+
scale_y_continuous(breaks=seq(0, 6.5, 1),limits=c(0, 6.5),expand=c(0,0))+ 
scale_x_discrete(expand=c(0.000001,0))+
?theme( axis.line = element_line(colour = "darkblue", 
????????????????????? size = 1, linetype = "solid"))+
labs(x = "group Code", y = "Z") +
??? theme(panel.background = element_rect(fill = 'white'))+labs(fill = "Condition")+
?theme(axis.text.x = element_text(face='bold',size=8, color='black', angle = 90, vjust = 0.5)) +
?theme(axis.text.y = element_text(face='bold', size=8, color='black'))


but it makes the connected bars (without any space between values) for each group, while I want to add a space between bars for? each value of each group. 

Thank you for helping
BestAzam

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Dec 15 13:41:08 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 15 Dec 2020 12:41:08 +0000
Subject: [R] space between bars of a group in ggplot2
In-Reply-To: <1986923615.446973.1607976984551@mail.yahoo.com>
References: <1986923615.446973.1607976984551.ref@mail.yahoo.com>
 <1986923615.446973.1607976984551@mail.yahoo.com>
Message-ID: <1edc3336cf524959827e713766f1eca0@SRVEXCHCM1302.precheza.cz>

Hi

Your code is not reproducible, however you could follow this advice.

https://stackoverflow.com/questions/6085238/adding-space-between-bars-in-ggplot2

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of azam jaafari via
> R-help
> Sent: Monday, December 14, 2020 9:16 PM
> To: r-help at r-project.org
> Subject: [R] space between bars of a group in ggplot2
>
> Hello Dear
> I want to make a barplot for groups with three repetitions and same values.
> dataset is like this:
>
> groups:                  a                              b 
> c
> value:           1.2, 1.2, 1.2             2.5, 2.5,2.5
> Condition:     sat, sat, sat,         unsat,unsat,unsat,
>
> that bars fill based on "condition"
> I used the below code:
>
> data%>%ggplot(aes(x=factor(groups), y=value, fill=factor(condition),
> group=condition)) +
>   geom_bar(olour="black",stat="identity", position = position_dodge(width =
> 0.8), width=0.7)+ scale_y_continuous(breaks=seq(0, 6.5, 1),limits=c(0,
> 6.5),expand=c(0,0))+ scale_x_discrete(expand=c(0.000001,0))+
>  theme( axis.line = element_line(colour = "darkblue",
>                       size = 1, linetype = "solid"))+ labs(x = "group Code", 
> y = "Z") +
>     theme(panel.background = element_rect(fill = 'white'))+labs(fill =
> "Condition")+
>  theme(axis.text.x = element_text(face='bold',size=8, color='black', angle =
> 90, vjust = 0.5)) +
>  theme(axis.text.y = element_text(face='bold', size=8, color='black'))
>
>
> but it makes the connected bars (without any space between values) for each
> group, while I want to add a space between bars for  each value of each
> group.
>
> Thank you for helping
> BestAzam
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec 15 16:43:56 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 15 Dec 2020 07:43:56 -0800
Subject: [R] multiple t-test with different species and treatments
In-Reply-To: <CAJ9SxKYbuMckKU5ahFALUXrYxGA0yLHXWZnyNAp4xCcf91cn+w@mail.gmail.com>
References: <CAJ9SxKYWRgAJVpGZFb-v4pyMYGVsr2Hb5=nHn6t4zVc+SDQqxA@mail.gmail.com>
 <CAGxFJbQoC4ZWU+QvCdRgy9EVH14pZqs4P5mqcbHkNcPdn6uxBA@mail.gmail.com>
 <CAJ9SxKYbuMckKU5ahFALUXrYxGA0yLHXWZnyNAp4xCcf91cn+w@mail.gmail.com>
Message-ID: <CAGxFJbSrujXhj=3WCrqsHEm=O1mq8aK21cb=BYJ470z8=VQ3og@mail.gmail.com>

Unless there is good reason not to, always cc r-help, which I have done
here.

Bert Gunter



On Tue, Dec 15, 2020 at 1:16 AM Lingling Wen <wenlingling912 at gmail.com>
wrote:

> Dear Bert Gunter,
> Good day,
> Thank you for your comments about the posting policy. I am sorry for
> bothering you with the text against the posting policy in this list. I will
> read the policy carefully and improve it in my future posting.
> Regarding the question I asked, actually, it is for my experiment data
> analysis but not homework. I've tried code as followed:
> library(dplyr)
> library(tidyverse)
> library(rstatix)
> library(ggpubr)
> test <- read.csv(file.choose(), header=TRUE)
> print(test)
>
> mydata <- test %>%
>   pivot_longer(
>     cols = c(3:8),
>     names_to = "Metabolites",
>     values_to = "Relative content",
>     values_drop_na = FALSE)
>
> mydata
> stat <- group_by(mydata, Metabolites,Treatment) %>%
>   t_test('Relative content' ~ Treatment) %>%
>   adjust_pvalue(method = "BH") %>%
>   add_significance()
>
> When I run the code, it always shows error like this: Error in
> terms.formula(formula) : invalid term in model formula.
> Because I have a lot of metabolic data to deal with, I think R will help
> to save a lot of time so I am learning to use it. But I could not figure
> out what's the problem when it gives error feedback.
>
> It would be very appreciated if I could get help from the list.
> Thank you!
>
> Lingling
>
>
>
>
> On Mon, 14 Dec 2020 at 01:19, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> 1. Please read and follow the posting guide linked below.
>> 2. No html -- this is a plain text list.
>> 3. Use ?dput to provide us your data so that we don't have to convert it
>> for you.
>> 4. We expect you to first make an effort to do your own coding. See
>> ?t.test, which you could also
>> have found yourself by a web search (rseek.org is a reasonable place to
>> search from for R-related stuff,
>> though I have usually found that a plain google search does the job).
>> 5. Is this homework? -- this list has a no homework policy (see the
>> posting guide).
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Sun, Dec 13, 2020 at 2:33 PM Lingling Wen <wenlingling912 at gmail.com>
>> wrote:
>>
>>> Dear R users,
>>> I would like to ask for help with the code of multiple t-test. I have a
>>> dataset as followed:
>>> Species Treatment var1 var2 var2 var4 var5 var6
>>> Blue D 0.022620093 0.125079631 0.04522571 0.010105835 0.013418019
>>> 1.455646741
>>> Blue D 0.02117295 0.073544277 0.0311234 0.008742305 0.03261776
>>> 0.982196898
>>> Blue D 0.021896521 0.112681274 0.05664344 0.013512548 0.032380618
>>> 1.777003683
>>> Green D 0.032749726 0.087705198 0.13699174 0.009902168 0.083534492
>>> 1.553758965
>>> Green D 0.036468693 0.115829755 0.10941521 0.012139481 0.206929915
>>> 2.610557732
>>> Green D 0.043594022 0.062832712 0.12232853 0.015045559 0.111687593
>>> 1.99552401
>>> Orange D 0.022617656 0.11465489 0.02882994 0.013304181 0.018175693
>>> 1.72075866
>>> Orange D 0.026211773 0.099294867 0.03387876 0.013408254 0.02971197
>>> 2.184955376
>>> Orange D 0.032205662 0.057267709 0.03883165 0.007744362 0.026553323
>>> 1.27255601
>>> White D 0.041135469 0.085531343 0.06921425 0.011496168 0.010196895
>>> 0.573205411
>>> White D 0.045142458 0.111429194 0.03546278 0.009196729 0.009968818
>>> 0.748529991
>>> White D 0.031471913 0.050175149 0.05233851 0.011447205 0.010424973
>>> 0.92385457
>>> Blue W 0.022222296 0.112334911 0.04080824 0.016064488 0.031047157
>>> 0.885523847
>>> Blue W 0.040238733 0.121941307 0.04239768 0.010310538 0.020106944
>>> 0.751643349
>>> Blue W 0.031508947 0.131547704 0.05212774 0.015720985 0.013932284
>>> 0.881234886
>>> Green W 0.021070032 0.121018603 0.38202466 0.022152283 0.038479532
>>> 0.662605036
>>> Green W 0.026562365 0.108269047 0.44028708 0.019344875 0.090798566
>>> 0.746330971
>>> Green W 0.02926478 0.084080729 0.32376224 0.012609717 0.097744041
>>> 0.969301308
>>> Orange W 0.02456562 0.134535891 0.09135624 0.007701481 0.017310058
>>> 0.966322354
>>> Orange W 0.032095541 0.149347595 0.06048885 0.010332579 0.017457175
>>> 0.561561725
>>> Orange W 0.039120696 0.141941743 0.02962146 0.005889924 0.017162941
>>> 0.502529091
>>> White W 0.033903057 0.061460583 0.0492955 0.012457767 0.029929334
>>> 0.70986421
>>> White W 0.033630233 0.115782233 0.02675399 0.021391535 0.023774961
>>> 1.176680075
>>> White W 0.030638581 0.065074112 0.03678494 0.014781912 0.03529703
>>> 0.805500558
>>> I wanted to perform a t-test between the treatment "D" and "W" of each
>>> species for all of the variables (var1, var2,...).  Could anyone suggest
>>> the packages or code for this analysis?
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Tue Dec 15 16:51:48 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Tue, 15 Dec 2020 10:51:48 -0500
Subject: [R] Meta: R-Help reply-to
Message-ID: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>

Greetings.

Something I've wondered for some time--is mailman configurable to have
a default reply-to be set to the list or to reply-all?

Many newcomers who reply to individual R-Help participants may not
notice that they are doing so, and it seems a source of vexation to
some of the more frequent helpers.

I wrote to r-help-owner with this query several months ago and never heard
back.

Pat

-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His

	[[alternative HTML version deleted]]


From rhe|p @end|ng |rom eoo@@dd@@n|  Tue Dec 15 17:33:20 2020
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Tue, 15 Dec 2020 17:33:20 +0100
Subject: [R] Help with connection issue for R (just joined,
 leading R for our agency)
In-Reply-To: <03bbb44f-a954-ce95-01c9-88202b54c873@dewey.myzen.co.uk>
References: <CANoEdVaWBLqWLb2pvmSkOBkEFb8sZh7gc04LbBwTPqqLwgyYeg@mail.gmail.com>
 <67cb1a2cef7a49319cde5dc1d75ad5f8@SRVEXCHCM1302.precheza.cz>
 <03bbb44f-a954-ce95-01c9-88202b54c873@dewey.myzen.co.uk>
Message-ID: <2dbb519a-6402-d7c7-3312-46663912203d@dds.nl>

Alejandra,

If it was initially working ok, I would first check with the IT 
department if there has been a change to the configuration of the 
firewall, virus scanners, file system etc. as these can affect the 
performance of R-studio. R-studio uses a client-server setup on your 
machine, so a firewall/malware scanner inspecting all communication 
between R-studio and the R session can have a large effect. If  you 
can't find the problem, you are probably better of asking at the 
R-studio fora. A similar question was asked a while back: 
https://community.rstudio.com/t/rstudio-suddenly-slow-processing/4959; 
perhaps some of the solutions proposed also work for you.

As an alternative to Emacs/R-studio you could also have a look at visual 
studio code. It has a R-plugin. If your organisation is microsoft 
oriented there might already be a chance that it is available. You need 
a relatively recent version though.

HTH,
Jan




On 14-12-2020 12:54, Michael Dewey wrote:
> Just to add to Petr's comment there are other basic editors with syntax 
> highlighting like Notepad++ which are also OK if you want a fairly 
> minimalist approach.
> 
> Michael
> 
> On 14/12/2020 08:16, PIKAL Petr wrote:
>> Hallo Alejandra
>>
>> Although RStudio and ESS could help with some automation (each with 
>> its own
>> way), using R alone is not a big problem, especially if you are not 
>> familiar
>> with Emacs basics and perceiving RStudio issues. I use R with simple
>> external editor - it could be notepad but I could recommend TINN-R
>>
>> https://sourceforge.net/projects/tinn-r/
>>
>> which has syntax highlighting and works smoothly if R is console is 
>> set to
>> multiple windows. It is also quite easy to manage.
>>
>> Good luck with R.
>>
>> Cheers
>> Petr
>>
>>> -----Original Message-----
>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Alejandra 
>>> Barrio
>>> Gorski
>>> Sent: Tuesday, December 8, 2020 7:48 PM
>>> To: R-help at r-project.org
>>> Subject: [R] Help with connection issue for R (just joined, leading R 
>>> for
>> our
>>> agency)
>>>
>>> Dear fellow R users,
>>>
>>> Greetings, I am new to this list. I joined because I am pioneering 
>>> the use
>> of R
>>> for the agency I work for. I essentially work alone and would like to
>> reach
>>> out for help on an issue I have been having. Here it is:
>>>
>>> ??? - From one day to the next, my RStudio does not execute commands 
>>> when
>>> I
>>> ??? press ctrl + enter. Nothing happens, and then after a few minutes 
>>> out
>> of
>>> ??? nowhere, it runs everything at once. This makes it very hard to 
>>> do my
>> work.
>>> ??? - I tried uninstalling and re-installing both R and Rstudio, but the
>>> ??? error comes up again. I tested commands on my R program alone, 
>>> and it
>>> works
>>> ??? fine there. It could be the way that Rstudio connects to R.
>>> ??? - I am on a Windows 10 computer. I work for a government agency so
>>> there
>>> ??? may be a few firewall/virus protection issues.
>>>
>>> I would love any pointers.
>>>
>>> Thank you,
>>> Alejandra
>>>
>>> -- 
>>>
>>> *Alejandra Barrio*
>>> Linkedin <https://www.linkedin.com/in/alejandra-barrio/> | Website
>>> <https://www.ocf.berkeley.edu/~alejandrabarrio/>
>>> MPP | M.A., International and Area Studies University of California,
>> Berkeley
>>>
>>> ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-
>>> guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>


From p@r@|e|jonhu|vud @end|ng |rom reg|onjh@@e  Tue Dec 15 17:39:32 2020
From: p@r@|e|jonhu|vud @end|ng |rom reg|onjh@@e (=?iso-8859-1?Q?P=E4r_Leijonhufvud?=)
Date: Tue, 15 Dec 2020 16:39:32 +0000
Subject: [R] Meta: R-Help reply-to
In-Reply-To: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>
References: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>
Message-ID: <HE1PR04MB3115B280496151C156BD57B882C60@HE1PR04MB3115.eurprd04.prod.outlook.com>

Unless I am getting senile that should be an option in Mailman...  https://docs.mailman3.org/projects/mailman/en/latest/src/mailman/handlers/docs/reply-to.html

/P?r

--
P?r Leijonhufvud               .                                    par.leijonhufvud at regionjh.se
Sjukhuskemist                                                        +46(0)63-153 376, +46-(0)70-242 7006
Laboratoriemedicin, ?stersunds sjukhus

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Patrick (Malone Quantitative)
Sent: Tuesday, December 15, 2020 4:52 PM
To: r-help <r-help at r-project.org>
Subject: [R] Meta: R-Help reply-to

Greetings.

Something I've wondered for some time--is mailman configurable to have a default reply-to be set to the list or to reply-all?

Many newcomers who reply to individual R-Help participants may not notice that they are doing so, and it seems a source of vexation to some of the more frequent helpers.

I wrote to r-help-owner with this query several months ago and never heard back.

Pat

--
Patrick S. Malone, Ph.D., Malone Quantitative NEW Service Models: https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fmalonequantitative.com%2F&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979024301%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=M4XyJrU7fidlWAwaa9NNBC6yUSTCl0VSF2icCKfhfLw%3D&amp;reserved=0

He/Him/His

[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=MV2Y2L86j6AczuXdc%2Fni2PzRl0ZvCcBsnrV1xkrL2b8%3D&amp;reserved=0
PLEASE do read the posting guide https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=wOeXpqKMfqfsSZjSyar%2Bqmhf7ZSFeiH3qwqQkIlfyhs%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

Region J?mtland H?rjedalen behandlar dina personuppgifter vid kommunikation via e-post. Hanteringen av personuppgifter f?ljer g?llande dataskyddslagstiftning. Du kan l?sa mer om hur vi behandlar dina uppgifter p? https://regionjh.se/gdpr


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Tue Dec 15 18:04:56 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Tue, 15 Dec 2020 12:04:56 -0500
Subject: [R] Meta: R-Help reply-to
In-Reply-To: <HE1PR04MB3115B280496151C156BD57B882C60@HE1PR04MB3115.eurprd04.prod.outlook.com>
References: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>
 <HE1PR04MB3115B280496151C156BD57B882C60@HE1PR04MB3115.eurprd04.prod.outlook.com>
Message-ID: <CAJc=yOExNcQDgx8z1P0wP2u+9U8P70-T9m8XEZKVa20ia4pF5Q@mail.gmail.com>

Ok. If this is a desirable change, of whom would we request it? I was
unable to find a name, and as I said, I got no response from the generic
address.

Pat

On Tue, Dec 15, 2020 at 11:43 AM P?r Leijonhufvud via R-help <
r-help at r-project.org> wrote:

> Unless I am getting senile that should be an option in Mailman...
> https://docs.mailman3.org/projects/mailman/en/latest/src/mailman/handlers/docs/reply-to.html
>
> /P?r
>
> --
> P?r Leijonhufvud               .
> par.leijonhufvud at regionjh.se
> Sjukhuskemist
> +46(0)63-153 376, +46-(0)70-242 7006
> Laboratoriemedicin, ?stersunds sjukhus
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Patrick (Malone
> Quantitative)
> Sent: Tuesday, December 15, 2020 4:52 PM
> To: r-help <r-help at r-project.org>
> Subject: [R] Meta: R-Help reply-to
>
> Greetings.
>
> Something I've wondered for some time--is mailman configurable to have a
> default reply-to be set to the list or to reply-all?
>
> Many newcomers who reply to individual R-Help participants may not notice
> that they are doing so, and it seems a source of vexation to some of the
> more frequent helpers.
>
> I wrote to r-help-owner with this query several months ago and never heard
> back.
>
> Pat
>
> --
> Patrick S. Malone, Ph.D., Malone Quantitative NEW Service Models:
> https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fmalonequantitative.com%2F&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979024301%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=M4XyJrU7fidlWAwaa9NNBC6yUSTCl0VSF2icCKfhfLw%3D&amp;reserved=0
>
> He/Him/His
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=MV2Y2L86j6AczuXdc%2Fni2PzRl0ZvCcBsnrV1xkrL2b8%3D&amp;reserved=0
> PLEASE do read the posting guide
> https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=wOeXpqKMfqfsSZjSyar%2Bqmhf7ZSFeiH3qwqQkIlfyhs%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> Region J?mtland H?rjedalen behandlar dina personuppgifter vid
> kommunikation via e-post. Hanteringen av personuppgifter f?ljer g?llande
> dataskyddslagstiftning. Du kan l?sa mer om hur vi behandlar dina uppgifter
> p? https://regionjh.se/gdpr
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Dec 15 18:09:57 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 15 Dec 2020 09:09:57 -0800
Subject: [R] multiple t-test with different species and treatments
In-Reply-To: <CAGxFJbSrujXhj=3WCrqsHEm=O1mq8aK21cb=BYJ470z8=VQ3og@mail.gmail.com>
References: <CAJ9SxKYWRgAJVpGZFb-v4pyMYGVsr2Hb5=nHn6t4zVc+SDQqxA@mail.gmail.com>
 <CAGxFJbQoC4ZWU+QvCdRgy9EVH14pZqs4P5mqcbHkNcPdn6uxBA@mail.gmail.com>
 <CAJ9SxKYbuMckKU5ahFALUXrYxGA0yLHXWZnyNAp4xCcf91cn+w@mail.gmail.com>
 <CAGxFJbSrujXhj=3WCrqsHEm=O1mq8aK21cb=BYJ470z8=VQ3og@mail.gmail.com>
Message-ID: <70B5D680-874D-48D4-AC18-1C44C457C421@dcn.davis.ca.us>

Dear Lingling Wen:

Bert has forwarded your message to the list because one person cannot usually answer every question... so many heads are better than one.

However, you seem to have neglected his other advice about providing a complete example including data. Further, you are using several specialized packages that may require more specific assistance than you may find on this list... as the Posting Guide warns you, such packages are technically out of scope here (because contributed packages may introduce hidden behavior that only people familiar with those specific packages can recognize). If someone unfamiliar with the package can run your example (not possible here because of lack of data) they might see something about the errors that can help anyway.

The one R-language issue I can see in your code is the use of single-quote marks (used for entering string literals) on what should probably be a variable rather than back-tick quotes (used to denote language symbols).

On December 15, 2020 7:43:56 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>Unless there is good reason not to, always cc r-help, which I have done
>here.
>
>Bert Gunter
>
>
>
>On Tue, Dec 15, 2020 at 1:16 AM Lingling Wen <wenlingling912 at gmail.com>
>wrote:
>
>> Dear Bert Gunter,
>> Good day,
>> Thank you for your comments about the posting policy. I am sorry for
>> bothering you with the text against the posting policy in this list.
>I will
>> read the policy carefully and improve it in my future posting.
>> Regarding the question I asked, actually, it is for my experiment
>data
>> analysis but not homework. I've tried code as followed:
>> library(dplyr)
>> library(tidyverse)
>> library(rstatix)
>> library(ggpubr)
>> test <- read.csv(file.choose(), header=TRUE)
>> print(test)
>>
>> mydata <- test %>%
>>   pivot_longer(
>>     cols = c(3:8),
>>     names_to = "Metabolites",
>>     values_to = "Relative content",
>>     values_drop_na = FALSE)
>>
>> mydata
>> stat <- group_by(mydata, Metabolites,Treatment) %>%
>>   t_test('Relative content' ~ Treatment) %>%
>>   adjust_pvalue(method = "BH") %>%
>>   add_significance()
>>
>> When I run the code, it always shows error like this: Error in
>> terms.formula(formula) : invalid term in model formula.
>> Because I have a lot of metabolic data to deal with, I think R will
>help
>> to save a lot of time so I am learning to use it. But I could not
>figure
>> out what's the problem when it gives error feedback.
>>
>> It would be very appreciated if I could get help from the list.
>> Thank you!
>>
>> Lingling
>>
>>
>>
>>
>> On Mon, 14 Dec 2020 at 01:19, Bert Gunter <bgunter.4567 at gmail.com>
>wrote:
>>
>>> 1. Please read and follow the posting guide linked below.
>>> 2. No html -- this is a plain text list.
>>> 3. Use ?dput to provide us your data so that we don't have to
>convert it
>>> for you.
>>> 4. We expect you to first make an effort to do your own coding. See
>>> ?t.test, which you could also
>>> have found yourself by a web search (rseek.org is a reasonable place
>to
>>> search from for R-related stuff,
>>> though I have usually found that a plain google search does the
>job).
>>> 5. Is this homework? -- this list has a no homework policy (see the
>>> posting guide).
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming
>along
>>> and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Sun, Dec 13, 2020 at 2:33 PM Lingling Wen
><wenlingling912 at gmail.com>
>>> wrote:
>>>
>>>> Dear R users,
>>>> I would like to ask for help with the code of multiple t-test. I
>have a
>>>> dataset as followed:
>>>> Species Treatment var1 var2 var2 var4 var5 var6
>>>> Blue D 0.022620093 0.125079631 0.04522571 0.010105835 0.013418019
>>>> 1.455646741
>>>> Blue D 0.02117295 0.073544277 0.0311234 0.008742305 0.03261776
>>>> 0.982196898
>>>> Blue D 0.021896521 0.112681274 0.05664344 0.013512548 0.032380618
>>>> 1.777003683
>>>> Green D 0.032749726 0.087705198 0.13699174 0.009902168 0.083534492
>>>> 1.553758965
>>>> Green D 0.036468693 0.115829755 0.10941521 0.012139481 0.206929915
>>>> 2.610557732
>>>> Green D 0.043594022 0.062832712 0.12232853 0.015045559 0.111687593
>>>> 1.99552401
>>>> Orange D 0.022617656 0.11465489 0.02882994 0.013304181 0.018175693
>>>> 1.72075866
>>>> Orange D 0.026211773 0.099294867 0.03387876 0.013408254 0.02971197
>>>> 2.184955376
>>>> Orange D 0.032205662 0.057267709 0.03883165 0.007744362 0.026553323
>>>> 1.27255601
>>>> White D 0.041135469 0.085531343 0.06921425 0.011496168 0.010196895
>>>> 0.573205411
>>>> White D 0.045142458 0.111429194 0.03546278 0.009196729 0.009968818
>>>> 0.748529991
>>>> White D 0.031471913 0.050175149 0.05233851 0.011447205 0.010424973
>>>> 0.92385457
>>>> Blue W 0.022222296 0.112334911 0.04080824 0.016064488 0.031047157
>>>> 0.885523847
>>>> Blue W 0.040238733 0.121941307 0.04239768 0.010310538 0.020106944
>>>> 0.751643349
>>>> Blue W 0.031508947 0.131547704 0.05212774 0.015720985 0.013932284
>>>> 0.881234886
>>>> Green W 0.021070032 0.121018603 0.38202466 0.022152283 0.038479532
>>>> 0.662605036
>>>> Green W 0.026562365 0.108269047 0.44028708 0.019344875 0.090798566
>>>> 0.746330971
>>>> Green W 0.02926478 0.084080729 0.32376224 0.012609717 0.097744041
>>>> 0.969301308
>>>> Orange W 0.02456562 0.134535891 0.09135624 0.007701481 0.017310058
>>>> 0.966322354
>>>> Orange W 0.032095541 0.149347595 0.06048885 0.010332579 0.017457175
>>>> 0.561561725
>>>> Orange W 0.039120696 0.141941743 0.02962146 0.005889924 0.017162941
>>>> 0.502529091
>>>> White W 0.033903057 0.061460583 0.0492955 0.012457767 0.029929334
>>>> 0.70986421
>>>> White W 0.033630233 0.115782233 0.02675399 0.021391535 0.023774961
>>>> 1.176680075
>>>> White W 0.030638581 0.065074112 0.03678494 0.014781912 0.03529703
>>>> 0.805500558
>>>> I wanted to perform a t-test between the treatment "D" and "W" of
>each
>>>> species for all of the variables (var1, var2,...).  Could anyone
>suggest
>>>> the packages or code for this analysis?
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From kev|n@thorpe @end|ng |rom utoronto@c@  Tue Dec 15 18:26:31 2020
From: kev|n@thorpe @end|ng |rom utoronto@c@ (Kevin Thorpe)
Date: Tue, 15 Dec 2020 17:26:31 +0000
Subject: [R] Meta: R-Help reply-to
In-Reply-To: <CAJc=yOExNcQDgx8z1P0wP2u+9U8P70-T9m8XEZKVa20ia4pF5Q@mail.gmail.com>
References: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>
 <HE1PR04MB3115B280496151C156BD57B882C60@HE1PR04MB3115.eurprd04.prod.outlook.com>
 <CAJc=yOExNcQDgx8z1P0wP2u+9U8P70-T9m8XEZKVa20ia4pF5Q@mail.gmail.com>
Message-ID: <A43DD430-9E16-4F27-A53C-77FEFA37CEFD@utoronto.ca>

You could send the request to r-help-owner at r-project.org. That goes to the moderators and administrator.

Kevin

-- 
Kevin E. Thorpe
Head of Biostatistics,  Applied Health Research Centre (AHRC)
Li Ka Shing Knowledge Institute of St. Michael's
Assistant Professor, Dalla Lana School of Public Health
University of Toronto
email: kevin.thorpe at utoronto.ca  Tel: 416.864.5776  Fax: 416.864.3016
 

?On 2020-12-15, 12:05 PM, "R-help on behalf of Patrick (Malone Quantitative)" <r-help-bounces at r-project.org on behalf of malone at malonequantitative.com> wrote:

    EXTERNAL EMAIL:

    Ok. If this is a desirable change, of whom would we request it? I was
    unable to find a name, and as I said, I got no response from the generic
    address.

    Pat

    On Tue, Dec 15, 2020 at 11:43 AM P?r Leijonhufvud via R-help <
    r-help at r-project.org> wrote:

    > Unless I am getting senile that should be an option in Mailman...
    > https://docs.mailman3.org/projects/mailman/en/latest/src/mailman/handlers/docs/reply-to.html
    >
    > /P?r
    >
    > --
    > P?r Leijonhufvud               .
    > par.leijonhufvud at regionjh.se
    > Sjukhuskemist
    > +46(0)63-153 376, +46-(0)70-242 7006
    > Laboratoriemedicin, ?stersunds sjukhus
    >
    > -----Original Message-----
    > From: R-help <r-help-bounces at r-project.org> On Behalf Of Patrick (Malone
    > Quantitative)
    > Sent: Tuesday, December 15, 2020 4:52 PM
    > To: r-help <r-help at r-project.org>
    > Subject: [R] Meta: R-Help reply-to
    >
    > Greetings.
    >
    > Something I've wondered for some time--is mailman configurable to have a
    > default reply-to be set to the list or to reply-all?
    >
    > Many newcomers who reply to individual R-Help participants may not notice
    > that they are doing so, and it seems a source of vexation to some of the
    > more frequent helpers.
    >
    > I wrote to r-help-owner with this query several months ago and never heard
    > back.
    >
    > Pat
    >
    > --
    > Patrick S. Malone, Ph.D., Malone Quantitative NEW Service Models:
    > https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fmalonequantitative.com%2F&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979024301%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=M4XyJrU7fidlWAwaa9NNBC6yUSTCl0VSF2icCKfhfLw%3D&amp;reserved=0
    >
    > He/Him/His
    >
    > [[alternative HTML version deleted]]
    >
    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >
    > https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=MV2Y2L86j6AczuXdc%2Fni2PzRl0ZvCcBsnrV1xkrL2b8%3D&amp;reserved=0
    > PLEASE do read the posting guide
    > https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=wOeXpqKMfqfsSZjSyar%2Bqmhf7ZSFeiH3qwqQkIlfyhs%3D&amp;reserved=0
    > and provide commented, minimal, self-contained, reproducible code.
    >
    > Region J?mtland H?rjedalen behandlar dina personuppgifter vid
    > kommunikation via e-post. Hanteringen av personuppgifter f?ljer g?llande
    > dataskyddslagstiftning. Du kan l?sa mer om hur vi behandlar dina uppgifter
    > p? https://regionjh.se/gdpr
    >
    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.
    >


    --
    Patrick S. Malone, Ph.D., Malone Quantitative
    NEW Service Models: http://malonequantitative.com

    He/Him/His

            [[alternative HTML version deleted]]

    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Tue Dec 15 18:28:51 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Tue, 15 Dec 2020 12:28:51 -0500
Subject: [R] Meta: R-Help reply-to
In-Reply-To: <A43DD430-9E16-4F27-A53C-77FEFA37CEFD@utoronto.ca>
References: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>
 <HE1PR04MB3115B280496151C156BD57B882C60@HE1PR04MB3115.eurprd04.prod.outlook.com>
 <CAJc=yOExNcQDgx8z1P0wP2u+9U8P70-T9m8XEZKVa20ia4pF5Q@mail.gmail.com>
 <A43DD430-9E16-4F27-A53C-77FEFA37CEFD@utoronto.ca>
Message-ID: <CAJc=yOFpLSpZZ1=SrSm_nqBWXdY99UtKYHSq+zgMhYkyvQEcBA@mail.gmail.com>

Thanks, Kevin. But as I said in the original message, I did that some
months ago and never received a reply.

Pat

On Tue, Dec 15, 2020 at 12:26 PM Kevin Thorpe <kevin.thorpe at utoronto.ca>
wrote:

> You could send the request to r-help-owner at r-project.org. That goes to
> the moderators and administrator.
>
> Kevin
>
> --
> Kevin E. Thorpe
> Head of Biostatistics,  Applied Health Research Centre (AHRC)
> Li Ka Shing Knowledge Institute of St. Michael's
> Assistant Professor, Dalla Lana School of Public Health
> University of Toronto
> email: kevin.thorpe at utoronto.ca  Tel: 416.864.5776  Fax: 416.864.3016
>
>
> ?On 2020-12-15, 12:05 PM, "R-help on behalf of Patrick (Malone
> Quantitative)" <r-help-bounces at r-project.org on behalf of
> malone at malonequantitative.com> wrote:
>
>     EXTERNAL EMAIL:
>
>     Ok. If this is a desirable change, of whom would we request it? I was
>     unable to find a name, and as I said, I got no response from the
> generic
>     address.
>
>     Pat
>
>     On Tue, Dec 15, 2020 at 11:43 AM P?r Leijonhufvud via R-help <
>     r-help at r-project.org> wrote:
>
>     > Unless I am getting senile that should be an option in Mailman...
>     >
> https://docs.mailman3.org/projects/mailman/en/latest/src/mailman/handlers/docs/reply-to.html
>     >
>     > /P?r
>     >
>     > --
>     > P?r Leijonhufvud               .
>     > par.leijonhufvud at regionjh.se
>     > Sjukhuskemist
>     > +46(0)63-153 376, +46-(0)70-242 7006
>     > Laboratoriemedicin, ?stersunds sjukhus
>     >
>     > -----Original Message-----
>     > From: R-help <r-help-bounces at r-project.org> On Behalf Of Patrick
> (Malone
>     > Quantitative)
>     > Sent: Tuesday, December 15, 2020 4:52 PM
>     > To: r-help <r-help at r-project.org>
>     > Subject: [R] Meta: R-Help reply-to
>     >
>     > Greetings.
>     >
>     > Something I've wondered for some time--is mailman configurable to
> have a
>     > default reply-to be set to the list or to reply-all?
>     >
>     > Many newcomers who reply to individual R-Help participants may not
> notice
>     > that they are doing so, and it seems a source of vexation to some of
> the
>     > more frequent helpers.
>     >
>     > I wrote to r-help-owner with this query several months ago and never
> heard
>     > back.
>     >
>     > Pat
>     >
>     > --
>     > Patrick S. Malone, Ph.D., Malone Quantitative NEW Service Models:
>     >
> https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fmalonequantitative.com%2F&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979024301%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=M4XyJrU7fidlWAwaa9NNBC6yUSTCl0VSF2icCKfhfLw%3D&amp;reserved=0
>     >
>     > He/Him/His
>     >
>     > [[alternative HTML version deleted]]
>     >
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     >
>     >
> https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=MV2Y2L86j6AczuXdc%2Fni2PzRl0ZvCcBsnrV1xkrL2b8%3D&amp;reserved=0
>     > PLEASE do read the posting guide
>     >
> https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=wOeXpqKMfqfsSZjSyar%2Bqmhf7ZSFeiH3qwqQkIlfyhs%3D&amp;reserved=0
>     > and provide commented, minimal, self-contained, reproducible code.
>     >
>     > Region J?mtland H?rjedalen behandlar dina personuppgifter vid
>     > kommunikation via e-post. Hanteringen av personuppgifter f?ljer
> g?llande
>     > dataskyddslagstiftning. Du kan l?sa mer om hur vi behandlar dina
> uppgifter
>     > p? https://regionjh.se/gdpr
>     >
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
>     > http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible code.
>     >
>
>
>     --
>     Patrick S. Malone, Ph.D., Malone Quantitative
>     NEW Service Models: http://malonequantitative.com
>
>     He/Him/His
>
>             [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>
>

-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Dec 15 19:54:00 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 15 Dec 2020 10:54:00 -0800
Subject: [R] Meta: R-Help reply-to
In-Reply-To: <CAJc=yOExNcQDgx8z1P0wP2u+9U8P70-T9m8XEZKVa20ia4pF5Q@mail.gmail.com>
References: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>
 <HE1PR04MB3115B280496151C156BD57B882C60@HE1PR04MB3115.eurprd04.prod.outlook.com>
 <CAJc=yOExNcQDgx8z1P0wP2u+9U8P70-T9m8XEZKVa20ia4pF5Q@mail.gmail.com>
Message-ID: <35B2DCDC-F0B4-4A43-942E-9704B212DD4E@dcn.davis.ca.us>

For the record: this is not nearly as cut-and-dried as you imply. The current settings actually make replying off-list rather tricky for some mail clients... I have tried and failed a few times to reply off-list due to this.

The next level of invasiveness is to make it appear that the original author is the list... and having participated in lists that were setup that way in the past, I will vote strongly against such a change.

So some mail clients make it too easy to ignore the email headers, and for some reason newbies end up using those mail clients frequently. But making changes to the default list configuration is not necessarily going to solve that problem, so beware of solutions that are worse than the problems they purport to solve.

On December 15, 2020 9:04:56 AM PST, "Patrick (Malone Quantitative)" <malone at malonequantitative.com> wrote:
>Ok. If this is a desirable change, of whom would we request it? I was
>unable to find a name, and as I said, I got no response from the
>generic
>address.
>
>Pat
>
>On Tue, Dec 15, 2020 at 11:43 AM P?r Leijonhufvud via R-help <
>r-help at r-project.org> wrote:
>
>> Unless I am getting senile that should be an option in Mailman...
>>
>https://docs.mailman3.org/projects/mailman/en/latest/src/mailman/handlers/docs/reply-to.html
>>
>> /P?r
>>
>> --
>> P?r Leijonhufvud               .
>> par.leijonhufvud at regionjh.se
>> Sjukhuskemist
>> +46(0)63-153 376, +46-(0)70-242 7006
>> Laboratoriemedicin, ?stersunds sjukhus
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Patrick
>(Malone
>> Quantitative)
>> Sent: Tuesday, December 15, 2020 4:52 PM
>> To: r-help <r-help at r-project.org>
>> Subject: [R] Meta: R-Help reply-to
>>
>> Greetings.
>>
>> Something I've wondered for some time--is mailman configurable to
>have a
>> default reply-to be set to the list or to reply-all?
>>
>> Many newcomers who reply to individual R-Help participants may not
>notice
>> that they are doing so, and it seems a source of vexation to some of
>the
>> more frequent helpers.
>>
>> I wrote to r-help-owner with this query several months ago and never
>heard
>> back.
>>
>> Pat
>>
>> --
>> Patrick S. Malone, Ph.D., Malone Quantitative NEW Service Models:
>>
>https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fmalonequantitative.com%2F&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979024301%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=M4XyJrU7fidlWAwaa9NNBC6yUSTCl0VSF2icCKfhfLw%3D&amp;reserved=0
>>
>> He/Him/His
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>
>>
>https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=MV2Y2L86j6AczuXdc%2Fni2PzRl0ZvCcBsnrV1xkrL2b8%3D&amp;reserved=0
>> PLEASE do read the posting guide
>>
>https://eur02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cpar.leijonhufvud%40regionjh.se%7Cf773b2b128b24916fe2808d8a111c4a5%7Cd3b4cf3aca774a02aefaf4398591468f%7C0%7C0%7C637436444979034293%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&amp;sdata=wOeXpqKMfqfsSZjSyar%2Bqmhf7ZSFeiH3qwqQkIlfyhs%3D&amp;reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> Region J?mtland H?rjedalen behandlar dina personuppgifter vid
>> kommunikation via e-post. Hanteringen av personuppgifter f?ljer
>g?llande
>> dataskyddslagstiftning. Du kan l?sa mer om hur vi behandlar dina
>uppgifter
>> p? https://regionjh.se/gdpr
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>

-- 
Sent from my phone. Please excuse my brevity.


From pj@|nh@07 @end|ng |rom gm@||@com  Tue Dec 15 22:36:02 2020
From: pj@|nh@07 @end|ng |rom gm@||@com (pooja sinha)
Date: Tue, 15 Dec 2020 16:36:02 -0500
Subject: [R] merging multiple .csv files
Message-ID: <CAGjf1cM06mQbJg8B-Jr+zpFAf9DceLwSP36rb0CxbRRJdEUJ8w@mail.gmail.com>

Hi All,

I have 10 .csv files containing 12 to 15 columns but have some columns in
common. I need to join all of my .csv files into one using one common
column ?Pos?. The header portion of my .csv files looks as shown below:

Chrom Pos Avg Stdev  A15_3509.C A31_3799.C A32_3800.C A35_3804.C Gene ID
Class ExNum

 Can anyone help me in getting the code for the above problem. Any help
will be highly appreciated.


Thanks,

Puja

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec 15 22:51:17 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 15 Dec 2020 13:51:17 -0800
Subject: [R] merging multiple .csv files
In-Reply-To: <CAGjf1cM06mQbJg8B-Jr+zpFAf9DceLwSP36rb0CxbRRJdEUJ8w@mail.gmail.com>
References: <CAGjf1cM06mQbJg8B-Jr+zpFAf9DceLwSP36rb0CxbRRJdEUJ8w@mail.gmail.com>
Message-ID: <CAGxFJbQu49AFPAOVzRGoCtfQ4ZuS414k7izQDOJQ6ch7tEDd+g@mail.gmail.com>

?read.csv to read your csv files in data frames
?merge to merge them (sequentially).


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Dec 15, 2020 at 1:36 PM pooja sinha <pjsinha07 at gmail.com> wrote:

> Hi All,
>
> I have 10 .csv files containing 12 to 15 columns but have some columns in
> common. I need to join all of my .csv files into one using one common
> column ?Pos?. The header portion of my .csv files looks as shown below:
>
> Chrom Pos Avg Stdev  A15_3509.C A31_3799.C A32_3800.C A35_3804.C Gene ID
> Class ExNum
>
>  Can anyone help me in getting the code for the above problem. Any help
> will be highly appreciated.
>
>
> Thanks,
>
> Puja
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From pj@|nh@07 @end|ng |rom gm@||@com  Tue Dec 15 23:13:48 2020
From: pj@|nh@07 @end|ng |rom gm@||@com (pooja sinha)
Date: Tue, 15 Dec 2020 17:13:48 -0500
Subject: [R] merging multiple .csv files
In-Reply-To: <CAGxFJbQu49AFPAOVzRGoCtfQ4ZuS414k7izQDOJQ6ch7tEDd+g@mail.gmail.com>
References: <CAGjf1cM06mQbJg8B-Jr+zpFAf9DceLwSP36rb0CxbRRJdEUJ8w@mail.gmail.com>
 <CAGxFJbQu49AFPAOVzRGoCtfQ4ZuS414k7izQDOJQ6ch7tEDd+g@mail.gmail.com>
Message-ID: <CAGjf1cNTX4OapC4MZs==34L7G4=jV_5Z4rN5ocA3ay5c0eEWUw@mail.gmail.com>

I know that but I do not want to merge them sequentially because I may lose
some rows which are present in one file while the other doesn't have. I
googled and found something called multmerge but the code is not working
for me. I used the following:

path <-"P:/Documents/Puja Desktop items/Documents/RESULTS/est meth
results/Final_est_meth_data_rn6/WGBS_exon_sort_CHG/merge_csv"


filenames <- list.files(path = path)

View(filenames)
multmerge = function(path){
  filenames=list.files(path=path, full.names=TRUE)
  datalist = lapply(filenames, function(x){read.csv(file=x,header=T)})
  Reduce(function(x,y) {merge(x,y)}, datalist)
}

full_data = multmerge("~/P:/Documents/Puja Desktop
items/Documents/RESULTS/est meth
results/Final_est_meth_data_rn6/WGBS_exon_sort_CHG/merge_csv")

But after running the full_data, the folder is empty.

Thanks,
Puja

On Tue, Dec 15, 2020 at 4:51 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> ?read.csv to read your csv files in data frames
> ?merge to merge them (sequentially).
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Dec 15, 2020 at 1:36 PM pooja sinha <pjsinha07 at gmail.com> wrote:
>
>> Hi All,
>>
>> I have 10 .csv files containing 12 to 15 columns but have some columns in
>> common. I need to join all of my .csv files into one using one common
>> column ?Pos?. The header portion of my .csv files looks as shown below:
>>
>> Chrom Pos Avg Stdev  A15_3509.C A31_3799.C A32_3800.C A35_3804.C Gene ID
>> Class ExNum
>>
>>  Can anyone help me in getting the code for the above problem. Any help
>> will be highly appreciated.
>>
>>
>> Thanks,
>>
>> Puja
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Dec 15 23:40:48 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 15 Dec 2020 16:40:48 -0600
Subject: [R] merging multiple .csv files
In-Reply-To: <CAGjf1cNTX4OapC4MZs==34L7G4=jV_5Z4rN5ocA3ay5c0eEWUw@mail.gmail.com>
References: <CAGjf1cM06mQbJg8B-Jr+zpFAf9DceLwSP36rb0CxbRRJdEUJ8w@mail.gmail.com>
 <CAGxFJbQu49AFPAOVzRGoCtfQ4ZuS414k7izQDOJQ6ch7tEDd+g@mail.gmail.com>
 <CAGjf1cNTX4OapC4MZs==34L7G4=jV_5Z4rN5ocA3ay5c0eEWUw@mail.gmail.com>
Message-ID: <6b445a5e-3b9a-8d41-7cc1-834b8410bd65@effectivedefense.org>

	  Did you work the examples in help("merge")?  Also, have you looked at 
the "dplyr" package?  It has 9 different vignettes.  The lead author is 
Hadley Wickham, who won the 2019 COPSS Presidents' Award for work like 
this.


	  Alternatively, you could manually read all 10 files, then figure out 
from that what the merged object should look like with what rows and 
what columns.


	  I might start with something like:


PosAll <- unique(c(table1$Pos, table2$Pos, ... ))


Combined <- data.frame(Pos=PosAll, col1=NA, col2=NA, ...)


	  Then create the object you want that contains a column "Pos" = 
PosAll.  Then:


rownames(table1) <- table1$Pos
rownames(table2) <- table2$Pos
...

sel1 <- PosAll %in% table1$Pos
...

Combined[sel1, names(table1)] <- table1[PosAll[sel1], ]


	  CAVEAT:  I haven't tried this exact code.  It may not work as 
written.  However, I've done things like this in the past.  "merge" and 
"dplyr" have seemed too much like black magic for me.


	  Spencer


On 2020-12-15 16:13, pooja sinha wrote:
> I know that but I do not want to merge them sequentially because I may lose
> some rows which are present in one file while the other doesn't have. I
> googled and found something called multmerge but the code is not working
> for me. I used the following:
> 
> path <-"P:/Documents/Puja Desktop items/Documents/RESULTS/est meth
> results/Final_est_meth_data_rn6/WGBS_exon_sort_CHG/merge_csv"
> 
> 
> filenames <- list.files(path = path)
> 
> View(filenames)
> multmerge = function(path){
>    filenames=list.files(path=path, full.names=TRUE)
>    datalist = lapply(filenames, function(x){read.csv(file=x,header=T)})
>    Reduce(function(x,y) {merge(x,y)}, datalist)
> }
> 
> full_data = multmerge("~/P:/Documents/Puja Desktop
> items/Documents/RESULTS/est meth
> results/Final_est_meth_data_rn6/WGBS_exon_sort_CHG/merge_csv")
> 
> But after running the full_data, the folder is empty.
> 
> Thanks,
> Puja
> 
> On Tue, Dec 15, 2020 at 4:51 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
>> ?read.csv to read your csv files in data frames
>> ?merge to merge them (sequentially).
>>
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Dec 15, 2020 at 1:36 PM pooja sinha <pjsinha07 at gmail.com> wrote:
>>
>>> Hi All,
>>>
>>> I have 10 .csv files containing 12 to 15 columns but have some columns in
>>> common. I need to join all of my .csv files into one using one common
>>> column ?Pos?. The header portion of my .csv files looks as shown below:
>>>
>>> Chrom Pos Avg Stdev  A15_3509.C A31_3799.C A32_3800.C A35_3804.C Gene ID
>>> Class ExNum
>>>
>>>   Can anyone help me in getting the code for the above problem. Any help
>>> will be highly appreciated.
>>>
>>>
>>> Thanks,
>>>
>>> Puja
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From robert@dod|er @end|ng |rom gm@||@com  Wed Dec 16 00:55:51 2020
From: robert@dod|er @end|ng |rom gm@||@com (Robert Dodier)
Date: Tue, 15 Dec 2020 15:55:51 -0800
Subject: [R] Need recommendation for hash table which accepts integer keys
Message-ID: <CAAsY_sRW-ygCHWnsZxWEP1yoiv1N9yW4i3e+Ewq_Ekiuj8oULw@mail.gmail.com>

Hi, I'd like to use integers as keys in a hash table. Can someone
recommend a hash table implementation? I would like to avoid doing
something like substituting "123" for 123.

Here's what I know about different implementations so far:

env (built-in) -- integer keys not allowed
Dict (CRAN) -- integer keys not allowed
hash (CRAN) -- integer keys not allowed

nfultz/ht (Github) -- keys can be integers; advertised as being basic
and for teaching
mkuhn/dict (Github) -- keys can be integers; project is dormant
nathan-russell/hashmap (Github) -- keys can be integers; limitations on values

I wonder if anyone can suggest a hash table implementation. Perhaps
one way to get to an answer is to ask, what did you use last time you
needed a hash table which was going beyond what env provides?

Thanks for your time, I appreciate your help.

Robert Dodier


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Dec 16 01:11:27 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Tue, 15 Dec 2020 18:11:27 -0600
Subject: [R] making code (loop) more efficient
Message-ID: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>

Hello,

I made a terribly inefficient code which runs forever but it does run.

library(dplyr)
library(splitstackshape)

datalist = list()
files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)

for(i in files)
{
a<-get(load(i))
names <- rownames(a)
data <- as.data.frame(cbind(names,a))
rownames(data) <- NULL
dd=na.omit(concat.split.multiple(data = data, split.cols = c("names"),
seps = ":"))
dd=select(dd,names_1,blup,names_3,names_4)
colnames(dd)=c("rsid","weight","ref_allele","eff_allele")
dd$WGT<-i
datalist[[i]] <- dd # add it to your list
}

big_data = do.call(rbind, datalist)

There is 17345 RDat files this loop has to go through. And each file
has approximately 10,000 lines. All RDat files can be downloaded from
here: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE115828 and
they are compressed in this file: GSE115828_retina_TWAS_wgts.tar.gz .
And subset of 3 of those .RDat files is here:
https://github.com/montenegrina/sample

For one of those files, say i="retina.ENSG00000135776.wgt.RDat"
dd looks like this:

> head(dd)
          rsid        weight ref_allele eff_allele
1:  rs72763981  9.376766e-09          C          G
2: rs144383755 -2.093346e-09          A          G
3:   rs1925717  1.511376e-08          T          C
4:  rs61827307 -1.625302e-08          C          A
5:  rs61827308 -1.625302e-08          G          C
6: rs199623136 -9.128354e-10         GC          G
                           WGT
1: retina.ENSG00000135776.wgt.RDat
2: retina.ENSG00000135776.wgt.RDat
3: retina.ENSG00000135776.wgt.RDat
4: retina.ENSG00000135776.wgt.RDat
5: retina.ENSG00000135776.wgt.RDat
6: retina.ENSG00000135776.wgt.RDat

so on attempt to parallelize this I did this:

library(parallel)
library(data.table)
library(foreach)
library(doSNOW)

n <-  parallel::detectCores()
cl <- parallel::makeCluster(n, type = "SOCK")
doSNOW::registerDoSNOW(cl)
files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)

lst_out <- foreach::foreach(i = seq_along(files),
                  .packages = c("data.table") ) %dopar% {

   a <- get(load(files[i]))
   names <- rownames(a)
   data <- data.table(names, a["blup"])
   nm1 <- c("rsid", "ref_allele", "eff_allele")
   data[,  (nm1) := tstrsplit(names, ":")[-2]]
   return(data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
               WGT := files[i]][])
 }
parallel::stopCluster(cl)

big_data <- rbindlist(lst_out)

I am getting this Error:

Error in { : task 7 failed - "object 'blup' not found"
> parallel::stopCluster(cl)

Can you please advise,
Ana


From drj|m|emon @end|ng |rom gm@||@com  Wed Dec 16 02:34:52 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 16 Dec 2020 12:34:52 +1100
Subject: [R] making code (loop) more efficient
In-Reply-To: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>
References: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>
Message-ID: <CA+8X3fU8av5Y79Y5LzaMuvTQo=+z+AMN4J1FNeuUisQGVj1Bsg@mail.gmail.com>

Hi Ana,
My guess is that in your second code fragment you are assigning the
rownames of "a" and the _values_ contained in a$blup to the data.table
"data". As I don't have much experience with data tables I may be
wrong, but I suspect that the column name "blup" may not be visible or
even present in "data". I don't see it in "dd" above this code
fragment.

Jim

On Wed, Dec 16, 2020 at 11:12 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Hello,
>
> I made a terribly inefficient code which runs forever but it does run.
>
> library(dplyr)
> library(splitstackshape)
>
> datalist = list()
> files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
>
> for(i in files)
> {
> a<-get(load(i))
> names <- rownames(a)
> data <- as.data.frame(cbind(names,a))
> rownames(data) <- NULL
> dd=na.omit(concat.split.multiple(data = data, split.cols = c("names"),
> seps = ":"))
> dd=select(dd,names_1,blup,names_3,names_4)
> colnames(dd)=c("rsid","weight","ref_allele","eff_allele")
> dd$WGT<-i
> datalist[[i]] <- dd # add it to your list
> }
>
> big_data = do.call(rbind, datalist)
>
> There is 17345 RDat files this loop has to go through. And each file
> has approximately 10,000 lines. All RDat files can be downloaded from
> here: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE115828 and
> they are compressed in this file: GSE115828_retina_TWAS_wgts.tar.gz .
> And subset of 3 of those .RDat files is here:
> https://github.com/montenegrina/sample
>
> For one of those files, say i="retina.ENSG00000135776.wgt.RDat"
> dd looks like this:
>
> > head(dd)
>           rsid        weight ref_allele eff_allele
> 1:  rs72763981  9.376766e-09          C          G
> 2: rs144383755 -2.093346e-09          A          G
> 3:   rs1925717  1.511376e-08          T          C
> 4:  rs61827307 -1.625302e-08          C          A
> 5:  rs61827308 -1.625302e-08          G          C
> 6: rs199623136 -9.128354e-10         GC          G
>                            WGT
> 1: retina.ENSG00000135776.wgt.RDat
> 2: retina.ENSG00000135776.wgt.RDat
> 3: retina.ENSG00000135776.wgt.RDat
> 4: retina.ENSG00000135776.wgt.RDat
> 5: retina.ENSG00000135776.wgt.RDat
> 6: retina.ENSG00000135776.wgt.RDat
>
> so on attempt to parallelize this I did this:
>
> library(parallel)
> library(data.table)
> library(foreach)
> library(doSNOW)
>
> n <-  parallel::detectCores()
> cl <- parallel::makeCluster(n, type = "SOCK")
> doSNOW::registerDoSNOW(cl)
> files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
>
> lst_out <- foreach::foreach(i = seq_along(files),
>                   .packages = c("data.table") ) %dopar% {
>
>    a <- get(load(files[i]))
>    names <- rownames(a)
>    data <- data.table(names, a["blup"])
>    nm1 <- c("rsid", "ref_allele", "eff_allele")
>    data[,  (nm1) := tstrsplit(names, ":")[-2]]
>    return(data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
>                WGT := files[i]][])
>  }
> parallel::stopCluster(cl)
>
> big_data <- rbindlist(lst_out)
>
> I am getting this Error:
>
> Error in { : task 7 failed - "object 'blup' not found"
> > parallel::stopCluster(cl)
>
> Can you please advise,
> Ana
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Dec 16 03:20:13 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Tue, 15 Dec 2020 20:20:13 -0600
Subject: [R] making code (loop) more efficient
In-Reply-To: <CA+8X3fU8av5Y79Y5LzaMuvTQo=+z+AMN4J1FNeuUisQGVj1Bsg@mail.gmail.com>
References: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>
 <CA+8X3fU8av5Y79Y5LzaMuvTQo=+z+AMN4J1FNeuUisQGVj1Bsg@mail.gmail.com>
Message-ID: <CAF9-5jNsN_AANKnOqbGu3jjQ1OE6tk+A7H4kZYqRGW6Vb6jGYw@mail.gmail.com>

Hi Jim,

Maybe my post is confusing.

so "dd" came from my slow code and I don't use it again in parallelized code.

So for example for one of my files:

if
i="retina.ENSG00000120647.wgt.RDat"
> a <- get(load(i))
> head(a)
                            top1          blup lasso enet
rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
...

Slow code was posted just to show what was running very slow and it
was running. I really need help fixing parallelized version.

On Tue, Dec 15, 2020 at 7:35 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ana,
> My guess is that in your second code fragment you are assigning the
> rownames of "a" and the _values_ contained in a$blup to the data.table
> "data". As I don't have much experience with data tables I may be
> wrong, but I suspect that the column name "blup" may not be visible or
> even present in "data". I don't see it in "dd" above this code
> fragment.
>
> Jim
>
> On Wed, Dec 16, 2020 at 11:12 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> >
> > Hello,
> >
> > I made a terribly inefficient code which runs forever but it does run.
> >
> > library(dplyr)
> > library(splitstackshape)
> >
> > datalist = list()
> > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> >
> > for(i in files)
> > {
> > a<-get(load(i))
> > names <- rownames(a)
> > data <- as.data.frame(cbind(names,a))
> > rownames(data) <- NULL
> > dd=na.omit(concat.split.multiple(data = data, split.cols = c("names"),
> > seps = ":"))
> > dd=select(dd,names_1,blup,names_3,names_4)
> > colnames(dd)=c("rsid","weight","ref_allele","eff_allele")
> > dd$WGT<-i
> > datalist[[i]] <- dd # add it to your list
> > }
> >
> > big_data = do.call(rbind, datalist)
> >
> > There is 17345 RDat files this loop has to go through. And each file
> > has approximately 10,000 lines. All RDat files can be downloaded from
> > here: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE115828 and
> > they are compressed in this file: GSE115828_retina_TWAS_wgts.tar.gz .
> > And subset of 3 of those .RDat files is here:
> > https://github.com/montenegrina/sample
> >
> > For one of those files, say i="retina.ENSG00000135776.wgt.RDat"
> > dd looks like this:
> >
> > > head(dd)
> >           rsid        weight ref_allele eff_allele
> > 1:  rs72763981  9.376766e-09          C          G
> > 2: rs144383755 -2.093346e-09          A          G
> > 3:   rs1925717  1.511376e-08          T          C
> > 4:  rs61827307 -1.625302e-08          C          A
> > 5:  rs61827308 -1.625302e-08          G          C
> > 6: rs199623136 -9.128354e-10         GC          G
> >                            WGT
> > 1: retina.ENSG00000135776.wgt.RDat
> > 2: retina.ENSG00000135776.wgt.RDat
> > 3: retina.ENSG00000135776.wgt.RDat
> > 4: retina.ENSG00000135776.wgt.RDat
> > 5: retina.ENSG00000135776.wgt.RDat
> > 6: retina.ENSG00000135776.wgt.RDat
> >
> > so on attempt to parallelize this I did this:
> >
> > library(parallel)
> > library(data.table)
> > library(foreach)
> > library(doSNOW)
> >
> > n <-  parallel::detectCores()
> > cl <- parallel::makeCluster(n, type = "SOCK")
> > doSNOW::registerDoSNOW(cl)
> > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> >
> > lst_out <- foreach::foreach(i = seq_along(files),
> >                   .packages = c("data.table") ) %dopar% {
> >
> >    a <- get(load(files[i]))
> >    names <- rownames(a)
> >    data <- data.table(names, a["blup"])
> >    nm1 <- c("rsid", "ref_allele", "eff_allele")
> >    data[,  (nm1) := tstrsplit(names, ":")[-2]]
> >    return(data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
> >                WGT := files[i]][])
> >  }
> > parallel::stopCluster(cl)
> >
> > big_data <- rbindlist(lst_out)
> >
> > I am getting this Error:
> >
> > Error in { : task 7 failed - "object 'blup' not found"
> > > parallel::stopCluster(cl)
> >
> > Can you please advise,
> > Ana
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Wed Dec 16 03:29:51 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 16 Dec 2020 13:29:51 +1100
Subject: [R] making code (loop) more efficient
In-Reply-To: <CAF9-5jNsN_AANKnOqbGu3jjQ1OE6tk+A7H4kZYqRGW6Vb6jGYw@mail.gmail.com>
References: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>
 <CA+8X3fU8av5Y79Y5LzaMuvTQo=+z+AMN4J1FNeuUisQGVj1Bsg@mail.gmail.com>
 <CAF9-5jNsN_AANKnOqbGu3jjQ1OE6tk+A7H4kZYqRGW6Vb6jGYw@mail.gmail.com>
Message-ID: <CA+8X3fXfk+26A0TmVLocs6_6x_EWFCnfuFc_k-7Fs=L6SVq83A@mail.gmail.com>

Hi Ana,
I would look at "data" in your second example and see if it contains a
column named "blup" or just the values that were extracted from
a$blup. Also, I assume that weight=blup looks for an object named
"blup", which may not be there.

Jim

On Wed, Dec 16, 2020 at 1:20 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Hi Jim,
>
> Maybe my post is confusing.
>
> so "dd" came from my slow code and I don't use it again in parallelized code.
>
> So for example for one of my files:
>
> if
> i="retina.ENSG00000120647.wgt.RDat"
> > a <- get(load(i))
> > head(a)
>                             top1          blup lasso enet
> rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> ...
>
> Slow code was posted just to show what was running very slow and it
> was running. I really need help fixing parallelized version.
>
> On Tue, Dec 15, 2020 at 7:35 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Ana,
> > My guess is that in your second code fragment you are assigning the
> > rownames of "a" and the _values_ contained in a$blup to the data.table
> > "data". As I don't have much experience with data tables I may be
> > wrong, but I suspect that the column name "blup" may not be visible or
> > even present in "data". I don't see it in "dd" above this code
> > fragment.
> >
> > Jim
> >
> > On Wed, Dec 16, 2020 at 11:12 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > >
> > > Hello,
> > >
> > > I made a terribly inefficient code which runs forever but it does run.
> > >
> > > library(dplyr)
> > > library(splitstackshape)
> > >
> > > datalist = list()
> > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > >
> > > for(i in files)
> > > {
> > > a<-get(load(i))
> > > names <- rownames(a)
> > > data <- as.data.frame(cbind(names,a))
> > > rownames(data) <- NULL
> > > dd=na.omit(concat.split.multiple(data = data, split.cols = c("names"),
> > > seps = ":"))
> > > dd=select(dd,names_1,blup,names_3,names_4)
> > > colnames(dd)=c("rsid","weight","ref_allele","eff_allele")
> > > dd$WGT<-i
> > > datalist[[i]] <- dd # add it to your list
> > > }
> > >
> > > big_data = do.call(rbind, datalist)
> > >
> > > There is 17345 RDat files this loop has to go through. And each file
> > > has approximately 10,000 lines. All RDat files can be downloaded from
> > > here: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE115828 and
> > > they are compressed in this file: GSE115828_retina_TWAS_wgts.tar.gz .
> > > And subset of 3 of those .RDat files is here:
> > > https://github.com/montenegrina/sample
> > >
> > > For one of those files, say i="retina.ENSG00000135776.wgt.RDat"
> > > dd looks like this:
> > >
> > > > head(dd)
> > >           rsid        weight ref_allele eff_allele
> > > 1:  rs72763981  9.376766e-09          C          G
> > > 2: rs144383755 -2.093346e-09          A          G
> > > 3:   rs1925717  1.511376e-08          T          C
> > > 4:  rs61827307 -1.625302e-08          C          A
> > > 5:  rs61827308 -1.625302e-08          G          C
> > > 6: rs199623136 -9.128354e-10         GC          G
> > >                            WGT
> > > 1: retina.ENSG00000135776.wgt.RDat
> > > 2: retina.ENSG00000135776.wgt.RDat
> > > 3: retina.ENSG00000135776.wgt.RDat
> > > 4: retina.ENSG00000135776.wgt.RDat
> > > 5: retina.ENSG00000135776.wgt.RDat
> > > 6: retina.ENSG00000135776.wgt.RDat
> > >
> > > so on attempt to parallelize this I did this:
> > >
> > > library(parallel)
> > > library(data.table)
> > > library(foreach)
> > > library(doSNOW)
> > >
> > > n <-  parallel::detectCores()
> > > cl <- parallel::makeCluster(n, type = "SOCK")
> > > doSNOW::registerDoSNOW(cl)
> > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > >
> > > lst_out <- foreach::foreach(i = seq_along(files),
> > >                   .packages = c("data.table") ) %dopar% {
> > >
> > >    a <- get(load(files[i]))
> > >    names <- rownames(a)
> > >    data <- data.table(names, a["blup"])
> > >    nm1 <- c("rsid", "ref_allele", "eff_allele")
> > >    data[,  (nm1) := tstrsplit(names, ":")[-2]]
> > >    return(data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
> > >                WGT := files[i]][])
> > >  }
> > > parallel::stopCluster(cl)
> > >
> > > big_data <- rbindlist(lst_out)
> > >
> > > I am getting this Error:
> > >
> > > Error in { : task 7 failed - "object 'blup' not found"
> > > > parallel::stopCluster(cl)
> > >
> > > Can you please advise,
> > > Ana
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Dec 16 03:44:57 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Tue, 15 Dec 2020 20:44:57 -0600
Subject: [R] making code (loop) more efficient
In-Reply-To: <CA+8X3fXfk+26A0TmVLocs6_6x_EWFCnfuFc_k-7Fs=L6SVq83A@mail.gmail.com>
References: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>
 <CA+8X3fU8av5Y79Y5LzaMuvTQo=+z+AMN4J1FNeuUisQGVj1Bsg@mail.gmail.com>
 <CAF9-5jNsN_AANKnOqbGu3jjQ1OE6tk+A7H4kZYqRGW6Vb6jGYw@mail.gmail.com>
 <CA+8X3fXfk+26A0TmVLocs6_6x_EWFCnfuFc_k-7Fs=L6SVq83A@mail.gmail.com>
Message-ID: <CAF9-5jNPTqc_XA279S=n4uRin3durJLcrON-j93e3t6JcnBO7g@mail.gmail.com>

Hi Jim,

as always you're completely right, this is what is happening:

> head(a)
                            top1          blup lasso enet
rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
rs12830904:188335:T:A 0.92793158 -9.143555e-05     0    0
rs1500098:189093:G:C  0.42032471  9.001814e-04     0    0
rs79410690:190097:G:A 0.26194244  5.019037e-04     0    0
>    names <- rownames(a)
>    data <- data.table(names, a["blup"])
> head(data)
                   names V2
1:  rs4980905:184404:C:A NA
2:  rs7978751:187541:G:C NA
3:  rs2368831:188285:C:T NA
4: rs12830904:188335:T:A NA
5:  rs1500098:189093:G:C NA
6: rs79410690:190097:G:A NA

So my goal is to transform what is in "a" to this for every RDat file:

          rsid        weight ref_allele eff_allele
1:  rs72763981  9.376766e-09          C          G
2: rs144383755 -2.093346e-09          A          G
3:   rs1925717  1.511376e-08          T          C
4:  rs61827307 -1.625302e-08          C          A
5:  rs61827308 -1.625302e-08          G          C
6: rs199623136 -9.128354e-10         GC          G
                           WGT
1: retina.ENSG00000135776.wgt.RDat
2: retina.ENSG00000135776.wgt.RDat
3: retina.ENSG00000135776.wgt.RDat
4: retina.ENSG00000135776.wgt.RDat
5: retina.ENSG00000135776.wgt.RDat
6: retina.ENSG00000135776.wgt.RDat

so from rs4980905:184404:C:A I would take rs4980905 to be in column
"rsid", C in column "ref_allele" and A to be in column "eff_allele",
WGT column would just be filled with a name of the particular RDat
file.

So the issue is in these lines:

a <- get(load(files[i]))
names <- rownames(a)
data <- data.table(names, a["blup"])
nm1 <- c("rsid", "ref_allele", "eff_allele")

any idea how I can rewrite this?



On Tue, Dec 15, 2020 at 8:30 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ana,
> I would look at "data" in your second example and see if it contains a
> column named "blup" or just the values that were extracted from
> a$blup. Also, I assume that weight=blup looks for an object named
> "blup", which may not be there.
>
> Jim
>
> On Wed, Dec 16, 2020 at 1:20 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> >
> > Hi Jim,
> >
> > Maybe my post is confusing.
> >
> > so "dd" came from my slow code and I don't use it again in parallelized code.
> >
> > So for example for one of my files:
> >
> > if
> > i="retina.ENSG00000120647.wgt.RDat"
> > > a <- get(load(i))
> > > head(a)
> >                             top1          blup lasso enet
> > rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> > rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> > rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> > ...
> >
> > Slow code was posted just to show what was running very slow and it
> > was running. I really need help fixing parallelized version.
> >
> > On Tue, Dec 15, 2020 at 7:35 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> > >
> > > Hi Ana,
> > > My guess is that in your second code fragment you are assigning the
> > > rownames of "a" and the _values_ contained in a$blup to the data.table
> > > "data". As I don't have much experience with data tables I may be
> > > wrong, but I suspect that the column name "blup" may not be visible or
> > > even present in "data". I don't see it in "dd" above this code
> > > fragment.
> > >
> > > Jim
> > >
> > > On Wed, Dec 16, 2020 at 11:12 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > > >
> > > > Hello,
> > > >
> > > > I made a terribly inefficient code which runs forever but it does run.
> > > >
> > > > library(dplyr)
> > > > library(splitstackshape)
> > > >
> > > > datalist = list()
> > > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > > >
> > > > for(i in files)
> > > > {
> > > > a<-get(load(i))
> > > > names <- rownames(a)
> > > > data <- as.data.frame(cbind(names,a))
> > > > rownames(data) <- NULL
> > > > dd=na.omit(concat.split.multiple(data = data, split.cols = c("names"),
> > > > seps = ":"))
> > > > dd=select(dd,names_1,blup,names_3,names_4)
> > > > colnames(dd)=c("rsid","weight","ref_allele","eff_allele")
> > > > dd$WGT<-i
> > > > datalist[[i]] <- dd # add it to your list
> > > > }
> > > >
> > > > big_data = do.call(rbind, datalist)
> > > >
> > > > There is 17345 RDat files this loop has to go through. And each file
> > > > has approximately 10,000 lines. All RDat files can be downloaded from
> > > > here: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE115828 and
> > > > they are compressed in this file: GSE115828_retina_TWAS_wgts.tar.gz .
> > > > And subset of 3 of those .RDat files is here:
> > > > https://github.com/montenegrina/sample
> > > >
> > > > For one of those files, say i="retina.ENSG00000135776.wgt.RDat"
> > > > dd looks like this:
> > > >
> > > > > head(dd)
> > > >           rsid        weight ref_allele eff_allele
> > > > 1:  rs72763981  9.376766e-09          C          G
> > > > 2: rs144383755 -2.093346e-09          A          G
> > > > 3:   rs1925717  1.511376e-08          T          C
> > > > 4:  rs61827307 -1.625302e-08          C          A
> > > > 5:  rs61827308 -1.625302e-08          G          C
> > > > 6: rs199623136 -9.128354e-10         GC          G
> > > >                            WGT
> > > > 1: retina.ENSG00000135776.wgt.RDat
> > > > 2: retina.ENSG00000135776.wgt.RDat
> > > > 3: retina.ENSG00000135776.wgt.RDat
> > > > 4: retina.ENSG00000135776.wgt.RDat
> > > > 5: retina.ENSG00000135776.wgt.RDat
> > > > 6: retina.ENSG00000135776.wgt.RDat
> > > >
> > > > so on attempt to parallelize this I did this:
> > > >
> > > > library(parallel)
> > > > library(data.table)
> > > > library(foreach)
> > > > library(doSNOW)
> > > >
> > > > n <-  parallel::detectCores()
> > > > cl <- parallel::makeCluster(n, type = "SOCK")
> > > > doSNOW::registerDoSNOW(cl)
> > > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > > >
> > > > lst_out <- foreach::foreach(i = seq_along(files),
> > > >                   .packages = c("data.table") ) %dopar% {
> > > >
> > > >    a <- get(load(files[i]))
> > > >    names <- rownames(a)
> > > >    data <- data.table(names, a["blup"])
> > > >    nm1 <- c("rsid", "ref_allele", "eff_allele")
> > > >    data[,  (nm1) := tstrsplit(names, ":")[-2]]
> > > >    return(data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
> > > >                WGT := files[i]][])
> > > >  }
> > > > parallel::stopCluster(cl)
> > > >
> > > > big_data <- rbindlist(lst_out)
> > > >
> > > > I am getting this Error:
> > > >
> > > > Error in { : task 7 failed - "object 'blup' not found"
> > > > > parallel::stopCluster(cl)
> > > >
> > > > Can you please advise,
> > > > Ana
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Wed Dec 16 06:44:48 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 16 Dec 2020 16:44:48 +1100
Subject: [R] making code (loop) more efficient
In-Reply-To: <CAF9-5jNPTqc_XA279S=n4uRin3durJLcrON-j93e3t6JcnBO7g@mail.gmail.com>
References: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>
 <CA+8X3fU8av5Y79Y5LzaMuvTQo=+z+AMN4J1FNeuUisQGVj1Bsg@mail.gmail.com>
 <CAF9-5jNsN_AANKnOqbGu3jjQ1OE6tk+A7H4kZYqRGW6Vb6jGYw@mail.gmail.com>
 <CA+8X3fXfk+26A0TmVLocs6_6x_EWFCnfuFc_k-7Fs=L6SVq83A@mail.gmail.com>
 <CAF9-5jNPTqc_XA279S=n4uRin3durJLcrON-j93e3t6JcnBO7g@mail.gmail.com>
Message-ID: <CA+8X3fVBCrDyXLM3VkKQ4sciftEG8nkV8F9POcT5obiK+nAD9g@mail.gmail.com>

Hi Ana,
Back on the job. I'm not sure how this will work in your setup, but
here is a try:

a<-read.table(text="top1 blup lasso enet
rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
rs12830904:188335:T:A 0.92793158 -9.143555e-05     0    0
rs1500098:189093:G:C  0.42032471  9.001814e-04     0    0
rs79410690:190097:G:A 0.26194244  5.019037e-04     0    0",
header=TRUE,stringsAsFactors=FALSE)
namesplit<-strsplit(rownames(a),":")
rsid<-unlist(lapply(namesplit,"[",1))
ref_allele<-unlist(lapply(namesplit,"[",3))
eff_allele<-unlist(lapply(namesplit,"[",4))
# here I'm assuming that the filename
# is stored in files[i]
files<-"retina.ENSG00000135776.wgt.RDat"
i<-1
WGT<-rep(files[i],length(rsid))
data<-data.frame(rsid=rsid,weight=a$top1,
 ref_allele=ref_allele,eff_allele,WGT=WGT)
data

Note that the output is a data frame, not a data table. I hope that
the function for creating a data table is close enough to that for a
data frame for you to work it out. If not I can probably have a look
at it a bit later.

Jim

On Wed, Dec 16, 2020 at 1:45 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Hi Jim,
>
> as always you're completely right, this is what is happening:
>
> > head(a)
>                             top1          blup lasso enet
> rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> rs12830904:188335:T:A 0.92793158 -9.143555e-05     0    0
> rs1500098:189093:G:C  0.42032471  9.001814e-04     0    0
> rs79410690:190097:G:A 0.26194244  5.019037e-04     0    0
> >    names <- rownames(a)
> >    data <- data.table(names, a["blup"])
> > head(data)
>                    names V2
> 1:  rs4980905:184404:C:A NA
> 2:  rs7978751:187541:G:C NA
> 3:  rs2368831:188285:C:T NA
> 4: rs12830904:188335:T:A NA
> 5:  rs1500098:189093:G:C NA
> 6: rs79410690:190097:G:A NA
>
> So my goal is to transform what is in "a" to this for every RDat file:
>
>           rsid        weight ref_allele eff_allele
> 1:  rs72763981  9.376766e-09          C          G
> 2: rs144383755 -2.093346e-09          A          G
> 3:   rs1925717  1.511376e-08          T          C
> 4:  rs61827307 -1.625302e-08          C          A
> 5:  rs61827308 -1.625302e-08          G          C
> 6: rs199623136 -9.128354e-10         GC          G
>                            WGT
> 1: retina.ENSG00000135776.wgt.RDat
> 2: retina.ENSG00000135776.wgt.RDat
> 3: retina.ENSG00000135776.wgt.RDat
> 4: retina.ENSG00000135776.wgt.RDat
> 5: retina.ENSG00000135776.wgt.RDat
> 6: retina.ENSG00000135776.wgt.RDat
>
> so from rs4980905:184404:C:A I would take rs4980905 to be in column
> "rsid", C in column "ref_allele" and A to be in column "eff_allele",
> WGT column would just be filled with a name of the particular RDat
> file.
>
> So the issue is in these lines:
>
> a <- get(load(files[i]))
> names <- rownames(a)
> data <- data.table(names, a["blup"])
> nm1 <- c("rsid", "ref_allele", "eff_allele")
>
> any idea how I can rewrite this?
>
>
>
> On Tue, Dec 15, 2020 at 8:30 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Ana,
> > I would look at "data" in your second example and see if it contains a
> > column named "blup" or just the values that were extracted from
> > a$blup. Also, I assume that weight=blup looks for an object named
> > "blup", which may not be there.
> >
> > Jim
> >
> > On Wed, Dec 16, 2020 at 1:20 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > >
> > > Hi Jim,
> > >
> > > Maybe my post is confusing.
> > >
> > > so "dd" came from my slow code and I don't use it again in parallelized code.
> > >
> > > So for example for one of my files:
> > >
> > > if
> > > i="retina.ENSG00000120647.wgt.RDat"
> > > > a <- get(load(i))
> > > > head(a)
> > >                             top1          blup lasso enet
> > > rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> > > rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> > > rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> > > ...
> > >
> > > Slow code was posted just to show what was running very slow and it
> > > was running. I really need help fixing parallelized version.
> > >
> > > On Tue, Dec 15, 2020 at 7:35 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> > > >
> > > > Hi Ana,
> > > > My guess is that in your second code fragment you are assigning the
> > > > rownames of "a" and the _values_ contained in a$blup to the data.table
> > > > "data". As I don't have much experience with data tables I may be
> > > > wrong, but I suspect that the column name "blup" may not be visible or
> > > > even present in "data". I don't see it in "dd" above this code
> > > > fragment.
> > > >
> > > > Jim
> > > >
> > > > On Wed, Dec 16, 2020 at 11:12 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > > > >
> > > > > Hello,
> > > > >
> > > > > I made a terribly inefficient code which runs forever but it does run.
> > > > >
> > > > > library(dplyr)
> > > > > library(splitstackshape)
> > > > >
> > > > > datalist = list()
> > > > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > > > >
> > > > > for(i in files)
> > > > > {
> > > > > a<-get(load(i))
> > > > > names <- rownames(a)
> > > > > data <- as.data.frame(cbind(names,a))
> > > > > rownames(data) <- NULL
> > > > > dd=na.omit(concat.split.multiple(data = data, split.cols = c("names"),
> > > > > seps = ":"))
> > > > > dd=select(dd,names_1,blup,names_3,names_4)
> > > > > colnames(dd)=c("rsid","weight","ref_allele","eff_allele")
> > > > > dd$WGT<-i
> > > > > datalist[[i]] <- dd # add it to your list
> > > > > }
> > > > >
> > > > > big_data = do.call(rbind, datalist)
> > > > >
> > > > > There is 17345 RDat files this loop has to go through. And each file
> > > > > has approximately 10,000 lines. All RDat files can be downloaded from
> > > > > here: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE115828 and
> > > > > they are compressed in this file: GSE115828_retina_TWAS_wgts.tar.gz .
> > > > > And subset of 3 of those .RDat files is here:
> > > > > https://github.com/montenegrina/sample
> > > > >
> > > > > For one of those files, say i="retina.ENSG00000135776.wgt.RDat"
> > > > > dd looks like this:
> > > > >
> > > > > > head(dd)
> > > > >           rsid        weight ref_allele eff_allele
> > > > > 1:  rs72763981  9.376766e-09          C          G
> > > > > 2: rs144383755 -2.093346e-09          A          G
> > > > > 3:   rs1925717  1.511376e-08          T          C
> > > > > 4:  rs61827307 -1.625302e-08          C          A
> > > > > 5:  rs61827308 -1.625302e-08          G          C
> > > > > 6: rs199623136 -9.128354e-10         GC          G
> > > > >                            WGT
> > > > > 1: retina.ENSG00000135776.wgt.RDat
> > > > > 2: retina.ENSG00000135776.wgt.RDat
> > > > > 3: retina.ENSG00000135776.wgt.RDat
> > > > > 4: retina.ENSG00000135776.wgt.RDat
> > > > > 5: retina.ENSG00000135776.wgt.RDat
> > > > > 6: retina.ENSG00000135776.wgt.RDat
> > > > >
> > > > > so on attempt to parallelize this I did this:
> > > > >
> > > > > library(parallel)
> > > > > library(data.table)
> > > > > library(foreach)
> > > > > library(doSNOW)
> > > > >
> > > > > n <-  parallel::detectCores()
> > > > > cl <- parallel::makeCluster(n, type = "SOCK")
> > > > > doSNOW::registerDoSNOW(cl)
> > > > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > > > >
> > > > > lst_out <- foreach::foreach(i = seq_along(files),
> > > > >                   .packages = c("data.table") ) %dopar% {
> > > > >
> > > > >    a <- get(load(files[i]))
> > > > >    names <- rownames(a)
> > > > >    data <- data.table(names, a["blup"])
> > > > >    nm1 <- c("rsid", "ref_allele", "eff_allele")
> > > > >    data[,  (nm1) := tstrsplit(names, ":")[-2]]
> > > > >    return(data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
> > > > >                WGT := files[i]][])
> > > > >  }
> > > > > parallel::stopCluster(cl)
> > > > >
> > > > > big_data <- rbindlist(lst_out)
> > > > >
> > > > > I am getting this Error:
> > > > >
> > > > > Error in { : task 7 failed - "object 'blup' not found"
> > > > > > parallel::stopCluster(cl)
> > > > >
> > > > > Can you please advise,
> > > > > Ana
> > > > >
> > > > > ______________________________________________
> > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > > and provide commented, minimal, self-contained, reproducible code.


From g@@@uu| @end|ng |rom gm@||@com  Wed Dec 16 06:49:55 2020
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Wed, 16 Dec 2020 14:49:55 +0900
Subject: [R] get a month where max value is
Message-ID: <CAHXS41wxau6Y4pigsGXBxQEtb-A9kGdhPETJUH52+nkYn=ic0w@mail.gmail.com>

Dear R-Help,

I have a data frame containing monthly maxima of rainfall in 10
locations for 30 year and want to look at a month where an annual
maxima happens. I can get the annual maxima using aggregate. I try to
extract the month using the code below.

ann10<-aggregate(mon10[3:12],list(mon10$Group.1),max,na.rm=T)
when<-matrix(NA,30,10)
dum<-list()
for(j in 1:10){
  for(i in 1:30){
    dum<-which(mon10[,j+2]==ann10[i,j+1])
    when[i,j]<-mon10$Group.2[dum[1]]
  }
}

I am aware that the code above is wrong when multiple max value
detected (so I use dum[1] there). Any elegant solution how to find the
month?? Thank you

dput(head(mon10,36))

structure(list(Group.1 = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("1985",
"1986", "1987", "1988", "1989", "1990", "1991", "1992", "1993",
"1994", "1995", "1996", "1997", "1998", "1999", "2000", "2001",
"2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009",
"2010", "2011", "2012", "2013", "2014"), class = "factor"), Group.2 =
structure(c(1L,
2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L,
5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L,
8L, 9L, 10L, 11L, 12L), .Label = c("01", "02", "03", "04", "05",
"06", "07", "08", "09", "10", "11", "12"), class = "factor"),
    V1 = c(0, 0, 0, 0, 0, 0, 1, 13, 0, 0, 0, 0, 175, 123, 76,
    112, 35, 52, 14, 28, 63, 68, 30, 67, 107, 46, 44, 22, 33,
    25, 10, 5, 50, 10, 32, 59), V2 = c(167, 50, 48, 114, 128,
    37, 54, 5, 23, 36, 10, 43, 175, 123, 110, 112, 58, 12, 18,
    171, 63, 68, 30, 79, 189, 40, 35, 45, 23, 10, 0, 1, 1, 5,
    34, 71), V3 = c(63.0054, 68.9842, 1, 115.9904, 5.796, 53.0929,
    63.0092, 18.3692, 0, 30.1854, 12.214, 55.0721, 91.9728, 64.9951,
    28.431, 21.6815, 38.4651, 48.1583, 1, 1, 1, 7.654, 50.1237,
    86.9713, 69.9766, 14.2489, 45.2282, 12.4218, 18.5532, 23.9453,
    38.4967, 0, 0, 1.8495, 41.3493, 69.98), V4 = c(112, 94, 70,
    18, 6.1, 55, 84.1, 7.1, 0, 4.1, 24.9, 26.9, 42, 38, 38, 62,
    26, 50, 8, 0, 6, 40, 18, 77, 30, 78, 31, 28, 13, 27, 50,
    0, 0, 0, 29, 84), V5 = c(114.2545, 96.2488, 71.9131, 14.299,
    22.2288, 55.4017, 1.971, 3.69, 0, 13.301, 57.5355, 27.3004,
    39.6649, 34.3766, 34.3278, 63.1532, 21.4376, 49.5373, 4.556,
    0, 2.7328, 36.8717, 66.3924, 79.1253, 25.1753, 80.1422, 26.2089,
    23.232, 9.4119, 22.3628, 49.4622, 0, 0, 0, 24.1889, 86.2128
    ), V6 = c(65, 35, 83, 46, 50, 26, 28, 10, 6, 13, 90, 97,
    178, 138, 79, 47, 30, 73, 5, 0, 1, 24, 55, 46, 80, 62, 56,
    57, 21, 18, 0, 0, 0, 9, 36, 175), V7 = c(110, 100, 100, 63,
    167, 40, 5, 7, 76, 0, 15, 17, 55.1, 116.1, 57.9, 21.1, 0.3,
    103.1, 14, 0, 5.1, 5.1, 1, 20.1, 31, 26.9, 0.5, 0, 27.9,
    41, 0, 6.1, 0, 0, 0, 0), V8 = c(78, 87, 37, 98, 0, 0, 0,
    0, 0, 0, 0, 0, 64, 90, 89, 73, 104, 70, 101, 15, 0, 0, 0,
    0, 0, 1, 38, 97, 114, 28, 0, 0, 0, 0, 0, 0), V9 = c(29, 17,
    72, 29, 16, 25, 23, 43, 37, 10, 15, 7, 14, 77, 54, 43, 22,
    58, 63, 27, 12, 12, 16, 9, 22, 33, 60, 54, 40, 37, 35, 12,
    1, 4, 11, 49), V10 = c(63.1161, 11.9425, 35.3226, 34.0615,
    92.9325, 34.0785, 39.009, 21.5103, 17.9209, 50.9037, 32.7218,
    52.2346, 63.1381, 99.946, 48.0861, 63.1813, 43.7723, 86.9132,
    39.1252, 49.6261, 40.7285, 112.9464, 49.8403, 66.5253, 21.5789,
    12.0566, 89.927, 71.7187, 37.816, 5.3817, 1, 0, 0, 4.636,
    40.7964, 88.9239)), row.names = c(1L, 31L, 61L, 91L, 121L,
151L, 181L, 211L, 241L, 271L, 301L, 331L, 2L, 32L, 62L, 92L,
122L, 152L, 182L, 212L, 242L, 272L, 302L, 332L, 3L, 33L, 63L,
93L, 123L, 153L, 183L, 213L, 243L, 273L, 303L, 333L), class = "data.frame")

sessionInfo()
R version 4.0.2 (2020-06-22)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18363)


Best,
Ani


From drj|m|emon @end|ng |rom gm@||@com  Wed Dec 16 07:08:12 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 16 Dec 2020 17:08:12 +1100
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
 <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>
 <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
Message-ID: <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>

Hi Greg,
I think this does what you want:

gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
grid_dates<-as.Date(paste(2014:2020,1,1,sep="-"),"%Y-%m-%d")
plot(gcdf$date, gcdf$gallons, main="2014 Toyota 4Runner", xlab="Date",
 ylab="Gallons",type="l",col="blue",yaxt="n")
abline(h=seq(4,20,by=2),lty=4)
abline(v=grid_dates,lty=4)
axis(side=2,at=seq(4,20,by=2))

Jim

On Wed, Dec 16, 2020 at 2:16 PM Gregory Coats <gregcoats at me.com> wrote:
>
> Jim, Thanks for your help with R.
> Feeding into R the file R_plot_18.r yields for me, on my Mac, R_plot_18.pdf. Success.
> I used abline to draw a horizontal background grid, and then used axis label to identify the values represented by the horizontal dashed background lines.
> abline (h=c(2,4,6,8,10,12,14,16,18,20,22,24), lty=4, lwd=1.0, col="grey60")
> Similarly, I would like to draw a dashed vertical background grid. But it is unclear to me how to direct R to draw a vertical dashed background grid because I am again baffled how to specify to R a date value such as 2018-10-20 @18:00. I welcome your guidance.
> Greg
>
>
> On Dec 13, 2020, at 10:58 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Gregory,
>
> On Mon, Dec 14, 2020 at 12:34 PM Gregory Coats <gregcoats at me.com> wrote:
>
> ...
> Is there a convenient way to tell R to interpret ?2020-12-13? as a date?
>
> Notice the as.Date command in the code I sent to you. this converts a
> string to a date with a resolution of one day. If you want a higher
> time resolution, use strptime or one of the other POSIX date
> conversion functions.
>
> Jim
>
>


From drj|m|emon @end|ng |rom gm@||@com  Wed Dec 16 07:27:27 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 16 Dec 2020 17:27:27 +1100
Subject: [R] get a month where max value is
In-Reply-To: <CAHXS41wxau6Y4pigsGXBxQEtb-A9kGdhPETJUH52+nkYn=ic0w@mail.gmail.com>
References: <CAHXS41wxau6Y4pigsGXBxQEtb-A9kGdhPETJUH52+nkYn=ic0w@mail.gmail.com>
Message-ID: <CA+8X3fWyojx+=UBTvsuEF_sPJiqrmmvgn_YY_4Xg-nkM0qQEeQ@mail.gmail.com>

Hi Ani,
Not sure about this, but is this what you want?

ann10<-aggregate(mon10[3:12],list(mon10$Group.1),which.max)

Jim

On Wed, Dec 16, 2020 at 4:55 PM ani jaya <gaaauul at gmail.com> wrote:
>
> Dear R-Help,
>
> I have a data frame containing monthly maxima of rainfall in 10
> locations for 30 year and want to look at a month where an annual
> maxima happens. I can get the annual maxima using aggregate. I try to
> extract the month using the code below.
>
> ann10<-aggregate(mon10[3:12],list(mon10$Group.1),max,na.rm=T)
> when<-matrix(NA,30,10)
> dum<-list()
> for(j in 1:10){
>   for(i in 1:30){
>     dum<-which(mon10[,j+2]==ann10[i,j+1])
>     when[i,j]<-mon10$Group.2[dum[1]]
>   }
> }
>
> I am aware that the code above is wrong when multiple max value
> detected (so I use dum[1] there). Any elegant solution how to find the
> month?? Thank you
>
> dput(head(mon10,36))
>
> structure(list(Group.1 = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("1985",
> "1986", "1987", "1988", "1989", "1990", "1991", "1992", "1993",
> "1994", "1995", "1996", "1997", "1998", "1999", "2000", "2001",
> "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009",
> "2010", "2011", "2012", "2013", "2014"), class = "factor"), Group.2 =
> structure(c(1L,
> 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L,
> 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L,
> 8L, 9L, 10L, 11L, 12L), .Label = c("01", "02", "03", "04", "05",
> "06", "07", "08", "09", "10", "11", "12"), class = "factor"),
>     V1 = c(0, 0, 0, 0, 0, 0, 1, 13, 0, 0, 0, 0, 175, 123, 76,
>     112, 35, 52, 14, 28, 63, 68, 30, 67, 107, 46, 44, 22, 33,
>     25, 10, 5, 50, 10, 32, 59), V2 = c(167, 50, 48, 114, 128,
>     37, 54, 5, 23, 36, 10, 43, 175, 123, 110, 112, 58, 12, 18,
>     171, 63, 68, 30, 79, 189, 40, 35, 45, 23, 10, 0, 1, 1, 5,
>     34, 71), V3 = c(63.0054, 68.9842, 1, 115.9904, 5.796, 53.0929,
>     63.0092, 18.3692, 0, 30.1854, 12.214, 55.0721, 91.9728, 64.9951,
>     28.431, 21.6815, 38.4651, 48.1583, 1, 1, 1, 7.654, 50.1237,
>     86.9713, 69.9766, 14.2489, 45.2282, 12.4218, 18.5532, 23.9453,
>     38.4967, 0, 0, 1.8495, 41.3493, 69.98), V4 = c(112, 94, 70,
>     18, 6.1, 55, 84.1, 7.1, 0, 4.1, 24.9, 26.9, 42, 38, 38, 62,
>     26, 50, 8, 0, 6, 40, 18, 77, 30, 78, 31, 28, 13, 27, 50,
>     0, 0, 0, 29, 84), V5 = c(114.2545, 96.2488, 71.9131, 14.299,
>     22.2288, 55.4017, 1.971, 3.69, 0, 13.301, 57.5355, 27.3004,
>     39.6649, 34.3766, 34.3278, 63.1532, 21.4376, 49.5373, 4.556,
>     0, 2.7328, 36.8717, 66.3924, 79.1253, 25.1753, 80.1422, 26.2089,
>     23.232, 9.4119, 22.3628, 49.4622, 0, 0, 0, 24.1889, 86.2128
>     ), V6 = c(65, 35, 83, 46, 50, 26, 28, 10, 6, 13, 90, 97,
>     178, 138, 79, 47, 30, 73, 5, 0, 1, 24, 55, 46, 80, 62, 56,
>     57, 21, 18, 0, 0, 0, 9, 36, 175), V7 = c(110, 100, 100, 63,
>     167, 40, 5, 7, 76, 0, 15, 17, 55.1, 116.1, 57.9, 21.1, 0.3,
>     103.1, 14, 0, 5.1, 5.1, 1, 20.1, 31, 26.9, 0.5, 0, 27.9,
>     41, 0, 6.1, 0, 0, 0, 0), V8 = c(78, 87, 37, 98, 0, 0, 0,
>     0, 0, 0, 0, 0, 64, 90, 89, 73, 104, 70, 101, 15, 0, 0, 0,
>     0, 0, 1, 38, 97, 114, 28, 0, 0, 0, 0, 0, 0), V9 = c(29, 17,
>     72, 29, 16, 25, 23, 43, 37, 10, 15, 7, 14, 77, 54, 43, 22,
>     58, 63, 27, 12, 12, 16, 9, 22, 33, 60, 54, 40, 37, 35, 12,
>     1, 4, 11, 49), V10 = c(63.1161, 11.9425, 35.3226, 34.0615,
>     92.9325, 34.0785, 39.009, 21.5103, 17.9209, 50.9037, 32.7218,
>     52.2346, 63.1381, 99.946, 48.0861, 63.1813, 43.7723, 86.9132,
>     39.1252, 49.6261, 40.7285, 112.9464, 49.8403, 66.5253, 21.5789,
>     12.0566, 89.927, 71.7187, 37.816, 5.3817, 1, 0, 0, 4.636,
>     40.7964, 88.9239)), row.names = c(1L, 31L, 61L, 91L, 121L,
> 151L, 181L, 211L, 241L, 271L, 301L, 331L, 2L, 32L, 62L, 92L,
> 122L, 152L, 182L, 212L, 242L, 272L, 302L, 332L, 3L, 33L, 63L,
> 93L, 123L, 153L, 183L, 213L, 243L, 273L, 303L, 333L), class = "data.frame")
>
> sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 18363)
>
>
> Best,
> Ani
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From g@@@uu| @end|ng |rom gm@||@com  Wed Dec 16 07:49:34 2020
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Wed, 16 Dec 2020 15:49:34 +0900
Subject: [R] get a month where max value is
In-Reply-To: <CA+8X3fWyojx+=UBTvsuEF_sPJiqrmmvgn_YY_4Xg-nkM0qQEeQ@mail.gmail.com>
References: <CAHXS41wxau6Y4pigsGXBxQEtb-A9kGdhPETJUH52+nkYn=ic0w@mail.gmail.com>
 <CA+8X3fWyojx+=UBTvsuEF_sPJiqrmmvgn_YY_4Xg-nkM0qQEeQ@mail.gmail.com>
Message-ID: <CAHXS41zCtShY-Nc-EdzOsuuX1U==+zQ1nd6WWVM75tomKekhoQ@mail.gmail.com>

Duh.. I should know that..
That was excellent. Didn't realize that.
Need rest(or practice) for my brain maybe.

Thank you Jim...


On Wed, Dec 16, 2020 at 3:27 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ani,
> Not sure about this, but is this what you want?
>
> ann10<-aggregate(mon10[3:12],list(mon10$Group.1),which.max)
>
> Jim
>
> On Wed, Dec 16, 2020 at 4:55 PM ani jaya <gaaauul at gmail.com> wrote:
> >
> > Dear R-Help,
> >
> > I have a data frame containing monthly maxima of rainfall in 10
> > locations for 30 year and want to look at a month where an annual
> > maxima happens. I can get the annual maxima using aggregate. I try to
> > extract the month using the code below.
> >
> > ann10<-aggregate(mon10[3:12],list(mon10$Group.1),max,na.rm=T)
> > when<-matrix(NA,30,10)
> > dum<-list()
> > for(j in 1:10){
> >   for(i in 1:30){
> >     dum<-which(mon10[,j+2]==ann10[i,j+1])
> >     when[i,j]<-mon10$Group.2[dum[1]]
> >   }
> > }
> >
> > I am aware that the code above is wrong when multiple max value
> > detected (so I use dum[1] there). Any elegant solution how to find the
> > month?? Thank you
> >
> > dput(head(mon10,36))
> >
> > structure(list(Group.1 = structure(c(1L, 1L, 1L, 1L, 1L, 1L,
> > 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("1985",
> > "1986", "1987", "1988", "1989", "1990", "1991", "1992", "1993",
> > "1994", "1995", "1996", "1997", "1998", "1999", "2000", "2001",
> > "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009",
> > "2010", "2011", "2012", "2013", "2014"), class = "factor"), Group.2 =
> > structure(c(1L,
> > 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L,
> > 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L,
> > 8L, 9L, 10L, 11L, 12L), .Label = c("01", "02", "03", "04", "05",
> > "06", "07", "08", "09", "10", "11", "12"), class = "factor"),
> >     V1 = c(0, 0, 0, 0, 0, 0, 1, 13, 0, 0, 0, 0, 175, 123, 76,
> >     112, 35, 52, 14, 28, 63, 68, 30, 67, 107, 46, 44, 22, 33,
> >     25, 10, 5, 50, 10, 32, 59), V2 = c(167, 50, 48, 114, 128,
> >     37, 54, 5, 23, 36, 10, 43, 175, 123, 110, 112, 58, 12, 18,
> >     171, 63, 68, 30, 79, 189, 40, 35, 45, 23, 10, 0, 1, 1, 5,
> >     34, 71), V3 = c(63.0054, 68.9842, 1, 115.9904, 5.796, 53.0929,
> >     63.0092, 18.3692, 0, 30.1854, 12.214, 55.0721, 91.9728, 64.9951,
> >     28.431, 21.6815, 38.4651, 48.1583, 1, 1, 1, 7.654, 50.1237,
> >     86.9713, 69.9766, 14.2489, 45.2282, 12.4218, 18.5532, 23.9453,
> >     38.4967, 0, 0, 1.8495, 41.3493, 69.98), V4 = c(112, 94, 70,
> >     18, 6.1, 55, 84.1, 7.1, 0, 4.1, 24.9, 26.9, 42, 38, 38, 62,
> >     26, 50, 8, 0, 6, 40, 18, 77, 30, 78, 31, 28, 13, 27, 50,
> >     0, 0, 0, 29, 84), V5 = c(114.2545, 96.2488, 71.9131, 14.299,
> >     22.2288, 55.4017, 1.971, 3.69, 0, 13.301, 57.5355, 27.3004,
> >     39.6649, 34.3766, 34.3278, 63.1532, 21.4376, 49.5373, 4.556,
> >     0, 2.7328, 36.8717, 66.3924, 79.1253, 25.1753, 80.1422, 26.2089,
> >     23.232, 9.4119, 22.3628, 49.4622, 0, 0, 0, 24.1889, 86.2128
> >     ), V6 = c(65, 35, 83, 46, 50, 26, 28, 10, 6, 13, 90, 97,
> >     178, 138, 79, 47, 30, 73, 5, 0, 1, 24, 55, 46, 80, 62, 56,
> >     57, 21, 18, 0, 0, 0, 9, 36, 175), V7 = c(110, 100, 100, 63,
> >     167, 40, 5, 7, 76, 0, 15, 17, 55.1, 116.1, 57.9, 21.1, 0.3,
> >     103.1, 14, 0, 5.1, 5.1, 1, 20.1, 31, 26.9, 0.5, 0, 27.9,
> >     41, 0, 6.1, 0, 0, 0, 0), V8 = c(78, 87, 37, 98, 0, 0, 0,
> >     0, 0, 0, 0, 0, 64, 90, 89, 73, 104, 70, 101, 15, 0, 0, 0,
> >     0, 0, 1, 38, 97, 114, 28, 0, 0, 0, 0, 0, 0), V9 = c(29, 17,
> >     72, 29, 16, 25, 23, 43, 37, 10, 15, 7, 14, 77, 54, 43, 22,
> >     58, 63, 27, 12, 12, 16, 9, 22, 33, 60, 54, 40, 37, 35, 12,
> >     1, 4, 11, 49), V10 = c(63.1161, 11.9425, 35.3226, 34.0615,
> >     92.9325, 34.0785, 39.009, 21.5103, 17.9209, 50.9037, 32.7218,
> >     52.2346, 63.1381, 99.946, 48.0861, 63.1813, 43.7723, 86.9132,
> >     39.1252, 49.6261, 40.7285, 112.9464, 49.8403, 66.5253, 21.5789,
> >     12.0566, 89.927, 71.7187, 37.816, 5.3817, 1, 0, 0, 4.636,
> >     40.7964, 88.9239)), row.names = c(1L, 31L, 61L, 91L, 121L,
> > 151L, 181L, 211L, 241L, 271L, 301L, 331L, 2L, 32L, 62L, 92L,
> > 122L, 152L, 182L, 212L, 242L, 272L, 302L, 332L, 3L, 33L, 63L,
> > 93L, 123L, 153L, 183L, 213L, 243L, 273L, 303L, 333L), class = "data.frame")
> >
> > sessionInfo()
> > R version 4.0.2 (2020-06-22)
> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> > Running under: Windows 10 x64 (build 18363)
> >
> >
> > Best,
> > Ani
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Dec 16 07:51:20 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 16 Dec 2020 06:51:20 +0000
Subject: [R] merging multiple .csv files
In-Reply-To: <CAGjf1cNTX4OapC4MZs==34L7G4=jV_5Z4rN5ocA3ay5c0eEWUw@mail.gmail.com>
References: <CAGjf1cM06mQbJg8B-Jr+zpFAf9DceLwSP36rb0CxbRRJdEUJ8w@mail.gmail.com>
 <CAGxFJbQu49AFPAOVzRGoCtfQ4ZuS414k7izQDOJQ6ch7tEDd+g@mail.gmail.com>
 <CAGjf1cNTX4OapC4MZs==34L7G4=jV_5Z4rN5ocA3ay5c0eEWUw@mail.gmail.com>
Message-ID: <82fdd7439b514649b4136315a8ae4cd3@SRVEXCHCM1302.precheza.cz>

Hi.


merge has parameters all, all.x and all.y which should specify if you want to use common or all values from the data frame.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of pooja sinha
> Sent: Tuesday, December 15, 2020 11:14 PM
> To: Bert Gunter <bgunter.4567 at gmail.com>
> Cc: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] merging multiple .csv files
> 
> I know that but I do not want to merge them sequentially because I may lose
> some rows which are present in one file while the other doesn't have. I
> googled and found something called multmerge but the code is not working
> for me. I used the following:
> 
> path <-"P:/Documents/Puja Desktop items/Documents/RESULTS/est meth
> results/Final_est_meth_data_rn6/WGBS_exon_sort_CHG/merge_csv"
> 
> 
> filenames <- list.files(path = path)
> 
> View(filenames)
> multmerge = function(path){
>   filenames=list.files(path=path, full.names=TRUE)
>   datalist = lapply(filenames, function(x){read.csv(file=x,header=T)})
>   Reduce(function(x,y) {merge(x,y)}, datalist)
> }
> 
> full_data = multmerge("~/P:/Documents/Puja Desktop
> items/Documents/RESULTS/est meth
> results/Final_est_meth_data_rn6/WGBS_exon_sort_CHG/merge_csv")
> 
> But after running the full_data, the folder is empty.
> 
> Thanks,
> Puja
> 
> On Tue, Dec 15, 2020 at 4:51 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
> 
> > ?read.csv to read your csv files in data frames
> > ?merge to merge them (sequentially).
> >
> >
> > Bert Gunter
> >
> > "The trouble with having an open mind is that people keep coming along
> and
> > sticking things into it."
> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> > On Tue, Dec 15, 2020 at 1:36 PM pooja sinha <pjsinha07 at gmail.com>
> wrote:
> >
> >> Hi All,
> >>
> >> I have 10 .csv files containing 12 to 15 columns but have some columns in
> >> common. I need to join all of my .csv files into one using one common
> >> column ?Pos?. The header portion of my .csv files looks as shown below:
> >>
> >> Chrom Pos Avg Stdev  A15_3509.C A31_3799.C A32_3800.C A35_3804.C
> Gene ID
> >> Class ExNum
> >>
> >>  Can anyone help me in getting the code for the above problem. Any help
> >> will be highly appreciated.
> >>
> >>
> >> Thanks,
> >>
> >> Puja
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From p@ych@o||u @end|ng |rom gm@||@com  Wed Dec 16 03:48:12 2020
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Tue, 15 Dec 2020 21:48:12 -0500
Subject: [R] Help with simulation of unbalanced clustered data
Message-ID: <CACCU-vPP98E1aFCEWwzackmua2vSxQzk5SjsizdOrD7tLLq_kw@mail.gmail.com>

Dear R experts,

I want to simulate some unbalanced clustered data. The number of clusters
is 20 and the average number of observations is 30. However, I would like
to create an unbalanced clustered data per cluster where there are 10% more
observations than specified (i.e., 33 rather than 30). I then want to
randomly exclude an appropriate number of observations (i.e., 60) to arrive
at the specified average number of observations per cluster (i.e., 30). The
probability of excluding an observation within each cluster was not uniform
(i.e., some clusters had no cases removed and others had more excluded).
Therefore in the end I still have 600 observations in total. How to realize
that in R? Thank you for your help!

Best,

Liu

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Dec 16 13:08:58 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 16 Dec 2020 12:08:58 +0000
Subject: [R] space between bars of a group in ggplot2
In-Reply-To: <453695604.777342.1608112644997@mail.yahoo.com>
References: <1986923615.446973.1607976984551.ref@mail.yahoo.com>
 <1986923615.446973.1607976984551@mail.yahoo.com>
 <1edc3336cf524959827e713766f1eca0@SRVEXCHCM1302.precheza.cz>
 <453695604.777342.1608112644997@mail.yahoo.com>
Message-ID: <e3273be5b54040a7805d0c51829b93b2@SRVEXCHCM1302.precheza.cz>

Hi,

Keep your emails on the list, please.

here are some artificial data
dput(dat)
structure(list(x = c("a", "a", "a", "b", "b", "b"), y = c(1,
1, 1, 3, 3, 3), cond = c("x1", "x2", "x3", "y1", "y2", "y3")), row.names = 
c(NA,
6L), class = "data.frame")

And possible result
hist <- ggplot(dat, aes(x=x, y=y, fill=cond, stat="identity"))
hist + geom_col(width=0.4, position = position_dodge(width=0.5))

You could change colour scheme
https://stackoverflow.com/questions/18229835/how-do-i-manually-set-geom-bar-fill-color-in-ggplot

hist + geom_col(width=0.4, position = position_dodge(width=0.5))+
scale_fill_manual(values=rep(c("red", "blue"), each=3))

Cheers
Petr


From: azam jaafari <azamjaafari at yahoo.com>
Sent: Wednesday, December 16, 2020 10:57 AM
To: PIKAL Petr <petr.pikal at precheza.cz>
Subject: Re: [R] space between bars of a group in ggplot2

Hi Petr

Thank you for reply. I used this link 
(https://stackoverflow.com/questions/6085238/adding-space-between-bars-in-ggplot2) 
for separating bars, but it doesnt work for my purpose. since I have same 
levels for one group, with this code, the bars are connected together: as a 
bar for one group. While I want to add some space between three bars belong to 
one group.

I really appreciate if you can help me

Sincerely
Azam



On Tuesday, December 15, 2020, 4:11:16 PM GMT+3:30, PIKAL Petr 
<petr.pikal at precheza.cz> wrote:


Hi

Your code is not reproducible, however you could follow this advice.

https://stackoverflow.com/questions/6085238/adding-space-between-bars-in-ggplot2

Cheers
Petr

> -----Original Message-----
> From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of azam jaafari 
> via
> R-help
> Sent: Monday, December 14, 2020 9:16 PM
> To: mailto:r-help at r-project.org
> Subject: [R] space between bars of a group in ggplot2
>
> Hello Dear
> I want to make a barplot for groups with three repetitions and same values.
> dataset is like this:
>
> groups:                  a                              b
> c
> value:          1.2, 1.2, 1.2            2.5, 2.5,2.5
> Condition:    sat, sat, sat,        unsat,unsat,unsat,
>
> that bars fill based on "condition"
> I used the below code:
>
> data%>%ggplot(aes(x=factor(groups), y=value, fill=factor(condition),
> group=condition)) +
>  geom_bar(olour="black",stat="identity", position = position_dodge(width =
> 0.8), width=0.7)+ scale_y_continuous(breaks=seq(0, 6.5, 1),limits=c(0,
> 6.5),expand=c(0,0))+ scale_x_discrete(expand=c(0.000001,0))+
>  theme( axis.line = element_line(colour = "darkblue",
>                      size = 1, linetype = "solid"))+ labs(x = "group Code",
> y = "Z") +
>    theme(panel.background = element_rect(fill = 'white'))+labs(fill =
> "Condition")+
>  theme(axis.text.x = element_text(face='bold',size=8, color='black', angle =
> 90, vjust = 0.5)) +
>  theme(axis.text.y = element_text(face='bold', size=8, color='black'))
>
>
> but it makes the connected bars (without any space between values) for each
> group, while I want to add a space between bars for  each value of each
> group.
>
> Thank you for helping
> BestAzam

>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.






Adding space between bars in ggplot2
I'd like to add spaces between bars in ggplot2. This page offers one solution: 
http://www.streamreader.org/stats...





From tri@g m@iii@g oii gvd@et@dk  Wed Dec 16 14:02:59 2020
From: tri@g m@iii@g oii gvd@et@dk (tri@g m@iii@g oii gvd@et@dk)
Date: Wed, 16 Dec 2020 14:02:59 +0100
Subject: [R] ggplot complicated ylab
Message-ID: <1141a01d6d3ab$c8090130$581b0390$@gvdnet.dk>

Dear friends - I need an ylab on 2 lines -

Here is what I want:

exp <- expression(paste("Cumulative Na-Cl balance ","\n",

                        "and (red) ",Delta,HCO[3]^"-","  mmol"))

So if exp was OK ylab(exp) would work - but the "\n" doesn't seem to do
anything and it all comes on one line. 

I hope someone will point in the right direction

 

All best wishes

 

Troels Ring, Aalborg, Denmark


This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com
<http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
p&url=/> 

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec 16 14:17:20 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 16 Dec 2020 05:17:20 -0800
Subject: [R] ggplot complicated ylab
In-Reply-To: <1141a01d6d3ab$c8090130$581b0390$@gvdnet.dk>
References: <1141a01d6d3ab$c8090130$581b0390$@gvdnet.dk>
Message-ID: <F283A1C8-5984-4C70-93DE-59E2F78653A4@dcn.davis.ca.us>

Perhaps [1] has some useful ideas?

[1] https://stackoverflow.com/questions/13223846/ggplot2-two-line-label-with-expression

On December 16, 2020 5:02:59 AM PST, tring at gvdnet.dk wrote:
>Dear friends - I need an ylab on 2 lines -
>
>Here is what I want:
>
>exp <- expression(paste("Cumulative Na-Cl balance ","\n",
>
>                        "and (red) ",Delta,HCO[3]^"-","  mmol"))
>
>So if exp was OK ylab(exp) would work - but the "\n" doesn't seem to do
>anything and it all comes on one line. 
>
>I hope someone will point in the right direction
>
> 
>
>All best wishes
>
> 
>
>Troels Ring, Aalborg, Denmark
>
>
>This email has been scanned by BullGuard antivirus protection.
>For more info visit www.bullguard.com
><http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
>p&url=/> 
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec 16 14:50:40 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 16 Dec 2020 05:50:40 -0800
Subject: [R] Help with simulation of unbalanced clustered data
In-Reply-To: <CACCU-vPP98E1aFCEWwzackmua2vSxQzk5SjsizdOrD7tLLq_kw@mail.gmail.com>
References: <CACCU-vPP98E1aFCEWwzackmua2vSxQzk5SjsizdOrD7tLLq_kw@mail.gmail.com>
Message-ID: <6BEE03D7-A4BF-4061-A49B-6BD5DCC425A5@dcn.davis.ca.us>

This is R-help, not R-do-my-work-for-me. It is also not a homework help line. The Posting Guide is required reading. Assuming this is not homework, since each step in your problem definition can be mapped to a fairly basic operation in R (the sample function and indexing being key tools), you should be showing your work with a reproducible example that illustrates where you are stuck or why the result you are getting does not exhibit the desired properties.

On December 15, 2020 6:48:12 PM PST, Chao Liu <psychaoliu at gmail.com> wrote:
>Dear R experts,
>
>I want to simulate some unbalanced clustered data. The number of
>clusters
>is 20 and the average number of observations is 30. However, I would
>like
>to create an unbalanced clustered data per cluster where there are 10%
>more
>observations than specified (i.e., 33 rather than 30). I then want to
>randomly exclude an appropriate number of observations (i.e., 60) to
>arrive
>at the specified average number of observations per cluster (i.e., 30).
>The
>probability of excluding an observation within each cluster was not
>uniform
>(i.e., some clusters had no cases removed and others had more
>excluded).
>Therefore in the end I still have 600 observations in total. How to
>realize
>that in R? Thank you for your help!
>
>Best,
>
>Liu
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From tri@g m@iii@g oii gvd@et@dk  Wed Dec 16 15:19:32 2020
From: tri@g m@iii@g oii gvd@et@dk (tri@g m@iii@g oii gvd@et@dk)
Date: Wed, 16 Dec 2020 15:19:32 +0100
Subject: [R] ggplot complicated ylab
In-Reply-To: pWglkULK6fWLMpWgmkfQ7q
References: <1141a01d6d3ab$c8090130$581b0390$@gvdnet.dk> pWglkULK6fWLMpWgmkfQ7q
Message-ID: <118a701d6d3b6$79713820$6c53a860$@gvdnet.dk>

Thanks a lot!
exp <- expression(atop("Cumulative Na-Cl balance and",paste("(red)
",Delta,HCO[3]^"-","  (mmol)")))
did the trick!!!!


All best
Troels

-----Oprindelig meddelelse-----
Fra: R-help <r-help-bounces at r-project.org> P? vegne af Jeff Newmiller
Sendt: 16. december 2020 14:17
Til: r-help at r-project.org; tring at gvdnet.dk; r-help mailing list
<r-help at r-project.org>
Emne: Re: [R] ggplot complicated ylab

Perhaps [1] has some useful ideas?

[1]
https://stackoverflow.com/questions/13223846/ggplot2-two-line-label-with-exp
ression

On December 16, 2020 5:02:59 AM PST, tring at gvdnet.dk wrote:
>Dear friends - I need an ylab on 2 lines -
>
>Here is what I want:
>
>exp <- expression(paste("Cumulative Na-Cl balance ","\n",
>
>                        "and (red) ",Delta,HCO[3]^"-","  mmol"))
>
>So if exp was OK ylab(exp) would work - but the "\n" doesn't seem to do 
>anything and it all comes on one line.
>
>I hope someone will point in the right direction
>
> 
>
>All best wishes
>
> 
>
>Troels Ring, Aalborg, Denmark
>
>
>This email has been scanned by BullGuard antivirus protection.
>For more info visit www.bullguard.com
><http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliat
>e=smt
>p&url=/>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Dec 16 16:31:42 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Wed, 16 Dec 2020 09:31:42 -0600
Subject: [R] making code (loop) more efficient
In-Reply-To: <CA+8X3fVBCrDyXLM3VkKQ4sciftEG8nkV8F9POcT5obiK+nAD9g@mail.gmail.com>
References: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>
 <CA+8X3fU8av5Y79Y5LzaMuvTQo=+z+AMN4J1FNeuUisQGVj1Bsg@mail.gmail.com>
 <CAF9-5jNsN_AANKnOqbGu3jjQ1OE6tk+A7H4kZYqRGW6Vb6jGYw@mail.gmail.com>
 <CA+8X3fXfk+26A0TmVLocs6_6x_EWFCnfuFc_k-7Fs=L6SVq83A@mail.gmail.com>
 <CAF9-5jNPTqc_XA279S=n4uRin3durJLcrON-j93e3t6JcnBO7g@mail.gmail.com>
 <CA+8X3fVBCrDyXLM3VkKQ4sciftEG8nkV8F9POcT5obiK+nAD9g@mail.gmail.com>
Message-ID: <CAF9-5jOUptawb=XHNJETZ-ifpvb22ARNfxGfKD260b27uKj==w@mail.gmail.com>

HI Jim,

this is what I as running:

library(parallel)
library(data.table)
library(foreach)
library(doSNOW)

n <-  parallel::detectCores()
cl <- parallel::makeCluster(n, type = "SOCK")
doSNOW::registerDoSNOW(cl)
files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)

lst_out <- foreach::foreach(i = seq_along(files),
                  .packages = c("data.table") ) %dopar% {

   a <- get(load(files[i]))
namesplit<-strsplit(rownames(a),":")
rsid<-unlist(lapply(namesplit,"[",1))
ref_allele<-unlist(lapply(namesplit,"[",3))
eff_allele<-unlist(lapply(namesplit,"[",4))
WGT<-rep(files[i],length(rsid))
data<-data.frame(rsid=rsid,weight=a$blup,     #weight is "blup" column
 ref_allele=ref_allele,eff_allele,WGT=WGT)

   return(data)
 }
parallel::stopCluster(cl)

big_data <- rbindlist(lst_out)

and i got:
Error in { : task 4 failed - "$ operator is invalid for atomic vectors"
> parallel::stopCluster(cl)

I uploaded 3 RDat file here if you want to try it
https://github.com/montenegrina/sample

Thank you for looking into this
Ana

On Tue, Dec 15, 2020 at 11:45 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ana,
> Back on the job. I'm not sure how this will work in your setup, but
> here is a try:
>
> a<-read.table(text="top1 blup lasso enet
> rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> rs12830904:188335:T:A 0.92793158 -9.143555e-05     0    0
> rs1500098:189093:G:C  0.42032471  9.001814e-04     0    0
> rs79410690:190097:G:A 0.26194244  5.019037e-04     0    0",
> header=TRUE,stringsAsFactors=FALSE)
> namesplit<-strsplit(rownames(a),":")
> rsid<-unlist(lapply(namesplit,"[",1))
> ref_allele<-unlist(lapply(namesplit,"[",3))
> eff_allele<-unlist(lapply(namesplit,"[",4))
> # here I'm assuming that the filename
> # is stored in files[i]
> files<-"retina.ENSG00000135776.wgt.RDat"
> i<-1
> WGT<-rep(files[i],length(rsid))
> data<-data.frame(rsid=rsid,weight=a$top1,
>  ref_allele=ref_allele,eff_allele,WGT=WGT)
> data
>
> Note that the output is a data frame, not a data table. I hope that
> the function for creating a data table is close enough to that for a
> data frame for you to work it out. If not I can probably have a look
> at it a bit later.
>
> Jim
>
> On Wed, Dec 16, 2020 at 1:45 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> >
> > Hi Jim,
> >
> > as always you're completely right, this is what is happening:
> >
> > > head(a)
> >                             top1          blup lasso enet
> > rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> > rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> > rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> > rs12830904:188335:T:A 0.92793158 -9.143555e-05     0    0
> > rs1500098:189093:G:C  0.42032471  9.001814e-04     0    0
> > rs79410690:190097:G:A 0.26194244  5.019037e-04     0    0
> > >    names <- rownames(a)
> > >    data <- data.table(names, a["blup"])
> > > head(data)
> >                    names V2
> > 1:  rs4980905:184404:C:A NA
> > 2:  rs7978751:187541:G:C NA
> > 3:  rs2368831:188285:C:T NA
> > 4: rs12830904:188335:T:A NA
> > 5:  rs1500098:189093:G:C NA
> > 6: rs79410690:190097:G:A NA
> >
> > So my goal is to transform what is in "a" to this for every RDat file:
> >
> >           rsid        weight ref_allele eff_allele
> > 1:  rs72763981  9.376766e-09          C          G
> > 2: rs144383755 -2.093346e-09          A          G
> > 3:   rs1925717  1.511376e-08          T          C
> > 4:  rs61827307 -1.625302e-08          C          A
> > 5:  rs61827308 -1.625302e-08          G          C
> > 6: rs199623136 -9.128354e-10         GC          G
> >                            WGT
> > 1: retina.ENSG00000135776.wgt.RDat
> > 2: retina.ENSG00000135776.wgt.RDat
> > 3: retina.ENSG00000135776.wgt.RDat
> > 4: retina.ENSG00000135776.wgt.RDat
> > 5: retina.ENSG00000135776.wgt.RDat
> > 6: retina.ENSG00000135776.wgt.RDat
> >
> > so from rs4980905:184404:C:A I would take rs4980905 to be in column
> > "rsid", C in column "ref_allele" and A to be in column "eff_allele",
> > WGT column would just be filled with a name of the particular RDat
> > file.
> >
> > So the issue is in these lines:
> >
> > a <- get(load(files[i]))
> > names <- rownames(a)
> > data <- data.table(names, a["blup"])
> > nm1 <- c("rsid", "ref_allele", "eff_allele")
> >
> > any idea how I can rewrite this?
> >
> >
> >
> > On Tue, Dec 15, 2020 at 8:30 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> > >
> > > Hi Ana,
> > > I would look at "data" in your second example and see if it contains a
> > > column named "blup" or just the values that were extracted from
> > > a$blup. Also, I assume that weight=blup looks for an object named
> > > "blup", which may not be there.
> > >
> > > Jim
> > >
> > > On Wed, Dec 16, 2020 at 1:20 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > > >
> > > > Hi Jim,
> > > >
> > > > Maybe my post is confusing.
> > > >
> > > > so "dd" came from my slow code and I don't use it again in parallelized code.
> > > >
> > > > So for example for one of my files:
> > > >
> > > > if
> > > > i="retina.ENSG00000120647.wgt.RDat"
> > > > > a <- get(load(i))
> > > > > head(a)
> > > >                             top1          blup lasso enet
> > > > rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> > > > rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> > > > rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> > > > ...
> > > >
> > > > Slow code was posted just to show what was running very slow and it
> > > > was running. I really need help fixing parallelized version.
> > > >
> > > > On Tue, Dec 15, 2020 at 7:35 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> > > > >
> > > > > Hi Ana,
> > > > > My guess is that in your second code fragment you are assigning the
> > > > > rownames of "a" and the _values_ contained in a$blup to the data.table
> > > > > "data". As I don't have much experience with data tables I may be
> > > > > wrong, but I suspect that the column name "blup" may not be visible or
> > > > > even present in "data". I don't see it in "dd" above this code
> > > > > fragment.
> > > > >
> > > > > Jim
> > > > >
> > > > > On Wed, Dec 16, 2020 at 11:12 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > > > > >
> > > > > > Hello,
> > > > > >
> > > > > > I made a terribly inefficient code which runs forever but it does run.
> > > > > >
> > > > > > library(dplyr)
> > > > > > library(splitstackshape)
> > > > > >
> > > > > > datalist = list()
> > > > > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > > > > >
> > > > > > for(i in files)
> > > > > > {
> > > > > > a<-get(load(i))
> > > > > > names <- rownames(a)
> > > > > > data <- as.data.frame(cbind(names,a))
> > > > > > rownames(data) <- NULL
> > > > > > dd=na.omit(concat.split.multiple(data = data, split.cols = c("names"),
> > > > > > seps = ":"))
> > > > > > dd=select(dd,names_1,blup,names_3,names_4)
> > > > > > colnames(dd)=c("rsid","weight","ref_allele","eff_allele")
> > > > > > dd$WGT<-i
> > > > > > datalist[[i]] <- dd # add it to your list
> > > > > > }
> > > > > >
> > > > > > big_data = do.call(rbind, datalist)
> > > > > >
> > > > > > There is 17345 RDat files this loop has to go through. And each file
> > > > > > has approximately 10,000 lines. All RDat files can be downloaded from
> > > > > > here: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE115828 and
> > > > > > they are compressed in this file: GSE115828_retina_TWAS_wgts.tar.gz .
> > > > > > And subset of 3 of those .RDat files is here:
> > > > > > https://github.com/montenegrina/sample
> > > > > >
> > > > > > For one of those files, say i="retina.ENSG00000135776.wgt.RDat"
> > > > > > dd looks like this:
> > > > > >
> > > > > > > head(dd)
> > > > > >           rsid        weight ref_allele eff_allele
> > > > > > 1:  rs72763981  9.376766e-09          C          G
> > > > > > 2: rs144383755 -2.093346e-09          A          G
> > > > > > 3:   rs1925717  1.511376e-08          T          C
> > > > > > 4:  rs61827307 -1.625302e-08          C          A
> > > > > > 5:  rs61827308 -1.625302e-08          G          C
> > > > > > 6: rs199623136 -9.128354e-10         GC          G
> > > > > >                            WGT
> > > > > > 1: retina.ENSG00000135776.wgt.RDat
> > > > > > 2: retina.ENSG00000135776.wgt.RDat
> > > > > > 3: retina.ENSG00000135776.wgt.RDat
> > > > > > 4: retina.ENSG00000135776.wgt.RDat
> > > > > > 5: retina.ENSG00000135776.wgt.RDat
> > > > > > 6: retina.ENSG00000135776.wgt.RDat
> > > > > >
> > > > > > so on attempt to parallelize this I did this:
> > > > > >
> > > > > > library(parallel)
> > > > > > library(data.table)
> > > > > > library(foreach)
> > > > > > library(doSNOW)
> > > > > >
> > > > > > n <-  parallel::detectCores()
> > > > > > cl <- parallel::makeCluster(n, type = "SOCK")
> > > > > > doSNOW::registerDoSNOW(cl)
> > > > > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > > > > >
> > > > > > lst_out <- foreach::foreach(i = seq_along(files),
> > > > > >                   .packages = c("data.table") ) %dopar% {
> > > > > >
> > > > > >    a <- get(load(files[i]))
> > > > > >    names <- rownames(a)
> > > > > >    data <- data.table(names, a["blup"])
> > > > > >    nm1 <- c("rsid", "ref_allele", "eff_allele")
> > > > > >    data[,  (nm1) := tstrsplit(names, ":")[-2]]
> > > > > >    return(data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
> > > > > >                WGT := files[i]][])
> > > > > >  }
> > > > > > parallel::stopCluster(cl)
> > > > > >
> > > > > > big_data <- rbindlist(lst_out)
> > > > > >
> > > > > > I am getting this Error:
> > > > > >
> > > > > > Error in { : task 7 failed - "object 'blup' not found"
> > > > > > > parallel::stopCluster(cl)
> > > > > >
> > > > > > Can you please advise,
> > > > > > Ana
> > > > > >
> > > > > > ______________________________________________
> > > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > > > and provide commented, minimal, self-contained, reproducible code.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Dec 16 17:34:05 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Wed, 16 Dec 2020 10:34:05 -0600
Subject: [R] making code (loop) more efficient
In-Reply-To: <CAF9-5jOUptawb=XHNJETZ-ifpvb22ARNfxGfKD260b27uKj==w@mail.gmail.com>
References: <CAF9-5jNae+9GstPQB3u4EwacoJWswbrBnRz=NQbj3rhhcNgG_A@mail.gmail.com>
 <CA+8X3fU8av5Y79Y5LzaMuvTQo=+z+AMN4J1FNeuUisQGVj1Bsg@mail.gmail.com>
 <CAF9-5jNsN_AANKnOqbGu3jjQ1OE6tk+A7H4kZYqRGW6Vb6jGYw@mail.gmail.com>
 <CA+8X3fXfk+26A0TmVLocs6_6x_EWFCnfuFc_k-7Fs=L6SVq83A@mail.gmail.com>
 <CAF9-5jNPTqc_XA279S=n4uRin3durJLcrON-j93e3t6JcnBO7g@mail.gmail.com>
 <CA+8X3fVBCrDyXLM3VkKQ4sciftEG8nkV8F9POcT5obiK+nAD9g@mail.gmail.com>
 <CAF9-5jOUptawb=XHNJETZ-ifpvb22ARNfxGfKD260b27uKj==w@mail.gmail.com>
Message-ID: <CAF9-5jP9-KPiOkAGbo-xK9tKJAbj59Mm86cM7dEs1M3KLixejg@mail.gmail.com>

Indeed it was the issue with data.table. I converted it to data.frame
and it worked like a charm.
Thank you so much for your insight!

This is the code that worked:

library(parallel)
library(data.table)
library(doSNOW)

n <-  parallel::detectCores()
cl <- parallel::makeCluster(n, type = "SOCK")
doSNOW::registerDoSNOW(cl)
files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)

lst_out <- foreach::foreach(i = seq_along(files),
                  .packages = c("data.table") ) %dopar% {

   tmp <- get(load(files[i]))
   a <- data.table::copy(tmp)
   a=as.data.frame(a)
   rm(tmp)
   gc()

   names <- rownames(a)
   if("blup" %in% colnames(a)) {
     data <- data.table(names, a["blup"])
     nm1 <- c("rsid", "ref_allele", "eff_allele")
     data[,  (nm1) := tstrsplit(names, ":")[-2]]
     out <- data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
               WGT := files[i]][]
    } else {

     data <- data.table(names)
     nm1 <- c("rsid", "ref_allele", "eff_allele")
     data[,  (nm1) := tstrsplit(names, ":")[-2]]
     out <- data[, .(rsid,  ref_allele, eff_allele)][,
               WGT := files[i]][]
   }

    return(out)
   rm(data)
   gc()
 }
parallel::stopCluster(cl)

big_data <- rbindlist(lst_out, fill = TRUE)

On Wed, Dec 16, 2020 at 9:31 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> HI Jim,
>
> this is what I as running:
>
> library(parallel)
> library(data.table)
> library(foreach)
> library(doSNOW)
>
> n <-  parallel::detectCores()
> cl <- parallel::makeCluster(n, type = "SOCK")
> doSNOW::registerDoSNOW(cl)
> files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
>
> lst_out <- foreach::foreach(i = seq_along(files),
>                   .packages = c("data.table") ) %dopar% {
>
>    a <- get(load(files[i]))
> namesplit<-strsplit(rownames(a),":")
> rsid<-unlist(lapply(namesplit,"[",1))
> ref_allele<-unlist(lapply(namesplit,"[",3))
> eff_allele<-unlist(lapply(namesplit,"[",4))
> WGT<-rep(files[i],length(rsid))
> data<-data.frame(rsid=rsid,weight=a$blup,     #weight is "blup" column
>  ref_allele=ref_allele,eff_allele,WGT=WGT)
>
>    return(data)
>  }
> parallel::stopCluster(cl)
>
> big_data <- rbindlist(lst_out)
>
> and i got:
> Error in { : task 4 failed - "$ operator is invalid for atomic vectors"
> > parallel::stopCluster(cl)
>
> I uploaded 3 RDat file here if you want to try it
> https://github.com/montenegrina/sample
>
> Thank you for looking into this
> Ana
>
> On Tue, Dec 15, 2020 at 11:45 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Ana,
> > Back on the job. I'm not sure how this will work in your setup, but
> > here is a try:
> >
> > a<-read.table(text="top1 blup lasso enet
> > rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> > rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> > rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> > rs12830904:188335:T:A 0.92793158 -9.143555e-05     0    0
> > rs1500098:189093:G:C  0.42032471  9.001814e-04     0    0
> > rs79410690:190097:G:A 0.26194244  5.019037e-04     0    0",
> > header=TRUE,stringsAsFactors=FALSE)
> > namesplit<-strsplit(rownames(a),":")
> > rsid<-unlist(lapply(namesplit,"[",1))
> > ref_allele<-unlist(lapply(namesplit,"[",3))
> > eff_allele<-unlist(lapply(namesplit,"[",4))
> > # here I'm assuming that the filename
> > # is stored in files[i]
> > files<-"retina.ENSG00000135776.wgt.RDat"
> > i<-1
> > WGT<-rep(files[i],length(rsid))
> > data<-data.frame(rsid=rsid,weight=a$top1,
> >  ref_allele=ref_allele,eff_allele,WGT=WGT)
> > data
> >
> > Note that the output is a data frame, not a data table. I hope that
> > the function for creating a data table is close enough to that for a
> > data frame for you to work it out. If not I can probably have a look
> > at it a bit later.
> >
> > Jim
> >
> > On Wed, Dec 16, 2020 at 1:45 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > >
> > > Hi Jim,
> > >
> > > as always you're completely right, this is what is happening:
> > >
> > > > head(a)
> > >                             top1          blup lasso enet
> > > rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> > > rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> > > rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> > > rs12830904:188335:T:A 0.92793158 -9.143555e-05     0    0
> > > rs1500098:189093:G:C  0.42032471  9.001814e-04     0    0
> > > rs79410690:190097:G:A 0.26194244  5.019037e-04     0    0
> > > >    names <- rownames(a)
> > > >    data <- data.table(names, a["blup"])
> > > > head(data)
> > >                    names V2
> > > 1:  rs4980905:184404:C:A NA
> > > 2:  rs7978751:187541:G:C NA
> > > 3:  rs2368831:188285:C:T NA
> > > 4: rs12830904:188335:T:A NA
> > > 5:  rs1500098:189093:G:C NA
> > > 6: rs79410690:190097:G:A NA
> > >
> > > So my goal is to transform what is in "a" to this for every RDat file:
> > >
> > >           rsid        weight ref_allele eff_allele
> > > 1:  rs72763981  9.376766e-09          C          G
> > > 2: rs144383755 -2.093346e-09          A          G
> > > 3:   rs1925717  1.511376e-08          T          C
> > > 4:  rs61827307 -1.625302e-08          C          A
> > > 5:  rs61827308 -1.625302e-08          G          C
> > > 6: rs199623136 -9.128354e-10         GC          G
> > >                            WGT
> > > 1: retina.ENSG00000135776.wgt.RDat
> > > 2: retina.ENSG00000135776.wgt.RDat
> > > 3: retina.ENSG00000135776.wgt.RDat
> > > 4: retina.ENSG00000135776.wgt.RDat
> > > 5: retina.ENSG00000135776.wgt.RDat
> > > 6: retina.ENSG00000135776.wgt.RDat
> > >
> > > so from rs4980905:184404:C:A I would take rs4980905 to be in column
> > > "rsid", C in column "ref_allele" and A to be in column "eff_allele",
> > > WGT column would just be filled with a name of the particular RDat
> > > file.
> > >
> > > So the issue is in these lines:
> > >
> > > a <- get(load(files[i]))
> > > names <- rownames(a)
> > > data <- data.table(names, a["blup"])
> > > nm1 <- c("rsid", "ref_allele", "eff_allele")
> > >
> > > any idea how I can rewrite this?
> > >
> > >
> > >
> > > On Tue, Dec 15, 2020 at 8:30 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> > > >
> > > > Hi Ana,
> > > > I would look at "data" in your second example and see if it contains a
> > > > column named "blup" or just the values that were extracted from
> > > > a$blup. Also, I assume that weight=blup looks for an object named
> > > > "blup", which may not be there.
> > > >
> > > > Jim
> > > >
> > > > On Wed, Dec 16, 2020 at 1:20 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > > > >
> > > > > Hi Jim,
> > > > >
> > > > > Maybe my post is confusing.
> > > > >
> > > > > so "dd" came from my slow code and I don't use it again in parallelized code.
> > > > >
> > > > > So for example for one of my files:
> > > > >
> > > > > if
> > > > > i="retina.ENSG00000120647.wgt.RDat"
> > > > > > a <- get(load(i))
> > > > > > head(a)
> > > > >                             top1          blup lasso enet
> > > > > rs4980905:184404:C:A  0.07692622 -1.881795e-04     0    0
> > > > > rs7978751:187541:G:C  0.62411425  9.934994e-04     0    0
> > > > > rs2368831:188285:C:T  0.69529158  1.211028e-03     0    0
> > > > > ...
> > > > >
> > > > > Slow code was posted just to show what was running very slow and it
> > > > > was running. I really need help fixing parallelized version.
> > > > >
> > > > > On Tue, Dec 15, 2020 at 7:35 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> > > > > >
> > > > > > Hi Ana,
> > > > > > My guess is that in your second code fragment you are assigning the
> > > > > > rownames of "a" and the _values_ contained in a$blup to the data.table
> > > > > > "data". As I don't have much experience with data tables I may be
> > > > > > wrong, but I suspect that the column name "blup" may not be visible or
> > > > > > even present in "data". I don't see it in "dd" above this code
> > > > > > fragment.
> > > > > >
> > > > > > Jim
> > > > > >
> > > > > > On Wed, Dec 16, 2020 at 11:12 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > > > > > >
> > > > > > > Hello,
> > > > > > >
> > > > > > > I made a terribly inefficient code which runs forever but it does run.
> > > > > > >
> > > > > > > library(dplyr)
> > > > > > > library(splitstackshape)
> > > > > > >
> > > > > > > datalist = list()
> > > > > > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > > > > > >
> > > > > > > for(i in files)
> > > > > > > {
> > > > > > > a<-get(load(i))
> > > > > > > names <- rownames(a)
> > > > > > > data <- as.data.frame(cbind(names,a))
> > > > > > > rownames(data) <- NULL
> > > > > > > dd=na.omit(concat.split.multiple(data = data, split.cols = c("names"),
> > > > > > > seps = ":"))
> > > > > > > dd=select(dd,names_1,blup,names_3,names_4)
> > > > > > > colnames(dd)=c("rsid","weight","ref_allele","eff_allele")
> > > > > > > dd$WGT<-i
> > > > > > > datalist[[i]] <- dd # add it to your list
> > > > > > > }
> > > > > > >
> > > > > > > big_data = do.call(rbind, datalist)
> > > > > > >
> > > > > > > There is 17345 RDat files this loop has to go through. And each file
> > > > > > > has approximately 10,000 lines. All RDat files can be downloaded from
> > > > > > > here: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE115828 and
> > > > > > > they are compressed in this file: GSE115828_retina_TWAS_wgts.tar.gz .
> > > > > > > And subset of 3 of those .RDat files is here:
> > > > > > > https://github.com/montenegrina/sample
> > > > > > >
> > > > > > > For one of those files, say i="retina.ENSG00000135776.wgt.RDat"
> > > > > > > dd looks like this:
> > > > > > >
> > > > > > > > head(dd)
> > > > > > >           rsid        weight ref_allele eff_allele
> > > > > > > 1:  rs72763981  9.376766e-09          C          G
> > > > > > > 2: rs144383755 -2.093346e-09          A          G
> > > > > > > 3:   rs1925717  1.511376e-08          T          C
> > > > > > > 4:  rs61827307 -1.625302e-08          C          A
> > > > > > > 5:  rs61827308 -1.625302e-08          G          C
> > > > > > > 6: rs199623136 -9.128354e-10         GC          G
> > > > > > >                            WGT
> > > > > > > 1: retina.ENSG00000135776.wgt.RDat
> > > > > > > 2: retina.ENSG00000135776.wgt.RDat
> > > > > > > 3: retina.ENSG00000135776.wgt.RDat
> > > > > > > 4: retina.ENSG00000135776.wgt.RDat
> > > > > > > 5: retina.ENSG00000135776.wgt.RDat
> > > > > > > 6: retina.ENSG00000135776.wgt.RDat
> > > > > > >
> > > > > > > so on attempt to parallelize this I did this:
> > > > > > >
> > > > > > > library(parallel)
> > > > > > > library(data.table)
> > > > > > > library(foreach)
> > > > > > > library(doSNOW)
> > > > > > >
> > > > > > > n <-  parallel::detectCores()
> > > > > > > cl <- parallel::makeCluster(n, type = "SOCK")
> > > > > > > doSNOW::registerDoSNOW(cl)
> > > > > > > files <- list.files("/WEIGHTS1/Retina", pattern=".RDat", ignore.case=T)
> > > > > > >
> > > > > > > lst_out <- foreach::foreach(i = seq_along(files),
> > > > > > >                   .packages = c("data.table") ) %dopar% {
> > > > > > >
> > > > > > >    a <- get(load(files[i]))
> > > > > > >    names <- rownames(a)
> > > > > > >    data <- data.table(names, a["blup"])
> > > > > > >    nm1 <- c("rsid", "ref_allele", "eff_allele")
> > > > > > >    data[,  (nm1) := tstrsplit(names, ":")[-2]]
> > > > > > >    return(data[, .(rsid, weight = blup, ref_allele, eff_allele)][,
> > > > > > >                WGT := files[i]][])
> > > > > > >  }
> > > > > > > parallel::stopCluster(cl)
> > > > > > >
> > > > > > > big_data <- rbindlist(lst_out)
> > > > > > >
> > > > > > > I am getting this Error:
> > > > > > >
> > > > > > > Error in { : task 7 failed - "object 'blup' not found"
> > > > > > > > parallel::stopCluster(cl)
> > > > > > >
> > > > > > > Can you please advise,
> > > > > > > Ana
> > > > > > >
> > > > > > > ______________________________________________
> > > > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > > > > and provide commented, minimal, self-contained, reproducible code.


From p@ych@o||u @end|ng |rom gm@||@com  Wed Dec 16 15:56:12 2020
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Wed, 16 Dec 2020 09:56:12 -0500
Subject: [R] Help with simulation of unbalanced clustered data
In-Reply-To: <6BEE03D7-A4BF-4061-A49B-6BD5DCC425A5@dcn.davis.ca.us>
References: <CACCU-vPP98E1aFCEWwzackmua2vSxQzk5SjsizdOrD7tLLq_kw@mail.gmail.com>
 <6BEE03D7-A4BF-4061-A49B-6BD5DCC425A5@dcn.davis.ca.us>
Message-ID: <CACCU-vP_hi2anUxVGct7biKZC2GNS=xsfnNKEPt0D8yAReL2dw@mail.gmail.com>

Thank you for the reminder, Jeff. I am new to R-help and so please
bear with my ignorance. This is not homework and here is a
reproducible example. The number of observations per cluster doesn't
follow the condition specified above though, I just used this to
convey my idea.

   > y <- rnorm(20)

> x <- rnorm(20)
> z <- rep(1:5, 4)
> w <- rep(1:4, each=5)
> dd <- data.frame(id=z,cluster=w,x=x,y=y) #this is a balanced dataset
   id cluster           x           y
1   1       1  0.30003855  0.65325768
2   2       1 -1.00563626 -0.12270866
3   3       1  0.01925927 -0.41367651
4   4       1 -1.07742065 -2.64314895
5   5       1  0.71270333 -0.09294102
6   1       2  1.08477509  0.43028470
7   2       2 -2.22498770  0.53539884
8   3       2  1.23569346 -0.55527835
9   4       2 -1.24104450  1.77950291
10  5       2  0.45476927  0.28642442
11  1       3  0.65990264  0.12631586
12  2       3 -0.19988983  1.27226678
13  3       3 -0.64511396 -0.71846622
14  4       3  0.16532102 -0.45033862
15  5       3  0.43881870  2.39745248
16  1       4  0.88330282  0.01112919
17  2       4 -2.05233698  1.63356842
18  3       4 -1.63637927 -1.43850664
19  4       4  1.43040234 -0.19051680
20  5       4  1.04662885  0.37842390

After randomly adding and deleting some data, the unbalanced data become
like this:

                   id cluster     x     y

       1     1       1  0.895 -0.659
       2     2       1 -0.160 -0.366
       3     1       2 -0.528 -0.294
       4     2       2 -0.919  0.362
       5     3       2 -0.901 -0.467
       6     1       3  0.275  0.134
       7     2       3  0.423  0.534
       8     3       3  0.929 -0.953
       9     4       3  1.67   0.668
      10     5       3  0.286  0.0872
      11     1       4 -0.373 -0.109
      12     2       4  0.289  0.299
      13     3       4 -1.43  -0.677
      14     4       4 -0.884  1.70
      15     5       4  1.12   0.386
      16     1       5 -0.723  0.247
      17     2       5  0.463 -2.59
      18     3       5  0.234  0.893
      19     4       5 -0.313 -1.96
      20     5       5  0.848 -0.0613

Here is what I tried:
dd[-sample(which(dd$cluster==sample(unique(dd$cluster),round(0.2*length(unique(dd$cluster))))),
round(0.5*length(which(dd$cluster==sample(unique(dd$cluster),round(0.2*length(unique(dd$cluster)))))))),].
I know it is very inefficient. Also it just randomly deleted rows and
had no effects in adding rows to match the total number of
observations. Thank you for your help!


Best,

Liu



On Wed, Dec 16, 2020 at 8:50 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> This is R-help, not R-do-my-work-for-me. It is also not a homework help
> line. The Posting Guide is required reading. Assuming this is not homework,
> since each step in your problem definition can be mapped to a fairly basic
> operation in R (the sample function and indexing being key tools), you
> should be showing your work with a reproducible example that illustrates
> where you are stuck or why the result you are getting does not exhibit the
> desired properties.
>
> On December 15, 2020 6:48:12 PM PST, Chao Liu <psychaoliu at gmail.com>
> wrote:
> >Dear R experts,
> >
> >I want to simulate some unbalanced clustered data. The number of
> >clusters
> >is 20 and the average number of observations is 30. However, I would
> >like
> >to create an unbalanced clustered data per cluster where there are 10%
> >more
> >observations than specified (i.e., 33 rather than 30). I then want to
> >randomly exclude an appropriate number of observations (i.e., 60) to
> >arrive
> >at the specified average number of observations per cluster (i.e., 30).
> >The
> >probability of excluding an observation within each cluster was not
> >uniform
> >(i.e., some clusters had no cases removed and others had more
> >excluded).
> >Therefore in the end I still have 600 observations in total. How to
> >realize
> >that in R? Thank you for your help!
> >
> >Best,
> >
> >Liu
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From gregco@t@ @end|ng |rom me@com  Wed Dec 16 18:32:28 2020
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Wed, 16 Dec 2020 12:32:28 -0500
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
 <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>
 <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
 <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>
Message-ID: <2286FF32-3E2E-486B-B376-ADABD4424622@me.com>

Jim, Thank you!
The data set begins
gcdf<-read.table(text="2013-12-29 19.175
2014-01-20 10.072
2014-02-12 10.241
I note that data begins in 2013. But the plot command does not show this first entry in 2013, and instead shows the second data pair as the first data pair. As a consequence, plot does not show the first data pair for 2013, and begins in 2014.
Greg

> On Dec 16, 2020, at 1:08 AM, Jim Lemon <drjimlemon at gmail.com> wrote:
> 
> Hi Greg,
> I think this does what you want:
> 
> gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
> grid_dates<-as.Date(paste(2014:2020,1,1,sep="-"),"%Y-%m-%d")
> plot(gcdf$date, gcdf$gallons, main="2014 Toyota 4Runner", xlab="Date",
> ylab="Gallons",type="l",col="blue",yaxt="n")
> abline(h=seq(4,20,by=2),lty=4)
> abline(v=grid_dates,lty=4)
> axis(side=2,at=seq(4,20,by=2))
> 
> Jim
> 
> On Wed, Dec 16, 2020 at 2:16 PM Gregory Coats <gregcoats at me.com> wrote:
>> 
>> Jim, Thanks for your help with R.
>> Feeding into R the file R_plot_18.r yields for me, on my Mac, R_plot_18.pdf. Success.
>> I used abline to draw a horizontal background grid, and then used axis label to identify the values represented by the horizontal dashed background lines.
>> abline (h=c(2,4,6,8,10,12,14,16,18,20,22,24), lty=4, lwd=1.0, col="grey60")
>> Similarly, I would like to draw a dashed vertical background grid. But it is unclear to me how to direct R to draw a vertical dashed background grid because I am again baffled how to specify to R a date value such as 2018-10-20 @18:00. I welcome your guidance.
>> Greg
>> 
>> On Dec 13, 2020, at 10:58 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
>> 
>> Hi Gregory,
>> 
>> On Mon, Dec 14, 2020 at 12:34 PM Gregory Coats <gregcoats at me.com> wrote:
>> 
>> ...
>> Is there a convenient way to tell R to interpret ?2020-12-13? as a date?
>> 
>> Notice the as.Date command in the code I sent to you. this converts a
>> string to a date with a resolution of one day. If you want a higher
>> time resolution, use strptime or one of the other POSIX date
>> conversion functions.
>> 
>> Jim

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec 16 18:44:06 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 16 Dec 2020 09:44:06 -0800
Subject: [R] Help with simulation of unbalanced clustered data
In-Reply-To: <CACCU-vP_hi2anUxVGct7biKZC2GNS=xsfnNKEPt0D8yAReL2dw@mail.gmail.com>
References: <CACCU-vPP98E1aFCEWwzackmua2vSxQzk5SjsizdOrD7tLLq_kw@mail.gmail.com>
 <6BEE03D7-A4BF-4061-A49B-6BD5DCC425A5@dcn.davis.ca.us>
 <CACCU-vP_hi2anUxVGct7biKZC2GNS=xsfnNKEPt0D8yAReL2dw@mail.gmail.com>
Message-ID: <940374A4-4AEE-4C3F-97DD-D099C32C898C@dcn.davis.ca.us>

Sigh. You still haven't read the Posting Guide? HTML email causes problems with this mailing list so do send email using your mail client's plain text option.

You assert that

>The probability of excluding an observation within each cluster was not uniform

but having a different number excluded can either be due to having a different probability or due to equal probability but different random chance associated with the same probability.

>(i.e., some clusters had no cases removed and others had more excluded)

so this could occur various ways.

If you meant for the probability to vary, just how should it vary?

Also, changing your requirements mid-stream makes it very difficult to see what you really want to accomplish.


On December 16, 2020 6:56:12 AM PST, Chao Liu <psychaoliu at gmail.com> wrote:
>Thank you for the reminder, Jeff. I am new to R-help and so please
>bear with my ignorance. This is not homework and here is a
>reproducible example. The number of observations per cluster doesn't
>follow the condition specified above though, I just used this to
>convey my idea.
>
>   > y <- rnorm(20)
>
>> x <- rnorm(20)
>> z <- rep(1:5, 4)
>> w <- rep(1:4, each=5)
>> dd <- data.frame(id=z,cluster=w,x=x,y=y) #this is a balanced dataset
>   id cluster           x           y
>1   1       1  0.30003855  0.65325768
>2   2       1 -1.00563626 -0.12270866
>3   3       1  0.01925927 -0.41367651
>4   4       1 -1.07742065 -2.64314895
>5   5       1  0.71270333 -0.09294102
>6   1       2  1.08477509  0.43028470
>7   2       2 -2.22498770  0.53539884
>8   3       2  1.23569346 -0.55527835
>9   4       2 -1.24104450  1.77950291
>10  5       2  0.45476927  0.28642442
>11  1       3  0.65990264  0.12631586
>12  2       3 -0.19988983  1.27226678
>13  3       3 -0.64511396 -0.71846622
>14  4       3  0.16532102 -0.45033862
>15  5       3  0.43881870  2.39745248
>16  1       4  0.88330282  0.01112919
>17  2       4 -2.05233698  1.63356842
>18  3       4 -1.63637927 -1.43850664
>19  4       4  1.43040234 -0.19051680
>20  5       4  1.04662885  0.37842390
>
>After randomly adding and deleting some data, the unbalanced data
>become
>like this:
>
>                   id cluster     x     y
>
>       1     1       1  0.895 -0.659
>       2     2       1 -0.160 -0.366
>       3     1       2 -0.528 -0.294
>       4     2       2 -0.919  0.362
>       5     3       2 -0.901 -0.467
>       6     1       3  0.275  0.134
>       7     2       3  0.423  0.534
>       8     3       3  0.929 -0.953
>       9     4       3  1.67   0.668
>      10     5       3  0.286  0.0872
>      11     1       4 -0.373 -0.109
>      12     2       4  0.289  0.299
>      13     3       4 -1.43  -0.677
>      14     4       4 -0.884  1.70
>      15     5       4  1.12   0.386
>      16     1       5 -0.723  0.247
>      17     2       5  0.463 -2.59
>      18     3       5  0.234  0.893
>      19     4       5 -0.313 -1.96
>      20     5       5  0.848 -0.0613
>
>Here is what I tried:
>dd[-sample(which(dd$cluster==sample(unique(dd$cluster),round(0.2*length(unique(dd$cluster))))),
>round(0.5*length(which(dd$cluster==sample(unique(dd$cluster),round(0.2*length(unique(dd$cluster)))))))),].
>I know it is very inefficient. Also it just randomly deleted rows and
>had no effects in adding rows to match the total number of
>observations. Thank you for your help!
>
>
>Best,
>
>Liu
>
>
>
>On Wed, Dec 16, 2020 at 8:50 AM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> This is R-help, not R-do-my-work-for-me. It is also not a homework
>help
>> line. The Posting Guide is required reading. Assuming this is not
>homework,
>> since each step in your problem definition can be mapped to a fairly
>basic
>> operation in R (the sample function and indexing being key tools),
>you
>> should be showing your work with a reproducible example that
>illustrates
>> where you are stuck or why the result you are getting does not
>exhibit the
>> desired properties.
>>
>> On December 15, 2020 6:48:12 PM PST, Chao Liu <psychaoliu at gmail.com>
>> wrote:
>> >Dear R experts,
>> >
>> >I want to simulate some unbalanced clustered data. The number of
>> >clusters
>> >is 20 and the average number of observations is 30. However, I would
>> >like
>> >to create an unbalanced clustered data per cluster where there are
>10%
>> >more
>> >observations than specified (i.e., 33 rather than 30). I then want
>to
>> >randomly exclude an appropriate number of observations (i.e., 60) to
>> >arrive
>> >at the specified average number of observations per cluster (i.e.,
>30).
>> >The
>> >probability of excluding an observation within each cluster was not
>> >uniform
>> >(i.e., some clusters had no cases removed and others had more
>> >excluded).
>> >Therefore in the end I still have 600 observations in total. How to
>> >realize
>> >that in R? Thank you for your help!
>> >
>> >Best,
>> >
>> >Liu
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> >______________________________________________
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >https://stat.ethz.ch/mailman/listinfo/r-help
>> >PLEASE do read the posting guide
>> >http://www.R-project.org/posting-guide.html
>> >and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>

-- 
Sent from my phone. Please excuse my brevity.


From gregco@t@ @end|ng |rom me@com  Wed Dec 16 19:24:32 2020
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Wed, 16 Dec 2020 13:24:32 -0500
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <2286FF32-3E2E-486B-B376-ADABD4424622@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
 <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>
 <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
 <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>
 <2286FF32-3E2E-486B-B376-ADABD4424622@me.com>
Message-ID: <AEF85257-D00F-4464-921C-2B10C17502A0@me.com>

I added a zero initial entry to the data set. Greg
gcdf<-read.table(text="2013-11-29 00.000
2013-12-29 19.175
2014-01-20 10.072
2014-02-12 10.241
2014-03-02 05.916

> On Dec 16, 2020, at 12:32 PM, Gregory Coats via R-help <r-help at r-project.org> wrote:
> 
> Jim, Thank you!
> The data set begins
> gcdf<-read.table(text="2013-12-29 19.175
> 2014-01-20 10.072
> 2014-02-12 10.241
> I note that data begins in 2013. But the plot command does not show this first entry in 2013, and instead shows the second data pair as the first data pair. As a consequence, plot does not show the first data pair for 2013, and begins in 2014.
> Greg
> 
>> On Dec 16, 2020, at 1:08 AM, Jim Lemon <drjimlemon at gmail.com> wrote:
>> 
>> Hi Greg,
>> I think this does what you want:
>> 
>> gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
>> grid_dates<-as.Date(paste(2014:2020,1,1,sep="-"),"%Y-%m-%d")
>> plot(gcdf$date, gcdf$gallons, main="2014 Toyota 4Runner", xlab="Date",
>> ylab="Gallons",type="l",col="blue",yaxt="n")
>> abline(h=seq(4,20,by=2),lty=4)
>> abline(v=grid_dates,lty=4)
>> axis(side=2,at=seq(4,20,by=2))
>> 
>> Jim
>> 
>> On Wed, Dec 16, 2020 at 2:16 PM Gregory Coats <gregcoats at me.com> wrote:
>>> 
>>> Jim, Thanks for your help with R.
>>> Feeding into R the file R_plot_18.r yields for me, on my Mac, R_plot_18.pdf. Success.
>>> I used abline to draw a horizontal background grid, and then used axis label to identify the values represented by the horizontal dashed background lines.
>>> abline (h=c(2,4,6,8,10,12,14,16,18,20,22,24), lty=4, lwd=1.0, col="grey60")
>>> Similarly, I would like to draw a dashed vertical background grid. But it is unclear to me how to direct R to draw a vertical dashed background grid because I am again baffled how to specify to R a date value such as 2018-10-20 @18:00. I welcome your guidance.
>>> Greg
>>> 
>>> On Dec 13, 2020, at 10:58 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
>>> 
>>> Hi Gregory,
>>> 
>>> On Mon, Dec 14, 2020 at 12:34 PM Gregory Coats <gregcoats at me.com> wrote:
>>> 
>>> ...
>>> Is there a convenient way to tell R to interpret ?2020-12-13? as a date?
>>> 
>>> Notice the as.Date command in the code I sent to you. this converts a
>>> string to a date with a resolution of one day. If you want a higher
>>> time resolution, use strptime or one of the other POSIX date
>>> conversion functions.
>>> 
>>> Jim


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Dec 16 19:52:08 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 16 Dec 2020 10:52:08 -0800
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <AEF85257-D00F-4464-921C-2B10C17502A0@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
 <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>
 <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
 <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>
 <2286FF32-3E2E-486B-B376-ADABD4424622@me.com>
 <AEF85257-D00F-4464-921C-2B10C17502A0@me.com>
Message-ID: <CAHqSRuRwV2OqNskLi6G8mFFNBC6ZP4Sy2pi8Mq-tDSYLpnFkFg@mail.gmail.com>

You didn't show the entire call to read.table.  If it included the argument
header=TRUE then it would make the first entry in each column the name of
the column.  Use header=FALSE (or omit the header argument) if you don't
want the first entry to be considered the column name.

-Bill

On Wed, Dec 16, 2020 at 10:25 AM Gregory Coats via R-help <
r-help at r-project.org> wrote:

> I added a zero initial entry to the data set. Greg
> gcdf<-read.table(text="2013-11-29 00.000
> 2013-12-29 19.175
> 2014-01-20 10.072
> 2014-02-12 10.241
> 2014-03-02 05.916
>
> > On Dec 16, 2020, at 12:32 PM, Gregory Coats via R-help <
> r-help at r-project.org> wrote:
> >
> > Jim, Thank you!
> > The data set begins
> > gcdf<-read.table(text="2013-12-29 19.175
> > 2014-01-20 10.072
> > 2014-02-12 10.241
> > I note that data begins in 2013. But the plot command does not show this
> first entry in 2013, and instead shows the second data pair as the first
> data pair. As a consequence, plot does not show the first data pair for
> 2013, and begins in 2014.
> > Greg
> >
> >> On Dec 16, 2020, at 1:08 AM, Jim Lemon <drjimlemon at gmail.com> wrote:
> >>
> >> Hi Greg,
> >> I think this does what you want:
> >>
> >> gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
> >> grid_dates<-as.Date(paste(2014:2020,1,1,sep="-"),"%Y-%m-%d")
> >> plot(gcdf$date, gcdf$gallons, main="2014 Toyota 4Runner", xlab="Date",
> >> ylab="Gallons",type="l",col="blue",yaxt="n")
> >> abline(h=seq(4,20,by=2),lty=4)
> >> abline(v=grid_dates,lty=4)
> >> axis(side=2,at=seq(4,20,by=2))
> >>
> >> Jim
> >>
> >> On Wed, Dec 16, 2020 at 2:16 PM Gregory Coats <gregcoats at me.com> wrote:
> >>>
> >>> Jim, Thanks for your help with R.
> >>> Feeding into R the file R_plot_18.r yields for me, on my Mac,
> R_plot_18.pdf. Success.
> >>> I used abline to draw a horizontal background grid, and then used axis
> label to identify the values represented by the horizontal dashed
> background lines.
> >>> abline (h=c(2,4,6,8,10,12,14,16,18,20,22,24), lty=4, lwd=1.0,
> col="grey60")
> >>> Similarly, I would like to draw a dashed vertical background grid. But
> it is unclear to me how to direct R to draw a vertical dashed background
> grid because I am again baffled how to specify to R a date value such as
> 2018-10-20 @18:00. I welcome your guidance.
> >>> Greg
> >>>
> >>> On Dec 13, 2020, at 10:58 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
> >>>
> >>> Hi Gregory,
> >>>
> >>> On Mon, Dec 14, 2020 at 12:34 PM Gregory Coats <gregcoats at me.com>
> wrote:
> >>>
> >>> ...
> >>> Is there a convenient way to tell R to interpret ?2020-12-13? as a
> date?
> >>>
> >>> Notice the as.Date command in the code I sent to you. this converts a
> >>> string to a date with a resolution of one day. If you want a higher
> >>> time resolution, use strptime or one of the other POSIX date
> >>> conversion functions.
> >>>
> >>> Jim
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From gregco@t@ @end|ng |rom me@com  Wed Dec 16 20:09:18 2020
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Wed, 16 Dec 2020 14:09:18 -0500
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <AEF85257-D00F-4464-921C-2B10C17502A0@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
 <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>
 <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
 <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>
 <2286FF32-3E2E-486B-B376-ADABD4424622@me.com>
 <AEF85257-D00F-4464-921C-2B10C17502A0@me.com>
Message-ID: <CCCB6306-F88A-45C5-91B8-F255951C16A3@me.com>

I would like to be able to draw and label a vertical line, representing the date of some arbitrary event. The date of the first non-zero entry is 2013-11-29. How would I draw and label a red vertical line at 2019-04-06? Greg

gcdf<-read.table(text="2013-11-29 00.000
2013-12-29 19.175
2014-01-20 10.072
2014-02-12 10.241
2014-03-02 05.916
2014-03-15 05.942
2014-03-23 03.639
2014-04-06 08.283
2014-04-20 07.323
2014-05-11 09.807
2014-05-30 10.398
2014-06-15 13.949
2014-07-06 13.840
2014-07-18 07.906
2014-07-21 13.609
2014-08-03 17.316
2014-08-10 09.585
2014-08-24 16.022
2014-09-07 15.403
2014-09-21 14.880
2014-10-08 18.950
2014-10-24 18.185
2014-11-03 10.178
2014-11-09 07.438
2014-11-23 16.053
2014-12-07 12.896
2014-12-21 18.306
2015-01-05 16.580
2015-01-18 14.603
2015-01-25 08.192
2015-02-08 15.690
2015-02-16 08.677
2015-03-08 15.493
2015-03-22 16.065
2015-04-05 15.990
2015-04-19 19.076
2015-04-26 11.310
2015-05-03 09.243
2015-05-10 13.366
2015-05-17 11.191
2015-05-25 12.329
2015-05-31 08.324
2015-06-07 12.985
2015-06-15 12.605
2015-06-21 09.759
2015-06-28 14.906
2015-07-05 09.106
2015-07-12 11.306
2015-07-19 10.052
2015-07-26 08.845
2015-08-02 11.634
2015-08-09 07.718
2015-08-16 06.057
2015-08-23 08.341
2015-08-30 06.702
2015-09-07 05.972
2015-09-13 08.249
2015-09-20 05.758
2015-10-05 13.772
2015-10-19 14.144
2015-11-03 14.305
2015-11-13 09.932
2015-11-20 17.418
2015-12-06 13.529
2015-12-20 15.440
2016-01-03 10.573
2016-01-19 09.592
2016-02-25 12.664
2016-04-03 18.993
2016-05-01 16.869
2016-06-07 15.012
2016-06-23 07.549
2016-06-27 13.756
2016-08-07 18.581
2016-09-01 11.334
2016-09-30 11.327
2016-11-06 18.018
2016-11-27 14.597
2016-12-04 15.347
2016-12-23 09.243
2017-01-05 16.035
2017-02-07 13.219
2017-02-19 16.196
2017-03-12 07.436
2017-05-08 19.747
2017-06-29 19.503
2017-08-15 19.676
2017-09-08 15.558
2017-10-17 16.705
2017-12-06 14.876
2018-01-12 13.748
2018-03-15 19.139
2018-04-13 19.056
2018-05-20 17.756
2018-06-02 15.631
2018-06-17 14.049
2018-07-05 18.870
2018-07-22 16.654
2018-08-06 17.171
2018-08-26 20.139
2018-09-09 18.442
2018-09-26 18.646
2018-10-14 17.144
2018-11-02 19.508
2018-11-20 12.454
2018-12-04 09.355
2018-12-14 09.152
2019-01-11 10.998
2019-02-02 07.739
2019-02-19 09.891
2019-03-22 18.716
2019-04-30 18.880
2019-06-03 19.247
2019-07-07 18.289
2019-08-30 19.021
2019-09-29 15.892
2019-10-26 18.180
2019-11-17 17.693
2019-12-08 16.528
2020-01-05 15.973
2020-02-15 18.832
2020-03-10 17.392
2020-05-04 14.774
2020-06-21 19.248
2020-08-01 14.913
2020-08-27 15.226
2020-09-28 14.338
2020-11-09 18.777
2020-12-11 19.652",
header=TRUE,stringsAsFactors=FALSE,
col.names=c("date","gallons"))
gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
grid_dates<-as.Date(paste(2013:2021,1,1,sep="-"),"%Y-%m-%d")
plot   (gcdf$date, gcdf$gallons, ylab="Refueling Gallons", xlab="",type="l", col="blue", yaxt="n")
mtext  (side=3, line="+0", "2014 Toyota 4Runner")
abline (h=seq(4,20,by=2), lty=3)
abline (v=grid_dates, lty=4)
axis   (side=2, at=seq(4,20,by=2))


	[[alternative HTML version deleted]]


From @z@mj@@|@r| @end|ng |rom y@hoo@com  Wed Dec 16 20:30:16 2020
From: @z@mj@@|@r| @end|ng |rom y@hoo@com (azam jaafari)
Date: Wed, 16 Dec 2020 19:30:16 +0000 (UTC)
Subject: [R] Fw:  space between bars of a group in ggplot2
In-Reply-To: <e3273be5b54040a7805d0c51829b93b2@SRVEXCHCM1302.precheza.cz>
References: <1986923615.446973.1607976984551.ref@mail.yahoo.com>
 <1986923615.446973.1607976984551@mail.yahoo.com>
 <1edc3336cf524959827e713766f1eca0@SRVEXCHCM1302.precheza.cz>
 <453695604.777342.1608112644997@mail.yahoo.com>
 <e3273be5b54040a7805d0c51829b93b2@SRVEXCHCM1302.precheza.cz>
Message-ID: <899696499.1007038.1608147016831@mail.yahoo.com>




   ----- Forwarded Message ----- From: PIKAL Petr <petr.pikal at precheza.cz>To: azam jaafari <azamjaafari at yahoo.com>Cc: r-help mailing list <r-help at r-project.org>Sent: Wednesday, December 16, 2020, 3:39:06 PM GMT+3:30Subject: RE: [R] space between bars of a group in ggplot2
 Hi,

Keep your emails on the list, please.

here are some artificial data
dput(dat)
structure(list(x = c("a", "a", "a", "b", "b", "b"), y = c(1,
1, 1, 3, 3, 3), cond = c("x1", "x2", "x3", "y1", "y2", "y3")), row.names = 
c(NA,
6L), class = "data.frame")

And possible result
hist <- ggplot(dat, aes(x=x, y=y, fill=cond, stat="identity"))
hist + geom_col(width=0.4, position = position_dodge(width=0.5))

You could change colour scheme
https://stackoverflow.com/questions/18229835/how-do-i-manually-set-geom-bar-fill-color-in-ggplot

hist + geom_col(width=0.4, position = position_dodge(width=0.5))+
scale_fill_manual(values=rep(c("red", "blue"), each=3))

Cheers
Petr


From: azam jaafari <azamjaafari at yahoo.com>
Sent: Wednesday, December 16, 2020 10:57 AM
To: PIKAL Petr <petr.pikal at precheza.cz>
Subject: Re: [R] space between bars of a group in ggplot2

Hi Petr

Thank you for reply. I used this link 
(https://stackoverflow.com/questions/6085238/adding-space-between-bars-in-ggplot2) 
for separating bars, but it doesnt work for my purpose. since I have same 
levels for one group, with this code, the bars are connected together: as a 
bar for one group. While I want to add some space between three bars belong to 
one group.

I really appreciate if you can help me

Sincerely
Azam



On Tuesday, December 15, 2020, 4:11:16 PM GMT+3:30, PIKAL Petr 
<petr.pikal at precheza.cz> wrote:


Hi

Your code is not reproducible, however you could follow this advice.

https://stackoverflow.com/questions/6085238/adding-space-between-bars-in-ggplot2

Cheers
Petr

> -----Original Message-----
> From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of azam jaafari 
> via
> R-help
> Sent: Monday, December 14, 2020 9:16 PM
> To: mailto:r-help at r-project.org
> Subject: [R] space between bars of a group in ggplot2
>
> Hello Dear
> I want to make a barplot for groups with three repetitions and same values.
> dataset is like this:
>
> groups:? ? ? ? ? ? ? ? ? a? ? ? ? ? ? ? ? ? ? ? ? ? ? ? b
> c
> value:? ? ? ? ? 1.2, 1.2, 1.2? ? ? ? ? ? 2.5, 2.5,2.5
> Condition:? ? sat, sat, sat,? ? ? ? unsat,unsat,unsat,
>
> that bars fill based on "condition"
> I used the below code:
>
> data%>%ggplot(aes(x=factor(groups), y=value, fill=factor(condition),
> group=condition)) +
>? geom_bar(olour="black",stat="identity", position = position_dodge(width =
> 0.8), width=0.7)+ scale_y_continuous(breaks=seq(0, 6.5, 1),limits=c(0,
> 6.5),expand=c(0,0))+ scale_x_discrete(expand=c(0.000001,0))+
>? theme( axis.line = element_line(colour = "darkblue",
>? ? ? ? ? ? ? ? ? ? ? size = 1, linetype = "solid"))+ labs(x = "group Code",
> y = "Z") +
>? ? theme(panel.background = element_rect(fill = 'white'))+labs(fill =
> "Condition")+
>? theme(axis.text.x = element_text(face='bold',size=8, color='black', angle =
> 90, vjust = 0.5)) +
>? theme(axis.text.y = element_text(face='bold', size=8, color='black'))
>
>
> but it makes the connected bars (without any space between values) for each
> group, while I want to add a space between bars for? each value of each
> group.
>
> Thank you for helping
> BestAzam

>
>? ? [[alternative HTML version deleted]]
>
> ______________________________________________
> mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.






Adding space between bars in ggplot2
I'd like to add spaces between bars in ggplot2. This page offers one solution: 
http://www.streamreader.org/stats...




  

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec 16 22:34:41 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 16 Dec 2020 13:34:41 -0800
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <CCCB6306-F88A-45C5-91B8-F255951C16A3@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
 <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>
 <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
 <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>
 <2286FF32-3E2E-486B-B376-ADABD4424622@me.com>
 <AEF85257-D00F-4464-921C-2B10C17502A0@me.com>
 <CCCB6306-F88A-45C5-91B8-F255951C16A3@me.com>
Message-ID: <27B39B3C-C7A3-4597-82F5-5153C3A44396@dcn.davis.ca.us>

Don't set the header argument to TRUE if your data does not have a header?

On December 16, 2020 11:09:18 AM PST, Gregory Coats via R-help <r-help at r-project.org> wrote:
>I would like to be able to draw and label a vertical line, representing
>the date of some arbitrary event. The date of the first non-zero entry
>is 2013-11-29. How would I draw and label a red vertical line at
>2019-04-06? Greg
>
>gcdf<-read.table(text="2013-11-29 00.000
>2013-12-29 19.175
>2014-01-20 10.072
>2014-02-12 10.241
>2014-03-02 05.916
>2014-03-15 05.942
>2014-03-23 03.639
>2014-04-06 08.283
>2014-04-20 07.323
>2014-05-11 09.807
>2014-05-30 10.398
>2014-06-15 13.949
>2014-07-06 13.840
>2014-07-18 07.906
>2014-07-21 13.609
>2014-08-03 17.316
>2014-08-10 09.585
>2014-08-24 16.022
>2014-09-07 15.403
>2014-09-21 14.880
>2014-10-08 18.950
>2014-10-24 18.185
>2014-11-03 10.178
>2014-11-09 07.438
>2014-11-23 16.053
>2014-12-07 12.896
>2014-12-21 18.306
>2015-01-05 16.580
>2015-01-18 14.603
>2015-01-25 08.192
>2015-02-08 15.690
>2015-02-16 08.677
>2015-03-08 15.493
>2015-03-22 16.065
>2015-04-05 15.990
>2015-04-19 19.076
>2015-04-26 11.310
>2015-05-03 09.243
>2015-05-10 13.366
>2015-05-17 11.191
>2015-05-25 12.329
>2015-05-31 08.324
>2015-06-07 12.985
>2015-06-15 12.605
>2015-06-21 09.759
>2015-06-28 14.906
>2015-07-05 09.106
>2015-07-12 11.306
>2015-07-19 10.052
>2015-07-26 08.845
>2015-08-02 11.634
>2015-08-09 07.718
>2015-08-16 06.057
>2015-08-23 08.341
>2015-08-30 06.702
>2015-09-07 05.972
>2015-09-13 08.249
>2015-09-20 05.758
>2015-10-05 13.772
>2015-10-19 14.144
>2015-11-03 14.305
>2015-11-13 09.932
>2015-11-20 17.418
>2015-12-06 13.529
>2015-12-20 15.440
>2016-01-03 10.573
>2016-01-19 09.592
>2016-02-25 12.664
>2016-04-03 18.993
>2016-05-01 16.869
>2016-06-07 15.012
>2016-06-23 07.549
>2016-06-27 13.756
>2016-08-07 18.581
>2016-09-01 11.334
>2016-09-30 11.327
>2016-11-06 18.018
>2016-11-27 14.597
>2016-12-04 15.347
>2016-12-23 09.243
>2017-01-05 16.035
>2017-02-07 13.219
>2017-02-19 16.196
>2017-03-12 07.436
>2017-05-08 19.747
>2017-06-29 19.503
>2017-08-15 19.676
>2017-09-08 15.558
>2017-10-17 16.705
>2017-12-06 14.876
>2018-01-12 13.748
>2018-03-15 19.139
>2018-04-13 19.056
>2018-05-20 17.756
>2018-06-02 15.631
>2018-06-17 14.049
>2018-07-05 18.870
>2018-07-22 16.654
>2018-08-06 17.171
>2018-08-26 20.139
>2018-09-09 18.442
>2018-09-26 18.646
>2018-10-14 17.144
>2018-11-02 19.508
>2018-11-20 12.454
>2018-12-04 09.355
>2018-12-14 09.152
>2019-01-11 10.998
>2019-02-02 07.739
>2019-02-19 09.891
>2019-03-22 18.716
>2019-04-30 18.880
>2019-06-03 19.247
>2019-07-07 18.289
>2019-08-30 19.021
>2019-09-29 15.892
>2019-10-26 18.180
>2019-11-17 17.693
>2019-12-08 16.528
>2020-01-05 15.973
>2020-02-15 18.832
>2020-03-10 17.392
>2020-05-04 14.774
>2020-06-21 19.248
>2020-08-01 14.913
>2020-08-27 15.226
>2020-09-28 14.338
>2020-11-09 18.777
>2020-12-11 19.652",
>header=TRUE,stringsAsFactors=FALSE,
>col.names=c("date","gallons"))
>gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
>grid_dates<-as.Date(paste(2013:2021,1,1,sep="-"),"%Y-%m-%d")
>plot   (gcdf$date, gcdf$gallons, ylab="Refueling Gallons",
>xlab="",type="l", col="blue", yaxt="n")
>mtext  (side=3, line="+0", "2014 Toyota 4Runner")
>abline (h=seq(4,20,by=2), lty=3)
>abline (v=grid_dates, lty=4)
>axis   (side=2, at=seq(4,20,by=2))
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @purd|e@@ @end|ng |rom gm@||@com  Thu Dec 17 05:32:20 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Thu, 17 Dec 2020 17:32:20 +1300
Subject: [R] Help with simulation of unbalanced clustered data
In-Reply-To: <CACCU-vPP98E1aFCEWwzackmua2vSxQzk5SjsizdOrD7tLLq_kw@mail.gmail.com>
References: <CACCU-vPP98E1aFCEWwzackmua2vSxQzk5SjsizdOrD7tLLq_kw@mail.gmail.com>
Message-ID: <CAB8pepy_diZnUbQGRk0MDD+JA4TzoC49P6Q1xPByrkPSjN9sEA@mail.gmail.com>

Hi Chao Liu,

I'm having difficulty following your question, and examples.
And also, I don't see the motivation for increasing, then decreasing
the sample sizes.
Intuitively, one would compute the correct sample sizes, first time round...

But I thought I'd add some comments, just in case they're useful.

If the problem relates to memberships (in clusters), then the problem
can be simplified.
All one needs is an integer vector, where each value is the index of
the cluster.

To compute random memberships of 600 observations in 20 clusters, one could run:

    m <- sample (1:20, 600, TRUE)

To compute the number of observations per cluster, one could then run:

    table (m)

In the above code, the probability of an observation being assigned to
each cluster, is uniform.
Non-uniform sampling can be achieved by supplying a 4th argument to
the sample function, which is a numeric vector of weights.


On Wed, Dec 16, 2020 at 10:08 PM Chao Liu <psychaoliu at gmail.com> wrote:
>
> Dear R experts,
>
> I want to simulate some unbalanced clustered data. The number of clusters
> is 20 and the average number of observations is 30. However, I would like
> to create an unbalanced clustered data per cluster where there are 10% more
> observations than specified (i.e., 33 rather than 30). I then want to
> randomly exclude an appropriate number of observations (i.e., 60) to arrive
> at the specified average number of observations per cluster (i.e., 30). The
> probability of excluding an observation within each cluster was not uniform
> (i.e., some clusters had no cases removed and others had more excluded).
> Therefore in the end I still have 600 observations in total. How to realize
> that in R? Thank you for your help!
>
> Best,
>
> Liu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Dec 17 09:00:52 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 17 Dec 2020 09:00:52 +0100
Subject: [R] Meta: R-Help reply-to
In-Reply-To: <35B2DCDC-F0B4-4A43-942E-9704B212DD4E@dcn.davis.ca.us>
References: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>
 <HE1PR04MB3115B280496151C156BD57B882C60@HE1PR04MB3115.eurprd04.prod.outlook.com>
 <CAJc=yOExNcQDgx8z1P0wP2u+9U8P70-T9m8XEZKVa20ia4pF5Q@mail.gmail.com>
 <35B2DCDC-F0B4-4A43-942E-9704B212DD4E@dcn.davis.ca.us>
Message-ID: <24539.4148.60866.422871@stat.math.ethz.ch>

>>>>> Jeff Newmiller 
>>>>>     on Tue, 15 Dec 2020 10:54:00 -0800 writes:

    > For the record: this is not nearly as cut-and-dried as you
    > imply. The current settings actually make replying
    > off-list rather tricky for some mail clients... I have
    > tried and failed a few times to reply off-list due to
    > this.  The next level of invasiveness is to make it appear
    > that the original author is the list... and having
    > participated in lists that were setup that way in the
    > past, I will vote strongly against such a change.

    > So some mail clients make it too easy to ignore the email
    > headers, and for some reason newbies end up using those
    > mail clients frequently. But making changes to the default
    > list configuration is not necessarily going to solve that
    > problem, so beware of solutions that are worse than the
    > problems they purport to solve.

I agree that to change the so-called 'Reply-To:' mail header  is
not something I'd personally want, nor something I'd like the
R-help mailing list to suddenly change to.

Yes, people using e-mail should know the difference between the
'reply' and the 'reply all' "button" in their e-mail clients.

I Jeff sends an e-mail to me and others, I do know that if I
'reply', I reply to him, and if I "reply all" I reply to him
*and* the others.  This is how e-mail works and has worked forever.

As Jeff mentions -- and as I have experienced myself also
(rarely) -- when mailing lists are configured differently, their
behavior is much more confusing and for many list recipients
it becomes almost impossible to reply to just the poster.

In my view such a change would be quite disruptive particularly
for those who use e-mail regularly in their professional life
and also those who've helped making R-help a valuable resource
by being "R-helpers" as I call them.

Martin


    > On December 15, 2020 9:04:56 AM PST, "Patrick (Malone
    > Quantitative)" <malone at malonequantitative.com> wrote:
    >> Ok. If this is a desirable change, of whom would we
    >> request it? I was unable to find a name, and as I said, I
    >> got no response from the generic address.
    >> 
    >> Pat
    >> 
    >> On Tue, Dec 15, 2020 at 11:43 AM P?r Leijonhufvud via
    >> R-help < r-help at r-project.org> wrote:
    >> 
    >>> Unless I am getting senile that should be an option in
    >>> Mailman...
    >>> 
    >> https://docs.mailman3.org/projects/mailman/en/latest/src/mailman/handlers/docs/reply-to.html
    >>> 
    >>> /P?r
    >>> 
    >>> --
    >>> P?r Leijonhufvud .  par.leijonhufvud at regionjh.se
    >>> Sjukhuskemist +46(0)63-153 376, +46-(0)70-242 7006
    >>> Laboratoriemedicin, ?stersunds sjukhus
    >>> 
    >>> -----Original Message----- From: R-help
    >>> <r-help-bounces at r-project.org> On Behalf Of Patrick
    >> (Malone
    >>> Quantitative) Sent: Tuesday, December 15, 2020 4:52 PM
    >>> To: r-help <r-help at r-project.org> Subject: [R] Meta:
    >>> R-Help reply-to
    >>> 
    >>> Greetings.
    >>> 
    >>> Something I've wondered for some time--is mailman
    >>> configurable to
    >> have a
    >>> default reply-to be set to the list or to reply-all?
    >>> 
    >>> Many newcomers who reply to individual R-Help
    >>> participants may not
    >> notice
    >>> that they are doing so, and it seems a source of
    >>> vexation to some of
    >> the
    >>> more frequent helpers.
    >>> 
    >>> I wrote to r-help-owner with this query several months
    >>> ago and never
    >> heard
    >>> back.
    >>> 
    >>> Pat
    >>> 
    >>> --
    >>> Patrick S. Malone, Ph.D., Malone Quantitative NEW
    >>> Service Models:
    ....
    >>> He/Him/His
    >>> 
    >>> [[alternative HTML version deleted]]

    ....
    
    >>> Region J?mtland H?rjedalen behandlar dina
    >>> personuppgifter vid kommunikation via
    >>> e-post. Hanteringen av personuppgifter f?ljer
    >> g?llande
    >>> dataskyddslagstiftning. Du kan l?sa mer om hur vi
    >>> behandlar dina
    >> uppgifter
    >>> p? https://regionjh.se/gdpr


From p@ych@o||u @end|ng |rom gm@||@com  Thu Dec 17 19:07:14 2020
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Thu, 17 Dec 2020 13:07:14 -0500
Subject: [R] Help with simulation of unbalanced clustered data
In-Reply-To: <CAB8pepy_diZnUbQGRk0MDD+JA4TzoC49P6Q1xPByrkPSjN9sEA@mail.gmail.com>
References: <CACCU-vPP98E1aFCEWwzackmua2vSxQzk5SjsizdOrD7tLLq_kw@mail.gmail.com>
 <CAB8pepy_diZnUbQGRk0MDD+JA4TzoC49P6Q1xPByrkPSjN9sEA@mail.gmail.com>
Message-ID: <CACCU-vPXiGSzAMo71KEnZ6s1MhTR0OFHwARXCC2bXZ8zr4RuQA@mail.gmail.com>

Thank you for your help Abby!

On Wed, Dec 16, 2020 at 11:32 PM Abby Spurdle <spurdle.a at gmail.com> wrote:

> Hi Chao Liu,
>
> I'm having difficulty following your question, and examples.
> And also, I don't see the motivation for increasing, then decreasing
> the sample sizes.
> Intuitively, one would compute the correct sample sizes, first time
> round...
>
> But I thought I'd add some comments, just in case they're useful.
>
> If the problem relates to memberships (in clusters), then the problem
> can be simplified.
> All one needs is an integer vector, where each value is the index of
> the cluster.
>
> To compute random memberships of 600 observations in 20 clusters, one
> could run:
>
>     m <- sample (1:20, 600, TRUE)
>
> To compute the number of observations per cluster, one could then run:
>
>     table (m)
>
> In the above code, the probability of an observation being assigned to
> each cluster, is uniform.
> Non-uniform sampling can be achieved by supplying a 4th argument to
> the sample function, which is a numeric vector of weights.
>
>
> On Wed, Dec 16, 2020 at 10:08 PM Chao Liu <psychaoliu at gmail.com> wrote:
> >
> > Dear R experts,
> >
> > I want to simulate some unbalanced clustered data. The number of clusters
> > is 20 and the average number of observations is 30. However, I would like
> > to create an unbalanced clustered data per cluster where there are 10%
> more
> > observations than specified (i.e., 33 rather than 30). I then want to
> > randomly exclude an appropriate number of observations (i.e., 60) to
> arrive
> > at the specified average number of observations per cluster (i.e., 30).
> The
> > probability of excluding an observation within each cluster was not
> uniform
> > (i.e., some clusters had no cases removed and others had more excluded).
> > Therefore in the end I still have 600 observations in total. How to
> realize
> > that in R? Thank you for your help!
> >
> > Best,
> >
> > Liu
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Dec 17 21:16:57 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 18 Dec 2020 09:16:57 +1300
Subject: [R] Meta: R-Help reply-to
In-Reply-To: <24539.4148.60866.422871@stat.math.ethz.ch>
References: <CAJc=yOE9fLTxJ9QfziWTOWgVN-Q8fxtMOkcUFkf4khCUFKQDJg@mail.gmail.com>
 <HE1PR04MB3115B280496151C156BD57B882C60@HE1PR04MB3115.eurprd04.prod.outlook.com>
 <CAJc=yOExNcQDgx8z1P0wP2u+9U8P70-T9m8XEZKVa20ia4pF5Q@mail.gmail.com>
 <35B2DCDC-F0B4-4A43-942E-9704B212DD4E@dcn.davis.ca.us>
 <24539.4148.60866.422871@stat.math.ethz.ch>
Message-ID: <20201218091657.6037484b@rolf-Latitude-E7470>


On Thu, 17 Dec 2020 09:00:52 +0100
Martin Maechler <maechler at stat.math.ethz.ch> wrote:

<SNIP>

> As Jeff mentions -- and as I have experienced myself also
> (rarely) -- when mailing lists are configured differently, their
> behavior is much more confusing and for many list recipients
> it becomes almost impossible to reply to just the poster.
> 
> In my view such a change would be quite disruptive particularly
> for those who use e-mail regularly in their professional life
> and also those who've helped making R-help a valuable resource
> by being "R-helpers" as I call them.

<SNIP>

I couldn't agree more.  Well said.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @zwj|08 @end|ng |rom gm@||@com  Fri Dec 18 16:29:14 2020
From: @zwj|08 @end|ng |rom gm@||@com (Jiefei Wang)
Date: Fri, 18 Dec 2020 23:29:14 +0800
Subject: [R] How to perform package cleanup when R session is ending?
Message-ID: <CAGiFhPM8i1puhWk4M0bbzTE5_K+izmDsRxexeLVA=04s+xz2-A@mail.gmail.com>

Hi,

I am looking for a way to clean up my package resources before R is ended.
It looks like the .onUnload function would not be helpful as it would not
be called before R is ended. This behavior has been described in the
document:

*Note that packages are not detached nor namespaces unloaded at the end of
an R session unless the user arranges to do so (e.g., via .Last).*

I have also searched for ?.Last as the document says. However, the .Last
function is for the end user to use, not for the package developers, so I
am clueless now. How to clean up my package before R ends? Any suggestions?

Best,
Jiefei

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Dec 18 16:39:38 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 18 Dec 2020 07:39:38 -0800
Subject: [R] How to perform package cleanup when R session is ending?
In-Reply-To: <CAGiFhPM8i1puhWk4M0bbzTE5_K+izmDsRxexeLVA=04s+xz2-A@mail.gmail.com>
References: <CAGiFhPM8i1puhWk4M0bbzTE5_K+izmDsRxexeLVA=04s+xz2-A@mail.gmail.com>
Message-ID: <CAHqSRuTAByh6DOpkkhvVZ=Si6e=qmJkvG7btPJJCq=0Z1LUb-Q@mail.gmail.com>

Have you tried using reg.finalizer(..., onexit=TRUE)?

-BIll

On Fri, Dec 18, 2020 at 7:29 AM Jiefei Wang <szwjf08 at gmail.com> wrote:

> Hi,
>
> I am looking for a way to clean up my package resources before R is ended.
> It looks like the .onUnload function would not be helpful as it would not
> be called before R is ended. This behavior has been described in the
> document:
>
> *Note that packages are not detached nor namespaces unloaded at the end of
> an R session unless the user arranges to do so (e.g., via .Last).*
>
> I have also searched for ?.Last as the document says. However, the .Last
> function is for the end user to use, not for the package developers, so I
> am clueless now. How to clean up my package before R ends? Any suggestions?
>
> Best,
> Jiefei
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Dec 18 18:09:44 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 18 Dec 2020 09:09:44 -0800
Subject: [R] How to perform package cleanup when R session is ending?
In-Reply-To: <CAHqSRuTAByh6DOpkkhvVZ=Si6e=qmJkvG7btPJJCq=0Z1LUb-Q@mail.gmail.com>
References: <CAGiFhPM8i1puhWk4M0bbzTE5_K+izmDsRxexeLVA=04s+xz2-A@mail.gmail.com>
 <CAHqSRuTAByh6DOpkkhvVZ=Si6e=qmJkvG7btPJJCq=0Z1LUb-Q@mail.gmail.com>
Message-ID: <CAHqSRuQh4YjaQ91JkdOAmtGP3i1PMgSj+_BT0FnU4Nu==Gr9Yg@mail.gmail.com>

E.g., as in a package containing just the following R code:

$ cat testFinalizer/R/zzz.R
envir <- new.env()
cleanup <- function(e) {
    message("cleanup(", format(e), ")")
    if (!isTRUE(envir$cleaned)) {
        message("    cleaning ", format(e))
        envir$cleaned <- TRUE
    } else {
        # cleanup previously called by .onUnload()
        message("    ", format(e), " has already been cleaned")
    }
}
.onLoad <- function(libname, pkgname) {
    message("Loading ", pkgname, " from ", libname)
    reg.finalizer(e=envir, f=cleanup, onexit=TRUE)
    message("Installed finalizer for ", format(envir))
}
.onUnload <- function(libpath) {
    message("Unloading ", libpath)
    cleanup(envir)
}

This gives:

$ R --quiet
> library(testFinalizer,lib="lib")
Loading testFinalizer from /home/bill/packages/lib
Installed finalizer for <environment: 0x55a558b16120>
> detach("package:testFinalizer", unload=TRUE)
Unloading /home/bill/packages/lib/testFinalizer
cleanup(<environment: 0x55a558b16120>)
    cleaning <environment: 0x55a558b16120>
> q("no")
cleanup(<environment: 0x55a558b16120>)
    <environment: 0x55a558b16120> has already been cleaned
$ R --quiet
> library(testFinalizer, lib="lib")
Loading testFinalizer from /home/bill/packages/lib
Installed finalizer for <environment: 0x55f8dac2d598>
> objects(all=TRUE)
character(0)
> q("no")
cleanup(<environment: 0x55f8dac2d598>)
    cleaning <environment: 0x55f8dac2d598>

On Fri, Dec 18, 2020 at 7:39 AM Bill Dunlap <williamwdunlap at gmail.com>
wrote:

> Have you tried using reg.finalizer(..., onexit=TRUE)?
>
> -BIll
>
> On Fri, Dec 18, 2020 at 7:29 AM Jiefei Wang <szwjf08 at gmail.com> wrote:
>
>> Hi,
>>
>> I am looking for a way to clean up my package resources before R is ended.
>> It looks like the .onUnload function would not be helpful as it would not
>> be called before R is ended. This behavior has been described in the
>> document:
>>
>> *Note that packages are not detached nor namespaces unloaded at the end of
>> an R session unless the user arranges to do so (e.g., via .Last).*
>>
>> I have also searched for ?.Last as the document says. However, the .Last
>> function is for the end user to use, not for the package developers, so I
>> am clueless now. How to clean up my package before R ends? Any
>> suggestions?
>>
>> Best,
>> Jiefei
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From gregco@t@ @end|ng |rom me@com  Fri Dec 18 18:29:42 2020
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Fri, 18 Dec 2020 12:29:42 -0500
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <CAHqSRuRwV2OqNskLi6G8mFFNBC6ZP4Sy2pi8Mq-tDSYLpnFkFg@mail.gmail.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
 <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>
 <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
 <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>
 <2286FF32-3E2E-486B-B376-ADABD4424622@me.com>
 <AEF85257-D00F-4464-921C-2B10C17502A0@me.com>
 <CAHqSRuRwV2OqNskLi6G8mFFNBC6ZP4Sy2pi8Mq-tDSYLpnFkFg@mail.gmail.com>
Message-ID: <B2DEB7C5-398C-4DC3-A4F7-E8FFCBF5571B@me.com>

I need to be able to draw and label a vertical line, representing the date of some arbitrary event. The date of the first entry is 2013-11-29. How would I draw, and label a red vertical line at 2019-04-06? Greg

gcdf<-read.table(text="2013-11-29 19.175
2014-01-20 10.072
2014-02-12 10.241
2014-03-02 05.916
2014-03-15 05.942
2014-03-23 03.639
2014-04-06 08.283
2014-04-20 07.323
2014-05-11 09.807
2014-05-30 10.398
2014-06-15 13.949
2014-07-06 13.840
2014-07-18 07.906
2014-07-21 13.609
2014-08-03 17.316
2014-08-10 09.585
2014-08-24 16.022
2014-09-07 15.403
2014-09-21 14.880
2014-10-08 18.950
2014-10-24 18.185
2014-11-03 10.178
2014-11-09 07.438
2014-11-23 16.053
2014-12-07 12.896
2014-12-21 18.306
2015-01-05 16.580
2015-01-18 14.603
2015-01-25 08.192
2015-02-08 15.690
2015-02-16 08.677
2015-03-08 15.493
2015-03-22 16.065
2015-04-05 15.990
2015-04-19 19.076
2015-04-26 11.310
2015-05-03 09.243
2015-05-10 13.366
2015-05-17 11.191
2015-05-25 12.329
2015-05-31 08.324
2015-06-07 12.985
2015-06-15 12.605
2015-06-21 09.759
2015-06-28 14.906
2015-07-05 09.106
2015-07-12 11.306
2015-07-19 10.052
2015-07-26 08.845
2015-08-02 11.634
2015-08-09 07.718
2015-08-16 06.057
2015-08-23 08.341
2015-08-30 06.702
2015-09-07 05.972
2015-09-13 08.249
2015-09-20 05.758
2015-10-05 13.772
2015-10-19 14.144
2015-11-03 14.305
2015-11-13 09.932
2015-11-20 17.418
2015-12-06 13.529
2015-12-20 15.440
2016-01-03 10.573
2016-01-19 09.592
2016-02-25 12.664
2016-04-03 18.993
2016-05-01 16.869
2016-06-07 15.012
2016-06-23 07.549
2016-06-27 13.756
2016-08-07 18.581
2016-09-01 11.334
2016-09-30 11.327
2016-11-06 18.018
2016-11-27 14.597
2016-12-04 15.347
2016-12-23 09.243
2017-01-05 16.035
2017-02-07 13.219
2017-02-19 16.196
2017-03-12 07.436
2017-05-08 19.747
2017-06-29 19.503
2017-08-15 19.676
2017-09-08 15.558
2017-10-17 16.705
2017-12-06 14.876
2018-01-12 13.748
2018-03-15 19.139
2018-04-13 19.056
2018-05-20 17.756
2018-06-02 15.631
2018-06-17 14.049
2018-07-05 18.870
2018-07-22 16.654
2018-08-06 17.171
2018-08-26 20.139
2018-09-09 18.442
2018-09-26 18.646
2018-10-14 17.144
2018-11-02 19.508
2018-11-20 12.454
2018-12-04 09.355
2018-12-14 09.152
2019-01-11 10.998
2019-02-02 07.739
2019-02-19 09.891
2019-03-22 18.716
2019-04-30 18.880
2019-06-03 19.247
2019-07-07 18.289
2019-08-30 19.021
2019-09-29 15.892
2019-10-26 18.180
2019-11-17 17.693
2019-12-08 16.528
2020-01-05 15.973
2020-02-15 18.832
2020-03-10 17.392
2020-05-04 14.774
2020-06-21 19.248
2020-08-01 14.913
2020-08-27 15.226
2020-09-28 14.338
2020-11-09 18.777
2020-12-11 19.652",
header=FALSE,stringsAsFactors=FALSE,
col.names=c("date","gallons"))
gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
grid_dates<-as.Date(paste(2013:2021,1,1,sep="-"),"%Y-%m-%d")
plot   (gcdf$date, gcdf$gallons, ylab="Refueling Gallons", xlab="",type="b", col="blue", yaxt="n")
mtext  (side=3, line="+0", "2014 Toyota 4Runner")
abline (h=seq(4,20,by=2), lty=3)
abline (v=grid_dates, lty=4)
axis   (side=2, at=seq(4,20,by=2))


	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Dec 18 19:15:25 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 18 Dec 2020 10:15:25 -0800
Subject: [R] How to specify year-month-day for a plot
In-Reply-To: <B2DEB7C5-398C-4DC3-A4F7-E8FFCBF5571B@me.com>
References: <C9F99FD4-DDDE-4DD4-95B6-ED5ACBE60018@me.com>
 <CA+8X3fV=eZEA+WNQV+wkC4oiaYoTuFaALE2CtB9RY-0r1Bjgyw@mail.gmail.com>
 <215E4A16-5675-4021-BB09-A4B84977457A@me.com>
 <CA+8X3fVWHQkyripuJYy6hhZMc33MLYscPjZPGYMgF5VHhSmDMw@mail.gmail.com>
 <C48DB228-C298-44A6-B429-EDCF7A79047C@me.com>
 <CA+8X3fUBvh7xnw_zBnT2EUAGNwvgJMgNzKb3k6++mGoG9FZbnQ@mail.gmail.com>
 <2286FF32-3E2E-486B-B376-ADABD4424622@me.com>
 <AEF85257-D00F-4464-921C-2B10C17502A0@me.com>
 <CAHqSRuRwV2OqNskLi6G8mFFNBC6ZP4Sy2pi8Mq-tDSYLpnFkFg@mail.gmail.com>
 <B2DEB7C5-398C-4DC3-A4F7-E8FFCBF5571B@me.com>
Message-ID: <CAHqSRuQ4pLO9QEHT-5C5COM-RXhv+2WKKwLc7ZXRYo4Ryb-s6w@mail.gmail.com>

Have you tried
   abline(v=as.Date("2019-04-06"), col="red")

-Bill

On Fri, Dec 18, 2020 at 9:29 AM Gregory Coats <gregcoats at me.com> wrote:

> I need to be able to draw and label a vertical line, representing the date
> of some arbitrary event. The date of the first entry is 2013-11-29. How
> would I draw, and label a red vertical line at 2019-04-06? Greg
>
> gcdf<-read.table(text="2013-11-29 19.175
> 2014-01-20 10.072
> 2014-02-12 10.241
> 2014-03-02 05.916
> 2014-03-15 05.942
> 2014-03-23 03.639
> 2014-04-06 08.283
> 2014-04-20 07.323
> 2014-05-11 09.807
> 2014-05-30 10.398
> 2014-06-15 13.949
> 2014-07-06 13.840
> 2014-07-18 07.906
> 2014-07-21 13.609
> 2014-08-03 17.316
> 2014-08-10 09.585
> 2014-08-24 16.022
> 2014-09-07 15.403
> 2014-09-21 14.880
> 2014-10-08 18.950
> 2014-10-24 18.185
> 2014-11-03 10.178
> 2014-11-09 07.438
> 2014-11-23 16.053
> 2014-12-07 12.896
> 2014-12-21 18.306
> 2015-01-05 16.580
> 2015-01-18 14.603
> 2015-01-25 08.192
> 2015-02-08 15.690
> 2015-02-16 08.677
> 2015-03-08 15.493
> 2015-03-22 16.065
> 2015-04-05 15.990
> 2015-04-19 19.076
> 2015-04-26 11.310
> 2015-05-03 09.243
> 2015-05-10 13.366
> 2015-05-17 11.191
> 2015-05-25 12.329
> 2015-05-31 08.324
> 2015-06-07 12.985
> 2015-06-15 12.605
> 2015-06-21 09.759
> 2015-06-28 14.906
> 2015-07-05 09.106
> 2015-07-12 11.306
> 2015-07-19 10.052
> 2015-07-26 08.845
> 2015-08-02 11.634
> 2015-08-09 07.718
> 2015-08-16 06.057
> 2015-08-23 08.341
> 2015-08-30 06.702
> 2015-09-07 05.972
> 2015-09-13 08.249
> 2015-09-20 05.758
> 2015-10-05 13.772
> 2015-10-19 14.144
> 2015-11-03 14.305
> 2015-11-13 09.932
> 2015-11-20 17.418
> 2015-12-06 13.529
> 2015-12-20 15.440
> 2016-01-03 10.573
> 2016-01-19 09.592
> 2016-02-25 12.664
> 2016-04-03 18.993
> 2016-05-01 16.869
> 2016-06-07 15.012
> 2016-06-23 07.549
> 2016-06-27 13.756
> 2016-08-07 18.581
> 2016-09-01 11.334
> 2016-09-30 11.327
> 2016-11-06 18.018
> 2016-11-27 14.597
> 2016-12-04 15.347
> 2016-12-23 09.243
> 2017-01-05 16.035
> 2017-02-07 13.219
> 2017-02-19 16.196
> 2017-03-12 07.436
> 2017-05-08 19.747
> 2017-06-29 19.503
> 2017-08-15 19.676
> 2017-09-08 15.558
> 2017-10-17 16.705
> 2017-12-06 14.876
> 2018-01-12 13.748
> 2018-03-15 19.139
> 2018-04-13 19.056
> 2018-05-20 17.756
> 2018-06-02 15.631
> 2018-06-17 14.049
> 2018-07-05 18.870
> 2018-07-22 16.654
> 2018-08-06 17.171
> 2018-08-26 20.139
> 2018-09-09 18.442
> 2018-09-26 18.646
> 2018-10-14 17.144
> 2018-11-02 19.508
> 2018-11-20 12.454
> 2018-12-04 09.355
> 2018-12-14 09.152
> 2019-01-11 10.998
> 2019-02-02 07.739
> 2019-02-19 09.891
> 2019-03-22 18.716
> 2019-04-30 18.880
> 2019-06-03 19.247
> 2019-07-07 18.289
> 2019-08-30 19.021
> 2019-09-29 15.892
> 2019-10-26 18.180
> 2019-11-17 17.693
> 2019-12-08 16.528
> 2020-01-05 15.973
> 2020-02-15 18.832
> 2020-03-10 17.392
> 2020-05-04 14.774
> 2020-06-21 19.248
> 2020-08-01 14.913
> 2020-08-27 15.226
> 2020-09-28 14.338
> 2020-11-09 18.777
> 2020-12-11 19.652",
> header=FALSE,stringsAsFactors=FALSE,
> col.names=c("date","gallons"))
> gcdf$date<-as.Date(gcdf$date,"%Y-%m-%d")
> grid_dates<-as.Date(paste(2013:2021,1,1,sep="-"),"%Y-%m-%d")
> plot   (gcdf$date, gcdf$gallons, ylab="Refueling Gallons",
> xlab="",type="b", col="blue", yaxt="n")
> mtext  (side=3, line="+0", "2014 Toyota 4Runner")
> abline (h=seq(4,20,by=2), lty=3)
> abline (v=grid_dates, lty=4)
> axis   (side=2, at=seq(4,20,by=2))
>
>

	[[alternative HTML version deleted]]


From @zwj|08 @end|ng |rom gm@||@com  Sat Dec 19 04:26:43 2020
From: @zwj|08 @end|ng |rom gm@||@com (Jiefei Wang)
Date: Sat, 19 Dec 2020 11:26:43 +0800
Subject: [R] How to perform package cleanup when R session is ending?
In-Reply-To: <CAHqSRuQh4YjaQ91JkdOAmtGP3i1PMgSj+_BT0FnU4Nu==Gr9Yg@mail.gmail.com>
References: <CAGiFhPM8i1puhWk4M0bbzTE5_K+izmDsRxexeLVA=04s+xz2-A@mail.gmail.com>
 <CAHqSRuTAByh6DOpkkhvVZ=Si6e=qmJkvG7btPJJCq=0Z1LUb-Q@mail.gmail.com>
 <CAHqSRuQh4YjaQ91JkdOAmtGP3i1PMgSj+_BT0FnU4Nu==Gr9Yg@mail.gmail.com>
Message-ID: <CAGiFhPNF9KTaS0XQAsf95ZPW24vLxCAZKWrNbrSrw3FyG9JvgQ@mail.gmail.com>

Thank you! This solution works! I actually tried reg.finalizer but it
didn't work when it is a part of the package code,
so I thought this is not the right function. Your example is very helpful.
Putting the function inside the package
initializer makes the finalizer works as I wish. Not sure why it behaves
differently when in different locations but
this is good enough for me. Many thanks!

Best,
Jiefei

On Sat, Dec 19, 2020 at 1:09 AM Bill Dunlap <williamwdunlap at gmail.com>
wrote:

> E.g., as in a package containing just the following R code:
>
> $ cat testFinalizer/R/zzz.R
> envir <- new.env()
> cleanup <- function(e) {
>     message("cleanup(", format(e), ")")
>     if (!isTRUE(envir$cleaned)) {
>         message("    cleaning ", format(e))
>         envir$cleaned <- TRUE
>     } else {
>         # cleanup previously called by .onUnload()
>         message("    ", format(e), " has already been cleaned")
>     }
> }
> .onLoad <- function(libname, pkgname) {
>     message("Loading ", pkgname, " from ", libname)
>     reg.finalizer(e=envir, f=cleanup, onexit=TRUE)
>     message("Installed finalizer for ", format(envir))
> }
> .onUnload <- function(libpath) {
>     message("Unloading ", libpath)
>     cleanup(envir)
> }
>
> This gives:
>
> $ R --quiet
> > library(testFinalizer,lib="lib")
> Loading testFinalizer from /home/bill/packages/lib
> Installed finalizer for <environment: 0x55a558b16120>
> > detach("package:testFinalizer", unload=TRUE)
> Unloading /home/bill/packages/lib/testFinalizer
> cleanup(<environment: 0x55a558b16120>)
>     cleaning <environment: 0x55a558b16120>
> > q("no")
> cleanup(<environment: 0x55a558b16120>)
>     <environment: 0x55a558b16120> has already been cleaned
> $ R --quiet
> > library(testFinalizer, lib="lib")
> Loading testFinalizer from /home/bill/packages/lib
> Installed finalizer for <environment: 0x55f8dac2d598>
> > objects(all=TRUE)
> character(0)
> > q("no")
> cleanup(<environment: 0x55f8dac2d598>)
>     cleaning <environment: 0x55f8dac2d598>
>
> On Fri, Dec 18, 2020 at 7:39 AM Bill Dunlap <williamwdunlap at gmail.com>
> wrote:
>
>> Have you tried using reg.finalizer(..., onexit=TRUE)?
>>
>> -BIll
>>
>> On Fri, Dec 18, 2020 at 7:29 AM Jiefei Wang <szwjf08 at gmail.com> wrote:
>>
>>> Hi,
>>>
>>> I am looking for a way to clean up my package resources before R is
>>> ended.
>>> It looks like the .onUnload function would not be helpful as it would not
>>> be called before R is ended. This behavior has been described in the
>>> document:
>>>
>>> *Note that packages are not detached nor namespaces unloaded at the end
>>> of
>>> an R session unless the user arranges to do so (e.g., via .Last).*
>>>
>>> I have also searched for ?.Last as the document says. However, the .Last
>>> function is for the end user to use, not for the package developers, so I
>>> am clueless now. How to clean up my package before R ends? Any
>>> suggestions?
>>>
>>> Best,
>>> Jiefei
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From p@ych@o||u @end|ng |rom gm@||@com  Sat Dec 19 19:57:29 2020
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Sat, 19 Dec 2020 13:57:29 -0500
Subject: [R] Problem in cluster sampling: 'mixed with negative subscripts'
Message-ID: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>

Hi,

I was trying to do a cluster sampling but came across this error: Error in
xj[i] : only 0's may be mixed with negative subscripts. What is the cause
and how to get around? Thank you for your help!

Here is the code:

#simulate some data
y <- rnorm(20)
x <- rnorm(20)
z <- rep(1:5, 4)
w <- rep(1:4, each=5)
dd <- data.frame(id=z, cluster=w, x=x, y=y)
clusters <- split(dd, dd$cluster) #split into clusters
k <- length(clusters) #length of clusters
# This function generates a cluster sample
clsamp <- function() dd[unlist(clusters[sample.int(k, k, replace = TRUE)],
use.names = TRUE), ]
clsamp()


I got this error: Error in xj[i] : only 0's may be mixed with negative
subscripts.


Best,

Chao

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Dec 19 21:03:49 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 19 Dec 2020 12:03:49 -0800
Subject: [R] 
 Problem in cluster sampling: 'mixed with negative subscripts'
In-Reply-To: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
References: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
Message-ID: <CAGxFJbQx6RU7FsiRUVeP8Xtb9BYkBb8riSk9cxeXVK-PWEt86w@mail.gmail.com>

1. Thanks for the example.
2. Good opportunity to learn (more) about debugging in R. See ?debug or
?browser()
3. Hint: what do you think ... unlist(clusters[...  gives?  (you are using
it as an index for subscripting dd)

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Dec 19, 2020 at 10:58 AM Chao Liu <psychaoliu at gmail.com> wrote:

> Hi,
>
> I was trying to do a cluster sampling but came across this error: Error in
> xj[i] : only 0's may be mixed with negative subscripts. What is the cause
> and how to get around? Thank you for your help!
>
> Here is the code:
>
> #simulate some data
> y <- rnorm(20)
> x <- rnorm(20)
> z <- rep(1:5, 4)
> w <- rep(1:4, each=5)
> dd <- data.frame(id=z, cluster=w, x=x, y=y)
> clusters <- split(dd, dd$cluster) #split into clusters
> k <- length(clusters) #length of clusters
> # This function generates a cluster sample
> clsamp <- function() dd[unlist(clusters[sample.int(k, k, replace = TRUE)],
> use.names = TRUE), ]
> clsamp()
>
>
> I got this error: Error in xj[i] : only 0's may be mixed with negative
> subscripts.
>
>
> Best,
>
> Chao
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From d@n@bo|@er @end|ng |rom gm@||@com  Fri Dec 18 14:47:04 2020
From: d@n@bo|@er @end|ng |rom gm@||@com (Dan Bolser)
Date: Fri, 18 Dec 2020 13:47:04 +0000
Subject: [R] Question about dotwhisker
Message-ID: <CAPBO=2mPPxtYWXNrJWZSJx9nYX1neaN2bOfWfb6YRR56xoJMQQ@mail.gmail.com>

Hello,

I'm reading this and one part is confusing me (the most ;-)

library(dotwhisker)
library(broom)
library(dplyr)

m1 <- lm(mpg ~ wt + cyl + disp + gear, data = mtcars)

# Please compare:
dwplot(m1)
dwplot(tidy(m1))

Why is the dwplot of tidy(m1) so different from the dwplot of m1?

I had thought that tidy just gathers data from m1 and that that is what
dwplot is showing, but the latter shows results that are closer to what you
get from inspecting m1:

Coefficients:
(Intercept)           wt          cyl         disp         gear
  43.539847    -3.792867    -1.784296     0.006944    -0.490445

Sorry if I'm being stupid, but the latter looks right while the former
looks wrong (i.e. I can't work out what the former is actually plotting).


Many thanks,
Dan.

	[[alternative HTML version deleted]]


From d@n@bo|@er @end|ng |rom gm@||@com  Fri Dec 18 14:53:28 2020
From: d@n@bo|@er @end|ng |rom gm@||@com (Dan Bolser)
Date: Fri, 18 Dec 2020 13:53:28 +0000
Subject: [R] Question about dotwhisker
In-Reply-To: <CAPBO=2mPPxtYWXNrJWZSJx9nYX1neaN2bOfWfb6YRR56xoJMQQ@mail.gmail.com>
References: <CAPBO=2mPPxtYWXNrJWZSJx9nYX1neaN2bOfWfb6YRR56xoJMQQ@mail.gmail.com>
Message-ID: <CAPBO=2md_Gqrg7spE62pbSgaQNUKpRXcaH86YgPjH_DTrFfrKw@mail.gmail.com>

Sorry, forgot to link the actual vignette:
https://cran.r-project.org/web/packages/dotwhisker/vignettes/dotwhisker-vignette.html

In fact the vignette states:
dwplot(m1_df) #same as dwplot(m1)

where m1_df is m1_df <- tidy(m1)

They are not the same in either the vignette itself or on my computer.

I don't understand the part about "rescale the coefficients", but it seems
that that is now the default... Just visually at least...

If the plots in the vignette are auto-generated from code, then that would
explain why the discrepancy isn't mentioned in the text.





On Fri, 18 Dec 2020 at 13:47, Dan Bolser <dan.bolser at gmail.com> wrote:

> Hello,
>
> I'm reading this and one part is confusing me (the most ;-)
>
> library(dotwhisker)
> library(broom)
> library(dplyr)
>
> m1 <- lm(mpg ~ wt + cyl + disp + gear, data = mtcars)
>
> # Please compare:
> dwplot(m1)
> dwplot(tidy(m1))
>
> Why is the dwplot of tidy(m1) so different from the dwplot of m1?
>
> I had thought that tidy just gathers data from m1 and that that is what
> dwplot is showing, but the latter shows results that are closer to what you
> get from inspecting m1:
>
> Coefficients:
> (Intercept)           wt          cyl         disp         gear
>   43.539847    -3.792867    -1.784296     0.006944    -0.490445
>
> Sorry if I'm being stupid, but the latter looks right while the former
> looks wrong (i.e. I can't work out what the former is actually plotting).
>
>
> Many thanks,
> Dan.
>

	[[alternative HTML version deleted]]


From ky|e @end|ng |rom ehr@@upenn@edu  Sat Dec 19 16:44:02 2020
From: ky|e @end|ng |rom ehr@@upenn@edu (Rosato, Kyle)
Date: Sat, 19 Dec 2020 15:44:02 +0000
Subject: [R] Error Message Cannot use `+.gg()` with a single argument. Did
 you accidentally put + on a new line?
Message-ID: <295BDF6C-5359-4A2C-955C-4E04B9787926@contoso.com>

For some simple reason, I am unable to see the mistake:

ggplot(filter(nlsw88, !(is.na(union))), aes(y = wage, x = union, fill = union))
+ geom_boxplot() + facet_wrap(~idblack)

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Sat Dec 19 22:08:32 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sat, 19 Dec 2020 23:08:32 +0200
Subject: [R] 
 Error Message Cannot use `+.gg()` with a single argument. Did
 you accidentally put + on a new line?
In-Reply-To: <295BDF6C-5359-4A2C-955C-4E04B9787926@contoso.com>
References: <295BDF6C-5359-4A2C-955C-4E04B9787926@contoso.com>
Message-ID: <CAGgJW74_+WnqRhA88nNOwZUe=jaDSkf54pAMWkuj_soKGD=bYw@mail.gmail.com>

As the error message says, move the '+' sign from the start of the second
line to the end of the preceding line.


On Sat, Dec 19, 2020 at 10:29 PM Rosato, Kyle <kyle at ehrs.upenn.edu> wrote:

> For some simple reason, I am unable to see the mistake:
>
> ggplot(filter(nlsw88, !(is.na(union))), aes(y = wage, x = union, fill =
> union))
> + geom_boxplot() + facet_wrap(~idblack)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sat Dec 19 22:19:28 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 20 Dec 2020 08:19:28 +1100
Subject: [R] 
 Problem in cluster sampling: 'mixed with negative subscripts'
In-Reply-To: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
References: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
Message-ID: <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>

Hi Chao,
You have discovered one of the surprising things about the extraction
operator "[". It expects to get an object consisting of integers (like
1,2,3,...) or logical values (TRUE,FALSE or 0,1). As you have passed
the _values_ of your cluster, it can't deal with the negative numbers
as they don't index anything in the original object. If you get rid of
the negative values by applying the abs() function, it will seem to
work, but you aren't getting what you expected or anything sensible.
Here's an example:

# get a vector of positive and negative real numbers
x1<-rnorm(10)
x1
[1] -0.2174320 -1.3185389  0.4049751  0.4780766 -1.6317983  3.4265246
[7]  2.0721620  1.1590961  0.9896266  0.5672552
# try to index it with its values
x[x]
# Error in x[x] : only 0's may be mixed with negative subscripts
# now change the negative values to positive ones
 x1[abs(x1)]
# No error, but you only get some of the values!
[1] -0.2174320 -0.2174320  0.4049751 -1.3185389 -0.2174320
abs(x1)
[1] 0.2174320 1.3185389 0.4049751 0.4780766 1.6317983 3.4265246 2.0721620
[8] 1.1590961 0.9896266 0.5672552
# What the extraction operator does is attempt to get valid {positive}
integer indices
# or zeros. Then it can use the positive values and discard the zeros
as.integer(abs(x1))
[1] 0 1 0 0 1 3 2 1 0 0

Now the error message makes a lot more sense.

Jim

On Sun, Dec 20, 2020 at 5:58 AM Chao Liu <psychaoliu at gmail.com> wrote:
>
> Hi,
>
> I was trying to do a cluster sampling but came across this error: Error in
> xj[i] : only 0's may be mixed with negative subscripts. What is the cause
> and how to get around? Thank you for your help!
>
> Here is the code:
>
> #simulate some data
> y <- rnorm(20)
> x <- rnorm(20)
> z <- rep(1:5, 4)
> w <- rep(1:4, each=5)
> dd <- data.frame(id=z, cluster=w, x=x, y=y)
> clusters <- split(dd, dd$cluster) #split into clusters
> k <- length(clusters) #length of clusters
> # This function generates a cluster sample
> clsamp <- function() dd[unlist(clusters[sample.int(k, k, replace = TRUE)],
> use.names = TRUE), ]
> clsamp()
>
>
> I got this error: Error in xj[i] : only 0's may be mixed with negative
> subscripts.
>
>
> Best,
>
> Chao
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From p@ych@o||u @end|ng |rom gm@||@com  Sun Dec 20 02:56:31 2020
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Sat, 19 Dec 2020 20:56:31 -0500
Subject: [R] 
 Problem in cluster sampling: 'mixed with negative subscripts'
In-Reply-To: <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>
References: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
 <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>
Message-ID: <CACCU-vOdmYUisqjJukpB3sq=rHRhWtuOpwiZb-CmYgP4qnVjkA@mail.gmail.com>

Jim and Bert,

Thank you for your help. It was an indexing problem. I was able to solve it
by changing the split line to: clusters <- split(seq_len(nrow(dd)),
dd$cluster).
Thank you.

Best,

Chao


On Sat, Dec 19, 2020 at 4:19 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Chao,
> You have discovered one of the surprising things about the extraction
> operator "[". It expects to get an object consisting of integers (like
> 1,2,3,...) or logical values (TRUE,FALSE or 0,1). As you have passed
> the _values_ of your cluster, it can't deal with the negative numbers
> as they don't index anything in the original object. If you get rid of
> the negative values by applying the abs() function, it will seem to
> work, but you aren't getting what you expected or anything sensible.
> Here's an example:
>
> # get a vector of positive and negative real numbers
> x1<-rnorm(10)
> x1
> [1] -0.2174320 -1.3185389  0.4049751  0.4780766 -1.6317983  3.4265246
> [7]  2.0721620  1.1590961  0.9896266  0.5672552
> # try to index it with its values
> x[x]
> # Error in x[x] : only 0's may be mixed with negative subscripts
> # now change the negative values to positive ones
>  x1[abs(x1)]
> # No error, but you only get some of the values!
> [1] -0.2174320 -0.2174320  0.4049751 -1.3185389 -0.2174320
> abs(x1)
> [1] 0.2174320 1.3185389 0.4049751 0.4780766 1.6317983 3.4265246 2.0721620
> [8] 1.1590961 0.9896266 0.5672552
> # What the extraction operator does is attempt to get valid {positive}
> integer indices
> # or zeros. Then it can use the positive values and discard the zeros
> as.integer(abs(x1))
> [1] 0 1 0 0 1 3 2 1 0 0
>
> Now the error message makes a lot more sense.
>
> Jim
>
> On Sun, Dec 20, 2020 at 5:58 AM Chao Liu <psychaoliu at gmail.com> wrote:
> >
> > Hi,
> >
> > I was trying to do a cluster sampling but came across this error: Error
> in
> > xj[i] : only 0's may be mixed with negative subscripts. What is the cause
> > and how to get around? Thank you for your help!
> >
> > Here is the code:
> >
> > #simulate some data
> > y <- rnorm(20)
> > x <- rnorm(20)
> > z <- rep(1:5, 4)
> > w <- rep(1:4, each=5)
> > dd <- data.frame(id=z, cluster=w, x=x, y=y)
> > clusters <- split(dd, dd$cluster) #split into clusters
> > k <- length(clusters) #length of clusters
> > # This function generates a cluster sample
> > clsamp <- function() dd[unlist(clusters[sample.int(k, k, replace =
> TRUE)],
> > use.names = TRUE), ]
> > clsamp()
> >
> >
> > I got this error: Error in xj[i] : only 0's may be mixed with negative
> > subscripts.
> >
> >
> > Best,
> >
> > Chao
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Sun Dec 20 06:22:15 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Sun, 20 Dec 2020 18:22:15 +1300
Subject: [R] 
 Problem in cluster sampling: 'mixed with negative subscripts'
In-Reply-To: <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>
References: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
 <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>
Message-ID: <CABcYAd+3tvax8z55ufamyDWA_FeikTa2HQPjXnh6hJa4LoNhXw@mail.gmail.com>

More accurately, in x[i] where x and i are simple vectors,
i may be a mix of positive integers and zeros
  where the zeros contribute nothing to the result
or it may be a MIX of negative integers and zeros
  where the zeros contribute nothing to the result
  and -k means "do not include element k".
It would be nice to write things like
  x[c(-1,1)]
meaning to copy everything except element 1, then
element 1.  But that is not allowed.


On Sun, 20 Dec 2020 at 10:20, Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Chao,
> You have discovered one of the surprising things about the extraction
> operator "[". It expects to get an object consisting of integers (like
> 1,2,3,...) or logical values (TRUE,FALSE or 0,1). As you have passed
> the _values_ of your cluster, it can't deal with the negative numbers
> as they don't index anything in the original object. If you get rid of
> the negative values by applying the abs() function, it will seem to
> work, but you aren't getting what you expected or anything sensible.
> Here's an example:
>
> # get a vector of positive and negative real numbers
> x1<-rnorm(10)
> x1
> [1] -0.2174320 -1.3185389  0.4049751  0.4780766 -1.6317983  3.4265246
> [7]  2.0721620  1.1590961  0.9896266  0.5672552
> # try to index it with its values
> x[x]
> # Error in x[x] : only 0's may be mixed with negative subscripts
> # now change the negative values to positive ones
>  x1[abs(x1)]
> # No error, but you only get some of the values!
> [1] -0.2174320 -0.2174320  0.4049751 -1.3185389 -0.2174320
> abs(x1)
> [1] 0.2174320 1.3185389 0.4049751 0.4780766 1.6317983 3.4265246 2.0721620
> [8] 1.1590961 0.9896266 0.5672552
> # What the extraction operator does is attempt to get valid {positive}
> integer indices
> # or zeros. Then it can use the positive values and discard the zeros
> as.integer(abs(x1))
> [1] 0 1 0 0 1 3 2 1 0 0
>
> Now the error message makes a lot more sense.
>
> Jim
>
> On Sun, Dec 20, 2020 at 5:58 AM Chao Liu <psychaoliu at gmail.com> wrote:
> >
> > Hi,
> >
> > I was trying to do a cluster sampling but came across this error: Error
> in
> > xj[i] : only 0's may be mixed with negative subscripts. What is the cause
> > and how to get around? Thank you for your help!
> >
> > Here is the code:
> >
> > #simulate some data
> > y <- rnorm(20)
> > x <- rnorm(20)
> > z <- rep(1:5, 4)
> > w <- rep(1:4, each=5)
> > dd <- data.frame(id=z, cluster=w, x=x, y=y)
> > clusters <- split(dd, dd$cluster) #split into clusters
> > k <- length(clusters) #length of clusters
> > # This function generates a cluster sample
> > clsamp <- function() dd[unlist(clusters[sample.int(k, k, replace =
> TRUE)],
> > use.names = TRUE), ]
> > clsamp()
> >
> >
> > I got this error: Error in xj[i] : only 0's may be mixed with negative
> > subscripts.
> >
> >
> > Best,
> >
> > Chao
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Dec 20 06:37:49 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 19 Dec 2020 21:37:49 -0800
Subject: [R] 
 Problem in cluster sampling: 'mixed with negative subscripts'
In-Reply-To: <CABcYAd+3tvax8z55ufamyDWA_FeikTa2HQPjXnh6hJa4LoNhXw@mail.gmail.com>
References: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
 <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>
 <CABcYAd+3tvax8z55ufamyDWA_FeikTa2HQPjXnh6hJa4LoNhXw@mail.gmail.com>
Message-ID: <CAGxFJbTJ5A-KSF0+tRS9pUX=YTqwr98OXr5zNRQJ3XT+Zr99zA@mail.gmail.com>

Inline...


On Sat, Dec 19, 2020 at 9:22 PM Richard O'Keefe <raoknz at gmail.com> wrote:

> More accurately, in x[i] where x and i are simple vectors,
> i may be a mix of positive integers and zeros
>   where the zeros contribute nothing to the result
> or it may be a MIX of negative integers and zeros
>   where the zeros contribute nothing to the result
>   and -k means "do not include element k".
> It would be nice to write things like
>   x[c(-1,1)]
> meaning to copy everything except element 1, then
> element 1.  But that is not allowed.
>

But c(x[-1], x[1])  is, which is not so terrible, after all...

Cheers,
Bert


>
> On Sun, 20 Dec 2020 at 10:20, Jim Lemon <drjimlemon at gmail.com> wrote:
>
> > Hi Chao,
> > You have discovered one of the surprising things about the extraction
> > operator "[". It expects to get an object consisting of integers (like
> > 1,2,3,...) or logical values (TRUE,FALSE or 0,1). As you have passed
> > the _values_ of your cluster, it can't deal with the negative numbers
> > as they don't index anything in the original object. If you get rid of
> > the negative values by applying the abs() function, it will seem to
> > work, but you aren't getting what you expected or anything sensible.
> > Here's an example:
> >
> > # get a vector of positive and negative real numbers
> > x1<-rnorm(10)
> > x1
> > [1] -0.2174320 -1.3185389  0.4049751  0.4780766 -1.6317983  3.4265246
> > [7]  2.0721620  1.1590961  0.9896266  0.5672552
> > # try to index it with its values
> > x[x]
> > # Error in x[x] : only 0's may be mixed with negative subscripts
> > # now change the negative values to positive ones
> >  x1[abs(x1)]
> > # No error, but you only get some of the values!
> > [1] -0.2174320 -0.2174320  0.4049751 -1.3185389 -0.2174320
> > abs(x1)
> > [1] 0.2174320 1.3185389 0.4049751 0.4780766 1.6317983 3.4265246 2.0721620
> > [8] 1.1590961 0.9896266 0.5672552
> > # What the extraction operator does is attempt to get valid {positive}
> > integer indices
> > # or zeros. Then it can use the positive values and discard the zeros
> > as.integer(abs(x1))
> > [1] 0 1 0 0 1 3 2 1 0 0
> >
> > Now the error message makes a lot more sense.
> >
> > Jim
> >
> > On Sun, Dec 20, 2020 at 5:58 AM Chao Liu <psychaoliu at gmail.com> wrote:
> > >
> > > Hi,
> > >
> > > I was trying to do a cluster sampling but came across this error: Error
> > in
> > > xj[i] : only 0's may be mixed with negative subscripts. What is the
> cause
> > > and how to get around? Thank you for your help!
> > >
> > > Here is the code:
> > >
> > > #simulate some data
> > > y <- rnorm(20)
> > > x <- rnorm(20)
> > > z <- rep(1:5, 4)
> > > w <- rep(1:4, each=5)
> > > dd <- data.frame(id=z, cluster=w, x=x, y=y)
> > > clusters <- split(dd, dd$cluster) #split into clusters
> > > k <- length(clusters) #length of clusters
> > > # This function generates a cluster sample
> > > clsamp <- function() dd[unlist(clusters[sample.int(k, k, replace =
> > TRUE)],
> > > use.names = TRUE), ]
> > > clsamp()
> > >
> > >
> > > I got this error: Error in xj[i] : only 0's may be mixed with negative
> > > subscripts.
> > >
> > >
> > > Best,
> > >
> > > Chao
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sun Dec 20 08:32:46 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 20 Dec 2020 18:32:46 +1100
Subject: [R] 
 Problem in cluster sampling: 'mixed with negative subscripts'
In-Reply-To: <CAGxFJbTJ5A-KSF0+tRS9pUX=YTqwr98OXr5zNRQJ3XT+Zr99zA@mail.gmail.com>
References: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
 <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>
 <CABcYAd+3tvax8z55ufamyDWA_FeikTa2HQPjXnh6hJa4LoNhXw@mail.gmail.com>
 <CAGxFJbTJ5A-KSF0+tRS9pUX=YTqwr98OXr5zNRQJ3XT+Zr99zA@mail.gmail.com>
Message-ID: <CA+8X3fWLSX5uTq9b7PenbNUzFYmjCn=9J8c1U7jZyDoSHeA8iA@mail.gmail.com>

It does remind me of counting on one's fingers, though.

Jim

On Sun, Dec 20, 2020 at 4:38 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
But c(x[-1], x[1])  is, which is not so terrible, after all...


From tr@xp|@yer @end|ng |rom gm@||@com  Sun Dec 20 13:22:04 2020
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Sun, 20 Dec 2020 13:22:04 +0100
Subject: [R] ggplot2::coord_fixed() margin problem
Message-ID: <CAGAA5begG9T2RC=6xO_ywYd2nvsOQ_p0b2iNBavU+O8KnAraaQ@mail.gmail.com>

Hi,
  I posted this on the Google Group for ggplot2 but got no response.
https://groups.google.com/g/ggplot2/c/441srnt6RZU

So I hope someone can help me here instead?!

-

If I don't use the coord_fixed() then all the background is yellow as
expected.
But I need to coord_fixed() and then it adds a little white around my plot.
Is it possible to avoid the white and use coord_fixed() ?

Here is a "Minimal, Reproducible Example":

library(ggplot2)
g <-
  ggplot() +
  theme(
     plot.background = element_rect(fill = "yellow2"),
     panel.background = element_rect(fill = "yellow2"),
  )
g <- g + coord_fixed()
g

Regards
Martin M. S. Pedersen

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Dec 20 15:22:03 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 20 Dec 2020 06:22:03 -0800
Subject: [R] 
 Problem in cluster sampling: 'mixed with negative subscripts'
In-Reply-To: <CA+8X3fWLSX5uTq9b7PenbNUzFYmjCn=9J8c1U7jZyDoSHeA8iA@mail.gmail.com>
References: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
 <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>
 <CABcYAd+3tvax8z55ufamyDWA_FeikTa2HQPjXnh6hJa4LoNhXw@mail.gmail.com>
 <CAGxFJbTJ5A-KSF0+tRS9pUX=YTqwr98OXr5zNRQJ3XT+Zr99zA@mail.gmail.com>
 <CA+8X3fWLSX5uTq9b7PenbNUzFYmjCn=9J8c1U7jZyDoSHeA8iA@mail.gmail.com>
Message-ID: <8BF26295-CB80-4C83-92E4-9F2FCE8CBFE4@dcn.davis.ca.us>

I've never mastered using negative indexes with my fingers, though...

On December 19, 2020 11:32:46 PM PST, Jim Lemon <drjimlemon at gmail.com> wrote:
>It does remind me of counting on one's fingers, though.
>
>Jim
>
>On Sun, Dec 20, 2020 at 4:38 PM Bert Gunter <bgunter.4567 at gmail.com>
>wrote:
>>
>But c(x[-1], x[1])  is, which is not so terrible, after all...
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 20 17:43:09 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 20 Dec 2020 16:43:09 +0000
Subject: [R] ggplot2::coord_fixed() margin problem
In-Reply-To: <CAGAA5begG9T2RC=6xO_ywYd2nvsOQ_p0b2iNBavU+O8KnAraaQ@mail.gmail.com>
References: <CAGAA5begG9T2RC=6xO_ywYd2nvsOQ_p0b2iNBavU+O8KnAraaQ@mail.gmail.com>
Message-ID: <0b9361f9-5b3f-4fac-bfc8-74018779fe8c@sapo.pt>

Hello,

I am not sure I understand the problem.
With coord_fixed() both axis have the same length and the plot is a 
square. When resizing the plot window the white areas can be on 
top/bottom if the window height is bigger than its width or to the 
left/right if it's the other way around.

Does this answer the question?

Hope this helps,

Rui Barradas

?s 12:22 de 20/12/20, Martin M?ller Skarbiniks Pedersen escreveu:
> Hi,
>    I posted this on the Google Group for ggplot2 but got no response.
> https://groups.google.com/g/ggplot2/c/441srnt6RZU
> 
> So I hope someone can help me here instead?!
> 
> -
> 
> If I don't use the coord_fixed() then all the background is yellow as
> expected.
> But I need to coord_fixed() and then it adds a little white around my plot.
> Is it possible to avoid the white and use coord_fixed() ?
> 
> Here is a "Minimal, Reproducible Example":
> 
> library(ggplot2)
> g <-
>    ggplot() +
>    theme(
>       plot.background = element_rect(fill = "yellow2"),
>       panel.background = element_rect(fill = "yellow2"),
>    )
> g <- g + coord_fixed()
> g
> 
> Regards
> Martin M. S. Pedersen
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From tr@xp|@yer @end|ng |rom gm@||@com  Sun Dec 20 17:55:28 2020
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Sun, 20 Dec 2020 17:55:28 +0100
Subject: [R] 
 Problem in cluster sampling: 'mixed with negative subscripts'
In-Reply-To: <CABcYAd+3tvax8z55ufamyDWA_FeikTa2HQPjXnh6hJa4LoNhXw@mail.gmail.com>
References: <CACCU-vNE9o0mfosQpgCQ3XKwV85e3BWgmDcZtUn1MubFELpoNw@mail.gmail.com>
 <CA+8X3fX=+XCwq=a7r2K2h0=b-Xtx=YMvNELmtkWxmL20zpy7MA@mail.gmail.com>
 <CABcYAd+3tvax8z55ufamyDWA_FeikTa2HQPjXnh6hJa4LoNhXw@mail.gmail.com>
Message-ID: <CAGAA5bdWJON5KZ-Hi=NgLr13UX6q+=uYEsrqkuqWB50xQRGKtw@mail.gmail.com>

On Sun, 20 Dec 2020 at 06:22, Richard O'Keefe <raoknz at gmail.com> wrote:

> More accurately, in x[i] where x and i are simple vectors,
> i may be a mix of positive integers and zeros
>   where the zeros contribute nothing to the result
>

Yes, index 0 doesn't get an error or a warning. I think it should.
Eg.

(v <- 1:4)
[1] 1 2 3 4

v[c(0,2,4)] <- c(0,2)
v
[1] 1 0 3 2 # a surprise ?

Regards
Martin

	[[alternative HTML version deleted]]


From tr@xp|@yer @end|ng |rom gm@||@com  Sun Dec 20 18:00:09 2020
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Sun, 20 Dec 2020 18:00:09 +0100
Subject: [R] ggplot2::coord_fixed() margin problem
In-Reply-To: <0b9361f9-5b3f-4fac-bfc8-74018779fe8c@sapo.pt>
References: <CAGAA5begG9T2RC=6xO_ywYd2nvsOQ_p0b2iNBavU+O8KnAraaQ@mail.gmail.com>
 <0b9361f9-5b3f-4fac-bfc8-74018779fe8c@sapo.pt>
Message-ID: <CAGAA5bcPShEL1i__Nk_hCs0-9_Npgwdqyd+=VhdN1tAWQ3RHpQ@mail.gmail.com>

On Sun, 20 Dec 2020 at 17:43, Rui Barradas <ruipbarradas at sapo.pt> wrote:

Thank you for trying to answer my question.

> I am not sure I understand the problem.
> With coord_fixed() both axis have the same length and the plot is a
> square. When resizing the plot window the white areas can be on
> top/bottom if the window height is bigger than its width or to the
> left/right if it's the other way around.

Yes.

> Does this answer the question?

Nope.
I really need the added space as the same color as the plot.background
(yellow2) in the example below.
However the code below generates a small white space. I was expected it to
be the
same as the plot.background color.

library(ggplot2)
g <-
   ggplot() +
   theme(
      plot.background = element_rect(fill = "yellow2"),
      panel.background = element_rect(fill = "yellow2"),
   )
g <- g + coord_fixed()
g

Regards
Martin

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Dec 20 18:31:44 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 20 Dec 2020 09:31:44 -0800
Subject: [R] ggplot2::coord_fixed() margin problem
In-Reply-To: <CAGAA5bcPShEL1i__Nk_hCs0-9_Npgwdqyd+=VhdN1tAWQ3RHpQ@mail.gmail.com>
References: <CAGAA5begG9T2RC=6xO_ywYd2nvsOQ_p0b2iNBavU+O8KnAraaQ@mail.gmail.com>
 <0b9361f9-5b3f-4fac-bfc8-74018779fe8c@sapo.pt>
 <CAGAA5bcPShEL1i__Nk_hCs0-9_Npgwdqyd+=VhdN1tAWQ3RHpQ@mail.gmail.com>
Message-ID: <9955A35F-34A5-47CE-820F-B394B58BC8B7@dcn.davis.ca.us>

Perhaps ?expansion can help?

On December 20, 2020 9:00:09 AM PST, "Martin M?ller Skarbiniks Pedersen" <traxplayer at gmail.com> wrote:
>On Sun, 20 Dec 2020 at 17:43, Rui Barradas <ruipbarradas at sapo.pt>
>wrote:
>
>Thank you for trying to answer my question.
>
>> I am not sure I understand the problem.
>> With coord_fixed() both axis have the same length and the plot is a
>> square. When resizing the plot window the white areas can be on
>> top/bottom if the window height is bigger than its width or to the
>> left/right if it's the other way around.
>
>Yes.
>
>> Does this answer the question?
>
>Nope.
>I really need the added space as the same color as the plot.background
>(yellow2) in the example below.
>However the code below generates a small white space. I was expected it
>to
>be the
>same as the plot.background color.
>
>library(ggplot2)
>g <-
>   ggplot() +
>   theme(
>      plot.background = element_rect(fill = "yellow2"),
>      panel.background = element_rect(fill = "yellow2"),
>   )
>g <- g + coord_fixed()
>g
>
>Regards
>Martin
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Dec 20 18:56:18 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 20 Dec 2020 12:56:18 -0500
Subject: [R] ggplot2::coord_fixed() margin problem
In-Reply-To: <CAGAA5bcPShEL1i__Nk_hCs0-9_Npgwdqyd+=VhdN1tAWQ3RHpQ@mail.gmail.com>
References: <CAGAA5begG9T2RC=6xO_ywYd2nvsOQ_p0b2iNBavU+O8KnAraaQ@mail.gmail.com>
 <0b9361f9-5b3f-4fac-bfc8-74018779fe8c@sapo.pt>
 <CAGAA5bcPShEL1i__Nk_hCs0-9_Npgwdqyd+=VhdN1tAWQ3RHpQ@mail.gmail.com>
Message-ID: <417788c1-8b3f-2ca6-ce1d-af87b284b5a1@gmail.com>

On 20/12/2020 12:00 p.m., Martin M?ller Skarbiniks Pedersen wrote:
> On Sun, 20 Dec 2020 at 17:43, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
> Thank you for trying to answer my question.
> 
>> I am not sure I understand the problem.
>> With coord_fixed() both axis have the same length and the plot is a
>> square. When resizing the plot window the white areas can be on
>> top/bottom if the window height is bigger than its width or to the
>> left/right if it's the other way around.
> 
> Yes.
> 
>> Does this answer the question?
> 
> Nope.
> I really need the added space as the same color as the plot.background
> (yellow2) in the example below.
> However the code below generates a small white space. I was expected it to
> be the
> same as the plot.background color.
> 
> library(ggplot2)
> g <-
>     ggplot() +
>     theme(
>        plot.background = element_rect(fill = "yellow2"),
>        panel.background = element_rect(fill = "yellow2"),
>     )
> g <- g + coord_fixed()
> g
> 

Set the background when you open the graphics device.  Assuming you've 
run the code above,

dev.new(bg = "yellow2")
g

You'll still see the outline of the square; I don't know ggplot2 well 
enough to know if that can be removed.

Duncan Murdoch


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 20 19:21:41 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 20 Dec 2020 18:21:41 +0000
Subject: [R] ggplot2::coord_fixed() margin problem
In-Reply-To: <CAGAA5bcPShEL1i__Nk_hCs0-9_Npgwdqyd+=VhdN1tAWQ3RHpQ@mail.gmail.com>
References: <CAGAA5begG9T2RC=6xO_ywYd2nvsOQ_p0b2iNBavU+O8KnAraaQ@mail.gmail.com>
 <0b9361f9-5b3f-4fac-bfc8-74018779fe8c@sapo.pt>
 <CAGAA5bcPShEL1i__Nk_hCs0-9_Npgwdqyd+=VhdN1tAWQ3RHpQ@mail.gmail.com>
Message-ID: <21702d19-0218-5b54-908b-b9f32c88eae1@sapo.pt>

Hello,

Is it this?

plot.background = element_rect(colour = "yellow2", fill = "yellow2")

The small white space goes away.

Hope this helps,

Rui Barradas

?s 17:00 de 20/12/20, Martin M?ller Skarbiniks Pedersen escreveu:
> On Sun, 20 Dec 2020 at 17:43, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
> Thank you for trying to answer my question.
> 
>> I am not sure I understand the problem.
>> With coord_fixed() both axis have the same length and the plot is a
>> square. When resizing the plot window the white areas can be on
>> top/bottom if the window height is bigger than its width or to the
>> left/right if it's the other way around.
> 
> Yes.
> 
>> Does this answer the question?
> 
> Nope.
> I really need the added space as the same color as the plot.background
> (yellow2) in the example below.
> However the code below generates a small white space. I was expected it to
> be the
> same as the plot.background color.
> 
> library(ggplot2)
> g <-
>     ggplot() +
>     theme(
>        plot.background = element_rect(fill = "yellow2"),
>        panel.background = element_rect(fill = "yellow2"),
>     )
> g <- g + coord_fixed()
> g
> 
> Regards
> Martin
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Dec 20 20:47:59 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 20 Dec 2020 14:47:59 -0500
Subject: [R] ggplot2::coord_fixed() margin problem
In-Reply-To: <21702d19-0218-5b54-908b-b9f32c88eae1@sapo.pt>
References: <CAGAA5begG9T2RC=6xO_ywYd2nvsOQ_p0b2iNBavU+O8KnAraaQ@mail.gmail.com>
 <0b9361f9-5b3f-4fac-bfc8-74018779fe8c@sapo.pt>
 <CAGAA5bcPShEL1i__Nk_hCs0-9_Npgwdqyd+=VhdN1tAWQ3RHpQ@mail.gmail.com>
 <21702d19-0218-5b54-908b-b9f32c88eae1@sapo.pt>
Message-ID: <4bfd1471-af73-2830-f1f3-3f6b26e18f3c@gmail.com>

That works with my suggestion:

g <-
   ggplot() +
   theme(
      plot.background = element_rect(fill = "yellow2", colour = "yellow2"),
      panel.background = element_rect(fill = "yellow2"),
   )
g <- g + coord_fixed()
dev.new(bg = "yellow2")
g  # For a pure yellow plot window

Duncan Murdoch

On 20/12/2020 1:21 p.m., Rui Barradas wrote:
> Hello,
> 
> Is it this?
> 
> plot.background = element_rect(colour = "yellow2", fill = "yellow2")
> 
> The small white space goes away.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 17:00 de 20/12/20, Martin M?ller Skarbiniks Pedersen escreveu:
>> On Sun, 20 Dec 2020 at 17:43, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>> Thank you for trying to answer my question.
>>
>>> I am not sure I understand the problem.
>>> With coord_fixed() both axis have the same length and the plot is a
>>> square. When resizing the plot window the white areas can be on
>>> top/bottom if the window height is bigger than its width or to the
>>> left/right if it's the other way around.
>>
>> Yes.
>>
>>> Does this answer the question?
>>
>> Nope.
>> I really need the added space as the same color as the plot.background
>> (yellow2) in the example below.
>> However the code below generates a small white space. I was expected it to
>> be the
>> same as the plot.background color.
>>
>> library(ggplot2)
>> g <-
>>      ggplot() +
>>      theme(
>>         plot.background = element_rect(fill = "yellow2"),
>>         panel.background = element_rect(fill = "yellow2"),
>>      )
>> g <- g + coord_fixed()
>> g
>>
>> Regards
>> Martin
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From p@ych@o||u @end|ng |rom gm@||@com  Mon Dec 21 20:35:23 2020
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Mon, 21 Dec 2020 14:35:23 -0500
Subject: [R] Use mapply or lapply to a nested list
Message-ID: <CACCU-vPfkMW3L6C00LeQcmmRqA5orvq35o4BKLOV_D7UNJ=T2A@mail.gmail.com>

I want to apply a sample function to a nested list (I will call this list
`bb`) and I also have a list of numbers (I will call this list `k`) to be
supplied in the sample function. I would like each of the numbers in k to
iterate through all the values of each list in bb. How to do this using
`mapply` or `lapply`?

Here are the data:
k <- list(1,2,4,3) #this is the list of numbers to be supplied in the `
sample.int` function
b1 <- list(c(1,2,3),c(2,3,4),c(3,4,5),c(4,5,6)) #The first list of bb
b2 <- list(c(1,2),c(2,3),c(3,4),c(4,5), c(5,6)) #The second list of bb
bb <- list(b1,b2) #This is list bb containing b1 and b2 whose values are to
be iterated through
```
I created this `mapply` function but it didn't get the expected outcome:
mapply(function(x, y) {
   x[sample.int(y,y, replace = TRUE)]
}, bb,k, SIMPLIFY = FALSE)
This only returns 10 output values but I would like each number of k to
loop through all values of the two lists in `bb` and so there should be
10*2 outputs for the two lists in `bb`. I might be using `mapply` in the
wrong way and so I would appreciate if anyone can point me to the right
direction!

Best,
Chao

	[[alternative HTML version deleted]]


From btupper @end|ng |rom b|ge|ow@org  Tue Dec 22 00:49:38 2020
From: btupper @end|ng |rom b|ge|ow@org (Ben Tupper)
Date: Mon, 21 Dec 2020 18:49:38 -0500
Subject: [R] Use mapply or lapply to a nested list
In-Reply-To: <CACCU-vPfkMW3L6C00LeQcmmRqA5orvq35o4BKLOV_D7UNJ=T2A@mail.gmail.com>
References: <CACCU-vPfkMW3L6C00LeQcmmRqA5orvq35o4BKLOV_D7UNJ=T2A@mail.gmail.com>
Message-ID: <CALrbzg0k6qKipY4EOeaECRrq1hQ5kS0bWdoUarHo-ywGEy5_4A@mail.gmail.com>

You might be able to get mapply to work, but because your lists differ
in lengths you will get some recycling which may lead to mayhem for
you.  Below I have tried to simplify and clarify by naming the
elements of your lists, but I don't get 20 results.  I get 4 elements
(one for each k).  Each kth element has 2 elements (one for b1 and one
for b2).  And each of those varies by the size of the sample you have
requested. Does this get you closer?

k <- list(k1 = 1, k2 = 2, k3 = 4, k4 = 3)
b1 <- list(c(1,2,3),c(2,3,4),c(3,4,5),c(4,5,6))
b2 <- list(c(1,2),c(2,3),c(3,4),c(4,5), c(5,6))
bb <- list(b1  = b1, b2 = b2)

x <- sapply(k,
            function(ki, bb = NULL){
              sapply(bb,
                     function(b) {
                        lapply(b, function(x){
                           sample.int(x, size = ki, replace = TRUE)
                        })
                     }, simplify = FALSE, USE.NAMES = TRUE)
            }, bb = bb, simplify = FALSE, USE.NAMES = TRUE)

str(x)
# List of 4
#  $ k1:List of 2
#   ..$ b1:List of 4
#   .. ..$ : int 1
#   .. ..$ : int 1
#   .. ..$ : int 3
#   .. ..$ : int 4
#   ..$ b2:List of 5
#   .. ..$ : int 1
#   .. ..$ : int 1
#   .. ..$ : int 2
#   .. ..$ : int 1
#   .. ..$ : int 5
#  $ k2:List of 2
#   ..$ b1:List of 4
#   .. ..$ : int [1:2] 1 1
#   .. ..$ : int [1:2] 1 1
#   .. ..$ : int [1:2] 3 3
#   .. ..$ : int [1:2] 2 1
#   ..$ b2:List of 5
#   .. ..$ : int [1:2] 1 1
#   .. ..$ : int [1:2] 1 1
#   .. ..$ : int [1:2] 1 1
#   .. ..$ : int [1:2] 4 2
#   .. ..$ : int [1:2] 2 4
#  $ k3:List of 2
#   ..$ b1:List of 4
#   .. ..$ : int [1:4] 1 1 1 1
#   .. ..$ : int [1:4] 2 1 2 1
#   .. ..$ : int [1:4] 1 3 3 2
#   .. ..$ : int [1:4] 4 3 1 3
#   ..$ b2:List of 5
#   .. ..$ : int [1:4] 1 1 1 1
#   .. ..$ : int [1:4] 1 1 2 1
#   .. ..$ : int [1:4] 2 2 3 1
#   .. ..$ : int [1:4] 4 2 3 3
#   .. ..$ : int [1:4] 5 1 5 3
#  $ k4:List of 2
#   ..$ b1:List of 4
#   .. ..$ : int [1:3] 1 1 1
#   .. ..$ : int [1:3] 2 1 1
#   .. ..$ : int [1:3] 2 2 3
#   .. ..$ : int [1:3] 3 4 1
#   ..$ b2:List of 5
#   .. ..$ : int [1:3] 1 1 1
#   .. ..$ : int [1:3] 2 1 1
#   .. ..$ : int [1:3] 1 3 2
#   .. ..$ : int [1:3] 3 1 1
#   .. ..$ : int [1:3] 1 1 1

Cheers,
Ben

On Mon, Dec 21, 2020 at 2:35 PM Chao Liu <psychaoliu at gmail.com> wrote:
>
> I want to apply a sample function to a nested list (I will call this list
> `bb`) and I also have a list of numbers (I will call this list `k`) to be
> supplied in the sample function. I would like each of the numbers in k to
> iterate through all the values of each list in bb. How to do this using
> `mapply` or `lapply`?
>
> Here are the data:
> k <- list(1,2,4,3) #this is the list of numbers to be supplied in the `
> sample.int` function
> b1 <- list(c(1,2,3),c(2,3,4),c(3,4,5),c(4,5,6)) #The first list of bb
> b2 <- list(c(1,2),c(2,3),c(3,4),c(4,5), c(5,6)) #The second list of bb
> bb <- list(b1,b2) #This is list bb containing b1 and b2 whose values are to
> be iterated through
> ```
> I created this `mapply` function but it didn't get the expected outcome:
> mapply(function(x, y) {
>    x[sample.int(y,y, replace = TRUE)]
> }, bb,k, SIMPLIFY = FALSE)
> This only returns 10 output values but I would like each number of k to
> loop through all values of the two lists in `bb` and so there should be
> 10*2 outputs for the two lists in `bb`. I might be using `mapply` in the
> wrong way and so I would appreciate if anyone can point me to the right
> direction!
>
> Best,
> Chao
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Ben Tupper
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org


From drj|m|emon @end|ng |rom gm@||@com  Tue Dec 22 10:07:36 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 22 Dec 2020 20:07:36 +1100
Subject: [R] Use mapply or lapply to a nested list
In-Reply-To: <CACCU-vPfkMW3L6C00LeQcmmRqA5orvq35o4BKLOV_D7UNJ=T2A@mail.gmail.com>
References: <CACCU-vPfkMW3L6C00LeQcmmRqA5orvq35o4BKLOV_D7UNJ=T2A@mail.gmail.com>
Message-ID: <CA+8X3fWuvs2Ck2s+JF9ku8-Q5btj4LE6gKfY9vYfoOzuYaTYug@mail.gmail.com>

Hi Chao,
I think what you are looking for is the "rapply" function in the base
package. Not sure that it can do exactly what you request but worth a
look.

Jim

On Tue, Dec 22, 2020 at 6:36 AM Chao Liu <psychaoliu at gmail.com> wrote:
>
> I want to apply a sample function to a nested list (I will call this list
> `bb`) and I also have a list of numbers (I will call this list `k`) to be
> supplied in the sample function. I would like each of the numbers in k to
> iterate through all the values of each list in bb. How to do this using
> `mapply` or `lapply`?
>
> Here are the data:
> k <- list(1,2,4,3) #this is the list of numbers to be supplied in the `
> sample.int` function
> b1 <- list(c(1,2,3),c(2,3,4),c(3,4,5),c(4,5,6)) #The first list of bb
> b2 <- list(c(1,2),c(2,3),c(3,4),c(4,5), c(5,6)) #The second list of bb
> bb <- list(b1,b2) #This is list bb containing b1 and b2 whose values are to
> be iterated through
> ```
> I created this `mapply` function but it didn't get the expected outcome:
> mapply(function(x, y) {
>    x[sample.int(y,y, replace = TRUE)]
> }, bb,k, SIMPLIFY = FALSE)
> This only returns 10 output values but I would like each number of k to
> loop through all values of the two lists in `bb` and so there should be
> 10*2 outputs for the two lists in `bb`. I might be using `mapply` in the
> wrong way and so I would appreciate if anyone can point me to the right
> direction!
>
> Best,
> Chao
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Dec 22 18:44:45 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 22 Dec 2020 18:44:45 +0100
Subject: [R] Problem with mlr3 parameters optimization
Message-ID: <CA+nrPnscxQ4+Q4Ee3ocSTU2NpHQG0990cHf4ajRmB5kSweEAuQ@mail.gmail.com>

Hello everyone,

I performed a parameters optimization in mlr3 and then pass it to the
benchmark to compare the optimized and a baseline learner, but it give an
error message and does not recognize the optimized (i.e. at) learner.

df=readARFF("nasa93.arff")

task=TaskRegr$new("df", df, target = "act_effort")
learner= lrn("regr.rpart")

resampling = rsmp("bootstrap", repeats=100)

search_space = paradox::ParamSet$new(
  params = list(paradox::ParamDbl$new("cp", lower = 0.001, upper = 0.1)))
terminator = trm("evals", n_evals = 5)
tuner = tnr("grid_search", resolution = 10)

at = AutoTuner$new(
  learner = learner,
  resampling = resampling,
  measure = measure,
  search_space = search_space,
  terminator = terminator,
  tuner = tuner
)

grid = benchmark_grid(task = task, learner = list(lrn("at"),
lrn("regr.rpart")),resampling)

bmr = benchmark(grid)

	[[alternative HTML version deleted]]


From @yu@h|@cre@tor @end|ng |rom gm@||@com  Tue Dec 22 06:54:01 2020
From: @yu@h|@cre@tor @end|ng |rom gm@||@com (Ayushi Dwivedi)
Date: Tue, 22 Dec 2020 11:24:01 +0530
Subject: [R] error in installing limma
Message-ID: <CAFJvYSMdEhC8nfQTMa1iYKVULX0DPRttBkZEX-sVcaa6J6Q1RQ@mail.gmail.com>

Good afternoon Sir,
 With due respect I want to convey that while installing limma package in
R, I am getting the error message, not just limma If I am installing any
package in R like biomaRt the same error message is coming it is
terminating with "installation of package ?limma? had non-zero exit status".
Hereby, I am attaching the screenshot of the error. Kindly, go through it.
I shall be highly obliged.







*Ayushi Dwivedi*
*Ph.D. Scholar*
*Dept. of Biotechnology & Bioinformatics,*
School of Life Sciences, University of Hyderabad,
Hyderabad - 500046 ( India ).
Phone No. :- +91 - 8858037252
Email Id :- ayushi.creator at gmail.com* <swapnilkr.bi at gmail.com>**
<swapnil.kr at yahoo.com>*

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot from 2020-12-15 12-48-16.png
Type: image/png
Size: 266924 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20201222/58c0332b/attachment.png>

From k|gundukenneth @end|ng |rom gm@||@com  Tue Dec 22 16:10:11 2020
From: k|gundukenneth @end|ng |rom gm@||@com (KENNETH KIGUNDU)
Date: Tue, 22 Dec 2020 18:10:11 +0300
Subject: [R] plm
Message-ID: <CAHa4nkYCjk+=7Sz4s8vVAKt+oVAwh9PfMgWnKvRGRukt2xuJNw@mail.gmail.com>

Dear all

I am working on a paper where I am analysing energy-non energy substitution
possibilities in a manufacturing sector. In this case, I am estimating a
translog cost function jointly with factor share equations under SUR
modeling.

The estimation requires me to impose linear homogeneity restrictions, where
coefficients of price variables are required to sum to one as other
coefficients sum to zero. Below are my R commands for this estimation:

D<-c("q1_lnPk + q1_lnPl + q1_lnPe =1",  "q1_lnq + q1_lnPklnPk + q1_lnPllnPl
+ q1_lnPelnPe + q1_lnqlnq + q1_lnPklnPl + q1_lnPklnPe + q1_lnPllnPe +
q1_lnPklnq + q1_lnPllnq + q1_lnPelnq=0")

z<-plm(list(q1=lnTC ~ lnPk + lnPl + lnPe + lnq + lnPklnPk + lnPllnPl +
lnPelnPe + lnqlnq + lnPklnPl + lnPklnPe + lnPllnPe + lnPklnq + lnPllnq +
lnPelnq,
            q2= Sl ~ slnpl +slnpe +lnq,
            q3= Se ~ slnpl+ slnpe+ lnq), Surpanel, effect = "twoways",
restrict.matrix = D, model="pooling" )

summary(z)

The first line of the commands indicates the matrix of restrictions, the
second line indicates the formula and the third line indicates the summary
of findings.

However, after running the commands, I am getting the following error:
*Error in rep(0, nrow(restrict.matrix)) : invalid 'times' argument*

Please help me in getting a solution to this error.

Regards,
Kigundu Ken

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Tue Dec 22 19:51:41 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Tue, 22 Dec 2020 18:51:41 +0000
Subject: [R] error in installing limma
In-Reply-To: <CAFJvYSMdEhC8nfQTMa1iYKVULX0DPRttBkZEX-sVcaa6J6Q1RQ@mail.gmail.com>
References: <CAFJvYSMdEhC8nfQTMa1iYKVULX0DPRttBkZEX-sVcaa6J6Q1RQ@mail.gmail.com>
Message-ID: <BL0PR04MB6609D64CF714E67850CC7223F9DF0@BL0PR04MB6609.namprd04.prod.outlook.com>

limma is a Bioconductor package so you should use https://support.bioconductor.org

I'd guess that you've trimmed your screen shot just after the informative information. Just copy and paste as plain text the entire output of your installation attempt. Presumably you are using standard practices documented on, e.g., https://bioconductor.org/packages/limma to install packages


  BiocManager::install("limma")

Martin Morgan

?On 12/22/20, 1:11 PM, "R-help on behalf of Ayushi Dwivedi" <r-help-bounces at r-project.org on behalf of ayushi.creator at gmail.com> wrote:

    Good afternoon Sir,
     With due respect I want to convey that while installing limma package in
    R, I am getting the error message, not just limma If I am installing any
    package in R like biomaRt the same error message is coming it is
    terminating with "installation of package ?limma? had non-zero exit status".
    Hereby, I am attaching the screenshot of the error. Kindly, go through it.
    I shall be highly obliged.







    *Ayushi Dwivedi*
    *Ph.D. Scholar*
    *Dept. of Biotechnology & Bioinformatics,*
    School of Life Sciences, University of Hyderabad,
    Hyderabad - 500046 ( India ).
    Phone No. :- +91 - 8858037252
    Email Id :- ayushi.creator at gmail.com* <swapnilkr.bi at gmail.com>**
    <swapnil.kr at yahoo.com>*

From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec 22 21:20:17 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 22 Dec 2020 12:20:17 -0800
Subject: [R] plm
In-Reply-To: <CAHa4nkYCjk+=7Sz4s8vVAKt+oVAwh9PfMgWnKvRGRukt2xuJNw@mail.gmail.com>
References: <CAHa4nkYCjk+=7Sz4s8vVAKt+oVAwh9PfMgWnKvRGRukt2xuJNw@mail.gmail.com>
Message-ID: <CAGxFJbSh38QS29nGhg9-BW-v6g8kQ8kaxLwCoFvUYwdR8f2FbA@mail.gmail.com>

Well, you may get lucky and get a reply here, but per the posting guide
linked below, which you are **supposed to** read and follow **before**
posting:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R
<http://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R>), ask
questions on R-help.
If the question relates to a *contributed package* , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. *Only* send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

So did you first attempt to contact said maintainer? If so, please tell us
with what results. You also probably should tell us what package plm comes
from (several contain this function) -- though I suspect only congniscenti
who use the package could help you anyway,  and they would know this
already.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Dec 22, 2020 at 10:30 AM KENNETH KIGUNDU <kigundukenneth at gmail.com>
wrote:

> Dear all
>
> I am working on a paper where I am analysing energy-non energy substitution
> possibilities in a manufacturing sector. In this case, I am estimating a
> translog cost function jointly with factor share equations under SUR
> modeling.
>
> The estimation requires me to impose linear homogeneity restrictions, where
> coefficients of price variables are required to sum to one as other
> coefficients sum to zero. Below are my R commands for this estimation:
>
> D<-c("q1_lnPk + q1_lnPl + q1_lnPe =1",  "q1_lnq + q1_lnPklnPk + q1_lnPllnPl
> + q1_lnPelnPe + q1_lnqlnq + q1_lnPklnPl + q1_lnPklnPe + q1_lnPllnPe +
> q1_lnPklnq + q1_lnPllnq + q1_lnPelnq=0")
>
> z<-plm(list(q1=lnTC ~ lnPk + lnPl + lnPe + lnq + lnPklnPk + lnPllnPl +
> lnPelnPe + lnqlnq + lnPklnPl + lnPklnPe + lnPllnPe + lnPklnq + lnPllnq +
> lnPelnq,
>             q2= Sl ~ slnpl +slnpe +lnq,
>             q3= Se ~ slnpl+ slnpe+ lnq), Surpanel, effect = "twoways",
> restrict.matrix = D, model="pooling" )
>
> summary(z)
>
> The first line of the commands indicates the matrix of restrictions, the
> second line indicates the formula and the third line indicates the summary
> of findings.
>
> However, after running the commands, I am getting the following error:
> *Error in rep(0, nrow(restrict.matrix)) : invalid 'times' argument*
>
> Please help me in getting a solution to this error.
>
> Regards,
> Kigundu Ken
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@ych@o||u @end|ng |rom gm@||@com  Wed Dec 23 04:00:29 2020
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Tue, 22 Dec 2020 22:00:29 -0500
Subject: [R] Use mapply or lapply to a nested list
In-Reply-To: <CA+8X3fWuvs2Ck2s+JF9ku8-Q5btj4LE6gKfY9vYfoOzuYaTYug@mail.gmail.com>
References: <CACCU-vPfkMW3L6C00LeQcmmRqA5orvq35o4BKLOV_D7UNJ=T2A@mail.gmail.com>
 <CA+8X3fWuvs2Ck2s+JF9ku8-Q5btj4LE6gKfY9vYfoOzuYaTYug@mail.gmail.com>
Message-ID: <CACCU-vPcj+myVCmq1z3-3TyDz5XcWzjjQjSaXbCrDdcP4Ddgpg@mail.gmail.com>

Jim and Ben,

Thank you for your help. I will play around the commands and function you
suggested.

Best,

Chao

On Tue, Dec 22, 2020 at 4:07 AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Chao,
> I think what you are looking for is the "rapply" function in the base
> package. Not sure that it can do exactly what you request but worth a
> look.
>
> Jim
>
> On Tue, Dec 22, 2020 at 6:36 AM Chao Liu <psychaoliu at gmail.com> wrote:
> >
> > I want to apply a sample function to a nested list (I will call this list
> > `bb`) and I also have a list of numbers (I will call this list `k`) to be
> > supplied in the sample function. I would like each of the numbers in k to
> > iterate through all the values of each list in bb. How to do this using
> > `mapply` or `lapply`?
> >
> > Here are the data:
> > k <- list(1,2,4,3) #this is the list of numbers to be supplied in the `
> > sample.int` function
> > b1 <- list(c(1,2,3),c(2,3,4),c(3,4,5),c(4,5,6)) #The first list of bb
> > b2 <- list(c(1,2),c(2,3),c(3,4),c(4,5), c(5,6)) #The second list of bb
> > bb <- list(b1,b2) #This is list bb containing b1 and b2 whose values are
> to
> > be iterated through
> > ```
> > I created this `mapply` function but it didn't get the expected outcome:
> > mapply(function(x, y) {
> >    x[sample.int(y,y, replace = TRUE)]
> > }, bb,k, SIMPLIFY = FALSE)
> > This only returns 10 output values but I would like each number of k to
> > loop through all values of the two lists in `bb` and so there should be
> > 10*2 outputs for the two lists in `bb`. I might be using `mapply` in the
> > wrong way and so I would appreciate if anyone can point me to the right
> > direction!
> >
> > Best,
> > Chao
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Dec 23 11:55:20 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 23 Dec 2020 10:55:20 +0000
Subject: [R] error in installing limma
In-Reply-To: <CAFJvYSMMnV8Covi17jUopCqGmoQ8NMLQT+aiqPC-TryTKOmMVg@mail.gmail.com>
References: <CAFJvYSMdEhC8nfQTMa1iYKVULX0DPRttBkZEX-sVcaa6J6Q1RQ@mail.gmail.com>
 <BL0PR04MB6609D64CF714E67850CC7223F9DF0@BL0PR04MB6609.namprd04.prod.outlook.com>
 <CAFJvYSMMnV8Covi17jUopCqGmoQ8NMLQT+aiqPC-TryTKOmMVg@mail.gmail.com>
Message-ID: <BL0PR04MB6609E123F418167AC05E97D2F9DE0@BL0PR04MB6609.namprd04.prod.outlook.com>

Show the entire command and output. I have

> BiocManager::install("limma")
Bioconductor version 3.12 (BiocManager 1.30.10), R 4.0.3 (2020-10-10)
Installing package(s) 'limma'
trying URL 'https://bioconductor.org/packages/3.12/bioc/src/contrib/limma_3.46.0.tar.gz'
Content type 'application/x-gzip' length 1527170 bytes (1.5 MB)
==================================================
downloaded 1.5 MB

* installing *source* package ?limma? ...
** using staged installation
** libs
gcc -I"/usr/local/lib/R/include" -DNDEBUG   -I/usr/local/include   -fpic  -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c init.c -o init.o
gcc -I"/usr/local/lib/R/include" -DNDEBUG   -I/usr/local/include   -fpic  -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c normexp.c -o normexp.o
gcc -I"/usr/local/lib/R/include" -DNDEBUG   -I/usr/local/include   -fpic  -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c weighted_lowess.c -o weighted_lowess.o
gcc -shared -L/usr/local/lib/R/lib -L/usr/local/lib -o limma.so init.o normexp.o weighted_lowess.o -L/usr/local/lib/R/lib -lR
installing to /usr/local/lib/R/site-library/00LOCK-limma/00new/limma/libs
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** checking absolute paths in shared objects and dynamic libraries
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (limma)


From: Ayushi Dwivedi <ayushi.creator at gmail.com>
Date: Wednesday, December 23, 2020 at 12:52 AM
To: Martin Morgan <mtmorgan.bioc at gmail.com>
Cc: "r-help at r-project.org" <r-help at r-project.org>, "r-help-request at r-project.org" <r-help-request at r-project.org>
Subject: Re: [R] error in installing limma


hey.. I used this command to install limma but after running sometime it terminated with error "installation of package ?limma? had non-zero exit status".

if (!requireNamespace("BiocManager", quietly = TRUE))
+ install.packages("BiocManager")
> BiocManager::install("limma")


Ayushi Dwivedi
Ph.D. Scholar
Dept. of Biotechnology & Bioinformatics,
School of Life Sciences, University of Hyderabad,
Hyderabad - 500046 ( India ).
Phone No. :- +91 - 8858037252
Email Id :- mailto:ayushi.creator at gmail.com


On Wed, Dec 23, 2020 at 12:21 AM Martin Morgan <mailto:mtmorgan.bioc at gmail.com> wrote:
limma is a Bioconductor package so you should use https://support.bioconductor.org

I'd guess that you've trimmed your screen shot just after the informative information. Just copy and paste as plain text the entire output of your installation attempt. Presumably you are using standard practices documented on, e.g., https://bioconductor.org/packages/limma to install packages


? BiocManager::install("limma")

Martin Morgan

?On 12/22/20, 1:11 PM, "R-help on behalf of Ayushi Dwivedi" <mailto:r-help-bounces at r-project.org on behalf of mailto:ayushi.creator at gmail.com> wrote:

? ? Good afternoon Sir,
? ? ?With due respect I want to convey that while installing limma package in
? ? R, I am getting the error message, not just limma If I am installing any
? ? package in R like biomaRt the same error message is coming it is
? ? terminating with "installation of package ?limma? had non-zero exit status".
? ? Hereby, I am attaching the screenshot of the error. Kindly, go through it.
? ? I shall be highly obliged.







? ? *Ayushi Dwivedi*
? ? *Ph.D. Scholar*
? ? *Dept. of Biotechnology & Bioinformatics,*
? ? School of Life Sciences, University of Hyderabad,
? ? Hyderabad - 500046 ( India ).
? ? Phone No. :- +91 - 8858037252
? ? Email Id :- mailto:ayushi.creator at gmail.com* <mailto:swapnilkr.bi at gmail.com>**
? ? <mailto:swapnil.kr at yahoo.com>*

From e| @end|ng |rom ||@@e@NA  Wed Dec 23 15:38:41 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Wed, 23 Dec 2020 16:38:41 +0200
Subject: [R] FInd packages in need of Update (like RStudio)
In-Reply-To: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
References: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
Message-ID: <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>

Hi,

does anyone know how one would look which packages require an update
(like the Tools -> Update Packages) but can do it from R (ie Rscript) or
any other way from the command line (on the MAc)

I would like to build this into my update script which currently does
brew, cpan and pip3 :-)-O

greetings, el
-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From @@r@h@go@|ee @end|ng |rom gm@||@com  Wed Dec 23 16:06:06 2020
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Wed, 23 Dec 2020 10:06:06 -0500
Subject: [R] FInd packages in need of Update (like RStudio)
In-Reply-To: <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
References: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
 <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
Message-ID: <CAM_vjunCQgYfk6omo5UoFoCthFHLPvhDGSXPUAWbKzBHprYh6A@mail.gmail.com>

Does update.packages() meet your needs?


Sarah

On Wed, Dec 23, 2020 at 9:39 AM Dr Eberhard W Lisse <el at lisse.na> wrote:
>
> Hi,
>
> does anyone know how one would look which packages require an update
> (like the Tools -> Update Packages) but can do it from R (ie Rscript) or
> any other way from the command line (on the MAc)
>
> I would like to build this into my update script which currently does
> brew, cpan and pip3 :-)-O
>
> greetings, el
> --
> Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
> el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
> PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
> 10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec 23 16:08:23 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 23 Dec 2020 07:08:23 -0800
Subject: [R] FInd packages in need of Update (like RStudio)
In-Reply-To: <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
References: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
 <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
Message-ID: <6BA545F2-B1A4-4666-A902-0441D127E271@dcn.davis.ca.us>

This is not normally something one would apply automatically, as it can break existing code. But wouldn't?update.packages be the obvious choice interactively?

On December 23, 2020 6:38:41 AM PST, Dr Eberhard W Lisse <el at lisse.NA> wrote:
>Hi,
>
>does anyone know how one would look which packages require an update
>(like the Tools -> Update Packages) but can do it from R (ie Rscript)
>or
>any other way from the command line (on the MAc)
>
>I would like to build this into my update script which currently does
>brew, cpan and pip3 :-)-O
>
>greetings, el

-- 
Sent from my phone. Please excuse my brevity.


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Wed Dec 23 16:30:16 2020
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Wed, 23 Dec 2020 21:00:16 +0530
Subject: [R] FInd packages in need of Update (like RStudio)
In-Reply-To: <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
References: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
 <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
Message-ID: <CADfFDC70zxzeJY7WpBkrA0T6fmyKe48vJsnSbhykcEdfrhUk-Q@mail.gmail.com>

On Wed, Dec 23, 2020 at 8:09 PM Dr Eberhard W Lisse <el at lisse.na> wrote:
>
> Hi,
>
> does anyone know how one would look which packages require an update
> (like the Tools -> Update Packages) but can do it from R (ie Rscript) or
> any other way from the command line (on the MAc)

? old.packages

Best,
-Deepayan

> I would like to build this into my update script which currently does
> brew, cpan and pip3 :-)-O
>
> greetings, el
> --
> Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
> el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
> PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
> 10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From e| @end|ng |rom ||@@e@NA  Wed Dec 23 16:59:44 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Wed, 23 Dec 2020 17:59:44 +0200
Subject: [R] FInd packages in need of Update (like RStudio)
In-Reply-To: <CADfFDC70zxzeJY7WpBkrA0T6fmyKe48vJsnSbhykcEdfrhUk-Q@mail.gmail.com>
References: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
 <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
 <CADfFDC70zxzeJY7WpBkrA0T6fmyKe48vJsnSbhykcEdfrhUk-Q@mail.gmail.com>
Message-ID: <8fa7c2c4-2702-a39d-2418-73b2849ac028@lisse.NA>

Thanks,

	update.packages(dependencies = TRUE, ask=FALSE)

does what I want.

greetings, el

On 2020-12-23 17:30 , Deepayan Sarkar wrote:
> On Wed, Dec 23, 2020 at 8:09 PM Dr Eberhard W Lisse <el at lisse.na> wrote:
>>
>> Hi,
>>
>> does anyone know how one would look which packages require an update
>> (like the Tools -> Update Packages) but can do it from R (ie Rscript) or
>> any other way from the command line (on the MAc)
> 
> ? old.packages
> 
> Best,
> -Deepayan
> 
>> I would like to build this into my update script which currently does
>> brew, cpan and pip3 :-)-O
>>
>> greetings, el
>> --
>> Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
>> el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
>> PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
>> 10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From e| @end|ng |rom ||@@e@NA  Wed Dec 23 17:09:29 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Wed, 23 Dec 2020 18:09:29 +0200
Subject: [R] FInd packages in need of Update (like RStudio)
In-Reply-To: <CAM_vjunCQgYfk6omo5UoFoCthFHLPvhDGSXPUAWbKzBHprYh6A@mail.gmail.com>
References: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
 <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
 <CAM_vjunCQgYfk6omo5UoFoCthFHLPvhDGSXPUAWbKzBHprYh6A@mail.gmail.com>
Message-ID: <57067a6f-d7b7-c2f3-4cfe-178e1a21730c@lisse.NA>

Thank you,

but the RFTM suggestion helped me even more :-)-O

greetings, el

On 2020-12-23 17:06 , Sarah Goslee wrote:
> Does update.packages() meet your needs?
> 
> 
> Sarah
> 
> On Wed, Dec 23, 2020 at 9:39 AM Dr Eberhard W Lisse <el at lisse.na> wrote:
>>
>> Hi,
>>
>> does anyone know how one would look which packages require an update
>> (like the Tools -> Update Packages) but can do it from R (ie Rscript) or
>> any other way from the command line (on the MAc)
>>
>> I would like to build this into my update script which currently does
>> brew, cpan and pip3 :-)-O
>>
>> greetings, el
>> --
>> Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
>> el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
>> PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
>> 10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From w@p @end|ng |rom uwm@edu  Wed Dec 23 17:05:04 2020
From: w@p @end|ng |rom uwm@edu (Walker Scott Pedersen)
Date: Wed, 23 Dec 2020 16:05:04 +0000
Subject: [R] cooks distance for repeated measures anova
Message-ID: <MW3PR16MB39467C3832F944C7B9DEA1CABBDE0@MW3PR16MB3946.namprd16.prod.outlook.com>

Hi all,

Is there a way to get cook's distance for a repeated measures anova? Neither cooks.distance or CookD from the predictmeans package seem to allow for this.  For example, if I have the model

data(iris)

mod<-aov(Sepal.Length  ~ Petal.Length + Petal.Width + Error(Species), data=iris)

both

cooks.distance(mod)

and

library(predictmeans)
CookD(mod, group=Species)

give an error saying they don't support an aovlist object.

I would prefer a method to get a cook's distance for each category in my repeated factor (i.e. Species), rather than each observation.

Thanks!


--
Walker Pedersen, Ph.D.
Center for Healthy Minds
University of Wisconsin -- Madison


	[[alternative HTML version deleted]]


From e| @end|ng |rom ||@@e@NA  Wed Dec 23 17:08:09 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Wed, 23 Dec 2020 18:08:09 +0200
Subject: [R] FInd packages in need of Update (like RStudio)
In-Reply-To: <8fa7c2c4-2702-a39d-2418-73b2849ac028@lisse.NA>
References: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
 <b6889718-2d05-f6cc-b33c-bc9c4c584a2f@lisse.NA>
 <CADfFDC70zxzeJY7WpBkrA0T6fmyKe48vJsnSbhykcEdfrhUk-Q@mail.gmail.com>
 <8fa7c2c4-2702-a39d-2418-73b2849ac028@lisse.NA>
Message-ID: <bca1efc9-640f-7a27-3964-e78d684f1745@lisse.NA>

Or rather

	Rscript -e 'local({r <- getOption("repos");r["CRAN"] <-
"https://cloud.r-project.org/";options(repos =
r)});update.packages(dependencies = TRUE, ask=FALSE)'

as a one liner :-)-O

el

On 2020-12-23 17:59 , Dr Eberhard W Lisse wrote:
> Thanks,
> 
> 	update.packages(dependencies = TRUE, ask=FALSE)
> 
> does what I want.
> 
> greetings, el[...]

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From twoo|m@n @end|ng |rom ont@rgettek@com  Wed Dec 23 17:29:17 2020
From: twoo|m@n @end|ng |rom ont@rgettek@com (Tom Woolman)
Date: Wed, 23 Dec 2020 11:29:17 -0500
Subject: [R] cooks distance for repeated measures anova
In-Reply-To: <MW3PR16MB39467C3832F944C7B9DEA1CABBDE0@MW3PR16MB3946.namprd16.prod.outlook.com>
Message-ID: <20201223112917.Horde.xif-JiiJoGVYcDXdDn403H5@www.ontargettek.com>

Hi Dr. Pedersen.

I haven't used cook's on an aov object but I do it all the time from  
an lm (general linear model) object, ie.:

mod <- lm(data=dataframe)
cooksdistance <- cooks.distance(mod)



I *think* you might be able to simulate an aov using the lm functon by  
selecting the parameter in lm to calculate the type 1 sum of squares  
error that would be provided by the aov function.


FYI I'm using Cook's in my case as part of an anomaly detection engine  
based on a linear model interaction.




Quoting Walker Scott Pedersen <wsp at uwm.edu>:

> Hi all,
>
> Is there a way to get cook's distance for a repeated measures anova?  
> Neither cooks.distance or CookD from the predictmeans package seem  
> to allow for this.  For example, if I have the model
>
> data(iris)
>
> mod<-aov(Sepal.Length  ~ Petal.Length + Petal.Width +  
> Error(Species), data=iris)
>
> both
>
> cooks.distance(mod)
>
> and
>
> library(predictmeans)
> CookD(mod, group=Species)
>
> give an error saying they don't support an aovlist object.
>
> I would prefer a method to get a cook's distance for each category  
> in my repeated factor (i.e. Species), rather than each observation.
>
> Thanks!
>
>
> --
> Walker Pedersen, Ph.D.
> Center for Healthy Minds
> University of Wisconsin -- Madison
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @yu@h|@cre@tor @end|ng |rom gm@||@com  Wed Dec 23 07:10:27 2020
From: @yu@h|@cre@tor @end|ng |rom gm@||@com (Ayushi Dwivedi)
Date: Wed, 23 Dec 2020 11:40:27 +0530
Subject: [R] error in installing limma
In-Reply-To: <BL0PR04MB6609D64CF714E67850CC7223F9DF0@BL0PR04MB6609.namprd04.prod.outlook.com>
References: <CAFJvYSMdEhC8nfQTMa1iYKVULX0DPRttBkZEX-sVcaa6J6Q1RQ@mail.gmail.com>
 <BL0PR04MB6609D64CF714E67850CC7223F9DF0@BL0PR04MB6609.namprd04.prod.outlook.com>
Message-ID: <CAFJvYSMMnV8Covi17jUopCqGmoQ8NMLQT+aiqPC-TryTKOmMVg@mail.gmail.com>

hey.. I used this command to install limma but after running sometime it
terminated with error "installation of package ?limma? had non-zero exit
status".

if (!requireNamespace("BiocManager", quietly = TRUE))
+ install.packages("BiocManager")
> BiocManager::install("limma")



*Ayushi Dwivedi*
*Ph.D. Scholar*
*Dept. of Biotechnology & Bioinformatics,*
School of Life Sciences, University of Hyderabad,
Hyderabad - 500046 ( India ).
Phone No. :- +91 - 8858037252
Email Id :- ayushi.creator at gmail.com* <swapnilkr.bi at gmail.com>**
<swapnil.kr at yahoo.com>*


On Wed, Dec 23, 2020 at 12:21 AM Martin Morgan <mtmorgan.bioc at gmail.com>
wrote:

> limma is a Bioconductor package so you should use
> https://support.bioconductor.org
>
> I'd guess that you've trimmed your screen shot just after the informative
> information. Just copy and paste as plain text the entire output of your
> installation attempt. Presumably you are using standard practices
> documented on, e.g., https://bioconductor.org/packages/limma to install
> packages
>
>
>   BiocManager::install("limma")
>
> Martin Morgan
>
> ?On 12/22/20, 1:11 PM, "R-help on behalf of Ayushi Dwivedi" <
> r-help-bounces at r-project.org on behalf of ayushi.creator at gmail.com> wrote:
>
>     Good afternoon Sir,
>      With due respect I want to convey that while installing limma package
> in
>     R, I am getting the error message, not just limma If I am installing
> any
>     package in R like biomaRt the same error message is coming it is
>     terminating with "installation of package ?limma? had non-zero exit
> status".
>     Hereby, I am attaching the screenshot of the error. Kindly, go through
> it.
>     I shall be highly obliged.
>
>
>
>
>
>
>
>     *Ayushi Dwivedi*
>     *Ph.D. Scholar*
>     *Dept. of Biotechnology & Bioinformatics,*
>     School of Life Sciences, University of Hyderabad,
>     Hyderabad - 500046 ( India ).
>     Phone No. :- +91 - 8858037252
>     Email Id :- ayushi.creator at gmail.com* <swapnilkr.bi at gmail.com>**
>     <swapnil.kr at yahoo.com>*
>

	[[alternative HTML version deleted]]


From @yu@h|@cre@tor @end|ng |rom gm@||@com  Wed Dec 23 13:01:42 2020
From: @yu@h|@cre@tor @end|ng |rom gm@||@com (Ayushi Dwivedi)
Date: Wed, 23 Dec 2020 17:31:42 +0530
Subject: [R] error in installing limma
In-Reply-To: <BL0PR04MB6609E123F418167AC05E97D2F9DE0@BL0PR04MB6609.namprd04.prod.outlook.com>
References: <CAFJvYSMdEhC8nfQTMa1iYKVULX0DPRttBkZEX-sVcaa6J6Q1RQ@mail.gmail.com>
 <BL0PR04MB6609D64CF714E67850CC7223F9DF0@BL0PR04MB6609.namprd04.prod.outlook.com>
 <CAFJvYSMMnV8Covi17jUopCqGmoQ8NMLQT+aiqPC-TryTKOmMVg@mail.gmail.com>
 <BL0PR04MB6609E123F418167AC05E97D2F9DE0@BL0PR04MB6609.namprd04.prod.outlook.com>
Message-ID: <CAFJvYSM+yjjwO5Qw+nMqmXrPmtBP+P5NF1QCHgAEd8Jgw7zW=A@mail.gmail.com>

please find the attached doc which contains error while installing limma..



*Ayushi Dwivedi*
*Ph.D. Scholar*
*Dept. of Biotechnology & Bioinformatics,*
School of Life Sciences, University of Hyderabad,
Hyderabad - 500046 ( India ).
Phone No. :- +91 - 8858037252
Email Id :- ayushi.creator at gmail.com* <swapnilkr.bi at gmail.com>**
<swapnil.kr at yahoo.com>*


On Wed, Dec 23, 2020 at 4:25 PM Martin Morgan <mtmorgan.bioc at gmail.com>
wrote:

> Show the entire command and output. I have
>
> > BiocManager::install("limma")
> Bioconductor version 3.12 (BiocManager 1.30.10), R 4.0.3 (2020-10-10)
> Installing package(s) 'limma'
> trying URL '
> https://bioconductor.org/packages/3.12/bioc/src/contrib/limma_3.46.0.tar.gz
> '
> Content type 'application/x-gzip' length 1527170 bytes (1.5 MB)
> ==================================================
> downloaded 1.5 MB
>
> * installing *source* package ?limma? ...
> ** using staged installation
> ** libs
> gcc -I"/usr/local/lib/R/include" -DNDEBUG   -I/usr/local/include   -fpic
> -g -O2 -fstack-protector-strong -Wformat -Werror=format-security
> -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c init.c -o init.o
> gcc -I"/usr/local/lib/R/include" -DNDEBUG   -I/usr/local/include   -fpic
> -g -O2 -fstack-protector-strong -Wformat -Werror=format-security
> -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c normexp.c -o normexp.o
> gcc -I"/usr/local/lib/R/include" -DNDEBUG   -I/usr/local/include   -fpic
> -g -O2 -fstack-protector-strong -Wformat -Werror=format-security
> -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c weighted_lowess.c -o
> weighted_lowess.o
> gcc -shared -L/usr/local/lib/R/lib -L/usr/local/lib -o limma.so init.o
> normexp.o weighted_lowess.o -L/usr/local/lib/R/lib -lR
> installing to /usr/local/lib/R/site-library/00LOCK-limma/00new/limma/libs
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> ** checking absolute paths in shared objects and dynamic libraries
> ** testing if installed package can be loaded from final location
> ** testing if installed package keeps a record of temporary installation
> path
> * DONE (limma)
>
>
> From: Ayushi Dwivedi <ayushi.creator at gmail.com>
> Date: Wednesday, December 23, 2020 at 12:52 AM
> To: Martin Morgan <mtmorgan.bioc at gmail.com>
> Cc: "r-help at r-project.org" <r-help at r-project.org>, "
> r-help-request at r-project.org" <r-help-request at r-project.org>
> Subject: Re: [R] error in installing limma
>
>
> hey.. I used this command to install limma but after running sometime it
> terminated with error "installation of package ?limma? had non-zero exit
> status".
>
> if (!requireNamespace("BiocManager", quietly = TRUE))
> + install.packages("BiocManager")
> > BiocManager::install("limma")
>
>
> Ayushi Dwivedi
> Ph.D. Scholar
> Dept. of Biotechnology & Bioinformatics,
> School of Life Sciences, University of Hyderabad,
> Hyderabad - 500046 ( India ).
> Phone No. :- +91 - 8858037252
> Email Id :- mailto:ayushi.creator at gmail.com
>
>
> On Wed, Dec 23, 2020 at 12:21 AM Martin Morgan <mailto:
> mtmorgan.bioc at gmail.com> wrote:
> limma is a Bioconductor package so you should use
> https://support.bioconductor.org
>
> I'd guess that you've trimmed your screen shot just after the informative
> information. Just copy and paste as plain text the entire output of your
> installation attempt. Presumably you are using standard practices
> documented on, e.g., https://bioconductor.org/packages/limma to install
> packages
>
>
>   BiocManager::install("limma")
>
> Martin Morgan
>
> ?On 12/22/20, 1:11 PM, "R-help on behalf of Ayushi Dwivedi" <mailto:
> r-help-bounces at r-project.org on behalf of mailto:ayushi.creator at gmail.com>
> wrote:
>
>     Good afternoon Sir,
>      With due respect I want to convey that while installing limma package
> in
>     R, I am getting the error message, not just limma If I am installing
> any
>     package in R like biomaRt the same error message is coming it is
>     terminating with "installation of package ?limma? had non-zero exit
> status".
>     Hereby, I am attaching the screenshot of the error. Kindly, go through
> it.
>     I shall be highly obliged.
>
>
>
>
>
>
>
>     *Ayushi Dwivedi*
>     *Ph.D. Scholar*
>     *Dept. of Biotechnology & Bioinformatics,*
>     School of Life Sciences, University of Hyderabad,
>     Hyderabad - 500046 ( India ).
>     Phone No. :- +91 - 8858037252
>     Email Id :- mailto:ayushi.creator at gmail.com* <mailto:
> swapnilkr.bi at gmail.com>**
>     <mailto:swapnil.kr at yahoo.com>*
>

From v@nden@nker @end|ng |rom y@hoo@com  Wed Dec 23 12:55:03 2020
From: v@nden@nker @end|ng |rom y@hoo@com (Ben van den Anker)
Date: Wed, 23 Dec 2020 11:55:03 +0000 (UTC)
Subject: [R] Finance & R
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
Message-ID: <943522944.3789737.1608724503655@mail.yahoo.com>



Hello everyone,?
Could anyonre recommend some good resources for finance applications in R? I find the packages quantmod, TTR and PerformanceAnalytics a bit outdated. There must be something more recent on the market. Any suggestions will be much appreciated!?
Cheers,?
Ben van den Anker






	[[alternative HTML version deleted]]


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Wed Dec 23 19:06:12 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Wed, 23 Dec 2020 12:06:12 -0600
Subject: [R] Finance & R
In-Reply-To: <943522944.3789737.1608724503655@mail.yahoo.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
Message-ID: <CAPPM_gRzk=meha-kqPC0Frv-=2Xa9n=vtfY=2uyukcgb4U9U6Q@mail.gmail.com>

Hi Ben,

It's not very polite to call people's work "outdated", especially when
given to you for free.  Those packages have been around and stable for
the better part of a decade, will remain stable, are actively
maintained, and all work well together to form a comprehensive suite
of tools for financial analysis.

Best,
Josh

On Wed, Dec 23, 2020 at 11:58 AM Ben van den Anker via R-help
<r-help at r-project.org> wrote:
>
>
>
> Hello everyone,
> Could anyonre recommend some good resources for finance applications in R? I find the packages quantmod, TTR and PerformanceAnalytics a bit outdated. There must be something more recent on the market. Any suggestions will be much appreciated!
> Cheers,
> Ben van den Anker
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From @@r@h@go@|ee @end|ng |rom gm@||@com  Wed Dec 23 19:27:31 2020
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Wed, 23 Dec 2020 13:27:31 -0500
Subject: [R] Finance & R
In-Reply-To: <943522944.3789737.1608724503655@mail.yahoo.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
Message-ID: <CAM_vjumbiz6P5-M7omOdeZwy30oeiPGg-hgt9gBjZLAvGXWnxA@mail.gmail.com>

CRAN Task Views, available thru your favorite mirror, are very useful
for this sort of question. There's a Finance task view, and others of
possible interest.

R being Open Source, you can also implement the LatestGreatest
yourself, or hire a programmer, if the available tools aren't to your
taste.

Sarah

On Wed, Dec 23, 2020 at 12:58 PM Ben van den Anker via R-help
<r-help at r-project.org> wrote:
>
>
>
> Hello everyone,
> Could anyonre recommend some good resources for finance applications in R? I find the packages quantmod, TTR and PerformanceAnalytics a bit outdated. There must be something more recent on the market. Any suggestions will be much appreciated!
> Cheers,
> Ben van den Anker
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From e| @end|ng |rom ||@@e@NA  Wed Dec 23 19:52:37 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Wed, 23 Dec 2020 20:52:37 +0200
Subject: [R] Finance & R
In-Reply-To: <CAPPM_gRzk=meha-kqPC0Frv-=2Xa9n=vtfY=2uyukcgb4U9U6Q@mail.gmail.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
 <CAPPM_gRzk=meha-kqPC0Frv-=2Xa9n=vtfY=2uyukcgb4U9U6Q@mail.gmail.com>
Message-ID: <a4a55499-aed1-f329-22dc-3f6472df6158@lisse.NA>

Joshua,

there may be some cultural differences in play, some people are direct,
some don't like the American passive aggressiveness, and then English
may not be the first language of a poster.

A package may be a bit outdated, or not. If so, it in itself means
nothing other than that it is a bit outdated. Even if it is free of
bugs, and do what it is supposed to do, fast.

I think it is legitimate to ask here for alternatives.

el

On 2020-12-23 20:06 , Joshua Ulrich wrote:
> Hi Ben,
>
> It's not very polite to call people's work "outdated", especially when
> given to you for free.  Those packages have been around and stable
> for the better part of a decade, will remain stable, are actively
> maintained, and all work well together to form a comprehensive suite
> of tools for financial analysis.
>
> Best,
> Josh
>
> On Wed, Dec 23, 2020 at 11:58 AM Ben van den Anker via R-help
> <r-help at r-project.org> wrote:
>>
>>
>>
>> Hello everyone,
>> Could anyonre recommend some good resources for finance applications
>> in R? I find the packages quantmod, TTR and PerformanceAnalytics a
>> bit outdated. There must be something more recent on the market. Any
>> suggestions will be much appreciated!
>>
>> Cheers,
>> Ben van den Anker
[...]
-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec 23 21:00:10 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 23 Dec 2020 15:00:10 -0500
Subject: [R] Finance & R
In-Reply-To: <a4a55499-aed1-f329-22dc-3f6472df6158@lisse.NA>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
 <CAPPM_gRzk=meha-kqPC0Frv-=2Xa9n=vtfY=2uyukcgb4U9U6Q@mail.gmail.com>
 <a4a55499-aed1-f329-22dc-3f6472df6158@lisse.NA>
Message-ID: <7de072f1-c857-32a8-09bb-9fb1e0d02307@gmail.com>

On 23/12/2020 1:52 p.m., Dr Eberhard W Lisse wrote:
> Joshua,
> 
> there may be some cultural differences in play, some people are direct,
> some don't like the American passive aggressiveness, and then English
> may not be the first language of a poster.
> 
> A package may be a bit outdated, or not. If so, it in itself means
> nothing other than that it is a bit outdated. Even if it is free of
> bugs, and do what it is supposed to do, fast.
> 
> I think it is legitimate to ask here for alternatives.

Yes, but asking in a way that doesn't antagonize the experts in the 
field is probably a good strategy.  For example, "I want to do X, and 
haven't been able to find a way to do it in packages A, B or C.  Did I 
miss something, or is there another package that might be able to do that?"

Duncan Murdoch

> 
> el
> 
> On 2020-12-23 20:06 , Joshua Ulrich wrote:
>> Hi Ben,
>>
>> It's not very polite to call people's work "outdated", especially when
>> given to you for free.  Those packages have been around and stable
>> for the better part of a decade, will remain stable, are actively
>> maintained, and all work well together to form a comprehensive suite
>> of tools for financial analysis.
>>
>> Best,
>> Josh
>>
>> On Wed, Dec 23, 2020 at 11:58 AM Ben van den Anker via R-help
>> <r-help at r-project.org> wrote:
>>>
>>>
>>>
>>> Hello everyone,
>>> Could anyonre recommend some good resources for finance applications
>>> in R? I find the packages quantmod, TTR and PerformanceAnalytics a
>>> bit outdated. There must be something more recent on the market. Any
>>> suggestions will be much appreciated!
>>>
>>> Cheers,
>>> Ben van den Anker
> [...]
>


From er|cjberger @end|ng |rom gm@||@com  Thu Dec 24 06:42:00 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 24 Dec 2020 07:42:00 +0200
Subject: [R] Finance & R
In-Reply-To: <7de072f1-c857-32a8-09bb-9fb1e0d02307@gmail.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
 <CAPPM_gRzk=meha-kqPC0Frv-=2Xa9n=vtfY=2uyukcgb4U9U6Q@mail.gmail.com>
 <a4a55499-aed1-f329-22dc-3f6472df6158@lisse.NA>
 <7de072f1-c857-32a8-09bb-9fb1e0d02307@gmail.com>
Message-ID: <CAGgJW745sc2pt+EfGcFgjfNvD0XssWKZT=r5atstRUHDxkcRXg@mail.gmail.com>

Hi Ben,
A few comments:
1. you might want to also post this question to the more focused group
    r-sig-finance
<r-sig-finance at r-project.org>
2. as Duncan writes, it would be helpful if you included some topics that
are not covered in the packages you mentioned
3. in my experience, the authors/maintainers of the packages you mentioned
are very responsive, which is a huge plus
4. related to (2), if you know what you are looking for, search CRAN for
it. e.g.  a search for packages that might be useful for developing High
Frequency trading strategies - "CRAN high frequency trading" turned up a
few packages, including "highfrequency". One of the co-authors of that
package is Kris Boudt, a co-author also of PerformanceAnalytics (as is
Joshua Ulrich). The search also turned up the package 'PortfolioEffectHFT'
which looks quite interesting. The search also mentioned the package
GetHFData, which deals with the Brazilian Bovespa market. One of its'
co-authors is M Perlin, whose work appears regularly in R-Bloggers. He
writes often about using R in various finance applications.

HTH,
Eric


On Wed, Dec 23, 2020 at 10:00 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 23/12/2020 1:52 p.m., Dr Eberhard W Lisse wrote:
> > Joshua,
> >
> > there may be some cultural differences in play, some people are direct,
> > some don't like the American passive aggressiveness, and then English
> > may not be the first language of a poster.
> >
> > A package may be a bit outdated, or not. If so, it in itself means
> > nothing other than that it is a bit outdated. Even if it is free of
> > bugs, and do what it is supposed to do, fast.
> >
> > I think it is legitimate to ask here for alternatives.
>
> Yes, but asking in a way that doesn't antagonize the experts in the
> field is probably a good strategy.  For example, "I want to do X, and
> haven't been able to find a way to do it in packages A, B or C.  Did I
> miss something, or is there another package that might be able to do that?"
>
> Duncan Murdoch
>
> >
> > el
> >
> > On 2020-12-23 20:06 , Joshua Ulrich wrote:
> >> Hi Ben,
> >>
> >> It's not very polite to call people's work "outdated", especially when
> >> given to you for free.  Those packages have been around and stable
> >> for the better part of a decade, will remain stable, are actively
> >> maintained, and all work well together to form a comprehensive suite
> >> of tools for financial analysis.
> >>
> >> Best,
> >> Josh
> >>
> >> On Wed, Dec 23, 2020 at 11:58 AM Ben van den Anker via R-help
> >> <r-help at r-project.org> wrote:
> >>>
> >>>
> >>>
> >>> Hello everyone,
> >>> Could anyonre recommend some good resources for finance applications
> >>> in R? I find the packages quantmod, TTR and PerformanceAnalytics a
> >>> bit outdated. There must be something more recent on the market. Any
> >>> suggestions will be much appreciated!
> >>>
> >>> Cheers,
> >>> Ben van den Anker
> > [...]
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ggrothend|eck @end|ng |rom gm@||@com  Thu Dec 24 14:42:17 2020
From: ggrothend|eck @end|ng |rom gm@||@com (Gabor Grothendieck)
Date: Thu, 24 Dec 2020 08:42:17 -0500
Subject: [R] Finance & R
In-Reply-To: <943522944.3789737.1608724503655@mail.yahoo.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
Message-ID: <CAP01uRkecnAQvAHVnnmK_6CiRDM=svg4fBRbmH57VF-7s01ODw@mail.gmail.com>

I personally use the packages you mention and
would describe them as well thought out and relatively
bug free through widespread use and years of improvement
and maintenance.   There are literally dozens of other packages
that depend on these packages so if you use them you will
also be able to seamlessly use a wide range of other
packages too.


On Wed, Dec 23, 2020 at 12:58 PM Ben van den Anker via R-help
<r-help at r-project.org> wrote:
>
>
>
> Hello everyone,
> Could anyonre recommend some good resources for finance applications in R? I find the packages quantmod, TTR and PerformanceAnalytics a bit outdated. There must be something more recent on the market. Any suggestions will be much appreciated!
> Cheers,
> Ben van den Anker
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From rque@t|on2020 @end|ng |rom gm@||@com  Thu Dec 24 04:08:05 2020
From: rque@t|on2020 @end|ng |rom gm@||@com (Anbu A)
Date: Wed, 23 Dec 2020 22:08:05 -0500
Subject: [R] Windows path backward slash
Message-ID: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>

Hi All,
I am a newbie. This is my first program.
I am trying to read SAS dataset from below path. I added escape "\" along
"\" found in path C:\Users\axyz\Desktop\sas\  but still not working.

fsasdat<-function(dsn) {
  pat="C:\\Users\\axyz\\Desktop\\sas\\"
  str1=str_c(pat,dsn,".sas7bdat","\n")
  allmetrx=read_sas(str1)
}
fsasdat("all")

Please help me.

Thanks,
AA.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Dec 24 15:28:14 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 24 Dec 2020 06:28:14 -0800
Subject: [R] Windows path backward slash
In-Reply-To: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>
References: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>
Message-ID: <D9A7732D-499F-4272-A1E3-121B22D05A90@dcn.davis.ca.us>

Simplest suggestion is to forget turning this into a function. Alternatively, remove the "allmetrx=" from the last line of your function, as the assignment suppresses automatic printing of the result. However, it may already be working... you could assign the result of the function call outside the function and see what is in that new variable:

ans <- fsasdat("all")
str(ans)

On December 23, 2020 7:08:05 PM PST, Anbu A <rquestion2020 at gmail.com> wrote:
>Hi All,
>I am a newbie. This is my first program.
>I am trying to read SAS dataset from below path. I added escape "\"
>along
>"\" found in path C:\Users\axyz\Desktop\sas\  but still not working.
>
>fsasdat<-function(dsn) {
>  pat="C:\\Users\\axyz\\Desktop\\sas\\"
>  str1=str_c(pat,dsn,".sas7bdat","\n")
>  allmetrx=read_sas(str1)
>}
>fsasdat("all")
>
>Please help me.
>
>Thanks,
>AA.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Dec 24 18:12:17 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 24 Dec 2020 09:12:17 -0800
Subject: [R] Windows path backward slash
In-Reply-To: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>
References: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>
Message-ID: <CAHqSRuTzP4_9=w2xSNhbuk-obs9EesYPa9K=s0jQ_+-WmZvRuA@mail.gmail.com>

The "\n" is probably not in the file name.  Does omitting it from the call
to str_c help?

-Bill

On Thu, Dec 24, 2020 at 6:20 AM Anbu A <rquestion2020 at gmail.com> wrote:

> Hi All,
> I am a newbie. This is my first program.
> I am trying to read SAS dataset from below path. I added escape "\" along
> "\" found in path C:\Users\axyz\Desktop\sas\  but still not working.
>
> fsasdat<-function(dsn) {
>   pat="C:\\Users\\axyz\\Desktop\\sas\\"
>   str1=str_c(pat,dsn,".sas7bdat","\n")
>   allmetrx=read_sas(str1)
> }
> fsasdat("all")
>
> Please help me.
>
> Thanks,
> AA.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rque@t|on2020 @end|ng |rom gm@||@com  Thu Dec 24 16:58:54 2020
From: rque@t|on2020 @end|ng |rom gm@||@com (Anbu A)
Date: Thu, 24 Dec 2020 10:58:54 -0500
Subject: [R] Windows path backward slash
In-Reply-To: <D9A7732D-499F-4272-A1E3-121B22D05A90@dcn.davis.ca.us>
References: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>
 <D9A7732D-499F-4272-A1E3-121B22D05A90@dcn.davis.ca.us>
Message-ID: <CABSzg8CGxp5=gM9heeir-uAA661P8AMCUK8Cepf0H3=pDNLvAA@mail.gmail.com>

Thanks, Jeff. The reason I am creating the function is I have to read some
more datasets too. I have also modified the code as per your suggestion. I
have to send the dataset name in parameter in subsequent calls.

fsasdat<-function(dsn) {
  pat="C:\\Users\\Anbu\\Desktop\\sas\\"
  str1=str_c(pat,dsn,".sas7bdat","\n")
  read_sas("C:\\Users\\Anbu\\Desktop\\sas\\all.sas7bdat")
}
allmetrx=fsasdat("all")
This code works but if I use  read_sas(str1) it is not working. Any
suggestions, please let me know.

Thanks,
Anbu.

On Thu, Dec 24, 2020 at 9:28 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Simplest suggestion is to forget turning this into a function.
> Alternatively, remove the "allmetrx=" from the last line of your function,
> as the assignment suppresses automatic printing of the result. However, it
> may already be working... you could assign the result of the function call
> outside the function and see what is in that new variable:
>
> ans <- fsasdat("all")
> str(ans)
>
> On December 23, 2020 7:08:05 PM PST, Anbu A <rquestion2020 at gmail.com>
> wrote:
> >Hi All,
> >I am a newbie. This is my first program.
> >I am trying to read SAS dataset from below path. I added escape "\"
> >along
> >"\" found in path C:\Users\axyz\Desktop\sas\  but still not working.
> >
> >fsasdat<-function(dsn) {
> >  pat="C:\\Users\\axyz\\Desktop\\sas\\"
> >  str1=str_c(pat,dsn,".sas7bdat","\n")
> >  allmetrx=read_sas(str1)
> >}
> >fsasdat("all")
> >
> >Please help me.
> >
> >Thanks,
> >AA.
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From rque@t|on2020 @end|ng |rom gm@||@com  Thu Dec 24 18:31:54 2020
From: rque@t|on2020 @end|ng |rom gm@||@com (Anbu A)
Date: Thu, 24 Dec 2020 12:31:54 -0500
Subject: [R] Windows path backward slash
In-Reply-To: <CAHqSRuTzP4_9=w2xSNhbuk-obs9EesYPa9K=s0jQ_+-WmZvRuA@mail.gmail.com>
References: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>
 <CAHqSRuTzP4_9=w2xSNhbuk-obs9EesYPa9K=s0jQ_+-WmZvRuA@mail.gmail.com>
Message-ID: <CABSzg8Ca_sjNKa9w0G5JKk_oBpMj6b43Z5fKYtL0XT40zGPHvg@mail.gmail.com>

Hi Bill,
  r"{C:\Users\Anbu\Desktop\sas\}"  - This is the key and code below worked.
fsasdat<-function(dsn) {
  pat=r"{C:\Users\Anbu\Desktop\sas\}"
  str1=str_c(pat,dsn,".sas7bdat")
  read_sas(str1)
#return(str1)
}
allmetrx=fsasdat("all")
str(allmetrx)

Thank you.

Anbu.


On Thu, Dec 24, 2020 at 12:12 PM Bill Dunlap <williamwdunlap at gmail.com>
wrote:

> The "\n" is probably not in the file name.  Does omitting it from the call
> to str_c help?
>
> -Bill
>
> On Thu, Dec 24, 2020 at 6:20 AM Anbu A <rquestion2020 at gmail.com> wrote:
>
>> Hi All,
>> I am a newbie. This is my first program.
>> I am trying to read SAS dataset from below path. I added escape "\" along
>> "\" found in path C:\Users\axyz\Desktop\sas\  but still not working.
>>
>> fsasdat<-function(dsn) {
>>   pat="C:\\Users\\axyz\\Desktop\\sas\\"
>>   str1=str_c(pat,dsn,".sas7bdat","\n")
>>   allmetrx=read_sas(str1)
>> }
>> fsasdat("all")
>>
>> Please help me.
>>
>> Thanks,
>> AA.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From twoo|m@n @end|ng |rom ont@rgettek@com  Thu Dec 24 20:11:08 2020
From: twoo|m@n @end|ng |rom ont@rgettek@com (Tom Woolman)
Date: Thu, 24 Dec 2020 14:11:08 -0500
Subject: [R] Windows path backward slash
In-Reply-To: <CABSzg8Ca_sjNKa9w0G5JKk_oBpMj6b43Z5fKYtL0XT40zGPHvg@mail.gmail.com>
References: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>
 <CAHqSRuTzP4_9=w2xSNhbuk-obs9EesYPa9K=s0jQ_+-WmZvRuA@mail.gmail.com>
 <CABSzg8Ca_sjNKa9w0G5JKk_oBpMj6b43Z5fKYtL0XT40zGPHvg@mail.gmail.com>
Message-ID: <20201224141108.Horde.uNQDDuaei5IYWUc891kyWJv@www.ontargettek.com>



In Windows versions of R/RStudio when refering to filename paths, you  
need to either use two "\\" characters instead of one, OR use the  
reverse slash "/" as used in Linux/Unix. It's an unfortunate conflict  
between R and Windows in that a single \ character by itself is  
treated as an escape character.

It's all Microsoft's fault for using the wrong direction slash in  
MS-DOS and not conforming to Unix style c. 1980.




Quoting Anbu A <rquestion2020 at gmail.com>:

> Hi Bill,
>   r"{C:\Users\Anbu\Desktop\sas\}"  - This is the key and code below worked.
> fsasdat<-function(dsn) {
>   pat=r"{C:\Users\Anbu\Desktop\sas\}"
>   str1=str_c(pat,dsn,".sas7bdat")
>   read_sas(str1)
> #return(str1)
> }
> allmetrx=fsasdat("all")
> str(allmetrx)
>
> Thank you.
>
> Anbu.
>
>
> On Thu, Dec 24, 2020 at 12:12 PM Bill Dunlap <williamwdunlap at gmail.com>
> wrote:
>
>> The "\n" is probably not in the file name.  Does omitting it from the call
>> to str_c help?
>>
>> -Bill
>>
>> On Thu, Dec 24, 2020 at 6:20 AM Anbu A <rquestion2020 at gmail.com> wrote:
>>
>>> Hi All,
>>> I am a newbie. This is my first program.
>>> I am trying to read SAS dataset from below path. I added escape "\" along
>>> "\" found in path C:\Users\axyz\Desktop\sas\  but still not working.
>>>
>>> fsasdat<-function(dsn) {
>>>   pat="C:\\Users\\axyz\\Desktop\\sas\\"
>>>   str1=str_c(pat,dsn,".sas7bdat","\n")
>>>   allmetrx=read_sas(str1)
>>> }
>>> fsasdat("all")
>>>
>>> Please help me.
>>>
>>> Thanks,
>>> AA.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From e| @end|ng |rom ||@@e@NA  Thu Dec 24 20:16:04 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Thu, 24 Dec 2020 21:16:04 +0200
Subject: [R] Windows path backward slash
In-Reply-To: <CABSzg8Ca_sjNKa9w0G5JKk_oBpMj6b43Z5fKYtL0XT40zGPHvg@mail.gmail.com>
References: <CABSzg8CfgoFKzY4t7-DsBe35mt6jP_pF31eiqq5orTqZEgauhQ@mail.gmail.com>
 <CAHqSRuTzP4_9=w2xSNhbuk-obs9EesYPa9K=s0jQ_+-WmZvRuA@mail.gmail.com>
 <CABSzg8Ca_sjNKa9w0G5JKk_oBpMj6b43Z5fKYtL0XT40zGPHvg@mail.gmail.com>
Message-ID: <aa424774-3343-949d-1b67-15a5d4c3bbbf@lisse.NA>

What happens if you go to the import tool in RStudio?

It should do your bidding, and, it produces code which
you then can copy and paste.

el

On 2020-12-24 19:31 , Anbu A wrote:
> Hi Bill,
>   r"{C:\Users\Anbu\Desktop\sas\}"  - This is the key and code below worked.
> fsasdat<-function(dsn) {
>   pat=r"{C:\Users\Anbu\Desktop\sas\}"
>   str1=str_c(pat,dsn,".sas7bdat")
>   read_sas(str1)
> #return(str1)
> }
> allmetrx=fsasdat("all")
> str(allmetrx)
> 
> Thank you.
> 
> Anbu.
> 
> 
> On Thu, Dec 24, 2020 at 12:12 PM Bill Dunlap <williamwdunlap at gmail.com>
> wrote:
> 
>> The "\n" is probably not in the file name.  Does omitting it from the call
>> to str_c help?
>>
>> -Bill
>>
>> On Thu, Dec 24, 2020 at 6:20 AM Anbu A <rquestion2020 at gmail.com> wrote:
>>
>>> Hi All,
>>> I am a newbie. This is my first program.
>>> I am trying to read SAS dataset from below path. I added escape "\" along
>>> "\" found in path C:\Users\axyz\Desktop\sas\  but still not working.
>>>
>>> fsasdat<-function(dsn) {
>>>   pat="C:\\Users\\axyz\\Desktop\\sas\\"
>>>   str1=str_c(pat,dsn,".sas7bdat","\n")
>>>   allmetrx=read_sas(str1)
>>> }
>>> fsasdat("all")
>>>
>>> Please help me.
>>>
>>> Thanks,
>>> AA.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From @purd|e@@ @end|ng |rom gm@||@com  Thu Dec 24 21:33:31 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 25 Dec 2020 09:33:31 +1300
Subject: [R] Finance & R
In-Reply-To: <943522944.3789737.1608724503655@mail.yahoo.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
Message-ID: <CAB8pepwgK3WPQJpi38dKht9uttW12MWMj7ZtXGkKtP_MU+vgNA@mail.gmail.com>

Dear All,

One of the most significant contributors to open source finance is:

Diethelm W?rtz
https://comp.phys.ethz.ch/news-and-events/nc/2016/08/in-memoriam-diethelm-wuertz.html

And on that note, I'd like to wish Merry Christmas to a great
mathematician and programmer, and his family.

A quick search, revealed the following hits:

https://en.wikipedia.org/wiki/Rmetrics
https://www.rmetrics.org


B.


On Thu, Dec 24, 2020 at 6:58 AM Ben van den Anker via R-help
<r-help at r-project.org> wrote:
>
>
>
> Hello everyone,
> Could anyonre recommend some good resources for finance applications in R? I find the packages quantmod, TTR and PerformanceAnalytics a bit outdated. There must be something more recent on the market. Any suggestions will be much appreciated!
> Cheers,
> Ben van den Anker
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@vedbtk111 @end|ng |rom gm@||@com  Thu Dec 24 23:36:17 2020
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Thu, 24 Dec 2020 23:36:17 +0100
Subject: [R] Error with caret model
Message-ID: <CAJhui+tJYrzdBzrtAEpsFW_9UK126=koDHYYXjZpELdCa+6emQ@mail.gmail.com>

Greetings to everyone

I read online about this code:

 importance=NULL
m= glm (......)
 imp= rbind(importance, anova(m, type="2", test="LR"))$"LR Chisq")

but I am using caret:
model <- train(act_effort ~ ., data = tr,
                     method = "rpart",
                     tuneLength = 15,
                     metric = "RMSE",
                     trControl = ctrl)
And when I am using like the following,

importance=NULL
m= glm (......)
 imp= rbind(importance, anova(model, type="2", test="LR"))$"LR Chisq")

It gives me the error:

Error in UseMethod("anova") :
  no applicable method for 'anova' applied to an object of class
"c('train', 'train.formula')"

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Dec 25 10:08:29 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 25 Dec 2020 09:08:29 +0000
Subject: [R] Error with caret model
In-Reply-To: <CAJhui+tJYrzdBzrtAEpsFW_9UK126=koDHYYXjZpELdCa+6emQ@mail.gmail.com>
References: <CAJhui+tJYrzdBzrtAEpsFW_9UK126=koDHYYXjZpELdCa+6emQ@mail.gmail.com>
Message-ID: <4543f9fc-0f07-7851-71e2-32e4ebbd87bb@sapo.pt>

Hello,

There are several things wrong with your code and they come from copying 
code found online without really understanding what it is doing.

1. To rbind NULL with any object will give that object, the NULL object 
will not matter. Therefore, rbind is doing pratically nothing. If the 
second object is a numeric vector, the return value will be that numeric 
vector coerced to matrix.


importance <- NULL
rbind(importance, <any numeric vector>)


2. As for the error message, it's saying that there are no methods

anova.train
anova.train.formula


To see the methods for 'anova' run

methods("anova")


Hope this helps,

Rui Barradas

?s 22:36 de 24/12/20, javed khan escreveu:
> Greetings to everyone
> 
> I read online about this code:
> 
>   importance=NULL
> m= glm (......)
>   imp= rbind(importance, anova(m, type="2", test="LR"))$"LR Chisq")
> 
> but I am using caret:
> model <- train(act_effort ~ ., data = tr,
>                       method = "rpart",
>                       tuneLength = 15,
>                       metric = "RMSE",
>                       trControl = ctrl)
> And when I am using like the following,
> 
> importance=NULL
> m= glm (......)
>   imp= rbind(importance, anova(model, type="2", test="LR"))$"LR Chisq")
> 
> It gives me the error:
> 
> Error in UseMethod("anova") :
>    no applicable method for 'anova' applied to an object of class
> "c('train', 'train.formula')"
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From er|cjberger @end|ng |rom gm@||@com  Fri Dec 25 10:47:24 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Fri, 25 Dec 2020 11:47:24 +0200
Subject: [R] Finance & R
In-Reply-To: <CAB8pepwgK3WPQJpi38dKht9uttW12MWMj7ZtXGkKtP_MU+vgNA@mail.gmail.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
 <CAB8pepwgK3WPQJpi38dKht9uttW12MWMj7ZtXGkKtP_MU+vgNA@mail.gmail.com>
Message-ID: <CAGgJW75kpK5ELPB715omQ5ypcwa9arwoTOk_pjFBo6VtR8v1tw@mail.gmail.com>

Hi Ben,

Abby makes a good suggestion on Rmetrics, although it is no longer current
in CRAN.
The www.rmetrics.org site looks quite interesting (although not clear
whether there are any recent additions.)

The suggestion did bring to mind another excellent resource: quantlib - a
library for computational finance.
See https://www.quantlib.org

The quantlib library is written in C++ and can be accessed directly via C++.
It is also possible (and easy) to access quantlib from R, via the package
RQuantLib (written by the incredible Dirk Eddelbuettel.)

Best,
Eric



On Thu, Dec 24, 2020 at 10:34 PM Abby Spurdle <spurdle.a at gmail.com> wrote:

> Dear All,
>
> One of the most significant contributors to open source finance is:
>
> Diethelm W?rtz
>
> https://comp.phys.ethz.ch/news-and-events/nc/2016/08/in-memoriam-diethelm-wuertz.html
>
> And on that note, I'd like to wish Merry Christmas to a great
> mathematician and programmer, and his family.
>
> A quick search, revealed the following hits:
>
> https://en.wikipedia.org/wiki/Rmetrics
> https://www.rmetrics.org
>
>
> B.
>
>
> On Thu, Dec 24, 2020 at 6:58 AM Ben van den Anker via R-help
> <r-help at r-project.org> wrote:
> >
> >
> >
> > Hello everyone,
> > Could anyonre recommend some good resources for finance applications in
> R? I find the packages quantmod, TTR and PerformanceAnalytics a bit
> outdated. There must be something more recent on the market. Any
> suggestions will be much appreciated!
> > Cheers,
> > Ben van den Anker
> >
> >
> >
> >
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@vedbtk111 @end|ng |rom gm@||@com  Fri Dec 25 13:14:25 2020
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Fri, 25 Dec 2020 13:14:25 +0100
Subject: [R] Error with caret model
In-Reply-To: <4543f9fc-0f07-7851-71e2-32e4ebbd87bb@sapo.pt>
References: <CAJhui+tJYrzdBzrtAEpsFW_9UK126=koDHYYXjZpELdCa+6emQ@mail.gmail.com>
 <4543f9fc-0f07-7851-71e2-32e4ebbd87bb@sapo.pt>
Message-ID: <CAJhui+usNzhLmWHnKmyRWP6vHoGwgLTMRdFXxMzrQZ-ZDHTWQg@mail.gmail.com>

Thank you  Rui Barradas for your feedback.

I will look into it further based on your suggestion.

Regards
Javed

<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
Virus-free.
www.avast.com
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

On Fri, Dec 25, 2020 at 10:08 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> There are several things wrong with your code and they come from copying
> code found online without really understanding what it is doing.
>
> 1. To rbind NULL with any object will give that object, the NULL object
> will not matter. Therefore, rbind is doing pratically nothing. If the
> second object is a numeric vector, the return value will be that numeric
> vector coerced to matrix.
>
>
> importance <- NULL
> rbind(importance, <any numeric vector>)
>
>
> 2. As for the error message, it's saying that there are no methods
>
> anova.train
> anova.train.formula
>
>
> To see the methods for 'anova' run
>
> methods("anova")
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 22:36 de 24/12/20, javed khan escreveu:
> > Greetings to everyone
> >
> > I read online about this code:
> >
> >   importance=NULL
> > m= glm (......)
> >   imp= rbind(importance, anova(m, type="2", test="LR"))$"LR Chisq")
> >
> > but I am using caret:
> > model <- train(act_effort ~ ., data = tr,
> >                       method = "rpart",
> >                       tuneLength = 15,
> >                       metric = "RMSE",
> >                       trControl = ctrl)
> > And when I am using like the following,
> >
> > importance=NULL
> > m= glm (......)
> >   imp= rbind(importance, anova(model, type="2", test="LR"))$"LR Chisq")
> >
> > It gives me the error:
> >
> > Error in UseMethod("anova") :
> >    no applicable method for 'anova' applied to an object of class
> > "c('train', 'train.formula')"
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Fri Dec 25 21:26:26 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Fri, 25 Dec 2020 21:26:26 +0100
Subject: [R] How to evaluate a learner with multiple resampling in mlr3?
Message-ID: <CA+nrPns_1L6=7YzCXnqngZ80rjw5uXdkVccLE-mfKRJGyYg7=A@mail.gmail.com>

Hello everyone,

I want to evaluate the cart learner with different (i.e. ideally 10
different) resampling methods. My questions are:

(1) How should I specify the list of resampling methods?
(2) Should I specify the resampling lists in the beginning or in the
benchmark?
(3) Currently mlr3 shows bootstrap method, can we use the variants of
bootstrap like boot632, optimistic boot like we use in caret?

d=readARFF("mall.csv")

task=TaskRegr$new("d", d, target = "Price")
learner= lrn("regr.rpart")
resampling = rsmp("bootstrap", repeats=100)

grid = benchmark_grid( task = task,  learner = learner,  resampling)
bmr = benchmark(grid)

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Fri Dec 25 22:52:13 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 26 Dec 2020 10:52:13 +1300
Subject: [R] Finance & R
In-Reply-To: <CAGgJW75kpK5ELPB715omQ5ypcwa9arwoTOk_pjFBo6VtR8v1tw@mail.gmail.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
 <CAB8pepwgK3WPQJpi38dKht9uttW12MWMj7ZtXGkKtP_MU+vgNA@mail.gmail.com>
 <CAGgJW75kpK5ELPB715omQ5ypcwa9arwoTOk_pjFBo6VtR8v1tw@mail.gmail.com>
Message-ID: <CAB8pepyBC_VRu18qiXiqCTzwdop4tcbox4_eRBhJqWB-OZsjzw@mail.gmail.com>

I'm not sure what the official status of Rmetrics is.
However, as far as I can see most of the Rmetrics-based R packages are
on CRAN, and are currently maintained.
(e.g. fBasics, fPortfolio, fAssets, fTrading).

I found a list here:
https://r-forge.r-project.org/R/?group_id=156


On Fri, Dec 25, 2020 at 10:47 PM Eric Berger <ericjberger at gmail.com> wrote:
>
> Hi Ben,
>
> Abby makes a good suggestion on Rmetrics, although it is no longer current in CRAN.
> The www.rmetrics.org site looks quite interesting (although not clear whether there are any recent additions.)
>
> The suggestion did bring to mind another excellent resource: quantlib - a library for computational finance.
> See https://www.quantlib.org
>
> The quantlib library is written in C++ and can be accessed directly via C++.
> It is also possible (and easy) to access quantlib from R, via the package RQuantLib (written by the incredible Dirk Eddelbuettel.)
>
> Best,
> Eric
>
>
>
> On Thu, Dec 24, 2020 at 10:34 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>>
>> Dear All,
>>
>> One of the most significant contributors to open source finance is:
>>
>> Diethelm W?rtz
>> https://comp.phys.ethz.ch/news-and-events/nc/2016/08/in-memoriam-diethelm-wuertz.html
>>
>> And on that note, I'd like to wish Merry Christmas to a great
>> mathematician and programmer, and his family.
>>
>> A quick search, revealed the following hits:
>>
>> https://en.wikipedia.org/wiki/Rmetrics
>> https://www.rmetrics.org
>>
>>
>> B.
>>
>>
>> On Thu, Dec 24, 2020 at 6:58 AM Ben van den Anker via R-help
>> <r-help at r-project.org> wrote:
>> >
>> >
>> >
>> > Hello everyone,
>> > Could anyonre recommend some good resources for finance applications in R? I find the packages quantmod, TTR and PerformanceAnalytics a bit outdated. There must be something more recent on the market. Any suggestions will be much appreciated!
>> > Cheers,
>> > Ben van den Anker
>> >
>> >
>> >
>> >
>> >
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From v@nden@nker @end|ng |rom y@hoo@com  Sat Dec 26 09:14:49 2020
From: v@nden@nker @end|ng |rom y@hoo@com (Ben van den Anker)
Date: Sat, 26 Dec 2020 08:14:49 +0000 (UTC)
Subject: [R] Finance & R
In-Reply-To: <CAB8pepyBC_VRu18qiXiqCTzwdop4tcbox4_eRBhJqWB-OZsjzw@mail.gmail.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
 <CAB8pepwgK3WPQJpi38dKht9uttW12MWMj7ZtXGkKtP_MU+vgNA@mail.gmail.com>
 <CAGgJW75kpK5ELPB715omQ5ypcwa9arwoTOk_pjFBo6VtR8v1tw@mail.gmail.com>
 <CAB8pepyBC_VRu18qiXiqCTzwdop4tcbox4_eRBhJqWB-OZsjzw@mail.gmail.com>
Message-ID: <466427923.4496158.1608970489239@mail.yahoo.com>



Many thanks to all who helped out! What a wonderful community is this!
Cheers!
Ben van den Anker?






 

    On Friday, December 25, 2020, 10:52:38 PM GMT+1, Abby Spurdle <spurdle.a at gmail.com> wrote:  
 
 I'm not sure what the official status of Rmetrics is.
However, as far as I can see most of the Rmetrics-based R packages are
on CRAN, and are currently maintained.
(e.g. fBasics, fPortfolio, fAssets, fTrading).

I found a list here:
https://r-forge.r-project.org/R/?group_id=156


On Fri, Dec 25, 2020 at 10:47 PM Eric Berger <ericjberger at gmail.com> wrote:
>
> Hi Ben,
>
> Abby makes a good suggestion on Rmetrics, although it is no longer current in CRAN.
> The www.rmetrics.org site looks quite interesting (although not clear whether there are any recent additions.)
>
> The suggestion did bring to mind another excellent resource: quantlib - a library for computational finance.
> See https://www.quantlib.org
>
> The quantlib library is written in C++ and can be accessed directly via C++.
> It is also possible (and easy) to access quantlib from R, via the package RQuantLib (written by the incredible Dirk Eddelbuettel.)
>
> Best,
> Eric
>
>
>
> On Thu, Dec 24, 2020 at 10:34 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>>
>> Dear All,
>>
>> One of the most significant contributors to open source finance is:
>>
>> Diethelm W?rtz
>> https://comp.phys.ethz.ch/news-and-events/nc/2016/08/in-memoriam-diethelm-wuertz.html
>>
>> And on that note, I'd like to wish Merry Christmas to a great
>> mathematician and programmer, and his family.
>>
>> A quick search, revealed the following hits:
>>
>> https://en.wikipedia.org/wiki/Rmetrics
>> https://www.rmetrics.org
>>
>>
>> B.
>>
>>
>> On Thu, Dec 24, 2020 at 6:58 AM Ben van den Anker via R-help
>> <r-help at r-project.org> wrote:
>> >
>> >
>> >
>> > Hello everyone,
>> > Could anyonre recommend some good resources for finance applications in R? I find the packages quantmod, TTR and PerformanceAnalytics a bit outdated. There must be something more recent on the market. Any suggestions will be much appreciated!
>> > Cheers,
>> > Ben van den Anker
>> >
>> >
>> >
>> >
>> >
>> >
>> >? ? ? ? [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.  
	[[alternative HTML version deleted]]


From |r@|nj @end|ng |rom gm@||@com  Sat Dec 26 14:17:24 2020
From: |r@|nj @end|ng |rom gm@||@com (John C Frain)
Date: Sat, 26 Dec 2020 13:17:24 +0000
Subject: [R] Finance & R
In-Reply-To: <466427923.4496158.1608970489239@mail.yahoo.com>
References: <943522944.3789737.1608724503655.ref@mail.yahoo.com>
 <943522944.3789737.1608724503655@mail.yahoo.com>
 <CAB8pepwgK3WPQJpi38dKht9uttW12MWMj7ZtXGkKtP_MU+vgNA@mail.gmail.com>
 <CAGgJW75kpK5ELPB715omQ5ypcwa9arwoTOk_pjFBo6VtR8v1tw@mail.gmail.com>
 <CAB8pepyBC_VRu18qiXiqCTzwdop4tcbox4_eRBhJqWB-OZsjzw@mail.gmail.com>
 <466427923.4496158.1608970489239@mail.yahoo.com>
Message-ID: <CAHrK514HPTeijJhdawdZOpe1rw0dBx5tN0LgfryGugVbu_Qi8g@mail.gmail.com>

Diethelm W?rtz was responsible for the development of Rmetrics until his
untimely death in a car accident.  You might like to read the tribute to
him from ETH.  May he rest in peace.

https://www.phys.ethz.ch/news-and-events/d-phys-news/2016/08/barbara-and-diethelm-wuertz.html


John C Frain
3 Aranleigh Park
Rathfarnham
Dublin 14
Ireland
www.tcd.ie/Economics/staff/frainj/home.html
mailto:frainj at tcd.ie
mailto:frainj at gmail.com


On Sat, 26 Dec 2020 at 08:15, Ben van den Anker via R-help <
r-help at r-project.org> wrote:

>
>
> Many thanks to all who helped out! What a wonderful community is this!
> Cheers!
> Ben van den Anker
>
>
>
>
>
>
>
>
>     On Friday, December 25, 2020, 10:52:38 PM GMT+1, Abby Spurdle <
> spurdle.a at gmail.com> wrote:
>
>  I'm not sure what the official status of Rmetrics is.
> However, as far as I can see most of the Rmetrics-based R packages are
> on CRAN, and are currently maintained.
> (e.g. fBasics, fPortfolio, fAssets, fTrading).
>
> I found a list here:
> https://r-forge.r-project.org/R/?group_id=156
>
>
> On Fri, Dec 25, 2020 at 10:47 PM Eric Berger <ericjberger at gmail.com>
> wrote:
> >
> > Hi Ben,
> >
> > Abby makes a good suggestion on Rmetrics, although it is no longer
> current in CRAN.
> > The www.rmetrics.org site looks quite interesting (although not clear
> whether there are any recent additions.)
> >
> > The suggestion did bring to mind another excellent resource: quantlib -
> a library for computational finance.
> > See https://www.quantlib.org
> >
> > The quantlib library is written in C++ and can be accessed directly via
> C++.
> > It is also possible (and easy) to access quantlib from R, via the
> package RQuantLib (written by the incredible Dirk Eddelbuettel.)
> >
> > Best,
> > Eric
> >
> >
> >
> > On Thu, Dec 24, 2020 at 10:34 PM Abby Spurdle <spurdle.a at gmail.com>
> wrote:
> >>
> >> Dear All,
> >>
> >> One of the most significant contributors to open source finance is:
> >>
> >> Diethelm W?rtz
> >>
> https://comp.phys.ethz.ch/news-and-events/nc/2016/08/in-memoriam-diethelm-wuertz.html
> >>
> >> And on that note, I'd like to wish Merry Christmas to a great
> >> mathematician and programmer, and his family.
> >>
> >> A quick search, revealed the following hits:
> >>
> >> https://en.wikipedia.org/wiki/Rmetrics
> >> https://www.rmetrics.org
> >>
> >>
> >> B.
> >>
> >>
> >> On Thu, Dec 24, 2020 at 6:58 AM Ben van den Anker via R-help
> >> <r-help at r-project.org> wrote:
> >> >
> >> >
> >> >
> >> > Hello everyone,
> >> > Could anyonre recommend some good resources for finance applications
> in R? I find the packages quantmod, TTR and PerformanceAnalytics a bit
> outdated. There must be something more recent on the market. Any
> suggestions will be much appreciated!
> >> > Cheers,
> >> > Ben van den Anker
> >> >
> >> >
> >> >
> >> >
> >> >
> >> >
> >> >        [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @ey|t@||@k@y|@ @end|ng |rom |bu@edu@tr  Sun Dec 27 21:19:07 2020
From: @ey|t@||@k@y|@ @end|ng |rom |bu@edu@tr (Seyit Ali KAYIS)
Date: Sun, 27 Dec 2020 23:19:07 +0300
Subject: [R] Passing variable name
Message-ID: <000001d6dc8d$8793d400$96bb7c00$@ibu.edu.tr>

Dear R users,

 ?

I have a data frame as below. In part 1, I have created a table for Gender and Hand, performed Chi-Square test and made graph using ggplot.

 ?

I want to replace the original variable names (Gender and Hand) with V1 and V2 and to be able to perform those things again as in #part 2. Is there a way to be able to replace the original names?

 ?

Any help is deeply appreciated

 ?

Kind Regards

 ?

Seyit Ali 

 ?

#############################################################################

 ?

MyData<-data.frame("Gender" = c("F",     "F",        "F",        "F",        "M",      "M",              "M",      "M",      "M",      "M",      "F",        "F"),

                   "Hand" = c("R",           "R",        "L",        "L",        "R",        "R",        "L",              "L",        "R",        "R",        "L",        "L"), 

                   "Gr" = c(1,      2,           1,           2,           1,           2,           1,           2,              1,           2,           1,           2) )

                      

MyData <- within(MyData, {

  Gender  <- factor(Gender)

  Hand <- factor(Hand)

  Gr   <- factor(Gr)

}

)

 ?

str(MyData)

 ?

library(ggplot2)

 ?

#################     Part 1  #########################################

 ?

MyT <- table(MyData$Gender, MyData$Hand)

print(MyT)

 ?

MyChi<- chisq.test(MyT)

print(MyChi)

dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))

name2<- c("Gender", "Hand", "Frequency")                                           

names(dMyT) <- name2

 ?

ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) + 

    geom_bar(position="dodge", stat="identity")

 ?

#################  Part 2   ################

 ?

# I want to be able to pass Gender and Hand as V1 and V2 , respectively to

# table, Chi-Square test and ggplot

 ?

V1 <- "Gender" 

V2 <- "Hand"

 ?

MyT2 <- table(MyData$V1, MyData$V2)

 ?

print(MyT)

 ?

MyChi<- chisq.test(MyT)

print(MyChi)

dMyT <- data.frame(as.table(as.matrix(table(MyData$V1, MyData$V2, useNA = "ifany"))))

name2<- c(V1, V2, "Frequency")                                           

names(dMyT) <- name2

 ?

ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) + 

    geom_bar(position="dodge", stat="identity")

 ?

 ?

 ?

 ?

----------------------------------------------------

Dr. Seyit Ali KAYIS

Bolu Abant Izzet Baysal University, Faculty of Medicine

Department of Biostatistics and Medical Informatics

Bolu, Turkey

  

 <mailto:s_a_kayis at yahoo.com> s_a_kayis at yahoo.com,  <mailto:s_a_kayis at hotmail.com> s_a_kayis at hotmail.com

Tel: +90 374 254 30 32 Mobile: +90 535 587 1139

  

Greetings from Bolu, Turkey

------------------------------------------------------ 

 ?


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Dec 27 22:08:23 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 27 Dec 2020 13:08:23 -0800
Subject: [R] Passing variable name
In-Reply-To: <000001d6dc8d$8793d400$96bb7c00$@ibu.edu.tr>
References: <000001d6dc8d$8793d400$96bb7c00$@ibu.edu.tr>
Message-ID: <CAGxFJbTCJ+_renpxXadZU+ePLNchAbjfLiQgxP48aNKgAsShZA@mail.gmail.com>

This is a *plain text* list. As you can see from the included text that I
received,  the HTML version that you sent was somewhat mangled by the
server. I do not know whether or not enough got through for you to get a
helpful reply, but if not, re-send *to the list, not me* in *plain text*.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Dec 27, 2020 at 12:25 PM Seyit Ali KAYIS <seyitali.kayis at ibu.edu.tr>
wrote:

> Dear R users,
>
>  ?
>
> I have a data frame as below. In part 1, I have created a table for Gender
> and Hand, performed Chi-Square test and made graph using ggplot.
>
>  ?
>
> I want to replace the original variable names (Gender and Hand) with V1
> and V2 and to be able to perform those things again as in #part 2. Is there
> a way to be able to replace the original names?
>
>  ?
>
> Any help is deeply appreciated
>
>  ?
>
> Kind Regards
>
>  ?
>
> Seyit Ali
>
>  ?
>
>
> #############################################################################
>
>  ?
>
> MyData<-data.frame("Gender" = c("F",     "F",        "F",        "F",
>   "M",      "M",              "M",      "M",      "M",      "M",      "F",
>       "F"),
>
>                    "Hand" = c("R",           "R",        "L",        "L",
>       "R",        "R",        "L",              "L",        "R",
> "R",        "L",        "L"),
>
>                    "Gr" = c(1,      2,           1,           2,
>  1,           2,           1,           2,              1,           2,
>        1,           2) )
>
>
>
> MyData <- within(MyData, {
>
>   Gender  <- factor(Gender)
>
>   Hand <- factor(Hand)
>
>   Gr   <- factor(Gr)
>
> }
>
> )
>
>  ?
>
> str(MyData)
>
>  ?
>
> library(ggplot2)
>
>  ?
>
> #################     Part 1  #########################################
>
>  ?
>
> MyT <- table(MyData$Gender, MyData$Hand)
>
> print(MyT)
>
>  ?
>
> MyChi<- chisq.test(MyT)
>
> print(MyChi)
>
> dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand,
> useNA = "ifany"))))
>
> name2<- c("Gender", "Hand", "Frequency")
>
>
> names(dMyT) <- name2
>
>  ?
>
> ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) +
>
>     geom_bar(position="dodge", stat="identity")
>
>  ?
>
> #################  Part 2   ################
>
>  ?
>
> # I want to be able to pass Gender and Hand as V1 and V2 , respectively to
>
> # table, Chi-Square test and ggplot
>
>  ?
>
> V1 <- "Gender"
>
> V2 <- "Hand"
>
>  ?
>
> MyT2 <- table(MyData$V1, MyData$V2)
>
>  ?
>
> print(MyT)
>
>  ?
>
> MyChi<- chisq.test(MyT)
>
> print(MyChi)
>
> dMyT <- data.frame(as.table(as.matrix(table(MyData$V1, MyData$V2, useNA =
> "ifany"))))
>
> name2<- c(V1, V2, "Frequency")
>
> names(dMyT) <- name2
>
>  ?
>
> ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) +
>
>     geom_bar(position="dodge", stat="identity")
>
>  ?
>
>  ?
>
>  ?
>
>  ?
>
> ----------------------------------------------------
>
> Dr. Seyit Ali KAYIS
>
> Bolu Abant Izzet Baysal University, Faculty of Medicine
>
> Department of Biostatistics and Medical Informatics
>
> Bolu, Turkey
>
>
>
>  <mailto:s_a_kayis at yahoo.com> s_a_kayis at yahoo.com,  <mailto:
> s_a_kayis at hotmail.com> s_a_kayis at hotmail.com
>
> Tel: +90 374 254 30 32 Mobile: +90 535 587 1139
>
>
>
> Greetings from Bolu, Turkey
>
> ------------------------------------------------------
>
>  ?
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sun Dec 27 22:48:30 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 28 Dec 2020 08:48:30 +1100
Subject: [R] Passing variable name
In-Reply-To: <CA+8X3fXy58rEy5XyA4P4_pJOiTJA9cUtR+9592P2+T3nNpwNhQ@mail.gmail.com>
References: <000001d6dc8d$8793d400$96bb7c00$@ibu.edu.tr>
 <CA+8X3fXy58rEy5XyA4P4_pJOiTJA9cUtR+9592P2+T3nNpwNhQ@mail.gmail.com>
Message-ID: <CA+8X3fVVYNqBs=o=Qi6dsEyFRnX+3Rz_5NTDZ-9SG2Y2n8hXUQ@mail.gmail.com>

Sorry, Bert, I also forgot to copy to the list.

Hi Seyet Ali,
If you have created the data frame, you probably know that "Gender",
"Hand" and "Gr" are the names of the vectors of values that are joined
in the data frame "MyData". You now wish to change those names. I
don't know why you would change the names to obscure ones like "V1",
but I suggest a look at the "names" function. The answer to your
question should now be clear to you.

Jim

On Mon, Dec 28, 2020 at 8:47 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Seyet Ali,
> If you have created the data frame, you probably know that "Gender",
> "Hand" and "Gr" are the names of the vectors of values that are joined
> in the data frame "MyData". You now wish to change those names. I
> don't know why you would change the names to obscure ones like "V1",
> but I suggest a look at the "names" function. The answer to your
> question should now be clear to you.
>
> Jim
>
> On Mon, Dec 28, 2020 at 7:25 AM Seyit Ali KAYIS
> <seyitali.kayis at ibu.edu.tr> wrote:
> >
> > Dear R users,
> >
> >  ?
> >
> > I have a data frame as below. In part 1, I have created a table for Gender and Hand, performed Chi-Square test and made graph using ggplot.
> >
> >  ?
> >
> > I want to replace the original variable names (Gender and Hand) with V1 and V2 and to be able to perform those things again as in #part 2. Is there a way to be able to replace the original names?
> >
> >  ?
> >
> > Any help is deeply appreciated
> >
> >  ?
> >
> > Kind Regards
> >
> >  ?
> >
> > Seyit Ali
> >
> >  ?
> >
> > #############################################################################
> >
> >  ?
> >
> > MyData<-data.frame("Gender" = c("F",     "F",        "F",        "F",        "M",      "M",              "M",      "M",      "M",      "M",      "F",        "F"),
> >
> >                    "Hand" = c("R",           "R",        "L",        "L",        "R",        "R",        "L",              "L",        "R",        "R",        "L",        "L"),
> >
> >                    "Gr" = c(1,      2,           1,           2,           1,           2,           1,           2,              1,           2,           1,           2) )
> >
> >
> >
> > MyData <- within(MyData, {
> >
> >   Gender  <- factor(Gender)
> >
> >   Hand <- factor(Hand)
> >
> >   Gr   <- factor(Gr)
> >
> > }
> >
> > )
> >
> >  ?
> >
> > str(MyData)
> >
> >  ?
> >
> > library(ggplot2)
> >
> >  ?
> >
> > #################     Part 1  #########################################
> >
> >  ?
> >
> > MyT <- table(MyData$Gender, MyData$Hand)
> >
> > print(MyT)
> >
> >  ?
> >
> > MyChi<- chisq.test(MyT)
> >
> > print(MyChi)
> >
> > dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))
> >
> > name2<- c("Gender", "Hand", "Frequency")
> >
> > names(dMyT) <- name2
> >
> >  ?
> >
> > ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) +
> >
> >     geom_bar(position="dodge", stat="identity")
> >
> >  ?
> >
> > #################  Part 2   ################
> >
> >  ?
> >
> > # I want to be able to pass Gender and Hand as V1 and V2 , respectively to
> >
> > # table, Chi-Square test and ggplot
> >
> >  ?
> >
> > V1 <- "Gender"
> >
> > V2 <- "Hand"
> >
> >  ?
> >
> > MyT2 <- table(MyData$V1, MyData$V2)
> >
> >  ?
> >
> > print(MyT)
> >
> >  ?
> >
> > MyChi<- chisq.test(MyT)
> >
> > print(MyChi)
> >
> > dMyT <- data.frame(as.table(as.matrix(table(MyData$V1, MyData$V2, useNA = "ifany"))))
> >
> > name2<- c(V1, V2, "Frequency")
> >
> > names(dMyT) <- name2
> >
> >  ?
> >
> > ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) +
> >
> >     geom_bar(position="dodge", stat="identity")
> >
> >  ?
> >
> >  ?
> >
> >  ?
> >
> >  ?
> >
> > ----------------------------------------------------
> >
> > Dr. Seyit Ali KAYIS
> >
> > Bolu Abant Izzet Baysal University, Faculty of Medicine
> >
> > Department of Biostatistics and Medical Informatics
> >
> > Bolu, Turkey
> >
> >
> >
> >  <mailto:s_a_kayis at yahoo.com> s_a_kayis at yahoo.com,  <mailto:s_a_kayis at hotmail.com> s_a_kayis at hotmail.com
> >
> > Tel: +90 374 254 30 32 Mobile: +90 535 587 1139
> >
> >
> >
> > Greetings from Bolu, Turkey
> >
> > ------------------------------------------------------
> >
> >  ?
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Dec 27 23:58:21 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 27 Dec 2020 22:58:21 +0000
Subject: [R] Passing variable name
In-Reply-To: <CA+8X3fVVYNqBs=o=Qi6dsEyFRnX+3Rz_5NTDZ-9SG2Y2n8hXUQ@mail.gmail.com>
References: <000001d6dc8d$8793d400$96bb7c00$@ibu.edu.tr>
 <CA+8X3fXy58rEy5XyA4P4_pJOiTJA9cUtR+9592P2+T3nNpwNhQ@mail.gmail.com>
 <CA+8X3fVVYNqBs=o=Qi6dsEyFRnX+3Rz_5NTDZ-9SG2Y2n8hXUQ@mail.gmail.com>
Message-ID: <121b84e8-c7ff-76fe-8147-0e1ee95e3e02@sapo.pt>

Hello,

Or maybe V1 and V2 are variables that hold column names?
If so see thess StackOverflow posts [1], [2]. The trick is to use [[, 
not $ to extractthe columns.


V1 <- "Gender"
V2 <- "Hand"

MyT2 <- table(MyData[[V1]], MyData[[V2]])


[1]: 
https://stackoverflow.com/questions/18222286/dynamically-select-data-frame-columns-using-and-a-vector-of-column-names

[2]: 
https://stackoverflow.com/questions/1169456/the-difference-between-bracket-and-double-bracket-for-accessing-the-el


Hope this helps,

Rui Barradas


?s 21:48 de 27/12/20, Jim Lemon escreveu:
> Sorry, Bert, I also forgot to copy to the list.
> 
> Hi Seyet Ali,
> If you have created the data frame, you probably know that "Gender",
> "Hand" and "Gr" are the names of the vectors of values that are joined
> in the data frame "MyData". You now wish to change those names. I
> don't know why you would change the names to obscure ones like "V1",
> but I suggest a look at the "names" function. The answer to your
> question should now be clear to you.
> 
> Jim
> 
> On Mon, Dec 28, 2020 at 8:47 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Seyet Ali,
>> If you have created the data frame, you probably know that "Gender",
>> "Hand" and "Gr" are the names of the vectors of values that are joined
>> in the data frame "MyData". You now wish to change those names. I
>> don't know why you would change the names to obscure ones like "V1",
>> but I suggest a look at the "names" function. The answer to your
>> question should now be clear to you.
>>
>> Jim
>>
>> On Mon, Dec 28, 2020 at 7:25 AM Seyit Ali KAYIS
>> <seyitali.kayis at ibu.edu.tr> wrote:
>>>
>>> Dear R users,
>>>
>>>   ?
>>>
>>> I have a data frame as below. In part 1, I have created a table for Gender and Hand, performed Chi-Square test and made graph using ggplot.
>>>
>>>   ?
>>>
>>> I want to replace the original variable names (Gender and Hand) with V1 and V2 and to be able to perform those things again as in #part 2. Is there a way to be able to replace the original names?
>>>
>>>   ?
>>>
>>> Any help is deeply appreciated
>>>
>>>   ?
>>>
>>> Kind Regards
>>>
>>>   ?
>>>
>>> Seyit Ali
>>>
>>>   ?
>>>
>>> #############################################################################
>>>
>>>   ?
>>>
>>> MyData<-data.frame("Gender" = c("F",     "F",        "F",        "F",        "M",      "M",              "M",      "M",      "M",      "M",      "F",        "F"),
>>>
>>>                     "Hand" = c("R",           "R",        "L",        "L",        "R",        "R",        "L",              "L",        "R",        "R",        "L",        "L"),
>>>
>>>                     "Gr" = c(1,      2,           1,           2,           1,           2,           1,           2,              1,           2,           1,           2) )
>>>
>>>
>>>
>>> MyData <- within(MyData, {
>>>
>>>    Gender  <- factor(Gender)
>>>
>>>    Hand <- factor(Hand)
>>>
>>>    Gr   <- factor(Gr)
>>>
>>> }
>>>
>>> )
>>>
>>>   ?
>>>
>>> str(MyData)
>>>
>>>   ?
>>>
>>> library(ggplot2)
>>>
>>>   ?
>>>
>>> #################     Part 1  #########################################
>>>
>>>   ?
>>>
>>> MyT <- table(MyData$Gender, MyData$Hand)
>>>
>>> print(MyT)
>>>
>>>   ?
>>>
>>> MyChi<- chisq.test(MyT)
>>>
>>> print(MyChi)
>>>
>>> dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))
>>>
>>> name2<- c("Gender", "Hand", "Frequency")
>>>
>>> names(dMyT) <- name2
>>>
>>>   ?
>>>
>>> ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) +
>>>
>>>      geom_bar(position="dodge", stat="identity")
>>>
>>>   ?
>>>
>>> #################  Part 2   ################
>>>
>>>   ?
>>>
>>> # I want to be able to pass Gender and Hand as V1 and V2 , respectively to
>>>
>>> # table, Chi-Square test and ggplot
>>>
>>>   ?
>>>
>>> V1 <- "Gender"
>>>
>>> V2 <- "Hand"
>>>
>>>   ?
>>>
>>> MyT2 <- table(MyData$V1, MyData$V2)
>>>
>>>   ?
>>>
>>> print(MyT)
>>>
>>>   ?
>>>
>>> MyChi<- chisq.test(MyT)
>>>
>>> print(MyChi)
>>>
>>> dMyT <- data.frame(as.table(as.matrix(table(MyData$V1, MyData$V2, useNA = "ifany"))))
>>>
>>> name2<- c(V1, V2, "Frequency")
>>>
>>> names(dMyT) <- name2
>>>
>>>   ?
>>>
>>> ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) +
>>>
>>>      geom_bar(position="dodge", stat="identity")
>>>
>>>   ?
>>>
>>>   ?
>>>
>>>   ?
>>>
>>>   ?
>>>
>>> ----------------------------------------------------
>>>
>>> Dr. Seyit Ali KAYIS
>>>
>>> Bolu Abant Izzet Baysal University, Faculty of Medicine
>>>
>>> Department of Biostatistics and Medical Informatics
>>>
>>> Bolu, Turkey
>>>
>>>
>>>
>>>   <mailto:s_a_kayis at yahoo.com> s_a_kayis at yahoo.com,  <mailto:s_a_kayis at hotmail.com> s_a_kayis at hotmail.com
>>>
>>> Tel: +90 374 254 30 32 Mobile: +90 535 587 1139
>>>
>>>
>>>
>>> Greetings from Bolu, Turkey
>>>
>>> ------------------------------------------------------
>>>
>>>   ?
>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@ri@eii@_ciriiio m@iii@g oii iibero@it  Mon Dec 28 13:54:25 2020
From: m@ri@eii@_ciriiio m@iii@g oii iibero@it (m@ri@eii@_ciriiio m@iii@g oii iibero@it)
Date: Mon, 28 Dec 2020 13:54:25 +0100 (CET)
Subject: [R] Interpreting coefficient in selection and outcome Heckman
 models in sampleSelection
Message-ID: <2123327297.541879.1609160065199@mail1.libero.it>

Dear Arne,

I have just read the exchange of messages with Mark Bulling.I was wondering if you have discovered/developed a function to calculate the marginal effects of the selection and outcome equations (sampleSelection).



Thank you

Marinella
	[[alternative HTML version deleted]]


From @ey|t@||@k@y|@ @end|ng |rom |bu@edu@tr  Mon Dec 28 19:31:59 2020
From: @ey|t@||@k@y|@ @end|ng |rom |bu@edu@tr (Seyit Ali KAYIS)
Date: Mon, 28 Dec 2020 21:31:59 +0300
Subject: [R] Passing variable name
In-Reply-To: <CAGxFJbTCJ+_renpxXadZU+ePLNchAbjfLiQgxP48aNKgAsShZA@mail.gmail.com>
References: <000001d6dc8d$8793d400$96bb7c00$@ibu.edu.tr>
 <CAGxFJbTCJ+_renpxXadZU+ePLNchAbjfLiQgxP48aNKgAsShZA@mail.gmail.com>
Message-ID: <006b01d6dd47$baf6c7c0$30e45740$@ibu.edu.tr>

Hi Bert, 

 

Thanks a lot for informing me regarding the html format of my email. 

 

I also would like to thank to Erdogan CEVHER and Jim LEMON for their kind reply/suggestions. Yes I am aware of names function in R which is not the one I am looking for in here. Let me try to explain in another way.

 

The below part includes data generation, making cross-tab, Chi-Squared test and bar plot through ggplot. 

 

#######################################################################

MyData<-data.frame("Gender" = c("F", "F", "F", "F", "M", "M", "M", "M", "M",     "M", "F", "F"),

                   "Hand" = c("R",   "R", "L", "L", "R", "R", "L", "L", "R",     "R", "L", "L"), 

                   "Gr" = c(1,  2,   1,   2,   1,   2,   1,   2,   1,   2,     1,   2) )



MyData <- within(MyData, {

  Gender  <- factor(Gender)

  Hand <- factor(Hand)

  Gr   <- factor(Gr)

}

)



str(MyData)



library(ggplot2)

  

#################     Part 1   #########################################



MyT <- table(MyData$Gender, MyData$Hand)

print(MyT)



MyChi<- chisq.test(MyT)

print(MyChi)



dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))



name2<- c("Gender", "Hand", "Frequency")

names(dMyT) <- name2



ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) +

        geom_bar(position="dodge", stat="identity")



###############################################



Let?s say I have hundreds of variables (e.g SNP data). By using above codes I can perform what I need. However , I need to copy/paste variable name(s) for making table, Chi-Square test, and ggplot. This increase the chance of incorrectly copying/pasting variable name(s). What I can do is define variable name(s) earlier and pass that names to making table, Chi-Square test, and ggplot part. I believe there is a way to do it. I tried ?paste? function (as below), but it did not work either.



Any comment/help is deeply appreciated.



Kind Regards



Seyit Ali



##############################################

V1 <- "Gender"

V2 <- "Hand"



MyT2 <- table(paste('MyData$',V1), paste('MyData$',V2) )

print(MyT)



MyChi<- chisq.test(MyT)

print(MyChi)



dMyT <- data.frame(as.table(as.matrix(table(paste('MyData$',V1), paste('MyData$',V2), useNA = "ifany"))))

name2<- c(V1, V2, "Frequency")

names(dMyT) <- name2



ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) +

     geom_bar(position="dodge", stat="identity")



#################################################









From: Bert Gunter [mailto:bgunter.4567 at gmail.com] 
Sent: Monday, 28 December 2020 12:08 AM
To: seyitali.kayis at ibu.edu.tr
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Passing variable name



This is a *plain text* list. As you can see from the included text that I received,  the HTML version that you sent was somewhat mangled by the server. I do not know whether or not enough got through for you to get a helpful reply, but if not, re-send *to the list, not me* in *plain text*.  




Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )





On Sun, Dec 27, 2020 at 12:25 PM Seyit Ali KAYIS <seyitali.kayis at ibu.edu.tr <mailto:seyitali.kayis at ibu.edu.tr> > wrote:

Dear R users,

 ?

I have a data frame as below. In part 1, I have created a table for Gender and Hand, performed Chi-Square test and made graph using ggplot.

 ?

I want to replace the original variable names (Gender and Hand) with V1 and V2 and to be able to perform those things again as in #part 2. Is there a way to be able to replace the original names?

 ?

Any help is deeply appreciated

 ?

Kind Regards

 ?

Seyit Ali 

 ?

#############################################################################

 ?

MyData<-data.frame("Gender" = c("F",     "F",        "F",        "F",        "M",      "M",              "M",      "M",      "M",      "M",      "F",        "F"),

                   "Hand" = c("R",           "R",        "L",        "L",        "R",        "R",        "L",              "L",        "R",        "R",        "L",        "L"), 

                   "Gr" = c(1,      2,           1,           2,           1,           2,           1,           2,              1,           2,           1,           2) )



MyData <- within(MyData, {

  Gender  <- factor(Gender)

  Hand <- factor(Hand)

  Gr   <- factor(Gr)

}

)

 ?

str(MyData)

 ?

library(ggplot2)

 ?

#################     Part 1  #########################################

 ?

MyT <- table(MyData$Gender, MyData$Hand)

print(MyT)

 ?

MyChi<- chisq.test(MyT)

print(MyChi)

dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))

name2<- c("Gender", "Hand", "Frequency")                                           

names(dMyT) <- name2

 ?

ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) + 

    geom_bar(position="dodge", stat="identity")

 ?

#################  Part 2   ################

 ?

# I want to be able to pass Gender and Hand as V1 and V2 , respectively to

# table, Chi-Square test and ggplot

 ?

V1 <- "Gender" 

V2 <- "Hand"

 ?

MyT2 <- table(MyData$V1, MyData$V2)

 ?

print(MyT)

 ?

MyChi<- chisq.test(MyT)

print(MyChi)

dMyT <- data.frame(as.table(as.matrix(table(MyData$V1, MyData$V2, useNA = "ifany"))))

name2<- c(V1, V2, "Frequency")                                           

names(dMyT) <- name2

 ?

ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) + 

    geom_bar(position="dodge", stat="identity")

 ?

 ?

 ?

 ?

----------------------------------------------------

Dr. Seyit Ali KAYIS

Bolu Abant Izzet Baysal University, Faculty of Medicine

Department of Biostatistics and Medical Informatics

Bolu, Turkey



 <mailto:s_a_kayis at yahoo.com <mailto:s_a_kayis at yahoo.com> > s_a_kayis at yahoo.com <mailto:s_a_kayis at yahoo.com> ,  <mailto:s_a_kayis at hotmail.com <mailto:s_a_kayis at hotmail.com> > s_a_kayis at hotmail.com <mailto:s_a_kayis at hotmail.com> 

Tel: +90 374 254 30 32 Mobile: +90 535 587 1139



Greetings from Bolu, Turkey

------------------------------------------------------ 

 ?


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Dec 28 19:47:04 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 28 Dec 2020 18:47:04 +0000
Subject: [R] Passing variable name
In-Reply-To: <006b01d6dd47$baf6c7c0$30e45740$@ibu.edu.tr>
References: <000001d6dc8d$8793d400$96bb7c00$@ibu.edu.tr>
 <CAGxFJbTCJ+_renpxXadZU+ePLNchAbjfLiQgxP48aNKgAsShZA@mail.gmail.com>
 <006b01d6dd47$baf6c7c0$30e45740$@ibu.edu.tr>
Message-ID: <7f215b2e-9ad7-b15a-03d8-ee741c1e4f35@sapo.pt>

Hello,

In my previous post I had meant something like the following.
The two important parts are the use of `[[` in table() and the use of 
get() in the ggplot call.


MyData<-data.frame("Gender" = c("F", "F", "F", "F", "M", "M", "M", "M", 
"M",     "M", "F", "F"),
                    "Hand" = c("R",   "R", "L", "L", "R", "R", "L", "L", 
"R",     "R", "L", "L"),
                    "Gr" = c(1,  2,   1,   2,   1,   2,   1,   2,   1, 
2,     1,   2) )

MyData <- within(MyData, {
   Gender  <- factor(Gender)
   Hand <- factor(Hand)
   Gr   <- factor(Gr)
})

V1 <- "Gender"
V2 <- "Hand"

MyT2 <- table(MyData[[V1]], MyData[[V2]])
MyT2

MyChi <- chisq.test(MyT2)
MyChi

name2 <- c(V1, V2, "Frequency")
dMyT <- as.data.frame(MyT2)
names(dMyT) <- name2

library(ggplot2)

ggplot(data = na.omit(dMyT), aes(get(V1), Frequency, fill = get(V2))) +
   geom_bar(position = "dodge", stat = "identity") +
   labs(x = V1, fill = V2)


Is this what you want?

Hope this helps,

Rui Barradas

?s 18:31 de 28/12/20, Seyit Ali KAYIS escreveu:
> Hi Bert,
> 
>   
> 
> Thanks a lot for informing me regarding the html format of my email.
> 
>   
> 
> I also would like to thank to Erdogan CEVHER and Jim LEMON for their kind reply/suggestions. Yes I am aware of names function in R which is not the one I am looking for in here. Let me try to explain in another way.
> 
>   
> 
> The below part includes data generation, making cross-tab, Chi-Squared test and bar plot through ggplot.
> 
>   
> 
> #######################################################################
> 
> MyData<-data.frame("Gender" = c("F", "F", "F", "F", "M", "M", "M", "M", "M",     "M", "F", "F"),
> 
>                     "Hand" = c("R",   "R", "L", "L", "R", "R", "L", "L", "R",     "R", "L", "L"),
> 
>                     "Gr" = c(1,  2,   1,   2,   1,   2,   1,   2,   1,   2,     1,   2) )
> 
> 
> 
> MyData <- within(MyData, {
> 
>    Gender  <- factor(Gender)
> 
>    Hand <- factor(Hand)
> 
>    Gr   <- factor(Gr)
> 
> }
> 
> )
> 
> 
> 
> str(MyData)
> 
> 
> 
> library(ggplot2)
> 
>    
> 
> #################     Part 1   #########################################
> 
> 
> 
> MyT <- table(MyData$Gender, MyData$Hand)
> 
> print(MyT)
> 
> 
> 
> MyChi<- chisq.test(MyT)
> 
> print(MyChi)
> 
> 
> 
> dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))
> 
> 
> 
> name2<- c("Gender", "Hand", "Frequency")
> 
> names(dMyT) <- name2
> 
> 
> 
> ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) +
> 
>          geom_bar(position="dodge", stat="identity")
> 
> 
> 
> ###############################################
> 
> 
> 
> Let?s say I have hundreds of variables (e.g SNP data). By using above codes I can perform what I need. However , I need to copy/paste variable name(s) for making table, Chi-Square test, and ggplot. This increase the chance of incorrectly copying/pasting variable name(s). What I can do is define variable name(s) earlier and pass that names to making table, Chi-Square test, and ggplot part. I believe there is a way to do it. I tried ?paste? function (as below), but it did not work either.
> 
> 
> 
> Any comment/help is deeply appreciated.
> 
> 
> 
> Kind Regards
> 
> 
> 
> Seyit Ali
> 
> 
> 
> ##############################################
> 
> V1 <- "Gender"
> 
> V2 <- "Hand"
> 
> 
> 
> MyT2 <- table(paste('MyData$',V1), paste('MyData$',V2) )
> 
> print(MyT)
> 
> 
> 
> MyChi<- chisq.test(MyT)
> 
> print(MyChi)
> 
> 
> 
> dMyT <- data.frame(as.table(as.matrix(table(paste('MyData$',V1), paste('MyData$',V2), useNA = "ifany"))))
> 
> name2<- c(V1, V2, "Frequency")
> 
> names(dMyT) <- name2
> 
> 
> 
> ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) +
> 
>       geom_bar(position="dodge", stat="identity")
> 
> 
> 
> #################################################
> 
> 
> 
> 
> 
> 
> 
> 
> 
> From: Bert Gunter [mailto:bgunter.4567 at gmail.com]
> Sent: Monday, 28 December 2020 12:08 AM
> To: seyitali.kayis at ibu.edu.tr
> Cc: R-help <r-help at r-project.org>
> Subject: Re: [R] Passing variable name
> 
> 
> 
> This is a *plain text* list. As you can see from the included text that I received,  the HTML version that you sent was somewhat mangled by the server. I do not know whether or not enough got through for you to get a helpful reply, but if not, re-send *to the list, not me* in *plain text*.
> 
> 
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> 
> 
> 
> On Sun, Dec 27, 2020 at 12:25 PM Seyit Ali KAYIS <seyitali.kayis at ibu.edu.tr <mailto:seyitali.kayis at ibu.edu.tr> > wrote:
> 
> Dear R users,
> 
>   ?
> 
> I have a data frame as below. In part 1, I have created a table for Gender and Hand, performed Chi-Square test and made graph using ggplot.
> 
>   ?
> 
> I want to replace the original variable names (Gender and Hand) with V1 and V2 and to be able to perform those things again as in #part 2. Is there a way to be able to replace the original names?
> 
>   ?
> 
> Any help is deeply appreciated
> 
>   ?
> 
> Kind Regards
> 
>   ?
> 
> Seyit Ali
> 
>   ?
> 
> #############################################################################
> 
>   ?
> 
> MyData<-data.frame("Gender" = c("F",     "F",        "F",        "F",        "M",      "M",              "M",      "M",      "M",      "M",      "F",        "F"),
> 
>                     "Hand" = c("R",           "R",        "L",        "L",        "R",        "R",        "L",              "L",        "R",        "R",        "L",        "L"),
> 
>                     "Gr" = c(1,      2,           1,           2,           1,           2,           1,           2,              1,           2,           1,           2) )
> 
> 
> 
> MyData <- within(MyData, {
> 
>    Gender  <- factor(Gender)
> 
>    Hand <- factor(Hand)
> 
>    Gr   <- factor(Gr)
> 
> }
> 
> )
> 
>   ?
> 
> str(MyData)
> 
>   ?
> 
> library(ggplot2)
> 
>   ?
> 
> #################     Part 1  #########################################
> 
>   ?
> 
> MyT <- table(MyData$Gender, MyData$Hand)
> 
> print(MyT)
> 
>   ?
> 
> MyChi<- chisq.test(MyT)
> 
> print(MyChi)
> 
> dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))
> 
> name2<- c("Gender", "Hand", "Frequency")
> 
> names(dMyT) <- name2
> 
>   ?
> 
> ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) +
> 
>      geom_bar(position="dodge", stat="identity")
> 
>   ?
> 
> #################  Part 2   ################
> 
>   ?
> 
> # I want to be able to pass Gender and Hand as V1 and V2 , respectively to
> 
> # table, Chi-Square test and ggplot
> 
>   ?
> 
> V1 <- "Gender"
> 
> V2 <- "Hand"
> 
>   ?
> 
> MyT2 <- table(MyData$V1, MyData$V2)
> 
>   ?
> 
> print(MyT)
> 
>   ?
> 
> MyChi<- chisq.test(MyT)
> 
> print(MyChi)
> 
> dMyT <- data.frame(as.table(as.matrix(table(MyData$V1, MyData$V2, useNA = "ifany"))))
> 
> name2<- c(V1, V2, "Frequency")
> 
> names(dMyT) <- name2
> 
>   ?
> 
> ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) +
> 
>      geom_bar(position="dodge", stat="identity")
> 
>   ?
> 
>   ?
> 
>   ?
> 
>   ?
> 
> ----------------------------------------------------
> 
> Dr. Seyit Ali KAYIS
> 
> Bolu Abant Izzet Baysal University, Faculty of Medicine
> 
> Department of Biostatistics and Medical Informatics
> 
> Bolu, Turkey
> 
> 
> 
>   <mailto:s_a_kayis at yahoo.com <mailto:s_a_kayis at yahoo.com> > s_a_kayis at yahoo.com <mailto:s_a_kayis at yahoo.com> ,  <mailto:s_a_kayis at hotmail.com <mailto:s_a_kayis at hotmail.com> > s_a_kayis at hotmail.com <mailto:s_a_kayis at hotmail.com>
> 
> Tel: +90 374 254 30 32 Mobile: +90 535 587 1139
> 
> 
> 
> Greetings from Bolu, Turkey
> 
> ------------------------------------------------------
> 
>   ?
> 
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @v|gro@@ @end|ng |rom ver|zon@net  Mon Dec 28 19:51:31 2020
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 28 Dec 2020 13:51:31 -0500
Subject: [R] Passing variable name
In-Reply-To: <006b01d6dd47$baf6c7c0$30e45740$@ibu.edu.tr>
References: <000001d6dc8d$8793d400$96bb7c00$@ibu.edu.tr>
 <CAGxFJbTCJ+_renpxXadZU+ePLNchAbjfLiQgxP48aNKgAsShZA@mail.gmail.com>
 <006b01d6dd47$baf6c7c0$30e45740$@ibu.edu.tr>
Message-ID: <00c301d6dd4a$7531e190$5f95a4b0$@verizon.net>

There are endless ways to do what you want, Seyit. If you wish to remain in base R, using the names function on the left-hand side changes the names as in:

names(something) <- c("new", "names")

And in general, you may want to learn how to use an alternate set of methods that work well with ggplot in the tidyverse such as select() that lets you choose which columns of a data.frame (or tibble) to keep while optionally renaming them, and the rename() function and the mutate() function and ways to combine them to do lots of work. They also allow you to not use within() the way you are doing.

It is amusing you want names like V1. Indeed some R functions default to such names.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Seyit Ali KAYIS
Sent: Monday, December 28, 2020 1:32 PM
To: 'Bert Gunter' <bgunter.4567 at gmail.com>; 'R-help' <r-help at r-project.org>; erdogancevher at gmail.com; drjimlemon at gmail.com
Subject: Re: [R] Passing variable name

Hi Bert, 

 

Thanks a lot for informing me regarding the html format of my email. 

 

I also would like to thank to Erdogan CEVHER and Jim LEMON for their kind reply/suggestions. Yes I am aware of names function in R which is not the one I am looking for in here. Let me try to explain in another way.

 

The below part includes data generation, making cross-tab, Chi-Squared test and bar plot through ggplot. 

 

#######################################################################

MyData<-data.frame("Gender" = c("F", "F", "F", "F", "M", "M", "M", "M", "M",     "M", "F", "F"),

                   "Hand" = c("R",   "R", "L", "L", "R", "R", "L", "L", "R",     "R", "L", "L"), 

                   "Gr" = c(1,  2,   1,   2,   1,   2,   1,   2,   1,   2,     1,   2) )



MyData <- within(MyData, {

  Gender  <- factor(Gender)

  Hand <- factor(Hand)

  Gr   <- factor(Gr)

}

)



str(MyData)



library(ggplot2)

  

#################     Part 1   #########################################



MyT <- table(MyData$Gender, MyData$Hand)

print(MyT)



MyChi<- chisq.test(MyT)

print(MyChi)



dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))



name2<- c("Gender", "Hand", "Frequency")

names(dMyT) <- name2



ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) +

        geom_bar(position="dodge", stat="identity")



###############################################



Let?s say I have hundreds of variables (e.g SNP data). By using above codes I can perform what I need. However , I need to copy/paste variable name(s) for making table, Chi-Square test, and ggplot. This increase the chance of incorrectly copying/pasting variable name(s). What I can do is define variable name(s) earlier and pass that names to making table, Chi-Square test, and ggplot part. I believe there is a way to do it. I tried ?paste? function (as below), but it did not work either.



Any comment/help is deeply appreciated.



Kind Regards



Seyit Ali



##############################################

V1 <- "Gender"

V2 <- "Hand"



MyT2 <- table(paste('MyData$',V1), paste('MyData$',V2) )

print(MyT)



MyChi<- chisq.test(MyT)

print(MyChi)



dMyT <- data.frame(as.table(as.matrix(table(paste('MyData$',V1), paste('MyData$',V2), useNA = "ifany"))))

name2<- c(V1, V2, "Frequency")

names(dMyT) <- name2



ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) +

     geom_bar(position="dodge", stat="identity")



#################################################









From: Bert Gunter [mailto:bgunter.4567 at gmail.com] 
Sent: Monday, 28 December 2020 12:08 AM
To: seyitali.kayis at ibu.edu.tr
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Passing variable name



This is a *plain text* list. As you can see from the included text that I received,  the HTML version that you sent was somewhat mangled by the server. I do not know whether or not enough got through for you to get a helpful reply, but if not, re-send *to the list, not me* in *plain text*.  




Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )





On Sun, Dec 27, 2020 at 12:25 PM Seyit Ali KAYIS <seyitali.kayis at ibu.edu.tr <mailto:seyitali.kayis at ibu.edu.tr> > wrote:

Dear R users,

 ?

I have a data frame as below. In part 1, I have created a table for Gender and Hand, performed Chi-Square test and made graph using ggplot.

 ?

I want to replace the original variable names (Gender and Hand) with V1 and V2 and to be able to perform those things again as in #part 2. Is there a way to be able to replace the original names?

 ?

Any help is deeply appreciated

 ?

Kind Regards

 ?

Seyit Ali 

 ?

#############################################################################

 ?

MyData<-data.frame("Gender" = c("F",     "F",        "F",        "F",        "M",      "M",              "M",      "M",      "M",      "M",      "F",        "F"),

                   "Hand" = c("R",           "R",        "L",        "L",        "R",        "R",        "L",              "L",        "R",        "R",        "L",        "L"), 

                   "Gr" = c(1,      2,           1,           2,           1,           2,           1,           2,              1,           2,           1,           2) )



MyData <- within(MyData, {

  Gender  <- factor(Gender)

  Hand <- factor(Hand)

  Gr   <- factor(Gr)

}

)

 ?

str(MyData)

 ?

library(ggplot2)

 ?

#################     Part 1  #########################################

 ?

MyT <- table(MyData$Gender, MyData$Hand)

print(MyT)

 ?

MyChi<- chisq.test(MyT)

print(MyChi)

dMyT <- data.frame(as.table(as.matrix(table(MyData$Gender, MyData$Hand, useNA = "ifany"))))

name2<- c("Gender", "Hand", "Frequency")                                           

names(dMyT) <- name2

 ?

ggplot(data = na.omit(dMyT), aes(fill=Hand, y=Frequency, x=Gender)) + 

    geom_bar(position="dodge", stat="identity")

 ?

#################  Part 2   ################

 ?

# I want to be able to pass Gender and Hand as V1 and V2 , respectively to

# table, Chi-Square test and ggplot

 ?

V1 <- "Gender" 

V2 <- "Hand"

 ?

MyT2 <- table(MyData$V1, MyData$V2)

 ?

print(MyT)

 ?

MyChi<- chisq.test(MyT)

print(MyChi)

dMyT <- data.frame(as.table(as.matrix(table(MyData$V1, MyData$V2, useNA = "ifany"))))

name2<- c(V1, V2, "Frequency")                                           

names(dMyT) <- name2

 ?

ggplot(data = na.omit(dMyT), aes(fill=V2, y=Frequency, x=V1)) + 

    geom_bar(position="dodge", stat="identity")

 ?

 ?

 ?

 ?

----------------------------------------------------

Dr. Seyit Ali KAYIS

Bolu Abant Izzet Baysal University, Faculty of Medicine

Department of Biostatistics and Medical Informatics

Bolu, Turkey



 <mailto:s_a_kayis at yahoo.com <mailto:s_a_kayis at yahoo.com> > s_a_kayis at yahoo.com <mailto:s_a_kayis at yahoo.com> ,  <mailto:s_a_kayis at hotmail.com <mailto:s_a_kayis at hotmail.com> > s_a_kayis at hotmail.com <mailto:s_a_kayis at hotmail.com> 

Tel: +90 374 254 30 32 Mobile: +90 535 587 1139



Greetings from Bolu, Turkey

------------------------------------------------------ 

 ?


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From rque@t|on2020 @end|ng |rom gm@||@com  Mon Dec 28 21:56:20 2020
From: rque@t|on2020 @end|ng |rom gm@||@com (Anbu A)
Date: Mon, 28 Dec 2020 15:56:20 -0500
Subject: [R] Replace double slashes with single backslash
Message-ID: <CABSzg8B_BYUDqbK4RifeSH=OCEKtAf0qDd5O1KkBmzCnTuBf5A@mail.gmail.com>

Hi All,
I am able to replace "r" with "x" for the word "Users" just for a test run.
*Code: newlist %>% mutate(.,new_col=str_replace(fpath,"r","x"))  *- this
works fine
But when I try to replace "\\" with "\".
*newlist %>% mutate(.,new_col=str_replace(fpath,"\\","\")) *, I get a
prompt ">" to complete the code. Not working. There is something on
backslashes to be "masked".
Any help would be appreciated.

                       fpath                         new_col
1 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
2 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
3 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
4 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
5 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\

Thanks,
Anbu.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Dec 28 22:19:35 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 28 Dec 2020 13:19:35 -0800
Subject: [R] Replace double slashes with single backslash
In-Reply-To: <CABSzg8B_BYUDqbK4RifeSH=OCEKtAf0qDd5O1KkBmzCnTuBf5A@mail.gmail.com>
References: <CABSzg8B_BYUDqbK4RifeSH=OCEKtAf0qDd5O1KkBmzCnTuBf5A@mail.gmail.com>
Message-ID: <CAGxFJbT1LTOdDTFovhsTVYXi3VLEh64Ga352CGXEmWebb1c77A@mail.gmail.com>

"\" is an escape in R. See ?Quotes for details.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Dec 28, 2020 at 12:56 PM Anbu A <rquestion2020 at gmail.com> wrote:

> Hi All,
> I am able to replace "r" with "x" for the word "Users" just for a test run.
> *Code: newlist %>% mutate(.,new_col=str_replace(fpath,"r","x"))  *- this
> works fine
> But when I try to replace "\\" with "\".
> *newlist %>% mutate(.,new_col=str_replace(fpath,"\\","\")) *, I get a
> prompt ">" to complete the code. Not working. There is something on
> backslashes to be "masked".
> Any help would be appreciated.
>
>                        fpath                         new_col
> 1 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> 2 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> 3 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> 4 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> 5 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
>
> Thanks,
> Anbu.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jho|tm@n @end|ng |rom gm@||@com  Tue Dec 29 00:27:00 2020
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Mon, 28 Dec 2020 15:27:00 -0800
Subject: [R] Replace double slashes with single backslash
In-Reply-To: <CAGxFJbT1LTOdDTFovhsTVYXi3VLEh64Ga352CGXEmWebb1c77A@mail.gmail.com>
References: <CABSzg8B_BYUDqbK4RifeSH=OCEKtAf0qDd5O1KkBmzCnTuBf5A@mail.gmail.com>
 <CAGxFJbT1LTOdDTFovhsTVYXi3VLEh64Ga352CGXEmWebb1c77A@mail.gmail.com>
Message-ID: <CAAxdm-4ucBJpYrpDXmzojeZyURj5XTEJBcyuffFQjKJYj6BHdg@mail.gmail.com>

Why do you want to replace '\\' with '\' in the file names?  They are
actually single '\' in the character string, but are printing out as '\\'.
see example below:

    > x <- 'a\\b'
    > x
    [1] "a\\b"
    > nchar(x)
    [1] 3

Jim Holtman
*Data Munger Guru*


*What is the problem that you are trying to solve?Tell me what you want to
do, not how you want to do it.*


On Mon, Dec 28, 2020 at 1:20 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> "\" is an escape in R. See ?Quotes for details.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Dec 28, 2020 at 12:56 PM Anbu A <rquestion2020 at gmail.com> wrote:
>
> > Hi All,
> > I am able to replace "r" with "x" for the word "Users" just for a test
> run.
> > *Code: newlist %>% mutate(.,new_col=str_replace(fpath,"r","x"))  *- this
> > works fine
> > But when I try to replace "\\" with "\".
> > *newlist %>% mutate(.,new_col=str_replace(fpath,"\\","\")) *, I get a
> > prompt ">" to complete the code. Not working. There is something on
> > backslashes to be "masked".
> > Any help would be appreciated.
> >
> >                        fpath                         new_col
> > 1 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> > 2 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> > 3 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> > 4 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> > 5 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
> >
> > Thanks,
> > Anbu.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From k|ng @end|ng |rom but|er@edu  Mon Dec 28 18:03:29 2020
From: k|ng @end|ng |rom but|er@edu (King, Barry)
Date: Mon, 28 Dec 2020 17:03:29 +0000
Subject: [R] Error: Discrete value supplied to continuous variable
Message-ID: <DM6PR05MB48418D561D4603D5321D49C5B3D90@DM6PR05MB4841.namprd05.prod.outlook.com>

I am attempting to convert an original schedule to longest operating time next schedule then create waterfall plot. I am having trouble with the plot. I get an Error: Discrete vale supplied to continuous variable message. My example code appears below.

library(tidyverse)
library(ggplot2)

# original schedule of four jobs
df <- data.frame(job=c("A","B","C","D"),
                 original_begin=c("2021-01-05 07:00:00", "2021-05-01 08:30:00",
                                 "2021-05-01 10:30:00", "2021-05-01 14:00:00"),
                 original_end=c("2021-01-05 08:30:00", "2021-05-01 10:30:00",
                               "2021-05-01 14:00:00", "2021-05-01 16:00:00"))

# represent date/times as POSIXct objects
df$original_begin <- as.POSIXct(df$original_begin)
df$original_end <- as.POSIXct(df$original_end)

# calculate span, length of time each job takes
df$span <- as.numeric(difftime(df$original_end,df$original_begin))

# sort by span descending
df <- arrange(df,-span)

# assign ID now that df is correcly sorted
df$ID <- as.numeric(rownames(df))

# calculate ymin and ymax
df$ymin[1] <- min(df$original_begin)
for (i in 1:(nrow(df)-1)) {
  df$ymax[i] <- df$ymin[i] + df$span[i]
  df$ymin[i+1] <- df$ymax[i]
}
df$ymax[nrow(df)] <- df$ymin[nrow(df)] +
  df$span[nrow(df)]

# following is loosely based on tutorial found at
# https://www.stomperusa.com/2019/05/27/basic-waterfall-graphs-in-r/

# set up plot canvas, longest job first (see x=reorder(job,-span))
g <-df %>%
  ggplot(aes(x=reorder(job,-span), y=span, fill=factor(job))) +
  theme_classic() +
  theme(legend.title=element_blank())+
  theme(legend.position = "right", panel.grid = element_blank(),
        axis.text.x = element_text(angle = 90, vjust = 0.5)) +
  labs(y = "Hours", x = "Job")
g  # seems to be working as expected through here

w <- 0.5  # use to set width of bars

# attempt to create waterfall plot
g <- g +
  geom_rect(aes(xmin = ID - w/2,
                xmax = ID + w/2,
                ymin = ymin,
                ymax = ymax,
                fill = factor(job)), alpha=0.25)
g

Any assistance is appreciated


Sent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10


	[[alternative HTML version deleted]]


From jho|tm@n @end|ng |rom gm@||@com  Tue Dec 29 03:21:37 2020
From: jho|tm@n @end|ng |rom gm@||@com (jim holtman)
Date: Mon, 28 Dec 2020 18:21:37 -0800
Subject: [R] Error: Discrete value supplied to continuous variable
In-Reply-To: <DM6PR05MB48418D561D4603D5321D49C5B3D90@DM6PR05MB4841.namprd05.prod.outlook.com>
References: <DM6PR05MB48418D561D4603D5321D49C5B3D90@DM6PR05MB4841.namprd05.prod.outlook.com>
Message-ID: <CAAxdm-7fy6VaGZpRGPbTsvT5x+x4FAitYfYNbJo_2hsP-dKpig@mail.gmail.com>

You setup your X & Y axis incorrectly.  in your call to ggplot you have:

g <-df %>%
  ggplot(aes(x=reorder(job,-span), y=span, fill=factor(job))) +

but in your call to geom_rect you are using a completely different set
of variables that is causing the error:

 geom_rect(aes(xmin = ID - w/2,
                xmax = ID + w/2,
                ymin = ymin,
                ymax = ymax,
                fill = factor(job)), alpha=0.25)

I changed the call to ggplot to at least have the same variables types
and got a plot out of it; is this what you were expecting:

  ggplot(aes(x=ID, y=ymin, fill=factor(job))) +



Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.


Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.


On Mon, Dec 28, 2020 at 4:33 PM King, Barry <king at butler.edu> wrote:
>
> I am attempting to convert an original schedule to longest operating time next schedule then create waterfall plot. I am having trouble with the plot. I get an Error: Discrete vale supplied to continuous variable message. My example code appears below.
>
> library(tidyverse)
> library(ggplot2)
>
> # original schedule of four jobs
> df <- data.frame(job=c("A","B","C","D"),
>                  original_begin=c("2021-01-05 07:00:00", "2021-05-01 08:30:00",
>                                  "2021-05-01 10:30:00", "2021-05-01 14:00:00"),
>                  original_end=c("2021-01-05 08:30:00", "2021-05-01 10:30:00",
>                                "2021-05-01 14:00:00", "2021-05-01 16:00:00"))
>
> # represent date/times as POSIXct objects
> df$original_begin <- as.POSIXct(df$original_begin)
> df$original_end <- as.POSIXct(df$original_end)
>
> # calculate span, length of time each job takes
> df$span <- as.numeric(difftime(df$original_end,df$original_begin))
>
> # sort by span descending
> df <- arrange(df,-span)
>
> # assign ID now that df is correcly sorted
> df$ID <- as.numeric(rownames(df))
>
> # calculate ymin and ymax
> df$ymin[1] <- min(df$original_begin)
> for (i in 1:(nrow(df)-1)) {
>   df$ymax[i] <- df$ymin[i] + df$span[i]
>   df$ymin[i+1] <- df$ymax[i]
> }
> df$ymax[nrow(df)] <- df$ymin[nrow(df)] +
>   df$span[nrow(df)]
>
> # following is loosely based on tutorial found at
> # https://www.stomperusa.com/2019/05/27/basic-waterfall-graphs-in-r/
>
> # set up plot canvas, longest job first (see x=reorder(job,-span))
> g <-df %>%
>   ggplot(aes(x=reorder(job,-span), y=span, fill=factor(job))) +
>   theme_classic() +
>   theme(legend.title=element_blank())+
>   theme(legend.position = "right", panel.grid = element_blank(),
>         axis.text.x = element_text(angle = 90, vjust = 0.5)) +
>   labs(y = "Hours", x = "Job")
> g  # seems to be working as expected through here
>
> w <- 0.5  # use to set width of bars
>
> # attempt to create waterfall plot
> g <- g +
>   geom_rect(aes(xmin = ID - w/2,
>                 xmax = ID + w/2,
>                 ymin = ymin,
>                 ymax = ymax,
>                 fill = factor(job)), alpha=0.25)
> g
>
> Any assistance is appreciated
>
>
> Sent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rque@t|on2020 @end|ng |rom gm@||@com  Tue Dec 29 05:09:45 2020
From: rque@t|on2020 @end|ng |rom gm@||@com (Anbu A)
Date: Mon, 28 Dec 2020 23:09:45 -0500
Subject: [R] Replace double slashes with single backslash
In-Reply-To: <CAAxdm-4ucBJpYrpDXmzojeZyURj5XTEJBcyuffFQjKJYj6BHdg@mail.gmail.com>
References: <CABSzg8B_BYUDqbK4RifeSH=OCEKtAf0qDd5O1KkBmzCnTuBf5A@mail.gmail.com>
 <CAGxFJbT1LTOdDTFovhsTVYXi3VLEh64Ga352CGXEmWebb1c77A@mail.gmail.com>
 <CAAxdm-4ucBJpYrpDXmzojeZyURj5XTEJBcyuffFQjKJYj6BHdg@mail.gmail.com>
Message-ID: <CABSzg8BkxfmFTvdFRAJ9D1f34vfTiyNi5hZxhovz105N2+m34A@mail.gmail.com>

Thank you, Jim. That clarifies. I am trying to pass this path in a loop and
read the files  associated with the path.
Yes the length is 26 where double quotes are counted as single quotes. Let
me try to read the files using the collected path.

Really appreciate it.

Thanks,
Anbu

On Mon, Dec 28, 2020 at 6:27 PM jim holtman <jholtman at gmail.com> wrote:

> Why do you want to replace '\\' with '\' in the file names?  They are
> actually single '\' in the character string, but are printing out as '\\'.
> see example below:
>
>     > x <- 'a\\b'
>     > x
>     [1] "a\\b"
>     > nchar(x)
>     [1] 3
>
> Jim Holtman
> *Data Munger Guru*
>
>
> *What is the problem that you are trying to solve?Tell me what you want to
> do, not how you want to do it.*
>
>
> On Mon, Dec 28, 2020 at 1:20 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> "\" is an escape in R. See ?Quotes for details.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Mon, Dec 28, 2020 at 12:56 PM Anbu A <rquestion2020 at gmail.com> wrote:
>>
>> > Hi All,
>> > I am able to replace "r" with "x" for the word "Users" just for a test
>> run.
>> > *Code: newlist %>% mutate(.,new_col=str_replace(fpath,"r","x"))  *- this
>> > works fine
>> > But when I try to replace "\\" with "\".
>> > *newlist %>% mutate(.,new_col=str_replace(fpath,"\\","\")) *, I get a
>> > prompt ">" to complete the code. Not working. There is something on
>> > backslashes to be "masked".
>> > Any help would be appreciated.
>> >
>> >                        fpath                         new_col
>> > 1 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
>> > 2 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
>> > 3 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
>> > 4 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
>> > 5 C:\\Users\\Anbu\\Desktop\\sas\\ C:\\Usexs\\Anbu\\Desktop\\sas\\
>> >
>> > Thanks,
>> > Anbu.
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Dec 29 14:51:31 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 29 Dec 2020 14:51:31 +0100
Subject: [R] Error in setting the parameter values of k
Message-ID: <CA+nrPnuspkr_eab6vGyTXXRxz9FTJ9izjBRPHydjqAnT=bVzOQ@mail.gmail.com>

I am using nlr3 'fast nearest neighbor' leaner i.e. fnn

Its parameter is km which has a default value of 1. When I use tuning using
random search, I set the parameter of k as: lower= 0, upper=3

But it gives an error message

Error in self$assert(xs) :
  Assertion on 'xs' failed: k: Element 1 is not >= 1.

I have tried different values but the error remains.

Warm regards

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Dec 29 16:26:17 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 29 Dec 2020 16:26:17 +0100
Subject: [R] Fwd: Error in setting the parameter values of k
In-Reply-To: <CA+nrPnuspkr_eab6vGyTXXRxz9FTJ9izjBRPHydjqAnT=bVzOQ@mail.gmail.com>
References: <CA+nrPnuspkr_eab6vGyTXXRxz9FTJ9izjBRPHydjqAnT=bVzOQ@mail.gmail.com>
Message-ID: <CA+nrPnux_kBqKFEbHV8iYYSGnMPu0CKE6SzMK6gPbVmGybqZBQ@mail.gmail.com>

I am using mlr3 'fast nearest neighbor' leaner i.e. fnn

Its parameter is 'k' which has a default value of 1. When I use tuning
using random search, I set the parameter of k as: lower= 0, upper=3

But it gives an error message

Error in self$assert(xs) :
  Assertion on 'xs' failed: k: Element 1 is not >= 1.

I have tried different values but the error remains.

Warm regards

	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Dec 29 16:50:26 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 29 Dec 2020 15:50:26 +0000
Subject: [R] Adding a superscript 6 to a number
Message-ID: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>

Colleagues,

I would like to create a number (stored in the variable x) to the number with the exponent of, i.e. the number to the sixth power. The code I have tried, pasted below does not work.

# create plot
plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
PNotSusp=0.69
# Create a string containing the base and exponent.
x <- 0.95123
# Convert the base to text and add the exponent of 6
mylab <- expression(paste(" ",character(x)^6))
# Add the text to the plot
text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))

I hope someone can show me how to create the text string I need.

Thank you,
John

John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)



From m||net@ @end|ng |rom tut@@|o  Tue Dec 29 16:50:40 2020
From: m||net@ @end|ng |rom tut@@|o (T. A. Milne)
Date: Tue, 29 Dec 2020 16:50:40 +0100 (CET)
Subject: [R] Fwd: Error in setting the parameter values of k
Message-ID: <MPjANgW--3-2@tuta.io>

I am using mlr3 'fast nearest neighbor' leaner i.e. fnnIts parameter is 'k' which has a default value of 1. When I use tuningusing random search, I set the parameter of k as: lower= 0, upper=3But it gives an error messageError in self$assert(xs) :  Assertion on 'xs' failed: k: Element 1 is not >= 1.I have tried different values but the error remains.Warm regards	[[alternative HTML version deleted]]
I know absolutely nothing about the specific statistical tools being used here, but:? 

In several nearest neighbor routines, the parameter k refers to the number of nearest neighbors to be considered (in some computation).? In that case, k must be at least 1, which is what the cited error message seems to be claiming.? Are you certain that k = 0 is a legitimate setting?


- T. Arthur Milne


From rmh @end|ng |rom temp|e@edu  Tue Dec 29 16:54:22 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 29 Dec 2020 10:54:22 -0500
Subject: [R] [External]  Adding a superscript 6 to a number
In-Reply-To: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <CAGx1TMDSCK4LXUBK72CGrWFO3DToV9MVw9mPxiJBb_OgKHD3yQ@mail.gmail.com>

paste() is the problem.  don?t use paste with expression()

On Tue, Dec 29, 2020 at 10:50 Sorkin, John <jsorkin at som.umaryland.edu>
wrote:

> Colleagues,
>
> I would like to create a number (stored in the variable x) to the number
> with the exponent of, i.e. the number to the sixth power. The code I have
> tried, pasted below does not work.
>
> # create plot
> plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
> PNotSusp=0.69
> # Create a string containing the base and exponent.
> x <- 0.95123
> # Convert the base to text and add the exponent of 6
> mylab <- expression(paste(" ",character(x)^6))
> # Add the text to the plot
> text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
>
> I hope someone can show me how to create the text string I need.
>
> Thank you,
> John
>
> John David Sorkin M.D., Ph.D.
> Professor of Medicine
> Chief, Biostatistics and Informatics
> University of Maryland School of Medicine Division of Gerontology and
> Geriatric Medicine
> Baltimore VA Medical Center
> 10 North Greene Street
> <https://www.google.com/maps/search/10+North+Greene+Street?entry=gmail&source=g>
> GRECC (BT/18/GR)
> Baltimore, MD 21201-1524
> (Phone) 410-605-7119
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Dec 29 16:59:11 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 29 Dec 2020 16:59:11 +0100
Subject: [R] Fwd: Error in setting the parameter values of k
In-Reply-To: <MPjANgW--3-2@tuta.io>
References: <MPjANgW--3-2@tuta.io>
Message-ID: <CA+nrPnu1pp1xJZAYunbjajHYk6QLwvzen4O2fFf36h9=kOmtQQ@mail.gmail.com>

Thank you for your response.

 Are you certain that k = 0 is a legitimate setting?

Since, the default value of k is 1, I wanted to search between the values
of 0 to 3.

Milne, Do you mean I have to provide both the lower and upper bounds
greater than 1 in order to get rid of this error?

On Tue, Dec 29, 2020 at 4:50 PM T. A. Milne <milneta at tuta.io> wrote:

> I am using mlr3 'fast nearest neighbor' leaner i.e. fnnIts parameter is
> 'k' which has a default value of 1. When I use tuningusing random search, I
> set the parameter of k as: lower= 0, upper=3But it gives an error
> messageError in self$assert(xs) :  Assertion on 'xs' failed: k: Element 1
> is not >= 1.I have tried different values but the error remains.Warm
> regards    [[alternative HTML version deleted]]
> I know absolutely nothing about the specific statistical tools being used
> here, but:
>
> In several nearest neighbor routines, the parameter k refers to the number
> of nearest neighbors to be considered (in some computation).  In that case,
> k must be at least 1, which is what the cited error message seems to be
> claiming.  Are you certain that k = 0 is a legitimate setting?
>
>
> - T. Arthur Milne
>
>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Dec 29 17:07:28 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 29 Dec 2020 08:07:28 -0800
Subject: [R] Adding a superscript 6 to a number
In-Reply-To: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <CAGxFJbRCmQZpTid0LkJbDhu4_5ifcdrBu6WHEA9-145n12aCXQ@mail.gmail.com>

Does this do what you want?

plot(0:1, 0:1)
x <- .25
text(.5,.5, labels = bquote(.(x)^6, list(x= x)))


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Dec 29, 2020 at 7:50 AM Sorkin, John <jsorkin at som.umaryland.edu>
wrote:

> Colleagues,
>
> I would like to create a number (stored in the variable x) to the number
> with the exponent of, i.e. the number to the sixth power. The code I have
> tried, pasted below does not work.
>
> # create plot
> plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
> PNotSusp=0.69
> # Create a string containing the base and exponent.
> x <- 0.95123
> # Convert the base to text and add the exponent of 6
> mylab <- expression(paste(" ",character(x)^6))
> # Add the text to the plot
> text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
>
> I hope someone can show me how to create the text string I need.
>
> Thank you,
> John
>
> John David Sorkin M.D., Ph.D.
> Professor of Medicine
> Chief, Biostatistics and Informatics
> University of Maryland School of Medicine Division of Gerontology and
> Geriatric Medicine
> Baltimore VA Medical Center
> 10 North Greene Street
> GRECC (BT/18/GR)
> Baltimore, MD 21201-1524
> (Phone) 410-605-7119
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Tue Dec 29 17:53:41 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Tue, 29 Dec 2020 11:53:41 -0500
Subject: [R] Fwd: Error in setting the parameter values of k
In-Reply-To: <CA+nrPnu1pp1xJZAYunbjajHYk6QLwvzen4O2fFf36h9=kOmtQQ@mail.gmail.com>
References: <MPjANgW--3-2@tuta.io>
 <CA+nrPnu1pp1xJZAYunbjajHYk6QLwvzen4O2fFf36h9=kOmtQQ@mail.gmail.com>
Message-ID: <CAJc=yOEFAGaqKaqAKbbQei7sy2f85j6XhNBAJkEJyVsgmVVv8w@mail.gmail.com>

Likely, yes. Your error message says k must be at least 1, so searching
below 1 is probably your issue.

Also, logically, zero nearest neighbors doesn't seem to make a lot of sense.

Pat

On Tue, Dec 29, 2020 at 11:01 AM Neha gupta <neha.bologna90 at gmail.com>
wrote:

> Thank you for your response.
>
>  Are you certain that k = 0 is a legitimate setting?
>
> Since, the default value of k is 1, I wanted to search between the values
> of 0 to 3.
>
> Milne, Do you mean I have to provide both the lower and upper bounds
> greater than 1 in order to get rid of this error?
>
> On Tue, Dec 29, 2020 at 4:50 PM T. A. Milne <milneta at tuta.io> wrote:
>
> > I am using mlr3 'fast nearest neighbor' leaner i.e. fnnIts parameter is
> > 'k' which has a default value of 1. When I use tuningusing random
> search, I
> > set the parameter of k as: lower= 0, upper=3But it gives an error
> > messageError in self$assert(xs) :  Assertion on 'xs' failed: k: Element 1
> > is not >= 1.I have tried different values but the error remains.Warm
> > regards    [[alternative HTML version deleted]]
> > I know absolutely nothing about the specific statistical tools being used
> > here, but:
> >
> > In several nearest neighbor routines, the parameter k refers to the
> number
> > of nearest neighbors to be considered (in some computation).  In that
> case,
> > k must be at least 1, which is what the cited error message seems to be
> > claiming.  Are you certain that k = 0 is a legitimate setting?
> >
> >
> > - T. Arthur Milne
> >
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Dec 29 18:36:04 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 29 Dec 2020 18:36:04 +0100
Subject: [R] Fwd: Error in setting the parameter values of k
In-Reply-To: <CAJc=yOEFAGaqKaqAKbbQei7sy2f85j6XhNBAJkEJyVsgmVVv8w@mail.gmail.com>
References: <MPjANgW--3-2@tuta.io>
 <CA+nrPnu1pp1xJZAYunbjajHYk6QLwvzen4O2fFf36h9=kOmtQQ@mail.gmail.com>
 <CAJc=yOEFAGaqKaqAKbbQei7sy2f85j6XhNBAJkEJyVsgmVVv8w@mail.gmail.com>
Message-ID: <CA+nrPnsPoUM_HLUJmRGmXT4ou7VXG9uWi3=2JOS_kf36SW=BHA@mail.gmail.com>

Thanks a lot, Milne and Patrick.

I am going to change the values, hopefully the error message will disappear.

Warm regards

On Tue, Dec 29, 2020 at 5:53 PM Patrick (Malone Quantitative) <
malone at malonequantitative.com> wrote:

> Likely, yes. Your error message says k must be at least 1, so searching
> below 1 is probably your issue.
>
> Also, logically, zero nearest neighbors doesn't seem to make a lot of
> sense.
>
> Pat
>
> On Tue, Dec 29, 2020 at 11:01 AM Neha gupta <neha.bologna90 at gmail.com>
> wrote:
>
>> Thank you for your response.
>>
>>  Are you certain that k = 0 is a legitimate setting?
>>
>> Since, the default value of k is 1, I wanted to search between the values
>> of 0 to 3.
>>
>> Milne, Do you mean I have to provide both the lower and upper bounds
>> greater than 1 in order to get rid of this error?
>>
>> On Tue, Dec 29, 2020 at 4:50 PM T. A. Milne <milneta at tuta.io> wrote:
>>
>> > I am using mlr3 'fast nearest neighbor' leaner i.e. fnnIts parameter is
>> > 'k' which has a default value of 1. When I use tuningusing random
>> search, I
>> > set the parameter of k as: lower= 0, upper=3But it gives an error
>> > messageError in self$assert(xs) :  Assertion on 'xs' failed: k: Element
>> 1
>> > is not >= 1.I have tried different values but the error remains.Warm
>> > regards    [[alternative HTML version deleted]]
>> > I know absolutely nothing about the specific statistical tools being
>> used
>> > here, but:
>> >
>> > In several nearest neighbor routines, the parameter k refers to the
>> number
>> > of nearest neighbors to be considered (in some computation).  In that
>> case,
>> > k must be at least 1, which is what the cited error message seems to be
>> > claiming.  Are you certain that k = 0 is a legitimate setting?
>> >
>> >
>> > - T. Arthur Milne
>> >
>> >
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> Patrick S. Malone, Ph.D., Malone Quantitative
> NEW Service Models: http://malonequantitative.com
>
> He/Him/His
>

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Tue Dec 29 19:44:21 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Tue, 29 Dec 2020 10:44:21 -0800
Subject: [R] Adding a superscript 6 to a number
In-Reply-To: <CAGxFJbRCmQZpTid0LkJbDhu4_5ifcdrBu6WHEA9-145n12aCXQ@mail.gmail.com>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGxFJbRCmQZpTid0LkJbDhu4_5ifcdrBu6WHEA9-145n12aCXQ@mail.gmail.com>
Message-ID: <CAHqSRuTg8U-EY4PV2eJRVbeN10ujbuRdyxnFV+6br_HQ0W6NdA@mail.gmail.com>

And if you have multiple labels, use lapply with bquote:

plot(1:5, sin(101:105)^2, type="n")
text(2:4, sin(102:104)^2, labels=lapply(102:104,
function(i)bquote(sin(.(i))^2)))

-Bill

On Tue, Dec 29, 2020 at 8:31 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Does this do what you want?
>
> plot(0:1, 0:1)
> x <- .25
> text(.5,.5, labels = bquote(.(x)^6, list(x= x)))
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Dec 29, 2020 at 7:50 AM Sorkin, John <jsorkin at som.umaryland.edu>
> wrote:
>
> > Colleagues,
> >
> > I would like to create a number (stored in the variable x) to the number
> > with the exponent of, i.e. the number to the sixth power. The code I have
> > tried, pasted below does not work.
> >
> > # create plot
> > plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
> > PNotSusp=0.69
> > # Create a string containing the base and exponent.
> > x <- 0.95123
> > # Convert the base to text and add the exponent of 6
> > mylab <- expression(paste(" ",character(x)^6))
> > # Add the text to the plot
> > text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
> >
> > I hope someone can show me how to create the text string I need.
> >
> > Thank you,
> > John
> >
> > John David Sorkin M.D., Ph.D.
> > Professor of Medicine
> > Chief, Biostatistics and Informatics
> > University of Maryland School of Medicine Division of Gerontology and
> > Geriatric Medicine
> > Baltimore VA Medical Center
> > 10 North Greene Street
> > GRECC (BT/18/GR)
> > Baltimore, MD 21201-1524
> > (Phone) 410-605-7119
> > (Fax) 410-605-7913 (Please call phone number above prior to faxing)
> >
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From gregco@t@ @end|ng |rom me@com  Tue Dec 29 21:31:33 2020
From: gregco@t@ @end|ng |rom me@com (Gregory Coats)
Date: Tue, 29 Dec 2020 15:31:33 -0500
Subject: [R] A Labeling the median
In-Reply-To: <CAHqSRuTg8U-EY4PV2eJRVbeN10ujbuRdyxnFV+6br_HQ0W6NdA@mail.gmail.com>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGxFJbRCmQZpTid0LkJbDhu4_5ifcdrBu6WHEA9-145n12aCXQ@mail.gmail.com>
 <CAHqSRuTg8U-EY4PV2eJRVbeN10ujbuRdyxnFV+6br_HQ0W6NdA@mail.gmail.com>
Message-ID: <2AC2619A-25C5-4FA3-BC5E-49D80FE99EA3@me.com>

After calling plot, I draw a horizontal line representing the median with aline.
abline (h=median(walk_seconds), lty=1, lwd=2.0, col="firebrick4")
Then, I want to label that line as the median and do so by calling mtext.
mtext  (side=4, "median", col="firebrick4", adj=?0.50?)
The dilemma is I do not see how to know what value to pass for adj in mtext so that the horizontal line for median, and the text for median line up.
Greg
walk_seconds <- c (5207, 4276, 5351, 4218, 5104, 4229, 3916, 3441, 4319, 4277, 5341, 5397, 4963, 6416, 3781, 4284, 2820, 3090, 3620, 3540, 3660, 3600, 3630, 3640, 3479, 3154, 3495, 3040, 3535, 3600, 3165, 3225, 3737, 4183, 4354, 3236, 3234, 3714, 3599, 3570, 2227, 4692, 3596, 3030, 3390, 3669, 4495, 5079, 5225, 5407, 4042, 5582, 5449, 5471, 6681, 5717, 5825, 3997, 4026, 4065, 4223, 5448, 5284, 5180, 3937, 3871, 4265, 4999, 5119, 5411, 4481, 5600, 4414, 4282, 5095, 4904, 4311, 4542, 4481, 5257, 4774, 4037, 4409, 4944, 4616, 4153, 4401, 3708, 5338, 4250, 3353, 4154, 4631, 4333, 3856, 5220, 4056, 4077, 5252, 3768, 4122, 3757, 3890, 5344, 5311, 3809, 3736, 4028, 4177, 6815, 4795, 6217, 4480, 5667, 6010, 5671, 6457, 4671, 5416, 5256, 5713, 6023, 5400, 5327, 5104, 5282, 5534, 6452, 5481, 5126, 6464, 5540, 6362, 5027, 5247, 4826, 5697, 5252, 5478, 4948, 5192, 4187, 5391, 5110, 5032, 5042, 5139, 4314, 5277, 5284, 4892, 4797, 5145, 4921, 5960, 5219, 4377, 4946, 5557, 4063, 5457, 5279, 5422, 4343, 4227, 5725, 4863, 5451, 3651, 5459, 4621, 5894, 4940, 5792, 4952, 5556, 5636, 5511, 3861, 6017, 5520, 4564, 4756, 3966, 4529, 4138, 4782, 4253, 4810, 4708, 5504, 5603, 5897, 6128, 5618, 5289, 5694, 5263, 5482, 5442, 4497, 3180, 7110, 3194, 2154, 4532, 4340, 4031, 3451, 4839, 4730, 4223, 3515, 3542, 4708, 4078, 4938, 4153, 3126, 3492, 4025, 4380, 4517, 4961, 4080, 4226, 4551, 3625, 4375, 5112, 5377, 3811, 3268, 2722, 3125, 3134, 3376, 3316, 2928, 2712, 3062, 3238, 4540, 4595, 3878, 4158, 4922, 6083, 4812, 5278, 5216, 4970, 3892, 4996, 3617, 3849, 3980, 5682, 4373, 3860, 5086, 4936, 5252, 5228, 5220, 5009, 4858, 4953, 5170, 5468, 6674, 3907, 4671, 3836, 3692, 3945, 3731, 5003, 3882, 3637, 3459, 3699, 3690, 4138, 3990, 3448, 3983, 5309, 4146, 4027, 4307, 4707, 4166, 3600, 3600, 3600, 5324, 3600, 4379, 3647, 3875, 5190, 4228, 4790, 3858, 4741, 3644, 3793, 3901, 3779, 3820, 3680, 3455, 3896, 3621, 3449, 4013, 3417, 3752, 3546, 3466, 2947, 3587, 3634, 4948, 3538, 3414, 3571, 3935, 3756, 4586, 3713, 4782, 3957, 3806, 3717, 3574, 3811, 3849, 2880, 4219, 3038, 2831, 3138, 4918, 3485, 3300, 3456, 3609, 3682, 4380, 3600, 3795, 3154, 4338, 3925, 3719, 2700, 3045, 3751, 3771, 3457, 3794)
plot    (walk_seconds, type="l", xaxt="n", xlab=" ", yaxt="n", ylab="Duration", col="blue")
abline  (v=1,                                       lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31),                                  lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29),                               lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31),                            lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30),                         lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30+31),                      lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30+31+30),                   lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30+31+30+31),                lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30+31+30+31+31),             lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30+31+30+31+31+30),          lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30+31+30+31+31+30+31),       lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30+31+30+31+31+30+31+30),    lty=4, lwd=1.0, col="grey60")
abline  (v=(1+31+29+31+30+31+30+31+31+30+31+30+31), lty=4, lwd=1.0, col="grey60")
axis    (side=1, at=1,                                       cex.axis=1.0, label="1-1")
axis    (side=1, at=(1+31),                                  cex.axis=1.0, label="2-1")
axis    (side=1, at=(1+31+29),                               cex.axis=1.0, label="3-1")
axis    (side=1, at=(1+31+29+31),                            cex.axis=1.0, label="4-1")
axis    (side=1, at=(1+31+29+31+30),                         cex.axis=1.0, label="5-1")
axis    (side=1, at=(1+31+29+31+30+31),                      cex.axis=1.0, label="6-1")
axis    (side=1, at=(1+31+29+31+30+31+30),                   cex.axis=1.0, label="7-1")
axis    (side=1, at=(1+31+29+31+30+31+30+31),                cex.axis=1.0, label="8-1")
axis    (side=1, at=(1+31+29+31+30+31+30+31+31),             cex.axis=1.0, label="9-1")
axis    (side=1, at=(1+31+29+31+30+31+30+31+31+30),          cex.axis=1.0, label="10-1")
axis    (side=1, at=(1+31+29+31+30+31+30+31+31+30+31),       cex.axis=1.0, label="11-1")
axis    (side=1, at=(1+31+29+31+30+31+30+31+31+30+31+30),    cex.axis=1.0, label="12-1")
axis    (side=1, at=(1+31+29+31+30+31+30+31+31+30+31+30+31), cex.axis=1.0, label="1-1")
abline  (h=c(0,600,1200,1800,2400,3000,3600,4200,4800,5400,6000,6600,7200), lty=2, lwd=1.0, col="grey40")
median (walk_seconds)
sd     (walk_seconds)
abline (h=median(walk_seconds), lty=1, lwd=2.0, col="firebrick4")
abline (h=(median(walk_seconds) - sd(walk_seconds)), lty=3, lwd=3.00, col="#008000")
abline (h=(median(walk_seconds) + sd(walk_seconds)), lty=3, lwd=3.00, col="#008000")
mtext  (side=4, "median", col="firebrick4", adj="1.00")
mtext  (side=4, "median", col="firebrick4", adj="0.10")


	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Dec 29 21:49:57 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 29 Dec 2020 21:49:57 +0100
Subject: [R] Fwd: Error in setting the parameter values of k
In-Reply-To: <CA+nrPnsPoUM_HLUJmRGmXT4ou7VXG9uWi3=2JOS_kf36SW=BHA@mail.gmail.com>
References: <MPjANgW--3-2@tuta.io>
 <CA+nrPnu1pp1xJZAYunbjajHYk6QLwvzen4O2fFf36h9=kOmtQQ@mail.gmail.com>
 <CAJc=yOEFAGaqKaqAKbbQei7sy2f85j6XhNBAJkEJyVsgmVVv8w@mail.gmail.com>
 <CA+nrPnsPoUM_HLUJmRGmXT4ou7VXG9uWi3=2JOS_kf36SW=BHA@mail.gmail.com>
Message-ID: <CA+nrPnvFKVq0a2L_wY6rKwgzG0aYicY67WWXsy6mze1XDxr4YA@mail.gmail.com>

Hello, I am sorry but after settings the value of C between 1 and 7, I get
the following error message now:

Error in self$assert(xs) :
  Assertion on 'xs' failed: The parameter 'C' can only be set if the
following condition is met 'type <U+2208> {eps-svr, eps-bsvr}'. Instead the
parameter value for 'type' is not set at all. Try setting 'type' to a value
that satisfies the condition.

I have set the parameter values as following:

search_space = paradox::ParamSet$new(
 params = list(paradox::ParamInt$new("C", lower = 1, upper = 7)))


On Tue, Dec 29, 2020 at 6:36 PM Neha gupta <neha.bologna90 at gmail.com> wrote:

> Thanks a lot, Milne and Patrick.
>
> I am going to change the values, hopefully the error message will
> disappear.
>
> Warm regards
>
> On Tue, Dec 29, 2020 at 5:53 PM Patrick (Malone Quantitative) <
> malone at malonequantitative.com> wrote:
>
>> Likely, yes. Your error message says k must be at least 1, so searching
>> below 1 is probably your issue.
>>
>> Also, logically, zero nearest neighbors doesn't seem to make a lot of
>> sense.
>>
>> Pat
>>
>> On Tue, Dec 29, 2020 at 11:01 AM Neha gupta <neha.bologna90 at gmail.com>
>> wrote:
>>
>>> Thank you for your response.
>>>
>>>  Are you certain that k = 0 is a legitimate setting?
>>>
>>> Since, the default value of k is 1, I wanted to search between the values
>>> of 0 to 3.
>>>
>>> Milne, Do you mean I have to provide both the lower and upper bounds
>>> greater than 1 in order to get rid of this error?
>>>
>>> On Tue, Dec 29, 2020 at 4:50 PM T. A. Milne <milneta at tuta.io> wrote:
>>>
>>> > I am using mlr3 'fast nearest neighbor' leaner i.e. fnnIts parameter is
>>> > 'k' which has a default value of 1. When I use tuningusing random
>>> search, I
>>> > set the parameter of k as: lower= 0, upper=3But it gives an error
>>> > messageError in self$assert(xs) :  Assertion on 'xs' failed: k:
>>> Element 1
>>> > is not >= 1.I have tried different values but the error remains.Warm
>>> > regards    [[alternative HTML version deleted]]
>>> > I know absolutely nothing about the specific statistical tools being
>>> used
>>> > here, but:
>>> >
>>> > In several nearest neighbor routines, the parameter k refers to the
>>> number
>>> > of nearest neighbors to be considered (in some computation).  In that
>>> case,
>>> > k must be at least 1, which is what the cited error message seems to be
>>> > claiming.  Are you certain that k = 0 is a legitimate setting?
>>> >
>>> >
>>> > - T. Arthur Milne
>>> >
>>> >
>>> >
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> Patrick S. Malone, Ph.D., Malone Quantitative
>> NEW Service Models: http://malonequantitative.com
>>
>> He/Him/His
>>
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Tue Dec 29 22:09:26 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 30 Dec 2020 08:09:26 +1100
Subject: [R] A Labeling the median
In-Reply-To: <2AC2619A-25C5-4FA3-BC5E-49D80FE99EA3@me.com>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGxFJbRCmQZpTid0LkJbDhu4_5ifcdrBu6WHEA9-145n12aCXQ@mail.gmail.com>
 <CAHqSRuTg8U-EY4PV2eJRVbeN10ujbuRdyxnFV+6br_HQ0W6NdA@mail.gmail.com>
 <2AC2619A-25C5-4FA3-BC5E-49D80FE99EA3@me.com>
Message-ID: <CA+8X3fWhxgHBkLiJncFiAM-a_AH0TULEoGyt0L1C=AW29-RNjw@mail.gmail.com>

Hi Greg,
I think what you want is:

mtext  (side=4, "median", col="firebrick4", at=median(walk_seconds))

"adj" defaults to 0.5 and is usually okay. It looks to me as though
mtext has taken your _character_ strings as non-numeric and then tried
to work something out with par("las"). Experts more familiar with the
underlying code may be able to provide a more elegant answer, but mine
is above.

Jim

On Wed, Dec 30, 2020 at 7:32 AM Gregory Coats via R-help
<r-help at r-project.org> wrote:
>
> After calling plot, I draw a horizontal line representing the median with aline.
> abline (h=median(walk_seconds), lty=1, lwd=2.0, col="firebrick4")
> Then, I want to label that line as the median and do so by calling mtext.
> mtext  (side=4, "median", col="firebrick4", adj=?0.50?)
> The dilemma is I do not see how to know what value to pass for adj in mtext so that the horizontal line for median, and the text for median line up.
> Greg
> walk_seconds <- c (5207, 4276, 5351, 4218, 5104, 4229, 3916, 3441, 4319, 4277, 5341, 5397, 4963, 6416, 3781, 4284, 2820, 3090, 3620, 3540, 3660, 3600, 3630, 3640, 3479, 3154, 3495, 3040, 3535, 3600, 3165, 3225, 3737, 4183, 4354, 3236, 3234, 3714, 3599, 3570, 2227, 4692, 3596, 3030, 3390, 3669, 4495, 5079, 5225, 5407, 4042, 5582, 5449, 5471, 6681, 5717, 5825, 3997, 4026, 4065, 4223, 5448, 5284, 5180, 3937, 3871, 4265, 4999, 5119, 5411, 4481, 5600, 4414, 4282, 5095, 4904, 4311, 4542, 4481, 5257, 4774, 4037, 4409, 4944, 4616, 4153, 4401, 3708, 5338, 4250, 3353, 4154, 4631, 4333, 3856, 5220, 4056, 4077, 5252, 3768, 4122, 3757, 3890, 5344, 5311, 3809, 3736, 4028, 4177, 6815, 4795, 6217, 4480, 5667, 6010, 5671, 6457, 4671, 5416, 5256, 5713, 6023, 5400, 5327, 5104, 5282, 5534, 6452, 5481, 5126, 6464, 5540, 6362, 5027, 5247, 4826, 5697, 5252, 5478, 4948, 5192, 4187, 5391, 5110, 5032, 5042, 5139, 4314, 5277, 5284, 4892, 4797, 5145, 4921, 5960, 5219, 4377, 4946, 5557, 4063, 5457, 5279, 5422, 4343, 4227, 5725, 4863, 5451, 3651, 5459, 4621, 5894, 4940, 5792, 4952, 5556, 5636, 5511, 3861, 6017, 5520, 4564, 4756, 3966, 4529, 4138, 4782, 4253, 4810, 4708, 5504, 5603, 5897, 6128, 5618, 5289, 5694, 5263, 5482, 5442, 4497, 3180, 7110, 3194, 2154, 4532, 4340, 4031, 3451, 4839, 4730, 4223, 3515, 3542, 4708, 4078, 4938, 4153, 3126, 3492, 4025, 4380, 4517, 4961, 4080, 4226, 4551, 3625, 4375, 5112, 5377, 3811, 3268, 2722, 3125, 3134, 3376, 3316, 2928, 2712, 3062, 3238, 4540, 4595, 3878, 4158, 4922, 6083, 4812, 5278, 5216, 4970, 3892, 4996, 3617, 3849, 3980, 5682, 4373, 3860, 5086, 4936, 5252, 5228, 5220, 5009, 4858, 4953, 5170, 5468, 6674, 3907, 4671, 3836, 3692, 3945, 3731, 5003, 3882, 3637, 3459, 3699, 3690, 4138, 3990, 3448, 3983, 5309, 4146, 4027, 4307, 4707, 4166, 3600, 3600, 3600, 5324, 3600, 4379, 3647, 3875, 5190, 4228, 4790, 3858, 4741, 3644, 3793, 3901, 3779, 3820, 3680, 3455, 3896, 3621, 3449, 4013, 3417, 3752, 3546, 3466, 2947, 3587, 3634, 4948, 3538, 3414, 3571, 3935, 3756, 4586, 3713, 4782, 3957, 3806, 3717, 3574, 3811, 3849, 2880, 4219, 3038, 2831, 3138, 4918, 3485, 3300, 3456, 3609, 3682, 4380, 3600, 3795, 3154, 4338, 3925, 3719, 2700, 3045, 3751, 3771, 3457, 3794)
> plot    (walk_seconds, type="l", xaxt="n", xlab=" ", yaxt="n", ylab="Duration", col="blue")
> abline  (v=1,                                       lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31),                                  lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29),                               lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31),                            lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30),                         lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30+31),                      lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30+31+30),                   lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30+31+30+31),                lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30+31+30+31+31),             lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30+31+30+31+31+30),          lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30+31+30+31+31+30+31),       lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30+31+30+31+31+30+31+30),    lty=4, lwd=1.0, col="grey60")
> abline  (v=(1+31+29+31+30+31+30+31+31+30+31+30+31), lty=4, lwd=1.0, col="grey60")
> axis    (side=1, at=1,                                       cex.axis=1.0, label="1-1")
> axis    (side=1, at=(1+31),                                  cex.axis=1.0, label="2-1")
> axis    (side=1, at=(1+31+29),                               cex.axis=1.0, label="3-1")
> axis    (side=1, at=(1+31+29+31),                            cex.axis=1.0, label="4-1")
> axis    (side=1, at=(1+31+29+31+30),                         cex.axis=1.0, label="5-1")
> axis    (side=1, at=(1+31+29+31+30+31),                      cex.axis=1.0, label="6-1")
> axis    (side=1, at=(1+31+29+31+30+31+30),                   cex.axis=1.0, label="7-1")
> axis    (side=1, at=(1+31+29+31+30+31+30+31),                cex.axis=1.0, label="8-1")
> axis    (side=1, at=(1+31+29+31+30+31+30+31+31),             cex.axis=1.0, label="9-1")
> axis    (side=1, at=(1+31+29+31+30+31+30+31+31+30),          cex.axis=1.0, label="10-1")
> axis    (side=1, at=(1+31+29+31+30+31+30+31+31+30+31),       cex.axis=1.0, label="11-1")
> axis    (side=1, at=(1+31+29+31+30+31+30+31+31+30+31+30),    cex.axis=1.0, label="12-1")
> axis    (side=1, at=(1+31+29+31+30+31+30+31+31+30+31+30+31), cex.axis=1.0, label="1-1")
> abline  (h=c(0,600,1200,1800,2400,3000,3600,4200,4800,5400,6000,6600,7200), lty=2, lwd=1.0, col="grey40")
> median (walk_seconds)
> sd     (walk_seconds)
> abline (h=median(walk_seconds), lty=1, lwd=2.0, col="firebrick4")
> abline (h=(median(walk_seconds) - sd(walk_seconds)), lty=3, lwd=3.00, col="#008000")
> abline (h=(median(walk_seconds) + sd(walk_seconds)), lty=3, lwd=3.00, col="#008000")
> mtext  (side=4, "median", col="firebrick4", adj="1.00")
> mtext  (side=4, "median", col="firebrick4", adj="0.10")
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Dec 29 22:15:56 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 29 Dec 2020 13:15:56 -0800
Subject: [R] [External]  Adding a superscript 6 to a number
In-Reply-To: <CAGx1TMDSCK4LXUBK72CGrWFO3DToV9MVw9mPxiJBb_OgKHD3yQ@mail.gmail.com>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGx1TMDSCK4LXUBK72CGrWFO3DToV9MVw9mPxiJBb_OgKHD3yQ@mail.gmail.com>
Message-ID: <E5A58260-9105-468B-945F-5F42D758ADA2@dcn.davis.ca.us>

Why not? Is that a generalization, or specific to this case?

On December 29, 2020 7:54:22 AM PST, "Richard M. Heiberger" <rmh at temple.edu> wrote:
>paste() is the problem.  don?t use paste with expression()
>
>On Tue, Dec 29, 2020 at 10:50 Sorkin, John <jsorkin at som.umaryland.edu>
>wrote:
>
>> Colleagues,
>>
>> I would like to create a number (stored in the variable x) to the
>number
>> with the exponent of, i.e. the number to the sixth power. The code I
>have
>> tried, pasted below does not work.
>>
>> # create plot
>> plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
>> PNotSusp=0.69
>> # Create a string containing the base and exponent.
>> x <- 0.95123
>> # Convert the base to text and add the exponent of 6
>> mylab <- expression(paste(" ",character(x)^6))
>> # Add the text to the plot
>> text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
>>
>> I hope someone can show me how to create the text string I need.
>>
>> Thank you,
>> John
>>
>> John David Sorkin M.D., Ph.D.
>> Professor of Medicine
>> Chief, Biostatistics and Informatics
>> University of Maryland School of Medicine Division of Gerontology and
>> Geriatric Medicine
>> Baltimore VA Medical Center
>> 10 North Greene Street
>>
><https://www.google.com/maps/search/10+North+Greene+Street?entry=gmail&source=g>
>> GRECC (BT/18/GR)
>> Baltimore, MD 21201-1524
>> (Phone) 410-605-7119
>> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From rmh @end|ng |rom temp|e@edu  Tue Dec 29 23:56:34 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 29 Dec 2020 17:56:34 -0500
Subject: [R] 
 [External] Re:  [External] Adding a superscript 6 to a number
In-Reply-To: <E5A58260-9105-468B-945F-5F42D758ADA2@dcn.davis.ca.us>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGx1TMDSCK4LXUBK72CGrWFO3DToV9MVw9mPxiJBb_OgKHD3yQ@mail.gmail.com>
 <E5A58260-9105-468B-945F-5F42D758ADA2@dcn.davis.ca.us>
Message-ID: <CAGx1TMCASLSKOzm=hEVr2Qjv8jb7dDcwXbjKvjxSmLAtJH2u_g@mail.gmail.com>

It is a generalization.
Don't use paste() and expression() together because paste is a sort-of
inverse to expression.
In this example I start by typing several characters, and the result
of paste(expression()) is a string containing the characters I
initially typed.

> expression(12^6)
expression(12^6)
> paste(expression(12^6))
[1] "12^6"


expression(12^6)
paste(expression(12^6))

plot(0:1, 0:1)
text(.1, .4, labels=paste(expression(12^6)))
text(.1, .3, labels=expression(12^6))

On Tue, Dec 29, 2020 at 4:15 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Why not? Is that a generalization, or specific to this case?
>
> On December 29, 2020 7:54:22 AM PST, "Richard M. Heiberger" <rmh at temple.edu> wrote:
> >paste() is the problem.  don?t use paste with expression()
> >
> >On Tue, Dec 29, 2020 at 10:50 Sorkin, John <jsorkin at som.umaryland.edu>
> >wrote:
> >
> >> Colleagues,
> >>
> >> I would like to create a number (stored in the variable x) to the
> >number
> >> with the exponent of, i.e. the number to the sixth power. The code I
> >have
> >> tried, pasted below does not work.
> >>
> >> # create plot
> >> plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
> >> PNotSusp=0.69
> >> # Create a string containing the base and exponent.
> >> x <- 0.95123
> >> # Convert the base to text and add the exponent of 6
> >> mylab <- expression(paste(" ",character(x)^6))
> >> # Add the text to the plot
> >> text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
> >>
> >> I hope someone can show me how to create the text string I need.
> >>
> >> Thank you,
> >> John
> >>
> >> John David Sorkin M.D., Ph.D.
> >> Professor of Medicine
> >> Chief, Biostatistics and Informatics
> >> University of Maryland School of Medicine Division of Gerontology and
> >> Geriatric Medicine
> >> Baltimore VA Medical Center
> >> 10 North Greene Street
> >>
> ><https://www.google.com/maps/search/10+North+Greene+Street?entry=gmail&source=g>
> >> GRECC (BT/18/GR)
> >> Baltimore, MD 21201-1524
> >> (Phone) 410-605-7119
> >> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
> >>
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Dec 30 00:05:21 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 29 Dec 2020 15:05:21 -0800
Subject: [R] 
 [External] Re: [External] Adding a superscript 6 to a number
In-Reply-To: <CAGx1TMCASLSKOzm=hEVr2Qjv8jb7dDcwXbjKvjxSmLAtJH2u_g@mail.gmail.com>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGx1TMDSCK4LXUBK72CGrWFO3DToV9MVw9mPxiJBb_OgKHD3yQ@mail.gmail.com>
 <E5A58260-9105-468B-945F-5F42D758ADA2@dcn.davis.ca.us>
 <CAGx1TMCASLSKOzm=hEVr2Qjv8jb7dDcwXbjKvjxSmLAtJH2u_g@mail.gmail.com>
Message-ID: <CAGxFJbS36_8MBH0x+Mhy08OM63VsFrESNLG+a+zBF8zZ3JUCBw@mail.gmail.com>

... yes, more specifically:

(from ?paste)
"paste converts its arguments (*via* as.character
<http://127.0.0.1:33923/help/library/base/help/as.character>) to character
strings, and concatenates them (separating them by the string given by sep).
"

More to the point, I would say, is that if you need to manipulate
expressions or other language objects you should live in the world of
language objects, rather than converting them back and forth to character
strings.  But this may be off topic and in the weeds;  for which, if so,
apologies.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Dec 29, 2020 at 2:57 PM Richard M. Heiberger <rmh at temple.edu> wrote:

> It is a generalization.
> Don't use paste() and expression() together because paste is a sort-of
> inverse to expression.
> In this example I start by typing several characters, and the result
> of paste(expression()) is a string containing the characters I
> initially typed.
>
> > expression(12^6)
> expression(12^6)
> > paste(expression(12^6))
> [1] "12^6"
>
>
> expression(12^6)
> paste(expression(12^6))
>
> plot(0:1, 0:1)
> text(.1, .4, labels=paste(expression(12^6)))
> text(.1, .3, labels=expression(12^6))
>
> On Tue, Dec 29, 2020 at 4:15 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
> >
> > Why not? Is that a generalization, or specific to this case?
> >
> > On December 29, 2020 7:54:22 AM PST, "Richard M. Heiberger" <
> rmh at temple.edu> wrote:
> > >paste() is the problem.  don?t use paste with expression()
> > >
> > >On Tue, Dec 29, 2020 at 10:50 Sorkin, John <jsorkin at som.umaryland.edu>
> > >wrote:
> > >
> > >> Colleagues,
> > >>
> > >> I would like to create a number (stored in the variable x) to the
> > >number
> > >> with the exponent of, i.e. the number to the sixth power. The code I
> > >have
> > >> tried, pasted below does not work.
> > >>
> > >> # create plot
> > >> plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
> > >> PNotSusp=0.69
> > >> # Create a string containing the base and exponent.
> > >> x <- 0.95123
> > >> # Convert the base to text and add the exponent of 6
> > >> mylab <- expression(paste(" ",character(x)^6))
> > >> # Add the text to the plot
> > >> text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
> > >>
> > >> I hope someone can show me how to create the text string I need.
> > >>
> > >> Thank you,
> > >> John
> > >>
> > >> John David Sorkin M.D., Ph.D.
> > >> Professor of Medicine
> > >> Chief, Biostatistics and Informatics
> > >> University of Maryland School of Medicine Division of Gerontology and
> > >> Geriatric Medicine
> > >> Baltimore VA Medical Center
> > >> 10 North Greene Street
> > >>
> > ><
> https://www.google.com/maps/search/10+North+Greene+Street?entry=gmail&source=g
> >
> > >> GRECC (BT/18/GR)
> > >> Baltimore, MD 21201-1524
> > >> (Phone) 410-605-7119
> > >> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
> > >>
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > >> http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> > >>
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > >______________________________________________
> > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >https://stat.ethz.ch/mailman/listinfo/r-help
> > >PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Dec 30 00:45:10 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 29 Dec 2020 15:45:10 -0800
Subject: [R] 
 [External] Re: [External] Adding a superscript 6 to a number
In-Reply-To: <CAGxFJbS36_8MBH0x+Mhy08OM63VsFrESNLG+a+zBF8zZ3JUCBw@mail.gmail.com>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGx1TMDSCK4LXUBK72CGrWFO3DToV9MVw9mPxiJBb_OgKHD3yQ@mail.gmail.com>
 <E5A58260-9105-468B-945F-5F42D758ADA2@dcn.davis.ca.us>
 <CAGx1TMCASLSKOzm=hEVr2Qjv8jb7dDcwXbjKvjxSmLAtJH2u_g@mail.gmail.com>
 <CAGxFJbS36_8MBH0x+Mhy08OM63VsFrESNLG+a+zBF8zZ3JUCBw@mail.gmail.com>
Message-ID: <5DEF0E7E-0D14-4347-BF1D-93B445652A1F@dcn.davis.ca.us>

This doesn't sound right. When you use expression() it freezes the syntax as the expression you wrote, so expression(paste(x^2,"[", m^2, "]")) is a perfectly valid plotmath expression. The expression() call is _not_ an "inverse" of paste because the presence of paste is supporting the inclusion of non-syntactic elements in this context... it is handled by plotmath, not by actually executing paste(), and expression is delaying evaluation to give plotmath a chance to combine the sub expressions including character literals without as.character or a subsequent eval().

Code that invokes paste on an expression seems unwise to me... but not the other way around.

On December 29, 2020 3:05:21 PM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>... yes, more specifically:
>
>(from ?paste)
>"paste converts its arguments (*via* as.character
><http://127.0.0.1:33923/help/library/base/help/as.character>) to
>character
>strings, and concatenates them (separating them by the string given by
>sep).
>"
>
>More to the point, I would say, is that if you need to manipulate
>expressions or other language objects you should live in the world of
>language objects, rather than converting them back and forth to
>character
>strings.  But this may be off topic and in the weeds;  for which, if
>so,
>apologies.
>
>Cheers,
>Bert
>
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Tue, Dec 29, 2020 at 2:57 PM Richard M. Heiberger <rmh at temple.edu>
>wrote:
>
>> It is a generalization.
>> Don't use paste() and expression() together because paste is a
>sort-of
>> inverse to expression.
>> In this example I start by typing several characters, and the result
>> of paste(expression()) is a string containing the characters I
>> initially typed.
>>
>> > expression(12^6)
>> expression(12^6)
>> > paste(expression(12^6))
>> [1] "12^6"
>>
>>
>> expression(12^6)
>> paste(expression(12^6))
>>
>> plot(0:1, 0:1)
>> text(.1, .4, labels=paste(expression(12^6)))
>> text(.1, .3, labels=expression(12^6))
>>
>> On Tue, Dec 29, 2020 at 4:15 PM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>> wrote:
>> >
>> > Why not? Is that a generalization, or specific to this case?
>> >
>> > On December 29, 2020 7:54:22 AM PST, "Richard M. Heiberger" <
>> rmh at temple.edu> wrote:
>> > >paste() is the problem.  don?t use paste with expression()
>> > >
>> > >On Tue, Dec 29, 2020 at 10:50 Sorkin, John
><jsorkin at som.umaryland.edu>
>> > >wrote:
>> > >
>> > >> Colleagues,
>> > >>
>> > >> I would like to create a number (stored in the variable x) to
>the
>> > >number
>> > >> with the exponent of, i.e. the number to the sixth power. The
>code I
>> > >have
>> > >> tried, pasted below does not work.
>> > >>
>> > >> # create plot
>> > >> plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
>> > >> PNotSusp=0.69
>> > >> # Create a string containing the base and exponent.
>> > >> x <- 0.95123
>> > >> # Convert the base to text and add the exponent of 6
>> > >> mylab <- expression(paste(" ",character(x)^6))
>> > >> # Add the text to the plot
>> > >> text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
>> > >>
>> > >> I hope someone can show me how to create the text string I need.
>> > >>
>> > >> Thank you,
>> > >> John
>> > >>
>> > >> John David Sorkin M.D., Ph.D.
>> > >> Professor of Medicine
>> > >> Chief, Biostatistics and Informatics
>> > >> University of Maryland School of Medicine Division of
>Gerontology and
>> > >> Geriatric Medicine
>> > >> Baltimore VA Medical Center
>> > >> 10 North Greene Street
>> > >>
>> > ><
>>
>https://www.google.com/maps/search/10+North+Greene+Street?entry=gmail&source=g
>> >
>> > >> GRECC (BT/18/GR)
>> > >> Baltimore, MD 21201-1524
>> > >> (Phone) 410-605-7119
>> > >> (Fax) 410-605-7913 (Please call phone number above prior to
>faxing)
>> > >>
>> > >>
>> > >> ______________________________________________
>> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>see
>> > >> https://stat.ethz.ch/mailman/listinfo/r-help
>> > >> PLEASE do read the posting guide
>> > >> http://www.R-project.org/posting-guide.html
>> > >> and provide commented, minimal, self-contained, reproducible
>code.
>> > >>
>> > >
>> > >       [[alternative HTML version deleted]]
>> > >
>> > >______________________________________________
>> > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > >https://stat.ethz.ch/mailman/listinfo/r-help
>> > >PLEASE do read the posting guide
>> > >http://www.R-project.org/posting-guide.html
>> > >and provide commented, minimal, self-contained, reproducible code.
>> >
>> > --
>> > Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Dec 30 02:06:30 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 29 Dec 2020 17:06:30 -0800
Subject: [R] 
 [External] Re: [External] Adding a superscript 6 to a number
In-Reply-To: <5DEF0E7E-0D14-4347-BF1D-93B445652A1F@dcn.davis.ca.us>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGx1TMDSCK4LXUBK72CGrWFO3DToV9MVw9mPxiJBb_OgKHD3yQ@mail.gmail.com>
 <E5A58260-9105-468B-945F-5F42D758ADA2@dcn.davis.ca.us>
 <CAGx1TMCASLSKOzm=hEVr2Qjv8jb7dDcwXbjKvjxSmLAtJH2u_g@mail.gmail.com>
 <CAGxFJbS36_8MBH0x+Mhy08OM63VsFrESNLG+a+zBF8zZ3JUCBw@mail.gmail.com>
 <5DEF0E7E-0D14-4347-BF1D-93B445652A1F@dcn.davis.ca.us>
Message-ID: <614982b7-e981-d39b-4ce1-767d8b82eb32@comcast.net>


On 12/29/20 3:45 PM, Jeff Newmiller wrote:
> This doesn't sound right. When you use expression() it freezes the syntax as the expression you wrote, so expression(paste(x^2,"[", m^2, "]")) is a perfectly valid plotmath expression. The expression() call is _not_ an "inverse" of paste because the presence of paste is supporting the inclusion of non-syntactic elements in this context... it is handled by plotmath, not by actually executing paste(), and expression is delaying evaluation to give plotmath a chance to combine the sub expressions including character literals without as.character or a subsequent eval().
>
> Code that invokes paste on an expression seems unwise to me... but not the other way around.

There are three instances of `expression(paste(...))` in the examples 
for plotmath, so Heiberger's perspective was not adopted by the S/R 
plotmath authors. It behaves a bit like `paste0` inside plotmath. In my 
opinion its use in plotmath expressions makes the code less readable 
than if one were to just use "*" as a concatenation operator. The 
example in ?plotmath :


main = expression(paste(plain(sin) * phi, "? and? ",
 ??????????????????????????????? plain(cos) * phi))

... could be better expressed as:

main = expression( plain(sin) * phi *? "? and? " * plain(cos) * phi )


The usual `paste` has a "sep" and "collapse" arguments. The plotmath 
`paste` function does not honor those arguments.


-- 

David.

>
> On December 29, 2020 3:05:21 PM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> ... yes, more specifically:
>>
>> (from ?paste)
>> "paste converts its arguments (*via* as.character
>> <http://127.0.0.1:33923/help/library/base/help/as.character>) to
>> character
>> strings, and concatenates them (separating them by the string given by
>> sep).
>> "
>>
>> More to the point, I would say, is that if you need to manipulate
>> expressions or other language objects you should live in the world of
>> language objects, rather than converting them back and forth to
>> character
>> strings.  But this may be off topic and in the weeds;  for which, if
>> so,
>> apologies.
>>
>> Cheers,
>> Bert
>>
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Dec 29, 2020 at 2:57 PM Richard M. Heiberger <rmh at temple.edu>
>> wrote:
>>
>>> It is a generalization.
>>> Don't use paste() and expression() together because paste is a
>> sort-of
>>> inverse to expression.
>>> In this example I start by typing several characters, and the result
>>> of paste(expression()) is a string containing the characters I
>>> initially typed.
>>>
>>>> expression(12^6)
>>> expression(12^6)
>>>> paste(expression(12^6))
>>> [1] "12^6"
>>>
>>>
>>> expression(12^6)
>>> paste(expression(12^6))
>>>
>>> plot(0:1, 0:1)
>>> text(.1, .4, labels=paste(expression(12^6)))
>>> text(.1, .3, labels=expression(12^6))
>>>
>>> On Tue, Dec 29, 2020 at 4:15 PM Jeff Newmiller
>> <jdnewmil at dcn.davis.ca.us>
>>> wrote:
>>>> Why not? Is that a generalization, or specific to this case?
>>>>
>>>> On December 29, 2020 7:54:22 AM PST, "Richard M. Heiberger" <
>>> rmh at temple.edu> wrote:
>>>>> paste() is the problem.  don?t use paste with expression()
>>>>>
>>>>> On Tue, Dec 29, 2020 at 10:50 Sorkin, John
>> <jsorkin at som.umaryland.edu>
>>>>> wrote:
>>>>>
>>>>>> Colleagues,
>>>>>>
>>>>>> I would like to create a number (stored in the variable x) to
>> the
>>>>> number
>>>>>> with the exponent of, i.e. the number to the sixth power. The
>> code I
>>>>> have
>>>>>> tried, pasted below does not work.
>>>>>>
>>>>>> # create plot
>>>>>> plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
>>>>>> PNotSusp=0.69
>>>>>> # Create a string containing the base and exponent.
>>>>>> x <- 0.95123
>>>>>> # Convert the base to text and add the exponent of 6
>>>>>> mylab <- expression(paste(" ",character(x)^6))
>>>>>> # Add the text to the plot
>>>>>> text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
>>>>>>
>>>>>> I hope someone can show me how to create the text string I need.
>>>>>>
>>>>>> Thank you,
>>>>>> John
>>>>>>
>>>>>> John David Sorkin M.D., Ph.D.
>>>>>> Professor of Medicine
>>>>>> Chief, Biostatistics and Informatics
>>>>>> University of Maryland School of Medicine Division of
>> Gerontology and
>>>>>> Geriatric Medicine
>>>>>> Baltimore VA Medical Center
>>>>>> 10 North Greene Street
>>>>>>
>>>>> <
>> https://www.google.com/maps/search/10+North+Greene+Street?entry=gmail&source=g
>>>>>> GRECC (BT/18/GR)
>>>>>> Baltimore, MD 21201-1524
>>>>>> (Phone) 410-605-7119
>>>>>> (Fax) 410-605-7913 (Please call phone number above prior to
>> faxing)
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>> see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible
>> code.
>>>>>        [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Dec 30 02:16:58 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 29 Dec 2020 20:16:58 -0500
Subject: [R] [External] Adding a superscript 6 to a number
In-Reply-To: <E5A58260-9105-468B-945F-5F42D758ADA2@dcn.davis.ca.us>
References: <MN2PR03MB51675BAF970CAE2008342CA8E2D80@MN2PR03MB5167.namprd03.prod.outlook.com>
 <CAGx1TMDSCK4LXUBK72CGrWFO3DToV9MVw9mPxiJBb_OgKHD3yQ@mail.gmail.com>
 <E5A58260-9105-468B-945F-5F42D758ADA2@dcn.davis.ca.us>
Message-ID: <d447c775-abf9-fca4-d0e2-a49e991ca06e@gmail.com>

On 29/12/2020 4:15 p.m., Jeff Newmiller wrote:
> Why not? Is that a generalization, or specific to this case?

paste and expression are used several times in the code that was posted. 
  The one that causes all the trouble is

labels=paste(PNotSusp,"=\n",mylab)

where mylab is an expression, the result of

  expression(paste(" ",character(x)^6))

The paste() within the expression() call is harmless; the one outside it 
is disastrous.

Duncan Murdoch

> 
> On December 29, 2020 7:54:22 AM PST, "Richard M. Heiberger" <rmh at temple.edu> wrote:
>> paste() is the problem.  don?t use paste with expression()
>>
>> On Tue, Dec 29, 2020 at 10:50 Sorkin, John <jsorkin at som.umaryland.edu>
>> wrote:
>>
>>> Colleagues,
>>>
>>> I would like to create a number (stored in the variable x) to the
>> number
>>> with the exponent of, i.e. the number to the sixth power. The code I
>> have
>>> tried, pasted below does not work.
>>>
>>> # create plot
>>> plot(x=0.2,y=0.2,xlim=c(0,1),ylim=c(0,1))
>>> PNotSusp=0.69
>>> # Create a string containing the base and exponent.
>>> x <- 0.95123
>>> # Convert the base to text and add the exponent of 6
>>> mylab <- expression(paste(" ",character(x)^6))
>>> # Add the text to the plot
>>> text(0.4,0.8,labels=paste(PNotSusp,"=\n",mylab))
>>>
>>> I hope someone can show me how to create the text string I need.
>>>
>>> Thank you,
>>> John
>>>
>>> John David Sorkin M.D., Ph.D.
>>> Professor of Medicine
>>> Chief, Biostatistics and Informatics
>>> University of Maryland School of Medicine Division of Gerontology and
>>> Geriatric Medicine
>>> Baltimore VA Medical Center
>>> 10 North Greene Street
>>>
>> <https://www.google.com/maps/search/10+North+Greene+Street?entry=gmail&source=g>
>>> GRECC (BT/18/GR)
>>> Baltimore, MD 21201-1524
>>> (Phone) 410-605-7119
>>> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Wed Dec 30 22:58:28 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Wed, 30 Dec 2020 22:58:28 +0100
Subject: [R] error: data set is too small or the subsampling rate is too
 large
Message-ID: <CA+nrPnvTGO1wfD44ZUxcOHqg9BL7wtqLtwWLesF7o-ybSVMdJQ@mail.gmail.com>

Hi, I am using the hyperparameters tuning of GBM but it gives me the
following error: (For some other datasets, my code works, so the problem
would be the dataset size I guess).

Error in gbm.fit(x = x, y = y, offset = offset, distribution =
distribution,  :
  The data set is too small or the subsampling rate is too large: `nTrain *
bag.fraction <= n.minobsinnode`

My data is:

structure(list(ID = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
13, 14, 15), Language = c(1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1,
1, 1, 3), Hardware = c(1, 2, 3, 1, 2, 4, 4, 2, 1, 1, 1, 5, 6,
1, 1), Duration = c(17, 7, 15, 18, 13, 5, 5, 11, 14, 5, 13, 31,
20, 26, 14), KSLOC = c(253.6, 40.5, 450, 214.4, 449.9, 50, 43,
200, 289, 39, 254.2, 128.6, 161.4, 164.8, 60.2), AdjFP = c(1217.1,
507.3, 2306.8, 788.5, 1337.6, 421.3, 99.9, 993, 1592.9, 240,
1611, 789, 690.9, 1347.5, 1044.3), RAWFP = c(1010, 457, 2284,
881, 1583, 411, 97, 998, 1554, 250, 1603, 724, 705, 1375, 976
), EffortMM = c(287, 82.5, 1107.31, 86.9, 336.3, 84, 23.2, 130.3,
116, 72, 258.7, 230.7, 157, 246.9, 69.9)), row.names = c(NA,
15L), class = "data.frame")

	[[alternative HTML version deleted]]


From |@|z7r @end|ng |rom gm@||@com  Thu Dec 31 19:24:11 2020
From: |@|z7r @end|ng |rom gm@||@com (faiz rasool)
Date: Thu, 31 Dec 2020 23:24:11 +0500
Subject: [R] =?utf-8?q?Praising_the_Binancer_package_from_a_blind_user?=
	=?utf-8?q?=E2=80=99s_perspective_and_few_questions_about_technical?=
	=?utf-8?q?_indicators=2E?=
Message-ID: <CAFhDWBXaQnT3if-3+tYKjLfVz3fzZ9eBVZMNdzM7+mMYSWkL1g@mail.gmail.com>

Hi all,
I am a totally blind R user. Few days ago I got to know about the
Binancer package. This package solved one of the biggest issues I was
facing while learning about trading on Binance. The problem of how a
blind user can view candle stick charts to make trading decisions.
The functions in Binancer packaged allowed me to download candle stick
charts and order book in R environment from Binance. After downloading
I used write.CSV function to read data in Microsoft Excel. It has
significantly improved things for me.
 I?d like to say that R in general and in this case Binancer package
has many time made possible those things which were otherwise not
possible for me as a blind  computer user.
Now to my questions. Is there a function in Binancer package that I
have not found yet that allows me to download information of technical
indicators like RSI and other indicators? If Binancer does not have
this feature currently then are there any other R packages that will
help me in downloading the information about technical indicators from
crypto   currency exchanges to R environment.
One last question is there any R package that supports the BitMax
exchange? I think there is a package that supports BitMex exchange but
I have not come across a package that supports BitMax.
If currently it is not possible to download technical indicators from
exchanges then I do hope that if any package developer is reading this
email will consider bringing this functionality to R as blind users
will like me will really benefit from it.

Regards,
Faiz.


From bgunter@4567 @end|ng |rom gm@||@com  Thu Dec 31 20:45:01 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 31 Dec 2020 11:45:01 -0800
Subject: [R] =?utf-8?q?Praising_the_Binancer_package_from_a_blind_user?=
	=?utf-8?q?=E2=80=99s_perspective_and_few_questions_about_technical?=
	=?utf-8?q?_indicators=2E?=
In-Reply-To: <CAFhDWBXaQnT3if-3+tYKjLfVz3fzZ9eBVZMNdzM7+mMYSWkL1g@mail.gmail.com>
References: <CAFhDWBXaQnT3if-3+tYKjLfVz3fzZ9eBVZMNdzM7+mMYSWkL1g@mail.gmail.com>
Message-ID: <CAGxFJbQbfrUkAObUry9YDXQWkxkK1WW8iJNK_F2F56VtqejjzQ@mail.gmail.com>

Wrong list. Ask on r-sig-finance. You should also probably consult this
before you post any further queries:
https://cran.r-project.org/web/views/Finance.html

Finally, search! -- e.g. on "R package RSI" brought up what looked like
several relevant hits.

In short, do your homework before posting further.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Dec 31, 2020 at 10:24 AM faiz rasool <faiz7r at gmail.com> wrote:

> Hi all,
> I am a totally blind R user. Few days ago I got to know about the
> Binancer package. This package solved one of the biggest issues I was
> facing while learning about trading on Binance. The problem of how a
> blind user can view candle stick charts to make trading decisions.
> The functions in Binancer packaged allowed me to download candle stick
> charts and order book in R environment from Binance. After downloading
> I used write.CSV function to read data in Microsoft Excel. It has
> significantly improved things for me.
>  I?d like to say that R in general and in this case Binancer package
> has many time made possible those things which were otherwise not
> possible for me as a blind  computer user.
> Now to my questions. Is there a function in Binancer package that I
> have not found yet that allows me to download information of technical
> indicators like RSI and other indicators? If Binancer does not have
> this feature currently then are there any other R packages that will
> help me in downloading the information about technical indicators from
> crypto   currency exchanges to R environment.
> One last question is there any R package that supports the BitMax
> exchange? I think there is a package that supports BitMex exchange but
> I have not come across a package that supports BitMax.
> If currently it is not possible to download technical indicators from
> exchanges then I do hope that if any package developer is reading this
> email will consider bringing this functionality to R as blind users
> will like me will really benefit from it.
>
> Regards,
> Faiz.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


