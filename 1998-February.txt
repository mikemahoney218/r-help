From nancy at stat.ubc.ca  Sun Feb  1 02:43:56 1998
From: nancy at stat.ubc.ca (Nancy Heckman)
Date: Wed, 31 Dec 1997 17:43:56 -75200 (PST)
Subject: R-beta: R on NT
Message-ID: <199801010143.RAA01586@emily.stat.ubc.ca>

I'm having trouble with R on NT.
Sept 1 97 version 50 in file rsept works fine, except I can't boost 
the memory - either with the menu or with DOS command Rsept -v50 
In fact, if I run in DOS command mode (no shortcut) I get NT error
window:  errno 1411.  But then R runs.
With rseptbeta and rsept31 versions, R starts for a millisecond and then
 disappears.   I've tried replacing the executable in resept31 with the
 new executable, but still have a problem.  
 With rsept31 I get the errno 1411 and then a flash of R
 With rseptbeta I just get the flash of R
Does anyone know what's going wrong?  I hope it's something simple.

I've been having other problems - relatively minor - with the version that
I can use.  For instance, apply doesn't seem to work.  But first things 
first...

Thanks.

Nancy Heckman

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Mon Feb  2 11:45:52 1998
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 2 Feb 1998 11:45:52 +0100
Subject: R-beta: Fig driver for "R"?
In-Reply-To: <34D1B59A.584526FE@ipe.pw.edu.pl> (message from Wojtek Zabolotny
	on Fri, 30 Jan 1998 12:12:27 +0100)
Message-ID: <199802021045.LAA27220@sophie.ethz.ch>

Dear Wojtek,

1) There should be a [x]fig(.) driver in one of the next releases of R.
   The internal device driver code is currently being upgraded quite a bit
   and it's not worth to spend time on porting devices to R version 0.61.1.

>>>>> "Wojtek" == Wojtek Zabolotny <wzab at ipe.pw.edu.pl> writes:

    Wojtek> --------------5CF935C979296E5A508DE04D Content-Type:
    Wojtek> text/plain; charset=us-ascii Content-Transfer-Encoding: 7bit

    Wojtek>     Hello all R users and developers!

    Wojtek> In the "Notes on R" I have found the following information:
		    ----------
Well, these are not so accurate really; these are just a relatively quick
port of the original "Notes on S" to help people getting started.

We (the R-core team) are really looking for volunteers who are willing to
write (in LaTeX if possible) a chapter or so, for tutorials on using R in
different topics.

I'm now citing Fritz Leisch, who said on R-devel,  last week

>> Date: Thu, 29 Jan 1998 10:17:29 +0100
>> From: Friedrich Leisch <Friedrich.Leisch at ci.tuwien.ac.at>
>> To: r-devel at stat.math.ethz.ch
>> Subject: Summary of mails concerning R help system

>> .....

    Fritz> 5) That's actually a wish/suggestion from me: Maybe somebody
    Fritz> wants to help the R project but doesn't know too much about
    Fritz> writing code etc. ... we need a lot more of and better
    Fritz> documentation, e.g., short tutorials on various topics to get
    Fritz> people started. These should explain the basic concept of
    Fritz> something and accompany it with some examples that can be copied
    Fritz> & pasted ...

    Fritz> The current demos or the appendix of the R notes could get you
    Fritz> started.  Topics could include those as the the non-existing
    Fritz> links under ``Data Analysis with R'' (Basic Statistics,
    Fritz> Exploratory Data Analysis, Linear Models, ...)

    Fritz> So if you think you could write two or three pages on how to use
    Fritz> R for any topic you could simply write it in LaTeX ideally in
    Fritz> such a way that it can be translated to HTML using hyperlatex

-----------

    Wojtek> (page 60, 13-th footnote) "... a better solution is to use the
    Wojtek> fig() driver (available from statlib) and use a conversion
    Wojtek> program, such as fig2dev, to convert the resultant fig code to
    Wojtek> Encapsulated Podtscript."  I was very glad to read it, because
    Wojtek> I'm often forced to use specifically Polish characters (like
    Wojtek> L-stroke, a-ogonek etc.) in my drawings' legend, and passing
    Wojtek> the texts through fig2dev gives a possibility to use LaTeX (in
    Wojtek> fact "babel") syntax for defining international characters.

    Wojtek> I downloaded the fig driver from statlib
    Wojtek> (http://lib.stat.cmu.edu/S/), and try to compile it, however
    Wojtek> without success. The gcc complains about "device.h" file, which
    Wojtek> is not available (even in R sources).  Where can I find this
    Wojtek> file?

as said above, it's not worth to start porting to 0.61.1 now..

    Wojtek>                  Thanks in advance Wojciech Zabolotny
    Wojtek> wzab at ipe.pw.edu.pl BTW. The "fig" driver is very old ()

    Wojtek> <HTML> <TT>&nbsp;&nbsp;&nbsp; Hello all R users and
    Wojtek> developers!</TT><TT></TT>

    ..... lots of HTML deleted ....


2) PLEASE: If you use  Mozilla  aka Netscape for sending E-mail,
   please disable the ``feature'' of sending messages both in plain
   ASCII and in HTML.
   On the R-help  (and many other) mailing list(s),
   many people don't want to get messages that are blown up by a factor of
   four, just for the potential possibility of ``prettyfied'' text...
   I assume that you didn't even realize that you were sending your message
   ``twice''.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Mon Feb  2 12:22:22 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Feb 1998 12:22:22 +0100
Subject: R-beta: Fig driver for "R"?
In-Reply-To: Martin Maechler's message of Mon, 2 Feb 1998 11:45:52 +0100
References: <199802021045.LAA27220@sophie.ethz.ch>
Message-ID: <x2lnvuuu8h.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler at stat.math.ethz.ch> writes:

> 
> Dear Wojtek,
> 
> 1) There should be a [x]fig(.) driver in one of the next releases of R.
>    The internal device driver code is currently being upgraded quite a bit
>    and it's not worth to spend time on porting devices to R version 0.61.1.
> 
> >>>>> "Wojtek" == Wojtek Zabolotny <wzab at ipe.pw.edu.pl> writes:
> 
>     Wojtek> --------------5CF935C979296E5A508DE04D Content-Type:
>     Wojtek> text/plain; charset=us-ascii Content-Transfer-Encoding: 7bit
> 
>     Wojtek>     Hello all R users and developers!
> 
>     Wojtek> In the "Notes on R" I have found the following information:
> 		    ----------
> Well, these are not so accurate really; these are just a relatively quick
> port of the original "Notes on S" to help people getting started.

- and as to the original question, two things:

(a) Many of the recent changes in the graphics system in R were done
with a strong view to making it trivial to do the fig-format output.

(b) (For the meantime) Other people have reported good experiences
with the pstoedit program, available in the .../contrib/applications
section of ftp.x.org and its mirrors. You also need Ghostscript for
this.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mrn at superh.hg.med.umich.edu  Wed Feb  4 20:22:14 1998
From: mrn at superh.hg.med.umich.edu (Matthew R. Nelson)
Date: Wed, 4 Feb 1998 14:22:14 -0500 (EST)
Subject: R-beta: Functionality of tck=1, and mtext()
Message-ID: <Pine.3.87.9802041413.A20207-0100000@superh.hg.med.umich.edu>

In the version of R that I am running I have found two advertised 
features that don't appear to work correctly:

Version 0.61.0 Alpha (December 21, 1997)
(installed using r-base-0.61.0-2.i386.rpm)

1. mtext adj parameter is seriously offset to the right. For example: 
> par(oma=c(0,0,3,0)) 
> mtext("Try this", side=3, outer=T) # nothing is observed on x11
> mtext("Now try this", side=3, outer=T, adj=0) # appears in upper right 
                                                # hand corner

2. tck=1 does not create grid lines.  Any call with tck=whatever is ignored.
> plot(1,1)  
> axis(1, at=1.2, tck=1)  # standard tick mark below the axis

Are there workarounds to these problems?

Thanks for any help,

Matt
----------------------------------------------------------------------------
Matthew R. Nelson
Dept. of Human Genetics         
University of Michigan              http://www-personal.umich.edu/~ticul/
4711 Medical Science II             email: ticul at umich.edu
Ann Arbor, MI  48109-0618           phone: (313) 647-3151
----------------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Thu Feb  5 10:50:44 1998
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 5 Feb 1998 10:50:44 +0100
Subject: R-beta: Functionality of tck=1, and mtext()
In-Reply-To: <Pine.3.87.9802041413.A20207-0100000@superh.hg.med.umich.edu>
	(mrn@superh.hg.med.umich.edu)
Message-ID: <199802050950.KAA04910@sophie.ethz.ch>

Yes,
these are two ``bugs'' (missing functionality), 
	[and still in the current development version of R]

1) the  'tck = ..' argument is simply disregarded in axis(..)

2) mtext(..., outer = TRUE)  puts things at wrong places,
			
			[exactly the same it used to do even for outer=F,
			 in 0.50 or so...]

"2)" should hopefully be fixed quickly, or at least in the next release of R
------
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From palme at uni-wuppertal.de  Tue Feb 10 15:14:32 1998
From: palme at uni-wuppertal.de (Hubert Palme)
Date: Tue, 10 Feb 1998 15:14:32 +0100 (MET)
Subject: Makefiles, was Re: R-beta:0.61.1 Problem with "make docs"
In-Reply-To: <Pine.SUN.3.95.980115083356.18298B-100000@chekov>
References: <Pine.SUN.3.95.980115094935.10831A-100000@paca>
	<Pine.SUN.3.95.980115083356.18298B-100000@chekov>
Message-ID: <199802101414.PAA08591@wrin27.urz.uni-wuppertal.de>

I just installed R and saw this thread in the archive :-)

Thomas Lumley: 
 > On Thu, 15 Jan 1998, Ben Bolker wrote:
 > 
 > > 
 > >   Would it make sense to add something to configure that looks for gnu 
 > > make and sets MAKE=gnu make if it's available?  (This might forestall this
 > > FAQ a certain amount of the time ...)
 > > 
 > 
 > It would make sense, but it would make even more sense not to require GNU
 > make, so we plan to do that instead.

As for the Makefiles I would strongly recommend two changes:

1. Insert at the beginning of each Makefile

SHELL = /bin/sh

I stumbled over it becuase I normnally use tcsh, and this doesn't
understand the (bourne shell) syntax of the control structures in the
Makefiles.

2. Change all make calls to $(MAKE)

So we are shure that all the recursive make calls use the same
make. This was the problem with GNUmake not solving the 'make docs'
problem.

Thanks to all the authors of R!

-- 
======================================================================
Hubert Palme         Bergische Universitaet-Gesamthochschule Wuppertal
                                      Computing  Center
                                      D-42097 Wuppertal
Email: palme at uni-wuppertal.de             (Germany)
http://www.hrz.uni-wuppertal.de/hrz/personen/h_palme.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Feb 10 15:43:03 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Feb 1998 15:43:03 +0100
Subject: Makefiles, was Re: R-beta:0.61.1 Problem with "make docs"
In-Reply-To: palme@uni-wuppertal.de's message of Tue, 10 Feb 1998 15:14:32 +0100 (MET)
References: <Pine.SUN.3.95.980115094935.10831A-100000@paca>
	<Pine.SUN.3.95.980115083356.18298B-100000@chekov>
	<199802101414.PAA08591@wrin27.urz.uni-wuppertal.de>
Message-ID: <x2afbzfrlz.fsf@blueberry.kubism.ku.dk>

palme at uni-wuppertal.de (Hubert Palme) writes:

> 1. Insert at the beginning of each Makefile
> 
> SHELL = /bin/sh
> 
> I stumbled over it becuase I normnally use tcsh, and this doesn't
> understand the (bourne shell) syntax of the control structures in the
> Makefiles.

Certainly can't harm... I thought that make would be wiser than using
the user shell, but apparently not.

> 
> 2. Change all make calls to $(MAKE)
> 
> So we are shure that all the recursive make calls use the same
> make. This was the problem with GNUmake not solving the 'make docs'
> problem.

Yes, but... One of the things you see flashing before your eyes when
you run configure scripts for other packages is "checking whether make
sets $(MAKE)", which sort of gives the impression that there are
versions of make that *don't* do that. I wouldn't know what to do in
that case. Currently, the plan is to try to make things work with any
kind of make, but in the longer run, we may have to insist on gmake,
in which case your suggestion could be used.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From palme at uni-wuppertal.de  Tue Feb 10 16:54:59 1998
From: palme at uni-wuppertal.de (Hubert Palme)
Date: Tue, 10 Feb 1998 16:54:59 +0100 (MET)
Subject: Makefiles, was Re: R-beta:0.61.1 Problem with "make docs"
In-Reply-To: <x2afbzfrlz.fsf@blueberry.kubism.ku.dk>
References: <Pine.SUN.3.95.980115094935.10831A-100000@paca>
	<Pine.SUN.3.95.980115083356.18298B-100000@chekov>
	<199802101414.PAA08591@wrin27.urz.uni-wuppertal.de>
	<x2afbzfrlz.fsf@blueberry.kubism.ku.dk>
Message-ID: <199802101554.QAA09176@wrin27.urz.uni-wuppertal.de>

Peter Dalgaard BSA: 
 > palme at uni-wuppertal.de (Hubert Palme) writes:
 > 
 > > 1. Insert at the beginning of each Makefile
 > > 
 > > SHELL = /bin/sh
 > > 
 > > I stumbled over it becuase I normnally use tcsh, and this doesn't
 > > understand the (bourne shell) syntax of the control structures in the
 > > Makefiles.
 > 
 > Certainly can't harm... I thought that make would be wiser than using
 > the user shell, but apparently not.

Our Irix make takes the shell to be used from the SHELL environment(!)
variable (and e.g. tcsh sets it), GNUmake does not. So it's better to
set a SHELL variable at the beginning of each Makfile.

 > 
 > > 
 > > 2. Change all make calls to $(MAKE)
 > > 
 > > So we are shure that all the recursive make calls use the same
 > > make. This was the problem with GNUmake not solving the 'make docs'
 > > problem.
 > 
 > Yes, but... One of the things you see flashing before your eyes when
 > you run configure scripts for other packages is "checking whether make
 > sets $(MAKE)", which sort of gives the impression that there are
 > versions of make that *don't* do that. I wouldn't know what to do in
 > that case. Currently, the plan is to try to make things work with any
 > kind of make, but in the longer run, we may have to insist on gmake,
 > in which case your suggestion could be used.

Hmm... Don't know enough about the autoconf/configure mechanism and
how other programmers solve this problem, but couldn't be configure
convinced in this case to insert

MAKE = make

into each Makefile?? This should be the minimum each stupid make
should understand :-)

-- 
======================================================================
Hubert Palme         Bergische Universitaet-Gesamthochschule Wuppertal
                                      Computing  Center
                                      D-42097 Wuppertal
Email: palme at uni-wuppertal.de             (Germany)
http://www.hrz.uni-wuppertal.de/hrz/personen/h_palme.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maclean at stout.atd.ucar.edu  Tue Feb 10 18:52:44 1998
From: maclean at stout.atd.ucar.edu (Gordon Maclean)
Date: Tue, 10 Feb 1998 17:52:44 GMT
Subject: R-beta: $PERL in configure
Message-ID: <199802101752.RAA04692@ripple.atd.ucar.edu>


One minor request, on the subject of installation scripts.
Could you change "configure" to use the value of $PERL,
when it checks for the version number?  

  PERL_VERSION_NUMBER=`$PERL -v | sed -n 's/^.*perl.*version \(.\).*/\1/p'
  
rather than:

  PERL_VERSION_NUMBER=`perl -v | sed -n 's/^.*perl.*version \(.\).*/\1/p'`


On our systems, plain perl is version 4, and we must set PERL to "perl5"
in config.site. Then the above version check fails to detect version 5.

I believe that the value of $PERL is otherwise propagated to the build scripts.

Thanks,

Gordon



 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Friedrich.Leisch at ci.tuwien.ac.at  Tue Feb 10 19:17:54 1998
From: Friedrich.Leisch at ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 10 Feb 1998 19:17:54 +0100
Subject: R-beta: $PERL in configure
In-Reply-To: <199802101752.RAA04692@ripple.atd.ucar.edu>
References: <199802101752.RAA04692@ripple.atd.ucar.edu>
Message-ID: <199802101817.TAA10467@galadriel.ci.tuwien.ac.at>


Thanks very much for the bug report, I've fixed it as you suggested
... should be in tomorrow's snapshot.

Best & thanks again,
Fritz


>>>>> On Tue, 10 Feb 1998 17:52:44 GMT,
>>>>> Gordon Maclean (GM) wrote:

GM> One minor request, on the subject of installation scripts.
GM> Could you change "configure" to use the value of $PERL,
GM> when it checks for the version number?  

GM>   PERL_VERSION_NUMBER=`$PERL -v | sed -n 's/^.*perl.*version \(.\).*/\1/p'
GM>   
GM> rather than:

GM>   PERL_VERSION_NUMBER=`perl -v | sed -n 's/^.*perl.*version \(.\).*/\1/p'`


GM> On our systems, plain perl is version 4, and we must set PERL to "perl5"
GM> in config.site. Then the above version check fails to detect version 5.

GM> I believe that the value of $PERL is otherwise propagated to the build scripts.

GM> Thanks,

GM> Gordon



 
GM> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
GM> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
GM> Send "info", "help", or "[un]subscribe"
GM> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
GM> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bensmail at rulfsw.fsw.LeidenUniv.nl  Thu Feb 12 11:04:52 1998
From: bensmail at rulfsw.fsw.LeidenUniv.nl (Bensmail)
Date: Thu, 12 Feb 1998 10:04:52 +0000
Subject: R-beta: Vertical segment.....
Message-ID: <34E2C945.7BC9E1D6@rulfsw.fsw.leidenuniv.nl>

Hello,


I need to draw a vertical line on my plot, the uncertainty segment
(which is
a vertical segment on every point  of my plot so I can have an idea
about
the probability that  a point is misclassified.... clustering
problem.....)

I remember I have done it a long time ago in Splus using a function
called
"segment" to which we give the extrem point of the segment , I didn't
find
such function in R,  does it exist in R and if yes what is the name
please?


Thank you so much


Halima ,
The Netherlands

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bensmail at rulfsw.fsw.LeidenUniv.nl  Thu Feb 12 11:13:35 1998
From: bensmail at rulfsw.fsw.LeidenUniv.nl (Bensmail)
Date: Thu, 12 Feb 1998 10:13:35 +0000
Subject: R-beta: vertical Segment/Ignore
Message-ID: <34E2CB51.A6E3951@rulfsw.fsw.leidenuniv.nl>

Hello again,


Please ignore my previous query, I found the function. It is
"segments" and not "segment".

I apologize for encumbering your e-mail box with my two e-mails.


Halima

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phlamber at luc.ac.be  Thu Feb 12 13:08:37 1998
From: phlamber at luc.ac.be (Philippe Lambert)
Date: Thu, 12 Feb 1998 13:08:37 +0100 (MET)
Subject: R-beta: Quantile function
Message-ID: <Pine.OSF.3.96.980212130628.22912D-100000@alpha>

Is the following behaviour of the quantile function what one would expect?
> a <- 1:100
> quantile(a,.6)
 60% 
60.4 

Philippe


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Feb 12 13:42:03 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Feb 1998 13:42:03 +0100
Subject: R-beta: Quantile function
In-Reply-To: Philippe Lambert's message of Thu, 12 Feb 1998 13:08:37 +0100 (MET)
References: <Pine.OSF.3.96.980212130628.22912D-100000@alpha>
Message-ID: <x21zx9806c.fsf@blueberry.kubism.ku.dk>

Philippe Lambert <phlamber at luc.ac.be> writes:

> 
> Is the following behaviour of the quantile function what one would expect?
> > a <- 1:100
> > quantile(a,.6)
>  60% 
> 60.4 

Yes...

And so is
> quantile(1:10)
   0%   25%   50%   75%  100% 
 1.00  3.25  5.50  7.75 10.00 

(Note that *three* values, 8,9,10 fall above the 75% quantile!)

There are many possible definition of quantiles. R's (and Splus's) is
to put 0% at the minimum and 100% at the maximum, and in general, the
k-th smallest is at (k-1)/(n-1), with linear interpolation between the
points. (Try plot(quantile(rnorm(5),seq(0,1,.01))) to see it). 

This can surely be criticized, e.g. you'll always have 1 observation
below the 0.00..001 quantile! Alternatives might for example use
(k-.5)/n which puts the smallest observation at 1/2n, but then it's
tricky to define quantiles outside (1/2n,1-1/2n).


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From palme at uni-wuppertal.de  Thu Feb 12 17:39:08 1998
From: palme at uni-wuppertal.de (Hubert Palme)
Date: Thu, 12 Feb 1998 17:39:08 +0100 (MET)
Subject: R-beta: looking for morley.data
Message-ID: <199802121639.RAA16057@wrin27.urz.uni-wuppertal.de>

Hello,

I am looking for the file morley.data, which is needed for the
introductory session of R.ps (Rnotes.ps.gz) and cannot find it.

Can anyone help?

Thanks!

-- 
======================================================================
Hubert Palme         Bergische Universitaet-Gesamthochschule Wuppertal
                                      Computing  Center
                                      D-42097 Wuppertal
Email: palme at uni-wuppertal.de             (Germany)
http://www.hrz.uni-wuppertal.de/hrz/personen/h_palme.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From morse at pobox.com  Mon Feb 16 17:30:51 1998
From: morse at pobox.com (Doug Morse)
Date: Mon, 16 Feb 1998 10:30:51 -0600 (CST)
Subject: R-beta: Various R Questions and Comments
Message-ID: <199802161630.KAA22951@playground.ltc.vanderbilt.edu>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 5982 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980216/81b069c2/attachment.pl

From p.dalgaard at biostat.ku.dk  Mon Feb 16 18:03:55 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Feb 1998 18:03:55 +0100
Subject: R-beta: Various R Questions and Comments
In-Reply-To: morse@pobox.com's message of Mon, 16 Feb 1998 10:30:51 -0600 (CST)
References: <199802161630.KAA22951@playground.ltc.vanderbilt.edu>
Message-ID: <x2d8gna3d0.fsf@blueberry.kubism.ku.dk>

morse at pobox.com (Doug Morse) writes:

> 
> Hi!
> 
> I've been using R for about nine months now -- it's great.  Nicely done!
> 
> Here are some questions / comments I have.  Some are trivialities, but I
> thought I'd mention them anyway.  Others are a bit more involved.  BTW,
> I run R (Version 0.61.1 Alpha) on RedHat Linux 4.1
> 
> 1.  Interrupt Key
> 
>     How is one supposed to interrupt a command?  In S-Plus, one uses
>     the 'Escape' key.  In R, I can press my terminal's Interrupt
>     key (Ctrl-C), but this only works *once*.  After that, the event
>     seems to get ignored.  This is a nuicance for two reasons:  (a) I
>     can't interrupt a command but once in a session, and (b) at the
>     "> " prompt, I can't press Ctrl-C to abort my many typing errors
>     but once a session as well.

This is a bug in the readline library. Upgrade to 2.1/3.0.

> 2.  Sourcing MS-DOS Files
> 
>     I also use R on my laptop (Win95) and often transfer files
>     back and forth between it and my linux host.  R doesn't
>     seem to like this much -- I always have to convert [newlines]
>     to [newlines-carriage returns] and back.  Not a big deal, but
>     a bit annoying.  Could 'source' not be modified to auto-detect
>     end-of-line method?

Probably, but you could also make a habit of copying your files with
mcopy -t ...

> 
> 3.  Coercing Types within a DataFrame
> 
>     This is a more serious problem.  In S-Plus, I can run:
>     
>         myframe <- read.table('mydata.dat', T);
>         myframe[, 'Steps'] <- as.factor(myframe[, 'Steps']);
> 

That looks like a bug. However, this works: 

> data(airquality)
> airquality$"Day"<-factor(airquality$"Day")
> airquality["Day"]<-codes(airquality["Day"])

and upcoming versions will allow:
> airquality<-transform(airquality,Day=factor(Day))


> 4.  Anovalist.lm
> 
..
>     
>     For example, the following should be allowed:
> 
>     -----
>     Analysis of Variance Table
>     
>     Model 1: Satisfaction + Age ~ Anxiety
>     Model 2: Satisfaction ~ Age + Severity + Anxiety
>     
>        Res.Df  Res.Sum-Sq  Df  Sum-Sq       F  Pr(>F)
>     1      21        2152
>     2      19        2012   2   139.9  0.6609  0.5279
>     -----
>     
>     It represents a test of whether beta1 = -1.0 and beta2 = 0.0
>     using the generalized linear test statistic (see "Applied

Wouldn't this be better done using offsets?

> 5.  AOV
> 
>     Any word on 'aov' and friends?  Or alternatively, getting 'lm' (and

Ross has been talking about it for a while now. Doug Bates has done
some work on lme() and is close to having something releasable there.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From morse at pobox.com  Mon Feb 16 20:12:06 1998
From: morse at pobox.com (Doug Morse)
Date: Mon, 16 Feb 1998 13:12:06 -0600 (CST)
Subject: R-beta: Various R Questions and Comments
In-Reply-To: <x2d8gna3d0.fsf@blueberry.kubism.ku.dk> from "Peter Dalgaard BSA" at Feb 16, 98 06:03:55 pm
Message-ID: <199802161912.NAA23622@playground.ltc.vanderbilt.edu>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 2304 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980216/52eae549/attachment.pl

From p.dalgaard at biostat.ku.dk  Mon Feb 16 20:33:31 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Feb 1998 20:33:31 +0100
Subject: R-beta: Various R Questions and Comments
In-Reply-To: morse@pobox.com's message of Mon, 16 Feb 1998 13:12:06 -0600 (CST)
References: <199802161912.NAA23622@playground.ltc.vanderbilt.edu>
Message-ID: <x2btw7uyyc.fsf@blueberry.kubism.ku.dk>

morse at pobox.com (Doug Morse) writes:

> > >     
> > >        Res.Df  Res.Sum-Sq  Df  Sum-Sq       F  Pr(>F)
> > >     1      21        2152
> > >     2      19        2012   2   139.9  0.6609  0.5279
> > >     -----
> > >     
> > >     It represents a test of whether beta1 = -1.0 and beta2 = 0.0
> > >     using the generalized linear test statistic (see "Applied
> > 
> > Wouldn't this be better done using offsets?
> 
> I'm not sure what you mean by 'offsets'.  Could you elaborate a
> bit?

Whoops, sorry. That feature is glm only (I wonder why...). Basically:


glm(formula = Ozone ~ Day)

..
Coefficients:
               Value  Std.error  t value  P(>|t|)
(Intercept)  42.9039     6.2883   6.8228   0.0000
Day          -0.0499     0.3531  -0.1412   0.8879

glm(formula = Ozone ~ Day + offset(-Day/20))

..
Coefficients:
               Value  Std.error  t value  P(>|t|)
(Intercept)  42.9039     6.2883   6.8228   0.0000
Day           0.0001     0.3531   0.0004   0.9997


(lm() just silently disregards the offset term. Needs fixing, obviously...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Feb 16 22:34:37 1998
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 16 Feb 1998 13:34:37 -0800 (PST)
Subject: R-beta: Various R Questions and Comments
In-Reply-To: <199802161912.NAA23622@playground.ltc.vanderbilt.edu>
Message-ID: <Pine.LNX.3.96.980216132538.4894C-100000@buffy>

On Mon, 16 Feb 1998, Doug Morse wrote:
> Peter Dalgaard BSA wrote:
> > morse at pobox.com (Doug Morse) writes:
> 
> > > 4.  Anovalist.lm
> > > 
> > ..
> > >     
> > >     For example, the following should be allowed:
> > > 
> > >     -----
> > >     Analysis of Variance Table
> > >     
> > >     Model 1: Satisfaction + Age ~ Anxiety
> > >     Model 2: Satisfaction ~ Age + Severity + Anxiety
> > >     
> > >        Res.Df  Res.Sum-Sq  Df  Sum-Sq       F  Pr(>F)
> > >     1      21        2152
> > >     2      19        2012   2   139.9  0.6609  0.5279
> > >     -----
> > >     
> > >     It represents a test of whether beta1 = -1.0 and beta2 = 0.0
> > >     using the generalized linear test statistic (see "Applied
> > 
> > Wouldn't this be better done using offsets?
> 
> I'm not sure what you mean by 'offsets'.  Could you elaborate a
> bit?

An offset is a term in the model with coefficient set at 1. There are all
sorts of uses, but one is exactly what you want: testing a coefficient
against a non-zero hypothesised value.

Unfortunately lm() doesn't implement offsets, but glm() does
Your two models are
	glm(Satisfaction~Age+Severity+Anxiety,family=gaussian())
	glm(Satisfaction~offset(-1.0*Age)+Anxiety,family=gaussian())
which could be compared with anova.glm (the family=gaussian()) option is
not necessary as it is the default)


Thomas Lumley

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Tue Feb 17 09:18:11 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Tue, 17 Feb 1998 09:18:11 +0100 (MET)
Subject: R-beta: dataframes and function side effects
Message-ID: <9802170818.AA21199@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 1091 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980217/93056752/attachment.pl

From jlindsey at luc.ac.be  Tue Feb 17 09:22:41 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Tue, 17 Feb 1998 09:22:41 +0100 (MET)
Subject: R-beta: Various R Questions and Comments
In-Reply-To: <x2btw7uyyc.fsf@blueberry.kubism.ku.dk> from "Peter Dalgaard BSA" at Feb 16, 98 08:33:31 pm
Message-ID: <9802170822.AA21240@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 451 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980217/fbe5a51b/attachment.pl

From p.dalgaard at biostat.ku.dk  Tue Feb 17 10:13:03 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Feb 1998 10:13:03 +0100
Subject: R-beta: Various R Questions and Comments
In-Reply-To: Jim Lindsey's message of Tue, 17 Feb 1998 09:22:41 +0100 (MET)
References: <9802170822.AA21240@alpha.luc.ac.be>
Message-ID: <x2d8gmoaqo.fsf@blueberry.kubism.ku.dk>

Jim Lindsey <jlindsey at luc.ac.be> writes:

> 
> Offsets only are really useful if the link function is not the
> identity. Hence little use in lm. Jim

Agree and disagree.

Agr.: Just subtract on l.h.s.

Dis.: Consistency, expressing the right thing, etc.

The current situation where lm() accept y~x+offset(...) and treats it
as y~x is not sound, though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Tue Feb 17 10:22:46 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Tue, 17 Feb 1998 10:22:46 +0100 (MET)
Subject: R-beta: Various R Questions and Comments
In-Reply-To: <x2d8gmoaqo.fsf@blueberry.kubism.ku.dk> from "Peter Dalgaard BSA" at Feb 17, 98 10:13:03 am
Message-ID: <9802170922.AA24374@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 1398 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980217/b3806d75/attachment.pl

From plummer at iarc.fr  Tue Feb 17 15:32:04 1998
From: plummer at iarc.fr (Martyn Plummer)
Date: Tue, 17 Feb 1998 15:32:04 +0100
Subject: R-beta: dataframes and function side effects
References: <9802170818.AA21199@alpha.luc.ac.be>
Message-ID: <34E99F64.9A5A127@iarc.fr>

Jim Lindsey wrote:
> 
> I have a function that returns a dataframe. A second funtion calls the
> first to obtain the dataframe, then attaches it to have access to the
> column names. Lo and behold, this is done globally so that, after
> running the second function a few times, I have all kinds of
> dataframes attached giving all sorts of weird errors. If I put a
> detach at the end of the second function, things are better, but
> during debugging, if I ctrl-C while it is running (this is a random
> effects Cox PH model, rather slow), I start accumulating dataframes
> again. I suppose that if (some version of) S-Plus does the same thing,
> this must be good stuff but it is a very annoying side effect of a
> function to have dataframes attached globally and not locally.

S-PLUS 3.3 does do the same thing. If you want to safely detach
the data frame even when you interrupt your function, you could
put 
	on.exit(if(search()[2]=="your.data.frame") detach())

at the beginning of your function.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Tue Feb 17 15:31:52 1998
From: plummer at iarc.fr (Martyn Plummer)
Date: Tue, 17 Feb 1998 15:31:52 +0100
Subject: R-beta: dataframes and function side effects
References: <9802170818.AA21199@alpha.luc.ac.be>
Message-ID: <34E99F58.31C443C4@iarc.fr>

Jim Lindsey wrote:
> 
> I have a function that returns a dataframe. A second funtion calls the
> first to obtain the dataframe, then attaches it to have access to the
> column names. Lo and behold, this is done globally so that, after
> running the second function a few times, I have all kinds of
> dataframes attached giving all sorts of weird errors. If I put a
> detach at the end of the second function, things are better, but
> during debugging, if I ctrl-C while it is running (this is a random
> effects Cox PH model, rather slow), I start accumulating dataframes
> again. I suppose that if (some version of) S-Plus does the same thing,
> this must be good stuff but it is a very annoying side effect of a
> function to have dataframes attached globally and not locally.

S-PLUS 3.3 does do the same thing. If you want to safely detach
the data frame even when you inturrupt your function, you could
put 
	on.exit(if(search()[2]=="your.data.frame") detach())

at the beginning of your function.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From langms at cip.mathematik.uni-stuttgart.de  Tue Feb 17 15:38:20 1998
From: langms at cip.mathematik.uni-stuttgart.de (Markus Lang)
Date: Tue, 17 Feb 1998 15:38:20 +0100 (MEZ)
Subject: R-beta: R on AIX running with errors
Message-ID: <Pine.A41.3.96.980217153204.24644B-100000@cip30.mathematik.uni-stuttgart.de>

Hi,

I am doing a project to make R-0.61.1 available on 30 IBM RISC/6000
machines running AIX 4.1.5.0. Running the make command works fine after
some changes, but R does not behave as it should.
 
Here some examples of error messages which I get:

> plot(1:20)
Error: Length cannot be negative
> hist(1:20)
Error in seq(z$l, z$u, length = z$n + 1) : negative length vectors are not
allowed
> library(mva)
Error: invalid number of copies in "rep"
>

I made two changes because of AIX, before starting ./configure and make,
so that make was runing without error messages

1. Setting SHLIBLDFLAGS="-shared" in the config.site file
2. deleting the function "double trunc(double x)" in the file
   src/math/round.c

Changes I made because of installing R on an AFS file system are
substituting hard links by symbolic links and preventing, due to this
changes, the deleting of files.

Who has an idea how to make at least the graphic functions working?

Thanks

Markus


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Tue Feb 17 16:27:22 1998
From: bates at stat.wisc.edu (Douglas Bates)
Date: 17 Feb 1998 09:27:22 -0600
Subject: R-beta: Re: Compiling for AFS [was: R on AIX running with errors]
In-Reply-To: Markus Lang's message of Tue, 17 Feb 1998 15:38:20 +0100 (MEZ)
References: <Pine.A41.3.96.980217153204.24644B-100000@cip30.mathematik.uni-stuttgart.de>
Message-ID: <6rd8gmp7z9.fsf@verdi.stat.wisc.edu>

Markus Lang <langms at cip.mathematik.uni-stuttgart.de> writes:

> Changes I made because of installing R on an AFS file system are
> substituting hard links by symbolic links and preventing, due to this
> changes, the deleting of files.

Can you give more details on that?  As I recall I was able to compile
the 0.61.1 sources on an AFS file system without having to mess with
peculiarities of hard links and symbolic links.  We did have to fiddle 
around with several scripts when installing S-PLUS but I don't
remember doing that with R.

For those who don't have experience with AFS, the problem stems from
an inability to create a hard link to a file in another directory.  File 
access lists in AFS are specified on a per-directory basis.  The
argument from Transarc (the AFS vendor) is that when the same file exists
simultaneously in two different directories then the user's access
rights to that file are not clearly defined.  Thus they forbid using
hard links that span directories.  We have tried to convince them that
they should just use the policy that the user's access rights are
those corresponding to the path by which they are accessing the file
but they don't seem to like that idea.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Tue Feb 17 17:42:47 1998
From: plummer at iarc.fr (Martyn Plummer)
Date: Tue, 17 Feb 1998 16:42:47 -0000 ()
Subject: R-beta: Various R Questions and Comments
In-Reply-To: <x2d8gna3d0.fsf@blueberry.kubism.ku.dk>
Message-ID: <XFMail.980217164742.plummer@iarc.fr>

On 16-Feb-98 Peter Dalgaard BSA wrote:
>morse at pobox.com (Doug Morse) writes:
>>     How is one supposed to interrupt a command?  In S-Plus, one uses
>>     the 'Escape' key.  In R, I can press my terminal's Interrupt
>>     key (Ctrl-C), but this only works *once*.  After that, the event
>>     seems to get ignored.  This is a nuicance for two reasons:  (a) I
>>     can't interrupt a command but once in a session, and (b) at the
>>     "> " prompt, I can't press Ctrl-C to abort my many typing errors
>>     but once a session as well.
>
>This is a bug in the readline library. Upgrade to 2.1/3.0.

Call me a mad fool, but I have this problem with RedHat 5.0, which
comes with readline-2.1-5 (aka libreadline.so.3.0).

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Feb 17 17:57:30 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Feb 1998 17:57:30 +0100
Subject: R-beta: Various R Questions and Comments
In-Reply-To: Martyn Plummer's message of Tue, 17 Feb 1998 16:42:47 -0000 ()
References: <XFMail.980217164742.plummer@iarc.fr>
Message-ID: <x2wweumao5.fsf@blueberry.kubism.ku.dk>

Martyn Plummer <plummer at iarc.fr> writes:

> 
> On 16-Feb-98 Peter Dalgaard BSA wrote:
> >morse at pobox.com (Doug Morse) writes:
> >>     How is one supposed to interrupt a command?  In S-Plus, one uses

> >This is a bug in the readline library. Upgrade to 2.1/3.0.
> 
> Call me a mad fool, but I have this problem with RedHat 5.0, which
> comes with readline-2.1-5 (aka libreadline.so.3.0).

???!!

$ rpm -q readline
readline-2.0-10
readline-2.1-3
$ ldd ~/R-official/R-0.61.1/bin/R.binary 
        libSM.so.6 => /usr/X11R6/lib/libSM.so.6.0
        libICE.so.6 => /usr/X11R6/lib/libICE.so.6.3
        libX11.so.6 => /usr/X11R6/lib/libX11.so.6.1
        libf2c.so.0 => /usr/lib/libf2c.so.0.20
        libdl.so.1 => /lib/libdl.so.1.7.14
        libreadline.so.3 => /usr/lib/libreadline.so.3.0
        libncurses.so.3.0 => /usr/lib/libncurses.so.3.0
        libm.so.5 => /lib/libm.so.5.0.6
        libc.so.5 => /lib/libc.so.5.3.12

This is RH4.2, and of course, libc6 could break anything, but...

Could you check your binary with ldd?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wvenable at attunga.stats.adelaide.edu.au  Tue Feb 17 22:43:38 1998
From: wvenable at attunga.stats.adelaide.edu.au (Bill Venables)
Date: Wed, 18 Feb 1998 08:13:38 +1030
Subject: R-beta: Various R Questions and Comments
In-Reply-To: <9802170822.AA21240@alpha.luc.ac.be>
References: <x2btw7uyyc.fsf@blueberry.kubism.ku.dk>
	<9802170822.AA21240@alpha.luc.ac.be>
Message-ID: <9802172143.AA06075@attunga.stats.adelaide.edu.au>

Jim Lindsey writes:
 > Offsets only are really useful if the link function is not the
 > identity. Hence little use in lm. Jim

They are convenient, though.  It is easy just to correct the
dependent variable by subtracting the offset, but then when you
want to predict from the fitted model object you predict the
offset-corrected response mean, not the response itself.  So, I
know it's easy to add it back on, but that's another little thing
not to forget...

I would favour having offset available for all lm/aov/glm/gam/...
fitting functions.

Bill Venables.

-- 
Bill Venables, Head, Dept of Statistics,    Tel.: +61 8 8303 5418
University of Adelaide,                     Fax.: +61 8 8303 3696
South AUSTRALIA.     5005.   Email: Bill.Venables at adelaide.edu.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From langms at cip.mathematik.uni-stuttgart.de  Wed Feb 18 07:55:41 1998
From: langms at cip.mathematik.uni-stuttgart.de (Markus Lang)
Date: Wed, 18 Feb 1998 07:55:41 +0100 (MEZ)
Subject: R-beta: Re: Compiling for AFS [was: R on AIX running with errors]
In-Reply-To: <6rd8gmp7z9.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.A41.3.96.980218010627.24250B-100000@cip30.mathematik.uni-stuttgart.de>


On 17 Feb 1998, Douglas Bates wrote:

> Markus Lang <langms at cip.mathematik.uni-stuttgart.de> writes:
> 
> > Changes I made because of installing R on an AFS file system are
> > substituting hard links by symbolic links and preventing, due to this
> > changes, the deleting of files.
> 
> Can you give more details on that?  As I recall I was able to compile
> the 0.61.1 sources on an AFS file system without having to mess with
> peculiarities of hard links and symbolic links.  We did have to fiddle 
> around with several scripts when installing S-PLUS but I don't
> remember doing that with R.

What I changed from hard links to symbolic links, because R did not find
files due to the not creating of links:

- file $RHOME/configure
  original line 3434: ln src/appl.c/*.c src/appl
  changed to:         cd src/appl
                      ln -s ../appl.c/*.c .
                      cd ../..

  line 3436 got changed accordingly

- file %RHOME/src/include/Makefile
  line 1: toLink = S.h S_compat.h f2c.h Fortran.h Blas.h Linpack.h
  changed to: toLink = 	../src/include/S.h \
                        ../src/include/S_compat.h \
                        ../src/include/f2c.h \
                        ../src/include/Fortran.h \
                        ../src/include/Blas.h \
                        ../src/include/Linpack.h

  line 5: @ln $(toLink) ../../include
  changed to: @ln -s -f $(toLink) ../../include

  line 9: @for f in $(toLink); do rm -f ../../include/$${f}; done
  deleted, to prevent deleting of files with only one link to them (here
  it would be nicer to move the files)

Markus


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Wed Feb 18 10:06:07 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Wed, 18 Feb 1998 10:06:07 +0100 (MET)
Subject: R-beta: dataframes and functions
Message-ID: <9802180906.AA09029@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 1230 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980218/095e19b6/attachment.pl

From plummer at iarc.fr  Wed Feb 18 11:15:34 1998
From: plummer at iarc.fr (Martyn Plummer)
Date: Wed, 18 Feb 1998 10:15:34 -0000 ()
Subject: R-beta: dataframes and functions
In-Reply-To: <9802180906.AA09029@alpha.luc.ac.be>
Message-ID: <XFMail.980218103758.plummer@iarc.fr>

On 18-Feb-98 Jim Lindsey wrote:
>As I guessed, globality of dataframes in functions is another one of
>those wonderful S-Plus features. Is there any advantage  to this???

Well, I'm not going to argue the logic of it with you, but S compatibility
is usually regarded as a feature rather than a bug. It might conceivably
be useful for different functions to manipulate variables in the same
data frame without passing the data frame as an argument, but I don't
have a strong opinion.

>  Note that an undetached dataframe `disappears' when the function
>exits. But the invisible variables it contained do not. I had about 30
>invisible copies of the variables that ls() could not see. But one
>called factor kept giving a warning message (outside the original
>function) so I knew something fishy was going on. What possibly could
>be the advantage of such behaviour?

I can't duplicate the behaviour your are describing. Perhaps I
have misunderstood. Could you post a simple example?

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Thu Feb 19 09:04:35 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Thu, 19 Feb 1998 09:04:35 +0100 (MET)
Subject: R-beta: dataframes again
Message-ID: <9802190804.AA03481@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 2257 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980219/8304c142/attachment.pl

From magnus at balhaldie.u-net.com  Thu Feb 19 13:08:46 1998
From: magnus at balhaldie.u-net.com (MM Peterson)
Date: Thu, 19 Feb 1998 12:08:46 +0000
Subject: R-beta: t.test
Message-ID: <3.0.1.32.19980219120846.006918c8@mail.u-net.com>

As a very new user of R, and a user of S with very
limited experience, I thought I would start humbly
with a simple t.test.

The response to the command sequence

sample <- scan()
4 5 6 7 8 9

t.test(sample,mu=20)

rather surprised me, because of the idiosyncratic
choice of a confidence interval for the mean of the
population from which the sample was drawn.  I asked
my colleague Bob Henery about this, and his reply
is appended.

Is there a good reason for choosing this rather
unconventional behaviour for R, or is it just
a blunder as Bob suggests?  At any rate Bob's
fix is easy enough for those of us who prefer
our confidence intervals to include the sample
mean, until or if the developers modify the
main code to change this.

Magnus Peterson

  ***********************************


Magnus,

It appears (from inspecting the relevant bit of code in the function t.test)

                df <- length(x) - 1
                stderr <- sqrt(vx/nx)
                tstat <- (mx - mu)/stderr


                pval <- 2 * pt(-abs(tstat), df)
                alpha <- 1 - conf.level
                cint <- c(tstat * stderr - qt((1 - alpha/2), 
                        df) * stderr, tstat * stderr + qt((1 - 
                        alpha/2), df) * stderr)


that the confidence interval reported is for the expected value of (X-mu)
rather than E(X).

The help file says

	conf.int : a confidence interval for the mean appropriate to
	          the specified alternative hypothesis.
	

but does not specify the alternative hypothesis (or even the null hypothesis).
Presumably they are thinking of a null hypothesis of the form

E(X-mu) = 0.

At the very least, the help file should make it clear what is being reported.
I would describe the present behaviour as quite unacceptable (a blunder rather
than a bug).


Bob


PS

Of course it is easy to change the function to your own local function by
inserting the following line just before exiting the function:

cint <- cint + mu


#                      new line
cint <- cint + mu
#                      old lines ...
        attr(cint, "conf.level") <- conf.level
        rval <- list(statistic = tstat, parameter = df, p.value = pval, 
                conf.int = cint, estimate = estimate, null.value = mu, 
                alternative = alternative, method = method, data.name = dname)
        attr(rval, "class") <- "htest"
        return(rval)
}

so you can have your own personal behaviour (or you can change the behaviour
of t.test for all your students).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Feb 19 13:48:55 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Feb 1998 13:48:55 +0100
Subject: R-beta: dataframes again
In-Reply-To: Jim Lindsey's message of Thu, 19 Feb 1998 09:04:35 +0100 (MET)
References: <9802190804.AA03481@alpha.luc.ac.be>
Message-ID: <x2yaz7bw08.fsf@blueberry.kubism.ku.dk>

Jim Lindsey <jlindsey at luc.ac.be> writes:


> fcn2 <- function(){
> 	df <- fcn1()
> 	attach(df)}
> When this function is run and finishes, df has supposedly disappeared
> and indeed is not visible by ls(). However, typing resp shows the
> contents of that column of the disappeared dataframe. Using the
> function, factor, gives the warning that the nonfunction is ignored.
> If I run this function 20 times, I stack up 20 invisible copies of the
> dataframe, obviously not something to be programmed in a library.

It will show up on search() though, all 20 times, and ls(pos=...) will
show the contents. Whether this is sensible is of course debatable, as
are issues such as "modifying dataframe doesn't change the attached
version". One argument in favor of the current behaviour is that
things like attach(data.frame(x=1:5,y=6:10)) works, even though the
attached frame itself only exists for the duration of the expression
evaluation.

> The dataframe is
> attached globally in front of system functions but behind pre-existing
> global user variables.

Yes, this is a bit of a pain. Strange things happen when the global
environment contain variables of the same name as that of a dataframe.
One obvious problem is that attached dataframes are read-only, so even
stranger things would happen if you could attach them before the
global environment. Even if you made them writable, they would only
accept certain kinds of assignments.

>   Obviously the problem is that dataframes are using S-Plus scoping
> rules whereas everything (?) else is using R scoping rules (certain
> people on the list appear to have forgotten that the latter exist but
> they are the principal reason I use R).

Actually, search path traversal and scoping are two different
things. What you suggest is more or less to have the search path as a
local variable, resetting itself upon exit from functions. Using
explicit eval(expression,data) constructions is often the workaround.

>   Now that a couple of important S-Plus packages are running in R, is
> it not time to stop emulating the `features' of this virus (that have
> already mutated again, in v4) and develop a good, stable software
> package that S-plus will be forced to emulate?

Yes, but this is a difficult point. S(-plus) contains a certain amount
of misfeatures that we'd like to get rid of. The whole namespace
issue for one thing. On the other hand there are the portability
considerations. And, as a rule, one should be somewhat careful of
dismissing some aspects of S, just because it "looks weird". Every so
often I've found that more careful study of the possible alternatives
reveals that S has been doing The Right Thing all along...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Feb 19 13:52:20 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Feb 1998 13:52:20 +0100
Subject: R-beta: t.test
In-Reply-To: MM Peterson's message of Thu, 19 Feb 1998 12:08:46 +0000
References: <3.0.1.32.19980219120846.006918c8@mail.u-net.com>
Message-ID: <x2wwerbvuj.fsf@blueberry.kubism.ku.dk>

MM Peterson <magnus at balhaldie.u-net.com> writes:

> t.test(sample,mu=20)
> 
> rather surprised me, because of the idiosyncratic
> choice of a confidence interval for the mean of the
> population from which the sample was drawn.  I asked

Will fix for 0.61.2.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Fri Feb 20 11:51:45 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Fri, 20 Feb 1998 11:51:45 +0100 (MET)
Subject: R-beta: scoping etc
Message-ID: <9802201051.AA32068@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 1538 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980220/040a76f5/attachment.pl

From jlindsey at luc.ac.be  Fri Feb 20 11:59:15 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Fri, 20 Feb 1998 11:59:15 +0100 (MET)
Subject: R-beta: S-Plus compatibility
Message-ID: <9802201059.AA21347@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 1298 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980220/79f41610/attachment.pl

From jking at metisrv0.man-env.com  Fri Feb 20 11:48:00 1998
From: jking at metisrv0.man-env.com (Jay King)
Date: Fri, 20 Feb 1998 10:48:00 +0000
Subject: R-beta: legend
Message-ID: <15472120204996@man-env.com>

Does the "legend" command work in the windows version of R? Here is 
the command that I'm using:

legend(1,1,legend=c("G1","G2","G3","G4","G5","G6"),pch=array(1:6,dim=c
(1,6)))

When I use this on my existing graph in a window I get a solid black 
box at the lower left. If I use this with the postscript driver my 
output file has neither a legend nor the black box.

Thanks

Jay King

---------------------------------------------------
Julius (Jay) King
Statistician
ManTech Environmental Technology, Inc.
2 Triangle Drive
Research Triangle Park, NC 27709
Phone: (919) 406-2199
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Feb 20 17:57:47 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Feb 1998 17:57:47 +0100
Subject: R-beta: legend
In-Reply-To: "Jay King"'s message of Fri, 20 Feb 1998 10:48:00 +0000
References: <15472120204996@man-env.com>
Message-ID: <x23ehe43jo.fsf@blueberry.kubism.ku.dk>

"Jay King" <jking at metisrv0.man-env.com> writes:

> 
> Does the "legend" command work in the windows version of R? Here is 
> the command that I'm using:
> 
> legend(1,1,legend=c("G1","G2","G3","G4","G5","G6"),pch=array(1:6,dim=c
> (1,6)))
> 
> When I use this on my existing graph in a window I get a solid black 
> box at the lower left. If I use this with the postscript driver my 
> output file has neither a legend nor the black box.

You're not telling us what was on the plot in the first place, in
particular not the x- and y-extents. I don't recall observing anything
peculiar with the Windows version in that respect, but the plotting
routines may have some idiosyncracies when you try to plot things that
don't fit within the plotting frame.

First see if this works:

plot(1:6)
legend(1,6,legend=c("G1","G2","G3","G4","G5","G6"),pch=1:6)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jking at metisrv0.man-env.com  Fri Feb 20 14:07:16 1998
From: jking at metisrv0.man-env.com (Jay King)
Date: Fri, 20 Feb 1998 13:07:16 +0000
Subject: R-beta: legend
In-Reply-To: <x23ehe43jo.fsf@blueberry.kubism.ku.dk>
References: "Jay King"'s message of Fri, 20 Feb 1998 10:48:00 +0000
Message-ID: <18063080805089@man-env.com>

The problem was in the background color. I did not expect the plot 
to use a white background and the legend to use black. I would have 
assumed that the background color was the same for both and found 
nothing to the contrary in the documentation.

> To:            "Jay King" <jking at metisrv0.man-env.com>
> Cc:            r-help at stat.math.ethz.ch
> Subject:       Re: R-beta: legend
> From:          Peter Dalgaard BSA <p.dalgaard at biostat.ku.dk>
> Date:          20 Feb 1998 17:57:47 +0100

> "Jay King" <jking at metisrv0.man-env.com> writes:
> 
> > 
> > Does the "legend" command work in the windows version of R? Here is 
> > the command that I'm using:
> > 
> > legend(1,1,legend=c("G1","G2","G3","G4","G5","G6"),pch=array(1:6,dim=c
> > (1,6)))
> > 
> > When I use this on my existing graph in a window I get a solid black 
> > box at the lower left. If I use this with the postscript driver my 
> > output file has neither a legend nor the black box.
> 
> You're not telling us what was on the plot in the first place, in
> particular not the x- and y-extents. I don't recall observing anything
> peculiar with the Windows version in that respect, but the plotting
> routines may have some idiosyncracies when you try to plot things that
> don't fit within the plotting frame.
> 
> First see if this works:
> 
> plot(1:6)
> legend(1,6,legend=c("G1","G2","G3","G4","G5","G6"),pch=1:6)
> 
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
> 
> 
---------------------------------------------------
Julius (Jay) King
Statistician
ManTech Environmental Technology, Inc.
2 Triangle Drive
Research Triangle Park, NC 27709
Phone: (919) 406-2199
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wvenable at attunga.stats.adelaide.edu.au  Sat Feb 21 07:29:38 1998
From: wvenable at attunga.stats.adelaide.edu.au (Bill Venables)
Date: Sat, 21 Feb 1998 16:59:38 +1030
Subject: R-beta: scoping etc
In-Reply-To: <9802201051.AA32068@alpha.luc.ac.be>
References: <9802201051.AA32068@alpha.luc.ac.be>
Message-ID: <9802210629.AA08537@attunga.stats.adelaide.edu.au>

Jim Lindsey writes:
 > My problem with .RData almost a year ago is very similar to
 > that of attach in functions.

Somehow my programmer's instinct tells me never to use attach in
functions (other than in extremis, of course) because it is such
a blatant side-effect operation.  In my view the search path is a
globally visible hierarchy and operators that affect it are best
used only at the interactive level.

In similar vein I am strongly in favour of actually banning the
superassignment operator, "<<-".  Such operations should be so
rare and unusual that people should be forced to use assign();
having a special syntactic operator for the job only encourages
terrible programming practice.  I once saw a suite of functions
written by someone who should have known better where all the
assignment operators had been systematically replaced by "<<-".
The explanation was "that was the only way I could make sure that
the variables I created inside the function were not discarded"!

There are some cases when you do want to create something that is
globally visible, but for the duration of the current expression
only.  This is what the S structure known as "frame 1" is for.  I
have yet to discover how to access this in R (or if it is
possible at all) but it can be a useful device, even if the
practice of using it to story temporary global variables is not
free of the criticism that it, too, can be a dangerous
side-effect.  Most powerful things are at the same time
dangerous.

[Looking at the way the "S virus" is mutating, it is possible to
see how before long attach and detach may not be necessary.  The
inclusion of a data= argument in the fitting and Trellis graphics
functions, for example, usually obviate the need.  In time it may
be possible for most functions to have an argument that specifies
a temporary addition to the top of the search path as the
preferential source of variables.

(I make no apologies for the S virus, by the way.  I regard it as
an evolving system and a vehicle for new technology.  "If I want
SAS I know where to find it" with apologies to Dennis Ritchie.)]

 > If I remember correctly (I have not seen a .RData for a long
 > time) suppose that a .RData is loaded and contains a variable
 > called y that you have forgotten about (more probably you
 > don't even notice that the .RData was loaded).

Good working principle/practice #2: Keep your working directories
clean and free of temporaries no longer needed.

Good working principle/practice #3: Use the file system
intelligently.  Use different working directories for different
jobs and do not do everything in one big working "R" directory.

 > You create a dataframe (say read.table) containing a column
 > labelled y, planning to analyze the data. It is invisible
 > because attached behind the y from .RData and you unknowingly
 > produce a completely erroneous statistical analysis for your
 > client or for publication.

Exactly.  This is why, in my view, not .RData, but attach()
should be on the way out.  Using functions with a data= argument
to specify a preferential source for variables before all others
completely overcomes this trap.

 > (With luck, the two y's have incompatible lengths and a
 > warning about vectors not being multiples of each other's
 > lengths will be produced - when I had the problem, this
 > warning was not yet available.)

I agree that safe data analysis should not be a matter of luck!

 > .RData is banned on our site.

This is simply saying you are against permanent storage of
objects.  I can see some reason for that if disc space is scarce,
but not much otherwise.  In time you will be forced to re-invent
it, like most lessons of history.  (Just a speculative
prediction, Jim, I could be wrong....)

 > I do not think that functions should produce side effects
 > (except the few well-known ones).  Attach should be local to a
 > function and the column names should not be hidden by objects
 > outside its scope.

Who would disagree, but I interpret this as an argument against
attach in most cases, and attach inside functions entirely.  Some
things are for interactive use only, others primarily for functions.

 > For me, this question is now rather academic because I copy
 > the columns of the dataframe in the function instead of
 > attaching (and .RData never appears).

For me it is rather academic, too, but for quite a different
reason.  I never use attach in functions.  Where security and
integrity are primary I ensure that the evaluation frame for the
expression is fixed and well specified.  This means either using
functions that allow a data= argument where possible, making sure
that all variables needed are in that data frame (or list), or
using eval() inside functions to achieve a similar effect.  

(I am puzzled why so many people seem to regard eval as in some
way arcane or obscure, by the way.  They use it subliminally
literally all the time.)

It would be useful if R had some of the S-PLUS utility functions
such as find() to locate where a visible object is currently held
on the search path.  exists() is there, so find() is not much of
an extension.  Also, why do functions like objects() and attach()
have a different argument sequence from their cousins in S?  I am
also puzzled why frames 0 and 1 are apparently not there, and why
an object (apparently) cannot be attached at the top of the
search path (as it can in S-PLUS) but must go at what would be
called `where=2' at best.  Of course I could be wrong about these
matters as I am more of an S person than an R person, I do admit!

-- 
Bill Venables, Head, Dept of Statistics,    Tel.: +61 8 8303 5418
University of Adelaide,                     Fax.: +61 8 8303 3696
South AUSTRALIA.     5005.   Email: Bill.Venables at adelaide.edu.au

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Sat Feb 21 12:46:33 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Feb 1998 12:46:33 +0100
Subject: R-beta: scoping etc
In-Reply-To: Bill Venables's message of Sat, 21 Feb 1998 16:59:38 +1030
References: <9802201051.AA32068@alpha.luc.ac.be>
	<9802210629.AA08537@attunga.stats.adelaide.edu.au>
Message-ID: <x2lnv5dvty.fsf@blueberry.kubism.ku.dk>

Bill Venables <wvenable at attunga.stats.adelaide.edu.au> writes:

[Lots of sensible stuff]
> There are some cases when you do want to create something that is
> globally visible, but for the duration of the current expression
> only.  This is what the S structure known as "frame 1" is for.  I
> have yet to discover how to access this in R (or if it is
> possible at all) but it can be a useful device, even if the
> practice of using it to story temporary global variables is not
> free of the criticism that it, too, can be a dangerous
> side-effect.  Most powerful things are at the same time
> dangerous.

Now that you mention it... Actually, "frame 1" has always been one of
my favourite gripes with S. It may be useful as a scratch pad, and
with the S scoping probably necessary, but it breaks self-similarity:
Things viewed from inside a function can never be like they are from
the base level. This is not harmless, for instance it makes the
creation of interactive shell-type systems absolutely impossible,
because frame 1 will not be cleaned up before exit from the entire
system. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From magnus at balhaldie.u-net.com  Sat Feb 21 12:09:13 1998
From: magnus at balhaldie.u-net.com (MM Peterson)
Date: Sat, 21 Feb 1998 11:09:13 +0000
Subject: No subject
Message-ID: <3.0.1.32.19980221110913.00689050@mail.u-net.com>

RE t.test in R

I objected a day or two ago to the behaviour of the one-sample t.test in R
where it is easy to generate a "confidence interval" for the mean of the
population
which does not contain the sample mean, in the case where the null
hypothesis is
rejected.  It now appears that the same behaviour is latent in the code for
the two-sample version of this test.  The relevant lines from the code for the
t.test function are reproduced below, the two lines I find objectionable in
each
being the ones where a value is assigned to tstat.
	

if (var.equal) {
                        df <- nx + ny - 2
                        v <- ((nx - 1) * vx + (ny - 1) * vy)/df
                        stderr <- sqrt(v * (1/nx + 1/ny))
                        tstat <- (mx - my - mu)/stderr
                }
                else {
                        stderrx <- sqrt(vx/nx)
                        stderry <- sqrt(vy/ny)
                        stderr <- sqrt(stderrx^2 + stderry^2)
                        df <- stderr^4/(stderrx^4/(nx - 1) + 
                                stderry^4/(ny - 1))
                        tstat <- (mx - my - mu)/stderr
                }


I say this problem is LATENT in the code, because it is very rare indeed
to apply the two-sample t-test with a proposed null-value for the difference
of the means of the populations from which the samples came different from 0.

	Nevertheless if such a case were analysed, with a straightforwardd two-sided
alternative, one would expect the confidence interval for the difference of
the
population means given as part of the output to be centred on the
difference of
the sample means observed. Instead the same anomalous behaviour is of course
apparent as in the one-sample case as the following examples show.

> x.sample <- scan()
1: 4 5 6 7 8
6: 
Read 5 items
> y.sample <- x.sample
> t.test(x.sample,y.sample,var.equal=TRUE,mu=50)

	 Two Sample t-test 

data:  x.sample and y.sample 
t = -50, df = 8, p-value = 0 
alternative hypothesis: true difference in means is not equal to 50 
95 percent confidence interval:
 -52.306 -47.694 
sample estimates:
mean of x mean of y 
        6         6 

> t.test(x.sample,y.sample,mu=50)

	 Welch Two Sample t-test 

data:  x.sample and y.sample 
t = -50, df = 8, p-value = 0 
alternative hypothesis: true difference in means is not equal to 50 
95 percent confidence interval:
 -52.306 -47.694 
sample estimates:
mean of x mean of y 
        6         6 

I guess the same simple remedy is available in these cases as for the
one-sample test, until and if changes are made in version 0.61.2.

Magnus Peterson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wvenable at attunga.stats.adelaide.edu.au  Sun Feb 22 00:41:26 1998
From: wvenable at attunga.stats.adelaide.edu.au (Bill Venables)
Date: Sun, 22 Feb 1998 10:11:26 +1030
Subject: R-beta: scoping etc
In-Reply-To: <x2lnv5dvty.fsf@blueberry.kubism.ku.dk>
References: <9802201051.AA32068@alpha.luc.ac.be>
	<9802210629.AA08537@attunga.stats.adelaide.edu.au>
	<x2lnv5dvty.fsf@blueberry.kubism.ku.dk>
Message-ID: <9802212341.AA08923@attunga.stats.adelaide.edu.au>

Peter Dalgaard writes:
 > Bill Venables <wvenable at attunga.stats.adelaide.edu.au> writes:
 > 
 > [Lots of sensible stuff]
 > > There are some cases when you do want to create something that is
 > > globally visible, but for the duration of the current expression
 > > only.  This is what the S structure known as "frame 1" is for.  I
 > > have yet to discover how to access this in R (or if it is
 > > possible at all) but it can be a useful device, even if the
 > > practice of using it to story temporary global variables is not
 > > free of the criticism that it, too, can be a dangerous
 > > side-effect.  Most powerful things are at the same time
 > > dangerous.
 > 
 > Now that you mention it... Actually, "frame 1" has always been one of
 > my favourite gripes with S. It may be useful as a scratch pad, and
 > with the S scoping probably necessary, but it breaks self-similarity:
 > Things viewed from inside a function can never be like they are from
 > the base level. This is not harmless, for instance it makes the
 > creation of interactive shell-type systems absolutely impossible,
 > because frame 1 will not be cleaned up before exit from the entire
 > system. 

Ah.  I was a bit too strong in saying that frame 1 is for making
things temporarily available globally.  It can be so used, but I
agree this is possibly not good style as, for another thing, it
destroys the possibility of safe recursion.

Normally frame 1 is used for .Last.expr and .Auto.print only.
That's fair enough, in my view.  It is handy being able to
determine whether or not the present expression stems from an
assignment or not, for example, and being able to turn on an off
the auto-print flag.

It's existence is not widely publicized in the official
documentation probably because the progenitors were aware that it
could easily be abused, but at the same time did not want to
prohibit its use altogether.  There are some situation where
there really is no other method other than using frame 1, frame 0
or (God forbid) the .Data directory.  An example is trying to
predict from an fitted model object formed within a function
using a data frame also formed within a function.

-- 
Bill Venables, Head, Dept of Statistics,    Tel.: +61 8 8303 5418
University of Adelaide,                     Fax.: +61 8 8303 3696
South AUSTRALIA.     5005.   Email: Bill.Venables at adelaide.edu.au

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From magnus at balhaldie.u-net.com  Sun Feb 22 13:16:18 1998
From: magnus at balhaldie.u-net.com (MM Peterson)
Date: Sun, 22 Feb 1998 12:16:18 +0000
Subject: R-beta: t.test in R
Message-ID: <3.0.1.32.19980222121618.0069319c@mail.u-net.com>

RE t.test in R

I objected a day or two ago to the behaviour of the one-sample t.test in R
where it is easy to generate a "confidence interval" for the mean of the
population
which does not contain the sample mean, in the case where the null
hypothesis is
rejected.  It now appears that the same behaviour is latent in the code for
the two-sample version of this test.  The relevant lines from the code for the
t.test function are reproduced below, the two lines I find objectionable in
each
being the ones where a value is assigned to tstat.
	

if (var.equal) {
                        df <- nx + ny - 2
                        v <- ((nx - 1) * vx + (ny - 1) * vy)/df
                        stderr <- sqrt(v * (1/nx + 1/ny))
                        tstat <- (mx - my - mu)/stderr
                }
                else {
                        stderrx <- sqrt(vx/nx)
                        stderry <- sqrt(vy/ny)
                        stderr <- sqrt(stderrx^2 + stderry^2)
                        df <- stderr^4/(stderrx^4/(nx - 1) + 
                                stderry^4/(ny - 1))
                        tstat <- (mx - my - mu)/stderr
                }


I say this problem is LATENT in the code, because it is very rare indeed
to apply the two-sample t-test with a proposed null-value for the difference
of the means of the populations from which the samples came different from 0.

	Nevertheless if such a case were analysed, with a straightforwardd two-sided
alternative, one would expect the confidence interval for the difference of
the
population means given as part of the output to be centred on the
difference of
the sample means observed. Instead the same anomalous behaviour is of course
apparent as in the one-sample case as the following examples show.

> x.sample <- scan()
1: 4 5 6 7 8
6: 
Read 5 items
> y.sample <- x.sample
> t.test(x.sample,y.sample,var.equal=TRUE,mu=50)

	 Two Sample t-test 

data:  x.sample and y.sample 
t = -50, df = 8, p-value = 0 
alternative hypothesis: true difference in means is not equal to 50 
95 percent confidence interval:
 -52.306 -47.694 
sample estimates:
mean of x mean of y 
        6         6 

> t.test(x.sample,y.sample,mu=50)

	 Welch Two Sample t-test 

data:  x.sample and y.sample 
t = -50, df = 8, p-value = 0 
alternative hypothesis: true difference in means is not equal to 50 
95 percent confidence interval:
 -52.306 -47.694 
sample estimates:
mean of x mean of y 
        6         6 

I guess the same simple remedy is available in these cases as for the
one-sample test, until and if changes are made in version 0.61.2.

Magnus Peterson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.baker at fsc.qut.edu.au  Mon Feb 23 05:20:43 1998
From: p.baker at fsc.qut.edu.au (Peter Baker)
Date: Mon, 23 Feb 1998 14:20:43 +1000 (EST)
Subject: R-beta: Help: cov.mve in R? dgamma in Splus?
Message-ID: 
 <Pine.OSF.3.95.980223141138.32070B-100000@einstein.math.sci.qut.edu.au>

Hi all

I have a couple of obscure questions for R/Splus experts (which
unfortunately isn't me!)

I am trying to compute Bayes Factors using some Splus code of Raftery
in Gilks et al (1996). Only problem is

1) R doesn't seem to have a robust covariance (cov.mve) which I
suspect I need rather than a non-robust classical estimate

2) Splus has cov.mve BUT dgamma in Splus doesn't have a scale
parameter (like in R). I presume it is easy to include one but it is
not immediately obvious to me.

I would prefer to use R and could probably modify minvol.f to compute
cov.mve from R but don't want to reinvent the wheel.

Any suggestions greatly appreciated!

Thanks
Peter

=========================================================================
|| Peter Baker  email: p.baker at fsc.qut.edu.au    ph: 07 3864 1293  (W)  ||
||              Mail:  School of Mathematics, Queensland University     ||
||                     of Technology,  GPO Box 2434, Brisbane  QLD 4001 ||
=========================================================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Kurt.Hornik at ci.tuwien.ac.at  Mon Feb 23 09:08:57 1998
From: Kurt.Hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 23 Feb 1998 09:08:57 +0100 (CET)
Subject: R-beta: Help: cov.mve in R? dgamma in Splus?
In-Reply-To: <Pine.OSF.3.95.980223141138.32070B-100000@einstein.math.sci.qut.edu.au>
References: <Pine.OSF.3.95.980223141138.32070B-100000@einstein.math.sci.qut.edu.au>
Message-ID: <13553.11799.357626.900494@pc25.none>

>>>>> Peter Baker writes:

> Hi all
> I have a couple of obscure questions for R/Splus experts (which
> unfortunately isn't me!)

> I am trying to compute Bayes Factors using some Splus code of Raftery
> in Gilks et al (1996). Only problem is

> 1) R doesn't seem to have a robust covariance (cov.mve) which I
> suspect I need rather than a non-robust classical estimate

> 2) Splus has cov.mve BUT dgamma in Splus doesn't have a scale
> parameter (like in R). I presume it is easy to include one but it is
> not immediately obvious to me.

> I would prefer to use R and could probably modify minvol.f to compute
> cov.mve from R but don't want to reinvent the wheel.

It would definitely be great if you could provide code for cov.mve().

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Mon Feb 23 16:59:47 1998
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 23 Feb 1998 10:59:47 -0500
Subject: R-beta: S-Plus compatibility
References: <9802201059.AA21347@alpha.luc.ac.be>
Message-ID: <98Feb23.110717est.13454@mailgate.bank-banque-canada.ca>

>If you are writing new functions (or libraries) and you
>imitate S-Plus, you lose two of the most important features of R
>(besides its being freely available with source): speed and superior
>scoping rules.

Jim

Could you please expand a bit on this statement about imitating S wrt speed. I
am aware that R is substantially faster in looping and that I don't need to (and
can't) code "For" loops. Are you suggesting that there are other things which
will run much faster if they are coded in an non-S way?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Todd.Taylor at pnl.gov  Mon Feb 23 17:24:16 1998
From: Todd.Taylor at pnl.gov (Z. Todd Taylor)
Date: Mon, 23 Feb 1998 08:24:16 -0800
Subject: R-beta: scoping etc
Message-ID: <199802231624.IAA14072@aggie.pnl.gov>

Bill Venables <wvenable at attunga.stats.adelaide.edu.au> wrote:

> [Looking at the way the "S virus" is mutating, it is possible to
> see how before long attach and detach may not be necessary.  The
> inclusion of a data= argument in the fitting and Trellis graphics
> functions, for example, usually obviate the need.  In time it may
> be possible for most functions to have an argument that specifies
> a temporary addition to the top of the search path as the
> preferential source of variables.

Along these lines, I've always wished the fitting and Trellis
functions (of S) would take a search position as the data=
argument.  The main reason I need such a thing is memory---when
the data set is just too large to cram into a single data frame,
you have to put individual vectors in a separate directory (or
user-defined database, or library, or whatever).  S's functions
that allow data= don't allow specifying those
directories/databases.  So you have to worry about name
conflicts in the search path and either do in-function attaching
and detaching, use ugly name prefixes (my usual habit), or
something similarly unsavory.

Of course, R doesn't attach directories at all and still has no
way to allow use of a database any larger than will fit into
memory, so my comment is a bit tangential at this point.  But as
R becomes its own virus, I hope it will come to accommodate
these huge databases in a natural way.

--Todd
-- 
Z. Todd Taylor
Pacific Northwest National Laboratory
Todd.Taylor at pnl.gov
Why does 'burn up' mean the same as 'burn down'?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From melfi at assist.stt.msu.edu  Mon Feb 23 21:08:58 1998
From: melfi at assist.stt.msu.edu (Vincent F. Melfi)
Date: Mon, 23 Feb 1998 15:08:58 -0500
Subject: R-beta: Hypergeometric Probabilities
Message-ID: <3.0.32.19980223150857.007f7210@assist.stt.msu.edu>

In both versions of R to which I currently have access (R-0.16.1 and
R-0.61.1), "phyper" stops returning correct cumulative probabilities as the
parameters of the hypergeometric distribution get large. For example, when
N1=1345, N2=1055, and n=1330, phyper returns either 0 or 1, and nothing in
between.

Looking at phyper.c, it's clear what's happening. First a term (called
"term") is computed: 

term = exp(lfastchoose(NR, xr) + lfastchoose(NB, xb)
                        - lfastchoose(N, n));

Then in a while loop, this is updated by multiplication, and each
subsequent "term" is added:

        while(xr <= x) {
                sum += term;
                xr++;
                NB++;
                term *= (NR / xr) * (xb / NB);
                xb--;
                NR--;
        }

If the first "term" is 0, the rest will be. This is the case in the example
given above. 

One can get the correct cumulative probabilities by using "cumsum" and
"dhyper", of course. 

Possibly it would be wise to modify "phyper" to fix this problem. (One easy
modification would be to add an "if" statement to check on the parameters.
If they're suitably small, use the current method. If they're larger,
compute the probabilities as in "dhyper" and then add. 

A related question/comment: I assume similar problems may show up in other
algorithms in src/math and elsewhere. Would it be wise to either modify the
fucntions to return an error message in such cases, or to add something to
the help indicating the range of applicability?

Thanks.

Vince Melfi

PS: I'm by no means a programmer, so please be gentle if I've said anything
stupid in the above.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Tue Feb 24 10:03:24 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Tue, 24 Feb 1998 10:03:24 +0100 (MET)
Subject: R-beta: scoping etc
In-Reply-To: <9802210629.AA08537@attunga.stats.adelaide.edu.au> from "Bill Venables" at Feb 21, 98 04:59:38 pm
Message-ID: <9802240903.AA25555@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 502 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980224/717270b7/attachment.pl

From jlindsey at luc.ac.be  Tue Feb 24 10:17:01 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Tue, 24 Feb 1998 10:17:01 +0100 (MET)
Subject: R-beta: update.formula
Message-ID: <9802240917.AA28811@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 465 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980224/18b5438f/attachment.pl

From Ralf.Goertz at rz.uni-jena.de  Tue Feb 24 18:02:29 1998
From: Ralf.Goertz at rz.uni-jena.de (Ralf Goertz)
Date: Tue, 24 Feb 1998 18:02:29 +0100
Subject: R-beta: newbie question on repeated measure anovas
Message-ID: <34F2FD25.2630C01C@uni-jena.de>

Hi,

is there a way to use a repeated measure anova approach in R?
I can't believe there isn't, but I couldn't figure out how.

Please Help
 
-------------------------------
Ralf Goertz
Institute for Psychology, Jena, Germany
E-mail Ralf.Goertz at uni-jena.de
http://www.uni-jena.de/allgpsy/rg
-------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From zinnebe at mail.auburn.edu  Tue Feb 24 22:07:46 1998
From: zinnebe at mail.auburn.edu (Bertram Zinner)
Date: Tue, 24 Feb 98 15:07:46 -0600
Subject: R-beta: qr(A)$rank
Message-ID: <199802242105.PAA02418@mallard.duc.auburn.edu>

I would like to find the rank of a matrix using R. Looking through a list 
of commands it seems that the command qr should do the job. Checking a 
simple example gave me the wrong answer. Here is the example: 

> A <- c(1,2,3,4,5,6)
> A <- matrix(A, nrow=2, ncol=3)
> A
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
> qr(A)$rank
[1] 3

The correct answer is two.

I should add that I am using the mac version of R. Any suggestions? --- 
Bertram
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Tue Feb 24 22:22:56 1998
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Tue, 24 Feb 1998 13:22:56 -0800 (PST)
Subject: R-beta: qr(A)$rank
In-Reply-To: <199802242105.PAA02418@mallard.duc.auburn.edu>
Message-ID: <Pine.SUN.3.95.980224131813.23525B-100000@chekov>

On Tue, 24 Feb 1998, Bertram Zinner wrote:

> I would like to find the rank of a matrix using R. Looking through a list 
> of commands it seems that the command qr should do the job. Checking a 
> simple example gave me the wrong answer. Here is the example: 
> 
> > A <- c(1,2,3,4,5,6)
> > A <- matrix(A, nrow=2, ncol=3)
> > A
>      [,1] [,2] [,3]
> [1,]    1    3    5
> [2,]    2    4    6
> > qr(A)$rank
> [1] 3
> 
> The correct answer is two.


I think this is due to the mac version being so out of date.  I don't have
access to it, but qr(A)$rank does work on 0.50a2 and 0.61.1 (at least
ignoring the question of whether the rank is well-defined numerically).

What does the rest of qr(A) look like? This might help in deciding what to
do, especially as a large chunk of the Mac expertise on R is temporarily
unavailable due to power failures in New Zealnd. 

	-thomas


Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Feb 24 22:37:29 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Feb 1998 22:37:29 +0100
Subject: R-beta: qr(A)$rank
In-Reply-To: Bertram Zinner's message of Tue, 24 Feb 98 15:07:46 -0600
References: <199802242105.PAA02418@mallard.duc.auburn.edu>
Message-ID: <x24t1optuu.fsf@blueberry.kubism.ku.dk>

Bertram Zinner <zinnebe at mail.auburn.edu> writes:

> > qr(A)$rank
> [1] 3
> 
> The correct answer is two.
> 
> I should add that I am using the mac version of R. Any suggestions? --- 

Well, don't do that then ;^)

> A <- c(1,2,3,4,5,6)
> A <- matrix(A, nrow=2, ncol=3)
> qr(A)$rank
[1] 2

Seriously speaking, yes, we really should get around to getting the
Mac version up to date. Volunteers?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From steve at srsuna.shlrc.mq.edu.au  Wed Feb 25 00:14:03 1998
From: steve at srsuna.shlrc.mq.edu.au (Steve Cassidy)
Date: Wed, 25 Feb 1998 10:14:03 +1100
Subject: R-beta: Splus incompatibility in axis() and image()
Message-ID: <199802242314.KAA08493@sputnik.shlrc.mq.edu.au>


Just a note to point out a couple of small incompatibilities that tripped up a port of 
some S code to R.  

in axis() the first argument is called 'which' in R but 'side' in Splus, so code which
names the first arg (ie axis(side=1)) falls over in R. The fix is a trivial name 
change in src/library/base/R/axis. 

in image() the defaulting of arguments doesn't allow me to say image(z) where z is a
matrix, in Splus it does.  Here's a version of src/library/base/R/image which I think 
works: 

image <-
function (x=seq(0,1,len=nrow(z)), y=seq(0,1,len=ncol(z)), z,
	zlim=range(z, na.rm=TRUE), col=heat.colors(12),
	add = FALSE, xaxs="i", yaxs="i", xlab, ylab, ...)
{
        # if only one arg, it is z
        if(missing(y) && missing(z)) {
          z <- x
          x <- seq(0,1,len=nrow(z))
          y <- seq(0,1,len=ncol(z))
          if(missing(xlab)) xlab <- ""
          if(missing(ylab)) ylab <- ""
        } else {
          if(missing(xlab)) xlab <- if(missing(x)) "" else deparse(substitute(x))
          if(missing(ylab)) ylab <- if(missing(y)) "" else deparse(substitute(y))
        }
        
	if(!add)
	  plot(0, 0, xlim=range(x,na.rm=TRUE), ylim=range(y,na.rm=TRUE),
		type="n", xaxs=xaxs, yaxs=yaxs, xlab=xlab, ylab=ylab, ...)
	.Internal(image(as.double(x),
			as.double(y),
			as.double(z),
			as.double(zlim),
			col))
}



-- 
Steve Cassidy
------------------------------------------------------------
                Speech, Hearing and Language Research Center
                     School of English Linguistics and Media
Tel: +61 2 9850 8729			Macquarie University
Fax: +61 2 9850 9199         		North Ryde,NSW, 2109
steve at srsuna.shlrc.mq.edu.au		           Australia
http://srsuna.shlrc.mq.edu.au/~steve
------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Wed Feb 25 09:37:23 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Wed, 25 Feb 1998 09:37:23 +0100 (MET)
Subject: R-beta: repeated measures
Message-ID: <9802250837.AA01727@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 1215 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980225/6146ab11/attachment.pl

From maechler at stat.math.ethz.ch  Wed Feb 25 10:02:37 1998
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 25 Feb 1998 10:02:37 +0100
Subject: R-beta: repeated measures
In-Reply-To: <9802250837.AA01727@alpha.luc.ac.be> (message from Jim Lindsey on
	Wed, 25 Feb 1998 09:37:23 +0100 (MET))
Message-ID: <199802250902.KAA03116@sophie.ethz.ch>

>>>>> "Jim" == Jim Lindsey <jlindsey at luc.ac.be> writes:

    Jim> R itself has nothing for repeated measures. However, I am developing a
    Jim> complete set of four libraries that will handle most any repeated
    Jim> measures problem, normally distributed or other. This includes two
    Jim> functions in one of the libraries that will do the so-called anova
    Jim> approach plus ARMA. They will do everything in my Repeated
    Jim> Measurements book (OUP 1993) and much more.
    Jim> I am waiting until R stabilizes a bit before releasing them but will
    Jim> soon be asking for volunteers to aid in preliminary testing.
    Jim> Jim

    >> Hi,
    >> 
    >> is there a way to use a repeated measure anova approach in R?
    >> I can't believe there isn't, but I couldn't figure out how.
    >> 
    >> Please Help
    >> 

Wow!
Jim, this really  *IS* good news!

Just a moment ago, I had a phone call from an applied person here in CH who
uses R (for windoze, at his home), and asked how to do ANOVA problems with R.  

He was also badly missing S-plus's  aov(.) function...
and I explained how he could  use   anova( lm(...) ) for FIXED effects
anova, and that nothing is yet available for random (or mixed) effects.

Martin.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Wed Feb 25 10:42:00 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Wed, 25 Feb 1998 10:42:00 +0100 (MET)
Subject: R-beta: repeated measures
Message-ID: <9802250942.AA25698@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 2076 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980225/3aa1d053/attachment.pl

From p.dalgaard at biostat.ku.dk  Wed Feb 25 11:34:18 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Feb 1998 11:34:18 +0100
Subject: R-beta: repeated measures
In-Reply-To: Jim Lindsey's message of Wed, 25 Feb 1998 10:42:00 +0100 (MET)
References: <9802250942.AA25698@alpha.luc.ac.be>
Message-ID: <x2ogzw7z2t.fsf@blueberry.kubism.ku.dk>

Jim Lindsey <jlindsey at luc.ac.be> writes:

> >     Jim> R itself has nothing for repeated measures. However, I am developing a
> >     Jim> complete set of four libraries that will handle most any repeated
> >     Jim> measures problem, normally distributed or other. This includes two
> >     Jim> functions in one of the libraries that will do the so-called anova
> >     Jim> approach plus ARMA. They will do everything in my Repeated
> >     Jim> Measurements book (OUP 1993) and much more.
> >     Jim> I am waiting until R stabilizes a bit before releasing them but will
> >     Jim> soon be asking for volunteers to aid in preliminary testing.
> >     Jim> Jim
> > 
...
> > 
> > He was also badly missing S-plus's  aov(.) function...
> > and I explained how he could  use   anova( lm(...) ) for FIXED effects
> > anova, and that nothing is yet available for random (or mixed) effects.
> > 
> > Martin.
> > 
> Just a warning. These things are not as simple as aov. It should still
> be implemented! Mine are general enough to do any nonlinear model for
> both mean and variance (e.g.PKPD), generalized linear mixed models,
> multivariate survival with any censoring pattern, completely
> unbalanced data, etc. Hence, with this level of generality, the
> interface is not always that simple: lists of time-varying covariates etc.
>   Jim

Yes. We need aov().

Also note that Bates & Pinheiro are in the process of porting lme
(linear mixed effects models) to R. From what I have seen, this does
at least what SAS PROC MIXED does, only better...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jlindsey at luc.ac.be  Wed Feb 25 11:48:07 1998
From: jlindsey at luc.ac.be (Jim Lindsey)
Date: Wed, 25 Feb 1998 11:48:07 +0100 (MET)
Subject: R-beta: repeated measures
In-Reply-To: <x2ogzw7z2t.fsf@blueberry.kubism.ku.dk> from "Peter Dalgaard BSA" at Feb 25, 98 11:34:18 am
Message-ID: <9802251048.AA06692@alpha.luc.ac.be>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 2305 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-help/attachments/19980225/4d1c29ad/attachment.pl

From bates at stat.wisc.edu  Wed Feb 25 15:34:35 1998
From: bates at stat.wisc.edu (Douglas Bates)
Date: 25 Feb 1998 08:34:35 -0600
Subject: R-beta: repeated measures
In-Reply-To: Jim Lindsey's message of Wed, 25 Feb 1998 11:48:07 +0100 (MET)
References: <9802251048.AA06692@alpha.luc.ac.be>
Message-ID: <6ryayzsqh0.fsf@verdi.stat.wisc.edu>

Jim Lindsey <jlindsey at luc.ac.be> writes:

> > Also note that Bates & Pinheiro are in the process of porting lme
> > (linear mixed effects models) to R. From what I have seen, this does
> > at least what SAS PROC MIXED does, only better...
> 
> My libraries also do all of SAS Proc Mixed. One difference with
> respect to nlme is that I have not implemented models with more than
> one random effect, and certainly not for nonlinear models i.e just
> random intercept with nonlinear models, but any distribution, not just
> normal. I am waiting impatiently for that aspect of nlme.

We are porting the lme part of the nlme 3.0 library to R.  Right now we
have it working on some examples but other examples are tripping up on 
some inconsistencies in the behaviour of the data.frame function.

The biggest differences between nlme 2.1, the version currently
available for S/S-PLUS, and nlme 3.0, the development version, is the
ability to work with nested random effects and the incorporation of
trellis graphics presentations of the data and of the model fits.  The
graphics part does not work in R at present.  There are many, many
internal differences between 2.1 and 3.0 in the organization of the
code and the algorithms but they are not as visible at the user level.

I am not all that familiar with SAS PROC MIXED but I am starting to
read about it.  I believe it is not too much of an exaggeration to say
that all the models fit by PROC MIXED can be fit in the representation
we use.

Regarding nlme, there are no facilities for fitting nonlinear
regression models in R at present except by re-expressing the model in
a form suitable for nlm.  Incorporating nonlinear regression into R
would be non-trivial.  I don't expect that Jose' or I will have the
time to work on that in the near future.  Too many other projects in
the hopper, I'm afraid.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pgilbert at bank-banque-canada.ca  Wed Feb 25 17:52:50 1998
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 25 Feb 1998 11:52:50 -0500
Subject: R-beta: Re: dse+redhat 4.2 problem
References: <98Feb25.034218est.13443@mailgate.bank-banque-canada.ca>
Message-ID: <98Feb25.120132est.13449@mailgate.bank-banque-canada.ca>

 >R INSTALL dse     rlibs
>Installing package `dse' ...
>libs
>gcc -g -fpic -I/usr/local/R-0.61/include   -c dsefor.c -o dsefor.o
>/tmp/cca02533.i:1: numeric constant with no digits
>/tmp/cca02533.i:1: numeric constant with no digits
>...
>is there something wrong with my gcc or is there some
>option missing somewhere?

>I suspect the problem might have to do with f2c. I think I
>installed g77 after I install R.  R seems to be working.
>g77 seems to be working, but it seems that I have several
>f2c.h around and the dse installation is using the f2c that
>came with R.  I have tried to use different f2c and that
>seems to change the error but not solve the problem.

Helgi Tomasson

In the dse directory which R INSTALL uses there are directories dse/src and
dse/src-c. The first has the original fortran source and the second has C code
which I have already translated with f2c. Both of these directories also have
Makefiles but it is really only necessary to use one of them. I don't exactly
understand the R INSTALL strategy, but it seems that if you have a fortran
compiler when you configure R then it may chose to use fortran, and otherwise it
won't. I think if you delete or rename one of the Makefiles then you will force
the use of the other.

There has been a reported problem with the g77 fortran compiler, so it is
probably best not to use that for the time being. From your report it looks like
you are using gcc on the C code, not g77.

If you use the C code version you will not need f2c, but you will need the f2c
libraries. With elf Linux I would have thought that not having the f2c libraries
would cause run time errors, not compile time errors, but that does not
necessarily seem to be true. I have run DSE with R under an older Slackware
version of Linux which had f2c installed. Last night I tried to run it under
RedHat 4.2 and discovered I did not have the f2c libraries install. I was also
re-installing R. While I've gone completely to elf I also discovered that some
thing (I can't remember if it was the R make or the R INSTALL dse) was looking
for libf2c.a, not the .so version. I'm not sure why that is, and I didn't have
time to finish.

I posted your previous message on the R-devel list but so far I have had no
response. I don't think that you will get much help on this from my boc_dse list
as I don't think many people on that list are using the Linux version yet. The
code is in the devel part of CRAN for the reason that the make/install
procedures have not been widely tested - please persist, I think the code works
very well under R/Linux once you get it installed. If you do discover the reason
for the problem I would appreciate hearing about the resolution.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Wed Feb 25 19:24:36 1998
From: bates at stat.wisc.edu (Douglas Bates)
Date: 25 Feb 1998 12:24:36 -0600
Subject: R-beta: Re: dse+redhat 4.2 problem
In-Reply-To: Paul Gilbert's message of Wed, 25 Feb 1998 11:52:50 -0500
References: <98Feb25.034218est.13443@mailgate.bank-banque-canada.ca> <98Feb25.120132est.13449@mailgate.bank-banque-canada.ca>
Message-ID: <6rvhu3sftn.fsf@verdi.stat.wisc.edu>

Paul Gilbert <pgilbert at bank-banque-canada.ca> writes:

>  >R INSTALL dse     rlibs
> >Installing package `dse' ...
> >libs
> >gcc -g -fpic -I/usr/local/R-0.61/include   -c dsefor.c -o dsefor.o
> >/tmp/cca02533.i:1: numeric constant with no digits
> >/tmp/cca02533.i:1: numeric constant with no digits
> >...
> >is there something wrong with my gcc or is there some
> >option missing somewhere?
> 
> >I suspect the problem might have to do with f2c. I think I
> >installed g77 after I install R.  R seems to be working.
> >g77 seems to be working, but it seems that I have several
> >f2c.h around and the dse installation is using the f2c that
> >came with R.  I have tried to use different f2c and that
> >seems to change the error but not solve the problem.

Those errors look like a problem with the C compiler.  The compiler
(or perhaps the assembler) appears to be unable to read its
intermediate files properly.  My guess is that your versions of g77
and gcc are out of sync.  I would try to reinstall both gcc and g77 to
compatible versions.

Paul is right that there have been problems with the latest versions
of g77 when generating position-independent code (that is, when using
the -fpic option).  I believe this only occurs with versions that are
compiled for GNU libc 2 so it should not be a problem with RedHat
4.2.  RedHat 4.2 is based on GNU libc 1 whereas RedHat 5.0 is based on 
GNU libc 2.

In short, try re-installing both gcc and g77 then re-compiling R then
installing dse.  Alternatively, upgrade to RedHat 5.0 and install the
pre-compiled binary from the CRAN sites.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.baker at fsc.qut.edu.au  Thu Feb 26 06:49:37 1998
From: p.baker at fsc.qut.edu.au (Peter Baker)
Date: Thu, 26 Feb 1998 15:49:37 +1000 (EST)
Subject: R-beta: Re: dse+redhat 4.2 problem ......etc
In-Reply-To: <6rvhu3sftn.fsf@verdi.stat.wisc.edu>
Message-ID: 
 <Pine.OSF.3.95.980226153747.30984B-100000@einstein.math.sci.qut.edu.au>

Does anyone have a pre-compiled binary R0.61 for RedHat 4.2?

> Paul Gilbert <pgilbert at bank-banque-canada.ca> writes:
> 
> In short, try re-installing both gcc and g77 then re-compiling R then
> installing dse.  Alternatively, upgrade to RedHat 5.0 and install the
> pre-compiled binary from the CRAN sites.

I have both old and new libc on RH4.2 which I was advised against! One
side effect is that I get a segmentation fault when running R0.61
although it appears to compile OK. (gcc/g77 2.7.2.3)

I don't have the energy to upgrade to RedHat 5.0 although I will if I
must - but it doesn't seem to work for everyone - ie a fresh install
recommended rather than update ;-(.  I'd rather wait for 5.1!

Thanks
Peter

=========================================================================
|| Peter Baker  email: p.baker at fsc.qut.edu.au    ph: 07 3864 1293  (W)  ||
||              Mail:  School of Mathematics, Queensland University     ||
||                     of Technology,  GPO Box 2434, Brisbane  QLD 4001 ||
=========================================================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From agebhard at zidsrv.sci.uni-klu.ac.at  Thu Feb 26 16:35:51 1998
From: agebhard at zidsrv.sci.uni-klu.ac.at (Albrecht Gebhardt)
Date: Thu, 26 Feb 1998 16:35:51 +0100 (CET)
Subject: R-beta: question on dyn.loaded code
Message-ID: <Pine.LNX.3.96.980226163351.22796A-100000@alpha.fuzzy.at>

Hi,

when designing libraries for R, is it possible to call C/Fortran 
subroutines from other dynamically loaded code?

The following example crashes R:
********* fn1.c *****************
void twice(int *i)
{
  *i =  2 * *i;
}
*********************************
********* fn2.c *****************
extern int twice(int *i);

void negtwice(int *i)
{
  *i = -1 * twice(i);
}
*********************************

$ cc -fpic -c fn1.c
$ ld -shared fn1.o -o fn1.so
$ cc -fpic -c fn2.c
$ ld -shared fn2.o -o fn2.so
$ R

R : Copyright 1997, Robert Gentleman and Ross Ihaka
Version 0.61.1 Alpha (December 21, 1997)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "license()" for details.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.

> dyn.load("fn1.so")
> dyn.load("fn2.so")
> .C("negtwice",as.integer(2))
/usr/local/R/bin/R.binary: can't resolve symbol 'twice'


I guess it will not be possible at all but I'm not sure. Has anyone more 
experience with dynamic loaded code?

Albrecht

------------------------------------------------------------------
Albrecht Gebhardt           email: albrecht.gebhardt at uni-klu.ac.at
Institut fuer Mathematik    Tel. : (++43 463) 2700/837
Universitaet Klagenfurt     Fax  : (++43 463) 2700/834
Villacher Str. 161
A-9020 Klagenfurt, Austria
------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Osman.Buyukisik at ae.ge.com  Thu Feb 26 17:59:12 1998
From: Osman.Buyukisik at ae.ge.com (Buyukisik, Osman (GEAE))
Date: Thu, 26 Feb 1998 11:59:12 -0500
Subject: R-beta: question on dyn.loaded code
Message-ID: <0302875C631AD11198DE00600806C63747A013@ev009msxaege.ae.ge.com>

Using R0.61.1 Alpha on hpux10.20 with patches I get :

> dyn.load("fn1.sl")
> dyn.load("fn2.sl")
> .C("negtwice",as.integer(2))
[[1]]
[1] -4

> .C("twice",as.integer(2))
[[1]]
[1] 4

I had to type the functions as "int" rather than void.
I will try the same at home on my redhat 4.2 linux box.

Cheers,
Osman

> ----------
> From: 	Albrecht Gebhardt[SMTP:agebhard at zidsrv.sci.uni-klu.ac.at]
> Sent: 	Thursday, February 26, 1998 10:35 AM
> To: 	r-help at stat.math.ethz.ch
> Subject: 	R-beta: question on dyn.loaded code
> 
> Hi,
> 
> when designing libraries for R, is it possible to call C/Fortran 
> subroutines from other dynamically loaded code?
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Feb 26 18:07:41 1998
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Thu, 26 Feb 1998 09:07:41 -0800 (PST)
Subject: R-beta: question on dyn.loaded code
In-Reply-To: <Pine.LNX.3.96.980226163351.22796A-100000@alpha.fuzzy.at>
Message-ID: <Pine.SUN.3.95.980226090603.3459B-100000@chekov>

On Thu, 26 Feb 1998, Albrecht Gebhardt wrote:


> when designing libraries for R, is it possible to call C/Fortran 
> subroutines from other dynamically loaded code?
> 

It should be possible, and I thought Ross had actually tested it when we
were considering making a libf2c package. However, it definitely doesn't
work.



Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsimpson at uwinnipeg.ca  Thu Feb 26 23:36:03 1998
From: wsimpson at uwinnipeg.ca (Bill Simpson)
Date: Thu, 26 Feb 1998 16:36:03 -0600 (CST)
Subject: R-beta: quantile
Message-ID: <Pine.OSF.3.95.980226162931.23893A-100000@io.uwinnipeg.ca>

I do:
x<-rnorm(1000)
quantile(x,c(.025,.975))
       2%       98% 
-1.844753  1.931762 

Since I want to find a 95% confidence interval, I take the .025 and .975
quantiles.  HOWEVER R says I have the 2% (not 2.5%) and 98% (not 97.5%)
points.  Is it just rounding the printed 2% and 98%, or is it REALLY
finding .02 and .98 points instead of .025 and .975?

Thanks for any help.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at eno.Princeton.EDU  Thu Feb 26 23:59:29 1998
From: ben at eno.Princeton.EDU (Ben Bolker)
Date: Thu, 26 Feb 1998 17:59:29 -0500 (EST)
Subject: R-beta: quantile
In-Reply-To: <Pine.OSF.3.95.980226162931.23893A-100000@io.uwinnipeg.ca>
Message-ID: <Pine.SUN.3.95.980226175858.15590A-100000@paca>


  The experimental method:

> x _ rnorm(1000)
> quantile(x,c(0.02,0.025,0.975,0.98))
       2%        2%       98%       98% 
-1.824218 -1.782416  1.932281  2.013865

  Looks like everything is OK.

On Thu, 26 Feb 1998, Bill Simpson wrote:

> I do:
> x<-rnorm(1000)
> quantile(x,c(.025,.975))
>        2%       98% 
> -1.844753  1.931762 
> 
> Since I want to find a 95% confidence interval, I take the .025 and .975
> quantiles.  HOWEVER R says I have the 2% (not 2.5%) and 98% (not 97.5%)
> points.  Is it just rounding the printed 2% and 98%, or is it REALLY
> finding .02 and .98 points instead of .025 and .975?
> 
> Thanks for any help.
> 
> Bill Simpson
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._.._._._._._._._._._._._._._._._
> 

Benjamin Bolker          Dep't of Ecology and Evolutionary Biology,
ben at eno.princeton.edu    Princeton University
tel: (609) 258-6886,     fax: (609) 258-1334

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Feb 27 00:08:19 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Feb 1998 00:08:19 +0100
Subject: R-beta: quantile
In-Reply-To: Bill Simpson's message of Thu, 26 Feb 1998 16:36:03 -0600 (CST)
References: <Pine.OSF.3.95.980226162931.23893A-100000@io.uwinnipeg.ca>
Message-ID: <x2hg5mt15o.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson at uwinnipeg.ca> writes:

> 
> I do:
> x<-rnorm(1000)
> quantile(x,c(.025,.975))
>        2%       98% 
> -1.844753  1.931762 
> 
> Since I want to find a 95% confidence interval, I take the .025 and .975
> quantiles.  HOWEVER R says I have the 2% (not 2.5%) and 98% (not 97.5%)
> points.  Is it just rounding the printed 2% and 98%, or is it REALLY
> finding .02 and .98 points instead of .025 and .975?

It's rounding... 

At the end of the quantile function, you'll see:

        names(qs) <- paste(round(100 * probs), "%", sep = "")
        qs
}

Maybe we should put in an extra argument for controlling the precision
of the rounding?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsimpson at uwinnipeg.ca  Fri Feb 27 15:27:17 1998
From: wsimpson at uwinnipeg.ca (Bill Simpson)
Date: Fri, 27 Feb 1998 08:27:17 -0600 (CST)
Subject: R-beta: quantile
In-Reply-To: <Pine.OSF.3.95.980226162931.23893A-100000@io.uwinnipeg.ca>
Message-ID: <Pine.OSF.3.95.980227082658.4197A-100000@io.uwinnipeg.ca>

Thanks everyone for the help.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsimpson at uwinnipeg.ca  Fri Feb 27 18:14:11 1998
From: wsimpson at uwinnipeg.ca (Bill Simpson)
Date: Fri, 27 Feb 1998 11:14:11 -0600 (CST)
Subject: R-beta: is there a way to get rid of loop?
Message-ID: <Pine.OSF.3.95.980227105624.19746A-100000@io.uwinnipeg.ca>

Here is a programming question.  The code I am using is quite slow and I
was wondering if there is a way to get rid of the for loop.

I am dealing with "interaction" in 2x2 table, and am using Edwards's G_I
(Likelihood, p. 194).

I label the cells in the table as follows

stim		response
		"y"	"n"		total
--------------------------------
y		hit	miss		nsignal
--------------------------------
n		false	correct		nnoise
		alarm	rejection
---------------------------------

Gsens<-function(nhit,nmiss,nfa,ncr)
{
# Edwards's G_I, measure of interaction, is measure of sensitivity
(xlogx(nhit)+xlogx(nmiss)+xlogx(nfa)+xlogx(ncr))-(xlogx(nhit+nmiss)+xlogx(nfa+ncr))-(xlogx(nhit+nfa)+xlogx(nmiss+ncr))+xlogx(nhit+nmiss+nfa+ncr)
}

BTW I can't figure out how to break the line at 80 cols.  I tried \
but it didn't work (error message).

The question is about this function.  It calculates 95% CI based on Monte
Carlo simulation.  [Edwards gives no ref on the sampling distrib of G_I]
The number of signal trials is binomial random
variable with p=.5, so it is simulated that way.  This is fine, I can get
a vector of 2000 ns numbers that way.  However, for each ns I want an
associated binomial variate with p=phit.  Is there a better way to do this
than by looping?

Gsens.ci.mc<-function(nhit,nmiss,nfa,ncr)
{
#monte carlo simulated 95% CI
nsignal<-nhit+nmiss
nnoise<-nfa+ncr
phit<-nhit/nsignal
pfa<-nfa/nnoise
ns<-rbinom(2000,nsignal,.5)
nn<-nsignal+nnoise-ns
nh<-NULL
nf<-NULL
for(i in 1:2000)
	{
	nh<-c(nh,rbinom(1,ns[i],phit))
	nf<-c(nf,rbinom(1,nn[i],pfa))
	}
g<-Gsens(nh,ns-nh,nf,nn-nf)
quantile(g,c(.025,.975), na.rm=TRUE)
}

Thanks very much for any help!

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Feb 27 18:46:37 1998
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Feb 1998 18:46:37 +0100
Subject: R-beta: is there a way to get rid of loop?
In-Reply-To: Bill Simpson's message of Fri, 27 Feb 1998 11:14:11 -0600 (CST)
References: <Pine.OSF.3.95.980227105624.19746A-100000@io.uwinnipeg.ca>
Message-ID: <x290qx6iv6.fsf@blueberry.kubism.ku.dk>

Bill Simpson <wsimpson at uwinnipeg.ca> writes:

> associated binomial variate with p=phit.  Is there a better way to do this
> than by looping?
> 
> Gsens.ci.mc<-function(nhit,nmiss,nfa,ncr)
> {
> #monte carlo simulated 95% CI
> nsignal<-nhit+nmiss
> nnoise<-nfa+ncr
> phit<-nhit/nsignal
> pfa<-nfa/nnoise
> ns<-rbinom(2000,nsignal,.5)
> nn<-nsignal+nnoise-ns
> nh<-NULL
> nf<-NULL
> for(i in 1:2000)
> 	{
> 	nh<-c(nh,rbinom(1,ns[i],phit))
> 	nf<-c(nf,rbinom(1,nn[i],pfa))
> 	}
> g<-Gsens(nh,ns-nh,nf,nn-nf)
> quantile(g,c(.025,.975), na.rm=TRUE)
> }

Yes. 

[prepare to slap forehead...]

nh<-rbinom(2000,ns,phit)
nf<-rbinom(2000,nn,pfa)

This will generate NA's whereever ns==0, but you had that problem anyway.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wsimpson at uwinnipeg.ca  Fri Feb 27 18:59:13 1998
From: wsimpson at uwinnipeg.ca (Bill Simpson)
Date: Fri, 27 Feb 1998 11:59:13 -0600 (CST)
Subject: R-beta: is there a way to get rid of loop?
In-Reply-To: <x290qx6iv6.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.OSF.3.95.980227115550.17044B-100000@io.uwinnipeg.ca>

Thanks Peter!  
> [prepare to slap forehead...]
Duh!
 
> nh<-rbinom(2000,ns,phit)
> nf<-rbinom(2000,nn,pfa)
> 
> This will generate NA's whereever ns==0, but you had that problem anyway.
Yes I am just telling quantile to ignore them, but maybe that is not
kosher.

Bill Simpson

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


