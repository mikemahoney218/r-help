From p@u|bern@|07 @end|ng |rom gm@||@com  Tue Aug  1 15:57:49 2023
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Tue, 1 Aug 2023 08:57:49 -0500
Subject: [R] Plotting Fitted vs Observed Values in Logistic Regression Model
Message-ID: <CAMOcQfNC_0yD3hZejgtpMHqFT6GyfJXnhVcUgopiFPDZuPS+9g@mail.gmail.com>

Dear friends,

I hope  this email finds you all well. This is the dataset I am working
with:
dput(random_mod12_data2)
structure(list(Index = c(1L, 5L, 11L, 3L, 2L, 8L, 9L, 4L), x = c(5,
13, 25, 9, 7, 19, 21, 11), n = c(500, 500, 500, 500, 500, 500,
500, 500), r = c(100, 211, 391, 147, 122, 310, 343, 176), ratio = c(0.2,
0.422, 0.782, 0.294, 0.244, 0.62, 0.686, 0.352)), row.names = c(NA,
-8L), class = "data.frame")

A brief description of the dataset:
Index: is just a column that shows the ID of each observation (row)
x: is a column which gives information on the discount rate of the coupon
n: is the sample or number of observations
r: is the count of redeemed coupons
ratio: is just the ratio of redeemed coupons to n (total number of
observations)

#Fitting a logistic regression model to response variable y for problem 13.4
logistic_regmod2 <- glm(formula = ratio~x, family = binomial(logit), data =
random_mod12_data2)

I would like to plot the value of r (in the y-axis) vs x (the different
discount rates) and then superimpose the logistic regression fitted values
all in the same plot.

How could I accomplish this?

Any help and/or guidance will be greatly appreciated.

Kind regards,
Paul

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue Aug  1 16:06:57 2023
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 1 Aug 2023 10:06:57 -0400
Subject: [R] 
 Plotting Fitted vs Observed Values in Logistic Regression Model
In-Reply-To: <CAMOcQfNC_0yD3hZejgtpMHqFT6GyfJXnhVcUgopiFPDZuPS+9g@mail.gmail.com>
References: <CAMOcQfNC_0yD3hZejgtpMHqFT6GyfJXnhVcUgopiFPDZuPS+9g@mail.gmail.com>
Message-ID: <da6e16e2-bb3d-10ff-6a72-c806bc0d0e65@gmail.com>

logistic_regmod2 <- glm(formula = ratio~x, family = binomial(logit), data =
random_mod12_data2, weights =n)

plot(ratio ~ x, data = random_mod12_data2)

pframe <- data.frame(x = sort(random_mod12_data2$x))
pframe$ratio <- predict(logistic_regmod2, newdata = pframe, type = 
"response")
with(pframe, lines(x, ratio))



On 2023-08-01 9:57 a.m., Paul Bernal wrote:
> Dear friends,
> 
> I hope  this email finds you all well. This is the dataset I am working
> with:
> dput(random_mod12_data2)
> structure(list(Index = c(1L, 5L, 11L, 3L, 2L, 8L, 9L, 4L), x = c(5,
> 13, 25, 9, 7, 19, 21, 11), n = c(500, 500, 500, 500, 500, 500,
> 500, 500), r = c(100, 211, 391, 147, 122, 310, 343, 176), ratio = c(0.2,
> 0.422, 0.782, 0.294, 0.244, 0.62, 0.686, 0.352)), row.names = c(NA,
> -8L), class = "data.frame")
> 
> A brief description of the dataset:
> Index: is just a column that shows the ID of each observation (row)
> x: is a column which gives information on the discount rate of the coupon
> n: is the sample or number of observations
> r: is the count of redeemed coupons
> ratio: is just the ratio of redeemed coupons to n (total number of
> observations)
> 
> #Fitting a logistic regression model to response variable y for problem 13.4
> logistic_regmod2 <- glm(formula = ratio~x, family = binomial(logit), data =
> random_mod12_data2)
> 
> I would like to plot the value of r (in the y-axis) vs x (the different
> discount rates) and then superimpose the logistic regression fitted values
> all in the same plot.
> 
> How could I accomplish this?
> 
> Any help and/or guidance will be greatly appreciated.
> 
> Kind regards,
> Paul
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics
 > E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Aug  2 15:50:17 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 2 Aug 2023 14:50:17 +0100
Subject: [R] 
 Plotting Fitted vs Observed Values in Logistic Regression Model
In-Reply-To: <CAMOcQfNC_0yD3hZejgtpMHqFT6GyfJXnhVcUgopiFPDZuPS+9g@mail.gmail.com>
References: <CAMOcQfNC_0yD3hZejgtpMHqFT6GyfJXnhVcUgopiFPDZuPS+9g@mail.gmail.com>
Message-ID: <39b5dd66-5539-6af9-1a13-cfb6a88e32ab@sapo.pt>

?s 14:57 de 01/08/2023, Paul Bernal escreveu:
> Dear friends,
> 
> I hope  this email finds you all well. This is the dataset I am working
> with:
> dput(random_mod12_data2)
> structure(list(Index = c(1L, 5L, 11L, 3L, 2L, 8L, 9L, 4L), x = c(5,
> 13, 25, 9, 7, 19, 21, 11), n = c(500, 500, 500, 500, 500, 500,
> 500, 500), r = c(100, 211, 391, 147, 122, 310, 343, 176), ratio = c(0.2,
> 0.422, 0.782, 0.294, 0.244, 0.62, 0.686, 0.352)), row.names = c(NA,
> -8L), class = "data.frame")
> 
> A brief description of the dataset:
> Index: is just a column that shows the ID of each observation (row)
> x: is a column which gives information on the discount rate of the coupon
> n: is the sample or number of observations
> r: is the count of redeemed coupons
> ratio: is just the ratio of redeemed coupons to n (total number of
> observations)
> 
> #Fitting a logistic regression model to response variable y for problem 13.4
> logistic_regmod2 <- glm(formula = ratio~x, family = binomial(logit), data =
> random_mod12_data2)
> 
> I would like to plot the value of r (in the y-axis) vs x (the different
> discount rates) and then superimpose the logistic regression fitted values
> all in the same plot.
> 
> How could I accomplish this?
> 
> Any help and/or guidance will be greatly appreciated.
> 
> Kind regards,
> Paul
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Here is another way with ggplot2.
It doesn't give you the fitted values but it plots the fitted line.


library(ggplot2)

ggplot(random_mod12_data2, aes(x, ratio)) +
   geom_point() +
   stat_smooth(
     formula = y ~ x,
     method = glm,
     method.args = list(family = binomial),
     se = FALSE
   )


Hope this helps,

Rui Barradas


From n|ckmwr@y @end|ng |rom gm@||@com  Wed Aug  2 19:10:41 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Wed, 2 Aug 2023 18:10:41 +0100
Subject: [R] Choosing colours for lines in ggplot2
Message-ID: <CABxY9BMwYCr09zfbzfeRMo8TPF6xLJwBRpv1LJ6JpJebHtcdkQ@mail.gmail.com>

Hello - I am trying to plot flows in a number of rivers within the same
plot, and need to colour the lines differently, using a colour-blind
palette.


Code beneath works but has colours assigned by the program I have made some
simple dummy data:
## code 1
cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
"#D55E00", "#CC79A7")  ## this is the colour-blind palette
 set.seed(020823)
 df<-as.data.frame(cbind(rep(1980:1991,2),c(10*runif(12),10*runif(12)),c(rep(1,12),rep(2,12))))
 colnames(df)<-c("Year","Flow","Stat")
 df
 ggplot(df,aes(Year,Flow,group=Stat,colour=Stat))+
   coord_cartesian(ylim = c(0, 10)) +
   geom_line()+
   geom_point()
 ## this works

## BUT:
## code 2
col.2<-cb8[4:5]
 ggplot(df,aes(Year,Flow,group=Stat,colour=Stat))+
   coord_cartesian(ylim = c(0, 10)) +
   geom_line()+
   geom_point()+
 scale_color_manual(values =cb8[4:5])+
   theme_bw()
 ## this gives error message Error: Continuous value supplied to discrete
scale

## However this example using code from the net does work so I don't
understand why my ## second code doesn't work.
## code 3
 df.1 <- data.frame(store=c('A', 'A', 'A', 'B', 'B', 'B', 'C', 'C', 'C'),
                  week=c(1, 2, 3, 1, 2, 3, 1, 2, 3),
                  sales=c(9, 12, 15, 7, 9, 14, 10, 16, 19))
 ggplot(df.1, aes(x=week, y=sales, group=store, color=store)) +
   geom_line(size=2) +
   #scale_color_manual(values=c('orange', 'pink', 'red'))
   scale_color_manual(values=cb8[4:6])

Can anyone help? Thanks Nick Wray

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Aug  2 20:26:34 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 2 Aug 2023 19:26:34 +0100
Subject: [R] Choosing colours for lines in ggplot2
In-Reply-To: <CABxY9BMwYCr09zfbzfeRMo8TPF6xLJwBRpv1LJ6JpJebHtcdkQ@mail.gmail.com>
References: <CABxY9BMwYCr09zfbzfeRMo8TPF6xLJwBRpv1LJ6JpJebHtcdkQ@mail.gmail.com>
Message-ID: <b536355c-961a-f43e-c0cc-7a4f887ca2b2@sapo.pt>

?s 18:10 de 02/08/2023, Nick Wray escreveu:
> Hello - I am trying to plot flows in a number of rivers within the same
> plot, and need to colour the lines differently, using a colour-blind
> palette.
> 
> 
> Code beneath works but has colours assigned by the program I have made some
> simple dummy data:
> ## code 1
> cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
> "#D55E00", "#CC79A7")  ## this is the colour-blind palette
>   set.seed(020823)
>   df<-as.data.frame(cbind(rep(1980:1991,2),c(10*runif(12),10*runif(12)),c(rep(1,12),rep(2,12))))
>   colnames(df)<-c("Year","Flow","Stat")
>   df
>   ggplot(df,aes(Year,Flow,group=Stat,colour=Stat))+
>     coord_cartesian(ylim = c(0, 10)) +
>     geom_line()+
>     geom_point()
>   ## this works
> 
> ## BUT:
> ## code 2
> col.2<-cb8[4:5]
>   ggplot(df,aes(Year,Flow,group=Stat,colour=Stat))+
>     coord_cartesian(ylim = c(0, 10)) +
>     geom_line()+
>     geom_point()+
>   scale_color_manual(values =cb8[4:5])+
>     theme_bw()
>   ## this gives error message Error: Continuous value supplied to discrete
> scale
> 
> ## However this example using code from the net does work so I don't
> understand why my ## second code doesn't work.
> ## code 3
>   df.1 <- data.frame(store=c('A', 'A', 'A', 'B', 'B', 'B', 'C', 'C', 'C'),
>                    week=c(1, 2, 3, 1, 2, 3, 1, 2, 3),
>                    sales=c(9, 12, 15, 7, 9, 14, 10, 16, 19))
>   ggplot(df.1, aes(x=week, y=sales, group=store, color=store)) +
>     geom_line(size=2) +
>     #scale_color_manual(values=c('orange', 'pink', 'red'))
>     scale_color_manual(values=cb8[4:6])
> 
> Can anyone help? Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Your Stat column is numeric, therefore, ggplot sees it as continuous.
To make it work, coerce to factor. Here are two ways.


## 1st way, Stat coerce to factor in the ggplot code
## this means you will have to set the legend name
## manually in scale_color_manual
## code 2, now it works
col.2<-cb8[4:5]
ggplot(df, aes(Year,Flow, group = factor(Stat), colour = factor(Stat)))+
   coord_cartesian(ylim = c(0, 10)) +
   geom_line()+
   geom_point()+
   scale_color_manual(name = "Stat", values = cb8[4:5])+
   theme_bw()


## 2nd way, since you are using ggplot2, a tidyverse package,
## coerce to factor in a pipe before the ggplot call
## this is done with dplyr::mutate and R's native pipe operator
## (could also be magritttr's pipe)
## I have left name = "Stat" like above though it's no
## longer needed
df |>
   dplyr::mutate(Stat = factor(Stat)) |>
   ggplot(aes(Year, Flow, group = Stat, colour = Stat))+
   coord_cartesian(ylim = c(0, 10)) +
   geom_line()+
   geom_point()+
   scale_color_manual(name = "Stat", values = cb8[4:5])+
   theme_bw()



Hope this helps,

Rui Barradas


From k|mmo@e|o @end|ng |rom utu@||  Thu Aug  3 08:14:11 2023
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Thu, 3 Aug 2023 06:14:11 +0000
Subject: [R] Choosing colours for lines in ggplot2
In-Reply-To: <CABxY9BMwYCr09zfbzfeRMo8TPF6xLJwBRpv1LJ6JpJebHtcdkQ@mail.gmail.com>
References: <CABxY9BMwYCr09zfbzfeRMo8TPF6xLJwBRpv1LJ6JpJebHtcdkQ@mail.gmail.com>
Message-ID: <0fd6bd6ad538431a5f58d0844aa9ebd46af33285.camel@utu.fi>

Hi,

when using 'scale_colours_manual' the colours must be defined as value-
color pairs (i.e. "A"="red", "B"="blue" an so on). If you read the
documentation it is recommended to use a named vector.

If I understood it correctly, in your code #2 R understood the variable
"Stat" as a number (i.e. continuous), whereas "store" (in code #3) is a
categorical variable. You cannot use scale_manual_* functions with
continuous variables.

This should work (please note than I use 'as_factor' from 'haven', this
is a more general function compared to 'as.factor'):

--- snip ---
library(tidyverse)
library(haven)
col.2<-cb8[4:5]
 ggplot(df,aes(Year,Flow,group=Stat,colour=as_factor(Stat)))+
   coord_cartesian(ylim = c(0, 10)) +
   geom_line()+
   geom_point()+
 scale_color_manual(values =cb8[4:5])+
   theme_bw()
--- snip ---

Is the result what you expected?

HTH,
Kimmo

ke, 2023-08-02 kello 18:10 +0100, Nick Wray kirjoitti:
> Hello - I am trying to plot flows in a number of rivers within the
> same
> plot, and need to colour the lines differently, using a colour-blind
> palette.
> 
> 
> Code beneath works but has colours assigned by the program I have
> made some
> simple dummy data:
> ## code 1
> cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442",
> "#0072B2",
> "#D55E00", "#CC79A7")? ## this is the colour-blind palette
> ?set.seed(020823)
> ?df<-
> as.data.frame(cbind(rep(1980:1991,2),c(10*runif(12),10*runif(12)),c(r
> ep(1,12),rep(2,12))))
> ?colnames(df)<-c("Year","Flow","Stat")
> ?df
> ?ggplot(df,aes(Year,Flow,group=Stat,colour=Stat))+
> ?? coord_cartesian(ylim = c(0, 10)) +
> ?? geom_line()+
> ?? geom_point()
> ?## this works
> 
> ## BUT:
> ## code 2
> col.2<-cb8[4:5]
> ?ggplot(df,aes(Year,Flow,group=Stat,colour=Stat))+
> ?? coord_cartesian(ylim = c(0, 10)) +
> ?? geom_line()+
> ?? geom_point()+
> ?scale_color_manual(values =cb8[4:5])+
> ?? theme_bw()
> ?## this gives error message Error: Continuous value supplied to
> discrete
> scale
> 
> ## However this example using code from the net does work so I don't
> understand why my ## second code doesn't work.
> ## code 3
> ?df.1 <- data.frame(store=c('A', 'A', 'A', 'B', 'B', 'B', 'C', 'C',
> 'C'),
> ????????????????? week=c(1, 2, 3, 1, 2, 3, 1, 2, 3),
> ????????????????? sales=c(9, 12, 15, 7, 9, 14, 10, 16, 19))
> ?ggplot(df.1, aes(x=week, y=sales, group=store, color=store)) +
> ?? geom_line(size=2) +
> ?? #scale_color_manual(values=c('orange', 'pink', 'red'))
> ?? scale_color_manual(values=cb8[4:6])
> 
> Can anyone help? Thanks Nick Wray
> 
> ????????[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Thu Aug  3 16:53:07 2023
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Thu, 3 Aug 2023 20:23:07 +0530
Subject: [R] Could not read time series data using read.zoo()
Message-ID: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>

Hi,

I have a CSV which contains data like below (only first few rows),

Date Adj Close lret
02-01-1997 737.01
03-01-1997 748.03 1.48416235
06-01-1997 747.65 -0.050813009
07-01-1997 753.23 0.743567202
08-01-1997 748.41 -0.64196699
09-01-1997 754.85 0.856809786
10-01-1997 759.5 0.614126802

However when I try to read this data using below code I get error,

read.zoo("1.csv", sep = ',', format = '%d-%m-%Y')

Error reads as,

index has 4500 bad entries at data rows: 1 2 3 4 5 6 7 8 9.....

Could you please help to understand why I am getting this error?

> sessionInfo()

R version 4.2.2 (2022-10-31)

Platform: x86_64-apple-darwin17.0 (64-bit)

Running under: macOS Big Sur ... 10.16


Matrix products: default

BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib

LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib


locale:

[1] C/UTF-8/C/C/C/C


attached base packages:

[1] stats     graphics  grDevices utils     datasets  methods   base


other attached packages:

[1] zoo_1.8-12


loaded via a namespace (and not attached):

[1] compiler_4.2.2  tools_4.2.2     grid_4.2.2      lattice_0.20-45


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Aug  3 17:04:53 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 03 Aug 2023 08:04:53 -0700
Subject: [R] Could not read time series data using read.zoo()
In-Reply-To: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>
References: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>
Message-ID: <14770ACD-E7C1-4F3E-8A56-E4A029F6E218@dcn.davis.ca.us>

no commas?

On August 3, 2023 7:53:07 AM PDT, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>Hi,
>
>I have a CSV which contains data like below (only first few rows),
>
>Date Adj Close lret
>02-01-1997 737.01
>03-01-1997 748.03 1.48416235
>06-01-1997 747.65 -0.050813009
>07-01-1997 753.23 0.743567202
>08-01-1997 748.41 -0.64196699
>09-01-1997 754.85 0.856809786
>10-01-1997 759.5 0.614126802
>
>However when I try to read this data using below code I get error,
>
>read.zoo("1.csv", sep = ',', format = '%d-%m-%Y')
>
>Error reads as,
>
>index has 4500 bad entries at data rows: 1 2 3 4 5 6 7 8 9.....
>
>Could you please help to understand why I am getting this error?
>
>> sessionInfo()
>
>R version 4.2.2 (2022-10-31)
>
>Platform: x86_64-apple-darwin17.0 (64-bit)
>
>Running under: macOS Big Sur ... 10.16
>
>
>Matrix products: default
>
>BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
>
>LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
>
>
>locale:
>
>[1] C/UTF-8/C/C/C/C
>
>
>attached base packages:
>
>[1] stats     graphics  grDevices utils     datasets  methods   base
>
>
>other attached packages:
>
>[1] zoo_1.8-12
>
>
>loaded via a namespace (and not attached):
>
>[1] compiler_4.2.2  tools_4.2.2     grid_4.2.2      lattice_0.20-45
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jrkr|de@u @end|ng |rom gm@||@com  Thu Aug  3 17:12:39 2023
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Thu, 3 Aug 2023 11:12:39 -0400
Subject: [R] Could not read time series data using read.zoo()
In-Reply-To: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>
References: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>
Message-ID: <CAKZQJMDQhcQLqa_vbNfx2v-8MLLbCsJfifXwh7MaeDLiAbusqg@mail.gmail.com>

One reason seems to be you are saying sep = "," and there is no "," in the
file.
Also you only have 3 columns of data but 4 variable names.

On Thu, 3 Aug 2023 at 10:53, Christofer Bogaso <bogaso.christofer at gmail.com>
wrote:

> Hi,
>
> I have a CSV which contains data like below (only first few rows),
>
> Date Adj Close lret
> 02-01-1997 737.01
> 03-01-1997 748.03 1.48416235
> 06-01-1997 747.65 -0.050813009
> 07-01-1997 753.23 0.743567202
> 08-01-1997 748.41 -0.64196699
> 09-01-1997 754.85 0.856809786
> 10-01-1997 759.5 0.614126802
>
> However when I try to read this data using below code I get error,
>
> read.zoo("1.csv", sep = ',', format = '%d-%m-%Y')
>
> Error reads as,
>
> index has 4500 bad entries at data rows: 1 2 3 4 5 6 7 8 9.....
>
> Could you please help to understand why I am getting this error?
>
> > sessionInfo()
>
> R version 4.2.2 (2022-10-31)
>
> Platform: x86_64-apple-darwin17.0 (64-bit)
>
> Running under: macOS Big Sur ... 10.16
>
>
> Matrix products: default
>
> BLAS:
>  /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
>
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
>
>
> locale:
>
> [1] C/UTF-8/C/C/C/C
>
>
> attached base packages:
>
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>
> other attached packages:
>
> [1] zoo_1.8-12
>
>
> loaded via a namespace (and not attached):
>
> [1] compiler_4.2.2  tools_4.2.2     grid_4.2.2      lattice_0.20-45
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From @erv|ce @end|ng |rom @hd@w@on@com  Thu Aug  3 17:09:27 2023
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Thu, 3 Aug 2023 11:09:27 -0400
Subject: [R] Could not read time series data using read.zoo()
In-Reply-To: <14770ACD-E7C1-4F3E-8A56-E4A029F6E218@dcn.davis.ca.us>
References: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>
 <14770ACD-E7C1-4F3E-8A56-E4A029F6E218@dcn.davis.ca.us>
Message-ID: <d1afe6e4-da01-2084-582a-5e0034b2f22f@shdawson.com>

Agreed. Tab character is not comma character.

*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 8/3/23 11:04, Jeff Newmiller wrote:
> no commas?
>
> On August 3, 2023 7:53:07 AM PDT, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
>> Hi,
>>
>> I have a CSV which contains data like below (only first few rows),
>>
>> Date Adj Close lret
>> 02-01-1997 737.01
>> 03-01-1997 748.03 1.48416235
>> 06-01-1997 747.65 -0.050813009
>> 07-01-1997 753.23 0.743567202
>> 08-01-1997 748.41 -0.64196699
>> 09-01-1997 754.85 0.856809786
>> 10-01-1997 759.5 0.614126802
>>
>> However when I try to read this data using below code I get error,
>>
>> read.zoo("1.csv", sep = ',', format = '%d-%m-%Y')
>>
>> Error reads as,
>>
>> index has 4500 bad entries at data rows: 1 2 3 4 5 6 7 8 9.....
>>
>> Could you please help to understand why I am getting this error?
>>
>>> sessionInfo()
>> R version 4.2.2 (2022-10-31)
>>
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>
>> Running under: macOS Big Sur ... 10.16
>>
>>
>> Matrix products: default
>>
>> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
>>
>> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
>>
>>
>> locale:
>>
>> [1] C/UTF-8/C/C/C/C
>>
>>
>> attached base packages:
>>
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>>
>> other attached packages:
>>
>> [1] zoo_1.8-12
>>
>>
>> loaded via a namespace (and not attached):
>>
>> [1] compiler_4.2.2  tools_4.2.2     grid_4.2.2      lattice_0.20-45
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From ggrothend|eck @end|ng |rom gm@||@com  Thu Aug  3 20:46:21 2023
From: ggrothend|eck @end|ng |rom gm@||@com (Gabor Grothendieck)
Date: Thu, 3 Aug 2023 14:46:21 -0400
Subject: [R] Could not read time series data using read.zoo()
In-Reply-To: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>
References: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>
Message-ID: <CAP01uRnVFX7ydHMu4FnWuVY6RpQjb52OBX+nLid_WC+SOKeGjQ@mail.gmail.com>

The header has white space in it so skip over it, use header = FALSE
and specify the
column headers yourself.  Also use fill=TRUE since the first row does
not have 3 entries.

   # generate test file
  cat("Date Adj Close lret
  02-01-1997 737.01
  03-01-1997 748.03 1.48416235
  06-01-1997 747.65 -0.050813009
  07-01-1997 753.23 0.743567202
  08-01-1997 748.41 -0.64196699
  09-01-1997 754.85 0.856809786
  10-01-1997 759.5 0.614126802", file = "1.csv")

  # test
  library(zoo)
  read.zoo("1.csv", skip = 1, header = FALSE, format = "%m-%d-%Y", fill = TRUE,
     col.names = c(NA, "Adj_Close", "Close"))

On Thu, Aug 3, 2023 at 10:53?AM Christofer Bogaso
<bogaso.christofer at gmail.com> wrote:
>
> Hi,
>
> I have a CSV which contains data like below (only first few rows),
>
> Date Adj Close lret
> 02-01-1997 737.01
> 03-01-1997 748.03 1.48416235
> 06-01-1997 747.65 -0.050813009
> 07-01-1997 753.23 0.743567202
> 08-01-1997 748.41 -0.64196699
> 09-01-1997 754.85 0.856809786
> 10-01-1997 759.5 0.614126802
>
> However when I try to read this data using below code I get error,
>
> read.zoo("1.csv", sep = ',', format = '%d-%m-%Y')
>
> Error reads as,
>
> index has 4500 bad entries at data rows: 1 2 3 4 5 6 7 8 9.....
>
> Could you please help to understand why I am getting this error?
>
> > sessionInfo()
>
> R version 4.2.2 (2022-10-31)
>
> Platform: x86_64-apple-darwin17.0 (64-bit)
>
> Running under: macOS Big Sur ... 10.16
>
>
> Matrix products: default
>
> BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
>
> LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
>
>
> locale:
>
> [1] C/UTF-8/C/C/C/C
>
>
> attached base packages:
>
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>
> other attached packages:
>
> [1] zoo_1.8-12
>
>
> loaded via a namespace (and not attached):
>
> [1] compiler_4.2.2  tools_4.2.2     grid_4.2.2      lattice_0.20-45
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From bog@@o@chr|@to|er @end|ng |rom gm@||@com  Thu Aug  3 17:08:58 2023
From: bog@@o@chr|@to|er @end|ng |rom gm@||@com (Christofer Bogaso)
Date: Thu, 3 Aug 2023 20:38:58 +0530
Subject: [R] Could not read time series data using read.zoo()
In-Reply-To: <14770ACD-E7C1-4F3E-8A56-E4A029F6E218@dcn.davis.ca.us>
References: <CA+dpOJnL4j-m=ExFvo0e76C6VvJAUEGCOAjiTdj5ha6Gqx60Lg@mail.gmail.com>
 <14770ACD-E7C1-4F3E-8A56-E4A029F6E218@dcn.davis.ca.us>
Message-ID: <CA+dpOJ=mJ+pO1wpJ-Z+4A4iKsfTCO8QhaS28R=KxXR_OUWX-PA@mail.gmail.com>

Hi,

I just provided a snapshot of my CSV file. Attaching the full file
here (not sure if R-help would accept the attachment).

Thanks and regards,

On Thu, Aug 3, 2023 at 8:35?PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> no commas?
>
> On August 3, 2023 7:53:07 AM PDT, Christofer Bogaso <bogaso.christofer at gmail.com> wrote:
> >Hi,
> >
> >I have a CSV which contains data like below (only first few rows),
> >
> >Date Adj Close lret
> >02-01-1997 737.01
> >03-01-1997 748.03 1.48416235
> >06-01-1997 747.65 -0.050813009
> >07-01-1997 753.23 0.743567202
> >08-01-1997 748.41 -0.64196699
> >09-01-1997 754.85 0.856809786
> >10-01-1997 759.5 0.614126802
> >
> >However when I try to read this data using below code I get error,
> >
> >read.zoo("1.csv", sep = ',', format = '%d-%m-%Y')
> >
> >Error reads as,
> >
> >index has 4500 bad entries at data rows: 1 2 3 4 5 6 7 8 9.....
> >
> >Could you please help to understand why I am getting this error?
> >
> >> sessionInfo()
> >
> >R version 4.2.2 (2022-10-31)
> >
> >Platform: x86_64-apple-darwin17.0 (64-bit)
> >
> >Running under: macOS Big Sur ... 10.16
> >
> >
> >Matrix products: default
> >
> >BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
> >
> >LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
> >
> >
> >locale:
> >
> >[1] C/UTF-8/C/C/C/C
> >
> >
> >attached base packages:
> >
> >[1] stats     graphics  grDevices utils     datasets  methods   base
> >
> >
> >other attached packages:
> >
> >[1] zoo_1.8-12
> >
> >
> >loaded via a namespace (and not attached):
> >
> >[1] compiler_4.2.2  tools_4.2.2     grid_4.2.2      lattice_0.20-45
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From n|ckmwr@y @end|ng |rom gm@||@com  Fri Aug  4 12:08:10 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Fri, 4 Aug 2023 11:08:10 +0100
Subject: [R] Problems with facets in ggplot2
Message-ID: <CABxY9BPZ6U5yj91FtPg2ejtX=YA93iCdmd6dX=oKYDg16cCRqw@mail.gmail.com>

Hello  I am wrestling with ggplot ? I have produced a facetted plot of
flows under various metrics but I can?t find info on the net which tells me
how to do three things


I have created some simplified mock data to illustrate (and using a
colour-blind palette):


library(ggplot2)

library(forcats)

cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
"#D55E00", "#CC79A7")

set.seed<-(040823)

  mock<- set.seed<-(040823)


mock<-as.data.frame(cbind(rep((1990:1995),8),round(rnorm(48,50,10),3),rep(c(rep("Tweed",6),rep("Tay",6)),4),rep(c("AMAX","Mean","AMIN","Median"),each=12)))

  colnames(mock)<-c("Year","Flow","Stat","Metric")

  mock



  ggplot(mock, aes(Year,Flow, group = factor(Stat), colour = factor(Stat)))+

    coord_cartesian(ylim = c(0, 100)) +

    geom_line(size=1)+

    scale_color_manual(name = "Stat", values = cb8[4:7])+

    scale_y_discrete(breaks=c(0,25,50,75,100),labels=c(0,25,50,75,100))+

    facet_wrap(vars(Metric),nrow=2,ncol=2)+

    ylab("Flow")



1)This gives me a facetted plot but I can?t work out why I?m not getting a
labelled y scale



2)Why are plots down at the bottom of the facets rather than in the middle?



3)And also I?d like the plots to be in the order (top left to bottom right)
of

AMAX MEAN AMIN MEDIAN

but if I add in the line
facet_grid(~fct_relevel(Metric,"AMAX","Mean","AMIN","Median")) before the
line ylab it disrupts the 2x2 layout



Can anyone tell me how to resolve these problems?  Thanks Nick Wray

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Aug  4 12:26:02 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 4 Aug 2023 11:26:02 +0100
Subject: [R] Problems with facets in ggplot2
In-Reply-To: <CABxY9BPZ6U5yj91FtPg2ejtX=YA93iCdmd6dX=oKYDg16cCRqw@mail.gmail.com>
References: <CABxY9BPZ6U5yj91FtPg2ejtX=YA93iCdmd6dX=oKYDg16cCRqw@mail.gmail.com>
Message-ID: <0fa2c9bc-6b82-2cb5-e6e7-d23bceb66759@sapo.pt>

?s 11:08 de 04/08/2023, Nick Wray escreveu:
> Hello  I am wrestling with ggplot ? I have produced a facetted plot of
> flows under various metrics but I can?t find info on the net which tells me
> how to do three things
> 
> 
> I have created some simplified mock data to illustrate (and using a
> colour-blind palette):
> 
> 
> library(ggplot2)
> 
> library(forcats)
> 
> cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
> "#D55E00", "#CC79A7")
> 
> set.seed<-(040823)
> 
>    mock<- set.seed<-(040823)
> 
> 
> mock<-as.data.frame(cbind(rep((1990:1995),8),round(rnorm(48,50,10),3),rep(c(rep("Tweed",6),rep("Tay",6)),4),rep(c("AMAX","Mean","AMIN","Median"),each=12)))
> 
>    colnames(mock)<-c("Year","Flow","Stat","Metric")
> 
>    mock
> 
> 
> 
>    ggplot(mock, aes(Year,Flow, group = factor(Stat), colour = factor(Stat)))+
> 
>      coord_cartesian(ylim = c(0, 100)) +
> 
>      geom_line(size=1)+
> 
>      scale_color_manual(name = "Stat", values = cb8[4:7])+
> 
>      scale_y_discrete(breaks=c(0,25,50,75,100),labels=c(0,25,50,75,100))+
> 
>      facet_wrap(vars(Metric),nrow=2,ncol=2)+
> 
>      ylab("Flow")
> 
> 
> 
> 1)This gives me a facetted plot but I can?t work out why I?m not getting a
> labelled y scale
> 
> 
> 
> 2)Why are plots down at the bottom of the facets rather than in the middle?
> 
> 
> 
> 3)And also I?d like the plots to be in the order (top left to bottom right)
> of
> 
> AMAX MEAN AMIN MEDIAN
> 
> but if I add in the line
> facet_grid(~fct_relevel(Metric,"AMAX","Mean","AMIN","Median")) before the
> line ylab it disrupts the 2x2 layout
> 
> 
> 
> Can anyone tell me how to resolve these problems?  Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

The main problem is the way ou create the data set. cbind defaults to 
creating a matrix and since some of the vectors are of class "character" 
all others will be coerced to character too. And Year and Flow will no 
longer be numeric.

You can coerce those two columns to numeric manually or you can use 
data.frame(), not as.data.frame(), to create the data set.
And you were, therefore, using scale_y_discrete when it should be 
scale_y_continuous. Corrected below.

As for the relevel, I'm not getting any errors.



library(ggplot2)
library(forcats)

cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73",
         "#F0E442", "#0072B2", "#D55E00", "#CC79A7")

set.seed(040823)

# the right way of creating the data set
mock <- data.frame(
   Year = rep((1990:1995),8),
   Flow = round(rnorm(48,50,10),3),
   Stat = rep(c(rep("Tweed",6), rep("Tay",6)),4),
   Metric = rep(c("AMAX","Mean","AMIN","Median"),each=12)
)

ggplot(mock, aes(Year,Flow, group = factor(Stat), colour = factor(Stat))) +
   coord_cartesian(ylim = c(0, 100)) +
   geom_line(size=1) +
   scale_color_manual(name = "Stat", values = cb8[4:5]) +
   scale_y_continuous(breaks=c(0, 25, 50, 75, 100), labels=c(0, 25, 50, 
75, 100)) +
   facet_wrap(~ fct_relevel(Metric,"AMAX","Mean","AMIN","Median"), nrow 
= 2, ncol = 2) +
   ylab("Flow")


Hope this helps,

Rui Barradas


From mur@t@de|m@n @end|ng |rom gm@||@com  Fri Aug  4 09:13:55 2023
From: mur@t@de|m@n @end|ng |rom gm@||@com (Murat DELMAN)
Date: Fri, 4 Aug 2023 10:13:55 +0300
Subject: [R] Technical Help Request for "Version Differences" (i.e.,
 CYTOFKIT package)
Message-ID: <CAHZ-BgrATMoVki+KEm6TaLtnsig-zWP4_N7BCK+=Fyt+Lf4ayw@mail.gmail.com>

Dear Ms./Mr.,


I sent an email to this email address from my institutional address
muratdelman at iyte.edu.tr, but could not make sure if my email reached you
because sometimes emails are not delivered to the target due to
server issues and country-related limitations. I wanted to send you the
same email via my Gmail account.




If the email text and codes below are not properly displayed, you can
download the attached Word file, which has exactly the same content.



I am a cytometrist and microscopist at Izmir Institute of Technology,
Integrated Research Center. I operate a cytometer and fluorescence
microscope to acquire data from our researchers? samples and then give them
analyzed data. I need to dive into bulk data to present all of the
information in the sample. To do this, I have recently been trying to
develop my skills in R, RStudio, and Cytofkit package for cytometry (flow,
spectral, mass, imaging mass cytometry) data analysis. I am new in this
area and must learn R for data analysis.





May I request help from you or one of your assistants who is competent in
R, RStudio, and R packages with the installation issues caused by ?*version
differences*? between R itself, R packages, and their dependencies? I
really had to send this email to you anymore, because I could not run the
package ?Cytofkit? and find a solution on the internet.


It has been nearly 2 weeks since I have been trying to solve the errors and
warnings. I am in a vicious circle and cannot move forward anymore. This is
why I needed help from an expert competent in R programming.



I tried to use the renv package, but I could not move forward because I am
not competent in R.


I explained the errors that I faced during the installation below.



I have two computers, both operating Windows 10, 64-bit.



I installed R 3.5.*2* on the desktop (Windows in English) and R 3.5.*0* on
the laptop (Windows in Turkish).



I know that you are very busy with your work, but may you (or your
assistant) help me by informing me *how to install consistent versions of
R, RStudio, and packages/dependencies* (for example, Cytofkit, ggplot2,
Rtools, devtools, plyr, shiny, GUI)?



I guess I will need exact web page links "*in* *an orderly manner" to
download* the correct versions of everything.



I would appreciate it if you could advise me or forward this email to one
of your assistants or experts.




I really appreciate any help you can provide.




Kind Regards




*Please find the technical details below;*





I used the installation order listed below;



I downloaded R 3.5.0 and R 3.5.2 using the link and directory below.



Link: https://www.freestatistics.org/cran/



Directory: Download R for Windows > install R for the first time > Previous
releases > R 3.5.2 (December, 2018) or R 3.5.0



I downloaded RStudio from the link below;



https://posit.co/download/rstudio-desktop/




I downloaded packages via either
https://cran.rstudio.com/bin/windows/contrib/r-devel/ or the ?install
function? tab in RStudio.



Rtools : https://cran.r-project.org/bin/windows/Rtools/



Devtools : https://cran.r-project.org/web/packages/devtools/index.html



ggplot2 : https://cran.r-project.org/web/packages/ggplot2/index.html



                 https://ggplot2.tidyverse.org/



                 https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf





plyr : https://cran.r-project.org/web/packages/plyr/index.html



shiny : https://cran.r-project.org/web/packages/shiny/index.html




https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html



            https://github.com/rstudio/shiny



cytofkit : https://github.com/JinmiaoChenLab/cytofkit




https://bioconductor.riken.jp/packages/3.3/bioc/html/cytofkit.html



https://journals.plos.org/ploscompbiol/article/file?id=10.1371/journal.pcbi.1005112&type=printable




Below, I provide the errors and warnings that I faced for 2 weeks for both
R versions;





*Please find the errors and warnings below;*




*CYTOFKIT FOR R VERSION 3.5.**2*





> library(cytofkit)

Loading required package: ggplot2

Loading required package: plyr

Error: package or namespace load failed for ?cytofkit?:

package ?cytofkit? was installed by an R version with different internals;
it needs to be reinstalled for use with this R version

ERROR: this R is version 3.5.2, package 'cytofkit2' requires R >= 4.0.0

In R CMD INSTALL

Installation paths not writeable, unable to update packages

  path: C:/Program Files/R/R-3.5.2/library

  packages:

    boot, class, cluster, codetools, KernSmooth, Matrix, nlme, nnet, rpart,
spatial, survival

There were 23 warnings (use warnings() to see them)



> warnings()

Warning messages:

1: packages ?caTools?, ?umap? are not available (for R version 3.5.2)

2: In i.p(...) : installation of package ?DEoptimR? had non-zero exit status

3: In i.p(...) : installation of package ?mvtnorm? had non-zero exit status

4: In i.p(...) : installation of package ?XML? had non-zero exit status

5: In i.p(...) : installation of package ?fastmap? had non-zero exit status

6: In i.p(...) : installation of package ?sass? had non-zero exit status

7: In i.p(...) : installation of package ?jquerylib? had non-zero exit
status

8: In i.p(...) : installation of package ?later? had non-zero exit status

9: In i.p(...) : installation of package ?fontawesome? had non-zero exit
status

10: In i.p(...) : installation of package ?miniUI? had non-zero exit status

11: In i.p(...) : installation of package ?RcppTOML? had non-zero exit
status

12: In i.p(...) : installation of package ?pcaPP? had non-zero exit status

13: In i.p(...) : installation of package ?robustbase? had non-zero exit
status

14: In i.p(...) : installation of package ?cachem? had non-zero exit status

15: In i.p(...) : installation of package ?promises? had non-zero exit
status

16: In i.p(...) : installation of package ?reticulate? had non-zero exit
status

17: In i.p(...) : installation of package ?rrcov? had non-zero exit status

18: In i.p(...) : installation of package ?memoise? had non-zero exit status

19: In i.p(...) : installation of package ?httpuv? had non-zero exit status

20: In i.p(...) : installation of package ?bslib? had non-zero exit status

21: In i.p(...) : installation of package ?rmarkdown? had non-zero exit
status

22: In i.p(...) : installation of package ?htmlwidgets? had non-zero exit
status

23: In i.p(...) :

  installation of package
?C:/Users/murat-delman/AppData/Local/Temp/Rtmp8GGq71/file4d0c54c135b4/cytofkit2_0.99.80.tar.gz?
had non-zero exit status

> devtools::install_github("JinmiaoChenLab/cytofkit")

Error in rbind(info, getNamespaceInfo(env, "S3methods")) :

  number of columns of matrices must match (see arg 2)



>





*INSTALLING GGPLOT2 FOR R VERSION 3.5.**0*



> library(cytofkit)

Loading required package: ggplot2

Warning: namespace ?cli? is not available and has been replaced

by .GlobalEnv when processing object ?.Random.seed?

Error: package or namespace load failed for ?ggplot2? in rbind(info,
getNamespaceInfo(env, "S3methods")):

 number of columns of matrices must match (see arg 2)

Error: package ?ggplot2? could not be loaded

In addition: Warning message:

package ?ggplot2? was built under R version 4.2.3



> library(cytofkit)

Error: package ?ggplot2? required by ?cytofkit? could not be found



> install.packages("D:/Programlar/ggplotgui_1.0.0.zip", repos = NULL, type
= "win.binary")

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?

(as ?lib? is unspecified)

package ?ggplotgui? successfully unpacked and MD5 sums checked



> install.packages("D:/Programlar/ggplot2/ggplot2_3.0.0.tar.gz", repos =
NULL, type = "source")

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?

(as ?lib? is unspecified)

* installing *source* package 'ggplot2' ...

** package 'ggplot2' successfully unpacked and MD5 sums checked

** R

** data

*** moving datasets to lazyload DB

** inst

** byte-compile and prepare package for lazy loading

Warning: namespace 'cli' is not available and has been replaced

by .GlobalEnv when processing object 'txhousing'

Error in rbind(info, getNamespaceInfo(env, "S3methods")) :

  number of columns of matrices must match (see arg 2)

ERROR: lazy loading failed for package 'ggplot2'

* removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'

In R CMD INSTALL

Warning in install.packages :

  installation of package ?D:/Programlar/ggplot2/ggplot2_3.0.0.tar.gz? had
non-zero exit status



> packageurl <- "
https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz"

> install.packages(packageurl, repos=NULL, type="source")

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?

(as ?lib? is unspecified)

trying URL '
https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz'

Content type 'application/x-gzip' length 3031461 bytes (2.9 MB)

downloaded 2.9 MB



* installing *source* package 'ggplot2' ...

** package 'ggplot2' successfully unpacked and MD5 sums checked

** R

** data

*** moving datasets to lazyload DB

** inst

** byte-compile and prepare package for lazy loading

Warning: namespace 'cli' is not available and has been replaced

by .GlobalEnv when processing object 'txhousing'

Error in rbind(info, getNamespaceInfo(env, "S3methods")) :

  number of columns of matrices must match (see arg 2)

ERROR: lazy loading failed for package 'ggplot2'

* removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'

In R CMD INSTALL

Warning in install.packages :

  installation of package
?C:/Users/murat/AppData/Local/Temp/RtmpI776iL/downloaded_packages/ggplot2_3.3.0.tar.gz?
had non-zero exit status



> install.packages("ggplot2")

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?

(as ?lib? is unspecified)

Warning in install.packages :

  unable to access index for repository
https://cran.rstudio.com/bin/windows/contrib/3.5:

  cannot open URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES
'

installing the source package ?ggplot2?



trying URL 'https://cran.rstudio.com/src/contrib/ggplot2_3.4.2.tar.gz'

Content type 'application/x-gzip' length 3153811 bytes (3.0 MB)

downloaded 3.0 MB



* installing *source* package 'ggplot2' ...

** package 'ggplot2' successfully unpacked and MD5 sums checked

** R

** data

*** moving datasets to lazyload DB

** inst

** byte-compile and prepare package for lazy loading

Warning: namespace 'cli' is not available and has been replaced

by .GlobalEnv when processing object 'txhousing'

Error in rbind(info, getNamespaceInfo(env, "S3methods")) :

  number of columns of matrices must match (see arg 2)

ERROR: lazy loading failed for package 'ggplot2'

* removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'

In R CMD INSTALL

Warning in install.packages :

  installation of package ?ggplot2? had non-zero exit status



The downloaded source packages are in

?C:\Users\murat\AppData\Local\Temp\RtmpI776iL\downloaded_packages?



> packageurl <- "https://cran.r-project.org/web/packages/ggplot2/index.html"

> install.packages(packageurl, repos=NULL, type="source")

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?

(as ?lib? is unspecified)

trying URL 'https://cran.r-project.org/web/packages/ggplot2/index.html'

Content type 'text/html' length 468435 bytes (457 KB)

downloaded 457 KB



Error in getOctD(x, offset, len) : invalid octal digit

In R CMD INSTALL

Warning in install.packages :

  installation of package
?C:/Users/murat/AppData/Local/Temp/RtmpI776iL/downloaded_packages/index.html?
had non-zero exit status



> packageurl <- "
https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz"

> install.packages(packageurl, repos=NULL, type="source")

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?

(as ?lib? is unspecified)

trying URL '
https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz'

Content type 'application/x-gzip' length 3031461 bytes (2.9 MB)

downloaded 2.9 MB



* installing *source* package 'ggplot2' ...

** package 'ggplot2' successfully unpacked and MD5 sums checked

** R

** data

*** moving datasets to lazyload DB

** inst

** byte-compile and prepare package for lazy loading

Warning: namespace 'cli' is not available and has been replaced

by .GlobalEnv when processing object 'txhousing'

Error in rbind(info, getNamespaceInfo(env, "S3methods")) :

  number of columns of matrices must match (see arg 2)

ERROR: lazy loading failed for package 'ggplot2'

* removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'

In R CMD INSTALL

Warning in install.packages :

  installation of package
?C:/Users/murat/AppData/Local/Temp/Rtmp8sLmoj/downloaded_packages/ggplot2_3.3.0.tar.gz?
had non-zero exit status



> pak::pkg_install("tibble")

Error in load_private_package("cli") :

  Cannot load cli from the private library



> pak::pkg_install("tidyverse/tibble")

Error in load_private_package("cli") :

  Cannot load cli from the private library



> pkg_install("tibble")

Error in pkg_install("tibble") : could not find function "pkg_install"



> install.packages("D:/Programlar/ggplot2/ggplot2_3.4.2.zip", repos = NULL,
type = "win.binary")

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?

(as ?lib? is unspecified)

package ?ggplot2? successfully unpacked and MD5 sums checked



Kind Regards


Murat Delman, Ph.D.
Izmir Institute of Technology
Integrated Research Centers

[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
Sender
notified by
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
08/04/23,
10:12:50 AM

From v@|kremk @end|ng |rom gm@||@com  Fri Aug  4 16:54:07 2023
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 4 Aug 2023 09:54:07 -0500
Subject: [R] Multiply
Message-ID: <CAJOiR6Y-qZL=N8Cb_VZwsRdxzDhkUG8+uhJOvvZB=3YC4TA1VA@mail.gmail.com>

Hi all,

I want to multiply two  data frames as shown below,

dat1 <-read.table(text="ID, x, y, z
 A, 10,  34, 12
 B, 25,  42, 18
 C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)

dat2 <-read.table(text="ID, weight, weiht2
 A,  0.25, 0.35
 B,  0.42, 0.52
 C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)

Desired result

ID  Index1 Index2
1  A 24.58 30.18
2  B 35.59 44.09
3  C 17.10 21.30

Here is my attempt,  but did not work

dat3 <- data.frame(ID = dat1[,1], Index = apply(dat1[,-1], 1, FUN=
function(x) {sum(x*dat2[,2:ncol(dat2)])} ), stringsAsFactors=F)


Any help?

Thank you,


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Aug  4 17:05:33 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 4 Aug 2023 18:05:33 +0300
Subject: [R] Multiply
In-Reply-To: <CAJOiR6Y-qZL=N8Cb_VZwsRdxzDhkUG8+uhJOvvZB=3YC4TA1VA@mail.gmail.com>
References: <CAJOiR6Y-qZL=N8Cb_VZwsRdxzDhkUG8+uhJOvvZB=3YC4TA1VA@mail.gmail.com>
Message-ID: <20230804180533.225f504b@parabola>

? Fri, 4 Aug 2023 09:54:07 -0500
Val <valkremk at gmail.com> ?????:

> I want to multiply two  data frames as shown below,
> 
> dat1 <-read.table(text="ID, x, y, z
>  A, 10,  34, 12
>  B, 25,  42, 18
>  C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)
> 
> dat2 <-read.table(text="ID, weight, weiht2
>  A,  0.25, 0.35
>  B,  0.42, 0.52
>  C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)
> 
> Desired result
> 
> ID  Index1 Index2
> 1  A 24.58 30.18
> 2  B 35.59 44.09
> 3  C 17.10 21.30

You mean as in matrix multiplication? Nice of you to show the desired
result, otherwise I wouldn't be sure what you meant. You can employ the
matrix multiplication operator %*% if you use as.matrix and omit the
non-numeric parts:

as.matrix(dat1[,-1]) %*% as.matrix(dat2[match(dat1[,1], dat2[,1]),-1])
#      weight weiht2
# [1,]  24.58  30.18
# [2,]  35.59  44.09
# [3,]  17.10  21.30

The [,-1] part drops the 'ID' column and the match() on the first
columns of both data frames ensures the correct row order. Omit the
match(...) if you have a guarantee that the samples appear in the same
order (A, B, C) in both dat1 and dat2.

Once the calculation is done, you can construct a data frame again
using something like data.frame(ID = dat1[,1], Index = multiplication).

-- 
Best regards,
Ivan


From mur@tde|m@n @end|ng |rom |yte@edu@tr  Fri Aug  4 09:10:58 2023
From: mur@tde|m@n @end|ng |rom |yte@edu@tr (MURAT DELMAN)
Date: Fri, 4 Aug 2023 10:10:58 +0300 (TRT)
Subject: [R] Technical Help Request for "Version Differences" (i.e.,
 CYTOFKIT package)
Message-ID: <146822026.2931556.1691133058051.JavaMail.zimbra@iyte.edu.tr>




Dear Ms./Mr., 







If the email text and codes below are not properly displayed, you can download the attached Word file, which has exactly the same content. 



I am a cytometrist and microscopist at Izmir Institute of Technology, Integrated Research Center. I operate a cytometer and fluorescence microscope to acquire data from our researchers? samples and then give them analyzed data. I need to dive into bulk data to present all of the information in the sample. To do this, I have recently been trying to develop my skills in R, RStudio, and Cytofkit package for cytometry (flow, spectral, mass, imaging mass cytometry) data analysis. I am new in this area and must learn R for data analysis. 





May I request help from you or one of your assistants who is competent in R, RStudio, and R packages with the installation issues caused by ? version differences ? between R itself, R packages, and their dependencies? I really had to send this email to you anymore, because I could not run the package ?Cytofkit? and find a solution on the internet. 


It has been nearly 2 weeks since I have been trying to solve the errors and warnings. I am in a vicious circle and cannot move forward anymore. This is why I needed help from an expert competent in R programming. 



I tried to use the renv package, but I could not move forward because I am not competent in R. 




I explained the errors that I faced during the installation below. 



I have two computers, both operating Windows 10, 64-bit. 



I installed R 3.5. 2 on the desktop (Windows in English) and R 3.5. 0 on the laptop (Windows in Turkish). 



I know that you are very busy with your work, but may you (or your assistant) help me by informing me how to install consistent versions of R, RStudio, and packages/dependencies (for example, Cytofkit, ggplot2, Rtools, devtools, plyr, shiny, GUI)? 





I guess I will need exact web page links " in an orderly manner" to download the correct versions of everything. 



I would appreciate it if you could advise me or forward this email to one of your assistants or experts. 






I really appreciate any help you can provide. 






Kind Regards 






Please find the technical details below; 





I used the installation order listed below; 



I downloaded R 3.5.0 and R 3.5.2 using the link and directory below. 



Link: [ https://www.freestatistics.org/cran/ | https://www.freestatistics.org/cran/ ] 



Directory: Download R for Windows > install R for the first time > Previous releases > R 3.5.2 (December, 2018) or R 3.5.0 





I downloaded RStudio from the link below; 



[ https://posit.co/download/rstudio-desktop/ | https://posit.co/download/rstudio-desktop/ ] 






I downloaded packages via either [ https://cran.rstudio.com/bin/windows/contrib/r-devel/ | https://cran.rstudio.com/bin/windows/contrib/r-devel/ ] or the ?install function? tab in RStudio. 



Rtools : [ https://cran.r-project.org/bin/windows/Rtools/ | https://cran.r-project.org/bin/windows/Rtools/ ] 



Devtools : [ https://cran.r-project.org/web/packages/devtools/index.html | https://cran.r-project.org/web/packages/devtools/index.html ] 



ggplot2 : [ https://cran.r-project.org/web/packages/ggplot2/index.html | https://cran.r-project.org/web/packages/ggplot2/index.html ] 



[ https://ggplot2.tidyverse.org/ | https://ggplot2.tidyverse.org/ ] 



[ https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf | https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf ] 





plyr : [ https://cran.r-project.org/web/packages/plyr/index.html | https://cran.r-project.org/web/packages/plyr/index.html ] 



shiny : [ https://cran.r-project.org/web/packages/shiny/index.html | https://cran.r-project.org/web/packages/shiny/index.html ] 



[ https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html | https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html ] 



[ https://github.com/rstudio/shiny | https://github.com/rstudio/shiny ] 



cytofkit : [ https://github.com/JinmiaoChenLab/cytofkit | https://github.com/JinmiaoChenLab/cytofkit ] 



[ https://bioconductor.riken.jp/packages/3.3/bioc/html/cytofkit.html | https://bioconductor.riken.jp/packages/3.3/bioc/html/cytofkit.html ] 



[ https://journals.plos.org/ploscompbiol/article/file?id=10.1371/journal.pcbi.1005112&type=printable | https://journals.plos.org/ploscompbiol/article/file?id=10.1371/journal.pcbi.1005112&type=printable ] 






Below, I provide the errors and warnings that I faced for 2 weeks for both R versions; 





Please find the errors and warnings below; 






CYTOFKIT FOR R VERSION 3.5. 2 









> library(cytofkit) 

Loading required package: ggplot2 

Loading required package: plyr 

Error: package or namespace load failed for ?cytofkit?: 

package ?cytofkit? was installed by an R version with different internals; it needs to be reinstalled for use with this R version 



ERROR: this R is version 3.5.2, package 'cytofkit2' requires R >= 4.0.0 

In R CMD INSTALL 

Installation paths not writeable, unable to update packages 

path: C:/Program Files/R/R-3.5.2/library 

packages: 

boot, class, cluster, codetools, KernSmooth, Matrix, nlme, nnet, rpart, spatial, survival 

There were 23 warnings (use warnings() to see them) 



> warnings() 

Warning messages: 

1: packages ?caTools?, ?umap? are not available (for R version 3.5.2) 

2: In i.p(...) : installation of package ?DEoptimR? had non-zero exit status 

3: In i.p(...) : installation of package ?mvtnorm? had non-zero exit status 

4: In i.p(...) : installation of package ?XML? had non-zero exit status 

5: In i.p(...) : installation of package ?fastmap? had non-zero exit status 

6: In i.p(...) : installation of package ?sass? had non-zero exit status 

7: In i.p(...) : installation of package ?jquerylib? had non-zero exit status 

8: In i.p(...) : installation of package ?later? had non-zero exit status 

9: In i.p(...) : installation of package ?fontawesome? had non-zero exit status 

10: In i.p(...) : installation of package ?miniUI? had non-zero exit status 

11: In i.p(...) : installation of package ?RcppTOML? had non-zero exit status 

12: In i.p(...) : installation of package ?pcaPP? had non-zero exit status 

13: In i.p(...) : installation of package ?robustbase? had non-zero exit status 

14: In i.p(...) : installation of package ?cachem? had non-zero exit status 

15: In i.p(...) : installation of package ?promises? had non-zero exit status 

16: In i.p(...) : installation of package ?reticulate? had non-zero exit status 

17: In i.p(...) : installation of package ?rrcov? had non-zero exit status 

18: In i.p(...) : installation of package ?memoise? had non-zero exit status 

19: In i.p(...) : installation of package ?httpuv? had non-zero exit status 

20: In i.p(...) : installation of package ?bslib? had non-zero exit status 

21: In i.p(...) : installation of package ?rmarkdown? had non-zero exit status 

22: In i.p(...) : installation of package ?htmlwidgets? had non-zero exit status 

23: In i.p(...) : 

installation of package ?C:/Users/murat-delman/AppData/Local/Temp/Rtmp8GGq71/file4d0c54c135b4/cytofkit2_0.99.80.tar.gz? had non-zero exit status 


> devtools::install_github("JinmiaoChenLab/cytofkit") 

Error in rbind(info, getNamespaceInfo(env, "S3methods")) : 

number of columns of matrices must match (see arg 2) 



> 





INSTALLING GGPLOT2 FOR R VERSION 3.5. 0 



> library(cytofkit) 

Loading required package: ggplot2 

Warning: namespace ?cli? is not available and has been replaced 

by .GlobalEnv when processing object ?.Random.seed? 

Error: package or namespace load failed for ?ggplot2? in rbind(info, getNamespaceInfo(env, "S3methods")): 

number of columns of matrices must match (see arg 2) 

Error: package ?ggplot2? could not be loaded 

In addition: Warning message: 

package ?ggplot2? was built under R version 4.2.3 



> library(cytofkit) 

Error: package ?ggplot2? required by ?cytofkit? could not be found 



> install.packages("D:/Programlar/ggplotgui_1.0.0.zip", repos = NULL, type = "win.binary") 

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5? 

(as ?lib? is unspecified) 

package ?ggplotgui? successfully unpacked and MD5 sums checked 



> install.packages("D:/Programlar/ggplot2/ggplot2_3.0.0.tar.gz", repos = NULL, type = "source") 

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5? 

(as ?lib? is unspecified) 

* installing *source* package 'ggplot2' ... 

** package 'ggplot2' successfully unpacked and MD5 sums checked 

** R 

** data 

*** moving datasets to lazyload DB 

** inst 

** byte-compile and prepare package for lazy loading 

Warning: namespace 'cli' is not available and has been replaced 

by .GlobalEnv when processing object 'txhousing' 

Error in rbind(info, getNamespaceInfo(env, "S3methods")) : 

number of columns of matrices must match (see arg 2) 

ERROR: lazy loading failed for package 'ggplot2' 

* removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2' 

In R CMD INSTALL 

Warning in install.packages : 

installation of package ?D:/Programlar/ggplot2/ggplot2_3.0.0.tar.gz? had non-zero exit status 



> packageurl <- " [ https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz | https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz ] " 

> install.packages(packageurl, repos=NULL, type="source") 

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5? 

(as ?lib? is unspecified) 

trying URL ' [ https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz | https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz ] ' 

Content type 'application/x-gzip' length 3031461 bytes (2.9 MB) 

downloaded 2.9 MB 



* installing *source* package 'ggplot2' ... 

** package 'ggplot2' successfully unpacked and MD5 sums checked 

** R 

** data 

*** moving datasets to lazyload DB 

** inst 

** byte-compile and prepare package for lazy loading 

Warning: namespace 'cli' is not available and has been replaced 

by .GlobalEnv when processing object 'txhousing' 

Error in rbind(info, getNamespaceInfo(env, "S3methods")) : 

number of columns of matrices must match (see arg 2) 

ERROR: lazy loading failed for package 'ggplot2' 

* removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2' 

In R CMD INSTALL 

Warning in install.packages : 

installation of package ?C:/Users/murat/AppData/Local/Temp/RtmpI776iL/downloaded_packages/ggplot2_3.3.0.tar.gz? had non-zero exit status 



> install.packages("ggplot2") 

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5? 

(as ?lib? is unspecified) 

Warning in install.packages : 

unable to access index for repository [ https://cran.rstudio.com/bin/windows/contrib/3.5 | https://cran.rstudio.com/bin/windows/contrib/3.5 ] : 

cannot open URL ' [ https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES | https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES ] ' 

installing the source package ?ggplot2? 



trying URL ' [ https://cran.rstudio.com/src/contrib/ggplot2_3.4.2.tar.gz | https://cran.rstudio.com/src/contrib/ggplot2_3.4.2.tar.gz ] ' 

Content type 'application/x-gzip' length 3153811 bytes (3.0 MB) 

downloaded 3.0 MB 



* installing *source* package 'ggplot2' ... 

** package 'ggplot2' successfully unpacked and MD5 sums checked 

** R 

** data 

*** moving datasets to lazyload DB 

** inst 

** byte-compile and prepare package for lazy loading 

Warning: namespace 'cli' is not available and has been replaced 

by .GlobalEnv when processing object 'txhousing' 

Error in rbind(info, getNamespaceInfo(env, "S3methods")) : 

number of columns of matrices must match (see arg 2) 

ERROR: lazy loading failed for package 'ggplot2' 

* removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2' 

In R CMD INSTALL 

Warning in install.packages : 

installation of package ?ggplot2? had non-zero exit status 



The downloaded source packages are in 

?C:\Users\murat\AppData\Local\Temp\RtmpI776iL\downloaded_packages? 



> packageurl <- " [ https://cran.r-project.org/web/packages/ggplot2/index.html | https://cran.r-project.org/web/packages/ggplot2/index.html ] " 

> install.packages(packageurl, repos=NULL, type="source") 

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5? 

(as ?lib? is unspecified) 

trying URL ' [ https://cran.r-project.org/web/packages/ggplot2/index.html | https://cran.r-project.org/web/packages/ggplot2/index.html ] ' 

Content type 'text/html' length 468435 bytes (457 KB) 

downloaded 457 KB 



Error in getOctD(x, offset, len) : invalid octal digit 

In R CMD INSTALL 

Warning in install.packages : 

installation of package ?C:/Users/murat/AppData/Local/Temp/RtmpI776iL/downloaded_packages/index.html? had non-zero exit status 



> packageurl <- " [ https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz | https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz ] " 

> install.packages(packageurl, repos=NULL, type="source") 

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5? 

(as ?lib? is unspecified) 

trying URL ' [ https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz | https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz ] ' 

Content type 'application/x-gzip' length 3031461 bytes (2.9 MB) 

downloaded 2.9 MB 



* installing *source* package 'ggplot2' ... 

** package 'ggplot2' successfully unpacked and MD5 sums checked 

** R 

** data 

*** moving datasets to lazyload DB 

** inst 

** byte-compile and prepare package for lazy loading 

Warning: namespace 'cli' is not available and has been replaced 

by .GlobalEnv when processing object 'txhousing' 

Error in rbind(info, getNamespaceInfo(env, "S3methods")) : 

number of columns of matrices must match (see arg 2) 

ERROR: lazy loading failed for package 'ggplot2' 

* removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2' 

In R CMD INSTALL 

Warning in install.packages : 

installation of package ?C:/Users/murat/AppData/Local/Temp/Rtmp8sLmoj/downloaded_packages/ggplot2_3.3.0.tar.gz? had non-zero exit status 



> pak::pkg_install("tibble") 

Error in load_private_package("cli") : 

Cannot load cli from the private library 



> pak::pkg_install("tidyverse/tibble") 

Error in load_private_package("cli") : 

Cannot load cli from the private library 



> pkg_install("tibble") 

Error in pkg_install("tibble") : could not find function "pkg_install" 



> install.packages("D:/Programlar/ggplot2/ggplot2_3.4.2.zip", repos = NULL, type = "win.binary") 

Installing package into ?C:/Users/murat/Documents/R/win-library/3.5? 

(as ?lib? is unspecified) 

package ?ggplot2? successfully unpacked and MD5 sums checked 



Kind Regards 


Murat Delman, Ph.D. 
Izmir Institute of Technology 
Integrated Research Centers 


From @vi@e@gross m@iii@g oii gm@ii@com  Fri Aug  4 17:59:16 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Fri, 4 Aug 2023 11:59:16 -0400
Subject: [R] Multiply
In-Reply-To: <CAJOiR6Y-qZL=N8Cb_VZwsRdxzDhkUG8+uhJOvvZB=3YC4TA1VA@mail.gmail.com>
References: <CAJOiR6Y-qZL=N8Cb_VZwsRdxzDhkUG8+uhJOvvZB=3YC4TA1VA@mail.gmail.com>
Message-ID: <006f01d9c6ec$9f005180$dd00f480$@gmail.com>

Val,

A data.frame is not quite the same thing as a matrix.

But as long as everything is numeric, you can convert both data.frames to
matrices, perform the computations needed and, if you want, convert it back
into a data.frame.

BUT it must be all numeric and you violate that requirement by having a
character column for ID. You need to eliminate that temporarily:

dat1 <- read.table(text="ID, x, y, z
 A, 10,  34, 12
 B, 25,  42, 18
 C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)

mat1 <- as.matrix(dat1[,2:4])

The result is:

> mat1
      x  y  z
[1,] 10 34 12
[2,] 25 42 18
[3,] 14 20  8

Now do the second matrix, perhaps in one step:

mat2 <- as.matrix(read.table(text="ID, weight, weiht2
 A,  0.25, 0.35
 B,  0.42, 0.52
 C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)[,2:3])


Do note some people use read.csv() instead of read.table, albeit it simply
calls read.table after setting some parameters like the comma.

The result is what you asked for, including spelling weight wrong once.:

> mat2
     weight weiht2
[1,]   0.25   0.35
[2,]   0.42   0.52
[3,]   0.65   0.75

Now you wanted to multiply as in matrix multiplication.

> mat1 %*% mat2
     weight weiht2
[1,]  24.58  30.18
[2,]  35.59  44.09
[3,]  17.10  21.30

Of course, you wanted different names for the columns and you can do that
easily enough:

result <- mat1 %*% mat2

colnames(result) <- c("index1", "index2")


But this is missing something:

> result
     index1 index2
[1,]  24.58  30.18
[2,]  35.59  44.09
[3,]  17.10  21.30

Do you want a column of ID numbers on the left? If numeric, you can keep it
in a matrix in one of many ways but if you want to go back to the data.frame
format and re-use the ID numbers, there are again MANY ways. But note mixing
characters and numbers can inadvertently convert everything to characters.

Here is one solution. Not the only one nor the best one but reasonable:

recombined <- data.frame(index=dat1$ID, 
                         index1=result[,1], 
                         index2=result[,2])


> recombined
  index index1 index2
1     A  24.58  30.18
2     B  35.59  44.09
3     C  17.10  21.30

If for some reason you need a more general purpose way to do this for
arbitrary conformant matrices, you can write a function that does this in a
more general way but perhaps a better idea might be a way to store your
matrices in files in a way that can be read back in directly or to not
include indices as character columns but as row names.






-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Val
Sent: Friday, August 4, 2023 10:54 AM
To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] Multiply

Hi all,

I want to multiply two  data frames as shown below,

dat1 <-read.table(text="ID, x, y, z
 A, 10,  34, 12
 B, 25,  42, 18
 C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)

dat2 <-read.table(text="ID, weight, weiht2
 A,  0.25, 0.35
 B,  0.42, 0.52
 C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)

Desired result

ID  Index1 Index2
1  A 24.58 30.18
2  B 35.59 44.09
3  C 17.10 21.30

Here is my attempt,  but did not work

dat3 <- data.frame(ID = dat1[,1], Index = apply(dat1[,-1], 1, FUN=
function(x) {sum(x*dat2[,2:ncol(dat2)])} ), stringsAsFactors=F)


Any help?

Thank you,

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Fri Aug  4 18:15:40 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 4 Aug 2023 09:15:40 -0700
Subject: [R] Technical Help Request for "Version Differences" (i.e.,
 CYTOFKIT package)
In-Reply-To: <146822026.2931556.1691133058051.JavaMail.zimbra@iyte.edu.tr>
References: <146822026.2931556.1691133058051.JavaMail.zimbra@iyte.edu.tr>
Message-ID: <CAGxFJbTPtK6uha-Z=EEeTkf+SCVJHi-c5iMx63MLTcijCdYvgg@mail.gmail.com>

Dear Murat:

See the "posting guide" (link below) for how and what to post on this list.

I believe that in that guide it is recommended that you first update
your R version and packages to the latest versions (R 3.5 is rather
old now). You should probably reinstall R and all packages from the
main CRAN website:
https://cran.r-project.org/

Note that once you install R, you can read ?install.packages for how
to install the latest versions of all the packages you need that are
on CRAN.

Note that R and RStudio are different software products. So once R is
installed, you can download and install the packages you need from the
Posit website if you prefer, again with the latest versions.

If for some reason CRAN is not available to you or some of the
packages you need are not on CRAN(e.g. github only packages)  or won't
run on your computer, then the process will be more complicated, and
others will have to help you. CRAN has a rigorous process for assuring
compatibility of packages and R versions, so that packages not on CRAN
may not be compatible with the latest R version. All I can suggest is
that you avoid such packages **if possible** (I understand that it may
not be). You can search CRAN's "Task Views" (link on
https://cran.r-project.org/ )for alternative CRAN packages that may
have the functionality you seek.

Cheers,
Bert


On Fri, Aug 4, 2023 at 8:40?AM MURAT DELMAN via R-help
<r-help at r-project.org> wrote:
>
>
>
>
> Dear Ms./Mr.,
>
>
>
>
>
>
>
> If the email text and codes below are not properly displayed, you can download the attached Word file, which has exactly the same content.
>
>
>
> I am a cytometrist and microscopist at Izmir Institute of Technology, Integrated Research Center. I operate a cytometer and fluorescence microscope to acquire data from our researchers? samples and then give them analyzed data. I need to dive into bulk data to present all of the information in the sample. To do this, I have recently been trying to develop my skills in R, RStudio, and Cytofkit package for cytometry (flow, spectral, mass, imaging mass cytometry) data analysis. I am new in this area and must learn R for data analysis.
>
>
>
>
>
> May I request help from you or one of your assistants who is competent in R, RStudio, and R packages with the installation issues caused by ? version differences ? between R itself, R packages, and their dependencies? I really had to send this email to you anymore, because I could not run the package ?Cytofkit? and find a solution on the internet.
>
>
> It has been nearly 2 weeks since I have been trying to solve the errors and warnings. I am in a vicious circle and cannot move forward anymore. This is why I needed help from an expert competent in R programming.
>
>
>
> I tried to use the renv package, but I could not move forward because I am not competent in R.
>
>
>
>
> I explained the errors that I faced during the installation below.
>
>
>
> I have two computers, both operating Windows 10, 64-bit.
>
>
>
> I installed R 3.5. 2 on the desktop (Windows in English) and R 3.5. 0 on the laptop (Windows in Turkish).
>
>
>
> I know that you are very busy with your work, but may you (or your assistant) help me by informing me how to install consistent versions of R, RStudio, and packages/dependencies (for example, Cytofkit, ggplot2, Rtools, devtools, plyr, shiny, GUI)?
>
>
>
>
>
> I guess I will need exact web page links " in an orderly manner" to download the correct versions of everything.
>
>
>
> I would appreciate it if you could advise me or forward this email to one of your assistants or experts.
>
>
>
>
>
>
> I really appreciate any help you can provide.
>
>
>
>
>
>
> Kind Regards
>
>
>
>
>
>
> Please find the technical details below;
>
>
>
>
>
> I used the installation order listed below;
>
>
>
> I downloaded R 3.5.0 and R 3.5.2 using the link and directory below.
>
>
>
> Link: [ https://www.freestatistics.org/cran/ | https://www.freestatistics.org/cran/ ]
>
>
>
> Directory: Download R for Windows > install R for the first time > Previous releases > R 3.5.2 (December, 2018) or R 3.5.0
>
>
>
>
>
> I downloaded RStudio from the link below;
>
>
>
> [ https://posit.co/download/rstudio-desktop/ | https://posit.co/download/rstudio-desktop/ ]
>
>
>
>
>
>
> I downloaded packages via either [ https://cran.rstudio.com/bin/windows/contrib/r-devel/ | https://cran.rstudio.com/bin/windows/contrib/r-devel/ ] or the ?install function? tab in RStudio.
>
>
>
> Rtools : [ https://cran.r-project.org/bin/windows/Rtools/ | https://cran.r-project.org/bin/windows/Rtools/ ]
>
>
>
> Devtools : [ https://cran.r-project.org/web/packages/devtools/index.html | https://cran.r-project.org/web/packages/devtools/index.html ]
>
>
>
> ggplot2 : [ https://cran.r-project.org/web/packages/ggplot2/index.html | https://cran.r-project.org/web/packages/ggplot2/index.html ]
>
>
>
> [ https://ggplot2.tidyverse.org/ | https://ggplot2.tidyverse.org/ ]
>
>
>
> [ https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf | https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf ]
>
>
>
>
>
> plyr : [ https://cran.r-project.org/web/packages/plyr/index.html | https://cran.r-project.org/web/packages/plyr/index.html ]
>
>
>
> shiny : [ https://cran.r-project.org/web/packages/shiny/index.html | https://cran.r-project.org/web/packages/shiny/index.html ]
>
>
>
> [ https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html | https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html ]
>
>
>
> [ https://github.com/rstudio/shiny | https://github.com/rstudio/shiny ]
>
>
>
> cytofkit : [ https://github.com/JinmiaoChenLab/cytofkit | https://github.com/JinmiaoChenLab/cytofkit ]
>
>
>
> [ https://bioconductor.riken.jp/packages/3.3/bioc/html/cytofkit.html | https://bioconductor.riken.jp/packages/3.3/bioc/html/cytofkit.html ]
>
>
>
> [ https://journals.plos.org/ploscompbiol/article/file?id=10.1371/journal.pcbi.1005112&type=printable | https://journals.plos.org/ploscompbiol/article/file?id=10.1371/journal.pcbi.1005112&type=printable ]
>
>
>
>
>
>
> Below, I provide the errors and warnings that I faced for 2 weeks for both R versions;
>
>
>
>
>
> Please find the errors and warnings below;
>
>
>
>
>
>
> CYTOFKIT FOR R VERSION 3.5. 2
>
>
>
>
>
>
>
>
>
> > library(cytofkit)
>
> Loading required package: ggplot2
>
> Loading required package: plyr
>
> Error: package or namespace load failed for ?cytofkit?:
>
> package ?cytofkit? was installed by an R version with different internals; it needs to be reinstalled for use with this R version
>
>
>
> ERROR: this R is version 3.5.2, package 'cytofkit2' requires R >= 4.0.0
>
> In R CMD INSTALL
>
> Installation paths not writeable, unable to update packages
>
> path: C:/Program Files/R/R-3.5.2/library
>
> packages:
>
> boot, class, cluster, codetools, KernSmooth, Matrix, nlme, nnet, rpart, spatial, survival
>
> There were 23 warnings (use warnings() to see them)
>
>
>
> > warnings()
>
> Warning messages:
>
> 1: packages ?caTools?, ?umap? are not available (for R version 3.5.2)
>
> 2: In i.p(...) : installation of package ?DEoptimR? had non-zero exit status
>
> 3: In i.p(...) : installation of package ?mvtnorm? had non-zero exit status
>
> 4: In i.p(...) : installation of package ?XML? had non-zero exit status
>
> 5: In i.p(...) : installation of package ?fastmap? had non-zero exit status
>
> 6: In i.p(...) : installation of package ?sass? had non-zero exit status
>
> 7: In i.p(...) : installation of package ?jquerylib? had non-zero exit status
>
> 8: In i.p(...) : installation of package ?later? had non-zero exit status
>
> 9: In i.p(...) : installation of package ?fontawesome? had non-zero exit status
>
> 10: In i.p(...) : installation of package ?miniUI? had non-zero exit status
>
> 11: In i.p(...) : installation of package ?RcppTOML? had non-zero exit status
>
> 12: In i.p(...) : installation of package ?pcaPP? had non-zero exit status
>
> 13: In i.p(...) : installation of package ?robustbase? had non-zero exit status
>
> 14: In i.p(...) : installation of package ?cachem? had non-zero exit status
>
> 15: In i.p(...) : installation of package ?promises? had non-zero exit status
>
> 16: In i.p(...) : installation of package ?reticulate? had non-zero exit status
>
> 17: In i.p(...) : installation of package ?rrcov? had non-zero exit status
>
> 18: In i.p(...) : installation of package ?memoise? had non-zero exit status
>
> 19: In i.p(...) : installation of package ?httpuv? had non-zero exit status
>
> 20: In i.p(...) : installation of package ?bslib? had non-zero exit status
>
> 21: In i.p(...) : installation of package ?rmarkdown? had non-zero exit status
>
> 22: In i.p(...) : installation of package ?htmlwidgets? had non-zero exit status
>
> 23: In i.p(...) :
>
> installation of package ?C:/Users/murat-delman/AppData/Local/Temp/Rtmp8GGq71/file4d0c54c135b4/cytofkit2_0.99.80.tar.gz? had non-zero exit status
>
>
> > devtools::install_github("JinmiaoChenLab/cytofkit")
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
> number of columns of matrices must match (see arg 2)
>
>
>
> >
>
>
>
>
>
> INSTALLING GGPLOT2 FOR R VERSION 3.5. 0
>
>
>
> > library(cytofkit)
>
> Loading required package: ggplot2
>
> Warning: namespace ?cli? is not available and has been replaced
>
> by .GlobalEnv when processing object ?.Random.seed?
>
> Error: package or namespace load failed for ?ggplot2? in rbind(info, getNamespaceInfo(env, "S3methods")):
>
> number of columns of matrices must match (see arg 2)
>
> Error: package ?ggplot2? could not be loaded
>
> In addition: Warning message:
>
> package ?ggplot2? was built under R version 4.2.3
>
>
>
> > library(cytofkit)
>
> Error: package ?ggplot2? required by ?cytofkit? could not be found
>
>
>
> > install.packages("D:/Programlar/ggplotgui_1.0.0.zip", repos = NULL, type = "win.binary")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> package ?ggplotgui? successfully unpacked and MD5 sums checked
>
>
>
> > install.packages("D:/Programlar/ggplot2/ggplot2_3.0.0.tar.gz", repos = NULL, type = "source")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> * installing *source* package 'ggplot2' ...
>
> ** package 'ggplot2' successfully unpacked and MD5 sums checked
>
> ** R
>
> ** data
>
> *** moving datasets to lazyload DB
>
> ** inst
>
> ** byte-compile and prepare package for lazy loading
>
> Warning: namespace 'cli' is not available and has been replaced
>
> by .GlobalEnv when processing object 'txhousing'
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
> number of columns of matrices must match (see arg 2)
>
> ERROR: lazy loading failed for package 'ggplot2'
>
> * removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
> installation of package ?D:/Programlar/ggplot2/ggplot2_3.0.0.tar.gz? had non-zero exit status
>
>
>
> > packageurl <- " [ https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz | https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz ] "
>
> > install.packages(packageurl, repos=NULL, type="source")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> trying URL ' [ https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz | https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz ] '
>
> Content type 'application/x-gzip' length 3031461 bytes (2.9 MB)
>
> downloaded 2.9 MB
>
>
>
> * installing *source* package 'ggplot2' ...
>
> ** package 'ggplot2' successfully unpacked and MD5 sums checked
>
> ** R
>
> ** data
>
> *** moving datasets to lazyload DB
>
> ** inst
>
> ** byte-compile and prepare package for lazy loading
>
> Warning: namespace 'cli' is not available and has been replaced
>
> by .GlobalEnv when processing object 'txhousing'
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
> number of columns of matrices must match (see arg 2)
>
> ERROR: lazy loading failed for package 'ggplot2'
>
> * removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
> installation of package ?C:/Users/murat/AppData/Local/Temp/RtmpI776iL/downloaded_packages/ggplot2_3.3.0.tar.gz? had non-zero exit status
>
>
>
> > install.packages("ggplot2")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> Warning in install.packages :
>
> unable to access index for repository [ https://cran.rstudio.com/bin/windows/contrib/3.5 | https://cran.rstudio.com/bin/windows/contrib/3.5 ] :
>
> cannot open URL ' [ https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES | https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES ] '
>
> installing the source package ?ggplot2?
>
>
>
> trying URL ' [ https://cran.rstudio.com/src/contrib/ggplot2_3.4.2.tar.gz | https://cran.rstudio.com/src/contrib/ggplot2_3.4.2.tar.gz ] '
>
> Content type 'application/x-gzip' length 3153811 bytes (3.0 MB)
>
> downloaded 3.0 MB
>
>
>
> * installing *source* package 'ggplot2' ...
>
> ** package 'ggplot2' successfully unpacked and MD5 sums checked
>
> ** R
>
> ** data
>
> *** moving datasets to lazyload DB
>
> ** inst
>
> ** byte-compile and prepare package for lazy loading
>
> Warning: namespace 'cli' is not available and has been replaced
>
> by .GlobalEnv when processing object 'txhousing'
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
> number of columns of matrices must match (see arg 2)
>
> ERROR: lazy loading failed for package 'ggplot2'
>
> * removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
> installation of package ?ggplot2? had non-zero exit status
>
>
>
> The downloaded source packages are in
>
> ?C:\Users\murat\AppData\Local\Temp\RtmpI776iL\downloaded_packages?
>
>
>
> > packageurl <- " [ https://cran.r-project.org/web/packages/ggplot2/index.html | https://cran.r-project.org/web/packages/ggplot2/index.html ] "
>
> > install.packages(packageurl, repos=NULL, type="source")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> trying URL ' [ https://cran.r-project.org/web/packages/ggplot2/index.html | https://cran.r-project.org/web/packages/ggplot2/index.html ] '
>
> Content type 'text/html' length 468435 bytes (457 KB)
>
> downloaded 457 KB
>
>
>
> Error in getOctD(x, offset, len) : invalid octal digit
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
> installation of package ?C:/Users/murat/AppData/Local/Temp/RtmpI776iL/downloaded_packages/index.html? had non-zero exit status
>
>
>
> > packageurl <- " [ https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz | https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz ] "
>
> > install.packages(packageurl, repos=NULL, type="source")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> trying URL ' [ https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz | https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz ] '
>
> Content type 'application/x-gzip' length 3031461 bytes (2.9 MB)
>
> downloaded 2.9 MB
>
>
>
> * installing *source* package 'ggplot2' ...
>
> ** package 'ggplot2' successfully unpacked and MD5 sums checked
>
> ** R
>
> ** data
>
> *** moving datasets to lazyload DB
>
> ** inst
>
> ** byte-compile and prepare package for lazy loading
>
> Warning: namespace 'cli' is not available and has been replaced
>
> by .GlobalEnv when processing object 'txhousing'
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
> number of columns of matrices must match (see arg 2)
>
> ERROR: lazy loading failed for package 'ggplot2'
>
> * removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
> installation of package ?C:/Users/murat/AppData/Local/Temp/Rtmp8sLmoj/downloaded_packages/ggplot2_3.3.0.tar.gz? had non-zero exit status
>
>
>
> > pak::pkg_install("tibble")
>
> Error in load_private_package("cli") :
>
> Cannot load cli from the private library
>
>
>
> > pak::pkg_install("tidyverse/tibble")
>
> Error in load_private_package("cli") :
>
> Cannot load cli from the private library
>
>
>
> > pkg_install("tibble")
>
> Error in pkg_install("tibble") : could not find function "pkg_install"
>
>
>
> > install.packages("D:/Programlar/ggplot2/ggplot2_3.4.2.zip", repos = NULL, type = "win.binary")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> package ?ggplot2? successfully unpacked and MD5 sums checked
>
>
>
> Kind Regards
>
>
> Murat Delman, Ph.D.
> Izmir Institute of Technology
> Integrated Research Centers
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@|kremk @end|ng |rom gm@||@com  Fri Aug  4 20:03:18 2023
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 4 Aug 2023 13:03:18 -0500
Subject: [R] Multiply
In-Reply-To: <006f01d9c6ec$9f005180$dd00f480$@gmail.com>
References: <CAJOiR6Y-qZL=N8Cb_VZwsRdxzDhkUG8+uhJOvvZB=3YC4TA1VA@mail.gmail.com>
 <006f01d9c6ec$9f005180$dd00f480$@gmail.com>
Message-ID: <CAJOiR6aEfU-HrS9Q_ufCxubLOMt01fa7q1oV2fZ-rsmrygiOOw@mail.gmail.com>

Thank you,  Avi and Ivan.  Worked for this particular Example.

Yes, I am looking for something with a more general purpose.
I think Ivan's suggestion works for this.

multiplication=as.matrix(dat1[,-1]) %*% as.matrix(dat2[match(dat1[,1],
dat2[,1]),-1])
Res=data.frame(ID = dat1[,1], Index = multiplication)

On Fri, Aug 4, 2023 at 10:59?AM <avi.e.gross at gmail.com> wrote:
>
> Val,
>
> A data.frame is not quite the same thing as a matrix.
>
> But as long as everything is numeric, you can convert both data.frames to
> matrices, perform the computations needed and, if you want, convert it back
> into a data.frame.
>
> BUT it must be all numeric and you violate that requirement by having a
> character column for ID. You need to eliminate that temporarily:
>
> dat1 <- read.table(text="ID, x, y, z
>  A, 10,  34, 12
>  B, 25,  42, 18
>  C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)
>
> mat1 <- as.matrix(dat1[,2:4])
>
> The result is:
>
> > mat1
>       x  y  z
> [1,] 10 34 12
> [2,] 25 42 18
> [3,] 14 20  8
>
> Now do the second matrix, perhaps in one step:
>
> mat2 <- as.matrix(read.table(text="ID, weight, weiht2
>  A,  0.25, 0.35
>  B,  0.42, 0.52
>  C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)[,2:3])
>
>
> Do note some people use read.csv() instead of read.table, albeit it simply
> calls read.table after setting some parameters like the comma.
>
> The result is what you asked for, including spelling weight wrong once.:
>
> > mat2
>      weight weiht2
> [1,]   0.25   0.35
> [2,]   0.42   0.52
> [3,]   0.65   0.75
>
> Now you wanted to multiply as in matrix multiplication.
>
> > mat1 %*% mat2
>      weight weiht2
> [1,]  24.58  30.18
> [2,]  35.59  44.09
> [3,]  17.10  21.30
>
> Of course, you wanted different names for the columns and you can do that
> easily enough:
>
> result <- mat1 %*% mat2
>
> colnames(result) <- c("index1", "index2")
>
>
> But this is missing something:
>
> > result
>      index1 index2
> [1,]  24.58  30.18
> [2,]  35.59  44.09
> [3,]  17.10  21.30
>
> Do you want a column of ID numbers on the left? If numeric, you can keep it
> in a matrix in one of many ways but if you want to go back to the data.frame
> format and re-use the ID numbers, there are again MANY ways. But note mixing
> characters and numbers can inadvertently convert everything to characters.
>
> Here is one solution. Not the only one nor the best one but reasonable:
>
> recombined <- data.frame(index=dat1$ID,
>                          index1=result[,1],
>                          index2=result[,2])
>
>
> > recombined
>   index index1 index2
> 1     A  24.58  30.18
> 2     B  35.59  44.09
> 3     C  17.10  21.30
>
> If for some reason you need a more general purpose way to do this for
> arbitrary conformant matrices, you can write a function that does this in a
> more general way but perhaps a better idea might be a way to store your
> matrices in files in a way that can be read back in directly or to not
> include indices as character columns but as row names.
>
>
>
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Val
> Sent: Friday, August 4, 2023 10:54 AM
> To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
> Subject: [R] Multiply
>
> Hi all,
>
> I want to multiply two  data frames as shown below,
>
> dat1 <-read.table(text="ID, x, y, z
>  A, 10,  34, 12
>  B, 25,  42, 18
>  C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)
>
> dat2 <-read.table(text="ID, weight, weiht2
>  A,  0.25, 0.35
>  B,  0.42, 0.52
>  C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)
>
> Desired result
>
> ID  Index1 Index2
> 1  A 24.58 30.18
> 2  B 35.59 44.09
> 3  C 17.10 21.30
>
> Here is my attempt,  but did not work
>
> dat3 <- data.frame(ID = dat1[,1], Index = apply(dat1[,-1], 1, FUN=
> function(x) {sum(x*dat2[,2:ncol(dat2)])} ), stringsAsFactors=F)
>
>
> Any help?
>
> Thank you,
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From er|cjberger @end|ng |rom gm@||@com  Fri Aug  4 20:09:43 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Fri, 4 Aug 2023 21:09:43 +0300
Subject: [R] Technical Help Request for "Version Differences" (i.e.,
 CYTOFKIT package)
In-Reply-To: <CAHZ-BgrATMoVki+KEm6TaLtnsig-zWP4_N7BCK+=Fyt+Lf4ayw@mail.gmail.com>
References: <CAHZ-BgrATMoVki+KEm6TaLtnsig-zWP4_N7BCK+=Fyt+Lf4ayw@mail.gmail.com>
Message-ID: <CAGgJW75FEvy-Je0rwGP3N5kFzNTmZwx5rD3uueax2WL09VRFPQ@mail.gmail.com>

Hi Murat,
I am not sure why you are using R 3.5.
CRAN has R 4.3.1

https://cran.r-project.org/bin/windows/base/

I suggest you start over and install R 4.3.1 and then your cytofkit
install might work.

Good luck,
Eric


On Fri, Aug 4, 2023 at 5:47?PM Murat DELMAN <murat.delman at gmail.com> wrote:
>
> Dear Ms./Mr.,
>
>
> I sent an email to this email address from my institutional address
> muratdelman at iyte.edu.tr, but could not make sure if my email reached you
> because sometimes emails are not delivered to the target due to
> server issues and country-related limitations. I wanted to send you the
> same email via my Gmail account.
>
>
>
>
> If the email text and codes below are not properly displayed, you can
> download the attached Word file, which has exactly the same content.
>
>
>
> I am a cytometrist and microscopist at Izmir Institute of Technology,
> Integrated Research Center. I operate a cytometer and fluorescence
> microscope to acquire data from our researchers? samples and then give them
> analyzed data. I need to dive into bulk data to present all of the
> information in the sample. To do this, I have recently been trying to
> develop my skills in R, RStudio, and Cytofkit package for cytometry (flow,
> spectral, mass, imaging mass cytometry) data analysis. I am new in this
> area and must learn R for data analysis.
>
>
>
>
>
> May I request help from you or one of your assistants who is competent in
> R, RStudio, and R packages with the installation issues caused by ?*version
> differences*? between R itself, R packages, and their dependencies? I
> really had to send this email to you anymore, because I could not run the
> package ?Cytofkit? and find a solution on the internet.
>
>
> It has been nearly 2 weeks since I have been trying to solve the errors and
> warnings. I am in a vicious circle and cannot move forward anymore. This is
> why I needed help from an expert competent in R programming.
>
>
>
> I tried to use the renv package, but I could not move forward because I am
> not competent in R.
>
>
> I explained the errors that I faced during the installation below.
>
>
>
> I have two computers, both operating Windows 10, 64-bit.
>
>
>
> I installed R 3.5.*2* on the desktop (Windows in English) and R 3.5.*0* on
> the laptop (Windows in Turkish).
>
>
>
> I know that you are very busy with your work, but may you (or your
> assistant) help me by informing me *how to install consistent versions of
> R, RStudio, and packages/dependencies* (for example, Cytofkit, ggplot2,
> Rtools, devtools, plyr, shiny, GUI)?
>
>
>
> I guess I will need exact web page links "*in* *an orderly manner" to
> download* the correct versions of everything.
>
>
>
> I would appreciate it if you could advise me or forward this email to one
> of your assistants or experts.
>
>
>
>
> I really appreciate any help you can provide.
>
>
>
>
> Kind Regards
>
>
>
>
> *Please find the technical details below;*
>
>
>
>
>
> I used the installation order listed below;
>
>
>
> I downloaded R 3.5.0 and R 3.5.2 using the link and directory below.
>
>
>
> Link: https://www.freestatistics.org/cran/
>
>
>
> Directory: Download R for Windows > install R for the first time > Previous
> releases > R 3.5.2 (December, 2018) or R 3.5.0
>
>
>
> I downloaded RStudio from the link below;
>
>
>
> https://posit.co/download/rstudio-desktop/
>
>
>
>
> I downloaded packages via either
> https://cran.rstudio.com/bin/windows/contrib/r-devel/ or the ?install
> function? tab in RStudio.
>
>
>
> Rtools : https://cran.r-project.org/bin/windows/Rtools/
>
>
>
> Devtools : https://cran.r-project.org/web/packages/devtools/index.html
>
>
>
> ggplot2 : https://cran.r-project.org/web/packages/ggplot2/index.html
>
>
>
>                  https://ggplot2.tidyverse.org/
>
>
>
>                  https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf
>
>
>
>
>
> plyr : https://cran.r-project.org/web/packages/plyr/index.html
>
>
>
> shiny : https://cran.r-project.org/web/packages/shiny/index.html
>
>
>
>
> https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html
>
>
>
>             https://github.com/rstudio/shiny
>
>
>
> cytofkit : https://github.com/JinmiaoChenLab/cytofkit
>
>
>
>
> https://bioconductor.riken.jp/packages/3.3/bioc/html/cytofkit.html
>
>
>
> https://journals.plos.org/ploscompbiol/article/file?id=10.1371/journal.pcbi.1005112&type=printable
>
>
>
>
> Below, I provide the errors and warnings that I faced for 2 weeks for both
> R versions;
>
>
>
>
>
> *Please find the errors and warnings below;*
>
>
>
>
> *CYTOFKIT FOR R VERSION 3.5.**2*
>
>
>
>
>
> > library(cytofkit)
>
> Loading required package: ggplot2
>
> Loading required package: plyr
>
> Error: package or namespace load failed for ?cytofkit?:
>
> package ?cytofkit? was installed by an R version with different internals;
> it needs to be reinstalled for use with this R version
>
> ERROR: this R is version 3.5.2, package 'cytofkit2' requires R >= 4.0.0
>
> In R CMD INSTALL
>
> Installation paths not writeable, unable to update packages
>
>   path: C:/Program Files/R/R-3.5.2/library
>
>   packages:
>
>     boot, class, cluster, codetools, KernSmooth, Matrix, nlme, nnet, rpart,
> spatial, survival
>
> There were 23 warnings (use warnings() to see them)
>
>
>
> > warnings()
>
> Warning messages:
>
> 1: packages ?caTools?, ?umap? are not available (for R version 3.5.2)
>
> 2: In i.p(...) : installation of package ?DEoptimR? had non-zero exit status
>
> 3: In i.p(...) : installation of package ?mvtnorm? had non-zero exit status
>
> 4: In i.p(...) : installation of package ?XML? had non-zero exit status
>
> 5: In i.p(...) : installation of package ?fastmap? had non-zero exit status
>
> 6: In i.p(...) : installation of package ?sass? had non-zero exit status
>
> 7: In i.p(...) : installation of package ?jquerylib? had non-zero exit
> status
>
> 8: In i.p(...) : installation of package ?later? had non-zero exit status
>
> 9: In i.p(...) : installation of package ?fontawesome? had non-zero exit
> status
>
> 10: In i.p(...) : installation of package ?miniUI? had non-zero exit status
>
> 11: In i.p(...) : installation of package ?RcppTOML? had non-zero exit
> status
>
> 12: In i.p(...) : installation of package ?pcaPP? had non-zero exit status
>
> 13: In i.p(...) : installation of package ?robustbase? had non-zero exit
> status
>
> 14: In i.p(...) : installation of package ?cachem? had non-zero exit status
>
> 15: In i.p(...) : installation of package ?promises? had non-zero exit
> status
>
> 16: In i.p(...) : installation of package ?reticulate? had non-zero exit
> status
>
> 17: In i.p(...) : installation of package ?rrcov? had non-zero exit status
>
> 18: In i.p(...) : installation of package ?memoise? had non-zero exit status
>
> 19: In i.p(...) : installation of package ?httpuv? had non-zero exit status
>
> 20: In i.p(...) : installation of package ?bslib? had non-zero exit status
>
> 21: In i.p(...) : installation of package ?rmarkdown? had non-zero exit
> status
>
> 22: In i.p(...) : installation of package ?htmlwidgets? had non-zero exit
> status
>
> 23: In i.p(...) :
>
>   installation of package
> ?C:/Users/murat-delman/AppData/Local/Temp/Rtmp8GGq71/file4d0c54c135b4/cytofkit2_0.99.80.tar.gz?
> had non-zero exit status
>
> > devtools::install_github("JinmiaoChenLab/cytofkit")
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
>   number of columns of matrices must match (see arg 2)
>
>
>
> >
>
>
>
>
>
> *INSTALLING GGPLOT2 FOR R VERSION 3.5.**0*
>
>
>
> > library(cytofkit)
>
> Loading required package: ggplot2
>
> Warning: namespace ?cli? is not available and has been replaced
>
> by .GlobalEnv when processing object ?.Random.seed?
>
> Error: package or namespace load failed for ?ggplot2? in rbind(info,
> getNamespaceInfo(env, "S3methods")):
>
>  number of columns of matrices must match (see arg 2)
>
> Error: package ?ggplot2? could not be loaded
>
> In addition: Warning message:
>
> package ?ggplot2? was built under R version 4.2.3
>
>
>
> > library(cytofkit)
>
> Error: package ?ggplot2? required by ?cytofkit? could not be found
>
>
>
> > install.packages("D:/Programlar/ggplotgui_1.0.0.zip", repos = NULL, type
> = "win.binary")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> package ?ggplotgui? successfully unpacked and MD5 sums checked
>
>
>
> > install.packages("D:/Programlar/ggplot2/ggplot2_3.0.0.tar.gz", repos =
> NULL, type = "source")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> * installing *source* package 'ggplot2' ...
>
> ** package 'ggplot2' successfully unpacked and MD5 sums checked
>
> ** R
>
> ** data
>
> *** moving datasets to lazyload DB
>
> ** inst
>
> ** byte-compile and prepare package for lazy loading
>
> Warning: namespace 'cli' is not available and has been replaced
>
> by .GlobalEnv when processing object 'txhousing'
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
>   number of columns of matrices must match (see arg 2)
>
> ERROR: lazy loading failed for package 'ggplot2'
>
> * removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
>   installation of package ?D:/Programlar/ggplot2/ggplot2_3.0.0.tar.gz? had
> non-zero exit status
>
>
>
> > packageurl <- "
> https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz"
>
> > install.packages(packageurl, repos=NULL, type="source")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> trying URL '
> https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz'
>
> Content type 'application/x-gzip' length 3031461 bytes (2.9 MB)
>
> downloaded 2.9 MB
>
>
>
> * installing *source* package 'ggplot2' ...
>
> ** package 'ggplot2' successfully unpacked and MD5 sums checked
>
> ** R
>
> ** data
>
> *** moving datasets to lazyload DB
>
> ** inst
>
> ** byte-compile and prepare package for lazy loading
>
> Warning: namespace 'cli' is not available and has been replaced
>
> by .GlobalEnv when processing object 'txhousing'
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
>   number of columns of matrices must match (see arg 2)
>
> ERROR: lazy loading failed for package 'ggplot2'
>
> * removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
>   installation of package
> ?C:/Users/murat/AppData/Local/Temp/RtmpI776iL/downloaded_packages/ggplot2_3.3.0.tar.gz?
> had non-zero exit status
>
>
>
> > install.packages("ggplot2")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> Warning in install.packages :
>
>   unable to access index for repository
> https://cran.rstudio.com/bin/windows/contrib/3.5:
>
>   cannot open URL 'https://cran.rstudio.com/bin/windows/contrib/3.5/PACKAGES
> '
>
> installing the source package ?ggplot2?
>
>
>
> trying URL 'https://cran.rstudio.com/src/contrib/ggplot2_3.4.2.tar.gz'
>
> Content type 'application/x-gzip' length 3153811 bytes (3.0 MB)
>
> downloaded 3.0 MB
>
>
>
> * installing *source* package 'ggplot2' ...
>
> ** package 'ggplot2' successfully unpacked and MD5 sums checked
>
> ** R
>
> ** data
>
> *** moving datasets to lazyload DB
>
> ** inst
>
> ** byte-compile and prepare package for lazy loading
>
> Warning: namespace 'cli' is not available and has been replaced
>
> by .GlobalEnv when processing object 'txhousing'
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
>   number of columns of matrices must match (see arg 2)
>
> ERROR: lazy loading failed for package 'ggplot2'
>
> * removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
>   installation of package ?ggplot2? had non-zero exit status
>
>
>
> The downloaded source packages are in
>
> ?C:\Users\murat\AppData\Local\Temp\RtmpI776iL\downloaded_packages?
>
>
>
> > packageurl <- "https://cran.r-project.org/web/packages/ggplot2/index.html"
>
> > install.packages(packageurl, repos=NULL, type="source")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> trying URL 'https://cran.r-project.org/web/packages/ggplot2/index.html'
>
> Content type 'text/html' length 468435 bytes (457 KB)
>
> downloaded 457 KB
>
>
>
> Error in getOctD(x, offset, len) : invalid octal digit
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
>   installation of package
> ?C:/Users/murat/AppData/Local/Temp/RtmpI776iL/downloaded_packages/index.html?
> had non-zero exit status
>
>
>
> > packageurl <- "
> https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz"
>
> > install.packages(packageurl, repos=NULL, type="source")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> trying URL '
> https://cran.r-project.org/src/contrib/Archive/ggplot2/ggplot2_3.3.0.tar.gz'
>
> Content type 'application/x-gzip' length 3031461 bytes (2.9 MB)
>
> downloaded 2.9 MB
>
>
>
> * installing *source* package 'ggplot2' ...
>
> ** package 'ggplot2' successfully unpacked and MD5 sums checked
>
> ** R
>
> ** data
>
> *** moving datasets to lazyload DB
>
> ** inst
>
> ** byte-compile and prepare package for lazy loading
>
> Warning: namespace 'cli' is not available and has been replaced
>
> by .GlobalEnv when processing object 'txhousing'
>
> Error in rbind(info, getNamespaceInfo(env, "S3methods")) :
>
>   number of columns of matrices must match (see arg 2)
>
> ERROR: lazy loading failed for package 'ggplot2'
>
> * removing 'C:/Users/murat/Documents/R/win-library/3.5/ggplot2'
>
> In R CMD INSTALL
>
> Warning in install.packages :
>
>   installation of package
> ?C:/Users/murat/AppData/Local/Temp/Rtmp8sLmoj/downloaded_packages/ggplot2_3.3.0.tar.gz?
> had non-zero exit status
>
>
>
> > pak::pkg_install("tibble")
>
> Error in load_private_package("cli") :
>
>   Cannot load cli from the private library
>
>
>
> > pak::pkg_install("tidyverse/tibble")
>
> Error in load_private_package("cli") :
>
>   Cannot load cli from the private library
>
>
>
> > pkg_install("tibble")
>
> Error in pkg_install("tibble") : could not find function "pkg_install"
>
>
>
> > install.packages("D:/Programlar/ggplot2/ggplot2_3.4.2.zip", repos = NULL,
> type = "win.binary")
>
> Installing package into ?C:/Users/murat/Documents/R/win-library/3.5?
>
> (as ?lib? is unspecified)
>
> package ?ggplot2? successfully unpacked and MD5 sums checked
>
>
>
> Kind Regards
>
>
> Murat Delman, Ph.D.
> Izmir Institute of Technology
> Integrated Research Centers
>
> [image: Mailtrack]
> <https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
> Sender
> notified by
> Mailtrack
> <https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality11&>
> 08/04/23,
> 10:12:50 AM
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Aug  4 20:12:22 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 4 Aug 2023 19:12:22 +0100
Subject: [R] Multiply
In-Reply-To: <CAJOiR6aEfU-HrS9Q_ufCxubLOMt01fa7q1oV2fZ-rsmrygiOOw@mail.gmail.com>
References: <CAJOiR6Y-qZL=N8Cb_VZwsRdxzDhkUG8+uhJOvvZB=3YC4TA1VA@mail.gmail.com>
 <006f01d9c6ec$9f005180$dd00f480$@gmail.com>
 <CAJOiR6aEfU-HrS9Q_ufCxubLOMt01fa7q1oV2fZ-rsmrygiOOw@mail.gmail.com>
Message-ID: <9eb6d5d2-54f5-3a89-6aaf-ecb1b7a7b5a0@sapo.pt>

?s 19:03 de 04/08/2023, Val escreveu:
> Thank you,  Avi and Ivan.  Worked for this particular Example.
> 
> Yes, I am looking for something with a more general purpose.
> I think Ivan's suggestion works for this.
> 
> multiplication=as.matrix(dat1[,-1]) %*% as.matrix(dat2[match(dat1[,1],
> dat2[,1]),-1])
> Res=data.frame(ID = dat1[,1], Index = multiplication)
> 
> On Fri, Aug 4, 2023 at 10:59?AM <avi.e.gross at gmail.com> wrote:
>>
>> Val,
>>
>> A data.frame is not quite the same thing as a matrix.
>>
>> But as long as everything is numeric, you can convert both data.frames to
>> matrices, perform the computations needed and, if you want, convert it back
>> into a data.frame.
>>
>> BUT it must be all numeric and you violate that requirement by having a
>> character column for ID. You need to eliminate that temporarily:
>>
>> dat1 <- read.table(text="ID, x, y, z
>>   A, 10,  34, 12
>>   B, 25,  42, 18
>>   C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)
>>
>> mat1 <- as.matrix(dat1[,2:4])
>>
>> The result is:
>>
>>> mat1
>>        x  y  z
>> [1,] 10 34 12
>> [2,] 25 42 18
>> [3,] 14 20  8
>>
>> Now do the second matrix, perhaps in one step:
>>
>> mat2 <- as.matrix(read.table(text="ID, weight, weiht2
>>   A,  0.25, 0.35
>>   B,  0.42, 0.52
>>   C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)[,2:3])
>>
>>
>> Do note some people use read.csv() instead of read.table, albeit it simply
>> calls read.table after setting some parameters like the comma.
>>
>> The result is what you asked for, including spelling weight wrong once.:
>>
>>> mat2
>>       weight weiht2
>> [1,]   0.25   0.35
>> [2,]   0.42   0.52
>> [3,]   0.65   0.75
>>
>> Now you wanted to multiply as in matrix multiplication.
>>
>>> mat1 %*% mat2
>>       weight weiht2
>> [1,]  24.58  30.18
>> [2,]  35.59  44.09
>> [3,]  17.10  21.30
>>
>> Of course, you wanted different names for the columns and you can do that
>> easily enough:
>>
>> result <- mat1 %*% mat2
>>
>> colnames(result) <- c("index1", "index2")
>>
>>
>> But this is missing something:
>>
>>> result
>>       index1 index2
>> [1,]  24.58  30.18
>> [2,]  35.59  44.09
>> [3,]  17.10  21.30
>>
>> Do you want a column of ID numbers on the left? If numeric, you can keep it
>> in a matrix in one of many ways but if you want to go back to the data.frame
>> format and re-use the ID numbers, there are again MANY ways. But note mixing
>> characters and numbers can inadvertently convert everything to characters.
>>
>> Here is one solution. Not the only one nor the best one but reasonable:
>>
>> recombined <- data.frame(index=dat1$ID,
>>                           index1=result[,1],
>>                           index2=result[,2])
>>
>>
>>> recombined
>>    index index1 index2
>> 1     A  24.58  30.18
>> 2     B  35.59  44.09
>> 3     C  17.10  21.30
>>
>> If for some reason you need a more general purpose way to do this for
>> arbitrary conformant matrices, you can write a function that does this in a
>> more general way but perhaps a better idea might be a way to store your
>> matrices in files in a way that can be read back in directly or to not
>> include indices as character columns but as row names.
>>
>>
>>
>>
>>
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Val
>> Sent: Friday, August 4, 2023 10:54 AM
>> To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
>> Subject: [R] Multiply
>>
>> Hi all,
>>
>> I want to multiply two  data frames as shown below,
>>
>> dat1 <-read.table(text="ID, x, y, z
>>   A, 10,  34, 12
>>   B, 25,  42, 18
>>   C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)
>>
>> dat2 <-read.table(text="ID, weight, weiht2
>>   A,  0.25, 0.35
>>   B,  0.42, 0.52
>>   C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)
>>
>> Desired result
>>
>> ID  Index1 Index2
>> 1  A 24.58 30.18
>> 2  B 35.59 44.09
>> 3  C 17.10 21.30
>>
>> Here is my attempt,  but did not work
>>
>> dat3 <- data.frame(ID = dat1[,1], Index = apply(dat1[,-1], 1, FUN=
>> function(x) {sum(x*dat2[,2:ncol(dat2)])} ), stringsAsFactors=F)
>>
>>
>> Any help?
>>
>> Thank you,
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Slightly simpler:



multiplication <- as.matrix(dat1[,-1]) %*% 
as.matrix(dat2[match(dat1[,1], dat2[,1]),-1])
Res <- data.frame(ID = dat1[,1], Index = multiplication)

# this is what I find simpler
# the method being called is cbind.data.frame
Res2 <- cbind(dat1[1], Index = multiplication)

identical(Res, Res2)
#> [1] TRUE


Hope this helps,

Rui Barradas


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Aug  4 20:58:01 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 4 Aug 2023 21:58:01 +0300
Subject: [R] Technical Help Request for "Version Differences" (i.e.,
 CYTOFKIT package)
In-Reply-To: <146822026.2931556.1691133058051.JavaMail.zimbra@iyte.edu.tr>
References: <146822026.2931556.1691133058051.JavaMail.zimbra@iyte.edu.tr>
Message-ID: <20230804215801.5e7a5a12@parabola>

Dear Murat Delman,

Both your messages came through, and I'm replying to the one that was
the first chronologically.

I have taken a look at the cytofkit package. It used to be a
Bioconductor package, but was removed, most likely because it failed to
build and pass a check: https://support.bioconductor.org/p/128865

Installing cytofkit will involve spending a lot of effort: you need an
old Bioconductor release, hence an old version of R, hence likely old,
archived version of the dependencies, and to build the packages from
source because CRAN doesn't serve Windows binaries for old versions of
R. In this light, may I suggest looking for alternative packages that
currently pass their checks on CRAN or Bioconductor? That support
thread above has some suggestions, though I lack the expertise to judge
them. In particular, the cytofWorkflow vignette and the scDataviz
package look promising.

For "basic R literacy", I can recommend this free book by A. Shipunov:
http://web.archive.org/web/20230501112111/http://ashipunov.info/shipunov/school/biol_240/en/visual_statistics.pdf

In order to install packages from the current release of Bioconductor,
follow the guide at https://bioconductor.org/install/.

Good luck!

-- 
Best regards,
Ivan


From @vi@e@gross m@iii@g oii gm@ii@com  Sat Aug  5 01:45:22 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Fri, 4 Aug 2023 19:45:22 -0400
Subject: [R] Multiply
In-Reply-To: <CAJOiR6aEfU-HrS9Q_ufCxubLOMt01fa7q1oV2fZ-rsmrygiOOw@mail.gmail.com>
References: <CAJOiR6Y-qZL=N8Cb_VZwsRdxzDhkUG8+uhJOvvZB=3YC4TA1VA@mail.gmail.com>
 <006f01d9c6ec$9f005180$dd00f480$@gmail.com>
 <CAJOiR6aEfU-HrS9Q_ufCxubLOMt01fa7q1oV2fZ-rsmrygiOOw@mail.gmail.com>
Message-ID: <017301d9c72d$bc6ce850$3546b8f0$@gmail.com>

[See the end for an interesting twist on moving a column to row.names.]

Yes, many ways to do things exist but it may make sense to ask for what the user/OP really wants. Sometimes the effort to make a brief example obscures things.

Was there actually any need to read in a file containing comma-separated values? Did it have to include one, or perhaps more, non-numeric columns? Was the ID column guaranteed to exist and be named ID or just be the first column? Is any error checking needed?

So assuming we read in two data structures into data.frames called A and B to be unoriginal. A wider approach might be to split A into A.text and A.numeric by checking which columns test as numeric (meaning is.numeric() return TRUE) and which can be text or logical or anything else. Note that complex is not considered numeric if that matters.

You might then count the number of rows and columns of A.numeric and set A.text Aside for now. 

You then get B and it seems you can throw away any non-numeric columns. The resulting numeric columns can be in B.numeric.
The number of rows and columns of what remains need to conform to the dimensions of A in the sense that if a is M rows by N columns, then B must be N x anything and the result of the multiplication is M x anything. If the condition is not met, you need to fail gracefully.

You may also want to decide what to do with data that came with things like NA content. Or, if your design allows content that can be converted to numeric, check and make any conversions.

Then you can convert the data into matrices, perform the matrix multiplication and optionally restore any column names you want along with any of the non-numeric columns you held back and note there could possible be more than one. Obviously, getting multiple ones in the original order is harder.

I am not sure if you are interested in another tweak. For some purposes, rownames() and colnames() make sense instead of additional rows or columns.

A line of code like this applied to a data.frame will copy your id column as a rowname then remove the actual ID column.

> dat1
  ID  x  y  z
1  A 10 34 12
2  B 25 42 18
3  C 14 20  8
> rownames(dat1) <- dat1$ID
> dat1$ID <- NULL
> dat1
    x  y  z
 A 10 34 12
 B 25 42 18
 C 14 20  8

> result <- as.matrix(dat1) %*% mat2
> result
   weight weiht2
 A  24.58  30.18
 B  35.59  44.09
 C  17.10  21.30

There are functions (perhaps in packages, with names like column_to_rownames() in the tidyverse packages that can be used and you can also reverse the process.

Just some thoughts. The point is that it is often wiser to not mix text with numeric and rownames and colnames provide a way to include the text for the purposes you want and not for others where they are in the way. And here is an oddity I found:

> dat2
  ID weight weiht2
1  A   0.25   0.35
2  B   0.42   0.52
3  C   0.65   0.75
> temp <- data.frame(dat2, row.names=1)
> temp
   weight weiht2
 A   0.25   0.35
 B   0.42   0.52
 C   0.65   0.75

As shown, when you create a data.frame you can move any column by NUMBER into rownames. So consider your early code and note read.table supports the option row.names=1 and passes it on so in one step:

> ?read.table
> dat1 <-read.table(text="ID, x, y, z
+ A, 10,  34, 12
+ B, 25,  42, 18
+ C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F, row.names=1)
> dat1
   x  y  z
A 10 34 12
B 25 42 18
C 14 20  8

You can make it a matrix immediately:

mat1 <- as.matrix(read.table(
  text = text,
  sep = ",",
  header = TRUE,
  stringsAsFactors = F,
  row.names = 1
))


-----Original Message-----
From: Val <valkremk at gmail.com> 
Sent: Friday, August 4, 2023 2:03 PM
To: avi.e.gross at gmail.com
Cc: r-help at r-project.org
Subject: Re: [R] Multiply

Thank you,  Avi and Ivan.  Worked for this particular Example.

Yes, I am looking for something with a more general purpose.
I think Ivan's suggestion works for this.

multiplication=as.matrix(dat1[,-1]) %*% as.matrix(dat2[match(dat1[,1],
dat2[,1]),-1])
Res=data.frame(ID = dat1[,1], Index = multiplication)

On Fri, Aug 4, 2023 at 10:59?AM <avi.e.gross at gmail.com> wrote:
>
> Val,
>
> A data.frame is not quite the same thing as a matrix.
>
> But as long as everything is numeric, you can convert both data.frames to
> matrices, perform the computations needed and, if you want, convert it back
> into a data.frame.
>
> BUT it must be all numeric and you violate that requirement by having a
> character column for ID. You need to eliminate that temporarily:
>
> dat1 <- read.table(text="ID, x, y, z
>  A, 10,  34, 12
>  B, 25,  42, 18
>  C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)
>
> mat1 <- as.matrix(dat1[,2:4])
>
> The result is:
>
> > mat1
>       x  y  z
> [1,] 10 34 12
> [2,] 25 42 18
> [3,] 14 20  8
>
> Now do the second matrix, perhaps in one step:
>
> mat2 <- as.matrix(read.table(text="ID, weight, weiht2
>  A,  0.25, 0.35
>  B,  0.42, 0.52
>  C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)[,2:3])
>
>
> Do note some people use read.csv() instead of read.table, albeit it simply
> calls read.table after setting some parameters like the comma.
>
> The result is what you asked for, including spelling weight wrong once.:
>
> > mat2
>      weight weiht2
> [1,]   0.25   0.35
> [2,]   0.42   0.52
> [3,]   0.65   0.75
>
> Now you wanted to multiply as in matrix multiplication.
>
> > mat1 %*% mat2
>      weight weiht2
> [1,]  24.58  30.18
> [2,]  35.59  44.09
> [3,]  17.10  21.30
>
> Of course, you wanted different names for the columns and you can do that
> easily enough:
>
> result <- mat1 %*% mat2
>
> colnames(result) <- c("index1", "index2")
>
>
> But this is missing something:
>
> > result
>      index1 index2
> [1,]  24.58  30.18
> [2,]  35.59  44.09
> [3,]  17.10  21.30
>
> Do you want a column of ID numbers on the left? If numeric, you can keep it
> in a matrix in one of many ways but if you want to go back to the data.frame
> format and re-use the ID numbers, there are again MANY ways. But note mixing
> characters and numbers can inadvertently convert everything to characters.
>
> Here is one solution. Not the only one nor the best one but reasonable:
>
> recombined <- data.frame(index=dat1$ID,
>                          index1=result[,1],
>                          index2=result[,2])
>
>
> > recombined
>   index index1 index2
> 1     A  24.58  30.18
> 2     B  35.59  44.09
> 3     C  17.10  21.30
>
> If for some reason you need a more general purpose way to do this for
> arbitrary conformant matrices, you can write a function that does this in a
> more general way but perhaps a better idea might be a way to store your
> matrices in files in a way that can be read back in directly or to not
> include indices as character columns but as row names.
>
>
>
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Val
> Sent: Friday, August 4, 2023 10:54 AM
> To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
> Subject: [R] Multiply
>
> Hi all,
>
> I want to multiply two  data frames as shown below,
>
> dat1 <-read.table(text="ID, x, y, z
>  A, 10,  34, 12
>  B, 25,  42, 18
>  C, 14,  20,  8 ",sep=",",header=TRUE,stringsAsFactors=F)
>
> dat2 <-read.table(text="ID, weight, weiht2
>  A,  0.25, 0.35
>  B,  0.42, 0.52
>  C,  0.65, 0.75",sep=",",header=TRUE,stringsAsFactors=F)
>
> Desired result
>
> ID  Index1 Index2
> 1  A 24.58 30.18
> 2  B 35.59 44.09
> 3  C 17.10 21.30
>
> Here is my attempt,  but did not work
>
> dat3 <- data.frame(ID = dat1[,1], Index = apply(dat1[,-1], 1, FUN=
> function(x) {sum(x*dat2[,2:ncol(dat2)])} ), stringsAsFactors=F)
>
>
> Any help?
>
> Thank you,
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


