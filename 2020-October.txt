From drj|m|emon @end|ng |rom gm@||@com  Thu Oct  1 00:32:15 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 1 Oct 2020 08:32:15 +1000
Subject: [R] 2 KM curves on the same plot
In-Reply-To: <1576196209.374733.1601484445685@mail.yahoo.com>
References: <2002394729.15283.1601339603771.ref@mail.yahoo.com>
 <2002394729.15283.1601339603771@mail.yahoo.com>
 <CA+8X3fW8ZzeUD1-JcBPXTxHpoHgttWwLO5_g2CbjExOUrTigtg@mail.gmail.com>
 <1722291974.141481.1601432806327@mail.yahoo.com>
 <CA+8X3fV+Q9ag=AJjs-Hcn_L+fEPr6a+=P3f=LjKboDXBHAEFjw@mail.gmail.com>
 <2061719555.161645.1601438263925@mail.yahoo.com>
 <CA+8X3fW0qJruksWxJnwJvY13L0FcVcM2U9w0OS-Lvy1Ck4FKvw@mail.gmail.com>
 <1576196209.374733.1601484445685@mail.yahoo.com>
Message-ID: <CA+8X3fUB1DsOLAch3_DLh4CG63eX48pkr5hLsRc544Z-O69ErA@mail.gmail.com>

Hi John,
Brilliant solution and the best sort - when you finally solve your
problem by yourself.

Jim

On Thu, Oct 1, 2020 at 2:52 AM array chip <arrayprofile at yahoo.com> wrote:
>
> Hi Jim,
>
> I found out why clip() does not work with lines(survfit.object)!
>
> If you look at code of function survival:::lines.survfit, in th middle of the code:
>
>     do.clip <- getOption("plot.survfit")
>     if (!is.null(xx <- do.clip$plotclip))
>         clip(xx[1], xx[2], xx[3], xx[4])
>
> This will reset the clipping to the defualt plot region!
>
> So I just comment out the last 2 lines of the above 3 lines, and created a customized lines2 function. Now it works!
>
> It's fun to learn clip().
>
> Thanks,
>
> John
>
>
> On Wednesday, September 30, 2020, 01:47:55 AM PDT, Jim Lemon <drjimlemon at gmail.com> wrote:
>
>
> Hi John,
> Hmmm, this works:
>
> plot(1:10)
> xylim<-par("usr")
> clip(5,xylim[2],xylim[3],xylim[4])
> lines(10:1)
>
> so I suspect that there is a "lines" method that resets the clipping
> region out of sight. Fortunately Mark Schwartz provided a way to get
> your plot so I will give the wall against which I have been banging my
> head a break.
>
> Jim
>
> On Wed, Sep 30, 2020 at 1:57 PM array chip <arrayprofile at yahoo.com> wrote:
> >
> > Jim,
> >
> > I tried a few things, I found that clip() works if I just do some regular graphing tasks. But as long as I run lines(fit) with "fit" object is a survfit object, this would reset to default plot region. See the ovarian example below:
> >
> > library(survival)
> > ovarian1<-ovarian
> > ovarian1$fustat[ovarian$futime>450]<-0
> > ovarian1$futime[ovarian$futime>450]<-450
> > ovarian2<-subset(ovarian,futime>450)
> >
> > fit1 <- survfit(Surv(futime, fustat) ~ rx, data = ovarian1)
> > fit2 <- survfit(Surv(futime, fustat) ~ rx, data = ovarian2)
> >
> > plot(fit1, xlim=c(0,1200), col = 1:2)
> > abline(v=450)
> > xylim<-par("usr")
> > points(-1,-1)
> > clip(450,xylim[2],xylim[3],xylim[4])
> > abline(h=0.5,col=2)      ### YES, clipping() works!
> >
> > lines(fit2, col = 3:4,lty=2)  ### clipping does not work! reset to default plot region
> > abline(h=0.4,col=2)      ### NO, clipping() does not work!
> >
> > So disappointed with this, otherwise this would be such a simple method to do what I want.
> >
> > Thanks,
> >
> > John
> >
> > On Tuesday, September 29, 2020, 07:58:53 PM PDT, Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi John,
> > I should have remembered this. For some reason, the clip() function
> > doesn't operate until you have issued a graphics command. Try:
> >
> > points(-1,-1)
> >
> > before calling lines()
> >
> > Jim
> >
> > On Wed, Sep 30, 2020 at 12:26 PM array chip <arrayprofile at yahoo.com> wrote:
> > >
> > > Hi Jim,
> > >
> > > I tried the clip() function below, surprisingly it did not work! I read the R help file and feel your script should work. To have a workable example, I used the ovarian dataset in the survival package as an example:
> > >
> > > ovarian1<-ovarian
> > > ovarian1$fustat[ovarian$futime>450]<-0
> > > ovarian1$futime[ovarian$futime>450]<-450
> > >
> > > ovarian2<-subset(ovarian,futime>450)
> > >
> > > fit1 <- survfit(Surv(futime, fustat) ~ rx, data = ovarian1)
> > > fit2 <- survfit(Surv(futime, fustat) ~ rx, data = ovarian2)
> > >
> > > plot(fit1, xlim=c(0,1200), col = 1:2)
> > > abline(v=450)
> > > xylim<-par("usr")
> > > clip(450,xylim[2],xylim[3],xylim[4])
> > > lines(fit2, col = 3:4,lty=2)
> > >
> > > I can still see that the extra horizontal line on the top.
> > >
> > > Can you or anyone have any suggestion what went wrong?
> > >
> > > Thanks,
> > >
> > > John
> > >
> > >
> > > On Tuesday, September 29, 2020, 01:35:48 AM PDT, Jim Lemon <drjimlemon at gmail.com> wrote:
> > >
> > >
> > >
> > >
> > >
> > > Hi John,
> > > Perhaps the most direct way would be:
> > >
> > > plot(fit1, col=1:2)
> > > xylim<-par("usr")
> > > clip(4,xylim[2],xylim[3],xylim[4])
> > > lines(fit2,col=1:2)
> > >
> > > Remember that the new clipping rectangle will persist until you or
> > > something else resets it.
> > >
> > > Jim
> > >
> > > On Tue, Sep 29, 2020 at 10:34 AM array chip via R-help
> > > <r-help at r-project.org> wrote:
> > > >
> > > > Hello,
> > > >
> > > > Can anyone suggest a simple way to generate a Kaplan-Meier plot with 2 survfit objects, just like this one:
> > > >
> > > > https://drive.google.com/file/d/1fEcpdIdE2xYtA6LBQN9ck3JkL6-goabX/view?usp=sharing
> > > >
> > > > Suppose I have 2 survfit objects: fit1 is for the curve on the left (survtime has been truncated to the cutoff line: year 5), fit2 is for the curve on the right (minimum survival time is at the cutoff line: year 5), but if I do the following:
> > > >
> > > > plot(fit1, col=1:2)
> > > > lines(fit2,col=1:2)
> > > >
> > > > Then I will have an horizontal line on the top that connect from 0 to 4 years, which I do not want that to be drawn (see blue arrow below):
> > > >
> > > > https://drive.google.com/file/d/178mQGlhnaOg9PA-oE-W_W5CtrGD03ljH/view?usp=sharing
> > > >
> > > > Can anyone have a strategy to make this kind of plot happen?
> > > >
> > > > Thanks,
> > > >
> > > > John
> > >
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >


From ch@kr@r@hu| @end|ng |rom gm@||@com  Thu Oct  1 08:24:47 2020
From: ch@kr@r@hu| @end|ng |rom gm@||@com (Rahul Chakraborty)
Date: Thu, 1 Oct 2020 11:54:47 +0530
Subject: [R] Help with the Error Message in R "Error in 1:nchid : result
 would be too long a vector"
In-Reply-To: <c220d8b2-96f9-e112-8f8c-fcb63a5ec274@sapo.pt>
References: <CAEmZPSmcJ10tMEv+4-9QQX-yXLbbau2sp55cOT6a76s4B6wcPw@mail.gmail.com>
 <e1b0bc48-4f5d-7cc2-4de9-b0321e8e35b7@comcast.net>
 <CAEmZPSnPRjFQBfk5GQGYxaqKaqtHqf=12GeAPtJ3aFOM3QxbUA@mail.gmail.com>
 <CAEmZPSntN9SXwY8z0vRVDXKciazcFviYZQvyrUrXEBJCs3cnUg@mail.gmail.com>
 <d7118822-f3a2-c6c2-df72-917089691de0@comcast.net>
 <CAEmZPSmKKLxS3=dwW2aGHK1JQqO1+WpbtiX6kGcf8Wp=J605NQ@mail.gmail.com>
 <ec59d668-2935-f829-ae63-c0418fcab34f@comcast.net>
 <dd66e9fc-0daf-73ab-96ce-37d70c4162bc@sapo.pt>
 <CAEmZPSnU===bm=ZdVVDmJx-a-Qd955yxjnDBHZkRFUyoUASyvQ@mail.gmail.com>
 <c220d8b2-96f9-e112-8f8c-fcb63a5ec274@sapo.pt>
Message-ID: <CAEmZPSkZqi_09En2fBBVTJZZsrRpNap9N7aZZp-mBmLe=gxWDw@mail.gmail.com>

Hello Rui,

Thanks a lot for your response. But, I will surely say that the data I
attached is in long format as it has 18 rows (3 alternatives*3
questions* 2 individuals). Had it been a wide format data it would
have had 6 rows (3 questions* 2 individuals). But, anyway thanks.

Best,
Rahul


On Wed, Sep 23, 2020 at 3:23 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> Hello,
>
> Please keep this on the list so that others can give their contribution.
>
> If you have reshaped your data can you post the code you ran to reshape
> it? Right now we only have the original attachment, in wide format, not
> the long format data.
>
> Rui Barradas
>
> ?s 21:55 de 22/09/20, Rahul Chakraborty escreveu:
> > Hi,
> >
> > Thank you so much for your reply.
> > Yes, thank you for pointing that out, I apologise for that error in
> > the variable name. However, my data is in long format.
> >
> > See, my first column is IND which identifies my individuals,
> > second column is QES which identifies the question number each
> > individual faces, 3rd column is a stratification code that can be
> > ignored. Columns 6-13 are alternative specific variables and rest are
> > individual specific. So 1st 3 rows indicate 1st question faced by 1st
> > individual containing 3 alternatives, and so on. So, I have already
> > arranged the data in long format.
> >
> > With that in mind if I use shape="long" it still gives me error.
> >
> > Best  regards,
> >
> > On Tue, Sep 22, 2020 at 11:00 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
> >>
> >> Hello,
> >>
> >> I apologize if the rest of quotes prior to David's email are missing,
> >> for some reason today my mail client is not including them.
> >>
> >> As for the question, there are two other problems:
> >>
> >> 1) Alt_name is misspelled, it should be ALT_name;
> >>
> >> 2) the data is in wide, not long, format.
> >>
> >> A 3rd, problem is that in ?dfidx it says
> >>
> >> alt.var
> >> the name of the variable that contains the alternative index (for a long
> >> data.frame only) or the name under which the alternative index will be
> >> stored (the default name is alt)
> >>
> >>
> >> So if shape = "wide", alt.var is not needed.
> >> But I am not a user of package mlogit, I'm just guessing.
> >>
> >> The following seems to fix it (it doesn't throw errors).
> >>
> >>
> >> mldata1 <- dfidx(mydata, shape = "wide",
> >>                    #alt.var = "ALT_name",
> >>                    choice = "Choice_binary",
> >>                    id.var = "IND")
> >>
> >>
> >> Hope this helps,
> >>
> >> Rui Barradas
> >>
> >>
> >> ?s 16:15 de 22/09/20, David Winsemius escreveu:
> >>> You were told two things about your code:
> >>>
> >>>
> >>> 1) mlogit.data is deprecated by the package authors, so use dfidx.
> >>>
> >>> 2) dfidx does not allow duplicate ids in the first two columns.
> >>>
> >>>
> >>> Which one of those are you asserting is not accurate?
> >>>
> >>>
> >
> >
> >



-- 
Rahul Chakraborty
Research Fellow
National Institute of Public Finance and Policy
New Delhi- 110067


From m||||eeng @end|ng |rom gm@||@com  Thu Oct  1 09:30:28 2020
From: m||||eeng @end|ng |rom gm@||@com (Marte Lilleeng)
Date: Thu, 1 Oct 2020 09:30:28 +0200
Subject: [R] (no subject)
Message-ID: <CAM-hW5dc1FfAb-KPyBdgOJEHfnyqOkAb-AJEZJOzWA4b_xVN=Q@mail.gmail.com>

I want to unsubscribe from this list.

-- 
Mvh Marte Synn?ve Lilleeng
tlf 97 74 38 12

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Thu Oct  1 09:58:02 2020
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Thu, 1 Oct 2020 09:58:02 +0200
Subject: [R] (no subject)
In-Reply-To: <CAM-hW5dc1FfAb-KPyBdgOJEHfnyqOkAb-AJEZJOzWA4b_xVN=Q@mail.gmail.com>
References: <CAM-hW5dc1FfAb-KPyBdgOJEHfnyqOkAb-AJEZJOzWA4b_xVN=Q@mail.gmail.com>
Message-ID: <7D3E5880-E2E2-4C8D-86E7-91CD332EEB73@gmail.com>

Then please follow the link in the footer. Other recipients can't help you.


> On 1 Oct 2020, at 09:30 , Marte Lilleeng <mlilleeng at gmail.com> wrote:
> 
> I want to unsubscribe from this list.
> 
> -- 
> Mvh Marte Synn?ve Lilleeng
> tlf 97 74 38 12
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Thu Oct  1 19:29:03 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Thu, 1 Oct 2020 12:29:03 -0500
Subject: [R] summarize_all Function
References: <000001d69818$5bd1ee10$1375ca30$.ref@sbcglobal.net>
Message-ID: <000001d69818$5bd1ee10$1375ca30$@sbcglobal.net>

r-help Forum

 

I'm using the dplyr:: summarize_all(funs(sum)) function and am receiving a
warning message that the `funs()` is deprecated as of dplyr 0.8.0. Ok what
should I be using to summarize  all columns by sum?

 

Jeff


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Oct  1 20:49:24 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 1 Oct 2020 19:49:24 +0100
Subject: [R] summarize_all Function
In-Reply-To: <000001d69818$5bd1ee10$1375ca30$@sbcglobal.net>
References: <000001d69818$5bd1ee10$1375ca30$.ref@sbcglobal.net>
 <000001d69818$5bd1ee10$1375ca30$@sbcglobal.net>
Message-ID: <a169ffac-3c3a-0d4b-329d-5eff95271169@sapo.pt>

Hello,

Any of the two will do, the first is now preferred.


library(dplyr)

mtcars %>%
   summarise(across(everything(), sum))

mtcars %>%
   summarise_all(sum)   # no need for `funs()`


Hope this helps,

Rui Barradas

?s 18:29 de 01/10/20, Jeff Reichman escreveu:
> r-help Forum
> 
>   
> 
> I'm using the dplyr:: summarize_all(funs(sum)) function and am receiving a
> warning message that the `funs()` is deprecated as of dplyr 0.8.0. Ok what
> should I be using to summarize  all columns by sum?
> 
>   
> 
> Jeff
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Oct  1 20:56:18 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 1 Oct 2020 11:56:18 -0700
Subject: [R] summarize_all Function
In-Reply-To: <000001d69818$5bd1ee10$1375ca30$@sbcglobal.net>
References: <000001d69818$5bd1ee10$1375ca30$.ref@sbcglobal.net>
 <000001d69818$5bd1ee10$1375ca30$@sbcglobal.net>
Message-ID: <CAHqSRuSHSHcdZnq2QP-2_fkSJkrJYAJSk=-HyHVZu0nC-5Kn8A@mail.gmail.com>

The warning gives some suggestions.  E.g., replace funs(sum,prod) with
list(sum=sum,prod=prod).

% R CMD Rscript -e 'library(dplyr,warn.conflicts=FALSE);
data.frame(X=1:3,Y=c(11,13,17)) %>% summarize_all(funs(sum,prod))'
  X_sum Y_sum X_prod Y_prod
1     6    41      6   2431
Warning message:
`funs()` is deprecated as of dplyr 0.8.0.
Please use a list of either functions or lambdas:

  # Simple named list:
  list(mean = mean, median = median)

  # Auto named with `tibble::lst()`:
  tibble::lst(mean, median)

  # Using lambdas
  list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))
This warning is displayed once every 8 hours.
Call `lifecycle::last_warnings()` to see where this warning was generated.

% R CMD Rscript -e 'library(dplyr,warn.conflicts=FALSE);
data.frame(X=1:3,Y=c(11,13,17)) %>% summarize_all(list(sum=sum,prod=prod))'
  X_sum Y_sum X_prod Y_prod
1     6    41      6   2431

On Thu, Oct 1, 2020 at 10:29 AM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> r-help Forum
>
>
>
> I'm using the dplyr:: summarize_all(funs(sum)) function and am receiving a
> warning message that the `funs()` is deprecated as of dplyr 0.8.0. Ok what
> should I be using to summarize  all columns by sum?
>
>
>
> Jeff
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@heemj@n93 @end|ng |rom y@hoo@com  Fri Oct  2 13:57:38 2020
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Fri, 2 Oct 2020 11:57:38 +0000 (UTC)
Subject: [R] help in R code
References: <1372789609.1054642.1601639858981.ref@mail.yahoo.com>
Message-ID: <1372789609.1054642.1601639858981@mail.yahoo.com>


Hello , i am working in the functional time series using the multivariate time series data(hourly time series data). Sir? i am using FAR model more than one order for which no statistical package is available in R, so for this i convert my data into functional form and obtained the functional principle component and from those FPCA i extract their corresponding? FPCscores. Know i use the VAR model on those FPCscores for the forecasting of each 24 hours through the VAR model, but the VAR give me the forecasted value for all 23hours? when i put phat=23, but whenever i put phat=24 i.e want to predict each 24 hours its give the results in the form of NA. the code is given below
fdata<- function(mat){? nb = 27 # number of basis functions for the data? fbf = create.fourier.basis(rangeval=c(0,1), nbasis=nb) # basis for data? args=seq(0,1,length=24)? fdata1=Data2fd(args,y=t(mat),fbf) # functions generated from discretized y? return(fdata1)}prediction.ffpe = function(fdata1){? n = ncol(fdata1$coef)? D = nrow(fdata1$coef)? #center the data? #mu = mean.fd(fdata1)? data = center.fd(fdata1)? #ffpe = fFPE(fdata1, Pmax=10)? #p.hat = ffpe[2] #order of the model? d.hat=23? p.hat=6? #fPCA? fpca = pca.fd(data,nharm=D, centerfns=TRUE)? scores = fpca$scores[,0:d.hat]? # to avoid warnings from vars predict function below? colnames(scores) <- as.character(seq(1:d.hat))? VAR.pre= predict(VAR(scores, p.hat), n.ahead=1, type="const")$fcst??}
kindly guide me that how can i solve out my problem or what error i doing. THANKS

	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Fri Oct  2 16:35:47 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Fri, 2 Oct 2020 09:35:47 -0500
Subject: [R] summarize_all Function
In-Reply-To: <a169ffac-3c3a-0d4b-329d-5eff95271169@sapo.pt>
References: <000001d69818$5bd1ee10$1375ca30$.ref@sbcglobal.net>
 <000001d69818$5bd1ee10$1375ca30$@sbcglobal.net>
 <a169ffac-3c3a-0d4b-329d-5eff95271169@sapo.pt>
Message-ID: <000b01d698c9$51a2cac0$f4e86040$@sbcglobal.net>

Thanks Rui

-----Original Message-----
From: Rui Barradas <ruipbarradas at sapo.pt> 
Sent: Thursday, October 1, 2020 1:49 PM
To: reichmanj at sbcglobal.net; r-help at r-project.org
Subject: Re: [R] summarize_all Function

Hello,

Any of the two will do, the first is now preferred.


library(dplyr)

mtcars %>%
   summarise(across(everything(), sum))

mtcars %>%
   summarise_all(sum)   # no need for `funs()`


Hope this helps,

Rui Barradas

?s 18:29 de 01/10/20, Jeff Reichman escreveu:
> r-help Forum
> 
>   
> 
> I'm using the dplyr:: summarize_all(funs(sum)) function and am 
> receiving a warning message that the `funs()` is deprecated as of 
> dplyr 0.8.0. Ok what should I be using to summarize  all columns by sum?
> 
>   
> 
> Jeff
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Fri Oct  2 16:36:18 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Fri, 2 Oct 2020 09:36:18 -0500
Subject: [R] summarize_all Function
In-Reply-To: <CAHqSRuSHSHcdZnq2QP-2_fkSJkrJYAJSk=-HyHVZu0nC-5Kn8A@mail.gmail.com>
References: <000001d69818$5bd1ee10$1375ca30$.ref@sbcglobal.net>
 <000001d69818$5bd1ee10$1375ca30$@sbcglobal.net>
 <CAHqSRuSHSHcdZnq2QP-2_fkSJkrJYAJSk=-HyHVZu0nC-5Kn8A@mail.gmail.com>
Message-ID: <000c01d698c9$644091d0$2cc1b570$@sbcglobal.net>

Thanks Bill ? got it

 

From: Bill Dunlap <williamwdunlap at gmail.com> 
Sent: Thursday, October 1, 2020 1:56 PM
To: reichmanj at sbcglobal.net
Cc: r-help at r-project.org
Subject: Re: [R] summarize_all Function

 

The warning gives some suggestions.  E.g., replace funs(sum,prod) with list(sum=sum,prod=prod).

 

% R CMD Rscript -e 'library(dplyr,warn.conflicts=FALSE); data.frame(X=1:3,Y=c(11,13,17)) %>% summarize_all(funs(sum,prod))'
  X_sum Y_sum X_prod Y_prod
1     6    41      6   2431
Warning message:
`funs()` is deprecated as of dplyr 0.8.0.
Please use a list of either functions or lambdas:

  # Simple named list:
  list(mean = mean, median = median)

  # Auto named with `tibble::lst()`:
  tibble::lst(mean, median)

  # Using lambdas
  list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))
This warning is displayed once every 8 hours.
Call `lifecycle::last_warnings()` to see where this warning was generated.

% R CMD Rscript -e 'library(dplyr,warn.conflicts=FALSE); data.frame(X=1:3,Y=c(11,13,17)) %>% summarize_all(list(sum=sum,prod=prod))'
  X_sum Y_sum X_prod Y_prod
1     6    41      6   2431

 

On Thu, Oct 1, 2020 at 10:29 AM Jeff Reichman <reichmanj at sbcglobal.net <mailto:reichmanj at sbcglobal.net> > wrote:

r-help Forum



I'm using the dplyr:: summarize_all(funs(sum)) function and am receiving a
warning message that the `funs()` is deprecated as of dplyr 0.8.0. Ok what
should I be using to summarize  all columns by sum?



Jeff


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From cd@@ek m@iii@g oii posteo@de  Fri Oct  2 14:27:32 2020
From: cd@@ek m@iii@g oii posteo@de (cd@@ek m@iii@g oii posteo@de)
Date: Fri, 02 Oct 2020 14:27:32 +0200
Subject: [R] =?utf-8?q?What_is_the_threshold_for_=60useRaster=60_of_graph?=
 =?utf-8?b?aWNzOjppbWFnZSgpPw==?=
Message-ID: <1e5aeb11de454645ecfcc38f8d62f756@posteo.de>

 Hi R-help list

What is the threshold for the `useRaster` argument of graphics::image()
to decide whether a grid is "regular" or not (i.e. the usage of
useRaster=T is allowed or not). My
`dev.capabilities("rasterImage")$rasterImage` is "yes".

I could not find this information in the internet. I also could not find
the source code of the graphics::image() function (I would answer the
question by myself then). Where can I find the source code?

Thanks a lot for any help and kind regards,
Chris

packageDescription("graphics")
Package: graphics
Version: 4.0.2
Built: R 4.0.2; x86_64-pc-linux-gnu; 2020-06-22 08:33:40 UTC; unix

 
	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct  2 20:59:39 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 2 Oct 2020 11:59:39 -0700
Subject: [R] What is the threshold for `useRaster` of graphics::image()?
In-Reply-To: <1e5aeb11de454645ecfcc38f8d62f756@posteo.de>
References: <1e5aeb11de454645ecfcc38f8d62f756@posteo.de>
Message-ID: <CAGxFJbR1EYAp_1mJ+2PmAVNO4DoRXQyxUU4L3Z+WtOyL-bN=rA@mail.gmail.com>

Clearly you need to spend some more time studying basic docs on how R
works. R is open source: **all** code is available, though in different
locations and with different means to access it.

Typing:
> graphics::image
at the console returns

function (x, ...)
UseMethod("image")
<bytecode: 0x7f8d4ca1d448>
<environment: namespace:graphics>

This tells us that image() is an S3 method for the "image" generic (read
the necessary docs if you don't know what this means).

> methods("image")
[1] image.default
see '?methods' for accessing help and source code

This tells us that there is only one method with the packages I have loaded
in my session, image.default()

> image.default
now gives the code:

function (x = seq(0, 1, length.out = nrow(z)), y = seq(0, 1,
    length.out = ncol(z)), z, zlim = range(z[is.finite(z)]),
    xlim = range(x), ylim = range(y), col = hcl.colors(12, "YlOrRd",
        rev = TRUE), add = FALSE, xaxs = "i", yaxs = "i", xlab,
    ylab, breaks, oldstyle = FALSE, useRaster, ...)
{
## many lines of code
}

which includes a call to C code "C_image" for which you would have to look
elsewhere.
The R Internals doc that ships with R tells you how to find that. Or just
googling on "find C code in R" may give you more convenient options (e.g.
through the pryr package).

Cheers,

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 2, 2020 at 11:28 AM <cdanek at posteo.de> wrote:

>  Hi R-help list
>
> What is the threshold for the `useRaster` argument of graphics::image()
> to decide whether a grid is "regular" or not (i.e. the usage of
> useRaster=T is allowed or not). My
> `dev.capabilities("rasterImage")$rasterImage` is "yes".
>
> I could not find this information in the internet. I also could not find
> the source code of the graphics::image() function (I would answer the
> question by myself then). Where can I find the source code?
>
> Thanks a lot for any help and kind regards,
> Chris
>
> packageDescription("graphics")
> Package: graphics
> Version: 4.0.2
> Built: R 4.0.2; x86_64-pc-linux-gnu; 2020-06-22 08:33:40 UTC; unix
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @te|@no@bor|n| @end|ng |rom @@tr@zenec@@com  Fri Oct  2 09:41:25 2020
From: @te|@no@bor|n| @end|ng |rom @@tr@zenec@@com (Borini, Stefano)
Date: Fri, 2 Oct 2020 07:41:25 +0000
Subject: [R] Unable to compile with R CMD INSTALL on windows when sourcing
 from Rprofile
Message-ID: <5D43260A-1A4D-4941-A2F5-2ADD9EEB56F2@contoso.com>

Hello,

I am currently facing a rather unusual situation. I am running the following command on two windows 10 machines:

C:\\Program Files\\R\\R-3.6.3\\bin\\R.exe CMD INSTALL -l ".envs\\default\\lib" "C:\\Windows\\system32\\config\\systemprofile\\.rip\\cache\\repos\\cloud.r-project.org\\8a5edab282632443219e051e4ade2d1d5bbc671c781051bf1437897cbdfea0f1\\assertthat\\assertthat_0.2.1.tar.gz"

Nothing unusual. I just compile assertthat from targz.

However, I have the following statement in my .Rprofile. (NOTE: .Rprofile, NOT ~/.Rprofile)

print(getwd())
# >>> created by rip
enabled_env <- "default"
source(file.path(".envs", enabled_env, "init.R"))
# <<< created by rip

This init.R file exists and it's correctly sourced, and contains

print('Using environment default')
.libPaths(c('.envs/default/lib'))

The problem occurs on one windows machine, but not the other. On one windows machine I obtain the following, which seems to work (discussion of the differences after the paste):

[1] "C:/<omitted>/Work/my-r-library"
[1] Using environment default
processing 'C:\<omitted>\.rip\cache\repos\cloud.r-project.org\8a5edab282632443219e051e4ade2d1d5bbc671c781051bf1437897cbdfea0f1\assertthat\assertthat_0.2.1.tar.gz'
a file
* build_help_types=html
* DBG: 'R CMD INSTALL' now doing do_install()
* created lock directory 'C:/<omitted>/Work/my-r-library/.envs/default/lib/00LOCK-assertthat'
* installing *source* package 'assertthat' ...
** package 'assertthat' successfully unpacked and MD5 sums checked
** backing up earlier installation
** using staged installation
** R
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
converting help for package 'assertthat'
finding HTML links ... done
<omitted>
** testing if installed package keeps a record of temporary installation path
* DONE (assertthat)

As you can see, nothing unusual. The package is correctly compiled and deployed in the right place. However, on another windows machine, I obtain:

[1] "D:\tomcat-jenkins\workspace\checkout-base-dir\"
[1] "Using environment default"
powershell.exe : * installing *source* package 'assertthat' ...
At D:\tomcat-jenkins\workspace\checkout-base-dir at tmp\durable-37e772e4\powershellWrapper.ps1:3 char:1
+ & powershell -NoProfile -NonInteractive -ExecutionPolicy Bypass -Comm ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (* installing *s...assertthat' ...    :String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

** package 'assertthat' successfully unpacked and MD5 sums checked
** using staged installation
** R
** byte-compile and prepare package for lazy loading
[1] "C:/Windows/TEMP/RtmpGUTcDs/R.INSTALLeaf825ec54e2/assertthat" ############## <- here [b]
Error in file(filename, "r", encoding = encoding) :
  cannot open the connection
Calls: source -> file
In addition: Warning message:
In file(filename, "r", encoding = encoding) :
  cannot open file '.envs/default/init.R': No such file or directory
Execution halted
ERROR: lazy loading failed for package 'assertthat'
* removing 'D:/tomcat-jenkins/workspace/checkout-base-dir /.envs/default/lib/assertthat'


Discussion:

It seems that R CMD INSTALL spawns, on the second windows, a second R execution instance (seems confirmed in R sources in src/library/tools/R/install.R), however, in the first windows machine, this spawning seems not to happen (or the second R is spawned, but the .Rprofile is never sourced, because as you can see there's no printing of the cwd, see my Rprofile).

All of this is rather absurd, because if the execution fails with being unable to open init.R, it means that it's in the path of the .Rprofile (otherwise the source() statement would never be executed), which also means it should be able to find the path of the init.R because it's in the same directory (relatively speaking)

So the issue seems to happen because the second instance is spawned in the TEMP directory, and the Rprofile is either copied or somehow executed anyway, even if the cwd has changed to the TEMP directory

Do you have any clue of what's going on?

Thanks


--

Stefano Borini
Principal Analytical Tools Developer
AstraZeneca R&D BioPharmaceuticals | Data Science & AI | Early Biometrics & Statistical Innovation




________________________________


AstraZeneca UK Limited is a company incorporated in England and Wales with registered number:03674842 and its registered office at 1 Francis Crick Avenue, Cambridge Biomedical Campus, Cambridge, CB2 0AA.

This e-mail and its attachments are intended for the above named recipient only and may contain confidential and privileged information. If they have come to you in error, you must not copy or show them to anyone; instead, please reply to this e-mail, highlighting the error to the sender and then immediately delete the message. For information about how AstraZeneca UK Limited and its affiliates may process information, personal data and monitor communications, please see our privacy notice at www.astrazeneca.com<https://www.astrazeneca.com>

From herd_dog @end|ng |rom cox@net  Sat Oct  3 00:38:15 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Fri, 2 Oct 2020 15:38:15 -0700
Subject: [R] Lahman Baseball Data Using R DBI Package
Message-ID: <523DDD41433C4810A1C1C8D755A1A940@OWNERPC>

I?m trying to pull data from one table (batting) in the Lahman Baseball database.  Notice X2B for doubles and X3B for triples ? fourth and fifth from the right.  

The dbGetQuery function runs fine when I leave there two out but I get error messages (in red) when I include 2B/3B or X2B/X3B.

Can anyone give me some direction?

Thanks,
Philip Heinrich
***************************************************************************************************************************************************
tail(dbReadTable(Lahman,"batting"))

ID                       playerID      yearID    stint teamID team_ID lgID   G        G_batting   AB     R     H       X2B    X3B   HR   RBI   SB
107414 107414 yastrmi01      2019       1       SFN       2920      NL     107        NA          371   64  101      22       3     21     55    2
107416 107416 yelicch01      2019        1       MIL       2911      NL     130        NA          489 100  161      29       3     44    97   30
107419 107419 youngal01     2019       1       ARI        2896      NL       17        NA            25     1      1        0       0       0      0     0
107420 107420 zagunma01   2019        1      CHN       2901      NL      30        NA             36     2      9        3       0      0       5     0
107422 107422 zavalse01      2019        1      CHA       2900      AL        5        NA             12     1      1        0       0      0       0     0
107427 107427 zimmery01     2019        1      WAS      2925      NL      52        NA           171   20    44        9      0      6      27     0
107428 107428 zobribe01       2019        1      CHN      2901      NL      47        NA           150   24   39         5      0      1      17     0
107429 107429 zuninmi01       2019        1      TBA       2922      AL      90        NA           266    30  44       10      1      9      32     0


Hack11Batting <- dbGetQuery(Lahman,"SELECT playerID,yearID,AB,R,H,2B,3B,HR,
                            RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM batting
                            WHERE yearID = 2018 AND AB >99")
Error: unrecognized token: "2B"

 Hack11Batting <- dbGetQuery(Lahman,"SELECT playerID,yearID,AB,R,H,X2B,X3B,HR,
                            RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM batting
                            WHERE yearID = 2018 AND AB >99")
Error: no such column: X2B

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Sat Oct  3 00:54:15 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 2 Oct 2020 15:54:15 -0700
Subject: [R] Lahman Baseball Data Using R DBI Package
In-Reply-To: <523DDD41433C4810A1C1C8D755A1A940@OWNERPC>
References: <523DDD41433C4810A1C1C8D755A1A940@OWNERPC>
Message-ID: <CAHqSRuR-NmoGaEW9YavHxVNitZmezK_rcnwpRzuoHik657wtVQ@mail.gmail.com>

Have you tried putting double quotes around 2B and 3B:  "...2B, 3B, ..." ->
"...\"2B\",\"3B\",..."?

-Bill

On Fri, Oct 2, 2020 at 3:49 PM Philip <herd_dog at cox.net> wrote:

> I?m trying to pull data from one table (batting) in the Lahman Baseball
> database.  Notice X2B for doubles and X3B for triples ? fourth and fifth
> from the right.
>
> The dbGetQuery function runs fine when I leave there two out but I get
> error messages (in red) when I include 2B/3B or X2B/X3B.
>
> Can anyone give me some direction?
>
> Thanks,
> Philip Heinrich
>
> ***************************************************************************************************************************************************
> tail(dbReadTable(Lahman,"batting"))
>
> ID                       playerID      yearID    stint teamID team_ID
> lgID   G        G_batting   AB     R     H       X2B    X3B   HR   RBI   SB
> 107414 107414 yastrmi01      2019       1       SFN       2920      NL
>  107        NA          371   64  101      22       3     21     55    2
> 107416 107416 yelicch01      2019        1       MIL       2911      NL
>  130        NA          489 100  161      29       3     44    97   30
> 107419 107419 youngal01     2019       1       ARI        2896      NL
>    17        NA            25     1      1        0       0       0      0
>    0
> 107420 107420 zagunma01   2019        1      CHN       2901      NL
> 30        NA             36     2      9        3       0      0       5
>  0
> 107422 107422 zavalse01      2019        1      CHA       2900      AL
>     5        NA             12     1      1        0       0      0
>  0     0
> 107427 107427 zimmery01     2019        1      WAS      2925      NL
> 52        NA           171   20    44        9      0      6      27     0
> 107428 107428 zobribe01       2019        1      CHN      2901      NL
>   47        NA           150   24   39         5      0      1      17     0
> 107429 107429 zuninmi01       2019        1      TBA       2922      AL
>   90        NA           266    30  44       10      1      9      32     0
>
>
> Hack11Batting <- dbGetQuery(Lahman,"SELECT playerID,yearID,AB,R,H,2B,3B,HR,
>                             RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM batting
>                             WHERE yearID = 2018 AND AB >99")
> Error: unrecognized token: "2B"
>
>  Hack11Batting <- dbGetQuery(Lahman,"SELECT
> playerID,yearID,AB,R,H,X2B,X3B,HR,
>                             RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM batting
>                             WHERE yearID = 2018 AND AB >99")
> Error: no such column: X2B
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sat Oct  3 01:58:08 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 3 Oct 2020 09:58:08 +1000
Subject: [R] help in R code
In-Reply-To: <1372789609.1054642.1601639858981@mail.yahoo.com>
References: <1372789609.1054642.1601639858981.ref@mail.yahoo.com>
 <1372789609.1054642.1601639858981@mail.yahoo.com>
Message-ID: <CA+8X3fV9DqFHLO1Eck1Wr-TbZbi95FXnCGxb=-WyNFV3H5Cm3Q@mail.gmail.com>

Hi Faheem,
This is a complete guess, but the hours of the day may range from 0 to
23 not 1 to 24. So you may be asking for an out of range hour.

Jim

On Fri, Oct 2, 2020 at 10:00 PM Faheem Jan via R-help
<r-help at r-project.org> wrote:
>
>
> Hello , i am working in the functional time series using the multivariate time series data(hourly time series data). Sir  i am using FAR model more than one order for which no statistical package is available in R, so for this i convert my data into functional form and obtained the functional principle component and from those FPCA i extract their corresponding  FPCscores. Know i use the VAR model on those FPCscores for the forecasting of each 24 hours through the VAR model, but the VAR give me the forecasted value for all 23hours  when i put phat=23, but whenever i put phat=24 i.e want to predict each 24 hours its give the results in the form of NA. the code is given below
> fdata<- function(mat){  nb = 27 # number of basis functions for the data  fbf = create.fourier.basis(rangeval=c(0,1), nbasis=nb) # basis for data  args=seq(0,1,length=24)  fdata1=Data2fd(args,y=t(mat),fbf) # functions generated from discretized y  return(fdata1)}prediction.ffpe = function(fdata1){  n = ncol(fdata1$coef)  D = nrow(fdata1$coef)  #center the data  #mu = mean.fd(fdata1)  data = center.fd(fdata1)  #ffpe = fFPE(fdata1, Pmax=10)  #p.hat = ffpe[2] #order of the model  d.hat=23  p.hat=6  #fPCA  fpca = pca.fd(data,nharm=D, centerfns=TRUE)  scores = fpca$scores[,0:d.hat]  # to avoid warnings from vars predict function below  colnames(scores) <- as.character(seq(1:d.hat))  VAR.pre= predict(VAR(scores, p.hat), n.ahead=1, type="const")$fcst  }
> kindly guide me that how can i solve out my problem or what error i doing. THANKS
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Sat Oct  3 04:34:02 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 2 Oct 2020 19:34:02 -0700
Subject: [R] Lahman Baseball Data Using R DBI Package
In-Reply-To: <C44F824A74414353A579A0B468883116@OWNERPC>
References: <523DDD41433C4810A1C1C8D755A1A940@OWNERPC>
 <CAHqSRuR-NmoGaEW9YavHxVNitZmezK_rcnwpRzuoHik657wtVQ@mail.gmail.com>
 <C44F824A74414353A579A0B468883116@OWNERPC>
Message-ID: <CAHqSRuRoLcUw0mOJ_aDud8rivbdCvxtOreRjdp-N8AJ0nnv8ow@mail.gmail.com>

The double quotes are required by SQL if a name is not of the form
letter-followed-by-any-number-of-letters-or-numbers or if the name is a SQL
keyword like 'where' or 'select'.  If you are doing this from a function,
you may as well quote all the names.

-Bill

On Fri, Oct 2, 2020 at 6:18 PM Philip <herd_dog at cox.net> wrote:

> The \?2B\? worked.  Have no idea why.  Can you point me somewhere that can
> explain this to me.
>
> Thanks,
> Philip
>
> *From:* Bill Dunlap
> *Sent:* Friday, October 2, 2020 3:54 PM
> *To:* Philip
> *Cc:* r-help
> *Subject:* Re: [R] Lahman Baseball Data Using R DBI Package
>
> Have you tried putting double quotes around 2B and 3B:  "...2B, 3B, ..."
> -> "...\"2B\",\"3B\",..."?
>
> -Bill
>
> On Fri, Oct 2, 2020 at 3:49 PM Philip <herd_dog at cox.net> wrote:
>
>> I?m trying to pull data from one table (batting) in the Lahman Baseball
>> database.  Notice X2B for doubles and X3B for triples ? fourth and fifth
>> from the right.
>>
>> The dbGetQuery function runs fine when I leave there two out but I get
>> error messages (in red) when I include 2B/3B or X2B/X3B.
>>
>> Can anyone give me some direction?
>>
>> Thanks,
>> Philip Heinrich
>>
>> ***************************************************************************************************************************************************
>> tail(dbReadTable(Lahman,"batting"))
>>
>> ID                       playerID      yearID    stint teamID team_ID
>> lgID   G        G_batting   AB     R     H       X2B    X3B   HR   RBI   SB
>> 107414 107414 yastrmi01      2019       1       SFN       2920
>> NL     107        NA          371   64  101      22       3     21
>> 55    2
>> 107416 107416 yelicch01      2019        1       MIL       2911
>> NL     130        NA          489 100  161      29       3     44    97   30
>> 107419 107419 youngal01     2019       1       ARI        2896
>> NL       17        NA            25     1      1        0       0
>> 0      0     0
>> 107420 107420 zagunma01   2019        1      CHN       2901      NL
>> 30        NA             36     2      9        3       0      0
>> 5     0
>> 107422 107422 zavalse01      2019        1      CHA       2900
>> AL        5        NA             12     1      1        0       0
>> 0       0     0
>> 107427 107427 zimmery01     2019        1      WAS      2925      NL
>> 52        NA           171   20    44        9      0      6      27     0
>> 107428 107428 zobribe01       2019        1      CHN      2901
>> NL      47        NA           150   24   39         5      0      1
>> 17     0
>> 107429 107429 zuninmi01       2019        1      TBA       2922
>> AL      90        NA           266    30  44       10      1      9
>> 32     0
>>
>>
>> Hack11Batting <- dbGetQuery(Lahman,"SELECT
>> playerID,yearID,AB,R,H,2B,3B,HR,
>>                             RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM
>> batting
>>                             WHERE yearID = 2018 AND AB >99")
>> Error: unrecognized token: "2B"
>>
>> Hack11Batting <- dbGetQuery(Lahman,"SELECT
>> playerID,yearID,AB,R,H,X2B,X3B,HR,
>>                             RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM
>> batting
>>                             WHERE yearID = 2018 AND AB >99")
>> Error: no such column: X2B
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From |@heemj@n93 @end|ng |rom y@hoo@com  Sun Oct  4 18:25:12 2020
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Sun, 4 Oct 2020 16:25:12 +0000 (UTC)
Subject: [R] Help in R code
References: <1382336013.1600875.1601828712450.ref@mail.yahoo.com>
Message-ID: <1382336013.1600875.1601828712450@mail.yahoo.com>

Hello , i am working in the functional time series using themultivariate time series data(hourly time series data). Sir? i am usingFAR model more than one order for which no statistical package is available inR, so for this i convert my data into functional form and obtained thefunctional principle component and from those FPCA i extract theircorresponding? FPCscores. Know i use the VAR model on those FPCscores forthe forecasting of each 24 hours through the VAR model, but the VAR give me theforecasted value for all 23hours? when i put phat=23, but whenever i putphat=24 i.e want to predict each 24 hours its give the results in the form ofNA. the code is given below

?

fdata<- function(mat){

? nb = 27 # number of basis functions for the data

? fbf = create.fourier.basis(rangeval=c(0,1), nbasis=nb) #basis for data

? args=seq(0,1,length=24)

? fdata1=Data2fd(args,y=t(mat),fbf) # functions generatedfrom discretized y

? return(fdata1)

}

prediction.ffpe = function(fdata1){

? n = ncol(fdata1$coef)

? D = nrow(fdata1$coef)

? #center the data

? #mu = mean.fd(fdata1)

? data = center.fd(fdata1)

? #ffpe = fFPE(fdata1, Pmax=10)

? #p.hat = ffpe[2] #order of the model

? d.hat=23

? p.hat=6

? #fPCA

? fpca = pca.fd(data,nharm=D, centerfns=TRUE)

? scores = fpca$scores[,0:d.hat]

? # to avoid warnings from vars predict function below

? colnames(scores) <- as.character(seq(1:d.hat))

? VAR.pre= predict(VAR(scores, p.hat), n.ahead=1,type="const")$fcst

??

}

?

kindly guide me that how can i solve out my problem or whaterror i doing. THANKS


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Oct  4 19:30:12 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 4 Oct 2020 18:30:12 +0100
Subject: [R] Help in R code
In-Reply-To: <1382336013.1600875.1601828712450@mail.yahoo.com>
References: <1382336013.1600875.1601828712450.ref@mail.yahoo.com>
 <1382336013.1600875.1601828712450@mail.yahoo.com>
Message-ID: <447eb36d-573f-4f05-4ca2-383ab39c397c@sapo.pt>

Hello,

This is cross-posted, you have posted the same question in SO[1].
Cross-posting is not well seen, post the question in one place and 
please wait a few days for an answer before posting here.

[1] 
https://stackoverflow.com/questions/64197235/forecasting-of-multivariate-data-through-vector-autoregression-model

Hope this helps,

Rui Barradas

?s 17:25 de 04/10/20, Faheem Jan via R-help escreveu:
> Hello , i am working in the functional time series using themultivariate time series data(hourly time series data). Sir? i am usingFAR model more than one order for which no statistical package is available inR, so for this i convert my data into functional form and obtained thefunctional principle component and from those FPCA i extract theircorresponding? FPCscores. Know i use the VAR model on those FPCscores forthe forecasting of each 24 hours through the VAR model, but the VAR give me theforecasted value for all 23hours? when i put phat=23, but whenever i putphat=24 i.e want to predict each 24 hours its give the results in the form ofNA. the code is given below
> 
>   
> 
> fdata<- function(mat){
> 
>  ? nb = 27 # number of basis functions for the data
> 
>  ? fbf = create.fourier.basis(rangeval=c(0,1), nbasis=nb) #basis for data
> 
>  ? args=seq(0,1,length=24)
> 
>  ? fdata1=Data2fd(args,y=t(mat),fbf) # functions generatedfrom discretized y
> 
>  ? return(fdata1)
> 
> }
> 
> prediction.ffpe = function(fdata1){
> 
>  ? n = ncol(fdata1$coef)
> 
>  ? D = nrow(fdata1$coef)
> 
>  ? #center the data
> 
>  ? #mu = mean.fd(fdata1)
> 
>  ? data = center.fd(fdata1)
> 
>  ? #ffpe = fFPE(fdata1, Pmax=10)
> 
>  ? #p.hat = ffpe[2] #order of the model
> 
>  ? d.hat=23
> 
>  ? p.hat=6
> 
>  ? #fPCA
> 
>  ? fpca = pca.fd(data,nharm=D, centerfns=TRUE)
> 
>  ? scores = fpca$scores[,0:d.hat]
> 
>  ? # to avoid warnings from vars predict function below
> 
>  ? colnames(scores) <- as.character(seq(1:d.hat))
> 
>  ? VAR.pre= predict(VAR(scores, p.hat), n.ahead=1,type="const")$fcst
> 
>    
> 
> }
> 
>   
> 
> kindly guide me that how can i solve out my problem or whaterror i doing. THANKS
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From vodvo@ @end|ng |rom zoho@com  Mon Oct  5 00:47:19 2020
From: vodvo@ @end|ng |rom zoho@com (vod vos)
Date: Sun, 04 Oct 2020 15:47:19 -0700
Subject: [R] how to get a numeric vector?
Message-ID: <174f5cc4615.118e08d5f41167.4318777779995958885@zoho.com>

Hi,

a <- c(1, 4)
b <- c(5, 8)

a:b

[1] 1 2 3 4 5
Warning messages:
1: In a:b : numerical expression has 2 elements: only the first used
2: In a:b : numerical expression has 2 elements: only the first used

how to get:

c(1:5, 4:8)

Thanks.


From j|ox @end|ng |rom mcm@@ter@c@  Mon Oct  5 00:59:51 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Sun, 4 Oct 2020 18:59:51 -0400
Subject: [R] how to get a numeric vector?
In-Reply-To: <25229_1601851661_094MlZII012760_174f5cc4615.118e08d5f41167.4318777779995958885@zoho.com>
References: <25229_1601851661_094MlZII012760_174f5cc4615.118e08d5f41167.4318777779995958885@zoho.com>
Message-ID: <66a36517-d139-a931-e124-f30a52a519d0@mcmaster.ca>

Dear vod vos,

On 2020-10-04 6:47 p.m., vod vos via R-help wrote:
> Hi,
> 
> a <- c(1, 4)
> b <- c(5, 8)
> 
> a:b
> 
> [1] 1 2 3 4 5
> Warning messages:
> 1: In a:b : numerical expression has 2 elements: only the first used
> 2: In a:b : numerical expression has 2 elements: only the first used
> 
> how to get:
> 
> c(1:5, 4:8)

The simplest way is c(1:5, 4:8) but I don't suppose that's what you 
really want. Perhaps the following is what you have in mind:

 > unlist(mapply(':', c(1, 4), c(5, 8), SIMPLIFY=FALSE))
  [1] 1 2 3 4 5 4 5 6 7 8

In your case, but not more generally,

 > as.vector(mapply(':', c(1, 4), c(5, 8)))
  [1] 1 2 3 4 5 4 5 6 7 8

also works.

I hope this helps,
  John

John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/


> 
> Thanks.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m|r@@@|@m @end|ng |rom ue|@||  Mon Oct  5 00:09:15 2020
From: m|r@@@|@m @end|ng |rom ue|@|| (Mir Md. Abdus Salam)
Date: Sun, 4 Oct 2020 22:09:15 +0000
Subject: [R] data error problem
Message-ID: <HE1PR0102MB3067DE52FB651EA579F934B9870F0@HE1PR0102MB3067.eurprd01.prod.exchangelabs.com>

Dear all,

I need urgent help. I am a new user of R. I got the following error

anovamine<-read.table("spike cu.txt",header=TRUE)

Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :
line 1 did not have 9 elements

Can anybody please help me to solve this problem why I am getting such kind of error?

Thanks


	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Mon Oct  5 01:50:43 2020
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sun, 4 Oct 2020 19:50:43 -0400
Subject: [R] how to get a numeric vector?
In-Reply-To: <174f5cc4615.118e08d5f41167.4318777779995958885@zoho.com>
References: <174f5cc4615.118e08d5f41167.4318777779995958885@zoho.com>
Message-ID: <026101d69aa9$2c31f3b0$8495db10$@verizon.net>

Always hard to tell if THIS is a homework project. As with most things in R,
if you can not find at least a dozen ways to do it, it is not worth doing.

The question (way below) was how to take two vectors of length two and make
a longer results based on using the ":" operator to generate a range between
the first element of each array and then between the second elements and
return the combined results as a vector.

Using simple loops on the length of the two vectors you want combined this
way can be done either in-line or by making a simple function.

Something like this:

results = c()

for (index in 1:length(a)) {
  results <- c(results, a[index]:b[index])
}

The above generalizes to any size vectors of the same length.

There are probably lots of ways to do this using functional programming
(after loading the tidyverse or just purrr)  but here is one:

unlist( map2(a, b, `:`) )

Or more explicitly in an extended length-4 vector example:

Library(purr)
alpha <- c(1, 4, 10, 20)
beta  <- c(5, 8, 19, 27)
unlist(map2(.x=alpha, 
            .y=beta, 
            .f=`:`))

Result:

[1]  1  2  3  4  5  4  5  6  7  8 10 11 12 13 14 15 16 17 18 19 20 21 22 23
24 25 26 27

Be warned the `:` operator happily works with descending or negative numbers
as well as  numbers with decimal points. You do NOT want to call the above
uses of `:`  unless you have no NA or NaN or Inf  in your original vectors.






-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of vod vos via R-help
Sent: Sunday, October 4, 2020 6:47 PM
To: r-help <r-help at r-project.org>
Subject: [R] how to get a numeric vector?

Hi,

a <- c(1, 4)
b <- c(5, 8)

a:b

[1] 1 2 3 4 5
Warning messages:
1: In a:b : numerical expression has 2 elements: only the first used
2: In a:b : numerical expression has 2 elements: only the first used

how to get:

c(1:5, 4:8)

Thanks.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From cem@||on @end|ng |rom uch|c@go@edu  Mon Oct  5 03:04:28 2020
From: cem@||on @end|ng |rom uch|c@go@edu (Casey Mallon)
Date: Mon, 5 Oct 2020 01:04:28 +0000
Subject: [R] Simultaneous Equation Model with Dichotomous Dependent Variables
Message-ID: <BN6PR11MB3923E8C1CA8779117BAF1087B60C0@BN6PR11MB3923.namprd11.prod.outlook.com>

Hello everyone!

I am currently working with a time series panel data set measuring six dependent variables:
4 of which are binary and 2 of which are count data.

I am interested in constructing a model to measure if the dependent variables influence one another.

For example: DV1~ DV2 + IV1+IV2+ Controls and DV2~ DV1 + IV1+ IV2+ Controls
(where IV stands for independent variable, not instrumental).

My current code looks like:
glm(DV1~ IV1+ Control1+ Control2+ DV4+ DV5+ DV6, family="binomial", data= data)
which I repeat for each of the 6 DVs.


I realize that I need to run a series of simultaneous equation models, but I am not having much luck figuring out how to run an SEM with binary data in R. The zelig package used to have a bivariate logit command, but zelig does not work with the most current version of R. Additionally, I would run into issues later on using that command since 2 of my variables are not binary.

Any ideas? Thanks for your help!

Casey

---

Ph.D student, Political Science

University of Chicago

	[[alternative HTML version deleted]]


From m@@hr@ng@ @end|ng |rom y@hoo@com  Mon Oct  5 09:14:08 2020
From: m@@hr@ng@ @end|ng |rom y@hoo@com (Mohammad Tanvir Ahamed)
Date: Mon, 5 Oct 2020 07:14:08 +0000 (UTC)
Subject: [R] data error problem
In-Reply-To: <HE1PR0102MB3067DE52FB651EA579F934B9870F0@HE1PR0102MB3067.eurprd01.prod.exchangelabs.com>
References: <HE1PR0102MB3067DE52FB651EA579F934B9870F0@HE1PR0102MB3067.eurprd01.prod.exchangelabs.com>
Message-ID: <2140964770.1942324.1601882048161@mail.yahoo.com>

Hi,?In your data file, the first row does not have an equal number of column like the rest of the row.Check your data file. Specially 1st row.??
Regards.............Tanvir Ahamed    Stockholm, Sweden     |  mashranga at yahoo.com  

    On Monday, 5 October 2020, 08:11:48 am GMT+2, Mir Md. Abdus Salam <mir.salam at uef.fi> wrote:  
 
 Dear all,

I need urgent help. I am a new user of R. I got the following error

anovamine<-read.table("spike cu.txt",header=TRUE)

Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,? :
line 1 did not have 9 elements

Can anybody please help me to solve this problem why I am getting such kind of error?

Thanks


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From m@@hr@ng@ @end|ng |rom y@hoo@com  Mon Oct  5 09:45:32 2020
From: m@@hr@ng@ @end|ng |rom y@hoo@com (Mohammad Tanvir Ahamed)
Date: Mon, 5 Oct 2020 07:45:32 +0000 (UTC)
Subject: [R] how to get a numeric vector?
In-Reply-To: <174f5cc4615.118e08d5f41167.4318777779995958885@zoho.com>
References: <174f5cc4615.118e08d5f41167.4318777779995958885@zoho.com>
Message-ID: <570178310.1948231.1601883932078@mail.yahoo.com>

Hi,?
You can try this.?

Example: 1
a <- c(1, 4)
b <- c(5, 8)
unlist(as.vector(mapply(seq,a,b)))
> [1]??1 2 3 4 5 4 5 6 7 8


a <- c(1, 4, 2)
b <- c(5, 8, 10)
unlist(as.vector(mapply(seq,a,b)))
>? [1]? 1? 2? 3? 4? 5? 4? 5? 6? 7? 8? 2? 3? 4? 5? 6? 7? 8? 9 10


Regards.............
Tanvir Ahamed 
Stockholm, Sweden???? |??mashranga at yahoo.com 






On Monday, 5 October 2020, 12:47:52 am GMT+2, vod vos via R-help <r-help at r-project.org> wrote: 





Hi,

a <- c(1, 4)
b <- c(5, 8)

a:b

[1] 1 2 3 4 5
Warning messages:
1: In a:b : numerical expression has 2 elements: only the first used
2: In a:b : numerical expression has 2 elements: only the first used

how to get:

c(1:5, 4:8)

Thanks.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Mon Oct  5 09:56:56 2020
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Mon, 5 Oct 2020 15:56:56 +0800
Subject: [R] unable to access index for repository...
Message-ID: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>

I had to install/use an older version of (R-3.0.3) for a reason. While 
installing a package from CRAN (either in RStudio or R), I received the 
following warning message saying unable to access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0. See message below. In 
this case, I tried to install "aod". The install nevertheless went 
through, as confirmed by the library statement (I did not try to use 
it). Any idea? Thank you.

=====

Warning: unable to access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to 
access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0 > 
install.packages("aod") Warning in install.packages : unable to access 
index for repository http://cran.rstudio.com/bin/windows/contrib/3.0 
Warning in install.packages : unable to access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is 
available as a source package but not as a binary Warning in 
install.packages : package ?aod? is not available (for R version 3.0.3) 
 > library(aod)


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Oct  5 10:12:04 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 5 Oct 2020 10:12:04 +0200
Subject: [R] unable to access index for repository...
In-Reply-To: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
Message-ID: <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>

From

../ReadMe
in the mentioned web resource:

"Packages for R >= 1.7.0 and R < 3.2.0 are available from
https://cran-archive.r-project.org/bin/windows/contrib/"

We do not hold binaries of several year old versions of R on CRAN.

Note that R 3.0.0 is 7 years old. You shoudl realy consider to update to 
4.0.2.

Best,
Uwe Ligges




On 05.10.2020 09:56, Steven Yen wrote:
> I had to install/use an older version of (R-3.0.3) for a reason. While
> installing a package from CRAN (either in RStudio or R), I received the
> following warning message saying unable to access index for repository
> http://cran.rstudio.com/bin/windows/contrib/3.0. See message below. In
> this case, I tried to install "aod". The install nevertheless went
> through, as confirmed by the library statement (I did not try to use
> it). Any idea? Thank you.
> 
> =====
> 
> Warning: unable to access index for repository
> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
> access index for repository
> http://cran.rstudio.com/bin/windows/contrib/3.0 >
> install.packages("aod") Warning in install.packages : unable to access
> index for repository http://cran.rstudio.com/bin/windows/contrib/3.0
> Warning in install.packages : unable to access index for repository
> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
> available as a source package but not as a binary Warning in
> install.packages : package ?aod? is not available (for R version 3.0.3)
>   > library(aod)
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From drj|m|emon @end|ng |rom gm@||@com  Mon Oct  5 10:28:22 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 5 Oct 2020 19:28:22 +1100
Subject: [R] data error problem
In-Reply-To: <2140964770.1942324.1601882048161@mail.yahoo.com>
References: <HE1PR0102MB3067DE52FB651EA579F934B9870F0@HE1PR0102MB3067.eurprd01.prod.exchangelabs.com>
 <2140964770.1942324.1601882048161@mail.yahoo.com>
Message-ID: <CA+8X3fWBaYgLa_ikHM2M1Z1QiwXcg4Mp56B+nDjbOJuVJAQKjA@mail.gmail.com>

Hi Mir,
Without knowing what the data looks like, this is only a guess.
read.table() expects a white space delimiter and if you have a space
in one of your column names it will consider it as two names instead
of one. How many columns do you expect?

Jim

On Mon, Oct 5, 2020 at 6:14 PM Mohammad Tanvir Ahamed via R-help
<r-help at r-project.org> wrote:
>
> Hi, In your data file, the first row does not have an equal number of column like the rest of the row.Check your data file. Specially 1st row.
> Regards.............Tanvir Ahamed    Stockholm, Sweden     |  mashranga at yahoo.com
>
>     On Monday, 5 October 2020, 08:11:48 am GMT+2, Mir Md. Abdus Salam <mir.salam at uef.fi> wrote:
>
>  Dear all,
>
> I need urgent help. I am a new user of R. I got the following error
>
> anovamine<-read.table("spike cu.txt",header=TRUE)
>
> Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :
> line 1 did not have 9 elements
>
> Can anybody please help me to solve this problem why I am getting such kind of error?
>
> Thanks
>
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Mon Oct  5 10:47:13 2020
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Mon, 5 Oct 2020 16:47:13 +0800
Subject: [R] unable to access index for repository...
In-Reply-To: <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
Message-ID: <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>

Thanks for the help. I do update to the latest R-4.0.2. As I said, for 
reasons that's hard to explain, some of my tasks are better handled with 
an older version of R, in this case R-3.0.3. Please just help me install 
packages successfully with this older version of R.

I ran the following line but obviously was not getting it across.

=====

> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/')  Warning in install.packages : unable to access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in 
install.packages : unable to access index for repository 
https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0 
Warning in install.packages : package ?aod? is not available (for R 
version 3.0.3)

On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
> From
>
> ../ReadMe
> in the mentioned web resource:
>
> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
> https://cran-archive.r-project.org/bin/windows/contrib/"
>
> We do not hold binaries of several year old versions of R on CRAN.
>
> Note that R 3.0.0 is 7 years old. You shoudl realy consider to update 
> to 4.0.2.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 05.10.2020 09:56, Steven Yen wrote:
>> I had to install/use an older version of (R-3.0.3) for a reason. While
>> installing a package from CRAN (either in RStudio or R), I received the
>> following warning message saying unable to access index for repository
>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message below. In
>> this case, I tried to install "aod". The install nevertheless went
>> through, as confirmed by the library statement (I did not try to use
>> it). Any idea? Thank you.
>>
>> =====
>>
>> Warning: unable to access index for repository
>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
>> access index for repository
>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>> install.packages("aod") Warning in install.packages : unable to access
>> index for repository http://cran.rstudio.com/bin/windows/contrib/3.0
>> Warning in install.packages : unable to access index for repository
>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>> available as a source package but not as a binary Warning in
>> install.packages : package ?aod? is not available (for R version 3.0.3)
>> ? > library(aod)
>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Oct  5 10:57:49 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 5 Oct 2020 10:57:49 +0200
Subject: [R] how to get a numeric vector?
In-Reply-To: <026101d69aa9$2c31f3b0$8495db10$@verizon.net>
References: <174f5cc4615.118e08d5f41167.4318777779995958885@zoho.com>
 <026101d69aa9$2c31f3b0$8495db10$@verizon.net>
Message-ID: <24442.57357.70461.717756@stat.math.ethz.ch>

>>>>> Avi Gross via R-help 
>>>>>     on Sun, 4 Oct 2020 19:50:43 -0400 writes:

    > Always hard to tell if THIS is a homework project. As with
    > most things in R, if you can not find at least a dozen
    > ways to do it, it is not worth doing.

    > The question (way below) was how to take two vectors of
    > length two and make a longer results based on using the
    > ":" operator to generate a range between the first element
    > of each array and then between the second elements and
    > return the combined results as a vector.

    > Using simple loops on the length of the two vectors you
    > want combined this way can be done either in-line or by
    > making a simple function.

    > Something like this:

    > results = c()

    > for (index in 1:length(a)) {
    >   results <- c(results, a[index]:b[index])
    > }

    > The above generalizes to any size vectors of the same length.

    > There are probably lots of ways to do this using functional programming
    > (after loading the tidyverse or just purrr)  

Well, no (to your "(....)") !

Functional programming is part of base R; no need to install any
tidy or untidy package : 

  a <- c(1, 4)
  b <- c(5, 8)

  unlist(  Map(`:`, a,b)  )

works perfectly.

... as does the also nice and simple (base R)
solution that  Tanvir Ahamed  already posted :

  unlist(as.vector(mapply(seq,a,b)))


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Oct  5 10:58:10 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 5 Oct 2020 10:58:10 +0200
Subject: [R] unable to access index for repository...
In-Reply-To: <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
Message-ID: <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>

Then you'd rather need

install.packages("aod",repos='https://cran-archive.r-project.org')

or use the contrib.url argument.

Best,
Uwe Ligges


On 05.10.2020 10:47, Steven Yen wrote:
> Thanks for the help. I do update to the latest R-4.0.2. As I said, for 
> reasons that's hard to explain, some of my tasks are better handled with 
> an older version of R, in this case R-3.0.3. Please just help me install 
> packages successfully with this older version of R.
> 
> I ran the following line but obviously was not getting it across.
> 
> =====
> 
>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/') Warning in 
> install.packages : unable to access index for repository 
> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in 
> install.packages : unable to access index for repository 
> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0 
> Warning in install.packages : package ?aod? is not available (for R 
> version 3.0.3)
> 
> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>> From
>>
>> ../ReadMe
>> in the mentioned web resource:
>>
>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>
>> We do not hold binaries of several year old versions of R on CRAN.
>>
>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to update 
>> to 4.0.2.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>
>> On 05.10.2020 09:56, Steven Yen wrote:
>>> I had to install/use an older version of (R-3.0.3) for a reason. While
>>> installing a package from CRAN (either in RStudio or R), I received the
>>> following warning message saying unable to access index for repository
>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message below. In
>>> this case, I tried to install "aod". The install nevertheless went
>>> through, as confirmed by the library statement (I did not try to use
>>> it). Any idea? Thank you.
>>>
>>> =====
>>>
>>> Warning: unable to access index for repository
>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
>>> access index for repository
>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>> install.packages("aod") Warning in install.packages : unable to access
>>> index for repository http://cran.rstudio.com/bin/windows/contrib/3.0
>>> Warning in install.packages : unable to access index for repository
>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>> available as a source package but not as a binary Warning in
>>> install.packages : package ?aod? is not available (for R version 3.0.3)
>>> ? > library(aod)
>>>
>>>
>>> ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>


From @tyen @end|ng |rom ntu@edu@tw  Mon Oct  5 11:10:24 2020
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Mon, 5 Oct 2020 17:10:24 +0800
Subject: [R] unable to access index for repository...
In-Reply-To: <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
Message-ID: <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>

Thanks. I did as suggested but still received a warning, though the 
installation went through. Anything I could do to install without the 
warning message.

What is the contrib.url argument?

 > install.packages("aod",repos='https://cran-archive.r-project.org')
Warning in install.packages :
 ? unable to access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0
trying URL 
'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
Content type 'application/zip' length 225712 bytes (220 Kb)
opened URL
downloaded 220 Kb

package ?aod? successfully unpacked and MD5 sums checked

The downloaded binary packages are in
C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
 >

On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
> Then you'd rather need
>
> install.packages("aod",repos='https://cran-archive.r-project.org')
>
> or use the contrib.url argument.
>
> Best,
> Uwe Ligges
>
>
> On 05.10.2020 10:47, Steven Yen wrote:
>> Thanks for the help. I do update to the latest R-4.0.2. As I said, 
>> for reasons that's hard to explain, some of my tasks are better 
>> handled with an older version of R, in this case R-3.0.3. Please just 
>> help me install packages successfully with this older version of R.
>>
>> I ran the following line but obviously was not getting it across.
>>
>> =====
>>
>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/') 
>>> Warning in 
>> install.packages : unable to access index for repository 
>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in 
>> install.packages : unable to access index for repository 
>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0 
>> Warning in install.packages : package ?aod? is not available (for R 
>> version 3.0.3)
>>
>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>> From
>>>
>>> ../ReadMe
>>> in the mentioned web resource:
>>>
>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>
>>> We do not hold binaries of several year old versions of R on CRAN.
>>>
>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to 
>>> update to 4.0.2.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>
>>>
>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>> I had to install/use an older version of (R-3.0.3) for a reason. While
>>>> installing a package from CRAN (either in RStudio or R), I received 
>>>> the
>>>> following warning message saying unable to access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message below. In
>>>> this case, I tried to install "aod". The install nevertheless went
>>>> through, as confirmed by the library statement (I did not try to use
>>>> it). Any idea? Thank you.
>>>>
>>>> =====
>>>>
>>>> Warning: unable to access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
>>>> access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>> install.packages("aod") Warning in install.packages : unable to access
>>>> index for repository http://cran.rstudio.com/bin/windows/contrib/3.0
>>>> Warning in install.packages : unable to access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>>> available as a source package but not as a binary Warning in
>>>> install.packages : package ?aod? is not available (for R version 
>>>> 3.0.3)
>>>> ? > library(aod)
>>>>
>>>>
>>>> ????[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide 
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>


From pd@me@ @end|ng |rom cb@@dk  Mon Oct  5 13:20:54 2020
From: pd@me@ @end|ng |rom cb@@dk (Peter Dalgaard)
Date: Mon, 5 Oct 2020 11:20:54 +0000
Subject: [R] [Rd] R 4.0.3 scheduled for October 10
Message-ID: <89372DD0-8E05-4A32-B87F-3E96246BAA6D@cbs.dk>

[Oops, this apparently got omitted during release scheduling]

Full schedule is available on developer.r-project.org.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From @@e||ck @end|ng |rom gm@||@com  Mon Oct  5 13:21:57 2020
From: @@e||ck @end|ng |rom gm@||@com (stephen sefick)
Date: Mon, 5 Oct 2020 07:21:57 -0400
Subject: [R] Simultaneous Equation Model with Dichotomous Dependent
 Variables
In-Reply-To: <BN6PR11MB3923E8C1CA8779117BAF1087B60C0@BN6PR11MB3923.namprd11.prod.outlook.com>
References: <BN6PR11MB3923E8C1CA8779117BAF1087B60C0@BN6PR11MB3923.namprd11.prod.outlook.com>
Message-ID: <CADKEMqi7n_Hco7rk_eSQkEWY+q1XYj83mgAh5=HdLr=Kg2KuSw@mail.gmail.com>

Casey, I have used laavan for sem in the past.

Stephen Sefick, PhD

On Mon, Oct 5, 2020, 02:12 Casey Mallon <cemallon at uchicago.edu> wrote:

> Hello everyone!
>
> I am currently working with a time series panel data set measuring six
> dependent variables:
> 4 of which are binary and 2 of which are count data.
>
> I am interested in constructing a model to measure if the dependent
> variables influence one another.
>
> For example: DV1~ DV2 + IV1+IV2+ Controls and DV2~ DV1 + IV1+ IV2+ Controls
> (where IV stands for independent variable, not instrumental).
>
> My current code looks like:
> glm(DV1~ IV1+ Control1+ Control2+ DV4+ DV5+ DV6, family="binomial", data=
> data)
> which I repeat for each of the 6 DVs.
>
>
> I realize that I need to run a series of simultaneous equation models, but
> I am not having much luck figuring out how to run an SEM with binary data
> in R. The zelig package used to have a bivariate logit command, but zelig
> does not work with the most current version of R. Additionally, I would run
> into issues later on using that command since 2 of my variables are not
> binary.
>
> Any ideas? Thanks for your help!
>
> Casey
>
> ---
>
> Ph.D student, Political Science
>
> University of Chicago
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk  Mon Oct  5 18:44:05 2020
From: t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk (Tim Taylor)
Date: Mon, 5 Oct 2020 17:44:05 +0100
Subject: [R] understanding as.list(substitute(...()))
Message-ID: <CAFLvaCmUSvbTpoBMnkuq_cN_yQSam+Uhm-s5c4WD3NtsikWDtA@mail.gmail.com>

Could someone explain what is happening with the ...() of the
following function:

dots <- function(...) as.list(substitute(...()))

I understand what I'm getting as a result but not why.   ?dots and
?substitute leave me none the wiser.

regards
Tim


From |zm|r||g @end|ng |rom m@||@n|h@gov  Mon Oct  5 19:05:51 2020
From: |zm|r||g @end|ng |rom m@||@n|h@gov (Izmirlian, Grant (NIH/NCI) [E])
Date: Mon, 5 Oct 2020 17:05:51 +0000
Subject: [R] R-help Digest, Vol 212, Issue 4
In-Reply-To: <mailman.360954.0.1601892221.47640.r-help@r-project.org>
References: <mailman.360954.0.1601892221.47640.r-help@r-project.org>
Message-ID: <DM6PR09MB578481A3986AFCE8BA243DA8E50C0@DM6PR09MB5784.namprd09.prod.outlook.com>

Hi -- there are lots of replies --I have not read them all, if someone else suggested this, sorry for duplication. This is similar to the suggestion using mapply, but not specific to matrices. In fact it's a kludge that applies to many settings. You 'sapply' over the index 1:2, and pass a, b as arguments:


a <- c(1,4)
 b <- c(5,8)

sapply(1:2, FUN=function(x, a, b)a[x]:b[x], a=a,b=b)


-----Original Message-----
From: r-help-request at r-project.org <r-help-request at r-project.org> 
Sent: Monday, October 05, 2020 6:04 AM
To: r-help at r-project.org
Subject: R-help Digest, Vol 212, Issue 4

Send R-help mailing list submissions to
	r-help at r-project.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://stat.ethz.ch/mailman/listinfo/r-help
or, via email, send a message with subject or body 'help' to
	r-help-request at r-project.org

You can reach the person managing the list at
	r-help-owner at r-project.org

When replying, please edit your Subject line so it is more specific than "Re: Contents of R-help digest..."


From bgunter@4567 @end|ng |rom gm@||@com  Tue Oct  6 06:30:41 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 5 Oct 2020 21:30:41 -0700
Subject: [R] understanding as.list(substitute(...()))
In-Reply-To: <CAFLvaCmUSvbTpoBMnkuq_cN_yQSam+Uhm-s5c4WD3NtsikWDtA@mail.gmail.com>
References: <CAFLvaCmUSvbTpoBMnkuq_cN_yQSam+Uhm-s5c4WD3NtsikWDtA@mail.gmail.com>
Message-ID: <CAGxFJbTvDCSyA8Mo25CADw56u5h=zAoOepEV6vYAtwjJMNyuuQ@mail.gmail.com>

You need to understand what substitute() does -- see ?substitute and/or a
tutorial on "R computing on the language" or similar.

Here is a simple example that may clarify:

> dots <- function(...) as.list(substitute(...()))
> dots(log(foo))
[[1]]
log(foo)  ## a call, a language object

> dots2 <- function(...) as.list(...)
> dots2(log(foo))
Error in as.list(...) : object 'foo' not found
## substitute() does not evaluate its argument; as.list() does

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 5, 2020 at 1:37 PM Tim Taylor <tim.taylor at hiddenelephants.co.uk>
wrote:

> Could someone explain what is happening with the ...() of the
> following function:
>
> dots <- function(...) as.list(substitute(...()))
>
> I understand what I'm getting as a result but not why.   ?dots and
> ?substitute leave me none the wiser.
>
> regards
> Tim
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk  Tue Oct  6 08:38:27 2020
From: t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk (Tim Taylor)
Date: Tue, 6 Oct 2020 07:38:27 +0100
Subject: [R] understanding as.list(substitute(...()))
In-Reply-To: <CAGxFJbTvDCSyA8Mo25CADw56u5h=zAoOepEV6vYAtwjJMNyuuQ@mail.gmail.com>
References: <CAFLvaCmUSvbTpoBMnkuq_cN_yQSam+Uhm-s5c4WD3NtsikWDtA@mail.gmail.com>
 <CAGxFJbTvDCSyA8Mo25CADw56u5h=zAoOepEV6vYAtwjJMNyuuQ@mail.gmail.com>
Message-ID: <CAFLvaCmLSkC_96_4a41f1+Z+VDSxoJLr78sLG31BDXmnzirdDQ@mail.gmail.com>

I probably need to be more specific.  What confuses me is not the use
of substitute, but the parenthesis after the dots.  It clearly works
and I can make guesses as to why but it is definitely not obvious.
The following function gives the same final result but I can
understand what is happening.

dots <- function (...) {
   exprs <- substitute(list(...))
   as.list(exprs[-1])
}

In the original,     dots <- function(...) as.list(substitute(...())),
   Does ...() get parsed in a special way?

Tim

On Tue, 6 Oct 2020 at 05:30, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> You need to understand what substitute() does -- see ?substitute and/or a tutorial on "R computing on the language" or similar.
>
> Here is a simple example that may clarify:
>
> > dots <- function(...) as.list(substitute(...()))
> > dots(log(foo))
> [[1]]
> log(foo)  ## a call, a language object
>
> > dots2 <- function(...) as.list(...)
> > dots2(log(foo))
> Error in as.list(...) : object 'foo' not found
> ## substitute() does not evaluate its argument; as.list() does
>
> Cheers,
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Oct 5, 2020 at 1:37 PM Tim Taylor <tim.taylor at hiddenelephants.co.uk> wrote:
>>
>> Could someone explain what is happening with the ...() of the
>> following function:
>>
>> dots <- function(...) as.list(substitute(...()))
>>
>> I understand what I'm getting as a result but not why.   ?dots and
>> ?substitute leave me none the wiser.
>>
>> regards
>> Tim
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From toth@dene@ @end|ng |rom kogentum@hu  Tue Oct  6 09:22:40 2020
From: toth@dene@ @end|ng |rom kogentum@hu (=?UTF-8?B?RMOpbmVzIFTDs3Ro?=)
Date: Tue, 6 Oct 2020 09:22:40 +0200
Subject: [R] understanding as.list(substitute(...()))
In-Reply-To: <CAFLvaCmLSkC_96_4a41f1+Z+VDSxoJLr78sLG31BDXmnzirdDQ@mail.gmail.com>
References: <CAFLvaCmUSvbTpoBMnkuq_cN_yQSam+Uhm-s5c4WD3NtsikWDtA@mail.gmail.com>
 <CAGxFJbTvDCSyA8Mo25CADw56u5h=zAoOepEV6vYAtwjJMNyuuQ@mail.gmail.com>
 <CAFLvaCmLSkC_96_4a41f1+Z+VDSxoJLr78sLG31BDXmnzirdDQ@mail.gmail.com>
Message-ID: <e1be8163-8e27-d177-33da-d2287de8cada@kogentum.hu>

Hi Tim,

I have also asked a similar question a couple of months ago, and someone 
else did the same recently, maybe on r-devel.

We received no "official" response, but Deepayan Sarkar (R Core Team 
member) claimed that:

"
There is no documented reason for this to work (AFAIK), so again, I
would guess this is a side-effect of the implementation, and not a API
feature you should rely on. This is somewhat borne out by the
following:

 > foo <- function(...) substitute({...()})
 > foo(abc$de, fg[h], i)
{
    pairlist(abc$de, fg[h], i)
}
 > foo(abc$de, fg[h], , i) # add a missing argument for extra fun
{
    as.pairlist(alist(abc$de, fg[h], , i))
}

which is not something you would expect to see at the user level. So
my recommendation: don't use ...() and pretend that you never
discovered it in the first place. Use match.call() instead, as
suggested by Serguei.

[Disclaimer: I have no idea what is actually going on, so these are
just guesses. There are some hints at
https://cran.r-project.org/doc/manuals/r-devel/R-ints.html#Dot_002ddot_002ddot-arguments
if you want to folllow up.]
"

Cheers,
Denes




On 10/6/20 8:38 AM, Tim Taylor wrote:
> I probably need to be more specific.  What confuses me is not the use
> of substitute, but the parenthesis after the dots.  It clearly works
> and I can make guesses as to why but it is definitely not obvious.
> The following function gives the same final result but I can
> understand what is happening.
> 
> dots <- function (...) {
>     exprs <- substitute(list(...))
>     as.list(exprs[-1])
> }
> 
> In the original,     dots <- function(...) as.list(substitute(...())),
>     Does ...() get parsed in a special way?
> 
> Tim
> 
> On Tue, 6 Oct 2020 at 05:30, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> You need to understand what substitute() does -- see ?substitute and/or a tutorial on "R computing on the language" or similar.
>>
>> Here is a simple example that may clarify:
>>
>>> dots <- function(...) as.list(substitute(...()))
>>> dots(log(foo))
>> [[1]]
>> log(foo)  ## a call, a language object
>>
>>> dots2 <- function(...) as.list(...)
>>> dots2(log(foo))
>> Error in as.list(...) : object 'foo' not found
>> ## substitute() does not evaluate its argument; as.list() does
>>
>> Cheers,
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Mon, Oct 5, 2020 at 1:37 PM Tim Taylor <tim.taylor at hiddenelephants.co.uk> wrote:
>>>
>>> Could someone explain what is happening with the ...() of the
>>> following function:
>>>
>>> dots <- function(...) as.list(substitute(...()))
>>>
>>> I understand what I'm getting as a result but not why.   ?dots and
>>> ?substitute leave me none the wiser.
>>>
>>> regards
>>> Tim
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk  Tue Oct  6 09:44:47 2020
From: t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk (Tim Taylor)
Date: Tue, 6 Oct 2020 08:44:47 +0100
Subject: [R] understanding as.list(substitute(...()))
In-Reply-To: <e1be8163-8e27-d177-33da-d2287de8cada@kogentum.hu>
References: <CAFLvaCmUSvbTpoBMnkuq_cN_yQSam+Uhm-s5c4WD3NtsikWDtA@mail.gmail.com>
 <CAGxFJbTvDCSyA8Mo25CADw56u5h=zAoOepEV6vYAtwjJMNyuuQ@mail.gmail.com>
 <CAFLvaCmLSkC_96_4a41f1+Z+VDSxoJLr78sLG31BDXmnzirdDQ@mail.gmail.com>
 <e1be8163-8e27-d177-33da-d2287de8cada@kogentum.hu>
Message-ID: <CAFLvaC=o2vvHUgwOBMv1KjiGU3sszZYhPuKeH8Nna20JKiYjAg@mail.gmail.com>

Cheers Denes,

That's useful to know.  I'll stick with the match.call version
instead.  Interestingly I initially tried to post to R-devel (as I
thought it may involve something internal) but was asked to post here
instead.

Best

Tim


On Tue, 6 Oct 2020 at 08:22, D?nes T?th <toth.denes at kogentum.hu> wrote:
>
> Hi Tim,
>
> I have also asked a similar question a couple of months ago, and someone
> else did the same recently, maybe on r-devel.
>
> We received no "official" response, but Deepayan Sarkar (R Core Team
> member) claimed that:
>
> "
> There is no documented reason for this to work (AFAIK), so again, I
> would guess this is a side-effect of the implementation, and not a API
> feature you should rely on. This is somewhat borne out by the
> following:
>
>  > foo <- function(...) substitute({...()})
>  > foo(abc$de, fg[h], i)
> {
>     pairlist(abc$de, fg[h], i)
> }
>  > foo(abc$de, fg[h], , i) # add a missing argument for extra fun
> {
>     as.pairlist(alist(abc$de, fg[h], , i))
> }
>
> which is not something you would expect to see at the user level. So
> my recommendation: don't use ...() and pretend that you never
> discovered it in the first place. Use match.call() instead, as
> suggested by Serguei.
>
> [Disclaimer: I have no idea what is actually going on, so these are
> just guesses. There are some hints at
> https://cran.r-project.org/doc/manuals/r-devel/R-ints.html#Dot_002ddot_002ddot-arguments
> if you want to folllow up.]
> "
>
> Cheers,
> Denes
>
>
>
>
> On 10/6/20 8:38 AM, Tim Taylor wrote:
> > I probably need to be more specific.  What confuses me is not the use
> > of substitute, but the parenthesis after the dots.  It clearly works
> > and I can make guesses as to why but it is definitely not obvious.
> > The following function gives the same final result but I can
> > understand what is happening.
> >
> > dots <- function (...) {
> >     exprs <- substitute(list(...))
> >     as.list(exprs[-1])
> > }
> >
> > In the original,     dots <- function(...) as.list(substitute(...())),
> >     Does ...() get parsed in a special way?
> >
> > Tim
> >
> > On Tue, 6 Oct 2020 at 05:30, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>
> >> You need to understand what substitute() does -- see ?substitute and/or a tutorial on "R computing on the language" or similar.
> >>
> >> Here is a simple example that may clarify:
> >>
> >>> dots <- function(...) as.list(substitute(...()))
> >>> dots(log(foo))
> >> [[1]]
> >> log(foo)  ## a call, a language object
> >>
> >>> dots2 <- function(...) as.list(...)
> >>> dots2(log(foo))
> >> Error in as.list(...) : object 'foo' not found
> >> ## substitute() does not evaluate its argument; as.list() does
> >>
> >> Cheers,
> >> Bert Gunter
> >>
> >> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>
> >>
> >> On Mon, Oct 5, 2020 at 1:37 PM Tim Taylor <tim.taylor at hiddenelephants.co.uk> wrote:
> >>>
> >>> Could someone explain what is happening with the ...() of the
> >>> following function:
> >>>
> >>> dots <- function(...) as.list(substitute(...()))
> >>>
> >>> I understand what I'm getting as a result but not why.   ?dots and
> >>> ?substitute leave me none the wiser.
> >>>
> >>> regards
> >>> Tim
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >


From pd@|gd @end|ng |rom gm@||@com  Tue Oct  6 11:23:07 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 6 Oct 2020 11:23:07 +0200
Subject: [R] understanding as.list(substitute(...()))
In-Reply-To: <e1be8163-8e27-d177-33da-d2287de8cada@kogentum.hu>
References: <CAFLvaCmUSvbTpoBMnkuq_cN_yQSam+Uhm-s5c4WD3NtsikWDtA@mail.gmail.com>
 <CAGxFJbTvDCSyA8Mo25CADw56u5h=zAoOepEV6vYAtwjJMNyuuQ@mail.gmail.com>
 <CAFLvaCmLSkC_96_4a41f1+Z+VDSxoJLr78sLG31BDXmnzirdDQ@mail.gmail.com>
 <e1be8163-8e27-d177-33da-d2287de8cada@kogentum.hu>
Message-ID: <8C175EFE-5B49-4A80-B1FB-615DDE3A91B3@gmail.com>



> On 6 Oct 2020, at 09:22 , D?nes T?th <toth.denes at kogentum.hu> wrote:
> 
> > foo <- function(...) substitute({...()})
> > foo(abc$de, fg[h], i)
> {
>   pairlist(abc$de, fg[h], i)
> }
> > foo(abc$de, fg[h], , i) # add a missing argument for extra fun
> {
>   as.pairlist(alist(abc$de, fg[h], , i))
> }
> 

The 2nd one here is actually an artifact of deparse(). The result is still a pairlist, just one that pairlist(....) cannot reproduce:

> e <- foo(abc$de, fg[h], , i) 
> e[[2]]
[[1]]
abc$de

[[2]]
fg[h]

[[3]]


[[4]]
i

> deparse(e[[2]])
[1] "as.pairlist(alist(abc$de, fg[h], , i))"
> dput(e[[2]])
as.pairlist(alist(abc$de, fg[h], , i))
> mode(e[[2]])
[1] "pairlist"
> mode(e[[2]][[3]])
[1] "name"

I.e. the list in e[2] contains the missing indicator (an empty name). (I'm slightly puzzled why we need the curlies to trigger a deparse, though) 



-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From @v|gro@@ @end|ng |rom ver|zon@net  Tue Oct  6 05:03:57 2020
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 5 Oct 2020 23:03:57 -0400
Subject: [R] R-help Digest, Vol 212, Issue 4
In-Reply-To: <DM6PR09MB578481A3986AFCE8BA243DA8E50C0@DM6PR09MB5784.namprd09.prod.outlook.com>
References: <mailman.360954.0.1601892221.47640.r-help@r-project.org>
 <DM6PR09MB578481A3986AFCE8BA243DA8E50C0@DM6PR09MB5784.namprd09.prod.outlook.com>
Message-ID: <048501d69b8d$557b5b50$007211f0$@verizon.net>

Nice alternative for some cases but I do not get the desires result as one
long vector. I would change the last line to this:

unlist(as.vector(sapply(1:length(a), 
                        FUN=function(x, 
                                     a, 
                                     b) a[x]:b[x], 
                        a=a,
                        b=b)))

The indenting works better using a constant-width font, LOL.

With all these twists, including using the base R methods like uppercase
Map, the relative speed of these methods comes to mind. No doubt someone
will suggest rewriting this as yet another C function for speed.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Izmirlian, Grant
(NIH/NCI) [E] via R-help
Sent: Monday, October 5, 2020 1:06 PM
To: 'r-help at r-project.org' <r-help at r-project.org>
Subject: Re: [R] R-help Digest, Vol 212, Issue 4

Hi -- there are lots of replies --I have not read them all, if someone else
suggested this, sorry for duplication. This is similar to the suggestion
using mapply, but not specific to matrices. In fact it's a kludge that
applies to many settings. You 'sapply' over the index 1:2, and pass a, b as
arguments:


a <- c(1,4)
 b <- c(5,8)

sapply(1:2, FUN=function(x, a, b)a[x]:b[x], a=a,b=b)

-----Original Message-----
From: r-help-request at r-project.org <r-help-request at r-project.org>
Sent: Monday, October 05, 2020 6:04 AM
To: r-help at r-project.org
Subject: R-help Digest, Vol 212, Issue 4

Send R-help mailing list submissions to
	r-help at r-project.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://stat.ethz.ch/mailman/listinfo/r-help
or, via email, send a message with subject or body 'help' to
	r-help-request at r-project.org

You can reach the person managing the list at
	r-help-owner at r-project.org

When replying, please edit your Subject line so it is more specific than
"Re: Contents of R-help digest..."

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Oct  6 17:00:59 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 6 Oct 2020 15:00:59 +0000
Subject: [R] Solving a simple linear equation using uniroot give error
 object 'x' not found
Message-ID: <MN2PR03MB51674F5BDC93BE87BB873C20E20D0@MN2PR03MB5167.namprd03.prod.outlook.com>

Colleagues,
I am trying to learn to use uniroot to solve a simple linear equation. I define the function, prove the function and a call to the function works. When I try to use uniroot to solve the equation I get an error message,
Error in yfu n(x,10,20) : object 'x' not found.

I hope someone can tell we how I can fix the problem

  if(!require(rootSolve)){install.packages("rootSolve")}
  library(rootSolve)

  # Define the function
  yfun <- function(x,diffMean,diffSE) ((abs(diffMean)-x)/diffSE)
  # Prove the function and a call to the function work
  yfun(10,100,10)
  # use uniroot to find a solution to the
  # function in the range -100 to 100
  uniroot(yfun(x,10,20),c(-100,100))


My output:
>   # Define the function
>   yfun <- function(x,diffMean,diffSE) ((abs(diffMean)-x)/diffSE)
>   # Prove the function and a call to the funciton works
>   yfun(10,100,10)
[1] 9
>   # use uniroot to find a solution to the
>   # funciton in the range -100 to 100
>   uniroot(yfun(x,10,20),c(-100,100))
Error in yfun(x, 10, 20) : object 'x' not found

Thank you,
John


John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct  6 17:06:35 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 6 Oct 2020 11:06:35 -0400
Subject: [R] Solving a simple linear equation using uniroot give error
 object 'x' not found
In-Reply-To: <MN2PR03MB51674F5BDC93BE87BB873C20E20D0@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB51674F5BDC93BE87BB873C20E20D0@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <235fa020-7d87-b5d1-e9a2-ee4b7de4ab9c@gmail.com>

On 06/10/2020 11:00 a.m., Sorkin, John wrote:
> Colleagues,
> I am trying to learn to use uniroot to solve a simple linear equation. I define the function, prove the function and a call to the function works. When I try to use uniroot to solve the equation I get an error message,
> Error in yfu n(x,10,20) : object 'x' not found.
> 
> I hope someone can tell we how I can fix the problem
> 
>    if(!require(rootSolve)){install.packages("rootSolve")}
>    library(rootSolve)
> 
>    # Define the function
>    yfun <- function(x,diffMean,diffSE) ((abs(diffMean)-x)/diffSE)
>    # Prove the function and a call to the function work
>    yfun(10,100,10)
>    # use uniroot to find a solution to the
>    # function in the range -100 to 100
>    uniroot(yfun(x,10,20),c(-100,100))
> 
> 
> My output:
>>    # Define the function
>>    yfun <- function(x,diffMean,diffSE) ((abs(diffMean)-x)/diffSE)
>>    # Prove the function and a call to the funciton works
>>    yfun(10,100,10)
> [1] 9
>>    # use uniroot to find a solution to the
>>    # funciton in the range -100 to 100
>>    uniroot(yfun(x,10,20),c(-100,100))
> Error in yfun(x, 10, 20) : object 'x' not found

The problem is that uniroot() wants a function as first argument, and 
yfun(x,10,20) is not a function, it's the value of a function.  You can 
do it with

  uniroot(function(x) yfun(x,10,20),c(-100,100))

which creates the anonymous function

   function(x) yfun(x,10,20)

and passes that to uniroot().

Duncan Murdoch
> 
> Thank you,
> John
> 
> 
> John David Sorkin M.D., Ph.D.
> Professor of Medicine
> Chief, Biostatistics and Informatics
> University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
> Baltimore VA Medical Center
> 10 North Greene Street
> GRECC (BT/18/GR)
> Baltimore, MD 21201-1524
> (Phone) 410-605-7119
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From herd_dog @end|ng |rom cox@net  Tue Oct  6 17:21:39 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Tue, 6 Oct 2020 08:21:39 -0700
Subject: [R] Installing Perl For Use in R
Message-ID: <65D9CF91F0C44A8BAFB49B41D00653B0@OWNERPC>

I?m getting nowhere with this.  From the website below  I clicked on the ActivePerl 5.26 button which seems to lead me into creating projects on the Cloud rather than downloading the software to my hard drive.

    https://www.activestate.com/products/perl/downloads/

Can someone give me some advise?  What the website is trying to do seems rather shady.

Thanks,
Philip
	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct  6 17:28:23 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 06 Oct 2020 08:28:23 -0700
Subject: [R] Solving a simple linear equation using uniroot give error
 object 'x' not found
In-Reply-To: <MN2PR03MB51674F5BDC93BE87BB873C20E20D0@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB51674F5BDC93BE87BB873C20E20D0@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <83817A3A-DBCD-4D50-ADB6-A64593D38DF4@dcn.davis.ca.us>

Have you looked at the examples in ?uniroot? Don't call yfun... let uniroot do that.

On October 6, 2020 8:00:59 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Colleagues,
>I am trying to learn to use uniroot to solve a simple linear equation.
>I define the function, prove the function and a call to the function
>works. When I try to use uniroot to solve the equation I get an error
>message,
>Error in yfu n(x,10,20) : object 'x' not found.
>
>I hope someone can tell we how I can fix the problem
>
>  if(!require(rootSolve)){install.packages("rootSolve")}
>  library(rootSolve)
>
>  # Define the function
>  yfun <- function(x,diffMean,diffSE) ((abs(diffMean)-x)/diffSE)
>  # Prove the function and a call to the function work
>  yfun(10,100,10)
>  # use uniroot to find a solution to the
>  # function in the range -100 to 100
>  uniroot(yfun(x,10,20),c(-100,100))
>
>
>My output:
>>   # Define the function
>>   yfun <- function(x,diffMean,diffSE) ((abs(diffMean)-x)/diffSE)
>>   # Prove the function and a call to the funciton works
>>   yfun(10,100,10)
>[1] 9
>>   # use uniroot to find a solution to the
>>   # funciton in the range -100 to 100
>>   uniroot(yfun(x,10,20),c(-100,100))
>Error in yfun(x, 10, 20) : object 'x' not found
>
>Thank you,
>John
>
>
>John David Sorkin M.D., Ph.D.
>Professor of Medicine
>Chief, Biostatistics and Informatics
>University of Maryland School of Medicine Division of Gerontology and
>Geriatric Medicine
>Baltimore VA Medical Center
>10 North Greene Street
>GRECC (BT/18/GR)
>Baltimore, MD 21201-1524
>(Phone) 410-605-7119
>(Fax) 410-605-7913 (Please call phone number above prior to faxing)
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From m@rc_@chw@rtz @end|ng |rom me@com  Tue Oct  6 17:32:29 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Tue, 6 Oct 2020 11:32:29 -0400
Subject: [R] Installing Perl For Use in R
In-Reply-To: <65D9CF91F0C44A8BAFB49B41D00653B0@OWNERPC>
References: <65D9CF91F0C44A8BAFB49B41D00653B0@OWNERPC>
Message-ID: <DE32DC9E-9BD7-451C-8471-84012CB5D302@me.com>

Hi,

What OS are you on? 

It has been years since I used ActiveState, but it looks like you now need to create an account with them prior to downloading the installation files. They seem to give you the option of creating an account with them, or using Github. I would opt for the former, even though I have a Github account.

If you are on Windows, an alternative Perl distribution is Strawberry Perl:

  http://strawberryperl.com

Regards,

Marc Schwartz

> On Oct 6, 2020, at 11:21 AM, Philip <herd_dog at cox.net> wrote:
> 
> I?m getting nowhere with this.  From the website below  I clicked on the ActivePerl 5.26 button which seems to lead me into creating projects on the Cloud rather than downloading the software to my hard drive.
> 
>    https://www.activestate.com/products/perl/downloads/
> 
> Can someone give me some advise?  What the website is trying to do seems rather shady.
> 
> Thanks,
> Philip


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct  6 18:15:29 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 06 Oct 2020 09:15:29 -0700
Subject: [R] Solving a simple linear equation using uniroot give error
 object 'x' not found
In-Reply-To: <235fa020-7d87-b5d1-e9a2-ee4b7de4ab9c@gmail.com>
References: <MN2PR03MB51674F5BDC93BE87BB873C20E20D0@MN2PR03MB5167.namprd03.prod.outlook.com>
 <235fa020-7d87-b5d1-e9a2-ee4b7de4ab9c@gmail.com>
Message-ID: <E7C8BA19-F208-4290-BDC0-D6B3C2B31326@dcn.davis.ca.us>

... or

uniroot( yfun, c( -100, 100 ), diffMean=10, diffSE=20 )

On October 6, 2020 8:06:35 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 06/10/2020 11:00 a.m., Sorkin, John wrote:
>> Colleagues,
>> I am trying to learn to use uniroot to solve a simple linear
>equation. I define the function, prove the function and a call to the
>function works. When I try to use uniroot to solve the equation I get
>an error message,
>> Error in yfu n(x,10,20) : object 'x' not found.
>> 
>> I hope someone can tell we how I can fix the problem
>> 
>>    if(!require(rootSolve)){install.packages("rootSolve")}
>>    library(rootSolve)
>> 
>>    # Define the function
>>    yfun <- function(x,diffMean,diffSE) ((abs(diffMean)-x)/diffSE)
>>    # Prove the function and a call to the function work
>>    yfun(10,100,10)
>>    # use uniroot to find a solution to the
>>    # function in the range -100 to 100
>>    uniroot(yfun(x,10,20),c(-100,100))
>> 
>> 
>> My output:
>>>    # Define the function
>>>    yfun <- function(x,diffMean,diffSE) ((abs(diffMean)-x)/diffSE)
>>>    # Prove the function and a call to the funciton works
>>>    yfun(10,100,10)
>> [1] 9
>>>    # use uniroot to find a solution to the
>>>    # funciton in the range -100 to 100
>>>    uniroot(yfun(x,10,20),c(-100,100))
>> Error in yfun(x, 10, 20) : object 'x' not found
>
>The problem is that uniroot() wants a function as first argument, and 
>yfun(x,10,20) is not a function, it's the value of a function.  You can
>
>do it with
>
>  uniroot(function(x) yfun(x,10,20),c(-100,100))
>
>which creates the anonymous function
>
>   function(x) yfun(x,10,20)
>
>and passes that to uniroot().
>
>Duncan Murdoch
>> 
>> Thank you,
>> John
>> 
>> 
>> John David Sorkin M.D., Ph.D.
>> Professor of Medicine
>> Chief, Biostatistics and Informatics
>> University of Maryland School of Medicine Division of Gerontology and
>Geriatric Medicine
>> Baltimore VA Medical Center
>> 10 North Greene Street
>> GRECC (BT/18/GR)
>> Baltimore, MD 21201-1524
>> (Phone) 410-605-7119
>> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Oct  6 23:30:37 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 7 Oct 2020 10:30:37 +1300
Subject: [R] Solving a simple linear equation using uniroot give error
 object 'x' not found
In-Reply-To: <MN2PR03MB51674F5BDC93BE87BB873C20E20D0@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB51674F5BDC93BE87BB873C20E20D0@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <20201007103037.351b85d2@rolf-Latitude-E7470>


On Tue, 6 Oct 2020 15:00:59 +0000
"Sorkin, John" <jsorkin at som.umaryland.edu> wrote:

> Colleagues,
> I am trying to learn to use uniroot to solve a simple linear
> equation. I define the function, prove the function and a call to the
> function works. When I try to use uniroot to solve the equation I get
> an error message, Error in yfu n(x,10,20) : object 'x' not found.
> 
> I hope someone can tell we how I can fix the problem
> 
>   if(!require(rootSolve)){install.packages("rootSolve")}
>   library(rootSolve)

Others have told you how to solve your problem.  I am curious to know
why on earth you are loading the rootSolve package.  The uniroot()
function is in package "stats" which is automatically available.

<SNIP>

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From g||ted|||e2014 @end|ng |rom gm@||@com  Wed Oct  7 14:24:22 2020
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Wed, 7 Oct 2020 13:24:22 +0100
Subject: [R] Fwd: Share your article [ATP_105460] published in Journal of
 Atmospheric and Solar-Terrestrial Physics
In-Reply-To: <0102017502786a84-e6e5bd89-93a3-46f9-8949-c5a08e14970f-000000@eu-west-1.amazonses.com>
References: <0102017502786a84-e6e5bd89-93a3-46f9-8949-c5a08e14970f-000000@eu-west-1.amazonses.com>
Message-ID: <CAC8ss30SBy9m4qZ0T3jFJfVfWJsR2GGFxgbS_svw5Ui4rp6w7w@mail.gmail.com>

Dear Friends,
I am really glad to share this link with you. Some of you have been
instrumental to the success of the work. You are acknowledged accordingly.
I am ever indebted.
Best wishes
Ogbos

---------- Forwarded message ---------
From: Elsevier - Article Status <Article_Status at elsevier.com>
Date: Wed, Oct 7, 2020 at 10:50 AM
Subject: Share your article [ATP_105460] published in Journal of
Atmospheric and Solar-Terrestrial Physics
To: <giftedlife2014 at gmail.com>


[image: Elsevier] <http://www.elsevier.com/>
Share your article!

[image: cover] <https://www.elsevier.com/locate/issn/1364-6826>

Dear Dr. Okike,

We are pleased to let you know that the final version of your article
*Automated
detection of simultaneous/non-simultaneous Forbush decreases and the
associated cosmic ray phenomena* is now available online, containing full
bibliographic details.

To help you access and share this work, we have created a Share Link ? a
personalized URL providing *50 days' free access* to your article. Anyone
clicking on this link before November 26, 2020 will be taken directly to
the final version of your article on ScienceDirect, which they are welcome
to read or download. No sign up, registration or fees are required.

Your personalized Share Link:
https://authors.elsevier.com/a/1bsqC4sIlkq7Kj

Click on the icons below to share with your network:
[image: Facebook]
<https://api.addthis.com/oexchange/0.8/forward/facebook/offer?url=https://authors.elsevier.com/a/1bsqC4sIlkq7Kj&pubid=ra-593812b0ff8778b4&title=AddThis%20%7C%20Home&ct=1>
[image:
Twitter]
<https://api.addthis.com/oexchange/0.8/forward/twitter/offer?url=https://authors.elsevier.com/a/1bsqC4sIlkq7Kj&pubid=ra-593812b0ff8778b4&title=AddThis%20%7C%20Home&ct=1>
[image:
LinkedIn]
<https://api.addthis.com/oexchange/0.8/forward/linkedin/offer?url=https://authors.elsevier.com/a/1bsqC4sIlkq7Kj&pubid=ra-593812b0ff8778b4&title=AddThis%20%7C%20Home&ct=1>
[image:
Mendeley]
<https://api.addthis.com/oexchange/0.8/forward/mendeley/offer?url=https://authors.elsevier.com/a/1bsqC4sIlkq7Kj&pubid=ra-42fed1e187bae420&title=AddThis%20%7C%20Home&ct=1>
[image:
WeChat]
<https://api.addthis.com/oexchange/0.8/forward/wechat/offer?url=https://authors.elsevier.com/a/1bsqC4sIlkq7Kj&pubid=ra-593812b0ff8778b4&title=New%20Paper%20Published%20%7C%20&ct=1>

We encourage you to use this Share Link to download a copy of the article
for your own archive. The URL is also a quick and easy way to share your
work with colleagues, co-authors and friends. And you are welcome to add
the Share Link to your homepage or social media profiles, such as Facebook
and Twitter.

You can find out more about Share Links on Elsevier.com
<https://www.elsevier.com/authors/journal-authors/submit-your-paper/sharing-and-promoting-your-article/share-link>
.

Did you know, as an author, you can use your article for a wide range of
scholarly, non-commercial purposes, and share and post your article online
in a variety of ways? For more information visit
www.elsevier.com/sharing-articles.

Kind regards,
Elsevier Researcher Support

*Increase your article's impact*
Our Get Noticed
<https://www.elsevier.com/__data/assets/pdf_file/0013/201325/Get-Noticed_Brochure_Sep2016.pdf>
guide contains a range of practical tips and advice to help you maximize
visibility of your article.

*Publishing Lab*
Do you have ideas on how we can improve the author experience? Sign up for
the Elsevier Publishing Lab <http://www.elsevier.com/publishing-lab> and
help us develop our publishing innovations!

*Have questions or need assistance?*
Please do not reply to this automated message.
For further assistance, please visit our Elsevier Support Center
<http://service.elsevier.com/> where you search for solutions on a range of
topics and find answers to frequently asked questions.
You can also talk to our researcher support team by phone 24 hours a day
from Monday-Friday and 24/7 by live chat and email.

*? 2018 Elsevier Ltd | Privacy Policy* http://www.elsevier.com/privacypolicy
Elsevier Limited, The Boulevard, Langford Lane, Kidlington, Oxford, OX5
1GB, United Kingdom, Registration No. 1982084. This e-mail has been sent to
you from Elsevier Ltd. To ensure delivery to your inbox (not bulk or junk
folders), please add article_status at elsevier.com to your address book or
safe senders list.

	[[alternative HTML version deleted]]


From g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com  Wed Oct  7 18:17:24 2020
From: g@y@thr|@n@g@r@j@n @end|ng |rom gm@||@com (Gayathri Nagarajan)
Date: Wed, 7 Oct 2020 09:17:24 -0700
Subject: [R] How to use R for Speech to text conversion
Message-ID: <CANt+qPiP7TRiYsicOPfAMHhfHON6vDro-N4X2OnmkXWJGxJuLQ@mail.gmail.com>

Hi

Iam a newbie to NLP and I would like to get some directions on how to
convert speech file to text

Google search leads me to using GoogleLanguageR Package and API's but these
need payments to be made for Google.

Can someone suggest ways in which I can do the speech to text conversion in
R studio ?

Thanks for your help and time

Regards
Gayathri

	[[alternative HTML version deleted]]


From M@Roo@ @end|ng |rom |1-out@ourc|ng@eu  Wed Oct  7 20:28:54 2020
From: M@Roo@ @end|ng |rom |1-out@ourc|ng@eu (Marc Roos)
Date: Wed, 7 Oct 2020 20:28:54 +0200
Subject: [R] How to use R for Speech to text conversion
In-Reply-To: <CANt+qPiP7TRiYsicOPfAMHhfHON6vDro-N4X2OnmkXWJGxJuLQ@mail.gmail.com>
Message-ID: <"H00000710017f41f.1602095333.sx.f1-outsourcing.eu*"@MHS>

 



I am also interested in this.
Maybe a start:
https://voice.mozilla.org/





-----Original Message-----
To: r-help at r-project.org
Subject: *****SPAM***** [R] How to use R for Speech to text conversion

Hi

Iam a newbie to NLP and I would like to get some directions on how to 
convert speech file to text

Google search leads me to using GoogleLanguageR Package and API's but 
these need payments to be made for Google.

Can someone suggest ways in which I can do the speech to text conversion 
in R studio ?

Thanks for your help and time

Regards
Gayathri

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Oct  7 20:31:41 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 7 Oct 2020 11:31:41 -0700
Subject: [R] How to use R for Speech to text conversion
In-Reply-To: <CANt+qPiP7TRiYsicOPfAMHhfHON6vDro-N4X2OnmkXWJGxJuLQ@mail.gmail.com>
References: <CANt+qPiP7TRiYsicOPfAMHhfHON6vDro-N4X2OnmkXWJGxJuLQ@mail.gmail.com>
Message-ID: <CAGxFJbTAYkbs2XRKeDFjcvpowo6h0kAsgTg7pwvKzzcskaBdEA@mail.gmail.com>

Have you checked here:
https://cran.r-project.org/web/views/NaturalLanguageProcessing.html

Speech to text is a very complex, specialized task requiring, I would
expect, a lot of IP. It would not surprise
me if you have to resort to big time, specialized software products with or
without R. "Speech to text with R"
found some hits, but mostly the google package you refer to. You might do
better with Python.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Oct 7, 2020 at 9:31 AM Gayathri Nagarajan <
gayathri.nagarajan at gmail.com> wrote:

> Hi
>
> Iam a newbie to NLP and I would like to get some directions on how to
> convert speech file to text
>
> Google search leads me to using GoogleLanguageR Package and API's but these
> need payments to be made for Google.
>
> Can someone suggest ways in which I can do the speech to text conversion in
> R studio ?
>
> Thanks for your help and time
>
> Regards
> Gayathri
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From w@gner@c|@r|@@e @end|ng |rom gm@||@com  Wed Oct  7 17:40:19 2020
From: w@gner@c|@r|@@e @end|ng |rom gm@||@com (Clarisse Wagner)
Date: Wed, 7 Oct 2020 16:40:19 +0100
Subject: [R] dynamic factor models
Message-ID: <CAOzsqq=h_LNSNhynNULf7zqZ89ozNxjn05OMLN+ivXR5Vgk=rg@mail.gmail.com>

  Please,

Would you kindly inform me if you have any course that includes "dynamic
factor models" ?

Thank you
Lisbon University
Portugal

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Oct  7 23:40:07 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 7 Oct 2020 22:40:07 +0100
Subject: [R] dynamic factor models
In-Reply-To: <CAOzsqq=h_LNSNhynNULf7zqZ89ozNxjn05OMLN+ivXR5Vgk=rg@mail.gmail.com>
References: <CAOzsqq=h_LNSNhynNULf7zqZ89ozNxjn05OMLN+ivXR5Vgk=rg@mail.gmail.com>
Message-ID: <2fa3ae5d-9464-3548-4a18-032cfdf364ee@sapo.pt>

Hello,

R-Help is a mailing list for questions on R code, it does not teach R.
(Well, many times it does, askers have doubts and the answers will 
hopefully teach something, try to make it clear.)

Can't you ask the department? In my time the Faculty of Sciences DEIO 
was the only university *department* of statistics, in all other 
Portuguese universities statistics was a section of the math dept.

Hope this helps,

Rui Barradas

?s 16:40 de 07/10/20, Clarisse Wagner escreveu:
>    Please,
> 
> Would you kindly inform me if you have any course that includes "dynamic
> factor models" ?
> 
> Thank you
> Lisbon University
> Portugal
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ||@her @end|ng |rom p|e@@th@n@com  Thu Oct  8 00:26:07 2020
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Wed, 7 Oct 2020 15:26:07 -0700
Subject: [R] Adding text to existing PDF's created with R
Message-ID: <280B0616-5644-4911-8077-C0374001624D@plessthan.com>

R 4.0.2
OS X

Colleagues

Does R have the capability of adding text (e.g., page numbers) to an existing PDF (previously created with R) -- other than adding this text, the PDF should be unchanged (except for a new filename).

The intent is as follows:  
	I have multiple PDFs that I eventually merge into a single PDF, separating each one with a separator page.  
	The content of the separator pages comes from a Word document.
	The task is performed with textreadr, officer, and pdftools.
I can insert page numbers into the separator pages (created as PDF documents).
I join the separator pages and the original PDFs using python's join command.
But I have not been able to figure out how to add page numbers to the existing PDF's.

Any help would be appreciated.

Dennis


Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com <http://www.plessthan.com/>





	[[alternative HTML version deleted]]


From ur@ @end|ng |rom k|e|nho|derm@nn@de  Thu Oct  8 01:55:30 2020
From: ur@ @end|ng |rom k|e|nho|derm@nn@de (Urs Kleinholdermann)
Date: Thu, 8 Oct 2020 01:55:30 +0200
Subject: [R] Adding text to existing PDF's created with R
In-Reply-To: <280B0616-5644-4911-8077-C0374001624D@plessthan.com>
References: <280B0616-5644-4911-8077-C0374001624D@plessthan.com>
Message-ID: <c92539eb-6074-48bd-73ee-214110337abd@kleinholdermann.de>

I don't know if R is capable of doing that.? What you want to do should 
be possible using pdftk with the multistamp option though:

1. create another pdf (pagenumbers.pdf) of the same length (same number 
of pages) which just has the page numbers on it

2. merge with existing, unnumbered text.pdf using

pdftk pagenumbers.pdf multistamp text.pdf output pagenumbers_and_text.pdf

On 08.10.20 00:26, Dennis Fisher wrote:
> R 4.0.2
> OS X
>
> Colleagues
>
> Does R have the capability of adding text (e.g., page numbers) to an existing PDF (previously created with R) -- other than adding this text, the PDF should be unchanged (except for a new filename).
>
> The intent is as follows:
> 	I have multiple PDFs that I eventually merge into a single PDF, separating each one with a separator page.
> 	The content of the separator pages comes from a Word document.
> 	The task is performed with textreadr, officer, and pdftools.
> I can insert page numbers into the separator pages (created as PDF documents).
> I join the separator pages and the original PDFs using python's join command.
> But I have not been able to figure out how to add page numbers to the existing PDF's.
>
> Any help would be appreciated.
>
> Dennis
>
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com <http://www.plessthan.com/>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Oct  8 03:51:28 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 07 Oct 2020 18:51:28 -0700
Subject: [R] How to use R for Speech to text conversion
In-Reply-To: <CAGxFJbTAYkbs2XRKeDFjcvpowo6h0kAsgTg7pwvKzzcskaBdEA@mail.gmail.com>
References: <CANt+qPiP7TRiYsicOPfAMHhfHON6vDro-N4X2OnmkXWJGxJuLQ@mail.gmail.com>
 <CAGxFJbTAYkbs2XRKeDFjcvpowo6h0kAsgTg7pwvKzzcskaBdEA@mail.gmail.com>
Message-ID: <C756021C-3305-4BC5-95A4-CF4E8C315F0D@dcn.davis.ca.us>

Whether you use RStudio is up to you... the heavy lifting would be done by R anyway.

I am not a STT person, but TensorFlow was recently released on CRAN [1] so there may be more opportunities for R users to make headway in this area.

[1] https://tensorflow.rstudio.com/installation/

On October 7, 2020 11:31:41 AM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>Have you checked here:
>https://cran.r-project.org/web/views/NaturalLanguageProcessing.html
>
>Speech to text is a very complex, specialized task requiring, I would
>expect, a lot of IP. It would not surprise
>me if you have to resort to big time, specialized software products
>with or
>without R. "Speech to text with R"
>found some hits, but mostly the google package you refer to. You might
>do
>better with Python.
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Wed, Oct 7, 2020 at 9:31 AM Gayathri Nagarajan <
>gayathri.nagarajan at gmail.com> wrote:
>
>> Hi
>>
>> Iam a newbie to NLP and I would like to get some directions on how to
>> convert speech file to text
>>
>> Google search leads me to using GoogleLanguageR Package and API's but
>these
>> need payments to be made for Google.
>>
>> Can someone suggest ways in which I can do the speech to text
>conversion in
>> R studio ?
>>
>> Thanks for your help and time
>>
>> Regards
>> Gayathri
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From eh@@n@k@r|m @end|ng |rom gm@||@com  Thu Oct  8 02:25:28 2020
From: eh@@n@k@r|m @end|ng |rom gm@||@com (Ehsan Karim)
Date: Wed, 7 Oct 2020 17:25:28 -0700
Subject: [R] svyglm: p-values and confidence intervals contradictory
In-Reply-To: <CADGDKJig2m37E+rkG+598rkNf72GKMd36St8PiMoRo7-mGiF8Q@mail.gmail.com>
References: <CADGDKJig2m37E+rkG+598rkNf72GKMd36St8PiMoRo7-mGiF8Q@mail.gmail.com>
Message-ID: <CADGDKJijBppbhyLnGqppgoJn6dwC4KSMgN=opwq--wPSr7812w@mail.gmail.com>

Dear list:

I am getting p-values and confidence intervals contradictory in
svyglm() output from the survey package.

Here is a reproducible example:
https://ehsanx.github.io/SurveyDataAnalysis/#114_Regression_analysis

This problem can be easily fixed by setting appropriate df.resid in
the summary function though. But as a default option, contradictory
p-values and confidence intervals or Inf SEs is probably a bug, or I
may have missed something.

Regards,

Ehsan
https://ehsank.com/
----------------------------
packageVersion("survey")
?4.0?
R.version
               _
platform       x86_64-w64-mingw32
arch           x86_64
os             mingw32
system         x86_64, mingw32
status
major          4
minor          0.2
year           2020
month          06
day            22
svn rev        78730
language       R
version.string R version 4.0.2 (2020-06-22)
nickname       Taking Off Again


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Thu Oct  8 06:56:59 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Wed, 7 Oct 2020 21:56:59 -0700
Subject: [R] Lahman Baseball Data Using R DBI Package
In-Reply-To: <CAHqSRuRoLcUw0mOJ_aDud8rivbdCvxtOreRjdp-N8AJ0nnv8ow@mail.gmail.com>
References: <523DDD41433C4810A1C1C8D755A1A940@OWNERPC>
 <CAHqSRuR-NmoGaEW9YavHxVNitZmezK_rcnwpRzuoHik657wtVQ@mail.gmail.com>
 <C44F824A74414353A579A0B468883116@OWNERPC>
 <CAHqSRuRoLcUw0mOJ_aDud8rivbdCvxtOreRjdp-N8AJ0nnv8ow@mail.gmail.com>
Message-ID: <CAA99HCxs_oeJhRGEeWAmoQ1CPNU9Pu8GqDbg-6ZAh1L7fvJS1w@mail.gmail.com>

Hi Philip,

You've probably realized by now that R doesn't like column names that
start with a number. If you try to access an R-dataframe column named
2B or 3B with the familiar "$" notation, you'll get an error:

> library(DBI)
> library(RSQLite)
> con2 <- dbConnect(SQLite(), "~/R_Dir/lahmansbaseballdb.sqlite")
> Hack12Batting <- dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600 ORDER BY AB DESC")
> Hack12Batting$AB
 [1] 664 661 639 632 632 632 626 623 620 618 617 613 606 605 602
> Hack12Batting$3B
Error: unexpected numeric constant in "Hack12Batting$3"

How to handle? You can rename columns on-the-fly by piping. See
reference [1] and use either library(magrittr) or library(dplyr) or a
combination thereof:

library(magrittr)
dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
ORDER BY AB DESC") %>% set_colnames(make.names(colnames(.)))

#OR one of the following:

library(dplyr)
dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
ORDER BY AB DESC") %>% rename(X2B = `2B`, X3B = `3B`)

library(dplyr)
dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
ORDER BY AB DESC") %>% `colnames<-`(make.names(colnames(.)))

library(dplyr)
dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
ORDER BY AB DESC") %>% magrittr::set_colnames(make.names(colnames(.)))

Best, Bill.

W. Michels, Ph.D.

[1] https://stackoverflow.com/questions/28100780/use-with-replacement-functions-like-colnames










On Fri, Oct 2, 2020 at 7:34 PM Bill Dunlap <williamwdunlap at gmail.com> wrote:
>
> The double quotes are required by SQL if a name is not of the form
> letter-followed-by-any-number-of-letters-or-numbers or if the name is a SQL
> keyword like 'where' or 'select'.  If you are doing this from a function,
> you may as well quote all the names.
>
> -Bill
>
> On Fri, Oct 2, 2020 at 6:18 PM Philip <herd_dog at cox.net> wrote:
>
> > The \?2B\? worked.  Have no idea why.  Can you point me somewhere that can
> > explain this to me.
> >
> > Thanks,
> > Philip
> >
> > *From:* Bill Dunlap
> > *Sent:* Friday, October 2, 2020 3:54 PM
> > *To:* Philip
> > *Cc:* r-help
> > *Subject:* Re: [R] Lahman Baseball Data Using R DBI Package
> >
> > Have you tried putting double quotes around 2B and 3B:  "...2B, 3B, ..."
> > -> "...\"2B\",\"3B\",..."?
> >
> > -Bill
> >
> > On Fri, Oct 2, 2020 at 3:49 PM Philip <herd_dog at cox.net> wrote:
> >
> >> I?m trying to pull data from one table (batting) in the Lahman Baseball
> >> database.  Notice X2B for doubles and X3B for triples ? fourth and fifth
> >> from the right.
> >>
> >> The dbGetQuery function runs fine when I leave there two out but I get
> >> error messages (in red) when I include 2B/3B or X2B/X3B.
> >>
> >> Can anyone give me some direction?
> >>
> >> Thanks,
> >> Philip Heinrich
> >>
> >> ***************************************************************************************************************************************************
> >> tail(dbReadTable(Lahman,"batting"))
> >>
> >> ID                       playerID      yearID    stint teamID team_ID
> >> lgID   G        G_batting   AB     R     H       X2B    X3B   HR   RBI   SB
> >> 107414 107414 yastrmi01      2019       1       SFN       2920
> >> NL     107        NA          371   64  101      22       3     21
> >> 55    2
> >> 107416 107416 yelicch01      2019        1       MIL       2911
> >> NL     130        NA          489 100  161      29       3     44    97   30
> >> 107419 107419 youngal01     2019       1       ARI        2896
> >> NL       17        NA            25     1      1        0       0
> >> 0      0     0
> >> 107420 107420 zagunma01   2019        1      CHN       2901      NL
> >> 30        NA             36     2      9        3       0      0
> >> 5     0
> >> 107422 107422 zavalse01      2019        1      CHA       2900
> >> AL        5        NA             12     1      1        0       0
> >> 0       0     0
> >> 107427 107427 zimmery01     2019        1      WAS      2925      NL
> >> 52        NA           171   20    44        9      0      6      27     0
> >> 107428 107428 zobribe01       2019        1      CHN      2901
> >> NL      47        NA           150   24   39         5      0      1
> >> 17     0
> >> 107429 107429 zuninmi01       2019        1      TBA       2922
> >> AL      90        NA           266    30  44       10      1      9
> >> 32     0
> >>
> >>
> >> Hack11Batting <- dbGetQuery(Lahman,"SELECT
> >> playerID,yearID,AB,R,H,2B,3B,HR,
> >>                             RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM
> >> batting
> >>                             WHERE yearID = 2018 AND AB >99")
> >> Error: unrecognized token: "2B"
> >>
> >> Hack11Batting <- dbGetQuery(Lahman,"SELECT
> >> playerID,yearID,AB,R,H,X2B,X3B,HR,
> >>                             RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM
> >> batting
> >>                             WHERE yearID = 2018 AND AB >99")
> >> Error: no such column: X2B
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Oct  8 14:54:39 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 8 Oct 2020 14:54:39 +0200
Subject: [R] unable to access index for repository...
In-Reply-To: <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
Message-ID: <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>

Drop the RStudio repos.

Best,
Uwe Ligges

On 05.10.2020 11:10, Steven Yen wrote:
> Thanks. I did as suggested but still received a warning, though the 
> installation went through. Anything I could do to install without the 
> warning message.
> 
> What is the contrib.url argument?
> 
>  > install.packages("aod",repos='https://cran-archive.r-project.org')
> Warning in install.packages :
>  ? unable to access index for repository 
> http://cran.rstudio.com/bin/windows/contrib/3.0
> trying URL 
> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
> Content type 'application/zip' length 225712 bytes (220 Kb)
> opened URL
> downloaded 220 Kb
> 
> package ?aod? successfully unpacked and MD5 sums checked
> 
> The downloaded binary packages are in
> C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>  >
> 
> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>> Then you'd rather need
>>
>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>
>> or use the contrib.url argument.
>>
>> Best,
>> Uwe Ligges
>>
>>
>> On 05.10.2020 10:47, Steven Yen wrote:
>>> Thanks for the help. I do update to the latest R-4.0.2. As I said, 
>>> for reasons that's hard to explain, some of my tasks are better 
>>> handled with an older version of R, in this case R-3.0.3. Please just 
>>> help me install packages successfully with this older version of R.
>>>
>>> I ran the following line but obviously was not getting it across.
>>>
>>> =====
>>>
>>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/') 
>>>> Warning in 
>>> install.packages : unable to access index for repository 
>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in 
>>> install.packages : unable to access index for repository 
>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0 
>>> Warning in install.packages : package ?aod? is not available (for R 
>>> version 3.0.3)
>>>
>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>> From
>>>>
>>>> ../ReadMe
>>>> in the mentioned web resource:
>>>>
>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>
>>>> We do not hold binaries of several year old versions of R on CRAN.
>>>>
>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to 
>>>> update to 4.0.2.
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>>
>>>>
>>>>
>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>> I had to install/use an older version of (R-3.0.3) for a reason. While
>>>>> installing a package from CRAN (either in RStudio or R), I received 
>>>>> the
>>>>> following warning message saying unable to access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message below. In
>>>>> this case, I tried to install "aod". The install nevertheless went
>>>>> through, as confirmed by the library statement (I did not try to use
>>>>> it). Any idea? Thank you.
>>>>>
>>>>> =====
>>>>>
>>>>> Warning: unable to access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
>>>>> access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>> install.packages("aod") Warning in install.packages : unable to access
>>>>> index for repository http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>> Warning in install.packages : unable to access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>>>> available as a source package but not as a binary Warning in
>>>>> install.packages : package ?aod? is not available (for R version 
>>>>> 3.0.3)
>>>>> ? > library(aod)
>>>>>
>>>>>
>>>>> ????[[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide 
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |r1d_m@|| @end|ng |rom y@hoo@|r  Thu Oct  8 09:08:19 2020
From: |r1d_m@|| @end|ng |rom y@hoo@|r (fr1d_mail)
Date: Thu, 8 Oct 2020 09:08:19 +0200
Subject: [R] unable to plot bode - phase with control package
References: <7102d570-0a51-2279-d56a-2c31679c7348.ref@yahoo.fr>
Message-ID: <7102d570-0a51-2279-d56a-2c31679c7348@yahoo.fr>

Dear All

I hope my question is relevant on this forum, else very sorry for the 
disturbance

I want to simply plot a bode diagram of a siso model

using the 'bodeplot' command in the control package fail due to error in 
'issiso' evaluation...

Error in if (issiso(sys)) {:

then I try by myself some retro-engineering :)

the problem is when I use

H <- freqresp(syst, w)
mag = 20*log10(abs(H))
phase <- atan2(Im(H), Re(H)) * 180/pi

if the order of the system is higher than 2 it is wrong (result will be 
only between -pi / pi)

how to proceed ? for each evaluated point take a derivative and evaluate 
the order to add the proper number of pi ?

Thanks for the help !

Best

Fr?d?ric


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct  8 15:59:55 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 8 Oct 2020 09:59:55 -0400
Subject: [R] unable to access index for repository...
In-Reply-To: <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
Message-ID: <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>

He didn't specify the RStudio repos, though it's probably implicitly 
specified in getOption("repos").  I wonder why install.packages() is 
looking there, when repos is given explicitly?

On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
> Drop the RStudio repos.
> 
> Best,
> Uwe Ligges
> 
> On 05.10.2020 11:10, Steven Yen wrote:
>> Thanks. I did as suggested but still received a warning, though the
>> installation went through. Anything I could do to install without the
>> warning message.
>>
>> What is the contrib.url argument?
>>
>>   > install.packages("aod",repos='https://cran-archive.r-project.org')
>> Warning in install.packages :
>>   ? unable to access index for repository
>> http://cran.rstudio.com/bin/windows/contrib/3.0
>> trying URL
>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
>> Content type 'application/zip' length 225712 bytes (220 Kb)
>> opened URL
>> downloaded 220 Kb
>>
>> package ?aod? successfully unpacked and MD5 sums checked
>>
>> The downloaded binary packages are in
>> C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>>   >
>>
>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>>> Then you'd rather need
>>>
>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>
>>> or use the contrib.url argument.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>> On 05.10.2020 10:47, Steven Yen wrote:
>>>> Thanks for the help. I do update to the latest R-4.0.2. As I said,
>>>> for reasons that's hard to explain, some of my tasks are better
>>>> handled with an older version of R, in this case R-3.0.3. Please just
>>>> help me install packages successfully with this older version of R.
>>>>
>>>> I ran the following line but obviously was not getting it across.
>>>>
>>>> =====
>>>>
>>>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/')
>>>>> Warning in
>>>> install.packages : unable to access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
>>>> install.packages : unable to access index for repository
>>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0
>>>> Warning in install.packages : package ?aod? is not available (for R
>>>> version 3.0.3)
>>>>
>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>>> From
>>>>>
>>>>> ../ReadMe
>>>>> in the mentioned web resource:
>>>>>
>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>>
>>>>> We do not hold binaries of several year old versions of R on CRAN.
>>>>>
>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to
>>>>> update to 4.0.2.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>>> I had to install/use an older version of (R-3.0.3) for a reason. While
>>>>>> installing a package from CRAN (either in RStudio or R), I received
>>>>>> the
>>>>>> following warning message saying unable to access index for repository
>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message below. In
>>>>>> this case, I tried to install "aod". The install nevertheless went
>>>>>> through, as confirmed by the library statement (I did not try to use
>>>>>> it). Any idea? Thank you.
>>>>>>
>>>>>> =====
>>>>>>
>>>>>> Warning: unable to access index for repository
>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
>>>>>> access index for repository
>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>>> install.packages("aod") Warning in install.packages : unable to access
>>>>>> index for repository http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>> Warning in install.packages : unable to access index for repository
>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>>>>> available as a source package but not as a binary Warning in
>>>>>> install.packages : package ?aod? is not available (for R version
>>>>>> 3.0.3)
>>>>>>  ? > library(aod)
>>>>>>
>>>>>>
>>>>>>  ????[[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Oct  8 16:32:19 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 08 Oct 2020 07:32:19 -0700
Subject: [R] unable to plot bode - phase with control package
In-Reply-To: <7102d570-0a51-2279-d56a-2c31679c7348@yahoo.fr>
References: <7102d570-0a51-2279-d56a-2c31679c7348.ref@yahoo.fr>
 <7102d570-0a51-2279-d56a-2c31679c7348@yahoo.fr>
Message-ID: <CA797259-198D-4E86-A094-F9ACE9B68499@dcn.davis.ca.us>

a) What is so difficult about the idea that this list is about R, not theory? There do exist forums about control theory (e.g. engineering.stackexchange.com)

b) Using [-pi,+pi) is not "wrong"... it is numerically more precise, though it may not convey what you would prefer to convey.

c) The general case with poles and zeroes is more complicated than just adding the order of your system. Do a search on

"winding number" "bode"

But if by inspection you think that shortcut will work for your system then do what you need to.

d) If implementing a more general alternative solution is your itch, I am sure the maintainer of this _contributed package_ would welcome patches to add features.


On October 8, 2020 12:08:19 AM PDT, fr1d_mail via R-help <r-help at r-project.org> wrote:
>Dear All
>
>I hope my question is relevant on this forum, else very sorry for the 
>disturbance
>
>I want to simply plot a bode diagram of a siso model
>
>using the 'bodeplot' command in the control package fail due to error
>in 
>'issiso' evaluation...
>
>Error in if (issiso(sys)) {:
>
>then I try by myself some retro-engineering :)
>
>the problem is when I use
>
>H <- freqresp(syst, w)
>mag = 20*log10(abs(H))
>phase <- atan2(Im(H), Re(H)) * 180/pi
>
>if the order of the system is higher than 2 it is wrong (result will be
>
>only between -pi / pi)
>
>how to proceed ? for each evaluated point take a derivative and
>evaluate 
>the order to add the proper number of pi ?
>
>Thanks for the help !
>
>Best
>
>Fr?d?ric
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct  8 16:52:04 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 8 Oct 2020 10:52:04 -0400
Subject: [R] unable to access index for repository...
In-Reply-To: <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
 <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
Message-ID: <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>

Just remembered:  RStudio runs its own wrapper around 
install.packages().  Steven, you should try doing the install from 
outside of RStudio, and see if it makes a difference.

Duncan Murdoch

On 08/10/2020 9:59 a.m., Duncan Murdoch wrote:
> He didn't specify the RStudio repos, though it's probably implicitly
> specified in getOption("repos").  I wonder why install.packages() is
> looking there, when repos is given explicitly?
> 
> On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
>> Drop the RStudio repos.
>>
>> Best,
>> Uwe Ligges
>>
>> On 05.10.2020 11:10, Steven Yen wrote:
>>> Thanks. I did as suggested but still received a warning, though the
>>> installation went through. Anything I could do to install without the
>>> warning message.
>>>
>>> What is the contrib.url argument?
>>>
>>>    > install.packages("aod",repos='https://cran-archive.r-project.org')
>>> Warning in install.packages :
>>>    ? unable to access index for repository
>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>> trying URL
>>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>> opened URL
>>> downloaded 220 Kb
>>>
>>> package ?aod? successfully unpacked and MD5 sums checked
>>>
>>> The downloaded binary packages are in
>>> C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>>>    >
>>>
>>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>>>> Then you'd rather need
>>>>
>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>
>>>> or use the contrib.url argument.
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>>
>>>> On 05.10.2020 10:47, Steven Yen wrote:
>>>>> Thanks for the help. I do update to the latest R-4.0.2. As I said,
>>>>> for reasons that's hard to explain, some of my tasks are better
>>>>> handled with an older version of R, in this case R-3.0.3. Please just
>>>>> help me install packages successfully with this older version of R.
>>>>>
>>>>> I ran the following line but obviously was not getting it across.
>>>>>
>>>>> =====
>>>>>
>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/')
>>>>>> Warning in
>>>>> install.packages : unable to access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
>>>>> install.packages : unable to access index for repository
>>>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0
>>>>> Warning in install.packages : package ?aod? is not available (for R
>>>>> version 3.0.3)
>>>>>
>>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>>>> From
>>>>>>
>>>>>> ../ReadMe
>>>>>> in the mentioned web resource:
>>>>>>
>>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>>>
>>>>>> We do not hold binaries of several year old versions of R on CRAN.
>>>>>>
>>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to
>>>>>> update to 4.0.2.
>>>>>>
>>>>>> Best,
>>>>>> Uwe Ligges
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>>>> I had to install/use an older version of (R-3.0.3) for a reason. While
>>>>>>> installing a package from CRAN (either in RStudio or R), I received
>>>>>>> the
>>>>>>> following warning message saying unable to access index for repository
>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message below. In
>>>>>>> this case, I tried to install "aod". The install nevertheless went
>>>>>>> through, as confirmed by the library statement (I did not try to use
>>>>>>> it). Any idea? Thank you.
>>>>>>>
>>>>>>> =====
>>>>>>>
>>>>>>> Warning: unable to access index for repository
>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
>>>>>>> access index for repository
>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>>>> install.packages("aod") Warning in install.packages : unable to access
>>>>>>> index for repository http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>> Warning in install.packages : unable to access index for repository
>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>>>>>> available as a source package but not as a binary Warning in
>>>>>>> install.packages : package ?aod? is not available (for R version
>>>>>>> 3.0.3)
>>>>>>>   ? > library(aod)
>>>>>>>
>>>>>>>
>>>>>>>   ????[[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Thu Oct  8 17:18:06 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Thu, 8 Oct 2020 08:18:06 -0700
Subject: [R] Installing Perl For Use in R
In-Reply-To: <DE32DC9E-9BD7-451C-8471-84012CB5D302@me.com>
References: <65D9CF91F0C44A8BAFB49B41D00653B0@OWNERPC>
 <DE32DC9E-9BD7-451C-8471-84012CB5D302@me.com>
Message-ID: <CAA99HCwyotWpQ-9wV6-625byP==jsRGNkRUpv1-tzGJfZiM6Pg@mail.gmail.com>

Hi Philip,

"Perl Download"
https://www.perl.org/get.html

The above link gives you the option to install from source or from
ActiveState. The first link below (source) proudly proclaims, "Perl
compiles on over 100 platforms..." and the second link below (binary)
similarly proclaims, "Perl supports over 100 platforms!":

"Perl Source"
https://www.cpan.org/src/README.html

"Perl Ports (Binary Distributions)"
https://www.cpan.org/ports/index.html

HTH, Bill.

W. Michels, Ph.D.



On Tue, Oct 6, 2020 at 8:32 AM Marc Schwartz via R-help
<r-help at r-project.org> wrote:
>
> Hi,
>
> What OS are you on?
>
> It has been years since I used ActiveState, but it looks like you now need to create an account with them prior to downloading the installation files. They seem to give you the option of creating an account with them, or using Github. I would opt for the former, even though I have a Github account.
>
> If you are on Windows, an alternative Perl distribution is Strawberry Perl:
>
>   http://strawberryperl.com
>
> Regards,
>
> Marc Schwartz
>
> > On Oct 6, 2020, at 11:21 AM, Philip <herd_dog at cox.net> wrote:
> >
> > I?m getting nowhere with this.  From the website below  I clicked on the ActivePerl 5.26 button which seems to lead me into creating projects on the Cloud rather than downloading the software to my hard drive.
> >
> >    https://www.activestate.com/products/perl/downloads/
> >
> > Can someone give me some advise?  What the website is trying to do seems rather shady.
> >
> > Thanks,
> > Philip
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Thu Oct  8 17:54:09 2020
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Thu, 8 Oct 2020 23:54:09 +0800
Subject: [R] unable to access index for repository...
In-Reply-To: <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
 <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
 <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>
Message-ID: <524b76ed-fd43-1591-f7d5-4b27e5537e9f@ntu.edu.tw>

Thanks. You gentlemen please tell me what this means. In R (outside of 
RStudio) I ran:

install.packages("aod")

Received a warning (and installation did not seem to go through).

Then I tried

install.packages("aod",repos='https://cran-archive.r-project.org')

Received a warning but it went on to try

https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip

and it worked. See log below.

I expect to continue to use R-3.0.3 for a while and I very much like 
this to become a routine. Thank you all.

Steven Yen

 > install.packages("aod")
Warning in install.packages :
 ? unable to access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0
Warning in install.packages :
 ? unable to access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0

 ?? package ?aod? is available as a source package but not as a binary

Warning in install.packages :
 ? package ?aod? is not available (for R version 3.0.3)
 > install.packages("aod",repos='https://cran-archive.r-project.org')
Warning in install.packages :
 ? unable to access index for repository 
http://cran.rstudio.com/bin/windows/contrib/3.0
trying URL 
'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
Content type 'application/zip' length 225712 bytes (220 Kb)
opened URL
downloaded 220 Kb

package ?aod? successfully unpacked and MD5 sums checked

The downloaded binary packages are in
C:\Users\USER\AppData\Local\Temp\RtmpY7t6Ll\downloaded_packages

On 2020/10/8 ?? 10:52, Duncan Murdoch wrote:
> Just remembered:? RStudio runs its own wrapper around 
> install.packages().? Steven, you should try doing the install from 
> outside of RStudio, and see if it makes a difference.
>
> Duncan Murdoch
>
> On 08/10/2020 9:59 a.m., Duncan Murdoch wrote:
>> He didn't specify the RStudio repos, though it's probably implicitly
>> specified in getOption("repos").? I wonder why install.packages() is
>> looking there, when repos is given explicitly?
>>
>> On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
>>> Drop the RStudio repos.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>> On 05.10.2020 11:10, Steven Yen wrote:
>>>> Thanks. I did as suggested but still received a warning, though the
>>>> installation went through. Anything I could do to install without the
>>>> warning message.
>>>>
>>>> What is the contrib.url argument?
>>>>
>>>> ?? > 
>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>> Warning in install.packages :
>>>> ?? ? unable to access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>> trying URL
>>>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip' 
>>>>
>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>>> opened URL
>>>> downloaded 220 Kb
>>>>
>>>> package ?aod? successfully unpacked and MD5 sums checked
>>>>
>>>> The downloaded binary packages are in
>>>> C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>>>> ?? >
>>>>
>>>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>>>>> Then you'd rather need
>>>>>
>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>
>>>>> or use the contrib.url argument.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>> On 05.10.2020 10:47, Steven Yen wrote:
>>>>>> Thanks for the help. I do update to the latest R-4.0.2. As I said,
>>>>>> for reasons that's hard to explain, some of my tasks are better
>>>>>> handled with an older version of R, in this case R-3.0.3. Please 
>>>>>> just
>>>>>> help me install packages successfully with this older version of R.
>>>>>>
>>>>>> I ran the following line but obviously was not getting it across.
>>>>>>
>>>>>> =====
>>>>>>
>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/') 
>>>>>>>
>>>>>>> Warning in
>>>>>> install.packages : unable to access index for repository
>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
>>>>>> install.packages : unable to access index for repository
>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0 
>>>>>>
>>>>>> Warning in install.packages : package ?aod? is not available (for R
>>>>>> version 3.0.3)
>>>>>>
>>>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>>>>> From
>>>>>>>
>>>>>>> ../ReadMe
>>>>>>> in the mentioned web resource:
>>>>>>>
>>>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>>>>
>>>>>>> We do not hold binaries of several year old versions of R on CRAN.
>>>>>>>
>>>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to
>>>>>>> update to 4.0.2.
>>>>>>>
>>>>>>> Best,
>>>>>>> Uwe Ligges
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>>>>> I had to install/use an older version of (R-3.0.3) for a 
>>>>>>>> reason. While
>>>>>>>> installing a package from CRAN (either in RStudio or R), I 
>>>>>>>> received
>>>>>>>> the
>>>>>>>> following warning message saying unable to access index for 
>>>>>>>> repository
>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message 
>>>>>>>> below. In
>>>>>>>> this case, I tried to install "aod". The install nevertheless went
>>>>>>>> through, as confirmed by the library statement (I did not try 
>>>>>>>> to use
>>>>>>>> it). Any idea? Thank you.
>>>>>>>>
>>>>>>>> =====
>>>>>>>>
>>>>>>>> Warning: unable to access index for repository
>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
>>>>>>>> access index for repository
>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>>>>> install.packages("aod") Warning in install.packages : unable to 
>>>>>>>> access
>>>>>>>> index for repository 
>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>>> Warning in install.packages : unable to access index for 
>>>>>>>> repository
>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>>>>>>> available as a source package but not as a binary Warning in
>>>>>>>> install.packages : package ?aod? is not available (for R version
>>>>>>>> 3.0.3)
>>>>>>>> ? ? > library(aod)
>>>>>>>>
>>>>>>>>
>>>>>>>> ? ????[[alternative HTML version deleted]]
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>> PLEASE do read the posting guide
>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>>
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>

	[[alternative HTML version deleted]]


From x@v|er@g@rc|@5 @end|ng |rom upr@edu  Thu Oct  8 10:10:43 2020
From: x@v|er@g@rc|@5 @end|ng |rom upr@edu (Xavier Garcia)
Date: Thu, 8 Oct 2020 04:10:43 -0400
Subject: [R] RStudio question
Message-ID: <CAHpkSYh_0o6-K91uXf3ExhnPnaRVd=mJU=eHbcptuDv1i1EhKQ@mail.gmail.com>

I'm solving the following problem: Create a variable (column) in the ?wf?
dataframe named ?Zone? that takes value of ?tropic? if Latitude is less
than or equal to 30, or ?non-tropic? for Latitude greater than 30. Show you
Zone variable. Latitude is a column of my dataframe. I don't know the
sintaxis and the process to create the column.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct  8 18:02:56 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 8 Oct 2020 12:02:56 -0400
Subject: [R] unable to access index for repository...
In-Reply-To: <524b76ed-fd43-1591-f7d5-4b27e5537e9f@ntu.edu.tw>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
 <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
 <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>
 <524b76ed-fd43-1591-f7d5-4b27e5537e9f@ntu.edu.tw>
Message-ID: <3b19dd7f-8b87-2baf-573f-5b805a8fdcc5@gmail.com>

Okay, so it's not an RStudio issue.  However, I'd guess setting

   options(repos = "https://cran-archive.r-project.org")

at the start of your session could make everything work.  (I'm guessing 
you currently have it set to "http://cran.rstudio.com", which is the 
source of the last warning below, probably due to an R bug.  But since 
you're using an obsolete version of R, it shouldn't surprise you that it 
has bugs that nobody else is seeing.)

Duncan Murdoch

On 08/10/2020 11:54 a.m., Steven Yen wrote:
> Thanks. You gentlemen please tell me what this means. In R (outside of 
> RStudio) I ran:
> 
> install.packages("aod")
> 
> Received a warning (and installation did not seem to go through).
> 
> Then I tried
> 
> install.packages("aod",repos='https://cran-archive.r-project.org')
> 
> Received a warning but it went on to try
> 
> https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
> 
> and it worked. See log below.
> 
> I expect to continue to use R-3.0.3 for a while and I very much like 
> this to become a routine. Thank you all.
> 
> Steven Yen
> 
>  > install.packages("aod")
> Warning in install.packages :
>  ? unable to access index for repository 
> http://cran.rstudio.com/bin/windows/contrib/3.0
> Warning in install.packages :
>  ? unable to access index for repository 
> http://cran.rstudio.com/bin/windows/contrib/3.0
> 
>  ?? package ?aod? is available as a source package but not as a binary
> 
> Warning in install.packages :
>  ? package ?aod? is not available (for R version 3.0.3)
>  > install.packages("aod",repos='https://cran-archive.r-project.org')
> Warning in install.packages :
>  ? unable to access index for repository 
> http://cran.rstudio.com/bin/windows/contrib/3.0
> trying URL 
> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
> Content type 'application/zip' length 225712 bytes (220 Kb)
> opened URL
> downloaded 220 Kb
> 
> package ?aod? successfully unpacked and MD5 sums checked
> 
> The downloaded binary packages are in
> C:\Users\USER\AppData\Local\Temp\RtmpY7t6Ll\downloaded_packages
> 
> On 2020/10/8 ?? 10:52, Duncan Murdoch wrote:
>> Just remembered:? RStudio runs its own wrapper around 
>> install.packages().? Steven, you should try doing the install from 
>> outside of RStudio, and see if it makes a difference.
>>
>> Duncan Murdoch
>>
>> On 08/10/2020 9:59 a.m., Duncan Murdoch wrote:
>>> He didn't specify the RStudio repos, though it's probably implicitly
>>> specified in getOption("repos").? I wonder why install.packages() is
>>> looking there, when repos is given explicitly?
>>>
>>> On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
>>>> Drop the RStudio repos.
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>> On 05.10.2020 11:10, Steven Yen wrote:
>>>>> Thanks. I did as suggested but still received a warning, though the
>>>>> installation went through. Anything I could do to install without the
>>>>> warning message.
>>>>>
>>>>> What is the contrib.url argument?
>>>>>
>>>>> ?? > 
>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>> Warning in install.packages :
>>>>> ?? ? unable to access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>> trying URL
>>>>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip' 
>>>>>
>>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>>>> opened URL
>>>>> downloaded 220 Kb
>>>>>
>>>>> package ?aod? successfully unpacked and MD5 sums checked
>>>>>
>>>>> The downloaded binary packages are in
>>>>> C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>>>>> ?? >
>>>>>
>>>>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>>>>>> Then you'd rather need
>>>>>>
>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>>
>>>>>> or use the contrib.url argument.
>>>>>>
>>>>>> Best,
>>>>>> Uwe Ligges
>>>>>>
>>>>>>
>>>>>> On 05.10.2020 10:47, Steven Yen wrote:
>>>>>>> Thanks for the help. I do update to the latest R-4.0.2. As I said,
>>>>>>> for reasons that's hard to explain, some of my tasks are better
>>>>>>> handled with an older version of R, in this case R-3.0.3. Please 
>>>>>>> just
>>>>>>> help me install packages successfully with this older version of R.
>>>>>>>
>>>>>>> I ran the following line but obviously was not getting it across.
>>>>>>>
>>>>>>> =====
>>>>>>>
>>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/') 
>>>>>>>>
>>>>>>>> Warning in
>>>>>>> install.packages : unable to access index for repository
>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
>>>>>>> install.packages : unable to access index for repository
>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0 
>>>>>>>
>>>>>>> Warning in install.packages : package ?aod? is not available (for R
>>>>>>> version 3.0.3)
>>>>>>>
>>>>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>>>>>> From
>>>>>>>>
>>>>>>>> ../ReadMe
>>>>>>>> in the mentioned web resource:
>>>>>>>>
>>>>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>>>>>
>>>>>>>> We do not hold binaries of several year old versions of R on CRAN.
>>>>>>>>
>>>>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to
>>>>>>>> update to 4.0.2.
>>>>>>>>
>>>>>>>> Best,
>>>>>>>> Uwe Ligges
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>>>>>> I had to install/use an older version of (R-3.0.3) for a 
>>>>>>>>> reason. While
>>>>>>>>> installing a package from CRAN (either in RStudio or R), I 
>>>>>>>>> received
>>>>>>>>> the
>>>>>>>>> following warning message saying unable to access index for 
>>>>>>>>> repository
>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message 
>>>>>>>>> below. In
>>>>>>>>> this case, I tried to install "aod". The install nevertheless went
>>>>>>>>> through, as confirmed by the library statement (I did not try 
>>>>>>>>> to use
>>>>>>>>> it). Any idea? Thank you.
>>>>>>>>>
>>>>>>>>> =====
>>>>>>>>>
>>>>>>>>> Warning: unable to access index for repository
>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: unable to
>>>>>>>>> access index for repository
>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>>>>>> install.packages("aod") Warning in install.packages : unable to 
>>>>>>>>> access
>>>>>>>>> index for repository 
>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>>>> Warning in install.packages : unable to access index for 
>>>>>>>>> repository
>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>>>>>>>> available as a source package but not as a binary Warning in
>>>>>>>>> install.packages : package ?aod? is not available (for R version
>>>>>>>>> 3.0.3)
>>>>>>>>> ? ? > library(aod)
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ? ????[[alternative HTML version deleted]]
>>>>>>>>>
>>>>>>>>> ______________________________________________
>>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>> PLEASE do read the posting guide
>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide 
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Oct  8 18:26:29 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 8 Oct 2020 09:26:29 -0700
Subject: [R] Lahman Baseball Data Using R DBI Package
In-Reply-To: <CAA99HCxs_oeJhRGEeWAmoQ1CPNU9Pu8GqDbg-6ZAh1L7fvJS1w@mail.gmail.com>
References: <523DDD41433C4810A1C1C8D755A1A940@OWNERPC>
 <CAHqSRuR-NmoGaEW9YavHxVNitZmezK_rcnwpRzuoHik657wtVQ@mail.gmail.com>
 <C44F824A74414353A579A0B468883116@OWNERPC>
 <CAHqSRuRoLcUw0mOJ_aDud8rivbdCvxtOreRjdp-N8AJ0nnv8ow@mail.gmail.com>
 <CAA99HCxs_oeJhRGEeWAmoQ1CPNU9Pu8GqDbg-6ZAh1L7fvJS1w@mail.gmail.com>
Message-ID: <CAHqSRuSPKww1fpFMebC6sWRT-VyCkvEM82A_AGqQWJS18jq4xg@mail.gmail.com>

This is really a feature of SQL, not R.  SQL requires that you double quote
column names that start with numbers, include spaces, etc., or that are SQL
key words.  E.g.,

> d <- data.frame(Order=c("sit","stay","heel"),
Where=c("here","there","there"), From=c("me","me","you"))
> sqldf::sqldf("select Order,Where,From from d WHERE From=\"me\"")
Error: near "Order": syntax error
> sqldf::sqldf("select \"Order\",\"Where\",\"From\" from d Where
\"From\"=\"me\"")
  Order Where From
1   sit  here   me
2  stay there   me

You may as well double quote all column names in SQL queries.

-Bill

On Wed, Oct 7, 2020 at 9:57 PM William Michels <wjm1 at caa.columbia.edu>
wrote:

> Hi Philip,
>
> You've probably realized by now that R doesn't like column names that
> start with a number. If you try to access an R-dataframe column named
> 2B or 3B with the familiar "$" notation, you'll get an error:
>
> > library(DBI)
> > library(RSQLite)
> > con2 <- dbConnect(SQLite(), "~/R_Dir/lahmansbaseballdb.sqlite")
> > Hack12Batting <- dbGetQuery(con2,"SELECT * FROM batting WHERE yearID =
> 2018 AND AB >600 ORDER BY AB DESC")
> > Hack12Batting$AB
>  [1] 664 661 639 632 632 632 626 623 620 618 617 613 606 605 602
> > Hack12Batting$3B
> Error: unexpected numeric constant in "Hack12Batting$3"
>
> How to handle? You can rename columns on-the-fly by piping. See
> reference [1] and use either library(magrittr) or library(dplyr) or a
> combination thereof:
>
> library(magrittr)
> dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
> ORDER BY AB DESC") %>% set_colnames(make.names(colnames(.)))
>
> #OR one of the following:
>
> library(dplyr)
> dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
> ORDER BY AB DESC") %>% rename(X2B = `2B`, X3B = `3B`)
>
> library(dplyr)
> dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
> ORDER BY AB DESC") %>% `colnames<-`(make.names(colnames(.)))
>
> library(dplyr)
> dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
> ORDER BY AB DESC") %>% magrittr::set_colnames(make.names(colnames(.)))
>
> Best, Bill.
>
> W. Michels, Ph.D.
>
> [1]
> https://stackoverflow.com/questions/28100780/use-with-replacement-functions-like-colnames
>
>
>
>
>
>
>
>
>
>
> On Fri, Oct 2, 2020 at 7:34 PM Bill Dunlap <williamwdunlap at gmail.com>
> wrote:
> >
> > The double quotes are required by SQL if a name is not of the form
> > letter-followed-by-any-number-of-letters-or-numbers or if the name is a
> SQL
> > keyword like 'where' or 'select'.  If you are doing this from a function,
> > you may as well quote all the names.
> >
> > -Bill
> >
> > On Fri, Oct 2, 2020 at 6:18 PM Philip <herd_dog at cox.net> wrote:
> >
> > > The \?2B\? worked.  Have no idea why.  Can you point me somewhere that
> can
> > > explain this to me.
> > >
> > > Thanks,
> > > Philip
> > >
> > > *From:* Bill Dunlap
> > > *Sent:* Friday, October 2, 2020 3:54 PM
> > > *To:* Philip
> > > *Cc:* r-help
> > > *Subject:* Re: [R] Lahman Baseball Data Using R DBI Package
> > >
> > > Have you tried putting double quotes around 2B and 3B:  "...2B, 3B,
> ..."
> > > -> "...\"2B\",\"3B\",..."?
> > >
> > > -Bill
> > >
> > > On Fri, Oct 2, 2020 at 3:49 PM Philip <herd_dog at cox.net> wrote:
> > >
> > >> I?m trying to pull data from one table (batting) in the Lahman
> Baseball
> > >> database.  Notice X2B for doubles and X3B for triples ? fourth and
> fifth
> > >> from the right.
> > >>
> > >> The dbGetQuery function runs fine when I leave there two out but I get
> > >> error messages (in red) when I include 2B/3B or X2B/X3B.
> > >>
> > >> Can anyone give me some direction?
> > >>
> > >> Thanks,
> > >> Philip Heinrich
> > >>
> > >>
> ***************************************************************************************************************************************************
> > >> tail(dbReadTable(Lahman,"batting"))
> > >>
> > >> ID                       playerID      yearID    stint teamID team_ID
> > >> lgID   G        G_batting   AB     R     H       X2B    X3B   HR
>  RBI   SB
> > >> 107414 107414 yastrmi01      2019       1       SFN       2920
> > >> NL     107        NA          371   64  101      22       3     21
> > >> 55    2
> > >> 107416 107416 yelicch01      2019        1       MIL       2911
> > >> NL     130        NA          489 100  161      29       3     44
> 97   30
> > >> 107419 107419 youngal01     2019       1       ARI        2896
> > >> NL       17        NA            25     1      1        0       0
> > >> 0      0     0
> > >> 107420 107420 zagunma01   2019        1      CHN       2901      NL
> > >> 30        NA             36     2      9        3       0      0
> > >> 5     0
> > >> 107422 107422 zavalse01      2019        1      CHA       2900
> > >> AL        5        NA             12     1      1        0       0
> > >> 0       0     0
> > >> 107427 107427 zimmery01     2019        1      WAS      2925      NL
> > >> 52        NA           171   20    44        9      0      6      27
>    0
> > >> 107428 107428 zobribe01       2019        1      CHN      2901
> > >> NL      47        NA           150   24   39         5      0      1
> > >> 17     0
> > >> 107429 107429 zuninmi01       2019        1      TBA       2922
> > >> AL      90        NA           266    30  44       10      1      9
> > >> 32     0
> > >>
> > >>
> > >> Hack11Batting <- dbGetQuery(Lahman,"SELECT
> > >> playerID,yearID,AB,R,H,2B,3B,HR,
> > >>                             RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM
> > >> batting
> > >>                             WHERE yearID = 2018 AND AB >99")
> > >> Error: unrecognized token: "2B"
> > >>
> > >> Hack11Batting <- dbGetQuery(Lahman,"SELECT
> > >> playerID,yearID,AB,R,H,X2B,X3B,HR,
> > >>                             RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM
> > >> batting
> > >>                             WHERE yearID = 2018 AND AB >99")
> > >> Error: no such column: X2B
> > >>
> > >>         [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > >> http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> > >>
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @tyen @end|ng |rom ntu@edu@tw  Thu Oct  8 18:38:24 2020
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Fri, 9 Oct 2020 00:38:24 +0800
Subject: [R] unable to access index for repository...
In-Reply-To: <3b19dd7f-8b87-2baf-573f-5b805a8fdcc5@gmail.com>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
 <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
 <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>
 <524b76ed-fd43-1591-f7d5-4b27e5537e9f@ntu.edu.tw>
 <3b19dd7f-8b87-2baf-573f-5b805a8fdcc5@gmail.com>
Message-ID: <9dd5c768-3cbe-c128-d86d-1113f18bede4@ntu.edu.tw>

Sorry Gentlemen and all. Now this is becoming a joke (to me). I repeated 
what I did earlier, with and without the option to set repos suggested 
by Duncan. Now it does not work. I wonder whether it is dependent on the 
mirror I chose, but I do not remember the one I chose earlier when it work.

I need your help, gentlemen, as I need to use R-3.0.3 for my task.

 > options(repos="https://cran-archive.r-project.org")
 > chooseCRANmirror()
 > install.packages("aod")
Warning: unable to access index for repository 
https://cran-archive.r-project.org/bin/windows/contrib/3.0
Warning: unable to access index for repository 
http://lib.stat.cmu.edu/R/CRAN/bin/windows/contrib/3.0

 ?? package ?aod? is available as a source package but not as a binary

Warning message:
package ?aod? is not available (for R version 3.0.3)
 > install.packages("aod",repos='https://cran-archive.r-project.org')
Warning: unable to access index for repository 
https://cran-archive.r-project.org/bin/windows/contrib/3.0
Warning message:
package ?aod? is not available (for R version 3.0.3)

On 2020/10/9 ?? 12:02, Duncan Murdoch wrote:
> Okay, so it's not an RStudio issue.? However, I'd guess setting
>
> ? options(repos = "https://cran-archive.r-project.org")
>
> at the start of your session could make everything work.? (I'm 
> guessing you currently have it set to "http://cran.rstudio.com", which 
> is the source of the last warning below, probably due to an R bug.? 
> But since you're using an obsolete version of R, it shouldn't surprise 
> you that it has bugs that nobody else is seeing.)
>
> Duncan Murdoch
>
> On 08/10/2020 11:54 a.m., Steven Yen wrote:
>> Thanks. You gentlemen please tell me what this means. In R (outside 
>> of RStudio) I ran:
>>
>> install.packages("aod")
>>
>> Received a warning (and installation did not seem to go through).
>>
>> Then I tried
>>
>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>
>> Received a warning but it went on to try
>>
>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
>>
>> and it worked. See log below.
>>
>> I expect to continue to use R-3.0.3 for a while and I very much like 
>> this to become a routine. Thank you all.
>>
>> Steven Yen
>>
>> ?> install.packages("aod")
>> Warning in install.packages :
>> ?? unable to access index for repository 
>> http://cran.rstudio.com/bin/windows/contrib/3.0
>> Warning in install.packages :
>> ?? unable to access index for repository 
>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>
>> ??? package ?aod? is available as a source package but not as a binary
>>
>> Warning in install.packages :
>> ?? package ?aod? is not available (for R version 3.0.3)
>> ?> install.packages("aod",repos='https://cran-archive.r-project.org')
>> Warning in install.packages :
>> ?? unable to access index for repository 
>> http://cran.rstudio.com/bin/windows/contrib/3.0
>> trying URL 
>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
>> Content type 'application/zip' length 225712 bytes (220 Kb)
>> opened URL
>> downloaded 220 Kb
>>
>> package ?aod? successfully unpacked and MD5 sums checked
>>
>> The downloaded binary packages are in
>> C:\Users\USER\AppData\Local\Temp\RtmpY7t6Ll\downloaded_packages
>>
>> On 2020/10/8 ?? 10:52, Duncan Murdoch wrote:
>>> Just remembered:? RStudio runs its own wrapper around 
>>> install.packages().? Steven, you should try doing the install from 
>>> outside of RStudio, and see if it makes a difference.
>>>
>>> Duncan Murdoch
>>>
>>> On 08/10/2020 9:59 a.m., Duncan Murdoch wrote:
>>>> He didn't specify the RStudio repos, though it's probably implicitly
>>>> specified in getOption("repos").? I wonder why install.packages() is
>>>> looking there, when repos is given explicitly?
>>>>
>>>> On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
>>>>> Drop the RStudio repos.
>>>>>
>>>>> Best,
>>>>> Uwe Ligges
>>>>>
>>>>> On 05.10.2020 11:10, Steven Yen wrote:
>>>>>> Thanks. I did as suggested but still received a warning, though the
>>>>>> installation went through. Anything I could do to install without 
>>>>>> the
>>>>>> warning message.
>>>>>>
>>>>>> What is the contrib.url argument?
>>>>>>
>>>>>> ?? > 
>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>> Warning in install.packages :
>>>>>> ?? ? unable to access index for repository
>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>> trying URL
>>>>>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip' 
>>>>>>
>>>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>>>>> opened URL
>>>>>> downloaded 220 Kb
>>>>>>
>>>>>> package ?aod? successfully unpacked and MD5 sums checked
>>>>>>
>>>>>> The downloaded binary packages are in
>>>>>> C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>>>>>> ?? >
>>>>>>
>>>>>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>>>>>>> Then you'd rather need
>>>>>>>
>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>>>
>>>>>>> or use the contrib.url argument.
>>>>>>>
>>>>>>> Best,
>>>>>>> Uwe Ligges
>>>>>>>
>>>>>>>
>>>>>>> On 05.10.2020 10:47, Steven Yen wrote:
>>>>>>>> Thanks for the help. I do update to the latest R-4.0.2. As I said,
>>>>>>>> for reasons that's hard to explain, some of my tasks are better
>>>>>>>> handled with an older version of R, in this case R-3.0.3. 
>>>>>>>> Please just
>>>>>>>> help me install packages successfully with this older version 
>>>>>>>> of R.
>>>>>>>>
>>>>>>>> I ran the following line but obviously was not getting it across.
>>>>>>>>
>>>>>>>> =====
>>>>>>>>
>>>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/') 
>>>>>>>>>
>>>>>>>>> Warning in
>>>>>>>> install.packages : unable to access index for repository
>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
>>>>>>>> install.packages : unable to access index for repository
>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0 
>>>>>>>>
>>>>>>>> Warning in install.packages : package ?aod? is not available 
>>>>>>>> (for R
>>>>>>>> version 3.0.3)
>>>>>>>>
>>>>>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>>>>>>> From
>>>>>>>>>
>>>>>>>>> ../ReadMe
>>>>>>>>> in the mentioned web resource:
>>>>>>>>>
>>>>>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>>>>>>
>>>>>>>>> We do not hold binaries of several year old versions of R on 
>>>>>>>>> CRAN.
>>>>>>>>>
>>>>>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to
>>>>>>>>> update to 4.0.2.
>>>>>>>>>
>>>>>>>>> Best,
>>>>>>>>> Uwe Ligges
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>>>>>>> I had to install/use an older version of (R-3.0.3) for a 
>>>>>>>>>> reason. While
>>>>>>>>>> installing a package from CRAN (either in RStudio or R), I 
>>>>>>>>>> received
>>>>>>>>>> the
>>>>>>>>>> following warning message saying unable to access index for 
>>>>>>>>>> repository
>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message 
>>>>>>>>>> below. In
>>>>>>>>>> this case, I tried to install "aod". The install nevertheless 
>>>>>>>>>> went
>>>>>>>>>> through, as confirmed by the library statement (I did not try 
>>>>>>>>>> to use
>>>>>>>>>> it). Any idea? Thank you.
>>>>>>>>>>
>>>>>>>>>> =====
>>>>>>>>>>
>>>>>>>>>> Warning: unable to access index for repository
>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning: 
>>>>>>>>>> unable to
>>>>>>>>>> access index for repository
>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>>>>>>> install.packages("aod") Warning in install.packages : unable 
>>>>>>>>>> to access
>>>>>>>>>> index for repository 
>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>>>>> Warning in install.packages : unable to access index for 
>>>>>>>>>> repository
>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>>>>>>>>> available as a source package but not as a binary Warning in
>>>>>>>>>> install.packages : package ?aod? is not available (for R version
>>>>>>>>>> 3.0.3)
>>>>>>>>>> ? ? > library(aod)
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ? ????[[alternative HTML version deleted]]
>>>>>>>>>>
>>>>>>>>>> ______________________________________________
>>>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, 
>>>>>>>>>> see
>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>>> PLEASE do read the posting guide
>>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>>> and provide commented, minimal, self-contained, reproducible 
>>>>>>>>>> code.
>>>>>>>>>>
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide 
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct  8 18:49:17 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 8 Oct 2020 12:49:17 -0400
Subject: [R] unable to access index for repository...
In-Reply-To: <9dd5c768-3cbe-c128-d86d-1113f18bede4@ntu.edu.tw>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
 <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
 <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>
 <524b76ed-fd43-1591-f7d5-4b27e5537e9f@ntu.edu.tw>
 <3b19dd7f-8b87-2baf-573f-5b805a8fdcc5@gmail.com>
 <9dd5c768-3cbe-c128-d86d-1113f18bede4@ntu.edu.tw>
Message-ID: <85614667-c504-4668-2f05-6ff751e48992@gmail.com>

Don't choose a mirror.  That will override the repos choice.

Do update R to a current version if you aren't able to debug this 
yourself.

Duncan Murdoch

On 08/10/2020 12:38 p.m., Steven Yen wrote:
> Sorry Gentlemen and all. Now this is becoming a joke (to me). I repeated
> what I did earlier, with and without the option to set repos suggested
> by Duncan. Now it does not work. I wonder whether it is dependent on the
> mirror I chose, but I do not remember the one I chose earlier when it work.
> 
> I need your help, gentlemen, as I need to use R-3.0.3 for my task.
> 
>   > options(repos="https://cran-archive.r-project.org")
>   > chooseCRANmirror()
>   > install.packages("aod")
> Warning: unable to access index for repository
> https://cran-archive.r-project.org/bin/windows/contrib/3.0
> Warning: unable to access index for repository
> http://lib.stat.cmu.edu/R/CRAN/bin/windows/contrib/3.0
> 
>   ?? package ?aod? is available as a source package but not as a binary
> 
> Warning message:
> package ?aod? is not available (for R version 3.0.3)
>   > install.packages("aod",repos='https://cran-archive.r-project.org')
> Warning: unable to access index for repository
> https://cran-archive.r-project.org/bin/windows/contrib/3.0
> Warning message:
> package ?aod? is not available (for R version 3.0.3)
> 
> On 2020/10/9 ?? 12:02, Duncan Murdoch wrote:
>> Okay, so it's not an RStudio issue.? However, I'd guess setting
>>
>>  ? options(repos = "https://cran-archive.r-project.org")
>>
>> at the start of your session could make everything work.? (I'm
>> guessing you currently have it set to "http://cran.rstudio.com", which
>> is the source of the last warning below, probably due to an R bug.
>> But since you're using an obsolete version of R, it shouldn't surprise
>> you that it has bugs that nobody else is seeing.)
>>
>> Duncan Murdoch
>>
>> On 08/10/2020 11:54 a.m., Steven Yen wrote:
>>> Thanks. You gentlemen please tell me what this means. In R (outside
>>> of RStudio) I ran:
>>>
>>> install.packages("aod")
>>>
>>> Received a warning (and installation did not seem to go through).
>>>
>>> Then I tried
>>>
>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>
>>> Received a warning but it went on to try
>>>
>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
>>>
>>> and it worked. See log below.
>>>
>>> I expect to continue to use R-3.0.3 for a while and I very much like
>>> this to become a routine. Thank you all.
>>>
>>> Steven Yen
>>>
>>>  ?> install.packages("aod")
>>> Warning in install.packages :
>>>  ?? unable to access index for repository
>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>> Warning in install.packages :
>>>  ?? unable to access index for repository
>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>
>>>  ??? package ?aod? is available as a source package but not as a binary
>>>
>>> Warning in install.packages :
>>>  ?? package ?aod? is not available (for R version 3.0.3)
>>>  ?> install.packages("aod",repos='https://cran-archive.r-project.org')
>>> Warning in install.packages :
>>>  ?? unable to access index for repository
>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>> trying URL
>>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>> opened URL
>>> downloaded 220 Kb
>>>
>>> package ?aod? successfully unpacked and MD5 sums checked
>>>
>>> The downloaded binary packages are in
>>> C:\Users\USER\AppData\Local\Temp\RtmpY7t6Ll\downloaded_packages
>>>
>>> On 2020/10/8 ?? 10:52, Duncan Murdoch wrote:
>>>> Just remembered:? RStudio runs its own wrapper around
>>>> install.packages().? Steven, you should try doing the install from
>>>> outside of RStudio, and see if it makes a difference.
>>>>
>>>> Duncan Murdoch
>>>>
>>>> On 08/10/2020 9:59 a.m., Duncan Murdoch wrote:
>>>>> He didn't specify the RStudio repos, though it's probably implicitly
>>>>> specified in getOption("repos").? I wonder why install.packages() is
>>>>> looking there, when repos is given explicitly?
>>>>>
>>>>> On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
>>>>>> Drop the RStudio repos.
>>>>>>
>>>>>> Best,
>>>>>> Uwe Ligges
>>>>>>
>>>>>> On 05.10.2020 11:10, Steven Yen wrote:
>>>>>>> Thanks. I did as suggested but still received a warning, though the
>>>>>>> installation went through. Anything I could do to install without
>>>>>>> the
>>>>>>> warning message.
>>>>>>>
>>>>>>> What is the contrib.url argument?
>>>>>>>
>>>>>>>  ?? >
>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>>> Warning in install.packages :
>>>>>>>  ?? ? unable to access index for repository
>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>> trying URL
>>>>>>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
>>>>>>>
>>>>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>>>>>> opened URL
>>>>>>> downloaded 220 Kb
>>>>>>>
>>>>>>> package ?aod? successfully unpacked and MD5 sums checked
>>>>>>>
>>>>>>> The downloaded binary packages are in
>>>>>>> C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>>>>>>>  ?? >
>>>>>>>
>>>>>>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>>>>>>>> Then you'd rather need
>>>>>>>>
>>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>>>>
>>>>>>>> or use the contrib.url argument.
>>>>>>>>
>>>>>>>> Best,
>>>>>>>> Uwe Ligges
>>>>>>>>
>>>>>>>>
>>>>>>>> On 05.10.2020 10:47, Steven Yen wrote:
>>>>>>>>> Thanks for the help. I do update to the latest R-4.0.2. As I said,
>>>>>>>>> for reasons that's hard to explain, some of my tasks are better
>>>>>>>>> handled with an older version of R, in this case R-3.0.3.
>>>>>>>>> Please just
>>>>>>>>> help me install packages successfully with this older version
>>>>>>>>> of R.
>>>>>>>>>
>>>>>>>>> I ran the following line but obviously was not getting it across.
>>>>>>>>>
>>>>>>>>> =====
>>>>>>>>>
>>>>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/')
>>>>>>>>>>
>>>>>>>>>> Warning in
>>>>>>>>> install.packages : unable to access index for repository
>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
>>>>>>>>> install.packages : unable to access index for repository
>>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0
>>>>>>>>>
>>>>>>>>> Warning in install.packages : package ?aod? is not available
>>>>>>>>> (for R
>>>>>>>>> version 3.0.3)
>>>>>>>>>
>>>>>>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>>>>>>>> From
>>>>>>>>>>
>>>>>>>>>> ../ReadMe
>>>>>>>>>> in the mentioned web resource:
>>>>>>>>>>
>>>>>>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>>>>>>>
>>>>>>>>>> We do not hold binaries of several year old versions of R on
>>>>>>>>>> CRAN.
>>>>>>>>>>
>>>>>>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to
>>>>>>>>>> update to 4.0.2.
>>>>>>>>>>
>>>>>>>>>> Best,
>>>>>>>>>> Uwe Ligges
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>>>>>>>> I had to install/use an older version of (R-3.0.3) for a
>>>>>>>>>>> reason. While
>>>>>>>>>>> installing a package from CRAN (either in RStudio or R), I
>>>>>>>>>>> received
>>>>>>>>>>> the
>>>>>>>>>>> following warning message saying unable to access index for
>>>>>>>>>>> repository
>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message
>>>>>>>>>>> below. In
>>>>>>>>>>> this case, I tried to install "aod". The install nevertheless
>>>>>>>>>>> went
>>>>>>>>>>> through, as confirmed by the library statement (I did not try
>>>>>>>>>>> to use
>>>>>>>>>>> it). Any idea? Thank you.
>>>>>>>>>>>
>>>>>>>>>>> =====
>>>>>>>>>>>
>>>>>>>>>>> Warning: unable to access index for repository
>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning:
>>>>>>>>>>> unable to
>>>>>>>>>>> access index for repository
>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>>>>>>>> install.packages("aod") Warning in install.packages : unable
>>>>>>>>>>> to access
>>>>>>>>>>> index for repository
>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>>>>>> Warning in install.packages : unable to access index for
>>>>>>>>>>> repository
>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package ?aod? is
>>>>>>>>>>> available as a source package but not as a binary Warning in
>>>>>>>>>>> install.packages : package ?aod? is not available (for R version
>>>>>>>>>>> 3.0.3)
>>>>>>>>>>>  ? ? > library(aod)
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>  ? ????[[alternative HTML version deleted]]
>>>>>>>>>>>
>>>>>>>>>>> ______________________________________________
>>>>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>>>>>>>>>>> see
>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>>>> PLEASE do read the posting guide
>>>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>>>> and provide commented, minimal, self-contained, reproducible
>>>>>>>>>>> code.
>>>>>>>>>>>
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>
>>>>
>>


From @tyen @end|ng |rom ntu@edu@tw  Thu Oct  8 19:22:54 2020
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Fri, 9 Oct 2020 01:22:54 +0800
Subject: [R] unable to access index for repository...
In-Reply-To: <85614667-c504-4668-2f05-6ff751e48992@gmail.com>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
 <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
 <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>
 <524b76ed-fd43-1591-f7d5-4b27e5537e9f@ntu.edu.tw>
 <3b19dd7f-8b87-2baf-573f-5b805a8fdcc5@gmail.com>
 <9dd5c768-3cbe-c128-d86d-1113f18bede4@ntu.edu.tw>
 <85614667-c504-4668-2f05-6ff751e48992@gmail.com>
Message-ID: <5d3ecbde-ea51-2854-bfe8-899d6a70d1c6@ntu.edu.tw>

Thanks for the help. I have a reason to continue with R-3.0.3. I used 
maxLik to estimate econometric models and some of them are better 
handled with R-3.0.3 (but not later)----a sad reality I do not like.

Here is what I did. I downloaded

https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip

and installed the zip file, which worked in both RStudio and R (without 
RStudio).

In RStudio, I go Tools -> Install packages -> Install from -> (Choose 
zip) -> (Browse to the zip file)

IN R, I go Packages -> Install packages from local file(s) -> (Browse to 
the zip file)...

Below is the command line generated and the prompt.

 > install.packages("C:/Users/USER/Downloads/aod_1.3.zip", repos = NULL, 
type = "win.binary")
package ?aod? successfully unpacked and MD5 sums checked

I will always be able to download the proper .zip file from CRAC 
Archive, right. So, this will always work for me? Thank you all !! If 
there are more direct options that work, I would still be interested to 
know.

Steven Yen

On 2020/10/9 ?? 12:49, Duncan Murdoch wrote:
> Don't choose a mirror.? That will override the repos choice.
>
> Do update R to a current version if you aren't able to debug this 
> yourself.
>
> Duncan Murdoch
>
> On 08/10/2020 12:38 p.m., Steven Yen wrote:
>> Sorry Gentlemen and all. Now this is becoming a joke (to me). I repeated
>> what I did earlier, with and without the option to set repos suggested
>> by Duncan. Now it does not work. I wonder whether it is dependent on the
>> mirror I chose, but I do not remember the one I chose earlier when it 
>> work.
>>
>> I need your help, gentlemen, as I need to use R-3.0.3 for my task.
>>
>> ? > options(repos="https://cran-archive.r-project.org")
>> ? > chooseCRANmirror()
>> ? > install.packages("aod")
>> Warning: unable to access index for repository
>> https://cran-archive.r-project.org/bin/windows/contrib/3.0
>> Warning: unable to access index for repository
>> http://lib.stat.cmu.edu/R/CRAN/bin/windows/contrib/3.0
>>
>> ? ?? package ?aod? is available as a source package but not as a binary
>>
>> Warning message:
>> package ?aod? is not available (for R version 3.0.3)
>> ? > install.packages("aod",repos='https://cran-archive.r-project.org')
>> Warning: unable to access index for repository
>> https://cran-archive.r-project.org/bin/windows/contrib/3.0
>> Warning message:
>> package ?aod? is not available (for R version 3.0.3)
>>
>> On 2020/10/9 ?? 12:02, Duncan Murdoch wrote:
>>> Okay, so it's not an RStudio issue. However, I'd guess setting
>>>
>>> ?? options(repos = "https://cran-archive.r-project.org")
>>>
>>> at the start of your session could make everything work.? (I'm
>>> guessing you currently have it set to "http://cran.rstudio.com", which
>>> is the source of the last warning below, probably due to an R bug.
>>> But since you're using an obsolete version of R, it shouldn't surprise
>>> you that it has bugs that nobody else is seeing.)
>>>
>>> Duncan Murdoch
>>>
>>> On 08/10/2020 11:54 a.m., Steven Yen wrote:
>>>> Thanks. You gentlemen please tell me what this means. In R (outside
>>>> of RStudio) I ran:
>>>>
>>>> install.packages("aod")
>>>>
>>>> Received a warning (and installation did not seem to go through).
>>>>
>>>> Then I tried
>>>>
>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>
>>>> Received a warning but it went on to try
>>>>
>>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
>>>>
>>>> and it worked. See log below.
>>>>
>>>> I expect to continue to use R-3.0.3 for a while and I very much like
>>>> this to become a routine. Thank you all.
>>>>
>>>> Steven Yen
>>>>
>>>> ??> install.packages("aod")
>>>> Warning in install.packages :
>>>> ??? unable to access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>> Warning in install.packages :
>>>> ??? unable to access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>
>>>> ???? package ?aod? is available as a source package but not as a 
>>>> binary
>>>>
>>>> Warning in install.packages :
>>>> ??? package ?aod? is not available (for R version 3.0.3)
>>>> ??> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>> Warning in install.packages :
>>>> ??? unable to access index for repository
>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>> trying URL
>>>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip' 
>>>>
>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>>> opened URL
>>>> downloaded 220 Kb
>>>>
>>>> package ?aod? successfully unpacked and MD5 sums checked
>>>>
>>>> The downloaded binary packages are in
>>>> C:\Users\USER\AppData\Local\Temp\RtmpY7t6Ll\downloaded_packages
>>>>
>>>> On 2020/10/8 ?? 10:52, Duncan Murdoch wrote:
>>>>> Just remembered:? RStudio runs its own wrapper around
>>>>> install.packages().? Steven, you should try doing the install from
>>>>> outside of RStudio, and see if it makes a difference.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>> On 08/10/2020 9:59 a.m., Duncan Murdoch wrote:
>>>>>> He didn't specify the RStudio repos, though it's probably implicitly
>>>>>> specified in getOption("repos").? I wonder why install.packages() is
>>>>>> looking there, when repos is given explicitly?
>>>>>>
>>>>>> On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
>>>>>>> Drop the RStudio repos.
>>>>>>>
>>>>>>> Best,
>>>>>>> Uwe Ligges
>>>>>>>
>>>>>>> On 05.10.2020 11:10, Steven Yen wrote:
>>>>>>>> Thanks. I did as suggested but still received a warning, though 
>>>>>>>> the
>>>>>>>> installation went through. Anything I could do to install without
>>>>>>>> the
>>>>>>>> warning message.
>>>>>>>>
>>>>>>>> What is the contrib.url argument?
>>>>>>>>
>>>>>>>> ??? >
>>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>>>> Warning in install.packages :
>>>>>>>> ??? ? unable to access index for repository
>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>>> trying URL
>>>>>>>> 'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip' 
>>>>>>>>
>>>>>>>>
>>>>>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>>>>>>> opened URL
>>>>>>>> downloaded 220 Kb
>>>>>>>>
>>>>>>>> package ?aod? successfully unpacked and MD5 sums checked
>>>>>>>>
>>>>>>>> The downloaded binary packages are in
>>>>>>>> C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>>>>>>>> ??? >
>>>>>>>>
>>>>>>>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>>>>>>>>> Then you'd rather need
>>>>>>>>>
>>>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org') 
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> or use the contrib.url argument.
>>>>>>>>>
>>>>>>>>> Best,
>>>>>>>>> Uwe Ligges
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On 05.10.2020 10:47, Steven Yen wrote:
>>>>>>>>>> Thanks for the help. I do update to the latest R-4.0.2. As I 
>>>>>>>>>> said,
>>>>>>>>>> for reasons that's hard to explain, some of my tasks are better
>>>>>>>>>> handled with an older version of R, in this case R-3.0.3.
>>>>>>>>>> Please just
>>>>>>>>>> help me install packages successfully with this older version
>>>>>>>>>> of R.
>>>>>>>>>>
>>>>>>>>>> I ran the following line but obviously was not getting it 
>>>>>>>>>> across.
>>>>>>>>>>
>>>>>>>>>> =====
>>>>>>>>>>
>>>>>>>>>>> install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/') 
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Warning in
>>>>>>>>>> install.packages : unable to access index for repository
>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
>>>>>>>>>> install.packages : unable to access index for repository
>>>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0 
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Warning in install.packages : package ?aod? is not available
>>>>>>>>>> (for R
>>>>>>>>>> version 3.0.3)
>>>>>>>>>>
>>>>>>>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>>>>>>>>> From
>>>>>>>>>>>
>>>>>>>>>>> ../ReadMe
>>>>>>>>>>> in the mentioned web resource:
>>>>>>>>>>>
>>>>>>>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>>>>>>>>
>>>>>>>>>>> We do not hold binaries of several year old versions of R on
>>>>>>>>>>> CRAN.
>>>>>>>>>>>
>>>>>>>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider to
>>>>>>>>>>> update to 4.0.2.
>>>>>>>>>>>
>>>>>>>>>>> Best,
>>>>>>>>>>> Uwe Ligges
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>>>>>>>>> I had to install/use an older version of (R-3.0.3) for a
>>>>>>>>>>>> reason. While
>>>>>>>>>>>> installing a package from CRAN (either in RStudio or R), I
>>>>>>>>>>>> received
>>>>>>>>>>>> the
>>>>>>>>>>>> following warning message saying unable to access index for
>>>>>>>>>>>> repository
>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See message
>>>>>>>>>>>> below. In
>>>>>>>>>>>> this case, I tried to install "aod". The install nevertheless
>>>>>>>>>>>> went
>>>>>>>>>>>> through, as confirmed by the library statement (I did not try
>>>>>>>>>>>> to use
>>>>>>>>>>>> it). Any idea? Thank you.
>>>>>>>>>>>>
>>>>>>>>>>>> =====
>>>>>>>>>>>>
>>>>>>>>>>>> Warning: unable to access index for repository
>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning:
>>>>>>>>>>>> unable to
>>>>>>>>>>>> access index for repository
>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>>>>>>>>> install.packages("aod") Warning in install.packages : unable
>>>>>>>>>>>> to access
>>>>>>>>>>>> index for repository
>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>>>>>>> Warning in install.packages : unable to access index for
>>>>>>>>>>>> repository
>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package 
>>>>>>>>>>>> ?aod? is
>>>>>>>>>>>> available as a source package but not as a binary Warning in
>>>>>>>>>>>> install.packages : package ?aod? is not available (for R 
>>>>>>>>>>>> version
>>>>>>>>>>>> 3.0.3)
>>>>>>>>>>>> ?? ? > library(aod)
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> ?? ????[[alternative HTML version deleted]]
>>>>>>>>>>>>
>>>>>>>>>>>> ______________________________________________
>>>>>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>>>>>>>>>>>> see
>>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>>>>> PLEASE do read the posting guide
>>>>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>>>>> and provide commented, minimal, self-contained, reproducible
>>>>>>>>>>>> code.
>>>>>>>>>>>>
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>> PLEASE do read the posting guide
>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>
>>>>>>
>>>>>
>>>
>


From pd@|gd @end|ng |rom gm@||@com  Thu Oct  8 19:35:41 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 8 Oct 2020 19:35:41 +0200
Subject: [R] RStudio question
In-Reply-To: <CAHpkSYh_0o6-K91uXf3ExhnPnaRVd=mJU=eHbcptuDv1i1EhKQ@mail.gmail.com>
References: <CAHpkSYh_0o6-K91uXf3ExhnPnaRVd=mJU=eHbcptuDv1i1EhKQ@mail.gmail.com>
Message-ID: <2A932FDD-3516-4DC1-BC7A-F5E7162F11E8@gmail.com>

This list has a no-homework policy. I assume that your teaching material has examples that are sufficiently similar so that you should be able to modify them.

-pd

> On 8 Oct 2020, at 10:10 , Xavier Garcia via R-help <r-help at r-project.org> wrote:
> 
> I'm solving the following problem: Create a variable (column) in the ?wf?
> dataframe named ?Zone? that takes value of ?tropic? if Latitude is less
> than or equal to 30, or ?non-tropic? for Latitude greater than 30. Show you
> Zone variable. Latitude is a column of my dataframe. I don't know the
> sintaxis and the process to create the column.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Oct  8 19:37:42 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 08 Oct 2020 10:37:42 -0700
Subject: [R] unable to access index for repository...
In-Reply-To: <5d3ecbde-ea51-2854-bfe8-899d6a70d1c6@ntu.edu.tw>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
 <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
 <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>
 <524b76ed-fd43-1591-f7d5-4b27e5537e9f@ntu.edu.tw>
 <3b19dd7f-8b87-2baf-573f-5b805a8fdcc5@gmail.com>
 <9dd5c768-3cbe-c128-d86d-1113f18bede4@ntu.edu.tw>
 <85614667-c504-4668-2f05-6ff751e48992@gmail.com>
 <5d3ecbde-ea51-2854-bfe8-899d6a70d1c6@ntu.edu.tw>
Message-ID: <C894A000-B78E-45B1-B88F-1B79081DE4BD@dcn.davis.ca.us>

All support on this list is voluntary, and support for old versions of R is not even necessarily on-topic here which is why you keep getting nudged to upgrade. Your "need" for support for an old version is definitely not "our" problem, so I suggest you start looking for a consultant if this issue is that important to you. Such is the nature of volunteer-developed open source software... so support your local experts.

On October 8, 2020 10:22:54 AM PDT, Steven Yen <styen at ntu.edu.tw> wrote:
>Thanks for the help. I have a reason to continue with R-3.0.3. I used 
>maxLik to estimate econometric models and some of them are better 
>handled with R-3.0.3 (but not later)----a sad reality I do not like.
>
>Here is what I did. I downloaded
>
>https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
>
>and installed the zip file, which worked in both RStudio and R (without
>
>RStudio).
>
>In RStudio, I go Tools -> Install packages -> Install from -> (Choose 
>zip) -> (Browse to the zip file)
>
>IN R, I go Packages -> Install packages from local file(s) -> (Browse
>to 
>the zip file)...
>
>Below is the command line generated and the prompt.
>
>> install.packages("C:/Users/USER/Downloads/aod_1.3.zip", repos = NULL,
>
>type = "win.binary")
>package ?aod? successfully unpacked and MD5 sums checked
>
>I will always be able to download the proper .zip file from CRAC 
>Archive, right. So, this will always work for me? Thank you all !! If 
>there are more direct options that work, I would still be interested to
>
>know.
>
>Steven Yen
>
>On 2020/10/9 ?? 12:49, Duncan Murdoch wrote:
>> Don't choose a mirror.? That will override the repos choice.
>>
>> Do update R to a current version if you aren't able to debug this 
>> yourself.
>>
>> Duncan Murdoch
>>
>> On 08/10/2020 12:38 p.m., Steven Yen wrote:
>>> Sorry Gentlemen and all. Now this is becoming a joke (to me). I
>repeated
>>> what I did earlier, with and without the option to set repos
>suggested
>>> by Duncan. Now it does not work. I wonder whether it is dependent on
>the
>>> mirror I chose, but I do not remember the one I chose earlier when
>it 
>>> work.
>>>
>>> I need your help, gentlemen, as I need to use R-3.0.3 for my task.
>>>
>>> ? > options(repos="https://cran-archive.r-project.org")
>>> ? > chooseCRANmirror()
>>> ? > install.packages("aod")
>>> Warning: unable to access index for repository
>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0
>>> Warning: unable to access index for repository
>>> http://lib.stat.cmu.edu/R/CRAN/bin/windows/contrib/3.0
>>>
>>> ? ?? package ?aod? is available as a source package but not as a
>binary
>>>
>>> Warning message:
>>> package ?aod? is not available (for R version 3.0.3)
>>> ? >
>install.packages("aod",repos='https://cran-archive.r-project.org')
>>> Warning: unable to access index for repository
>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0
>>> Warning message:
>>> package ?aod? is not available (for R version 3.0.3)
>>>
>>> On 2020/10/9 ?? 12:02, Duncan Murdoch wrote:
>>>> Okay, so it's not an RStudio issue. However, I'd guess setting
>>>>
>>>> ?? options(repos = "https://cran-archive.r-project.org")
>>>>
>>>> at the start of your session could make everything work.? (I'm
>>>> guessing you currently have it set to "http://cran.rstudio.com",
>which
>>>> is the source of the last warning below, probably due to an R bug.
>>>> But since you're using an obsolete version of R, it shouldn't
>surprise
>>>> you that it has bugs that nobody else is seeing.)
>>>>
>>>> Duncan Murdoch
>>>>
>>>> On 08/10/2020 11:54 a.m., Steven Yen wrote:
>>>>> Thanks. You gentlemen please tell me what this means. In R
>(outside
>>>>> of RStudio) I ran:
>>>>>
>>>>> install.packages("aod")
>>>>>
>>>>> Received a warning (and installation did not seem to go through).
>>>>>
>>>>> Then I tried
>>>>>
>>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>
>>>>> Received a warning but it went on to try
>>>>>
>>>>>
>https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
>>>>>
>>>>> and it worked. See log below.
>>>>>
>>>>> I expect to continue to use R-3.0.3 for a while and I very much
>like
>>>>> this to become a routine. Thank you all.
>>>>>
>>>>> Steven Yen
>>>>>
>>>>> ??> install.packages("aod")
>>>>> Warning in install.packages :
>>>>> ??? unable to access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>> Warning in install.packages :
>>>>> ??? unable to access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>
>>>>> ???? package ?aod? is available as a source package but not as a 
>>>>> binary
>>>>>
>>>>> Warning in install.packages :
>>>>> ??? package ?aod? is not available (for R version 3.0.3)
>>>>> ??>
>install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>> Warning in install.packages :
>>>>> ??? unable to access index for repository
>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>> trying URL
>>>>>
>'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
>
>>>>>
>>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>>>> opened URL
>>>>> downloaded 220 Kb
>>>>>
>>>>> package ?aod? successfully unpacked and MD5 sums checked
>>>>>
>>>>> The downloaded binary packages are in
>>>>> C:\Users\USER\AppData\Local\Temp\RtmpY7t6Ll\downloaded_packages
>>>>>
>>>>> On 2020/10/8 ?? 10:52, Duncan Murdoch wrote:
>>>>>> Just remembered:? RStudio runs its own wrapper around
>>>>>> install.packages().? Steven, you should try doing the install
>from
>>>>>> outside of RStudio, and see if it makes a difference.
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>> On 08/10/2020 9:59 a.m., Duncan Murdoch wrote:
>>>>>>> He didn't specify the RStudio repos, though it's probably
>implicitly
>>>>>>> specified in getOption("repos").? I wonder why
>install.packages() is
>>>>>>> looking there, when repos is given explicitly?
>>>>>>>
>>>>>>> On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
>>>>>>>> Drop the RStudio repos.
>>>>>>>>
>>>>>>>> Best,
>>>>>>>> Uwe Ligges
>>>>>>>>
>>>>>>>> On 05.10.2020 11:10, Steven Yen wrote:
>>>>>>>>> Thanks. I did as suggested but still received a warning,
>though 
>>>>>>>>> the
>>>>>>>>> installation went through. Anything I could do to install
>without
>>>>>>>>> the
>>>>>>>>> warning message.
>>>>>>>>>
>>>>>>>>> What is the contrib.url argument?
>>>>>>>>>
>>>>>>>>> ??? >
>>>>>>>>>
>install.packages("aod",repos='https://cran-archive.r-project.org')
>>>>>>>>> Warning in install.packages :
>>>>>>>>> ??? ? unable to access index for repository
>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>>>> trying URL
>>>>>>>>>
>'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
>>>>>>>>> opened URL
>>>>>>>>> downloaded 220 Kb
>>>>>>>>>
>>>>>>>>> package ?aod? successfully unpacked and MD5 sums checked
>>>>>>>>>
>>>>>>>>> The downloaded binary packages are in
>>>>>>>>>
>C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
>>>>>>>>> ??? >
>>>>>>>>>
>>>>>>>>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
>>>>>>>>>> Then you'd rather need
>>>>>>>>>>
>>>>>>>>>>
>install.packages("aod",repos='https://cran-archive.r-project.org') 
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> or use the contrib.url argument.
>>>>>>>>>>
>>>>>>>>>> Best,
>>>>>>>>>> Uwe Ligges
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> On 05.10.2020 10:47, Steven Yen wrote:
>>>>>>>>>>> Thanks for the help. I do update to the latest R-4.0.2. As I
>
>>>>>>>>>>> said,
>>>>>>>>>>> for reasons that's hard to explain, some of my tasks are
>better
>>>>>>>>>>> handled with an older version of R, in this case R-3.0.3.
>>>>>>>>>>> Please just
>>>>>>>>>>> help me install packages successfully with this older
>version
>>>>>>>>>>> of R.
>>>>>>>>>>>
>>>>>>>>>>> I ran the following line but obviously was not getting it 
>>>>>>>>>>> across.
>>>>>>>>>>>
>>>>>>>>>>> =====
>>>>>>>>>>>
>>>>>>>>>>>>
>install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/')
>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Warning in
>>>>>>>>>>> install.packages : unable to access index for repository
>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
>>>>>>>>>>> install.packages : unable to access index for repository
>>>>>>>>>>>
>https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0
>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Warning in install.packages : package ?aod? is not available
>>>>>>>>>>> (for R
>>>>>>>>>>> version 3.0.3)
>>>>>>>>>>>
>>>>>>>>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
>>>>>>>>>>>> From
>>>>>>>>>>>>
>>>>>>>>>>>> ../ReadMe
>>>>>>>>>>>> in the mentioned web resource:
>>>>>>>>>>>>
>>>>>>>>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
>>>>>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
>>>>>>>>>>>>
>>>>>>>>>>>> We do not hold binaries of several year old versions of R
>on
>>>>>>>>>>>> CRAN.
>>>>>>>>>>>>
>>>>>>>>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider
>to
>>>>>>>>>>>> update to 4.0.2.
>>>>>>>>>>>>
>>>>>>>>>>>> Best,
>>>>>>>>>>>> Uwe Ligges
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> On 05.10.2020 09:56, Steven Yen wrote:
>>>>>>>>>>>>> I had to install/use an older version of (R-3.0.3) for a
>>>>>>>>>>>>> reason. While
>>>>>>>>>>>>> installing a package from CRAN (either in RStudio or R), I
>>>>>>>>>>>>> received
>>>>>>>>>>>>> the
>>>>>>>>>>>>> following warning message saying unable to access index
>for
>>>>>>>>>>>>> repository
>>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See
>message
>>>>>>>>>>>>> below. In
>>>>>>>>>>>>> this case, I tried to install "aod". The install
>nevertheless
>>>>>>>>>>>>> went
>>>>>>>>>>>>> through, as confirmed by the library statement (I did not
>try
>>>>>>>>>>>>> to use
>>>>>>>>>>>>> it). Any idea? Thank you.
>>>>>>>>>>>>>
>>>>>>>>>>>>> =====
>>>>>>>>>>>>>
>>>>>>>>>>>>> Warning: unable to access index for repository
>>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning:
>>>>>>>>>>>>> unable to
>>>>>>>>>>>>> access index for repository
>>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
>>>>>>>>>>>>> install.packages("aod") Warning in install.packages :
>unable
>>>>>>>>>>>>> to access
>>>>>>>>>>>>> index for repository
>>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
>>>>>>>>>>>>> Warning in install.packages : unable to access index for
>>>>>>>>>>>>> repository
>>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package 
>>>>>>>>>>>>> ?aod? is
>>>>>>>>>>>>> available as a source package but not as a binary Warning
>in
>>>>>>>>>>>>> install.packages : package ?aod? is not available (for R 
>>>>>>>>>>>>> version
>>>>>>>>>>>>> 3.0.3)
>>>>>>>>>>>>> ?? ? > library(aod)
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> ?? ????[[alternative HTML version deleted]]
>>>>>>>>>>>>>
>>>>>>>>>>>>> ______________________________________________
>>>>>>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>more,
>>>>>>>>>>>>> see
>>>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>>>>>> PLEASE do read the posting guide
>>>>>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>>>>>> and provide commented, minimal, self-contained,
>reproducible
>>>>>>>>>>>>> code.
>>>>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ______________________________________________
>>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>see
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>> PLEASE do read the posting guide
>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>> and provide commented, minimal, self-contained, reproducible
>code.
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>see
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>> PLEASE do read the posting guide
>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>> and provide commented, minimal, self-contained, reproducible
>code.
>>>>>>>>
>>>>>>>
>>>>>>
>>>>
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From |r1d_m@|| @end|ng |rom y@hoo@|r  Thu Oct  8 19:43:09 2020
From: |r1d_m@|| @end|ng |rom y@hoo@|r (fr1d_mail)
Date: Thu, 8 Oct 2020 19:43:09 +0200
Subject: [R] unable to plot bode - phase with control package
In-Reply-To: <CA797259-198D-4E86-A094-F9ACE9B68499@dcn.davis.ca.us>
References: <7102d570-0a51-2279-d56a-2c31679c7348.ref@yahoo.fr>
 <7102d570-0a51-2279-d56a-2c31679c7348@yahoo.fr>
 <CA797259-198D-4E86-A094-F9ACE9B68499@dcn.davis.ca.us>
Message-ID: <25325b35-c49f-62c0-0bfd-ee26eeba39bf@yahoo.fr>

thank you for the reply !

Le 08/10/2020 ? 16:32, Jeff Newmiller a ?crit?:
> a) What is so difficult about the idea that this list is about R, not theory?

I don't need theory here, I just need the way specialist in R language 
will solve this *coding* issue.

Regarding the theory I think I have some solid background.

> There do exist forums about control theory (e.g. engineering.stackexchange.com)
irrelevant if not implemented in R
> b) Using [-pi,+pi) is not "wrong"... it is numerically more precise,

I never assume it was "wrong"

asymptotic analysis will provide valuable knowledge for stability if you 
reach phase information

why do you assume it is more precise ??

>   though it may not convey what you would prefer to convey.
>
> c) The general case with poles and zeroes is more complicated than just adding the order of your system. Do a search on
>
> "winding number" "bode"
in my case for 'siso' it is enough, physical systems I study are not 
exhibiting very complex behavior
> But if by inspection you think that shortcut will work for your system then do what you need to.
>
> d) If implementing a more general alternative solution is your itch, I am sure the maintainer of this _contributed package_ would welcome patches to add features.

not relevant as my level is R coding is low... sorry

Still looking for a *coding* solution to my issue...

Best,

Fr?d?ric



>
>
> On October 8, 2020 12:08:19 AM PDT, fr1d_mail via R-help <r-help at r-project.org> wrote:
>> Dear All
>>
>> I hope my question is relevant on this forum, else very sorry for the
>> disturbance
>>
>> I want to simply plot a bode diagram of a siso model
>>
>> using the 'bodeplot' command in the control package fail due to error
>> in
>> 'issiso' evaluation...
>>
>> Error in if (issiso(sys)) {:
>>
>> then I try by myself some retro-engineering :)
>>
>> the problem is when I use
>>
>> H <- freqresp(syst, w)
>> mag = 20*log10(abs(H))
>> phase <- atan2(Im(H), Re(H)) * 180/pi
>>
>> if the order of the system is higher than 2 it is wrong (result will be
>>
>> only between -pi / pi)
>>
>> how to proceed ? for each evaluated point take a derivative and
>> evaluate
>> the order to add the proper number of pi ?
>>
>> Thanks for the help !
>>
>> Best
>>
>> Fr?d?ric
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Oct  8 19:47:15 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 8 Oct 2020 18:47:15 +0100
Subject: [R] RStudio question
In-Reply-To: <CAHpkSYh_0o6-K91uXf3ExhnPnaRVd=mJU=eHbcptuDv1i1EhKQ@mail.gmail.com>
References: <CAHpkSYh_0o6-K91uXf3ExhnPnaRVd=mJU=eHbcptuDv1i1EhKQ@mail.gmail.com>
Message-ID: <1518f18e-18e2-8710-20b3-630a7763cbac@sapo.pt>

Hello,

This question looks like a homework question. The posting guide syas that

"Basic statistics and classroom homework: R-help is not intended for these."

I would take a look at

help('cut')  # pay attention to argument labels
help('ifelse')
help('findInterval')


Hope this helps,

Rui Barradas

?s 09:10 de 08/10/20, Xavier Garcia via R-help escreveu:
> I'm solving the following problem: Create a variable (column) in the ?wf?
> dataframe named ?Zone? that takes value of ?tropic? if Latitude is less
> than or equal to 30, or ?non-tropic? for Latitude greater than 30. Show you
> Zone variable. Latitude is a column of my dataframe. I don't know the
> sintaxis and the process to create the column.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From herd_dog @end|ng |rom cox@net  Thu Oct  8 19:52:47 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Thu, 8 Oct 2020 10:52:47 -0700
Subject: [R] Retrosheet Data
Message-ID: <BF6224199EB245D9B45473073049086B@OWNERPC>

Have used Jim Albert?s code to extract baseball data from Retrosheet.

function(team){
P <- getRetrosheet("play",2013,team)
   get_plays <- function(j) data.frame(Game=P[[j]]$id[1],P[[j]]$play)#from $id and $play section of retrosheet data
   do.call("rbind",lapply(1:length(P),get_plays))
}
all_plays <- do.call("rbind",lapply(Teams[1:30],get_team_plays))
head(all_plays,10)

I get the following six variables from the play section of the retrosheet data:

head(all_plays,10)
    Game                    inning team  retroID        count  pitches play
1  TEX201304050      1         0        troum001    01      CX         63/G
2  TEX201304050      1         0        aybae001    12      TBFX     7/F
3  TEX201304050      1         0        pujoa001     00      X           6/L
4  TEX201304050      1         1        kinsi001      02      FCX        53/G   

Very useful but I would also like to access the $info, $start, $sub, and $data sections.  I have tried replacing $play in the line below with $info, $start, etc. without success.  

 get_plays <- function(j) data.frame(Game=P[[j]]$id[1],P[[j]]$play) with 

get_plays <- function(j) data.frame(Game=P[[j]]$id[1],P[[j]]$info)

I keep getting the same Game, inning, team, etc. data.

Can anyone give me some direction.

Thanks,
Philip Heinrich

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Oct  8 20:16:43 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 8 Oct 2020 19:16:43 +0100
Subject: [R] Lahman Baseball Data Using R DBI Package
In-Reply-To: <CAHqSRuSPKww1fpFMebC6sWRT-VyCkvEM82A_AGqQWJS18jq4xg@mail.gmail.com>
References: <523DDD41433C4810A1C1C8D755A1A940@OWNERPC>
 <CAHqSRuR-NmoGaEW9YavHxVNitZmezK_rcnwpRzuoHik657wtVQ@mail.gmail.com>
 <C44F824A74414353A579A0B468883116@OWNERPC>
 <CAHqSRuRoLcUw0mOJ_aDud8rivbdCvxtOreRjdp-N8AJ0nnv8ow@mail.gmail.com>
 <CAA99HCxs_oeJhRGEeWAmoQ1CPNU9Pu8GqDbg-6ZAh1L7fvJS1w@mail.gmail.com>
 <CAHqSRuSPKww1fpFMebC6sWRT-VyCkvEM82A_AGqQWJS18jq4xg@mail.gmail.com>
Message-ID: <e6aa8239-492c-4755-a895-96586735444b@sapo.pt>

Hello,


?s 17:26 de 08/10/20, Bill Dunlap escreveu:
> This is really a feature of SQL, not R.  SQL requires that you double quote
> column names that start with numbers, include spaces, etc., or that are SQL
> key words.  


Right, but there's no need to escape the double quotes, just put the SQL 
statement between single quotes and it becomes more readable.

sqldf::sqldf('select "Order","Where","From" from d WHERE "From"="me"')


Hope this helps,

Rui Barradas

E.g.,
> 
>> d <- data.frame(Order=c("sit","stay","heel"),
> Where=c("here","there","there"), From=c("me","me","you"))
>> sqldf::sqldf("select Order,Where,From from d WHERE From=\"me\"")
> Error: near "Order": syntax error
>> sqldf::sqldf("select \"Order\",\"Where\",\"From\" from d Where
> \"From\"=\"me\"")
>    Order Where From
> 1   sit  here   me
> 2  stay there   me
> 
> You may as well double quote all column names in SQL queries.
> 
> -Bill
> 
> On Wed, Oct 7, 2020 at 9:57 PM William Michels <wjm1 at caa.columbia.edu>
> wrote:
> 
>> Hi Philip,
>>
>> You've probably realized by now that R doesn't like column names that
>> start with a number. If you try to access an R-dataframe column named
>> 2B or 3B with the familiar "$" notation, you'll get an error:
>>
>>> library(DBI)
>>> library(RSQLite)
>>> con2 <- dbConnect(SQLite(), "~/R_Dir/lahmansbaseballdb.sqlite")
>>> Hack12Batting <- dbGetQuery(con2,"SELECT * FROM batting WHERE yearID =
>> 2018 AND AB >600 ORDER BY AB DESC")
>>> Hack12Batting$AB
>>   [1] 664 661 639 632 632 632 626 623 620 618 617 613 606 605 602
>>> Hack12Batting$3B
>> Error: unexpected numeric constant in "Hack12Batting$3"
>>
>> How to handle? You can rename columns on-the-fly by piping. See
>> reference [1] and use either library(magrittr) or library(dplyr) or a
>> combination thereof:
>>
>> library(magrittr)
>> dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
>> ORDER BY AB DESC") %>% set_colnames(make.names(colnames(.)))
>>
>> #OR one of the following:
>>
>> library(dplyr)
>> dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
>> ORDER BY AB DESC") %>% rename(X2B = `2B`, X3B = `3B`)
>>
>> library(dplyr)
>> dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
>> ORDER BY AB DESC") %>% `colnames<-`(make.names(colnames(.)))
>>
>> library(dplyr)
>> dbGetQuery(con2,"SELECT * FROM batting WHERE yearID = 2018 AND AB >600
>> ORDER BY AB DESC") %>% magrittr::set_colnames(make.names(colnames(.)))
>>
>> Best, Bill.
>>
>> W. Michels, Ph.D.
>>
>> [1]
>> https://stackoverflow.com/questions/28100780/use-with-replacement-functions-like-colnames
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> On Fri, Oct 2, 2020 at 7:34 PM Bill Dunlap <williamwdunlap at gmail.com>
>> wrote:
>>>
>>> The double quotes are required by SQL if a name is not of the form
>>> letter-followed-by-any-number-of-letters-or-numbers or if the name is a
>> SQL
>>> keyword like 'where' or 'select'.  If you are doing this from a function,
>>> you may as well quote all the names.
>>>
>>> -Bill
>>>
>>> On Fri, Oct 2, 2020 at 6:18 PM Philip <herd_dog at cox.net> wrote:
>>>
>>>> The \?2B\? worked.  Have no idea why.  Can you point me somewhere that
>> can
>>>> explain this to me.
>>>>
>>>> Thanks,
>>>> Philip
>>>>
>>>> *From:* Bill Dunlap
>>>> *Sent:* Friday, October 2, 2020 3:54 PM
>>>> *To:* Philip
>>>> *Cc:* r-help
>>>> *Subject:* Re: [R] Lahman Baseball Data Using R DBI Package
>>>>
>>>> Have you tried putting double quotes around 2B and 3B:  "...2B, 3B,
>> ..."
>>>> -> "...\"2B\",\"3B\",..."?
>>>>
>>>> -Bill
>>>>
>>>> On Fri, Oct 2, 2020 at 3:49 PM Philip <herd_dog at cox.net> wrote:
>>>>
>>>>> I?m trying to pull data from one table (batting) in the Lahman
>> Baseball
>>>>> database.  Notice X2B for doubles and X3B for triples ? fourth and
>> fifth
>>>>> from the right.
>>>>>
>>>>> The dbGetQuery function runs fine when I leave there two out but I get
>>>>> error messages (in red) when I include 2B/3B or X2B/X3B.
>>>>>
>>>>> Can anyone give me some direction?
>>>>>
>>>>> Thanks,
>>>>> Philip Heinrich
>>>>>
>>>>>
>> ***************************************************************************************************************************************************
>>>>> tail(dbReadTable(Lahman,"batting"))
>>>>>
>>>>> ID                       playerID      yearID    stint teamID team_ID
>>>>> lgID   G        G_batting   AB     R     H       X2B    X3B   HR
>>   RBI   SB
>>>>> 107414 107414 yastrmi01      2019       1       SFN       2920
>>>>> NL     107        NA          371   64  101      22       3     21
>>>>> 55    2
>>>>> 107416 107416 yelicch01      2019        1       MIL       2911
>>>>> NL     130        NA          489 100  161      29       3     44
>> 97   30
>>>>> 107419 107419 youngal01     2019       1       ARI        2896
>>>>> NL       17        NA            25     1      1        0       0
>>>>> 0      0     0
>>>>> 107420 107420 zagunma01   2019        1      CHN       2901      NL
>>>>> 30        NA             36     2      9        3       0      0
>>>>> 5     0
>>>>> 107422 107422 zavalse01      2019        1      CHA       2900
>>>>> AL        5        NA             12     1      1        0       0
>>>>> 0       0     0
>>>>> 107427 107427 zimmery01     2019        1      WAS      2925      NL
>>>>> 52        NA           171   20    44        9      0      6      27
>>     0
>>>>> 107428 107428 zobribe01       2019        1      CHN      2901
>>>>> NL      47        NA           150   24   39         5      0      1
>>>>> 17     0
>>>>> 107429 107429 zuninmi01       2019        1      TBA       2922
>>>>> AL      90        NA           266    30  44       10      1      9
>>>>> 32     0
>>>>>
>>>>>
>>>>> Hack11Batting <- dbGetQuery(Lahman,"SELECT
>>>>> playerID,yearID,AB,R,H,2B,3B,HR,
>>>>>                              RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM
>>>>> batting
>>>>>                              WHERE yearID = 2018 AND AB >99")
>>>>> Error: unrecognized token: "2B"
>>>>>
>>>>> Hack11Batting <- dbGetQuery(Lahman,"SELECT
>>>>> playerID,yearID,AB,R,H,X2B,X3B,HR,
>>>>>                              RBI,SB,CS,BB,SO,IBB,HBP,SH,SF,GIDP FROM
>>>>> batting
>>>>>                              WHERE yearID = 2018 AND AB >99")
>>>>> Error: no such column: X2B
>>>>>
>>>>>          [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From rmh @end|ng |rom temp|e@edu  Thu Oct  8 20:17:15 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 8 Oct 2020 14:17:15 -0400
Subject: [R] [External] Re:  unable to access index for repository...
In-Reply-To: <C894A000-B78E-45B1-B88F-1B79081DE4BD@dcn.davis.ca.us>
References: <c613e086-3384-5ca2-8823-41ea3921ce94@ntu.edu.tw>
 <3e3350b5-63bd-e26e-3a2a-5b70076aa9ba@statistik.tu-dortmund.de>
 <f351e439-dbd3-1914-576c-a4df97ac52aa@ntu.edu.tw>
 <9dd0221b-f52c-d430-36fa-f5b3ce085697@statistik.tu-dortmund.de>
 <0800c67b-0aa9-b4ea-7dbd-574222f411d3@ntu.edu.tw>
 <e7894194-c685-711a-aee2-94337ef2bda0@statistik.tu-dortmund.de>
 <d8a04cdf-8185-986a-ef6a-52d935097405@gmail.com>
 <b644b187-c6fb-fe26-26a9-09c6df2a0013@gmail.com>
 <524b76ed-fd43-1591-f7d5-4b27e5537e9f@ntu.edu.tw>
 <3b19dd7f-8b87-2baf-573f-5b805a8fdcc5@gmail.com>
 <9dd5c768-3cbe-c128-d86d-1113f18bede4@ntu.edu.tw>
 <85614667-c504-4668-2f05-6ff751e48992@gmail.com>
 <5d3ecbde-ea51-2854-bfe8-899d6a70d1c6@ntu.edu.tw>
 <C894A000-B78E-45B1-B88F-1B79081DE4BD@dcn.davis.ca.us>
Message-ID: <CAGx1TMA2PEFwrfpnGdL5RqVujPFNaOXsC3w=O_i3ReTwXSijmA@mail.gmail.com>

I wonder if you are perhaps trying to solve the wrong problem.

If you like what the older version of the aod package does, but not
the current version,
then I think the solution is to propose an option to the aod
maintainer that would restore your
preferred algorithm into the current version, and then use the current R.

A less good, but possibly workable, option is to compile the old
version of aod into the current R.

On Thu, Oct 8, 2020 at 1:45 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> All support on this list is voluntary, and support for old versions of R is not even necessarily on-topic here which is why you keep getting nudged to upgrade. Your "need" for support for an old version is definitely not "our" problem, so I suggest you start looking for a consultant if this issue is that important to you. Such is the nature of volunteer-developed open source software... so support your local experts.
>
> On October 8, 2020 10:22:54 AM PDT, Steven Yen <styen at ntu.edu.tw> wrote:
> >Thanks for the help. I have a reason to continue with R-3.0.3. I used
> >maxLik to estimate econometric models and some of them are better
> >handled with R-3.0.3 (but not later)----a sad reality I do not like.
> >
> >Here is what I did. I downloaded
> >
> >https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
> >
> >and installed the zip file, which worked in both RStudio and R (without
> >
> >RStudio).
> >
> >In RStudio, I go Tools -> Install packages -> Install from -> (Choose
> >zip) -> (Browse to the zip file)
> >
> >IN R, I go Packages -> Install packages from local file(s) -> (Browse
> >to
> >the zip file)...
> >
> >Below is the command line generated and the prompt.
> >
> >> install.packages("C:/Users/USER/Downloads/aod_1.3.zip", repos = NULL,
> >
> >type = "win.binary")
> >package ?aod? successfully unpacked and MD5 sums checked
> >
> >I will always be able to download the proper .zip file from CRAC
> >Archive, right. So, this will always work for me? Thank you all !! If
> >there are more direct options that work, I would still be interested to
> >
> >know.
> >
> >Steven Yen
> >
> >On 2020/10/9 ?? 12:49, Duncan Murdoch wrote:
> >> Don't choose a mirror.  That will override the repos choice.
> >>
> >> Do update R to a current version if you aren't able to debug this
> >> yourself.
> >>
> >> Duncan Murdoch
> >>
> >> On 08/10/2020 12:38 p.m., Steven Yen wrote:
> >>> Sorry Gentlemen and all. Now this is becoming a joke (to me). I
> >repeated
> >>> what I did earlier, with and without the option to set repos
> >suggested
> >>> by Duncan. Now it does not work. I wonder whether it is dependent on
> >the
> >>> mirror I chose, but I do not remember the one I chose earlier when
> >it
> >>> work.
> >>>
> >>> I need your help, gentlemen, as I need to use R-3.0.3 for my task.
> >>>
> >>>   > options(repos="https://cran-archive.r-project.org")
> >>>   > chooseCRANmirror()
> >>>   > install.packages("aod")
> >>> Warning: unable to access index for repository
> >>> https://cran-archive.r-project.org/bin/windows/contrib/3.0
> >>> Warning: unable to access index for repository
> >>> http://lib.stat.cmu.edu/R/CRAN/bin/windows/contrib/3.0
> >>>
> >>>      package ?aod? is available as a source package but not as a
> >binary
> >>>
> >>> Warning message:
> >>> package ?aod? is not available (for R version 3.0.3)
> >>>   >
> >install.packages("aod",repos='https://cran-archive.r-project.org')
> >>> Warning: unable to access index for repository
> >>> https://cran-archive.r-project.org/bin/windows/contrib/3.0
> >>> Warning message:
> >>> package ?aod? is not available (for R version 3.0.3)
> >>>
> >>> On 2020/10/9 ?? 12:02, Duncan Murdoch wrote:
> >>>> Okay, so it's not an RStudio issue. However, I'd guess setting
> >>>>
> >>>>    options(repos = "https://cran-archive.r-project.org")
> >>>>
> >>>> at the start of your session could make everything work.  (I'm
> >>>> guessing you currently have it set to "http://cran.rstudio.com",
> >which
> >>>> is the source of the last warning below, probably due to an R bug.
> >>>> But since you're using an obsolete version of R, it shouldn't
> >surprise
> >>>> you that it has bugs that nobody else is seeing.)
> >>>>
> >>>> Duncan Murdoch
> >>>>
> >>>> On 08/10/2020 11:54 a.m., Steven Yen wrote:
> >>>>> Thanks. You gentlemen please tell me what this means. In R
> >(outside
> >>>>> of RStudio) I ran:
> >>>>>
> >>>>> install.packages("aod")
> >>>>>
> >>>>> Received a warning (and installation did not seem to go through).
> >>>>>
> >>>>> Then I tried
> >>>>>
> >>>>> install.packages("aod",repos='https://cran-archive.r-project.org')
> >>>>>
> >>>>> Received a warning but it went on to try
> >>>>>
> >>>>>
> >https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
> >>>>>
> >>>>> and it worked. See log below.
> >>>>>
> >>>>> I expect to continue to use R-3.0.3 for a while and I very much
> >like
> >>>>> this to become a routine. Thank you all.
> >>>>>
> >>>>> Steven Yen
> >>>>>
> >>>>>   > install.packages("aod")
> >>>>> Warning in install.packages :
> >>>>>     unable to access index for repository
> >>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
> >>>>> Warning in install.packages :
> >>>>>     unable to access index for repository
> >>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
> >>>>>
> >>>>>      package ?aod? is available as a source package but not as a
> >>>>> binary
> >>>>>
> >>>>> Warning in install.packages :
> >>>>>     package ?aod? is not available (for R version 3.0.3)
> >>>>>   >
> >install.packages("aod",repos='https://cran-archive.r-project.org')
> >>>>> Warning in install.packages :
> >>>>>     unable to access index for repository
> >>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
> >>>>> trying URL
> >>>>>
> >'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
> >
> >>>>>
> >>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
> >>>>> opened URL
> >>>>> downloaded 220 Kb
> >>>>>
> >>>>> package ?aod? successfully unpacked and MD5 sums checked
> >>>>>
> >>>>> The downloaded binary packages are in
> >>>>> C:\Users\USER\AppData\Local\Temp\RtmpY7t6Ll\downloaded_packages
> >>>>>
> >>>>> On 2020/10/8 ?? 10:52, Duncan Murdoch wrote:
> >>>>>> Just remembered:  RStudio runs its own wrapper around
> >>>>>> install.packages().  Steven, you should try doing the install
> >from
> >>>>>> outside of RStudio, and see if it makes a difference.
> >>>>>>
> >>>>>> Duncan Murdoch
> >>>>>>
> >>>>>> On 08/10/2020 9:59 a.m., Duncan Murdoch wrote:
> >>>>>>> He didn't specify the RStudio repos, though it's probably
> >implicitly
> >>>>>>> specified in getOption("repos").  I wonder why
> >install.packages() is
> >>>>>>> looking there, when repos is given explicitly?
> >>>>>>>
> >>>>>>> On 08/10/2020 8:54 a.m., Uwe Ligges wrote:
> >>>>>>>> Drop the RStudio repos.
> >>>>>>>>
> >>>>>>>> Best,
> >>>>>>>> Uwe Ligges
> >>>>>>>>
> >>>>>>>> On 05.10.2020 11:10, Steven Yen wrote:
> >>>>>>>>> Thanks. I did as suggested but still received a warning,
> >though
> >>>>>>>>> the
> >>>>>>>>> installation went through. Anything I could do to install
> >without
> >>>>>>>>> the
> >>>>>>>>> warning message.
> >>>>>>>>>
> >>>>>>>>> What is the contrib.url argument?
> >>>>>>>>>
> >>>>>>>>>     >
> >>>>>>>>>
> >install.packages("aod",repos='https://cran-archive.r-project.org')
> >>>>>>>>> Warning in install.packages :
> >>>>>>>>>       unable to access index for repository
> >>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
> >>>>>>>>> trying URL
> >>>>>>>>>
> >'https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip'
> >
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> Content type 'application/zip' length 225712 bytes (220 Kb)
> >>>>>>>>> opened URL
> >>>>>>>>> downloaded 220 Kb
> >>>>>>>>>
> >>>>>>>>> package ?aod? successfully unpacked and MD5 sums checked
> >>>>>>>>>
> >>>>>>>>> The downloaded binary packages are in
> >>>>>>>>>
> >C:\Users\USER\AppData\Local\Temp\Rtmp46p9a3\downloaded_packages
> >>>>>>>>>     >
> >>>>>>>>>
> >>>>>>>>> On 2020/10/5 ?? 04:58, Uwe Ligges wrote:
> >>>>>>>>>> Then you'd rather need
> >>>>>>>>>>
> >>>>>>>>>>
> >install.packages("aod",repos='https://cran-archive.r-project.org')
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>> or use the contrib.url argument.
> >>>>>>>>>>
> >>>>>>>>>> Best,
> >>>>>>>>>> Uwe Ligges
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>> On 05.10.2020 10:47, Steven Yen wrote:
> >>>>>>>>>>> Thanks for the help. I do update to the latest R-4.0.2. As I
> >
> >>>>>>>>>>> said,
> >>>>>>>>>>> for reasons that's hard to explain, some of my tasks are
> >better
> >>>>>>>>>>> handled with an older version of R, in this case R-3.0.3.
> >>>>>>>>>>> Please just
> >>>>>>>>>>> help me install packages successfully with this older
> >version
> >>>>>>>>>>> of R.
> >>>>>>>>>>>
> >>>>>>>>>>> I ran the following line but obviously was not getting it
> >>>>>>>>>>> across.
> >>>>>>>>>>>
> >>>>>>>>>>> =====
> >>>>>>>>>>>
> >>>>>>>>>>>>
> >install.packages("aod",repos='https://cran-archive.r-project.org/bin/windows/contrib/3.0/')
> >
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>> Warning in
> >>>>>>>>>>> install.packages : unable to access index for repository
> >>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning in
> >>>>>>>>>>> install.packages : unable to access index for repository
> >>>>>>>>>>>
> >https://cran-archive.r-project.org/bin/windows/contrib/3.0/bin/windows/contrib/3.0
> >
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>> Warning in install.packages : package ?aod? is not available
> >>>>>>>>>>> (for R
> >>>>>>>>>>> version 3.0.3)
> >>>>>>>>>>>
> >>>>>>>>>>> On 2020/10/5 ?? 04:12, Uwe Ligges wrote:
> >>>>>>>>>>>> From
> >>>>>>>>>>>>
> >>>>>>>>>>>> ../ReadMe
> >>>>>>>>>>>> in the mentioned web resource:
> >>>>>>>>>>>>
> >>>>>>>>>>>> "Packages for R >= 1.7.0 and R < 3.2.0 are available from
> >>>>>>>>>>>> https://cran-archive.r-project.org/bin/windows/contrib/"
> >>>>>>>>>>>>
> >>>>>>>>>>>> We do not hold binaries of several year old versions of R
> >on
> >>>>>>>>>>>> CRAN.
> >>>>>>>>>>>>
> >>>>>>>>>>>> Note that R 3.0.0 is 7 years old. You shoudl realy consider
> >to
> >>>>>>>>>>>> update to 4.0.2.
> >>>>>>>>>>>>
> >>>>>>>>>>>> Best,
> >>>>>>>>>>>> Uwe Ligges
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>>
> >>>>>>>>>>>> On 05.10.2020 09:56, Steven Yen wrote:
> >>>>>>>>>>>>> I had to install/use an older version of (R-3.0.3) for a
> >>>>>>>>>>>>> reason. While
> >>>>>>>>>>>>> installing a package from CRAN (either in RStudio or R), I
> >>>>>>>>>>>>> received
> >>>>>>>>>>>>> the
> >>>>>>>>>>>>> following warning message saying unable to access index
> >for
> >>>>>>>>>>>>> repository
> >>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0. See
> >message
> >>>>>>>>>>>>> below. In
> >>>>>>>>>>>>> this case, I tried to install "aod". The install
> >nevertheless
> >>>>>>>>>>>>> went
> >>>>>>>>>>>>> through, as confirmed by the library statement (I did not
> >try
> >>>>>>>>>>>>> to use
> >>>>>>>>>>>>> it). Any idea? Thank you.
> >>>>>>>>>>>>>
> >>>>>>>>>>>>> =====
> >>>>>>>>>>>>>
> >>>>>>>>>>>>> Warning: unable to access index for repository
> >>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 Warning:
> >>>>>>>>>>>>> unable to
> >>>>>>>>>>>>> access index for repository
> >>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 >
> >>>>>>>>>>>>> install.packages("aod") Warning in install.packages :
> >unable
> >>>>>>>>>>>>> to access
> >>>>>>>>>>>>> index for repository
> >>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0
> >>>>>>>>>>>>> Warning in install.packages : unable to access index for
> >>>>>>>>>>>>> repository
> >>>>>>>>>>>>> http://cran.rstudio.com/bin/windows/contrib/3.0 package
> >>>>>>>>>>>>> ?aod? is
> >>>>>>>>>>>>> available as a source package but not as a binary Warning
> >in
> >>>>>>>>>>>>> install.packages : package ?aod? is not available (for R
> >>>>>>>>>>>>> version
> >>>>>>>>>>>>> 3.0.3)
> >>>>>>>>>>>>>      > library(aod)
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>
> >>>>>>>>>>>>>        [[alternative HTML version deleted]]
> >>>>>>>>>>>>>
> >>>>>>>>>>>>> ______________________________________________
> >>>>>>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> >more,
> >>>>>>>>>>>>> see
> >>>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>>>>>>>>>> PLEASE do read the posting guide
> >>>>>>>>>>>>> http://www.R-project.org/posting-guide.html
> >>>>>>>>>>>>> and provide commented, minimal, self-contained,
> >reproducible
> >>>>>>>>>>>>> code.
> >>>>>>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> ______________________________________________
> >>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> >see
> >>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>>>>>> PLEASE do read the posting guide
> >>>>>>>>> http://www.R-project.org/posting-guide.html
> >>>>>>>>> and provide commented, minimal, self-contained, reproducible
> >code.
> >>>>>>>>
> >>>>>>>> ______________________________________________
> >>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> >see
> >>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>>>>> PLEASE do read the posting guide
> >>>>>>>> http://www.R-project.org/posting-guide.html
> >>>>>>>> and provide commented, minimal, self-contained, reproducible
> >code.
> >>>>>>>>
> >>>>>>>
> >>>>>>
> >>>>
> >>
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Thu Oct  8 20:47:22 2020
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Fri, 9 Oct 2020 02:47:22 +0800
Subject: [R] [External] Re:  unable to access index for repository...
In-Reply-To: <CAGx1TMA2PEFwrfpnGdL5RqVujPFNaOXsC3w=O_i3ReTwXSijmA@mail.gmail.com>
References: <CAGx1TMA2PEFwrfpnGdL5RqVujPFNaOXsC3w=O_i3ReTwXSijmA@mail.gmail.com>
Message-ID: <E72ABB6F-7A06-4804-A195-197FD4595029@ntu.edu.tw>

Hmm. You raised an interesting point. Actually I am not having problems with aod per se?-it is just a supporting package I need while using old R. The essential package I need, maxLik, simply works better under R-3.0.3, for reason I do not understand?specifically the numerical gradients of the likelihood function are not evaluated as accurately in newer versions of R in my experience, which is why I continue to use R-3.0.3. Because I use this older version of R, naturally I need to install other supporting packages such as aod and AER. 
Certainly, I will install the zip file of the older version of maxLik to the latest R and see what happens. Thank you.

I will install the new maxLik in old R, and old maxLik in new R, and see what happens.

Sent from my iPhone
Beware: My autocorrect is crazy

> On Oct 9, 2020, at 2:17 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
> 
> ?I wonder if you are perhaps trying to solve the wrong problem.
> 
> If you like what the older version of the aod package does, but not
> the current version,
> then I think the solution is to propose an option to the aod
> maintainer that would restore your
> preferred algorithm into the current version, and then use the current R.
> 
> A less good, but possibly workable, option is to compile the old
> version of aod into the current R.
> 
>> On Thu, Oct 8, 2020 at 1:45 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>> 
>> All support on this list is voluntary, and support for old versions of R is not even necessarily on-topic here which is why you keep getting nudged to upgrade. Your "need" for support for an old version is definitely not "our" problem, so I suggest you start looking for a consultant if this issue is that important to you. Such is the nature of volunteer-developed open source software... so support your local experts.
>> 
>>> On October 8, 2020 10:22:54 AM PDT, Steven Yen <styen at ntu.edu.tw> wrote:
>>> Thanks for the help. I have a reason to continue with R-3.0.3. I used
>>> maxLik to estimate econometric models and some of them are better
>>> handled with R-3.0.3 (but not later)----a sad reality I do not like.
>>> 
>>> Here is what I did. I downloaded
>>> 
>>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
>>> 
>>> and installed the zip file, which worked in both RStudio and R (without
>>> 
>>> RStudio).
>>> 
>>> In RStudio, I go Tools -> Install packages -> Install from -> (Choose
>>> zip) -> (Browse to the zip file)
>>> 
>>> IN R, I go Packages -> Install packages from local file(s) -> (Browse
>>> to
>>> the zip file)...


From @rne@henn|ng@en @end|ng |rom gm@||@com  Thu Oct  8 22:28:24 2020
From: @rne@henn|ng@en @end|ng |rom gm@||@com (Arne Henningsen)
Date: Thu, 8 Oct 2020 22:28:24 +0200
Subject: [R] [External] Re: unable to access index for repository...
In-Reply-To: <E72ABB6F-7A06-4804-A195-197FD4595029@ntu.edu.tw>
References: <CAGx1TMA2PEFwrfpnGdL5RqVujPFNaOXsC3w=O_i3ReTwXSijmA@mail.gmail.com>
 <E72ABB6F-7A06-4804-A195-197FD4595029@ntu.edu.tw>
Message-ID: <CAMTWbJh4zKtO-MoirxADs+gDGurQ5V3RFhDZ9qY2dXxQ+G=iKQ@mail.gmail.com>

Hi Steven

Which optimisation algorithms in maxLik work better under R-3.0.3 than
under the current version of R?

/Arne

On Thu, 8 Oct 2020 at 21:05, Steven Yen <styen at ntu.edu.tw> wrote:
>
> Hmm. You raised an interesting point. Actually I am not having problems with aod per se?-it is just a supporting package I need while using old R. The essential package I need, maxLik, simply works better under R-3.0.3, for reason I do not understand?specifically the numerical gradients of the likelihood function are not evaluated as accurately in newer versions of R in my experience, which is why I continue to use R-3.0.3. Because I use this older version of R, naturally I need to install other supporting packages such as aod and AER.
> Certainly, I will install the zip file of the older version of maxLik to the latest R and see what happens. Thank you.
>
> I will install the new maxLik in old R, and old maxLik in new R, and see what happens.
>
> Sent from my iPhone
> Beware: My autocorrect is crazy
>
> > On Oct 9, 2020, at 2:17 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
> >
> > ?I wonder if you are perhaps trying to solve the wrong problem.
> >
> > If you like what the older version of the aod package does, but not
> > the current version,
> > then I think the solution is to propose an option to the aod
> > maintainer that would restore your
> > preferred algorithm into the current version, and then use the current R.
> >
> > A less good, but possibly workable, option is to compile the old
> > version of aod into the current R.
> >
> >> On Thu, Oct 8, 2020 at 1:45 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> >>
> >> All support on this list is voluntary, and support for old versions of R is not even necessarily on-topic here which is why you keep getting nudged to upgrade. Your "need" for support for an old version is definitely not "our" problem, so I suggest you start looking for a consultant if this issue is that important to you. Such is the nature of volunteer-developed open source software... so support your local experts.
> >>
> >>> On October 8, 2020 10:22:54 AM PDT, Steven Yen <styen at ntu.edu.tw> wrote:
> >>> Thanks for the help. I have a reason to continue with R-3.0.3. I used
> >>> maxLik to estimate econometric models and some of them are better
> >>> handled with R-3.0.3 (but not later)----a sad reality I do not like.
> >>>
> >>> Here is what I did. I downloaded
> >>>
> >>> https://cran-archive.r-project.org/bin/windows/contrib/3.0/aod_1.3.zip
> >>>
> >>> and installed the zip file, which worked in both RStudio and R (without
> >>>
> >>> RStudio).
> >>>
> >>> In RStudio, I go Tools -> Install packages -> Install from -> (Choose
> >>> zip) -> (Browse to the zip file)
> >>>
> >>> IN R, I go Packages -> Install packages from local file(s) -> (Browse
> >>> to
> >>> the zip file)...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Arne Henningsen
http://www.arne-henningsen.name


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Oct  8 22:52:12 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Thu, 8 Oct 2020 15:52:12 -0500
Subject: [R] 2 D density plot interpretation and manipulating the data
Message-ID: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>

Hello,

I have a data frame like this:

> head(SNP)
               mean      var     sd
FQC.10090295 0.0327 0.002678 0.0517
FQC.10119363 0.0220 0.000978 0.0313
FQC.10132112 0.0275 0.002088 0.0457
FQC.10201128 0.0169 0.000289 0.0170
FQC.10208432 0.0443 0.004081 0.0639
FQC.10218466 0.0116 0.000131 0.0115
...

and I am creating plot like this:

s <- ggplot(SNP, mapping = aes(x = mean, y = var))
s <- s +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPs")
s

I am getting plot in attach.

My question is how do I:
1.interpret the inclusion versus exclusion within the ellipses-contours?

2. how do I extract from my data frame the points which are outside of ellipses?

Thanks
Ana

-------------- next part --------------
A non-text attachment was scrubbed...
Name: snps.pdf
Type: application/pdf
Size: 27821 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20201008/d35a5c66/attachment.pdf>

From @tyen @end|ng |rom ntu@edu@tw  Thu Oct  8 23:39:48 2020
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Fri, 9 Oct 2020 05:39:48 +0800
Subject: [R] [External] Re: unable to access index for repository...
In-Reply-To: <CAMTWbJh4zKtO-MoirxADs+gDGurQ5V3RFhDZ9qY2dXxQ+G=iKQ@mail.gmail.com>
References: <CAMTWbJh4zKtO-MoirxADs+gDGurQ5V3RFhDZ9qY2dXxQ+G=iKQ@mail.gmail.com>
Message-ID: <62B6F1EC-A314-4EDD-B7F2-52044F83AE23@ntu.edu.tw>

Oh Hi Arne,
You may recall we visited with this before. I do not believe the problem is algorithm specific. The algorithms I use the most often are BFGS and BHHH (or maxBFGS and maxBHHH). For simple econometric models such as probit, Tobit, and evening sample selection models, old and new versions of R work equally well (I write my own programs  and do not use ones from AER or sampleSekection). For more complicated models the newer R would converge with not-so-nice gradients while R-3.0.3 would still do nicely (good gradient). I use numerical graduent of course. I wonder whether numerical gradient routine were revised at the time of transition from R-3.0.3 to newer. Not knowing how different your versions of maxLik are between, I will try as I said I would, that is, use new version of maxLik from old R and vice versa, and see what happens.

Sent from my iPhone
Beware: My autocorrect is crazy

> On Oct 9, 2020, at 4:28 AM, Arne Henningsen <arne.henningsen at gmail.com> wrote:
> 
> ?Hi Steven
> 
> Which optimisation algorithms in maxLik work better under R-3.0.3 than
> under the current version of R?
> 
> /Arne
> 
>> On Thu, 8 Oct 2020 at 21:05, Steven Yen <styen at ntu.edu.tw> wrote:
>> 
>> Hmm. You raised an interesting point. Actually I am not having problems with aod per se?-it is just a supporting package I need while using old R. The essential package I need, maxLik, simply works better under R-3.0.3, for reason I do not understand?specifically the numerical gradients of the likelihood function are not evaluated as accurately in newer versions of R in my experience, which is why I continue to use R-3.0.3. Because I use this older version of R, naturally I need to install other supporting packages such as aod and AER.
>> Certainly, I will install the zip file of the older version of maxLik to the latest R and see what happens. Thank you.
>> 
>> I will install the new maxLik in old R, and old maxLik in new R, and see what happens.
>> 
>> Sent from my iPhone
>> Beware: My autocorrect is crazy
>> 
>>>> On Oct 9, 2020, at 2:17 AM, Richard M. Heiberger <rmh at temple.edu> wrote:
>>> 
>>> ?I wonder if you are perhaps trying to solve the wrong problem.
>>> 
>>> If you like what the older version of the aod package does, but not
>>> the current version,
>>> then I think the solution is to propose an option to the aod
>>> maintainer that would restore your
>>> preferred algorithm into the current version, and then use the current R.
>>> 
>>> A less good, but possibly workable, option is to compile the old
>>> version of aod into the current R.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Oct  9 03:35:37 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Thu, 8 Oct 2020 20:35:37 -0500
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
References: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
Message-ID: <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>

My understanding is that this represents bivariate normal
approximation of the data which uses the kernel density function to
test for inclusion within a level set. (please correct me)

In order to exclude the outlier to these ellipses/contours is it
advisable to do something like this:

SNP$density <- get_density(SNP$mean, SNP$var)
> summary(SNP$density)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
      0     383     696     738    1170    1789

where get_density() is function from here:
https://slowkow.com/notes/ggplot2-color-by-density/

and then do something like this:

a=SNP[SNP$density>400,]

and plot it again:

p <- ggplot(a, mapping = aes(x = mean, y = var))
p <- p +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPS_red")

On Thu, Oct 8, 2020 at 3:52 PM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Hello,
>
> I have a data frame like this:
>
> > head(SNP)
>                mean      var     sd
> FQC.10090295 0.0327 0.002678 0.0517
> FQC.10119363 0.0220 0.000978 0.0313
> FQC.10132112 0.0275 0.002088 0.0457
> FQC.10201128 0.0169 0.000289 0.0170
> FQC.10208432 0.0443 0.004081 0.0639
> FQC.10218466 0.0116 0.000131 0.0115
> ...
>
> and I am creating plot like this:
>
> s <- ggplot(SNP, mapping = aes(x = mean, y = var))
> s <- s +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPs")
> s
>
> I am getting plot in attach.
>
> My question is how do I:
> 1.interpret the inclusion versus exclusion within the ellipses-contours?
>
> 2. how do I extract from my data frame the points which are outside of ellipses?
>
> Thanks
> Ana


From @purd|e@@ @end|ng |rom gm@||@com  Fri Oct  9 09:12:27 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Fri, 9 Oct 2020 20:12:27 +1300
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>
References: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
 <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>
Message-ID: <CAB8pepxu3KqTuEx+8TCn2fObBPrBAM4t9S6tP=pC_TBf5L5rww@mail.gmail.com>

> My understanding is that this represents bivariate normal
> approximation of the data which uses the kernel density function to
> test for inclusion within a level set. (please correct me)

You can fit a bivariate normal distribution by computing five parameters.
Two means, two standard deviations (or two variances) and one
correlation (or covariance) coefficient.
The bivariate normal *has* elliptical contours.

A kernel density estimate is usually regarded as an estimate of an
unknown density function.
Often they use a normal (or Gaussian) kernel, but I wouldn't describe
them as normal approximations.
In general, bivariate kernel density estimates do *not* have
elliptical contours.
But in saying that, if the data is close to normality, then contours
will be close to elliptical.

Kernel density estimates do not test for inclusion, as such.
(But technically, there are some exceptions to that).

I'm not sure what you're trying to achieve here.


From gr|gh| @end|ng |rom ug@@edu  Thu Oct  8 22:52:02 2020
From: gr|gh| @end|ng |rom ug@@edu (Giovanni Righi)
Date: Thu, 8 Oct 2020 20:52:02 +0000
Subject: [R] exiting mclapply early on error
Message-ID: <C74A5A25-8609-4F91-9654-FF558140DCE7@uga.edu>

Hey folks,

Is there any way to exit an mclapply early on error?

For example, in the following mclapply loop, I have to wait for all the processes to finish before the error is returned. 

```
mclapply(X = 1:12, FUN = function(x) {Sys.sleep(0.1); if(x == 4) stop()}, mc.cores = 4, mc.preschedule = F)
```

When there are many calculations in FUN, it takes a long time before the error is returned. It would be nice if there were an option to exit (all child processes) early on error. Is there any way to do this?

Thanks,
Giovanni Righi


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Oct  9 12:27:49 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 9 Oct 2020 12:27:49 +0200
Subject: [R] [External] Re: unable to access index for repository...
In-Reply-To: <62B6F1EC-A314-4EDD-B7F2-52044F83AE23@ntu.edu.tw>
References: <CAMTWbJh4zKtO-MoirxADs+gDGurQ5V3RFhDZ9qY2dXxQ+G=iKQ@mail.gmail.com>
 <62B6F1EC-A314-4EDD-B7F2-52044F83AE23@ntu.edu.tw>
Message-ID: <24448.15141.721049.228340@stat.math.ethz.ch>

>>>>> Steven Yen 
>>>>>     on Fri, 9 Oct 2020 05:39:48 +0800 writes:

    > Oh Hi Arne, You may recall we visited with this before. I
    > do not believe the problem is algorithm specific. The
    > algorithms I use the most often are BFGS and BHHH (or
    > maxBFGS and maxBHHH). For simple econometric models such
    > as probit, Tobit, and evening sample selection models, old
    > and new versions of R work equally well (I write my own
    > programs and do not use ones from AER or
    > sampleSekection). For more complicated models the newer R
    > would converge with not-so-nice gradients while R-3.0.3
    > would still do nicely (good gradient). I use numerical
    > graduent of course. I wonder whether numerical gradient
    > routine were revised at the time of transition from
    > R-3.0.3 to newer. 

As R-core member, particularly interested in numerical accuracy
etc, I'm also interested in learning what's going on here.

I think we (R core) have never heard of anything numerically deteriorating
going from R 3.0.x to R 4.0.x,  and now you are claiming that in
public, you should really post *reproducible* code giving
evidence to your claim.

As was mentioned earlier, the difference may not be in R, but
rather in the versions of the (non-base R, but "extension") R
packages you use;  and you were saying earlier you will check
that (using the old version of the 'maxLik' package with a newer
version of R and vice verso) and tell us about it.

Thank you in advance on being careful and rational about such
findings.

With regards,

Martin Maechler
ETH Zurich  and  R core team

    > Not knowing how different your versions of maxLik are
    > between, I will try as I said I would, that is, use new
    > version of maxLik from old R and vice versa, and see what
    > happens.

    > Sent from my iPhone Beware: My autocorrect is crazy

    >> On Oct 9, 2020, at 4:28 AM, Arne Henningsen
    >> <arne.henningsen at gmail.com> wrote:
    >> 
    >> ?Hi Steven
    >> 
    >> Which optimisation algorithms in maxLik work better under
    >> R-3.0.3 than under the current version of R?
    >> 
    >> /Arne
    >> 
    >>> On Thu, 8 Oct 2020 at 21:05, Steven Yen
    >>> <styen at ntu.edu.tw> wrote:
    >>> 
    >>> Hmm. You raised an interesting point. Actually I am not
    >>> having problems with aod per se?-it is just a supporting
    >>> package I need while using old R. The essential package
    >>> I need, maxLik, simply works better under R-3.0.3, for
    >>> reason I do not understand?specifically the numerical
    >>> gradients of the likelihood function are not evaluated
    >>> as accurately in newer versions of R in my experience,
    >>> which is why I continue to use R-3.0.3. Because I use
    >>> this older version of R, naturally I need to install
    >>> other supporting packages such as aod and AER.
    >>> Certainly, I will install the zip file of the older
    >>> version of maxLik to the latest R and see what
    >>> happens. Thank you.
    >>> 
    >>> I will install the new maxLik in old R, and old maxLik
    >>> in new R, and see what happens.
    >>> 
    >>> Sent from my iPhone Beware: My autocorrect is crazy
    >>> 
    >>>>> On Oct 9, 2020, at 2:17 AM, Richard M. Heiberger
    >>>>> <rmh at temple.edu> wrote:
    >>>> 
    >>>> ?I wonder if you are perhaps trying to solve the wrong
    >>>> problem.
    >>>> 
    >>>> If you like what the older version of the aod package
    >>>> does, but not the current version, then I think the
    >>>> solution is to propose an option to the aod maintainer
    >>>> that would restore your preferred algorithm into the
    >>>> current version, and then use the current R.
    >>>> 
    >>>> A less good, but possibly workable, option is to
    >>>> compile the old version of aod into the current R.

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Oct  9 17:24:44 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 9 Oct 2020 10:24:44 -0500
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAB8pepxu3KqTuEx+8TCn2fObBPrBAM4t9S6tP=pC_TBf5L5rww@mail.gmail.com>
References: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
 <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>
 <CAB8pepxu3KqTuEx+8TCn2fObBPrBAM4t9S6tP=pC_TBf5L5rww@mail.gmail.com>
Message-ID: <CAF9-5jOJCMt71b5Km-8=mqdRhNDGLrsnNVexv7Y4JXwAm7tExg@mail.gmail.com>

Hi Abby,

thank you for getting back to me and for this useful information.

I'm trying to detect the outliers in my distribution based of mean and
variance. Can I see that from the plot I provided? Would outliers be
outside of ellipses? If so how do I extract those from my data frame,
based on which parameter?

So I am trying to connect outliers based on what the plot is showing:
s <- ggplot(SNP, mapping = aes(x = mean, y = var))
s <- s +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPs")

versus what is in the data:

> head(SNP)
               mean      var     sd
FQC.10090295 0.0327 0.002678 0.0517
FQC.10119363 0.0220 0.000978 0.0313
FQC.10132112 0.0275 0.002088 0.0457
FQC.10201128 0.0169 0.000289 0.0170
FQC.10208432 0.0443 0.004081 0.0639
FQC.10218466 0.0116 0.000131 0.0115
...

the distribution is not normal, it is right-skewed.

Cheers,
Ana

On Fri, Oct 9, 2020 at 2:13 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> > My understanding is that this represents bivariate normal
> > approximation of the data which uses the kernel density function to
> > test for inclusion within a level set. (please correct me)
>
> You can fit a bivariate normal distribution by computing five parameters.
> Two means, two standard deviations (or two variances) and one
> correlation (or covariance) coefficient.
> The bivariate normal *has* elliptical contours.
>
> A kernel density estimate is usually regarded as an estimate of an
> unknown density function.
> Often they use a normal (or Gaussian) kernel, but I wouldn't describe
> them as normal approximations.
> In general, bivariate kernel density estimates do *not* have
> elliptical contours.
> But in saying that, if the data is close to normality, then contours
> will be close to elliptical.
>
> Kernel density estimates do not test for inclusion, as such.
> (But technically, there are some exceptions to that).
>
> I'm not sure what you're trying to achieve here.


From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct  9 18:31:37 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 9 Oct 2020 09:31:37 -0700
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAF9-5jOJCMt71b5Km-8=mqdRhNDGLrsnNVexv7Y4JXwAm7tExg@mail.gmail.com>
References: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
 <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>
 <CAB8pepxu3KqTuEx+8TCn2fObBPrBAM4t9S6tP=pC_TBf5L5rww@mail.gmail.com>
 <CAF9-5jOJCMt71b5Km-8=mqdRhNDGLrsnNVexv7Y4JXwAm7tExg@mail.gmail.com>
Message-ID: <CAGxFJbR-0BSgm5tPC9Nht-UvL4SNiWV11R+HaiHUj7aiNMQueQ@mail.gmail.com>

I recommend that you consult with a local statistical expert. Much of what
you say (outliers?!?) seems to make little sense, and your statistical
knowledge seems minimal. Perhaps more to the point, none of your questions
can be properly answered without subject matter context, which this list is
not designed to provide. That's why I believe you need local expertise.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 9, 2020 at 8:25 AM Ana Marija <sokovic.anamarija at gmail.com>
wrote:

> Hi Abby,
>
> thank you for getting back to me and for this useful information.
>
> I'm trying to detect the outliers in my distribution based of mean and
> variance. Can I see that from the plot I provided? Would outliers be
> outside of ellipses? If so how do I extract those from my data frame,
> based on which parameter?
>
> So I am trying to connect outliers based on what the plot is showing:
> s <- ggplot(SNP, mapping = aes(x = mean, y = var))
> s <- s +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPs")
>
> versus what is in the data:
>
> > head(SNP)
>                mean      var     sd
> FQC.10090295 0.0327 0.002678 0.0517
> FQC.10119363 0.0220 0.000978 0.0313
> FQC.10132112 0.0275 0.002088 0.0457
> FQC.10201128 0.0169 0.000289 0.0170
> FQC.10208432 0.0443 0.004081 0.0639
> FQC.10218466 0.0116 0.000131 0.0115
> ...
>
> the distribution is not normal, it is right-skewed.
>
> Cheers,
> Ana
>
> On Fri, Oct 9, 2020 at 2:13 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
> >
> > > My understanding is that this represents bivariate normal
> > > approximation of the data which uses the kernel density function to
> > > test for inclusion within a level set. (please correct me)
> >
> > You can fit a bivariate normal distribution by computing five parameters.
> > Two means, two standard deviations (or two variances) and one
> > correlation (or covariance) coefficient.
> > The bivariate normal *has* elliptical contours.
> >
> > A kernel density estimate is usually regarded as an estimate of an
> > unknown density function.
> > Often they use a normal (or Gaussian) kernel, but I wouldn't describe
> > them as normal approximations.
> > In general, bivariate kernel density estimates do *not* have
> > elliptical contours.
> > But in saying that, if the data is close to normality, then contours
> > will be close to elliptical.
> >
> > Kernel density estimates do not test for inclusion, as such.
> > (But technically, there are some exceptions to that).
> >
> > I'm not sure what you're trying to achieve here.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Fri Oct  9 18:47:19 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 9 Oct 2020 11:47:19 -0500
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAGxFJbR-0BSgm5tPC9Nht-UvL4SNiWV11R+HaiHUj7aiNMQueQ@mail.gmail.com>
References: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
 <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>
 <CAB8pepxu3KqTuEx+8TCn2fObBPrBAM4t9S6tP=pC_TBf5L5rww@mail.gmail.com>
 <CAF9-5jOJCMt71b5Km-8=mqdRhNDGLrsnNVexv7Y4JXwAm7tExg@mail.gmail.com>
 <CAGxFJbR-0BSgm5tPC9Nht-UvL4SNiWV11R+HaiHUj7aiNMQueQ@mail.gmail.com>
Message-ID: <CAF9-5jPW47nMV_9U0mCoW2OD9P91foMP-2NCXPgfS-+JMFQyTA@mail.gmail.com>

Hi Bert,

Another confrontational response from you...

You might have noticed that I use the word "outlier" carefully in this
post and only in relation to the plotted ellipses. I do not know the
underlying algorithm of geom_density_2d() and therefore I am having an
issue of how to interpret the plot. I was hoping someone here knows
that and can help me.

Ana

On Fri, Oct 9, 2020 at 11:31 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> I recommend that you consult with a local statistical expert. Much of what you say (outliers?!?) seems to make little sense, and your statistical knowledge seems minimal. Perhaps more to the point, none of your questions can be properly answered without subject matter context, which this list is not designed to provide. That's why I believe you need local expertise.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Fri, Oct 9, 2020 at 8:25 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>>
>> Hi Abby,
>>
>> thank you for getting back to me and for this useful information.
>>
>> I'm trying to detect the outliers in my distribution based of mean and
>> variance. Can I see that from the plot I provided? Would outliers be
>> outside of ellipses? If so how do I extract those from my data frame,
>> based on which parameter?
>>
>> So I am trying to connect outliers based on what the plot is showing:
>> s <- ggplot(SNP, mapping = aes(x = mean, y = var))
>> s <- s +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPs")
>>
>> versus what is in the data:
>>
>> > head(SNP)
>>                mean      var     sd
>> FQC.10090295 0.0327 0.002678 0.0517
>> FQC.10119363 0.0220 0.000978 0.0313
>> FQC.10132112 0.0275 0.002088 0.0457
>> FQC.10201128 0.0169 0.000289 0.0170
>> FQC.10208432 0.0443 0.004081 0.0639
>> FQC.10218466 0.0116 0.000131 0.0115
>> ...
>>
>> the distribution is not normal, it is right-skewed.
>>
>> Cheers,
>> Ana
>>
>> On Fri, Oct 9, 2020 at 2:13 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
>> >
>> > > My understanding is that this represents bivariate normal
>> > > approximation of the data which uses the kernel density function to
>> > > test for inclusion within a level set. (please correct me)
>> >
>> > You can fit a bivariate normal distribution by computing five parameters.
>> > Two means, two standard deviations (or two variances) and one
>> > correlation (or covariance) coefficient.
>> > The bivariate normal *has* elliptical contours.
>> >
>> > A kernel density estimate is usually regarded as an estimate of an
>> > unknown density function.
>> > Often they use a normal (or Gaussian) kernel, but I wouldn't describe
>> > them as normal approximations.
>> > In general, bivariate kernel density estimates do *not* have
>> > elliptical contours.
>> > But in saying that, if the data is close to normality, then contours
>> > will be close to elliptical.
>> >
>> > Kernel density estimates do not test for inclusion, as such.
>> > (But technically, there are some exceptions to that).
>> >
>> > I'm not sure what you're trying to achieve here.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Fri Oct  9 22:45:27 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Fri, 9 Oct 2020 20:45:27 +0000
Subject: [R] eps parameer in equiv.test
Message-ID: <CH2PR03MB5158480B6F8F00AC0891659BE2080@CH2PR03MB5158.namprd03.prod.outlook.com>

I am trying to understand the meaning of the eps parameter of the equiv.test parameter of the equiv.test function (package equivUMP)

The help file for equiv.test states that the parameter eps is "a single strictly positive number giving the equivalence limits"
What is the scale of measurement of eps? It does not appear to be the same scale as the scale used for the two vectors that are passed to, and which are tested. Is the eps' scale of measurement the pooled SD of the two vectors, is it the SD of the difference, is it the pooled SE of the difference, is it the SE of the difference? Perhaps it is something entirely different.
Thank you,
John





John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)



	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct  9 23:08:34 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 9 Oct 2020 14:08:34 -0700
Subject: [R] eps parameer in equiv.test
In-Reply-To: <CH2PR03MB5158480B6F8F00AC0891659BE2080@CH2PR03MB5158.namprd03.prod.outlook.com>
References: <CH2PR03MB5158480B6F8F00AC0891659BE2080@CH2PR03MB5158.namprd03.prod.outlook.com>
Message-ID: <CAGxFJbQQRqH0e6Le-q_6OpzPPDdXavjHVP98yw6c0mWWuWfr3g@mail.gmail.com>

See the "details" section, which clearly states:

"*theta = (mu_x - mu_y - mu) / sigma "*

where mu is an optional shift parameter. For simplicity, let mu = 0 ,and
the text in the details section
shows that eps is on the theta scale, i.e. the "standardized" difference.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 9, 2020 at 1:45 PM Sorkin, John <jsorkin at som.umaryland.edu>
wrote:

> I am trying to understand the meaning of the eps parameter of the
> equiv.test parameter of the equiv.test function (package equivUMP)
>
> The help file for equiv.test states that the parameter eps is "a single
> strictly positive number giving the equivalence limits"
> What is the scale of measurement of eps? It does not appear to be the same
> scale as the scale used for the two vectors that are passed to, and which
> are tested. Is the eps' scale of measurement the pooled SD of the two
> vectors, is it the SD of the difference, is it the pooled SE of the
> difference, is it the SE of the difference? Perhaps it is something
> entirely different.
> Thank you,
> John
>
>
>
>
>
> John David Sorkin M.D., Ph.D.
> Professor of Medicine
> Chief, Biostatistics and Informatics
> University of Maryland School of Medicine Division of Gerontology and
> Geriatric Medicine
> Baltimore VA Medical Center
> 10 North Greene Street
> GRECC (BT/18/GR)
> Baltimore, MD 21201-1524
> (Phone) 410-605-7119
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jerem|eju@te @end|ng |rom gm@||@com  Sat Oct 10 00:05:35 2020
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 10 Oct 2020 00:05:35 +0200
Subject: [R] exiting mclapply early on error
In-Reply-To: <C74A5A25-8609-4F91-9654-FF558140DCE7@uga.edu> (Giovanni Righi's
 message of "Thu, 8 Oct 2020 20:52:02 +0000")
References: <C74A5A25-8609-4F91-9654-FF558140DCE7@uga.edu>
Message-ID: <87h7r32gy8.fsf@gmail.com>

Hello Giovanni,

I don't know if my workflow would suit you but I tend to want the
opposite when I launch a parallel process. I tend to want to keep the
processes alive as long as they can. If the computation time is long I
would not want to lose everything.

lapply..8 <- function(X,FUN,...){
    max..cores <- as.numeric(system("grep ^processor /proc/cpuinfo 2>/dev/null | wc -l",TRUE))
    mclapply(X,FUN,mc.cores=min(max..cores,8))
}

lapply_with_error..8 <- function(X,FUN,...) {    
    lapply..8(X, function(x, ...) tryCatch(FUN(x, ...),
                                            error=function(e){
                                       print(e)
                                       e}
                                       ))
}

res <- lapply_with_error..8(X = 1:12, FUN = function(x) {Sys.sleep(0.1); if(x == 4) stop()})

Then we can investigate the problem for the element that generated
errors. It is even better if we could anticipate the errors and avoid
surprises  by well _testing_ the function before launching a long
process. 

If you want the processes to fail fast, I fear that you want to launch the parallel process too soon without
having tested your function enough.  

HTH,

Jeremie


From D@n@Ry@n @end|ng |rom unbc@c@  Fri Oct  9 18:11:30 2020
From: D@n@Ry@n @end|ng |rom unbc@c@ (Dan Ryan)
Date: Fri, 9 Oct 2020 16:11:30 +0000
Subject: [R] Help using the exclude option in the neuralnet package
Message-ID: <e2edc63e6ccf45ffa1fd8855fdb66eb1@pg-adr-exch-01.adr.unbc.ca>

Good Morning,

I am using the neuralnet package in R, and am able to produce some basic neural nets, and use the output.

I would like to exclude some of the weights and biases from the iteration process and fix their values.

However I do not seem to be able to correctly define the exclude and constant.weights vectors.

Question:  Can someone point me to an example where exclude and contant.weights are used.  I have search the R help archive, and haven't found any examples which use these on the web.

Thank you in advance for any help.

Sincerely

Dan

	[[alternative HTML version deleted]]


From m@r|@cr|@t|n@@m@ur|z|o @end|ng |rom gm@||@com  Fri Oct  9 19:39:10 2020
From: m@r|@cr|@t|n@@m@ur|z|o @end|ng |rom gm@||@com (Maria Cristina Maurizio)
Date: Fri, 9 Oct 2020 19:39:10 +0200
Subject: [R] Question about the package "MatchIt"
Message-ID: <CABGzq1U0oQ+Ho-Ejo9j9KGzuETWZ63HATtARCsbEbYiMA1or2Q@mail.gmail.com>

Hi! I'm trying to perform propensity score matching on survey data and so
for each individual observation I have a statistical weight attached. My
question is: is there a way within the package to consider these weights in
the matching procedure?
Thank you very much.

-- 
Maria Cristina Maurizio

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Sat Oct 10 01:08:40 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 10 Oct 2020 12:08:40 +1300
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAF9-5jPW47nMV_9U0mCoW2OD9P91foMP-2NCXPgfS-+JMFQyTA@mail.gmail.com>
References: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
 <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>
 <CAB8pepxu3KqTuEx+8TCn2fObBPrBAM4t9S6tP=pC_TBf5L5rww@mail.gmail.com>
 <CAF9-5jOJCMt71b5Km-8=mqdRhNDGLrsnNVexv7Y4JXwAm7tExg@mail.gmail.com>
 <CAGxFJbR-0BSgm5tPC9Nht-UvL4SNiWV11R+HaiHUj7aiNMQueQ@mail.gmail.com>
 <CAF9-5jPW47nMV_9U0mCoW2OD9P91foMP-2NCXPgfS-+JMFQyTA@mail.gmail.com>
Message-ID: <CAB8pepxWeofqdGfrynM97JyMCaPxF66GTRT5TR=dWLJZB_-d_g@mail.gmail.com>

You could assign a density value to each point.
Maybe you've done that already...?

Then trim the lowest n (number of) data points
Or trim the lowest p (proportion of) data points.

e.g.
Remove the data points with the 20 lowest density values.
Or remove the data points with the lowest 5% of density values.

I'll let you decide whether that is a good idea or a bad idea.
And if it's a good idea, then how much to trim.


On Sat, Oct 10, 2020 at 5:47 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> Hi Bert,
>
> Another confrontational response from you...
>
> You might have noticed that I use the word "outlier" carefully in this
> post and only in relation to the plotted ellipses. I do not know the
> underlying algorithm of geom_density_2d() and therefore I am having an
> issue of how to interpret the plot. I was hoping someone here knows
> that and can help me.
>
> Ana
>
> On Fri, Oct 9, 2020 at 11:31 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> > I recommend that you consult with a local statistical expert. Much of what you say (outliers?!?) seems to make little sense, and your statistical knowledge seems minimal. Perhaps more to the point, none of your questions can be properly answered without subject matter context, which this list is not designed to provide. That's why I believe you need local expertise.
> >
> > Bert Gunter
> >
> > "The trouble with having an open mind is that people keep coming along and sticking things into it."
> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> > On Fri, Oct 9, 2020 at 8:25 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> >>
> >> Hi Abby,
> >>
> >> thank you for getting back to me and for this useful information.
> >>
> >> I'm trying to detect the outliers in my distribution based of mean and
> >> variance. Can I see that from the plot I provided? Would outliers be
> >> outside of ellipses? If so how do I extract those from my data frame,
> >> based on which parameter?
> >>
> >> So I am trying to connect outliers based on what the plot is showing:
> >> s <- ggplot(SNP, mapping = aes(x = mean, y = var))
> >> s <- s +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPs")
> >>
> >> versus what is in the data:
> >>
> >> > head(SNP)
> >>                mean      var     sd
> >> FQC.10090295 0.0327 0.002678 0.0517
> >> FQC.10119363 0.0220 0.000978 0.0313
> >> FQC.10132112 0.0275 0.002088 0.0457
> >> FQC.10201128 0.0169 0.000289 0.0170
> >> FQC.10208432 0.0443 0.004081 0.0639
> >> FQC.10218466 0.0116 0.000131 0.0115
> >> ...
> >>
> >> the distribution is not normal, it is right-skewed.
> >>
> >> Cheers,
> >> Ana
> >>
> >> On Fri, Oct 9, 2020 at 2:13 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
> >> >
> >> > > My understanding is that this represents bivariate normal
> >> > > approximation of the data which uses the kernel density function to
> >> > > test for inclusion within a level set. (please correct me)
> >> >
> >> > You can fit a bivariate normal distribution by computing five parameters.
> >> > Two means, two standard deviations (or two variances) and one
> >> > correlation (or covariance) coefficient.
> >> > The bivariate normal *has* elliptical contours.
> >> >
> >> > A kernel density estimate is usually regarded as an estimate of an
> >> > unknown density function.
> >> > Often they use a normal (or Gaussian) kernel, but I wouldn't describe
> >> > them as normal approximations.
> >> > In general, bivariate kernel density estimates do *not* have
> >> > elliptical contours.
> >> > But in saying that, if the data is close to normality, then contours
> >> > will be close to elliptical.
> >> >
> >> > Kernel density estimates do not test for inclusion, as such.
> >> > (But technically, there are some exceptions to that).
> >> >
> >> > I'm not sure what you're trying to achieve here.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Sat Oct 10 01:21:03 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Fri, 9 Oct 2020 18:21:03 -0500
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAB8pepxWeofqdGfrynM97JyMCaPxF66GTRT5TR=dWLJZB_-d_g@mail.gmail.com>
References: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
 <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>
 <CAB8pepxu3KqTuEx+8TCn2fObBPrBAM4t9S6tP=pC_TBf5L5rww@mail.gmail.com>
 <CAF9-5jOJCMt71b5Km-8=mqdRhNDGLrsnNVexv7Y4JXwAm7tExg@mail.gmail.com>
 <CAGxFJbR-0BSgm5tPC9Nht-UvL4SNiWV11R+HaiHUj7aiNMQueQ@mail.gmail.com>
 <CAF9-5jPW47nMV_9U0mCoW2OD9P91foMP-2NCXPgfS-+JMFQyTA@mail.gmail.com>
 <CAB8pepxWeofqdGfrynM97JyMCaPxF66GTRT5TR=dWLJZB_-d_g@mail.gmail.com>
Message-ID: <CAF9-5jPZDaKShvN4F5AFs6XO3j4uzZiZndt1K_kwiEwpJD=R0A@mail.gmail.com>

Hi Abby,

Thanks for getting back to me, yes I believe I did that by doing this:

SNP$density <- get_density(SNP$mean, SNP$var)
> summary(SNP$density)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
      0     383     696     738    1170    1789

where get_density() is function from here:
https://slowkow.com/notes/ggplot2-color-by-density/

and keep only entries with density > 400

a=SNP[SNP$density>400,]

and plot it again:

p <- ggplot(a, mapping = aes(x = mean, y = var))
p <- p +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPS_red")

and probably I can increase that threshold...

Any idea how do I interpret data points that are left contained within
the ellipses?

On Fri, Oct 9, 2020 at 6:09 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> You could assign a density value to each point.
> Maybe you've done that already...?
>
> Then trim the lowest n (number of) data points
> Or trim the lowest p (proportion of) data points.
>
> e.g.
> Remove the data points with the 20 lowest density values.
> Or remove the data points with the lowest 5% of density values.
>
> I'll let you decide whether that is a good idea or a bad idea.
> And if it's a good idea, then how much to trim.
>
>
> On Sat, Oct 10, 2020 at 5:47 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> >
> > Hi Bert,
> >
> > Another confrontational response from you...
> >
> > You might have noticed that I use the word "outlier" carefully in this
> > post and only in relation to the plotted ellipses. I do not know the
> > underlying algorithm of geom_density_2d() and therefore I am having an
> > issue of how to interpret the plot. I was hoping someone here knows
> > that and can help me.
> >
> > Ana
> >
> > On Fri, Oct 9, 2020 at 11:31 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> > >
> > > I recommend that you consult with a local statistical expert. Much of what you say (outliers?!?) seems to make little sense, and your statistical knowledge seems minimal. Perhaps more to the point, none of your questions can be properly answered without subject matter context, which this list is not designed to provide. That's why I believe you need local expertise.
> > >
> > > Bert Gunter
> > >
> > > "The trouble with having an open mind is that people keep coming along and sticking things into it."
> > > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> > >
> > >
> > > On Fri, Oct 9, 2020 at 8:25 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
> > >>
> > >> Hi Abby,
> > >>
> > >> thank you for getting back to me and for this useful information.
> > >>
> > >> I'm trying to detect the outliers in my distribution based of mean and
> > >> variance. Can I see that from the plot I provided? Would outliers be
> > >> outside of ellipses? If so how do I extract those from my data frame,
> > >> based on which parameter?
> > >>
> > >> So I am trying to connect outliers based on what the plot is showing:
> > >> s <- ggplot(SNP, mapping = aes(x = mean, y = var))
> > >> s <- s +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPs")
> > >>
> > >> versus what is in the data:
> > >>
> > >> > head(SNP)
> > >>                mean      var     sd
> > >> FQC.10090295 0.0327 0.002678 0.0517
> > >> FQC.10119363 0.0220 0.000978 0.0313
> > >> FQC.10132112 0.0275 0.002088 0.0457
> > >> FQC.10201128 0.0169 0.000289 0.0170
> > >> FQC.10208432 0.0443 0.004081 0.0639
> > >> FQC.10218466 0.0116 0.000131 0.0115
> > >> ...
> > >>
> > >> the distribution is not normal, it is right-skewed.
> > >>
> > >> Cheers,
> > >> Ana
> > >>
> > >> On Fri, Oct 9, 2020 at 2:13 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
> > >> >
> > >> > > My understanding is that this represents bivariate normal
> > >> > > approximation of the data which uses the kernel density function to
> > >> > > test for inclusion within a level set. (please correct me)
> > >> >
> > >> > You can fit a bivariate normal distribution by computing five parameters.
> > >> > Two means, two standard deviations (or two variances) and one
> > >> > correlation (or covariance) coefficient.
> > >> > The bivariate normal *has* elliptical contours.
> > >> >
> > >> > A kernel density estimate is usually regarded as an estimate of an
> > >> > unknown density function.
> > >> > Often they use a normal (or Gaussian) kernel, but I wouldn't describe
> > >> > them as normal approximations.
> > >> > In general, bivariate kernel density estimates do *not* have
> > >> > elliptical contours.
> > >> > But in saying that, if the data is close to normality, then contours
> > >> > will be close to elliptical.
> > >> >
> > >> > Kernel density estimates do not test for inclusion, as such.
> > >> > (But technically, there are some exceptions to that).
> > >> >
> > >> > I'm not sure what you're trying to achieve here.
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: snps_red.pdf
Type: application/pdf
Size: 29558 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20201009/090e5bd6/attachment.pdf>

From z|xu@n@q| @end|ng |rom duke@edu  Sat Oct 10 02:13:30 2020
From: z|xu@n@q| @end|ng |rom duke@edu (Zixuan Qi)
Date: Sat, 10 Oct 2020 00:13:30 +0000
Subject: [R] highfrequency package-jump test
Message-ID: <SN6PR05MB5214311B0683CD5A71C7509198090@SN6PR05MB5214.namprd05.prod.outlook.com>

Hello,

My programming is as follows.

library(highfrequency)
library(data.table)
library(xts)
tm<-seq.POSIXt(from = as.POSIXct("2020-08-20 09:30:00"),to = as.POSIXct("2020-08-20 15:59:00"),by='min')
data<-xts(x=data$PRICE,order.by=tm)
data <- as.data.table(data)
setnames(data,c('index'),c('DT'))
setnames(data,c('V1'),c('PRICE'))
LMtest <- intradayJumpTest(pData = data,volEstimator = "RM", driftEstimator = "none",RM = "bipower", lookBackPeriod = 20,on = 'minutes', k = 5, marketOpen = "09:30:00",marketClose = "15:59:00")
plot(LMtest)

However, the error is that ''Error in xy.coords(x, y, setLab = FALSE) : 'x' and 'y' lengths differ''. I don't know how to correct it.


	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Sat Oct 10 02:22:25 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 10 Oct 2020 13:22:25 +1300
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAF9-5jPZDaKShvN4F5AFs6XO3j4uzZiZndt1K_kwiEwpJD=R0A@mail.gmail.com>
References: <CAF9-5jOJjPsx9a8v1J=LwZ+PXJKhDdYZ2iR=ZMZYB95x_T+jZw@mail.gmail.com>
 <CAF9-5jO3KS58hLwrf9pqr_UQ7uysVPCM07cCyrPdK3i9XRVj4A@mail.gmail.com>
 <CAB8pepxu3KqTuEx+8TCn2fObBPrBAM4t9S6tP=pC_TBf5L5rww@mail.gmail.com>
 <CAF9-5jOJCMt71b5Km-8=mqdRhNDGLrsnNVexv7Y4JXwAm7tExg@mail.gmail.com>
 <CAGxFJbR-0BSgm5tPC9Nht-UvL4SNiWV11R+HaiHUj7aiNMQueQ@mail.gmail.com>
 <CAF9-5jPW47nMV_9U0mCoW2OD9P91foMP-2NCXPgfS-+JMFQyTA@mail.gmail.com>
 <CAB8pepxWeofqdGfrynM97JyMCaPxF66GTRT5TR=dWLJZB_-d_g@mail.gmail.com>
 <CAF9-5jPZDaKShvN4F5AFs6XO3j4uzZiZndt1K_kwiEwpJD=R0A@mail.gmail.com>
Message-ID: <CAB8pepxCNahVbG-yn85gwRpmgK+npNqAnpfG=mbLA-WX+Qeugg@mail.gmail.com>

> SNP$density <- get_density(SNP$mean, SNP$var)
> > summary(SNP$density)
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>       0     383     696     738    1170    1789

This doesn't look accurate.
The density values shouldn't all be integers.
And I wouldn't expect the smallest density to be zero, if using a
Gaussian kernel.

Are these values rounded or formatted?

(Recombined Excerpts)
> and keep only entries with density > 400
> a=SNP[SNP$density>400,]
> Any idea how do I interpret data points that are left contained within
the ellipses?

Reiterating, they're contour lines, but they should *not* be ellipses.

You could work out the proportion of "densities" > 400.

    d <- SNP$density
    p.remain <- length (d [d > 400]) / length (d)
    p.remain

Or a more succinct version:

    p.remain <- sum (SNP$density > 400) / nrow (SNP)

Then you can say that you've plotted data with the highest <p.remain> densities.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Oct 10 02:29:42 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 9 Oct 2020 17:29:42 -0700
Subject: [R] 2 D density plot interpretation and manipulating the data
In-Reply-To: <CAF9-5jPZDaKShvN4F5AFs6XO3j4uzZiZndt1K_kwiEwpJD=R0A@mail.gmail.com>
References: <CAF9-5jPZDaKShvN4F5AFs6XO3j4uzZiZndt1K_kwiEwpJD=R0A@mail.gmail.com>
Message-ID: <074B4F34-16D0-4055-8566-1784B64A0A14@comcast.net>

I?m wondering if you do any searching of the Web or use the help facilities before asking questions? When I posed the question to Google?s search facilities I immediately was directed to, unsurprisingly, the help page text in a webpage format:

https://ggplot2.tidyverse.org/reference/geom_density_2d.html

In many situations I find it very difficult to pry code out of ggplot functions, but that help page says it?s a routine found in the MASS package which is very well documented. 
? 
David. 

Sent from my iPhone

> On Oct 9, 2020, at 4:23 PM, Ana Marija <sokovic.anamarija at gmail.com> wrote:
> 
> ?Hi Abby,
> 
> Thanks for getting back to me, yes I believe I did that by doing this:
> 
> SNP$density <- get_density(SNP$mean, SNP$var)
>> summary(SNP$density)
>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>      0     383     696     738    1170    1789
> 
> where get_density() is function from here:
> https://slowkow.com/notes/ggplot2-color-by-density/
> 
> and keep only entries with density > 400
> 
> a=SNP[SNP$density>400,]
> 
> and plot it again:
> 
> p <- ggplot(a, mapping = aes(x = mean, y = var))
> p <- p +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPS_red")
> 
> and probably I can increase that threshold...
> 
> Any idea how do I interpret data points that are left contained within
> the ellipses?
> 
>> On Fri, Oct 9, 2020 at 6:09 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>> 
>> You could assign a density value to each point.
>> Maybe you've done that already...?
>> 
>> Then trim the lowest n (number of) data points
>> Or trim the lowest p (proportion of) data points.
>> 
>> e.g.
>> Remove the data points with the 20 lowest density values.
>> Or remove the data points with the lowest 5% of density values.
>> 
>> I'll let you decide whether that is a good idea or a bad idea.
>> And if it's a good idea, then how much to trim.
>> 
>> 
>>> On Sat, Oct 10, 2020 at 5:47 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>>> 
>>> Hi Bert,
>>> 
>>> Another confrontational response from you...
>>> 
>>> You might have noticed that I use the word "outlier" carefully in this
>>> post and only in relation to the plotted ellipses. I do not know the
>>> underlying algorithm of geom_density_2d() and therefore I am having an
>>> issue of how to interpret the plot. I was hoping someone here knows
>>> that and can help me.
>>> 
>>> Ana
>>> 
>>> On Fri, Oct 9, 2020 at 11:31 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>>> 
>>>> I recommend that you consult with a local statistical expert. Much of what you say (outliers?!?) seems to make little sense, and your statistical knowledge seems minimal. Perhaps more to the point, none of your questions can be properly answered without subject matter context, which this list is not designed to provide. That's why I believe you need local expertise.
>>>> 
>>>> Bert Gunter
>>>> 
>>>> "The trouble with having an open mind is that people keep coming along and sticking things into it."
>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>> 
>>>> 
>>>> On Fri, Oct 9, 2020 at 8:25 AM Ana Marija <sokovic.anamarija at gmail.com> wrote:
>>>>> 
>>>>> Hi Abby,
>>>>> 
>>>>> thank you for getting back to me and for this useful information.
>>>>> 
>>>>> I'm trying to detect the outliers in my distribution based of mean and
>>>>> variance. Can I see that from the plot I provided? Would outliers be
>>>>> outside of ellipses? If so how do I extract those from my data frame,
>>>>> based on which parameter?
>>>>> 
>>>>> So I am trying to connect outliers based on what the plot is showing:
>>>>> s <- ggplot(SNP, mapping = aes(x = mean, y = var))
>>>>> s <- s +  geom_density_2d() + geom_point() + my.theme + ggtitle("SNPs")
>>>>> 
>>>>> versus what is in the data:
>>>>> 
>>>>>> head(SNP)
>>>>>               mean      var     sd
>>>>> FQC.10090295 0.0327 0.002678 0.0517
>>>>> FQC.10119363 0.0220 0.000978 0.0313
>>>>> FQC.10132112 0.0275 0.002088 0.0457
>>>>> FQC.10201128 0.0169 0.000289 0.0170
>>>>> FQC.10208432 0.0443 0.004081 0.0639
>>>>> FQC.10218466 0.0116 0.000131 0.0115
>>>>> ...
>>>>> 
>>>>> the distribution is not normal, it is right-skewed.
>>>>> 
>>>>> Cheers,
>>>>> Ana
>>>>> 
>>>>> On Fri, Oct 9, 2020 at 2:13 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
>>>>>> 
>>>>>>> My understanding is that this represents bivariate normal
>>>>>>> approximation of the data which uses the kernel density function to
>>>>>>> test for inclusion within a level set. (please correct me)
>>>>>> 
>>>>>> You can fit a bivariate normal distribution by computing five parameters.
>>>>>> Two means, two standard deviations (or two variances) and one
>>>>>> correlation (or covariance) coefficient.
>>>>>> The bivariate normal *has* elliptical contours.
>>>>>> 
>>>>>> A kernel density estimate is usually regarded as an estimate of an
>>>>>> unknown density function.
>>>>>> Often they use a normal (or Gaussian) kernel, but I wouldn't describe
>>>>>> them as normal approximations.
>>>>>> In general, bivariate kernel density estimates do *not* have
>>>>>> elliptical contours.
>>>>>> But in saying that, if the data is close to normality, then contours
>>>>>> will be close to elliptical.
>>>>>> 
>>>>>> Kernel density estimates do not test for inclusion, as such.
>>>>>> (But technically, there are some exceptions to that).
>>>>>> 
>>>>>> I'm not sure what you're trying to achieve here.
>>>>> 
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
> <snps_red.pdf>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @b|@yeng@|@b@ @end|ng |rom gm@||@com  Fri Oct  9 13:31:39 2020
From: @b|@yeng@|@b@ @end|ng |rom gm@||@com (Ablaye Ngalaba)
Date: Fri, 9 Oct 2020 13:31:39 +0200
Subject: [R] Aide pour finaliser ce code
Message-ID: <CAOkWQv1WSzRbCKhXEECz_gJpX5gmO_kNHHmH+TJKQeRyEcQvSQ@mail.gmail.com>

Hello.
Here is my R code. I used the functional data . Now I need to use the
functional data by applying the kernels instead of the xi, yi functions.


Bonjour.
Voici mon code en R . J'ai utiliser les donn?es fonctionnelles . Maintenant
j'ai besoin d'utiliser les donn?es fonctionnelles en appliquant les noyaux
? la place des fontions xi, yi





library(MASS)

CentrageV<-function(X,Ms,n){
# cette fonction centre les donn?es de X
X1=X*0
for (i in 1:n){
X1[i,]=X[i,]-Ms
}
return(X1)
}


# Fonction N?2
SqrtMatrice0<-function(M) {
# Cette fonction nous permet de calculer la racine carr?e d'une matrice
# en utilisant la d?composition M=PDQ o? Q est l'inverse de P
# ici les valeurs propres n?gatives sont remplac?es par zero
 a=eigen(M,TRUE)
 b=a$values
 b[b<0]=0
 c=a$vectors
 d=diag(sqrt(b))
 b=solve(c)
 a=c%*%d%*%b
return(a)
}


# d?claration des parametres
m1=0.01 # valeur de alpha (risque de 1%)
m2=0.05 # valeur de alpha (risque de 5%)
m3=0.1 # valeur de alpha (risque de 10%)
nbrefoissim=100 # nbrefois que le programme tourne
p=2 #dimension de la variable X
q=3 #dimension de la variable Y
R=c(2,3,2);# Nbre de partition de chaque composante de la variable Y
if(length(R) != q) stop("La taille de R doit ?tre ?gale ? q")
n=25 # Taille echantillon
N=c(25,50,100,200,300,400,500,1000) #differentes tailles de l'?chantillion
N=c(25,50) #differentes tailles de l'?chantillion

K=0
MV=matrix(0,nr=2,nc=4)
dimnames(MV)[[2]]=c("n","r1%","r5%","r10%")


#Debut du programme

 for (n in N){


l1=0 # initialisation de la valeur permettant calculer le niveau de test ?
1%
l2=0 # initialisation de la valeur permettant calculer le niveau de test ?
5%
l3=0 # initialisation de la valeur permettant calculer le niveau de test ?
10%

# Cr?ation d'une liste n11 qui contient les tailles des differents groupes
n11=list()
for (i in 1:q){
n11[[i]]=rep(as.integer(n/R[i]),R[i])
n11[[i]][R[i]]=n-((R[i]-1)*n11[[i]][1])
}


# Cr?ation des listes  P11 et P12 qui contient les probabilit?s et
# les inverses des probabilites empiriques des differents groupes
respectivement

P11=list()
P12=list()
for (i in 1:q){
P11[[i]]=n11[[i]]/n
P12[[i]]=n/n11[[i]]

}

# cr?ation d'une liste contenant les matrices W
W=list()
for (i in 1:q){
w=matrix(0,n,R[i])
w[1:n11[[i]][1],1]=1
for (j in 2:R[i]){
s1=sum(n11[[i]][1:(j-1)])
w[(1+s1):(s1+n11[[i]][j]),j]=1
}
W[[i]]=w
}

for (i1 in 1:nbrefoissim){

# g?neration des donn?es
VA1=mvrnorm(n,rep(0,(p+q)),diag((p+q)))
X=VA1[,1:p]
Y=VA1[,(p+1):(p+q)]

# Calcul de Xbar
Xbar=colMeans(X)

# Calcul des Xjh bar
Xjhbar=list()
for (i in 1:q){
  w=matrix(0,R[i],p)
  for (j in 1:R[i]){
     w[j,]=colSums(W[[i]][,j]*X)/n11[[i]][j]
  }
  Xjhbar[[i]]=w
}

#calcul des TO jh

TO.jh=list()
for (i in 1:q){
  w=Xjhbar[[i]]
  to=w*0
  for (j in 1:R[i]){
     to[j,]=w[j,]-Xbar
  }
  TO.jh[[i]]=to
}

#calcul des Lamda J

Lamda=matrix(0,p,p)
for (i in 1:q){
  to=TO.jh[[i]]
  w=matrix(0,p,p)
  for (j in 1:R[i]){
     w=w+(P11[[i]][j]*(to[j,]%*%t(to[j,])))
  }
  Lamda=Lamda+w
}

tr1=n*sum(diag(Lamda))

# Calcul de Gamma

GGamma=matrix(0,p*sum(R),p*sum(R))
PGamma=kronecker(diag(P11[[1]]),diag(p))
Ifin=p*R[1]
GGamma[1:Ifin,1:Ifin]=PGamma
for (i in 2:q){
  PGamma=kronecker(diag(P11[[i]]),diag(p))
  Idebut=((p*sum(R[1:(i-1)]))+1)
  Ifin=(p*sum(R[1:i]))
  GGamma[Idebut:Ifin,Idebut:Ifin]=PGamma
}

#Calcul de Sigma

  # Calcul de Vn
  X1=CentrageV(X,Xbar,n)
  Vn=t(X1)%*%X1/n

## Construction de Sigma
GSigma=matrix(0,p*sum(R),p*sum(R))
for (i in 1:q ){
   for (j in 1:R[i] ){
      for (k in 1:q ){
         for (l in 1:R[k]){
            Xij=CentrageV(X,Xjhbar[[i]][j,],n)
            Xkl=CentrageV(X,Xjhbar[[k]][l,],n)
            Vijkl=t(W[[i]][j]*Xij)%*%(W[[k]][l]*Xkl)/n
            Vij=t(W[[i]][j]*Xij)%*%Xij/n11[[i]][j]
            Vkl=t(W[[k]][l]*Xkl)%*%Xkl/n11[[k]][l]
            if (i==1) Idebut=((j-1)*p)+1 else
Idebut=((sum(R[1:(i-1)])+j-1)*p)+1
   if (i==1) Idebut1=(j*p) else Idebut1=((sum(R[1:(i-1)])+j)*p)
            if (k==1) Ifin=((l-1)*p)+1 else Ifin=((sum(R[1:(k-1)])+l-1)*p)+1
   if (k==1) Ifin1=(l*p) else Ifin1=((sum(R[1:(k-1)])+l)*p)

 GSigma[Idebut:Idebut1,Ifin:Ifin1]=Vijkl+(P11[[i]][j]*P11[[k]][l]*(Vn-Vij-Vkl))
}
     }
   }
 }


# D?terminations des valeurs propres de sigma epsilon
pa=SqrtMatrice0(GSigma)
mq= pa %*% GGamma %*% pa
u=Re(eigen(mq)$values)


# d?termination de d?gr? de libert? et valeur c not? va
dl=(sum(u)^2)/(sum(u^2))
va=(sum(u^2))/(sum(u))
pc=1-pchisq(tr1/va, df= dl)

# Test de la valeur obtenue
if (pc>m1) d1=0 else d1=1
if (pc>m2) d2=0 else d2=1
if (pc>m3) d3=0 else d3=1
l1=l1+d1
l2=l2+d2
l3=l3+d3
}
K=K+1
MV[K,1]=n
MV[K,2]=l1/nbrefoissim
MV[K,3]=l2/nbrefoissim
MV[K,4]=l3/nbrefoissim
}

	[[alternative HTML version deleted]]


From jerem|eju@te @end|ng |rom gm@||@com  Sat Oct 10 08:38:27 2020
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 10 Oct 2020 08:38:27 +0200
Subject: [R] Question about the package "MatchIt"
In-Reply-To: <CABGzq1U0oQ+Ho-Ejo9j9KGzuETWZ63HATtARCsbEbYiMA1or2Q@mail.gmail.com>
 (Maria Cristina Maurizio's message of "Fri, 9 Oct 2020 19:39:10
 +0200")
References: <CABGzq1U0oQ+Ho-Ejo9j9KGzuETWZ63HATtARCsbEbYiMA1or2Q@mail.gmail.com>
Message-ID: <87d01q37rw.fsf@gmail.com>

Hello Maria Cristina,

On Friday,  9 Oct 2020 at 19:39, Maria Cristina Maurizio wrote:
> Hi! I'm trying to perform propensity score matching on survey data and so
> for each individual observation I have a statistical weight attached. My
> question is: is there a way within the package to consider these weights in
> the matching procedure?
I'm afraid it is difficult to help you based on the information you have provided.

Could you please provide more information about your issue ?
A minimal reproducible code would be of great help to have a more
precise idea of the problem you are facing.


PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

Best regards,
-- 
Jeremie Juste


From jerem|eju@te @end|ng |rom gm@||@com  Sat Oct 10 08:46:23 2020
From: jerem|eju@te @end|ng |rom gm@||@com (Jeremie Juste)
Date: Sat, 10 Oct 2020 08:46:23 +0200
Subject: [R] Aide pour finaliser ce code
In-Reply-To: <CAOkWQv1WSzRbCKhXEECz_gJpX5gmO_kNHHmH+TJKQeRyEcQvSQ@mail.gmail.com>
 (Ablaye Ngalaba's message of "Fri, 9 Oct 2020 13:31:39 +0200")
References: <CAOkWQv1WSzRbCKhXEECz_gJpX5gmO_kNHHmH+TJKQeRyEcQvSQ@mail.gmail.com>
Message-ID: <877dry37eo.fsf@gmail.com>

Hello Ablaye,

I didn't find any function xi ,yi.

This is an english mailing list. You will maximize your chance of
getting help by sticking to english.

I would also recommend that you comment your code in English, it will be
easier to share. But on this one it is your call.

PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

Best regards,
Jeremie Juste

On Friday,  9 Oct 2020 at 13:31, Ablaye Ngalaba wrote:
> Hello.
> Here is my R code. I used the functional data . Now I need to use the
> functional data by applying the kernels instead of the xi, yi functions.
>
> Bonjour.
> Voici mon code en R . J'ai utiliser les donn?es fonctionnelles . Maintenant
> j'ai besoin d'utiliser les donn?es fonctionnelles en appliquant les noyaux
> ? la place des fontions xi, yi
>
> library(MASS)
>
> CentrageV<-function(X,Ms,n){
> # cette fonction centre les donn?es de X
> X1=X*0
> for (i in 1:n){
> X1[i,]=X[i,]-Ms
> }
> return(X1)
> }
>
> # Fonction N?2
> SqrtMatrice0<-function(M) {
> # Cette fonction nous permet de calculer la racine carr?e d'une matrice
> # en utilisant la d?composition M=PDQ o? Q est l'inverse de P
> # ici les valeurs propres n?gatives sont remplac?es par zero
>  a=eigen(M,TRUE)
>  b=a$values
>  b[b<0]=0
>  c=a$vectors
>  d=diag(sqrt(b))
>  b=solve(c)
>  a=c%*%d%*%b
> return(a)
> }
>
> # d?claration des parametres
> m1=0.01 # valeur de alpha (risque de 1%)
> m2=0.05 # valeur de alpha (risque de 5%)
> m3=0.1 # valeur de alpha (risque de 10%)
> nbrefoissim=100 # nbrefois que le programme tourne
> p=2 #dimension de la variable X
> q=3 #dimension de la variable Y
> R=c(2,3,2);# Nbre de partition de chaque composante de la variable Y
> if(length(R) != q) stop("La taille de R doit ?tre ?gale ? q")
> n=25 # Taille echantillon
> N=c(25,50,100,200,300,400,500,1000) #differentes tailles de l'?chantillion
> N=c(25,50) #differentes tailles de l'?chantillion
>
> K=0
> MV=matrix(0,nr=2,nc=4)
> dimnames(MV)[[2]]=c("n","r1%","r5%","r10%")
>
> #Debut du programme
>
>  for (n in N){
>
> l1=0 # initialisation de la valeur permettant calculer le niveau de test ?
> 1%
> l2=0 # initialisation de la valeur permettant calculer le niveau de test ?
> 5%
> l3=0 # initialisation de la valeur permettant calculer le niveau de test ?
> 10%
>
> # Cr?ation d'une liste n11 qui contient les tailles des differents groupes
> n11=list()
> for (i in 1:q){
> n11[[i]]=rep(as.integer(n/R[i]),R[i])
> n11[[i]][R[i]]=n-((R[i]-1)*n11[[i]][1])
> }
>
> # Cr?ation des listes  P11 et P12 qui contient les probabilit?s et
> # les inverses des probabilites empiriques des differents groupes
> respectivement
>
> P11=list()
> P12=list()
> for (i in 1:q){
> P11[[i]]=n11[[i]]/n
> P12[[i]]=n/n11[[i]]
>
> }
>
> # cr?ation d'une liste contenant les matrices W
> W=list()
> for (i in 1:q){
> w=matrix(0,n,R[i])
> w[1:n11[[i]][1],1]=1
> for (j in 2:R[i]){
> s1=sum(n11[[i]][1:(j-1)])
> w[(1+s1):(s1+n11[[i]][j]),j]=1
> }
> W[[i]]=w
> }
>
> for (i1 in 1:nbrefoissim){
>
> # g?neration des donn?es
> VA1=mvrnorm(n,rep(0,(p+q)),diag((p+q)))
> X=VA1[,1:p]
> Y=VA1[,(p+1):(p+q)]
>
> # Calcul de Xbar
> Xbar=colMeans(X)
>
> # Calcul des Xjh bar
> Xjhbar=list()
> for (i in 1:q){
>   w=matrix(0,R[i],p)
>   for (j in 1:R[i]){
>      w[j,]=colSums(W[[i]][,j]*X)/n11[[i]][j]
>   }
>   Xjhbar[[i]]=w
> }
>
> #calcul des TO jh
>
> TO.jh=list()
> for (i in 1:q){
>   w=Xjhbar[[i]]
>   to=w*0
>   for (j in 1:R[i]){
>      to[j,]=w[j,]-Xbar
>   }
>   TO.jh[[i]]=to
> }
>
> #calcul des Lamda J
>
> Lamda=matrix(0,p,p)
> for (i in 1:q){
>   to=TO.jh[[i]]
>   w=matrix(0,p,p)
>   for (j in 1:R[i]){
>      w=w+(P11[[i]][j]*(to[j,]%*%t(to[j,])))
>   }
>   Lamda=Lamda+w
> }
>
> tr1=n*sum(diag(Lamda))
>
> # Calcul de Gamma
>
> GGamma=matrix(0,p*sum(R),p*sum(R))
> PGamma=kronecker(diag(P11[[1]]),diag(p))
> Ifin=p*R[1]
> GGamma[1:Ifin,1:Ifin]=PGamma
> for (i in 2:q){
>   PGamma=kronecker(diag(P11[[i]]),diag(p))
>   Idebut=((p*sum(R[1:(i-1)]))+1)
>   Ifin=(p*sum(R[1:i]))
>   GGamma[Idebut:Ifin,Idebut:Ifin]=PGamma
> }
>
> #Calcul de Sigma
>
>   # Calcul de Vn
>   X1=CentrageV(X,Xbar,n)
>   Vn=t(X1)%*%X1/n
>
> ## Construction de Sigma
> GSigma=matrix(0,p*sum(R),p*sum(R))
> for (i in 1:q ){
>    for (j in 1:R[i] ){
>       for (k in 1:q ){
>          for (l in 1:R[k]){
>             Xij=CentrageV(X,Xjhbar[[i]][j,],n)
>             Xkl=CentrageV(X,Xjhbar[[k]][l,],n)
>             Vijkl=t(W[[i]][j]*Xij)%*%(W[[k]][l]*Xkl)/n
>             Vij=t(W[[i]][j]*Xij)%*%Xij/n11[[i]][j]
>             Vkl=t(W[[k]][l]*Xkl)%*%Xkl/n11[[k]][l]
>             if (i==1) Idebut=((j-1)*p)+1 else
> Idebut=((sum(R[1:(i-1)])+j-1)*p)+1
>    if (i==1) Idebut1=(j*p) else Idebut1=((sum(R[1:(i-1)])+j)*p)
>             if (k==1) Ifin=((l-1)*p)+1 else Ifin=((sum(R[1:(k-1)])+l-1)*p)+1
>    if (k==1) Ifin1=(l*p) else Ifin1=((sum(R[1:(k-1)])+l)*p)
>
>  GSigma[Idebut:Idebut1,Ifin:Ifin1]=Vijkl+(P11[[i]][j]*P11[[k]][l]*(Vn-Vij-Vkl))
> }
>      }
>    }
>  }
>
> # D?terminations des valeurs propres de sigma epsilon
> pa=SqrtMatrice0(GSigma)
> mq= pa %*% GGamma %*% pa
> u=Re(eigen(mq)$values)
>
> # d?termination de d?gr? de libert? et valeur c not? va
> dl=(sum(u)^2)/(sum(u^2))
> va=(sum(u^2))/(sum(u))
> pc=1-pchisq(tr1/va, df= dl)
>
> # Test de la valeur obtenue
> if (pc>m1) d1=0 else d1=1
> if (pc>m2) d2=0 else d2=1
> if (pc>m3) d3=0 else d3=1
> l1=l1+d1
> l2=l2+d2
> l3=l3+d3
> }
> K=K+1
> MV[K,1]=n
> MV[K,2]=l1/nbrefoissim
> MV[K,3]=l2/nbrefoissim
> MV[K,4]=l3/nbrefoissim
> }
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From pd@|gd @end|ng |rom gm@||@com  Sat Oct 10 10:11:50 2020
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Sat, 10 Oct 2020 10:11:50 +0200
Subject: [R] [Rd] R 4.0.3 is released
Message-ID: <67241C9F-68B4-4998-81B6-79019F9AB852@gmail.com>

The build system rolled up R-4.0.3.tar.gz (codename "Bunny-Wunnies Freak Out") this morning.

The list below details the changes in this release.

You can get the source code from

https://cran.r-project.org/src/base/R-4/R-4.0.3.tar.gz

or wait for it to be mirrored at a CRAN site nearer to you.

Binaries for various platforms will appear in due course.


For the R Core Team,

Peter Dalgaard

These are the checksums (md5 and SHA-256) for the freshly created files, in case you wish
to check that they are uncorrupted:

MD5 (AUTHORS) = b9c44f9f78cab3184ad9898bebc854b4
MD5 (COPYING) = eb723b61539feef013de476e68b5c50a
MD5 (COPYING.LIB) = a6f89e2100d9b6cdffcea4f398e37343
MD5 (FAQ) = 5be656453b81e9393e2a0c42688b04b8
MD5 (INSTALL) = 7893f754308ca31f1ccf62055090ad7b
MD5 (NEWS) = 71728ef32a09c5b9df36b496b52d5c8e
MD5 (NEWS.0) = bfcd7c147251b5474d96848c6f57e5a8
MD5 (NEWS.1) = eb78c4d053ec9c32b815cf0c2ebea801
MD5 (NEWS.2) = 496062c138e2def06cebccddfb814ac6
MD5 (NEWS.3) = 012e7f4a80cc8ec947bf3f0ff6117ec8
MD5 (R-latest.tar.gz) = 8ecf46afa36c9aff9904aad5ca422c6d
MD5 (README) = f468f281c919665e276a1b691decbbe6
MD5 (RESOURCES) = 529223fd3ffef95731d0a87353108435
MD5 (THANKS) = 251d20510bfc3cc93b82c5a99f7efcc6
MD5 (VERSION-INFO.dcf) = bfbcfb2f4ef4416b635087160f965904
MD5 (R-4/R-4.0.3.tar.gz) = 8ecf46afa36c9aff9904aad5ca422c6d

2cde824a7b18958e5f06b391c801c8288be0f84fa8934b7ddefef23c67e60c09  AUTHORS
e6d6a009505e345fe949e1310334fcb0747f28dae2856759de102ab66b722cb4  COPYING
6095e9ffa777dd22839f7801aa845b31c9ed07f3d6bf8a26dc5d2dec8ccc0ef3  COPYING.LIB
4390543804392e072378b2d75cd3fb0d57e9885f9dc38ddd5a2ff780487b9d97  FAQ
f87461be6cbaecc4dce44ac58e5bd52364b0491ccdadaf846cb9b452e9550f31  INSTALL
895ba3f810fd33d3be63deb6c4588be1f7ba3f5bf80e10ffeafc194221dd5ba9  NEWS
4e21b62f515b749f80997063fceab626d7258c7d650e81a662ba8e0640f12f62  NEWS.0
12b30c724117b1b2b11484673906a6dcd48a361f69fc420b36194f9218692d01  NEWS.1
e80de410c77f05ff2012fa70051b89119845f734a7fa5c55857e61e4ed7d5f6e  NEWS.2
7201d139947afa52b5e09d26dc01445edf444506264355b2185122bc1ed3dce0  NEWS.3
09983a8a78d5fb6bc45d27b1c55f9ba5265f78fa54a55c13ae691f87c5bb9e0d  R-latest.tar.gz
2fdd3e90f23f32692d4b3a0c0452f2c219a10882033d1774f8cadf25886c3ddc  README
408737572ecc6e1135fdb2cf7a9dbb1a6cb27967c757f1771b8c39d1fd2f1ab9  RESOURCES
c9c7cb32308b4e560a22c858819ade9de524a602abd4e92d1c328c89f8037d73  THANKS
cd9666c09064b120655598c1ac792266ad20adb57c36aab4d094dedc7e480fa6  VERSION-INFO.dcf
09983a8a78d5fb6bc45d27b1c55f9ba5265f78fa54a55c13ae691f87c5bb9e0d  R-4/R-4.0.3.tar.gz

This is the relevant part of the NEWS file

CHANGES IN R 4.0.3:

  NEW FEATURES:

    * On platforms using configure option --with-internal-tzcode,
      additional values "internal" and (on macOS only) "macOS" are
      accepted for the environment variable TZDIR.  (See ?TZDIR.)

      On macOS, "macOS" is used by default if the system timezone
      database is a newer version than that in the R installation.

    * When install.packages(type = "source") fails to find a package in
      a repository it mentions package versions which are excluded by
      their R version requirement and links to hints on why a package
      might not be found.

    * The default value for options("timeout") can be set from
      enviromnent variable R_DEFAULT_INTERNET_TIMEOUT, still defaulting
      to 60 (seconds) if that is not set or invalid.

      This may be needed when child R processes are doing downloads,
      for example during the installation of source packages which
      download jars or other forms of data.

  LINK-TIME OPTIMIZATION on a UNIX-ALIKE:

    * There is now support for parallelized Link-Time Optimization
      (LTO) with GCC and for 'thin' LTO with clang _via_ setting the
      LTO macro.

    * There is support for setting a different LTO flag for the Fortran
      compiler, including to empty when mixing clang and gfortran (as
      on macOS).  See file config.site.

    * There is a new LTO_LD macro to set linker options for LTO
      compilation, for example to select an alternative linker or to
      parallelize thin LTO.

  DEPRECATED AND DEFUNCT:

    * The LINPACK argument to chol.default(), chol2inv(),
      solve.default() and svd() has been defunct since R 3.1.0.  Using
      it now gives a warning which will become an error in R 4.1.0.

  BUG FIXES:

    * The code mitigating stack overflow with PCRE regexps on very long
      strings is enabled for PCRE2 < 10.30 also when JIT is enabled,
      since stack overflows have been seen in that case.

    * Fix to correctly show the group labels in dotchart() (which where
      lost in the ylab improvement for R 4.0.0).

    * addmargins(*, ..) now also works when fn() is a local function,
      thanks to bug report and patch PR#17124 from Alex Bertram.

    * rank(x) and hence sort(x) now work when x is an object (as per
      is.object(x)) of type "raw" _and_ provides a valid `[` method,
      e.g., for gmp::as.bigz(.) numbers.

    * chisq.test(*, simulate.p.value=TRUE) and r2dtable() now work
      correctly for large table entries (in the millions).  Reported by
      Sebastian Meyer and investigated by more helpers in PR#16184.

    * Low-level socket read/write operations have been fixed to
      correctly signal communication errors. Previously, such errors
      could lead to a segfault due to invalid memory access. Reported
      and debugged by Dmitriy Selivanov in PR#17850.

    * quantile(x, pr) works more consistently for pr values slightly
      outside [0,1], thanks to Suharto Anggono's PR#17891.

      Further, quantile(x, prN, names=FALSE) now works even when prN
      contains NAs, thanks to Anggono's PR#17892.  Ditto for ordered
      factors or Date objects when type = 1 or 3, thanks to PR#17899.

    * Libcurl-based internet access, including curlGetHeaders(), was
      not respecting the "timeout" option.  If this causes
      unanticipated timeouts, consider increasing the default by
      setting R_DEFAULT_INTERNET_TIMEOUT.

    * as.Date(<char>) now also works with an initial "", thanks to
      Michael Chirico's PR#17909.

    * isS3stdGeneric(f) now detects an S3 generic also when it it is
      trace()d, thanks to Gabe Becker's PR#17917.

    * R_allocLD() has been fixed to return memory aligned for long
      double type PR#16534.

    * fisher.test() no longer segfaults when called again after its
      internal stack has been exceeded PR#17904.

    * Accessing a long vector represented by a compact integer sequence
      no longer segfaults (reported and debugged by Hugh Parsonage).

    * duplicated() now works also for strings with multiple encodings
      inside a single vector PR#17809.

    * phyper(11, 15, 0, 12, log.p=TRUE) no longer gives NaN; reported
      as PR#17271 by Alexey Stukalov.

    * Fix incorrect calculation in logLik.nls() PR#16100, patch from
      Sebastian Meyer.

    * A very old bug could cause a segfault in model.matrix() when
      terms involved logical variables.  Part of PR#17879.

    * model.frame.default() allowed data = 1, leading to involuntary
      variable capture (rest of PR#17879).

    * tar() no longer skips non-directory files, thanks to a patch by
      Sebastian Meyer, fixing the remaining part of PR#16716.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From er|cjberger @end|ng |rom gm@||@com  Sat Oct 10 12:33:37 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sat, 10 Oct 2020 13:33:37 +0300
Subject: [R] highfrequency package-jump test
In-Reply-To: <SN6PR05MB5214311B0683CD5A71C7509198090@SN6PR05MB5214.namprd05.prod.outlook.com>
References: <SN6PR05MB5214311B0683CD5A71C7509198090@SN6PR05MB5214.namprd05.prod.outlook.com>
Message-ID: <CAGgJW77_dOLMrzLH_fAEcDU=bNBF-+7-i8-gN5KEmq+PrzV9AQ@mail.gmail.com>

Hi,
I tried running your code but it is not complete. When you create the xts
you refer to data$PRICE but this has never been defined.

I generated synthetic data and used that to create the xts object as
follows:

x <- runif( length(tm), min=90, max=110 )
data<-xts(x=x,order.by=tm)

When I used this modified code the program executed with no problem.

I hope that helps,
Eric






On Sat, Oct 10, 2020 at 3:13 AM Zixuan Qi <zixuan.qi at duke.edu> wrote:

> Hello,
>
> My programming is as follows.
>
> library(highfrequency)
> library(data.table)
> library(xts)
> tm<-seq.POSIXt(from = as.POSIXct("2020-08-20 09:30:00"),to =
> as.POSIXct("2020-08-20 15:59:00"),by='min')
> data<-xts(x=data$PRICE,order.by=tm)
> data <- as.data.table(data)
> setnames(data,c('index'),c('DT'))
> setnames(data,c('V1'),c('PRICE'))
> LMtest <- intradayJumpTest(pData = data,volEstimator = "RM",
> driftEstimator = "none",RM = "bipower", lookBackPeriod = 20,on = 'minutes',
> k = 5, marketOpen = "09:30:00",marketClose = "15:59:00")
> plot(LMtest)
>
> However, the error is that ''Error in xy.coords(x, y, setLab = FALSE) :
> 'x' and 'y' lengths differ''. I don't know how to correct it.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Oct 10 12:55:41 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 10 Oct 2020 11:55:41 +0100
Subject: [R] highfrequency package-jump test
In-Reply-To: <SN6PR05MB5214311B0683CD5A71C7509198090@SN6PR05MB5214.namprd05.prod.outlook.com>
References: <SN6PR05MB5214311B0683CD5A71C7509198090@SN6PR05MB5214.namprd05.prod.outlook.com>
Message-ID: <bee419fc-a274-2986-2a5d-e70d0a4120be@sapo.pt>

Hello,

The error is not reproducible, the second code line gives:


data<-xts(x=data$PRICE,order.by=tm)
#Error in data$PRICE : object of type 'closure' is not subsettable


Please post a data example in dput format.

dput(head(data, 30))    # post the output of this or similar

Hope this helps,

Rui Barradas

?s 01:13 de 10/10/20, Zixuan Qi escreveu:
> Hello,
> 
> My programming is as follows.
> 
> library(highfrequency)
> library(data.table)
> library(xts)
> tm<-seq.POSIXt(from = as.POSIXct("2020-08-20 09:30:00"),to = as.POSIXct("2020-08-20 15:59:00"),by='min')
> data<-xts(x=data$PRICE,order.by=tm)
> data <- as.data.table(data)
> setnames(data,c('index'),c('DT'))
> setnames(data,c('V1'),c('PRICE'))
> LMtest <- intradayJumpTest(pData = data,volEstimator = "RM", driftEstimator = "none",RM = "bipower", lookBackPeriod = 20,on = 'minutes', k = 5, marketOpen = "09:30:00",marketClose = "15:59:00")
> plot(LMtest)
> 
> However, the error is that ''Error in xy.coords(x, y, setLab = FALSE) : 'x' and 'y' lengths differ''. I don't know how to correct it.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Sat Oct 10 18:28:20 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Sat, 10 Oct 2020 12:28:20 -0400
Subject: [R] Question about the package "MatchIt"
In-Reply-To: <CABGzq1U0oQ+Ho-Ejo9j9KGzuETWZ63HATtARCsbEbYiMA1or2Q@mail.gmail.com>
References: <CABGzq1U0oQ+Ho-Ejo9j9KGzuETWZ63HATtARCsbEbYiMA1or2Q@mail.gmail.com>
Message-ID: <CAJc=yOEwduE+Svi9f6yYND51d1x+r4pwYhrZhBcKwpTeLHxAEw@mail.gmail.com>

Maria Cristina,

The MatchIt homepage at https://gking.harvard.edu/matchit has a link
to a mailing list specific to the package and it has searchable
archives. You will probably have better luck there than a general R
programming list. Though a quick perusal of the user guide at that
site makes me think the answer is probably "no."

Pat


On Fri, Oct 9, 2020 at 7:02 PM Maria Cristina Maurizio
<mariacristina.maurizio at gmail.com> wrote:
>
> Hi! I'm trying to perform propensity score matching on survey data and so
> for each individual observation I have a statistical weight attached. My
> question is: is there a way within the package to consider these weights in
> the matching procedure?
> Thank you very much.
>
> --
> Maria Cristina Maurizio
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His


From eh@@n@k@r|m @end|ng |rom gm@||@com  Sat Oct 10 18:58:43 2020
From: eh@@n@k@r|m @end|ng |rom gm@||@com (Ehsan Karim)
Date: Sat, 10 Oct 2020 09:58:43 -0700
Subject: [R] Question about the package "MatchIt"
In-Reply-To: <CABGzq1U0oQ+Ho-Ejo9j9KGzuETWZ63HATtARCsbEbYiMA1or2Q@mail.gmail.com>
References: <CABGzq1U0oQ+Ho-Ejo9j9KGzuETWZ63HATtARCsbEbYiMA1or2Q@mail.gmail.com>
Message-ID: <CADGDKJge9VMSwbJStTRX=fBFVHmDqnPJG9Zu+fz+66=Njc5B6A@mail.gmail.com>

Maria:

What you are looking for (propensity score matching on survey data) is
discussed in lab 5 components of this series using matchit and matching
package:

https://www.youtube.com/playlist?list=PL2yD6frXhFob_Mvfg21Y01t_yu1aC9NnP

Regards,

Ehsan
https://ehsank.com/


On Fri., Oct. 9, 2020, 4:02 p.m. Maria Cristina Maurizio, <
mariacristina.maurizio at gmail.com> wrote:

> Hi! I'm trying to perform propensity score matching on survey data and so
> for each individual observation I have a statistical weight attached. My
> question is: is there a way within the package to consider these weights in
> the matching procedure?
> Thank you very much.
>
> --
> Maria Cristina Maurizio
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @b|@yeng@|@b@ @end|ng |rom gm@||@com  Sat Oct 10 21:24:08 2020
From: @b|@yeng@|@b@ @end|ng |rom gm@||@com (Ablaye Ngalaba)
Date: Sat, 10 Oct 2020 21:24:08 +0200
Subject: [R] Please need help to finalize my code
Message-ID: <CAOkWQv1UHh8UVHpoo0vs4-9Yu-Lo4nxssQffE6QOGRZ_sjmYmw@mail.gmail.com>

Good evening dear administrators,
It is with pleasure that I am writing to you to ask for help to finalize my
R programming algorithm.

Indeed, I attach this note to my code which deals with a case of
independence test statistic . My request is to introduce the kernels using
the functional data for this same code that I am sending you. So I list the
lines for which we need to introduce the functional data using the kernels
below.

First of all for this code we need to use the functional data. I have
numbered the lines myself from the original code to give some indication
about the lines of code to introduce the kernel.
1)Centering of redescription function phi(xi) (just use the kernel)
2)this function centers the functional data phi(xi) (just use the kernel)
3)phi(x1) (or kernel k( ., .) )
5)Even here the kernel with the functional data is used.
7)return the kernel
28) kernel dimension
29) kernel dimension
30)kernel dimension
73) redescription function phi(xi) or the kernel k(. , .)
74)redescription function phi(yi) or the kernel k(. , .)
76)redescription function phi(xbar) or the kernel k(. , .)
77)redescription function phi(xjhbar) or the kernel k(. , .)
82)redescription function phi(xi) or the kernel k(. , .) introduced instead
of x
84)redescription function phi(xjhbar) or the kernel k(. , .)
89)w= redescription function phi(xbar) or the kernel k(. , .)
120) we center the redescription function phi(xi) or the kernel k(. , .)
121)Vn is a kernel function, so we use ph(xi) or the kernel k(. , , .)
126)centering of the redescription function phi(xji) or the kernel k(. , .)
127)Vij is computed using redescription function phi(xi) or the kernel k(.
, .) instead of X.
130)centering redescription function phi(Xkl) or the kernel k(. , .)
131)Vijkl always using the kernel function as precedent
132)Vkl always using the kernel function as precedent

 I look forward to your help and sincere request.


                             Yours sincerely

library(MASS)

1 CenteringV<-function(X,Ms,n){
2 # this function centers the data of X
3 X1=X*0
4 for (i in 1:n){
5 X1[i,]=X[i,]-Ms
6 }
7 return(X1)
8 }


9 # Function N?2
10 SqrtMatrix0<-function(M) {
11 # This function allows us to compute the square root of a matrix
12 # using the decomposition M=PDQ where Q is the inverse of P
13 # here negative eigenvalues are replaced by zero
 14 a=eigen(M,TRUE)
 15 b=a$values
 16 b[b<0]=0
 17 c=a$vectors
18 d=diag(sqrt(b))
 19 b=solve(c)
20 a=c%*%d%*%b
21 return(a)
22 }


23 # declaration of parameters
24 m1=0.01 # alpha value (1% risk)
25 m2=0.05 # alpha value (5% risk)
26 m3=0.1 # alpha value (10% risk)
27 nbrefoissim=100 # # times the program is running
28 p=3 #dimension of variable X
29 q=3 #dimension of variable Y
30 R=c(5,4,3);# Number of partition of each component of variable Y
31 if(length(R) != q) stop("The size of R must be equal to q")
32 n=25 # Sample size
33 N=c(25,50,100,200,300,400,500,1000) #different sample sizes
34 #N=c(25,50) #different sample sizes
35 pc1=rep(0.100)
36 K=0
37 MV=matrix(0,nr=8,nc=4)
38 dimnames(MV)[[2]]=c("n","r1%","r5%","r10%")


39 #Beginning of the program

 40 for (n in N){


41 l1=0 # initialization of the value to calculate the test level at 1%.
42 l2=0 # initialization of the value to calculate the test level at 5%.
43 l3=0 # initialization of the value to calculate the test level at 10%.

44 # Creation of an n11 list containing the sizes of the different groups
45 n11=list()
46 for (i in 1:q){
47 n11[[i]]=rep(as.integer(n/R[i]),R[i])
48 n11[[i]][R[i]]=n-((R[i]-1)*n11[[i]][1])
49 }


50 # Creation of lists P11 and P12 which contain the probabilities and
51 # the inverses of the empirical probabilities of the different groups
respectively

52 P11=list()
53 P12=list()
54 for (i in 1:q){
55 P11[[i]]=n11[[i]]/n
56 P12[[i]]=n/n11[[i]

57 }

58 # creation of a list containing the W matrices
59 W=list()
60 for (i in 1:q){
61 w=matrix(0,n,R[i])
62 w[1:n11[[i]][1],1]=1
63 if (R[i]>1){
64 for (j in 2:R[i]){
65 s1=sum(n11[[i]][1:(j-1)])
66 w[(1+s1):(s1+n11[[i]][j]),j]=1
67 }}
68 W[[i]]=w
69 }

70 for (i1 in 1:nbrefoissim){

71 # data generation
72 VA1=mvrnorm(n,rep(0,(p+q)),diag((p+q)))
73 X=VA1[,1:p]
74 Y=VA1[,(p+1):(p+q)]

75 # Xbar calculation
76 Xbar=colMeans(X)

77 # Calculation of Xjh bar
78 Xjhbar=list()
79 for (i in 1:q){
80 w=matrix(0,R[i],p)
81 for (j in 1:R[i]){
82 w[j,]=colSums(W[[i]][,j]*X)/n11[[i]][j]
83 }
84 Xjhbar[[i]]=w
85 }

86 #calculation of TO jh

87 TO.jh=list()
88 for (i in 1:q){
89 w=Xjhbar[[i]]
90 to=w*0
91 for (j in 1:R[i]){
92 to[j,]=w[j,]-Xbar
93 }
94 TO.jh[[i]]=to
95 }

96 #calculation of Lamda J

97 Lamda=matrix(0,p,p)
98 for (i in 1:q){
99 to=TO.jh[[i]]
100 w=matrix(0,p,p)
101 for (j in 1:R[i]){
102 w=w+(P11[[i]][j]*(to[j,]%*%t(to[j,])))
103 }
104 Lamda=Lamda+w
105 }

106 tr1=n*sum(diag(Lamda))

107 # Gamma Calculation

108 GGamma=matrix(0,p*sum(R),p*sum(R))
109 PGamma=kronecker(diag(P12[[1]]),diag(p))
110 Ifin=p*R [1]
111 GGamma[1:Ifin,1:Ifin]=PGamma
112 for (i in 2:q){
113 PGamma=kronecker(diag(P12[[i]]),diag(p))
114 Idebut=((p*sum(R[1:(i-1)]))+1)
115 Ifin=(p*sum(R[1:i]))
116 GGamma [Idebut:Ifin,Idebut:Ifin]=PGamma
117 }

118 #Sigma calculation

119 # Calculation of Vn
120 X1=CenteringV(X,Xbar,n)
121 Vn=t(X1)%*%X1/n

122 ## Construction of Sigma
123 GSigma=matrix(0,p*sum(R),p*sum(R))
124 for (i in 1:q ){
125 for (j in 1:R[i] ){
126 Xij=CenteringV(X,Xjhbar[[i]][j,],n)
127 Vij=t(W[[i]][,j]*Xij)%*%Xij/n11[[i]][j]

128 for (k in 1:q ){
129 for (l in 1:R[k]){

130 Xkl=CenteringV(X,Xjhbar[[k]][l,],n)
131 Vijkl=t(W[[i]][,j]*Xij)%*%(W[[k]][,l]*Xkl)/n

132 Vkl=t(W[[k]][,l]*Xkl)%*%Xkl/n11[[k]][l]
133 if (i==1) Idebut=((j-1)*p)+1 else Idebut=((sum(R[1:(i-1)])+j-1)*p)+1
134 if (i==1) Idebut1=(j*p) else Idebut1=((sum(R[1:(i-1)])+j)*p)
135 if (k==1) Ifin=((l-1)*p)+1 else Ifin=((sum(R[1:(k-1)])+l-1)*p)+1
136 if (k==1) Ifin1=(l*p) else Ifin1=((sum(R[1:(k-1)])+l)*p)

137
GSigma[Idebut:Idebut1,Ifin:Ifin1]=Vijkl+(P11[[i]][j]*P11[[k]][l]*(Vn-Vij-Vkl))
138 }
139 }
140 }
141 }


141 # Determinations of the eigenvalues of sigma epsilon
142 pa=SqrtMatrix0(GSigma)
143 mq= pa %*% GGamma %*% pa
144 u=Re(eigen(mq)$values)


145 # determination of degree of freedom and value c noted va
146 dl=(sum(u)^2)/(sum(u^2))
147 va=(sum(u^2))/(sum(u))
148 pc=1-pchisq(tr1/va, df= dl)
149 pc1[i1]=pc

150 # Test of the value obtained
151 if (pc>m1) d1=0 else d1=1
152 if (pc>m2) d2=0 else d2=1
153 if (pc>m3) d3=0 else d3=1
154 l1=l1+d1
155 l2=l2+d2
156 l3=l3+d3
157 }
158 K=K+1
159 MV [K,1]=n
160 MV [K,2]=l1/number of timessim
161 MV [K,3]=l2/number of timessim
162 MV[K,4]=l3/number of timessim
163 }






l

	[[alternative HTML version deleted]]


From @rne@henn|ng@en @end|ng |rom gm@||@com  Sat Oct 10 22:52:27 2020
From: @rne@henn|ng@en @end|ng |rom gm@||@com (Arne Henningsen)
Date: Sat, 10 Oct 2020 22:52:27 +0200
Subject: [R] [External] Re: unable to access index for repository...
In-Reply-To: <24448.15141.721049.228340@stat.math.ethz.ch>
References: <CAMTWbJh4zKtO-MoirxADs+gDGurQ5V3RFhDZ9qY2dXxQ+G=iKQ@mail.gmail.com>
 <62B6F1EC-A314-4EDD-B7F2-52044F83AE23@ntu.edu.tw>
 <24448.15141.721049.228340@stat.math.ethz.ch>
Message-ID: <CAMTWbJjmbCRASdTedcOLDJXUOSPCpboW-EG+rjN6QtJzkTUosQ@mail.gmail.com>

On Fri, 9 Oct 2020 at 12:28, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>
> >>>>> Steven Yen
> >>>>>     on Fri, 9 Oct 2020 05:39:48 +0800 writes:
>
>     > Oh Hi Arne, You may recall we visited with this before. I
>     > do not believe the problem is algorithm specific. The
>     > algorithms I use the most often are BFGS and BHHH (or
>     > maxBFGS and maxBHHH). For simple econometric models such
>     > as probit, Tobit, and evening sample selection models, old
>     > and new versions of R work equally well (I write my own
>     > programs and do not use ones from AER or
>     > sampleSekection). For more complicated models the newer R
>     > would converge with not-so-nice gradients while R-3.0.3
>     > would still do nicely (good gradient). I use numerical
>     > graduent of course. I wonder whether numerical gradient
>     > routine were revised at the time of transition from
>     > R-3.0.3 to newer.
>
> As R-core member, particularly interested in numerical accuracy
> etc, I'm also interested in learning what's going on here.
>
> I think we (R core) have never heard of anything numerically deteriorating
> going from R 3.0.x to R 4.0.x,  and now you are claiming that in
> public, you should really post *reproducible* code giving
> evidence to your claim.
>
> As was mentioned earlier, the difference may not be in R, but
> rather in the versions of the (non-base R, but "extension") R
> packages you use;  and you were saying earlier you will check
> that (using the old version of the 'maxLik' package with a newer
> version of R and vice verso) and tell us about it.
>
> Thank you in advance on being careful and rational about such
> findings.

I totally agree with Martin: It would be good if Steven could run his
code with different combinations of versions of R and maxLik so that
we know whether the problem is caused by newer versions of R or by
newer versions of maxLik (and hopefully also which version introduced
the problem). Steven wrote that the problem appeared both in maxBFGS()
and in maxBHHH(). This is somewhat surprising because maxBFGS() uses
for the optimisation optim() which is implemented in R's base package
"stats", while maxBHHH() uses for the optimisation maxNR() which is
implemented in the maxLik package. Hence, it would be a very unlikely
coincidence if the optimisation routines in optim() and maxNR() would
become worse at the same time. I remember that we slightly changed the
user interface and the default values of some arguments of some
function in the maxLik package (e.g., maxBFGS, maxBHHH, maxNR, ...) a
long time ago. I suggest that Steven checks whether he needs to update
his code to reflect the changes in the user interface and/or in the
default values of some arguments.

Best wishes,
Arne

--
Arne Henningsen
http://www.arne-henningsen.name


From kch@mber|n @end|ng |rom gm@||@com  Sun Oct 11 01:24:40 2020
From: kch@mber|n @end|ng |rom gm@||@com (1/k^c)
Date: Sat, 10 Oct 2020 17:24:40 -0600
Subject: [R] which() vs. just logical selection in df
Message-ID: <CAJjKGBQnr_vQHMR3VOmAFH9AfgegBfzck7Pw+smHENAL27THsA@mail.gmail.com>

Hi R-helpers,

Does anyone know why adding which() makes the select call more
efficient than just using logical selection in a dataframe? Doesn't
which() technically add another conversion/function call on top of the
logical selection? Here is a reproducible example with a slight
difference in timing.

# Surrogate data - the timing here isn't interesting
urltext <- paste("https://drive.google.com/",
                 "uc?id=1AZ-s1EgZXs4M_XF3YYEaKjjMMvRQ7",
                 "-h8&export=download", sep="")
download.file(url=urltext, destfile="tempfile.csv") # download file first
dat <- read.csv("tempfile.csv", stringsAsFactors = FALSE, header=TRUE,
                  nrows=2.5e6) # read the file; 'nrows' is a slight
                                         # overestimate
dat <- dat[,1:3] # select just the first 3 columns
head(dat, 10) # print the first 10 rows

# Select using which() as the final step ~ 90ms total time on my macbook air
system.time(
  head(
    dat[which(dat$gender2=="other"),],),
  gcFirst=TRUE)

# Select skipping which() ~130ms total time
system.time(
  head(
    dat[dat$gender2=="other", ]),
  gcFirst=TRUE)

Now I would think that the second one without which() would be more
efficient. However, every time I run these, the first version, with
which() is more efficient by about 20ms of system time and 20ms of
user time. Does anyone know why this is?

Cheers!
Keith


From he||o @end|ng |rom @eb@@t|@nm@dev  Sun Oct 11 03:23:43 2020
From: he||o @end|ng |rom @eb@@t|@nm@dev (Sebastian Mueller)
Date: Sun, 11 Oct 2020 03:23:43 +0200
Subject: [R] Help using the exclude option in the neuralnet package
In-Reply-To: <e2edc63e6ccf45ffa1fd8855fdb66eb1@pg-adr-exch-01.adr.unbc.ca>
References: <e2edc63e6ccf45ffa1fd8855fdb66eb1@pg-adr-exch-01.adr.unbc.ca>
Message-ID: <f9baca8e-4f5b-1bf2-4086-897946f6448c@sebastianm.dev>

Hi Dan,

the easiest way to declare `exclude` and `constant.weights` is as a 
vector of indices. You can determine the index of the neuron as follows:

The layers are arranged in sequence, with the bias neuron being the 
first in each layer. So in a neural net with 6 input neurons and a layer 
of 3 hidden neurons, the bias neurons would be at indices 1 and 8.

HTH.

Sebastian


From |@heemj@n93 @end|ng |rom y@hoo@com  Sun Oct 11 11:01:24 2020
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Sun, 11 Oct 2020 09:01:24 +0000 (UTC)
Subject: [R] Installing a Package
References: <448339610.179682.1602406884218.ref@mail.yahoo.com>
Message-ID: <448339610.179682.1602406884218@mail.yahoo.com>



Hello, I am working in the nonparametric functional data analysis, i stack in a simple problem is that i am? going to install a package in the name of nfda which is not present in the? R Cran, know how i am going to install this package in R studio from archives or some thing else. please guide? me i am just a beginner in R, Thanks?
	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Oct 11 11:27:33 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 11 Oct 2020 10:27:33 +0100
Subject: [R] Installing a Package
In-Reply-To: <448339610.179682.1602406884218@mail.yahoo.com>
References: <448339610.179682.1602406884218.ref@mail.yahoo.com>
 <448339610.179682.1602406884218@mail.yahoo.com>
Message-ID: <da089485-d266-afe9-9200-458b2e39a66a@sapo.pt>

Hello,

What OS are you running? If it's Windows you will need Rtools [1] to 
install a source package. Otherwise the following usually works.

1. Download the tar.gz package file (say, package_version.tar.gz) to 
your disk.
2. Go to the directory where this file is.

3.a. From within RStudio run

install.packages(path_to_tar_gz_file, repos = NULL, type = "source")

3.b. From the command line run

R CMD INSTALL package_version.tar.gz


[1] https://cran.r-project.org/bin/windows/Rtools/

Hope this helps,

Rui Barradas


?s 10:01 de 11/10/20, Faheem Jan via R-help escreveu:
> 
> 
> Hello, I am working in the nonparametric functional data analysis, i stack in a simple problem is that i am? going to install a package in the name of nfda which is not present in the? R Cran, know how i am going to install this package in R studio from archives or some thing else. please guide? me i am just a beginner in R, Thanks
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Oct 11 17:10:09 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 11 Oct 2020 08:10:09 -0700
Subject: [R] Installing a Package
In-Reply-To: <448339610.179682.1602406884218@mail.yahoo.com>
References: <448339610.179682.1602406884218.ref@mail.yahoo.com>
 <448339610.179682.1602406884218@mail.yahoo.com>
Message-ID: <7EB21126-9643-4712-A6DE-FF4CACAF6648@dcn.davis.ca.us>

If you are referring to [1] which has been archived on CRAN because the maintainer did not, well, maintain it for the last 9 years, then don't be surprised if things to go wrong in either the installation and/or use of that package. As a beginner you should probably rely on some other package to achieve your goals, and if that is not possible then at least temporarily redirect your efforts at getting better at R and at understanding the underlying theory of your task. If it turns out that you need to fix nfda then you will also need to learn at least some C++.

[1] https://github.com/cran/nfda

On October 11, 2020 2:01:24 AM PDT, Faheem Jan via R-help <r-help at r-project.org> wrote:
>
>
>Hello, I am working in the nonparametric functional data analysis, i
>stack in a simple problem is that i am? going to install a package in
>the name of nfda which is not present in the? R Cran, know how i am
>going to install this package in R studio from archives or some thing
>else. please guide? me i am just a beginner in R, Thanks?
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @orenh @end|ng |rom m@th@@@u@dk  Sun Oct 11 20:51:29 2020
From: @orenh @end|ng |rom m@th@@@u@dk (=?iso-8859-1?Q?S=F8ren_H=F8jsgaard?=)
Date: Sun, 11 Oct 2020 18:51:29 +0000
Subject: [R] Installing bioconduction packages in connection with loading an
 R package
Message-ID: <fcbd293616ad448bad5278932135db58@math.aau.dk>

Dear all,

My gRbase package imports functionality from the bioconductor packages graph, Rgraphviz and RBGL.

To make installation of gRbase easy, I would like to have these bioconductor packages installed in connection with installation of gRbase, but to do so the user must use setRepositories() to make sure that R also installs packages from bioconductor.

Having to call setRepositories causes what can perhaps be called an (unnecessary?) obstacle. Therefore I have been experimenting with deferring installation of these bioc-packages until gRbase is loaded the first time using .onAttach; please see my attempt below.

However, if the bioc-packages are not installed I can not install gRbase so that does not seem to be a viable approach. (The bioc-packages appear as Imports: in DESCRIPTION).

Can anyone tell if it is a futile approach and / or perhaps suggest a solution. (I would guess that there are many CRAN packages that use bioc-packages, so other people must have faced this challenge before).

Thanks in advance.

Best regards
S?ren





.onAttach<-function(libname, pkgname) {

    ## package startup check
    toinstall=c(
        "graph",
        "Rgraphviz",
        "RBGL"
    )

    already_installed <- sapply(toinstall, function(pkg)
        requireNamespace(pkg, quietly=TRUE))

    if (any(!already_installed)){
        packageStartupMessage("Need to install the following package(s): ",
                              toString(toinstall[!already_installed]), "\n")
    }

    ## install if needed
    if(!base::all(already_installed)){
        if (!requireNamespace("BiocManager", quietly=TRUE))
            install.packages("BiocManager")
        BiocManager::install(toinstall[!already_installed], dependencies=TRUE)
    }
}



	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Oct 11 21:01:17 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 11 Oct 2020 12:01:17 -0700
Subject: [R] 
 Installing bioconduction packages in connection with loading an
 R package
In-Reply-To: <fcbd293616ad448bad5278932135db58@math.aau.dk>
References: <fcbd293616ad448bad5278932135db58@math.aau.dk>
Message-ID: <9A455C39-DDFA-4DA9-BB01-9279B82E19F2@dcn.davis.ca.us>

This sounds like your package belongs in the bioconductor repository rather than in CRAN. Referencing bioc packages only in Suggests might make it appropriate for CRAN.

On October 11, 2020 11:51:29 AM PDT, "S?ren H?jsgaard" <sorenh at math.aau.dk> wrote:
>Dear all,
>
>My gRbase package imports functionality from the bioconductor packages
>graph, Rgraphviz and RBGL.
>
>To make installation of gRbase easy, I would like to have these
>bioconductor packages installed in connection with installation of
>gRbase, but to do so the user must use setRepositories() to make sure
>that R also installs packages from bioconductor.
>
>Having to call setRepositories causes what can perhaps be called an
>(unnecessary?) obstacle. Therefore I have been experimenting with
>deferring installation of these bioc-packages until gRbase is loaded
>the first time using .onAttach; please see my attempt below.
>
>However, if the bioc-packages are not installed I can not install
>gRbase so that does not seem to be a viable approach. (The
>bioc-packages appear as Imports: in DESCRIPTION).
>
>Can anyone tell if it is a futile approach and / or perhaps suggest a
>solution. (I would guess that there are many CRAN packages that use
>bioc-packages, so other people must have faced this challenge before).
>
>Thanks in advance.
>
>Best regards
>S?ren
>
>
>
>
>
>.onAttach<-function(libname, pkgname) {
>
>    ## package startup check
>    toinstall=c(
>        "graph",
>        "Rgraphviz",
>        "RBGL"
>    )
>
>    already_installed <- sapply(toinstall, function(pkg)
>        requireNamespace(pkg, quietly=TRUE))
>
>    if (any(!already_installed)){
>    packageStartupMessage("Need to install the following package(s): ",
>                         toString(toinstall[!already_installed]), "\n")
>    }
>
>    ## install if needed
>    if(!base::all(already_installed)){
>        if (!requireNamespace("BiocManager", quietly=TRUE))
>            install.packages("BiocManager")
> BiocManager::install(toinstall[!already_installed], dependencies=TRUE)
>    }
>}
>
>
>
>	[[alternative HTML version deleted]]

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Sun Oct 11 21:48:02 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 11 Oct 2020 12:48:02 -0700
Subject: [R] 
 Installing bioconduction packages in connection with loading an
 R package
In-Reply-To: <fcbd293616ad448bad5278932135db58@math.aau.dk>
References: <fcbd293616ad448bad5278932135db58@math.aau.dk>
Message-ID: <CAGxFJbTjFXWCW3kT=Ss3kU=k5yJYciX5RfGGAj=Lpru6RzLkbA@mail.gmail.com>

You would do better posting this on r-package-devel rather than here, I
believe.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Oct 11, 2020 at 11:51 AM S?ren H?jsgaard <sorenh at math.aau.dk> wrote:

> Dear all,
>
> My gRbase package imports functionality from the bioconductor packages
> graph, Rgraphviz and RBGL.
>
> To make installation of gRbase easy, I would like to have these
> bioconductor packages installed in connection with installation of gRbase,
> but to do so the user must use setRepositories() to make sure that R also
> installs packages from bioconductor.
>
> Having to call setRepositories causes what can perhaps be called an
> (unnecessary?) obstacle. Therefore I have been experimenting with deferring
> installation of these bioc-packages until gRbase is loaded the first time
> using .onAttach; please see my attempt below.
>
> However, if the bioc-packages are not installed I can not install gRbase
> so that does not seem to be a viable approach. (The bioc-packages appear as
> Imports: in DESCRIPTION).
>
> Can anyone tell if it is a futile approach and / or perhaps suggest a
> solution. (I would guess that there are many CRAN packages that use
> bioc-packages, so other people must have faced this challenge before).
>
> Thanks in advance.
>
> Best regards
> S?ren
>
>
>
>
>
> .onAttach<-function(libname, pkgname) {
>
>     ## package startup check
>     toinstall=c(
>         "graph",
>         "Rgraphviz",
>         "RBGL"
>     )
>
>     already_installed <- sapply(toinstall, function(pkg)
>         requireNamespace(pkg, quietly=TRUE))
>
>     if (any(!already_installed)){
>         packageStartupMessage("Need to install the following package(s): ",
>                               toString(toinstall[!already_installed]),
> "\n")
>     }
>
>     ## install if needed
>     if(!base::all(already_installed)){
>         if (!requireNamespace("BiocManager", quietly=TRUE))
>             install.packages("BiocManager")
>         BiocManager::install(toinstall[!already_installed],
> dependencies=TRUE)
>     }
> }
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Mon Oct 12 12:10:26 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Mon, 12 Oct 2020 10:10:26 +0000
Subject: [R] 
 Installing bioconduction packages in connection with loading an
 R package
In-Reply-To: <fcbd293616ad448bad5278932135db58@math.aau.dk>
References: <fcbd293616ad448bad5278932135db58@math.aau.dk>
Message-ID: <BL0PR04MB660973929C64B743D00708FDF9070@BL0PR04MB6609.namprd04.prod.outlook.com>

An alternative to setRepositories() is use of (the CRAN package) BiocManager::install("gRbase") instead of install.packages(). BiocManager installs CRAN packages as well as Bioconductor packages.

Another, more transparent, solution is to use

  install.packages("gRbase", repos = BiocManager::repositories())

where the key idea is to include Bioconductor repositories explicitly. These approaches are preferred to  setRepositories(), because of the details of the twice-yearly Bioconductor release cycle, compared to the annual R release and patch cycles.

The usual approach to your problem is to move the package to Suggests:. But then the namespace commands like Imports, and the direct use of imported package functions, is not possible; you'll need to litter your code with fully resolved functions (graph::foo() instead of foo()). Also Suggests: is usually home to packages that have a limited role to play, but that does not seem likely for RBGL etc in your package.

Also, in implementing this approach one would normally check that the package were installed, and fail with an error message telling the user how to fix the problem (e.g., by installing the package). This doesn't really sound like progress. If you instead try to automatically install the package (in .onAttach(), I guess was your plan) you'll shortly run into users who need to use arguments to install.packages() that you have not made available to them.

Your CRAN page took me quickly to your package web site and clear installation instructions; I do not think use of Bioc packages is a particular barrier to use.

Martin Morgan

  

?On 10/11/20, 2:52 PM, "R-help on behalf of S?ren H?jsgaard" <r-help-bounces at r-project.org on behalf of sorenh at math.aau.dk> wrote:

    Dear all,

    My gRbase package imports functionality from the bioconductor packages graph, Rgraphviz and RBGL.

    To make installation of gRbase easy, I would like to have these bioconductor packages installed in connection with installation of gRbase, but to do so the user must use setRepositories() to make sure that R also installs packages from bioconductor.

    Having to call setRepositories causes what can perhaps be called an (unnecessary?) obstacle. Therefore I have been experimenting with deferring installation of these bioc-packages until gRbase is loaded the first time using .onAttach; please see my attempt below.

    However, if the bioc-packages are not installed I can not install gRbase so that does not seem to be a viable approach. (The bioc-packages appear as Imports: in DESCRIPTION).

    Can anyone tell if it is a futile approach and / or perhaps suggest a solution. (I would guess that there are many CRAN packages that use bioc-packages, so other people must have faced this challenge before).

    Thanks in advance.

    Best regards
    S?ren





    .onAttach<-function(libname, pkgname) {

        ## package startup check
        toinstall=c(
            "graph",
            "Rgraphviz",
            "RBGL"
        )

        already_installed <- sapply(toinstall, function(pkg)
            requireNamespace(pkg, quietly=TRUE))

        if (any(!already_installed)){
            packageStartupMessage("Need to install the following package(s): ",
                                  toString(toinstall[!already_installed]), "\n")
        }

        ## install if needed
        if(!base::all(already_installed)){
            if (!requireNamespace("BiocManager", quietly=TRUE))
                install.packages("BiocManager")
            BiocManager::install(toinstall[!already_installed], dependencies=TRUE)
        }
    }



    	[[alternative HTML version deleted]]


From 538280 @end|ng |rom gm@||@com  Mon Oct 12 21:01:36 2020
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Mon, 12 Oct 2020 13:01:36 -0600
Subject: [R] which() vs. just logical selection in df
In-Reply-To: <CAJjKGBQnr_vQHMR3VOmAFH9AfgegBfzck7Pw+smHENAL27THsA@mail.gmail.com>
References: <CAJjKGBQnr_vQHMR3VOmAFH9AfgegBfzck7Pw+smHENAL27THsA@mail.gmail.com>
Message-ID: <CAFEqCdyUuHh5TZ7t5NJ8cs_4xB61mNeUgasncekD485eBNRK6Q@mail.gmail.com>

I would suggest using the microbenchmark package to do the time
comparison.  This will run each a bunch of times for a more meaningful
comparison.

One possible reason for the difference is the number of missing values
in your data (along with the number of columns).  Consider the
difference in the following results:

> x <- c(1,2,NA)
> x[x==1]
[1]  1 NA
> x[which(x==1)]
[1] 1



On Sat, Oct 10, 2020 at 5:25 PM 1/k^c <kchamberln at gmail.com> wrote:
>
> Hi R-helpers,
>
> Does anyone know why adding which() makes the select call more
> efficient than just using logical selection in a dataframe? Doesn't
> which() technically add another conversion/function call on top of the
> logical selection? Here is a reproducible example with a slight
> difference in timing.
>
> # Surrogate data - the timing here isn't interesting
> urltext <- paste("https://drive.google.com/",
>                  "uc?id=1AZ-s1EgZXs4M_XF3YYEaKjjMMvRQ7",
>                  "-h8&export=download", sep="")
> download.file(url=urltext, destfile="tempfile.csv") # download file first
> dat <- read.csv("tempfile.csv", stringsAsFactors = FALSE, header=TRUE,
>                   nrows=2.5e6) # read the file; 'nrows' is a slight
>                                          # overestimate
> dat <- dat[,1:3] # select just the first 3 columns
> head(dat, 10) # print the first 10 rows
>
> # Select using which() as the final step ~ 90ms total time on my macbook air
> system.time(
>   head(
>     dat[which(dat$gender2=="other"),],),
>   gcFirst=TRUE)
>
> # Select skipping which() ~130ms total time
> system.time(
>   head(
>     dat[dat$gender2=="other", ]),
>   gcFirst=TRUE)
>
> Now I would think that the second one without which() would be more
> efficient. However, every time I run these, the first version, with
> which() is more efficient by about 20ms of system time and 20ms of
> user time. Does anyone know why this is?
>
> Cheers!
> Keith
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From guenther @end|ng |rom |e|bn|z-b|p@@de  Mon Oct 12 08:33:44 2020
From: guenther @end|ng |rom |e|bn|z-b|p@@de (=?UTF-8?Q?Frauke_G=C3=BCnther?=)
Date: Mon, 12 Oct 2020 08:33:44 +0200 (CEST)
Subject: [R] 
 Fwd:  Help using the exclude option in the neuralnet package
In-Reply-To: <CAA99HCyo9BfeMbTw2a7pPFF8kdm8zQY-uoWuJk5ctA0Ho8W6ug@mail.gmail.com>
References: <e2edc63e6ccf45ffa1fd8855fdb66eb1@pg-adr-exch-01.adr.unbc.ca>
 <CAA99HCyo9BfeMbTw2a7pPFF8kdm8zQY-uoWuJk5ctA0Ho8W6ug@mail.gmail.com>
Message-ID: <957726669.124476.1602484424752@srvmail.bips.eu>

Dear all,

the exclude and constant.weights options are used as follows:

exclude: A matrix with n rows and 3 columns will exclude n weights. The the first column refers to the layer, the second column to the input neuron and the third column to the output neuron of the weight.

constant.weights: A vector specifying the values of the weights that are excluded from the training process and treated as fix.

Please refer to the following example:

Not using exclude and constant.weights (all weights are trained):

> nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, iris, linear.output = FALSE)
>
> nn$weights
[[1]]
[[1]][[1]]
[,1]
[1,] 6.513239
[2,] -0.815920
[3,] -5.859802
[[1]][[2]]
[,1]
[1,] -4.597934
[2,] 9.179436

Using exclude (2 weights are excluded --> NA):

> nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, iris, linear.output = FALSE,
exclude = matrix(c(1,2,1, 2,2,1),byrow=T, nrow=2))
> nn$weights
[[1]]
[[1]][[1]]
[,1]
[1,] -0.2815942
[2,] NA
[3,] 0.2481212
[[1]][[2]]
[,1]
[1,] -0.6934932
[2,] NA

Using exclude and constant.weights (2 weights are excluded and treated as fix --> 100 and 1000, respectively):

> nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, iris, linear.output = FALSE,
exclude = matrix(c(1,2,1, 2,2,1),byrow=T, nrow=2),
constant.weights=c(100,1000))
> nn$weights
[[1]]
[[1]][[1]]
[,1]
[1,] 0.554119
[2,] 100.000000
[3,] 1.153611
[[1]][[2]]
[,1]
[1,] -0.3962524
[2,] 1000.0000000

I hope you will find this example helpful.

Sincerely,
Frauke


>     William Michels <wjm1 at caa.columbia.edu mailto:wjm1 at caa.columbia.edu > hat am 10.10.2020 18:16 geschrieben:
>      
>      
>     Forwarding: Question re "neuralnet" package on the R-Help mailing list:
>      
>     https://stat.ethz.ch/pipermail/r-help/2020-October/469020.html
>      
>     If you are so inclined, please reply to:
>      
>     r-help at r-project.org mailto:r-help at r-project.org <r-help at r-project.org mailto:r-help at r-project.org >
>      
>     ---------- Forwarded message ---------
>     From: Dan Ryan <Dan.Ryan at unbc.ca mailto:Dan.Ryan at unbc.ca >
>     Date: Fri, Oct 9, 2020 at 3:52 PM
>     Subject: Re: [R] Help using the exclude option in the neuralnet package
>     To: r-help at r-project.org mailto:r-help at r-project.org <r-help at r-project.org mailto:r-help at r-project.org >
>      
>     Good Morning,
>      
>     I am using the neuralnet package in R, and am able to produce some
>     basic neural nets, and use the output.
>      
>     I would like to exclude some of the weights and biases from the
>     iteration process and fix their values.
>      
>     However I do not seem to be able to correctly define the exclude and
>     constant.weights vectors.
>      
>     Question: Can someone point me to an example where exclude and
>     contant.weights are used. I have search the R help archive, and
>     haven't found any examples which use these on the web.
>      
>     Thank you in advance for any help.
>      
>     Sincerely
>      
>     Dan
>      
>     [[alternative HTML version deleted]]
>      
>     ______________________________________________
>     R-help at r-project.org mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
> 

	[[alternative HTML version deleted]]


From @b|@yeng@|@b@ @end|ng |rom gm@||@com  Tue Oct 13 08:04:32 2020
From: @b|@yeng@|@b@ @end|ng |rom gm@||@com (Ablaye Ngalaba)
Date: Tue, 13 Oct 2020 08:04:32 +0200
Subject: [R] package for kernel on R
Message-ID: <CAOkWQv2YoQPpsBUJzV3i4EhAYHNRVZP3vuRXeBA28fLKSUdeqA@mail.gmail.com>

Hello,
Please, I want to know which package to install on R when coding the kernel
functions

	[[alternative HTML version deleted]]


From @b|@yeng@|@b@ @end|ng |rom gm@||@com  Tue Oct 13 09:09:00 2020
From: @b|@yeng@|@b@ @end|ng |rom gm@||@com (Ablaye Ngalaba)
Date: Tue, 13 Oct 2020 09:09:00 +0200
Subject: [R] help for R code
Message-ID: <CAOkWQv0LsgxkHdqpai1=9BpLmp6tAdNwZiqTihA8zrirkf2yFQ@mail.gmail.com>

Good morning dear administrators,
Please help me to code this code in R.
I use in this file the redescription function ? which by making a scalar
product gives a . You can also choose instead of the redescription function
? a kernel k(x,x).




                  Sincerely

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Tue Oct 13 10:21:45 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 13 Oct 2020 11:21:45 +0300
Subject: [R] help for R code
In-Reply-To: <CAOkWQv0LsgxkHdqpai1=9BpLmp6tAdNwZiqTihA8zrirkf2yFQ@mail.gmail.com>
References: <CAOkWQv0LsgxkHdqpai1=9BpLmp6tAdNwZiqTihA8zrirkf2yFQ@mail.gmail.com>
Message-ID: <CAGgJW74TP-+L6gg0_BLbnayL657Ejw+_fvQ+tScsaDgEj8vQDA@mail.gmail.com>

Hi Ablaye,
The CRAN repository has thousands of available R packages. To help
people find relevant packages amid such a huge collection, there are
some 'task view' pages that group packages according to a particular
task. I am guessing that you are interested in kernels because of
their use in machine learning, so you might want to look at the
Machine Learning task view at:

https://cran.r-project.org/web/views/MachineLearning.html

If you search for 'kernels' on that page you will find

'Support Vector Machines and Kernel Methods' which mentions a few
packages that use kernels.

Good luck,
Eric


On Tue, Oct 13, 2020 at 10:09 AM Ablaye Ngalaba <ablayengalaba at gmail.com> wrote:
>
> Good morning dear administrators,
> Please help me to code this code in R.
> I use in this file the redescription function ? which by making a scalar
> product gives a . You can also choose instead of the redescription function
> ? a kernel k(x,x).
>
>
>
>
>                   Sincerely
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Oct 12 08:28:47 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 12 Oct 2020 06:28:47 +0000
Subject: [R] Please need help to finalize my code
In-Reply-To: <CAOkWQv1UHh8UVHpoo0vs4-9Yu-Lo4nxssQffE6QOGRZ_sjmYmw@mail.gmail.com>
References: <CAOkWQv1UHh8UVHpoo0vs4-9Yu-Lo4nxssQffE6QOGRZ_sjmYmw@mail.gmail.com>
Message-ID: <6ed4f690d57c48ec95722c11ed8f7015@SRVEXCHCM1302.precheza.cz>

Hi.

Maybe you will get better answers, but from your code it seems to me that you are treating R as C or other similar language which is not optimal. Considering your first 9 lines, it could be changed either to

CenteringV <- function(X, Ms, n) X-Ms

or you probably could use functions sweep or scale.
Your other code is beyond my experience, sorry.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ablaye Ngalaba
> Sent: Saturday, October 10, 2020 9:24 PM
> To: r-help at r-project.org
> Subject: [R] Please need help to finalize my code
> 
> Good evening dear administrators,
> It is with pleasure that I am writing to you to ask for help to finalize my R
> programming algorithm.
> 
> Indeed, I attach this note to my code which deals with a case of independence
> test statistic . My request is to introduce the kernels using the functional data
> for this same code that I am sending you. So I list the lines for which we need
> to introduce the functional data using the kernels below.
> 
> First of all for this code we need to use the functional data. I have numbered
> the lines myself from the original code to give some indication about the lines
> of code to introduce the kernel.
> 1)Centering of redescription function phi(xi) (just use the kernel) 2)this
> function centers the functional data phi(xi) (just use the kernel)
> 3)phi(x1) (or kernel k( ., .) )
> 5)Even here the kernel with the functional data is used.
> 7)return the kernel
> 28) kernel dimension
> 29) kernel dimension
> 30)kernel dimension
> 73) redescription function phi(xi) or the kernel k(. , .) 74)redescription function
> phi(yi) or the kernel k(. , .) 76)redescription function phi(xbar) or the kernel k(.
> , .) 77)redescription function phi(xjhbar) or the kernel k(. , .) 82)redescription
> function phi(xi) or the kernel k(. , .) introduced instead of x 84)redescription
> function phi(xjhbar) or the kernel k(. , .) 89)w= redescription function
> phi(xbar) or the kernel k(. , .)
> 120) we center the redescription function phi(xi) or the kernel k(. , .) 121)Vn is
> a kernel function, so we use ph(xi) or the kernel k(. , , .) 126)centering of the
> redescription function phi(xji) or the kernel k(. , .) 127)Vij is computed using
> redescription function phi(xi) or the kernel k(.
> , .) instead of X.
> 130)centering redescription function phi(Xkl) or the kernel k(. , .) 131)Vijkl
> always using the kernel function as precedent 132)Vkl always using the kernel
> function as precedent
> 
>  I look forward to your help and sincere request.
> 
> 
>                              Yours sincerely
> 
> library(MASS)
> 
> 1 CenteringV<-function(X,Ms,n){
> 2 # this function centers the data of X
> 3 X1=X*0
> 4 for (i in 1:n){
> 5 X1[i,]=X[i,]-Ms
> 6 }
> 7 return(X1)
> 8 }
> 
> 
> 9 # Function N?2
> 10 SqrtMatrix0<-function(M) {
> 11 # This function allows us to compute the square root of a matrix
> 12 # using the decomposition M=PDQ where Q is the inverse of P
> 13 # here negative eigenvalues are replaced by zero
>  14 a=eigen(M,TRUE)
>  15 b=a$values
>  16 b[b<0]=0
>  17 c=a$vectors
> 18 d=diag(sqrt(b))
>  19 b=solve(c)
> 20 a=c%*%d%*%b
> 21 return(a)
> 22 }
> 
> 
> 23 # declaration of parameters
> 24 m1=0.01 # alpha value (1% risk)
> 25 m2=0.05 # alpha value (5% risk)
> 26 m3=0.1 # alpha value (10% risk)
> 27 nbrefoissim=100 # # times the program is running
> 28 p=3 #dimension of variable X
> 29 q=3 #dimension of variable Y
> 30 R=c(5,4,3);# Number of partition of each component of variable Y
> 31 if(length(R) != q) stop("The size of R must be equal to q")
> 32 n=25 # Sample size
> 33 N=c(25,50,100,200,300,400,500,1000) #different sample sizes
> 34 #N=c(25,50) #different sample sizes
> 35 pc1=rep(0.100)
> 36 K=0
> 37 MV=matrix(0,nr=8,nc=4)
> 38 dimnames(MV)[[2]]=c("n","r1%","r5%","r10%")
> 
> 
> 39 #Beginning of the program
> 
>  40 for (n in N){
> 
> 
> 41 l1=0 # initialization of the value to calculate the test level at 1%.
> 42 l2=0 # initialization of the value to calculate the test level at 5%.
> 43 l3=0 # initialization of the value to calculate the test level at 10%.
> 
> 44 # Creation of an n11 list containing the sizes of the different groups
> 45 n11=list()
> 46 for (i in 1:q){
> 47 n11[[i]]=rep(as.integer(n/R[i]),R[i])
> 48 n11[[i]][R[i]]=n-((R[i]-1)*n11[[i]][1])
> 49 }
> 
> 
> 50 # Creation of lists P11 and P12 which contain the probabilities and
> 51 # the inverses of the empirical probabilities of the different groups
> respectively
> 
> 52 P11=list()
> 53 P12=list()
> 54 for (i in 1:q){
> 55 P11[[i]]=n11[[i]]/n
> 56 P12[[i]]=n/n11[[i]
> 
> 57 }
> 
> 58 # creation of a list containing the W matrices
> 59 W=list()
> 60 for (i in 1:q){
> 61 w=matrix(0,n,R[i])
> 62 w[1:n11[[i]][1],1]=1
> 63 if (R[i]>1){
> 64 for (j in 2:R[i]){
> 65 s1=sum(n11[[i]][1:(j-1)])
> 66 w[(1+s1):(s1+n11[[i]][j]),j]=1
> 67 }}
> 68 W[[i]]=w
> 69 }
> 
> 70 for (i1 in 1:nbrefoissim){
> 
> 71 # data generation
> 72 VA1=mvrnorm(n,rep(0,(p+q)),diag((p+q)))
> 73 X=VA1[,1:p]
> 74 Y=VA1[,(p+1):(p+q)]
> 
> 75 # Xbar calculation
> 76 Xbar=colMeans(X)
> 
> 77 # Calculation of Xjh bar
> 78 Xjhbar=list()
> 79 for (i in 1:q){
> 80 w=matrix(0,R[i],p)
> 81 for (j in 1:R[i]){
> 82 w[j,]=colSums(W[[i]][,j]*X)/n11[[i]][j]
> 83 }
> 84 Xjhbar[[i]]=w
> 85 }
> 
> 86 #calculation of TO jh
> 
> 87 TO.jh=list()
> 88 for (i in 1:q){
> 89 w=Xjhbar[[i]]
> 90 to=w*0
> 91 for (j in 1:R[i]){
> 92 to[j,]=w[j,]-Xbar
> 93 }
> 94 TO.jh[[i]]=to
> 95 }
> 
> 96 #calculation of Lamda J
> 
> 97 Lamda=matrix(0,p,p)
> 98 for (i in 1:q){
> 99 to=TO.jh[[i]]
> 100 w=matrix(0,p,p)
> 101 for (j in 1:R[i]){
> 102 w=w+(P11[[i]][j]*(to[j,]%*%t(to[j,])))
> 103 }
> 104 Lamda=Lamda+w
> 105 }
> 
> 106 tr1=n*sum(diag(Lamda))
> 
> 107 # Gamma Calculation
> 
> 108 GGamma=matrix(0,p*sum(R),p*sum(R))
> 109 PGamma=kronecker(diag(P12[[1]]),diag(p))
> 110 Ifin=p*R [1]
> 111 GGamma[1:Ifin,1:Ifin]=PGamma
> 112 for (i in 2:q){
> 113 PGamma=kronecker(diag(P12[[i]]),diag(p))
> 114 Idebut=((p*sum(R[1:(i-1)]))+1)
> 115 Ifin=(p*sum(R[1:i]))
> 116 GGamma [Idebut:Ifin,Idebut:Ifin]=PGamma
> 117 }
> 
> 118 #Sigma calculation
> 
> 119 # Calculation of Vn
> 120 X1=CenteringV(X,Xbar,n)
> 121 Vn=t(X1)%*%X1/n
> 
> 122 ## Construction of Sigma
> 123 GSigma=matrix(0,p*sum(R),p*sum(R))
> 124 for (i in 1:q ){
> 125 for (j in 1:R[i] ){
> 126 Xij=CenteringV(X,Xjhbar[[i]][j,],n)
> 127 Vij=t(W[[i]][,j]*Xij)%*%Xij/n11[[i]][j]
> 
> 128 for (k in 1:q ){
> 129 for (l in 1:R[k]){
> 
> 130 Xkl=CenteringV(X,Xjhbar[[k]][l,],n)
> 131 Vijkl=t(W[[i]][,j]*Xij)%*%(W[[k]][,l]*Xkl)/n
> 
> 132 Vkl=t(W[[k]][,l]*Xkl)%*%Xkl/n11[[k]][l]
> 133 if (i==1) Idebut=((j-1)*p)+1 else Idebut=((sum(R[1:(i-1)])+j-1)*p)+1
> 134 if (i==1) Idebut1=(j*p) else Idebut1=((sum(R[1:(i-1)])+j)*p)
> 135 if (k==1) Ifin=((l-1)*p)+1 else Ifin=((sum(R[1:(k-1)])+l-1)*p)+1
> 136 if (k==1) Ifin1=(l*p) else Ifin1=((sum(R[1:(k-1)])+l)*p)
> 
> 137
> GSigma[Idebut:Idebut1,Ifin:Ifin1]=Vijkl+(P11[[i]][j]*P11[[k]][l]*(Vn-Vij-Vkl))
> 138 }
> 139 }
> 140 }
> 141 }
> 
> 
> 141 # Determinations of the eigenvalues of sigma epsilon
> 142 pa=SqrtMatrix0(GSigma)
> 143 mq= pa %*% GGamma %*% pa
> 144 u=Re(eigen(mq)$values)
> 
> 
> 145 # determination of degree of freedom and value c noted va
> 146 dl=(sum(u)^2)/(sum(u^2))
> 147 va=(sum(u^2))/(sum(u))
> 148 pc=1-pchisq(tr1/va, df= dl)
> 149 pc1[i1]=pc
> 
> 150 # Test of the value obtained
> 151 if (pc>m1) d1=0 else d1=1
> 152 if (pc>m2) d2=0 else d2=1
> 153 if (pc>m3) d3=0 else d3=1
> 154 l1=l1+d1
> 155 l2=l2+d2
> 156 l3=l3+d3
> 157 }
> 158 K=K+1
> 159 MV [K,1]=n
> 160 MV [K,2]=l1/number of timessim
> 161 MV [K,3]=l2/number of timessim
> 162 MV[K,4]=l3/number of timessim
> 163 }
> 
> 
> 
> 
> 
> 
> l
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From gr|gh| @end|ng |rom ug@@edu  Tue Oct 13 02:44:23 2020
From: gr|gh| @end|ng |rom ug@@edu (Giovanni Righi)
Date: Tue, 13 Oct 2020 00:44:23 +0000
Subject: [R] exiting mclapply early on error
In-Reply-To: <87h7r32gy8.fsf@gmail.com>
References: <C74A5A25-8609-4F91-9654-FF558140DCE7@uga.edu>
 <87h7r32gy8.fsf@gmail.com>
Message-ID: <1442FB0A-44D2-4229-B8D4-C6389CCA96CD@uga.edu>

Thanks for the response, Jeremie. I wholeheartedly agree about testing.

In my case, this feature would be used purely to reduce computation time. I?m calculating
an expensive (and embarrassingly parallel) likelihood function, and for some parameter combinations 
my objective function diverges to infinity. In those instances, I?d like to throw an error that stops
subsequent computations and that I could catch to return a value of infinity. I agree, though, 
that the default should allow all processes to finish.

What I?ve suggested does not seem possible with mclapply(). Do you know how I could suggest 
this as a feature request to the maintainer of the parallel package?

Thanks,
Giovanni

From petr@p|k@| @end|ng |rom prechez@@cz  Tue Oct 13 07:21:11 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 13 Oct 2020 05:21:11 +0000
Subject: [R] Please need help to finalize my code
In-Reply-To: <CAOkWQv1K-c6y0vLT_bNBSkmkVMHjz6QBbEzgwgz+a9d8=0YrEg@mail.gmail.com>
References: <CAOkWQv1UHh8UVHpoo0vs4-9Yu-Lo4nxssQffE6QOGRZ_sjmYmw@mail.gmail.com>
 <6ed4f690d57c48ec95722c11ed8f7015@SRVEXCHCM1302.precheza.cz>
 <CAOkWQv1K-c6y0vLT_bNBSkmkVMHjz6QBbEzgwgz+a9d8=0YrEg@mail.gmail.com>
Message-ID: <0e24c934a4f449fbbd01f2905be47e7e@SRVEXCHCM1302.precheza.cz>

Hm. Google tells me that kernel function is in stats package which comes with base installation and is invoked when you start R.

 

search()

[1] ".GlobalEnv"        "package:stats"     "package:graphics" 

[4] "package:grDevices" "package:utils"     "package:datasets" 

[7] "package:methods"   "Autoloads"         "package:base"     

 

And BTW, keep your posts on R-help, others could give you more relevant answers.

 

Cheers

Petr

 

From: Ablaye Ngalaba <ablayengalaba at gmail.com> 
Sent: Monday, October 12, 2020 7:58 PM
To: PIKAL Petr <petr.pikal at precheza.cz>
Subject: Re: [R] Please need help to finalize my code

 

Hello.
Thank you for your response.
I would like to ask you the name of the package to install when you want to use the kernels 

 

Le lun. 12 oct. 2020 ? 08:28, PIKAL Petr <petr.pikal at precheza.cz <mailto:petr.pikal at precheza.cz> > a ?crit :

Hi.

Maybe you will get better answers, but from your code it seems to me that you are treating R as C or other similar language which is not optimal. Considering your first 9 lines, it could be changed either to

CenteringV <- function(X, Ms, n) X-Ms

or you probably could use functions sweep or scale.
Your other code is beyond my experience, sorry.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ablaye Ngalaba
> Sent: Saturday, October 10, 2020 9:24 PM
> To: r-help at r-project.org <mailto:r-help at r-project.org> 
> Subject: [R] Please need help to finalize my code
> 
> Good evening dear administrators,
> It is with pleasure that I am writing to you to ask for help to finalize my R
> programming algorithm.
> 
> Indeed, I attach this note to my code which deals with a case of independence
> test statistic . My request is to introduce the kernels using the functional data
> for this same code that I am sending you. So I list the lines for which we need
> to introduce the functional data using the kernels below.
> 
> First of all for this code we need to use the functional data. I have numbered
> the lines myself from the original code to give some indication about the lines
> of code to introduce the kernel.
> 1)Centering of redescription function phi(xi) (just use the kernel) 2)this
> function centers the functional data phi(xi) (just use the kernel)
> 3)phi(x1) (or kernel k( ., .) )
> 5)Even here the kernel with the functional data is used.
> 7)return the kernel
> 28) kernel dimension
> 29) kernel dimension
> 30)kernel dimension
> 73) redescription function phi(xi) or the kernel k(. , .) 74)redescription function
> phi(yi) or the kernel k(. , .) 76)redescription function phi(xbar) or the kernel k(.
> , .) 77)redescription function phi(xjhbar) or the kernel k(. , .) 82)redescription
> function phi(xi) or the kernel k(. , .) introduced instead of x 84)redescription
> function phi(xjhbar) or the kernel k(. , .) 89)w= redescription function
> phi(xbar) or the kernel k(. , .)
> 120) we center the redescription function phi(xi) or the kernel k(. , .) 121)Vn is
> a kernel function, so we use ph(xi) or the kernel k(. , , .) 126)centering of the
> redescription function phi(xji) or the kernel k(. , .) 127)Vij is computed using
> redescription function phi(xi) or the kernel k(.
> , .) instead of X.
> 130)centering redescription function phi(Xkl) or the kernel k(. , .) 131)Vijkl
> always using the kernel function as precedent 132)Vkl always using the kernel
> function as precedent
> 
>  I look forward to your help and sincere request.
> 
> 
>                              Yours sincerely
> 
> library(MASS)
> 
> 1 CenteringV<-function(X,Ms,n){
> 2 # this function centers the data of X
> 3 X1=X*0
> 4 for (i in 1:n){
> 5 X1[i,]=X[i,]-Ms
> 6 }
> 7 return(X1)
> 8 }
> 
> 
> 9 # Function N?2
> 10 SqrtMatrix0<-function(M) {
> 11 # This function allows us to compute the square root of a matrix
> 12 # using the decomposition M=PDQ where Q is the inverse of P
> 13 # here negative eigenvalues are replaced by zero
>  14 a=eigen(M,TRUE)
>  15 b=a$values
>  16 b[b<0]=0
>  17 c=a$vectors
> 18 d=diag(sqrt(b))
>  19 b=solve(c)
> 20 a=c%*%d%*%b
> 21 return(a)
> 22 }
> 
> 
> 23 # declaration of parameters
> 24 m1=0.01 # alpha value (1% risk)
> 25 m2=0.05 # alpha value (5% risk)
> 26 m3=0.1 # alpha value (10% risk)
> 27 nbrefoissim=100 # # times the program is running
> 28 p=3 #dimension of variable X
> 29 q=3 #dimension of variable Y
> 30 R=c(5,4,3);# Number of partition of each component of variable Y
> 31 if(length(R) != q) stop("The size of R must be equal to q")
> 32 n=25 # Sample size
> 33 N=c(25,50,100,200,300,400,500,1000) #different sample sizes
> 34 #N=c(25,50) #different sample sizes
> 35 pc1=rep(0.100)
> 36 K=0
> 37 MV=matrix(0,nr=8,nc=4)
> 38 dimnames(MV)[[2]]=c("n","r1%","r5%","r10%")
> 
> 
> 39 #Beginning of the program
> 
>  40 for (n in N){
> 
> 
> 41 l1=0 # initialization of the value to calculate the test level at 1%.
> 42 l2=0 # initialization of the value to calculate the test level at 5%.
> 43 l3=0 # initialization of the value to calculate the test level at 10%.
> 
> 44 # Creation of an n11 list containing the sizes of the different groups
> 45 n11=list()
> 46 for (i in 1:q){
> 47 n11[[i]]=rep(as.integer(n/R[i]),R[i])
> 48 n11[[i]][R[i]]=n-((R[i]-1)*n11[[i]][1])
> 49 }
> 
> 
> 50 # Creation of lists P11 and P12 which contain the probabilities and
> 51 # the inverses of the empirical probabilities of the different groups
> respectively
> 
> 52 P11=list()
> 53 P12=list()
> 54 for (i in 1:q){
> 55 P11[[i]]=n11[[i]]/n
> 56 P12[[i]]=n/n11[[i]
> 
> 57 }
> 
> 58 # creation of a list containing the W matrices
> 59 W=list()
> 60 for (i in 1:q){
> 61 w=matrix(0,n,R[i])
> 62 w[1:n11[[i]][1],1]=1
> 63 if (R[i]>1){
> 64 for (j in 2:R[i]){
> 65 s1=sum(n11[[i]][1:(j-1)])
> 66 w[(1+s1):(s1+n11[[i]][j]),j]=1
> 67 }}
> 68 W[[i]]=w
> 69 }
> 
> 70 for (i1 in 1:nbrefoissim){
> 
> 71 # data generation
> 72 VA1=mvrnorm(n,rep(0,(p+q)),diag((p+q)))
> 73 X=VA1[,1:p]
> 74 Y=VA1[,(p+1):(p+q)]
> 
> 75 # Xbar calculation
> 76 Xbar=colMeans(X)
> 
> 77 # Calculation of Xjh bar
> 78 Xjhbar=list()
> 79 for (i in 1:q){
> 80 w=matrix(0,R[i],p)
> 81 for (j in 1:R[i]){
> 82 w[j,]=colSums(W[[i]][,j]*X)/n11[[i]][j]
> 83 }
> 84 Xjhbar[[i]]=w
> 85 }
> 
> 86 #calculation of TO jh
> 
> 87 TO.jh=list()
> 88 for (i in 1:q){
> 89 w=Xjhbar[[i]]
> 90 to=w*0
> 91 for (j in 1:R[i]){
> 92 to[j,]=w[j,]-Xbar
> 93 }
> 94 TO.jh[[i]]=to
> 95 }
> 
> 96 #calculation of Lamda J
> 
> 97 Lamda=matrix(0,p,p)
> 98 for (i in 1:q){
> 99 to=TO.jh[[i]]
> 100 w=matrix(0,p,p)
> 101 for (j in 1:R[i]){
> 102 w=w+(P11[[i]][j]*(to[j,]%*%t(to[j,])))
> 103 }
> 104 Lamda=Lamda+w
> 105 }
> 
> 106 tr1=n*sum(diag(Lamda))
> 
> 107 # Gamma Calculation
> 
> 108 GGamma=matrix(0,p*sum(R),p*sum(R))
> 109 PGamma=kronecker(diag(P12[[1]]),diag(p))
> 110 Ifin=p*R [1]
> 111 GGamma[1:Ifin,1:Ifin]=PGamma
> 112 for (i in 2:q){
> 113 PGamma=kronecker(diag(P12[[i]]),diag(p))
> 114 Idebut=((p*sum(R[1:(i-1)]))+1)
> 115 Ifin=(p*sum(R[1:i]))
> 116 GGamma [Idebut:Ifin,Idebut:Ifin]=PGamma
> 117 }
> 
> 118 #Sigma calculation
> 
> 119 # Calculation of Vn
> 120 X1=CenteringV(X,Xbar,n)
> 121 Vn=t(X1)%*%X1/n
> 
> 122 ## Construction of Sigma
> 123 GSigma=matrix(0,p*sum(R),p*sum(R))
> 124 for (i in 1:q ){
> 125 for (j in 1:R[i] ){
> 126 Xij=CenteringV(X,Xjhbar[[i]][j,],n)
> 127 Vij=t(W[[i]][,j]*Xij)%*%Xij/n11[[i]][j]
> 
> 128 for (k in 1:q ){
> 129 for (l in 1:R[k]){
> 
> 130 Xkl=CenteringV(X,Xjhbar[[k]][l,],n)
> 131 Vijkl=t(W[[i]][,j]*Xij)%*%(W[[k]][,l]*Xkl)/n
> 
> 132 Vkl=t(W[[k]][,l]*Xkl)%*%Xkl/n11[[k]][l]
> 133 if (i==1) Idebut=((j-1)*p)+1 else Idebut=((sum(R[1:(i-1)])+j-1)*p)+1
> 134 if (i==1) Idebut1=(j*p) else Idebut1=((sum(R[1:(i-1)])+j)*p)
> 135 if (k==1) Ifin=((l-1)*p)+1 else Ifin=((sum(R[1:(k-1)])+l-1)*p)+1
> 136 if (k==1) Ifin1=(l*p) else Ifin1=((sum(R[1:(k-1)])+l)*p)
> 
> 137
> GSigma[Idebut:Idebut1,Ifin:Ifin1]=Vijkl+(P11[[i]][j]*P11[[k]][l]*(Vn-Vij-Vkl))
> 138 }
> 139 }
> 140 }
> 141 }
> 
> 
> 141 # Determinations of the eigenvalues of sigma epsilon
> 142 pa=SqrtMatrix0(GSigma)
> 143 mq= pa %*% GGamma %*% pa
> 144 u=Re(eigen(mq)$values)
> 
> 
> 145 # determination of degree of freedom and value c noted va
> 146 dl=(sum(u)^2)/(sum(u^2))
> 147 va=(sum(u^2))/(sum(u))
> 148 pc=1-pchisq(tr1/va, df= dl)
> 149 pc1[i1]=pc
> 
> 150 # Test of the value obtained
> 151 if (pc>m1) d1=0 else d1=1
> 152 if (pc>m2) d2=0 else d2=1
> 153 if (pc>m3) d3=0 else d3=1
> 154 l1=l1+d1
> 155 l2=l2+d2
> 156 l3=l3+d3
> 157 }
> 158 K=K+1
> 159 MV [K,1]=n
> 160 MV [K,2]=l1/number of timessim
> 161 MV [K,3]=l2/number of timessim
> 162 MV[K,4]=l3/number of timessim
> 163 }
> 
> 
> 
> 
> 
> 
> l
> 
>       [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Oct 13 18:43:11 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 13 Oct 2020 09:43:11 -0700
Subject: [R] exiting mclapply early on error
In-Reply-To: <1442FB0A-44D2-4229-B8D4-C6389CCA96CD@uga.edu>
References: <C74A5A25-8609-4F91-9654-FF558140DCE7@uga.edu>
 <87h7r32gy8.fsf@gmail.com>
 <1442FB0A-44D2-4229-B8D4-C6389CCA96CD@uga.edu>
Message-ID: <CAGxFJbSZak=UfeMf+a7x1ac-_h+Ywok0jSAqFy1XFdoyxw1JCg@mail.gmail.com>

This may be O/T. If so, either reply privately or not at all.

"objective function diverges to infinity."

How do you operationally define that? Detecting Inf -- e.g. 1/0, log(0),
etc -- is straightforward. But how do you know other than via math whether
iterations will continue to diverge or not? Would you not need to
operationalize that by defining  divergence criteria? -- e.g. too many
iterations, objective function grows/shrinks too slowly, etc. In other
words, more or less the usual adapted to your particular context.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 13, 2020 at 9:13 AM Giovanni Righi <grighi at uga.edu> wrote:

> Thanks for the response, Jeremie. I wholeheartedly agree about testing.
>
> In my case, this feature would be used purely to reduce computation time.
> I?m calculating
> an expensive (and embarrassingly parallel) likelihood function, and for
> some parameter combinations
> my objective function diverges to infinity. In those instances, I?d like
> to throw an error that stops
> subsequent computations and that I could catch to return a value of
> infinity. I agree, though,
> that the default should allow all processes to finish.
>
> What I?ve suggested does not seem possible with mclapply(). Do you know
> how I could suggest
> this as a feature request to the maintainer of the parallel package?
>
> Thanks,
> Giovanni
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Wed Oct 14 01:43:22 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 14 Oct 2020 12:43:22 +1300
Subject: [R] Please need help to finalize my code
In-Reply-To: <0e24c934a4f449fbbd01f2905be47e7e@SRVEXCHCM1302.precheza.cz>
References: <CAOkWQv1UHh8UVHpoo0vs4-9Yu-Lo4nxssQffE6QOGRZ_sjmYmw@mail.gmail.com>
 <6ed4f690d57c48ec95722c11ed8f7015@SRVEXCHCM1302.precheza.cz>
 <CAOkWQv1K-c6y0vLT_bNBSkmkVMHjz6QBbEzgwgz+a9d8=0YrEg@mail.gmail.com>
 <0e24c934a4f449fbbd01f2905be47e7e@SRVEXCHCM1302.precheza.cz>
Message-ID: <CABcYAdLtmfVfDcX9L2==dTrvQ3kuJ-hw9tpgBM453jv69T3Lcg@mail.gmail.com>

What do you *mean* "when you want to use the kernels".
WHICH kernels?
Use to do WHAT?
In your browser, visit cran.r-project.org
then select "Packages" from the list on the left.
Then pick the alphabetic list.
Now search for 'kernel'.
You will find dozens of matches.

On Wed, 14 Oct 2020 at 05:15, PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hm. Google tells me that kernel function is in stats package which comes
> with base installation and is invoked when you start R.
>
>
>
> search()
>
> [1] ".GlobalEnv"        "package:stats"     "package:graphics"
>
> [4] "package:grDevices" "package:utils"     "package:datasets"
>
> [7] "package:methods"   "Autoloads"         "package:base"
>
>
>
> And BTW, keep your posts on R-help, others could give you more relevant
> answers.
>
>
>
> Cheers
>
> Petr
>
>
>
> From: Ablaye Ngalaba <ablayengalaba at gmail.com>
> Sent: Monday, October 12, 2020 7:58 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Subject: Re: [R] Please need help to finalize my code
>
>
>
> Hello.
> Thank you for your response.
> I would like to ask you the name of the package to install when you want
> to use the kernels
>
>
>
> Le lun. 12 oct. 2020 ? 08:28, PIKAL Petr <petr.pikal at precheza.cz <mailto:
> petr.pikal at precheza.cz> > a ?crit :
>
> Hi.
>
> Maybe you will get better answers, but from your code it seems to me that
> you are treating R as C or other similar language which is not optimal.
> Considering your first 9 lines, it could be changed either to
>
> CenteringV <- function(X, Ms, n) X-Ms
>
> or you probably could use functions sweep or scale.
> Your other code is beyond my experience, sorry.
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Ablaye Ngalaba
> > Sent: Saturday, October 10, 2020 9:24 PM
> > To: r-help at r-project.org <mailto:r-help at r-project.org>
> > Subject: [R] Please need help to finalize my code
> >
> > Good evening dear administrators,
> > It is with pleasure that I am writing to you to ask for help to finalize
> my R
> > programming algorithm.
> >
> > Indeed, I attach this note to my code which deals with a case of
> independence
> > test statistic . My request is to introduce the kernels using the
> functional data
> > for this same code that I am sending you. So I list the lines for which
> we need
> > to introduce the functional data using the kernels below.
> >
> > First of all for this code we need to use the functional data. I have
> numbered
> > the lines myself from the original code to give some indication about
> the lines
> > of code to introduce the kernel.
> > 1)Centering of redescription function phi(xi) (just use the kernel)
> 2)this
> > function centers the functional data phi(xi) (just use the kernel)
> > 3)phi(x1) (or kernel k( ., .) )
> > 5)Even here the kernel with the functional data is used.
> > 7)return the kernel
> > 28) kernel dimension
> > 29) kernel dimension
> > 30)kernel dimension
> > 73) redescription function phi(xi) or the kernel k(. , .)
> 74)redescription function
> > phi(yi) or the kernel k(. , .) 76)redescription function phi(xbar) or
> the kernel k(.
> > , .) 77)redescription function phi(xjhbar) or the kernel k(. , .)
> 82)redescription
> > function phi(xi) or the kernel k(. , .) introduced instead of x
> 84)redescription
> > function phi(xjhbar) or the kernel k(. , .) 89)w= redescription function
> > phi(xbar) or the kernel k(. , .)
> > 120) we center the redescription function phi(xi) or the kernel k(. , .)
> 121)Vn is
> > a kernel function, so we use ph(xi) or the kernel k(. , , .)
> 126)centering of the
> > redescription function phi(xji) or the kernel k(. , .) 127)Vij is
> computed using
> > redescription function phi(xi) or the kernel k(.
> > , .) instead of X.
> > 130)centering redescription function phi(Xkl) or the kernel k(. , .)
> 131)Vijkl
> > always using the kernel function as precedent 132)Vkl always using the
> kernel
> > function as precedent
> >
> >  I look forward to your help and sincere request.
> >
> >
> >                              Yours sincerely
> >
> > library(MASS)
> >
> > 1 CenteringV<-function(X,Ms,n){
> > 2 # this function centers the data of X
> > 3 X1=X*0
> > 4 for (i in 1:n){
> > 5 X1[i,]=X[i,]-Ms
> > 6 }
> > 7 return(X1)
> > 8 }
> >
> >
> > 9 # Function N?2
> > 10 SqrtMatrix0<-function(M) {
> > 11 # This function allows us to compute the square root of a matrix
> > 12 # using the decomposition M=PDQ where Q is the inverse of P
> > 13 # here negative eigenvalues are replaced by zero
> >  14 a=eigen(M,TRUE)
> >  15 b=a$values
> >  16 b[b<0]=0
> >  17 c=a$vectors
> > 18 d=diag(sqrt(b))
> >  19 b=solve(c)
> > 20 a=c%*%d%*%b
> > 21 return(a)
> > 22 }
> >
> >
> > 23 # declaration of parameters
> > 24 m1=0.01 # alpha value (1% risk)
> > 25 m2=0.05 # alpha value (5% risk)
> > 26 m3=0.1 # alpha value (10% risk)
> > 27 nbrefoissim=100 # # times the program is running
> > 28 p=3 #dimension of variable X
> > 29 q=3 #dimension of variable Y
> > 30 R=c(5,4,3);# Number of partition of each component of variable Y
> > 31 if(length(R) != q) stop("The size of R must be equal to q")
> > 32 n=25 # Sample size
> > 33 N=c(25,50,100,200,300,400,500,1000) #different sample sizes
> > 34 #N=c(25,50) #different sample sizes
> > 35 pc1=rep(0.100)
> > 36 K=0
> > 37 MV=matrix(0,nr=8,nc=4)
> > 38 dimnames(MV)[[2]]=c("n","r1%","r5%","r10%")
> >
> >
> > 39 #Beginning of the program
> >
> >  40 for (n in N){
> >
> >
> > 41 l1=0 # initialization of the value to calculate the test level at 1%.
> > 42 l2=0 # initialization of the value to calculate the test level at 5%.
> > 43 l3=0 # initialization of the value to calculate the test level at 10%.
> >
> > 44 # Creation of an n11 list containing the sizes of the different groups
> > 45 n11=list()
> > 46 for (i in 1:q){
> > 47 n11[[i]]=rep(as.integer(n/R[i]),R[i])
> > 48 n11[[i]][R[i]]=n-((R[i]-1)*n11[[i]][1])
> > 49 }
> >
> >
> > 50 # Creation of lists P11 and P12 which contain the probabilities and
> > 51 # the inverses of the empirical probabilities of the different groups
> > respectively
> >
> > 52 P11=list()
> > 53 P12=list()
> > 54 for (i in 1:q){
> > 55 P11[[i]]=n11[[i]]/n
> > 56 P12[[i]]=n/n11[[i]
> >
> > 57 }
> >
> > 58 # creation of a list containing the W matrices
> > 59 W=list()
> > 60 for (i in 1:q){
> > 61 w=matrix(0,n,R[i])
> > 62 w[1:n11[[i]][1],1]=1
> > 63 if (R[i]>1){
> > 64 for (j in 2:R[i]){
> > 65 s1=sum(n11[[i]][1:(j-1)])
> > 66 w[(1+s1):(s1+n11[[i]][j]),j]=1
> > 67 }}
> > 68 W[[i]]=w
> > 69 }
> >
> > 70 for (i1 in 1:nbrefoissim){
> >
> > 71 # data generation
> > 72 VA1=mvrnorm(n,rep(0,(p+q)),diag((p+q)))
> > 73 X=VA1[,1:p]
> > 74 Y=VA1[,(p+1):(p+q)]
> >
> > 75 # Xbar calculation
> > 76 Xbar=colMeans(X)
> >
> > 77 # Calculation of Xjh bar
> > 78 Xjhbar=list()
> > 79 for (i in 1:q){
> > 80 w=matrix(0,R[i],p)
> > 81 for (j in 1:R[i]){
> > 82 w[j,]=colSums(W[[i]][,j]*X)/n11[[i]][j]
> > 83 }
> > 84 Xjhbar[[i]]=w
> > 85 }
> >
> > 86 #calculation of TO jh
> >
> > 87 TO.jh=list()
> > 88 for (i in 1:q){
> > 89 w=Xjhbar[[i]]
> > 90 to=w*0
> > 91 for (j in 1:R[i]){
> > 92 to[j,]=w[j,]-Xbar
> > 93 }
> > 94 TO.jh[[i]]=to
> > 95 }
> >
> > 96 #calculation of Lamda J
> >
> > 97 Lamda=matrix(0,p,p)
> > 98 for (i in 1:q){
> > 99 to=TO.jh[[i]]
> > 100 w=matrix(0,p,p)
> > 101 for (j in 1:R[i]){
> > 102 w=w+(P11[[i]][j]*(to[j,]%*%t(to[j,])))
> > 103 }
> > 104 Lamda=Lamda+w
> > 105 }
> >
> > 106 tr1=n*sum(diag(Lamda))
> >
> > 107 # Gamma Calculation
> >
> > 108 GGamma=matrix(0,p*sum(R),p*sum(R))
> > 109 PGamma=kronecker(diag(P12[[1]]),diag(p))
> > 110 Ifin=p*R [1]
> > 111 GGamma[1:Ifin,1:Ifin]=PGamma
> > 112 for (i in 2:q){
> > 113 PGamma=kronecker(diag(P12[[i]]),diag(p))
> > 114 Idebut=((p*sum(R[1:(i-1)]))+1)
> > 115 Ifin=(p*sum(R[1:i]))
> > 116 GGamma [Idebut:Ifin,Idebut:Ifin]=PGamma
> > 117 }
> >
> > 118 #Sigma calculation
> >
> > 119 # Calculation of Vn
> > 120 X1=CenteringV(X,Xbar,n)
> > 121 Vn=t(X1)%*%X1/n
> >
> > 122 ## Construction of Sigma
> > 123 GSigma=matrix(0,p*sum(R),p*sum(R))
> > 124 for (i in 1:q ){
> > 125 for (j in 1:R[i] ){
> > 126 Xij=CenteringV(X,Xjhbar[[i]][j,],n)
> > 127 Vij=t(W[[i]][,j]*Xij)%*%Xij/n11[[i]][j]
> >
> > 128 for (k in 1:q ){
> > 129 for (l in 1:R[k]){
> >
> > 130 Xkl=CenteringV(X,Xjhbar[[k]][l,],n)
> > 131 Vijkl=t(W[[i]][,j]*Xij)%*%(W[[k]][,l]*Xkl)/n
> >
> > 132 Vkl=t(W[[k]][,l]*Xkl)%*%Xkl/n11[[k]][l]
> > 133 if (i==1) Idebut=((j-1)*p)+1 else Idebut=((sum(R[1:(i-1)])+j-1)*p)+1
> > 134 if (i==1) Idebut1=(j*p) else Idebut1=((sum(R[1:(i-1)])+j)*p)
> > 135 if (k==1) Ifin=((l-1)*p)+1 else Ifin=((sum(R[1:(k-1)])+l-1)*p)+1
> > 136 if (k==1) Ifin1=(l*p) else Ifin1=((sum(R[1:(k-1)])+l)*p)
> >
> > 137
> >
> GSigma[Idebut:Idebut1,Ifin:Ifin1]=Vijkl+(P11[[i]][j]*P11[[k]][l]*(Vn-Vij-Vkl))
> > 138 }
> > 139 }
> > 140 }
> > 141 }
> >
> >
> > 141 # Determinations of the eigenvalues of sigma epsilon
> > 142 pa=SqrtMatrix0(GSigma)
> > 143 mq= pa %*% GGamma %*% pa
> > 144 u=Re(eigen(mq)$values)
> >
> >
> > 145 # determination of degree of freedom and value c noted va
> > 146 dl=(sum(u)^2)/(sum(u^2))
> > 147 va=(sum(u^2))/(sum(u))
> > 148 pc=1-pchisq(tr1/va, df= dl)
> > 149 pc1[i1]=pc
> >
> > 150 # Test of the value obtained
> > 151 if (pc>m1) d1=0 else d1=1
> > 152 if (pc>m2) d2=0 else d2=1
> > 153 if (pc>m3) d3=0 else d3=1
> > 154 l1=l1+d1
> > 155 l2=l2+d2
> > 156 l3=l3+d3
> > 157 }
> > 158 K=K+1
> > 159 MV [K,1]=n
> > 160 MV [K,2]=l1/number of timessim
> > 161 MV [K,3]=l2/number of timessim
> > 162 MV[K,4]=l3/number of timessim
> > 163 }
> >
> >
> >
> >
> >
> >
> > l
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
> UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@heemj@n93 @end|ng |rom y@hoo@com  Wed Oct 14 05:42:08 2020
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Wed, 14 Oct 2020 03:42:08 +0000 (UTC)
Subject: [R] Help in Coding
References: <1233467808.315850.1602646928312.ref@mail.yahoo.com>
Message-ID: <1233467808.315850.1602646928312@mail.yahoo.com>


Good morning dear administrators,
Please help me to code this code in R.
I working in the multivariate time series data, know my objective is that to one year forecast of the hourly time series data, using first five as a training set and the remaining one year as validation. For this??I transform the the data into functional data through Fourier basis functional, apply functional principle components as dimensional reduction explaining a specific amount of variation? ?, using the corresponding? functional principle components scores. I use the VAR model on those FPCscores for forecasting one day ahead forecast, know my problem is that i choose four Fpc,s which give only four value in a single day, I want the forecast for 24 hours not only 4, and then i want to transform it back to the original functional data. for the understanding i am sharing my code (1) transform of the multivariate time series data in functional data(2) the functional principle components and the corresponding scores(3) I use functional final prediction error for the selection of the parameters on the VAR model(4) Using VAR for the analysis and forecasting .(1)?nb = 23 # number of basis functions for the data? fbf = create.fourier.basis(rangeval=c(0,1), nbasis=nb) # basis for data? args=seq(0,1,length=24)? fdata1=Data2fd(args,y=t(mat),fbf) # functions generated from discretized y(2)?ffpe = fFPE(fdata1, Pmax=10)? d.hat = ffpe[1] #order of the model? p.hat = ffpe[2] #lag of the model
(3) n = ncol(fdata1$coef)? D = nrow(fdata1$coef)? #center the data? mu = mean.fd(fdata1)? data = center.fd(fdata1)? #fPCA? fpca = pca.fd(data,nharm=D)? scores = fpca$scores[,1:d.hat](4)?# to avoid warnings from vars predict function below? ? ? colnames(scores) <- as.character(seq(1:d.hat))? ? ? VAR.pre= predict(VAR(scores, p.hat), n.ahead=1, type="const")$fcst
after this iIneed help first how i transform this into original Functional data and to obtain the for for each 24 hours (mean one day forecast) and to how to generalize the result for one year.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Oct 14 07:25:54 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 13 Oct 2020 22:25:54 -0700
Subject: [R] Help in Coding
In-Reply-To: <1233467808.315850.1602646928312@mail.yahoo.com>
References: <1233467808.315850.1602646928312.ref@mail.yahoo.com>
 <1233467808.315850.1602646928312@mail.yahoo.com>
Message-ID: <BCC87B4C-ED00-440E-9409-9A812358ED5E@dcn.davis.ca.us>

1) If you get help on this mailing list, it will generally be from someone like yourself... not an "administrator".

2) You desperately need to learn how to send your emails to this list in plain text format... See [1] to see how WE see your html-formatted email run through a blender. Sending in plain text is a setting in your email client... there are way too many client software packages out there for us to be able to help you figure that out.

3) Read the Posting Guide mentioned at the bottom of every email on this mailing list. One of the items you should note is that homework help is off-topic here. (We don't know what help would break the ethics rules of your educational institution, and they by definition have avenues for student assistance.)

4) This is not a "do my work for me" service. If you want non-homework help, post a reproducible example using plain text so we can quickly get an R session setup with your problem data and (broken?) code. [2][3][4]

[1] https://stat.ethz.ch/pipermail/r-help/2020-October/469056.html

[2] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[3] http://adv-r.had.co.nz/Reproducibility.html

[4] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette) 

On October 13, 2020 8:42:08 PM PDT, Faheem Jan via R-help <r-help at r-project.org> wrote:
>
>Good morning dear administrators,
>Please help me to code this code in R.
>I working in the multivariate time series data, know my objective is
>that to one year forecast of the hourly time series data, using first
>five as a training set and the remaining one year as validation. For
>this??I transform the the data into functional data through Fourier
>basis functional, apply functional principle components as dimensional
>reduction explaining a specific amount of variation? ?, using the
>corresponding? functional principle components scores. I use the VAR
>model on those FPCscores for forecasting one day ahead forecast, know
>my problem is that i choose four Fpc,s which give only four value in a
>single day, I want the forecast for 24 hours not only 4, and then i
>want to transform it back to the original functional data. for the
>understanding i am sharing my code (1) transform of the multivariate
>time series data in functional data(2) the functional principle
>components and the corresponding scores(3) I use functional final
>prediction error for the selection of the parameters on the VAR
>model(4) Using VAR for the analysis and forecasting .(1)?nb = 23 #
>number of basis functions for the data? fbf =
>create.fourier.basis(rangeval=c(0,1), nbasis=nb) # basis for data?
>args=seq(0,1,length=24)? fdata1=Data2fd(args,y=t(mat),fbf) # functions
>generated from discretized y(2)?ffpe = fFPE(fdata1, Pmax=10)? d.hat =
>ffpe[1] #order of the model? p.hat = ffpe[2] #lag of the model
>(3) n = ncol(fdata1$coef)? D = nrow(fdata1$coef)? #center the data? mu
>= mean.fd(fdata1)? data = center.fd(fdata1)? #fPCA? fpca =
>pca.fd(data,nharm=D)? scores = fpca$scores[,1:d.hat](4)?# to avoid
>warnings from vars predict function below? ? ? colnames(scores) <-
>as.character(seq(1:d.hat))? ? ? VAR.pre= predict(VAR(scores, p.hat),
>n.ahead=1, type="const")$fcst
>after this iIneed help first how i transform this into original
>Functional data and to obtain the for for each 24 hours (mean one day
>forecast) and to how to generalize the result for one year.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From r@ymondkww@dev @end|ng |rom gm@||@com  Wed Oct 14 07:20:35 2020
From: r@ymondkww@dev @end|ng |rom gm@||@com (Raymond Wong)
Date: Wed, 14 Oct 2020 00:20:35 -0500
Subject: [R] 2021 John M. Chambers Software Award
Message-ID: <881A5D81-3472-4931-B6C9-085F389B2E22@gmail.com>

Dear R-help listers,

The Statistical Computing Section of the American Statistical Association announces the competition for the John M. Chambers Statistical Software Award. In 1998 the Association for Computing Machinery (ACM) presented the ACM Software System Award to John Chambers for the design and development of S. Dr. Chambers generously donated his award to the Statistical Computing Section to endow an annual prize for statistical software written by, or in collaboration with, an undergraduate or graduate student.

Please visit http://asa.stat.uconn.edu <http://asa.stat.uconn.edu/> for more information.

Best regards,

Raymond Wong

Awards Chair
ASA Section on Statistical Computing

Associate Professor
Department of Statistics
Texas A&M University
	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Oct 14 10:35:24 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 14 Oct 2020 08:35:24 +0000
Subject: [R] Please need help to finalize my code
In-Reply-To: <CABcYAdLtmfVfDcX9L2==dTrvQ3kuJ-hw9tpgBM453jv69T3Lcg@mail.gmail.com>
References: <CAOkWQv1UHh8UVHpoo0vs4-9Yu-Lo4nxssQffE6QOGRZ_sjmYmw@mail.gmail.com>
 <6ed4f690d57c48ec95722c11ed8f7015@SRVEXCHCM1302.precheza.cz>
 <CAOkWQv1K-c6y0vLT_bNBSkmkVMHjz6QBbEzgwgz+a9d8=0YrEg@mail.gmail.com>
 <0e24c934a4f449fbbd01f2905be47e7e@SRVEXCHCM1302.precheza.cz>
 <CABcYAdLtmfVfDcX9L2==dTrvQ3kuJ-hw9tpgBM453jv69T3Lcg@mail.gmail.com>
Message-ID: <12fec25cbffb4b58a5781eed0b34ee91@SRVEXCHCM1302.precheza.cz>

Hi

I do not want to use kernels, OP wants, God knows for what.

Cheers
Petr

From: Richard O'Keefe <raoknz at gmail.com> 
Sent: Wednesday, October 14, 2020 1:43 AM
To: PIKAL Petr <petr.pikal at precheza.cz>
Cc: Ablaye Ngalaba <ablayengalaba at gmail.com>; r-help at r-project.org
Subject: Re: [R] Please need help to finalize my code

What do you *mean* "when you want to use the kernels".
WHICH kernels?
Use to do WHAT?
In your browser, visit http://cran.r-project.org
then select "Packages" from the list on the left.
Then pick the alphabetic list.
Now search for 'kernel'.
You will find dozens of matches.

On Wed, 14 Oct 2020 at 05:15, PIKAL Petr <mailto:petr.pikal at precheza.cz> wrote:
Hm. Google tells me that kernel function is in stats package which comes with base installation and is invoked when you start R.



search()

[1] ".GlobalEnv"        "package:stats"     "package:graphics" 

[4] "package:grDevices" "package:utils"     "package:datasets" 

[7] "package:methods"   "Autoloads"         "package:base"     



And BTW, keep your posts on R-help, others could give you more relevant answers.



Cheers

Petr



From: Ablaye Ngalaba <mailto:ablayengalaba at gmail.com> 
Sent: Monday, October 12, 2020 7:58 PM
To: PIKAL Petr <mailto:petr.pikal at precheza.cz>
Subject: Re: [R] Please need help to finalize my code



Hello.
Thank you for your response.
I would like to ask you the name of the package to install when you want to use the kernels 



Le lun. 12 oct. 2020 ? 08:28, PIKAL Petr <mailto:petr.pikal at precheza.cz <mailto:mailto:petr.pikal at precheza.cz> > a ?crit :

Hi.

Maybe you will get better answers, but from your code it seems to me that you are treating R as C or other similar language which is not optimal. Considering your first 9 lines, it could be changed either to

CenteringV <- function(X, Ms, n) X-Ms

or you probably could use functions sweep or scale.
Your other code is beyond my experience, sorry.

Cheers
Petr

> -----Original Message-----
> From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of Ablaye Ngalaba
> Sent: Saturday, October 10, 2020 9:24 PM
> To: mailto:r-help at r-project.org <mailto:mailto:r-help at r-project.org> 
> Subject: [R] Please need help to finalize my code
> 
> Good evening dear administrators,
> It is with pleasure that I am writing to you to ask for help to finalize my R
> programming algorithm.
> 
> Indeed, I attach this note to my code which deals with a case of independence
> test statistic . My request is to introduce the kernels using the functional data
> for this same code that I am sending you. So I list the lines for which we need
> to introduce the functional data using the kernels below.
> 
> First of all for this code we need to use the functional data. I have numbered
> the lines myself from the original code to give some indication about the lines
> of code to introduce the kernel.
> 1)Centering of redescription function phi(xi) (just use the kernel) 2)this
> function centers the functional data phi(xi) (just use the kernel)
> 3)phi(x1) (or kernel k( ., .) )
> 5)Even here the kernel with the functional data is used.
> 7)return the kernel
> 28) kernel dimension
> 29) kernel dimension
> 30)kernel dimension
> 73) redescription function phi(xi) or the kernel k(. , .) 74)redescription function
> phi(yi) or the kernel k(. , .) 76)redescription function phi(xbar) or the kernel k(.
> , .) 77)redescription function phi(xjhbar) or the kernel k(. , .) 82)redescription
> function phi(xi) or the kernel k(. , .) introduced instead of x 84)redescription
> function phi(xjhbar) or the kernel k(. , .) 89)w= redescription function
> phi(xbar) or the kernel k(. , .)
> 120) we center the redescription function phi(xi) or the kernel k(. , .) 121)Vn is
> a kernel function, so we use ph(xi) or the kernel k(. , , .) 126)centering of the
> redescription function phi(xji) or the kernel k(. , .) 127)Vij is computed using
> redescription function phi(xi) or the kernel k(.
> , .) instead of X.
> 130)centering redescription function phi(Xkl) or the kernel k(. , .) 131)Vijkl
> always using the kernel function as precedent 132)Vkl always using the kernel
> function as precedent
> 
>  I look forward to your help and sincere request.
> 
> 
>                              Yours sincerely
> 
> library(MASS)
> 
> 1 CenteringV<-function(X,Ms,n){
> 2 # this function centers the data of X
> 3 X1=X*0
> 4 for (i in 1:n){
> 5 X1[i,]=X[i,]-Ms
> 6 }
> 7 return(X1)
> 8 }
> 
> 
> 9 # Function N?2
> 10 SqrtMatrix0<-function(M) {
> 11 # This function allows us to compute the square root of a matrix
> 12 # using the decomposition M=PDQ where Q is the inverse of P
> 13 # here negative eigenvalues are replaced by zero
>  14 a=eigen(M,TRUE)
>  15 b=a$values
>  16 b[b<0]=0
>  17 c=a$vectors
> 18 d=diag(sqrt(b))
>  19 b=solve(c)
> 20 a=c%*%d%*%b
> 21 return(a)
> 22 }
> 
> 
> 23 # declaration of parameters
> 24 m1=0.01 # alpha value (1% risk)
> 25 m2=0.05 # alpha value (5% risk)
> 26 m3=0.1 # alpha value (10% risk)
> 27 nbrefoissim=100 # # times the program is running
> 28 p=3 #dimension of variable X
> 29 q=3 #dimension of variable Y
> 30 R=c(5,4,3);# Number of partition of each component of variable Y
> 31 if(length(R) != q) stop("The size of R must be equal to q")
> 32 n=25 # Sample size
> 33 N=c(25,50,100,200,300,400,500,1000) #different sample sizes
> 34 #N=c(25,50) #different sample sizes
> 35 pc1=rep(0.100)
> 36 K=0
> 37 MV=matrix(0,nr=8,nc=4)
> 38 dimnames(MV)[[2]]=c("n","r1%","r5%","r10%")
> 
> 
> 39 #Beginning of the program
> 
>  40 for (n in N){
> 
> 
> 41 l1=0 # initialization of the value to calculate the test level at 1%.
> 42 l2=0 # initialization of the value to calculate the test level at 5%.
> 43 l3=0 # initialization of the value to calculate the test level at 10%.
> 
> 44 # Creation of an n11 list containing the sizes of the different groups
> 45 n11=list()
> 46 for (i in 1:q){
> 47 n11[[i]]=rep(as.integer(n/R[i]),R[i])
> 48 n11[[i]][R[i]]=n-((R[i]-1)*n11[[i]][1])
> 49 }
> 
> 
> 50 # Creation of lists P11 and P12 which contain the probabilities and
> 51 # the inverses of the empirical probabilities of the different groups
> respectively
> 
> 52 P11=list()
> 53 P12=list()
> 54 for (i in 1:q){
> 55 P11[[i]]=n11[[i]]/n
> 56 P12[[i]]=n/n11[[i]
> 
> 57 }
> 
> 58 # creation of a list containing the W matrices
> 59 W=list()
> 60 for (i in 1:q){
> 61 w=matrix(0,n,R[i])
> 62 w[1:n11[[i]][1],1]=1
> 63 if (R[i]>1){
> 64 for (j in 2:R[i]){
> 65 s1=sum(n11[[i]][1:(j-1)])
> 66 w[(1+s1):(s1+n11[[i]][j]),j]=1
> 67 }}
> 68 W[[i]]=w
> 69 }
> 
> 70 for (i1 in 1:nbrefoissim){
> 
> 71 # data generation
> 72 VA1=mvrnorm(n,rep(0,(p+q)),diag((p+q)))
> 73 X=VA1[,1:p]
> 74 Y=VA1[,(p+1):(p+q)]
> 
> 75 # Xbar calculation
> 76 Xbar=colMeans(X)
> 
> 77 # Calculation of Xjh bar
> 78 Xjhbar=list()
> 79 for (i in 1:q){
> 80 w=matrix(0,R[i],p)
> 81 for (j in 1:R[i]){
> 82 w[j,]=colSums(W[[i]][,j]*X)/n11[[i]][j]
> 83 }
> 84 Xjhbar[[i]]=w
> 85 }
> 
> 86 #calculation of TO jh
> 
> 87 TO.jh=list()
> 88 for (i in 1:q){
> 89 w=Xjhbar[[i]]
> 90 to=w*0
> 91 for (j in 1:R[i]){
> 92 to[j,]=w[j,]-Xbar
> 93 }
> 94 TO.jh[[i]]=to
> 95 }
> 
> 96 #calculation of Lamda J
> 
> 97 Lamda=matrix(0,p,p)
> 98 for (i in 1:q){
> 99 to=TO.jh[[i]]
> 100 w=matrix(0,p,p)
> 101 for (j in 1:R[i]){
> 102 w=w+(P11[[i]][j]*(to[j,]%*%t(to[j,])))
> 103 }
> 104 Lamda=Lamda+w
> 105 }
> 
> 106 tr1=n*sum(diag(Lamda))
> 
> 107 # Gamma Calculation
> 
> 108 GGamma=matrix(0,p*sum(R),p*sum(R))
> 109 PGamma=kronecker(diag(P12[[1]]),diag(p))
> 110 Ifin=p*R [1]
> 111 GGamma[1:Ifin,1:Ifin]=PGamma
> 112 for (i in 2:q){
> 113 PGamma=kronecker(diag(P12[[i]]),diag(p))
> 114 Idebut=((p*sum(R[1:(i-1)]))+1)
> 115 Ifin=(p*sum(R[1:i]))
> 116 GGamma [Idebut:Ifin,Idebut:Ifin]=PGamma
> 117 }
> 
> 118 #Sigma calculation
> 
> 119 # Calculation of Vn
> 120 X1=CenteringV(X,Xbar,n)
> 121 Vn=t(X1)%*%X1/n
> 
> 122 ## Construction of Sigma
> 123 GSigma=matrix(0,p*sum(R),p*sum(R))
> 124 for (i in 1:q ){
> 125 for (j in 1:R[i] ){
> 126 Xij=CenteringV(X,Xjhbar[[i]][j,],n)
> 127 Vij=t(W[[i]][,j]*Xij)%*%Xij/n11[[i]][j]
> 
> 128 for (k in 1:q ){
> 129 for (l in 1:R[k]){
> 
> 130 Xkl=CenteringV(X,Xjhbar[[k]][l,],n)
> 131 Vijkl=t(W[[i]][,j]*Xij)%*%(W[[k]][,l]*Xkl)/n
> 
> 132 Vkl=t(W[[k]][,l]*Xkl)%*%Xkl/n11[[k]][l]
> 133 if (i==1) Idebut=((j-1)*p)+1 else Idebut=((sum(R[1:(i-1)])+j-1)*p)+1
> 134 if (i==1) Idebut1=(j*p) else Idebut1=((sum(R[1:(i-1)])+j)*p)
> 135 if (k==1) Ifin=((l-1)*p)+1 else Ifin=((sum(R[1:(k-1)])+l-1)*p)+1
> 136 if (k==1) Ifin1=(l*p) else Ifin1=((sum(R[1:(k-1)])+l)*p)
> 
> 137
> GSigma[Idebut:Idebut1,Ifin:Ifin1]=Vijkl+(P11[[i]][j]*P11[[k]][l]*(Vn-Vij-Vkl))
> 138 }
> 139 }
> 140 }
> 141 }
> 
> 
> 141 # Determinations of the eigenvalues of sigma epsilon
> 142 pa=SqrtMatrix0(GSigma)
> 143 mq= pa %*% GGamma %*% pa
> 144 u=Re(eigen(mq)$values)
> 
> 
> 145 # determination of degree of freedom and value c noted va
> 146 dl=(sum(u)^2)/(sum(u^2))
> 147 va=(sum(u^2))/(sum(u))
> 148 pc=1-pchisq(tr1/va, df= dl)
> 149 pc1[i1]=pc
> 
> 150 # Test of the value obtained
> 151 if (pc>m1) d1=0 else d1=1
> 152 if (pc>m2) d2=0 else d2=1
> 153 if (pc>m3) d3=0 else d3=1
> 154 l1=l1+d1
> 155 l2=l2+d2
> 156 l3=l3+d3
> 157 }
> 158 K=K+1
> 159 MV [K,1]=n
> 160 MV [K,2]=l1/number of timessim
> 161 MV [K,3]=l2/number of timessim
> 162 MV[K,4]=l3/number of timessim
> 163 }
> 
> 
> 
> 
> 
> 
> l
> 
>       [[alternative HTML version deleted]]
> 
> ______________________________________________
> mailto:R-help at r-project.org <mailto:mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From chr|@ho|d @end|ng |rom p@yctc@org  Wed Oct 14 19:00:45 2020
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 14 Oct 2020 18:00:45 +0100 (BST)
Subject: [R] Can anyone advise me on running R and Rstudio on an AWS virtual
 machine
Message-ID: <1037803985.1824576.1602694845159.JavaMail.zimbra@psyctc.org>

This is a funny one and if it's off topic here, I would be grateful if I could be guided to where it would be on topic. I have done some searching but not very successfully so far. 

Situation: I am doing some analyses of data that are stored in a postgres database in the AWS cloud and using the RJDBC and dplyr packages for the specifics of yanking the data to my own machine. They work and worked fine when the database was in Redshift last year. However, I am getting error messages on data transfer that I think are down to my very slow broadband where I am now and that pushed me to think I should move to doing the analyses on a virtual machine in the AWS cloud so the link from the data to the machine is fast and so only getting the code up there and the results down will go through my broadband. I would like to be able to work interactively and I have some experience of that, (which is clearly not R-help business!): I am fairly happy I can do that. If not, just ssh terminal access to the VM would be OK and I'm used to that too. 

My suspicions that the errors are down to my broadband are the trigger but I suspect that such a set may be the only way for me to go quite soon as these particular data sets are growing fast (they're not huge yet, whole R saved session image is 28Mb). I can see being able to upscale a VM in the cloud is the sensible way to go. However, this is currently a bit outside my experience. 

I have searched and found this from Amazon: 
[ https://aws.amazon.com/marketplace/pp/B07ZDBJ42H/ref=portal_asin_url#pdp-reviews | https://aws.amazon.com/marketplace/pp/B07ZDBJ42H/ref=portal_asin_url#pdp-reviews ] 
and a VM Ubuntu with R and Rstudio sounds perfect: pretty much replicating my laptop. I can try that out for free by the look of it (can that be true?!) but I would like to get any advice I can first. 

I also found: 
[ https://techcommunity.microsoft.com/t5/educator-developer-blog/hosting-rserver-and-rstudio-on-azure/ba-p/744389 | https://techcommunity.microsoft.com/t5/educator-developer-blog/hosting-rserver-and-rstudio-on-azure/ba-p/744389 ] 
but I would like to keep things on Amazon if I can (no great fan of Amazon or M$ but sometimes I have to swallow my scruples). 

Coming back to AWS I also found: 
[ https://blog.martinez.fyi/post/cloud-computing-with-r-and-aws/ | https://blog.martinez.fyi/post/cloud-computing-with-r-and-aws/ ] 
[ https://www.r-bloggers.com/2018/06/interacting-with-aws-from-r/ | https://www.r-bloggers.com/2018/06/interacting-with-aws-from-r/ ] 
and 
[ https://github.com/cloudyr/aws.ec2/commit/7566a353cc92082202f5646c7e1010df10c26dc5 | https://github.com/cloudyr/aws.ec2/commit/7566a353cc92082202f5646c7e1010df10c26dc5 ] 
all of which look pertinent and that last package looks as if it might be another way to go to offload work up to the VM if I can create one. 

However, the first two pages are from 2018 and things in this cloud VM world look to me to change very, very fast. That aws.ec2 package looks to be in an orphaned or semi-orphaned state. In all, I thought I would ask here to see if anyone has any fairly current advice about creating an AWS VM on which to run R (with the luxury of being able to upscale it, subject to my pocket money, as my needs may grow). 

TIA, 

Chris 

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/ 

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk> 
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places 
but <chris at psyctc.org> remains my main Email address. I have a work web site at: 
https://www.psyctc.org/psyctc/ 
and a site I manage for CORE and CORE system trust at: 
http://www.coresystemtrust.org.uk/ 
I have "semigrated" to France, see: 
https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/ 

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at: 
https://www.psyctc.org/pelerinage2016/ceworkdiary/ 
Beware: French time, generally an hour ahead of UK. 

	[[alternative HTML version deleted]]


From bobby@kn|ght @end|ng |rom gm@||@com  Wed Oct 14 19:16:27 2020
From: bobby@kn|ght @end|ng |rom gm@||@com (Robert Knight)
Date: Wed, 14 Oct 2020 12:16:27 -0500
Subject: [R] 
 Can anyone advise me on running R and Rstudio on an AWS virtual
 machine
In-Reply-To: <1037803985.1824576.1602694845159.JavaMail.zimbra@psyctc.org>
References: <1037803985.1824576.1602694845159.JavaMail.zimbra@psyctc.org>
Message-ID: <4FCBF642-887B-4602-925E-B5EB8EA71FBE@gmail.com>

Would recommend a CentOS 7 HVM image, from centos.org <http://centos.org/> as the direct vendor rather than others in the market.   Activate a t3.nano with 512MB of ram, and then follow the instructions to get Studio server installed.  Create a new user for Studio-server.  Also, ensure that you have a backup plan because the security effects of RStudio server in that situation are not extremely well studied.  RStudio server doesn?t require web servers or anything like that.  A t3a.nano would be about 10% cheaper, but slower on the CPU clock speed, which might reduce performance.  If you are using Dplyr and multithreading your work then you might want to move up in the t3 offerings until you get one that has dual vCPUs, but the cost increases pretty quickly.  It?s great to have a Studio version that never changes or updates on you.  Ensure a backup plan in case the server gets hacked in some fashion.  You could restrict access to your own IP address in the AWS security group settings which would drastically minimize the risk of that.

Robert Knight

> On Oct 14, 2020, at 12:00 PM, Chris Evans <chrishold at psyctc.org> wrote:
> 
> This is a funny one and if it's off topic here, I would be grateful if I could be guided to where it would be on topic. I have done some searching but not very successfully so far. 
> 
> Situation: I am doing some analyses of data that are stored in a postgres database in the AWS cloud and using the RJDBC and dplyr packages for the specifics of yanking the data to my own machine. They work and worked fine when the database was in Redshift last year. However, I am getting error messages on data transfer that I think are down to my very slow broadband where I am now and that pushed me to think I should move to doing the analyses on a virtual machine in the AWS cloud so the link from the data to the machine is fast and so only getting the code up there and the results down will go through my broadband. I would like to be able to work interactively and I have some experience of that, (which is clearly not R-help business!): I am fairly happy I can do that. If not, just ssh terminal access to the VM would be OK and I'm used to that too. 
> 
> My suspicions that the errors are down to my broadband are the trigger but I suspect that such a set may be the only way for me to go quite soon as these particular data sets are growing fast (they're not huge yet, whole R saved session image is 28Mb). I can see being able to upscale a VM in the cloud is the sensible way to go. However, this is currently a bit outside my experience. 
> 
> I have searched and found this from Amazon: 
> [ https://aws.amazon.com/marketplace/pp/B07ZDBJ42H/ref=portal_asin_url#pdp-reviews | https://aws.amazon.com/marketplace/pp/B07ZDBJ42H/ref=portal_asin_url#pdp-reviews ] 
> and a VM Ubuntu with R and Rstudio sounds perfect: pretty much replicating my laptop. I can try that out for free by the look of it (can that be true?!) but I would like to get any advice I can first. 
> 
> I also found: 
> [ https://techcommunity.microsoft.com/t5/educator-developer-blog/hosting-rserver-and-rstudio-on-azure/ba-p/744389 | https://techcommunity.microsoft.com/t5/educator-developer-blog/hosting-rserver-and-rstudio-on-azure/ba-p/744389 ] 
> but I would like to keep things on Amazon if I can (no great fan of Amazon or M$ but sometimes I have to swallow my scruples). 
> 
> Coming back to AWS I also found: 
> [ https://blog.martinez.fyi/post/cloud-computing-with-r-and-aws/ | https://blog.martinez.fyi/post/cloud-computing-with-r-and-aws/ ] 
> [ https://www.r-bloggers.com/2018/06/interacting-with-aws-from-r/ | https://www.r-bloggers.com/2018/06/interacting-with-aws-from-r/ ] 
> and 
> [ https://github.com/cloudyr/aws.ec2/commit/7566a353cc92082202f5646c7e1010df10c26dc5 | https://github.com/cloudyr/aws.ec2/commit/7566a353cc92082202f5646c7e1010df10c26dc5 ] 
> all of which look pertinent and that last package looks as if it might be another way to go to offload work up to the VM if I can create one. 
> 
> However, the first two pages are from 2018 and things in this cloud VM world look to me to change very, very fast. That aws.ec2 package looks to be in an orphaned or semi-orphaned state. In all, I thought I would ask here to see if anyone has any fairly current advice about creating an AWS VM on which to run R (with the luxury of being able to upscale it, subject to my pocket money, as my needs may grow). 
> 
> TIA, 
> 
> Chris 
> 
> -- 
> Small contribution in our coronavirus rigours: 
> https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/ 
> 
> Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk> 
> I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places 
> but <chris at psyctc.org> remains my main Email address. I have a work web site at: 
> https://www.psyctc.org/psyctc/ 
> and a site I manage for CORE and CORE system trust at: 
> http://www.coresystemtrust.org.uk/ 
> I have "semigrated" to France, see: 
> https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
> https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/ 
> 
> If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at: 
> https://www.psyctc.org/pelerinage2016/ceworkdiary/ 
> Beware: French time, generally an hour ahead of UK. 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From D@n@Ry@n @end|ng |rom unbc@c@  Wed Oct 14 17:45:29 2020
From: D@n@Ry@n @end|ng |rom unbc@c@ (Dan Ryan)
Date: Wed, 14 Oct 2020 15:45:29 +0000
Subject: [R] R-help Digest, Vol 212, Issue 12
In-Reply-To: <mailman.361047.1.1602583202.46044.r-help@r-project.org>
References: <mailman.361047.1.1602583202.46044.r-help@r-project.org>
Message-ID: <b9253e685a454acba451fed859b73f2d@pg-adr-exch-01.adr.unbc.ca>

Dear Frauke,

Thank you very much for taking the time to respond.  

You explanation was very helpful, and I now have that part figured out!

Best Wishes,

Dan

Frauke
Message: 3
Date: Mon, 12 Oct 2020 08:33:44 +0200 (CEST)
From: =?UTF-8?Q?Frauke_G=C3=BCnther?= <guenther at leibniz-bips.de>
To: "r-help at r-project.org" <r-help at r-project.org>
Cc: William Michels <wjm1 at caa.columbia.edu>, "smm at posteo.org"
        <smm at posteo.org>
Subject: Re: [R]  Fwd:  Help using the exclude option in the neuralnet
        package
Message-ID: <957726669.124476.1602484424752 at srvmail.bips.eu>
Content-Type: text/plain; charset="utf-8"

Dear all,

the exclude and constant.weights options are used as follows:

exclude: A matrix with n rows and 3 columns will exclude n weights. The the first column refers to the layer, the second column to the input neuron and the third column to the output neuron of the weight.

constant.weights: A vector specifying the values of the weights that are excluded from the training process and treated as fix.

Please refer to the following example:

Not using exclude and constant.weights (all weights are trained):

> nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, 
> iris, linear.output = FALSE)
>
> nn$weights
[[1]]
[[1]][[1]]
[,1]
[1,] 6.513239
[2,] -0.815920
[3,] -5.859802
[[1]][[2]]
[,1]
[1,] -4.597934
[2,] 9.179436

Using exclude (2 weights are excluded --> NA):

> nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, 
> iris, linear.output = FALSE,
exclude = matrix(c(1,2,1, 2,2,1),byrow=T, nrow=2))
> nn$weights
[[1]]
[[1]][[1]]
[,1]
[1,] -0.2815942
[2,] NA
[3,] 0.2481212
[[1]][[2]]
[,1]
[1,] -0.6934932
[2,] NA

Using exclude and constant.weights (2 weights are excluded and treated as fix --> 100 and 1000, respectively):

> nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, 
> iris, linear.output = FALSE,
exclude = matrix(c(1,2,1, 2,2,1),byrow=T, nrow=2),
constant.weights=c(100,1000))
> nn$weights
[[1]]
[[1]][[1]]
[,1]
[1,] 0.554119
[2,] 100.000000
[3,] 1.153611
[[1]][[2]]
[,1]
[1,] -0.3962524
[2,] 1000.0000000

I hope you will find this example helpful.

Sincerely,
Frauke


>     William Michels <wjm1 at caa.columbia.edu mailto:wjm1 at caa.columbia.edu > hat am 10.10.2020 18:16 geschrieben:
>
>
>     Forwarding: Question re "neuralnet" package on the R-Help mailing list:
>
>     https://stat.ethz.ch/pipermail/r-help/2020-October/469020.html
>
>     If you are so inclined, please reply to:
>
>     r-help at r-project.org mailto:r-help at r-project.org 
> <r-help at r-project.org mailto:r-help at r-project.org >
>
>     ---------- Forwarded message ---------
>     From: Dan Ryan <Dan.Ryan at unbc.ca mailto:Dan.Ryan at unbc.ca >
>     Date: Fri, Oct 9, 2020 at 3:52 PM
>     Subject: Re: [R] Help using the exclude option in the neuralnet package
>     To: r-help at r-project.org mailto:r-help at r-project.org 
> <r-help at r-project.org mailto:r-help at r-project.org >
>
>     Good Morning,
>
>     I am using the neuralnet package in R, and am able to produce some
>     basic neural nets, and use the output.
>
>     I would like to exclude some of the weights and biases from the
>     iteration process and fix their values.
>
>     However I do not seem to be able to correctly define the exclude and
>     constant.weights vectors.
>
>     Question: Can someone point me to an example where exclude and
>     contant.weights are used. I have search the R help archive, and
>     haven't found any examples which use these on the web.
>
>     Thank you in advance for any help.
>
>     Sincerely
>
>     Dan
>
>     [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-help at r-project.org mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




From kch@mber|n @end|ng |rom gm@||@com  Thu Oct 15 00:23:09 2020
From: kch@mber|n @end|ng |rom gm@||@com (1/k^c)
Date: Wed, 14 Oct 2020 16:23:09 -0600
Subject: [R] which() vs. just logical selection in df
In-Reply-To: <mailman.361047.1.1602583202.46044.r-help@r-project.org>
References: <mailman.361047.1.1602583202.46044.r-help@r-project.org>
Message-ID: <CAJjKGBTv4LQfO44QX+A59CAs97RwsBM69+Xp4QBWNSMOYSHy4w@mail.gmail.com>

Hi Dr. Snow, & R-helpers,

Thank you for your reply! I hadn't heard of the {microbenchmark}
package & was excited to try it! Thank you for the suggestion! I did
check the reference source for which() beforehand, which included the
statement to remove NAa, and I didn't have any missing values or NAs:

sum(is.na(dat$gender2))
sum(is.na(dat$gender))
sum(is.na(dat$y))

[1] 0
[1] 0
[1] 0

I still had a 10ms difference in the value returned by microbenchmark
between the following methods: one with and one without using which().
The difference is reversed from what I expected, since which() is an
extra step.

microbenchmark(
  head(
    dat[which(dat$gender2=="other"),],), times=100L)
microbenchmark(
  head(
    dat[dat$gender2=="other",],), times=100L)

         min                lq                 mean
head(dat[which(dat$gender2 == "other"), ], )      62.93803
74.25939     88.4704
head(dat[dat$gender2 == "other", ], )                 71.8914
87.95844    103.7231

Is which() invoking c-level code by chance, making it slightly faster
on average? The difference likely becomes important on terabytes of
data. The addition of which() still seems superfluous to me, and I'd
like to know whether it's considered best practice to keep it. What is
R inoking when which() isn't called explicitly? Is R invoking which()
eventually anyway?

Cheers!
Keith

> Message: 2
> Date: Mon, 12 Oct 2020 13:01:36 -0600
> From: Greg Snow <538280 at gmail.com>
> To: "1/k^c" <kchamberln at gmail.com>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] which() vs. just logical selection in df
> Message-ID:
>         <CAFEqCdyUuHh5TZ7t5NJ8cs_4xB61mNeUgasncekD485eBNRK6Q at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> I would suggest using the microbenchmark package to do the time
> comparison.  This will run each a bunch of times for a more meaningful
> comparison.
>
> One possible reason for the difference is the number of missing values
> in your data (along with the number of columns).  Consider the
> difference in the following results:
>
> > x <- c(1,2,NA)
> > x[x==1]
> [1]  1 NA
> > x[which(x==1)]
> [1] 1
>
>
>
> On Sat, Oct 10, 2020 at 5:25 PM 1/k^c <kchamberln at gmail.com> wrote:
> >
> > Hi R-helpers,
> >
> > Does anyone know why adding which() makes the select call more
> > efficient than just using logical selection in a dataframe? Doesn't
> > which() technically add another conversion/function call on top of the
> > logical selection? Here is a reproducible example with a slight
> > difference in timing.
> >
> > # Surrogate data - the timing here isn't interesting
> > urltext <- paste("https://drive.google.com/",
> >                  "uc?id=1AZ-s1EgZXs4M_XF3YYEaKjjMMvRQ7",
> >                  "-h8&export=download", sep="")
> > download.file(url=urltext, destfile="tempfile.csv") # download file first
> > dat <- read.csv("tempfile.csv", stringsAsFactors = FALSE, header=TRUE,
> >                   nrows=2.5e6) # read the file; 'nrows' is a slight
> >                                          # overestimate
> > dat <- dat[,1:3] # select just the first 3 columns
> > head(dat, 10) # print the first 10 rows
> >
> > # Select using which() as the final step ~ 90ms total time on my macbook air
> > system.time(
> >   head(
> >     dat[which(dat$gender2=="other"),],),
> >   gcFirst=TRUE)
> >
> > # Select skipping which() ~130ms total time
> > system.time(
> >   head(
> >     dat[dat$gender2=="other", ]),
> >   gcFirst=TRUE)
> >
> > Now I would think that the second one without which() would be more
> > efficient. However, every time I run these, the first version, with
> > which() is more efficient by about 20ms of system time and 20ms of
> > user time. Does anyone know why this is?
> >
> > Cheers!
> > Keith
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Gregory (Greg) L. Snow Ph.D.
> 538280 at gmail.com
>
>
>
>
> ------------------------------
>
> Message: 3
> Date: Mon, 12 Oct 2020 08:33:44 +0200 (CEST)
> From: =?UTF-8?Q?Frauke_G=C3=BCnther?= <guenther at leibniz-bips.de>
> To: "r-help at r-project.org" <r-help at r-project.org>
> Cc: William Michels <wjm1 at caa.columbia.edu>, "smm at posteo.org"
>         <smm at posteo.org>
> Subject: Re: [R]  Fwd:  Help using the exclude option in the neuralnet
>         package
> Message-ID: <957726669.124476.1602484424752 at srvmail.bips.eu>
> Content-Type: text/plain; charset="utf-8"
>
> Dear all,
>
> the exclude and constant.weights options are used as follows:
>
> exclude: A matrix with n rows and 3 columns will exclude n weights. The the first column refers to the layer, the second column to the input neuron and the third column to the output neuron of the weight.
>
> constant.weights: A vector specifying the values of the weights that are excluded from the training process and treated as fix.
>
> Please refer to the following example:
>
> Not using exclude and constant.weights (all weights are trained):
>
> > nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, iris, linear.output = FALSE)
> >
> > nn$weights
> [[1]]
> [[1]][[1]]
> [,1]
> [1,] 6.513239
> [2,] -0.815920
> [3,] -5.859802
> [[1]][[2]]
> [,1]
> [1,] -4.597934
> [2,] 9.179436
>
> Using exclude (2 weights are excluded --> NA):
>
> > nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, iris, linear.output = FALSE,
> exclude = matrix(c(1,2,1, 2,2,1),byrow=T, nrow=2))
> > nn$weights
> [[1]]
> [[1]][[1]]
> [,1]
> [1,] -0.2815942
> [2,] NA
> [3,] 0.2481212
> [[1]][[2]]
> [,1]
> [1,] -0.6934932
> [2,] NA
>
> Using exclude and constant.weights (2 weights are excluded and treated as fix --> 100 and 1000, respectively):
>
> > nn <- neuralnet(Species == "setosa" ~ Petal.Length + Petal.Width, iris, linear.output = FALSE,
> exclude = matrix(c(1,2,1, 2,2,1),byrow=T, nrow=2),
> constant.weights=c(100,1000))
> > nn$weights
> [[1]]
> [[1]][[1]]
> [,1]
> [1,] 0.554119
> [2,] 100.000000
> [3,] 1.153611
> [[1]][[2]]
> [,1]
> [1,] -0.3962524
> [2,] 1000.0000000
>
> I hope you will find this example helpful.
>
> Sincerely,
> Frauke
>
>
> >     William Michels <wjm1 at caa.columbia.edu mailto:wjm1 at caa.columbia.edu > hat am 10.10.2020 18:16 geschrieben:
> >
> >
> >     Forwarding: Question re "neuralnet" package on the R-Help mailing list:
> >
> >     https://stat.ethz.ch/pipermail/r-help/2020-October/469020.html
> >
> >     If you are so inclined, please reply to:
> >
> >     r-help at r-project.org mailto:r-help at r-project.org <r-help at r-project.org mailto:r-help at r-project.org >
> >
> >     ---------- Forwarded message ---------
> >     From: Dan Ryan <Dan.Ryan at unbc.ca mailto:Dan.Ryan at unbc.ca >
> >     Date: Fri, Oct 9, 2020 at 3:52 PM
> >     Subject: Re: [R] Help using the exclude option in the neuralnet package
> >     To: r-help at r-project.org mailto:r-help at r-project.org <r-help at r-project.org mailto:r-help at r-project.org >
> >
> >     Good Morning,
> >
> >     I am using the neuralnet package in R, and am able to produce some
> >     basic neural nets, and use the output.
> >
> >     I would like to exclude some of the weights and biases from the
> >     iteration process and fix their values.
> >
> >     However I do not seem to be able to correctly define the exclude and
> >     constant.weights vectors.
> >
> >     Question: Can someone point me to an example where exclude and
> >     contant.weights are used. I have search the R help archive, and
> >     haven't found any examples which use these on the web.
> >
> >     Thank you in advance for any help.
> >
> >     Sincerely
> >
> >     Dan
> >
> >     [[alternative HTML version deleted]]
> >
> >     ______________________________________________
> >     R-help at r-project.org mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >     and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
>
>
>
> ------------------------------
>
> Message: 4
> Date: Tue, 13 Oct 2020 08:04:32 +0200
> From: Ablaye Ngalaba <ablayengalaba at gmail.com>
> To: R-help at r-project.org
> Subject: [R] package for kernel on R
> Message-ID:
>         <CAOkWQv2YoQPpsBUJzV3i4EhAYHNRVZP3vuRXeBA28fLKSUdeqA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hello,
> Please, I want to know which package to install on R when coding the kernel
> functions
>
>         [[alternative HTML version deleted]]
>
>
>
>
> ------------------------------
>
> Message: 5
> Date: Tue, 13 Oct 2020 09:09:00 +0200
> From: Ablaye Ngalaba <ablayengalaba at gmail.com>
> To: R-help at r-project.org
> Subject: [R] help for R code
> Message-ID:
>         <CAOkWQv0LsgxkHdqpai1=9BpLmp6tAdNwZiqTihA8zrirkf2yFQ at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Good morning dear administrators,
> Please help me to code this code in R.
> I use in this file the redescription function ? which by making a scalar
> product gives a . You can also choose instead of the redescription function
> ? a kernel k(x,x).
>
>
>
>
>                   Sincerely
>
>         [[alternative HTML version deleted]]
>
>
>
>
> ------------------------------
>
> Message: 6
> Date: Tue, 13 Oct 2020 11:21:45 +0300
> From: Eric Berger <ericjberger at gmail.com>
> To: Ablaye Ngalaba <ablayengalaba at gmail.com>
> Cc: R mailing list <R-help at r-project.org>
> Subject: Re: [R] help for R code
> Message-ID:
>         <CAGgJW74TP-+L6gg0_BLbnayL657Ejw+_fvQ+tScsaDgEj8vQDA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hi Ablaye,
> The CRAN repository has thousands of available R packages. To help
> people find relevant packages amid such a huge collection, there are
> some 'task view' pages that group packages according to a particular
> task. I am guessing that you are interested in kernels because of
> their use in machine learning, so you might want to look at the
> Machine Learning task view at:
>
> https://cran.r-project.org/web/views/MachineLearning.html
>
> If you search for 'kernels' on that page you will find
>
> 'Support Vector Machines and Kernel Methods' which mentions a few
> packages that use kernels.
>
> Good luck,
> Eric
>
>
> On Tue, Oct 13, 2020 at 10:09 AM Ablaye Ngalaba <ablayengalaba at gmail.com> wrote:
> >
> > Good morning dear administrators,
> > Please help me to code this code in R.
> > I use in this file the redescription function ? which by making a scalar
> > product gives a . You can also choose instead of the redescription function
> > ? a kernel k(x,x).
> >
> >
> >
> >
> >                   Sincerely
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> R-help at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
> ------------------------------
>
> End of R-help Digest, Vol 212, Issue 12
> ***************************************


From bgunter@4567 @end|ng |rom gm@||@com  Thu Oct 15 00:42:40 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 14 Oct 2020 15:42:40 -0700
Subject: [R] which() vs. just logical selection in df
In-Reply-To: <CAJjKGBTv4LQfO44QX+A59CAs97RwsBM69+Xp4QBWNSMOYSHy4w@mail.gmail.com>
References: <mailman.361047.1.1602583202.46044.r-help@r-project.org>
 <CAJjKGBTv4LQfO44QX+A59CAs97RwsBM69+Xp4QBWNSMOYSHy4w@mail.gmail.com>
Message-ID: <CAGxFJbQ=m+XtPFwzV+8uhn99amunNqmr48YHOr0hU=w0zjFKig@mail.gmail.com>

Inline.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Oct 14, 2020 at 3:23 PM 1/k^c <kchamberln at gmail.com> wrote:

Is which() invoking c-level code by chance, making it slightly faster
> on average?
>

You do not need to ask such questions. R is open source, so just look!

> which
function (x, arr.ind = FALSE, useNames = TRUE)
{
    wh <- .Internal(which(x))   ## C code
    if (arr.ind && !is.null(d <- dim(x)))
        arrayInd(wh, d, dimnames(x), useNames = useNames)
    else wh
}
<bytecode: 0x7fcdba0b8e80>
<environment: namespace:base>

	[[alternative HTML version deleted]]


From kch@mber|n @end|ng |rom gm@||@com  Thu Oct 15 04:23:37 2020
From: kch@mber|n @end|ng |rom gm@||@com (1/k^c)
Date: Wed, 14 Oct 2020 20:23:37 -0600
Subject: [R] which() vs. just logical selection in df
In-Reply-To: <CAGxFJbQ=m+XtPFwzV+8uhn99amunNqmr48YHOr0hU=w0zjFKig@mail.gmail.com>
References: <mailman.361047.1.1602583202.46044.r-help@r-project.org>
 <CAJjKGBTv4LQfO44QX+A59CAs97RwsBM69+Xp4QBWNSMOYSHy4w@mail.gmail.com>
 <CAGxFJbQ=m+XtPFwzV+8uhn99amunNqmr48YHOr0hU=w0zjFKig@mail.gmail.com>
Message-ID: <CAJjKGBTunk+B-n5tpGvs6HGjFfOJG4KjfdchrJM77bdPZPQV1w@mail.gmail.com>

Hi Bert,

Thank you very much! I was unaware that .Internal() referred to C code.

I figured out the difference. which() dimensions the object returned
to be only the relevant records first. Logical indexing dimensions
last.

> length(index1<-dat$gender2=="other")
[1] 2000000
> length(index2<-which(index1))
[1] 666667
length(dat[index1,])
[1] 666667
length(dat[index2,])
[1] 666667

microbenchmark(index1<-dat$gender2=="other", times=100L) # 2e6 records, ~ 13ms.
microbenchmark(index2<-which(index1), times=100L) # Extra time for
which() ~ 5ms.
microbenchmark(dat[index1,], times=100L) # Time to return just TRUE
records using the whole 2e6 index. ~99ms
microbenchmark(dat[index2,], times=100L) # Time to return all records
from shorter index ~64ms.

Cheers,
Keith


On Wed, Oct 14, 2020 at 4:42 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> Inline.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Wed, Oct 14, 2020 at 3:23 PM 1/k^c <kchamberln at gmail.com> wrote:
>
>> Is which() invoking c-level code by chance, making it slightly faster
>> on average?
>
>
> You do not need to ask such questions. R is open source, so just look!
>
> > which
> function (x, arr.ind = FALSE, useNames = TRUE)
> {
>     wh <- .Internal(which(x))   ## C code
>     if (arr.ind && !is.null(d <- dim(x)))
>         arrayInd(wh, d, dimnames(x), useNames = useNames)
>     else wh
> }
> <bytecode: 0x7fcdba0b8e80>
> <environment: namespace:base>


From n|co@gut|errezo @end|ng |rom gm@||@com  Thu Oct 15 12:39:37 2020
From: n|co@gut|errezo @end|ng |rom gm@||@com (Nico Gutierrez)
Date: Thu, 15 Oct 2020 12:39:37 +0200
Subject: [R] Dplyr question
Message-ID: <A3AE19CB-5811-4FEB-B87F-D76BF2D6096E@gmail.com>

Hi All,

Trying to get familiar with dplyr so I have a basic question:

How to summarise sum(Values) per species, maintaining Code column (each species has a Code):

          Species					Values	     Code
1        Acanthocybium solandri        33        		LC
2        Makaira nigricans        		20        		VU
3        Makaira nigricans                 20        		VU
4.       Makaira nigricans                 20       		VU
5	  Sarda sarda        		         2      		LC
4        Lethrinus lentjan                   12        		LC
5        Raja pita        			8        		DD
6        Raja pita  				2			DD

I need:

         Species					Values	     Code
1        Acanthocybium solandri        33        		LC
2        Makaira nigricans        		60        		VU
3	  Sarda sarda        		         2      		LC
4        Lethrinus lentjan                   12        		LC
5        Raja pita        			10        		DD


Thanks :)

From e| @end|ng |rom ||@@e@NA  Thu Oct 15 12:41:55 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Thu, 15 Oct 2020 12:41:55 +0200
Subject: [R] Dplyr question
In-Reply-To: <A3AE19CB-5811-4FEB-B87F-D76BF2D6096E@gmail.com>
References: <A3AE19CB-5811-4FEB-B87F-D76BF2D6096E@gmail.com>
Message-ID: <b2d82a59-a7b4-dd9d-ac77-740e9ce52237@lisse.NA>

This is well described in the manual.

Sounds like homework...

el

On 15/10/2020 12:39, Nico Gutierrez wrote:
> Hi All,
> 
> Trying to get familiar with dplyr so I have a basic question:
> 
> How to summarise sum(Values) per species, maintaining Code column (each species has a Code):
> 
>           Species					Values	     Code
> 1        Acanthocybium solandri        33        		LC
> 2        Makaira nigricans        		20        		VU
> 3        Makaira nigricans                 20        		VU
> 4.       Makaira nigricans                 20       		VU
> 5	  Sarda sarda        		         2      		LC
> 4        Lethrinus lentjan                   12        		LC
> 5        Raja pita        			8        		DD
> 6        Raja pita  				2			DD
> 
> I need:
> 
>          Species					Values	     Code
> 1        Acanthocybium solandri        33        		LC
> 2        Makaira nigricans        		60        		VU
> 3	  Sarda sarda        		         2      		LC
> 4        Lethrinus lentjan                   12        		LC
> 5        Raja pita        			10        		DD
> 
> 
> Thanks :)
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist 
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From b@rb@r@@rogo @end|ng |rom un|rom@1@|t  Thu Oct 15 18:32:16 2020
From: b@rb@r@@rogo @end|ng |rom un|rom@1@|t (Barbara Rogo)
Date: Thu, 15 Oct 2020 18:32:16 +0200
Subject: [R] Logreturn variance in Heston model
Message-ID: <CAL+pVGiP2aUxjbOnneDPw50azqWi+4D-Ui-2D=Od2Nf4khvybg@mail.gmail.com>

I have to calculate the logreturn variance in the Heston model. How can I
do? Do you know some function that calculates it?
Thank you
Barbara

-- 
________________________________________________________
Le informazioni 
contenute in questo messaggio di posta elettronica sono strettamente 
riservate e indirizzate esclusivamente al destinatario. Si prega di non 
leggere, fare copia, inoltrare a terzi o conservare tale messaggio se non 
si ? il legittimo destinatario dello stesso. Qualora tale messaggio sia 
stato ricevuto per errore, si prega di restituirlo al mittente e di 
cancellarlo permanentemente dal proprio computer.
The information contained 
in this e mail message is strictly confidential and intended for the use of
the addressee only.? If you are not the intended recipient, please do not 
read, copy, forward or store it on your computer. If you have received the
message in error, please forward it back to the sender and delete it 
permanently from your computer system.

-- 


	[[alternative HTML version deleted]]


From @@n|@@w@dud @end|ng |rom gm@||@com  Thu Oct 15 16:59:39 2020
From: @@n|@@w@dud @end|ng |rom gm@||@com (Sania Wadud)
Date: Thu, 15 Oct 2020 15:59:39 +0100
Subject: [R] package(moments) issue
Message-ID: <CAECzKZZp45dr30n7KX-33WQc4ODPB=HhLcGLPQ=A67Obv68nbA@mail.gmail.com>

Hi all,

While running the anscombe.test in R, I'm getting an error of *Error in if
(pval > 1) pval <- 2 - pval : missing value where TRUE/FALSE needed* for a
few time series columns whereas for most of the series the function is
working fine. I have checked for those specific columns for missing values.
However, there is no NA/NAN value in the dataset.

I have also run kurtosis for those time series and I can get results. I
have noticed the same issue was reported in the following post for python
(scipy.stat) and the report mentions that there is a bug in moments package
in R. I was wondering whether the issue has been resolved.

https://github.com/scipy/scipy/issues/1950

Could anyone please help me with the error?

I look forward to hearing from you.

Regards,
Sania

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Oct 15 21:29:04 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 15 Oct 2020 12:29:04 -0700
Subject: [R] Logreturn variance in Heston model
In-Reply-To: <CAL+pVGiP2aUxjbOnneDPw50azqWi+4D-Ui-2D=Od2Nf4khvybg@mail.gmail.com>
References: <CAL+pVGiP2aUxjbOnneDPw50azqWi+4D-Ui-2D=Od2Nf4khvybg@mail.gmail.com>
Message-ID: <f8491f52-23e2-8505-710d-999926758bb9@comcast.net>

I'm sure I don't know the answer, but I'll hazard a guess why no one has 
responded in 3 hours. Generally persons submit question to Rhelp with 
some code and data (or at least a description of the data). Questions 
about theory are considered off-topic although sometimes addressed if 
there seems to be some relationship to some aspect of the language. 
Questions that show little individual effort at preliminary searching 
may get ignored, and this is what I think is happening to yours at the 
moment. Likewise requests for tutorials or solutions to what appear to 
be homework questions with no prior effort are often met with 
suggestions that you present evidence of knowing how to do basic 
operations such as building simulated datasets.

There are quite a few CRAN Task Views and you might start there.

You posted in HTML. Rhelp is a plain text mailing list. I suggest? you 
read the Posting Guide and the List Info pages.

You might consider posting the question on the Stackexchange.com's 
Quantitative Finance forum, but I would advise first reviewing their 
[how to post] pages.

Don't post this question in this form to StackOverflow, since package 
recommendation requests are off-topic there.

-- 

David

On 10/15/20 9:32 AM, Barbara Rogo via R-help wrote:
> I have to calculate the logreturn variance in the Heston model. How can I
> do? Do you know some function that calculates it?
> Thank you
> Barbara
>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Oct 15 21:43:41 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 15 Oct 2020 12:43:41 -0700
Subject: [R] package(moments) issue
In-Reply-To: <CAECzKZZp45dr30n7KX-33WQc4ODPB=HhLcGLPQ=A67Obv68nbA@mail.gmail.com>
References: <CAECzKZZp45dr30n7KX-33WQc4ODPB=HhLcGLPQ=A67Obv68nbA@mail.gmail.com>
Message-ID: <CAHqSRuTmTA3NJYYXe8K5ktev2rMPHvjCtX_rz_hEP_SNRy1L7w@mail.gmail.com>

moments::anscombe.test(x) does give errors when x has too few values or if
all the values in x are the same

> moments::anscombe.test(c(1,2,6))
Error in if (pval > 1) pval <- 2 - pval :
  missing value where TRUE/FALSE needed
> moments::anscombe.test(c(2,2,2,2,2,2,2,2))
Error in if (pval > 1) pval <- 2 - pval :
  missing value where TRUE/FALSE needed

You can use tryCatch() to return some special value where these errors
occur.  E.g., use

tryCatch(anscombe.test(x), error=function(e) list(p.value=NA))

instead of ascombe.test (this assumes you will only look at p.value later -
add other entries as needed.).

-Bill

On Thu, Oct 15, 2020 at 12:09 PM Sania Wadud <sania.wadud at gmail.com> wrote:

> Hi all,
>
> While running the anscombe.test in R, I'm getting an error of *Error in if
> (pval > 1) pval <- 2 - pval : missing value where TRUE/FALSE needed* for a
> few time series columns whereas for most of the series the function is
> working fine. I have checked for those specific columns for missing values.
> However, there is no NA/NAN value in the dataset.
>
> I have also run kurtosis for those time series and I can get results. I
> have noticed the same issue was reported in the following post for python
> (scipy.stat) and the report mentions that there is a bug in moments package
> in R. I was wondering whether the issue has been resolved.
>
> https://github.com/scipy/scipy/issues/1950
>
> Could anyone please help me with the error?
>
> I look forward to hearing from you.
>
> Regards,
> Sania
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Oct 16 01:36:29 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 15 Oct 2020 16:36:29 -0700
Subject: [R] package(moments) issue
In-Reply-To: <CAECzKZbQeCBSXD5qdUMpM5pazKNzuRa3k4XVFr+dwuDujhS2Ng@mail.gmail.com>
References: <CAECzKZZp45dr30n7KX-33WQc4ODPB=HhLcGLPQ=A67Obv68nbA@mail.gmail.com>
 <CAHqSRuTmTA3NJYYXe8K5ktev2rMPHvjCtX_rz_hEP_SNRy1L7w@mail.gmail.com>
 <CAECzKZbQeCBSXD5qdUMpM5pazKNzuRa3k4XVFr+dwuDujhS2Ng@mail.gmail.com>
Message-ID: <CAHqSRuTdqV_BfxihCERD=WS6UyALQOvAqTTrQ3SrtmwmuBGtxg@mail.gmail.com>

Another bad case is
    > moments::anscombe.test(rep(c(1,1.1),length=35))
    Error in if (pval > 1) pval <- 2 - pval :
      missing value where TRUE/FALSE needed

I haven't checked the formulas carefully, but I suspect the problem is from
taking the cube root of a negative number in
    z <- (1 - 2/(9 * a) - ((1 - 2/a)/(1 + xx * sqrt(2/(a -
4))))^(1/3))/sqrt(2/(9 * a))
In R, the cube root (or any non-integral power) of a negative real number
is NaN and  ((1 - 2/a)/(1 + xx * sqrt(2/(a - 4))))
is c. -928 in this example.  I think the intent was for the cube root to be
a negative real, c. -9.76, in this case.

If that is the intent, then a fix is to define a cube_root function for
reals
   cube_root <- function (x) sign(x) * abs(x)^(1/3)
and change the z<-... line to use cube_root() instead of ^(1/3).
    z <- (1 - 2/(9 * a) - cube_root(((1 - 2/a)/(1 + xx * sqrt(2/(a -
4))))))/sqrt(2/(9 * a))

-Bill

On Thu, Oct 15, 2020 at 3:15 PM Sania Wadud <sania.wadud at gmail.com> wrote:

> Hi Bill,
>
> Thanks for prompt reply and letting me know a way around it.
>
> I have more than 1200 observations and not all the values are the same.
> However, my data points are quite similar, for example,
> 0.079275, 0.078867, 0.070716  in millions and etc. I have run the data
> without converting it to millions and I still get the same error
> message. As I have kurtosis value, it should be fine for the time being.
> However, in case if you have any other explanation behind the
> error, I will highly appreciate it.
>
> Best wishes,
> Sania
>
> On Thu, 15 Oct 2020 at 20:43, Bill Dunlap <williamwdunlap at gmail.com>
> wrote:
>
>> moments::anscombe.test(x) does give errors when x has too few values or
>> if all the values in x are the same
>>
>> > moments::anscombe.test(c(1,2,6))
>> Error in if (pval > 1) pval <- 2 - pval :
>>   missing value where TRUE/FALSE needed
>> > moments::anscombe.test(c(2,2,2,2,2,2,2,2))
>> Error in if (pval > 1) pval <- 2 - pval :
>>   missing value where TRUE/FALSE needed
>>
>> You can use tryCatch() to return some special value where these errors
>> occur.  E.g., use
>>
>> tryCatch(anscombe.test(x), error=function(e) list(p.value=NA))
>>
>> instead of ascombe.test (this assumes you will only look at p.value later
>> - add other entries as needed.).
>>
>> -Bill
>>
>> On Thu, Oct 15, 2020 at 12:09 PM Sania Wadud <sania.wadud at gmail.com>
>> wrote:
>>
>>> Hi all,
>>>
>>> While running the anscombe.test in R, I'm getting an error of *Error in
>>> if
>>> (pval > 1) pval <- 2 - pval : missing value where TRUE/FALSE needed* for
>>> a
>>> few time series columns whereas for most of the series the function is
>>> working fine. I have checked for those specific columns for missing
>>> values.
>>> However, there is no NA/NAN value in the dataset.
>>>
>>> I have also run kurtosis for those time series and I can get results. I
>>> have noticed the same issue was reported in the following post for python
>>> (scipy.stat) and the report mentions that there is a bug in moments
>>> package
>>> in R. I was wondering whether the issue has been resolved.
>>>
>>> https://github.com/scipy/scipy/issues/1950
>>>
>>> Could anyone please help me with the error?
>>>
>>> I look forward to hearing from you.
>>>
>>> Regards,
>>> Sania
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From @@n|@@w@dud @end|ng |rom gm@||@com  Fri Oct 16 00:14:50 2020
From: @@n|@@w@dud @end|ng |rom gm@||@com (Sania Wadud)
Date: Thu, 15 Oct 2020 23:14:50 +0100
Subject: [R] package(moments) issue
In-Reply-To: <CAHqSRuTmTA3NJYYXe8K5ktev2rMPHvjCtX_rz_hEP_SNRy1L7w@mail.gmail.com>
References: <CAECzKZZp45dr30n7KX-33WQc4ODPB=HhLcGLPQ=A67Obv68nbA@mail.gmail.com>
 <CAHqSRuTmTA3NJYYXe8K5ktev2rMPHvjCtX_rz_hEP_SNRy1L7w@mail.gmail.com>
Message-ID: <CAECzKZbQeCBSXD5qdUMpM5pazKNzuRa3k4XVFr+dwuDujhS2Ng@mail.gmail.com>

Hi Bill,

Thanks for prompt reply and letting me know a way around it.

I have more than 1200 observations and not all the values are the same.
However, my data points are quite similar, for example,
0.079275, 0.078867, 0.070716  in millions and etc. I have run the data
without converting it to millions and I still get the same error
message. As I have kurtosis value, it should be fine for the time being.
However, in case if you have any other explanation behind the
error, I will highly appreciate it.

Best wishes,
Sania

On Thu, 15 Oct 2020 at 20:43, Bill Dunlap <williamwdunlap at gmail.com> wrote:

> moments::anscombe.test(x) does give errors when x has too few values or if
> all the values in x are the same
>
> > moments::anscombe.test(c(1,2,6))
> Error in if (pval > 1) pval <- 2 - pval :
>   missing value where TRUE/FALSE needed
> > moments::anscombe.test(c(2,2,2,2,2,2,2,2))
> Error in if (pval > 1) pval <- 2 - pval :
>   missing value where TRUE/FALSE needed
>
> You can use tryCatch() to return some special value where these errors
> occur.  E.g., use
>
> tryCatch(anscombe.test(x), error=function(e) list(p.value=NA))
>
> instead of ascombe.test (this assumes you will only look at p.value later
> - add other entries as needed.).
>
> -Bill
>
> On Thu, Oct 15, 2020 at 12:09 PM Sania Wadud <sania.wadud at gmail.com>
> wrote:
>
>> Hi all,
>>
>> While running the anscombe.test in R, I'm getting an error of *Error in if
>> (pval > 1) pval <- 2 - pval : missing value where TRUE/FALSE needed* for a
>> few time series columns whereas for most of the series the function is
>> working fine. I have checked for those specific columns for missing
>> values.
>> However, there is no NA/NAN value in the dataset.
>>
>> I have also run kurtosis for those time series and I can get results. I
>> have noticed the same issue was reported in the following post for python
>> (scipy.stat) and the report mentions that there is a bug in moments
>> package
>> in R. I was wondering whether the issue has been resolved.
>>
>> https://github.com/scipy/scipy/issues/1950
>>
>> Could anyone please help me with the error?
>>
>> I look forward to hearing from you.
>>
>> Regards,
>> Sania
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From |@b@rto@96 @end|ng |rom gm@||@com  Fri Oct 16 00:34:10 2020
From: |@b@rto@96 @end|ng |rom gm@||@com (Frantisek Bartos)
Date: Fri, 16 Oct 2020 00:34:10 +0200
Subject: [R] calling stats::optim from Rcpp causes memory leak
Message-ID: <CAK+wxiMqP=d9S1vf8JkaKMS1XBj04T2OwLZ02So0Zo18B+LX_g@mail.gmail.com>

Hi, in part of my code I need to optimize a function from within Rcpp (I
followed the 2nd answer here
https://stackoverflow.com/questions/48348079/applying-the-optim-function-in-r-in-c-with-rcpp).
However, I found that the function leaks memory (very little, but it
compounds if it's a part of repeatedly running simulation). I created a
minimal reproducible example, but I have no idea where does the leak
originate. Could I ask for guidance on dealing with this issue?

Rcpp code:
#include <Rcpp.h>
using namespace Rcpp;
double objective_function(double x){
  double obj = .666 - x;
  return pow(obj, 2);
}
// [[Rcpp::export(leak)]]
double leak(double a, double b){


  // Extract R's optim function
  Rcpp::Environment stats("package:stats");
  Rcpp::Function optim = stats["optim"];

  // Call the optim function from R in C++
  Rcpp::List opt_results = optim(Rcpp::_["par"]    = .5,
                                 Rcpp::_["fn"]     =
Rcpp::InternalFunction(&objective_function),
                                 Rcpp::_["method"] = "Brent",
                                 Rcpp::_["lower"]  = a,
                                 Rcpp::_["upper"]  = b);

  // Extract out the estimated parameter values
  double mu = opt_results[0];

  // Return estimated values
  return mu;
}

R code:
repeat{
  leak(0, 1)
}

When I look at my task manager, the MB usage under Rstudio R Session is
steadily increasing (which doesn't happen if I use any other function that
just returns a value).

Thanks,
Frantisek Bartos

	[[alternative HTML version deleted]]


From m@rce| @end|ng |rom coeurd@rt|ch@ut@ch  Fri Oct 16 07:51:25 2020
From: m@rce| @end|ng |rom coeurd@rt|ch@ut@ch (Marcel Baumgartner)
Date: Fri, 16 Oct 2020 07:51:25 +0200
Subject: [R] Call to R.exe in a Script fails since the upgrade from R 3.6.1
 to R 4.0.2
Message-ID: <1602827485-95c9f906bb0a4e8014423b16ee21467d@coeurdartichaut.ch>


Dear R Community,  
  
I call R from within a software called ?IDEA? ([www.casewareanalytics.com](http://www.casewareanalytics.com)). This language uses its own scripting language, but it is very similar to Visual Basic. The basic call is as shown below:  


R_Command is a string of the form (the Chr(34) creates a double quote):
In my file ?script.R?, I then start everything by:
This has worked perfectly up to R 3.6.1. But since I migrated to R 4.0.2, this command does not create the ?log.txt? anymore. The script runs, it finds the arguments in the file ?nga_config.R?, generates the output data, but then does not write the log.txt. However, when I run this R_command on the command line in Windows, all works fine: the log.txt is created. So the syntax is correct.
In the R windows FAQ, i see this:  
  
### 2.12 Can I use?`R CMD BATCH`?  


Yes: use?`R CMD BATCH --help`?or?`?BATCH`?for full details.  


You can also set up a batch file using?`Rterm.exe`. A sample batch file might contain (as one line)  



I tried this, but I have the same issue: the output file ("log.txt") is not crated. Also, choosing R.exe and Rterm.exe has no impact.  
  
Do you know whether something has changed in R 4.* that could cause this issue?  
  
Thanks for your help. Happy to do a Skype/Teams/Zoom session anytime!  
  
Best regards  
  
Marcel Baumgartner  
  


	[[alternative HTML version deleted]]


From @b|@yeng@|@b@ @end|ng |rom gm@||@com  Fri Oct 16 17:09:57 2020
From: @b|@yeng@|@b@ @end|ng |rom gm@||@com (Ablaye Ngalaba)
Date: Fri, 16 Oct 2020 17:09:57 +0200
Subject: [R] Need help in R code of the functional data .
Message-ID: <CAOkWQv22--O9y81Oq8x9Vu0kJ47JWDpF6p+LA0ViRAJockq3sA@mail.gmail.com>

Hello,
Please, I want to know how the functional data are defined in programming
code R. If possible an illustrative example of code can help me to
understand better.





                               Yours sincerely.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Oct 16 18:25:14 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 16 Oct 2020 17:25:14 +0100
Subject: [R] Need help in R code of the functional data .
In-Reply-To: <CAOkWQv22--O9y81Oq8x9Vu0kJ47JWDpF6p+LA0ViRAJockq3sA@mail.gmail.com>
References: <CAOkWQv22--O9y81Oq8x9Vu0kJ47JWDpF6p+LA0ViRAJockq3sA@mail.gmail.com>
Message-ID: <f95a3970-5dcb-e925-2c3e-2f404c97f196@sapo.pt>

Hello,

You have asked several times about functional data, I really do not 
understand what you mean but if you want to learn about writing R 
functions, take a look at

doc/manual/R-intro.pdf, that comes with any installation of R, chap. 10 
Writing your own functions.

And at any of Hadley Wickham's excelent


https://r4ds.had.co.nz/functions.html
http://adv-r.had.co.nz/Functions.html


Hope this helps,

Rui Barradas

?s 16:09 de 16/10/20, Ablaye Ngalaba escreveu:
> Hello,
> Please, I want to know how the functional data are defined in programming
> code R. If possible an illustrative example of code can help me to
> understand better.
> 
> 
> 
> 
> 
>                                 Yours sincerely.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @nthonytrev|@@n @end|ng |rom gm@||@com  Thu Oct 15 19:43:33 2020
From: @nthonytrev|@@n @end|ng |rom gm@||@com (Anthony Trevisan)
Date: Thu, 15 Oct 2020 13:43:33 -0400
Subject: [R] [R-pkgs] rameritrade
Message-ID: <CAB035r+h0+RF4g2YUAner6Ne4cWfpRuynZFaLea1LKnB6+4BsA@mail.gmail.com>

Hello,

I recently created a package that allows R users to trade through the TD
Ameritrade API. With billions in assets and over 11 million clients, I am
sure some R users could leverage the API.

Best regards,
Tony

https://cran.r-project.org/web/packages/rameritrade/index.html

https://tonytrevisan.github.io/rameritrade/index.html

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From @@n|@@w@dud @end|ng |rom gm@||@com  Fri Oct 16 13:14:08 2020
From: @@n|@@w@dud @end|ng |rom gm@||@com (Sania Wadud)
Date: Fri, 16 Oct 2020 12:14:08 +0100
Subject: [R] package(moments) issue
In-Reply-To: <CAHqSRuTdqV_BfxihCERD=WS6UyALQOvAqTTrQ3SrtmwmuBGtxg@mail.gmail.com>
References: <CAECzKZZp45dr30n7KX-33WQc4ODPB=HhLcGLPQ=A67Obv68nbA@mail.gmail.com>
 <CAHqSRuTmTA3NJYYXe8K5ktev2rMPHvjCtX_rz_hEP_SNRy1L7w@mail.gmail.com>
 <CAECzKZbQeCBSXD5qdUMpM5pazKNzuRa3k4XVFr+dwuDujhS2Ng@mail.gmail.com>
 <CAHqSRuTdqV_BfxihCERD=WS6UyALQOvAqTTrQ3SrtmwmuBGtxg@mail.gmail.com>
Message-ID: <CAECzKZY31PbiZv0ztZ=yrM_8-2NyFc4k2QmmOrVVZTyzy-Mndg@mail.gmail.com>

Hi Bill,

Thanks for rectifying the issue. It seems to be a cube root of a negative
real issue. After updating the function it's working fine
and showing the correct results.

I highly appreciate your help.

Best wishes,
Sania

On Fri, 16 Oct 2020 at 00:36, Bill Dunlap <williamwdunlap at gmail.com> wrote:

> Another bad case is
>     > moments::anscombe.test(rep(c(1,1.1),length=35))
>     Error in if (pval > 1) pval <- 2 - pval :
>       missing value where TRUE/FALSE needed
>
> I haven't checked the formulas carefully, but I suspect the problem is
> from taking the cube root of a negative number in
>     z <- (1 - 2/(9 * a) - ((1 - 2/a)/(1 + xx * sqrt(2/(a -
> 4))))^(1/3))/sqrt(2/(9 * a))
> In R, the cube root (or any non-integral power) of a negative real number
> is NaN and  ((1 - 2/a)/(1 + xx * sqrt(2/(a - 4))))
> is c. -928 in this example.  I think the intent was for the cube root to
> be a negative real, c. -9.76, in this case.
>
> If that is the intent, then a fix is to define a cube_root function for
> reals
>    cube_root <- function (x) sign(x) * abs(x)^(1/3)
> and change the z<-... line to use cube_root() instead of ^(1/3).
>     z <- (1 - 2/(9 * a) - cube_root(((1 - 2/a)/(1 + xx * sqrt(2/(a -
> 4))))))/sqrt(2/(9 * a))
>
> -Bill
>
> On Thu, Oct 15, 2020 at 3:15 PM Sania Wadud <sania.wadud at gmail.com> wrote:
>
>> Hi Bill,
>>
>> Thanks for prompt reply and letting me know a way around it.
>>
>> I have more than 1200 observations and not all the values are the same.
>> However, my data points are quite similar, for example,
>> 0.079275, 0.078867, 0.070716  in millions and etc. I have run the data
>> without converting it to millions and I still get the same error
>> message. As I have kurtosis value, it should be fine for the time being.
>> However, in case if you have any other explanation behind the
>> error, I will highly appreciate it.
>>
>> Best wishes,
>> Sania
>>
>> On Thu, 15 Oct 2020 at 20:43, Bill Dunlap <williamwdunlap at gmail.com>
>> wrote:
>>
>>> moments::anscombe.test(x) does give errors when x has too few values or
>>> if all the values in x are the same
>>>
>>> > moments::anscombe.test(c(1,2,6))
>>> Error in if (pval > 1) pval <- 2 - pval :
>>>   missing value where TRUE/FALSE needed
>>> > moments::anscombe.test(c(2,2,2,2,2,2,2,2))
>>> Error in if (pval > 1) pval <- 2 - pval :
>>>   missing value where TRUE/FALSE needed
>>>
>>> You can use tryCatch() to return some special value where these errors
>>> occur.  E.g., use
>>>
>>> tryCatch(anscombe.test(x), error=function(e) list(p.value=NA))
>>>
>>> instead of ascombe.test (this assumes you will only look at p.value
>>> later - add other entries as needed.).
>>>
>>> -Bill
>>>
>>> On Thu, Oct 15, 2020 at 12:09 PM Sania Wadud <sania.wadud at gmail.com>
>>> wrote:
>>>
>>>> Hi all,
>>>>
>>>> While running the anscombe.test in R, I'm getting an error of *Error in
>>>> if
>>>> (pval > 1) pval <- 2 - pval : missing value where TRUE/FALSE needed*
>>>> for a
>>>> few time series columns whereas for most of the series the function is
>>>> working fine. I have checked for those specific columns for missing
>>>> values.
>>>> However, there is no NA/NAN value in the dataset.
>>>>
>>>> I have also run kurtosis for those time series and I can get results. I
>>>> have noticed the same issue was reported in the following post for
>>>> python
>>>> (scipy.stat) and the report mentions that there is a bug in moments
>>>> package
>>>> in R. I was wondering whether the issue has been resolved.
>>>>
>>>> https://github.com/scipy/scipy/issues/1950
>>>>
>>>> Could anyone please help me with the error?
>>>>
>>>> I look forward to hearing from you.
>>>>
>>>> Regards,
>>>> Sania
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>

	[[alternative HTML version deleted]]


From d|ego@hern@ngomezherrero @end|ng |rom gm@||@com  Fri Oct 16 17:37:56 2020
From: d|ego@hern@ngomezherrero @end|ng |rom gm@||@com (=?UTF-8?Q?Diego_Hernang=C3=B3mez_Herrero?=)
Date: Fri, 16 Oct 2020 17:37:56 +0200
Subject: [R] [R-pkgs] {giscoR} v0.1.0 available on CRAN
Message-ID: <CAA-ibazJcPPtm3DJngObXhiB5zXgvH0t_bHfH7bN=-Mcrkca5Q@mail.gmail.com>

Good afternoon:

giscoR is already available on CRAN. giscoR is a API package that helps to
retrieve data from GISCO - Eurostat. It  also provides some lightweight
data sets ready to use without downloading.

GISCO is a geospatial open data repository including several data sets as
countries, coastal lines, labels or NUTS levels. The data sets are usually
provided at several resolution levels (60M/20M/10M/03M/01M) and in 3
different projections (4326/3035/3857).

Vignette:
https://dieghernan.github.io/giscoR/articles/giscoR.html
-- 



Have a nice day!

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From bor|@@@te|pe @end|ng |rom utoronto@c@  Sat Oct 17 11:27:12 2020
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Sat, 17 Oct 2020 09:27:12 +0000
Subject: [R] ??? is to nls() as abline() is to lm() ?
Message-ID: <8B8EDD48-BECD-419A-AB3A-DC5EC41FD896@utoronto.ca>

I'm drawing a fitted normal distribution over a histogram. The use case is trivial (fitting normal distributions on densities) but I want to extend it to other fitting scenarios. What has stumped me so far is how to take the list that is returned by nls() and use it for curve(). I realize that I can easily do all of this with a few intermediate steps for any specific case. But I had expected that it should be possible to get a parametrized(!) function that computes predictions as one of the returned objects. 

I.e. I want a function that works with the model of nls() like abline() works() for lm().

I know that I can just pass parameters from coef(fit). But in the general case, I don't know how many parameters there are. I thought since nls() is able to put together the parametrized function internally, that function would be passed into the results object. But that doesn't seem to be the case. And though I could hack this together with parsing fit$m$formula to get() the formula from the environment and then paste() the parameter list in there - that sounds really, really awkward.

So I hope that there's an obvious way that I have overlooked.

Here's sample code to illustrate. :

fitNorm <- function(x, y) {
  # fit a normal distribution
  # Param:  x  domain
  #         y  densities
  # Value:     the fit object
  F <- function(x, a, mu, sig) {   # some parametrized function
    return( ( a / (sig*sqrt(2*pi)) ) * exp( (-1/2)*((x-mu)/sig)^2 ) )
  }

  mu  <- weighted.mean(x, y)            # estimate starting values
  sig <- sd(sample(x, 1000, prob = y, replace = TRUE))
  a   <- 1

  fit <- nls(y ~ F(x, a, mu, sig),
             start = c(a = a, mu = mu, sig = sig))  # starting values
  return(fit)
}

# Fit and plot ...:

# Values
x <- c(rnorm(5000, 3, 5), rnorm(2000, -5, 7)) # Two normal distributions ...

# Histogram
h <- hist(x, freq = FALSE,
          breaks = seq(min(x)-2, max(x)+2, by = 1),
          col = "#cfd7fa",
          main = "", ylab = "density", xlab = "x")
# Fit
myFit <- fitNorm(h$mids, h$density)

# Now: what I can do is, patch together the model function ...
mF <- function(x,
                a   = coef(myFit)["a"],
                mu  = coef(myFit)["mu"],
                sig = coef(myFit)["sig"]){
  a / (sig*sqrt(2*pi)) * exp( (-1/2)*((x-mu)/sig)^2 )
}
# ... and add the curve:
curve(mF(x),
      from = par("usr")[1], to = par("usr")[2],
      col = "#FF000055", lwd = 2, add = TRUE)


# But what I would like to do is something much more general, like:
curve(myFit$func, from = myFit$from, to = myFit$to,
      col = "#FF000055", lwd = 2, add = TRUE))


Thanks for any ideas and strategies.

Cheers,
Boris






--
Boris Steipe MD, PhD
University of Toronto
Associate Professor, Department of Biochemistry and
Department of Molecular Genetics


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Oct 17 12:26:18 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 17 Oct 2020 06:26:18 -0400
Subject: [R] ??? is to nls() as abline() is to lm() ?
In-Reply-To: <8B8EDD48-BECD-419A-AB3A-DC5EC41FD896@utoronto.ca>
References: <8B8EDD48-BECD-419A-AB3A-DC5EC41FD896@utoronto.ca>
Message-ID: <df0acb85-3e76-d3d8-5384-c4c8b583f390@gmail.com>

I haven't followed your example closely, but can't you use the predict() 
method for this?  To draw a curve, the function that will be used in 
curve() sets up a newdata dataframe and passes it to predict(fit, 
newdata= ...) to get predictions at those locations.

Duncan Murdoch

On 17/10/2020 5:27 a.m., Boris Steipe wrote:
> I'm drawing a fitted normal distribution over a histogram. The use case is trivial (fitting normal distributions on densities) but I want to extend it to other fitting scenarios. What has stumped me so far is how to take the list that is returned by nls() and use it for curve(). I realize that I can easily do all of this with a few intermediate steps for any specific case. But I had expected that it should be possible to get a parametrized(!) function that computes predictions as one of the returned objects.
> 
> I.e. I want a function that works with the model of nls() like abline() works() for lm().
> 
> I know that I can just pass parameters from coef(fit). But in the general case, I don't know how many parameters there are. I thought since nls() is able to put together the parametrized function internally, that function would be passed into the results object. But that doesn't seem to be the case. And though I could hack this together with parsing fit$m$formula to get() the formula from the environment and then paste() the parameter list in there - that sounds really, really awkward.
> 
> So I hope that there's an obvious way that I have overlooked.
> 
> Here's sample code to illustrate. :
> 
> fitNorm <- function(x, y) {
>    # fit a normal distribution
>    # Param:  x  domain
>    #         y  densities
>    # Value:     the fit object
>    F <- function(x, a, mu, sig) {   # some parametrized function
>      return( ( a / (sig*sqrt(2*pi)) ) * exp( (-1/2)*((x-mu)/sig)^2 ) )
>    }
> 
>    mu  <- weighted.mean(x, y)            # estimate starting values
>    sig <- sd(sample(x, 1000, prob = y, replace = TRUE))
>    a   <- 1
> 
>    fit <- nls(y ~ F(x, a, mu, sig),
>               start = c(a = a, mu = mu, sig = sig))  # starting values
>    return(fit)
> }
> 
> # Fit and plot ...:
> 
> # Values
> x <- c(rnorm(5000, 3, 5), rnorm(2000, -5, 7)) # Two normal distributions ...
> 
> # Histogram
> h <- hist(x, freq = FALSE,
>            breaks = seq(min(x)-2, max(x)+2, by = 1),
>            col = "#cfd7fa",
>            main = "", ylab = "density", xlab = "x")
> # Fit
> myFit <- fitNorm(h$mids, h$density)
> 
> # Now: what I can do is, patch together the model function ...
> mF <- function(x,
>                  a   = coef(myFit)["a"],
>                  mu  = coef(myFit)["mu"],
>                  sig = coef(myFit)["sig"]){
>    a / (sig*sqrt(2*pi)) * exp( (-1/2)*((x-mu)/sig)^2 )
> }
> # ... and add the curve:
> curve(mF(x),
>        from = par("usr")[1], to = par("usr")[2],
>        col = "#FF000055", lwd = 2, add = TRUE)
> 
> 
> # But what I would like to do is something much more general, like:
> curve(myFit$func, from = myFit$from, to = myFit$to,
>        col = "#FF000055", lwd = 2, add = TRUE))
> 
> 
> Thanks for any ideas and strategies.
> 
> Cheers,
> Boris
> 
> 
> 
> 
> 
> 
> --
> Boris Steipe MD, PhD
> University of Toronto
> Associate Professor, Department of Biochemistry and
> Department of Molecular Genetics
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bor|@@@te|pe @end|ng |rom utoronto@c@  Sat Oct 17 13:00:21 2020
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Sat, 17 Oct 2020 11:00:21 +0000
Subject: [R] ??? is to nls() as abline() is to lm() ?
In-Reply-To: <df0acb85-3e76-d3d8-5384-c4c8b583f390@gmail.com>
References: <8B8EDD48-BECD-419A-AB3A-DC5EC41FD896@utoronto.ca>
 <df0acb85-3e76-d3d8-5384-c4c8b583f390@gmail.com>
Message-ID: <6B4BA26A-98AF-4E57-8C8C-170129984928@utoronto.ca>

I had tried predict() but overlooked that it is picky about needing the data in a list-like object. When I passed a vector it just returned the predictions on the original values. Passing a list (as in the help example... of course) does the trick.

This works - and does exactly what I had hoped for:

curve(predict(myFit, list(x = x)), col = "#FF000055", lwd = 2, add = TRUE)


Very grateful!
Boris







> On 2020-10-17, at 20:26, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> 
> I haven't followed your example closely, but can't you use the predict()
> method for this?  To draw a curve, the function that will be used in
> curve() sets up a newdata dataframe and passes it to predict(fit,
> newdata= ...) to get predictions at those locations.
> 
> Duncan Murdoch
> 
> On 17/10/2020 5:27 a.m., Boris Steipe wrote:
>> I'm drawing a fitted normal distribution over a histogram. The use case is trivial (fitting normal distributions on densities) but I want to extend it to other fitting scenarios. What has stumped me so far is how to take the list that is returned by nls() and use it for curve(). I realize that I can easily do all of this with a few intermediate steps for any specific case. But I had expected that it should be possible to get a parametrized(!) function that computes predictions as one of the returned objects.
>> 
>> I.e. I want a function that works with the model of nls() like abline() works() for lm().
>> 
>> I know that I can just pass parameters from coef(fit). But in the general case, I don't know how many parameters there are. I thought since nls() is able to put together the parametrized function internally, that function would be passed into the results object. But that doesn't seem to be the case. And though I could hack this together with parsing fit$m$formula to get() the formula from the environment and then paste() the parameter list in there - that sounds really, really awkward.
>> 
>> So I hope that there's an obvious way that I have overlooked.
>> 
>> Here's sample code to illustrate. :
>> 
>> fitNorm <- function(x, y) {
>>   # fit a normal distribution
>>   # Param:  x  domain
>>   #         y  densities
>>   # Value:     the fit object
>>   F <- function(x, a, mu, sig) {   # some parametrized function
>>     return( ( a / (sig*sqrt(2*pi)) ) * exp( (-1/2)*((x-mu)/sig)^2 ) )
>>   }
>> 
>>   mu  <- weighted.mean(x, y)            # estimate starting values
>>   sig <- sd(sample(x, 1000, prob = y, replace = TRUE))
>>   a   <- 1
>> 
>>   fit <- nls(y ~ F(x, a, mu, sig),
>>              start = c(a = a, mu = mu, sig = sig))  # starting values
>>   return(fit)
>> }
>> 
>> # Fit and plot ...:
>> 
>> # Values
>> x <- c(rnorm(5000, 3, 5), rnorm(2000, -5, 7)) # Two normal distributions ...
>> 
>> # Histogram
>> h <- hist(x, freq = FALSE,
>>           breaks = seq(min(x)-2, max(x)+2, by = 1),
>>           col = "#cfd7fa",
>>           main = "", ylab = "density", xlab = "x")
>> # Fit
>> myFit <- fitNorm(h$mids, h$density)
>> 
>> # Now: what I can do is, patch together the model function ...
>> mF <- function(x,
>>                 a   = coef(myFit)["a"],
>>                 mu  = coef(myFit)["mu"],
>>                 sig = coef(myFit)["sig"]){
>>   a / (sig*sqrt(2*pi)) * exp( (-1/2)*((x-mu)/sig)^2 )
>> }
>> # ... and add the curve:
>> curve(mF(x),
>>       from = par("usr")[1], to = par("usr")[2],
>>       col = "#FF000055", lwd = 2, add = TRUE)
>> 
>> 
>> # But what I would like to do is something much more general, like:
>> curve(myFit$func, from = myFit$from, to = myFit$to,
>>       col = "#FF000055", lwd = 2, add = TRUE))
>> 
>> 
>> Thanks for any ideas and strategies.
>> 
>> Cheers,
>> Boris
>> 
>> 
>> 
>> 
>> 
>> 
>> --
>> Boris Steipe MD, PhD
>> University of Toronto
>> Associate Professor, Department of Biochemistry and
>> Department of Molecular Genetics
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 


From r@oknz @end|ng |rom gm@||@com  Sun Oct 18 03:03:02 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Sun, 18 Oct 2020 14:03:02 +1300
Subject: [R] Need help in R code of the functional data .
In-Reply-To: <CAOkWQv22--O9y81Oq8x9Vu0kJ47JWDpF6p+LA0ViRAJockq3sA@mail.gmail.com>
References: <CAOkWQv22--O9y81Oq8x9Vu0kJ47JWDpF6p+LA0ViRAJockq3sA@mail.gmail.com>
Message-ID: <CABcYAdKp3HJ9xybZbVxAe1SQYJJrOC5_gqxPOp0mgKsp4835RA@mail.gmail.com>

I do not understand your question.

Are you talking about "functional data analysis", the statistical
analysis of data where some of the covariates are (samples from)
continuous functions?  There are books and tutorials about doing
that in R.

Are you talking about "functional data structures", as described
in Thomas Mailund's book "Functional Data Structures in R"?

Are you asking a more elementary question, about functions
*being* data values that can be passed as parameters, returned
from functions, stored in variables, and held as elements of
lists?  See Rui Barradas' response for that.

On Sat, 17 Oct 2020 at 04:10, Ablaye Ngalaba <ablayengalaba at gmail.com>
wrote:

> Hello,
> Please, I want to know how the functional data are defined in programming
> code R. If possible an illustrative example of code can help me to
> understand better.
>
>
>
>
>
>                                Yours sincerely.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@heemj@n93 @end|ng |rom y@hoo@com  Sun Oct 18 11:56:44 2020
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Sun, 18 Oct 2020 09:56:44 +0000 (UTC)
Subject: [R] Help in R code
References: <699587015.481246.1603015004529.ref@mail.yahoo.com>
Message-ID: <699587015.481246.1603015004529@mail.yahoo.com>

Good morning,??Please help me to code this code in R.
I working in the multivariate time series data, know my objective is that to one year forecast of the hourly time series data, using first five as a training set and the remaining one year as validation. For this??I transform the the data into functional data through Fourier basis functional, apply functional principle components as dimensional reduction explaining a specific amount of variation? ?, using the corresponding? functional principle components scores. I use the VAR model on those FPCscores for forecasting one day ahead forecast, know my problem is that i choose four Fpc scores which give only four value in a single day, I want the forecast for 24 hours not only 4, and then i want to transform it back to the original functional data. for the understanding i am sharing my code (1) transform of the multivariate time series data in functional data(2) the functional principle components and the corresponding scores(3) I use functional final prediction error for the selection of the parameters on the VAR model(4) Using VAR for the analysis and forecasting .(1)?nb = 23 # number of basis functions for the data? fbf = create.fourier.basis(rangeval=c(0,1), nbasis=nb) # basis for data? args=seq(0,1,length=24)? fdata1=Data2fd(args,y=t(mat),fbf) # functions generated from discretized y(2)?ffpe = fFPE(fdata1, Pmax=10)? d.hat = ffpe[1] #order of the model? p.hat = ffpe[2] #lag of the model
(3) n = ncol(fdata1$coef)? D = nrow(fdata1$coef)? #center the data? mu = mean.fd(fdata1)? data = center.fd(fdata1)? #fPCA? fpca = pca.fd(data,nharm=D)? scores = fpca$scores[,1:d.hat](4)?# to avoid warnings from vars predict function below? ? ? colnames(scores) <- as.character(seq(1:d.hat))? ? ? VAR.pre= predict(VAR(scores, p.hat), n.ahead=1, type="const")$fcst
after this I need help first how to transform this into original Functional data and to obtain the for for each 24 hours (mean one day forecast) and to how to generalize the result for one year.


	[[alternative HTML version deleted]]


From tr@xp|@yer @end|ng |rom gm@||@com  Sun Oct 18 13:37:22 2020
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Sun, 18 Oct 2020 13:37:22 +0200
Subject: [R] Help in R code
In-Reply-To: <699587015.481246.1603015004529@mail.yahoo.com>
References: <699587015.481246.1603015004529.ref@mail.yahoo.com>
 <699587015.481246.1603015004529@mail.yahoo.com>
Message-ID: <CAGAA5bcc2dek-tKxHGDK6OJL9_ThkqtS2rFOo74LJAdqRkTevg@mail.gmail.com>

I think you first should read and understand this:
https://stackoverflow.com/help/minimal-reproducible-example
and
https://stackoverflow.com/help/how-to-ask

On Sun, Oct 18, 2020, 11:57 Faheem Jan via R-help <r-help at r-project.org>
wrote:

> Good morning,  Please help me to code this code in R.
> I working in the multivariate time series data, know my objective is that
> to one year forecast of the hourly time series data, using first five as a
> training set and the remaining one year as validation. For this  I
> transform the the data into functional data through Fourier basis
> functional, apply functional principle components as dimensional reduction
> explaining a specific amount of variation   , using the corresponding
> functional principle components scores. I use the VAR model on those
> FPCscores for forecasting one day ahead forecast, know my problem is that i
> choose four Fpc scores which give only four value in a single day, I want
> the forecast for 24 hours not only 4, and then i want to transform it back
> to the original functional data. for the understanding i am sharing my code
> (1) transform of the multivariate time series data in functional data(2)
> the functional principle components and the corresponding scores(3) I use
> functional final prediction error for the selection of the parameters on
> the VAR model(4) Using VAR for the analysis and forecasting .(1) nb = 23 #
> number of basis functions for the data  fbf =
> create.fourier.basis(rangeval=c(0,1), nbasis=nb) # basis for data
> args=seq(0,1,length=24)  fdata1=Data2fd(args,y=t(mat),fbf) # functions
> generated from discretized y(2) ffpe = fFPE(fdata1, Pmax=10)  d.hat =
> ffpe[1] #order of the model  p.hat = ffpe[2] #lag of the model
> (3) n = ncol(fdata1$coef)  D = nrow(fdata1$coef)  #center the data  mu =
> mean.fd(fdata1)  data = center.fd(fdata1)  #fPCA  fpca =
> pca.fd(data,nharm=D)  scores = fpca$scores[,1:d.hat](4) # to avoid warnings
> from vars predict function below      colnames(scores) <-
> as.character(seq(1:d.hat))      VAR.pre= predict(VAR(scores, p.hat),
> n.ahead=1, type="const")$fcst
> after this I need help first how to transform this into original
> Functional data and to obtain the for for each 24 hours (mean one day
> forecast) and to how to generalize the result for one year.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@demo@|ey @end|ng |rom protonm@||@com  Mon Oct 19 19:53:21 2020
From: j@demo@|ey @end|ng |rom protonm@||@com (Jade Mosley)
Date: Mon, 19 Oct 2020 17:53:21 +0000
Subject: [R] spec.pgram returns different spectra when fast=TRUE and the
 number of samples is odd
Message-ID: <LogCoA9rC69ULWsk5iRDFBAGh5QE_cDPA3MqYLNhM5idm6L4GmIZsq1e89Z-Re0w7oL-A-o6SUUQf2WYhNad30Ru_QAoSvb5Z1HOHE2Fl9s=@protonmail.com>

Dear all,

This is potentially a bug in spec.pgram, when the number of samples is odd,spec.pgramreturns a different result withfast = TRUE, the example below contains the two varieties with a reference spectrum calculated manually. the number of returned spectra is also larger (50 compared to 49) whenfast = TRUE

x <- rnorm(

99

)
plot(spec.pgram(x, taper =

0

, detrend =

FALSE

, plot =

FALSE

, fast =

FALSE

)$spec, ty =

'l'

)
lines(spec.pgram(x, taper =

0

, detrend =

FALSE

,plot =

FALSE

, fast =

TRUE

)$spec, col =

'red'

)
lines(((abs(fft(x))^

2

)[

2

:

50

])/

99

, col =

'blue'

, lty =

2

)

Best regards
	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Oct 19 22:11:19 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 19 Oct 2020 16:11:19 -0400
Subject: [R] spec.pgram returns different spectra when fast=TRUE and the
 number of samples is odd
In-Reply-To: <LogCoA9rC69ULWsk5iRDFBAGh5QE_cDPA3MqYLNhM5idm6L4GmIZsq1e89Z-Re0w7oL-A-o6SUUQf2WYhNad30Ru_QAoSvb5Z1HOHE2Fl9s=@protonmail.com>
References: <LogCoA9rC69ULWsk5iRDFBAGh5QE_cDPA3MqYLNhM5idm6L4GmIZsq1e89Z-Re0w7oL-A-o6SUUQf2WYhNad30Ru_QAoSvb5Z1HOHE2Fl9s=@protonmail.com>
Message-ID: <19a446d5-e0b7-8ce3-2bda-89059ee02fd5@gmail.com>

Just curious:  did you read the help page to see what the "fast" 
argument does?  If you did, why are you surprised at this result?

Duncan Murdoch

On 19/10/2020 1:53 p.m., Jade Mosley via R-help wrote:
> Dear all,
> 
> This is potentially a bug in spec.pgram, when the number of samples is odd,spec.pgramreturns a different result withfast = TRUE, the example below contains the two varieties with a reference spectrum calculated manually. the number of returned spectra is also larger (50 compared to 49) whenfast = TRUE
> 
> x <- rnorm(
> 
> 99
> 
> )
> plot(spec.pgram(x, taper =
> 
> 0
> 
> , detrend =
> 
> FALSE
> 
> , plot =
> 
> FALSE
> 
> , fast =
> 
> FALSE
> 
> )$spec, ty =
> 
> 'l'
> 
> )
> lines(spec.pgram(x, taper =
> 
> 0
> 
> , detrend =
> 
> FALSE
> 
> ,plot =
> 
> FALSE
> 
> , fast =
> 
> TRUE
> 
> )$spec, col =
> 
> 'red'
> 
> )
> lines(((abs(fft(x))^
> 
> 2
> 
> )[
> 
> 2
> 
> :
> 
> 50
> 
> ])/
> 
> 99
> 
> , col =
> 
> 'blue'
> 
> , lty =
> 
> 2
> 
> )
> 
> Best regards
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From j@zh@o @end|ng |rom ye@h@net  Tue Oct 20 11:13:58 2020
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 20 Oct 2020 17:13:58 +0800
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
Message-ID: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>

Hi there,

I tried to export the names of country to a csv file with write.csv(). 
In the resulted file, ?land was coverted to <c5>land. Is there any way 
could prevent this happening? Thanks!

 > abc
[1] "?land"
 > write.table(abc, file = "")
"x"
"1" "<c5>land"

Best,
Jinsong


From e| @end|ng |rom ||@@e@NA  Tue Oct 20 11:23:43 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Tue, 20 Oct 2020 11:23:43 +0200
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
Message-ID: <0a97d769-48d5-7105-1a09-eb5cf68debc1@lisse.NA>

?file.write()

look for fileEncoding?

el

On 20/10/2020 11:13, Jinsong Zhao wrote:
> Hi there,
> 
> I tried to export the names of country to a csv file with write.csv(). In the resulted file, ?land was coverted to <c5>land. Is there any way could prevent this happening? Thanks!
> 
>> abc
> [1] "?land"
>> write.table(abc, file = "")
> "x"
> "1" "<c5>land"
> 
> Best,
> Jinsong
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist 
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From j@zh@o @end|ng |rom ye@h@net  Tue Oct 20 12:38:47 2020
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 20 Oct 2020 18:38:47 +0800
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <0a97d769-48d5-7105-1a09-eb5cf68debc1@lisse.NA>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
 <0a97d769-48d5-7105-1a09-eb5cf68debc1@lisse.NA>
Message-ID: <442bea36-2b02-d6e9-5c92-d5418678857c@yeah.net>

On 2020/10/20 17:23, Dr Eberhard W Lisse wrote:
> ?file.write()
> 
> look for fileEncoding?
> 
> el
> 

There is no file.write(). I have tried fileEncoding = "utf8" and 
"latin1" in write.csv(). However, it does not have effect. The output is 
is <U+00C5>land or <c5>land.

Best,
Jinsong

> On 20/10/2020 11:13, Jinsong Zhao wrote:
>> Hi there,
>>
>> I tried to export the names of country to a csv file with write.csv(). In the resulted file, ?land was coverted to <c5>land. Is there any way could prevent this happening? Thanks!
>>
>>> abc
>> [1] "?land"
>>> write.table(abc, file = "")
>> "x"
>> "1" "<c5>land"
>>
>> Best,
>> Jinsong
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From e| @end|ng |rom ||@@e@NA  Tue Oct 20 12:45:48 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Tue, 20 Oct 2020 12:45:48 +0200
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <442bea36-2b02-d6e9-5c92-d5418678857c@yeah.net>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
 <0a97d769-48d5-7105-1a09-eb5cf68debc1@lisse.NA>
 <442bea36-2b02-d6e9-5c92-d5418678857c@yeah.net>
Message-ID: <358e1420-b295-5ecc-9c7e-2aca0628ecd9@lisse.NA>

Apologies, 

I meant

?write.table()

el

On 20/10/2020 12:38, Jinsong Zhao wrote:
> On 2020/10/20 17:23, Dr Eberhard W Lisse wrote:
>> ?file.write()
>>
>> look for fileEncoding?
>>
>> el
>>
> 
> There is no file.write().  I have tried fileEncoding = "utf8" and
> "latin1" in write.csv().  However, it does not have effect.  The output
> is is <U+00C5>land or <c5>land.
> 
> Best,
> Jinsong
[...]


-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist 
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From e| @end|ng |rom ||@@e@NA  Tue Oct 20 12:48:29 2020
From: e| @end|ng |rom ||@@e@NA (Dr Eberhard W Lisse)
Date: Tue, 20 Oct 2020 12:48:29 +0200
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <358e1420-b295-5ecc-9c7e-2aca0628ecd9@lisse.NA>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
 <0a97d769-48d5-7105-1a09-eb5cf68debc1@lisse.NA>
 <442bea36-2b02-d6e9-5c92-d5418678857c@yeah.net>
 <358e1420-b295-5ecc-9c7e-2aca0628ecd9@lisse.NA>
Message-ID: <665ea59f-fd63-4183-238d-d59d93dfc88b@lisse.NA>

Perhaps

?readr::write_delim()

el

On 20/10/2020 12:45, Dr Eberhard W Lisse wrote:
> Apologies, 
> 
> I meant
> 
> ?write.table()
> 
> el
> 
> On 20/10/2020 12:38, Jinsong Zhao wrote:
>> On 2020/10/20 17:23, Dr Eberhard W Lisse wrote:
>>> ?file.write()
>>>
>>> look for fileEncoding?
>>>
>>> el
>>>
>>
>> There is no file.write().  I have tried fileEncoding = "utf8" and
>> "latin1" in write.csv().  However, it does not have effect.  The output
>> is is <U+00C5>land or <c5>land.
>>
>> Best,
>> Jinsong
> [...]
> 
> 

-- 
Dr. Eberhard W. Lisse   \         /       Obstetrician & Gynaecologist 
el at lisse.NA             / *      |  Telephone: +264 81 124 6733 (cell)
PO Box 8421 Bachbrecht  \      /  If this email is signed with GPG/PGP
10007, Namibia           ;____/ Sect 20 of Act No. 4 of 2019 may apply


From j@zh@o @end|ng |rom ye@h@net  Tue Oct 20 14:20:34 2020
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 20 Oct 2020 20:20:34 +0800
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
Message-ID: <58778fc8-c1ff-b78d-3096-92e541cebdd3@yeah.net>

Hi there,

Why the same string is displayed in different form?

 > abc[,1]
[1] "?land"       "Afghanistan"
 > abc
          name
1    <c5>land
2 Afghanistan

And more...

 > dput(abc, "aa.txt")
 > dget("aa.txt")
          name
1    <c5>land
2 Afghanistan
 > dget("aa.txt")[,1]
[1] "<c5>land"    "Afghanistan"

Best,
Jinsong

On 2020/10/20 17:13, Jinsong Zhao wrote:
> Hi there,
> 
> I tried to export the names of country to a csv file with write.csv(). 
> In the resulted file, ?land was coverted to <c5>land. Is there any way 
> could prevent this happening? Thanks!
> 
>  > abc
> [1] "?land"
>  > write.table(abc, file = "")
> "x"
> "1" "<c5>land"
> 
> Best,
> Jinsong
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From mon|c@p@|@|ovejoy @end|ng |rom gm@||@com  Tue Oct 20 15:37:15 2020
From: mon|c@p@|@|ovejoy @end|ng |rom gm@||@com (Robert Lovejoy)
Date: Tue, 20 Oct 2020 09:37:15 -0400
Subject: [R] sp:gIntersection warning message about projection
Message-ID: <CABnpDg3q8C7nH+JJnODJOTBdaZOcHDk33aK0so+WanOAj+YOpw@mail.gmail.com>

Hi,

I am using in my workflow gIntersection from sp package. Part of my
relevant sessionInfo is:
R version 4.0.3 (2020-10-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 17763)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] CircStats_0.2-6 boot_1.3-25     MASS_7.3-53     stringr_1.4.0
[5] rgeos_0.5-5     maptools_1.0-2  rgdal_1.5-18    raster_3.3-13
[9] sp_1.4-4


So i am using 2  SpatialLinesDataFrame that are results of previous
computation. I am not sure i can give a viable examples, but maybe this can
be solved without. If not i will figure out how i can give you a workable
example. Or if you know if there are in R already loaded 2 different line
shapefiles with projection then i will see if i can replicate this problem.

So, first file:
 buff
class       : SpatialLinesDataFrame
features    : 1
extent      : 560525.5, 561302.4, 4698908, 4701110  (xmin, xmax, ymin, ymax)
crs         : +proj=utm +zone=16 +datum=WGS84 +units=m +no_defs
variables   : 2
names       : ID, buff_dist
value       :  2,       135

second file:

pln
class       : SpatialLinesDataFrame
features    : 1
extent      : 560615.6, 560705.4, 4698905, 4699180  (xmin, xmax, ymin, ymax)
crs         : +proj=utm +zone=16 +datum=WGS84 +units=m +no_defs
variables   : 2
names       :                x,                y
value       : 560615.564407584, 4698904.71208346

Please observe that both files have identical projections.

p1 <- gIntersection(buff, pln)
Warning message:
In RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, drop_lower_td,
unaryUnion_if_byid_false,  :
  spgeom1 and spgeom2 have different proj4 strings

This warning is baffling since both files have same projection:
crs(buff)
CRS arguments:
 +proj=utm +zone=16 +datum=WGS84 +units=m +no_defs

crs(pln)
CRS arguments:
 +proj=utm +zone=16 +datum=WGS84 +units=m +no_defs

Probably i am doing something wrong but for the life of me i cannot see it
as yet.

Thanks so much for any help, take care,
Monica

	[[alternative HTML version deleted]]


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Oct 20 15:42:27 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 20 Oct 2020 15:42:27 +0200
Subject: [R] How to assign the same levels to a dataframe column?
Message-ID: <CAMk+s2RTY93MaNXX--aiVr=sMBOsVYi-MLEnUxVj4MyR3+8vwA@mail.gmail.com>

Hello,
I have a dataframe df with a column x that has these unique values:
"L" "M" "V" "N" "H". I can assign a factor to it:
```
df$x = as.factor(df$x)
> [1] L M V N H
Levels: H L M N V
```
I now need to get a subset of this dataframe. I could do the same
thing as before on the subset sf, but I would like to avoid the
possibility that not all the values could be present in sf. For
instance, sf could have only the values "M" "V" "N".
How can I assign a given set of value to the subset dataframe?
Now I am getting the error:
```
LEV = as.factor(df$x)
> LEV
[1] L M V N H
Levels: H L M N V
>       sf$x <- LEV
Error in `$<-.data.frame`(`*tmp*`, x, value = c(2L, 2L, 2L, 2L, 2L,  :
  replacement has 7300 rows, data has 117
> LEV = as.factor(unique(df$x))
> LEV
[1] L M V N H
Levels: H L M N V
>       sf$x <- LEV
Error in `$<-.data.frame`(`*tmp*`, Type, value = c(2L, 3L, 5L, 4L, 1L)) :
  replacement has 5 rows, data has 29 # NOTE: here sf was another subset)
```

Thank you
-- 
Best regards,
Luigi


From jrkr|de@u @end|ng |rom gm@||@com  Tue Oct 20 15:56:47 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Tue, 20 Oct 2020 09:56:47 -0400
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <58778fc8-c1ff-b78d-3096-92e541cebdd3@yeah.net>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
 <58778fc8-c1ff-b78d-3096-92e541cebdd3@yeah.net>
Message-ID: <CAKZQJMCvAz4qTVv12C=x5NzGL21COJEoBrOFrYcEsOBXUONHCg@mail.gmail.com>

It looks like an encoding problem.

It works fine for me with R encoding set to UTF-8

Here is part of my sessionInfo() results
[1] LC_CTYPE=en_CA.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_CA.UTF-8        LC_COLLATE=en_CA.UTF-8
 [5] LC_MONETARY=en_CA.UTF-8    LC_MESSAGES=en_CA.UTF-8

I would suggest issuing the command
sessionInfo()
and seeing what your encoding is.



On Tue, 20 Oct 2020 at 08:22, Jinsong Zhao <jszhao at yeah.net> wrote:

> Hi there,
>
> Why the same string is displayed in different form?
>
>  > abc[,1]
> [1] "?land"       "Afghanistan"
>  > abc
>           name
> 1    <c5>land
> 2 Afghanistan
>
> And more...
>
>  > dput(abc, "aa.txt")
>  > dget("aa.txt")
>           name
> 1    <c5>land
> 2 Afghanistan
>  > dget("aa.txt")[,1]
> [1] "<c5>land"    "Afghanistan"
>
> Best,
> Jinsong
>
> On 2020/10/20 17:13, Jinsong Zhao wrote:
> > Hi there,
> >
> > I tried to export the names of country to a csv file with write.csv().
> > In the resulted file, ?land was coverted to <c5>land. Is there any way
> > could prevent this happening? Thanks!
> >
> >  > abc
> > [1] "?land"
> >  > write.table(abc, file = "")
> > "x"
> > "1" "<c5>land"
> >
> > Best,
> > Jinsong
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct 20 16:15:42 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 20 Oct 2020 07:15:42 -0700
Subject: [R] How to assign the same levels to a dataframe column?
In-Reply-To: <CAMk+s2RTY93MaNXX--aiVr=sMBOsVYi-MLEnUxVj4MyR3+8vwA@mail.gmail.com>
References: <CAMk+s2RTY93MaNXX--aiVr=sMBOsVYi-MLEnUxVj4MyR3+8vwA@mail.gmail.com>
Message-ID: <AE854448-290D-4395-AF38-DDC32E7CF556@dcn.davis.ca.us>

Stop using as.factor() and start using factor()? Be explicit about what levels you want and in what order.

As for extracting subsets, use split() and do your subsets on each set of rows with the same level. It will be on you to decide what statistical properties (proportions?) you want to maintain between the full data set and your subset.

On October 20, 2020 6:42:27 AM PDT, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>Hello,
>I have a dataframe df with a column x that has these unique values:
>"L" "M" "V" "N" "H". I can assign a factor to it:
>```
>df$x = as.factor(df$x)
>> [1] L M V N H
>Levels: H L M N V
>```
>I now need to get a subset of this dataframe. I could do the same
>thing as before on the subset sf, but I would like to avoid the
>possibility that not all the values could be present in sf. For
>instance, sf could have only the values "M" "V" "N".
>How can I assign a given set of value to the subset dataframe?
>Now I am getting the error:
>```
>LEV = as.factor(df$x)
>> LEV
>[1] L M V N H
>Levels: H L M N V
>>       sf$x <- LEV
>Error in `$<-.data.frame`(`*tmp*`, x, value = c(2L, 2L, 2L, 2L, 2L,  :
>  replacement has 7300 rows, data has 117
>> LEV = as.factor(unique(df$x))
>> LEV
>[1] L M V N H
>Levels: H L M N V
>>       sf$x <- LEV
>Error in `$<-.data.frame`(`*tmp*`, Type, value = c(2L, 3L, 5L, 4L, 1L))
>:
>replacement has 5 rows, data has 29 # NOTE: here sf was another subset)
>```
>
>Thank you

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct 20 16:28:59 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 20 Oct 2020 10:28:59 -0400
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <58778fc8-c1ff-b78d-3096-92e541cebdd3@yeah.net>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
 <58778fc8-c1ff-b78d-3096-92e541cebdd3@yeah.net>
Message-ID: <c405a120-f19b-37e3-00af-644afef1edcc@gmail.com>

You don't say, but I'd guess you're using Windows.  In your code page, 
the character ? is probably not representable.  At some point in the 
sequence of operations involved in printing the dataframe R puts the 
string into the native encoding, and since that's impossible on your 
system, it substitutes the <c5> instead.  The fact that you can 
sometimes display it is because internally R uses UTF-8 as much as it 
can, and it can represent the character.

One fix for this is to switch from Windows to some other OS.  The others 
all have proper support for UTF-8.

You might have luck changing your Windows code page to one that includes 
the ?, but then there'll be some other characters that are missed.

You should definitely investigate Eberhard's advice, and test non-base 
packages like readr.  They are all written much more recently than the 
base functions, and might have proper support for out-of-code-page 
characters.

Duncan Murdoch

On 20/10/2020 8:20 a.m., Jinsong Zhao wrote:
> Hi there,
> 
> Why the same string is displayed in different form?
> 
>   > abc[,1]
> [1] "?land"       "Afghanistan"
>   > abc
>            name
> 1    <c5>land
> 2 Afghanistan
> 
> And more...
> 
>   > dput(abc, "aa.txt")
>   > dget("aa.txt")
>            name
> 1    <c5>land
> 2 Afghanistan
>   > dget("aa.txt")[,1]
> [1] "<c5>land"    "Afghanistan"
> 
> Best,
> Jinsong
> 
> On 2020/10/20 17:13, Jinsong Zhao wrote:
>> Hi there,
>>
>> I tried to export the names of country to a csv file with write.csv().
>> In the resulted file, ?land was coverted to <c5>land. Is there any way
>> could prevent this happening? Thanks!
>>
>>   > abc
>> [1] "?land"
>>   > write.table(abc, file = "")
>> "x"
>> "1" "<c5>land"
>>
>> Best,
>> Jinsong
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From j@zh@o @end|ng |rom ye@h@net  Tue Oct 20 16:31:40 2020
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Tue, 20 Oct 2020 22:31:40 +0800
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <CAKZQJMCvAz4qTVv12C=x5NzGL21COJEoBrOFrYcEsOBXUONHCg@mail.gmail.com>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
 <58778fc8-c1ff-b78d-3096-92e541cebdd3@yeah.net>
 <CAKZQJMCvAz4qTVv12C=x5NzGL21COJEoBrOFrYcEsOBXUONHCg@mail.gmail.com>
Message-ID: <d6b5dcd9-e8cd-3b18-3536-cf00e46bc811@yeah.net>

Thank you very much for the hint. I tried it on a FreeBSD machine with 
locale set to en_US.UTF-8, it works fine.

However, on my Windows machine,
 > Sys.getlocale()
[1] "LC_COLLATE=Chinese (Simplified)_China.936;LC_CTYPE=Chinese 
(Simplified)_China.936;LC_MONETARY=Chinese 
(Simplified)_China.936;LC_NUMERIC=C;LC_TIME=Chinese (Simplified)_China.936"

It just worked as what I posted.

BTW, I can not understand why a string could be displayed different as 
vector or as data frame.

Best,
Jinsong

On 2020/10/20 21:56, John Kane wrote:
> It looks like an encoding problem.
> 
> It works fine for me with R encoding set to UTF-8
> 
> Here is part of my sessionInfo() results
> [1] LC_CTYPE=en_CA.UTF-8 ? ? ? LC_NUMERIC=C
>  ?[3] LC_TIME=en_CA.UTF-8 ? ? ? ?LC_COLLATE=en_CA.UTF-8
>  ?[5] LC_MONETARY=en_CA.UTF-8 ? ?LC_MESSAGES=en_CA.UTF-8
> 
> I would suggest issuing the command
> sessionInfo()
> and seeing what your encoding is.
> 
> 
> 
> On Tue, 20 Oct 2020 at 08:22, Jinsong Zhao <jszhao at yeah.net 
> <mailto:jszhao at yeah.net>> wrote:
> 
>     Hi there,
> 
>     Why the same string is displayed in different form?
> 
>      ?> abc[,1]
>     [1] "?land"? ? ? ?"Afghanistan"
>      ?> abc
>      ? ? ? ? ? name
>     1? ? <c5>land
>     2 Afghanistan
> 
>     And more...
> 
>      ?> dput(abc, "aa.txt")
>      ?> dget("aa.txt")
>      ? ? ? ? ? name
>     1? ? <c5>land
>     2 Afghanistan
>      ?> dget("aa.txt")[,1]
>     [1] "<c5>land"? ? "Afghanistan"
> 
>     Best,
>     Jinsong
> 
>     On 2020/10/20 17:13, Jinsong Zhao wrote:
>      > Hi there,
>      >
>      > I tried to export the names of country to a csv file with
>     write.csv().
>      > In the resulted file, ?land was coverted to <c5>land. Is there
>     any way
>      > could prevent this happening? Thanks!
>      >
>      >? > abc
>      > [1] "?land"
>      >? > write.table(abc, file = "")
>      > "x"
>      > "1" "<c5>land"
>      >
>      > Best,
>      > Jinsong
>      >
> -- 
> John Kane
> Kingston ON Canada


From bgunter@4567 @end|ng |rom gm@||@com  Tue Oct 20 16:43:09 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 20 Oct 2020 07:43:09 -0700
Subject: [R] sp:gIntersection warning message about projection
In-Reply-To: <CABnpDg3q8C7nH+JJnODJOTBdaZOcHDk33aK0so+WanOAj+YOpw@mail.gmail.com>
References: <CABnpDg3q8C7nH+JJnODJOTBdaZOcHDk33aK0so+WanOAj+YOpw@mail.gmail.com>
Message-ID: <CAGxFJbTYE9=5HNMfzy6FeB=+oso-sBmZus7fzJ=Z0LELZa4wOg@mail.gmail.com>

Probably better asked on the r-sig-geo list, which is specifically for
spatial statistics.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Oct 20, 2020 at 6:38 AM Robert Lovejoy <monicapalalovejoy at gmail.com>
wrote:

> Hi,
>
> I am using in my workflow gIntersection from sp package. Part of my
> relevant sessionInfo is:
> R version 4.0.3 (2020-10-10)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 17763)
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] CircStats_0.2-6 boot_1.3-25     MASS_7.3-53     stringr_1.4.0
> [5] rgeos_0.5-5     maptools_1.0-2  rgdal_1.5-18    raster_3.3-13
> [9] sp_1.4-4
>
>
> So i am using 2  SpatialLinesDataFrame that are results of previous
> computation. I am not sure i can give a viable examples, but maybe this can
> be solved without. If not i will figure out how i can give you a workable
> example. Or if you know if there are in R already loaded 2 different line
> shapefiles with projection then i will see if i can replicate this problem.
>
> So, first file:
>  buff
> class       : SpatialLinesDataFrame
> features    : 1
> extent      : 560525.5, 561302.4, 4698908, 4701110  (xmin, xmax, ymin,
> ymax)
> crs         : +proj=utm +zone=16 +datum=WGS84 +units=m +no_defs
> variables   : 2
> names       : ID, buff_dist
> value       :  2,       135
>
> second file:
>
> pln
> class       : SpatialLinesDataFrame
> features    : 1
> extent      : 560615.6, 560705.4, 4698905, 4699180  (xmin, xmax, ymin,
> ymax)
> crs         : +proj=utm +zone=16 +datum=WGS84 +units=m +no_defs
> variables   : 2
> names       :                x,                y
> value       : 560615.564407584, 4698904.71208346
>
> Please observe that both files have identical projections.
>
> p1 <- gIntersection(buff, pln)
> Warning message:
> In RGEOSBinTopoFunc(spgeom1, spgeom2, byid, id, drop_lower_td,
> unaryUnion_if_byid_false,  :
>   spgeom1 and spgeom2 have different proj4 strings
>
> This warning is baffling since both files have same projection:
> crs(buff)
> CRS arguments:
>  +proj=utm +zone=16 +datum=WGS84 +units=m +no_defs
>
> crs(pln)
> CRS arguments:
>  +proj=utm +zone=16 +datum=WGS84 +units=m +no_defs
>
> Probably i am doing something wrong but for the life of me i cannot see it
> as yet.
>
> Thanks so much for any help, take care,
> Monica
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @end|ng |rom me@com  Tue Oct 20 17:03:45 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Tue, 20 Oct 2020 11:03:45 -0400
Subject: [R] =?utf-8?q?write=2Ecsv_covert_=C3=85land_to_=3Cc5=3Eland?=
In-Reply-To: <c405a120-f19b-37e3-00af-644afef1edcc@gmail.com>
References: <e72f7f23-6320-4ee4-a5c8-89d92d2d0a4c@yeah.net>
 <58778fc8-c1ff-b78d-3096-92e541cebdd3@yeah.net>
 <c405a120-f19b-37e3-00af-644afef1edcc@gmail.com>
Message-ID: <C560D1E5-0115-4E98-B030-4271FB808AF2@me.com>

Hi,

One additional option that you might want to look at is to use ?writeLines with 'useBytes = TRUE', where the default is FALSE.

Windows, as Duncan notes, is problematic with extended encodings, and you can actually get conflicted encoding of text, based upon what is used within R, versus the local system encoding set by the OS.

There is an added step of complexity with writeLines(), of having to pre-format the line(s) to be output to conform to CSV required formatting. So you would need to paste() together each output line first using field delimiters, double quotes, etc. prior to output. 

Essentially, mimic the default formatting of write.csv(), on a line by line basis, and then output the resulting object to a text file, with a single call to writeLines().

Regards,

Marc Schwartz


> On Oct 20, 2020, at 10:28 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> You don't say, but I'd guess you're using Windows.  In your code page, the character ? is probably not representable.  At some point in the sequence of operations involved in printing the dataframe R puts the string into the native encoding, and since that's impossible on your system, it substitutes the <c5> instead.  The fact that you can sometimes display it is because internally R uses UTF-8 as much as it can, and it can represent the character.
> 
> One fix for this is to switch from Windows to some other OS.  The others all have proper support for UTF-8.
> 
> You might have luck changing your Windows code page to one that includes the ?, but then there'll be some other characters that are missed.
> 
> You should definitely investigate Eberhard's advice, and test non-base packages like readr.  They are all written much more recently than the base functions, and might have proper support for out-of-code-page characters.
> 
> Duncan Murdoch
> 
> On 20/10/2020 8:20 a.m., Jinsong Zhao wrote:
>> Hi there,
>> Why the same string is displayed in different form?
>>  > abc[,1]
>> [1] "?land"       "Afghanistan"
>>  > abc
>>           name
>> 1    <c5>land
>> 2 Afghanistan
>> And more...
>>  > dput(abc, "aa.txt")
>>  > dget("aa.txt")
>>           name
>> 1    <c5>land
>> 2 Afghanistan
>>  > dget("aa.txt")[,1]
>> [1] "<c5>land"    "Afghanistan"
>> Best,
>> Jinsong
>> On 2020/10/20 17:13, Jinsong Zhao wrote:
>>> Hi there,
>>> 
>>> I tried to export the names of country to a csv file with write.csv().
>>> In the resulted file, ?land was coverted to <c5>land. Is there any way
>>> could prevent this happening? Thanks!
>>> 
>>>  > abc
>>> [1] "?land"
>>>  > write.table(abc, file = "")
>>> "x"
>>> "1" "<c5>land"
>>> 
>>> Best,
>>> Jinsong


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Oct 20 21:43:53 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 20 Oct 2020 21:43:53 +0200
Subject: [R] How to assign the same levels to a dataframe column?
In-Reply-To: <AE854448-290D-4395-AF38-DDC32E7CF556@dcn.davis.ca.us>
References: <CAMk+s2RTY93MaNXX--aiVr=sMBOsVYi-MLEnUxVj4MyR3+8vwA@mail.gmail.com>
 <AE854448-290D-4395-AF38-DDC32E7CF556@dcn.davis.ca.us>
Message-ID: <CAMk+s2QQYf71QYPRavVRfN-GZStGLKii7f4GoJCuvMYsK2iydQ@mail.gmail.com>

Thanks, I will do that.

On Tue, Oct 20, 2020 at 4:15 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Stop using as.factor() and start using factor()? Be explicit about what levels you want and in what order.
>
> As for extracting subsets, use split() and do your subsets on each set of rows with the same level. It will be on you to decide what statistical properties (proportions?) you want to maintain between the full data set and your subset.
>
> On October 20, 2020 6:42:27 AM PDT, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> >Hello,
> >I have a dataframe df with a column x that has these unique values:
> >"L" "M" "V" "N" "H". I can assign a factor to it:
> >```
> >df$x = as.factor(df$x)
> >> [1] L M V N H
> >Levels: H L M N V
> >```
> >I now need to get a subset of this dataframe. I could do the same
> >thing as before on the subset sf, but I would like to avoid the
> >possibility that not all the values could be present in sf. For
> >instance, sf could have only the values "M" "V" "N".
> >How can I assign a given set of value to the subset dataframe?
> >Now I am getting the error:
> >```
> >LEV = as.factor(df$x)
> >> LEV
> >[1] L M V N H
> >Levels: H L M N V
> >>       sf$x <- LEV
> >Error in `$<-.data.frame`(`*tmp*`, x, value = c(2L, 2L, 2L, 2L, 2L,  :
> >  replacement has 7300 rows, data has 117
> >> LEV = as.factor(unique(df$x))
> >> LEV
> >[1] L M V N H
> >Levels: H L M N V
> >>       sf$x <- LEV
> >Error in `$<-.data.frame`(`*tmp*`, Type, value = c(2L, 3L, 5L, 4L, 1L))
> >:
> >replacement has 5 rows, data has 29 # NOTE: here sf was another subset)
> >```
> >
> >Thank you
>
> --
> Sent from my phone. Please excuse my brevity.



-- 
Best regards,
Luigi


From tcmu|g@| @end|ng |rom gm@||@com  Wed Oct 21 09:02:40 2020
From: tcmu|g@| @end|ng |rom gm@||@com (Charles Thuo)
Date: Wed, 21 Oct 2020 10:02:40 +0300
Subject: [R] Fitting Mixed Distributions in the fitdistrplus package
Message-ID: <CAAJc=rOu8TCTt-0nDq18gct84y4hy9if3yU2-WJT4bNaENuPEw@mail.gmail.com>

Dear Sirs,

The below listed code fits a gamma and a pareto distribution to a data set
danishuni. However the distributions are not appropriate to fit both  tails
of the data set hence a mixed distribution is required  which has ben
defined as "mixgampar"
as shown below.

library(fitdistrplus)
x<- danishuni$Loss
 fgam<- fitdist(x,"gamma",lower=0)
 fpar<- fitdist(x,"pareto",start = list(shape=2,scale=2),lower=0)
fmixgampar<- fitdist(x,"mixgampar",start =
list(prob=1/2,nu=1,lambda=1,alpha=1,theta=1),lower=0)
Error in fitdist(x, "mixgampar", start = list(prob = 1/2, nu = 1, lambda =
1,  :

 The  dmixgampar  function must be defined

Kindly assist to define the dmixgampar

Charkes

	[[alternative HTML version deleted]]


From |@p@nyo|com @end|ng |rom gm@||@com  Wed Oct 21 15:37:23 2020
From: |@p@nyo|com @end|ng |rom gm@||@com (=?UTF-8?Q?Engin_Y=C4=B1lmaz?=)
Date: Wed, 21 Oct 2020 16:37:23 +0300
Subject: [R] AES spesification
Message-ID: <CAMUSX8qUddfST1j-66XapFaGb0XKHUEZgOxsNO=9eF01fWcxjg@mail.gmail.com>

Dear

I use dataset , as called "mpg"

This is code

ggplot(data=mpg)+ geom_point(mapping = aes(x=displ, y=hwy, colour=year))

But I would like to see only "year of 1999" in this relationship between x
and y variables

How could I change the code in this direction?

I found the following code

library(dplyr)year_1999 <- filter(mpg, year=="1999")ggplot(year_1999,
aes(x=displ, y=hwy)) + geom_point()


I found other code

ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +

    geom_point(

      data = filter(mpg, year == "1999")

    )


Is there more compact code ?


sincerely
Engin YILMAZ

	[[alternative HTML version deleted]]


From R@H@un@ch||d @end|ng |rom |k|@mpg@de  Wed Oct 21 16:02:45 2020
From: R@H@un@ch||d @end|ng |rom |k|@mpg@de (Dr. Robin Haunschild)
Date: Wed, 21 Oct 2020 16:02:45 +0200
Subject: [R] AES spesification
In-Reply-To: <CAMUSX8qUddfST1j-66XapFaGb0XKHUEZgOxsNO=9eF01fWcxjg@mail.gmail.com>
References: <CAMUSX8qUddfST1j-66XapFaGb0XKHUEZgOxsNO=9eF01fWcxjg@mail.gmail.com>
Message-ID: <c1192e68-7cc7-1ae9-e090-2059e6df69bd@fkf.mpg.de>

Hi,

what about this one?

ggplot(data=mpg[mpg$year==1999,], aes(x=displ, y=hwy))+ geom_point()

Best, Robin


On 10/21/20 3:37 PM, Engin Y?lmaz wrote:
> Dear
> 
> I use dataset , as called "mpg"
> 
> This is code
> 
> ggplot(data=mpg)+ geom_point(mapping = aes(x=displ, y=hwy, colour=year))
> 
> But I would like to see only "year of 1999" in this relationship between x
> and y variables
> 
> How could I change the code in this direction?
> 
> I found the following code
> 
> library(dplyr)year_1999 <- filter(mpg, year=="1999")ggplot(year_1999,
> aes(x=displ, y=hwy)) + geom_point()
> 
> 
> I found other code
> 
> ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
> 
>     geom_point(
> 
>       data = filter(mpg, year == "1999")
> 
>     )
> 
> 
> Is there more compact code ?
> 
> 
> sincerely
> Engin YILMAZ
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


-- 
Dr. Robin Haunschild
Max Planck Institute for Solid State Research
Heisenbergstr. 1
D-70569 Stuttgart (Germany)
phone: +49 (0) 711-689-1285
fax:   +49 (0) 711-689-1292
email: R.Haunschild at fkf.mpg.de
http://www.fkf.mpg.de/ivs
Publons: https://publons.com/researcher/2845202/robin-haunschild/
GS: https://scholar.google.de/citations?user=kDfateQAAAAJ&hl=de&oi=ao


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Oct 21 16:24:22 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 21 Oct 2020 15:24:22 +0100
Subject: [R] AES spesification
In-Reply-To: <CAMUSX8qUddfST1j-66XapFaGb0XKHUEZgOxsNO=9eF01fWcxjg@mail.gmail.com>
References: <CAMUSX8qUddfST1j-66XapFaGb0XKHUEZgOxsNO=9eF01fWcxjg@mail.gmail.com>
Message-ID: <97c3c207-ed2e-95df-5c9a-1f01598bb92b@sapo.pt>

Hello,

You can subset the data argument.
And if you are plotting one year only, there's no point in color = year.

ggplot(subset(mpg, year == 1999), aes(displ, hwy)) +
   geom_point()


If you are loading package dplyr, you can filter directly to ggplot:


library(dplyr)

mpg %>%
   filter(year == 1999) %>%
   ggplot(aes(displ, hwy)) +
   geom_point()


Hope this helps,

Rui Barradas


?s 14:37 de 21/10/20, Engin Y?lmaz escreveu:
> Dear
> 
> I use dataset , as called "mpg"
> 
> This is code
> 
> ggplot(data=mpg)+ geom_point(mapping = aes(x=displ, y=hwy, colour=year))
> 
> But I would like to see only "year of 1999" in this relationship between x
> and y variables
> 
> How could I change the code in this direction?
> 
> I found the following code
> 
> library(dplyr)year_1999 <- filter(mpg, year=="1999")ggplot(year_1999,
> aes(x=displ, y=hwy)) + geom_point()
> 
> 
> I found other code
> 
> ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
> 
>      geom_point(
> 
>        data = filter(mpg, year == "1999")
> 
>      )
> 
> 
> Is there more compact code ?
> 
> 
> sincerely
> Engin YILMAZ
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Oct 21 23:15:22 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Wed, 21 Oct 2020 16:15:22 -0500
Subject: [R] how do I remove entries in data frame from a vector
Message-ID: <CAF9-5jPwYGCERotKvGnq3u94B0uuYaReKjS7OG2KAU=xw2NmPw@mail.gmail.com>

Hello,

I have a data frame with one column:

> remove

                                V1

1 ABAFT_g_4RWG569_BI_SNP_A10_35096
2 ABAFT_g_4RWG569_BI_SNP_B12_35130
3 ABAFT_g_4RWG569_BI_SNP_E09_35088
4 ABAFT_g_4RWG569_BI_SNP_E12_35136
5 ABAFT_g_4RWG569_BI_SNP_F11_35122
6 ABAFT_g_4RWG569_BI_SNP_F12_35138
7 ABAFT_g_4RWG569_BI_SNP_G07_35060
8 ABAFT_g_4RWG569_BI_SNP_G12_35140

I want to remove these 8 entries from remove data frame from this
vector that looks like this:

> head(celFiles)

[1] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A01_34952.CEL"
[2] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A02_34968.CEL"

[3] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A03_34984.CEL"

[4] "GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A04_35000.CEL"

[5] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A05_35016.CEL"

[6] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A06_35032.CEL"
...

I tried doing this:

b= celFiles[!basename(celFiles) %in% as.character(remove$V1)]

but none of the 8th entries in "remove" data frame have been removed.

Please advise,
Ana


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Oct 21 23:41:07 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 21 Oct 2020 22:41:07 +0100
Subject: [R] how do I remove entries in data frame from a vector
In-Reply-To: <CAF9-5jPwYGCERotKvGnq3u94B0uuYaReKjS7OG2KAU=xw2NmPw@mail.gmail.com>
References: <CAF9-5jPwYGCERotKvGnq3u94B0uuYaReKjS7OG2KAU=xw2NmPw@mail.gmail.com>
Message-ID: <9c1cf142-89ab-d23e-67aa-65c8b1c98d87@sapo.pt>

Hello,

This is probably because basename keeps the file extension, try instead


filename <- sub("(^[^\\.]*)\\..+$", "\\1", basename(celFiles))
celFiles[!filename %in% as.character(remove$V1)]


Hope this helps,

Rui Barradas

?s 22:15 de 21/10/20, Ana Marija escreveu:
> Hello,
> 
> I have a data frame with one column:
> 
>> remove
> 
>                                  V1
> 
> 1 ABAFT_g_4RWG569_BI_SNP_A10_35096
> 2 ABAFT_g_4RWG569_BI_SNP_B12_35130
> 3 ABAFT_g_4RWG569_BI_SNP_E09_35088
> 4 ABAFT_g_4RWG569_BI_SNP_E12_35136
> 5 ABAFT_g_4RWG569_BI_SNP_F11_35122
> 6 ABAFT_g_4RWG569_BI_SNP_F12_35138
> 7 ABAFT_g_4RWG569_BI_SNP_G07_35060
> 8 ABAFT_g_4RWG569_BI_SNP_G12_35140
> 
> I want to remove these 8 entries from remove data frame from this
> vector that looks like this:
> 
>> head(celFiles)
> 
> [1] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A01_34952.CEL"
> [2] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A02_34968.CEL"
> 
> [3] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A03_34984.CEL"
> 
> [4] "GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A04_35000.CEL"
> 
> [5] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A05_35016.CEL"
> 
> [6] "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A06_35032.CEL"
> ...
> 
> I tried doing this:
> 
> b= celFiles[!basename(celFiles) %in% as.character(remove$V1)]
> 
> but none of the 8th entries in "remove" data frame have been removed.
> 
> Please advise,
> Ana
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Oct 21 23:47:23 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 21 Oct 2020 22:47:23 +0100
Subject: [R] how do I remove entries in data frame from a vector
In-Reply-To: <9c1cf142-89ab-d23e-67aa-65c8b1c98d87@sapo.pt>
References: <CAF9-5jPwYGCERotKvGnq3u94B0uuYaReKjS7OG2KAU=xw2NmPw@mail.gmail.com>
 <9c1cf142-89ab-d23e-67aa-65c8b1c98d87@sapo.pt>
Message-ID: <95780b45-ae8b-cffe-b7c8-2b0741d5d697@sapo.pt>

Hello,

To remove the file extension it's much easier to use base R


filename <- tools::file_path_sans_ext(basename(celFiles))


Hope this helps,

Rui Barradas

?s 22:41 de 21/10/20, Rui Barradas escreveu:
> Hello,
> 
> This is probably because basename keeps the file extension, try instead
> 
> 
> filename <- sub("(^[^\\.]*)\\..+$", "\\1", basename(celFiles))
> celFiles[!filename %in% as.character(remove$V1)]
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 22:15 de 21/10/20, Ana Marija escreveu:
>> Hello,
>>
>> I have a data frame with one column:
>>
>>> remove
>>
>> ???????????????????????????????? V1
>>
>> 1 ABAFT_g_4RWG569_BI_SNP_A10_35096
>> 2 ABAFT_g_4RWG569_BI_SNP_B12_35130
>> 3 ABAFT_g_4RWG569_BI_SNP_E09_35088
>> 4 ABAFT_g_4RWG569_BI_SNP_E12_35136
>> 5 ABAFT_g_4RWG569_BI_SNP_F11_35122
>> 6 ABAFT_g_4RWG569_BI_SNP_F12_35138
>> 7 ABAFT_g_4RWG569_BI_SNP_G07_35060
>> 8 ABAFT_g_4RWG569_BI_SNP_G12_35140
>>
>> I want to remove these 8 entries from remove data frame from this
>> vector that looks like this:
>>
>>> head(celFiles)
>>
>> [1] 
>> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A01_34952.CEL" 
>>
>> [2] 
>> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A02_34968.CEL" 
>>
>>
>> [3] 
>> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A03_34984.CEL" 
>>
>>
>> [4] 
>> "GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A04_35000.CEL" 
>>
>>
>> [5] 
>> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A05_35016.CEL" 
>>
>>
>> [6] 
>> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A06_35032.CEL" 
>>
>> ...
>>
>> I tried doing this:
>>
>> b= celFiles[!basename(celFiles) %in% as.character(remove$V1)]
>>
>> but none of the 8th entries in "remove" data frame have been removed.
>>
>> Please advise,
>> Ana
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Wed Oct 21 23:57:00 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Wed, 21 Oct 2020 16:57:00 -0500
Subject: [R] how do I remove entries in data frame from a vector
In-Reply-To: <95780b45-ae8b-cffe-b7c8-2b0741d5d697@sapo.pt>
References: <CAF9-5jPwYGCERotKvGnq3u94B0uuYaReKjS7OG2KAU=xw2NmPw@mail.gmail.com>
 <9c1cf142-89ab-d23e-67aa-65c8b1c98d87@sapo.pt>
 <95780b45-ae8b-cffe-b7c8-2b0741d5d697@sapo.pt>
Message-ID: <CAF9-5jMjQqJwDxrmk9idK87BdxT3bkAq1dCJsgiGUbERgN4Phw@mail.gmail.com>

Thank you so much!

On Wed, Oct 21, 2020 at 4:47 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> Hello,
>
> To remove the file extension it's much easier to use base R
>
>
> filename <- tools::file_path_sans_ext(basename(celFiles))
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 22:41 de 21/10/20, Rui Barradas escreveu:
> > Hello,
> >
> > This is probably because basename keeps the file extension, try instead
> >
> >
> > filename <- sub("(^[^\\.]*)\\..+$", "\\1", basename(celFiles))
> > celFiles[!filename %in% as.character(remove$V1)]
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> > ?s 22:15 de 21/10/20, Ana Marija escreveu:
> >> Hello,
> >>
> >> I have a data frame with one column:
> >>
> >>> remove
> >>
> >>                                  V1
> >>
> >> 1 ABAFT_g_4RWG569_BI_SNP_A10_35096
> >> 2 ABAFT_g_4RWG569_BI_SNP_B12_35130
> >> 3 ABAFT_g_4RWG569_BI_SNP_E09_35088
> >> 4 ABAFT_g_4RWG569_BI_SNP_E12_35136
> >> 5 ABAFT_g_4RWG569_BI_SNP_F11_35122
> >> 6 ABAFT_g_4RWG569_BI_SNP_F12_35138
> >> 7 ABAFT_g_4RWG569_BI_SNP_G07_35060
> >> 8 ABAFT_g_4RWG569_BI_SNP_G12_35140
> >>
> >> I want to remove these 8 entries from remove data frame from this
> >> vector that looks like this:
> >>
> >>> head(celFiles)
> >>
> >> [1]
> >> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A01_34952.CEL"
> >>
> >> [2]
> >> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A02_34968.CEL"
> >>
> >>
> >> [3]
> >> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A03_34984.CEL"
> >>
> >>
> >> [4]
> >> "GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A04_35000.CEL"
> >>
> >>
> >> [5]
> >> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A05_35016.CEL"
> >>
> >>
> >> [6]
> >> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A06_35032.CEL"
> >>
> >> ...
> >>
> >> I tried doing this:
> >>
> >> b= celFiles[!basename(celFiles) %in% as.character(remove$V1)]
> >>
> >> but none of the 8th entries in "remove" data frame have been removed.
> >>
> >> Please advise,
> >> Ana
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Oct 22 00:46:24 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 22 Oct 2020 11:46:24 +1300
Subject: [R] how do I remove entries in data frame from a vector
In-Reply-To: <CAF9-5jPwYGCERotKvGnq3u94B0uuYaReKjS7OG2KAU=xw2NmPw@mail.gmail.com>
References: <CAF9-5jPwYGCERotKvGnq3u94B0uuYaReKjS7OG2KAU=xw2NmPw@mail.gmail.com>
Message-ID: <20201022114624.6a12ed31@rolf-Latitude-E7470>


On Wed, 21 Oct 2020 16:15:22 -0500
Ana Marija <sokovic.anamarija at gmail.com> wrote:

> Hello,
> 
> I have a data frame with one column:
> 
> > remove
> 
>                                 V1
> 
> 1 ABAFT_g_4RWG569_BI_SNP_A10_35096
> 2 ABAFT_g_4RWG569_BI_SNP_B12_35130
> 3 ABAFT_g_4RWG569_BI_SNP_E09_35088
> 4 ABAFT_g_4RWG569_BI_SNP_E12_35136
> 5 ABAFT_g_4RWG569_BI_SNP_F11_35122
> 6 ABAFT_g_4RWG569_BI_SNP_F12_35138
> 7 ABAFT_g_4RWG569_BI_SNP_G07_35060
> 8 ABAFT_g_4RWG569_BI_SNP_G12_35140
> 
> I want to remove these 8 entries from remove data frame from this
> vector that looks like this:
> 
> > head(celFiles)
> 
> [1]
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A01_34952.CEL"
> [2]
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A02_34968.CEL"
> 
> [3]
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A03_34984.CEL"
> 
> [4]
> "GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A04_35000.CEL"
> 
> [5]
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A05_35016.CEL"
> 
> [6]
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A06_35032.CEL"
> ...
> 
> I tried doing this:
> 
> b= celFiles[!basename(celFiles) %in% as.character(remove$V1)]
> 
> but none of the 8th entries in "remove" data frame have been removed.
> 
> Please advise,
> Ana

I would advise you to *look* at basename(celFiles)!!!

The entries end in ".CEL"; the names in remove$V1 do not.  So %in%
finds no matches.  Perhaps:

    b <- celFiles[!basename(celFiles) %in%
                 paste0(as.character(remove$V1),".CEL")]

Note that, for the data that you have presented, none of the entries of
celFiles "match up" with "remove" so it is *still* the case that (for
the data shown) none of the entries will be removed.  So your example
was bad.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com  Thu Oct 22 01:27:04 2020
From: @okov|c@@n@m@r|j@ @end|ng |rom gm@||@com (Ana Marija)
Date: Wed, 21 Oct 2020 18:27:04 -0500
Subject: [R] how do I remove entries in data frame from a vector
In-Reply-To: <20201022114624.6a12ed31@rolf-Latitude-E7470>
References: <CAF9-5jPwYGCERotKvGnq3u94B0uuYaReKjS7OG2KAU=xw2NmPw@mail.gmail.com>
 <20201022114624.6a12ed31@rolf-Latitude-E7470>
Message-ID: <CAF9-5jOWLesyNNSerGNMhA_Q3ESxJY8VtxWo6-pvJDYZUzmy5Q@mail.gmail.com>

Makes sense, thank you!

On Wed, 21 Oct 2020 at 17:46, Rolf Turner <r.turner at auckland.ac.nz> wrote:

>
> On Wed, 21 Oct 2020 16:15:22 -0500
> Ana Marija <sokovic.anamarija at gmail.com> wrote:
>
> > Hello,
> >
> > I have a data frame with one column:
> >
> > > remove
> >
> >                                 V1
> >
> > 1 ABAFT_g_4RWG569_BI_SNP_A10_35096
> > 2 ABAFT_g_4RWG569_BI_SNP_B12_35130
> > 3 ABAFT_g_4RWG569_BI_SNP_E09_35088
> > 4 ABAFT_g_4RWG569_BI_SNP_E12_35136
> > 5 ABAFT_g_4RWG569_BI_SNP_F11_35122
> > 6 ABAFT_g_4RWG569_BI_SNP_F12_35138
> > 7 ABAFT_g_4RWG569_BI_SNP_G07_35060
> > 8 ABAFT_g_4RWG569_BI_SNP_G12_35140
> >
> > I want to remove these 8 entries from remove data frame from this
> > vector that looks like this:
> >
> > > head(celFiles)
> >
> > [1]
> >
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A01_34952.CEL"
> > [2]
> >
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A02_34968.CEL"
> >
> > [3]
> >
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A03_34984.CEL"
> >
> > [4]
> >
> "GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A04_35000.CEL"
> >
> > [5]
> >
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A05_35016.CEL"
> >
> > [6]
> >
> "/GOKIND/75327/PhenoGenotypeFiles/RootStudyConsentSet_phs000018.GAIN_GoKinD.v2.p1.c1.DS-T1DCR-IRB/GenotypeFiles/ABAFT_g_4RWG569_BI_SNP_A06_35032.CEL"
> > ...
> >
> > I tried doing this:
> >
> > b= celFiles[!basename(celFiles) %in% as.character(remove$V1)]
> >
> > but none of the 8th entries in "remove" data frame have been removed.
> >
> > Please advise,
> > Ana
>
> I would advise you to *look* at basename(celFiles)!!!
>
> The entries end in ".CEL"; the names in remove$V1 do not.  So %in%
> finds no matches.  Perhaps:
>
>     b <- celFiles[!basename(celFiles) %in%
>                  paste0(as.character(remove$V1),".CEL")]
>
> Note that, for the data that you have presented, none of the entries of
> celFiles "match up" with "remove" so it is *still* the case that (for
> the data shown) none of the entries will be removed.  So your example
> was bad.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
>

	[[alternative HTML version deleted]]


From @purd|e@@ @end|ng |rom gm@||@com  Thu Oct 22 08:18:00 2020
From: @purd|e@@ @end|ng |rom gm@||@com (=?UTF-8?B?YUJCeSBTcHVyZGxlLCDijbotTWFsZQ==?=)
Date: Thu, 22 Oct 2020 19:18:00 +1300
Subject: [R] Fitting Mixed Distributions in the fitdistrplus package
In-Reply-To: <CAAJc=rOu8TCTt-0nDq18gct84y4hy9if3yU2-WJT4bNaENuPEw@mail.gmail.com>
References: <CAAJc=rOu8TCTt-0nDq18gct84y4hy9if3yU2-WJT4bNaENuPEw@mail.gmail.com>
Message-ID: <CAB8pepzStXGHLzb_oth6W=WOD+LE6kpSou0MpqfER3zvuGVy5A@mail.gmail.com>

dmixgampar <- function (x, param1, param2, ...)
{
        #compute density at x
        <your code>
}


On Wed, Oct 21, 2020 at 8:03 PM Charles Thuo <tcmuigai at gmail.com> wrote:
>
> Dear Sirs,
>
> The below listed code fits a gamma and a pareto distribution to a data set
> danishuni. However the distributions are not appropriate to fit both  tails
> of the data set hence a mixed distribution is required  which has ben
> defined as "mixgampar"
> as shown below.
>
> library(fitdistrplus)
> x<- danishuni$Loss
>  fgam<- fitdist(x,"gamma",lower=0)
>  fpar<- fitdist(x,"pareto",start = list(shape=2,scale=2),lower=0)
> fmixgampar<- fitdist(x,"mixgampar",start =
> list(prob=1/2,nu=1,lambda=1,alpha=1,theta=1),lower=0)
> Error in fitdist(x, "mixgampar", start = list(prob = 1/2, nu = 1, lambda =
> 1,  :
>
>  The  dmixgampar  function must be defined
>
> Kindly assist to define the dmixgampar
>
> Charkes
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From b@||ntr@d|c@ @end|ng |rom gm@||@com  Wed Oct 21 14:45:47 2020
From: b@||ntr@d|c@ @end|ng |rom gm@||@com (Balint Radics)
Date: Wed, 21 Oct 2020 14:45:47 +0200
Subject: [R] 3d plot of earth with cut
Message-ID: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>

Hello,

Could someone suggest a package/way to make a 3D raster plot of the Earth
(with continent boundaries), and then make a "cut" or "slice" of it such
that one can also visualize some scalar quantity as a function of the
Radius/Depth across that given slice ?

Formally, I would have a given, fixed longitude, and a list of vectors
{latitude, radius, Value}
that would show the distribution of the quantity "Value" at various depths
and latitudes in 3D.

Thanks a lot in advance,
Balint

	[[alternative HTML version deleted]]


From j@@j|k@n @end|ng |rom gm@||@com  Thu Oct 22 09:23:29 2020
From: j@@j|k@n @end|ng |rom gm@||@com (=?UTF-8?B?5aWI6Imv55yM5aWI6Imv5biC?=)
Date: Thu, 22 Oct 2020 16:23:29 +0900
Subject: [R] Function of "matrix"
Message-ID: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>

Dear R project team

I used the function of "matrix" as follows:
matrix(c(1:3030), 10.1/0.1)
However, in the function, matrix, 10.1/0.1 was regarded as 100 not as 101.
Therefore, a warning message appeared.
On the other hand, matrix(c(1:3030), 101) or matrix(c(1:3030), 10.1*10) was
OK. Of course, simply, 10.1/0.1 was successfully calculated. However,
In the "matrix" environment, 10.1/0.1 was calculated as 100.

Would you give me some answers?

Sincerely

Kazuki Sakura

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Oct 22 20:56:24 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 22 Oct 2020 11:56:24 -0700
Subject: [R] 3d plot of earth with cut
In-Reply-To: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
Message-ID: <CAGxFJbS1nC_whzCGf5xvkjcOuX9tof0HWQS+-rm7=u9X01NrEg@mail.gmail.com>

1. Have you looked here:
https://cran.r-project.org/web/views/Spatial.html
(I assume you have done some web searches on possible terms like "3D Earth
Data R" or whatever)

2. You might try posting on the r-sig-geo list rather than here, where
relative expertise may more likely be available.

Cheers,

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Oct 22, 2020 at 11:41 AM Balint Radics <balintradics at gmail.com>
wrote:

> Hello,
>
> Could someone suggest a package/way to make a 3D raster plot of the Earth
> (with continent boundaries), and then make a "cut" or "slice" of it such
> that one can also visualize some scalar quantity as a function of the
> Radius/Depth across that given slice ?
>
> Formally, I would have a given, fixed longitude, and a list of vectors
> {latitude, radius, Value}
> that would show the distribution of the quantity "Value" at various depths
> and latitudes in 3D.
>
> Thanks a lot in advance,
> Balint
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Oct 22 21:04:52 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 22 Oct 2020 12:04:52 -0700
Subject: [R] Function of "matrix"
In-Reply-To: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>
References: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>
Message-ID: <CAGxFJbT_1ZLQ41EsWj7tJN362HgsZbxVxxk=BhP1CO2wKp-T8A@mail.gmail.com>

1. Answers on this list are from volunteers who are not part of any R
project team. We have no official status and what we say comes with no
guarantees.

2. There is no such thing as a "matrix 'environment' ".

3. The answer to your question is "computer arithmetic." See FAQ 7.31.
Someone may follow up with a more specific answer for your particular
calculation, however.

Cheers,

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Oct 22, 2020 at 11:41 AM ?????? <jaajikan at gmail.com> wrote:

> Dear R project team
>
> I used the function of "matrix" as follows:
> matrix(c(1:3030), 10.1/0.1)
> However, in the function, matrix, 10.1/0.1 was regarded as 100 not as 101.
> Therefore, a warning message appeared.
> On the other hand, matrix(c(1:3030), 101) or matrix(c(1:3030), 10.1*10) was
> OK. Of course, simply, 10.1/0.1 was successfully calculated. However,
> In the "matrix" environment, 10.1/0.1 was calculated as 100.
>
> Would you give me some answers?
>
> Sincerely
>
> Kazuki Sakura
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Thu Oct 22 21:10:23 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Thu, 22 Oct 2020 15:10:23 -0400
Subject: [R] Function of "matrix"
In-Reply-To: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>
References: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>
Message-ID: <CAJc=yOG6=Yvk+4VJHrExkQSxEGtH+nm+exGJkgGLgWe20iKfxA@mail.gmail.com>

(Neglected to cc the list--please reply-all to this version)

What was the warning?

I hazard a guess you've run into precision issues for binary
representation, and the result of your division is not *exactly* 101.

Pat

On Thu, Oct 22, 2020 at 2:42 PM ?????? <jaajikan at gmail.com> wrote:
>
> Dear R project team
>
> I used the function of "matrix" as follows:
> matrix(c(1:3030), 10.1/0.1)
> However, in the function, matrix, 10.1/0.1 was regarded as 100 not as 101.
> Therefore, a warning message appeared.
> On the other hand, matrix(c(1:3030), 101) or matrix(c(1:3030), 10.1*10) was
> OK. Of course, simply, 10.1/0.1 was successfully calculated. However,
> In the "matrix" environment, 10.1/0.1 was calculated as 100.
>
> Would you give me some answers?
>
> Sincerely
>
> Kazuki Sakura
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His


From rmh @end|ng |rom temp|e@edu  Thu Oct 22 21:13:27 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 22 Oct 2020 15:13:27 -0400
Subject: [R] [External]  Function of "matrix"
In-Reply-To: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>
References: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>
Message-ID: <CAGx1TMAkrpPM8Y89MKpQVx1-20c1gFxxV6023pQudt-fhfV04g@mail.gmail.com>

FAQ 7.31

> 10.1/.1
[1] 101
> print(10.1/.1, digits=17)
[1] 100.99999999999999
> floor(10.1/.1)
[1] 100
>  floor(10.1*10)
[1] 101
> matrix(0, 2.9, 3.9)
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0
>

note that the dimension arguments are passed through floor() before
they are used.

On Thu, Oct 22, 2020 at 2:42 PM ?????? <jaajikan at gmail.com> wrote:
>
> Dear R project team
>
> I used the function of "matrix" as follows:
> matrix(c(1:3030), 10.1/0.1)
> However, in the function, matrix, 10.1/0.1 was regarded as 100 not as 101.
> Therefore, a warning message appeared.
> On the other hand, matrix(c(1:3030), 101) or matrix(c(1:3030), 10.1*10) was
> OK. Of course, simply, 10.1/0.1 was successfully calculated. However,
> In the "matrix" environment, 10.1/0.1 was calculated as 100.
>
> Would you give me some answers?
>
> Sincerely
>
> Kazuki Sakura
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Oct 22 21:24:25 2020
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 22 Oct 2020 12:24:25 -0700
Subject: [R] Function of "matrix"
In-Reply-To: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>
References: <CAEN3HwdHfbZzyTA6tWF5Br1nn_-i7Z73zjH7xacv=ep=wZBP0A@mail.gmail.com>
Message-ID: <CAHqSRuQ7QkkF7SXwT+JduAUq4y-Sj2NYJTqX7QJZagXy64iqKA@mail.gmail.com>

>  10.1/0.1 was successfully calculated

  Note that 'computed as' is not the same as 'printed as'.   Computations
are
done with 52 binary digits of precision and printing is, by default, done
with
7 decimal digits of precision.  See FAQ 7.31.

> 101 - 10.1/0.1
[1] 1.421085e-14
> options(digits=17)
> 10.1/0.1
[1] 100.99999999999999
> trunc(10.1/0.1)
[1] 100

On Thu, Oct 22, 2020 at 11:42 AM ?????? <jaajikan at gmail.com> wrote:

> Dear R project team
>
> I used the function of "matrix" as follows:
> matrix(c(1:3030), 10.1/0.1)
> However, in the function, matrix, 10.1/0.1 was regarded as 100 not as 101.
> Therefore, a warning message appeared.
> On the other hand, matrix(c(1:3030), 101) or matrix(c(1:3030), 10.1*10) was
> OK. Of course, simply, 10.1/0.1 was successfully calculated. However,
> In the "matrix" environment, 10.1/0.1 was calculated as 100.
>
> Would you give me some answers?
>
> Sincerely
>
> Kazuki Sakura
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Oct 22 21:28:34 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 22 Oct 2020 15:28:34 -0400
Subject: [R] 3d plot of earth with cut
In-Reply-To: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
Message-ID: <89227f4c-b92f-84df-219e-1d69f60262c9@gmail.com>

On 21/10/2020 8:45 a.m., Balint Radics wrote:
> Hello,
> 
> Could someone suggest a package/way to make a 3D raster plot of the Earth
> (with continent boundaries), and then make a "cut" or "slice" of it such
> that one can also visualize some scalar quantity as a function of the
> Radius/Depth across that given slice ?
> 
> Formally, I would have a given, fixed longitude, and a list of vectors
> {latitude, radius, Value}
> that would show the distribution of the quantity "Value" at various depths
> and latitudes in 3D.

The rgl package has a full sphere of the Earth with (obsolete) political 
boundaries in example(persp3d).  To cut it in half along the plane 
through a given longitude (and that longitude + 180 deg), you could use 
clipPlanes3d, or clipObj3d.  For example,

library(rgl)
lat <- matrix(seq(90, -90, len = 50)*pi/180, 50, 50, byrow = TRUE)
long <- matrix(seq(-180, 180, len = 50)*pi/180, 50, 50)

r <- 6378.1 # radius of Earth in km
x <- r*cos(lat)*cos(long)
y <- r*cos(lat)*sin(long)
z <- r*sin(lat)

open3d()
ids <- persp3d(x, y, z, col = "white",
         texture = system.file("textures/worldsmall.png", package = "rgl"),
         specular = "black", axes = FALSE, box = FALSE, xlab = "", ylab 
= "", zlab = "",
         normal_x = x, normal_y = y, normal_z = z)

clipFn <- function(coords) {
   pmax(coords[,1], coords[,2]) # Just an example...
}
clipObj3d(ids["surface"], clipFn)


Filling in the exposed surface could be done with polygon3d(), with some 
work to construct the polygon. Displaying the function across that 
surface could be done in a couple of ways, either by using a texture map 
(like for the map), or subdividing the polygon and setting colour by the 
coordinates of each vertex.

Note that the clipObj3d function isn't on CRAN yet; there you'd have to 
use clipPlanes3d.  You can get the newer version from R-forge.

Duncan Murdoch


From @purd|e@@ @end|ng |rom gm@||@com  Thu Oct 22 23:53:52 2020
From: @purd|e@@ @end|ng |rom gm@||@com (=?UTF-8?Q?aBBy_Spurdle=2C_=E2=8D=BAXY?=)
Date: Fri, 23 Oct 2020 10:53:52 +1300
Subject: [R] 3d plot of earth with cut
In-Reply-To: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
Message-ID: <CAB8pepxkmk=h+5U3-NHQMSspAdAL4cWpJvEvD-xiL0dz9pZ+nw@mail.gmail.com>

If you have "value" as a function of latitude and radius, isn't that a
2D (not 3D) scalar field?
Which can be plotted using a regular heatmap.

If you want a curved edge where depth=0 (radius=?), that's not too
difficult to achieve.
Not quite sure what continent boundaries mean in this context, but
that could possibly be added to.

Or do you want a 2D slice superimposed within a 3D space?

And if so, does it need to be dynamic?
(i.e. Rotate the whole thing, with a trackball/mouse).

Note that the further you go down the list above, the more work is required.


On Fri, Oct 23, 2020 at 7:41 AM Balint Radics <balintradics at gmail.com> wrote:
>
> Hello,
>
> Could someone suggest a package/way to make a 3D raster plot of the Earth
> (with continent boundaries), and then make a "cut" or "slice" of it such
> that one can also visualize some scalar quantity as a function of the
> Radius/Depth across that given slice ?
>
> Formally, I would have a given, fixed longitude, and a list of vectors
> {latitude, radius, Value}
> that would show the distribution of the quantity "Value" at various depths
> and latitudes in 3D.
>
> Thanks a lot in advance,
> Balint
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From b@||ntr@d|c@ @end|ng |rom gm@||@com  Thu Oct 22 23:58:11 2020
From: b@||ntr@d|c@ @end|ng |rom gm@||@com (Balint Radics)
Date: Thu, 22 Oct 2020 23:58:11 +0200
Subject: [R] 3d plot of earth with cut
In-Reply-To: <CAGxFJbS1nC_whzCGf5xvkjcOuX9tof0HWQS+-rm7=u9X01NrEg@mail.gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
 <CAGxFJbS1nC_whzCGf5xvkjcOuX9tof0HWQS+-rm7=u9X01NrEg@mail.gmail.com>
Message-ID: <CAJeOm49DJsaS9BLnez+frQQ0nokjgxwOmVegEHB3H0u1nwKA3g@mail.gmail.com>

Hi

Thanks a lot for this pointer, I will need to look at it. I did indeed
google but did not find an example. In the meantime some additional
solutions were suggested, that I also need to try.

Cheers,
Balint

On Thu 22. Oct 2020 at 20:56, Bert Gunter <bgunter.4567 at gmail.com> wrote:

> 1. Have you looked here:
> https://cran.r-project.org/web/views/Spatial.html
> (I assume you have done some web searches on possible terms like "3D Earth
> Data R" or whatever)
>
> 2. You might try posting on the r-sig-geo list rather than here, where
> relative expertise may more likely be available.
>
> Cheers,
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Thu, Oct 22, 2020 at 11:41 AM Balint Radics <balintradics at gmail.com>
> wrote:
>
>> Hello,
>>
>> Could someone suggest a package/way to make a 3D raster plot of the Earth
>> (with continent boundaries), and then make a "cut" or "slice" of it such
>> that one can also visualize some scalar quantity as a function of the
>> Radius/Depth across that given slice ?
>>
>> Formally, I would have a given, fixed longitude, and a list of vectors
>> {latitude, radius, Value}
>> that would show the distribution of the quantity "Value" at various depths
>> and latitudes in 3D.
>>
>> Thanks a lot in advance,
>> Balint
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From b@||ntr@d|c@ @end|ng |rom gm@||@com  Fri Oct 23 00:00:13 2020
From: b@||ntr@d|c@ @end|ng |rom gm@||@com (Balint Radics)
Date: Fri, 23 Oct 2020 00:00:13 +0200
Subject: [R] 3d plot of earth with cut
In-Reply-To: <89227f4c-b92f-84df-219e-1d69f60262c9@gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
 <89227f4c-b92f-84df-219e-1d69f60262c9@gmail.com>
Message-ID: <CAJeOm49fKLYiDZMswA316a806G87T80AvLfjyEw0zExVZ6LaOg@mail.gmail.com>

Hello,

this is very close to exactly what I need! I have tried it and it works
nicely, I just have to map some values onto to the polygon or 2D plane that
cuts into the 3D object.

Thanks!

Balint

On Thu 22. Oct 2020 at 21:28, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 21/10/2020 8:45 a.m., Balint Radics wrote:
> > Hello,
> >
> > Could someone suggest a package/way to make a 3D raster plot of the Earth
> > (with continent boundaries), and then make a "cut" or "slice" of it such
> > that one can also visualize some scalar quantity as a function of the
> > Radius/Depth across that given slice ?
> >
> > Formally, I would have a given, fixed longitude, and a list of vectors
> > {latitude, radius, Value}
> > that would show the distribution of the quantity "Value" at various
> depths
> > and latitudes in 3D.
>
> The rgl package has a full sphere of the Earth with (obsolete) political
> boundaries in example(persp3d).  To cut it in half along the plane
> through a given longitude (and that longitude + 180 deg), you could use
> clipPlanes3d, or clipObj3d.  For example,
>
> library(rgl)
> lat <- matrix(seq(90, -90, len = 50)*pi/180, 50, 50, byrow = TRUE)
> long <- matrix(seq(-180, 180, len = 50)*pi/180, 50, 50)
>
> r <- 6378.1 # radius of Earth in km
> x <- r*cos(lat)*cos(long)
> y <- r*cos(lat)*sin(long)
> z <- r*sin(lat)
>
> open3d()
> ids <- persp3d(x, y, z, col = "white",
>          texture = system.file("textures/worldsmall.png", package = "rgl"),
>          specular = "black", axes = FALSE, box = FALSE, xlab = "", ylab
> = "", zlab = "",
>          normal_x = x, normal_y = y, normal_z = z)
>
> clipFn <- function(coords) {
>    pmax(coords[,1], coords[,2]) # Just an example...
> }
> clipObj3d(ids["surface"], clipFn)
>
>
> Filling in the exposed surface could be done with polygon3d(), with some
> work to construct the polygon. Displaying the function across that
> surface could be done in a couple of ways, either by using a texture map
> (like for the map), or subdividing the polygon and setting colour by the
> coordinates of each vertex.
>
> Note that the clipObj3d function isn't on CRAN yet; there you'd have to
> use clipPlanes3d.  You can get the newer version from R-forge.
>
> Duncan Murdoch
>

	[[alternative HTML version deleted]]


From b@||ntr@d|c@ @end|ng |rom gm@||@com  Fri Oct 23 00:07:27 2020
From: b@||ntr@d|c@ @end|ng |rom gm@||@com (Balint Radics)
Date: Fri, 23 Oct 2020 00:07:27 +0200
Subject: [R] 3d plot of earth with cut
In-Reply-To: <CAB8pepxkmk=h+5U3-NHQMSspAdAL4cWpJvEvD-xiL0dz9pZ+nw@mail.gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
 <CAB8pepxkmk=h+5U3-NHQMSspAdAL4cWpJvEvD-xiL0dz9pZ+nw@mail.gmail.com>
Message-ID: <CAJeOm48YPLOU1HzR863S9Jh3ZMQSdhbTkEDYy=4PZWWGaoOuXA@mail.gmail.com>

Thanks for your idea. It should be a 2D slice/plane embedded into a 3D
space. Could be static, I just need to make a single figure from it for
illustration of the Earth together with its interior in 3D. So, the
interior would be a slice in 2D along a fixed longitude. And along this 2D
slice would be a heatmap. Again, embedded in 3D, since it would be shown as
a slice of Earth in 3D.

Duncan?s suggestion is almost exactly what I need so I will try that as a
start. Like that it is rotateable which is not a must, but it helps to
figure out which angle of view is the best, I hope i can save it as a PDF
or image.

Also, happy to try other solutions as well, if you think I overcomplicate
it!

Balint

On Thu 22. Oct 2020 at 23:54, aBBy Spurdle, ?XY <spurdle.a at gmail.com> wrote:

> If you have "value" as a function of latitude and radius, isn't that a
> 2D (not 3D) scalar field?
> Which can be plotted using a regular heatmap.
>
> If you want a curved edge where depth=0 (radius=?), that's not too
> difficult to achieve.
> Not quite sure what continent boundaries mean in this context, but
> that could possibly be added to.
>
> Or do you want a 2D slice superimposed within a 3D space?
>
> And if so, does it need to be dynamic?
> (i.e. Rotate the whole thing, with a trackball/mouse).
>
> Note that the further you go down the list above, the more work is
> required.
>
>
> On Fri, Oct 23, 2020 at 7:41 AM Balint Radics <balintradics at gmail.com>
> wrote:
> >
> > Hello,
> >
> > Could someone suggest a package/way to make a 3D raster plot of the Earth
> > (with continent boundaries), and then make a "cut" or "slice" of it such
> > that one can also visualize some scalar quantity as a function of the
> > Radius/Depth across that given slice ?
> >
> > Formally, I would have a given, fixed longitude, and a list of vectors
> > {latitude, radius, Value}
> > that would show the distribution of the quantity "Value" at various
> depths
> > and latitudes in 3D.
> >
> > Thanks a lot in advance,
> > Balint
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |r|end|y @end|ng |rom yorku@c@  Fri Oct 23 00:47:04 2020
From: |r|end|y @end|ng |rom yorku@c@ (Michael L Friendly)
Date: Thu, 22 Oct 2020 22:47:04 +0000
Subject: [R] vanilla session in R Gui or RStudio
Message-ID: <QB1PR01MB326622B490C4C62E4AFAA891AB1D0@QB1PR01MB3266.CANPRD01.PROD.OUTLOOK.COM>

[env: Windows, R 3.6.6]

When I start R from the R Gui icon or from RStudio, I get a large number of packages loaded via a namespace. Not entirely clear where these come from.

As a result, I often run into problems updating packages because something is already loaded.  How can start a new gui session with minimal packages loaded?

> sessionInfo()
R version 3.6.3 (2020-02-29)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
 [1] statmod_1.4.34   xfun_0.18        tidyselect_1.1.0 reshape2_1.4.4   purrr_0.3.4      mitools_2.4     
 [7] splines_3.6.3    lattice_0.20-41  coefplot_1.2.6   carData_3.0-4    colorspace_1.4-1 vctrs_0.3.4     
[13] generics_0.0.2   htmltools_0.5.0  yaml_2.2.1       survival_3.2-7   rlang_0.4.7      pillar_1.4.6    
[19] nloptr_1.2.2.2   glue_1.4.2       DBI_1.1.0        lifecycle_0.2.0  plyr_1.8.6       stringr_1.4.0   
[25] effects_4.2-0    munsell_0.5.0    gtable_0.3.0     evaluate_0.14    knitr_1.30       fansi_0.4.1     
[31] Rcpp_1.0.5       scales_1.1.1     useful_1.2.6     fs_1.4.2         lme4_1.1-23      packrat_0.5.0   
[37] ggplot2_3.3.2    digest_0.6.25    stringi_1.4.6    insight_0.9.6    dplyr_1.0.2      survey_4.0      
[43] grid_3.6.3       cli_2.1.0        tools_3.6.3      magrittr_1.5     tibble_3.0.4     crayon_1.3.4    
[49] pkgconfig_2.0.3  ellipsis_0.3.1   MASS_7.3-53      Matrix_1.2-18    reprex_0.3.0     assertthat_0.2.1
[55] minqa_1.2.4      rmarkdown_2.4    rstudioapi_0.11  R6_2.4.1         boot_1.3-25      nnet_7.3-14     
[61] nlme_3.1-149     compiler_3.6.3  
>

Michael Friendly     Email: friendly AT yorku DOT ca 
Professor, Psychology Dept. & Former Chair, ASA Statistical Graphics Section
York University      Voice: 416 736-2100 x66249 
4700 Keele Street    Web: http://www.datavis.ca | @datavisFriendly
Toronto, ONT  M3J 1P3 CANADA


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Oct 23 01:13:46 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 22 Oct 2020 16:13:46 -0700
Subject: [R] vanilla session in R Gui or RStudio
In-Reply-To: <QB1PR01MB326622B490C4C62E4AFAA891AB1D0@QB1PR01MB3266.CANPRD01.PROD.OUTLOOK.COM>
References: <QB1PR01MB326622B490C4C62E4AFAA891AB1D0@QB1PR01MB3266.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <55CFF523-C4E7-4318-B42C-79C0A0281237@dcn.davis.ca.us>

Have you looked into your .Rprofile file? Loading packages is not something R normally does without your telling it to do so, but many people forget that they have done so.

On October 22, 2020 3:47:04 PM PDT, Michael L Friendly <friendly at yorku.ca> wrote:
>[env: Windows, R 3.6.6]
>
>When I start R from the R Gui icon or from RStudio, I get a large
>number of packages loaded via a namespace. Not entirely clear where
>these come from.
>
>As a result, I often run into problems updating packages because
>something is already loaded.  How can start a new gui session with
>minimal packages loaded?
>
>> sessionInfo()
>R version 3.6.3 (2020-02-29)
>Platform: x86_64-w64-mingw32/x64 (64-bit)
>Running under: Windows 7 x64 (build 7601) Service Pack 1
>
>Matrix products: default
>
>locale:
>[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
>States.1252   
>[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                
>         
>[5] LC_TIME=English_United States.1252    
>
>attached base packages:
>[1] stats     graphics  grDevices utils     datasets  methods   base   
> 
>
>loaded via a namespace (and not attached):
>[1] statmod_1.4.34   xfun_0.18        tidyselect_1.1.0 reshape2_1.4.4  
>purrr_0.3.4      mitools_2.4     
>[7] splines_3.6.3    lattice_0.20-41  coefplot_1.2.6   carData_3.0-4   
>colorspace_1.4-1 vctrs_0.3.4     
>[13] generics_0.0.2   htmltools_0.5.0  yaml_2.2.1       survival_3.2-7 
> rlang_0.4.7      pillar_1.4.6    
>[19] nloptr_1.2.2.2   glue_1.4.2       DBI_1.1.0        lifecycle_0.2.0
> plyr_1.8.6       stringr_1.4.0   
>[25] effects_4.2-0    munsell_0.5.0    gtable_0.3.0     evaluate_0.14  
> knitr_1.30       fansi_0.4.1     
>[31] Rcpp_1.0.5       scales_1.1.1     useful_1.2.6     fs_1.4.2       
> lme4_1.1-23      packrat_0.5.0   
>[37] ggplot2_3.3.2    digest_0.6.25    stringi_1.4.6    insight_0.9.6  
> dplyr_1.0.2      survey_4.0      
>[43] grid_3.6.3       cli_2.1.0        tools_3.6.3      magrittr_1.5   
> tibble_3.0.4     crayon_1.3.4    
>[49] pkgconfig_2.0.3  ellipsis_0.3.1   MASS_7.3-53      Matrix_1.2-18  
> reprex_0.3.0     assertthat_0.2.1
>[55] minqa_1.2.4      rmarkdown_2.4    rstudioapi_0.11  R6_2.4.1       
> boot_1.3-25      nnet_7.3-14     
>[61] nlme_3.1-149     compiler_3.6.3  
>>
>
>Michael Friendly     Email: friendly AT yorku DOT ca 
>Professor, Psychology Dept. & Former Chair, ASA Statistical Graphics
>Section
>York University      Voice: 416 736-2100 x66249 
>4700 Keele Street    Web: http://www.datavis.ca | @datavisFriendly
>Toronto, ONT  M3J 1P3 CANADA
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @purd|e@@ @end|ng |rom gm@||@com  Fri Oct 23 01:49:38 2020
From: @purd|e@@ @end|ng |rom gm@||@com (=?UTF-8?Q?aBBy_Spurdle=2C_=E2=8D=BAXY?=)
Date: Fri, 23 Oct 2020 12:49:38 +1300
Subject: [R] 3d plot of earth with cut
In-Reply-To: <CAJeOm48YPLOU1HzR863S9Jh3ZMQSdhbTkEDYy=4PZWWGaoOuXA@mail.gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
 <CAB8pepxkmk=h+5U3-NHQMSspAdAL4cWpJvEvD-xiL0dz9pZ+nw@mail.gmail.com>
 <CAJeOm48YPLOU1HzR863S9Jh3ZMQSdhbTkEDYy=4PZWWGaoOuXA@mail.gmail.com>
Message-ID: <CAB8pepxCcuKUkZv9GzPXZ4HomL36=-=dPpJcevk4tiaJ+2Qc0A@mail.gmail.com>

> It should be a 2D slice/plane embedded into a 3D space.

I was able to come up with the plot, attached.
My intention was to plot national boundaries on the surface of a sphere.
And put the slice inside.
However, I haven't (as yet) worked out how to get the coordinates for
the boundaries.

Let me know, if of any value.
And I'll post the code.
(But needs to be polished first)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: slice.png
Type: image/png
Size: 36307 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20201023/6a5b752d/attachment.png>

From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Oct 23 03:13:11 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 22 Oct 2020 18:13:11 -0700
Subject: [R] vanilla session in R Gui or RStudio
In-Reply-To: <55CFF523-C4E7-4318-B42C-79C0A0281237@dcn.davis.ca.us>
References: <QB1PR01MB326622B490C4C62E4AFAA891AB1D0@QB1PR01MB3266.CANPRD01.PROD.OUTLOOK.COM>
 <55CFF523-C4E7-4318-B42C-79C0A0281237@dcn.davis.ca.us>
Message-ID: <CAFDcVCTVzUP1b5xAj2MF88iPR3icdX+2y6BvS4h3Uy_sUFE5+w@mail.gmail.com>

As Jeff says, it might be that you have a ~/.Rprofile file with
instructions to load packages when R starts.  It could also be that
you have a .RData file, which is saved if you answer yes to:

> Save workspace image? [y/n/c]: y

when you quit R.   If this file exists, then R loads it and all the
objects you had when you saved it. If there are objects associated
with packages, then that will cause those packages to be loaded when R
starts.  To avoid this, you need to move or delete the .RData file.

You can use:

> startup::startup(debug = TRUE, dryrun = TRUE)

to get detailed information on what happens when R starts, e.g. if you
have a .Rprofile file and an .RData file.  That might help you to
track down what's going on.  The 'startup' package is on CRAN.

I don't know of an easy way to restart RGui or RStudio Console in
vanilla mode, similarly how you can start R at the terminal with 'R
--vanilla'.

/Henrik

On Thu, Oct 22, 2020 at 4:14 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Have you looked into your .Rprofile file? Loading packages is not something R normally does without your telling it to do so, but many people forget that they have done so.
>
> On October 22, 2020 3:47:04 PM PDT, Michael L Friendly <friendly at yorku.ca> wrote:
> >[env: Windows, R 3.6.6]
> >
> >When I start R from the R Gui icon or from RStudio, I get a large
> >number of packages loaded via a namespace. Not entirely clear where
> >these come from.
> >
> >As a result, I often run into problems updating packages because
> >something is already loaded.  How can start a new gui session with
> >minimal packages loaded?
> >
> >> sessionInfo()
> >R version 3.6.3 (2020-02-29)
> >Platform: x86_64-w64-mingw32/x64 (64-bit)
> >Running under: Windows 7 x64 (build 7601) Service Pack 1
> >
> >Matrix products: default
> >
> >locale:
> >[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> >States.1252
> >[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> >
> >[5] LC_TIME=English_United States.1252
> >
> >attached base packages:
> >[1] stats     graphics  grDevices utils     datasets  methods   base
> >
> >
> >loaded via a namespace (and not attached):
> >[1] statmod_1.4.34   xfun_0.18        tidyselect_1.1.0 reshape2_1.4.4
> >purrr_0.3.4      mitools_2.4
> >[7] splines_3.6.3    lattice_0.20-41  coefplot_1.2.6   carData_3.0-4
> >colorspace_1.4-1 vctrs_0.3.4
> >[13] generics_0.0.2   htmltools_0.5.0  yaml_2.2.1       survival_3.2-7
> > rlang_0.4.7      pillar_1.4.6
> >[19] nloptr_1.2.2.2   glue_1.4.2       DBI_1.1.0        lifecycle_0.2.0
> > plyr_1.8.6       stringr_1.4.0
> >[25] effects_4.2-0    munsell_0.5.0    gtable_0.3.0     evaluate_0.14
> > knitr_1.30       fansi_0.4.1
> >[31] Rcpp_1.0.5       scales_1.1.1     useful_1.2.6     fs_1.4.2
> > lme4_1.1-23      packrat_0.5.0
> >[37] ggplot2_3.3.2    digest_0.6.25    stringi_1.4.6    insight_0.9.6
> > dplyr_1.0.2      survey_4.0
> >[43] grid_3.6.3       cli_2.1.0        tools_3.6.3      magrittr_1.5
> > tibble_3.0.4     crayon_1.3.4
> >[49] pkgconfig_2.0.3  ellipsis_0.3.1   MASS_7.3-53      Matrix_1.2-18
> > reprex_0.3.0     assertthat_0.2.1
> >[55] minqa_1.2.4      rmarkdown_2.4    rstudioapi_0.11  R6_2.4.1
> > boot_1.3-25      nnet_7.3-14
> >[61] nlme_3.1-149     compiler_3.6.3
> >>
> >
> >Michael Friendly     Email: friendly AT yorku DOT ca
> >Professor, Psychology Dept. & Former Chair, ASA Statistical Graphics
> >Section
> >York University      Voice: 416 736-2100 x66249
> >4700 Keele Street    Web: http://www.datavis.ca | @datavisFriendly
> >Toronto, ONT  M3J 1P3 CANADA
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Oct 23 04:33:05 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 23 Oct 2020 15:33:05 +1300
Subject: [R] vanilla session in R Gui or RStudio
In-Reply-To: <CAFDcVCTVzUP1b5xAj2MF88iPR3icdX+2y6BvS4h3Uy_sUFE5+w@mail.gmail.com>
References: <QB1PR01MB326622B490C4C62E4AFAA891AB1D0@QB1PR01MB3266.CANPRD01.PROD.OUTLOOK.COM>
 <55CFF523-C4E7-4318-B42C-79C0A0281237@dcn.davis.ca.us>
 <CAFDcVCTVzUP1b5xAj2MF88iPR3icdX+2y6BvS4h3Uy_sUFE5+w@mail.gmail.com>
Message-ID: <20201023153305.58178400@rolf-Latitude-E7470>


On Thu, 22 Oct 2020 18:13:11 -0700
Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:

> As Jeff says, it might be that you have a ~/.Rprofile file with
> instructions to load packages when R starts.  It could also be that
> you have a .RData file, which is saved if you answer yes to:
> 
> > Save workspace image? [y/n/c]: y  
> 
> when you quit R.   If this file exists, then R loads it and all the
> objects you had when you saved it. If there are objects associated
> with packages, then that will cause those packages to be loaded when R
> starts.

<SNIP>

I don't believe that the forgoing is *exactly* correct.  Perhaps it
depends on what is meant by "objects associated with packages".
I have vague recollections that funny things can happen if objects
in the saved .RData file have complicated environments, but I can't
remember details.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Oct 23 04:54:10 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 22 Oct 2020 19:54:10 -0700
Subject: [R] vanilla session in R Gui or RStudio
In-Reply-To: <CAFDcVCTVzUP1b5xAj2MF88iPR3icdX+2y6BvS4h3Uy_sUFE5+w@mail.gmail.com>
References: <QB1PR01MB326622B490C4C62E4AFAA891AB1D0@QB1PR01MB3266.CANPRD01.PROD.OUTLOOK.COM>
 <55CFF523-C4E7-4318-B42C-79C0A0281237@dcn.davis.ca.us>
 <CAFDcVCTVzUP1b5xAj2MF88iPR3icdX+2y6BvS4h3Uy_sUFE5+w@mail.gmail.com>
Message-ID: <6D843C5E-EC4F-45B9-837D-4DEC3C6B8CF3@dcn.davis.ca.us>

Can you be more specific about what conditions cause R to automatically load a package when a .RData file is loaded? My experience has actually been the opposite.

On October 22, 2020 6:13:11 PM PDT, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
>As Jeff says, it might be that you have a ~/.Rprofile file with
>instructions to load packages when R starts.  It could also be that
>you have a .RData file, which is saved if you answer yes to:
>
>> Save workspace image? [y/n/c]: y
>
>when you quit R.   If this file exists, then R loads it and all the
>objects you had when you saved it. If there are objects associated
>with packages, then that will cause those packages to be loaded when R
>starts.  To avoid this, you need to move or delete the .RData file.
>
>You can use:
>
>> startup::startup(debug = TRUE, dryrun = TRUE)
>
>to get detailed information on what happens when R starts, e.g. if you
>have a .Rprofile file and an .RData file.  That might help you to
>track down what's going on.  The 'startup' package is on CRAN.
>
>I don't know of an easy way to restart RGui or RStudio Console in
>vanilla mode, similarly how you can start R at the terminal with 'R
>--vanilla'.
>
>/Henrik
>
>On Thu, Oct 22, 2020 at 4:14 PM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us> wrote:
>>
>> Have you looked into your .Rprofile file? Loading packages is not
>something R normally does without your telling it to do so, but many
>people forget that they have done so.
>>
>> On October 22, 2020 3:47:04 PM PDT, Michael L Friendly
><friendly at yorku.ca> wrote:
>> >[env: Windows, R 3.6.6]
>> >
>> >When I start R from the R Gui icon or from RStudio, I get a large
>> >number of packages loaded via a namespace. Not entirely clear where
>> >these come from.
>> >
>> >As a result, I often run into problems updating packages because
>> >something is already loaded.  How can start a new gui session with
>> >minimal packages loaded?
>> >
>> >> sessionInfo()
>> >R version 3.6.3 (2020-02-29)
>> >Platform: x86_64-w64-mingw32/x64 (64-bit)
>> >Running under: Windows 7 x64 (build 7601) Service Pack 1
>> >
>> >Matrix products: default
>> >
>> >locale:
>> >[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
>> >States.1252
>> >[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>> >
>> >[5] LC_TIME=English_United States.1252
>> >
>> >attached base packages:
>> >[1] stats     graphics  grDevices utils     datasets  methods   base
>> >
>> >
>> >loaded via a namespace (and not attached):
>> >[1] statmod_1.4.34   xfun_0.18        tidyselect_1.1.0
>reshape2_1.4.4
>> >purrr_0.3.4      mitools_2.4
>> >[7] splines_3.6.3    lattice_0.20-41  coefplot_1.2.6   carData_3.0-4
>> >colorspace_1.4-1 vctrs_0.3.4
>> >[13] generics_0.0.2   htmltools_0.5.0  yaml_2.2.1      
>survival_3.2-7
>> > rlang_0.4.7      pillar_1.4.6
>> >[19] nloptr_1.2.2.2   glue_1.4.2       DBI_1.1.0       
>lifecycle_0.2.0
>> > plyr_1.8.6       stringr_1.4.0
>> >[25] effects_4.2-0    munsell_0.5.0    gtable_0.3.0    
>evaluate_0.14
>> > knitr_1.30       fansi_0.4.1
>> >[31] Rcpp_1.0.5       scales_1.1.1     useful_1.2.6     fs_1.4.2
>> > lme4_1.1-23      packrat_0.5.0
>> >[37] ggplot2_3.3.2    digest_0.6.25    stringi_1.4.6   
>insight_0.9.6
>> > dplyr_1.0.2      survey_4.0
>> >[43] grid_3.6.3       cli_2.1.0        tools_3.6.3      magrittr_1.5
>> > tibble_3.0.4     crayon_1.3.4
>> >[49] pkgconfig_2.0.3  ellipsis_0.3.1   MASS_7.3-53     
>Matrix_1.2-18
>> > reprex_0.3.0     assertthat_0.2.1
>> >[55] minqa_1.2.4      rmarkdown_2.4    rstudioapi_0.11  R6_2.4.1
>> > boot_1.3-25      nnet_7.3-14
>> >[61] nlme_3.1-149     compiler_3.6.3
>> >>
>> >
>> >Michael Friendly     Email: friendly AT yorku DOT ca
>> >Professor, Psychology Dept. & Former Chair, ASA Statistical Graphics
>> >Section
>> >York University      Voice: 416 736-2100 x66249
>> >4700 Keele Street    Web: http://www.datavis.ca | @datavisFriendly
>> >Toronto, ONT  M3J 1P3 CANADA
>> >
>> >______________________________________________
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >https://stat.ethz.ch/mailman/listinfo/r-help
>> >PLEASE do read the posting guide
>> >http://www.R-project.org/posting-guide.html
>> >and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Oct 23 05:11:37 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 22 Oct 2020 20:11:37 -0700
Subject: [R] vanilla session in R Gui or RStudio
In-Reply-To: <6D843C5E-EC4F-45B9-837D-4DEC3C6B8CF3@dcn.davis.ca.us>
References: <QB1PR01MB326622B490C4C62E4AFAA891AB1D0@QB1PR01MB3266.CANPRD01.PROD.OUTLOOK.COM>
 <55CFF523-C4E7-4318-B42C-79C0A0281237@dcn.davis.ca.us>
 <CAFDcVCTVzUP1b5xAj2MF88iPR3icdX+2y6BvS4h3Uy_sUFE5+w@mail.gmail.com>
 <6D843C5E-EC4F-45B9-837D-4DEC3C6B8CF3@dcn.davis.ca.us>
Message-ID: <CAFDcVCTPQevHVsVVFwSOEhE1vQp8cDzheCw5cigT10=8HhyRqw@mail.gmail.com>

This can happens if save an object with an environment part of a package, e.g.

$ R --quiet --vanilla
> fcn <- Matrix::Matrix
> environment(fcn)
<environment: namespace:Matrix>
> quit("yes")  # saves the workspace in an .RData file

# Loading the .RData file at startup triggers 'Matrix' to be loaded
$ R --quiet --no-init-file -e "loadedNamespaces()"
> loadedNamespaces()
 [1] "compiler"  "Matrix"    "graphics"  "utils"     "grDevices" "stats"
 [7] "datasets"  "grid"      "methods"   "base"      "lattice"
>
>

Also, if you have saved S4 objects (e.g. x <- Matrix::Matrix(0, 3,
2)), they will trigger their corresponding packages to be loaded when
"used" (e.g. print():ed) but not before.

Not saying it explains all of OPs packages - just wanted to say the
content of .RData may trigger packages being loaded.

/Henrik

On Thu, Oct 22, 2020 at 7:54 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Can you be more specific about what conditions cause R to automatically load a package when a .RData file is loaded? My experience has actually been the opposite.
>
> On October 22, 2020 6:13:11 PM PDT, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
> >As Jeff says, it might be that you have a ~/.Rprofile file with
> >instructions to load packages when R starts.  It could also be that
> >you have a .RData file, which is saved if you answer yes to:
> >
> >> Save workspace image? [y/n/c]: y
> >
> >when you quit R.   If this file exists, then R loads it and all the
> >objects you had when you saved it. If there are objects associated
> >with packages, then that will cause those packages to be loaded when R
> >starts.  To avoid this, you need to move or delete the .RData file.
> >
> >You can use:
> >
> >> startup::startup(debug = TRUE, dryrun = TRUE)
> >
> >to get detailed information on what happens when R starts, e.g. if you
> >have a .Rprofile file and an .RData file.  That might help you to
> >track down what's going on.  The 'startup' package is on CRAN.
> >
> >I don't know of an easy way to restart RGui or RStudio Console in
> >vanilla mode, similarly how you can start R at the terminal with 'R
> >--vanilla'.
> >
> >/Henrik
> >
> >On Thu, Oct 22, 2020 at 4:14 PM Jeff Newmiller
> ><jdnewmil at dcn.davis.ca.us> wrote:
> >>
> >> Have you looked into your .Rprofile file? Loading packages is not
> >something R normally does without your telling it to do so, but many
> >people forget that they have done so.
> >>
> >> On October 22, 2020 3:47:04 PM PDT, Michael L Friendly
> ><friendly at yorku.ca> wrote:
> >> >[env: Windows, R 3.6.6]
> >> >
> >> >When I start R from the R Gui icon or from RStudio, I get a large
> >> >number of packages loaded via a namespace. Not entirely clear where
> >> >these come from.
> >> >
> >> >As a result, I often run into problems updating packages because
> >> >something is already loaded.  How can start a new gui session with
> >> >minimal packages loaded?
> >> >
> >> >> sessionInfo()
> >> >R version 3.6.3 (2020-02-29)
> >> >Platform: x86_64-w64-mingw32/x64 (64-bit)
> >> >Running under: Windows 7 x64 (build 7601) Service Pack 1
> >> >
> >> >Matrix products: default
> >> >
> >> >locale:
> >> >[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> >> >States.1252
> >> >[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> >> >
> >> >[5] LC_TIME=English_United States.1252
> >> >
> >> >attached base packages:
> >> >[1] stats     graphics  grDevices utils     datasets  methods   base
> >> >
> >> >
> >> >loaded via a namespace (and not attached):
> >> >[1] statmod_1.4.34   xfun_0.18        tidyselect_1.1.0
> >reshape2_1.4.4
> >> >purrr_0.3.4      mitools_2.4
> >> >[7] splines_3.6.3    lattice_0.20-41  coefplot_1.2.6   carData_3.0-4
> >> >colorspace_1.4-1 vctrs_0.3.4
> >> >[13] generics_0.0.2   htmltools_0.5.0  yaml_2.2.1
> >survival_3.2-7
> >> > rlang_0.4.7      pillar_1.4.6
> >> >[19] nloptr_1.2.2.2   glue_1.4.2       DBI_1.1.0
> >lifecycle_0.2.0
> >> > plyr_1.8.6       stringr_1.4.0
> >> >[25] effects_4.2-0    munsell_0.5.0    gtable_0.3.0
> >evaluate_0.14
> >> > knitr_1.30       fansi_0.4.1
> >> >[31] Rcpp_1.0.5       scales_1.1.1     useful_1.2.6     fs_1.4.2
> >> > lme4_1.1-23      packrat_0.5.0
> >> >[37] ggplot2_3.3.2    digest_0.6.25    stringi_1.4.6
> >insight_0.9.6
> >> > dplyr_1.0.2      survey_4.0
> >> >[43] grid_3.6.3       cli_2.1.0        tools_3.6.3      magrittr_1.5
> >> > tibble_3.0.4     crayon_1.3.4
> >> >[49] pkgconfig_2.0.3  ellipsis_0.3.1   MASS_7.3-53
> >Matrix_1.2-18
> >> > reprex_0.3.0     assertthat_0.2.1
> >> >[55] minqa_1.2.4      rmarkdown_2.4    rstudioapi_0.11  R6_2.4.1
> >> > boot_1.3-25      nnet_7.3-14
> >> >[61] nlme_3.1-149     compiler_3.6.3
> >> >>
> >> >
> >> >Michael Friendly     Email: friendly AT yorku DOT ca
> >> >Professor, Psychology Dept. & Former Chair, ASA Statistical Graphics
> >> >Section
> >> >York University      Voice: 416 736-2100 x66249
> >> >4700 Keele Street    Web: http://www.datavis.ca | @datavisFriendly
> >> >Toronto, ONT  M3J 1P3 CANADA
> >> >
> >> >______________________________________________
> >> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> >https://stat.ethz.ch/mailman/listinfo/r-help
> >> >PLEASE do read the posting guide
> >> >http://www.R-project.org/posting-guide.html
> >> >and provide commented, minimal, self-contained, reproducible code.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.


From m|@ojpm @end|ng |rom gm@||@com  Fri Oct 23 06:04:39 2020
From: m|@ojpm @end|ng |rom gm@||@com (John)
Date: Fri, 23 Oct 2020 12:04:39 +0800
Subject: [R] openxlsx::read.xlsx can't read data without a header
Message-ID: <CABcx46CWTOcZbrLQOr+f0WCJ5L5xO+MXf8CfRU_7w7onJuLkkg@mail.gmail.com>

Hi,

   I try to read 6 rows (from 5th to 10th) from Excel, but I can always get
5. The first row of the 6 becomes the header. How can I add something like
"header = FALSE" in the formula, so that the resulting data would be all
the 6 rows? A similar problem occurs in readxl::read_xlsx. Thank you!

> temp <- openxlsx::read.xlsx(fl_trilem_sgko, sheet="Korea", rows=5:10,
cols=25,                skipEmptyRows = FALSE, na.strings = "NA")
> temp
  0.12101775061124695
1          0.09613981
2          0.16259886
3          0.07914472
4          0.10195485
5          0.07700853
> nrow(temp)
[1] 5


John

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Fri Oct 23 06:18:19 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Fri, 23 Oct 2020 00:18:19 -0400
Subject: [R] 
 [External] openxlsx::read.xlsx can't read data without a header
In-Reply-To: <CABcx46CWTOcZbrLQOr+f0WCJ5L5xO+MXf8CfRU_7w7onJuLkkg@mail.gmail.com>
References: <CABcx46CWTOcZbrLQOr+f0WCJ5L5xO+MXf8CfRU_7w7onJuLkkg@mail.gmail.com>
Message-ID: <CAGx1TMADBXEfrGVrBP-__bBM8TNiWu4-NTuvA62sCYctS7T3cQ@mail.gmail.com>

?openxlsx::read.xlsx
The fourth argument by default is TRUE
colNames: If ?TRUE?, the first row of data will be used as column
          names.

You will need to specify it explicitly
as     colNames=FALSE
The other arguments will probably also be useful to you.

On Thu, Oct 22, 2020 at 11:56 PM John <miaojpm at gmail.com> wrote:
>
> Hi,
>
>    I try to read 6 rows (from 5th to 10th) from Excel, but I can always get
> 5. The first row of the 6 becomes the header. How can I add something like
> "header = FALSE" in the formula, so that the resulting data would be all
> the 6 rows? A similar problem occurs in readxl::read_xlsx. Thank you!
>
> > temp <- openxlsx::read.xlsx(fl_trilem_sgko, sheet="Korea", rows=5:10,
> cols=25,                skipEmptyRows = FALSE, na.strings = "NA")
> > temp
>   0.12101775061124695
> 1          0.09613981
> 2          0.16259886
> 3          0.07914472
> 4          0.10195485
> 5          0.07700853
> > nrow(temp)
> [1] 5
>
>
> John
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Oct 23 09:58:52 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 23 Oct 2020 09:58:52 +0200
Subject: [R] How to shade area between lines in ggplot2
Message-ID: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>

Hello,
I am running SVM and showing the results with ggplot2. The results
include the decision boundaries, which are two dashed lines parallel
to a solid line. I would like to remove the dashed lines and use a
shaded area instead. How can I do that?
Here is the code I wrote..
```
library(e1071)
library(ggplot2)

set.seed(100)
x1 = rnorm(100, mean = 0.2, sd = 0.1)
y1 = rnorm(100, mean = 0.7, sd = 0.1)
y2 = rnorm(100, mean = 0.2, sd = 0.1)
x2 = rnorm(100, mean = 0.75, sd = 0.1)
df = data.frame(x = c(x1,x2), y=c(y1,y2),
                z=c(rep(0, length(x1)), rep(1, length(x2))))
df$z = factor(c(rep(0, length(x1)), rep(1, length(x2))))
df[, "train"] <- ifelse(runif(nrow(df)) < 0.8, 1, 0)
trainset <- df[df$train == 1, ]
testset <- df[df$train == 0, ]
trainColNum <- grep("train", names(df))
trainset <- trainset[, -trainColNum]
testset <- testset[, -trainColNum]
head(trainset); str(df)

svm_model<- svm(z ~ .,
                data = trainset,
                type = "C-classification",
                kernel = "linear",
                scale = FALSE)

#! plot
p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
  geom_point() + scale_color_manual(values = c("red", "blue"))
# show decision boundaries
w = t(svm_model$coefs) %*% svm_model$SV  # %*% = matrix multiplication
slope_1 = -w[1]/w[2]
intercept_1 = svm_model$rho / w[2]
p = p + geom_abline(slope = slope_1, intercept = intercept_1)
### here we go: can I use a shaded area between these two lines? ###
p = p + geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
                    linetype = "dashed") +
  geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
              linetype = "dashed")
print(p)

```

Thank you

-- 
Best regards,
Luigi


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Oct 23 10:26:03 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 23 Oct 2020 08:26:03 +0000
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
Message-ID: <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>

Hi

Did you try google? I got several answers using your question

e.g.
https://stackoverflow.com/questions/54687321/fill-area-between-lines-using-g
gplot-in-r

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> Sent: Friday, October 23, 2020 9:59 AM
> To: r-help <r-help at r-project.org>
> Subject: [R] How to shade area between lines in ggplot2
> 
> Hello,
> I am running SVM and showing the results with ggplot2. The results include
> the decision boundaries, which are two dashed lines parallel to a solid
line. I
> would like to remove the dashed lines and use a shaded area instead. How
> can I do that?
> Here is the code I wrote..
> ```
> library(e1071)
> library(ggplot2)
> 
> set.seed(100)
> x1 = rnorm(100, mean = 0.2, sd = 0.1)
> y1 = rnorm(100, mean = 0.7, sd = 0.1)
> y2 = rnorm(100, mean = 0.2, sd = 0.1)
> x2 = rnorm(100, mean = 0.75, sd = 0.1)
> df = data.frame(x = c(x1,x2), y=c(y1,y2),
>                 z=c(rep(0, length(x1)), rep(1, length(x2)))) df$z =
factor(c(rep(0,
> length(x1)), rep(1, length(x2)))) df[, "train"] <- ifelse(runif(nrow(df))
< 0.8, 1, 0)
> trainset <- df[df$train == 1, ] testset <- df[df$train == 0, ] trainColNum
<-
> grep("train", names(df)) trainset <- trainset[, -trainColNum] testset <-
testset[,
> -trainColNum] head(trainset); str(df)
> 
> svm_model<- svm(z ~ .,
>                 data = trainset,
>                 type = "C-classification",
>                 kernel = "linear",
>                 scale = FALSE)
> 
> #! plot
> p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
>   geom_point() + scale_color_manual(values = c("red", "blue")) # show
> decision boundaries w = t(svm_model$coefs) %*% svm_model$SV  # %*% =
> matrix multiplication
> slope_1 = -w[1]/w[2]
> intercept_1 = svm_model$rho / w[2]
> p = p + geom_abline(slope = slope_1, intercept = intercept_1) ### here we
go:
> can I use a shaded area between these two lines? ### p = p +
> geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
>                     linetype = "dashed") +
>   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
>               linetype = "dashed")
> print(p)
> 
> ```
> 
> Thank you
> 
> --
> Best regards,
> Luigi
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Oct 23 10:57:36 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 23 Oct 2020 10:57:36 +0200
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
 <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAMk+s2RK6+CFa8EC0QUL5W_-vvYfTYfRM=Sm3k1-8GZXSXyP-Q@mail.gmail.com>

I don't know if I can find a case similar to my need.
I tried with:
```
p = p + geom_abline(slope = slope_1, intercept = intercept_1, col =
"royalblue4")
p = p + geom_line() +
  geom_hline(yintercept = 5) +
  theme_classic() +
  geom_ribbon(aes(ymin=intercept_1 - 1/w[2],ymax=intercept_1 +
1/w[2]), fill="blue")
```
but did not work.
Thanks anyway

On Fri, Oct 23, 2020 at 10:26 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi
>
> Did you try google? I got several answers using your question
>
> e.g.
> https://stackoverflow.com/questions/54687321/fill-area-between-lines-using-g
> gplot-in-r
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> > Sent: Friday, October 23, 2020 9:59 AM
> > To: r-help <r-help at r-project.org>
> > Subject: [R] How to shade area between lines in ggplot2
> >
> > Hello,
> > I am running SVM and showing the results with ggplot2. The results include
> > the decision boundaries, which are two dashed lines parallel to a solid
> line. I
> > would like to remove the dashed lines and use a shaded area instead. How
> > can I do that?
> > Here is the code I wrote..
> > ```
> > library(e1071)
> > library(ggplot2)
> >
> > set.seed(100)
> > x1 = rnorm(100, mean = 0.2, sd = 0.1)
> > y1 = rnorm(100, mean = 0.7, sd = 0.1)
> > y2 = rnorm(100, mean = 0.2, sd = 0.1)
> > x2 = rnorm(100, mean = 0.75, sd = 0.1)
> > df = data.frame(x = c(x1,x2), y=c(y1,y2),
> >                 z=c(rep(0, length(x1)), rep(1, length(x2)))) df$z =
> factor(c(rep(0,
> > length(x1)), rep(1, length(x2)))) df[, "train"] <- ifelse(runif(nrow(df))
> < 0.8, 1, 0)
> > trainset <- df[df$train == 1, ] testset <- df[df$train == 0, ] trainColNum
> <-
> > grep("train", names(df)) trainset <- trainset[, -trainColNum] testset <-
> testset[,
> > -trainColNum] head(trainset); str(df)
> >
> > svm_model<- svm(z ~ .,
> >                 data = trainset,
> >                 type = "C-classification",
> >                 kernel = "linear",
> >                 scale = FALSE)
> >
> > #! plot
> > p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> >   geom_point() + scale_color_manual(values = c("red", "blue")) # show
> > decision boundaries w = t(svm_model$coefs) %*% svm_model$SV  # %*% =
> > matrix multiplication
> > slope_1 = -w[1]/w[2]
> > intercept_1 = svm_model$rho / w[2]
> > p = p + geom_abline(slope = slope_1, intercept = intercept_1) ### here we
> go:
> > can I use a shaded area between these two lines? ### p = p +
> > geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
> >                     linetype = "dashed") +
> >   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
> >               linetype = "dashed")
> > print(p)
> >
> > ```
> >
> > Thank you
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Oct 23 11:03:14 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 23 Oct 2020 11:03:14 +0200
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
 <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAMk+s2SQHtzcagFEz+yhC1_85p5nsozxc95r=9XMYj-KCngv5A@mail.gmail.com>

I tried from this website
https://community.rstudio.com/t/fill-area-between-lines-using-ggplot-in-r/35355/2
it looked promising but did not work for me:
```
#! plot
p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
  geom_point() + scale_color_manual(values = c("red", "blue"))
# show support vectors
df_sv = trainset[svm_model$index, ]
p = p + geom_point(data = df_sv, aes(x=x, y=y),
                   color="purple", size=4, alpha=0.5)
# show hyperplane (decision boundaries are off set by 1/w[2])
w = t(svm_model$coefs) %*% svm_model$SV  # %*% = matrix multiplication
slope_1 = -w[1]/w[2]
intercept_1 = svm_model$rho / w[2]
p = p + geom_abline(slope = slope_1, intercept = intercept_1, col =
"royalblue4")
p = p + geom_ribbon(aes(ymin = intercept_1 - 1/w[2],
                        ymax = intercept_1 + 1/w[2]), fill = "grey70")
```

On Fri, Oct 23, 2020 at 10:26 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi
>
> Did you try google? I got several answers using your question
>
> e.g.
> https://stackoverflow.com/questions/54687321/fill-area-between-lines-using-g
> gplot-in-r
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> > Sent: Friday, October 23, 2020 9:59 AM
> > To: r-help <r-help at r-project.org>
> > Subject: [R] How to shade area between lines in ggplot2
> >
> > Hello,
> > I am running SVM and showing the results with ggplot2. The results include
> > the decision boundaries, which are two dashed lines parallel to a solid
> line. I
> > would like to remove the dashed lines and use a shaded area instead. How
> > can I do that?
> > Here is the code I wrote..
> > ```
> > library(e1071)
> > library(ggplot2)
> >
> > set.seed(100)
> > x1 = rnorm(100, mean = 0.2, sd = 0.1)
> > y1 = rnorm(100, mean = 0.7, sd = 0.1)
> > y2 = rnorm(100, mean = 0.2, sd = 0.1)
> > x2 = rnorm(100, mean = 0.75, sd = 0.1)
> > df = data.frame(x = c(x1,x2), y=c(y1,y2),
> >                 z=c(rep(0, length(x1)), rep(1, length(x2)))) df$z =
> factor(c(rep(0,
> > length(x1)), rep(1, length(x2)))) df[, "train"] <- ifelse(runif(nrow(df))
> < 0.8, 1, 0)
> > trainset <- df[df$train == 1, ] testset <- df[df$train == 0, ] trainColNum
> <-
> > grep("train", names(df)) trainset <- trainset[, -trainColNum] testset <-
> testset[,
> > -trainColNum] head(trainset); str(df)
> >
> > svm_model<- svm(z ~ .,
> >                 data = trainset,
> >                 type = "C-classification",
> >                 kernel = "linear",
> >                 scale = FALSE)
> >
> > #! plot
> > p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> >   geom_point() + scale_color_manual(values = c("red", "blue")) # show
> > decision boundaries w = t(svm_model$coefs) %*% svm_model$SV  # %*% =
> > matrix multiplication
> > slope_1 = -w[1]/w[2]
> > intercept_1 = svm_model$rho / w[2]
> > p = p + geom_abline(slope = slope_1, intercept = intercept_1) ### here we
> go:
> > can I use a shaded area between these two lines? ### p = p +
> > geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
> >                     linetype = "dashed") +
> >   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
> >               linetype = "dashed")
> > print(p)
> >
> > ```
> >
> > Thank you
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Oct 23 11:10:53 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 23 Oct 2020 11:10:53 +0200
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
 <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAMk+s2SxrOkFkG4zE3f+GNLMDgXojdpwGVtewHP_dXNcQ2i7pg@mail.gmail.com>

also from this site: https://plotly.com/ggplot2/geom_ribbon/
I get the answer is geom_ribbon but I am still missing something
```
#! plot
p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
  geom_point() + scale_color_manual(values = c("red", "blue"))
# show support vectors
df_sv = trainset[svm_model$index, ]
p = p + geom_point(data = df_sv, aes(x=x, y=y),
                   color="purple", size=4, alpha=0.5)
# show hyperplane (decision boundaries are off set by 1/w[2])
w = t(svm_model$coefs) %*% svm_model$SV  # %*% = matrix multiplication
slope_1 = -w[1]/w[2]
intercept_1 = svm_model$rho / w[2]
p = p + geom_abline(slope = slope_1, intercept = intercept_1, col =
"royalblue4")
p = p +     geom_ribbon(aes(ymin=intercept_1 - 1/w[2],
                            ymax=intercept_1 + 1/w[2],
                            x=x, fill = "band"), alpha = 0.3) +
  scale_fill_manual("",values="grey12")
```

On Fri, Oct 23, 2020 at 10:26 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi
>
> Did you try google? I got several answers using your question
>
> e.g.
> https://stackoverflow.com/questions/54687321/fill-area-between-lines-using-g
> gplot-in-r
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> > Sent: Friday, October 23, 2020 9:59 AM
> > To: r-help <r-help at r-project.org>
> > Subject: [R] How to shade area between lines in ggplot2
> >
> > Hello,
> > I am running SVM and showing the results with ggplot2. The results include
> > the decision boundaries, which are two dashed lines parallel to a solid
> line. I
> > would like to remove the dashed lines and use a shaded area instead. How
> > can I do that?
> > Here is the code I wrote..
> > ```
> > library(e1071)
> > library(ggplot2)
> >
> > set.seed(100)
> > x1 = rnorm(100, mean = 0.2, sd = 0.1)
> > y1 = rnorm(100, mean = 0.7, sd = 0.1)
> > y2 = rnorm(100, mean = 0.2, sd = 0.1)
> > x2 = rnorm(100, mean = 0.75, sd = 0.1)
> > df = data.frame(x = c(x1,x2), y=c(y1,y2),
> >                 z=c(rep(0, length(x1)), rep(1, length(x2)))) df$z =
> factor(c(rep(0,
> > length(x1)), rep(1, length(x2)))) df[, "train"] <- ifelse(runif(nrow(df))
> < 0.8, 1, 0)
> > trainset <- df[df$train == 1, ] testset <- df[df$train == 0, ] trainColNum
> <-
> > grep("train", names(df)) trainset <- trainset[, -trainColNum] testset <-
> testset[,
> > -trainColNum] head(trainset); str(df)
> >
> > svm_model<- svm(z ~ .,
> >                 data = trainset,
> >                 type = "C-classification",
> >                 kernel = "linear",
> >                 scale = FALSE)
> >
> > #! plot
> > p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> >   geom_point() + scale_color_manual(values = c("red", "blue")) # show
> > decision boundaries w = t(svm_model$coefs) %*% svm_model$SV  # %*% =
> > matrix multiplication
> > slope_1 = -w[1]/w[2]
> > intercept_1 = svm_model$rho / w[2]
> > p = p + geom_abline(slope = slope_1, intercept = intercept_1) ### here we
> go:
> > can I use a shaded area between these two lines? ### p = p +
> > geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
> >                     linetype = "dashed") +
> >   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
> >               linetype = "dashed")
> > print(p)
> >
> > ```
> >
> > Thank you
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Oct 23 14:35:04 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 23 Oct 2020 12:35:04 +0000
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <CAMk+s2SxrOkFkG4zE3f+GNLMDgXojdpwGVtewHP_dXNcQ2i7pg@mail.gmail.com>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
 <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
 <CAMk+s2SxrOkFkG4zE3f+GNLMDgXojdpwGVtewHP_dXNcQ2i7pg@mail.gmail.com>
Message-ID: <1babd1ae842a48ceaa1c11055762f933@SRVEXCHCM1302.precheza.cz>

Hi

What about something like

p+geom_ribbon(aes(ymin = slope_1*x + intercept_1 - 1/w[2],
ymax = slope_1*x + intercept_1 + 1/w[2], fill = "grey70", alpha=0.1))

Cheers
Petr

> -----Original Message-----
> From: Luigi Marongiu <marongiu.luigi at gmail.com>
> Sent: Friday, October 23, 2020 11:11 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] How to shade area between lines in ggplot2
>
> also from this site: https://plotly.com/ggplot2/geom_ribbon/
> I get the answer is geom_ribbon but I am still missing something ``` #! plot 
> p
> = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
>   geom_point() + scale_color_manual(values = c("red", "blue")) # show
> support vectors df_sv = trainset[svm_model$index, ] p = p +
> geom_point(data = df_sv, aes(x=x, y=y),
>                    color="purple", size=4, alpha=0.5) # show hyperplane 
> (decision
> boundaries are off set by 1/w[2]) w = t(svm_model$coefs) %*%
> svm_model$SV  # %*% = matrix multiplication
> slope_1 = -w[1]/w[2]
> intercept_1 = svm_model$rho / w[2]
> p = p + geom_abline(slope = slope_1, intercept = intercept_1, col =
> "royalblue4")
> p = p +     geom_ribbon(aes(ymin=intercept_1 - 1/w[2],
>                             ymax=intercept_1 + 1/w[2],
>                             x=x, fill = "band"), alpha = 0.3) +
>   scale_fill_manual("",values="grey12")
> ```
>
> On Fri, Oct 23, 2020 at 10:26 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hi
> >
> > Did you try google? I got several answers using your question
> >
> > e.g.
> > https://stackoverflow.com/questions/54687321/fill-area-between-lines-u
> > sing-g
> > gplot-in-r
> >
> > Cheers
> > Petr
> >
> > > -----Original Message-----
> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi
> > > Marongiu
> > > Sent: Friday, October 23, 2020 9:59 AM
> > > To: r-help <r-help at r-project.org>
> > > Subject: [R] How to shade area between lines in ggplot2
> > >
> > > Hello,
> > > I am running SVM and showing the results with ggplot2. The results
> > > include the decision boundaries, which are two dashed lines parallel
> > > to a solid
> > line. I
> > > would like to remove the dashed lines and use a shaded area instead.
> > > How can I do that?
> > > Here is the code I wrote..
> > > ```
> > > library(e1071)
> > > library(ggplot2)
> > >
> > > set.seed(100)
> > > x1 = rnorm(100, mean = 0.2, sd = 0.1)
> > > y1 = rnorm(100, mean = 0.7, sd = 0.1)
> > > y2 = rnorm(100, mean = 0.2, sd = 0.1)
> > > x2 = rnorm(100, mean = 0.75, sd = 0.1) df = data.frame(x = c(x1,x2),
> > > y=c(y1,y2),
> > >                 z=c(rep(0, length(x1)), rep(1, length(x2)))) df$z =
> > factor(c(rep(0,
> > > length(x1)), rep(1, length(x2)))) df[, "train"] <-
> > > ifelse(runif(nrow(df))
> > < 0.8, 1, 0)
> > > trainset <- df[df$train == 1, ] testset <- df[df$train == 0, ]
> > > trainColNum
> > <-
> > > grep("train", names(df)) trainset <- trainset[, -trainColNum]
> > > testset <-
> > testset[,
> > > -trainColNum] head(trainset); str(df)
> > >
> > > svm_model<- svm(z ~ .,
> > >                 data = trainset,
> > >                 type = "C-classification",
> > >                 kernel = "linear",
> > >                 scale = FALSE)
> > >
> > > #! plot
> > > p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> > >   geom_point() + scale_color_manual(values = c("red", "blue")) #
> > > show decision boundaries w = t(svm_model$coefs) %*% svm_model$SV
> #
> > > %*% = matrix multiplication
> > > slope_1 = -w[1]/w[2]
> > > intercept_1 = svm_model$rho / w[2]
> > > p = p + geom_abline(slope = slope_1, intercept = intercept_1) ###
> > > here we
> > go:
> > > can I use a shaded area between these two lines? ### p = p +
> > > geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
> > >                     linetype = "dashed") +
> > >   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
> > >               linetype = "dashed")
> > > print(p)
> > >
> > > ```
> > >
> > > Thank you
> > >
> > > --
> > > Best regards,
> > > Luigi
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-
> > > guide.html and provide commented, minimal, self-contained,
> > > reproducible code.
>
>
>
> --
> Best regards,
> Luigi

From r-p@ck@ge@ @end|ng |rom r-project@org  Fri Oct 23 15:15:01 2020
From: r-p@ck@ge@ @end|ng |rom r-project@org (Marc Schwartz via R-packages)
Date: Fri, 23 Oct 2020 09:15:01 -0400
Subject: [R] [R-pkgs] WriteXLS Version 6.0.0 Released
Message-ID: <068A6271-39B5-42CA-9E96-FC99EA68F137@me.com>

Hi All,

WriteXLS version 6.0.0 has been released and is available on CRAN.

The key changes are:

1. More robust handling of embedded newline ('\n') and carriage return ('\r') characters, double quotes, and two character sequences of a backslash character ('\') followed by another character, within a data value, has been implemented. An indirect consequence of this more robust handling, is better support for multiline cells in the resultant Excel worksheet.

2. New 'AllText' argument to globally handle/overcome Excel's default reformatting of erstwhile numeric values with leading and/or trailing zeros. This option enhances prior improvements to preserving leading and/or trailing zeros on a worksheet cell specific basis.

3. Updated Perl libraries are included as apropos.


Regards,

Marc Schwartz

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Oct 23 15:29:39 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 23 Oct 2020 15:29:39 +0200
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <1babd1ae842a48ceaa1c11055762f933@SRVEXCHCM1302.precheza.cz>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
 <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
 <CAMk+s2SxrOkFkG4zE3f+GNLMDgXojdpwGVtewHP_dXNcQ2i7pg@mail.gmail.com>
 <1babd1ae842a48ceaa1c11055762f933@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAMk+s2R9cnXa71XttRN7STqUTcPF2oed5BMnjBin5=DfpiHQTA@mail.gmail.com>

Thank you, but this split the area into two and distorts the shape of
the plot. (compared to
```
p + geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
                    linetype = "dashed", col = "royalblue") +
  geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
              linetype = "dashed", col = "royalblue")
```

Why there is a hole in the middle of the ribbon? and the color is not grey...

On Fri, Oct 23, 2020 at 2:35 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi
>
> What about something like
>
> p+geom_ribbon(aes(ymin = slope_1*x + intercept_1 - 1/w[2],
> ymax = slope_1*x + intercept_1 + 1/w[2], fill = "grey70", alpha=0.1))
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: Luigi Marongiu <marongiu.luigi at gmail.com>
> > Sent: Friday, October 23, 2020 11:11 AM
> > To: PIKAL Petr <petr.pikal at precheza.cz>
> > Cc: r-help <r-help at r-project.org>
> > Subject: Re: [R] How to shade area between lines in ggplot2
> >
> > also from this site: https://plotly.com/ggplot2/geom_ribbon/
> > I get the answer is geom_ribbon but I am still missing something ``` #! plot
> > p
> > = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> >   geom_point() + scale_color_manual(values = c("red", "blue")) # show
> > support vectors df_sv = trainset[svm_model$index, ] p = p +
> > geom_point(data = df_sv, aes(x=x, y=y),
> >                    color="purple", size=4, alpha=0.5) # show hyperplane
> > (decision
> > boundaries are off set by 1/w[2]) w = t(svm_model$coefs) %*%
> > svm_model$SV  # %*% = matrix multiplication
> > slope_1 = -w[1]/w[2]
> > intercept_1 = svm_model$rho / w[2]
> > p = p + geom_abline(slope = slope_1, intercept = intercept_1, col =
> > "royalblue4")
> > p = p +     geom_ribbon(aes(ymin=intercept_1 - 1/w[2],
> >                             ymax=intercept_1 + 1/w[2],
> >                             x=x, fill = "band"), alpha = 0.3) +
> >   scale_fill_manual("",values="grey12")
> > ```
> >
> > On Fri, Oct 23, 2020 at 10:26 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> > >
> > > Hi
> > >
> > > Did you try google? I got several answers using your question
> > >
> > > e.g.
> > > https://stackoverflow.com/questions/54687321/fill-area-between-lines-u
> > > sing-g
> > > gplot-in-r
> > >
> > > Cheers
> > > Petr
> > >
> > > > -----Original Message-----
> > > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi
> > > > Marongiu
> > > > Sent: Friday, October 23, 2020 9:59 AM
> > > > To: r-help <r-help at r-project.org>
> > > > Subject: [R] How to shade area between lines in ggplot2
> > > >
> > > > Hello,
> > > > I am running SVM and showing the results with ggplot2. The results
> > > > include the decision boundaries, which are two dashed lines parallel
> > > > to a solid
> > > line. I
> > > > would like to remove the dashed lines and use a shaded area instead.
> > > > How can I do that?
> > > > Here is the code I wrote..
> > > > ```
> > > > library(e1071)
> > > > library(ggplot2)
> > > >
> > > > set.seed(100)
> > > > x1 = rnorm(100, mean = 0.2, sd = 0.1)
> > > > y1 = rnorm(100, mean = 0.7, sd = 0.1)
> > > > y2 = rnorm(100, mean = 0.2, sd = 0.1)
> > > > x2 = rnorm(100, mean = 0.75, sd = 0.1) df = data.frame(x = c(x1,x2),
> > > > y=c(y1,y2),
> > > >                 z=c(rep(0, length(x1)), rep(1, length(x2)))) df$z =
> > > factor(c(rep(0,
> > > > length(x1)), rep(1, length(x2)))) df[, "train"] <-
> > > > ifelse(runif(nrow(df))
> > > < 0.8, 1, 0)
> > > > trainset <- df[df$train == 1, ] testset <- df[df$train == 0, ]
> > > > trainColNum
> > > <-
> > > > grep("train", names(df)) trainset <- trainset[, -trainColNum]
> > > > testset <-
> > > testset[,
> > > > -trainColNum] head(trainset); str(df)
> > > >
> > > > svm_model<- svm(z ~ .,
> > > >                 data = trainset,
> > > >                 type = "C-classification",
> > > >                 kernel = "linear",
> > > >                 scale = FALSE)
> > > >
> > > > #! plot
> > > > p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> > > >   geom_point() + scale_color_manual(values = c("red", "blue")) #
> > > > show decision boundaries w = t(svm_model$coefs) %*% svm_model$SV
> > #
> > > > %*% = matrix multiplication
> > > > slope_1 = -w[1]/w[2]
> > > > intercept_1 = svm_model$rho / w[2]
> > > > p = p + geom_abline(slope = slope_1, intercept = intercept_1) ###
> > > > here we
> > > go:
> > > > can I use a shaded area between these two lines? ### p = p +
> > > > geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
> > > >                     linetype = "dashed") +
> > > >   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
> > > >               linetype = "dashed")
> > > > print(p)
> > > >
> > > > ```
> > > >
> > > > Thank you
> > > >
> > > > --
> > > > Best regards,
> > > > Luigi
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide http://www.R-project.org/posting-
> > > > guide.html and provide commented, minimal, self-contained,
> > > > reproducible code.
> >
> >
> >
> > --
> > Best regards,
> > Luigi



-- 
Best regards,
Luigi


From rkoenker @end|ng |rom ||||no|@@edu  Fri Oct 23 15:32:42 2020
From: rkoenker @end|ng |rom ||||no|@@edu (Koenker, Roger W)
Date: Fri, 23 Oct 2020 13:32:42 +0000
Subject: [R] formula mungeing
Message-ID: <2FB882D8-A0D0-4EB7-B899-78C75AF4A8AB@illinois.edu>

Suppose I have a formula like this:

	f <- y ~ qss(x, lambda = lambdas[1]) + qss(z, lambdas[2]) + s

I?d like a function, g(lambdas, f)  that would take g(c(2,3), f) and produce the new
formula:

	y ~ qss(x, lambda = 2) + qss(z, 3) + s

For only two qss terms I have been using 

	g <- function(lambdas, f){
		F <- deparse(f) 
		F <- gsub("lambdas\\[1\\]",lambdas[1],F)
		F <- gsub("lambdas\\[2\\]",lambdas[2],F)
		formula(F) 
	}
but this is ugly and doesn?t extend nicely to more qss terms.  Isn?t there some
bquote() magic that can be invoked?  Or something else entirely?

From ggrothend|eck @end|ng |rom gm@||@com  Fri Oct 23 17:15:38 2020
From: ggrothend|eck @end|ng |rom gm@||@com (Gabor Grothendieck)
Date: Fri, 23 Oct 2020 11:15:38 -0400
Subject: [R] formula mungeing
In-Reply-To: <2FB882D8-A0D0-4EB7-B899-78C75AF4A8AB@illinois.edu>
References: <2FB882D8-A0D0-4EB7-B899-78C75AF4A8AB@illinois.edu>
Message-ID: <CAP01uRn3WTMtm+13vMNh8GgX+TASqAtNWmR2wR=QhHC2is-Amg@mail.gmail.com>

Recursively walk the formula performing the replacement:

g <- function(e, ...) {
    if (length(e) > 1) {
        if (identical(e[[2]], as.name(names(list(...))))) {
          e <- eval(e, list(...))
        }
        if (length(e) > 1) for (i in 1:length(e)) e[[i]] <- Recall(e[[i]], ...)
    }
    e
}

g(f, lambdas = 2:3)
## y ~ qss(x, lambda = 2L) + qss(z, 3L) + s

On Fri, Oct 23, 2020 at 9:33 AM Koenker, Roger W <rkoenker at illinois.edu> wrote:
>
> Suppose I have a formula like this:
>
>         f <- y ~ qss(x, lambda = lambdas[1]) + qss(z, lambdas[2]) + s
>
> I?d like a function, g(lambdas, f)  that would take g(c(2,3), f) and produce the new
> formula:
>
>         y ~ qss(x, lambda = 2) + qss(z, 3) + s
>
> For only two qss terms I have been using
>
>         g <- function(lambdas, f){
>                 F <- deparse(f)
>                 F <- gsub("lambdas\\[1\\]",lambdas[1],F)
>                 F <- gsub("lambdas\\[2\\]",lambdas[2],F)
>                 formula(F)
>         }
> but this is ugly and doesn?t extend nicely to more qss terms.  Isn?t there some
> bquote() magic that can be invoked?  Or something else entirely?
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From rkoenker @end|ng |rom ||||no|@@edu  Fri Oct 23 17:27:25 2020
From: rkoenker @end|ng |rom ||||no|@@edu (Koenker, Roger W)
Date: Fri, 23 Oct 2020 15:27:25 +0000
Subject: [R] formula mungeing
In-Reply-To: <CAP01uRn3WTMtm+13vMNh8GgX+TASqAtNWmR2wR=QhHC2is-Amg@mail.gmail.com>
References: <2FB882D8-A0D0-4EB7-B899-78C75AF4A8AB@illinois.edu>
 <CAP01uRn3WTMtm+13vMNh8GgX+TASqAtNWmR2wR=QhHC2is-Amg@mail.gmail.com>
Message-ID: <4F4601DE-0AAE-47C8-BD5D-1AF9702FD52D@illinois.edu>

Thanks, Gabor!  Very elegant!

> On Oct 23, 2020, at 4:15 PM, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> 
> Recursively walk the formula performing the replacement:
> 
> g <- function(e, ...) {
>    if (length(e) > 1) {
>        if (identical(e[[2]], as.name(names(list(...))))) {
>          e <- eval(e, list(...))
>        }
>        if (length(e) > 1) for (i in 1:length(e)) e[[i]] <- Recall(e[[i]], ...)
>    }
>    e
> }
> 
> g(f, lambdas = 2:3)
> ## y ~ qss(x, lambda = 2L) + qss(z, 3L) + s
> 
> On Fri, Oct 23, 2020 at 9:33 AM Koenker, Roger W <rkoenker at illinois.edu> wrote:
>> 
>> Suppose I have a formula like this:
>> 
>>        f <- y ~ qss(x, lambda = lambdas[1]) + qss(z, lambdas[2]) + s
>> 
>> I?d like a function, g(lambdas, f)  that would take g(c(2,3), f) and produce the new
>> formula:
>> 
>>        y ~ qss(x, lambda = 2) + qss(z, 3) + s
>> 
>> For only two qss terms I have been using
>> 
>>        g <- function(lambdas, f){
>>                F <- deparse(f)
>>                F <- gsub("lambdas\\[1\\]",lambdas[1],F)
>>                F <- gsub("lambdas\\[2\\]",lambdas[2],F)
>>                formula(F)
>>        }
>> but this is ugly and doesn?t extend nicely to more qss terms.  Isn?t there some
>> bquote() magic that can be invoked?  Or something else entirely?
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 
> -- 
> Statistics & Software Consulting
> GKX Group, GKX Associates Inc.
> tel: 1-877-GKX-GROUP
> email: ggrothendieck at gmail.com


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Fri Oct 23 17:55:00 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Fri, 23 Oct 2020 10:55:00 -0500
Subject: [R] R & ACLED API
References: <000701d6a954$dd7e5780$987b0680$.ref@sbcglobal.net>
Message-ID: <000701d6a954$dd7e5780$987b0680$@sbcglobal.net>

r-help Forum

 

Has anyone worked with puling ACLED (https://acleddata.com/#/dashboard) via
the ACLED API and R?

 

Jeff Reichman


	[[alternative HTML version deleted]]


From k@ttw|nke|-m|r@ @end|ng |rom un|-|@nd@u@de  Thu Oct 22 11:01:33 2020
From: k@ttw|nke|-m|r@ @end|ng |rom un|-|@nd@u@de (Mira Kattwinkel)
Date: Thu, 22 Oct 2020 11:01:33 +0200
Subject: [R] [R-pkgs] openSTARS version 1.2.2 on CRAN
Message-ID: <8a3f5759-8d4b-cc5c-3774-14782c68006d@uni-landau.de>

Dear R community

There is a new version of the openSTARS package (preparing GIS data for 
stream analysis) available on CRAN.

Major updates are:

- catch errors arising in GRASS 7.8 due to changes in v.to.db
- update setup_grass_environment; there is no need any more to initGRASS 
before

Please also find a detailed description of the package including example 
code here: 
https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0239237

Any comments, suggestions or bug reports are welcome on 
https://github.com/MiKatt/openSTARS

All the best,

Mira


-- 
Dr. Mira Kattwinkel
Quantitative Landscape Ecology
iES Landau, Institute for Environmental Sciences
University of Koblenz-Landau
Fortstra?e 7
76829 Landau
Germany
Phone: + 49 6341 280-31553
Office: Building I, Room 2.02

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From bgnum|@ @end|ng |rom gm@||@com  Fri Oct 23 13:23:55 2020
From: bgnum|@ @end|ng |rom gm@||@com (bgnumis bgnum)
Date: Fri, 23 Oct 2020 13:23:55 +0200
Subject: [R] Extracting data and saving in excel
Message-ID: <CAN25tHT8qQSgBG5am-hmwZifWAbQAaQUpPWEpdOvAjyawUtg-Q@mail.gmail.com>

Hi all,

I have a dataframe call "data", and have lots of rows. One of them
is data$`birth`
my data has been imported from an excel file in RSTUDIO

I want to obtain in a function  all rows (with the names) where
data$`birth` is bigger than 1979/01/01 and extract in a excel file as an
output (a sub-excel of the original).

Can you guide with the functions I need to use?

I have been many time out of programming and I need a bit of help to get in
fit.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Oct 23 18:13:07 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 23 Oct 2020 17:13:07 +0100
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
Message-ID: <1b211dc1-06dc-431c-ef67-51e2db995391@sapo.pt>

Hello,

What about this?


straightline <- function(x, slope, intercept) slope*x + intercept

p <- ggplot(data = trainset, aes(x=x, y=y, color=z)) +
   geom_point() +
   geom_ribbon(aes(ymin = straightline(x, slope_1, intercept_1 + 1/w[2]),
                   ymax = straightline(x, slope_1, intercept_1 - 1/w[2])),
               color = NA, fill = "grey", alpha = 0.5) +
   geom_abline(slope = slope_1, intercept = intercept_1) +
   scale_color_manual(values = c("red", "blue"))

p


Note that now the middle line is drawn last. Otherwise it will be greyed 
by the ribbon.

Hope this helps,

Rui Barradas

?s 08:58 de 23/10/20, Luigi Marongiu escreveu:
> Hello,
> I am running SVM and showing the results with ggplot2. The results
> include the decision boundaries, which are two dashed lines parallel
> to a solid line. I would like to remove the dashed lines and use a
> shaded area instead. How can I do that?
> Here is the code I wrote..
> ```
> library(e1071)
> library(ggplot2)
> 
> set.seed(100)
> x1 = rnorm(100, mean = 0.2, sd = 0.1)
> y1 = rnorm(100, mean = 0.7, sd = 0.1)
> y2 = rnorm(100, mean = 0.2, sd = 0.1)
> x2 = rnorm(100, mean = 0.75, sd = 0.1)
> df = data.frame(x = c(x1,x2), y=c(y1,y2),
>                  z=c(rep(0, length(x1)), rep(1, length(x2))))
> df$z = factor(c(rep(0, length(x1)), rep(1, length(x2))))
> df[, "train"] <- ifelse(runif(nrow(df)) < 0.8, 1, 0)
> trainset <- df[df$train == 1, ]
> testset <- df[df$train == 0, ]
> trainColNum <- grep("train", names(df))
> trainset <- trainset[, -trainColNum]
> testset <- testset[, -trainColNum]
> head(trainset); str(df)
> 
> svm_model<- svm(z ~ .,
>                  data = trainset,
>                  type = "C-classification",
>                  kernel = "linear",
>                  scale = FALSE)
> 
> #! plot
> p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
>    geom_point() + scale_color_manual(values = c("red", "blue"))
> # show decision boundaries
> w = t(svm_model$coefs) %*% svm_model$SV  # %*% = matrix multiplication
> slope_1 = -w[1]/w[2]
> intercept_1 = svm_model$rho / w[2]
> p = p + geom_abline(slope = slope_1, intercept = intercept_1)
> ### here we go: can I use a shaded area between these two lines? ###
> p = p + geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
>                      linetype = "dashed") +
>    geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
>                linetype = "dashed")
> print(p)
> 
> ```
> 
> Thank you
>


From b@||ntr@d|c@ @end|ng |rom gm@||@com  Fri Oct 23 18:18:16 2020
From: b@||ntr@d|c@ @end|ng |rom gm@||@com (Balint Radics)
Date: Fri, 23 Oct 2020 18:18:16 +0200
Subject: [R] 3d plot of earth with cut
In-Reply-To: <CAB8pepxCcuKUkZv9GzPXZ4HomL36=-=dPpJcevk4tiaJ+2Qc0A@mail.gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
 <CAB8pepxkmk=h+5U3-NHQMSspAdAL4cWpJvEvD-xiL0dz9pZ+nw@mail.gmail.com>
 <CAJeOm48YPLOU1HzR863S9Jh3ZMQSdhbTkEDYy=4PZWWGaoOuXA@mail.gmail.com>
 <CAB8pepxCcuKUkZv9GzPXZ4HomL36=-=dPpJcevk4tiaJ+2Qc0A@mail.gmail.com>
Message-ID: <CAJeOm492prhsW763xO7Fv+F5CB7oPbC5Spp=CK04Y3BRpjXVnQ@mail.gmail.com>

Dear All,

Thanks a lot for the useful help again. I manage to get it done up to a
point where I think I
just need to apply some smoothing/interpolation to get denser points, to
make it nice.
Basically, I started from Duncen's script to visualize and make the
clipping along a plane
at a slice.
Then I map my data points' values to a color palette and just plot them as
points on this
plane. Since I have already the (x,y,z) coordinates for my points in the
slice's plane
I just plot them directly. I copied the code below..

To make it nicer would be able to make a real "smooth" map on the 2D
surface, rather
than plotting all points (e.g. using polygons?).

Best,
Balint

############################################################
# Construct a plane at a given longitude
r <- 6378.1 # radius of Earth in km
fixlong <- 10.0*pi/180.0 # The longitude slice

# Construct a plane in 3D:
# Let vec(P0) = (P0x, P0y, P0z) be a point given in the plane of the
longitude
# let vec(n) = (nx, ny, nz) an orthogonal vector to this plane
# then vec(P) = (Px, Py, Pz) will be in the plane if (vec(P) - vec(P0)) *
vec(n) = 0
# We pick 2 arbitrary vectors in the plane out of 3 points
p0x <- r*cos(2)*cos(fixlong)
p0y <- r*cos(2)*sin(fixlong)
p0z <- r*sin(2)
p1x <- r*cos(2.5)*cos(fixlong)
p1y <- r*cos(2.5)*sin(fixlong)
p1z <- r*sin(2.5)
p2x <- r*cos(3)*cos(fixlong)
p2y <- r*cos(3)*sin(fixlong)
p2z <- r*sin(3)
# Make the vectors pointing to P and P0
v1x <- p1x - p0x # P
v1y <- p1y - p0y
v1z <- p1z - p0z
v2x <- p2x - p0x # P0
v2y <- p2y - p0y
v2z <- p2z - p0z

# The cross product will give a vector orthogonal to the plane, (nx, ny, nz)
nx <- v1y*v2z - v1z*v2y;
ny <- v1z*v2x - v1x*v2z;
nz <- v1x*v2y - v1y*v2x;
# normalize
nMag <- sqrt(nx*nx + ny*ny + nz*nz);
nx <- nx / nMag;
ny <- ny / nMag;
nz <- nz / nMag;

# Plane equation (vec(P) - vec(P0)) * vec(n) = 0, with P=(x, y, z), P0=(x0,
y0, z0),
# giving a*(x-x0)+b*(y-y0)+c*(z-z0) = 0, where x,x0 are two points in the
plane
# a, b, c are the normal vector coordinates
a <- -nx
b <- -ny
c <- -nz
d <- -(a*v2x + b*v2y + c*v2z )

open3d()

# Plot the globe - from Duncan
# points of a sphere
lat <- matrix(seq(90, -90, len = 50)*pi/180, 50, 50, byrow = TRUE)
long <- matrix(seq(-180, 180, len = 50)*pi/180, 50, 50)
x <- r*cos(lat)*cos(long)
y <- r*cos(lat)*sin(long)
z <- r*sin(lat)
# Plot with texture
ids <- persp3d(x, y, z, col = "white",
                texture = system.file("textures/world.png", package =
"rgl"),
                specular = "black", axes = FALSE, box = FALSE, xlab = "",
                ylab = "", zlab = "", normal_x = x, normal_y = y, normal_z
= z)

# Plot the plane across the longitude slice
#planes3d(a, b, c, d, alpha = 0.6) # optionally visualize the plane
# Apply clipping to only one side of the plane using the normal vector
clipplanes3d(a, b, c, d)

# Map something onto this plane - how? Let's try with rgl.points and
mapping the colors
# The data is: data_activity and variables are $X, $Y, $Z, $Ar
library(leaflet)
# map the colors to the data values
pal <- colorNumeric(
  palette = "Blues",
  domain = data_activity$Ar) #
# plot the points and the mapped colors
rgl.points( data_activity$X, data_activity$Y, data_activity$Z, color =
pal(data_activity$Ar), size=3)
############################################################



On Fri, Oct 23, 2020 at 1:50 AM aBBy Spurdle, ?XY <spurdle.a at gmail.com>
wrote:

> > It should be a 2D slice/plane embedded into a 3D space.
>
> I was able to come up with the plot, attached.
> My intention was to plot national boundaries on the surface of a sphere.
> And put the slice inside.
> However, I haven't (as yet) worked out how to get the coordinates for
> the boundaries.
>
> Let me know, if of any value.
> And I'll post the code.
> (But needs to be polished first)
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Oct 23 18:19:46 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 23 Oct 2020 17:19:46 +0100
Subject: [R] Extracting data and saving in excel
In-Reply-To: <CAN25tHT8qQSgBG5am-hmwZifWAbQAaQUpPWEpdOvAjyawUtg-Q@mail.gmail.com>
References: <CAN25tHT8qQSgBG5am-hmwZifWAbQAaQUpPWEpdOvAjyawUtg-Q@mail.gmail.com>
Message-ID: <3d391440-d64b-c256-114f-eb8c8b5256a4@sapo.pt>

Hello,

First coerce the column birth to class Date, then subset.


data$birth <- as.Date(data$birth)
i <- data$birth > as.Date("1979-01-01")
subdata <- data[i, ]


To write back to Excel, use write.csv or a package able to write Excel 
files directly.


Hope this helps,

Rui Barradas

?s 12:23 de 23/10/20, bgnumis bgnum escreveu:
> Hi all,
> 
> I have a dataframe call "data", and have lots of rows. One of them
> is data$`birth`
> my data has been imported from an excel file in RSTUDIO
> 
> I want to obtain in a function  all rows (with the names) where
> data$`birth` is bigger than 1979/01/01 and extract in a excel file as an
> output (a sub-excel of the original).
> 
> Can you guide with the functions I need to use?
> 
> I have been many time out of programming and I need a bit of help to get in
> fit.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bgunter@4567 @end|ng |rom gm@||@com  Fri Oct 23 19:46:17 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 23 Oct 2020 10:46:17 -0700
Subject: [R] formula mungeing
In-Reply-To: <2FB882D8-A0D0-4EB7-B899-78C75AF4A8AB@illinois.edu>
References: <2FB882D8-A0D0-4EB7-B899-78C75AF4A8AB@illinois.edu>
Message-ID: <CAGxFJbQo2MDkFAgshoi2Ht1La_qT7ra33PEkKPK=p_hsGFJcLg@mail.gmail.com>

I can't compete with Gabor's "elegant" solution, but I don't understand why
your original "ugly" approach doesn't work.

g <- function(lambdas, f){
   z <- as.character(f)
   for(i in seq_along(lambdas))
      z[3]<-  sub(paste0("lambdas[", i, "]"), lambdas[i], z[3], fixed =
TRUE)
    formula(paste0(z[c(2,1,3)], collapse = " "))
}

> f <- y ~ qss(x, lambda = lambdas[1]) + qss(z, lambdas[2]) + s
> g(1:2, f)
y ~ qss(x, lambda = 1) + qss(z, 2) + s
<environment: 0x7f930e768598>

> f <- y ~ qss(x, lambda = lambdas[1]) + qss(z, lambdas[2]) +
+     qss(z,lambdas[3]) + s
> g(3:1, f)
y ~ qss(x, lambda = 3) + qss(z, 2) + qss(z, 1) + s
<environment: 0x7f930e7404f0>

Is there maybe a problem with the environment of the created formula? Or
have I misunderstood what you wanted?

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Oct 23, 2020 at 6:33 AM Koenker, Roger W <rkoenker at illinois.edu>
wrote:

> Suppose I have a formula like this:
>
>         f <- y ~ qss(x, lambda = lambdas[1]) + qss(z, lambdas[2]) + s
>
> I?d like a function, g(lambdas, f)  that would take g(c(2,3), f) and
> produce the new
> formula:
>
>         y ~ qss(x, lambda = 2) + qss(z, 3) + s
>
> For only two qss terms I have been using
>
>         g <- function(lambdas, f){
>                 F <- deparse(f)
>                 F <- gsub("lambdas\\[1\\]",lambdas[1],F)
>                 F <- gsub("lambdas\\[2\\]",lambdas[2],F)
>                 formula(F)
>         }
> but this is ugly and doesn?t extend nicely to more qss terms.  Isn?t there
> some
> bquote() magic that can be invoked?  Or something else entirely?
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Oct 23 20:30:02 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 23 Oct 2020 14:30:02 -0400
Subject: [R] 3d plot of earth with cut
In-Reply-To: <CAJeOm492prhsW763xO7Fv+F5CB7oPbC5Spp=CK04Y3BRpjXVnQ@mail.gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
 <CAB8pepxkmk=h+5U3-NHQMSspAdAL4cWpJvEvD-xiL0dz9pZ+nw@mail.gmail.com>
 <CAJeOm48YPLOU1HzR863S9Jh3ZMQSdhbTkEDYy=4PZWWGaoOuXA@mail.gmail.com>
 <CAB8pepxCcuKUkZv9GzPXZ4HomL36=-=dPpJcevk4tiaJ+2Qc0A@mail.gmail.com>
 <CAJeOm492prhsW763xO7Fv+F5CB7oPbC5Spp=CK04Y3BRpjXVnQ@mail.gmail.com>
Message-ID: <3862cabb-ad24-cd8b-b650-f77de8648576@gmail.com>

Good to hear you've made such progress.  Just a couple of comments:

- You should use points3d() rather than rgl.points().  The latter is a 
low level function that may have unpleasant side effects, especially 
mixing it with other *3d() functions like persp3d().
- There are several ways to draw a flat surface to illustrate your data. 
  Which one to use really depends on the form of data.  With randomly 
distributed points, yours is as good as any.  If the values are a known 
function of location, there are probably better ones.

Duncan Murdoch


On 23/10/2020 12:18 p.m., Balint Radics wrote:
> Dear All,
> 
> Thanks a lot for the useful help again. I manage to get it done up to a
> point where I think I
> just need to apply some smoothing/interpolation to get denser points, to
> make it nice.
> Basically, I started from Duncen's script to visualize and make the
> clipping along a plane
> at a slice.
> Then I map my data points' values to a color palette and just plot them as
> points on this
> plane. Since I have already the (x,y,z) coordinates for my points in the
> slice's plane
> I just plot them directly. I copied the code below..
> 
> To make it nicer would be able to make a real "smooth" map on the 2D
> surface, rather
> than plotting all points (e.g. using polygons?).
> 
> Best,
> Balint
> 
> ############################################################
> # Construct a plane at a given longitude
> r <- 6378.1 # radius of Earth in km
> fixlong <- 10.0*pi/180.0 # The longitude slice
> 
> # Construct a plane in 3D:
> # Let vec(P0) = (P0x, P0y, P0z) be a point given in the plane of the
> longitude
> # let vec(n) = (nx, ny, nz) an orthogonal vector to this plane
> # then vec(P) = (Px, Py, Pz) will be in the plane if (vec(P) - vec(P0)) *
> vec(n) = 0
> # We pick 2 arbitrary vectors in the plane out of 3 points
> p0x <- r*cos(2)*cos(fixlong)
> p0y <- r*cos(2)*sin(fixlong)
> p0z <- r*sin(2)
> p1x <- r*cos(2.5)*cos(fixlong)
> p1y <- r*cos(2.5)*sin(fixlong)
> p1z <- r*sin(2.5)
> p2x <- r*cos(3)*cos(fixlong)
> p2y <- r*cos(3)*sin(fixlong)
> p2z <- r*sin(3)
> # Make the vectors pointing to P and P0
> v1x <- p1x - p0x # P
> v1y <- p1y - p0y
> v1z <- p1z - p0z
> v2x <- p2x - p0x # P0
> v2y <- p2y - p0y
> v2z <- p2z - p0z
> 
> # The cross product will give a vector orthogonal to the plane, (nx, ny, nz)
> nx <- v1y*v2z - v1z*v2y;
> ny <- v1z*v2x - v1x*v2z;
> nz <- v1x*v2y - v1y*v2x;
> # normalize
> nMag <- sqrt(nx*nx + ny*ny + nz*nz);
> nx <- nx / nMag;
> ny <- ny / nMag;
> nz <- nz / nMag;
> 
> # Plane equation (vec(P) - vec(P0)) * vec(n) = 0, with P=(x, y, z), P0=(x0,
> y0, z0),
> # giving a*(x-x0)+b*(y-y0)+c*(z-z0) = 0, where x,x0 are two points in the
> plane
> # a, b, c are the normal vector coordinates
> a <- -nx
> b <- -ny
> c <- -nz
> d <- -(a*v2x + b*v2y + c*v2z )
> 
> open3d()
> 
> # Plot the globe - from Duncan
> # points of a sphere
> lat <- matrix(seq(90, -90, len = 50)*pi/180, 50, 50, byrow = TRUE)
> long <- matrix(seq(-180, 180, len = 50)*pi/180, 50, 50)
> x <- r*cos(lat)*cos(long)
> y <- r*cos(lat)*sin(long)
> z <- r*sin(lat)
> # Plot with texture
> ids <- persp3d(x, y, z, col = "white",
>                  texture = system.file("textures/world.png", package =
> "rgl"),
>                  specular = "black", axes = FALSE, box = FALSE, xlab = "",
>                  ylab = "", zlab = "", normal_x = x, normal_y = y, normal_z
> = z)
> 
> # Plot the plane across the longitude slice
> #planes3d(a, b, c, d, alpha = 0.6) # optionally visualize the plane
> # Apply clipping to only one side of the plane using the normal vector
> clipplanes3d(a, b, c, d)
> 
> # Map something onto this plane - how? Let's try with rgl.points and
> mapping the colors
> # The data is: data_activity and variables are $X, $Y, $Z, $Ar
> library(leaflet)
> # map the colors to the data values
> pal <- colorNumeric(
>    palette = "Blues",
>    domain = data_activity$Ar) #
> # plot the points and the mapped colors
> rgl.points( data_activity$X, data_activity$Y, data_activity$Z, color =
> pal(data_activity$Ar), size=3)
> ############################################################
> 
> 
> 
> On Fri, Oct 23, 2020 at 1:50 AM aBBy Spurdle, ?XY <spurdle.a at gmail.com>
> wrote:
> 
>>> It should be a 2D slice/plane embedded into a 3D space.
>>
>> I was able to come up with the plot, attached.
>> My intention was to plot national boundaries on the surface of a sphere.
>> And put the slice inside.
>> However, I haven't (as yet) worked out how to get the coordinates for
>> the boundaries.
>>
>> Let me know, if of any value.
>> And I'll post the code.
>> (But needs to be polished first)
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ||@her @end|ng |rom p|e@@th@n@com  Sat Oct 24 02:28:26 2020
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Fri, 23 Oct 2020 17:28:26 -0700
Subject: [R] Package recommendations for outputting table with cell
 formatting
Message-ID: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>

R 4.0.2
OS X

Colleagues

I have the unfortunate need to create a large number of tables (destined for a Word document).  I need to color cells depending on the contents, e.g., blue if the value is < 0.5, red if the value is > 1.5.  
If the output went initially to Excel, that would work; outputting directly to Word would be even better.
I expect that several packages can accomplish this.  I am looking for recommendations as to which package (or combination) of packages is best to accomplish this.

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Sat Oct 24 03:15:25 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Fri, 23 Oct 2020 21:15:25 -0400
Subject: [R] Package recommendations for outputting table with cell
 formatting
In-Reply-To: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
References: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
Message-ID: <CAJc=yOF7cAMnTDChbeOEsH0ZLbiYyJ=cB4J5e+gcumNWN7-vcQ@mail.gmail.com>

Will this need to be done many times? If not, it might be just as easy
to apply conditional formatting to cells after they're already in
Excel.

On Fri, Oct 23, 2020 at 8:28 PM Dennis Fisher <fisher at plessthan.com> wrote:
>
> R 4.0.2
> OS X
>
> Colleagues
>
> I have the unfortunate need to create a large number of tables (destined for a Word document).  I need to color cells depending on the contents, e.g., blue if the value is < 0.5, red if the value is > 1.5.
> If the output went initially to Excel, that would work; outputting directly to Word would be even better.
> I expect that several packages can accomplish this.  I am looking for recommendations as to which package (or combination) of packages is best to accomplish this.
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His


From ||@her @end|ng |rom p|e@@th@n@com  Sat Oct 24 03:35:05 2020
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Fri, 23 Oct 2020 18:35:05 -0700
Subject: [R] Package recommendations for outputting table with cell
 formatting
In-Reply-To: <CAJc=yOF7cAMnTDChbeOEsH0ZLbiYyJ=cB4J5e+gcumNWN7-vcQ@mail.gmail.com>
References: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
 <CAJc=yOF7cAMnTDChbeOEsH0ZLbiYyJ=cB4J5e+gcumNWN7-vcQ@mail.gmail.com>
Message-ID: <B0860721-52FB-4E18-A18A-785545C2FC82@plessthan.com>

Patrick

Doing this in Excel is certainly an option.  But I would like to learn how to do it in R.

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com




> On Oct 23, 2020, at 6:15 PM, Patrick (Malone Quantitative) <malone at malonequantitative.com> wrote:
> 
> Will this need to be done many times? If not, it might be just as easy
> to apply conditional formatting to cells after they're already in
> Excel.
> 
> On Fri, Oct 23, 2020 at 8:28 PM Dennis Fisher <fisher at plessthan.com> wrote:
>> 
>> R 4.0.2
>> OS X
>> 
>> Colleagues
>> 
>> I have the unfortunate need to create a large number of tables (destined for a Word document).  I need to color cells depending on the contents, e.g., blue if the value is < 0.5, red if the value is > 1.5.
>> If the output went initially to Excel, that would work; outputting directly to Word would be even better.
>> I expect that several packages can accomplish this.  I am looking for recommendations as to which package (or combination) of packages is best to accomplish this.
>> 
>> Dennis
>> 
>> Dennis Fisher MD
>> P < (The "P Less Than" Company)
>> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>> www.PLessThan.com
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 
> -- 
> Patrick S. Malone, Ph.D., Malone Quantitative
> NEW Service Models: http://malonequantitative.com
> 
> He/Him/His


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Oct 24 03:36:52 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 23 Oct 2020 18:36:52 -0700
Subject: [R] Package recommendations for outputting table with cell
 formatting
In-Reply-To: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
References: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
Message-ID: <AFE086D0-1ED0-48A0-99B6-0403C0DAEB8C@dcn.davis.ca.us>

I would go straight to Word using flextable (table layout) and officer (Word-specific formatting) within an rmarkdown document (e.g. bookdown:: word_document2 to manage overall structure and generate captions). Officer without rmarkdown may be able to generate true Word captions with bookmarks to cross-reference, but it is more tedious to set up than rmarkdown.

On October 23, 2020 5:28:26 PM PDT, Dennis Fisher <fisher at plessthan.com> wrote:
>R 4.0.2
>OS X
>
>Colleagues
>
>I have the unfortunate need to create a large number of tables
>(destined for a Word document).  I need to color cells depending on the
>contents, e.g., blue if the value is < 0.5, red if the value is > 1.5. 
>
>If the output went initially to Excel, that would work; outputting
>directly to Word would be even better.
>I expect that several packages can accomplish this.  I am looking for
>recommendations as to which package (or combination) of packages is
>best to accomplish this.
>
>Dennis
>
>Dennis Fisher MD
>P < (The "P Less Than" Company)
>Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>www.PLessThan.com
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jrkr|de@u @end|ng |rom gm@||@com  Sat Oct 24 05:10:59 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Fri, 23 Oct 2020 23:10:59 -0400
Subject: [R] Package recommendations for outputting table with cell
 formatting
In-Reply-To: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
References: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
Message-ID: <CAKZQJMAQ-te4gidnyRrgL2Rm+2gSgdW5k_m581WHK=Q-AZVv6Q@mail.gmail.com>

This comes with no guarantee since i have only tried one or two packages
mentioned but have a look at <a href="
https://rfortherestofus.com/2019/11/how-to-make-beautiful-tables-in-r/"> R
Tables</a>.


On Fri, 23 Oct 2020 at 20:28, Dennis Fisher <fisher at plessthan.com> wrote:

> R 4.0.2
> OS X
>
> Colleagues
>
> I have the unfortunate need to create a large number of tables (destined
> for a Word document).  I need to color cells depending on the contents,
> e.g., blue if the value is < 0.5, red if the value is > 1.5.
> If the output went initially to Excel, that would work; outputting
> directly to Word would be even better.
> I expect that several packages can accomplish this.  I am looking for
> recommendations as to which package (or combination) of packages is best to
> accomplish this.
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Sat Oct 24 05:24:05 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Fri, 23 Oct 2020 23:24:05 -0400
Subject: [R] [External] Re: Package recommendations for outputting table
 with cell formatting
In-Reply-To: <CAKZQJMAQ-te4gidnyRrgL2Rm+2gSgdW5k_m581WHK=Q-AZVv6Q@mail.gmail.com>
References: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
 <CAKZQJMAQ-te4gidnyRrgL2Rm+2gSgdW5k_m581WHK=Q-AZVv6Q@mail.gmail.com>
Message-ID: <CAGx1TMDoBAo2ij6a6itbAMnMbfmxCb3p27zk7GVWJfp7GOj9Dw@mail.gmail.com>

To John and everyone else,

Please add Hmisc::latex to your  how-to-make-beautiful-tables-in-r document.
We first included latex() in S in 1995, and it is still actively
maintained and improved.

Rich

Here are the first few lines of ?latex

Convert an S object to LaTeX, and Related Utilities

Description:

     ?latex? converts its argument to a ?.tex? file appropriate for
     inclusion in a LaTeX2e document.  ?latex? is a generic function
     that calls one of ?latex.default?, ?latex.function?, ?latex.list?.

     ?latex.default? does appropriate rounding and decimal alignment
     and produces a file containing a LaTeX tabular environment to
     print the matrix or data.frame ?x? as a table.

     ?latex.function? prepares an S function for printing by issuing
     ?sed? commands that are similar to those in the ?S.to.latex?
     procedure in the ?s.to.latex? package (Chambers and Hastie, 1993).
     ?latex.function? can also produce ?verbatim? output or output that
     works with the ?Sweavel? LaTeX style at <URL:
     http://biostat.mc.vanderbilt.edu/SweaveTemplate>.


On Fri, Oct 23, 2020 at 11:11 PM John Kane <jrkrideau at gmail.com> wrote:
>
> This comes with no guarantee since i have only tried one or two packages
> mentioned but have a look at <a href="
> https://rfortherestofus.com/2019/11/how-to-make-beautiful-tables-in-r/"> R
> Tables</a>.
>
>
> On Fri, 23 Oct 2020 at 20:28, Dennis Fisher <fisher at plessthan.com> wrote:
>
> > R 4.0.2
> > OS X
> >
> > Colleagues
> >
> > I have the unfortunate need to create a large number of tables (destined
> > for a Word document).  I need to color cells depending on the contents,
> > e.g., blue if the value is < 0.5, red if the value is > 1.5.
> > If the output went initially to Excel, that would work; outputting
> > directly to Word would be even better.
> > I expect that several packages can accomplish this.  I am looking for
> > recommendations as to which package (or combination) of packages is best to
> > accomplish this.
> >
> > Dennis
> >
> > Dennis Fisher MD
> > P < (The "P Less Than" Company)
> > Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> > www.PLessThan.com
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>
> --
> John Kane
> Kingston ON Canada
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sat Oct 24 05:26:11 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 23 Oct 2020 21:26:11 -0600
Subject: [R] [External] Re: Package recommendations for outputting table
 with cell formatting
In-Reply-To: <CAGx1TMDoBAo2ij6a6itbAMnMbfmxCb3p27zk7GVWJfp7GOj9Dw@mail.gmail.com>
References: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
 <CAKZQJMAQ-te4gidnyRrgL2Rm+2gSgdW5k_m581WHK=Q-AZVv6Q@mail.gmail.com>
 <CAGx1TMDoBAo2ij6a6itbAMnMbfmxCb3p27zk7GVWJfp7GOj9Dw@mail.gmail.com>
Message-ID: <CACxE24=p3B1H7fJbudd0PG-cVyjx3LaXHuKVoL6dB9zt44dOkg@mail.gmail.com>

That latex() function is the best thing since sliced bread, Coca Cola, etc.!

Thanks


On Fri, Oct 23, 2020 at 9:24 PM Richard M. Heiberger <rmh at temple.edu> wrote:

> To John and everyone else,
>
> Please add Hmisc::latex to your  how-to-make-beautiful-tables-in-r
> document.
> We first included latex() in S in 1995, and it is still actively
> maintained and improved.
>
> Rich
>
> Here are the first few lines of ?latex
>
> Convert an S object to LaTeX, and Related Utilities
>
> Description:
>
>      ?latex? converts its argument to a ?.tex? file appropriate for
>      inclusion in a LaTeX2e document.  ?latex? is a generic function
>      that calls one of ?latex.default?, ?latex.function?, ?latex.list?.
>
>      ?latex.default? does appropriate rounding and decimal alignment
>      and produces a file containing a LaTeX tabular environment to
>      print the matrix or data.frame ?x? as a table.
>
>      ?latex.function? prepares an S function for printing by issuing
>      ?sed? commands that are similar to those in the ?S.to.latex?
>      procedure in the ?s.to.latex? package (Chambers and Hastie, 1993).
>      ?latex.function? can also produce ?verbatim? output or output that
>      works with the ?Sweavel? LaTeX style at <URL:
>      http://biostat.mc.vanderbilt.edu/SweaveTemplate>.
>
>
> On Fri, Oct 23, 2020 at 11:11 PM John Kane <jrkrideau at gmail.com> wrote:
> >
> > This comes with no guarantee since i have only tried one or two packages
> > mentioned but have a look at <a href="
> > https://rfortherestofus.com/2019/11/how-to-make-beautiful-tables-in-r/">
> R
> > Tables</a>.
> >
> >
> > On Fri, 23 Oct 2020 at 20:28, Dennis Fisher <fisher at plessthan.com>
> wrote:
> >
> > > R 4.0.2
> > > OS X
> > >
> > > Colleagues
> > >
> > > I have the unfortunate need to create a large number of tables
> (destined
> > > for a Word document).  I need to color cells depending on the contents,
> > > e.g., blue if the value is < 0.5, red if the value is > 1.5.
> > > If the output went initially to Excel, that would work; outputting
> > > directly to Word would be even better.
> > > I expect that several packages can accomplish this.  I am looking for
> > > recommendations as to which package (or combination) of packages is
> best to
> > > accomplish this.
> > >
> > > Dennis
> > >
> > > Dennis Fisher MD
> > > P < (The "P Less Than" Company)
> > > Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> > > www.PLessThan.com
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > John Kane
> > Kingston ON Canada
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Sat Oct 24 06:03:46 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Sat, 24 Oct 2020 00:03:46 -0400
Subject: [R] [External] Re: Package recommendations for outputting table
 with cell formatting
In-Reply-To: <CAGx1TMDoBAo2ij6a6itbAMnMbfmxCb3p27zk7GVWJfp7GOj9Dw@mail.gmail.com>
References: <122FF10A-32A2-4665-8AD2-D3AC90402060@plessthan.com>
 <CAKZQJMAQ-te4gidnyRrgL2Rm+2gSgdW5k_m581WHK=Q-AZVv6Q@mail.gmail.com>
 <CAGx1TMDoBAo2ij6a6itbAMnMbfmxCb3p27zk7GVWJfp7GOj9Dw@mail.gmail.com>
Message-ID: <CAKZQJMCM0eE8kcPsArPaFSp3uMkpqpPi_4zpa8EY8MET1zn9Fw@mail.gmail.com>

Blast it,  *I forgot that and I usually load Hmisc as a default.*


On Fri, 23 Oct 2020 at 23:24, Richard M. Heiberger <rmh at temple.edu> wrote:

> To John and everyone else,
>
> Please add Hmisc::latex to your  how-to-make-beautiful-tables-in-r
> document.
> We first included latex() in S in 1995, and it is still actively
> maintained and improved.
>
> Rich
>
> Here are the first few lines of ?latex
>
> Convert an S object to LaTeX, and Related Utilities
>
> Description:
>
>      ?latex? converts its argument to a ?.tex? file appropriate for
>      inclusion in a LaTeX2e document.  ?latex? is a generic function
>      that calls one of ?latex.default?, ?latex.function?, ?latex.list?.
>
>      ?latex.default? does appropriate rounding and decimal alignment
>      and produces a file containing a LaTeX tabular environment to
>      print the matrix or data.frame ?x? as a table.
>
>      ?latex.function? prepares an S function for printing by issuing
>      ?sed? commands that are similar to those in the ?S.to.latex?
>      procedure in the ?s.to.latex? package (Chambers and Hastie, 1993).
>      ?latex.function? can also produce ?verbatim? output or output that
>      works with the ?Sweavel? LaTeX style at <URL:
>      http://biostat.mc.vanderbilt.edu/SweaveTemplate>.
>
>
> On Fri, Oct 23, 2020 at 11:11 PM John Kane <jrkrideau at gmail.com> wrote:
> >
> > This comes with no guarantee since i have only tried one or two packages
> > mentioned but have a look at <a href="
> > https://rfortherestofus.com/2019/11/how-to-make-beautiful-tables-in-r/">
> R
> > Tables</a>.
> >
> >
> > On Fri, 23 Oct 2020 at 20:28, Dennis Fisher <fisher at plessthan.com>
> wrote:
> >
> > > R 4.0.2
> > > OS X
> > >
> > > Colleagues
> > >
> > > I have the unfortunate need to create a large number of tables
> (destined
> > > for a Word document).  I need to color cells depending on the contents,
> > > e.g., blue if the value is < 0.5, red if the value is > 1.5.
> > > If the output went initially to Excel, that would work; outputting
> > > directly to Word would be even better.
> > > I expect that several packages can accomplish this.  I am looking for
> > > recommendations as to which package (or combination) of packages is
> best to
> > > accomplish this.
> > >
> > > Dennis
> > >
> > > Dennis Fisher MD
> > > P < (The "P Less Than" Company)
> > > Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> > > www.PLessThan.com
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > John Kane
> > Kingston ON Canada
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From dut@ngc @end|ng |rom gm@||@com  Sat Oct 24 08:08:29 2020
From: dut@ngc @end|ng |rom gm@||@com (Christophe Dutang)
Date: Sat, 24 Oct 2020 08:08:29 +0200
Subject: [R] Fitting Mixed Distributions in the fitdistrplus package
In-Reply-To: <CAA99HCwRUsA7N31ConVUXvgmCbHvgwkLE+ERoXxqRHYDgr6q5A@mail.gmail.com>
References: <CAAJc=rOu8TCTt-0nDq18gct84y4hy9if3yU2-WJT4bNaENuPEw@mail.gmail.com>
 <CAA99HCwRUsA7N31ConVUXvgmCbHvgwkLE+ERoXxqRHYDgr6q5A@mail.gmail.com>
Message-ID: <E2523C90-5B68-4503-8354-A23B9E0637D3@gmail.com>

Dear Charles,

Please, when you have questions about fitdistrplus, contact directly the authors of the package and not R-help.

When fitting non ? standard ? distributions with fitdistrplus, you should define by yourself the density and the cumulative distribution functions, or load a package which define them.

See FAQ for a general example : https://cran.r-project.org/web/packages/fitdistrplus/vignettes/FAQ.html#how-do-i-find-non-standard-distributions ?

Regarding your mixed distribution, the code below works correctly. By the way, the Feller-Pareto distribution (see actual) is among the best distributions for the Danish dataset. You may also consider composite distributions, see https://CRAN.R-project.org/view=Distributions


Kind regards, Christophe 


dmixgam <- function(x, prob, shape1, scale1, shape2, scale2)
  prob*dgamma(x, shape1, scale=scale1)+ (1-prob)*dpareto(x, shape2, scale=scale2)

pmixgam <- function(q, prob, shape1, scale1, shape2, scale2)
  prob*pgamma(q, shape1, scale=scale1)+ (1-prob)*ppareto(q, shape2, scale=scale2)

library(actuar)
library(fitdistrplus)
data("danishuni")
x<- danishuni$Loss
fgam<- fitdist(x,"gamma",lower=0)
fpar<- fitdist(x,"pareto",start = list(shape=2,scale=2),lower=0)
fmixgam<- fitdist(x,"mixgam",start =
                       list(prob=1/2,shape1=1,scale1=1,shape2=1,scale2=1),lower=0)

cdfcomp(list(fgam, fpar, fmixgam), xlogscale = TRUE)
gofstat(list(fgam, fpar, fmixgam))




> 
> ---------- Forwarded message ---------
> From: Charles Thuo <tcmuigai at gmail.com>
> Date: Wed, Oct 21, 2020 at 12:03 AM
> Subject: [R] Fitting Mixed Distributions in the fitdistrplus package
> To: <r-help at r-project.org>
> 
> 
> Dear Sirs,
> 
> The below listed code fits a gamma and a pareto distribution to a data set
> danishuni. However the distributions are not appropriate to fit both  tails
> of the data set hence a mixed distribution is required  which has ben
> defined as "mixgampar"
> as shown below.
> 
> library(fitdistrplus)
> x<- danishuni$Loss
> fgam<- fitdist(x,"gamma",lower=0)
> fpar<- fitdist(x,"pareto",start = list(shape=2,scale=2),lower=0)
> fmixgampar<- fitdist(x,"mixgampar",start =
> list(prob=1/2,nu=1,lambda=1,alpha=1,theta=1),lower=0)
> Error in fitdist(x, "mixgampar", start = list(prob = 1/2, nu = 1, lambda =
> 1,  :
> 
> The  dmixgampar  function must be defined
> 
> Kindly assist to define the dmixgampar
> 
> Charkes
> 
>        [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tcmu|g@| @end|ng |rom gm@||@com  Sat Oct 24 08:40:33 2020
From: tcmu|g@| @end|ng |rom gm@||@com (Charles Thuo)
Date: Sat, 24 Oct 2020 09:40:33 +0300
Subject: [R] Packages Not Available for R version 4.0.3
Message-ID: <CAAJc=rN0Cw-ahZSuSem-qjkNQK6sn411-yw7AXgm6UtS3pDmcA@mail.gmail.com>

I have attempted to install the packages  Rtools and rgrs but the
install.packages command yields a message that the same are not available
for R version 4.0.

How do i get around this as i need the said packages to implement some
credit scoring GLMs  using the " rgrs" package.

With Regards,

Charles

	[[alternative HTML version deleted]]


From b|oprogr@mmer @end|ng |rom gm@||@com  Sat Oct 24 08:51:29 2020
From: b|oprogr@mmer @end|ng |rom gm@||@com (Caitlin)
Date: Fri, 23 Oct 2020 23:51:29 -0700
Subject: [R] Packages Not Available for R version 4.0.3
In-Reply-To: <CAAJc=rN0Cw-ahZSuSem-qjkNQK6sn411-yw7AXgm6UtS3pDmcA@mail.gmail.com>
References: <CAAJc=rN0Cw-ahZSuSem-qjkNQK6sn411-yw7AXgm6UtS3pDmcA@mail.gmail.com>
Message-ID: <CABDKo+ySf74Bo_=rcxYnX_aCyuE8LDQbpX+LT-WvahMd8DKzmw@mail.gmail.com>

Hi Charles.

https://cran.r-project.org/web/packages/rgrs/index.html

https://cran.r-project.org/bin/windows/Rtools/

What operating system are you using?

Hope this helps.

~Caitlin


On Fri, Oct 23, 2020 at 11:41 PM Charles Thuo <tcmuigai at gmail.com> wrote:

> I have attempted to install the packages  Rtools and rgrs but the
> install.packages command yields a message that the same are not available
> for R version 4.0.
>
> How do i get around this as i need the said packages to implement some
> credit scoring GLMs  using the " rgrs" package.
>
> With Regards,
>
> Charles
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Oct 26 07:30:18 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 26 Oct 2020 06:30:18 +0000
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <CAMk+s2R9cnXa71XttRN7STqUTcPF2oed5BMnjBin5=DfpiHQTA@mail.gmail.com>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
 <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
 <CAMk+s2SxrOkFkG4zE3f+GNLMDgXojdpwGVtewHP_dXNcQ2i7pg@mail.gmail.com>
 <1babd1ae842a48ceaa1c11055762f933@SRVEXCHCM1302.precheza.cz>
 <CAMk+s2R9cnXa71XttRN7STqUTcPF2oed5BMnjBin5=DfpiHQTA@mail.gmail.com>
Message-ID: <4a05bd412cfc4366aa0fded5b28ead30@SRVEXCHCM1302.precheza.cz>

Hi

Put fill outside aes

p+geom_ribbon(aes(ymin = slope_1*x + intercept_1 - 1/w[2],
ymax = slope_1*x + intercept_1 + 1/w[2]), fill = "blue", alpha=0.1)

The "hole" is because you have two levels of data (red and blue). To get rid 
of this you should put new data in ribbon call.
Something like

newdat <- trainset
newdat$z <- factor(0)
p+geom_ribbon(data=newdat, aes(ymin = slope_1*x + intercept_1 - 1/w[2],
ymax = slope_1*x + intercept_1 + 1/w[2]), fill = "yellow", alpha=0.1)

Cheers
Petr

> -----Original Message-----
> From: Luigi Marongiu <marongiu.luigi at gmail.com>
> Sent: Friday, October 23, 2020 3:30 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] How to shade area between lines in ggplot2
>
> Thank you, but this split the area into two and distorts the shape of the 
> plot.
> (compared to ``` p + geom_abline(slope = slope_1, intercept = intercept_1 -
> 1/w[2],
>                     linetype = "dashed", col = "royalblue") +
>   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
>               linetype = "dashed", col = "royalblue") ```
>
> Why there is a hole in the middle of the ribbon? and the color is not 
> grey...
>
> On Fri, Oct 23, 2020 at 2:35 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hi
> >
> > What about something like
> >
> > p+geom_ribbon(aes(ymin = slope_1*x + intercept_1 - 1/w[2],
> > ymax = slope_1*x + intercept_1 + 1/w[2], fill = "grey70", alpha=0.1))
> >
> > Cheers
> > Petr
> >
> > > -----Original Message-----
> > > From: Luigi Marongiu <marongiu.luigi at gmail.com>
> > > Sent: Friday, October 23, 2020 11:11 AM
> > > To: PIKAL Petr <petr.pikal at precheza.cz>
> > > Cc: r-help <r-help at r-project.org>
> > > Subject: Re: [R] How to shade area between lines in ggplot2
> > >
> > > also from this site: https://plotly.com/ggplot2/geom_ribbon/
> > > I get the answer is geom_ribbon but I am still missing something ```
> > > #! plot p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> > >   geom_point() + scale_color_manual(values = c("red", "blue")) #
> > > show support vectors df_sv = trainset[svm_model$index, ] p = p +
> > > geom_point(data = df_sv, aes(x=x, y=y),
> > >                    color="purple", size=4, alpha=0.5) # show
> > > hyperplane (decision boundaries are off set by 1/w[2]) w =
> > > t(svm_model$coefs) %*% svm_model$SV  # %*% = matrix multiplication
> > > slope_1 = -w[1]/w[2]
> > > intercept_1 = svm_model$rho / w[2]
> > > p = p + geom_abline(slope = slope_1, intercept = intercept_1, col =
> > > "royalblue4")
> > > p = p +     geom_ribbon(aes(ymin=intercept_1 - 1/w[2],
> > >                             ymax=intercept_1 + 1/w[2],
> > >                             x=x, fill = "band"), alpha = 0.3) +
> > >   scale_fill_manual("",values="grey12")
> > > ```
> > >
> > > On Fri, Oct 23, 2020 at 10:26 AM PIKAL Petr <petr.pikal at precheza.cz>
> wrote:
> > > >
> > > > Hi
> > > >
> > > > Did you try google? I got several answers using your question
> > > >
> > > > e.g.
> > > > https://stackoverflow.com/questions/54687321/fill-area-between-lin
> > > > es-u
> > > > sing-g
> > > > gplot-in-r
> > > >
> > > > Cheers
> > > > Petr
> > > >
> > > > > -----Original Message-----
> > > > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi
> > > > > Marongiu
> > > > > Sent: Friday, October 23, 2020 9:59 AM
> > > > > To: r-help <r-help at r-project.org>
> > > > > Subject: [R] How to shade area between lines in ggplot2
> > > > >
> > > > > Hello,
> > > > > I am running SVM and showing the results with ggplot2. The
> > > > > results include the decision boundaries, which are two dashed
> > > > > lines parallel to a solid
> > > > line. I
> > > > > would like to remove the dashed lines and use a shaded area instead.
> > > > > How can I do that?
> > > > > Here is the code I wrote..
> > > > > ```
> > > > > library(e1071)
> > > > > library(ggplot2)
> > > > >
> > > > > set.seed(100)
> > > > > x1 = rnorm(100, mean = 0.2, sd = 0.1)
> > > > > y1 = rnorm(100, mean = 0.7, sd = 0.1)
> > > > > y2 = rnorm(100, mean = 0.2, sd = 0.1)
> > > > > x2 = rnorm(100, mean = 0.75, sd = 0.1) df = data.frame(x =
> > > > > c(x1,x2), y=c(y1,y2),
> > > > >                 z=c(rep(0, length(x1)), rep(1, length(x2))))
> > > > > df$z =
> > > > factor(c(rep(0,
> > > > > length(x1)), rep(1, length(x2)))) df[, "train"] <-
> > > > > ifelse(runif(nrow(df))
> > > > < 0.8, 1, 0)
> > > > > trainset <- df[df$train == 1, ] testset <- df[df$train == 0, ]
> > > > > trainColNum
> > > > <-
> > > > > grep("train", names(df)) trainset <- trainset[, -trainColNum]
> > > > > testset <-
> > > > testset[,
> > > > > -trainColNum] head(trainset); str(df)
> > > > >
> > > > > svm_model<- svm(z ~ .,
> > > > >                 data = trainset,
> > > > >                 type = "C-classification",
> > > > >                 kernel = "linear",
> > > > >                 scale = FALSE)
> > > > >
> > > > > #! plot
> > > > > p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> > > > >   geom_point() + scale_color_manual(values = c("red", "blue")) #
> > > > > show decision boundaries w = t(svm_model$coefs) %*%
> svm_model$SV
> > > #
> > > > > %*% = matrix multiplication
> > > > > slope_1 = -w[1]/w[2]
> > > > > intercept_1 = svm_model$rho / w[2] p = p + geom_abline(slope =
> > > > > slope_1, intercept = intercept_1) ### here we
> > > > go:
> > > > > can I use a shaded area between these two lines? ### p = p +
> > > > > geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
> > > > >                     linetype = "dashed") +
> > > > >   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
> > > > >               linetype = "dashed")
> > > > > print(p)
> > > > >
> > > > > ```
> > > > >
> > > > > Thank you
> > > > >
> > > > > --
> > > > > Best regards,
> > > > > Luigi
> > > > >
> > > > > ______________________________________________
> > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > > > see https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > PLEASE do read the posting guide
> > > > > http://www.R-project.org/posting- guide.html and provide
> > > > > commented, minimal, self-contained, reproducible code.
> > >
> > >
> > >
> > > --
> > > Best regards,
> > > Luigi
>
>
>
> --
> Best regards,
> Luigi

From therne@u @end|ng |rom m@yo@edu  Mon Oct 26 15:02:48 2020
From: therne@u @end|ng |rom m@yo@edu (Therneau, Terry M., Ph.D.)
Date: Mon, 26 Oct 2020 09:02:48 -0500
Subject: [R] temporary clipping
Message-ID: <28fddd$eq1h4n@ironport10.mayo.edu>

In one of my plot functions it is convenient to use clipping to restrict the range of some 
output.
But at the end of the function I'd like to turn it off, i.e., so that a subsequent use of 
legend(), text() or whatever is not affected.
I don't quite see how to do this -- it seems that the only way to turn off clip is with a 
new plot.

-- 
Terry M Therneau, PhD
Department of Health Science Research
Mayo Clinic
therneau at mayo.edu

"TERR-ree THUR-noh"


	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Oct 26 15:17:38 2020
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 26 Oct 2020 14:17:38 +0000
Subject: [R] securing R code....
Message-ID: <SLXP216MB028870B5057B44B9744CD44EC8190@SLXP216MB0288.KORP216.PROD.OUTLOOK.COM>

dear members,
                             I am a stock trader. I am using R for my research.

I want to service my laptop, wherein resides all my R code, which, for obvious reasons, has to be secured. I am using Windows 7 Ultimate.

I cannot encrypt the R data by Bitdefender, as it encrypts the entire drive. I anyway need to give the key when the system, if at all, gets locked when servicing.

My cousin suggested backing up the data and deleting that data in the laptop when giving it for servicing. How do you back up the R data? What is the file name that contains all the workspace in windows 7? .RHistory only contains the previous commands. Can I delete only all the data/code without deleting the R GUI? The extreme option would be to delete the whole of installed R GUI, after backing up the workspace. Some other way to secure the data/code?

I've tried using Backup and sync by google, but that is very cumbersome.

Please help.

thanking you,
Yours sincerely,
AKSHAY M KULKARNI

[https://ipmcdn.avast.com/images/icons/icon-envelope-tick-round-orange-animated-no-repeat-v1.gif]<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>  Virus-free. www.avast.com<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Oct 26 15:30:35 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 26 Oct 2020 07:30:35 -0700
Subject: [R] securing R code....
In-Reply-To: <SLXP216MB028870B5057B44B9744CD44EC8190@SLXP216MB0288.KORP216.PROD.OUTLOOK.COM>
References: <SLXP216MB028870B5057B44B9744CD44EC8190@SLXP216MB0288.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbSv8h=DgzviLOD7wyEx8QoVLuh8HQTns1vgKxFT+3hGFQ@mail.gmail.com>

R does not save any data you give it unless you explicitly tell it to.  See
?save ?write.table, etc.
Also, any good tutorial.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Oct 26, 2020 at 7:18 AM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                              I am a stock trader. I am using R for my
> research.
>
> I want to service my laptop, wherein resides all my R code, which, for
> obvious reasons, has to be secured. I am using Windows 7 Ultimate.
>
> I cannot encrypt the R data by Bitdefender, as it encrypts the entire
> drive. I anyway need to give the key when the system, if at all, gets
> locked when servicing.
>
> My cousin suggested backing up the data and deleting that data in the
> laptop when giving it for servicing. How do you back up the R data? What is
> the file name that contains all the workspace in windows 7? .RHistory only
> contains the previous commands. Can I delete only all the data/code without
> deleting the R GUI? The extreme option would be to delete the whole of
> installed R GUI, after backing up the workspace. Some other way to secure
> the data/code?
>
> I've tried using Backup and sync by google, but that is very cumbersome.
>
> Please help.
>
> thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> [
> https://ipmcdn.avast.com/images/icons/icon-envelope-tick-round-orange-animated-no-repeat-v1.gif
> ]<
> https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> Virus-free. www.avast.com<
> https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @end|ng |rom me@com  Mon Oct 26 15:52:21 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Mon, 26 Oct 2020 10:52:21 -0400
Subject: [R] temporary clipping
In-Reply-To: <28fddd$eq1h4n@ironport10.mayo.edu>
References: <28fddd$eq1h4n@ironport10.mayo.edu>
Message-ID: <8414A54B-AC90-46BB-97F1-E17F0948857A@me.com>

> On Oct 26, 2020, at 10:02 AM, Therneau, Terry M., Ph.D. via R-help <r-help at r-project.org> wrote:
> 
> In one of my plot functions it is convenient to use clipping to restrict the range of some 
> output.
> But at the end of the function I'd like to turn it off, i.e., so that a subsequent use of 
> legend(), text() or whatever is not affected.
> I don't quite see how to do this -- it seems that the only way to turn off clip is with a 
> new plot.


Terry,

At the end of the example on ?clip, there is:

  do.call("clip", as.list(usr))  # reset to plot region

where 'usr' is the value of:

  usr <- par("usr")

called after the very first plot is generated.

The indication is that by using the final line of code in the example, the clipping region is reset to the plot region, probably also based upon any change to par("xpd") that may be relevant in your use case.

Does that help?

Regards,

Marc Schwartz


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Oct 26 17:40:50 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 26 Oct 2020 09:40:50 -0700
Subject: [R] securing R code....
In-Reply-To: <SLXP216MB028870B5057B44B9744CD44EC8190@SLXP216MB0288.KORP216.PROD.OUTLOOK.COM>
References: <SLXP216MB028870B5057B44B9744CD44EC8190@SLXP216MB0288.KORP216.PROD.OUTLOOK.COM>
Message-ID: <373f8358-2fef-fd07-0911-6d707e521bc3@comcast.net>


On 10/26/20 7:17 AM, akshay kulkarni wrote:
> dear members,
>                               I am a stock trader. I am using R for my research.
>
> I want to service my laptop, wherein resides all my R code, which, for obvious reasons, has to be secured. I am using Windows 7 Ultimate.
>
> I cannot encrypt the R data by Bitdefender, as it encrypts the entire drive.
Use a file encryption program or create an an encrypted directory to 
store your sensitive files. Veracrypt is a widely used cross platform 
solution. I was under the impression that Windoze 7 was now inherently 
insecure because it is past end-of-maintenance life? and there are many 
unpatched security holes.
>   I anyway need to give the key when the system, if at all, gets locked when servicing.
>
> My cousin suggested backing up the data and deleting that data in the laptop when giving it for servicing. How do you back up the R data?

> What is the file name that contains all the workspace in windows 7?
.Rdata
> .RHistory only contains the previous commands. Can I delete only all the data/code without deleting the R GUI?
Yes. Many people recommend not using the .Rdata mechanism at all, and 
instead maintaining a record of how the session proceeded along with? a 
bundle of the input data or at least? those portions that were 
successful in your eyes.
> The extreme option would be to delete the whole of installed R GUI, after backing up the workspace. Some other way to secure the data/code?
.Rdata is only a file. You could sorre it in encrypted form with Veracrypt.
>
> I've tried using Backup and sync by google, but that is very cumbersome.
>
> Please help.
>
> thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> snipped HTML
>
> 	[[alternative HTML version deleted]]

You should learn to post in plain text.

-- 

David.


From er|cjberger @end|ng |rom gm@||@com  Mon Oct 26 18:12:08 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 26 Oct 2020 19:12:08 +0200
Subject: [R] securing R code....
In-Reply-To: <373f8358-2fef-fd07-0911-6d707e521bc3@comcast.net>
References: <SLXP216MB028870B5057B44B9744CD44EC8190@SLXP216MB0288.KORP216.PROD.OUTLOOK.COM>
 <373f8358-2fef-fd07-0911-6d707e521bc3@comcast.net>
Message-ID: <CAGgJW75nyOSP+MLvk082g7aP+7r=PR21XabJT-LinDCh9Rdakw@mail.gmail.com>

Do you make regular backups? If not, this should push you into such a
routine.
One approach is to use an external drive. External drives are not expensive
and can typically have plenty of room to hold all your code and data.
Just before having your computer serviced, copy your code and data onto the
external drive. Erase your sensitive data from your computer and get it
serviced.

By the way, you can make the backup effort easier by organizing all your
code and data into a directory tree, so that you just do a recursive copy
of the root folder onto the backup system and you are done. (i.e. a simple
command. Depending on the amount of data to be copied this may take some
time to complete.)

HTH,
Eric


On Mon, Oct 26, 2020 at 6:41 PM David Winsemius <dwinsemius at comcast.net>
wrote:

>
> On 10/26/20 7:17 AM, akshay kulkarni wrote:
> > dear members,
> >                               I am a stock trader. I am using R for my
> research.
> >
> > I want to service my laptop, wherein resides all my R code, which, for
> obvious reasons, has to be secured. I am using Windows 7 Ultimate.
> >
> > I cannot encrypt the R data by Bitdefender, as it encrypts the entire
> drive.
> Use a file encryption program or create an an encrypted directory to
> store your sensitive files. Veracrypt is a widely used cross platform
> solution. I was under the impression that Windoze 7 was now inherently
> insecure because it is past end-of-maintenance life  and there are many
> unpatched security holes.
> >   I anyway need to give the key when the system, if at all, gets locked
> when servicing.
> >
> > My cousin suggested backing up the data and deleting that data in the
> laptop when giving it for servicing. How do you back up the R data?
>
> > What is the file name that contains all the workspace in windows 7?
> .Rdata
> > .RHistory only contains the previous commands. Can I delete only all the
> data/code without deleting the R GUI?
> Yes. Many people recommend not using the .Rdata mechanism at all, and
> instead maintaining a record of how the session proceeded along with  a
> bundle of the input data or at least  those portions that were
> successful in your eyes.
> > The extreme option would be to delete the whole of installed R GUI,
> after backing up the workspace. Some other way to secure the data/code?
> .Rdata is only a file. You could sorre it in encrypted form with Veracrypt.
> >
> > I've tried using Backup and sync by google, but that is very cumbersome.
> >
> > Please help.
> >
> > thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > snipped HTML
> >
> >       [[alternative HTML version deleted]]
>
> You should learn to post in plain text.
>
> --
>
> David.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Oct 27 09:02:26 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 27 Oct 2020 08:02:26 +0000
Subject: [R] securing R code....
In-Reply-To: <SLXP216MB028870B5057B44B9744CD44EC8190@SLXP216MB0288.KORP216.PROD.OUTLOOK.COM>
References: <SLXP216MB028870B5057B44B9744CD44EC8190@SLXP216MB0288.KORP216.PROD.OUTLOOK.COM>
Message-ID: <299233d6d6a744d897dd906f6345a9f9@SRVEXCHCM1302.precheza.cz>

Hi

Above what you were suggested, your commands could be stored in .RHistory
and your data in .RData files if you end quit your session with save option
"yes". Either interactively or programmatically.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
> Sent: Monday, October 26, 2020 3:18 PM
> To: R help Mailing list <r-help at r-project.org>
> Subject: [R] securing R code....
> 
> dear members,
>                              I am a stock trader. I am using R for my
research.
> 
> I want to service my laptop, wherein resides all my R code, which, for
> obvious reasons, has to be secured. I am using Windows 7 Ultimate.
> 
> I cannot encrypt the R data by Bitdefender, as it encrypts the entire
drive. I
> anyway need to give the key when the system, if at all, gets locked when
> servicing.
> 
> My cousin suggested backing up the data and deleting that data in the
laptop
> when giving it for servicing. How do you back up the R data? What is the
file
> name that contains all the workspace in windows 7? .RHistory only contains
> the previous commands. Can I delete only all the data/code without
deleting
> the R GUI? The extreme option would be to delete the whole of installed R
> GUI, after backing up the workspace. Some other way to secure the
> data/code?
> 
> I've tried using Backup and sync by google, but that is very cumbersome.
> 
> Please help.
> 
> thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> [https://ipmcdn.avast.com/images/icons/icon-envelope-tick-round-orange-
> animated-no-repeat-v1.gif]<https://www.avast.com/sig-
> email?utm_medium=email&utm_source=link&utm_campaign=sig-
> email&utm_content=webmail>  Virus-free.
> www.avast.com<https://www.avast.com/sig-
> email?utm_medium=email&utm_source=link&utm_campaign=sig-
> email&utm_content=webmail>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Oct 27 11:45:45 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 27 Oct 2020 11:45:45 +0100
Subject: [R] How to shade area between lines in ggplot2
In-Reply-To: <4a05bd412cfc4366aa0fded5b28ead30@SRVEXCHCM1302.precheza.cz>
References: <CAMk+s2T_pGxcZNdctCy=nfkiAJuNaE-sy8yV0bK05SDn8EAbwg@mail.gmail.com>
 <56be85d9cd434fc69aaf277017d8bdf3@SRVEXCHCM1302.precheza.cz>
 <CAMk+s2SxrOkFkG4zE3f+GNLMDgXojdpwGVtewHP_dXNcQ2i7pg@mail.gmail.com>
 <1babd1ae842a48ceaa1c11055762f933@SRVEXCHCM1302.precheza.cz>
 <CAMk+s2R9cnXa71XttRN7STqUTcPF2oed5BMnjBin5=DfpiHQTA@mail.gmail.com>
 <4a05bd412cfc4366aa0fded5b28ead30@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAMk+s2QqJenXhusc3D7y+4gUYeE6G__0rT+GqJ=a1s=k+9tzLA@mail.gmail.com>

Thank you!

On Mon, Oct 26, 2020 at 7:30 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi
>
> Put fill outside aes
>
> p+geom_ribbon(aes(ymin = slope_1*x + intercept_1 - 1/w[2],
> ymax = slope_1*x + intercept_1 + 1/w[2]), fill = "blue", alpha=0.1)
>
> The "hole" is because you have two levels of data (red and blue). To get rid
> of this you should put new data in ribbon call.
> Something like
>
> newdat <- trainset
> newdat$z <- factor(0)
> p+geom_ribbon(data=newdat, aes(ymin = slope_1*x + intercept_1 - 1/w[2],
> ymax = slope_1*x + intercept_1 + 1/w[2]), fill = "yellow", alpha=0.1)
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: Luigi Marongiu <marongiu.luigi at gmail.com>
> > Sent: Friday, October 23, 2020 3:30 PM
> > To: PIKAL Petr <petr.pikal at precheza.cz>
> > Cc: r-help <r-help at r-project.org>
> > Subject: Re: [R] How to shade area between lines in ggplot2
> >
> > Thank you, but this split the area into two and distorts the shape of the
> > plot.
> > (compared to ``` p + geom_abline(slope = slope_1, intercept = intercept_1 -
> > 1/w[2],
> >                     linetype = "dashed", col = "royalblue") +
> >   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
> >               linetype = "dashed", col = "royalblue") ```
> >
> > Why there is a hole in the middle of the ribbon? and the color is not
> > grey...
> >
> > On Fri, Oct 23, 2020 at 2:35 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> > >
> > > Hi
> > >
> > > What about something like
> > >
> > > p+geom_ribbon(aes(ymin = slope_1*x + intercept_1 - 1/w[2],
> > > ymax = slope_1*x + intercept_1 + 1/w[2], fill = "grey70", alpha=0.1))
> > >
> > > Cheers
> > > Petr
> > >
> > > > -----Original Message-----
> > > > From: Luigi Marongiu <marongiu.luigi at gmail.com>
> > > > Sent: Friday, October 23, 2020 11:11 AM
> > > > To: PIKAL Petr <petr.pikal at precheza.cz>
> > > > Cc: r-help <r-help at r-project.org>
> > > > Subject: Re: [R] How to shade area between lines in ggplot2
> > > >
> > > > also from this site: https://plotly.com/ggplot2/geom_ribbon/
> > > > I get the answer is geom_ribbon but I am still missing something ```
> > > > #! plot p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> > > >   geom_point() + scale_color_manual(values = c("red", "blue")) #
> > > > show support vectors df_sv = trainset[svm_model$index, ] p = p +
> > > > geom_point(data = df_sv, aes(x=x, y=y),
> > > >                    color="purple", size=4, alpha=0.5) # show
> > > > hyperplane (decision boundaries are off set by 1/w[2]) w =
> > > > t(svm_model$coefs) %*% svm_model$SV  # %*% = matrix multiplication
> > > > slope_1 = -w[1]/w[2]
> > > > intercept_1 = svm_model$rho / w[2]
> > > > p = p + geom_abline(slope = slope_1, intercept = intercept_1, col =
> > > > "royalblue4")
> > > > p = p +     geom_ribbon(aes(ymin=intercept_1 - 1/w[2],
> > > >                             ymax=intercept_1 + 1/w[2],
> > > >                             x=x, fill = "band"), alpha = 0.3) +
> > > >   scale_fill_manual("",values="grey12")
> > > > ```
> > > >
> > > > On Fri, Oct 23, 2020 at 10:26 AM PIKAL Petr <petr.pikal at precheza.cz>
> > wrote:
> > > > >
> > > > > Hi
> > > > >
> > > > > Did you try google? I got several answers using your question
> > > > >
> > > > > e.g.
> > > > > https://stackoverflow.com/questions/54687321/fill-area-between-lin
> > > > > es-u
> > > > > sing-g
> > > > > gplot-in-r
> > > > >
> > > > > Cheers
> > > > > Petr
> > > > >
> > > > > > -----Original Message-----
> > > > > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi
> > > > > > Marongiu
> > > > > > Sent: Friday, October 23, 2020 9:59 AM
> > > > > > To: r-help <r-help at r-project.org>
> > > > > > Subject: [R] How to shade area between lines in ggplot2
> > > > > >
> > > > > > Hello,
> > > > > > I am running SVM and showing the results with ggplot2. The
> > > > > > results include the decision boundaries, which are two dashed
> > > > > > lines parallel to a solid
> > > > > line. I
> > > > > > would like to remove the dashed lines and use a shaded area instead.
> > > > > > How can I do that?
> > > > > > Here is the code I wrote..
> > > > > > ```
> > > > > > library(e1071)
> > > > > > library(ggplot2)
> > > > > >
> > > > > > set.seed(100)
> > > > > > x1 = rnorm(100, mean = 0.2, sd = 0.1)
> > > > > > y1 = rnorm(100, mean = 0.7, sd = 0.1)
> > > > > > y2 = rnorm(100, mean = 0.2, sd = 0.1)
> > > > > > x2 = rnorm(100, mean = 0.75, sd = 0.1) df = data.frame(x =
> > > > > > c(x1,x2), y=c(y1,y2),
> > > > > >                 z=c(rep(0, length(x1)), rep(1, length(x2))))
> > > > > > df$z =
> > > > > factor(c(rep(0,
> > > > > > length(x1)), rep(1, length(x2)))) df[, "train"] <-
> > > > > > ifelse(runif(nrow(df))
> > > > > < 0.8, 1, 0)
> > > > > > trainset <- df[df$train == 1, ] testset <- df[df$train == 0, ]
> > > > > > trainColNum
> > > > > <-
> > > > > > grep("train", names(df)) trainset <- trainset[, -trainColNum]
> > > > > > testset <-
> > > > > testset[,
> > > > > > -trainColNum] head(trainset); str(df)
> > > > > >
> > > > > > svm_model<- svm(z ~ .,
> > > > > >                 data = trainset,
> > > > > >                 type = "C-classification",
> > > > > >                 kernel = "linear",
> > > > > >                 scale = FALSE)
> > > > > >
> > > > > > #! plot
> > > > > > p = ggplot(data = trainset, aes(x=x, y=y, color=z)) +
> > > > > >   geom_point() + scale_color_manual(values = c("red", "blue")) #
> > > > > > show decision boundaries w = t(svm_model$coefs) %*%
> > svm_model$SV
> > > > #
> > > > > > %*% = matrix multiplication
> > > > > > slope_1 = -w[1]/w[2]
> > > > > > intercept_1 = svm_model$rho / w[2] p = p + geom_abline(slope =
> > > > > > slope_1, intercept = intercept_1) ### here we
> > > > > go:
> > > > > > can I use a shaded area between these two lines? ### p = p +
> > > > > > geom_abline(slope = slope_1, intercept = intercept_1 - 1/w[2],
> > > > > >                     linetype = "dashed") +
> > > > > >   geom_abline(slope = slope_1, intercept = intercept_1 + 1/w[2],
> > > > > >               linetype = "dashed")
> > > > > > print(p)
> > > > > >
> > > > > > ```
> > > > > >
> > > > > > Thank you
> > > > > >
> > > > > > --
> > > > > > Best regards,
> > > > > > Luigi
> > > > > >
> > > > > > ______________________________________________
> > > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > > > > see https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > > PLEASE do read the posting guide
> > > > > > http://www.R-project.org/posting- guide.html and provide
> > > > > > commented, minimal, self-contained, reproducible code.
> > > >
> > > >
> > > >
> > > > --
> > > > Best regards,
> > > > Luigi
> >
> >
> >
> > --
> > Best regards,
> > Luigi



-- 
Best regards,
Luigi


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Oct 27 13:33:57 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 27 Oct 2020 13:33:57 +0100
Subject: [R] R for-loop to add layer to lattice plot
Message-ID: <CAMk+s2RTCVh+YojekYex1iSTCbXktYknrPo88VfDDMw8WwP_8g@mail.gmail.com>

Hello,
I am using e1071 to run support vector machine. I would like to plot
the data with lattice and specifically show the hyperplanes created by
the system.
I can store the hyperplane as a contour in an object, and I can plot
one object at a time. Since there will be thousands of elements to
plot, I can't manually add them one by one to the plot, so I tried to
loop into them, but only the last is added.
Here it the working example for more clarity:

```
library(e1071)
library(lattice)
library(latticeExtra)

make.grid <- function(x, n = 1000) {
  grange = apply(x, 2, range)
  x1 = seq(from = grange[1,1], to = grange[2,1], length = n)
  x2 = seq(from = grange[1,2], to = grange[2,2], length = n)
  expand.grid(X1 = x1, X2 = x2)
}

plot_list <- list()
for (i in 1:10) {
  x1 = rnorm(100, mean = 0.2, sd = 0.15)
  y1 = rnorm(100, mean = 0.7, sd = 0.15)
  y2 = rnorm(100, mean = 0.2, sd = 0.15)
  x2 = rnorm(100, mean = 0.75, sd = 0.15)
  df = data.frame(x = c(x1,x2), y=c(y1,y2),
                  z=c(rep(0, length(x1)), rep(1, length(x2))))
  df$z = factor(c(rep(0, length(x1)), rep(1, length(x2))))
  df[, "train"] <- ifelse(runif(nrow(df)) < 0.8, 1, 0)
  trainset <- df[df$train == 1, ]
  testset <- df[df$train == 0, ]
  trainColNum <- grep("train", names(df))
  trainset <- trainset[, -trainColNum]
  testset <- testset[, -trainColNum]
  svm_model <- svm(z ~ .,
                  data = trainset,
                  type = "C-classification",
                  kernel = "linear",
                  scale = FALSE)
  # generate contour
  xmat = make.grid(matrix(c(testset$x, testset$y),
                          ncol = 2, byrow=FALSE))
  xgrid = as.data.frame(xmat)
  names(xgrid) = c("x", "y")
  z = predict(svm_model, xgrid)
  xyz_dat = as.data.frame(cbind(xgrid, z))
  plot_list[[i]] = contourplot(z ~ y+x, data=xyz_dat, pretty = TRUE,
                               xlim=c(-1,50), ylim=c(-0.001, 0.05),
                               labels = FALSE, col = "blue", lwd = 0.5)

}
# the contour is stored in the object plot_list
str(plot_list) # confirm that there is data here

# I can add one element at the time to lattice's xyplot and store it
in an object P
P = xyplot(y ~ x, group = z, data = df,
           pch = 16, cex = 1.5, alpha = 0.25) + as.layer(plot_list[[1]]) +
  as.layer(plot_list[[2]])
plot(P)  # this demonstrates that the lines are not the same

# but if I add the elements via loop, it does not work
for (i in 1:length(plot_list)) {
  print(i)
  P = xyplot(y ~ x, group = z, data = df,
             pch = 16, cex = 1.5, alpha = 0.25) + as.layer(plot_list[[i]])
}
plot(P)
```

Am I missing something?
Thank you


From m@rk|eed@2 @end|ng |rom gm@||@com  Tue Oct 27 15:47:55 2020
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Tue, 27 Oct 2020 10:47:55 -0400
Subject: [R] R for-loop to add layer to lattice plot
In-Reply-To: <CAMk+s2RTCVh+YojekYex1iSTCbXktYknrPo88VfDDMw8WwP_8g@mail.gmail.com>
References: <CAMk+s2RTCVh+YojekYex1iSTCbXktYknrPo88VfDDMw8WwP_8g@mail.gmail.com>
Message-ID: <CAHz+bWZZdAWHmKBQ_=faP8kNG4gb7330=ApUbsOhJbE1CkthZA@mail.gmail.com>

Hi: I think you're writing over the plots so only the last one exists.
Maybe try P = P + whatever but
I'm not sure if that's allowed with plots.



On Tue, Oct 27, 2020 at 8:34 AM Luigi Marongiu <marongiu.luigi at gmail.com>
wrote:

> Hello,
> I am using e1071 to run support vector machine. I would like to plot
> the data with lattice and specifically show the hyperplanes created by
> the system.
> I can store the hyperplane as a contour in an object, and I can plot
> one object at a time. Since there will be thousands of elements to
> plot, I can't manually add them one by one to the plot, so I tried to
> loop into them, but only the last is added.
> Here it the working example for more clarity:
>
> ```
> library(e1071)
> library(lattice)
> library(latticeExtra)
>
> make.grid <- function(x, n = 1000) {
>   grange = apply(x, 2, range)
>   x1 = seq(from = grange[1,1], to = grange[2,1], length = n)
>   x2 = seq(from = grange[1,2], to = grange[2,2], length = n)
>   expand.grid(X1 = x1, X2 = x2)
> }
>
> plot_list <- list()
> for (i in 1:10) {
>   x1 = rnorm(100, mean = 0.2, sd = 0.15)
>   y1 = rnorm(100, mean = 0.7, sd = 0.15)
>   y2 = rnorm(100, mean = 0.2, sd = 0.15)
>   x2 = rnorm(100, mean = 0.75, sd = 0.15)
>   df = data.frame(x = c(x1,x2), y=c(y1,y2),
>                   z=c(rep(0, length(x1)), rep(1, length(x2))))
>   df$z = factor(c(rep(0, length(x1)), rep(1, length(x2))))
>   df[, "train"] <- ifelse(runif(nrow(df)) < 0.8, 1, 0)
>   trainset <- df[df$train == 1, ]
>   testset <- df[df$train == 0, ]
>   trainColNum <- grep("train", names(df))
>   trainset <- trainset[, -trainColNum]
>   testset <- testset[, -trainColNum]
>   svm_model <- svm(z ~ .,
>                   data = trainset,
>                   type = "C-classification",
>                   kernel = "linear",
>                   scale = FALSE)
>   # generate contour
>   xmat = make.grid(matrix(c(testset$x, testset$y),
>                           ncol = 2, byrow=FALSE))
>   xgrid = as.data.frame(xmat)
>   names(xgrid) = c("x", "y")
>   z = predict(svm_model, xgrid)
>   xyz_dat = as.data.frame(cbind(xgrid, z))
>   plot_list[[i]] = contourplot(z ~ y+x, data=xyz_dat, pretty = TRUE,
>                                xlim=c(-1,50), ylim=c(-0.001, 0.05),
>                                labels = FALSE, col = "blue", lwd = 0.5)
>
> }
> # the contour is stored in the object plot_list
> str(plot_list) # confirm that there is data here
>
> # I can add one element at the time to lattice's xyplot and store it
> in an object P
> P = xyplot(y ~ x, group = z, data = df,
>            pch = 16, cex = 1.5, alpha = 0.25) + as.layer(plot_list[[1]]) +
>   as.layer(plot_list[[2]])
> plot(P)  # this demonstrates that the lines are not the same
>
> # but if I add the elements via loop, it does not work
> for (i in 1:length(plot_list)) {
>   print(i)
>   P = xyplot(y ~ x, group = z, data = df,
>              pch = 16, cex = 1.5, alpha = 0.25) + as.layer(plot_list[[i]])
> }
> plot(P)
> ```
>
> Am I missing something?
> Thank you
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Tue Oct 27 20:06:59 2020
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Tue, 27 Oct 2020 19:06:59 +0000 (UTC)
Subject: [R] How to correct my error message
References: <497841733.6368680.1603825619018.ref@mail.yahoo.com>
Message-ID: <497841733.6368680.1603825619018@mail.yahoo.com>

Dear R-experts,

Here below my R code. The warning message is not a problem to me but there is an error message more problematic. I understand the error message but I don't know if it is possible to correct the error and if yes, how to correct it.

Many thanks.


n <- 60
b <- runif(n, 0, 5)
a <- runif(n, 0, 5)
z <- rnorm(n*0.95,2,3) + rnorm(n*0.05,2,9)
y_model <- 0.1 * b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.95, 0, 0.1), rnorm(n*0.05, 0, 0.5) )
df<-data.frame(b,a,z,y_obs)


From @@r@h@go@|ee @end|ng |rom gm@||@com  Tue Oct 27 20:21:08 2020
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Tue, 27 Oct 2020 15:21:08 -0400
Subject: [R] How to correct my error message
In-Reply-To: <497841733.6368680.1603825619018@mail.yahoo.com>
References: <497841733.6368680.1603825619018.ref@mail.yahoo.com>
 <497841733.6368680.1603825619018@mail.yahoo.com>
Message-ID: <CAM_vjunPUTAk+MREgNsueMUmL-BHB41--vdEaofdTrDruomSSg@mail.gmail.com>

Hi,

a is of length 60.
b is of length 60.
z is of length 57.

What do you expect to have happen when you create y_model ? What
happens to those other 3 observations?

Sarah

On Tue, Oct 27, 2020 at 3:07 PM varin sacha via R-help
<r-help at r-project.org> wrote:
>
> Dear R-experts,
>
> Here below my R code. The warning message is not a problem to me but there is an error message more problematic. I understand the error message but I don't know if it is possible to correct the error and if yes, how to correct it.
>
> Many thanks.
>
>
> n <- 60
> b <- runif(n, 0, 5)
> a <- runif(n, 0, 5)
> z <- rnorm(n*0.95,2,3) + rnorm(n*0.05,2,9)
> y_model <- 0.1 * b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.95, 0, 0.1), rnorm(n*0.05, 0, 0.5) )
> df<-data.frame(b,a,z,y_obs)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From h@nn@hv@n|mpe @end|ng |rom out|ook@com  Tue Oct 27 13:57:46 2020
From: h@nn@hv@n|mpe @end|ng |rom out|ook@com (Hannah Van Impe)
Date: Tue, 27 Oct 2020 12:57:46 +0000
Subject: [R] Creating unique code
Message-ID: <50C9397A-5D9A-460D-AFEE-8A0A5501737C@outlook.com>

Hello,

I need some help in creating a new variable. I need to create a 'couple identifier', which gives a unique code for every couple/triple/... in a household. So, I can identify couples. To do this, I should use 4 variables:

  *   SERIAL = a unique numeric code for each household
  *   PERNUM = a unique numeric code for each person
  *   SPLOC = the numeric code of the spouse in the household, it is equal to the PERNUM code of the spouse
  *   SPRULE = rules for linking a spouse, numeric code from 00 to 06


To create the couple identifier, I need these conditions:

  *   SERIAL needs to be equal for these persons in the couples
  *   SPLOC > 0
  *   SPLOC = PERNUM
  *   SPRULE = 01 or 02

What I already did is this:

attach(ipumsi_00008_dta)
library(tinytex)
library(dplyr)
library(ggplot2)
library(tidyr)
library(knitr)
library(forcats)
library(mice)
library(pander)
library(ggcorrplot)
library(lubridate)
# true/false code when sploc is greater than zero
ipumsi_00008_dta <- mutate(ipumsi_00008_dta, sploc_greater_than_zero = sploc>0)
# true/false code when sploc is greater then zero and sprule is equal to 1 or 2
ipumsi_00008_dta <- mutate(ipumsi_00008_dta, rule_union = sploc>0 & sprule==1 | sprule==2)

=> Now I want to create a numeric code for true values of rule_union when serials are equal, so when they are persons of the same household.
What method should I use to do this?

Thank you very much!!

	[[alternative HTML version deleted]]


From 21803005 m@iii@g oii zju@edu@c@  Tue Oct 27 14:32:47 2020
From: 21803005 m@iii@g oii zju@edu@c@ (21803005 m@iii@g oii zju@edu@c@)
Date: Tue, 27 Oct 2020 21:32:47 +0800 (GMT+08:00)
Subject: [R] Dear R experts, I have a question about meta-analysis
Message-ID: <474a7bf7.1f1ac.1756a42db4f.Coremail.21803005@zju.edu.cn>

Dear R experts, 

Greetings from China! I'm Zhang in the College of Education, Zhejiang University, and I am recently running a meta-analysis. Since research using the randomized controlled trial (RCT) often dismissed reporting the correlation (r) between multivariate outcomes, for instance, a study measuring students' gains on problem solving skills with three aspects and reported the pre-post scores respectively, but obviously these three aspects were correlated. I wonder if and how I could integrate the effect sizes among these three aspects into an overall effect size without getting the concrete 'r'? Could R project and (or) function help me solve this problem?




Best,

Zhang





----------

Zhang Enming (???)

PhD Student

Department of Curriculum and Instruction

College of Education, Zhejiang University

Tel: +86 17649850218

Email: 21803005 at zju.edu.cn
	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct 27 20:48:22 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 27 Oct 2020 15:48:22 -0400
Subject: [R] How to correct my error message
In-Reply-To: <497841733.6368680.1603825619018@mail.yahoo.com>
References: <497841733.6368680.1603825619018.ref@mail.yahoo.com>
 <497841733.6368680.1603825619018@mail.yahoo.com>
Message-ID: <b692e57d-7da6-9676-7ebe-f30a8fe35b13@gmail.com>

On 27/10/2020 3:06 p.m., varin sacha via R-help wrote:
> Dear R-experts,
> 
> Here below my R code. The warning message is not a problem to me but there is an error message more problematic. I understand the error message but I don't know if it is possible to correct the error and if yes, how to correct it.
> 
> Many thanks.
> 
> 
> n <- 60
> b <- runif(n, 0, 5)
> a <- runif(n, 0, 5)
> z <- rnorm(n*0.95,2,3) + rnorm(n*0.05,2,9)
> y_model <- 0.1 * b - 0.5 * z - a + 10
> y_obs <- y_model +c( rnorm(n*0.95, 0, 0.1), rnorm(n*0.05, 0, 0.5) )
> df<-data.frame(b,a,z,y_obs)
> 

I suspect you intended to concatenate the two parts of z, i.e.

  z <- c(rnorm(n*0.95,2,3), rnorm(n*0.05,2,9))

You shouldn't ignore the warning.

By the way, it's not true for every n that my expression for z will 
always give something of length n.  It would be safer to do the 
calculation as

  m <- round(n*0.95)
  z <- c(rnorm(m,2,3), rnorm(n-m,2,9)

Duncan Murdoch


From ho@@@|nmm @end|ng |rom jun|v@edu  Tue Oct 27 21:16:39 2020
From: ho@@@|nmm @end|ng |rom jun|v@edu (Md. Moyazzem Hossain)
Date: Tue, 27 Oct 2020 20:16:39 +0000
Subject: [R] How to correct my error message
In-Reply-To: <CAM_vjunPUTAk+MREgNsueMUmL-BHB41--vdEaofdTrDruomSSg@mail.gmail.com>
References: <497841733.6368680.1603825619018.ref@mail.yahoo.com>
 <497841733.6368680.1603825619018@mail.yahoo.com>
 <CAM_vjunPUTAk+MREgNsueMUmL-BHB41--vdEaofdTrDruomSSg@mail.gmail.com>
Message-ID: <CAO29qn7uQkniPBMgYW3iRV7Jnt7-+YFi_6ZC0aZ+FxHsgG+JFA@mail.gmail.com>

Dear Varin,

I think the following code will solve your problem.

n <- 60
b <- runif(n, 0, 5)
a <- runif(n, 0, 5)
z1 <- data.frame(x0=1:57,
                    x1=rnorm(n*0.95,2,3))
z2 <- data.frame(x0=58:60,
                    x1=rnorm(n*0.05,2,9))

combined=rbind(z1,z2)
z=combined[,2]
y_model <- 0.1 * b - 0.5 * z - a + 10
y_obs <- y_model +c( rnorm(n*0.95, 0, 0.1), rnorm(n*0.05, 0, 0.5) )
df<-data.frame(b,a,z,y_obs)

Thanks.

Md

On Tue, Oct 27, 2020 at 7:21 PM Sarah Goslee <sarah.goslee at gmail.com> wrote:

> Hi,
>
> a is of length 60.
> b is of length 60.
> z is of length 57.
>
> What do you expect to have happen when you create y_model ? What
> happens to those other 3 observations?
>
> Sarah
>
> On Tue, Oct 27, 2020 at 3:07 PM varin sacha via R-help
> <r-help at r-project.org> wrote:
> >
> > Dear R-experts,
> >
> > Here below my R code. The warning message is not a problem to me but
> there is an error message more problematic. I understand the error message
> but I don't know if it is possible to correct the error and if yes, how to
> correct it.
> >
> > Many thanks.
> >
> >
> > n <- 60
> > b <- runif(n, 0, 5)
> > a <- runif(n, 0, 5)
> > z <- rnorm(n*0.95,2,3) + rnorm(n*0.05,2,9)
> > y_model <- 0.1 * b - 0.5 * z - a + 10
> > y_obs <- y_model +c( rnorm(n*0.95, 0, 0.1), rnorm(n*0.05, 0, 0.5) )
> > df<-data.frame(b,a,z,y_obs)
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Sarah Goslee (she/her)
> http://www.numberwright.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Best Regards,
Md. Moyazzem Hossain
Associate Professor
Department of Statistics
Jahangirnagar University
Savar, Dhaka-1342
Bangladesh
Website: http://www.juniv.edu/teachers/hossainmm
Research: *Google Scholar
<https://scholar.google.com/citations?user=-U03XCgAAAAJ&hl=en&oi=ao>*;
*ResearchGate
<https://www.researchgate.net/profile/Md_Hossain107>*; *ORCID iD
<https://orcid.org/0000-0003-3593-6936>*

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Tue Oct 27 22:41:28 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 28 Oct 2020 08:41:28 +1100
Subject: [R] Creating unique code
In-Reply-To: <50C9397A-5D9A-460D-AFEE-8A0A5501737C@outlook.com>
References: <50C9397A-5D9A-460D-AFEE-8A0A5501737C@outlook.com>
Message-ID: <CA+8X3fUMYtCvd1exMTbWdHEzsSbF7uZdnsCsaNXPni8Jw9GzxA@mail.gmail.com>

Hi Hannah,
Without knowing how the data are organized and what each numeric
code means, it is a bit difficult. If it is assumed that each row in the
data frame(?) ipumsi_00008_dta is a case (individual) and an individual may
have zero or more spouses, there would have to be more than one field for
"sploc" for those who had more than one "spouse". I would approach it by
creating a variable named "relcode" that was unique for each "union", so
that if more than one individual had the same non-zero "relcode" they would
all be in the same "relationship". That still leaves us with exclusive
relationships, so there would have to be multiple fields for "relcode" for
groups of people who were in different relationships in the same household.
I know that this is being pedantic, but it looks like a set intersection
problem of the Bob and Carol and Ted and Alice variety.

Jim

On Wed, Oct 28, 2020 at 6:39 AM Hannah Van Impe <hannahvanimpe at outlook.com>
wrote:

> Hello,
>
> I need some help in creating a new variable. I need to create a 'couple
> identifier', which gives a unique code for every couple/triple/... in a
> household. So, I can identify couples. To do this, I should use 4 variables:
>
>   *   SERIAL = a unique numeric code for each household
>   *   PERNUM = a unique numeric code for each person
>   *   SPLOC = the numeric code of the spouse in the household, it is equal
> to the PERNUM code of the spouse
>   *   SPRULE = rules for linking a spouse, numeric code from 00 to 06
>
>
> To create the couple identifier, I need these conditions:
>
>   *   SERIAL needs to be equal for these persons in the couples
>   *   SPLOC > 0
>   *   SPLOC = PERNUM
>   *   SPRULE = 01 or 02
>
> What I already did is this:
>
> attach(ipumsi_00008_dta)
> library(tinytex)
> library(dplyr)
> library(ggplot2)
> library(tidyr)
> library(knitr)
> library(forcats)
> library(mice)
> library(pander)
> library(ggcorrplot)
> library(lubridate)
> # true/false code when sploc is greater than zero
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, sploc_greater_than_zero =
> sploc>0)
> # true/false code when sploc is greater then zero and sprule is equal to 1
> or 2
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, rule_union = sploc>0 &
> sprule==1 | sprule==2)
>
> => Now I want to create a numeric code for true values of rule_union when
> serials are equal, so when they are persons of the same household.
> What method should I use to do this?
>
> Thank you very much!!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct 27 22:48:22 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 27 Oct 2020 17:48:22 -0400
Subject: [R] 3d plot of earth with cut
In-Reply-To: <3862cabb-ad24-cd8b-b650-f77de8648576@gmail.com>
References: <CAJeOm4-MhNrSWCy11300fMzmsGvrZFG5LzE2sUgCBPK-bwO2tA@mail.gmail.com>
 <CAB8pepxkmk=h+5U3-NHQMSspAdAL4cWpJvEvD-xiL0dz9pZ+nw@mail.gmail.com>
 <CAJeOm48YPLOU1HzR863S9Jh3ZMQSdhbTkEDYy=4PZWWGaoOuXA@mail.gmail.com>
 <CAB8pepxCcuKUkZv9GzPXZ4HomL36=-=dPpJcevk4tiaJ+2Qc0A@mail.gmail.com>
 <CAJeOm492prhsW763xO7Fv+F5CB7oPbC5Spp=CK04Y3BRpjXVnQ@mail.gmail.com>
 <3862cabb-ad24-cd8b-b650-f77de8648576@gmail.com>
Message-ID: <d2e9db62-7c0e-9931-9ad3-52b775e2cfb9@gmail.com>

One addition to this thread:

I've just committed contourLines3d() to rgl (in version 0.102.28).  It 
will let you display contour lines of a function on any surface in a scene.

Duncan Murdoch

On 23/10/2020 2:30 p.m., Duncan Murdoch wrote:
> Good to hear you've made such progress.  Just a couple of comments:
> 
> - You should use points3d() rather than rgl.points().  The latter is a
> low level function that may have unpleasant side effects, especially
> mixing it with other *3d() functions like persp3d().
> - There are several ways to draw a flat surface to illustrate your data.
>    Which one to use really depends on the form of data.  With randomly
> distributed points, yours is as good as any.  If the values are a known
> function of location, there are probably better ones.
> 
> Duncan Murdoch
> 
> 
> On 23/10/2020 12:18 p.m., Balint Radics wrote:
>> Dear All,
>>
>> Thanks a lot for the useful help again. I manage to get it done up to a
>> point where I think I
>> just need to apply some smoothing/interpolation to get denser points, to
>> make it nice.
>> Basically, I started from Duncen's script to visualize and make the
>> clipping along a plane
>> at a slice.
>> Then I map my data points' values to a color palette and just plot them as
>> points on this
>> plane. Since I have already the (x,y,z) coordinates for my points in the
>> slice's plane
>> I just plot them directly. I copied the code below..
>>
>> To make it nicer would be able to make a real "smooth" map on the 2D
>> surface, rather
>> than plotting all points (e.g. using polygons?).
>>
>> Best,
>> Balint
>>
>> ############################################################
>> # Construct a plane at a given longitude
>> r <- 6378.1 # radius of Earth in km
>> fixlong <- 10.0*pi/180.0 # The longitude slice
>>
>> # Construct a plane in 3D:
>> # Let vec(P0) = (P0x, P0y, P0z) be a point given in the plane of the
>> longitude
>> # let vec(n) = (nx, ny, nz) an orthogonal vector to this plane
>> # then vec(P) = (Px, Py, Pz) will be in the plane if (vec(P) - vec(P0)) *
>> vec(n) = 0
>> # We pick 2 arbitrary vectors in the plane out of 3 points
>> p0x <- r*cos(2)*cos(fixlong)
>> p0y <- r*cos(2)*sin(fixlong)
>> p0z <- r*sin(2)
>> p1x <- r*cos(2.5)*cos(fixlong)
>> p1y <- r*cos(2.5)*sin(fixlong)
>> p1z <- r*sin(2.5)
>> p2x <- r*cos(3)*cos(fixlong)
>> p2y <- r*cos(3)*sin(fixlong)
>> p2z <- r*sin(3)
>> # Make the vectors pointing to P and P0
>> v1x <- p1x - p0x # P
>> v1y <- p1y - p0y
>> v1z <- p1z - p0z
>> v2x <- p2x - p0x # P0
>> v2y <- p2y - p0y
>> v2z <- p2z - p0z
>>
>> # The cross product will give a vector orthogonal to the plane, (nx, ny, nz)
>> nx <- v1y*v2z - v1z*v2y;
>> ny <- v1z*v2x - v1x*v2z;
>> nz <- v1x*v2y - v1y*v2x;
>> # normalize
>> nMag <- sqrt(nx*nx + ny*ny + nz*nz);
>> nx <- nx / nMag;
>> ny <- ny / nMag;
>> nz <- nz / nMag;
>>
>> # Plane equation (vec(P) - vec(P0)) * vec(n) = 0, with P=(x, y, z), P0=(x0,
>> y0, z0),
>> # giving a*(x-x0)+b*(y-y0)+c*(z-z0) = 0, where x,x0 are two points in the
>> plane
>> # a, b, c are the normal vector coordinates
>> a <- -nx
>> b <- -ny
>> c <- -nz
>> d <- -(a*v2x + b*v2y + c*v2z )
>>
>> open3d()
>>
>> # Plot the globe - from Duncan
>> # points of a sphere
>> lat <- matrix(seq(90, -90, len = 50)*pi/180, 50, 50, byrow = TRUE)
>> long <- matrix(seq(-180, 180, len = 50)*pi/180, 50, 50)
>> x <- r*cos(lat)*cos(long)
>> y <- r*cos(lat)*sin(long)
>> z <- r*sin(lat)
>> # Plot with texture
>> ids <- persp3d(x, y, z, col = "white",
>>                   texture = system.file("textures/world.png", package =
>> "rgl"),
>>                   specular = "black", axes = FALSE, box = FALSE, xlab = "",
>>                   ylab = "", zlab = "", normal_x = x, normal_y = y, normal_z
>> = z)
>>
>> # Plot the plane across the longitude slice
>> #planes3d(a, b, c, d, alpha = 0.6) # optionally visualize the plane
>> # Apply clipping to only one side of the plane using the normal vector
>> clipplanes3d(a, b, c, d)
>>
>> # Map something onto this plane - how? Let's try with rgl.points and
>> mapping the colors
>> # The data is: data_activity and variables are $X, $Y, $Z, $Ar
>> library(leaflet)
>> # map the colors to the data values
>> pal <- colorNumeric(
>>     palette = "Blues",
>>     domain = data_activity$Ar) #
>> # plot the points and the mapped colors
>> rgl.points( data_activity$X, data_activity$Y, data_activity$Z, color =
>> pal(data_activity$Ar), size=3)
>> ############################################################
>>
>>
>>
>> On Fri, Oct 23, 2020 at 1:50 AM aBBy Spurdle, ?XY <spurdle.a at gmail.com>
>> wrote:
>>
>>>> It should be a 2D slice/plane embedded into a 3D space.
>>>
>>> I was able to come up with the plot, attached.
>>> My intention was to plot national boundaries on the surface of a sphere.
>>> And put the slice inside.
>>> However, I haven't (as yet) worked out how to get the coordinates for
>>> the boundaries.
>>>
>>> Let me know, if of any value.
>>> And I'll post the code.
>>> (But needs to be polished first)
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Wed Oct 28 06:59:44 2020
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Wed, 28 Oct 2020 11:29:44 +0530
Subject: [R] R for-loop to add layer to lattice plot
In-Reply-To: <CAMk+s2RTCVh+YojekYex1iSTCbXktYknrPo88VfDDMw8WwP_8g@mail.gmail.com>
References: <CAMk+s2RTCVh+YojekYex1iSTCbXktYknrPo88VfDDMw8WwP_8g@mail.gmail.com>
Message-ID: <CADfFDC5WcXDMmTgvOv0rfREjFvZzpOjKg9FrWDjDr-EY+349Sg@mail.gmail.com>

On Tue, Oct 27, 2020 at 6:04 PM Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> Hello,
> I am using e1071 to run support vector machine. I would like to plot
> the data with lattice and specifically show the hyperplanes created by
> the system.
> I can store the hyperplane as a contour in an object, and I can plot
> one object at a time. Since there will be thousands of elements to
> plot, I can't manually add them one by one to the plot, so I tried to
> loop into them, but only the last is added.
> Here it the working example for more clarity:
>
> ```
> library(e1071)
> library(lattice)
> library(latticeExtra)
>
> make.grid <- function(x, n = 1000) {
>   grange = apply(x, 2, range)
>   x1 = seq(from = grange[1,1], to = grange[2,1], length = n)
>   x2 = seq(from = grange[1,2], to = grange[2,2], length = n)
>   expand.grid(X1 = x1, X2 = x2)
> }
>
> plot_list <- list()
> for (i in 1:10) {
>   x1 = rnorm(100, mean = 0.2, sd = 0.15)
>   y1 = rnorm(100, mean = 0.7, sd = 0.15)
>   y2 = rnorm(100, mean = 0.2, sd = 0.15)
>   x2 = rnorm(100, mean = 0.75, sd = 0.15)
>   df = data.frame(x = c(x1,x2), y=c(y1,y2),
>                   z=c(rep(0, length(x1)), rep(1, length(x2))))
>   df$z = factor(c(rep(0, length(x1)), rep(1, length(x2))))
>   df[, "train"] <- ifelse(runif(nrow(df)) < 0.8, 1, 0)
>   trainset <- df[df$train == 1, ]
>   testset <- df[df$train == 0, ]
>   trainColNum <- grep("train", names(df))
>   trainset <- trainset[, -trainColNum]
>   testset <- testset[, -trainColNum]
>   svm_model <- svm(z ~ .,
>                   data = trainset,
>                   type = "C-classification",
>                   kernel = "linear",
>                   scale = FALSE)
>   # generate contour
>   xmat = make.grid(matrix(c(testset$x, testset$y),
>                           ncol = 2, byrow=FALSE))
>   xgrid = as.data.frame(xmat)
>   names(xgrid) = c("x", "y")
>   z = predict(svm_model, xgrid)
>   xyz_dat = as.data.frame(cbind(xgrid, z))
>   plot_list[[i]] = contourplot(z ~ y+x, data=xyz_dat, pretty = TRUE,
>                                xlim=c(-1,50), ylim=c(-0.001, 0.05),
>                                labels = FALSE, col = "blue", lwd = 0.5)
>
> }
> # the contour is stored in the object plot_list
> str(plot_list) # confirm that there is data here
>
> # I can add one element at the time to lattice's xyplot and store it
> in an object P
> P = xyplot(y ~ x, group = z, data = df,
>            pch = 16, cex = 1.5, alpha = 0.25) + as.layer(plot_list[[1]]) +
>   as.layer(plot_list[[2]])
> plot(P)  # this demonstrates that the lines are not the same
>
> # but if I add the elements via loop, it does not work
> for (i in 1:length(plot_list)) {
>   print(i)
>   P = xyplot(y ~ x, group = z, data = df,
>              pch = 16, cex = 1.5, alpha = 0.25) + as.layer(plot_list[[i]])
> }
> plot(P)
> ```
>
> Am I missing something?

Yes, as Mark says, you need to change the last part to something like

P = xyplot(y ~ x, group = z, data = df, pch = 16, cex = 1.5, alpha = 0.25)
for (i in 1:length(plot_list)) {
  print(i)
  P = P + as.layer(plot_list[[i]])
}
plot(P)

-Deepayan

> Thank you
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Oct 28 10:09:02 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 28 Oct 2020 10:09:02 +0100
Subject: [R] R for-loop to add layer to lattice plot
In-Reply-To: <CADfFDC5WcXDMmTgvOv0rfREjFvZzpOjKg9FrWDjDr-EY+349Sg@mail.gmail.com>
References: <CAMk+s2RTCVh+YojekYex1iSTCbXktYknrPo88VfDDMw8WwP_8g@mail.gmail.com>
 <CADfFDC5WcXDMmTgvOv0rfREjFvZzpOjKg9FrWDjDr-EY+349Sg@mail.gmail.com>
Message-ID: <CAMk+s2SdDzgeLnhk+24d2-Aev5AHMNH8SrO+Z05TvwFSGiHEbg@mail.gmail.com>

Awesome, thanks!

On Wed, Oct 28, 2020 at 7:00 AM Deepayan Sarkar
<deepayan.sarkar at gmail.com> wrote:
>
> On Tue, Oct 27, 2020 at 6:04 PM Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> >
> > Hello,
> > I am using e1071 to run support vector machine. I would like to plot
> > the data with lattice and specifically show the hyperplanes created by
> > the system.
> > I can store the hyperplane as a contour in an object, and I can plot
> > one object at a time. Since there will be thousands of elements to
> > plot, I can't manually add them one by one to the plot, so I tried to
> > loop into them, but only the last is added.
> > Here it the working example for more clarity:
> >
> > ```
> > library(e1071)
> > library(lattice)
> > library(latticeExtra)
> >
> > make.grid <- function(x, n = 1000) {
> >   grange = apply(x, 2, range)
> >   x1 = seq(from = grange[1,1], to = grange[2,1], length = n)
> >   x2 = seq(from = grange[1,2], to = grange[2,2], length = n)
> >   expand.grid(X1 = x1, X2 = x2)
> > }
> >
> > plot_list <- list()
> > for (i in 1:10) {
> >   x1 = rnorm(100, mean = 0.2, sd = 0.15)
> >   y1 = rnorm(100, mean = 0.7, sd = 0.15)
> >   y2 = rnorm(100, mean = 0.2, sd = 0.15)
> >   x2 = rnorm(100, mean = 0.75, sd = 0.15)
> >   df = data.frame(x = c(x1,x2), y=c(y1,y2),
> >                   z=c(rep(0, length(x1)), rep(1, length(x2))))
> >   df$z = factor(c(rep(0, length(x1)), rep(1, length(x2))))
> >   df[, "train"] <- ifelse(runif(nrow(df)) < 0.8, 1, 0)
> >   trainset <- df[df$train == 1, ]
> >   testset <- df[df$train == 0, ]
> >   trainColNum <- grep("train", names(df))
> >   trainset <- trainset[, -trainColNum]
> >   testset <- testset[, -trainColNum]
> >   svm_model <- svm(z ~ .,
> >                   data = trainset,
> >                   type = "C-classification",
> >                   kernel = "linear",
> >                   scale = FALSE)
> >   # generate contour
> >   xmat = make.grid(matrix(c(testset$x, testset$y),
> >                           ncol = 2, byrow=FALSE))
> >   xgrid = as.data.frame(xmat)
> >   names(xgrid) = c("x", "y")
> >   z = predict(svm_model, xgrid)
> >   xyz_dat = as.data.frame(cbind(xgrid, z))
> >   plot_list[[i]] = contourplot(z ~ y+x, data=xyz_dat, pretty = TRUE,
> >                                xlim=c(-1,50), ylim=c(-0.001, 0.05),
> >                                labels = FALSE, col = "blue", lwd = 0.5)
> >
> > }
> > # the contour is stored in the object plot_list
> > str(plot_list) # confirm that there is data here
> >
> > # I can add one element at the time to lattice's xyplot and store it
> > in an object P
> > P = xyplot(y ~ x, group = z, data = df,
> >            pch = 16, cex = 1.5, alpha = 0.25) + as.layer(plot_list[[1]]) +
> >   as.layer(plot_list[[2]])
> > plot(P)  # this demonstrates that the lines are not the same
> >
> > # but if I add the elements via loop, it does not work
> > for (i in 1:length(plot_list)) {
> >   print(i)
> >   P = xyplot(y ~ x, group = z, data = df,
> >              pch = 16, cex = 1.5, alpha = 0.25) + as.layer(plot_list[[i]])
> > }
> > plot(P)
> > ```
> >
> > Am I missing something?
>
> Yes, as Mark says, you need to change the last part to something like
>
> P = xyplot(y ~ x, group = z, data = df, pch = 16, cex = 1.5, alpha = 0.25)
> for (i in 1:length(plot_list)) {
>   print(i)
>   P = P + as.layer(plot_list[[i]])
> }
> plot(P)
>
> -Deepayan
>
> > Thank you
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Wed Oct 28 14:04:35 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Wed, 28 Oct 2020 13:04:35 +0000
Subject: [R] Dear R experts, I have a question about meta-analysis
In-Reply-To: <474a7bf7.1f1ac.1756a42db4f.Coremail.21803005@zju.edu.cn>
References: <474a7bf7.1f1ac.1756a42db4f.Coremail.21803005@zju.edu.cn>
Message-ID: <6da1b614-97eb-b2fa-b484-d952282dea71@dewey.myzen.co.uk>

Dear Zhang

There is a mailing list dedicated to meta-analysis in R where your 
question may get more attention. Before posting it would be a good idea 
to look at the archives as this issue comes up there repeatedly.

https://stat.ethz.ch/mailman/listinfo/r-sig-meta-analysis//

For a link to the archive and for instructions on registering for the list.

Michael


On 27/10/2020 13:32, 21803005 at zju.edu.cn wrote:
> Dear R experts,
> 
> Greetings from China! I'm Zhang in the College of Education, Zhejiang University, and I am recently running a meta-analysis. Since research using the randomized controlled trial (RCT) often dismissed reporting the correlation (r) between multivariate outcomes, for instance, a study measuring students' gains on problem solving skills with three aspects and reported the pre-post scores respectively, but obviously these three aspects were correlated. I wonder if and how I could integrate the effect sizes among these three aspects into an overall effect size without getting the concrete 'r'? Could R project and (or) function help me solve this problem?
> 
> 
> 
> 
> Best,
> 
> Zhang
> 
> 
> 
> 
> 
> ----------
> 
> Zhang Enming (???)
> 
> PhD Student
> 
> Department of Curriculum and Instruction
> 
> College of Education, Zhejiang University
> 
> Tel: +86 17649850218
> 
> Email: 21803005 at zju.edu.cn
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ne|gyn123 @end|ng |rom gm@||@com  Tue Oct 27 07:16:29 2020
From: ne|gyn123 @end|ng |rom gm@||@com (nelgyn tennyson)
Date: Tue, 27 Oct 2020 11:46:29 +0530
Subject: [R] Exporting SPSS Dataset to STATA format
Message-ID: <CALQXRX-HdBZwzYGvzmWDm-+bmama5e4H-LBB2=MtEJ3Pjy+weQ@mail.gmail.com>

*Dear Sir/Madam,*

*               Subject : Exporting SPSS Dataset to STATA format*

I have a SPSS file which i am able to import into R via Rcmdr or Rstudio.
But i am unable to export the same file into STATA format.
It would be kind of you to kindly help me achieve the same and send me  a
sample R script whcih could be used for the same purpose.

*Thanks and Regards*
*Nelgyn Tennyson *

	[[alternative HTML version deleted]]


From |r|e|joer|n @end|ng |rom gm@||@com  Wed Oct 28 14:44:08 2020
From: |r|e|joer|n @end|ng |rom gm@||@com (Iriel Joerin)
Date: Wed, 28 Oct 2020 10:44:08 -0300
Subject: [R] Reference to cite stats package
Message-ID: <CA+wVDaw4J=Ytfgj+OLmKBS-C==QrBknMuy35eQ9Uz4+gXbq3VQ@mail.gmail.com>

Hi,
I?m using the R package stats for some analysis, I would like to know if
there is any special reference paper to cite this package or just the R
paper itself.
Thank you very much for your answer,
Iriel Joerin

	[[alternative HTML version deleted]]


From e@ @end|ng |rom enr|co@chum@nn@net  Wed Oct 28 16:17:09 2020
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Wed, 28 Oct 2020 16:17:09 +0100
Subject: [R] Reference to cite stats package
In-Reply-To: <CA+wVDaw4J=Ytfgj+OLmKBS-C==QrBknMuy35eQ9Uz4+gXbq3VQ@mail.gmail.com>
 (Iriel Joerin's message of "Wed, 28 Oct 2020 10:44:08 -0300")
References: <CA+wVDaw4J=Ytfgj+OLmKBS-C==QrBknMuy35eQ9Uz4+gXbq3VQ@mail.gmail.com>
Message-ID: <874kmetm6i.fsf@enricoschumann.net>

On Wed, 28 Oct 2020, Iriel Joerin writes:

> Hi,
> I?m using the R package stats for some analysis, I would like to know if
> there is any special reference paper to cite this package or just the R
> paper itself.
> Thank you very much for your answer,
> Iriel Joerin
>

citation(package = "stats")

## The ?stats? package is part of R.  To cite R in publications use:
## 
##   R Core Team (2020). R: A language and environment for statistical
##   computing. R Foundation for Statistical Computing, Vienna, Austria.
##   URL https://www.R-project.org/.
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {R: A Language and Environment for Statistical Computing},
##     author = {{R Core Team}},
##     organization = {R Foundation for Statistical Computing},
##     address = {Vienna, Austria},
##     year = {2020},
##     url = {https://www.R-project.org/},
##   }
## 
## We have invested a lot of time and effort in creating R, please cite it
## when using it for data analysis. See also ?citation("pkgname")? for
## citing R packages.

kind regards
    Enrico
    
-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From jrkr|de@u @end|ng |rom gm@||@com  Wed Oct 28 16:17:12 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Wed, 28 Oct 2020 11:17:12 -0400
Subject: [R] Reference to cite stats package
In-Reply-To: <CA+wVDaw4J=Ytfgj+OLmKBS-C==QrBknMuy35eQ9Uz4+gXbq3VQ@mail.gmail.com>
References: <CA+wVDaw4J=Ytfgj+OLmKBS-C==QrBknMuy35eQ9Uz4+gXbq3VQ@mail.gmail.com>
Message-ID: <CAKZQJMBmxjMdDvdVhZ4S2o8KbN+k5ABfca9HrUYKra=BoRAA6w@mail.gmail.com>

citation("packagename")


citation("lubridate")

==============================
To cite lubridate in publications use:

  Garrett Grolemund, Hadley Wickham (2011). Dates and Times Made
  Easy with lubridate. Journal of Statistical Software, 40(3),
  1-25. URL http://www.jstatsoft.org/v40/i03/.

A BibTeX entry for LaTeX users is

  @Article{,
    title = {Dates and Times Made Easy with {lubridate}},
    author = {Garrett Grolemund and Hadley Wickham},
    journal = {Journal of Statistical Software},
    year = {2011},
    volume = {40},
    number = {3},
    pages = {1--25},
    url = {http://www.jstatsoft.org/v40/i03/},
  }

==========================================================





On Wed, 28 Oct 2020 at 11:07, Iriel Joerin <irieljoerin at gmail.com> wrote:

> Hi,
> I?m using the R package stats for some analysis, I would like to know if
> there is any special reference paper to cite this package or just the R
> paper itself.
> Thank you very much for your answer,
> Iriel Joerin
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Wed Oct 28 16:22:56 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Wed, 28 Oct 2020 11:22:56 -0400
Subject: [R] Exporting SPSS Dataset to STATA format
In-Reply-To: <CALQXRX-HdBZwzYGvzmWDm-+bmama5e4H-LBB2=MtEJ3Pjy+weQ@mail.gmail.com>
References: <CALQXRX-HdBZwzYGvzmWDm-+bmama5e4H-LBB2=MtEJ3Pjy+weQ@mail.gmail.com>
Message-ID: <CAKZQJMCokkmb5yMUBG7M_4W21Yr-iEp1y2SRsQVNxuAaUtDjBg@mail.gmail.com>

What have you tried so far?

The method shown here https://www.statmethods.net/input/exportingdata.html
should work.

On Wed, 28 Oct 2020 at 11:06, nelgyn tennyson <nelgyn123 at gmail.com> wrote:

> *Dear Sir/Madam,*
>
> *               Subject : Exporting SPSS Dataset to STATA format*
>
> I have a SPSS file which i am able to import into R via Rcmdr or Rstudio.
> But i am unable to export the same file into STATA format.
> It would be kind of you to kindly help me achieve the same and send me  a
> sample R script whcih could be used for the same purpose.
>
> *Thanks and Regards*
> *Nelgyn Tennyson *
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Oct 29 01:47:10 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 29 Oct 2020 11:47:10 +1100
Subject: [R] Creating unique code
In-Reply-To: <0C451058-393E-4D8C-8B8E-55F641DEA80C@outlook.com>
References: <50C9397A-5D9A-460D-AFEE-8A0A5501737C@outlook.com>
 <CA+8X3fUMYtCvd1exMTbWdHEzsSbF7uZdnsCsaNXPni8Jw9GzxA@mail.gmail.com>
 <E4FEF7FF-31D4-4E8F-B301-5EC0D65DE308@outlook.com>
 <CA+8X3fUsuyi-bGL10acC9xS=mC+2=feMbv52zOUCZPYs8h4T0g@mail.gmail.com>
 <0C451058-393E-4D8C-8B8E-55F641DEA80C@outlook.com>
Message-ID: <CA+8X3fUCicWXixYYLXO2_JVfHpqr_kZvdX4LBKbdwtJJxuz49A@mail.gmail.com>

Hi Hannah,
Yes, that does give me more insight. The polygyny only doesn't matter, for
even if there was polyandry it could be coded in the same way. If I
understand this correctly you have one variable (SPRULE) that must contain
information about the household of the individual and the identities of his
(or her) relationship partner(s). The household number can accommodate up
to three relationship partners as long as there are a maximum of 9 people
per household. Given these constraints, I think this may do what you want:

ipumsi_00008_dta<-
 read.table(
 text="country year sample serial hhwt pernum perwt resident sploc sprule
204 2013 204201301 4000 10 1 10 1 5 2
204 2013 204201301 4000 10 2 10 1 0 2
204 2013 204201301 4000 10 3 10 1 0 2
204 2013 204201301 4000 10 4 10 1 0 2
204 2013 204201301 4000 10 5 10 1 1 2
204 2013 204201301 4000 10 6 10 1 1 2
204 2013 204201301 4000 10 7 10 1 0 2
204 2013 204201301 4000 10 8 10 1 0 2
204 2013 204201301 4000 10 9 10 1 0 2
204 2013 204201301 7000 10 1 10 1 2 1
204 2013 204201301 7000 10 2 10 1 1 1
204 2013 204201301 7000 10 3 10 1 0 0
204 2013 204201301 7000 10 4 10 1 5 1
204 2013 204201301 7000 10 5 10 1 4 1",
header=TRUE,stringsAsFactors=FALSE)
for(hh in unique(ipumsi_00008_dta$serial)) {
 cat("hh",hh," ")
 for(ind in ipumsi_00008_dta$pernum[ipumsi_00008_dta$serial == hh]) {
  cat("ind",ind,"\n")
  if(ipumsi_00008_dta$sploc[ipumsi_00008_dta$serial == hh &
    ipumsi_00008_dta$pernum == ind] > 0) {
   cat("sploc > 0\n")
   relationships<-
    ipumsi_00008_dta$pernum[ipumsi_00008_dta$serial == hh &
     ipumsi_00008_dta$sploc == ind]
   cat(relationships,"\n")
   if(length(relationships > 1)) {
    ipumsi_00008_dta$sprule[ipumsi_00008_dta$serial == hh &
     ipumsi_00008_dta$pernum == ind]<-
      hh+as.numeric(paste0(relationships,collapse=""))
   } else {
    ipumsi_00008_dta$sprule[ipumsi_00008_dta$serial == hh &
     ipumsi_00008_dta$pernum == ind]<-hh+
    ipumsi_00008_dta$sploc[ipumsi_00008_dta$serial == hh &
     ipumsi_00008_dta$pernum == ind]
   }
  } else {
   ipumsi_00008_dta$sprule[ipumsi_00008_dta$serial == hh &
    ipumsi_00008_dta$pernum == ind]<-hh
  }
 }
}
ipumsi_00008_dta

Note that this is a bad way to create a field in a database and it would be
better to create the information on the fly with a query.
It won't work with between household relationships

Jim

On Wed, Oct 28, 2020 at 10:08 PM Hannah Van Impe <hannahvanimpe at outlook.com>
wrote:

> Hello
> Again, thank you very much for the help!!
>
...

> In this foto, you can see that there is a polygamous union in household 6.
> The men always only shows 1 sploc variable, even when they have multiple
> women. So, only men have multiple women and women don?t have multiple men.
> So here, The man is observation 49, and he is linked with woman 53, but he
> can also be linked with other women. We see that woman 53 is linked with
> this man, but also woman 54 is linked with this man. So the man in
> observation 49 is linked with two women, 53 and 54, and I would like to
> give these 3 observations the same numerical code, so I can identity this
> union.
> Is it possible to give more explanation when you have this information?
> Hannah
>
>

	[[alternative HTML version deleted]]


From @b|@yeng@|@b@ @end|ng |rom gm@||@com  Thu Oct 29 08:50:41 2020
From: @b|@yeng@|@b@ @end|ng |rom gm@||@com (Ablaye Ngalaba)
Date: Thu, 29 Oct 2020 08:50:41 +0100
Subject: [R] Need help in programming R on functional data
Message-ID: <CAOkWQv3AExg2U71EJ56hyN=9dzzepzR-8n=CjH66G-y=yca9uA@mail.gmail.com>

Hello,
I need to generate the functional data in R programming but I can't do it.
Please, an example of R code that generates the functional data can help me.



Thank you and have a nice day

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Thu Oct 29 11:52:11 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 29 Oct 2020 10:52:11 +0000
Subject: [R] Need help in programming R on functional data
In-Reply-To: <CAOkWQv3AExg2U71EJ56hyN=9dzzepzR-8n=CjH66G-y=yca9uA@mail.gmail.com>
References: <CAOkWQv3AExg2U71EJ56hyN=9dzzepzR-8n=CjH66G-y=yca9uA@mail.gmail.com>
Message-ID: <53ffa5a4-84d5-053f-53fe-2a9604f93df6@dewey.myzen.co.uk>

You have already asked this and people gave you a variety of answers. 
Just asking again without clarifying why those answers did not help you 
is not going to solve your problem.

Tell us what you tried and why it failed might help.

Michael

On 29/10/2020 07:50, Ablaye Ngalaba wrote:
> Hello,
> I need to generate the functional data in R programming but I can't do it.
> Please, an example of R code that generates the functional data can help me.
> 
> 
> 
> Thank you and have a nice day
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From k|er@n@b@ker @end|ng |rom kc|@@c@uk  Thu Oct 29 00:03:21 2020
From: k|er@n@b@ker @end|ng |rom kc|@@c@uk (Baker, Kieran)
Date: Wed, 28 Oct 2020 23:03:21 +0000
Subject: [R] R optim() function
Message-ID: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>

Hi R-Help,

I am using R to do functional outlier detection (using PCA to reduce to 2 dimensions - the functional boxplot methodology used in the Rainbow package), and using Hscv.diag function to calculate the bandwidth matrix where this line of code is run:
result <- optim(diag(Hstart), scv.mat.temp, method = "Nelder-Mead", control = list(trace = as.numeric(verbose)))

Within the optim function, there is a call to an external C function:
.External2(C_optim, par, fn1, gr1, method, con, lower, upper)
Where
Par = (0.339, 0.339),
fn1 = function (diagH)
{
  H <- diag(diagH) %*% diag(diagH)
  if (default.bflag(d = d, n = n))
    scvm <- scv.mat(x.star, H, Gs, binned = binned, verbose = FALSE,
      bin.par = bin.par.star, deriv.order = r)
  else scvm <- scv.mat(x.star, H, Gs, binned = binned, verbose = FALSE,
    deriv.order = r)
  return(scvm)
},
gr1 is Null,
method = "Nelder-Mead"
con is a list of 18 items (trace=0, fnscale=1, parscale=(1,1), ...),
lower and upper are -Inf and Inf respectively.

When this is run, it returns an error
Error in chol.default(H) :
  the leading minor of order 1 is not positive definite

Has anyone any experience with this error, or know where I can locate the code for the C_optim function to continue trying to find the issue and a work around?

Thanks for any help,

Kieran

	[[alternative HTML version deleted]]


From k|@@oonjoy @end|ng |rom gm@||@com  Thu Oct 29 15:49:42 2020
From: k|@@oonjoy @end|ng |rom gm@||@com (Joy Kissoon)
Date: Thu, 29 Oct 2020 10:49:42 -0400
Subject: [R] Good Evening,
In-Reply-To: <CAJtRwT89yPE3La38NcJvEv4Zzv_zqeS8gJ4Z3s5rbsONDpHe9A@mail.gmail.com>
References: <CAJtRwT9zFc9GKsQ-wpbqLuVeTsyWq8w02Ds6cZqq0q24FdUsNw@mail.gmail.com>
 <CAJtRwT-Amn4W2k6hU_x7riUo8s22-fyfCAzSK0E6z5_oMO23Qg@mail.gmail.com>
 <24473.9597.373417.284267@stat.math.ethz.ch>
 <CAJtRwT89yPE3La38NcJvEv4Zzv_zqeS8gJ4Z3s5rbsONDpHe9A@mail.gmail.com>
Message-ID: <CAJtRwT-75Zck4zhC-SyHpyV=DYpx9XdyOkqbdvrR9E1F9w8xBw@mail.gmail.com>

I contacted Martin Maechler (maechler at stat.math.ethz.ch) and was advised to
contact you for input on the question below...thanks!

I am very new with the R experience, all I know is that it's computer
language & coding... I'm trying to plot a regression graph for runif (100,
1000, 10000). What am I not getting here, I can get the values in R no
problem, but no idea how to turn it into a graph... No idea how to
determine the X or Y axis...etc.
Any assistance will be appreciated...Much Thanks!
Thanks,
*Joy (B.) Kissoon* (Ba.So.Sc.-Criminal Justice, Nurse, Artist)
Best Regards,
*Joy (B.) Kissoon* (Ba.So.Sc.-Criminal Justice, Nurse, Artist)


<http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Virus-free.
www.avg.com
<http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

On Thu, Oct 29, 2020 at 10:32 AM Joy Kissoon <kissoonjoy at gmail.com> wrote:

> Good Morning Martin,
> Strangest thing I sent off my question to:   r-help at r-project.org  and
> they forwarded your email address...!
> Could you possibly refer me to one of the volunteers? I will also contact
> R-helper again...thanks..
> Thanks,
> *Joy (B.) Kissoon* (Ba.So.Sc.-Criminal Justice, Nurse, Artist)
>
>
>
> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail> Virus-free.
> www.avg.com
> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> <#m_6176805314384524439_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>
> On Wed, Oct 28, 2020 at 4:02 AM Martin Maechler <
> maechler at stat.math.ethz.ch> wrote:
>
>> >>>>> Joy Kissoon
>> >>>>>     on Tue, 27 Oct 2020 15:53:00 -0400 writes:
>>
>>     > I am very new with the R experience, all I know is that it's
>> computer
>>     > language & coding... I'm trying to plot a regression graph for
>> runif (100,
>>     > 1000, 10000). What am I not getting here, I can get the values in R
>> no
>>     > problem, but no idea how to turn it into a graph... No idea how to
>>     > determine the X or Y axis...etc.
>>
>> Dear Joy,
>>
>> you've sent this message to  'r-help-owner at r-project.org'
>> but you should address it to the mailing list which is
>>  r-help at r-project.org
>>
>> (The ..-owner at .... address is for the few volunteers who
>>  moderate the list).
>>
>> So do send this again to the correct address,
>> please.
>>
>> Best,
>> Martin Maechler
>>
>>     > Any assistance will be appreciated...Much Thanks!
>>     > Thanks,
>>
>>
>>     > <
>> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
>> >
>>     > Virus-free.
>>     > www.avg.com
>>     > <
>> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
>> >
>>     > <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>>
>>     > On Mon, Oct 26, 2020 at 10:51 PM Joy Kissoon <kissoonjoy at gmail.com>
>> wrote:
>>
>>     >> I am very new with the R experience, all I know is that it's
>> computer
>>     >> language & coding... I'm trying to plot a regression graph for
>> runif (100,
>>     >> 1000, 10000). What am I not getting here, I can get the values in
>> R no
>>     >> problem, but no idea how to turn it into a graph... No idea how to
>>     >> determine the X or Y axis...etc.
>>     >> Any assistance will be appreciated...Much Thanks!
>>     >> Thanks,
>>     >> *Joy (B.) Kissoon* (Ba.So.Sc.-Criminal Justice, Nurse, Artist)
>>     >>
>>     >>
>>     >> <
>> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
>> Virus-free.
>>     >> www.avg.com
>>     >> <
>> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
>> >
>>     >> <#m_-6936147010348788549_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>>     >>
>>
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Oct 29 18:07:00 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 29 Oct 2020 17:07:00 +0000
Subject: [R] Good Evening,
In-Reply-To: <CAJtRwT-75Zck4zhC-SyHpyV=DYpx9XdyOkqbdvrR9E1F9w8xBw@mail.gmail.com>
References: <CAJtRwT9zFc9GKsQ-wpbqLuVeTsyWq8w02Ds6cZqq0q24FdUsNw@mail.gmail.com>
 <CAJtRwT-Amn4W2k6hU_x7riUo8s22-fyfCAzSK0E6z5_oMO23Qg@mail.gmail.com>
 <24473.9597.373417.284267@stat.math.ethz.ch>
 <CAJtRwT89yPE3La38NcJvEv4Zzv_zqeS8gJ4Z3s5rbsONDpHe9A@mail.gmail.com>
 <CAJtRwT-75Zck4zhC-SyHpyV=DYpx9XdyOkqbdvrR9E1F9w8xBw@mail.gmail.com>
Message-ID: <cbea006d-a129-19b9-0a9e-ba2386f14948@sapo.pt>

Hello,

To plot a graph you don't need to compute the axis, R will do it for you:

# create data
set.seed(2020)    # Make the results reproducible
x <- runif(100, 1000, 10000)


This is not very intuitive but the following will plot the x values in 
the y axis, along the x axis values 1 to 100.


plot(x)


To plot a regression line you will need a regression model and that 
means you need a response variable.

y <- x + rnorm(100)

model <- lm(y ~ x)
plot(x, y)
abline(model, col = "red")



The question is very basic, you should focus on learning a bit more of 
R. Start with R-intro.pdf that comes with R. There are also many texts 
online that cover this and lots of other graphics stuff.


Hope this helps,

Rui Barradas

?s 14:49 de 29/10/20, Joy Kissoon escreveu:
> runif (100,
> 1000, 10000)


From @gent@ @end|ng |rom medd@t@|nc@com  Thu Oct 29 18:29:41 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Thu, 29 Oct 2020 13:29:41 -0400
Subject: [R] FREDR and R 3.6
Message-ID: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>

I tried to install the fredr package yesterday to access the data series hosted by the St. Louis Fed but my installation of R, version 3.6, tells me it is not available from a cran repository.

I could not find any information on this on the fredr information package and was wondering if anyone here might know?


From pro|jcn@@h @end|ng |rom gm@||@com  Thu Oct 29 18:34:34 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Thu, 29 Oct 2020 13:34:34 -0400
Subject: [R] R optim() function
In-Reply-To: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
References: <AM0PR03MB58582969DFE289C979D5B38AC9170@AM0PR03MB5858.eurprd03.prod.outlook.com>
Message-ID: <690c46de-7b13-c9d4-30a8-f6b065570265@gmail.com>

The issue is almost certainly in the objective function i.e., diagH,
since Nelder Mead doesn't use any matrix operations such as Choleski.

I think you probably need to adjust the objective function to catch
singularities (non-positive definite cases). I do notice that you have
two identical parameters, so perhaps the matrix is something with
identical rows or columns.

You may be able to get more insight by calling optimr() from the optimx
package (I'm one of the authors) and using a different but similar optimizer
such as nmkb which is all in R so the trace is a bit easier.

It also is helpful to try the diagH function with the parameters that seem
to be giving trouble in a direct call from R.

JN


On 2020-10-28 7:03 p.m., Baker, Kieran via R-help wrote:
> Hi R-Help,
> 
> I am using R to do functional outlier detection (using PCA to reduce to 2 dimensions - the functional boxplot methodology used in the Rainbow package), and using Hscv.diag function to calculate the bandwidth matrix where this line of code is run:
> result <- optim(diag(Hstart), scv.mat.temp, method = "Nelder-Mead", control = list(trace = as.numeric(verbose)))
> 
> Within the optim function, there is a call to an external C function:
> .External2(C_optim, par, fn1, gr1, method, con, lower, upper)
> Where
> Par = (0.339, 0.339),
> fn1 = function (diagH)
> {
>   H <- diag(diagH) %*% diag(diagH)
>   if (default.bflag(d = d, n = n))
>     scvm <- scv.mat(x.star, H, Gs, binned = binned, verbose = FALSE,
>       bin.par = bin.par.star, deriv.order = r)
>   else scvm <- scv.mat(x.star, H, Gs, binned = binned, verbose = FALSE,
>     deriv.order = r)
>   return(scvm)
> },
> gr1 is Null,
> method = "Nelder-Mead"
> con is a list of 18 items (trace=0, fnscale=1, parscale=(1,1), ...),
> lower and upper are -Inf and Inf respectively.
> 
> When this is run, it returns an error
> Error in chol.default(H) :
>   the leading minor of order 1 is not positive definite
> 
> Has anyone any experience with this error, or know where I can locate the code for the C_optim function to continue trying to find the issue and a work around?
> 
> Thanks for any help,
> 
> Kieran
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@rc_@chw@rtz @end|ng |rom me@com  Thu Oct 29 18:49:58 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Thu, 29 Oct 2020 13:49:58 -0400
Subject: [R] FREDR and R 3.6
In-Reply-To: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
References: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
Message-ID: <3069209C-ED94-4400-9ADE-289D38B8A509@me.com>


> On Oct 29, 2020, at 1:29 PM, H <agents at meddatainc.com> wrote:
> 
> I tried to install the fredr package yesterday to access the data series hosted by the St. Louis Fed but my installation of R, version 3.6, tells me it is not available from a cran repository.
> 
> I could not find any information on this on the fredr information package and was wondering if anyone here might know?


Hi,

When that happens, check the CRAN page for the package:

  https://cran.r-project.org/web/packages/fredr/index.html

where you will see that the package has been archived as a result of a lack of response by the maintainer to problems with the package.

The archive link on the above page allows you to download the last version of the source package tarball, however, the check results for the package show numerous issues.

You may want to contact the package maintainer (sboysel at gmail.com) to see what the current status of the package is, and if they plan to resolve the issues. If not, consider alternative approaches.

You should also consider updating your R installation, as 3.6.0 is well over a year old at this point. 4.0.3 is the current stable release.

Regards,

Marc Schwartz

From @gent@ @end|ng |rom medd@t@|nc@com  Thu Oct 29 23:35:05 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Thu, 29 Oct 2020 18:35:05 -0400
Subject: [R] FREDR and R 3.6
In-Reply-To: <3069209C-ED94-4400-9ADE-289D38B8A509@me.com>
References: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
 <3069209C-ED94-4400-9ADE-289D38B8A509@me.com>
Message-ID: <cbb3ade1-196c-14e9-0b60-e7c2ba04c5cd@meddatainc.com>

On 10/29/2020 01:49 PM, Marc Schwartz wrote:
>> On Oct 29, 2020, at 1:29 PM, H <agents at meddatainc.com> wrote:
>>
>> I tried to install the fredr package yesterday to access the data series hosted by the St. Louis Fed but my installation of R, version 3.6, tells me it is not available from a cran repository.
>>
>> I could not find any information on this on the fredr information package and was wondering if anyone here might know?
>
> Hi,
>
> When that happens, check the CRAN page for the package:
>
>   https://cran.r-project.org/web/packages/fredr/index.html
>
> where you will see that the package has been archived as a result of a lack of response by the maintainer to problems with the package.
>
> The archive link on the above page allows you to download the last version of the source package tarball, however, the check results for the package show numerous issues.
>
> You may want to contact the package maintainer (sboysel at gmail.com) to see what the current status of the package is, and if they plan to resolve the issues. If not, consider alternative approaches.
>
> You should also consider updating your R installation, as 3.6.0 is well over a year old at this point. 4.0.3 is the current stable release.
>
> Regards,
>
> Marc Schwartz

Thank you. That is very surprising! I would have thought there would be sufficient number of users and interest enough for this important package that it would be maintained!

As for R 3.6, it is the latest version in the repository for my operating system, CentOS/RHEL...


From m@rc_@chw@rtz @end|ng |rom me@com  Fri Oct 30 00:20:59 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Thu, 29 Oct 2020 19:20:59 -0400
Subject: [R] FREDR and R 3.6
In-Reply-To: <cbb3ade1-196c-14e9-0b60-e7c2ba04c5cd@meddatainc.com>
References: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
 <3069209C-ED94-4400-9ADE-289D38B8A509@me.com>
 <cbb3ade1-196c-14e9-0b60-e7c2ba04c5cd@meddatainc.com>
Message-ID: <5BD4D1DB-0ADB-400D-8E77-7BBAF7117D53@me.com>


> On Oct 29, 2020, at 6:35 PM, H <agents at meddatainc.com> wrote:
> 
> On 10/29/2020 01:49 PM, Marc Schwartz wrote:
>>> On Oct 29, 2020, at 1:29 PM, H <agents at meddatainc.com> wrote:
>>> 
>>> I tried to install the fredr package yesterday to access the data series hosted by the St. Louis Fed but my installation of R, version 3.6, tells me it is not available from a cran repository.
>>> 
>>> I could not find any information on this on the fredr information package and was wondering if anyone here might know?
>> 
>> Hi,
>> 
>> When that happens, check the CRAN page for the package:
>> 
>>  https://cran.r-project.org/web/packages/fredr/index.html
>> 
>> where you will see that the package has been archived as a result of a lack of response by the maintainer to problems with the package.
>> 
>> The archive link on the above page allows you to download the last version of the source package tarball, however, the check results for the package show numerous issues.
>> 
>> You may want to contact the package maintainer (sboysel at gmail.com) to see what the current status of the package is, and if they plan to resolve the issues. If not, consider alternative approaches.
>> 
>> You should also consider updating your R installation, as 3.6.0 is well over a year old at this point. 4.0.3 is the current stable release.
>> 
>> Regards,
>> 
>> Marc Schwartz
> 
> Thank you. That is very surprising! I would have thought there would be sufficient number of users and interest enough for this important package that it would be maintained!
> 
> As for R 3.6, it is the latest version in the repository for my operating system, CentOS/RHEL...


Hi,

On your first point, the number of users is largely irrelevant, if the package maintainer no longer has the interest or the time to continue to support it. It is possible, in that scenario, that an interested user, who has the time and interest, might engage in a process to take over such maintenance.

Keep in mind that package maintainers are, in the vast majority of cases, volunteers. Their motivations for creating and maintaining CRAN packages will vary.

I did a quick check and found that there are discussions in the Issues section of the package's Github repo:

  https://github.com/sboysel/fredr

that suggest that such discussions are indeed taking place. So perhaps the situation with CRAN will be resolved in time. Again, you should contact the maintainer to get a better sense of their plans and possible timeline.

With respect to CentOS/RHEL, you might post to r-sig-fedora, which focuses on R issues on RH derived Linux distros, to see if there are any plans to update R for your version of the distribution:

  https://stat.ethz.ch/mailman/listinfo/r-sig-fedora

The R RPM maintainers, like Tom Callaway, follow that list.

Regards,

Marc


From drj|m|emon @end|ng |rom gm@||@com  Fri Oct 30 01:04:22 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 30 Oct 2020 11:04:22 +1100
Subject: [R] Good Evening,
In-Reply-To: <CAJtRwT-75Zck4zhC-SyHpyV=DYpx9XdyOkqbdvrR9E1F9w8xBw@mail.gmail.com>
References: <CAJtRwT9zFc9GKsQ-wpbqLuVeTsyWq8w02Ds6cZqq0q24FdUsNw@mail.gmail.com>
 <CAJtRwT-Amn4W2k6hU_x7riUo8s22-fyfCAzSK0E6z5_oMO23Qg@mail.gmail.com>
 <24473.9597.373417.284267@stat.math.ethz.ch>
 <CAJtRwT89yPE3La38NcJvEv4Zzv_zqeS8gJ4Z3s5rbsONDpHe9A@mail.gmail.com>
 <CAJtRwT-75Zck4zhC-SyHpyV=DYpx9XdyOkqbdvrR9E1F9w8xBw@mail.gmail.com>
Message-ID: <CA+8X3fXf5OM4so9R2k0CC2ha5-hCKquzm51P74_bPve_wuaDcw@mail.gmail.com>

Hi Joy,
As Rui noted, you can get a plot with:

jk.dat<-runif(100,1000,10000)
plot(jk.dat,type="l")

This plots your vector of 100 uniformly distributed numbers against their
"index" (the order in which they appear in the vector). I suspect your
problem is that you want to define a vector of "x" values that will attach
them to a real set of observations. Say that you are preparing to work with
the daily counts of cosmic rays for a neutron monitor.

obs_dates<-as.Date(as.Date("2020-07-23"):as.Date("2020-10-30"),
 origin=as.Date("1970-01-01"))
plot(obs_dates,jk.dat,type="l",main="Daily CR counts")

That may give you some ideas.

Jim


On Fri, Oct 30, 2020 at 3:38 AM Joy Kissoon <kissoonjoy at gmail.com> wrote:

> I contacted Martin Maechler (maechler at stat.math.ethz.ch) and was advised
> to
> contact you for input on the question below...thanks!
>
> I am very new with the R experience, all I know is that it's computer
> language & coding... I'm trying to plot a regression graph for runif (100,
> 1000, 10000). What am I not getting here, I can get the values in R no
> problem, but no idea how to turn it into a graph... No idea how to
> determine the X or Y axis...etc.
> Any assistance will be appreciated...Much Thanks!
> Thanks,
> *Joy (B.) Kissoon* (Ba.So.Sc.-Criminal Justice, Nurse, Artist)
> Best Regards,
> *Joy (B.) Kissoon* (Ba.So.Sc.-Criminal Justice, Nurse, Artist)
>
>
> <
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >
> Virus-free.
> www.avg.com
> <
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >
> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>
> On Thu, Oct 29, 2020 at 10:32 AM Joy Kissoon <kissoonjoy at gmail.com> wrote:
>
> > Good Morning Martin,
> > Strangest thing I sent off my question to:   r-help at r-project.org  and
> > they forwarded your email address...!
> > Could you possibly refer me to one of the volunteers? I will also contact
> > R-helper again...thanks..
> > Thanks,
> > *Joy (B.) Kissoon* (Ba.So.Sc.-Criminal Justice, Nurse, Artist)
> >
> >
> >
> > <
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> Virus-free.
> > www.avg.com
> > <
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >
> > <#m_6176805314384524439_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> >
> > On Wed, Oct 28, 2020 at 4:02 AM Martin Maechler <
> > maechler at stat.math.ethz.ch> wrote:
> >
> >> >>>>> Joy Kissoon
> >> >>>>>     on Tue, 27 Oct 2020 15:53:00 -0400 writes:
> >>
> >>     > I am very new with the R experience, all I know is that it's
> >> computer
> >>     > language & coding... I'm trying to plot a regression graph for
> >> runif (100,
> >>     > 1000, 10000). What am I not getting here, I can get the values in
> R
> >> no
> >>     > problem, but no idea how to turn it into a graph... No idea how to
> >>     > determine the X or Y axis...etc.
> >>
> >> Dear Joy,
> >>
> >> you've sent this message to  'r-help-owner at r-project.org'
> >> but you should address it to the mailing list which is
> >>  r-help at r-project.org
> >>
> >> (The ..-owner at .... address is for the few volunteers who
> >>  moderate the list).
> >>
> >> So do send this again to the correct address,
> >> please.
> >>
> >> Best,
> >> Martin Maechler
> >>
> >>     > Any assistance will be appreciated...Much Thanks!
> >>     > Thanks,
> >>
> >>
> >>     > <
> >>
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >> >
> >>     > Virus-free.
> >>     > www.avg.com
> >>     > <
> >>
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >> >
> >>     > <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> >>
> >>     > On Mon, Oct 26, 2020 at 10:51 PM Joy Kissoon <
> kissoonjoy at gmail.com>
> >> wrote:
> >>
> >>     >> I am very new with the R experience, all I know is that it's
> >> computer
> >>     >> language & coding... I'm trying to plot a regression graph for
> >> runif (100,
> >>     >> 1000, 10000). What am I not getting here, I can get the values in
> >> R no
> >>     >> problem, but no idea how to turn it into a graph... No idea how
> to
> >>     >> determine the X or Y axis...etc.
> >>     >> Any assistance will be appreciated...Much Thanks!
> >>     >> Thanks,
> >>     >> *Joy (B.) Kissoon* (Ba.So.Sc.-Criminal Justice, Nurse, Artist)
> >>     >>
> >>     >>
> >>     >> <
> >>
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >
> >> Virus-free.
> >>     >> www.avg.com
> >>     >> <
> >>
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >> >
> >>     >> <#m_-6936147010348788549_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> >>     >>
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jwd @end|ng |rom @urewe@t@net  Fri Oct 30 01:32:47 2020
From: jwd @end|ng |rom @urewe@t@net (John)
Date: Thu, 29 Oct 2020 17:32:47 -0700
Subject: [R] FREDR and R 3.6
In-Reply-To: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
References: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
Message-ID: <20201029173247.6895ee65@Draco>

On Thu, 29 Oct 2020 13:29:41 -0400
H <agents at meddatainc.com> wrote:

> I tried to install the fredr package yesterday to access the data
> series hosted by the St. Louis Fed but my installation of R, version
> 3.6, tells me it is not available from a cran repository.
> 
> I could not find any information on this on the fredr information
> package and was wondering if anyone here might know?
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html and provide commented,
> minimal, self-contained, reproducible code.

If you check, the response is correct.  The package is available on
Github.

JWdougherty


From @gent@ @end|ng |rom medd@t@|nc@com  Fri Oct 30 02:27:56 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Thu, 29 Oct 2020 21:27:56 -0400
Subject: [R] FREDR and R 3.6
In-Reply-To: <5BD4D1DB-0ADB-400D-8E77-7BBAF7117D53@me.com>
References: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
 <3069209C-ED94-4400-9ADE-289D38B8A509@me.com>
 <cbb3ade1-196c-14e9-0b60-e7c2ba04c5cd@meddatainc.com>
 <5BD4D1DB-0ADB-400D-8E77-7BBAF7117D53@me.com>
Message-ID: <1f930c13-6364-5e05-ffa9-8f2747d2868a@meddatainc.com>

On 10/29/2020 07:20 PM, Marc Schwartz wrote:
>> On Oct 29, 2020, at 6:35 PM, H <agents at meddatainc.com> wrote:
>>
>> On 10/29/2020 01:49 PM, Marc Schwartz wrote:
>>>> On Oct 29, 2020, at 1:29 PM, H <agents at meddatainc.com> wrote:
>>>>
>>>> I tried to install the fredr package yesterday to access the data series hosted by the St. Louis Fed but my installation of R, version 3.6, tells me it is not available from a cran repository.
>>>>
>>>> I could not find any information on this on the fredr information package and was wondering if anyone here might know?
>>> Hi,
>>>
>>> When that happens, check the CRAN page for the package:
>>>
>>>  https://cran.r-project.org/web/packages/fredr/index.html
>>>
>>> where you will see that the package has been archived as a result of a lack of response by the maintainer to problems with the package.
>>>
>>> The archive link on the above page allows you to download the last version of the source package tarball, however, the check results for the package show numerous issues.
>>>
>>> You may want to contact the package maintainer (sboysel at gmail.com) to see what the current status of the package is, and if they plan to resolve the issues. If not, consider alternative approaches.
>>>
>>> You should also consider updating your R installation, as 3.6.0 is well over a year old at this point. 4.0.3 is the current stable release.
>>>
>>> Regards,
>>>
>>> Marc Schwartz
>> Thank you. That is very surprising! I would have thought there would be sufficient number of users and interest enough for this important package that it would be maintained!
>>
>> As for R 3.6, it is the latest version in the repository for my operating system, CentOS/RHEL...
>
> Hi,
>
> On your first point, the number of users is largely irrelevant, if the package maintainer no longer has the interest or the time to continue to support it. It is possible, in that scenario, that an interested user, who has the time and interest, might engage in a process to take over such maintenance.
>
> Keep in mind that package maintainers are, in the vast majority of cases, volunteers. Their motivations for creating and maintaining CRAN packages will vary.
>
> I did a quick check and found that there are discussions in the Issues section of the package's Github repo:
>
>   https://github.com/sboysel/fredr
>
> that suggest that such discussions are indeed taking place. So perhaps the situation with CRAN will be resolved in time. Again, you should contact the maintainer to get a better sense of their plans and possible timeline.
>
> With respect to CentOS/RHEL, you might post to r-sig-fedora, which focuses on R issues on RH derived Linux distros, to see if there are any plans to update R for your version of the distribution:
>
>   https://stat.ethz.ch/mailman/listinfo/r-sig-fedora
>
> The R RPM maintainers, like Tom Callaway, follow that list.
>
> Regards,
>
> Marc
>
Thank you, I will check out the GitHub pages tomorrow. As for R, amazingly enough, shortly after your post I received another post that R 4.0 was available for CentOS 8... I run CentOS 7 though but hopefully R 4.0 will be available there shortly as well. Turns out I was already a member of that mailing list and will post a question.


From e@ @end|ng |rom enr|co@chum@nn@net  Fri Oct 30 08:52:10 2020
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Fri, 30 Oct 2020 08:52:10 +0100
Subject: [R] FREDR and R 3.6
In-Reply-To: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com> (H.'s
 message of "Thu, 29 Oct 2020 13:29:41 -0400")
References: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
Message-ID: <87wnz8i21h.fsf@enricoschumann.net>

On Thu, 29 Oct 2020, H writes:

> I tried to install the fredr package yesterday to
> access the data series hosted by the St. Louis Fed but
> my installation of R, version 3.6, tells me it is not
> available from a cran repository.
>
> I could not find any information on this on the fredr information package and was wondering if anyone here might know?
>

Just for completeness: there is also the 'alfred' package
(https://cran.r-project.org/package=alfred), with which
you can also access data of the St. Louis Fed.

-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From h@nn@hv@n|mpe @end|ng |rom out|ook@com  Fri Oct 30 09:15:06 2020
From: h@nn@hv@n|mpe @end|ng |rom out|ook@com (Hannah Van Impe)
Date: Fri, 30 Oct 2020 08:15:06 +0000
Subject: [R] Error: variable not found
Message-ID: <6BDCE9C6-8E88-4AD5-B339-9D32A4630CE8@outlook.com>

Hello

I have a question. I made an r-script and did a few commands needed to make some new variables. They all work out well, and when I run the commands, the new variables appear in the dataset. I can also work with these new variables to make other new variables from them. Also, when I use summary(dataset), those new variables appear in the summary of the dataset.
But, when I do summary(new variable) => error: variable not found.
For example: summary(couple_id) => Error in summary(couple_id) : object 'couple_id' not found. What can I do about this?

R-script:
attach(ipumsi_00008_dta)
library(tinytex)
library(dplyr)
library(ggplot2)
library(tidyr)
library(knitr)
library(forcats)
library(mice)
library(pander)
library(ggcorrplot)
library(lubridate)
# true/false code when sploc is greater than zero and sprule is equal to 1 or 2
ipumsi_00008_dta <- mutate(ipumsi_00008_dta, rule_union = sploc>0 & (sprule==1 | sprule==2))
## creating numeric code for rule_union & rule_unionn: 1 when sploc is greater than zero and sprule is equal to 1 or 2, 0 if not.
## This is neccesary because otherwise it is a logical code and we cannot multiply with it, which is needed
ipumsi_00008_dta <- ipumsi_00008_dta %>% mutate(rule_union_numeric = as.numeric(rule_union))
### creating unique numeric code for sploc / pernum variables
ipumsi_00008_dta <- mutate(ipumsi_00008_dta, sploc_pernum_code = pernum*(sex==1) + sploc*(sex==2))
#### dividing serial by 1000, otherwise, the ultimate couple_id is too large, and it works in this dataset because the serials start at 1000 (I will have to check if this works for other datasets)
ipumsi_00008_dta <- mutate(ipumsi_00008_dta, serial_divided = serial%/%1000)
##### creating unique union identifier
ipumsi_00008_dta$union_id = paste0(ipumsi_00008_dta$country, ipumsi_00008_dta$year, ipumsi_00008_dta$serial_divided, ipumsi_00008_dta$sploc_pernum_code)
ipumsi_00008_dta <- ipumsi_00008_dta %>% mutate(union_id_numeric = as.numeric(union_id))
ipumsi_00008_dta <- mutate(ipumsi_00008_dta, couple_id = union_id_numeric*rule_union_numeric)
###### Understanding the couple_id variable
summary(couple_id)
summary(ipumsi_00008_dta)

I also attached my dataset.

Thank you very much for the answer!
Hannah Van Impe

From drj|m|emon @end|ng |rom gm@||@com  Fri Oct 30 09:42:35 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 30 Oct 2020 19:42:35 +1100
Subject: [R] Error: variable not found
In-Reply-To: <6BDCE9C6-8E88-4AD5-B339-9D32A4630CE8@outlook.com>
References: <6BDCE9C6-8E88-4AD5-B339-9D32A4630CE8@outlook.com>
Message-ID: <CA+8X3fWzGrk+DqKHyuZW3sUPQ9xj2dK9AZetz9JMxmN=2RdvQA@mail.gmail.com>

Hi Hannah,
Have you tried:

summary(ipumsi_00008_dta$couple_id)

Jim

On Fri, Oct 30, 2020 at 7:34 PM Hannah Van Impe <hannahvanimpe at outlook.com>
wrote:

> Hello
>
> I have a question. I made an r-script and did a few commands needed to
> make some new variables. They all work out well, and when I run the
> commands, the new variables appear in the dataset. I can also work with
> these new variables to make other new variables from them. Also, when I use
> summary(dataset), those new variables appear in the summary of the dataset.
> But, when I do summary(new variable) => error: variable not found.
> For example: summary(couple_id) => Error in summary(couple_id) : object
> 'couple_id' not found. What can I do about this?
>
> R-script:
> attach(ipumsi_00008_dta)
> library(tinytex)
> library(dplyr)
> library(ggplot2)
> library(tidyr)
> library(knitr)
> library(forcats)
> library(mice)
> library(pander)
> library(ggcorrplot)
> library(lubridate)
> # true/false code when sploc is greater than zero and sprule is equal to 1
> or 2
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, rule_union = sploc>0 &
> (sprule==1 | sprule==2))
> ## creating numeric code for rule_union & rule_unionn: 1 when sploc is
> greater than zero and sprule is equal to 1 or 2, 0 if not.
> ## This is neccesary because otherwise it is a logical code and we cannot
> multiply with it, which is needed
> ipumsi_00008_dta <- ipumsi_00008_dta %>% mutate(rule_union_numeric =
> as.numeric(rule_union))
> ### creating unique numeric code for sploc / pernum variables
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, sploc_pernum_code =
> pernum*(sex==1) + sploc*(sex==2))
> #### dividing serial by 1000, otherwise, the ultimate couple_id is too
> large, and it works in this dataset because the serials start at 1000 (I
> will have to check if this works for other datasets)
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, serial_divided =
> serial%/%1000)
> ##### creating unique union identifier
> ipumsi_00008_dta$union_id = paste0(ipumsi_00008_dta$country,
> ipumsi_00008_dta$year, ipumsi_00008_dta$serial_divided,
> ipumsi_00008_dta$sploc_pernum_code)
> ipumsi_00008_dta <- ipumsi_00008_dta %>% mutate(union_id_numeric =
> as.numeric(union_id))
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, couple_id =
> union_id_numeric*rule_union_numeric)
> ###### Understanding the couple_id variable
> summary(couple_id)
> summary(ipumsi_00008_dta)
>
> I also attached my dataset.
>
> Thank you very much for the answer!
> Hannah Van Impe
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @0bez@me @end|ng |rom un|-bonn@de  Thu Oct 29 12:36:05 2020
From: @0bez@me @end|ng |rom un|-bonn@de (Berina Zametica UNI)
Date: Thu, 29 Oct 2020 12:36:05 +0100
Subject: [R] R: sim1000G
Message-ID: <CAEVpY9LOdLrCeKYQ=Y8zHK3gbwJyV-9KfOWAaHvPYHAiO5_Xtg@mail.gmail.com>

Hi,

I am using the sim1000G R package to simulate data for case/control study.
I can not figure out how to manipulate this code to be able to generate 10%
or 50% causal SNPs in R.

This is whole code provided as example on GitHub:

library(sim1000G)
vcf_file = "region-chr4-357-ANK2.vcf.gz" #nvariants = 442, ss=1000

vcf = readVCF( vcf_file, maxNumberOfVariants = 442  ,min_maf =
0.0005,max_maf = 0.01) #lowest MAF
dim( vcf$gt1 ) #rows represent number of variants, columns represent
number of individuals

## Download and use full chromosome genetic map
downloadGeneticMap(4)
readGeneticMap(4)

sample.size=3000

startSimulation(vcf, totalNumberOfIndividuals = sample.size)

data_sim = function(seed.num){

  SIM$reset()

  id = generateUnrelatedIndividuals(sample.size)

  gt = retrieveGenotypes(id)


  freq = apply(gt,2,sum)/(2*nrow(gt))
  causal = sample(setdiff(1:ncol(gt),which(freq==0)),45)

  beta.sign = rep(1,45)
  c.value = 0.402
  beta.abs = c.value*abs(log10(freq[causal]))
  beta.val = beta.sign*beta.abs
  x.bar = apply(gt[,causal],2,mean)
  x.bar = as.matrix(x.bar)
  beta.val = t(as.matrix(beta.val))
  #disease prvalance = 1%
  #beta0 = -log(99)-beta.val %*% x.bar
  #disease prvalance = 1.5%
  beta0 = 0-beta.val %*% x.bar

  eta = beta.val %*% t(gt[,causal])
  eta = as.vector(eta) + rep(beta0,nrow(gt))
  prob = exp(eta)/(1+exp(eta))

  genocase = rep(NA, sample.size)

  set.seed(seed.num)
  for(i in 1:sample.size){
    genocase[i] = rbinom(1, 1, prob[i])
  }
  case.idx = sample(which(genocase==1),1000)
  control.idx = sample(which(genocase==0),1000)

  return(rbind(gt[case.idx,],gt[control.idx,]))
}

How I can modify code in a way that it will simulate:
50 % of causal SNPs** ( exmp. 24 causal variants and 24 non causal SNPs)
10 % of causal SNP (exmpl. 5 causal and 43 non causal SNPs)

Thanks a lot for any suggestion.

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri Oct 30 12:43:54 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 30 Oct 2020 11:43:54 +0000
Subject: [R] Error: variable not found
In-Reply-To: <6BDCE9C6-8E88-4AD5-B339-9D32A4630CE8@outlook.com>
References: <6BDCE9C6-8E88-4AD5-B339-9D32A4630CE8@outlook.com>
Message-ID: <658d139f-53b0-eae4-7f73-c6d7e30abe0b@dewey.myzen.co.uk>

Dear Hannah

I think the problem is that attach() is not doing what you think it is. 
It does seem to make it easy to make mistakes. I would suggest switching 
to using with() instead or using the data = parameter to functions which 
support it.

Michael

On 30/10/2020 08:15, Hannah Van Impe wrote:
> Hello
> 
> I have a question. I made an r-script and did a few commands needed to make some new variables. They all work out well, and when I run the commands, the new variables appear in the dataset. I can also work with these new variables to make other new variables from them. Also, when I use summary(dataset), those new variables appear in the summary of the dataset.
> But, when I do summary(new variable) => error: variable not found.
> For example: summary(couple_id) => Error in summary(couple_id) : object 'couple_id' not found. What can I do about this?
> 
> R-script:
> attach(ipumsi_00008_dta)
> library(tinytex)
> library(dplyr)
> library(ggplot2)
> library(tidyr)
> library(knitr)
> library(forcats)
> library(mice)
> library(pander)
> library(ggcorrplot)
> library(lubridate)
> # true/false code when sploc is greater than zero and sprule is equal to 1 or 2
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, rule_union = sploc>0 & (sprule==1 | sprule==2))
> ## creating numeric code for rule_union & rule_unionn: 1 when sploc is greater than zero and sprule is equal to 1 or 2, 0 if not.
> ## This is neccesary because otherwise it is a logical code and we cannot multiply with it, which is needed
> ipumsi_00008_dta <- ipumsi_00008_dta %>% mutate(rule_union_numeric = as.numeric(rule_union))
> ### creating unique numeric code for sploc / pernum variables
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, sploc_pernum_code = pernum*(sex==1) + sploc*(sex==2))
> #### dividing serial by 1000, otherwise, the ultimate couple_id is too large, and it works in this dataset because the serials start at 1000 (I will have to check if this works for other datasets)
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, serial_divided = serial%/%1000)
> ##### creating unique union identifier
> ipumsi_00008_dta$union_id = paste0(ipumsi_00008_dta$country, ipumsi_00008_dta$year, ipumsi_00008_dta$serial_divided, ipumsi_00008_dta$sploc_pernum_code)
> ipumsi_00008_dta <- ipumsi_00008_dta %>% mutate(union_id_numeric = as.numeric(union_id))
> ipumsi_00008_dta <- mutate(ipumsi_00008_dta, couple_id = union_id_numeric*rule_union_numeric)
> ###### Understanding the couple_id variable
> summary(couple_id)
> summary(ipumsi_00008_dta)
> 
> I also attached my dataset.
> 
> Thank you very much for the answer!
> Hannah Van Impe
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From drj|m|emon @end|ng |rom gm@||@com  Sat Oct 31 00:36:01 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 31 Oct 2020 10:36:01 +1100
Subject: [R] Error: variable not found
In-Reply-To: <B5A988CB-7B76-4CDA-9397-F66CABDBA1A2@outlook.com>
References: <6BDCE9C6-8E88-4AD5-B339-9D32A4630CE8@outlook.com>
 <CA+8X3fWzGrk+DqKHyuZW3sUPQ9xj2dK9AZetz9JMxmN=2RdvQA@mail.gmail.com>
 <B5A988CB-7B76-4CDA-9397-F66CABDBA1A2@outlook.com>
Message-ID: <CA+8X3fWApQ512E8hJUwnYA+apjJAP_DTicVpMx5CGruWrcHbqA@mail.gmail.com>

Hi Hannah,
Using the same code I sent before, you can append the partner codes to the
household code. I apologize, but I don't know how to use the
dplyr/tidyr/... stuff so this is written in straight R code using logic
statements.

ipumsi_00008_dta<-
 read.table(
 text="country year sample serial hhwt pernum perwt resident sploc sprule
204 2013 204201301 4000 10 1 10 1 5 2
204 2013 204201301 4000 10 2 10 1 0 2
204 2013 204201301 4000 10 3 10 1 0 2
204 2013 204201301 4000 10 4 10 1 0 2
204 2013 204201301 4000 10 5 10 1 1 2
204 2013 204201301 4000 10 6 10 1 1 2
204 2013 204201301 4000 10 7 10 1 0 2
204 2013 204201301 4000 10 8 10 1 0 2
204 2013 204201301 4000 10 9 10 1 0 2
204 2013 204201301 7000 10 1 10 1 2 1
204 2013 204201301 7000 10 2 10 1 1 1
204 2013 204201301 7000 10 3 10 1 0 0
204 2013 204201301 7000 10 4 10 1 5 1
204 2013 204201301 7000 10 5 10 1 4 1",
header=TRUE,stringsAsFactors=FALSE)
for(hh in unique(ipumsi_00008_dta$serial)) {
 cat("hh",hh," ")
 for(ind in ipumsi_00008_dta$pernum[ipumsi_00008_dta$serial == hh]) {
  cat("ind",ind,"\n")
  if(ipumsi_00008_dta$sploc[ipumsi_00008_dta$serial == hh &
    ipumsi_00008_dta$pernum == ind] > 0) {
   cat("sploc > 0\n")
   relationships<-
    ipumsi_00008_dta$pernum[ipumsi_00008_dta$serial == hh &
     ipumsi_00008_dta$sploc == ind]
   cat(relationships,"\n")
   ipumsi_00008_dta$sprule[ipumsi_00008_dta$serial == hh &
    ipumsi_00008_dta$pernum == ind]<-
     paste(c(hh,relationships),sep="",collapse="_")
  } else {
   ipumsi_00008_dta$sprule[ipumsi_00008_dta$serial == hh &
    ipumsi_00008_dta$pernum == ind]<-hh
  }
 }
}
ipumsi_00008_dta

This appends the partner codes using "_" as a separator. You can do it
without the "_" and get a numeric variable, but I think you will generate
ambiguous "sprule" codes. Again, this will not work with between-household
relationships.

Jim

On Fri, Oct 30, 2020 at 11:16 PM Hannah Van Impe <hannahvanimpe at outlook.com>
wrote:

> Thank you very much for the answer.
>
> I also have another question. With this data, I made the variable union_id
> using paste0. (I am writing a thesis and this part is necessary, but I
> don?t have previous knowledge of R, so it is difficult for me). My
> professor told me, that if I use paste0, it can be problematic because
> ?pernum? and ?serial? can have different numbers of digits. In other words,
> if pernum is 12 then paste0 prints 12, but if pernum is 1 paste0 prints 1
> instead of 01, so you will not have that the last two digits always
> correspond to pernum. He suggest me to use an alternative way for creating
> this union_id variable. Do you have any idea how I can do this?
>
>

	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Sat Oct 31 01:56:35 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Fri, 30 Oct 2020 20:56:35 -0400
Subject: [R] FREDR and R 3.6
In-Reply-To: <87wnz8i21h.fsf@enricoschumann.net>
References: <f14e8dbf-9c3e-9971-8ef3-3ccdfce2bd32@meddatainc.com>
 <87wnz8i21h.fsf@enricoschumann.net>
Message-ID: <4584f7e8-86e5-e3f8-9636-1844348cc4fd@meddatainc.com>

On 10/30/2020 03:52 AM, Enrico Schumann wrote:
> On Thu, 29 Oct 2020, H writes:
>
>> I tried to install the fredr package yesterday to
>> access the data series hosted by the St. Louis Fed but
>> my installation of R, version 3.6, tells me it is not
>> available from a cran repository.
>>
>> I could not find any information on this on the fredr information package and was wondering if anyone here might know?
>>
> Just for completeness: there is also the 'alfred' package
> (https://cran.r-project.org/package=alfred), with which
> you can also access data of the St. Louis Fed.
>
Thank you, will look at alfred.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sat Oct 31 09:56:01 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sat, 31 Oct 2020 09:56:01 +0100
Subject: [R] fast way to find most common value across columns dataframe
Message-ID: <CAMk+s2Qkg5UM5uK-ZPEb1aa90ESNM_mEugjz7XNEBuExAThR+g@mail.gmail.com>

Hello,
I have a large dataframe (1 000 000 rows, 1000 columns) where the
columns contain a character. I would like to determine the most common
character for each row.
In the example below, I can parse one row at the time and find the
most common character (apart for ties...). But I think this will be
very slow and memory consuming.
Is there a way to run it more efficiently?
Thank you

```
V = c("A", "B", "C", "D")
df = data.frame(n = 1:10,
       col_01 = sample(V, 10, replace = TRUE, prob = NULL),
       col_02 = sample(V, 10, replace = TRUE, prob = NULL),
       col_03 = sample(V, 10, replace = TRUE, prob = NULL),
       col_04 = sample(V, 10, replace = TRUE, prob = NULL),
       col_05 = sample(V, 10, replace = TRUE, prob = NULL),
       stringsAsFactors = FALSE)

q = vector()
for(i in 1:nrow(df)) {
  x = as.vector(t(df[i,2:ncol(df)]))
  q[i] =    names(which.max(table(x)))
}
df$most = q
```


From drj|m|emon @end|ng |rom gm@||@com  Sat Oct 31 10:28:35 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 31 Oct 2020 20:28:35 +1100
Subject: [R] fast way to find most common value across columns dataframe
In-Reply-To: <CAMk+s2Qkg5UM5uK-ZPEb1aa90ESNM_mEugjz7XNEBuExAThR+g@mail.gmail.com>
References: <CAMk+s2Qkg5UM5uK-ZPEb1aa90ESNM_mEugjz7XNEBuExAThR+g@mail.gmail.com>
Message-ID: <CA+8X3fWGqxOwSgrkoer4k63jbM8RX4nK51sz4g8XMyBHLLw+Qg@mail.gmail.com>

Hi Luigi,
If I understand your request:

library(prettyR)
apply(as.matrix(df),1,Mode)
[1] "C"       "B"       "D"       ">1 mode" ">1 mode" ">1 mode" "D"
[8] "C"       "B"       ">1 mode"

Jim

On Sat, Oct 31, 2020 at 7:56 PM Luigi Marongiu <marongiu.luigi at gmail.com>
wrote:

> Hello,
> I have a large dataframe (1 000 000 rows, 1000 columns) where the
> columns contain a character. I would like to determine the most common
> character for each row.
> In the example below, I can parse one row at the time and find the
> most common character (apart for ties...). But I think this will be
> very slow and memory consuming.
> Is there a way to run it more efficiently?
> Thank you
>
> ```
> V = c("A", "B", "C", "D")
> df = data.frame(n = 1:10,
>        col_01 = sample(V, 10, replace = TRUE, prob = NULL),
>        col_02 = sample(V, 10, replace = TRUE, prob = NULL),
>        col_03 = sample(V, 10, replace = TRUE, prob = NULL),
>        col_04 = sample(V, 10, replace = TRUE, prob = NULL),
>        col_05 = sample(V, 10, replace = TRUE, prob = NULL),
>        stringsAsFactors = FALSE)
>
> q = vector()
> for(i in 1:nrow(df)) {
>   x = as.vector(t(df[i,2:ncol(df)]))
>   q[i] =    names(which.max(table(x)))
> }
> df$most = q
> ```
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From nev||@@mo@ @end|ng |rom gm@||@com  Sat Oct 31 13:24:25 2020
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Sat, 31 Oct 2020 23:24:25 +1100
Subject: [R] raster::levels() not working in packaged function.
Message-ID: <CAN9eD7=C3jeZu9yiv4u_=FpQiaihmp3puH8n86RMKyBgXZDWtA@mail.gmail.com>

Apologies, I cannot see how to make a rero for this issue.

I have a function that uses levels(r) tor return the RAT of a raster "r"
when the function is sourced from a script
source(".\R\function.r")
it works fine.
when the function is built into a package and sourced from there
library(mypackage) using the same script file to make the package
levels(r)[[1]]
the same line throws an error, as levels(myraster returns NULL

If I modify the script to include the raster namespace:
raster::levels(r)[[1]]
Then I get the error
 Error: 'levels<-' is not an exported object from 'namespace:raster'


I have also tried just using levels(r) and putting raster as a depends
rather than an import in the DESCRIPTION file for the package, this does
not solve the error.


Any suggestions on how to overcome the problem?

many thanks

Nevil Amos

	[[alternative HTML version deleted]]


From m@rce||no@de|@cruz @end|ng |rom urjc@e@  Sat Oct 31 14:18:40 2020
From: m@rce||no@de|@cruz @end|ng |rom urjc@e@ (Marcelino de la Cruz Rot)
Date: Sat, 31 Oct 2020 14:18:40 +0100
Subject: [R] 
 [R-sig-Geo] raster::levels() not working in packaged function.
In-Reply-To: <CAN9eD7=C3jeZu9yiv4u_=FpQiaihmp3puH8n86RMKyBgXZDWtA@mail.gmail.com>
References: <CAN9eD7=C3jeZu9yiv4u_=FpQiaihmp3puH8n86RMKyBgXZDWtA@mail.gmail.com>
Message-ID: <312c6bc4-9d77-9521-71a2-1aad75b9ed6d@urjc.es>

Maybe including

import(raster)

or

importFrom("raster", "levels")

in the package NAMESPACE would help.

Cheers,

Marcelino

El 31/10/2020 a las 13:24, nevil amos escribi?:
> Apologies, I cannot see how to make a rero for this issue.
>
> I have a function that uses levels(r) tor return the RAT of a raster "r"
> when the function is sourced from a script
> source(".\R\function.r")
> it works fine.
> when the function is built into a package and sourced from there
> library(mypackage) using the same script file to make the package
> levels(r)[[1]]
> the same line throws an error, as levels(myraster returns NULL
>
> If I modify the script to include the raster namespace:
> raster::levels(r)[[1]]
> Then I get the error
>   Error: 'levels<-' is not an exported object from 'namespace:raster'
>
>
> I have also tried just using levels(r) and putting raster as a depends
> rather than an import in the DESCRIPTION file for the package, this does
> not solve the error.
>
>
> Any suggestions on how to overcome the problem?
>
> many thanks
>
> Nevil Amos
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-sig-Geo mailing list
> R-sig-Geo at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-geo
> .


-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From bgunter@4567 @end|ng |rom gm@||@com  Sat Oct 31 17:40:35 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 31 Oct 2020 09:40:35 -0700
Subject: [R] fast way to find most common value across columns dataframe
In-Reply-To: <CA+8X3fWGqxOwSgrkoer4k63jbM8RX4nK51sz4g8XMyBHLLw+Qg@mail.gmail.com>
References: <CAMk+s2Qkg5UM5uK-ZPEb1aa90ESNM_mEugjz7XNEBuExAThR+g@mail.gmail.com>
 <CA+8X3fWGqxOwSgrkoer4k63jbM8RX4nK51sz4g8XMyBHLLw+Qg@mail.gmail.com>
Message-ID: <CAGxFJbRDxCnqHUqm1kKn0A0nFppahFvNoF=mj4g+QSBuJnOPTQ@mail.gmail.com>

As usual, a web search ("find statistical mode in R") brought up something
that is possibly useful -- Did you try this before posting? If not, please
do so in future and let us know what your results were if you subsequently
post here.

Here's what SO suggested:

Mode <- function(x) {
   ux <- unique(x)
   ux[which.max(tabulate(match(x, ux)))]
}

# ergo:
apply(as.matrix(df),1,Mode)

Note that all the functionality in Mode is via .Internal functions.  So you
can determine whether this is faster than Jim's code for your use case, but
I'm pretty sure it will be faster than yours. However, note that this gives
only the value of the *first* mode if there is more than one, while Jim's
code alerts you to multiple modes.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Oct 31, 2020 at 2:29 AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Luigi,
> If I understand your request:
>
> library(prettyR)
> apply(as.matrix(df),1,Mode)
> [1] "C"       "B"       "D"       ">1 mode" ">1 mode" ">1 mode" "D"
> [8] "C"       "B"       ">1 mode"
>
> Jim
>
> On Sat, Oct 31, 2020 at 7:56 PM Luigi Marongiu <marongiu.luigi at gmail.com>
> wrote:
>
> > Hello,
> > I have a large dataframe (1 000 000 rows, 1000 columns) where the
> > columns contain a character. I would like to determine the most common
> > character for each row.
> > In the example below, I can parse one row at the time and find the
> > most common character (apart for ties...). But I think this will be
> > very slow and memory consuming.
> > Is there a way to run it more efficiently?
> > Thank you
> >
> > ```
> > V = c("A", "B", "C", "D")
> > df = data.frame(n = 1:10,
> >        col_01 = sample(V, 10, replace = TRUE, prob = NULL),
> >        col_02 = sample(V, 10, replace = TRUE, prob = NULL),
> >        col_03 = sample(V, 10, replace = TRUE, prob = NULL),
> >        col_04 = sample(V, 10, replace = TRUE, prob = NULL),
> >        col_05 = sample(V, 10, replace = TRUE, prob = NULL),
> >        stringsAsFactors = FALSE)
> >
> > q = vector()
> > for(i in 1:nrow(df)) {
> >   x = as.vector(t(df[i,2:ncol(df)]))
> >   q[i] =    names(which.max(table(x)))
> > }
> > df$most = q
> > ```
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sat Oct 31 18:12:01 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sat, 31 Oct 2020 18:12:01 +0100
Subject: [R] fast way to find most common value across columns dataframe
In-Reply-To: <CAGxFJbRDxCnqHUqm1kKn0A0nFppahFvNoF=mj4g+QSBuJnOPTQ@mail.gmail.com>
References: <CAMk+s2Qkg5UM5uK-ZPEb1aa90ESNM_mEugjz7XNEBuExAThR+g@mail.gmail.com>
 <CA+8X3fWGqxOwSgrkoer4k63jbM8RX4nK51sz4g8XMyBHLLw+Qg@mail.gmail.com>
 <CAGxFJbRDxCnqHUqm1kKn0A0nFppahFvNoF=mj4g+QSBuJnOPTQ@mail.gmail.com>
Message-ID: <CAMk+s2SY8LbTEu8PpDkY_H+vU-ZLQd8kD8WgYO4bQH-SR5BbOw@mail.gmail.com>

Thank you. The problem was not finding the mode but applying it the R
way (I have the tendency to loop into each line of the dataframes,
which I believe is NOT the R way).
I'll try them.
Best regards
Luigi

On Sat, Oct 31, 2020 at 5:40 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> As usual, a web search ("find statistical mode in R") brought up something that is possibly useful -- Did you try this before posting? If not, please do so in future and let us know what your results were if you subsequently post here.
>
> Here's what SO suggested:
>
> Mode <- function(x) {
>    ux <- unique(x)
>    ux[which.max(tabulate(match(x, ux)))]
> }
>
> # ergo:
> apply(as.matrix(df),1,Mode)
>
> Note that all the functionality in Mode is via .Internal functions.  So you can determine whether this is faster than Jim's code for your use case, but I'm pretty sure it will be faster than yours. However, note that this gives only the value of the *first* mode if there is more than one, while Jim's code alerts you to multiple modes.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sat, Oct 31, 2020 at 2:29 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Luigi,
>> If I understand your request:
>>
>> library(prettyR)
>> apply(as.matrix(df),1,Mode)
>> [1] "C"       "B"       "D"       ">1 mode" ">1 mode" ">1 mode" "D"
>> [8] "C"       "B"       ">1 mode"
>>
>> Jim
>>
>> On Sat, Oct 31, 2020 at 7:56 PM Luigi Marongiu <marongiu.luigi at gmail.com>
>> wrote:
>>
>> > Hello,
>> > I have a large dataframe (1 000 000 rows, 1000 columns) where the
>> > columns contain a character. I would like to determine the most common
>> > character for each row.
>> > In the example below, I can parse one row at the time and find the
>> > most common character (apart for ties...). But I think this will be
>> > very slow and memory consuming.
>> > Is there a way to run it more efficiently?
>> > Thank you
>> >
>> > ```
>> > V = c("A", "B", "C", "D")
>> > df = data.frame(n = 1:10,
>> >        col_01 = sample(V, 10, replace = TRUE, prob = NULL),
>> >        col_02 = sample(V, 10, replace = TRUE, prob = NULL),
>> >        col_03 = sample(V, 10, replace = TRUE, prob = NULL),
>> >        col_04 = sample(V, 10, replace = TRUE, prob = NULL),
>> >        col_05 = sample(V, 10, replace = TRUE, prob = NULL),
>> >        stringsAsFactors = FALSE)
>> >
>> > q = vector()
>> > for(i in 1:nrow(df)) {
>> >   x = as.vector(t(df[i,2:ncol(df)]))
>> >   q[i] =    names(which.max(table(x)))
>> > }
>> > df$most = q
>> > ```
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Oct 31 19:14:33 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 31 Oct 2020 18:14:33 +0000
Subject: [R] fast way to find most common value across columns dataframe
In-Reply-To: <CAMk+s2SY8LbTEu8PpDkY_H+vU-ZLQd8kD8WgYO4bQH-SR5BbOw@mail.gmail.com>
References: <CAMk+s2Qkg5UM5uK-ZPEb1aa90ESNM_mEugjz7XNEBuExAThR+g@mail.gmail.com>
 <CA+8X3fWGqxOwSgrkoer4k63jbM8RX4nK51sz4g8XMyBHLLw+Qg@mail.gmail.com>
 <CAGxFJbRDxCnqHUqm1kKn0A0nFppahFvNoF=mj4g+QSBuJnOPTQ@mail.gmail.com>
 <CAMk+s2SY8LbTEu8PpDkY_H+vU-ZLQd8kD8WgYO4bQH-SR5BbOw@mail.gmail.com>
Message-ID: <bd9336ba-a5ce-98ff-bd92-7ecf0b748dcb@sapo.pt>

Hello,

Here is a comparative test of 3 options.

cumstats::Mode returns a list with two members,

Values: all the modes.
Frequency: their frequency

The value of the mode must be extracted after. cumstats::Mode is by far 
the slowest but returns more information.

The function below is in this StackOverflow post [1]. It's the fastest 
but only returns one mode, the first found.


set.seed(2020)
V <- LETTERS
df <- replicate(100, sample(V, 1000, replace = TRUE))
df <- as.data.frame(t(df))

Mode <- function(x) {
   ux <- unique(x)
   ux[which.max(tabulate(match(x, ux)))]
}

res1 <- apply(df, 1, prettyR::Mode)
res2 <- apply(df, 1, cumstats::Mode)
res3 <- apply(df, 1, Mode)

head(res1)
res2vals <- lapply(res2, '[[', 1)
head(res2vals)
head(res3)

library(microbenchmark)

mb <- microbenchmark(
   pre = apply(df, 1, prettyR::Mode),
   cum = cumstats::Mode(x),
   so = apply(x, 1, Mode),
   times = 10
)
print(mb, unit = "relative", order = "median")




[1] https://stackoverflow.com/a/8189441/8245406


Hope this helps,

Rui Barradas

?s 17:12 de 31/10/20, Luigi Marongiu escreveu:
> Thank you. The problem was not finding the mode but applying it the R
> way (I have the tendency to loop into each line of the dataframes,
> which I believe is NOT the R way).
> I'll try them.
> Best regards
> Luigi
> 
> On Sat, Oct 31, 2020 at 5:40 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> As usual, a web search ("find statistical mode in R") brought up something that is possibly useful -- Did you try this before posting? If not, please do so in future and let us know what your results were if you subsequently post here.
>>
>> Here's what SO suggested:
>>
>> Mode <- function(x) {
>>     ux <- unique(x)
>>     ux[which.max(tabulate(match(x, ux)))]
>> }
>>
>> # ergo:
>> apply(as.matrix(df),1,Mode)
>>
>> Note that all the functionality in Mode is via .Internal functions.  So you can determine whether this is faster than Jim's code for your use case, but I'm pretty sure it will be faster than yours. However, note that this gives only the value of the *first* mode if there is more than one, while Jim's code alerts you to multiple modes.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Sat, Oct 31, 2020 at 2:29 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>>>
>>> Hi Luigi,
>>> If I understand your request:
>>>
>>> library(prettyR)
>>> apply(as.matrix(df),1,Mode)
>>> [1] "C"       "B"       "D"       ">1 mode" ">1 mode" ">1 mode" "D"
>>> [8] "C"       "B"       ">1 mode"
>>>
>>> Jim
>>>
>>> On Sat, Oct 31, 2020 at 7:56 PM Luigi Marongiu <marongiu.luigi at gmail.com>
>>> wrote:
>>>
>>>> Hello,
>>>> I have a large dataframe (1 000 000 rows, 1000 columns) where the
>>>> columns contain a character. I would like to determine the most common
>>>> character for each row.
>>>> In the example below, I can parse one row at the time and find the
>>>> most common character (apart for ties...). But I think this will be
>>>> very slow and memory consuming.
>>>> Is there a way to run it more efficiently?
>>>> Thank you
>>>>
>>>> ```
>>>> V = c("A", "B", "C", "D")
>>>> df = data.frame(n = 1:10,
>>>>         col_01 = sample(V, 10, replace = TRUE, prob = NULL),
>>>>         col_02 = sample(V, 10, replace = TRUE, prob = NULL),
>>>>         col_03 = sample(V, 10, replace = TRUE, prob = NULL),
>>>>         col_04 = sample(V, 10, replace = TRUE, prob = NULL),
>>>>         col_05 = sample(V, 10, replace = TRUE, prob = NULL),
>>>>         stringsAsFactors = FALSE)
>>>>
>>>> q = vector()
>>>> for(i in 1:nrow(df)) {
>>>>    x = as.vector(t(df[i,2:ncol(df)]))
>>>>    q[i] =    names(which.max(table(x)))
>>>> }
>>>> df$most = q
>>>> ```
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> 
>


