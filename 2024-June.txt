From |eo@m@d@ @end|ng |rom @yon|c@eu  Sat Jun  1 18:16:23 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Sat, 1 Jun 2024 16:16:23 +0000
Subject: [R] Tools to modify highlighted areas in pdf documents?
Message-ID: <DBAP192MB095675B1E0FD76CD59E9155384FD2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Dear R-Users,

Are there any packages that enable the modifications of highlighted areas / annotations in pdf documents?

It seems feasible - I have explored some R code (see below). However, I would rather avoid to reinvent the wheel.

The problem:
When highlighting pdf-documents with Microsoft Edge, the bounding box is sometimes misplaced, and quite ugly so. It also lacks the ability to draw lines or arrows.

On the other hand, I did not get used to Acrobat Reader: it usually involves much more effort to add specific highlights. Lines can be drawn, but are NOT straight!

Are there tools to change the size/position of highlights?
Or to add highlights and underline words?
 Changing position/size manually by editing the data in the pdf-document is possible. Changing the color is more trickier (somehow possible in Microsoft Edger; though the direct approach to rewrite the actual stream is better). Maybe there are some tools to do it?

Some R code is below.

Sincerely,

Leonard
#########

library(zip)

con = file("_some_pdf_.pdf", "rb")

NL = 0
# - very dirty hack;
# - assumes Annotations are in the last fragment/chunk;
while(TRUE) {
    tmp = readBin(con, "raw", 1024*128 + 515);
??????if(length(tmp) == 0) break;
??????x = tmp;
??????# isNL = (x == 10) | (x == 13);
??????isNL = (x == 13);
??????isNL = isNL & (x[which(isNL) + 1] == 10);
    NL = NL + sum(isNL);
}

close(con)

idP = which(isNL)

idS = 935; # will vary with pdf and Annotations and ...;
nLast = 4; # usually 2 chunks
idx = idP[seq(idS, length.out = nLast)]

# Check: Right position?
# tmp = x[seq(idx[1] + 2, idx[1 + 2] - 1)]
# intToUtf8(tmp)

tmp = inflate(x[seq(idx[1] + 2, idx[nLast] - 1)])
intToUtf8(tmp$output)

# Output of inflate: an Example
# "/GS gs .56078434 .87058824 .97647059 rg\n
# 337.298 183.836 m 364.322 183.836 l 364.322 171.83 l 337.298 171.83 l h f\n"

# Note: /BBox[ 337.298 171.83 364.322 183.836]

The raw pdf data:

1948 0 obj
<</AP<</N 1949 0 R >>/C[ 0.560784 0.870588 0.976471]/CA 1/F 4/PDFIUM_HasGeneratedAP true/QuadPoints[ 337.298 186 364.322 186 337.298 174.6 364.322 174.6]/Rect[ 337.298 174.6 364.322 186]/Subtype/Highlight/Type/Annot>>
endobj
1949 0 obj
<</BBox[ 337.298 171.83 364.322 183.836]/Filter/FlateDecode/FormType 1/Length 86/Matrix[ 1 0 0 1 0 0]/Resources<</ExtGState<</GS<</AIS false/BM/Multiply/CA 1/Type/ExtGState/ca 1>>>>>>/Subtype/Form/Type/XObject>>stream
x?E??
?0 ??)~??
?????P@?K?"??t?????j?C???T#?B??z?
W?H??9(A????
K?????_i??mz dR?
endstream
endobj


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jun  1 20:23:28 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 1 Jun 2024 11:23:28 -0700
Subject: [R] Tools to modify highlighted areas in pdf documents?
In-Reply-To: <DBAP192MB095675B1E0FD76CD59E9155384FD2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
References: <DBAP192MB095675B1E0FD76CD59E9155384FD2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbTLa+NcvWd5eHzQCfxMrBU3pRnc=zQ33O8XhW9OzeKcUQ@mail.gmail.com>

Search!

on rseek.org, the query "modify pdf documents in R" brought up the staplr
package. A quick web search with the same query brought up the pdftools
package.

These were cursory efforts, so you may well find more. You will have to
determine whether and to what degree any meet your needs.

-- Bert

On Sat, Jun 1, 2024 at 9:16?AM Leo Mada via R-help <r-help at r-project.org>
wrote:

> Dear R-Users,
>
> Are there any packages that enable the modifications of highlighted areas
> / annotations in pdf documents?
>
> It seems feasible - I have explored some R code (see below). However, I
> would rather avoid to reinvent the wheel.
>
> The problem:
> When highlighting pdf-documents with Microsoft Edge, the bounding box is
> sometimes misplaced, and quite ugly so. It also lacks the ability to draw
> lines or arrows.
>
> On the other hand, I did not get used to Acrobat Reader: it usually
> involves much more effort to add specific highlights. Lines can be drawn,
> but are NOT straight!
>
> Are there tools to change the size/position of highlights?
> Or to add highlights and underline words?
>  Changing position/size manually by editing the data in the pdf-document
> is possible. Changing the color is more trickier (somehow possible in
> Microsoft Edger; though the direct approach to rewrite the actual stream is
> better). Maybe there are some tools to do it?
>
> Some R code is below.
>
> Sincerely,
>
> Leonard
> #########
>
> library(zip)
>
> con = file("_some_pdf_.pdf", "rb")
>
> NL = 0
> # - very dirty hack;
> # - assumes Annotations are in the last fragment/chunk;
> while(TRUE) {
>     tmp = readBin(con, "raw", 1024*128 + 515);
> if(length(tmp) == 0) break;
> x = tmp;
> # isNL = (x == 10) | (x == 13);
> isNL = (x == 13);
> isNL = isNL & (x[which(isNL) + 1] == 10);
>     NL = NL + sum(isNL);
> }
>
> close(con)
>
> idP = which(isNL)
>
> idS = 935; # will vary with pdf and Annotations and ...;
> nLast = 4; # usually 2 chunks
> idx = idP[seq(idS, length.out = nLast)]
>
> # Check: Right position?
> # tmp = x[seq(idx[1] + 2, idx[1 + 2] - 1)]
> # intToUtf8(tmp)
>
> tmp = inflate(x[seq(idx[1] + 2, idx[nLast] - 1)])
> intToUtf8(tmp$output)
>
> # Output of inflate: an Example
> # "/GS gs .56078434 .87058824 .97647059 rg\n
> # 337.298 183.836 m 364.322 183.836 l 364.322 171.83 l 337.298 171.83 l h
> f\n"
>
> # Note: /BBox[ 337.298 171.83 364.322 183.836]
>
> The raw pdf data:
>
> 1948 0 obj
> <</AP<</N 1949 0 R >>/C[ 0.560784 0.870588 0.976471]/CA 1/F
> 4/PDFIUM_HasGeneratedAP true/QuadPoints[ 337.298 186 364.322 186 337.298
> 174.6 364.322 174.6]/Rect[ 337.298 174.6 364.322
> 186]/Subtype/Highlight/Type/Annot>>
> endobj
> 1949 0 obj
> <</BBox[ 337.298 171.83 364.322 183.836]/Filter/FlateDecode/FormType
> 1/Length 86/Matrix[ 1 0 0 1 0 0]/Resources<</ExtGState<</GS<</AIS
> false/BM/Multiply/CA 1/Type/ExtGState/ca
> 1>>>>>>/Subtype/Form/Type/XObject>>stream
> x?E??
> ?0  ??)~ ?? ??? ? P@ ?K?"??t???? j?C? ?T#?B??z?
> W?H?? 9(A? ?
> K????? _ i??mz dR ?
> endstream
> endobj
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Sun Jun  2 01:19:56 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Sat, 1 Jun 2024 23:19:56 +0000
Subject: [R] Tools to modify highlighted areas in pdf documents?
In-Reply-To: <CAGxFJbTLa+NcvWd5eHzQCfxMrBU3pRnc=zQ33O8XhW9OzeKcUQ@mail.gmail.com>
References: <DBAP192MB095675B1E0FD76CD59E9155384FD2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
 <CAGxFJbTLa+NcvWd5eHzQCfxMrBU3pRnc=zQ33O8XhW9OzeKcUQ@mail.gmail.com>
Message-ID: <DBAP192MB09567BB9DA765EEB0649CDB784FD2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Dear Bert,

Thank you very much for the response.

I was aware of pdftools - but did not recall any such functionality. I have checked again (both pdftools, qpdf and the 3rd one): unfortunately, they do not implement such functionality. There might be other packages, which I missed.

However, the functionality is feasible. I will add a few more details - maybe someone picks up the task.

It is possible to edit manually the pdf-file, though it is quite cumbersome to find the right annotation.

1. One needs to edit the values both in the \QuadPoints and the \Rect in the \AP object.

2. Modifying the color is trickier:
\C() encodes the color and \CA the alpha channel (= 1): but neither Acrobat, nor MIcrosoft Edge update the color. The value of the color encoded in the stream is used instead.

It is possible to "trick" Edge: modify the \C color and set "\ca 1" (in the stream block) to a lower value (e.g. "\ca 0.99"). MS Edge will then accept the modified color (but Acrobat ignores it). Changing the value in the stream is the actual solution.

Note: non-rectangular shapes can be specified as well.

I hope that some of the referenced packages pick up this task.

Sincerely,

Leonard

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Saturday, June 1, 2024 9:23 PM
To: Leo Mada <leo.mada at syonic.eu>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Tools to modify highlighted areas in pdf documents?

Search!

on rseek.org<http://rseek.org>, the query "modify pdf documents in R" brought up the staplr package. A quick web search with the same query brought up the pdftools package.

These were cursory efforts, so you may well find more. You will have to determine whether and to what degree any meet your needs.

-- Bert

On Sat, Jun 1, 2024 at 9:16?AM Leo Mada via R-help <r-help at r-project.org<mailto:r-help at r-project.org>> wrote:
Dear R-Users,

Are there any packages that enable the modifications of highlighted areas / annotations in pdf documents?

It seems feasible - I have explored some R code (see below). However, I would rather avoid to reinvent the wheel.

The problem:
When highlighting pdf-documents with Microsoft Edge, the bounding box is sometimes misplaced, and quite ugly so. It also lacks the ability to draw lines or arrows.

On the other hand, I did not get used to Acrobat Reader: it usually involves much more effort to add specific highlights. Lines can be drawn, but are NOT straight!

Are there tools to change the size/position of highlights?
Or to add highlights and underline words?
 Changing position/size manually by editing the data in the pdf-document is possible. Changing the color is more trickier (somehow possible in Microsoft Edger; though the direct approach to rewrite the actual stream is better). Maybe there are some tools to do it?

Some R code is below.

Sincerely,

Leonard
#########

library(zip)

con = file("_some_pdf_.pdf", "rb")

NL = 0
# - very dirty hack;
# - assumes Annotations are in the last fragment/chunk;
while(TRUE) {
    tmp = readBin(con, "raw", 1024*128 + 515);
if(length(tmp) == 0) break;
x = tmp;
# isNL = (x == 10) | (x == 13);
isNL = (x == 13);
isNL = isNL & (x[which(isNL) + 1] == 10);
    NL = NL + sum(isNL);
}

close(con)

idP = which(isNL)

idS = 935; # will vary with pdf and Annotations and ...;
nLast = 4; # usually 2 chunks
idx = idP[seq(idS, length.out = nLast)]

# Check: Right position?
# tmp = x[seq(idx[1] + 2, idx[1 + 2] - 1)]
# intToUtf8(tmp)

tmp = inflate(x[seq(idx[1] + 2, idx[nLast] - 1)])
intToUtf8(tmp$output)

# Output of inflate: an Example
# "/GS gs .56078434 .87058824 .97647059 rg\n
# 337.298 183.836 m 364.322 183.836 l 364.322 171.83 l 337.298 171.83 l h f\n"

# Note: /BBox[ 337.298 171.83 364.322 183.836]

The raw pdf data:

1948 0 obj
<</AP<</N 1949 0 R >>/C[ 0.560784 0.870588 0.976471]/CA 1/F 4/PDFIUM_HasGeneratedAP true/QuadPoints[ 337.298 186 364.322 186 337.298 174.6 364.322 174.6]/Rect[ 337.298 174.6 364.322 186]/Subtype/Highlight/Type/Annot>>
endobj
1949 0 obj
<</BBox[ 337.298 171.83 364.322 183.836]/Filter/FlateDecode/FormType 1/Length 86/Matrix[ 1 0 0 1 0 0]/Resources<</ExtGState<</GS<</AIS false/BM/Multiply/CA 1/Type/ExtGState/ca 1>>>>>>/Subtype/Form/Type/XObject>>stream
x?E??
?0  ??)~ ?? ??? ? P@ ?K?"??t???? j?C? ?T#?B??z?
W?H?? 9(A????
K????? _ i??mz dR ?
endstream
endobj


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @h@dee@@@ht@r| @end|ng |rom gm@||@com  Sun Jun  2 00:31:27 2024
From: @h@dee@@@ht@r| @end|ng |rom gm@||@com (Shadee Ashtari)
Date: Sat, 1 Jun 2024 15:31:27 -0700
Subject: [R] R code for overlapping variables -- count
Message-ID: <CAFMWFxDjNSAwB21ZyZ4JSJ_CT96t438v24smX_qSkb7TNBjhhg@mail.gmail.com>

Hi!

I am trying to find the code for how to get counts for intersectional
variables. For example, I have three unique categorical variables --
"Female," "USA," and "MidIncome" -- and I'm trying to see how many people I
have at the intersection of the three.

Thank you so much,
Shadee

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun  2 11:55:28 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 2 Jun 2024 05:55:28 -0400
Subject: [R] R code for overlapping variables -- count
In-Reply-To: <CAFMWFxDjNSAwB21ZyZ4JSJ_CT96t438v24smX_qSkb7TNBjhhg@mail.gmail.com>
References: <CAFMWFxDjNSAwB21ZyZ4JSJ_CT96t438v24smX_qSkb7TNBjhhg@mail.gmail.com>
Message-ID: <91c837fa-1c68-4766-888c-afda779f8b99@gmail.com>

On 2024-06-01 6:31 p.m., Shadee Ashtari wrote:
> Hi!
> 
> I am trying to find the code for how to get counts for intersectional
> variables. For example, I have three unique categorical variables --
> "Female," "USA," and "MidIncome" -- and I'm trying to see how many people I
> have at the intersection of the three.

It depends on how those are stored.  Could you put together a little 
dataframe containing sample data, run `dput()` on it, and post the 
result here?

Duncan Murdoch


From |kry|ov @end|ng |rom d|@root@org  Sun Jun  2 19:02:38 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Sun, 2 Jun 2024 20:02:38 +0300
Subject: [R] Tools to modify highlighted areas in pdf documents?
In-Reply-To: <DBAP192MB095675B1E0FD76CD59E9155384FD2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
References: <DBAP192MB095675B1E0FD76CD59E9155384FD2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
Message-ID: <20240602200238.1f57909d@Tarkus>

? Sat, 1 Jun 2024 16:16:23 +0000
Leo Mada via R-help <r-help at r-project.org> ?????:

> When highlighting pdf-documents with Microsoft Edge, the bounding box
> is sometimes misplaced, and quite ugly so. It also lacks the ability
> to draw lines or arrows.
> 
> On the other hand, I did not get used to Acrobat Reader: it usually
> involves much more effort to add specific highlights. Lines can be
> drawn, but are NOT straight!

Sorry for answering a different question, but have you considered using
a different PDF viewer + annotation application? Okular
<https://okular.kde.org/> is free and available on Windows (including
from outside Microsoft store). Its annotation features include all
kinds of highlights, arrows and lines, both straight and
arbitrarily-shaped, quickly available from the "annotations" panel.

-- 
Best regards,
Ivan


From |eo@m@d@ @end|ng |rom @yon|c@eu  Sun Jun  2 19:34:35 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Sun, 2 Jun 2024 17:34:35 +0000
Subject: [R] R code for overlapping variables -- count
Message-ID: <DBAP192MB0956787CE5BE81D0A6FD4FA284FE2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Dear Shadee,

If you have a data.frame with the following columns:

n = 100; # population size
x = data.frame(
??????Sex = sample(c("M","F"), n, T),
??????Country = sample(c("AA", "BB", "US"), n, T),
??????Income  = as.factor(sample(1:3, n, T))
)

# Dummy variable
ONE = rep(1, nrow(x))

r = aggregate(ONE ~ Sex + Income + Country, length, data = x)
r = r[, c("Country", "Income", "Sex")]
print(r)

It is possible to write more simple code, if you need only the particular combination of variables (which you specified in your mail). But this is the more general approach.

Note: you may want to use "sum" instead of "length", e.g. if you have a column specifying the number of individuals in that category.


Hope this helps,

Leonard


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jun  2 19:40:51 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 2 Jun 2024 18:40:51 +0100
Subject: [R] R code for overlapping variables -- count
In-Reply-To: <DBAP192MB0956787CE5BE81D0A6FD4FA284FE2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
References: <DBAP192MB0956787CE5BE81D0A6FD4FA284FE2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
Message-ID: <6b70be1b-0688-443b-b6a8-4ff077734860@sapo.pt>

?s 18:34 de 02/06/2024, Leo Mada via R-help escreveu:
> Dear Shadee,
> 
> If you have a data.frame with the following columns:
> 
> n = 100; # population size
> x = data.frame(
> ??????Sex = sample(c("M","F"), n, T),
> ??????Country = sample(c("AA", "BB", "US"), n, T),
> ??????Income  = as.factor(sample(1:3, n, T))
> )
> 
> # Dummy variable
> ONE = rep(1, nrow(x))
> 
> r = aggregate(ONE ~ Sex + Income + Country, length, data = x)
> r = r[, c("Country", "Income", "Sex")]
> print(r)
> 
> It is possible to write more simple code, if you need only the particular combination of variables (which you specified in your mail). But this is the more general approach.
> 
> Note: you may want to use "sum" instead of "length", e.g. if you have a column specifying the number of individuals in that category.
> 
> 
> Hope this helps,
> 
> Leonard
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

The following is simpler.


r2 <- xtabs(~ ., x) |> as.data.frame()
r2[-4L] # or r2[names(r2) != "Freq"]


Hope this helps,

Rui Barradas


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From |eo@m@d@ @end|ng |rom @yon|c@eu  Sun Jun  2 19:41:00 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Sun, 2 Jun 2024 17:41:00 +0000
Subject: [R] R code for overlapping variables -- count
In-Reply-To: <DBAP192MB0956787CE5BE81D0A6FD4FA284FE2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
References: <DBAP192MB0956787CE5BE81D0A6FD4FA284FE2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
Message-ID: <DBAP192MB09562DB092CFE2F72559116584FE2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Correcting a small glitch - see new code.

________________________________
From: Leo Mada <leo.mada at syonic.eu>
Sent: Sunday, June 2, 2024 8:34 PM
To: Shadee Ashtari <shadee.ashtari at gmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: [R] R code for overlapping variables -- count

Dear Shadee,

If you have a data.frame with the following columns:

n = 100; # population size
x = data.frame(
??????Sex = sample(c("M","F"), n, T),
??????Country = sample(c("AA", "BB", "US"), n, T),
??????Income  = as.factor(sample(1:3, n, T))
)

# Dummy variable
ONE = rep(1, nrow(x))

# corrected
r = aggregate(ONE ~ Sex + Income + Country, length, data = x)
r = r[, c("Country", "Income", "Sex", "ONE")]
names(r)[4] = "Count"
print(r)

It is possible to write more simple code, if you need only the particular combination of variables (which you specified in your mail). But this is the more general approach.

Note: you may want to use "sum" instead of "length", e.g. if you have a column specifying the number of individuals in that category.


Hope this helps,

Leonard


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jun  2 19:47:18 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 2 Jun 2024 18:47:18 +0100
Subject: [R] R code for overlapping variables -- count
In-Reply-To: <6b70be1b-0688-443b-b6a8-4ff077734860@sapo.pt>
References: <DBAP192MB0956787CE5BE81D0A6FD4FA284FE2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
 <6b70be1b-0688-443b-b6a8-4ff077734860@sapo.pt>
Message-ID: <21a5c8f3-d914-45d4-aa7e-2fb5e7ef2b5a@sapo.pt>

?s 18:40 de 02/06/2024, Rui Barradas escreveu:
> ?s 18:34 de 02/06/2024, Leo Mada via R-help escreveu:
>> Dear Shadee,
>>
>> If you have a data.frame with the following columns:
>>
>> n = 100; # population size
>> x = data.frame(
>> ??????Sex = sample(c("M","F"), n, T),
>> ??????Country = sample(c("AA", "BB", "US"), n, T),
>> ??????Income? = as.factor(sample(1:3, n, T))
>> )
>>
>> # Dummy variable
>> ONE = rep(1, nrow(x))
>>
>> r = aggregate(ONE ~ Sex + Income + Country, length, data = x)
>> r = r[, c("Country", "Income", "Sex")]
>> print(r)
>>
>> It is possible to write more simple code, if you need only the 
>> particular combination of variables (which you specified in your 
>> mail). But this is the more general approach.
>>
>> Note: you may want to use "sum" instead of "length", e.g. if you have 
>> a column specifying the number of individuals in that category.
>>
>>
>> Hope this helps,
>>
>> Leonard
>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> The following is simpler.
> 
> 
> r2 <- xtabs(~ ., x) |> as.data.frame()
> r2[-4L] # or r2[names(r2) != "Freq"]
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
Hello,

This is the same solution but the code to keep only the columns in the 
original data set is better. And it's a MRE.


n <- 100; # population size
x <- data.frame(
   Sex = sample(c("M","F"), n, T),
   Country = sample(c("AA", "BB", "US"), n, T),
   Income  = as.factor(sample(1:3, n, T))
)

r2 <- xtabs(~ ., x) |> as.data.frame()
# no need for constants, find the columns
# to keep from the data
r2[names(r2) %in% names(x)]


Hope this helps,

Rui Barradas


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From pd@|gd @end|ng |rom gm@||@com  Mon Jun  3 11:01:52 2024
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 3 Jun 2024 11:01:52 +0200
Subject: [R] R code for overlapping variables -- count
In-Reply-To: <CAFMWFxDjNSAwB21ZyZ4JSJ_CT96t438v24smX_qSkb7TNBjhhg@mail.gmail.com>
References: <CAFMWFxDjNSAwB21ZyZ4JSJ_CT96t438v24smX_qSkb7TNBjhhg@mail.gmail.com>
Message-ID: <150215D9-317F-469C-A1A5-55F5BB571C50@gmail.com>

If they are binary (0/1 dummies), can't you just "&" them as in 

table(Female & USA & MidIncome)

(or sum() if you don't care about the number of 0s)

-pd

> On 2 Jun 2024, at 00:31 , Shadee Ashtari <shadee.ashtari at gmail.com> wrote:
> 
> Hi!
> 
> I am trying to find the code for how to get counts for intersectional
> variables. For example, I have three unique categorical variables --
> "Female," "USA," and "MidIncome" -- and I'm trying to see how many people I
> have at the intersection of the three.
> 
> Thank you so much,
> Shadee
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From tebert @end|ng |rom u||@edu  Mon Jun  3 13:12:41 2024
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 3 Jun 2024 11:12:41 +0000
Subject: [R] R code for overlapping variables -- count
In-Reply-To: <150215D9-317F-469C-A1A5-55F5BB571C50@gmail.com>
References: <CAFMWFxDjNSAwB21ZyZ4JSJ_CT96t438v24smX_qSkb7TNBjhhg@mail.gmail.com>
 <150215D9-317F-469C-A1A5-55F5BB571C50@gmail.com>
Message-ID: <CH3PR22MB4514EFC627EC55EF1E856B1CCFFF2@CH3PR22MB4514.namprd22.prod.outlook.com>

One could make dummy variables if the existing variables are otherwise. If Female is a variable that includes other options (no-response, non-binary, ...) then recode it using dummy.female and the others would be similarly named.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of peter dalgaard
Sent: Monday, June 3, 2024 5:02 AM
To: Shadee Ashtari <shadee.ashtari at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] R code for overlapping variables -- count

[External Email]

If they are binary (0/1 dummies), can't you just "&" them as in

table(Female & USA & MidIncome)

(or sum() if you don't care about the number of 0s)

-pd

> On 2 Jun 2024, at 00:31 , Shadee Ashtari <shadee.ashtari at gmail.com> wrote:
>
> Hi!
>
> I am trying to find the code for how to get counts for intersectional
> variables. For example, I have three unique categorical variables --
> "Female," "USA," and "MidIncome" -- and I'm trying to see how many
> people I have at the intersection of the three.
>
> Thank you so much,
> Shadee
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat/
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C02%7Ctebert%40ufl.edu
> %7C66abf8af810348ed21b408dc83abdfd6%7C0d4da0f84a314d76ace60a62331e1b84
> %7C0%7C0%7C638530021430818928%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=
> a2oUZzOdXDHnzPA3Oo98DIp%2BFIqpg5o1fT0fcE%2BvkQI%3D&reserved=0
> PLEASE do read the posting guide
> http://www.r/
> -project.org%2Fposting-guide.html&data=05%7C02%7Ctebert%40ufl.edu%7C66
> abf8af810348ed21b408dc83abdfd6%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> 7C0%7C638530021430825783%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=L2I%2
> BxXV3kHZUwflUx0%2BGrakGbbOV6AWV7dul7%2FyuIBU%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From gb@rc@ro|| @end|ng |rom gm@||@com  Sat Jun  1 13:27:16 2024
From: gb@rc@ro|| @end|ng |rom gm@||@com (Giulio Barcaroli)
Date: Sat, 1 Jun 2024 13:27:16 +0200
Subject: [R] [R-pkgs] QGA 1.0 is released
Message-ID: <7ce4d41b-92e3-435c-a9e8-2e238f74c52e@gmail.com>

Dear R users,

I am pleased to announce that QGA 1.0 is now available on CRAN.

QGA implements the Quantum Genetic Algorithm, as proposed by Han and Kim 
in 2000, and is an R implementation derived from the Python one by 
Lahoz-Beltra in 2016.

Under this approach, each solution is represented as a sequence of 
(qu)bits. Simulating the quantum paradigm, these qubits are in a 
superposition state: when measuring them, they collapse in a 0 or 1 
state. After measurement, the solution's fitness is calculated as in 
usual genetic algorithms.

The evolution at each iteration is oriented by the application of two 
quantum gates to the amplitudes of the qubits: (1) a rotation gate 
(always); (2) a Pauli-X gate (optionally). The rotation is based on the 
theta angle values: higher values allow a quicker evolution, and lower 
values avoid local maxima. The Pauli-X gate is equivalent to the 
classical mutation operator and determines the swap between alfa and 
beta amplitudes of a given qubit.

The package has been developed in such a way as to permit a complete 
separation between the 'engine', and the particular problem subject to 
combinatorial optimization. This is evident in the available examples, 
that come with the package, illustrating the application of QGA to 
different problems: knapsack, traveler salesman, and clustering.

Thank you, kind regards,

Giulio Barcaroli

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From |eo@m@d@ @end|ng |rom @yon|c@eu  Mon Jun  3 20:50:19 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Mon, 3 Jun 2024 18:50:19 +0000
Subject: [R] Tools to modify highlighted areas in pdf documents?
In-Reply-To: <20240602200238.1f57909d@Tarkus>
References: <DBAP192MB095675B1E0FD76CD59E9155384FD2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>
 <20240602200238.1f57909d@Tarkus>
Message-ID: <DBAP192MB09566488E091E5FCE6EB7B3C84FF2@DBAP192MB0956.EURP192.PROD.OUTLOOK.COM>

Dear Ivan,

Thank you very much for the hint. I have started to test it.

- it offers more colours and types of highlighting than MS Edge;
- it seems to have better word-boundary detection than MS Edge (but I haven't tested all the cases yet);


There are some nit-picks:
- I wish it had a better default color-pallet;
- the vertical positioning continues to be sometimes sub-optimal: editing manually the coordinates may be still useful;

Returning to R:
1. Some of the pdf-packages could implement some of the annotation-functionality as well.

2. It would be useful to be able to export the annotations and import/merge them in another document. I have spotted errors in various articles; such a functionality would be handy, if a new version of those articles gets published.

Sincerely,

Leonard
________________________________
From: Ivan Krylov <ikrylov at disroot.org>
Sent: Sunday, June 2, 2024 8:02 PM
To: Leo Mada via R-help <r-help at r-project.org>
Cc: Leo Mada <leo.mada at syonic.eu>
Subject: Re: [R] Tools to modify highlighted areas in pdf documents?

? Sat, 1 Jun 2024 16:16:23 +0000
Leo Mada via R-help <r-help at r-project.org> ?????:

> When highlighting pdf-documents with Microsoft Edge, the bounding box
> is sometimes misplaced, and quite ugly so. It also lacks the ability
> to draw lines or arrows.
>
> On the other hand, I did not get used to Acrobat Reader: it usually
> involves much more effort to add specific highlights. Lines can be
> drawn, but are NOT straight!

Sorry for answering a different question, but have you considered using
a different PDF viewer + annotation application? Okular
<https://eu01.z.antigena.com/l/iZmB5crNT773HTSUSt2S6McW6mdP5phHyzgXromFHINsN6Uo6BMnSdZK0kmSK~aLduXw-YpIAWy-DV9bac-5U3grBsLdYxuX7aMmbxQjKSLGCqTyJG54WQ2W7oaR2NEPTWiFotbkB4_eQTzHI3L-cAgOgsS4exJ4ie4BHLt > is free and available on Windows (including
from outside Microsoft store). Its annotation features include all
kinds of highlights, arrows and lines, both straight and
arbitrarily-shaped, quickly available from the "annotations" panel.

--
Best regards,
Ivan

	[[alternative HTML version deleted]]


From |@rz@dghoo@h| @end|ng |rom gm@||@com  Tue Jun  4 12:49:25 2024
From: |@rz@dghoo@h| @end|ng |rom gm@||@com (Farzad Ghooshi)
Date: Tue, 4 Jun 2024 14:19:25 +0330
Subject: [R] nc file
Message-ID: <CAJz8DZjHoSAd+isS=iydaNZq3KH+xedZBbK58s98bZyqHNcqwA@mail.gmail.com>

Hello
I am a PhD student in ecology.
The subject of my thesis is climate change and agricultural systems
modeling. One of the software used in this research is R.
As you know, nc files show climate variables by year in general for the
whole world.
With what command line can I isolate an nc file climate variable for a
specific location?

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue Jun  4 15:00:42 2024
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 4 Jun 2024 09:00:42 -0400
Subject: [R] nc file
In-Reply-To: <CAJz8DZjHoSAd+isS=iydaNZq3KH+xedZBbK58s98bZyqHNcqwA@mail.gmail.com>
References: <CAJz8DZjHoSAd+isS=iydaNZq3KH+xedZBbK58s98bZyqHNcqwA@mail.gmail.com>
Message-ID: <db88b451-ae43-4ea4-a92d-c6f5e91fac96@gmail.com>

    This question is unfortunately too vague for us to help you.  A 
little bit of web-searching turned up this tutorial: maybe that will help?

https://rpubs.com/boyerag/297592

On 2024-06-04 6:49 a.m., Farzad Ghooshi wrote:
> Hello
> I am a PhD student in ecology.
> The subject of my thesis is climate change and agricultural systems
> modeling. One of the software used in this research is R.
> As you know, nc files show climate variables by year in general for the
> whole world.
> With what command line can I isolate an nc file climate variable for a
> specific location?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From Roger@B|v@nd @end|ng |rom nhh@no  Wed Jun  5 14:20:35 2024
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Wed, 5 Jun 2024 12:20:35 +0000
Subject: [R] nc file
Message-ID: <SV0P279MB0475FC860C2457917D12C1C1EEF92@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

The link suggested by Ben is over 7 years old, so using the CRAN Task View: https://cran.r-project.org/web/views/Spatial.html, which is up-to-date, and https://rspatial.org/index.html, because the terra package has largely replaced the raster package. Please consider following up on the R-sig-geo mailing list: https://stat.ethz.ch/mailman/listinfo/r-sig-geo.

Hope this helps,

Roger

--
Roger Bivand
Emeritus Professor
Norwegian School of Economics
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
Roger.Bivand at nhh.no

From |b@rnh@rt055 @end|ng |rom gm@||@com  Thu Jun  6 02:07:19 2024
From: |b@rnh@rt055 @end|ng |rom gm@||@com (I B)
Date: Wed, 5 Jun 2024 19:07:19 -0500
Subject: [R] R Shiny Help - Trouble passing user input columns to emmeans
 after ANOVA analysis
Message-ID: <CAPJbgronjQqxC57TqRmWnd4VzmWtRs=qLdw1QxKRb1Boo-Zf=Q@mail.gmail.com>

Hello everybody,

I have experience coding with R, but am brand new to R Shiny. I am trying
to produce an application that will allow users to upload their own
dataset, select columns they want an ANOVA analysis run on, and generate
graphs that will allow users to view their results. However, I am getting
the following error: *"Argument is of length zero."*

Being new to Shiny, I am having trouble passing the user input column to an
emmeans argument in order to do a post hoc analysis, and using that
information to produce a graph. Can somebody help me with this? *The code
for my dataset and application are provided below; copying and pasting
directly into R should generate the reproducible example.*

In my application, the following columns should be selected after uploading
the dataset:

   - Select response variable: "ndvi"
   - Select first independent variable: "genotype"
   - Select second independent variable: "rate"
   - Select random variable: "rep"

For this example, the final two drop-down selections should be:

   - "Which variable would you like to graph? "genotype"
   - "Which ANOVA model do you want to graph? "Main effects model"

Any help would be great. Thank you so much!

Sincerely,
Isaac Barnhart, PhD


*Here is my dataset:*

data <- data.frame(rep =
c(1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3),
                   genotype =
c('a','a','a','a','b','b','b','b','c','c','c','c','a','a','a','a','b','b','b','b','c','c','c','c','a','a','a','a','b','b','b','b','c','c','c','c'),
                   rate =
c('1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x'),
                   ndvi =
c(0.584947811,0.642112121,0.654116902,0.785068313,0.79665163,0.674549249,0.958911611,0.547077528,0.613315552,0.768646411,0.97107949,0.680942649,0.520576242,0.723920266,0.868779972,0.834257732,0.554506685,0.520458208,0.617282262,0.80128067,0.875192693,0.572153151,0.850305042,0.500760522,0.796305833,0.643719779,0.590512435,0.522884966,0.905197544,0.663792758,0.690415735,0.975449466,0.621379163,0.734904647,0.812023395,0.928144532))


*Here is my code:*

library(shiny)
library(ggplot2)
library(tidyverse)
library(emmeans)
library(DHARMa)
library(lme4)

ui <- fluidPage(
  fileInput("file1", "Choose .csv or .xlsx file",
            accept = c("text/csv",
                       "text/comma-separated-values",
                       ".csv",
                       ".xlsx")),
  textOutput("data_info"),
  verbatimTextOutput("data_head"),
  uiOutput("column_selector_1"),
  uiOutput("column_selector_2"),
  uiOutput("column_selector_3"),
  uiOutput("column_selector_4"),
  textOutput("dist_info"),
  plotOutput("dist"),
  textOutput("str_info"),
  verbatimTextOutput("selected_columns"),
  textOutput("two_way_anova"),
  verbatimTextOutput("model_summary"),
  textOutput("main_effects"),
  verbatimTextOutput("model_summary_ME"),
  textOutput("mod_diagnostic"),
  plotOutput("diagnostic_plot"),
  uiOutput("graph"),
  uiOutput("model_selection"),
  plotOutput("graph_plot")
)

server <- function(input, output, session) {
  # Open file
  req(data <- reactive({
    infile <- input$file1
    if (is.null(infile)) {
      return(NULL)
    }
    read.csv(infile$datapath, header = TRUE)
  }))

  # Preview data
  output$data_info <- renderText({
    req(data())
    "Preview of the data uploaded:"
  })

  output$data_head <- renderPrint({
    req(data())
    head(data(), 20)
  })

  # Select response variable
  output$column_selector_1 <- renderUI({
    req(data())
    selectInput("column1","Select response variable", choices =
names(data()))
    })

  # Select first independent variable
  output$column_selector_2 <- renderUI({
    req(data())
    selectInput("column2", "Select first independent variable", choices =
names(data()))
  })

  # Select second independent variable
  output$column_selector_3 <- renderUI({
    req(data())
    selectInput("column3", "Select second independent variable", choices =
names(data()))
  })

  # Select random variable
  output$column_selector_4 <- renderUI({
    req(data())
    selectInput("column4", "Select random variable", choices =
names(data()))
  })

  # Assigning user inputs to correct variables
  selected_columns <- reactive({
    req(data(), input$column1, input$column2, input$column3, input$column4)
    list(
      dependent = data()[[input$column1]],
      independent1 = as.factor(data()[[input$column2]]),
      independent2 = as.factor(data()[[input$column3]]),
      random = as.factor(data()[[input$column4]]),

      # Define column names for later use
      column1 <- input$column1,
      column2 <- input$column2,
      column3 <- input$column3,
      column4 <- input$column4
    )
  })

  # Instructional text
  output$dist_info <- renderText({
    req(data())
    "The graph below shows the shape of response variable distribution"
  })


  # Distribution plot
  output$dist <- renderPlot({
    req(selected_columns())
    cols <- selected_columns()
    plot(density(cols$dependent), main = "Distribution Plot")
  })

  # Instructional text
  output$str_info <- renderText({
    req(data())
    "The code below verifies that our data are in the correct structure for
ANOVA analyses. All independent variables should be changed to 'Factor'. "
  })

  # Verifies that columns are in the correct structure
  output$selected_columns <- renderPrint({
    cols <- selected_columns()
    str(cols)
  })

  # Instructional text
  output$two_way_anova <- renderText({
    req(data())
    "Two-way ANOVA with interaction"
  })

  # Build ANOVA model with two-way interaction
  interaction_model <- reactive({
    cols <- selected_columns()
    req(cols)
    data <- data()
    data$dep <- cols$dependent
    data$indep1 <- cols$independent1
    data$indep2 <- cols$independent2
    data$rand <- cols$random
    lmer(dep ~ indep1 * indep2 + (1|rand), data = data)
  })

  # Run two-way ANOVA model with interaction
  output$model_summary <- renderPrint({
    req(interaction_model())
    Anova(interaction_model(), type = c("III"))
  })

  # Build main effects ANOVA model
  main_effects_model <- reactive({
    cols <- selected_columns()
    req(cols)
    data <- data()
    data$dep <- cols$dependent
    data$indep1 <- cols$independent1
    data$indep2 <- cols$independent2
    data$rand <- cols$random
    lmer(dep ~ indep1 + indep2 + (1|rand), data = data)
  })

  # Instructional text
  output$main_effects <- renderText({
    req(data())
    "Two-way ANOVA, main effects"
  })

  # Run two-way main effects model
  output$model_summary_ME <- renderPrint({
    req(main_effects_model())
    Anova(main_effects_model(), type = c("III"))
  })


  output$mod_diagnostic <- renderText({
    req(main_effects_model())
    "Below, the `DHARMa` package is used to check model assumptions. If
assumptions are not met, then data transformations may be needed before
proceeding."
  })

  output$diagnostic_plot <- renderPlot({
    req(interaction_model())
    plotQQunif(interaction_model())
  })

  output$graph <- renderUI({
    req(data(), input$column2, input$column3)
    selectInput("graph", "Which variable would you like to graph?", choices
= c(input$column2, input$column3, "interaction"))
  })

  output$model_selection <- renderUI({
    req(main_effects_model(), interaction_model())
    selectInput("model_selection", "Which ANOVA model do you want to
graph?", choices = c("Main effects model", "Interaction model"))
  })

  # Create a reactive expression to store the selected graph variable
  selected_graph <- reactive({
    input$graph
  })

  # Create a reactive expression to store the selected model
  selected_model <- reactive({
    input$model_selection
  })

  # Render the plot based on the selected variables
  output$graph_plot <- renderPlot({
    req(data(), selected_graph(), selected_model())
    cols <- selected_columns()

    if (selected_graph() == cols$column2 | selected_model() == "Main
effects model") {

      # Mean separation: First column
      mod_means_cotr1 <- emmeans(main_effects_model(), pairwise ~
cols$column2,
                                adjust = 'tukey',
                                type = 'response')

      mod_means1 <- multcomp::cld(object = mod_means_cotr1$emmeans,
                                 LETTERS = "letters")

      # Graph: First column
      ggplot(mod_means1, aes_string(x = cols$column2, y = cols_column1))+
        geom_bar(stat="identity", width = 0.6, position = "dodge", col =
"black", fill = "purple3")+
        geom_errorbar(aes(ymin = emmean, ymax = emmean + SE), width = 0.3,
position = position_dodge(0.6))+
        xlab(cols$column2)+
        ylab(cols$column1)+
        theme(plot.title=element_text(hjust=0.5, size = 20),
              plot.subtitle = element_text(hjust = 0.5, size = 15),
              axis.text = element_text(size = 17),
              axis.title = element_text(size = 20))+
        geom_text(aes(label=.group, y=emmean + SE), vjust = -0.9, size = 8)
+
        #ylim(0, 105)+
        scale_x_discrete(labels = function(x) str_wrap(x, width = 7))


    }
  })

}
shinyApp(ui, server)

	[[alternative HTML version deleted]]


From ju||en@jo|y @end|ng |rom |n@erm@|r  Thu Jun  6 10:45:20 2024
From: ju||en@jo|y @end|ng |rom |n@erm@|r (Julien JOLY)
Date: Thu, 6 Jun 2024 08:45:20 +0000
Subject: [R] Bug report for package foreign anf functon write.foreign
Message-ID: <faf69f4017b64e84aa6fa75f399c8e5d@inserm.fr>

Dear all,

First of all, I thank you for the creation of the package.

I write this message concerning the write.foreign() function from the foreign package and a bug that I discovered.
When we want to save our dataset as a .sas file, the limit of variable names character is 8 by default. In SAS this limit is 32 character and an argument in the function, validvarname, can theorically switch the default from 8 to 32 by selecting validvarname = "V7".

However, it did not work and show the error "Cannot uniquely abbreviate format names to conform to eight-character limit and not ending in a digit" that show the limit is still 8 characters.

By looking at the script at https://github.com/cran/foreign/blob/master/R/writeForeignSAS.R , I realized that the line 39, in the function make.SAS.formats, can be the reason of the nonfunctioning argument :
"if(any(nchar(x) > 8L) || any(duplicated(x)))" which is correct if the length of the variable has a limit of 8, but it does not take in consideration when the limit is at 32 defined by validvarnames = "V7".

A solution can be to add the argument validvarname in the definition of the function and add these few lines :
  validvarname <- match.arg(validvarname)
  nmax <- if(validvarname == "V7") 32L else 8L
  if(any(nchar(x) > nmax) || any(duplicated(x)))


I hope I send the message to the good place and that it will help you improve the package.

Kind regards,



Julien Joly

Biostatisticien et Data manager





	[[alternative HTML version deleted]]


From kev|n@thorpe @end|ng |rom utoronto@c@  Thu Jun  6 16:35:44 2024
From: kev|n@thorpe @end|ng |rom utoronto@c@ (Kevin Thorpe)
Date: Thu, 6 Jun 2024 14:35:44 +0000
Subject: [R] Bug report for package foreign anf functon write.foreign
In-Reply-To: <faf69f4017b64e84aa6fa75f399c8e5d@inserm.fr>
References: <faf69f4017b64e84aa6fa75f399c8e5d@inserm.fr>
Message-ID: <E299C946-CB74-4598-9FF3-0C2C03AA3191@utoronto.ca>

I haven?t used this function in a long time, but it sounds like the issue is the format names for the formats catalog, not the variable names.

You might try the haven package as it can create SAS datasets directly, although there are limitations (I think).

> On Jun 6, 2024, at 4:45?AM, Julien JOLY <julien.joly at inserm.fr> wrote:
> 
> [Vous ne recevez pas souvent de courriers de julien.joly at inserm.fr. D?couvrez pourquoi ceci est important ? https://aka.ms/LearnAboutSenderIdentification ]
> 
> Dear all,
> 
> First of all, I thank you for the creation of the package.
> 
> I write this message concerning the write.foreign() function from the foreign package and a bug that I discovered.
> When we want to save our dataset as a .sas file, the limit of variable names character is 8 by default. In SAS this limit is 32 character and an argument in the function, validvarname, can theorically switch the default from 8 to 32 by selecting validvarname = "V7".
> 
> However, it did not work and show the error "Cannot uniquely abbreviate format names to conform to eight-character limit and not ending in a digit" that show the limit is still 8 characters.
> 
> By looking at the script at https://github.com/cran/foreign/blob/master/R/writeForeignSAS.R , I realized that the line 39, in the function make.SAS.formats, can be the reason of the nonfunctioning argument :
> "if(any(nchar(x) > 8L) || any(duplicated(x)))" which is correct if the length of the variable has a limit of 8, but it does not take in consideration when the limit is at 32 defined by validvarnames = "V7".
> 
> A solution can be to add the argument validvarname in the definition of the function and add these few lines :
>  validvarname <- match.arg(validvarname)
>  nmax <- if(validvarname == "V7") 32L else 8L
>  if(any(nchar(x) > nmax) || any(duplicated(x)))
> 
> 
> I hope I send the message to the good place and that it will help you improve the package.
> 
> Kind regards,
> 
> 
> 
> Julien Joly
> 
> Biostatisticien et Data manager
> 
> 
> 
> 
> 
>        [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Kevin E. Thorpe
Assistant Professor, Dalla Lana School of Public Health
University of Toronto
email: kevin.thorpe at utoronto.ca  Tel: 416-946-8083



From yo@u@yurr@mend| @end|ng |rom gm@||@com  Thu Jun  6 10:37:38 2024
From: yo@u@yurr@mend| @end|ng |rom gm@||@com (Yosu Yurramendi)
Date: Thu, 6 Jun 2024 10:37:38 +0200
Subject: [R] What is the HEX code for "transparent" color?
Message-ID: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>

What is the HEX code for "transparent" color?
I've tried "00000000" "FFFFFF00" "FFFFFFFF", but they don't work.
Thanks

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jun  6 16:49:19 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 6 Jun 2024 07:49:19 -0700
Subject: [R] 
 R Shiny Help - Trouble passing user input columns to emmeans
 after ANOVA analysis
In-Reply-To: <CAPJbgronjQqxC57TqRmWnd4VzmWtRs=qLdw1QxKRb1Boo-Zf=Q@mail.gmail.com>
References: <CAPJbgronjQqxC57TqRmWnd4VzmWtRs=qLdw1QxKRb1Boo-Zf=Q@mail.gmail.com>
Message-ID: <CAGxFJbQnyNGAO5pQikOzNLC5OfsgkdL3d=Z-rxka35St_O==rA@mail.gmail.com>

Wrong list. Shiny is software from an external provider, POSIT (formerly
RStudio) and not part of R, itself. They have a community support site at:

https://forum.posit.co/?_gl=1*bh848i*_ga*MTY2NjcwNzQ4LjE3MTYyMzkzODQ.*_ga_2C0WZ1JHG0*MTcxNzY4NTExNi4yLjAuMTcxNzY4NTExNi4wLjAuMA
..

Cheers,
Bert

On Thu, Jun 6, 2024 at 12:09?AM I B <ibarnhart055 at gmail.com> wrote:

> Hello everybody,
>
> I have experience coding with R, but am brand new to R Shiny. I am trying
> to produce an application that will allow users to upload their own
> dataset, select columns they want an ANOVA analysis run on, and generate
> graphs that will allow users to view their results. However, I am getting
> the following error: *"Argument is of length zero."*
>
> Being new to Shiny, I am having trouble passing the user input column to an
> emmeans argument in order to do a post hoc analysis, and using that
> information to produce a graph. Can somebody help me with this? *The code
> for my dataset and application are provided below; copying and pasting
> directly into R should generate the reproducible example.*
>
> In my application, the following columns should be selected after uploading
> the dataset:
>
>    - Select response variable: "ndvi"
>    - Select first independent variable: "genotype"
>    - Select second independent variable: "rate"
>    - Select random variable: "rep"
>
> For this example, the final two drop-down selections should be:
>
>    - "Which variable would you like to graph? "genotype"
>    - "Which ANOVA model do you want to graph? "Main effects model"
>
> Any help would be great. Thank you so much!
>
> Sincerely,
> Isaac Barnhart, PhD
>
>
> *Here is my dataset:*
>
> data <- data.frame(rep =
> c(1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3),
>                    genotype =
>
> c('a','a','a','a','b','b','b','b','c','c','c','c','a','a','a','a','b','b','b','b','c','c','c','c','a','a','a','a','b','b','b','b','c','c','c','c'),
>                    rate =
>
> c('1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x','1x','2x','4x','8x'),
>                    ndvi =
>
> c(0.584947811,0.642112121,0.654116902,0.785068313,0.79665163,0.674549249,0.958911611,0.547077528,0.613315552,0.768646411,0.97107949,0.680942649,0.520576242,0.723920266,0.868779972,0.834257732,0.554506685,0.520458208,0.617282262,0.80128067,0.875192693,0.572153151,0.850305042,0.500760522,0.796305833,0.643719779,0.590512435,0.522884966,0.905197544,0.663792758,0.690415735,0.975449466,0.621379163,0.734904647,0.812023395,0.928144532))
>
>
> *Here is my code:*
>
> library(shiny)
> library(ggplot2)
> library(tidyverse)
> library(emmeans)
> library(DHARMa)
> library(lme4)
>
> ui <- fluidPage(
>   fileInput("file1", "Choose .csv or .xlsx file",
>             accept = c("text/csv",
>                        "text/comma-separated-values",
>                        ".csv",
>                        ".xlsx")),
>   textOutput("data_info"),
>   verbatimTextOutput("data_head"),
>   uiOutput("column_selector_1"),
>   uiOutput("column_selector_2"),
>   uiOutput("column_selector_3"),
>   uiOutput("column_selector_4"),
>   textOutput("dist_info"),
>   plotOutput("dist"),
>   textOutput("str_info"),
>   verbatimTextOutput("selected_columns"),
>   textOutput("two_way_anova"),
>   verbatimTextOutput("model_summary"),
>   textOutput("main_effects"),
>   verbatimTextOutput("model_summary_ME"),
>   textOutput("mod_diagnostic"),
>   plotOutput("diagnostic_plot"),
>   uiOutput("graph"),
>   uiOutput("model_selection"),
>   plotOutput("graph_plot")
> )
>
> server <- function(input, output, session) {
>   # Open file
>   req(data <- reactive({
>     infile <- input$file1
>     if (is.null(infile)) {
>       return(NULL)
>     }
>     read.csv(infile$datapath, header = TRUE)
>   }))
>
>   # Preview data
>   output$data_info <- renderText({
>     req(data())
>     "Preview of the data uploaded:"
>   })
>
>   output$data_head <- renderPrint({
>     req(data())
>     head(data(), 20)
>   })
>
>   # Select response variable
>   output$column_selector_1 <- renderUI({
>     req(data())
>     selectInput("column1","Select response variable", choices =
> names(data()))
>     })
>
>   # Select first independent variable
>   output$column_selector_2 <- renderUI({
>     req(data())
>     selectInput("column2", "Select first independent variable", choices =
> names(data()))
>   })
>
>   # Select second independent variable
>   output$column_selector_3 <- renderUI({
>     req(data())
>     selectInput("column3", "Select second independent variable", choices =
> names(data()))
>   })
>
>   # Select random variable
>   output$column_selector_4 <- renderUI({
>     req(data())
>     selectInput("column4", "Select random variable", choices =
> names(data()))
>   })
>
>   # Assigning user inputs to correct variables
>   selected_columns <- reactive({
>     req(data(), input$column1, input$column2, input$column3, input$column4)
>     list(
>       dependent = data()[[input$column1]],
>       independent1 = as.factor(data()[[input$column2]]),
>       independent2 = as.factor(data()[[input$column3]]),
>       random = as.factor(data()[[input$column4]]),
>
>       # Define column names for later use
>       column1 <- input$column1,
>       column2 <- input$column2,
>       column3 <- input$column3,
>       column4 <- input$column4
>     )
>   })
>
>   # Instructional text
>   output$dist_info <- renderText({
>     req(data())
>     "The graph below shows the shape of response variable distribution"
>   })
>
>
>   # Distribution plot
>   output$dist <- renderPlot({
>     req(selected_columns())
>     cols <- selected_columns()
>     plot(density(cols$dependent), main = "Distribution Plot")
>   })
>
>   # Instructional text
>   output$str_info <- renderText({
>     req(data())
>     "The code below verifies that our data are in the correct structure for
> ANOVA analyses. All independent variables should be changed to 'Factor'. "
>   })
>
>   # Verifies that columns are in the correct structure
>   output$selected_columns <- renderPrint({
>     cols <- selected_columns()
>     str(cols)
>   })
>
>   # Instructional text
>   output$two_way_anova <- renderText({
>     req(data())
>     "Two-way ANOVA with interaction"
>   })
>
>   # Build ANOVA model with two-way interaction
>   interaction_model <- reactive({
>     cols <- selected_columns()
>     req(cols)
>     data <- data()
>     data$dep <- cols$dependent
>     data$indep1 <- cols$independent1
>     data$indep2 <- cols$independent2
>     data$rand <- cols$random
>     lmer(dep ~ indep1 * indep2 + (1|rand), data = data)
>   })
>
>   # Run two-way ANOVA model with interaction
>   output$model_summary <- renderPrint({
>     req(interaction_model())
>     Anova(interaction_model(), type = c("III"))
>   })
>
>   # Build main effects ANOVA model
>   main_effects_model <- reactive({
>     cols <- selected_columns()
>     req(cols)
>     data <- data()
>     data$dep <- cols$dependent
>     data$indep1 <- cols$independent1
>     data$indep2 <- cols$independent2
>     data$rand <- cols$random
>     lmer(dep ~ indep1 + indep2 + (1|rand), data = data)
>   })
>
>   # Instructional text
>   output$main_effects <- renderText({
>     req(data())
>     "Two-way ANOVA, main effects"
>   })
>
>   # Run two-way main effects model
>   output$model_summary_ME <- renderPrint({
>     req(main_effects_model())
>     Anova(main_effects_model(), type = c("III"))
>   })
>
>
>   output$mod_diagnostic <- renderText({
>     req(main_effects_model())
>     "Below, the `DHARMa` package is used to check model assumptions. If
> assumptions are not met, then data transformations may be needed before
> proceeding."
>   })
>
>   output$diagnostic_plot <- renderPlot({
>     req(interaction_model())
>     plotQQunif(interaction_model())
>   })
>
>   output$graph <- renderUI({
>     req(data(), input$column2, input$column3)
>     selectInput("graph", "Which variable would you like to graph?", choices
> = c(input$column2, input$column3, "interaction"))
>   })
>
>   output$model_selection <- renderUI({
>     req(main_effects_model(), interaction_model())
>     selectInput("model_selection", "Which ANOVA model do you want to
> graph?", choices = c("Main effects model", "Interaction model"))
>   })
>
>   # Create a reactive expression to store the selected graph variable
>   selected_graph <- reactive({
>     input$graph
>   })
>
>   # Create a reactive expression to store the selected model
>   selected_model <- reactive({
>     input$model_selection
>   })
>
>   # Render the plot based on the selected variables
>   output$graph_plot <- renderPlot({
>     req(data(), selected_graph(), selected_model())
>     cols <- selected_columns()
>
>     if (selected_graph() == cols$column2 | selected_model() == "Main
> effects model") {
>
>       # Mean separation: First column
>       mod_means_cotr1 <- emmeans(main_effects_model(), pairwise ~
> cols$column2,
>                                 adjust = 'tukey',
>                                 type = 'response')
>
>       mod_means1 <- multcomp::cld(object = mod_means_cotr1$emmeans,
>                                  LETTERS = "letters")
>
>       # Graph: First column
>       ggplot(mod_means1, aes_string(x = cols$column2, y = cols_column1))+
>         geom_bar(stat="identity", width = 0.6, position = "dodge", col =
> "black", fill = "purple3")+
>         geom_errorbar(aes(ymin = emmean, ymax = emmean + SE), width = 0.3,
> position = position_dodge(0.6))+
>         xlab(cols$column2)+
>         ylab(cols$column1)+
>         theme(plot.title=element_text(hjust=0.5, size = 20),
>               plot.subtitle = element_text(hjust = 0.5, size = 15),
>               axis.text = element_text(size = 17),
>               axis.title = element_text(size = 20))+
>         geom_text(aes(label=.group, y=emmean + SE), vjust = -0.9, size = 8)
> +
>         #ylim(0, 105)+
>         scale_x_discrete(labels = function(x) str_wrap(x, width = 7))
>
>
>     }
>   })
>
> }
> shinyApp(ui, server)
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |kry|ov @end|ng |rom d|@root@org  Thu Jun  6 17:05:33 2024
From: |kry|ov @end|ng |rom d|@root@org (Ivan Krylov)
Date: Thu, 6 Jun 2024 18:05:33 +0300
Subject: [R] 
 R Shiny Help - Trouble passing user input columns to emmeans
 after ANOVA analysis
In-Reply-To: <CAPJbgronjQqxC57TqRmWnd4VzmWtRs=qLdw1QxKRb1Boo-Zf=Q@mail.gmail.com>
References: <CAPJbgronjQqxC57TqRmWnd4VzmWtRs=qLdw1QxKRb1Boo-Zf=Q@mail.gmail.com>
Message-ID: <20240606180533.17593520@arachnoid>

? Wed, 5 Jun 2024 19:07:19 -0500
I B <ibarnhart055 at gmail.com> ?????:

> However, I am getting the following error: *"Argument is of length
> zero."*

>     if (selected_graph() == cols$column2 | selected_model() == "Main
> effects model") {

The error must be coming from here.

At least one of selected_graph(), cols$column2, selected_model() is a
zero-length object (maybe NULL) at this point, which makes the result
of the whole expression zero-length too. if (...) only accepts logical
scalars, hence the error.

-- 
Best regards,
Ivan


From 538280 @end|ng |rom gm@||@com  Thu Jun  6 17:08:06 2024
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Thu, 6 Jun 2024 09:08:06 -0600
Subject: [R] What is the HEX code for "transparent" color?
In-Reply-To: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>
References: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>
Message-ID: <CAFEqCdwvCV3ky2JxiXpuXnX6uokMOinkLzi7PZPjcBK2oeYKwQ@mail.gmail.com>

You need a "#" at the beginning of the string to specify that it is a
hex code for the color.  Try "#00000000".

On Thu, Jun 6, 2024 at 9:07?AM Yosu Yurramendi
<yosu.yurramendi at gmail.com> wrote:
>
> What is the HEX code for "transparent" color?
> I've tried "00000000" "FFFFFF00" "FFFFFFFF", but they don't work.
> Thanks
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From bobby@kn|ght @end|ng |rom gm@||@com  Thu Jun  6 17:34:43 2024
From: bobby@kn|ght @end|ng |rom gm@||@com (Robert Knight)
Date: Thu, 6 Jun 2024 11:34:43 -0400
Subject: [R] What is the HEX code for "transparent" color?
In-Reply-To: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>
References: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>
Message-ID: <CAKBFG3YutD714tUtt5nUFw96p368fLXWyve3nL_LO7iVvRUfyw@mail.gmail.com>

You would give an existing color a new name and modify the new name's
alpha.  Then refer to the color by the new name instead of using HEX.

On Thu, Jun 6, 2024, 11:07?AM Yosu Yurramendi <yosu.yurramendi at gmail.com>
wrote:

> What is the HEX code for "transparent" color?
> I've tried "00000000" "FFFFFF00" "FFFFFFFF", but they don't work.
> Thanks
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun  6 18:41:55 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 6 Jun 2024 12:41:55 -0400
Subject: [R] What is the HEX code for "transparent" color?
In-Reply-To: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>
References: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>
Message-ID: <dc5818fe-ca44-4d24-903f-16a6cd96b9f4@gmail.com>

On 2024-06-06 4:37 a.m., Yosu Yurramendi wrote:
> What is the HEX code for "transparent" color?
> I've tried "00000000" "FFFFFF00" "FFFFFFFF", but they don't work.

If the other answers don't solve your problem, you should give us some 
context.  Not all graphics functions in R can handle transparency, so 
please show us some reproducible code for what you are trying.

Duncan Murdoch


From rk @end|ng |rom rk@|y|  Thu Jun  6 17:24:21 2024
From: rk @end|ng |rom rk@|y| (Robert Knight)
Date: Thu, 06 Jun 2024 11:24:21 -0400
Subject: [R] What is the HEX code for "transparent" color?
In-Reply-To: <CAFEqCdwvCV3ky2JxiXpuXnX6uokMOinkLzi7PZPjcBK2oeYKwQ@mail.gmail.com>
References: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>
 <CAFEqCdwvCV3ky2JxiXpuXnX6uokMOinkLzi7PZPjcBK2oeYKwQ@mail.gmail.com>
Message-ID: <C419D04D-D029-4D77-9679-A0066202800A@rk.fyi>

You would set the alpha of an existing color and give it a new name and then refer to it by name rather than using HEX codes. 

On June 6, 2024 11:08:06 AM EDT, Greg Snow <538280 at gmail.com> wrote:
>You need a "#" at the beginning of the string to specify that it is a
>hex code for the color.  Try "#00000000".
>
>On Thu, Jun 6, 2024 at 9:07?AM Yosu Yurramendi
><yosu.yurramendi at gmail.com> wrote:
>>
>> What is the HEX code for "transparent" color?
>> I've tried "00000000" "FFFFFF00" "FFFFFFFF", but they don't work.
>> Thanks
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
>-- 
>Gregory (Greg) L. Snow Ph.D.
>538280 at gmail.com
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Robert Knight
tel 270-306-1658
fax (270) 288-0474
rk at rk.fyi
	[[alternative HTML version deleted]]


From r@u @end|ng |rom demogr@mpg@de  Fri Jun  7 16:34:12 2024
From: r@u @end|ng |rom demogr@mpg@de (Roland Rau)
Date: Fri, 7 Jun 2024 16:34:12 +0200
Subject: [R] What is the HEX code for "transparent" color?
In-Reply-To: <dc5818fe-ca44-4d24-903f-16a6cd96b9f4@gmail.com>
References: <CADg5kN3dTkDWj6buW5FV2ujpu3JLF4YUFSbzj7_Rw=y2EkMoqA@mail.gmail.com>
 <dc5818fe-ca44-4d24-903f-16a6cd96b9f4@gmail.com>
Message-ID: <188970f1-3cfa-44f1-a7bf-3ec310722f6e@demogr.mpg.de>

On 6/6/24 18:41, Duncan Murdoch wrote:
> On 2024-06-06 4:37 a.m., Yosu Yurramendi wrote:
>> What is the HEX code for "transparent" color?
>> I've tried "00000000" "FFFFFF00" "FFFFFFFF", but they don't work.
> 
> If the other answers don't solve your problem, you should give us some 
> context.? Not all graphics functions in R can handle transparency, so 
> please show us some reproducible code for what you are trying.
> 
> Duncan Murdoch
> 

I usually use the alpha argument of the rgb() function for transparency.
Does this code snippet help to give you an idea how it works.

plot(1, 1, type="n", xlim=c(0,10), ylim=c(0,10))
rect(xleft=0, xright=7.5, ybottom=0, ytop=7.5,
      col=rgb(0, 0, 1, alpha=0.5))
rect(xleft=2.5, xright=10, ybottom=2.5, ytop=10,
      col=rgb(1, 0, 0, alpha=0.5))

Please check
?rgb
Especially the "Details" section should be helpful where you will find a 
list of devices which are supported or not supported.

I hope this helps a bit.

All the best,
Roland


--
This mail has been sent through the MPI for Demographic ...{{dropped:2}}


