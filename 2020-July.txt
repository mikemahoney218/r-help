From pd@|gd @end|ng |rom gm@||@com  Wed Jul  1 11:38:10 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 1 Jul 2020 11:38:10 +0200
Subject: [R] How to use mle2 function?
In-Reply-To: <CAMk+s2QwH=69HMQU6h_=ZOvS+RrxtgEvZjf1kEjBp9BQubtc=w@mail.gmail.com>
References: <CAMk+s2Rmmga-kBnUZqA1wxgp_iqvsfDrmmXER0v4-OtG6-u5Yg@mail.gmail.com>
 <CAGgJW741SayyPJeG72K8AVOs9hgTBrSC+-k3t7WAwE9N1wGbjw@mail.gmail.com>
 <CAMk+s2RaS1TzzTiKHKLc01mouLzieyB2bYWZgJfKk_O5F+0rmg@mail.gmail.com>
 <CAGgJW75k_6XnSW9bV9CPM4V57OsZtvvPwSsgvVBsH-mOEUwG_w@mail.gmail.com>
 <CAMk+s2QwH=69HMQU6h_=ZOvS+RrxtgEvZjf1kEjBp9BQubtc=w@mail.gmail.com>
Message-ID: <1844C46B-FBAF-4DAC-A30C-736487D8B3BA@gmail.com>

The basic problem is that holling() is not a (negative) loglikelihood function. nll() _is_ a negative loglikelihood, but it is not clear for what. You appear to be very confused as to what a likelihood even is (what is k? apparently your response variable? Then how can it be a scalar if X is a vector? etc.), so I think you need to read up a bit. 

-pd

> On 30 Jun 2020, at 14:22 , Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> 
> No, I got the same. I reckon the problem is with X: this was I scalar,
> I was providing a vector with the actual values.
> Ho can mle2 optimize without knowing what are the actual data? and
> what values should I give for X?
> Thank you
> 
> On Tue, Jun 30, 2020 at 2:06 PM Eric Berger <ericjberger at gmail.com> wrote:
>> 
>> I have no problem with the following code:
>> 
>> library(bbmle)
>> holling <- function( a, b, x ) {
>> a*x^2 / (b^2 + x^2)
>> }
>> A=3261
>> B=10
>> X=30
>> foo <- mle2( minuslogl=holling, start=list(a=A,b=B,x=X) )
>> 
>> foo
>> 
>> # Call:
>> # mle2(minuslogl = holling, start = list(a = A, b = B, x = X))
>> 
>> # Coefficients:
>> #            a             b             x
>> # 3.260044e+03  7.315124e+01 -2.332448e-14
>> 
>> # Log-likelihood: 0
>> 
>> 
>> Does this code create a problem for you?
>> 
>> On Tue, Jun 30, 2020 at 3:00 PM Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>>> 
>>> Sorry for the typo, but I have the same error if using b instead of h:
>>> ```
>>>> O = mle2(minuslogl = holling, start = list(a = A, b = B))
>>>> Error in minuslogl(a = 3261, b = 10) :
>>>  argument "x" is missing, with no default
>>> # let's add x
>>> X = c(8,   24,   39,   63,   89,  115,  153,  196,  242,  287,  344,  408,  473,
>>>      546,  619,  705,  794,  891,  999, 1096, 1242, 1363, 1506, 1648, 1753,
>>>      1851, 1987, 2101, 2219, 2328, 2425, 2575, 2646, 2698, 2727, 2771, 2818,
>>>      2853, 2895, 2926, 2964, 2995, 3025, 3053, 3080, 3102, 3119, 3141, 3152,
>>>      3159, 3172, 3182, 3196, 3209, 3220, 3231, 3239, 3246, 3252, 3261)
>>> O = mle2(minuslogl = holling, start = list(a = A, b = B, x = X))
>>> Error in mle2(minuslogl = holling, start = list(a = A, b = B, x = X)) :
>>>  some named arguments in 'start' are not arguments to the specified
>>> log-likelihood function
>>> ```
>>> And even if I use the log-likelihood function:
>>> ```
>>> O = mle2(minuslogl = nll, start = list(p = c(A, B), n = 57200000, x = X))
>>>> Error in mle2(minuslogl = nll, start = list(p = c(A, B), n = 57200000,  :
>>>  some named arguments in 'start' are not arguments to the specified
>>> log-likelihood function
>>> ```
>>> 
>>> On Tue, Jun 30, 2020 at 12:03 PM Eric Berger <ericjberger at gmail.com> wrote:
>>>> 
>>>> Hi Luigi,
>>>> I took a quick look.
>>>> 
>>>> First error:
>>>> You wrote
>>>> O = mle2(minuslogl = holling, start = list(a = A, h = B, x = X))
>>>> 
>>>> it should be b=B  (h is not an argument of holling())
>>>> The error message gave very precise information!
>>>> 
>>>> Second error:
>>>> You wrote
>>>> O = mle2(minuslogl = nll, start = list(a = A, h = B),   data = list(n
>>>> = 57200000, k = A))
>>>> but the arguments to nll() are p,n,k. Setting start to values for a
>>>> and h causes the function to complain.
>>>> 
>>>> HTH,
>>>> Eric
>>>> 
>>>> On Tue, Jun 30, 2020 at 12:45 PM Luigi Marongiu
>>>> <marongiu.luigi at gmail.com> wrote:
>>>>> 
>>>>> Hello,
>>>>> I would like to optimize the function:
>>>>> ```
>>>>> holling = function(a, b, x) {
>>>>>  y = (a * x^2) / (b^2 + x^2)
>>>>>  return(y)
>>>>> }
>>>>> ```
>>>>> I am trying to use the function mle2 from bbmle, but how do I need to
>>>>> feed the data?
>>>>> If I give `holling` as function to be optimized, passing the starting
>>>>> values for `a`, `b`, and `x`, I get:
>>>>> ```
>>>>> X = 1:60
>>>>> A = 3261
>>>>> B = 10
>>>>> O = mle2(minuslogl = holling, start = list(a = A, h = B, x = X))
>>>>>> Error in mle2(minuslogl = holling, start = list(a = A, b = B, x = X)) :
>>>>>  some named arguments in 'start' are not arguments to the specified
>>>>> log-likelihood function
>>>>> ```
>>>>> If I pass the negative log-function (assuming a binomial distribution
>>>>> of the data, which I am not sure about)
>>>>> ```
>>>>> nll = function(p, n, k) {
>>>>>  # extract parms
>>>>>  a = p[1]
>>>>>  h = p[2]
>>>>>  # calculate probability of attack
>>>>>  pred = a/(1+a*h*n)
>>>>>  # calc NLL
>>>>>  -sum(dbinom(k, prob = pred, size = n, log = TRUE))
>>>>> }
>>>>> ```
>>>>> then I get the same error:
>>>>> ```
>>>>>> O = mle2(minuslogl = nll, start = list(a = A, h = B),
>>>>> +          data = list(n = 57200000, k = A))
>>>>> Error in mle2(minuslogl = nll, start = list(a = A, h = B), data =
>>>>> list(n = 57200000,  :
>>>>>  some named arguments in 'start' are not arguments to the specified
>>>>> log-likelihood function
>>>>> ```
>>>>> but with the disadvantage of working on an assumed function (nll).
>>>>> How can I optimize the function `holling` properly?
>>>>> Thank you
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> Best regards,
>>>>> Luigi
>>>>> 
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>>> 
>>> 
>>> --
>>> Best regards,
>>> Luigi
> 
> 
> 
> -- 
> Best regards,
> Luigi
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Jul  1 11:47:18 2020
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 1 Jul 2020 09:47:18 +0000
Subject: [R] version plot problem
In-Reply-To: <24315.1861.131402.615115@stat.math.ethz.ch>
References: <5cba6fbe1f574bfc830a4c47343f1945@SRVEXCHCM1302.precheza.cz>
 <20200624131236.GA24907@posteo.no>
 <251c1576907b443ab3bf3bdc55926b81@GBDCVPEXC08.corp.lgc-group.com>
 <b1bf757c9afd478688f7d95477cfe49f@SRVEXCHCM1302.precheza.cz>
 <24315.1861.131402.615115@stat.math.ethz.ch>
Message-ID: <ae1bfb7da1694e0fb8e9c2ea4b34df25@SRVEXCHCM1302.precheza.cz>

Hallo Martin

Yes I am aware of gradual improvement of R and also many new features of version 4.0.x. I have to be more aware of fact that some code could work in one version and give error in another, especially when using different major versions.

Probably best option is to persuade IT department to reinstall the newest R version on all affected PCs.

Thank you for explanation.

Best regards
Petr

> -----Original Message-----
> From: Martin Maechler <maechler at stat.math.ethz.ch>
> Sent: Tuesday, June 30, 2020 11:35 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: Stephen Ellison <S.Ellison at LGCGroup.com>; Rasmus Liland
> <jral at posteo.no>; R-help <r-help at r-project.org>
> Subject: Re: [R] version plot problem
> 
> >>>>> PIKAL Petr
> >>>>>     on Thu, 25 Jun 2020 14:45:09 +0000 writes:
> 
>     > Thanks.
>     > I try to spread R to some other people and I use 4.0.0 - version.string R
>     > Under development (unstable) (2020-03-08 r77917) nickname
> Unsuffered
>     > Consequences  whereas they use R 3.6.3
>     > version.string R version 3.6.3 (2020-02-29) nickname       Holding the
>     > Windsock
> 
>     > With artificial data frame both behave with the same error
>     > dat <- data.frame(a=letters[1:5], b=1:5)
>     > dat$a <- as.character(dat$a)
>     > plot(dat)
>     > Error in plot.window(...) : need finite 'xlim' values
>     > In addition: Warning messages:
>     > 1: In xy.coords(x, y, xlabel, ylabel, log) : NAs introduced by coercion
>     > 2: In min(x) : no non-missing arguments to min; returning Inf
>     > 3: In max(x) : no non-missing arguments to max; returning -Inf
> 
>     > So far so good.
> 
>     > But with original data with **character** columns
>     > dput(head(mok))
>     > mok <- structure(list(a = c("Kalcin?t A", "Kalcin?t A", "Kalcin?t A",
>     > "Kalcin?t A", "Kalcin?t A", "Kalcin?t A"), b = c("TB", "TB",
>     > "TB", "TB", "TB", "TB"), c = c("6101B", "6101B", "6101B", "6101B",
>     > "6101B", "6101B"), d = structure(c(1590624000, 1590624000, 1590537600,
>     > 1590537600, 1590537600, 1590537600), class = c("POSIXct", "POSIXt"
>     > ), tzone = "UTC"), e = structure(c(1590649200, 1590634800, 1590620400,
>     > 1590606000, 1590591600, 1590577200), class = c("POSIXct", "POSIXt"
>     > ), tzone = "UTC"), f = structure(c(1590649200, 1590634800, 1590620400,
>     > 1590606000, 1590591600, 1590577200), class = c("POSIXct", "POSIXt"
>     > ), tzone = "UTC"), g = c("BAROTOV?", "KR?TK?", "KR?TK?", "HOLASOV?",
>     > "HOLASOV?", "BAROTOV?"), h = c(239.4, 221, 190.3, 215.7, 241.4,
>     > 214.8), i = c(48.7, 55.6, 52.9, 50.1, 46.6, 54.4), j = c(94.2,
>     > 93, 92.4, 94.2, 96.3, 94.4), k = c(0.8, 1, 1, 0.8, 0.7, 0.8)), row.names =
>     > c(NA,
>     > 6L), class = "data.frame")
> 
>     > PLOT WORKS in R 400 but not in R 363??????
> 
>     > plot(mok)
> 
>     > Why it works in R400??? How should I explain it?
> 
> (it's  "R 4.0.0" , here spaces are relevant I think)
> 
> Well, new versions of R  are always better than previous ones (even though,
> yes, rarely sometimes bugs are introduced).
> 
> and you have heard that  R 4.0.0  came with *many* new features, right ?
> 
> In this case the long NEW FEATURES section in the NEWS | NEWS.pdf |
> NEWS.html files contained the entry
> 
>     ? data.matrix() now converts character columns to factors and from
>       this to integers.
> 
> and this contains the answer to your question, as
> 
>   plot(mok)  |->  plot.data.frame(mok)  |->  pairs(data.matrix(mok))
> 
> and  data.matrix(mok) in R 3.6.3 gives 4 warnings and ends in a character
> matrix.
> 
> --
> 
> And yes, the above new feature was related and made particularly sense with
> the important user-visible  stringsAsFactors  change in R 4.0.0; see also the
> corresponding R blog (by Kurt Hornik) :
> 
>   https://developer.r-project.org/Blog/public/2020/02/16/stringsasfactors/
> 
> 
> Martin Maechler
> R Core team  and  ETH Zurich

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Jul  1 14:31:19 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 1 Jul 2020 14:31:19 +0200
Subject: [R] argument "x" is missing in minpack.lm
In-Reply-To: <20200630164100.3366d68b@Tarkus>
References: <CAMk+s2SZUAoF1tmQh_O6fx504VqM53DEHJAY0fsFCiHXBqAWJA@mail.gmail.com>
 <CAM_vjumpYbPoCDqC8pnJCksGPrq-SbMKLur6ZPGYY7nt=iLRMQ@mail.gmail.com>
 <CAMk+s2TnZzoWDBDE0aT3W=NrJf=0waHhSG_ATtjeZ9BKiXqw=Q@mail.gmail.com>
 <20200630150441.05528386@Tarkus>
 <CAMk+s2S_X2WkX9-Qm_39x5Gh44Vz1+uAWDJCPX9UV_Mq26-y5A@mail.gmail.com>
 <20200630164100.3366d68b@Tarkus>
Message-ID: <CAMk+s2So-pOVSY0EHLqpfUgqKxnmDVcW1acgMXmR-LwsgBhLhg@mail.gmail.com>

Thank you,
I got this:
```
holly = function(p, x) {
  y = (p$a * x^2) / (p$b^2 + x^2)
  return(y)
}
A = 3261
B = 10
K = CH$Cum_Dead[1:60]
X = c(8,   24,   39,   63,   89,  115,  153,  196,  242,  287,  344,  408,  473,
      546,  619,  705,  794,  891,  999, 1096, 1242, 1363, 1506, 1648, 1753,
      1851, 1987, 2101, 2219, 2328, 2425, 2575, 2646, 2698, 2727, 2771, 2818,
      2853, 2895, 2926, 2964, 2995, 3025, 3053, 3080, 3102, 3119, 3141, 3152,
      3159, 3172, 3182, 3196, 3209, 3220, 3231, 3239, 3246, 3252, 3261)
O <- nls.lm(par = list(a = A, b = B), fn = holly, x = X)
> summary(O)

Parameters:
   Estimate Std. Error   t value Pr(>|t|)
a 3.090e-16  4.102e-17 7.533e+00 3.72e-10 ***
b 1.000e+01  1.525e-08 6.558e+08  < 2e-16 ***
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

Residual standard error: 3.107e-16 on 58 degrees of freedom
Number of iterations to termination: 2
Reason for termination: Relative error between `par' and the solution
is at most `ptol'.
```
Is this correct?
if yes, then the case is closed, thank you.
However, the optimization is worse the the eyeball estimate:
```
Addendum:
  the optimization actually got a worse outcome than the original
eyeball estimation:
  ```
actual <- c(8,   24,   39,   63,   89,  115,  153,  196,  242,  287,
            344,  408,  473,
            546,  619,  705,  794,  891,  999, 1096, 1242, 1363,
            1506, 1648, 1753,
            1851, 1987, 2101, 2219, 2328, 2425, 2575, 2646,
            2698, 2727, 2771, 2818,
            2853, 2895, 2926, 2964, 2995, 3025, 3053, 3080,
            3102, 3119, 3141, 3152,
            3159, 3172, 3182, 3196, 3209, 3220, 3231, 3239,
            3246, 3252, 3261)
# a = 3261, b = 10
raw_estim <- c(32.28713,  125.42308,  269.25688,  449.79310,  652.20000,
               863.20588, 1072.40940, 1272.58537,
               1459.34254, 1630.50000, 1785.43439, 1924.52459, 2048.73234,
               2159.31081, 2257.61538, 2344.98876,
               2422.69666, 2491.89623, 2553.62473, 2608.80000, 2658.22736,
               2702.60959, 2742.55803, 2778.60355,
               2811.20690, 2840.76804, 2867.63450, 2892.10860, 2914.45377,
               2934.90000, 2953.64844, 2970.87544,
               2986.73591, 3001.36624, 3014.88679, 3027.40401, 3039.01225,
               3049.79534, 3059.82788, 3069.17647,
               3077.90062, 3086.05365, 3093.68343, 3100.83301, 3107.54118,
               3113.84296, 3119.77003, 3125.35108,
               3130.61216, 3135.57692, 3140.26694, 3144.70185, 3148.89962,
               3152.87666, 3156.64800, 3160.22744,
               3163.62765, 3166.86028, 3169.93605, 3172.86486)
# a = 3.090e-16, b = 1.000e+01
opt_estim <- c(3.059406e-18, 1.188462e-17, 2.551376e-17, 4.262069e-17,
6.180000e-17,
               8.179412e-17, 1.016174e-16,
1.205854e-16, 1.382818e-16, 1.545000e-16, 1.691810e-16, 1.823607e-16,
1.941301e-16, 2.046081e-16,
2.139231e-16, 2.222022e-16, 2.295656e-16, 2.361226e-16, 2.419718e-16,
2.472000e-16, 2.518835e-16,
2.560890e-16, 2.598744e-16, 2.632899e-16, 2.663793e-16, 2.691804e-16,
2.717262e-16, 2.740452e-16,
2.761626e-16, 2.781000e-16, 2.798765e-16, 2.815089e-16, 2.830118e-16,
2.843981e-16, 2.856792e-16,
2.868653e-16, 2.879653e-16, 2.889870e-16, 2.899377e-16, 2.908235e-16,
2.916502e-16, 2.924227e-16,
2.931457e-16, 2.938232e-16, 2.944588e-16, 2.950560e-16, 2.956176e-16,
2.961464e-16, 2.966449e-16,
2.971154e-16, 2.975598e-16, 2.979800e-16, 2.983778e-16, 2.987546e-16,
2.991120e-16, 2.994512e-16,
2.997734e-16, 3.000797e-16, 3.003711e-16, 3.006486e-16)
plot(1:60, actual, lty = 1 , type = "l", lwd = 2,
     xlab = "Index", ylab = "Values")
points(1:60, raw_estim, lty = 2, type = "l")
points(1:60, opt_estim, lty = 3, type = "l")
legend("right",
       legend = c("Actual values", "Raw estimate", "Optimized values"),
       lty = c(1, 2, 3), lwd = c(2, 1,1))
```
Is that normal?


On Tue, Jun 30, 2020 at 3:41 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> (Adding R-help back to Cc:)
>
> On Tue, 30 Jun 2020 14:44:29 +0200
> Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> > Ok, I tried with:
> > ```
> > holly <- function(p) {
> >   y = (p$a * p$x^2) / (p$b^2 + p$x^2)
> >   return(y)
> > }
> > X = 1:60
> > A = 3261
> > B = 10
>
> > X = c(8,   24,   39,   63,   89,  115,  153,  196,  242,  287,  344,
> > 408,  473, 546,  619,  705,  794,  891,  999, 1096, 1242, 1363, 1506,
> > 1648, 1753, 1851, 1987, 2101, 2219, 2328, 2425, 2575, 2646, 2698,
> > 2727, 2771, 2818, 2853, 2895, 2926, 2964, 2995, 3025, 3053, 3080,
> > 3102, 3119, 3141, 3152, 3159, 3172, 3182, 3196, 3209, 3220, 3231,
> > 3239, 3246, 3252, 3261)
>
> You are correct in returning a vector of residuals to minimise a sum of
> squares of, but X seems to be an independent variable, not a parameter
> to optimize, so it shouldn't be passed as such. Instead you can either
> close over X:
>
> X <- c(...)
> holly <- function(p) (p$a * X^2) / (p:b^2 + X^2)
> # function holly now "contains" the vector X
>
> or pass X as an argument that nls.lm will pass to your function:
>
> holly <- function(p, X) (p$a * X^2) / (p$b^2 + X^2)
> # nls.lm will pass the X argument to function holly
> O <- nls.lm(par = list(a = 3261, b = 10), fn = holly, X = X)
> summary(O)
> # Parameters:
> #    Estimate Std. Error   t value Pr(>|t|)
> # a 3.090e-16  4.102e-17 7.533e+00 3.72e-10 ***
> # b 1.000e+01  1.525e-08 6.558e+08  < 2e-16 ***
> # ---
> # Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1
> #
> # Residual standard error: 3.107e-16 on 58 degrees of freedom
> # Number of iterations to termination: 2
> # Reason for termination: Relative error between `par' and the solution
> # is at most `ptol'.
>
> --
> Best regards,
> Ivan



--
Best regards,
Luigi


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jul  1 15:15:10 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 1 Jul 2020 16:15:10 +0300
Subject: [R] argument "x" is missing in minpack.lm
In-Reply-To: <CAMk+s2So-pOVSY0EHLqpfUgqKxnmDVcW1acgMXmR-LwsgBhLhg@mail.gmail.com>
References: <CAMk+s2SZUAoF1tmQh_O6fx504VqM53DEHJAY0fsFCiHXBqAWJA@mail.gmail.com>
 <CAM_vjumpYbPoCDqC8pnJCksGPrq-SbMKLur6ZPGYY7nt=iLRMQ@mail.gmail.com>
 <CAMk+s2TnZzoWDBDE0aT3W=NrJf=0waHhSG_ATtjeZ9BKiXqw=Q@mail.gmail.com>
 <20200630150441.05528386@Tarkus>
 <CAMk+s2S_X2WkX9-Qm_39x5Gh44Vz1+uAWDJCPX9UV_Mq26-y5A@mail.gmail.com>
 <20200630164100.3366d68b@Tarkus>
 <CAMk+s2So-pOVSY0EHLqpfUgqKxnmDVcW1acgMXmR-LwsgBhLhg@mail.gmail.com>
Message-ID: <20200701161510.2ff6ccf6@trisector>

On Wed, 1 Jul 2020 14:31:19 +0200
Luigi Marongiu <marongiu.luigi at gmail.com> wrote:

>  the optimization actually got a worse outcome than the original
>eyeball estimation

Could you elaborate on the function you are trying to fit to your data?
nls.lm takes a function returning a vector of residuals, that is,

fn <- function(parameters, input, actual.output) {
 calculate.output(parameters, input) - actual.output
}

...which means that you need a vector of input values and a vector of
output values of the same length. In your example,

> y = (p$a * x^2) / (p$b^2 + x^2)

a and b are parameters. x seems to be the dependent variable (i.e.
output of the process) and not the independent variable (i.e. input of
the model function) like I had initially assumed. What is the input of
your model function?

-- 
Best regards,
Ivan


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Wed Jul  1 15:18:12 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Wed, 1 Jul 2020 15:18:12 +0200
Subject: [R] argument "x" is missing in minpack.lm
In-Reply-To: <a643ad2f5d5b4ec5bb4c0ded775f36ea@GBDCVPEXC08.corp.lgc-group.com>
References: <CAMk+s2SZUAoF1tmQh_O6fx504VqM53DEHJAY0fsFCiHXBqAWJA@mail.gmail.com>
 <CAM_vjumpYbPoCDqC8pnJCksGPrq-SbMKLur6ZPGYY7nt=iLRMQ@mail.gmail.com>
 <CAMk+s2TnZzoWDBDE0aT3W=NrJf=0waHhSG_ATtjeZ9BKiXqw=Q@mail.gmail.com>
 <20200630150441.05528386@Tarkus>
 <CAMk+s2S_X2WkX9-Qm_39x5Gh44Vz1+uAWDJCPX9UV_Mq26-y5A@mail.gmail.com>
 <20200630164100.3366d68b@Tarkus>
 <a643ad2f5d5b4ec5bb4c0ded775f36ea@GBDCVPEXC08.corp.lgc-group.com>
Message-ID: <CAMk+s2T7BXpxCxO=ix62rtD3k2ju43j6BxS7hBbjM2c5i0Pf9Q@mail.gmail.com>

Addendum.
I have found the function Gompertz even better than the Holling III
because it gives more pronounced S profile. However the optimization
is bad even in this case:
```
gomp = function(p, x) {
  y = p$a * exp(-p$b * exp(-p$c * x))
  return(y)
}
A = 3261
B = 10
C = 1
X = c(8,   24,   39,   63,   89,  115,  153,  196,  242,  287,  344,  408,  473,
      546,  619,  705,  794,  891,  999, 1096, 1242, 1363, 1506, 1648, 1753,
      1851, 1987, 2101, 2219, 2328, 2425, 2575, 2646, 2698, 2727, 2771, 2818,
      2853, 2895, 2926, 2964, 2995, 3025, 3053, 3080, 3102, 3119, 3141, 3152,
      3159, 3172, 3182, 3196, 3209, 3220, 3231, 3239, 3246, 3252, 3261)
W = nls.lm(par = list(a = A, b = B, c = C), fn = gomp, x = X)
W
> Nonlinear regression via the Levenberg-Marquardt algorithm
parameter estimates: 2.81739569520133e-17, 20.0000002056654, 0.100000000717244
residual sum-of-squares: 4.556e-32
reason terminated: Relative error between `par' and the solution is at
most `ptol'.
summary(W)

> Parameters:
   Estimate Std. Error   t value Pr(>|t|)
a 2.817e-17  3.764e-18 7.485e+00 4.94e-10 ***
b 2.000e+01  1.872e-08 1.068e+09  < 2e-16 ***
c 1.000e-01  2.924e-11 3.420e+09  < 2e-16 ***
---
Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1

Residual standard error: 2.827e-17 on 57 degrees of freedom
Number of iterations to termination: 2
Reason for termination: Relative error between `par' and the solution
is at most `ptol'.
```
but eyeballing gives:
```
actual <- c(8,   24,   39,   63,   89,  115,  153,  196,  242,  287,
            344,  408,  473,
            546,  619,  705,  794,  891,  999, 1096, 1242, 1363,
            1506, 1648, 1753,
            1851, 1987, 2101, 2219, 2328, 2425, 2575, 2646,
            2698, 2727, 2771, 2818,
            2853, 2895, 2926, 2964, 2995, 3025, 3053, 3080,
            3102, 3119, 3141, 3152,
            3159, 3172, 3182, 3196, 3209, 3220, 3231, 3239,
            3246, 3252, 3261)
# a = 3261, b = 20, c = 0.1
GOMP = c(4.508508e-05, 2.523166e-04, 1.198631e-03, 4.909360e-03, 1.758298e-02,
         5.577422e-02, 1.585133e-01,
         4.078768e-01, 9.592495e-01, 2.079652e+00, 4.188604e+00,
7.892437e+00, 1.400134e+01, 2.351997e+01,
         3.760684e+01, 5.750425e+01, 8.444654e+01, 1.195592e+02,
1.637624e+02, 2.176925e+02, 2.816487e+02,
         3.555714e+02, 4.390496e+02, 5.313549e+02, 6.314945e+02,
7.382759e+02, 8.503763e+02, 9.664098e+02,
         1.084989e+03, 1.204775e+03, 1.324520e+03, 1.443095e+03,
1.559508e+03, 1.672916e+03, 1.782624e+03,
         1.888078e+03, 1.988863e+03, 2.084686e+03, 2.175363e+03,
2.260805e+03, 2.341005e+03, 2.416022e+03,
         2.485969e+03, 2.551004e+03, 2.611315e+03, 2.667115e+03,
2.718631e+03, 2.766102e+03, 2.809769e+03,
         2.849874e+03, 2.886657e+03, 2.920347e+03, 2.951171e+03,
2.979341e+03, 3.005063e+03, 3.028528e+03,
         3.049918e+03, 3.069402e+03, 3.087140e+03, 3.103278e+03)
# a = 2.817e-17, b = 2.000e+01, c = 1.000e-01
GP = c(3.894654e-25, 2.179626e-24, 1.035432e-23, 4.240928e-23, 1.518898e-22,
         4.818030e-22, 1.369310e-21,
         3.523425e-21, 8.286434e-21, 1.796498e-20, 3.618306e-20,
6.817846e-20, 1.209500e-19, 2.031762e-19,
         3.248650e-19, 4.967478e-19, 7.294876e-19, 1.032806e-18,
1.414654e-18, 1.880527e-18, 2.433010e-18,
         3.071587e-18, 3.792710e-18, 4.590085e-18, 5.455136e-18,
6.377563e-18, 7.345937e-18, 8.348287e-18,
         9.372625e-18, 1.040739e-17, 1.144180e-17, 1.246611e-17,
1.347174e-17, 1.445141e-17, 1.539911e-17,
         1.631008e-17, 1.718071e-17, 1.800847e-17, 1.879178e-17,
1.952986e-17, 2.022267e-17, 2.087070e-17,
         2.147493e-17, 2.203673e-17, 2.255773e-17, 2.303975e-17,
2.348477e-17, 2.389484e-17, 2.427206e-17,
         2.461851e-17, 2.493625e-17, 2.522729e-17, 2.549356e-17,
2.573691e-17, 2.595910e-17, 2.616180e-17,
         2.634657e-17, 2.651489e-17, 2.666812e-17, 2.680752e-17)
plot(1:60, actual, lty = 1 , type = "l", lwd = 2,
     xlab = "Index", ylab = "Values")
points(1:60, GOMP, lty = 2, type = "l")
points(1:60, GP, lty = 3, type = "l")
legend("right",
       legend = c("Actual values", "Raw estimate", "Optimized values"),
       lty = c(1, 2, 3), lwd = c(2, 1,1))
```

On Tue, Jun 30, 2020 at 9:59 PM Stephen Ellison <S.Ellison at lgcgroup.com> wrote:
>
> Ivan Krylov [krylov.r00t at gmail.com] said:
> >  Instead you can either close over X:
> >
> > X <- c(...)
> > holly <- function(p) (p$a * X^2) / (p:b^2 + X^2)
> > # function holly now "contains" the vector X
>
> That would not be an accurate statement as written.
> The function only contains an unevaluated call referencing X; not the vector X.
> If X is not defined inside the function or its arguments, scoping rules take over and R goes looking in the function's environment, using the first thing called "X" that it finds.
>
> So
> X<-1:5
> h <- function(p=2) p*X
> h()
> # works, but
> X <- pi
> h()
> # Not the same answer. If the function 'contained' the vector, the result would be 2*(1:5) as above.
> # This is why it's not wise to rely on scoping rules in functions, unless you _completely_ control the environment.
>
> # and
> rm(X)
> h()
> # returns an error because X is no longer defined, in the function or out of it, even though X was defined at the time h() was defined.
>
> BUT
>
> X <- pi/2
> fh <- function(p=2) {
>         X <- 7
>         h(p)
> }
> fh()
> # returns pi and not 14 because h() was bound to the global environment on creation and still is when R finds it on evaluating h() in the fh() function body.
>
> Moral: if you want to be safe, pass it as an argument.
>
>
> *******************************************************************
> This email and any attachments are confidential. Any u...{{dropped:14}}


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jul  1 15:42:46 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 1 Jul 2020 16:42:46 +0300
Subject: [R] argument "x" is missing in minpack.lm
In-Reply-To: <CAMk+s2R6F3E-Ssxry_n7OBi_Xp2Gzj2tM-sXLA_Zgc6y-9=O-Q@mail.gmail.com>
References: <CAMk+s2SZUAoF1tmQh_O6fx504VqM53DEHJAY0fsFCiHXBqAWJA@mail.gmail.com>
 <CAM_vjumpYbPoCDqC8pnJCksGPrq-SbMKLur6ZPGYY7nt=iLRMQ@mail.gmail.com>
 <CAMk+s2TnZzoWDBDE0aT3W=NrJf=0waHhSG_ATtjeZ9BKiXqw=Q@mail.gmail.com>
 <20200630150441.05528386@Tarkus>
 <CAMk+s2S_X2WkX9-Qm_39x5Gh44Vz1+uAWDJCPX9UV_Mq26-y5A@mail.gmail.com>
 <20200630164100.3366d68b@Tarkus>
 <CAMk+s2So-pOVSY0EHLqpfUgqKxnmDVcW1acgMXmR-LwsgBhLhg@mail.gmail.com>
 <20200701161510.2ff6ccf6@trisector>
 <CAMk+s2R6F3E-Ssxry_n7OBi_Xp2Gzj2tM-sXLA_Zgc6y-9=O-Q@mail.gmail.com>
Message-ID: <20200701164246.4dcd26f7@trisector>

On Wed, 1 Jul 2020 15:24:35 +0200
Luigi Marongiu <marongiu.luigi at gmail.com> wrote:

>You are right: The vector X is actually Y -- the response I would like
>to fit the curve upon. I understood I should fit nls.lm with a
>function that describes the data (Holling or Gomperz), initial
>parameters, and the actual values (Y). In return, I get the optimized
>values for the parameters. But when I re-run the function that
>describes the data with the optimized parameters, I get values close
>to zero.

The function to be minimized should have access to all three: the
parameters to optimize, the independent and dependent variable values.
Only then there is enough information to compute residuals and minimise
their sum of squares.

holly <- function(p, x, y) (p$a * x^2) / (p$b^2 + x^2) - y
#               residuals =      y.hat(x, params)      - y.actual
O <- nls.lm(par = list(a = 3261, b = 10), fn = holly, x = X, y = Y)
summary(O)
# Parameters:
#    Estimate Std. Error t value Pr(>|t|)
# a 4380.4979   106.8144   41.01   <2e-16 ***
# b   30.3779     0.9995   30.39   <2e-16 ***
# ---
# Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1
# 
# Residual standard error: 157.5 on 58 degrees of freedom
# Number of iterations to termination: 7
# Reason for termination: Relative error in the sum of squares is at
# most `ftol'.

In our previous examples we ended up asking R to minimise y.hat(x)
calculated at wrong x values instead of minimising residuals.

-- 
Best regards,
Ivan


From d@cty|orh|z@ @end|ng |rom gm@||@com  Wed Jul  1 16:58:04 2020
From: d@cty|orh|z@ @end|ng |rom gm@||@com (Alexey Shipunov)
Date: Wed, 1 Jul 2020 23:58:04 +0900
Subject: [R] Unintended behaviour (possibly bugs)
In-Reply-To: <CAD-ePxZtLg-fhgeNMQSKhLfzXt-ZC4_V8N--rh-OV9XZ-2B3CA@mail.gmail.com>
References: <CAD-ePxY3WOumNjaED5OwHtGWnzGecom+5MLGNgeEWS4sbBxGiw@mail.gmail.com>
 <bd143039-d302-fee9-7350-ec01a61c17e1@sapo.pt>
 <CAD-ePxZ-MytqqfQUiEE9+4e_T8kyfj4kiYcRTj4GsYcupGLj8A@mail.gmail.com>
 <cd83233c-5794-d741-cf9d-32d4435cf590@sapo.pt>
 <CADfFDC6HGT0X0d5xnrCfRKybp9SRehU10c3C5hGAm0USNtndWQ@mail.gmail.com>
 <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
 <24170.28233.24528.535254@stat.math.ethz.ch>
 <CAD-ePxZtLg-fhgeNMQSKhLfzXt-ZC4_V8N--rh-OV9XZ-2B3CA@mail.gmail.com>
Message-ID: <CAD-ePxb1YhEqM_Xss_tXG4L4zq5RmPyRh0yBp25Q0tvb2DqYSA@mail.gmail.com>

Dear colleagues,

There is a new problem with dotchart(), and it is very simple to reproduce.

Just run example(dotchart).

On R versions < 4, group labels ("Urban Female" and so on) were
visible. Now they are not visible.

If in the dotchart() code, we replace the string

===

goffset <- (max(linch + offset, ginch, na.rm = TRUE) + 1/16)/lheight

===

with the string

===

goffset <- (max(linch + 0.2, ginch, na.rm = TRUE) + 1/16)/lheight

===

everything start to be OK. Probably, the reason that in the code,
there is another "offset" object and they clash. So if we replace this
part of code

===

offset <- cumsum(c(0, diff(as.numeric(groups)) != 0))
y <- seq_len(n) + 2 * offset

===

with

===

offset1 <- cumsum(c(0, diff(as.numeric(groups)) != 0))
y <- seq_len(n) + 2 * offset1

===

everything will be well again.

With best wishes,

Alexey Shipunov

??, 13 ???. 2020 ?. ? 18:56, Alexey Shipunov <dactylorhiza at gmail.com>:
>
> Dear Martin,
>
> Great news, thanks!
>
> If you wish, please also consider my initial note about help(hist),
> this is definitely worrying new R users.
>
> With best wishes,
>
> Alexey
>
> ??, 13 ???. 2020 ?. ? 02:16, Martin Maechler <maechler at stat.math.ethz.ch>:
> >
> > >>>>> Alexey Shipunov
> > >>>>>     on Tue, 18 Feb 2020 14:34:48 +0900 writes:
> >
> >     > Thank you for the detailed explanation. I tend to agree. However, this
> >     > behavior is relatively easy to remediate:
> >
> >     > This is the piece of the current code:
> >
> >     > ===
> >     > if (!(is.null(labels) && is.null(glabels))) {
> >     >    nmai <- par("mai")
> >     >    nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) + 0.1
> >     >    par(mai = nmai)
> >     > }
> >     > ===
> >
> >     > This is my proposal:
> >
> >     > ===
> >     > yinch <- if (!is.null(ylab)) 0.4 else 0
> >     > if (!(is.null(labels) && is.null(glabels))) {
> >     >    nmai <- par("mai")
> >     >    nm.2 <- nmai[4L] + max(if(is.null(ylab)) 0 else 0.4) + linch + goffset, ginch) + 0.1
> >     >    if (nmai[2L] < nm.2)
> >     >       nmai[2L] <- nm.2
> >     >    par(mai = nmai)
> >     > }
> >     > ===
> >
> >     > Then margins and y-axis labels start to work normally. I wonder if
> >     > this (or similar) is possible to introduce into the code?
> >
> >     > Alexey
> >
> > Well, I had looked at this back then (~Feb 18), and now had a
> > considerable longer look.
> >
> > Your suggestion makes sense,  but then it needs even more work
> > to ensure that the  'ylab'  y-axis label will be placed properly.
> >
> > Of course, Deepayan (author of grid-based 'lattice')  is right
> > that dotchart()s implementation is pretty hackish ... but then
> > still.
> >
> > I have (+-) fixed this in the sources of "R-devel" the
> > development version of R (which should become R 4.0.0  on April
> > 24 as was announced today).
> >
> > Now, things like this (extended) example work nicely :
> >
> > op <- par(xaxs = "i")  # 0 -- 100\%
> > dotchart(t(VADeaths), xlim = c(0,100), bg = "skyblue",
> >          main = "Death Rates in Virginia - 1940", xlab = "rate [ % ]",
> >          ylab = "Grouping:  Age  x   Urbanity . Gender")
> > par(op)
> >
> >
> > Thank you, Alexey, for your report and bug fix suggestion!
> >
> > Best regards,
> >
> > Martin Maechler
> > ETH Zurich and R Core team
> >
> >
> >
> >     > ........... 17:37, Deepayan Sarkar <deepayan.sarkar at gmail.com>:
> >     >>
> >     >> On Mon, Feb 17, 2020 at 10:24 AM Rui Barradas <ruipbarradas at sapo.pt> wrot=
> >     > e:
> >     >> >
> >     >> > Hello,
> >     >> >
> >     >> > Yes, this is definitely a bug.
> >     >>
> >     >> I would argue that the only bug here is that the documentation doesn't
> >     >> say that 'ylab' may not behave as expected.
> >     >>
> >     >> dotchart() is mainly designed for 2-way tables (see the VADeaths
> >     >> example), but it's implementation is really pretty hackish because it
> >     >> has to work within the limited traditional graphics framework. The
> >     >> main problem is that dot plots want to put horizontal y-axis labels
> >     >> (usually derived from factor levels), which are often longer than the
> >     >> default margins, so the margins are modified. Unfortunately they are
> >     >> only re-set on exit, and so the ylab that is plotted inside dotchart()
> >     >> may be clipped. Traditionally, Cleveland dot plots don't have a y-axis
> >     >> label; it's assumed that the factor levels are sufficient (and for
> >     >> 2-way tables, there would be two variables, so there is no sensible
> >     >> default).
> >     >>
> >     >> I doubt that dotchart() is worth fixing (except to maybe disallow
> >     >> ylab). If you want flexibility, use modern grid-based alternatives
> >     >> such as lattice::dotplot() or ggplot2.
> >     >>
> >     >> -Deepayan
> >     >>
> >     >> > Even the matrix plot is puzzling, with a "1" as top row sort-of-label
> >     >> > but no grid line. I'm trying to follow the source code of dotchart but
> >     >> > am yet to understand exactly what it does to decide the margins setting=
> >     > s.
> >     >> >
> >     >> >      if (!(is.null(labels) && is.null(glabels))) {
> >     >> >        nmai <- par("mai")
> >     >> >        nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) +
> >     >> >          0.1
> >     >> >        par(mai = nmai)
> >     >> >      }
> >     >> >
> >     >> > This should be moved to r-devel?
> >     >> >
> >     >> > Rui Barradas
> >     >> >
> >     >> >  03:33 de 17/02/20, Alexey Shipunov escreveu:
> >     >> > > John and Rui, thanks!
> >     >> > >
> >     >> > > However, if we use the proper object, the problem still persists:
> >     >> > >
> >     >> > > dotchart(c("3"=1, "2"=2, "1"=3), ylab="Ylab") # ylab is invisible
> >     >> > > dotchart(c("aa"=1, "b"=2, "cc"=3), ylab="Ylab") # ylab is partly visible (!!!)
> >     >> > > dotchart(c("aaa"=1, "bbb"=2, "ccc"=3), ylab="Ylab") # ylab is well visible
> >     >> > >
> >     >> > > If the object is matrix, ylab is visible:
> >     >> > >
> >     >> > > dotchart(matrix(1:3, dimnames=list(c("aa","bb","cc"), NULL)), ylab="Ylab")
> >     >> > >
> >     >> > > But the ?dotchart explicitly says that "x: either a vector or matrix
> >     >> > > of numeric values" and then "labels: a vector of labels for each
> >     >> > > point.  For vectors the default is to use  "names(x) = ...".
> >     >> > >
> >     >> > > So this is likely a bug. Do you agree?
> >     >> > >
> >     >> > > Alexey
> >     >> > >
> >     >> > > ..... 01:55, Rui Barradas <ruipbarradas at sapo.pt>:
> >     >> > >>
> >     >> > >> Hello,
> >     >> > >>
> >     >> > >> I believe you are wrong, the error is not in dotchart, it's in your
> >     >> > >> code. You assume that to plot an object of class "table" is the same as
> >     >> > >> to plot an object of class "numeric".
> >     >> > >>
> >     >> > >> Inline.
> >     >> > >>
> >     >> > >> =C3=80s 12:21 de 16/02/20, Alexey Shipunov escreveu:
> >     >> > >>> Dear list,
> >     >> > >>>
> >     >> > >>> I have been advised to share these with R-help instead of filling the
> >     >> > >>> bug report:
> >     >> > >>>
> >     >> > >>> 1) dotchart() does not allow to see the left axis title ('ylab') and
> >     >> > >>> cannot change the left margin (outer margin 2) of the plot
> >     >> > >>>
> >     >> > >>> The code:
> >     >> > >>>
> >     >> > >>> aa <- table(c(1, 1, 1, 2, 2, 3))
> >     >> > >>> dotchart(aa, ylab="Ylab") # does not show 'ylab'
> >     >> > >>
> >     >> > >> You are right, it does *not* show 'ylab' but the user is warned.
> >     >> > >>
> >     >> > >>
> >     >> > >> aa <- table(c(1, 1, 1, 2, 2, 3))
> >     >> > >> dotchart(aa, ylab = "Ylab") # does show 'ylab'
> >     >> > >> #Warning message:
> >     >> > >> #In dotchart(aa, ylab = "Ylab") :
> >     >> > >> #  'x' is neither a vector nor a matrix: using as.numeric(x)
> >     >> > >>
> >     >> > >>
> >     >> > >> My code:
> >     >> > >>
> >     >> > >>
> >     >> > >> (mar <- par("mar"))    # new R session
> >     >> > >> #[1] 5.1 4.1 4.1 2.1   # the left margin is 4.1
> >     >> > >>
> >     >> > >> aa <- as.numeric(table(c(1, 1, 1, 2, 2, 3)))
> >     >> > >>
> >     >> > >> dotchart(aa, ylab = "Ylab") # It does show 'ylab'
> >     >> > >> old.par <- par(mar = mar + c(0, 5, 0, 0))
> >     >> > >> par("mar")
> >     >> > >> #[1] 5.1 9.1 4.1 2.1
> >     >> > >>
> >     >> > >> dotchart(aa, ylab = "Ylab")  # The left margin is now 9.1, much bigger
> >     >> > >>
> >     >> > >> par(old.par)                 # It does change the left margin
> >     >> > >> dotchart(aa, ylab = "Ylab")  #  but only when a new graph is plotted.
> >     >> > >>
> >     >> > >>
> >     >> > >>
> >     >> > >>> old.par <- par(mar=c(1, 10, 1, 1)) ; dotchart(aa, ylab="Ylab") ;
> >     >> > >>> par(old.par) # does not change left margin
> >     >> > >>>
> >     >> > >>> Possible solution:
> >     >> > >>>
> >     >> > >>> I researched the problem and think that the dotchart() code will need
> >     >> > >>> few corrections. If there is an interest, I can post it here; or you
> >     >> > >>> can look at the code of shipunov::Dotchart1() function.
> >     >> > >>>
> >     >> > >>> 2) example(hist) includes two "wrong" and "extreme" examples which
> >     >> > >>> slow down and even crash R on some systems; this make it unsuitable
> >     >> > >>> for demonstration in the class and strikes beginners in R who just
> >     >> > >>> want to understand how hist() works. Actually, I did it last week (I
> >     >> > >>> was not aware of these examples), and in the class two computers hang,
> >     >> > >>> and many others were extremely slow.
> >     >> > >>>
> >     >> > >>> The code:
> >     >> > >>>
> >     >> > >>> example(hist)
> >     >> > >>>
> >     >> > >>> Possible solution:
> >     >> > >>>
> >     >> > >>> If R maintainers will enclose parts of "hist" example in \dontrun{},
> >     >> > >>> this will allow to see the code but in the same time will not strike
> >     >> > >>> beginners in R who just
> >     >> > >>> want to understand how hist() works. They will still be possible to
> >     >> > >>> run with example(..., run.dontrun=TRUE).
> >     >> > >>
> >     >> > >> Agree, it's annoying. Sometimes there's a Warning section after the
> >     >> > >> Details section. Maybe such a section could get users' attention to
> >     >> > >> those examples? At least it wouldn't hurt...
> >     >> > >>
> >     >> > >>
> >     >> > >> Hope this helps,
> >     >> > >>
> >     >> > >> Rui Barradas
> >     >> > >>
> >     >> > >>>
> >     >> > >>> With best wishes,
> >     >> > >>>
> >     >> > >>> Alexey Shipunov
> >     >> > >>> ______________________________________________


From |re|ey@ @end|ng |rom gm@||@com  Wed Jul  1 17:27:32 2020
From: |re|ey@ @end|ng |rom gm@||@com (Frederik Feys)
Date: Wed, 1 Jul 2020 17:27:32 +0200
Subject: [R] how to summarize results from studies?
Message-ID: <102BF7BB-8E23-486A-ABC8-C2E6480CD37E@gmail.com>

Hello everyone

I have some studies with results from the same outcome scale. I want to merge them into 1 summarised estimated result and its standard deviation. How do I do that in R?

Thank you very much for your help!
Frederik

From m@rc_@chw@rtz @end|ng |rom me@com  Wed Jul  1 17:40:33 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Wed, 1 Jul 2020 11:40:33 -0400
Subject: [R] how to summarize results from studies?
In-Reply-To: <102BF7BB-8E23-486A-ABC8-C2E6480CD37E@gmail.com>
References: <102BF7BB-8E23-486A-ABC8-C2E6480CD37E@gmail.com>
Message-ID: <A3E6755A-8D4A-4227-B277-91B4841A8269@me.com>

Hi,

It sounds like you will want to engage in a meta-analysis.

There is a CRAN task view here:

  https://cran.r-project.org/web/views/MetaAnalysis.html

that would be relevant in pointing you to tools in R that can support that approach.

That being said, the details of specific methodologies and conceptual assistance would be beyond the scope of this list. You should consider consulting a local statistician for assistance with that, if needed.

Regards,

Marc Schwartz

> On Jul 1, 2020, at 11:27 AM, Frederik Feys <frefeys at gmail.com> wrote:
> 
> Hello everyone
> 
> I have some studies with results from the same outcome scale. I want to merge them into 1 summarised estimated result and its standard deviation. How do I do that in R?
> 
> Thank you very much for your help!
> Frederik


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jul  1 18:44:27 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 1 Jul 2020 11:44:27 -0500
Subject: [R] Creating and arranging multiply plots
References: <003201d64fc6$e2be9cb0$a83bd610$.ref@sbcglobal.net>
Message-ID: <003201d64fc6$e2be9cb0$a83bd610$@sbcglobal.net>

r-help forum

 
Need some guidance. I need to create 20 plots and then combine them into one
graphic. Normally this isn't a problem for me except this time I'm using the
holts function to perform a TS forecast. So I though I'd just write a
function which take the country name and then passes the name through the
function, then I'd take the name output and recombine the individual plots
into one. Well its not working like I though it would work. Any suggestions
of how I might tackle this quandary? The problem is I chose to make
individual plotly plots using the plot_forecast {TSstudio} function Here is
a sample dataset and code.

library(dplyr)
library(forecast)
library(ggplot2)
library(TSstudio)
library(xts)
library(zoo)

# data prep
sample_data <- read_excel("~/NGA Telework/USSOUTHCOM/Data/sample.xlsx")
sample_data$date <- as.Date(sample_data$date, format = c("%Y-%m-%d"))
sample_xts <- as.xts(samplef[ , -2], order.by = sample$date)
sample_zoo <- fortify(sample_xts)
sample_zoo$total_cases <- as.numeric(as.factor(sample_zoo$total_cases))

# plots function
plots <- function(i){
  cases <- filter(sample_data, location == i) %>% select(date, total_cases) 
  
  xts <- as.xts(cases[ , -1], order.by = cases$date)
  
  xts <- na.locf(xts)
  
  forecast <- holt(xts, damped = TRUE, h = 2, PI = 0.9)
  
  i <- plot_forecast(forecast,
                     title = i,
                     Xtitle = "Date",
                     Ytitle = "Cases")
  return(i)
}

# create individual plots
atg <- plots("Antigua and Barbuda")  # Antigua and Barbuda
arg <- plots("Argentina")            # Argentina
brb <- plots("Barbados")             # Barbados
blz <- plots("Belize")               # Belize

Sincerely

Jeff Reichman
(314) 457-1966


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jul  1 19:06:03 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 1 Jul 2020 10:06:03 -0700
Subject: [R] Creating and arranging multiply plots
In-Reply-To: <003201d64fc6$e2be9cb0$a83bd610$@sbcglobal.net>
References: <003201d64fc6$e2be9cb0$a83bd610$.ref@sbcglobal.net>
 <003201d64fc6$e2be9cb0$a83bd610$@sbcglobal.net>
Message-ID: <CAGxFJbSpEaHXUGmTNKvfyYN4Jv9R-5Ji+FejRHcBtteK-xYV3w@mail.gmail.com>

I think you need to read about "faceting" in ggplot. This may necessitate
modifying your data structure.

?layout may be an alternative approach.

See also
https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html
for a fuller exegesis.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jul 1, 2020 at 9:44 AM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> r-help forum
>
>
> Need some guidance. I need to create 20 plots and then combine them into
> one
> graphic. Normally this isn't a problem for me except this time I'm using
> the
> holts function to perform a TS forecast. So I though I'd just write a
> function which take the country name and then passes the name through the
> function, then I'd take the name output and recombine the individual plots
> into one. Well its not working like I though it would work. Any suggestions
> of how I might tackle this quandary? The problem is I chose to make
> individual plotly plots using the plot_forecast {TSstudio} function Here is
> a sample dataset and code.
>
> library(dplyr)
> library(forecast)
> library(ggplot2)
> library(TSstudio)
> library(xts)
> library(zoo)
>
> # data prep
> sample_data <- read_excel("~/NGA Telework/USSOUTHCOM/Data/sample.xlsx")
> sample_data$date <- as.Date(sample_data$date, format = c("%Y-%m-%d"))
> sample_xts <- as.xts(samplef[ , -2], order.by = sample$date)
> sample_zoo <- fortify(sample_xts)
> sample_zoo$total_cases <- as.numeric(as.factor(sample_zoo$total_cases))
>
> # plots function
> plots <- function(i){
>   cases <- filter(sample_data, location == i) %>% select(date,
> total_cases)
>
>   xts <- as.xts(cases[ , -1], order.by = cases$date)
>
>   xts <- na.locf(xts)
>
>   forecast <- holt(xts, damped = TRUE, h = 2, PI = 0.9)
>
>   i <- plot_forecast(forecast,
>                      title = i,
>                      Xtitle = "Date",
>                      Ytitle = "Cases")
>   return(i)
> }
>
> # create individual plots
> atg <- plots("Antigua and Barbuda")  # Antigua and Barbuda
> arg <- plots("Argentina")            # Argentina
> brb <- plots("Barbados")             # Barbados
> blz <- plots("Belize")               # Belize
>
> Sincerely
>
> Jeff Reichman
> (314) 457-1966
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Wed Jul  1 19:07:13 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Wed, 1 Jul 2020 18:07:13 +0100
Subject: [R] how to summarize results from studies?
In-Reply-To: <A3E6755A-8D4A-4227-B277-91B4841A8269@me.com>
References: <102BF7BB-8E23-486A-ABC8-C2E6480CD37E@gmail.com>
 <A3E6755A-8D4A-4227-B277-91B4841A8269@me.com>
Message-ID: <56bc447b-f30f-865d-5d57-587d0b550591@dewey.myzen.co.uk>

Dear Frederik

There is also a mailing list dedicated to meta-analysis in R

https://stat.ethz.ch/mailman/listinfo/r-sig-meta-analysis//

Michael


On 01/07/2020 16:40, Marc Schwartz via R-help wrote:
> Hi,
> 
> It sounds like you will want to engage in a meta-analysis.
> 
> There is a CRAN task view here:
> 
>    https://cran.r-project.org/web/views/MetaAnalysis.html
> 
> that would be relevant in pointing you to tools in R that can support that approach.
> 
> That being said, the details of specific methodologies and conceptual assistance would be beyond the scope of this list. You should consider consulting a local statistician for assistance with that, if needed.
> 
> Regards,
> 
> Marc Schwartz
> 
>> On Jul 1, 2020, at 11:27 AM, Frederik Feys <frefeys at gmail.com> wrote:
>>
>> Hello everyone
>>
>> I have some studies with results from the same outcome scale. I want to merge them into 1 summarised estimated result and its standard deviation. How do I do that in R?
>>
>> Thank you very much for your help!
>> Frederik
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From |re|ey@ @end|ng |rom gm@||@com  Wed Jul  1 19:16:35 2020
From: |re|ey@ @end|ng |rom gm@||@com (Frederik Feys)
Date: Wed, 1 Jul 2020 19:16:35 +0200
Subject: [R] how to summarize results from studies?
In-Reply-To: <A3E6755A-8D4A-4227-B277-91B4841A8269@me.com>
References: <102BF7BB-8E23-486A-ABC8-C2E6480CD37E@gmail.com>
 <A3E6755A-8D4A-4227-B277-91B4841A8269@me.com>
Message-ID: <BBF2930B-1AB9-42A4-9524-42BDF8D4C720@gmail.com>

Thank you Marc!

I ended up using metafor library:

res_UK <- escalc(mi=data_UK$GAD.7_mean, sdi=data_UK$weight_pred, ni=data_UK$GAD.7_mean_N, measure = "MN?)

rma(yi, vi, data=res_UK, method="REML?)



> Op 1 jul. 2020, om 17:40 heeft Marc Schwartz <marc_schwartz at me.com> het volgende geschreven:
> 
> Hi,
> 
> It sounds like you will want to engage in a meta-analysis.
> 
> There is a CRAN task view here:
> 
>  https://cran.r-project.org/web/views/MetaAnalysis.html
> 
> that would be relevant in pointing you to tools in R that can support that approach.
> 
> That being said, the details of specific methodologies and conceptual assistance would be beyond the scope of this list. You should consider consulting a local statistician for assistance with that, if needed.
> 
> Regards,
> 
> Marc Schwartz
> 
>> On Jul 1, 2020, at 11:27 AM, Frederik Feys <frefeys at gmail.com> wrote:
>> 
>> Hello everyone
>> 
>> I have some studies with results from the same outcome scale. I want to merge them into 1 summarised estimated result and its standard deviation. How do I do that in R?
>> 
>> Thank you very much for your help!
>> Frederik


From |re|ey@ @end|ng |rom gm@||@com  Wed Jul  1 19:17:37 2020
From: |re|ey@ @end|ng |rom gm@||@com (Frederik Feys)
Date: Wed, 1 Jul 2020 19:17:37 +0200
Subject: [R] how to summarize results from studies?
In-Reply-To: <56bc447b-f30f-865d-5d57-587d0b550591@dewey.myzen.co.uk>
References: <102BF7BB-8E23-486A-ABC8-C2E6480CD37E@gmail.com>
 <A3E6755A-8D4A-4227-B277-91B4841A8269@me.com>
 <56bc447b-f30f-865d-5d57-587d0b550591@dewey.myzen.co.uk>
Message-ID: <5B5D9406-DCDA-43A9-96C3-7D54871F0EFF@gmail.com>

Thank you Michael!

> Op 1 jul. 2020, om 19:07 heeft Michael Dewey <lists at dewey.myzen.co.uk> het volgende geschreven:
> 
> Dear Frederik
> 
> There is also a mailing list dedicated to meta-analysis in R
> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-meta-analysis//
> 
> Michael
> 
> 
> On 01/07/2020 16:40, Marc Schwartz via R-help wrote:
>> Hi,
>> It sounds like you will want to engage in a meta-analysis.
>> There is a CRAN task view here:
>>   https://cran.r-project.org/web/views/MetaAnalysis.html
>> that would be relevant in pointing you to tools in R that can support that approach.
>> That being said, the details of specific methodologies and conceptual assistance would be beyond the scope of this list. You should consider consulting a local statistician for assistance with that, if needed.
>> Regards,
>> Marc Schwartz
>>> On Jul 1, 2020, at 11:27 AM, Frederik Feys <frefeys at gmail.com> wrote:
>>> 
>>> Hello everyone
>>> 
>>> I have some studies with results from the same outcome scale. I want to merge them into 1 summarised estimated result and its standard deviation. How do I do that in R?
>>> 
>>> Thank you very much for your help!
>>> Frederik
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Michael
> http://www.dewey.myzen.co.uk/home.html


From m@rc_@chw@rtz @end|ng |rom me@com  Wed Jul  1 19:18:46 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Wed, 1 Jul 2020 13:18:46 -0400
Subject: [R] how to summarize results from studies?
In-Reply-To: <56bc447b-f30f-865d-5d57-587d0b550591@dewey.myzen.co.uk>
References: <102BF7BB-8E23-486A-ABC8-C2E6480CD37E@gmail.com>
 <A3E6755A-8D4A-4227-B277-91B4841A8269@me.com>
 <56bc447b-f30f-865d-5d57-587d0b550591@dewey.myzen.co.uk>
Message-ID: <01CEADD6-559E-4CE5-BC4D-3E440FE0C60E@me.com>

Michael,

Thanks for the reminder on that.

Frederik, sometimes, with an emphasis on sometimes, the r-sig-* lists are willing to go beyond narrow R programming assistance, and offer domain specific conceptual assistance, which would otherwise be off-topic for r-help.

You might look through the archives of that list to get a sense for the subject matter that has been covered there:

  https://stat.ethz.ch/pipermail/r-sig-meta-analysis/ <https://stat.ethz.ch/pipermail/r-sig-meta-analysis/>

I might also mention that a Google search using "meta analysis in R", comes up with a number of relevant hits, including various tutorials.

Regards,

Marc


> On Jul 1, 2020, at 1:07 PM, Michael Dewey <lists at dewey.myzen.co.uk> wrote:
> 
> Dear Frederik
> 
> There is also a mailing list dedicated to meta-analysis in R
> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-meta-analysis//
> 
> Michael
> 
> 
> On 01/07/2020 16:40, Marc Schwartz via R-help wrote:
>> Hi,
>> It sounds like you will want to engage in a meta-analysis.
>> There is a CRAN task view here:
>>   https://cran.r-project.org/web/views/MetaAnalysis.html
>> that would be relevant in pointing you to tools in R that can support that approach.
>> That being said, the details of specific methodologies and conceptual assistance would be beyond the scope of this list. You should consider consulting a local statistician for assistance with that, if needed.
>> Regards,
>> Marc Schwartz
>>> On Jul 1, 2020, at 11:27 AM, Frederik Feys <frefeys at gmail.com> wrote:
>>> 
>>> Hello everyone
>>> 
>>> I have some studies with results from the same outcome scale. I want to merge them into 1 summarised estimated result and its standard deviation. How do I do that in R?
>>> 
>>> Thank you very much for your help!
>>> Frederik
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Michael
> http://www.dewey.myzen.co.uk/home.html


	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Jul  2 01:18:00 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 2 Jul 2020 11:18:00 +1200
Subject: [R] [FORGED] Re:  Unintended behaviour (possibly bugs)
In-Reply-To: <CAD-ePxb1YhEqM_Xss_tXG4L4zq5RmPyRh0yBp25Q0tvb2DqYSA@mail.gmail.com>
References: <CAD-ePxY3WOumNjaED5OwHtGWnzGecom+5MLGNgeEWS4sbBxGiw@mail.gmail.com>
 <bd143039-d302-fee9-7350-ec01a61c17e1@sapo.pt>
 <CAD-ePxZ-MytqqfQUiEE9+4e_T8kyfj4kiYcRTj4GsYcupGLj8A@mail.gmail.com>
 <cd83233c-5794-d741-cf9d-32d4435cf590@sapo.pt>
 <CADfFDC6HGT0X0d5xnrCfRKybp9SRehU10c3C5hGAm0USNtndWQ@mail.gmail.com>
 <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
 <24170.28233.24528.535254@stat.math.ethz.ch>
 <CAD-ePxZtLg-fhgeNMQSKhLfzXt-ZC4_V8N--rh-OV9XZ-2B3CA@mail.gmail.com>
 <CAD-ePxb1YhEqM_Xss_tXG4L4zq5RmPyRh0yBp25Q0tvb2DqYSA@mail.gmail.com>
Message-ID: <6c107e7b-496f-0432-0847-16f8f2011c17@auckland.ac.nz>


On 2/07/20 2:58 am, Alexey Shipunov wrote:

> Dear colleagues,
> 
> There is a new problem with dotchart(), and it is very simple to reproduce.
> 
> Just run example(dotchart).
> 
> On R versions < 4, group labels ("Urban Female" and so on) were
> visible. Now they are not visible.

I just tried example(dotchart) and the results look fine to me.  In 
particular the group labels are definitely visible.  My session info 
follows.

>> sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.4 LTS
> 
> Matrix products: default
> BLAS:   /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3
> LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3
> 
> Random number generation:
>  RNG:     Mersenne-Twister 
>  Normal:  Inversion 
>  Sample:  Rounding 
>  
> locale:
>  [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
>  [3] LC_TIME=en_NZ.UTF-8        LC_COLLATE=en_GB.UTF-8    
>  [5] LC_MONETARY=en_NZ.UTF-8    LC_MESSAGES=en_GB.UTF-8   
>  [7] LC_PAPER=en_NZ.UTF-8       LC_NAME=C                 
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
> [11] LC_MEASUREMENT=en_NZ.UTF-8 LC_IDENTIFICATION=C       
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> other attached packages:
> [1] brev_0.0-4
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.0.2 tools_4.0.2   

<SNIP>

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From d@cty|orh|z@ @end|ng |rom gm@||@com  Thu Jul  2 01:24:04 2020
From: d@cty|orh|z@ @end|ng |rom gm@||@com (Alexey Shipunov)
Date: Thu, 2 Jul 2020 08:24:04 +0900
Subject: [R] [FORGED] Re:  Unintended behaviour (possibly bugs)
In-Reply-To: <6c107e7b-496f-0432-0847-16f8f2011c17@auckland.ac.nz>
References: <CAD-ePxY3WOumNjaED5OwHtGWnzGecom+5MLGNgeEWS4sbBxGiw@mail.gmail.com>
 <bd143039-d302-fee9-7350-ec01a61c17e1@sapo.pt>
 <CAD-ePxZ-MytqqfQUiEE9+4e_T8kyfj4kiYcRTj4GsYcupGLj8A@mail.gmail.com>
 <cd83233c-5794-d741-cf9d-32d4435cf590@sapo.pt>
 <CADfFDC6HGT0X0d5xnrCfRKybp9SRehU10c3C5hGAm0USNtndWQ@mail.gmail.com>
 <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
 <24170.28233.24528.535254@stat.math.ethz.ch>
 <CAD-ePxZtLg-fhgeNMQSKhLfzXt-ZC4_V8N--rh-OV9XZ-2B3CA@mail.gmail.com>
 <CAD-ePxb1YhEqM_Xss_tXG4L4zq5RmPyRh0yBp25Q0tvb2DqYSA@mail.gmail.com>
 <6c107e7b-496f-0432-0847-16f8f2011c17@auckland.ac.nz>
Message-ID: <CAD-ePxbBcaDNrY768AVr2xjdvgvsAxqzmVie=uJ41Qj9RnjqcA@mail.gmail.com>

I need to clarify. This part of example(dotchart) does not show group
labels in my case:

===

dotchart(VADeaths, main = "Death Rates in Virginia - 1940")

===

My session is

===

> sessionInfo()
R version 4.0.2 (2020-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04.6 LTS

Matrix products: default
BLAS:   /usr/lib/libblas/libblas.so.3.6.0
LAPACK: /usr/lib/lapack/liblapack.so.3.6.0

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] colorout_1.2-2

loaded via a namespace (and not attached):
[1] compiler_4.0.2 tools_4.0.2

===

Alexey Shipunov

??, 2 ???. 2020 ?. ? 08:18, Rolf Turner <r.turner at auckland.ac.nz>:

>
>
> On 2/07/20 2:58 am, Alexey Shipunov wrote:
>
> > Dear colleagues,
> >
> > There is a new problem with dotchart(), and it is very simple to reproduce.
> >
> > Just run example(dotchart).
> >
> > On R versions < 4, group labels ("Urban Female" and so on) were
> > visible. Now they are not visible.
>
> I just tried example(dotchart) and the results look fine to me.  In
> particular the group labels are definitely visible.  My session info
> follows.
>
> >> sessionInfo()
> > R version 4.0.2 (2020-06-22)
> > Platform: x86_64-pc-linux-gnu (64-bit)
> > Running under: Ubuntu 18.04.4 LTS
> >
> > Matrix products: default
> > BLAS:   /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3
> > LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3
> >
> > Random number generation:
> >  RNG:     Mersenne-Twister
> >  Normal:  Inversion
> >  Sample:  Rounding
> >
> > locale:
> >  [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C
> >  [3] LC_TIME=en_NZ.UTF-8        LC_COLLATE=en_GB.UTF-8
> >  [5] LC_MONETARY=en_NZ.UTF-8    LC_MESSAGES=en_GB.UTF-8
> >  [7] LC_PAPER=en_NZ.UTF-8       LC_NAME=C
> >  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> > [11] LC_MEASUREMENT=en_NZ.UTF-8 LC_IDENTIFICATION=C
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > other attached packages:
> > [1] brev_0.0-4
> >
> > loaded via a namespace (and not attached):
> > [1] compiler_4.0.2 tools_4.0.2
>
> <SNIP>
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Jul  2 01:49:39 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 2 Jul 2020 11:49:39 +1200
Subject: [R] [FORGED] Re:  Unintended behaviour (possibly bugs)
In-Reply-To: <CAD-ePxbBcaDNrY768AVr2xjdvgvsAxqzmVie=uJ41Qj9RnjqcA@mail.gmail.com>
References: <CAD-ePxY3WOumNjaED5OwHtGWnzGecom+5MLGNgeEWS4sbBxGiw@mail.gmail.com>
 <bd143039-d302-fee9-7350-ec01a61c17e1@sapo.pt>
 <CAD-ePxZ-MytqqfQUiEE9+4e_T8kyfj4kiYcRTj4GsYcupGLj8A@mail.gmail.com>
 <cd83233c-5794-d741-cf9d-32d4435cf590@sapo.pt>
 <CADfFDC6HGT0X0d5xnrCfRKybp9SRehU10c3C5hGAm0USNtndWQ@mail.gmail.com>
 <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
 <24170.28233.24528.535254@stat.math.ethz.ch>
 <CAD-ePxZtLg-fhgeNMQSKhLfzXt-ZC4_V8N--rh-OV9XZ-2B3CA@mail.gmail.com>
 <CAD-ePxb1YhEqM_Xss_tXG4L4zq5RmPyRh0yBp25Q0tvb2DqYSA@mail.gmail.com>
 <6c107e7b-496f-0432-0847-16f8f2011c17@auckland.ac.nz>
 <CAD-ePxbBcaDNrY768AVr2xjdvgvsAxqzmVie=uJ41Qj9RnjqcA@mail.gmail.com>
Message-ID: <f214a565-8b6e-f348-49a5-e5a119d5f686@auckland.ac.nz>


On 2/07/20 11:24 am, Alexey Shipunov wrote:

> I need to clarify. This part of example(dotchart) does not show group
> labels in my case:
> 
> ===
> 
> dotchart(VADeaths, main = "Death Rates in Virginia - 1940")

<SNIP>

Ah!  I see.  I didn't know what I should be looking for in this 
instance.  Sorry for the noise.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From dr@ke@go@@| @end|ng |rom gm@||@com  Thu Jul  2 00:47:42 2020
From: dr@ke@go@@| @end|ng |rom gm@||@com (Drake Gossi)
Date: Wed, 1 Jul 2020 17:47:42 -0500
Subject: [R] piping in only specific parts of a certain column
Message-ID: <CAPSTy5e8=LY=NODiOtOyTtd_C+uGa5-jH6b7qb-gyhPaQCqttQ@mail.gmail.com>

Hello!

Question. I'm dealing with a large excel sheet that I'm trying to tidy
and then visualize, and I'm wondering how I might specify the data I'm
visualizing.

Here's the data frame I'm working with:

> str(unclean_data)
Classes ?tbl_df?, ?tbl? and 'data.frame': 1909 obs. of  9 variables:
 $ unique identifier: num  1 1 1 1 1 1 1 1 1 1 ...
 $ question         : num  1 2 2 2 2 2 2 3 3 3 ...
 $ grid text        : chr  "******* and his family have lived and
worked in ******* for 6 years." "******* contributes to public safety
while also organizing community events. He said he hosts Trunk or
Treat, en"| __truncated__ "******* did not know the origin or history
of ******* PD, but he said it is integral to the safety of the area."
"The ******* PD ensures safety, he said, while also familiarizing
themselves with the town?s people. He said ev"| __truncated__ ...
>

The most important column is the $grid text one, and I know how to extract that:

> text_df_APPLIED <- tibble(line = 1:1909, text = unclean_data$`grid text`)

But my question is, what if I only wanted to extract stuff from the
$grid text column that was itself only correlated with the number 3 in
the $question column? So, instead of visualizing or rather tidying the
whole $grid text column, I want to only tidy a smaller portion of it,
only that which is indexed to the number 3 is the $question column.

Is there a way to do that in this line of code:

> text_df_APPLIED <- tibble(line = 1:1909, text = unclean_data$`grid text`)

Or do I have to FIRST shorten the $`grid text` column (shorten it to
only that which is indexed to 3 in the $question column) BEFORE I even
begin to tidy it?

I'm working with these libraries right now, if it helps:

library(tidytext)
library(dplyr)
library(stringr)

D


From drj|m|emon @end|ng |rom gm@||@com  Thu Jul  2 12:54:38 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 2 Jul 2020 20:54:38 +1000
Subject: [R] piping in only specific parts of a certain column
In-Reply-To: <CAPSTy5e8=LY=NODiOtOyTtd_C+uGa5-jH6b7qb-gyhPaQCqttQ@mail.gmail.com>
References: <CAPSTy5e8=LY=NODiOtOyTtd_C+uGa5-jH6b7qb-gyhPaQCqttQ@mail.gmail.com>
Message-ID: <CA+8X3fVe6rWH1dNL0kPcFcuR-TvJG-Zfjmazfavh3r6QZBNa+g@mail.gmail.com>

Hi Drake,
This is a guess on my part, but what about:
\
q3only<-unclean_data[unclean_data$question == 3,]

then perform your operations on q3only

Jim

On Thu, Jul 2, 2020 at 8:35 PM Drake Gossi <drake.gossi at gmail.com> wrote:
>
> Hello!
>
> Question. I'm dealing with a large excel sheet that I'm trying to tidy
> and then visualize, and I'm wondering how I might specify the data I'm
> visualizing.
>
> Here's the data frame I'm working with:
>
> > str(unclean_data)
> Classes ?tbl_df?, ?tbl? and 'data.frame': 1909 obs. of  9 variables:
>  $ unique identifier: num  1 1 1 1 1 1 1 1 1 1 ...
>  $ question         : num  1 2 2 2 2 2 2 3 3 3 ...
>  $ grid text        : chr  "******* and his family have lived and
> worked in ******* for 6 years." "******* contributes to public safety
> while also organizing community events. He said he hosts Trunk or
> Treat, en"| __truncated__ "******* did not know the origin or history
> of ******* PD, but he said it is integral to the safety of the area."
> "The ******* PD ensures safety, he said, while also familiarizing
> themselves with the town?s people. He said ev"| __truncated__ ...
> >
>
> The most important column is the $grid text one, and I know how to extract that:
>
> > text_df_APPLIED <- tibble(line = 1:1909, text = unclean_data$`grid text`)
>
> But my question is, what if I only wanted to extract stuff from the
> $grid text column that was itself only correlated with the number 3 in
> the $question column? So, instead of visualizing or rather tidying the
> whole $grid text column, I want to only tidy a smaller portion of it,
> only that which is indexed to the number 3 is the $question column.
>
> Is there a way to do that in this line of code:
>
> > text_df_APPLIED <- tibble(line = 1:1909, text = unclean_data$`grid text`)
>
> Or do I have to FIRST shorten the $`grid text` column (shorten it to
> only that which is indexed to 3 in the $question column) BEFORE I even
> begin to tidy it?
>
> I'm working with these libraries right now, if it helps:
>
> library(tidytext)
> library(dplyr)
> library(stringr)
>
> D
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Jul  2 13:46:57 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 2 Jul 2020 13:46:57 +0200
Subject: [R] argument "x" is missing in minpack.lm
In-Reply-To: <20200701164246.4dcd26f7@trisector>
References: <CAMk+s2SZUAoF1tmQh_O6fx504VqM53DEHJAY0fsFCiHXBqAWJA@mail.gmail.com>
 <CAM_vjumpYbPoCDqC8pnJCksGPrq-SbMKLur6ZPGYY7nt=iLRMQ@mail.gmail.com>
 <CAMk+s2TnZzoWDBDE0aT3W=NrJf=0waHhSG_ATtjeZ9BKiXqw=Q@mail.gmail.com>
 <20200630150441.05528386@Tarkus>
 <CAMk+s2S_X2WkX9-Qm_39x5Gh44Vz1+uAWDJCPX9UV_Mq26-y5A@mail.gmail.com>
 <20200630164100.3366d68b@Tarkus>
 <CAMk+s2So-pOVSY0EHLqpfUgqKxnmDVcW1acgMXmR-LwsgBhLhg@mail.gmail.com>
 <20200701161510.2ff6ccf6@trisector>
 <CAMk+s2R6F3E-Ssxry_n7OBi_Xp2Gzj2tM-sXLA_Zgc6y-9=O-Q@mail.gmail.com>
 <20200701164246.4dcd26f7@trisector>
Message-ID: <CAMk+s2Rv8qNyq7VtA3N6OO5DND3zZ5oxcUU-wo8Evx51emLOwQ@mail.gmail.com>

Got it, thanks!
Now I get:
```
actual <- c(8,   24,   39,   63,   89,  115,  153,  196,  242,  287,
            344,  408,  473,
            546,  619,  705,  794,  891,  999, 1096, 1242, 1363,
            1506, 1648, 1753,
            1851, 1987, 2101, 2219, 2328, 2425, 2575, 2646,
            2698, 2727, 2771, 2818,
            2853, 2895, 2926, 2964, 2995, 3025, 3053, 3080,
            3102, 3119, 3141, 3152,
            3159, 3172, 3182, 3196, 3209, 3220, 3231, 3239,
            3246, 3252, 3261)
# a = 3261, b = 10
raw_estim <- c(32.28713,  125.42308,  269.25688,  449.79310,  652.20000,
               863.20588, 1072.40940, 1272.58537,
               1459.34254, 1630.50000, 1785.43439, 1924.52459, 2048.73234,
               2159.31081, 2257.61538, 2344.98876,
               2422.69666, 2491.89623, 2553.62473, 2608.80000, 2658.22736,
               2702.60959, 2742.55803, 2778.60355,
               2811.20690, 2840.76804, 2867.63450, 2892.10860, 2914.45377,
               2934.90000, 2953.64844, 2970.87544,
               2986.73591, 3001.36624, 3014.88679, 3027.40401, 3039.01225,
               3049.79534, 3059.82788, 3069.17647,
               3077.90062, 3086.05365, 3093.68343, 3100.83301, 3107.54118,
               3113.84296, 3119.77003, 3125.35108,
               3130.61216, 3135.57692, 3140.26694, 3144.70185, 3148.89962,
               3152.87666, 3156.64800, 3160.22744,
               3163.62765, 3166.86028, 3169.93605, 3172.86486)
# a = 3.090e-16, b = 1.000e+01
opt_estim_old <- c(3.059406e-18, 1.188462e-17, 2.551376e-17,
4.262069e-17, 6.180000e-17,
               8.179412e-17, 1.016174e-16,
1.205854e-16, 1.382818e-16, 1.545000e-16, 1.691810e-16, 1.823607e-16,
1.941301e-16, 2.046081e-16,
2.139231e-16, 2.222022e-16, 2.295656e-16, 2.361226e-16, 2.419718e-16,
2.472000e-16, 2.518835e-16,
2.560890e-16, 2.598744e-16, 2.632899e-16, 2.663793e-16, 2.691804e-16,
2.717262e-16, 2.740452e-16,
2.761626e-16, 2.781000e-16, 2.798765e-16, 2.815089e-16, 2.830118e-16,
2.843981e-16, 2.856792e-16,
2.868653e-16, 2.879653e-16, 2.889870e-16, 2.899377e-16, 2.908235e-16,
2.916502e-16, 2.924227e-16,
2.931457e-16, 2.938232e-16, 2.944588e-16, 2.950560e-16, 2.956176e-16,
2.961464e-16, 2.966449e-16,
2.971154e-16, 2.975598e-16, 2.979800e-16, 2.983778e-16, 2.987546e-16,
2.991120e-16, 2.994512e-16,
2.997734e-16, 3.000797e-16, 3.003711e-16, 3.006486e-16)
# a =  4380.4979, b = 30.3779
opt_estim <- c(4.741739,   18.905561,   42.309262,   74.655637,  115.541787,
               164.471381,  220.869196,
284.097173,  353.471198,  428.277856,  507.790487,  591.283989,
678.047947,  767.397828,
858.684086,  951.299179, 1044.682566, 1138.323858, 1231.764323,
1324.596988 , 1416.465585,
1507.062590, 1596.126574, 1683.439081, 1768.821202, 1852.130003,
1933.254918, 2012.114210,
2088.651563, 2162.832870, 2234.643232, 2304.084201, 2371.171268,
2435.931609, 2498.402055,
2558.627308, 2616.658366, 2672.551143, 2726.365284, 2778.163130,
2828.008847, 2875.967677,
2922.105311, 2966.487363, 3009.178936, 3050.244270, 3089.746448,
3127.747177, 3164.306598,
3199.483163, 3233.333529, 3265.912492, 3297.272946, 3327.465861,
3356.540283, 3384.543344,
3411.520287, 3437.514499, 3462.567553, 3486.719252)

plot(1:60, actual, lty = 1 , type = "l", lwd = 2,
     xlab = "Index", ylab = "Values")
points(1:60, raw_estim, lty = 2, type = "l")
points(1:60, opt_estim, lty = 3, type = "l")
legend("bottomright",
       legend = c("Actual values", "Raw estimate", "Optimized values"),
       lty = c(1, 2, 3), lwd = c(2, 1,1))
```

And it works even better with the function Gomperz:
```
gomp = function(p, x, y) (p$a * exp(-p$b * exp(-p$c * x))) - y
actual <- c(8,   24,   39,   63,   89,  115,  153,  196,  242,  287,
            344,  408,  473,
            546,  619,  705,  794,  891,  999, 1096, 1242, 1363,
            1506, 1648, 1753,
            1851, 1987, 2101, 2219, 2328, 2425, 2575, 2646,
            2698, 2727, 2771, 2818,
            2853, 2895, 2926, 2964, 2995, 3025, 3053, 3080,
            3102, 3119, 3141, 3152,
            3159, 3172, 3182, 3196, 3209, 3220, 3231, 3239,
            3246, 3252, 3261)
# a = 3261, b = 20, c = 0.1
GOMP = c(4.508508e-05, 2.523166e-04, 1.198631e-03, 4.909360e-03, 1.758298e-02,
         5.577422e-02, 1.585133e-01,
         4.078768e-01, 9.592495e-01, 2.079652e+00, 4.188604e+00,
7.892437e+00, 1.400134e+01, 2.351997e+01,
         3.760684e+01, 5.750425e+01, 8.444654e+01, 1.195592e+02,
1.637624e+02, 2.176925e+02, 2.816487e+02,
         3.555714e+02, 4.390496e+02, 5.313549e+02, 6.314945e+02,
7.382759e+02, 8.503763e+02, 9.664098e+02,
         1.084989e+03, 1.204775e+03, 1.324520e+03, 1.443095e+03,
1.559508e+03, 1.672916e+03, 1.782624e+03,
         1.888078e+03, 1.988863e+03, 2.084686e+03, 2.175363e+03,
2.260805e+03, 2.341005e+03, 2.416022e+03,
         2.485969e+03, 2.551004e+03, 2.611315e+03, 2.667115e+03,
2.718631e+03, 2.766102e+03, 2.809769e+03,
         2.849874e+03, 2.886657e+03, 2.920347e+03, 2.951171e+03,
2.979341e+03, 3.005063e+03, 3.028528e+03,
         3.049918e+03, 3.069402e+03, 3.087140e+03, 3.103278e+03)
# a = 3.344e+03, b = 7.715e+00, c = 1.007e-01
GP = c(3.123603,    6.093680,   11.150677,   19.256792,   31.559926,
49.332695,
       73.883838,
106.453532,  148.107305,  199.643054,  261.522677,  333.835070,
416.291985,  508.253731,
608.778470,  716.687199,  830.636345,  949.190754, 1070.891363,
1194.313689, 1318.114912,
1441.068876, 1562.089431, 1680.243298, 1794.754104, 1904.999383,
2010.502340, 2110.919990,
2206.029092, 2295.711021, 2379.936466, 2458.750617, 2532.259301,
2600.616339, 2664.012281,
2722.664577, 2776.809146, 2826.693281, 2872.569775, 2914.692156,
2953.310891, 2988.670438,
3021.007015, 3050.546986, 3077.505743, 3102.087011, 3124.482483,
3144.871725, 3163.422286,
3180.289965, 3195.619209, 3209.543577, 3222.186275, 3233.660724,
3244.071144, 3253.513139,
3262.074288, 3269.834707, 3276.867604, 3283.239800)
plot(1:60, actual, lty = 1 , type = "l", lwd = 2,
     xlab = "Index", ylab = "Values")
points(1:60, GOMP, lty = 2, type = "l")
points(1:60, GP, lty = 3, type = "l")
legend("right",
       legend = c("Actual values", "Raw estimate", "Optimized values"),
       lty = c(1, 2, 3), lwd = c(2, 1,1))
```
Thank you

On Wed, Jul 1, 2020 at 3:42 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Wed, 1 Jul 2020 15:24:35 +0200
> Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> >You are right: The vector X is actually Y -- the response I would like
> >to fit the curve upon. I understood I should fit nls.lm with a
> >function that describes the data (Holling or Gomperz), initial
> >parameters, and the actual values (Y). In return, I get the optimized
> >values for the parameters. But when I re-run the function that
> >describes the data with the optimized parameters, I get values close
> >to zero.
>
> The function to be minimized should have access to all three: the
> parameters to optimize, the independent and dependent variable values.
> Only then there is enough information to compute residuals and minimise
> their sum of squares.
>
> holly <- function(p, x, y) (p$a * x^2) / (p$b^2 + x^2) - y
> #               residuals =      y.hat(x, params)      - y.actual
> O <- nls.lm(par = list(a = 3261, b = 10), fn = holly, x = X, y = Y)
> summary(O)
> # Parameters:
> #    Estimate Std. Error t value Pr(>|t|)
> # a 4380.4979   106.8144   41.01   <2e-16 ***
> # b   30.3779     0.9995   30.39   <2e-16 ***
> # ---
> # Signif. codes:  0 ?***? 0.001 ?**? 0.01 ?*? 0.05 ?.? 0.1 ? ? 1
> #
> # Residual standard error: 157.5 on 58 degrees of freedom
> # Number of iterations to termination: 7
> # Reason for termination: Relative error in the sum of squares is at
> # most `ftol'.
>
> In our previous examples we ended up asking R to minimise y.hat(x)
> calculated at wrong x values instead of minimising residuals.
>
> --
> Best regards,
> Ivan



-- 
Best regards,
Luigi


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Jul  2 14:07:41 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 2 Jul 2020 13:07:41 +0100
Subject: [R] piping in only specific parts of a certain column
In-Reply-To: <CAPSTy5e8=LY=NODiOtOyTtd_C+uGa5-jH6b7qb-gyhPaQCqttQ@mail.gmail.com>
References: <CAPSTy5e8=LY=NODiOtOyTtd_C+uGa5-jH6b7qb-gyhPaQCqttQ@mail.gmail.com>
Message-ID: <51d9a55f-5f37-4ca0-9dc8-04f714622e87@sapo.pt>

Hello,


Maybe the following is what you are looking for.


unclean_data %>%
   filter(question == 3) %>%
   mutate(line = row_number()) %>%
   select(line, `grid text`)


Hope this helps,

Rui Barradas
  

?s 23:47 de 01/07/2020, Drake Gossi escreveu:
> Hello!
>
> Question. I'm dealing with a large excel sheet that I'm trying to tidy
> and then visualize, and I'm wondering how I might specify the data I'm
> visualizing.
>
> Here's the data frame I'm working with:
>
>> str(unclean_data)
> Classes ?tbl_df?, ?tbl? and 'data.frame': 1909 obs. of  9 variables:
>   $ unique identifier: num  1 1 1 1 1 1 1 1 1 1 ...
>   $ question         : num  1 2 2 2 2 2 2 3 3 3 ...
>   $ grid text        : chr  "******* and his family have lived and
> worked in ******* for 6 years." "******* contributes to public safety
> while also organizing community events. He said he hosts Trunk or
> Treat, en"| __truncated__ "******* did not know the origin or history
> of ******* PD, but he said it is integral to the safety of the area."
> "The ******* PD ensures safety, he said, while also familiarizing
> themselves with the town?s people. He said ev"| __truncated__ ...
> The most important column is the $grid text one, and I know how to extract that:
>
>> text_df_APPLIED <- tibble(line = 1:1909, text = unclean_data$`grid text`)
> But my question is, what if I only wanted to extract stuff from the
> $grid text column that was itself only correlated with the number 3 in
> the $question column? So, instead of visualizing or rather tidying the
> whole $grid text column, I want to only tidy a smaller portion of it,
> only that which is indexed to the number 3 is the $question column.
>
> Is there a way to do that in this line of code:
>
>> text_df_APPLIED <- tibble(line = 1:1909, text = unclean_data$`grid text`)
> Or do I have to FIRST shorten the $`grid text` column (shorten it to
> only that which is indexed to 3 in the $question column) BEFORE I even
> begin to tidy it?
>
> I'm working with these libraries right now, if it helps:
>
> library(tidytext)
> library(dplyr)
> library(stringr)
>
> D
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus

	[[alternative HTML version deleted]]


From emm@@m@p@rr|@h @end|ng |rom gm@||@com  Wed Jul  1 21:15:58 2020
From: emm@@m@p@rr|@h @end|ng |rom gm@||@com (Emma Parrish)
Date: Wed, 1 Jul 2020 15:15:58 -0400
Subject: [R] Help with effectsize package
Message-ID: <CAPi=aqy0_zbB5FuhAR1c0F9AycY0AD9OHHhAkmfCQZF+SRTgDw@mail.gmail.com>

Hello all,
I am having some trouble with the effectsize package in R. I am trying to
convert Z scores to percentiles using the convert_z_to_percentile command.
This same code (below) has worked for 3 other variables, but not these 2
variables

However, when I use the function to convert other z scores to percentiles,
I get numbers that are exponential (e.g., 1.877030e+01) instead of a
percentile. Has this happened to anyone else, and if so, how were you able
to fix it?

Here is my code:

#generate z-scores for SSPA using the scale() function - this part of the
code is successful
dat$varA_z <- scale(dat$varA_tot, center = TRUE, scale = TRUE)
dat$varB_z <- scale(dat$varB_tot, center = TRUE, scale = TRUE)

#Convert z-scores to percentile for UPSA using effectsize package tool,
convert_z_to_percentile
#for some reason this isn't working
dat$varA_per <- (convert_z_to_percentile(dat$varA_z)*100)
dat$varB_per <- (convert_z_to_percentile(dat$varB_z)*100)

Thank you in advance for any help you may be able to offer!
Emma

-- 
Emma Parrish, B.S. | Graduate Student Researcher
SDSU/UC San Diego Joint Doctoral Program in Clinical Psychology
Cognitive Dynamics Lab
emma.m.parrish at gmail.com | (610) 428-6714

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Thu Jul  2 15:22:19 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 2 Jul 2020 16:22:19 +0300
Subject: [R] Help with effectsize package
In-Reply-To: <CAPi=aqy0_zbB5FuhAR1c0F9AycY0AD9OHHhAkmfCQZF+SRTgDw@mail.gmail.com>
References: <CAPi=aqy0_zbB5FuhAR1c0F9AycY0AD9OHHhAkmfCQZF+SRTgDw@mail.gmail.com>
Message-ID: <CAGgJW76Nn4LgR=S+wBpAY50oNzt3tMq2GO6_rB_aBYCV1tAjiQ@mail.gmail.com>

Hi Emma,
You write
"I get numbers that are exponential (e.g., 1.877030e+01) "

1.877030e+01

is scientific notation. It means 1.877030 * 10 ( = 18.7703).

This seems like a perfectly good percentile.

HTH,
Eric


On Thu, Jul 2, 2020 at 4:12 PM Emma Parrish <emma.m.parrish at gmail.com>
wrote:

> Hello all,
> I am having some trouble with the effectsize package in R. I am trying to
> convert Z scores to percentiles using the convert_z_to_percentile command.
> This same code (below) has worked for 3 other variables, but not these 2
> variables
>
> However, when I use the function to convert other z scores to percentiles,
> I get numbers that are exponential (e.g., 1.877030e+01) instead of a
> percentile. Has this happened to anyone else, and if so, how were you able
> to fix it?
>
> Here is my code:
>
> #generate z-scores for SSPA using the scale() function - this part of the
> code is successful
> dat$varA_z <- scale(dat$varA_tot, center = TRUE, scale = TRUE)
> dat$varB_z <- scale(dat$varB_tot, center = TRUE, scale = TRUE)
>
> #Convert z-scores to percentile for UPSA using effectsize package tool,
> convert_z_to_percentile
> #for some reason this isn't working
> dat$varA_per <- (convert_z_to_percentile(dat$varA_z)*100)
> dat$varB_per <- (convert_z_to_percentile(dat$varB_z)*100)
>
> Thank you in advance for any help you may be able to offer!
> Emma
>
> --
> Emma Parrish, B.S. | Graduate Student Researcher
> SDSU/UC San Diego Joint Doctoral Program in Clinical Psychology
> Cognitive Dynamics Lab
> emma.m.parrish at gmail.com | (610) 428-6714
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Jul  2 15:30:05 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 2 Jul 2020 15:30:05 +0200
Subject: [R] Unintended behaviour (possibly bugs)
In-Reply-To: <CAD-ePxb1YhEqM_Xss_tXG4L4zq5RmPyRh0yBp25Q0tvb2DqYSA@mail.gmail.com>
References: <CAD-ePxY3WOumNjaED5OwHtGWnzGecom+5MLGNgeEWS4sbBxGiw@mail.gmail.com>
 <bd143039-d302-fee9-7350-ec01a61c17e1@sapo.pt>
 <CAD-ePxZ-MytqqfQUiEE9+4e_T8kyfj4kiYcRTj4GsYcupGLj8A@mail.gmail.com>
 <cd83233c-5794-d741-cf9d-32d4435cf590@sapo.pt>
 <CADfFDC6HGT0X0d5xnrCfRKybp9SRehU10c3C5hGAm0USNtndWQ@mail.gmail.com>
 <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
 <24170.28233.24528.535254@stat.math.ethz.ch>
 <CAD-ePxZtLg-fhgeNMQSKhLfzXt-ZC4_V8N--rh-OV9XZ-2B3CA@mail.gmail.com>
 <CAD-ePxb1YhEqM_Xss_tXG4L4zq5RmPyRh0yBp25Q0tvb2DqYSA@mail.gmail.com>
Message-ID: <24317.57693.817671.488741@stat.math.ethz.ch>

>>>>> Alexey Shipunov 
>>>>>     on Wed, 1 Jul 2020 23:58:04 +0900 writes:

    > Dear colleagues,
    > There is a new problem with dotchart(), and it is very simple to reproduce.

    > Just run example(dotchart).

    > On R versions < 4, group labels ("Urban Female" and so on) were
    > visible. Now they are not visible.

    > If in the dotchart() code, we replace the string

    > ===

    > goffset <- (max(linch + offset, ginch, na.rm = TRUE) + 1/16)/lheight

    > ===

    > with the string

    > ===

    > goffset <- (max(linch + 0.2, ginch, na.rm = TRUE) + 1/16)/lheight

    > ===

 > everything start to be OK. Probably, the reason that in the code,
 > there is another "offset" object and they clash. So if we replace this
 > part of code

    > ===

    > offset <- cumsum(c(0, diff(as.numeric(groups)) != 0))
    > y <- seq_len(n) + 2 * offset

    > ===

    > with

    > ===

    > offset1 <- cumsum(c(0, diff(as.numeric(groups)) != 0))
    > y <- seq_len(n) + 2 * offset1

    > ===

    > everything will be well again.

Thank you.

I'll have a look *again*, and cautiously consider the above.
Indeed your second patch seems the correct one, distinguishing the
two different offsets that where conflated.
I will commit to R-devel and also to "R 4.0.2 patched" (but note
that no quick R 4.0.3 has been planned).

Note (Alexey knows, almost everbody else probably not):
This has come from another dotchart(* , ylab=.) glitch which
Alexey had reported in February and I had fixed early
March... evidently not fixed quite correctly... and yes, I'm
embarrased.
However I did mention here to have fixed it, on March 12
(--> https://stat.ethz.ch/pipermail/r-help/2020-March/465921.html )

It would have been really great if people would test such
changes, as they were in all pre-releases (R 4.0.0 alpha, beta,
RC), easily available ...  and we could have fixed this even
before R 4.0.0 was released more than a month later than my
e-mail above...

Martin


    > With best wishes,
    > Alexey Shipunov

    > ??, 13 ???. 2020 ?. ? 18:56, Alexey Shipunov <dactylorhiza at gmail.com>:
    >> 
    >> Dear Martin,
    >> 
    >> Great news, thanks!
    >> 
    >> If you wish, please also consider my initial note about help(hist),
    >> this is definitely worrying new R users.
    >> 
    >> With best wishes,
    >> 
    >> Alexey
    >> 
    >> ??, 13 ???. 2020 ?. ? 02:16, Martin Maechler <maechler at stat.math.ethz.ch>:
    >> >
    >> > >>>>> Alexey Shipunov
    >> > >>>>>     on Tue, 18 Feb 2020 14:34:48 +0900 writes:
    >> >
    >> >     > Thank you for the detailed explanation. I tend to agree. However, this
    >> >     > behavior is relatively easy to remediate:
    >> >
    >> >     > This is the piece of the current code:
    >> >
    >> >     > ===
    >> >     > if (!(is.null(labels) && is.null(glabels))) {
    >> >     >    nmai <- par("mai")
    >> >     >    nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) + 0.1
    >> >     >    par(mai = nmai)
    >> >     > }
    >> >     > ===
    >> >
    >> >     > This is my proposal:
    >> >
    >> >     > ===
    >> >     > yinch <- if (!is.null(ylab)) 0.4 else 0
    >> >     > if (!(is.null(labels) && is.null(glabels))) {
    >> >     >    nmai <- par("mai")
    >> >     >    nm.2 <- nmai[4L] + max(if(is.null(ylab)) 0 else 0.4) + linch + goffset, ginch) + 0.1
    >> >     >    if (nmai[2L] < nm.2)
    >> >     >       nmai[2L] <- nm.2
    >> >     >    par(mai = nmai)
    >> >     > }
    >> >     > ===
    >> >
    >> >     > Then margins and y-axis labels start to work normally. I wonder if
    >> >     > this (or similar) is possible to introduce into the code?
    >> >
    >> >     > Alexey
    >> >
    >> > Well, I had looked at this back then (~Feb 18), and now had a
    >> > considerable longer look.
    >> >
    >> > Your suggestion makes sense,  but then it needs even more work
    >> > to ensure that the  'ylab'  y-axis label will be placed properly.
    >> >
    >> > Of course, Deepayan (author of grid-based 'lattice')  is right
    >> > that dotchart()s implementation is pretty hackish ... but then
    >> > still.
    >> >
    >> > I have (+-) fixed this in the sources of "R-devel" the
    >> > development version of R (which should become R 4.0.0  on April
    >> > 24 as was announced today).
    >> >
    >> > Now, things like this (extended) example work nicely :
    >> >
    >> > op <- par(xaxs = "i")  # 0 -- 100\%
    >> > dotchart(t(VADeaths), xlim = c(0,100), bg = "skyblue",
    >> >          main = "Death Rates in Virginia - 1940", xlab = "rate [ % ]",
    >> >          ylab = "Grouping:  Age  x   Urbanity . Gender")
    >> > par(op)
    >> >
    >> >
    >> > Thank you, Alexey, for your report and bug fix suggestion!
    >> >
    >> > Best regards,
    >> >
    >> > Martin Maechler
    >> > ETH Zurich and R Core team
    >> >
    >> >
    >> >
    >> >     > ........... 17:37, Deepayan Sarkar <deepayan.sarkar at gmail.com>:
    >> >     >>
    >> >     >> On Mon, Feb 17, 2020 at 10:24 AM Rui Barradas <ruipbarradas at sapo.pt> wrot=
    >> >     > e:
    >> >     >> >
    >> >     >> > Hello,
    >> >     >> >
    >> >     >> > Yes, this is definitely a bug.
    >> >     >>
    >> >     >> I would argue that the only bug here is that the documentation doesn't
    >> >     >> say that 'ylab' may not behave as expected.
    >> >     >>
    >> >     >> dotchart() is mainly designed for 2-way tables (see the VADeaths
    >> >     >> example), but it's implementation is really pretty hackish because it
    >> >     >> has to work within the limited traditional graphics framework. The
    >> >     >> main problem is that dot plots want to put horizontal y-axis labels
    >> >     >> (usually derived from factor levels), which are often longer than the
    >> >     >> default margins, so the margins are modified. Unfortunately they are
    >> >     >> only re-set on exit, and so the ylab that is plotted inside dotchart()
    >> >     >> may be clipped. Traditionally, Cleveland dot plots don't have a y-axis
    >> >     >> label; it's assumed that the factor levels are sufficient (and for
    >> >     >> 2-way tables, there would be two variables, so there is no sensible
    >> >     >> default).
    >> >     >>
    >> >     >> I doubt that dotchart() is worth fixing (except to maybe disallow
    >> >     >> ylab). If you want flexibility, use modern grid-based alternatives
    >> >     >> such as lattice::dotplot() or ggplot2.
    >> >     >>
    >> >     >> -Deepayan
    >> >     >>
    >> >     >> > Even the matrix plot is puzzling, with a "1" as top row sort-of-label
    >> >     >> > but no grid line. I'm trying to follow the source code of dotchart but
    >> >     >> > am yet to understand exactly what it does to decide the margins setting=
    >> >     > s.
    >> >     >> >
    >> >     >> >      if (!(is.null(labels) && is.null(glabels))) {
    >> >     >> >        nmai <- par("mai")
    >> >     >> >        nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) +
    >> >     >> >          0.1
    >> >     >> >        par(mai = nmai)
    >> >     >> >      }
    >> >     >> >
    >> >     >> > This should be moved to r-devel?
    >> >     >> >
    >> >     >> > Rui Barradas
    >> >     >> >
    >> >     >> >  03:33 de 17/02/20, Alexey Shipunov escreveu:
    >> >     >> > > John and Rui, thanks!
    >> >     >> > >
    >> >     >> > > However, if we use the proper object, the problem still persists:
    >> >     >> > >
    >> >     >> > > dotchart(c("3"=1, "2"=2, "1"=3), ylab="Ylab") # ylab is invisible
    >> >     >> > > dotchart(c("aa"=1, "b"=2, "cc"=3), ylab="Ylab") # ylab is partly visible (!!!)
    >> >     >> > > dotchart(c("aaa"=1, "bbb"=2, "ccc"=3), ylab="Ylab") # ylab is well visible
    >> >     >> > >
    >> >     >> > > If the object is matrix, ylab is visible:
    >> >     >> > >
    >> >     >> > > dotchart(matrix(1:3, dimnames=list(c("aa","bb","cc"), NULL)), ylab="Ylab")
    >> >     >> > >
    >> >     >> > > But the ?dotchart explicitly says that "x: either a vector or matrix
    >> >     >> > > of numeric values" and then "labels: a vector of labels for each
    >> >     >> > > point.  For vectors the default is to use  "names(x) = ...".
    >> >     >> > >
    >> >     >> > > So this is likely a bug. Do you agree?
    >> >     >> > >
    >> >     >> > > Alexey
    >> >     >> > >
    >> >     >> > > ..... 01:55, Rui Barradas <ruipbarradas at sapo.pt>:
    >> >     >> > >>
    >> >     >> > >> Hello,
    >> >     >> > >>
    >> >     >> > >> I believe you are wrong, the error is not in dotchart, it's in your
    >> >     >> > >> code. You assume that to plot an object of class "table" is the same as
    >> >     >> > >> to plot an object of class "numeric".
    >> >     >> > >>
    >> >     >> > >> Inline.
    >> >     >> > >>
    >> >     >> > >> =C3=80s 12:21 de 16/02/20, Alexey Shipunov escreveu:
    >> >     >> > >>> Dear list,
    >> >     >> > >>>
    >> >     >> > >>> I have been advised to share these with R-help instead of filling the
    >> >     >> > >>> bug report:
    >> >     >> > >>>
    >> >     >> > >>> 1) dotchart() does not allow to see the left axis title ('ylab') and
    >> >     >> > >>> cannot change the left margin (outer margin 2) of the plot
    >> >     >> > >>>
    >> >     >> > >>> The code:
    >> >     >> > >>>
    >> >     >> > >>> aa <- table(c(1, 1, 1, 2, 2, 3))
    >> >     >> > >>> dotchart(aa, ylab="Ylab") # does not show 'ylab'
    >> >     >> > >>
    >> >     >> > >> You are right, it does *not* show 'ylab' but the user is warned.
    >> >     >> > >>
    >> >     >> > >>
    >> >     >> > >> aa <- table(c(1, 1, 1, 2, 2, 3))
    >> >     >> > >> dotchart(aa, ylab = "Ylab") # does show 'ylab'
    >> >     >> > >> #Warning message:
    >> >     >> > >> #In dotchart(aa, ylab = "Ylab") :
    >> >     >> > >> #  'x' is neither a vector nor a matrix: using as.numeric(x)
    >> >     >> > >>
    >> >     >> > >>
    >> >     >> > >> My code:
    >> >     >> > >>
    >> >     >> > >>
    >> >     >> > >> (mar <- par("mar"))    # new R session
    >> >     >> > >> #[1] 5.1 4.1 4.1 2.1   # the left margin is 4.1
    >> >     >> > >>
    >> >     >> > >> aa <- as.numeric(table(c(1, 1, 1, 2, 2, 3)))
    >> >     >> > >>
    >> >     >> > >> dotchart(aa, ylab = "Ylab") # It does show 'ylab'
    >> >     >> > >> old.par <- par(mar = mar + c(0, 5, 0, 0))
    >> >     >> > >> par("mar")
    >> >     >> > >> #[1] 5.1 9.1 4.1 2.1
    >> >     >> > >>
    >> >     >> > >> dotchart(aa, ylab = "Ylab")  # The left margin is now 9.1, much bigger
    >> >     >> > >>
    >> >     >> > >> par(old.par)                 # It does change the left margin
    >> >     >> > >> dotchart(aa, ylab = "Ylab")  #  but only when a new graph is plotted.
    >> >     >> > >>
    >> >     >> > >>
    >> >     >> > >>
    >> >     >> > >>> old.par <- par(mar=c(1, 10, 1, 1)) ; dotchart(aa, ylab="Ylab") ;
    >> >     >> > >>> par(old.par) # does not change left margin
    >> >     >> > >>>
    >> >     >> > >>> Possible solution:
    >> >     >> > >>>
    >> >     >> > >>> I researched the problem and think that the dotchart() code will need
    >> >     >> > >>> few corrections. If there is an interest, I can post it here; or you
    >> >     >> > >>> can look at the code of shipunov::Dotchart1() function.
    >> >     >> > >>>
    >> >     >> > >>> 2) example(hist) includes two "wrong" and "extreme" examples which
    >> >     >> > >>> slow down and even crash R on some systems; this make it unsuitable
    >> >     >> > >>> for demonstration in the class and strikes beginners in R who just
    >> >     >> > >>> want to understand how hist() works. Actually, I did it last week (I
    >> >     >> > >>> was not aware of these examples), and in the class two computers hang,
    >> >     >> > >>> and many others were extremely slow.
    >> >     >> > >>>
    >> >     >> > >>> The code:
    >> >     >> > >>>
    >> >     >> > >>> example(hist)
    >> >     >> > >>>
    >> >     >> > >>> Possible solution:
    >> >     >> > >>>
    >> >     >> > >>> If R maintainers will enclose parts of "hist" example in \dontrun{},
    >> >     >> > >>> this will allow to see the code but in the same time will not strike
    >> >     >> > >>> beginners in R who just
    >> >     >> > >>> want to understand how hist() works. They will still be possible to
    >> >     >> > >>> run with example(..., run.dontrun=TRUE).
    >> >     >> > >>
    >> >     >> > >> Agree, it's annoying. Sometimes there's a Warning section after the
    >> >     >> > >> Details section. Maybe such a section could get users' attention to
    >> >     >> > >> those examples? At least it wouldn't hurt...
    >> >     >> > >>
    >> >     >> > >>
    >> >     >> > >> Hope this helps,
    >> >     >> > >>
    >> >     >> > >> Rui Barradas
    >> >     >> > >>
    >> >     >> > >>>
    >> >     >> > >>> With best wishes,
    >> >     >> > >>>
    >> >     >> > >>> Alexey Shipunov
    >> >     >> > >>> ______________________________________________


From dr@ke@go@@| @end|ng |rom gm@||@com  Thu Jul  2 21:26:54 2020
From: dr@ke@go@@| @end|ng |rom gm@||@com (Drake Gossi)
Date: Thu, 2 Jul 2020 12:26:54 -0700
Subject: [R] piping in only specific parts of a certain column
In-Reply-To: <51d9a55f-5f37-4ca0-9dc8-04f714622e87@sapo.pt>
References: <CAPSTy5e8=LY=NODiOtOyTtd_C+uGa5-jH6b7qb-gyhPaQCqttQ@mail.gmail.com>
 <51d9a55f-5f37-4ca0-9dc8-04f714622e87@sapo.pt>
Message-ID: <CAPSTy5c36sPW6huqqJ0bqhyu6VDsP0pJANu2U6Oa-f0mc+u6XA@mail.gmail.com>

Thank you very much, Jim and Rui.

The line that ended up working for me was this:

> ed_exp3 <- unclean_data[which(unclean_data$question == 3) %in% c("`grid text`")]

However, as I read and study Jim's and Rui's code, I see how those
would work too. Thank you all again!

On Thu, Jul 2, 2020 at 5:07 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> Hello,
>
>
> Maybe the following is what you are looking for.
>
>
> unclean_data %>%
>   filter(question == 3) %>%
>   mutate(line = row_number()) %>%
>   select(line, `grid text`)
>
>
> Hope this helps,
>
> Rui Barradas
>
>
> ?s 23:47 de 01/07/2020, Drake Gossi escreveu:
>
> Hello!
>
> Question. I'm dealing with a large excel sheet that I'm trying to tidy
> and then visualize, and I'm wondering how I might specify the data I'm
> visualizing.
>
> Here's the data frame I'm working with:
>
> str(unclean_data)
>
> Classes ?tbl_df?, ?tbl? and 'data.frame': 1909 obs. of  9 variables:
>  $ unique identifier: num  1 1 1 1 1 1 1 1 1 1 ...
>  $ question         : num  1 2 2 2 2 2 2 3 3 3 ...
>  $ grid text        : chr  "******* and his family have lived and
> worked in ******* for 6 years." "******* contributes to public safety
> while also organizing community events. He said he hosts Trunk or
> Treat, en"| __truncated__ "******* did not know the origin or history
> of ******* PD, but he said it is integral to the safety of the area."
> "The ******* PD ensures safety, he said, while also familiarizing
> themselves with the town?s people. He said ev"| __truncated__ ...
>
> The most important column is the $grid text one, and I know how to extract that:
>
> text_df_APPLIED <- tibble(line = 1:1909, text = unclean_data$`grid text`)
>
> But my question is, what if I only wanted to extract stuff from the
> $grid text column that was itself only correlated with the number 3 in
> the $question column? So, instead of visualizing or rather tidying the
> whole $grid text column, I want to only tidy a smaller portion of it,
> only that which is indexed to the number 3 is the $question column.
>
> Is there a way to do that in this line of code:
>
> text_df_APPLIED <- tibble(line = 1:1909, text = unclean_data$`grid text`)
>
> Or do I have to FIRST shorten the $`grid text` column (shorten it to
> only that which is indexed to 3 in the $question column) BEFORE I even
> begin to tidy it?
>
> I'm working with these libraries right now, if it helps:
>
> library(tidytext)
> library(dplyr)
> library(stringr)
>
> D
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
> Sem v?rus. www.avast.com



-- 
Drake Gossi
Phd Student
University of Texas at Austin


From herd_dog @end|ng |rom cox@net  Fri Jul  3 00:04:10 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Thu, 2 Jul 2020 15:04:10 -0700
Subject: [R] National Weather Service Data
Message-ID: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>

Is anyone out there familiar with rNOMADS?  It is a package to get into National Weather Service forecasting data with R?

I'm not sure the Weather Service software named wgrib2 loaded correctly because some of the stuff won't run and I can't make much sense out of some of the output.

Thanks.
	[[alternative HTML version deleted]]


From @@e||ck @end|ng |rom gm@||@com  Fri Jul  3 00:20:04 2020
From: @@e||ck @end|ng |rom gm@||@com (stephen sefick)
Date: Thu, 2 Jul 2020 18:20:04 -0400
Subject: [R] National Weather Service Data
In-Reply-To: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
Message-ID: <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>

I am unfamiliar with Rnomads. Could you provide a minimal reproducable
example? You are more likely to receive help this way.

On Thu, Jul 2, 2020, 18:06 Philip <herd_dog at cox.net> wrote:

> Is anyone out there familiar with rNOMADS?  It is a package to get into
> National Weather Service forecasting data with R?
>
> I'm not sure the Weather Service software named wgrib2 loaded correctly
> because some of the stuff won't run and I can't make much sense out of some
> of the output.
>
> Thanks.
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From d@cty|orh|z@ @end|ng |rom gm@||@com  Fri Jul  3 05:40:13 2020
From: d@cty|orh|z@ @end|ng |rom gm@||@com (Alexey Shipunov)
Date: Fri, 3 Jul 2020 12:40:13 +0900
Subject: [R] Unintended behaviour (possibly bugs)
In-Reply-To: <24317.57693.817671.488741@stat.math.ethz.ch>
References: <CAD-ePxY3WOumNjaED5OwHtGWnzGecom+5MLGNgeEWS4sbBxGiw@mail.gmail.com>
 <bd143039-d302-fee9-7350-ec01a61c17e1@sapo.pt>
 <CAD-ePxZ-MytqqfQUiEE9+4e_T8kyfj4kiYcRTj4GsYcupGLj8A@mail.gmail.com>
 <cd83233c-5794-d741-cf9d-32d4435cf590@sapo.pt>
 <CADfFDC6HGT0X0d5xnrCfRKybp9SRehU10c3C5hGAm0USNtndWQ@mail.gmail.com>
 <CAD-ePxZELLi+zvkT8AmF6R9vffB+_K3vi6PMLONi2RViuSBFng@mail.gmail.com>
 <24170.28233.24528.535254@stat.math.ethz.ch>
 <CAD-ePxZtLg-fhgeNMQSKhLfzXt-ZC4_V8N--rh-OV9XZ-2B3CA@mail.gmail.com>
 <CAD-ePxb1YhEqM_Xss_tXG4L4zq5RmPyRh0yBp25Q0tvb2DqYSA@mail.gmail.com>
 <24317.57693.817671.488741@stat.math.ethz.ch>
Message-ID: <CAD-ePxY45w4t71bZ-XThkmvWwZP9xJt6ykejfOhxicTDNOXGew@mail.gmail.com>

Martin,

Yes, I should have test it earlier. Thank you for the response!

With best wishes,

Alexey

??, 2 ???. 2020 ?. ? 22:30, Martin Maechler <maechler at stat.math.ethz.ch>:
>
> >>>>> Alexey Shipunov
> >>>>>     on Wed, 1 Jul 2020 23:58:04 +0900 writes:
>
>     > Dear colleagues,
>     > There is a new problem with dotchart(), and it is very simple to reproduce.
>
>     > Just run example(dotchart).
>
>     > On R versions < 4, group labels ("Urban Female" and so on) were
>     > visible. Now they are not visible.
>
>     > If in the dotchart() code, we replace the string
>
>     > ===
>
>     > goffset <- (max(linch + offset, ginch, na.rm = TRUE) + 1/16)/lheight
>
>     > ===
>
>     > with the string
>
>     > ===
>
>     > goffset <- (max(linch + 0.2, ginch, na.rm = TRUE) + 1/16)/lheight
>
>     > ===
>
>  > everything start to be OK. Probably, the reason that in the code,
>  > there is another "offset" object and they clash. So if we replace this
>  > part of code
>
>     > ===
>
>     > offset <- cumsum(c(0, diff(as.numeric(groups)) != 0))
>     > y <- seq_len(n) + 2 * offset
>
>     > ===
>
>     > with
>
>     > ===
>
>     > offset1 <- cumsum(c(0, diff(as.numeric(groups)) != 0))
>     > y <- seq_len(n) + 2 * offset1
>
>     > ===
>
>     > everything will be well again.
>
> Thank you.
>
> I'll have a look *again*, and cautiously consider the above.
> Indeed your second patch seems the correct one, distinguishing the
> two different offsets that where conflated.
> I will commit to R-devel and also to "R 4.0.2 patched" (but note
> that no quick R 4.0.3 has been planned).
>
> Note (Alexey knows, almost everbody else probably not):
> This has come from another dotchart(* , ylab=.) glitch which
> Alexey had reported in February and I had fixed early
> March... evidently not fixed quite correctly... and yes, I'm
> embarrased.
> However I did mention here to have fixed it, on March 12
> (--> https://stat.ethz.ch/pipermail/r-help/2020-March/465921.html )
>
> It would have been really great if people would test such
> changes, as they were in all pre-releases (R 4.0.0 alpha, beta,
> RC), easily available ...  and we could have fixed this even
> before R 4.0.0 was released more than a month later than my
> e-mail above...
>
> Martin
>
>
>     > With best wishes,
>     > Alexey Shipunov
>
>     > ??, 13 ???. 2020 ?. ? 18:56, Alexey Shipunov <dactylorhiza at gmail.com>:
>     >>
>     >> Dear Martin,
>     >>
>     >> Great news, thanks!
>     >>
>     >> If you wish, please also consider my initial note about help(hist),
>     >> this is definitely worrying new R users.
>     >>
>     >> With best wishes,
>     >>
>     >> Alexey
>     >>
>     >> ??, 13 ???. 2020 ?. ? 02:16, Martin Maechler <maechler at stat.math.ethz.ch>:
>     >> >
>     >> > >>>>> Alexey Shipunov
>     >> > >>>>>     on Tue, 18 Feb 2020 14:34:48 +0900 writes:
>     >> >
>     >> >     > Thank you for the detailed explanation. I tend to agree. However, this
>     >> >     > behavior is relatively easy to remediate:
>     >> >
>     >> >     > This is the piece of the current code:
>     >> >
>     >> >     > ===
>     >> >     > if (!(is.null(labels) && is.null(glabels))) {
>     >> >     >    nmai <- par("mai")
>     >> >     >    nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) + 0.1
>     >> >     >    par(mai = nmai)
>     >> >     > }
>     >> >     > ===
>     >> >
>     >> >     > This is my proposal:
>     >> >
>     >> >     > ===
>     >> >     > yinch <- if (!is.null(ylab)) 0.4 else 0
>     >> >     > if (!(is.null(labels) && is.null(glabels))) {
>     >> >     >    nmai <- par("mai")
>     >> >     >    nm.2 <- nmai[4L] + max(if(is.null(ylab)) 0 else 0.4) + linch + goffset, ginch) + 0.1
>     >> >     >    if (nmai[2L] < nm.2)
>     >> >     >       nmai[2L] <- nm.2
>     >> >     >    par(mai = nmai)
>     >> >     > }
>     >> >     > ===
>     >> >
>     >> >     > Then margins and y-axis labels start to work normally. I wonder if
>     >> >     > this (or similar) is possible to introduce into the code?
>     >> >
>     >> >     > Alexey
>     >> >
>     >> > Well, I had looked at this back then (~Feb 18), and now had a
>     >> > considerable longer look.
>     >> >
>     >> > Your suggestion makes sense,  but then it needs even more work
>     >> > to ensure that the  'ylab'  y-axis label will be placed properly.
>     >> >
>     >> > Of course, Deepayan (author of grid-based 'lattice')  is right
>     >> > that dotchart()s implementation is pretty hackish ... but then
>     >> > still.
>     >> >
>     >> > I have (+-) fixed this in the sources of "R-devel" the
>     >> > development version of R (which should become R 4.0.0  on April
>     >> > 24 as was announced today).
>     >> >
>     >> > Now, things like this (extended) example work nicely :
>     >> >
>     >> > op <- par(xaxs = "i")  # 0 -- 100\%
>     >> > dotchart(t(VADeaths), xlim = c(0,100), bg = "skyblue",
>     >> >          main = "Death Rates in Virginia - 1940", xlab = "rate [ % ]",
>     >> >          ylab = "Grouping:  Age  x   Urbanity . Gender")
>     >> > par(op)
>     >> >
>     >> >
>     >> > Thank you, Alexey, for your report and bug fix suggestion!
>     >> >
>     >> > Best regards,
>     >> >
>     >> > Martin Maechler
>     >> > ETH Zurich and R Core team
>     >> >
>     >> >
>     >> >
>     >> >     > ........... 17:37, Deepayan Sarkar <deepayan.sarkar at gmail.com>:
>     >> >     >>
>     >> >     >> On Mon, Feb 17, 2020 at 10:24 AM Rui Barradas <ruipbarradas at sapo.pt> wrot=
>     >> >     > e:
>     >> >     >> >
>     >> >     >> > Hello,
>     >> >     >> >
>     >> >     >> > Yes, this is definitely a bug.
>     >> >     >>
>     >> >     >> I would argue that the only bug here is that the documentation doesn't
>     >> >     >> say that 'ylab' may not behave as expected.
>     >> >     >>
>     >> >     >> dotchart() is mainly designed for 2-way tables (see the VADeaths
>     >> >     >> example), but it's implementation is really pretty hackish because it
>     >> >     >> has to work within the limited traditional graphics framework. The
>     >> >     >> main problem is that dot plots want to put horizontal y-axis labels
>     >> >     >> (usually derived from factor levels), which are often longer than the
>     >> >     >> default margins, so the margins are modified. Unfortunately they are
>     >> >     >> only re-set on exit, and so the ylab that is plotted inside dotchart()
>     >> >     >> may be clipped. Traditionally, Cleveland dot plots don't have a y-axis
>     >> >     >> label; it's assumed that the factor levels are sufficient (and for
>     >> >     >> 2-way tables, there would be two variables, so there is no sensible
>     >> >     >> default).
>     >> >     >>
>     >> >     >> I doubt that dotchart() is worth fixing (except to maybe disallow
>     >> >     >> ylab). If you want flexibility, use modern grid-based alternatives
>     >> >     >> such as lattice::dotplot() or ggplot2.
>     >> >     >>
>     >> >     >> -Deepayan
>     >> >     >>
>     >> >     >> > Even the matrix plot is puzzling, with a "1" as top row sort-of-label
>     >> >     >> > but no grid line. I'm trying to follow the source code of dotchart but
>     >> >     >> > am yet to understand exactly what it does to decide the margins setting=
>     >> >     > s.
>     >> >     >> >
>     >> >     >> >      if (!(is.null(labels) && is.null(glabels))) {
>     >> >     >> >        nmai <- par("mai")
>     >> >     >> >        nmai[2L] <- nmai[4L] + max(linch + goffset, ginch) +
>     >> >     >> >          0.1
>     >> >     >> >        par(mai = nmai)
>     >> >     >> >      }
>     >> >     >> >
>     >> >     >> > This should be moved to r-devel?
>     >> >     >> >
>     >> >     >> > Rui Barradas
>     >> >     >> >
>     >> >     >> >  03:33 de 17/02/20, Alexey Shipunov escreveu:
>     >> >     >> > > John and Rui, thanks!
>     >> >     >> > >
>     >> >     >> > > However, if we use the proper object, the problem still persists:
>     >> >     >> > >
>     >> >     >> > > dotchart(c("3"=1, "2"=2, "1"=3), ylab="Ylab") # ylab is invisible
>     >> >     >> > > dotchart(c("aa"=1, "b"=2, "cc"=3), ylab="Ylab") # ylab is partly visible (!!!)
>     >> >     >> > > dotchart(c("aaa"=1, "bbb"=2, "ccc"=3), ylab="Ylab") # ylab is well visible
>     >> >     >> > >
>     >> >     >> > > If the object is matrix, ylab is visible:
>     >> >     >> > >
>     >> >     >> > > dotchart(matrix(1:3, dimnames=list(c("aa","bb","cc"), NULL)), ylab="Ylab")
>     >> >     >> > >
>     >> >     >> > > But the ?dotchart explicitly says that "x: either a vector or matrix
>     >> >     >> > > of numeric values" and then "labels: a vector of labels for each
>     >> >     >> > > point.  For vectors the default is to use  "names(x) = ...".
>     >> >     >> > >
>     >> >     >> > > So this is likely a bug. Do you agree?
>     >> >     >> > >
>     >> >     >> > > Alexey
>     >> >     >> > >
>     >> >     >> > > ..... 01:55, Rui Barradas <ruipbarradas at sapo.pt>:
>     >> >     >> > >>
>     >> >     >> > >> Hello,
>     >> >     >> > >>
>     >> >     >> > >> I believe you are wrong, the error is not in dotchart, it's in your
>     >> >     >> > >> code. You assume that to plot an object of class "table" is the same as
>     >> >     >> > >> to plot an object of class "numeric".
>     >> >     >> > >>
>     >> >     >> > >> Inline.
>     >> >     >> > >>
>     >> >     >> > >> =C3=80s 12:21 de 16/02/20, Alexey Shipunov escreveu:
>     >> >     >> > >>> Dear list,
>     >> >     >> > >>>
>     >> >     >> > >>> I have been advised to share these with R-help instead of filling the
>     >> >     >> > >>> bug report:
>     >> >     >> > >>>
>     >> >     >> > >>> 1) dotchart() does not allow to see the left axis title ('ylab') and
>     >> >     >> > >>> cannot change the left margin (outer margin 2) of the plot
>     >> >     >> > >>>
>     >> >     >> > >>> The code:
>     >> >     >> > >>>
>     >> >     >> > >>> aa <- table(c(1, 1, 1, 2, 2, 3))
>     >> >     >> > >>> dotchart(aa, ylab="Ylab") # does not show 'ylab'
>     >> >     >> > >>
>     >> >     >> > >> You are right, it does *not* show 'ylab' but the user is warned.
>     >> >     >> > >>
>     >> >     >> > >>
>     >> >     >> > >> aa <- table(c(1, 1, 1, 2, 2, 3))
>     >> >     >> > >> dotchart(aa, ylab = "Ylab") # does show 'ylab'
>     >> >     >> > >> #Warning message:
>     >> >     >> > >> #In dotchart(aa, ylab = "Ylab") :
>     >> >     >> > >> #  'x' is neither a vector nor a matrix: using as.numeric(x)
>     >> >     >> > >>
>     >> >     >> > >>
>     >> >     >> > >> My code:
>     >> >     >> > >>
>     >> >     >> > >>
>     >> >     >> > >> (mar <- par("mar"))    # new R session
>     >> >     >> > >> #[1] 5.1 4.1 4.1 2.1   # the left margin is 4.1
>     >> >     >> > >>
>     >> >     >> > >> aa <- as.numeric(table(c(1, 1, 1, 2, 2, 3)))
>     >> >     >> > >>
>     >> >     >> > >> dotchart(aa, ylab = "Ylab") # It does show 'ylab'
>     >> >     >> > >> old.par <- par(mar = mar + c(0, 5, 0, 0))
>     >> >     >> > >> par("mar")
>     >> >     >> > >> #[1] 5.1 9.1 4.1 2.1
>     >> >     >> > >>
>     >> >     >> > >> dotchart(aa, ylab = "Ylab")  # The left margin is now 9.1, much bigger
>     >> >     >> > >>
>     >> >     >> > >> par(old.par)                 # It does change the left margin
>     >> >     >> > >> dotchart(aa, ylab = "Ylab")  #  but only when a new graph is plotted.
>     >> >     >> > >>
>     >> >     >> > >>
>     >> >     >> > >>
>     >> >     >> > >>> old.par <- par(mar=c(1, 10, 1, 1)) ; dotchart(aa, ylab="Ylab") ;
>     >> >     >> > >>> par(old.par) # does not change left margin
>     >> >     >> > >>>
>     >> >     >> > >>> Possible solution:
>     >> >     >> > >>>
>     >> >     >> > >>> I researched the problem and think that the dotchart() code will need
>     >> >     >> > >>> few corrections. If there is an interest, I can post it here; or you
>     >> >     >> > >>> can look at the code of shipunov::Dotchart1() function.
>     >> >     >> > >>>
>     >> >     >> > >>> 2) example(hist) includes two "wrong" and "extreme" examples which
>     >> >     >> > >>> slow down and even crash R on some systems; this make it unsuitable
>     >> >     >> > >>> for demonstration in the class and strikes beginners in R who just
>     >> >     >> > >>> want to understand how hist() works. Actually, I did it last week (I
>     >> >     >> > >>> was not aware of these examples), and in the class two computers hang,
>     >> >     >> > >>> and many others were extremely slow.
>     >> >     >> > >>>
>     >> >     >> > >>> The code:
>     >> >     >> > >>>
>     >> >     >> > >>> example(hist)
>     >> >     >> > >>>
>     >> >     >> > >>> Possible solution:
>     >> >     >> > >>>
>     >> >     >> > >>> If R maintainers will enclose parts of "hist" example in \dontrun{},
>     >> >     >> > >>> this will allow to see the code but in the same time will not strike
>     >> >     >> > >>> beginners in R who just
>     >> >     >> > >>> want to understand how hist() works. They will still be possible to
>     >> >     >> > >>> run with example(..., run.dontrun=TRUE).
>     >> >     >> > >>
>     >> >     >> > >> Agree, it's annoying. Sometimes there's a Warning section after the
>     >> >     >> > >> Details section. Maybe such a section could get users' attention to
>     >> >     >> > >> those examples? At least it wouldn't hurt...
>     >> >     >> > >>
>     >> >     >> > >>
>     >> >     >> > >> Hope this helps,
>     >> >     >> > >>
>     >> >     >> > >> Rui Barradas
>     >> >     >> > >>
>     >> >     >> > >>>
>     >> >     >> > >>> With best wishes,
>     >> >     >> > >>>
>     >> >     >> > >>> Alexey Shipunov
>     >> >     >> > >>> ______________________________________________


From te@3rd @end|ng |rom gm@||@com  Fri Jul  3 11:15:58 2020
From: te@3rd @end|ng |rom gm@||@com (Thomas Adams)
Date: Fri, 3 Jul 2020 05:15:58 -0400
Subject: [R] National Weather Service Data
In-Reply-To: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
Message-ID: <CAGxgkWg6pFuKB8hvqiVyn3ui-ErVqciuVcXymqnSCeX=vKmiwQ@mail.gmail.com>

Hi Philip!

I'm a little familiar with rNOMADS... I tried following the example for
'ArchiveGribGrab' using a more recent date

#An example for the Global Forecast System
#Get data for January 1 2014
#Temperature at 2 m above ground
#3 hour prediction
# using GRIB
abbrev <- "gfsanl"
model.date <- 20200601
model.run <- 00
preds <- 3

I got this result...
URL 'https://nomads.ncdc.noaa.gov/data/gfsanl/202006/20200601/': status was
'Couldn't resolve host name'

Even this part of the URL was not found: https://nomads.ncdc.noaa.gov -- so
there is documentation problems.

I did get the first example, using contour to work fine. You probably
should contact Daniel C. Bowman <danny.c.bowman at gmail.com> directly with
issues, because the problems you are seeing may be resolvable only by him...

Best,
Tom

On Thu, Jul 2, 2020 at 6:06 PM Philip <herd_dog at cox.net> wrote:

> Is anyone out there familiar with rNOMADS?  It is a package to get into
> National Weather Service forecasting data with R?
>
> I'm not sure the Weather Service software named wgrib2 loaded correctly
> because some of the stuff won't run and I can't make much sense out of some
> of the output.
>
> Thanks.
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Thomas E Adams, III
1724 Sage Lane
Blacksburg, VA 24060
tea3rd at gmail.com (personal)
tea at terrapredictions.org (work)

1 (513) 739-9512 (cell)

	[[alternative HTML version deleted]]


From kde@@|1 @end|ng |rom @he|||e|d@@c@uk  Fri Jul  3 22:56:32 2020
From: kde@@|1 @end|ng |rom @he|||e|d@@c@uk (Kathan Desai)
Date: Fri, 3 Jul 2020 21:56:32 +0100
Subject: [R] Help with looping a function over a list of dataframes:
Message-ID: <CAH05x1G34LOV5BM=y61ZDumxg2+p4Mq8iEo8xLk=E5HVhNw7GQ@mail.gmail.com>

I have been trying to run a forloop for a function that compares dataframe n
with dataframe n-1, across a list of dataframes. It does this by checking
each midpoint of dataframe n with each midpoint of dataframe n-1. This is
done to make up for an disparity in row length. The idea of this code is to
identify any objects that are stationary, and assign them an id of 1, and
the dynamic objects are assigned an id of 0 (examples can be found below).


*This is what i have so far:*
for(i in seq_along(list_df)){
   list_df$position_tab_[[i]]$ID <-
     unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
                 ifelse(any(abs(x - list_df$position_tab_[[i-1]]$midpoint)
<= 1),1,0)
            ))
}

There is no error message being produced so theres nothing to debug, i am
quite new to R programming in general so excuse any silly mistakes i may
have made. The function doesnt seem to be adding the ID columns and
comparing the data as it should.

my list of dataframes contain dataframes named: position_tab_1,
position_tab_2 .... position_tab_121. Each position_tab represents a
timepoints, so in total there are 121 timepoints (frames). I need the loop
to run so that pos_tab_2 compares to pos_tab_1 and this continues all the
way to pos_tab_121 comparing to pos_tab_120.

The function adds a column named "id" to each of these dataframes as it
compares to the dataframe before it, so all dataframes apart from
position_tab_1 (as it has nothing to compare to) should have this added.


*Some of my data (first 10 dataframes in list):*
> dput(list_df[1:10])
list(position_tab_1 = structure(list(Object = c(2666L, 2668L,
2671L, 2674L, 2676L, 2677L, 2678L, 2679L, 2680L, 2682L, 2683L,
2684L, 2685L, 2686L, 2687L, 2689L, 2692L, 2693L, 2694L, 2695L,
2696L), minimum = c(4L, 39L, 147L, 224L, 419L, 531L, 595L, 641L,
669L, 723L, 810L, 836L, 907L, 978L, 1061L, 1129L, 1290L, 1519L,
1749L, 1843L, 1897L), maximum = c(22L, 85L, 173L, 242L, 449L,
587L, 627L, 655L, 702L, 740L, 828L, 890L, 923L, 1024L, 1086L,
1144L, 1302L, 1544L, 1780L, 1870L, 1925L), midpoint = c(13, 62,
160, 233, 434, 559, 611, 648, 685.5, 731.5, 819, 863, 915, 1001,
1073.5, 1136.5, 1296, 1531.5, 1764.5, 1856.5, 1911)), row.names = c(NA,
-21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_2 =
structure(list(
    Object = c(2645L, 2646L, 2650L, 2652L, 2655L, 2656L, 2657L,
    2658L, 2659L, 2661L, 2662L, 2663L, 2664L, 2665L, 2667L, 2670L,
    2675L, 2681L, 2688L, 2690L, 2691L), minimum = c(4L, 40L,
    147L, 224L, 415L, 532L, 595L, 641L, 670L, 722L, 811L, 835L,
    907L, 978L, 1061L, 1128L, 1289L, 1520L, 1748L, 1843L, 1897L
    ), maximum = c(22L, 85L, 173L, 242L, 445L, 588L, 627L, 655L,
    702L, 739L, 828L, 891L, 923L, 1022L, 1085L, 1143L, 1302L,
    1544L, 1779L, 1870L, 1925L), midpoint = c(13, 62.5, 160,
    233, 430, 560, 611, 648, 686, 730.5, 819.5, 863, 915, 1000,
    1073, 1135.5, 1295.5, 1532, 1763.5, 1856.5, 1911)), row.names = c(NA,
-21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_3 =
structure(list(
    Object = c(2623L, 2624L, 2627L, 2631L, 2633L, 2635L, 2636L,
    2637L, 2638L, 2640L, 2641L, 2642L, 2643L, 2644L, 2647L, 2649L,
    2654L, 2660L, 2669L, 2672L, 2673L), minimum = c(3L, 39L,
    149L, 223L, 402L, 539L, 594L, 639L, 669L, 722L, 811L, 834L,
    907L, 979L, 1060L, 1129L, 1289L, 1520L, 1749L, 1842L, 1897L
    ), maximum = c(22L, 86L, 175L, 241L, 431L, 587L, 627L, 653L,
    700L, 738L, 828L, 894L, 925L, 1021L, 1084L, 1144L, 1302L,
    1544L, 1779L, 1869L, 1925L), midpoint = c(12.5, 62.5, 162,
    232, 416.5, 563, 610.5, 646, 684.5, 730, 819.5, 864, 916,
    1000, 1072, 1136.5, 1295.5, 1532, 1764, 1855.5, 1911)), row.names =
c(NA,
-21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_4 =
structure(list(
    Object = c(2600L, 2604L, 2606L, 2609L, 2611L, 2613L, 2614L,
    2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L, 2626L, 2628L,
    2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L, 42L,
    142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
    908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L
    ), maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
    701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
    1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
    232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
    1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names = c(NA,
-21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_5 =
structure(list(
    Object = c(2580L, 2581L, 2585L, 2586L, 2589L, 2590L, 2592L,
    2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L, 2601L, 2603L,
    2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L), minimum = c(3L,
    43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L, 808L, 836L,
    861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L, 1748L,
    1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L, 419L,
    629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L, 1050L,
    1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L),
    midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
    818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5,
    1531.5, 1764, 1855.5, 1909, 2148)), row.names = c(NA, -23L
), class = c("tbl_df", "tbl", "data.frame")), position_tab_6 =
structure(list(
    Object = c(2555L, 2559L, 2562L, 2563L, 2564L, 2567L, 2569L,
    2570L, 2571L, 2572L, 2573L, 2574L, 2575L, 2576L, 2577L, 2579L,
    2583L, 2587L, 2591L, 2602L, 2607L, 2608L, 2612L), minimum = c(4L,
    45L, 123L, 154L, 224L, 390L, 546L, 600L, 643L, 669L, 720L,
    804L, 836L, 908L, 967L, 1058L, 1129L, 1289L, 1519L, 1748L,
    1843L, 1893L, 2147L), maximum = c(23L, 86L, 150L, 171L, 241L,
    419L, 589L, 636L, 657L, 701L, 738L, 827L, 879L, 925L, 1011L,
    1084L, 1144L, 1301L, 1543L, 1780L, 1871L, 1924L, 2148L),
    midpoint = c(13.5, 65.5, 136.5, 162.5, 232.5, 404.5, 567.5,
    618, 650, 685, 729, 815.5, 857.5, 916.5, 989, 1071, 1136.5,
    1295, 1531, 1764, 1857, 1908.5, 2147.5)), row.names = c(NA,
-23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_7 =
structure(list(
    Object = c(2537L, 2539L, 2540L, 2541L, 2542L, 2544L, 2546L,
    2547L, 2548L, 2549L, 2550L, 2551L, 2552L, 2554L, 2556L, 2558L,
    2560L, 2565L, 2568L, 2578L, 2582L, 2584L, 2588L), minimum = c(3L,
    45L, 122L, 156L, 224L, 387L, 546L, 601L, 669L, 719L, 803L,
    837L, 908L, 959L, 1059L, 1096L, 1128L, 1289L, 1519L, 1748L,
    1844L, 1892L, 2147L), maximum = c(22L, 86L, 147L, 172L, 241L,
    415L, 590L, 656L, 699L, 738L, 830L, 871L, 924L, 1014L, 1082L,
    1119L, 1144L, 1301L, 1543L, 1781L, 1872L, 1925L, 2148L),
    midpoint = c(12.5, 65.5, 134.5, 164, 232.5, 401, 568, 628.5,
    684, 728.5, 816.5, 854, 916, 986.5, 1070.5, 1107.5, 1136,
    1295, 1531, 1764.5, 1858, 1908.5, 2147.5)), row.names = c(NA,
-23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_8 =
structure(list(
    Object = c(2514L, 2517L, 2519L, 2520L, 2521L, 2523L, 2525L,
    2526L, 2527L, 2528L, 2529L, 2530L, 2531L, 2532L, 2533L, 2534L,
    2536L, 2543L, 2545L, 2553L, 2557L, 2561L, 2566L), minimum = c(5L,
    44L, 121L, 153L, 224L, 380L, 546L, 603L, 668L, 721L, 802L,
    841L, 907L, 960L, 1006L, 1060L, 1106L, 1288L, 1518L, 1748L,
    1843L, 1893L, 2148L), maximum = c(23L, 86L, 146L, 170L, 242L,
    409L, 588L, 655L, 699L, 738L, 830L, 872L, 924L, 994L, 1029L,
    1084L, 1143L, 1302L, 1543L, 1781L, 1870L, 1925L, 2148L),
    midpoint = c(14, 65, 133.5, 161.5, 233, 394.5, 567, 629,
    683.5, 729.5, 816, 856.5, 915.5, 977, 1017.5, 1072, 1124.5,
    1295, 1530.5, 1764.5, 1856.5, 1909, 2148)), row.names = c(NA,
-23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_9 =
structure(list(
    Object = c(2492L, 2493L, 2497L, 2498L, 2499L, 2501L, 2503L,
    2504L, 2505L, 2506L, 2507L, 2508L, 2509L, 2510L, 2511L, 2513L,
    2516L, 2522L, 2524L, 2532L, 2535L, 2538L), minimum = c(6L,
    44L, 111L, 149L, 224L, 375L, 548L, 596L, 668L, 722L, 800L,
    840L, 908L, 960L, 1005L, 1058L, 1127L, 1289L, 1519L, 1748L,
    1842L, 1891L), maximum = c(24L, 81L, 137L, 167L, 242L, 403L,
    589L, 656L, 699L, 738L, 828L, 872L, 925L, 994L, 1028L, 1081L,
    1149L, 1302L, 1544L, 1780L, 1868L, 1924L), midpoint = c(15,
    62.5, 124, 158, 233, 389, 568.5, 626, 683.5, 730, 814, 856,
    916.5, 977, 1016.5, 1069.5, 1138, 1295.5, 1531.5, 1764, 1855,
    1907.5)), row.names = c(NA, -22L), class = c("tbl_df", "tbl",
"data.frame")), position_tab_10 = structure(list(Object = c(2469L,
2471L, 2474L, 2475L, 2476L, 2478L, 2481L, 2482L, 2483L, 2484L,
2485L, 2486L, 2487L, 2488L, 2489L, 2491L, 2495L, 2500L, 2502L,
2512L, 2515L, 2518L), minimum = c(6L, 38L, 109L, 147L, 223L,
363L, 548L, 597L, 668L, 719L, 803L, 839L, 908L, 958L, 1004L,
1058L, 1126L, 1288L, 1519L, 1746L, 1841L, 1892L), maximum = c(24L,
76L, 134L, 165L, 240L, 394L, 591L, 656L, 698L, 737L, 829L, 869L,
924L, 996L, 1027L, 1081L, 1147L, 1301L, 1543L, 1781L, 1868L,
1925L), midpoint = c(15, 57, 121.5, 156, 231.5, 378.5, 569.5,
626.5, 683, 728, 816, 854, 916, 977, 1015.5, 1069.5, 1136.5,
1294.5, 1531, 1763.5, 1854.5, 1908.5)), row.names = c(NA, -22L
), class = c("tbl_df", "tbl", "data.frame")))

*What is produced when running the base code without any loops:*

This is the base code without me trying to loop it in anyway, below is what
it produces when its used with dataframe 4 and 5:

#the code:
list_df$position_tab_5$ID <- unlist(lapply(list_df$position_tab_5$midpoint,
function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <= 1),1,0)))

##position_tab_5 after manipulations have occured:
structure(list(Object = c(2580L, 2581L, 2585L, 2586L, 2589L,
2590L, 2592L, 2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L,
2601L, 2603L, 2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L
), minimum = c(3L, 43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L,
808L, 836L, 861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L,
1748L, 1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L,
419L, 629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L,
1050L, 1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L
), midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5, 1531.5,
1764, 1855.5, 1909, 2148), ID = c(1, 1, 0, 1, 0, 0, 0, 1, 1,
1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0)), row.names = c(NA,
-23L), class = c("tbl_df", "tbl", "data.frame"))

#position_tab_4 (the DF pos_tab_5 is being compared to)
structure(list(Object = c(2600L, 2604L, 2606L, 2609L, 2611L,
2613L, 2614L, 2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L,
2626L, 2628L, 2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L,
42L, 142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L),
    maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
    701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
    1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
    232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
    1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names = c(NA,
-21L), class = c("tbl_df", "tbl", "data.frame"))

*Appreciate any help, anyone can provide!*

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sat Jul  4 12:14:40 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 4 Jul 2020 20:14:40 +1000
Subject: [R] Help with looping a function over a list of dataframes:
In-Reply-To: <CAH05x1G34LOV5BM=y61ZDumxg2+p4Mq8iEo8xLk=E5HVhNw7GQ@mail.gmail.com>
References: <CAH05x1G34LOV5BM=y61ZDumxg2+p4Mq8iEo8xLk=E5HVhNw7GQ@mail.gmail.com>
Message-ID: <CA+8X3fVb5aAXQUVLkTrE7qCxRZjCEqb5XDc6s=MurFrebUSj8A@mail.gmail.com>

Hi Kathan,
This is a very lazy answer as I haven't tested it. I think you will
need to wrap your loop in a function and return the modified list_df
to assign it like this:

add_IDs<-function(xdf) {
 for(i in seq_along(xdf)) {
  xdf$position_tab_[[i]]$ID <-
   unlist(lapply(xdf$position_tab_[[i]]$midpoint, function(x)
    ifelse(any(abs(x - xdf$position_tab_[[i-1]]$midpoint)<= 1),1,0)))
 }
 return(xdf)
}
list_df<-add_IDs(list_df)

Jim

On Sat, Jul 4, 2020 at 4:48 PM Kathan Desai <kdesai1 at sheffield.ac.uk> wrote:
>
> I have been trying to run a forloop for a function that compares dataframe n
> with dataframe n-1, across a list of dataframes. It does this by checking
> each midpoint of dataframe n with each midpoint of dataframe n-1. This is
> done to make up for an disparity in row length. The idea of this code is to
> identify any objects that are stationary, and assign them an id of 1, and
> the dynamic objects are assigned an id of 0 (examples can be found below).
>
>
> *This is what i have so far:*
> for(i in seq_along(list_df)){
>    list_df$position_tab_[[i]]$ID <-
>      unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
>                  ifelse(any(abs(x - list_df$position_tab_[[i-1]]$midpoint)
> <= 1),1,0)
>             ))
> }
>
> There is no error message being produced so theres nothing to debug, i am
> quite new to R programming in general so excuse any silly mistakes i may
> have made. The function doesnt seem to be adding the ID columns and
> comparing the data as it should.
>
> my list of dataframes contain dataframes named: position_tab_1,
> position_tab_2 .... position_tab_121. Each position_tab represents a
> timepoints, so in total there are 121 timepoints (frames). I need the loop
> to run so that pos_tab_2 compares to pos_tab_1 and this continues all the
> way to pos_tab_121 comparing to pos_tab_120.
>
> The function adds a column named "id" to each of these dataframes as it
> compares to the dataframe before it, so all dataframes apart from
> position_tab_1 (as it has nothing to compare to) should have this added.
>
>
> *Some of my data (first 10 dataframes in list):*
> > dput(list_df[1:10])
> list(position_tab_1 = structure(list(Object = c(2666L, 2668L,
> 2671L, 2674L, 2676L, 2677L, 2678L, 2679L, 2680L, 2682L, 2683L,
> 2684L, 2685L, 2686L, 2687L, 2689L, 2692L, 2693L, 2694L, 2695L,
> 2696L), minimum = c(4L, 39L, 147L, 224L, 419L, 531L, 595L, 641L,
> 669L, 723L, 810L, 836L, 907L, 978L, 1061L, 1129L, 1290L, 1519L,
> 1749L, 1843L, 1897L), maximum = c(22L, 85L, 173L, 242L, 449L,
> 587L, 627L, 655L, 702L, 740L, 828L, 890L, 923L, 1024L, 1086L,
> 1144L, 1302L, 1544L, 1780L, 1870L, 1925L), midpoint = c(13, 62,
> 160, 233, 434, 559, 611, 648, 685.5, 731.5, 819, 863, 915, 1001,
> 1073.5, 1136.5, 1296, 1531.5, 1764.5, 1856.5, 1911)), row.names = c(NA,
> -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_2 =
> structure(list(
>     Object = c(2645L, 2646L, 2650L, 2652L, 2655L, 2656L, 2657L,
>     2658L, 2659L, 2661L, 2662L, 2663L, 2664L, 2665L, 2667L, 2670L,
>     2675L, 2681L, 2688L, 2690L, 2691L), minimum = c(4L, 40L,
>     147L, 224L, 415L, 532L, 595L, 641L, 670L, 722L, 811L, 835L,
>     907L, 978L, 1061L, 1128L, 1289L, 1520L, 1748L, 1843L, 1897L
>     ), maximum = c(22L, 85L, 173L, 242L, 445L, 588L, 627L, 655L,
>     702L, 739L, 828L, 891L, 923L, 1022L, 1085L, 1143L, 1302L,
>     1544L, 1779L, 1870L, 1925L), midpoint = c(13, 62.5, 160,
>     233, 430, 560, 611, 648, 686, 730.5, 819.5, 863, 915, 1000,
>     1073, 1135.5, 1295.5, 1532, 1763.5, 1856.5, 1911)), row.names = c(NA,
> -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_3 =
> structure(list(
>     Object = c(2623L, 2624L, 2627L, 2631L, 2633L, 2635L, 2636L,
>     2637L, 2638L, 2640L, 2641L, 2642L, 2643L, 2644L, 2647L, 2649L,
>     2654L, 2660L, 2669L, 2672L, 2673L), minimum = c(3L, 39L,
>     149L, 223L, 402L, 539L, 594L, 639L, 669L, 722L, 811L, 834L,
>     907L, 979L, 1060L, 1129L, 1289L, 1520L, 1749L, 1842L, 1897L
>     ), maximum = c(22L, 86L, 175L, 241L, 431L, 587L, 627L, 653L,
>     700L, 738L, 828L, 894L, 925L, 1021L, 1084L, 1144L, 1302L,
>     1544L, 1779L, 1869L, 1925L), midpoint = c(12.5, 62.5, 162,
>     232, 416.5, 563, 610.5, 646, 684.5, 730, 819.5, 864, 916,
>     1000, 1072, 1136.5, 1295.5, 1532, 1764, 1855.5, 1911)), row.names =
> c(NA,
> -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_4 =
> structure(list(
>     Object = c(2600L, 2604L, 2606L, 2609L, 2611L, 2613L, 2614L,
>     2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L, 2626L, 2628L,
>     2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L, 42L,
>     142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
>     908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L
>     ), maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
>     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
>     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
>     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
>     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names = c(NA,
> -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_5 =
> structure(list(
>     Object = c(2580L, 2581L, 2585L, 2586L, 2589L, 2590L, 2592L,
>     2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L, 2601L, 2603L,
>     2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L), minimum = c(3L,
>     43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L, 808L, 836L,
>     861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L, 1748L,
>     1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L, 419L,
>     629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L, 1050L,
>     1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L),
>     midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
>     818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5,
>     1531.5, 1764, 1855.5, 1909, 2148)), row.names = c(NA, -23L
> ), class = c("tbl_df", "tbl", "data.frame")), position_tab_6 =
> structure(list(
>     Object = c(2555L, 2559L, 2562L, 2563L, 2564L, 2567L, 2569L,
>     2570L, 2571L, 2572L, 2573L, 2574L, 2575L, 2576L, 2577L, 2579L,
>     2583L, 2587L, 2591L, 2602L, 2607L, 2608L, 2612L), minimum = c(4L,
>     45L, 123L, 154L, 224L, 390L, 546L, 600L, 643L, 669L, 720L,
>     804L, 836L, 908L, 967L, 1058L, 1129L, 1289L, 1519L, 1748L,
>     1843L, 1893L, 2147L), maximum = c(23L, 86L, 150L, 171L, 241L,
>     419L, 589L, 636L, 657L, 701L, 738L, 827L, 879L, 925L, 1011L,
>     1084L, 1144L, 1301L, 1543L, 1780L, 1871L, 1924L, 2148L),
>     midpoint = c(13.5, 65.5, 136.5, 162.5, 232.5, 404.5, 567.5,
>     618, 650, 685, 729, 815.5, 857.5, 916.5, 989, 1071, 1136.5,
>     1295, 1531, 1764, 1857, 1908.5, 2147.5)), row.names = c(NA,
> -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_7 =
> structure(list(
>     Object = c(2537L, 2539L, 2540L, 2541L, 2542L, 2544L, 2546L,
>     2547L, 2548L, 2549L, 2550L, 2551L, 2552L, 2554L, 2556L, 2558L,
>     2560L, 2565L, 2568L, 2578L, 2582L, 2584L, 2588L), minimum = c(3L,
>     45L, 122L, 156L, 224L, 387L, 546L, 601L, 669L, 719L, 803L,
>     837L, 908L, 959L, 1059L, 1096L, 1128L, 1289L, 1519L, 1748L,
>     1844L, 1892L, 2147L), maximum = c(22L, 86L, 147L, 172L, 241L,
>     415L, 590L, 656L, 699L, 738L, 830L, 871L, 924L, 1014L, 1082L,
>     1119L, 1144L, 1301L, 1543L, 1781L, 1872L, 1925L, 2148L),
>     midpoint = c(12.5, 65.5, 134.5, 164, 232.5, 401, 568, 628.5,
>     684, 728.5, 816.5, 854, 916, 986.5, 1070.5, 1107.5, 1136,
>     1295, 1531, 1764.5, 1858, 1908.5, 2147.5)), row.names = c(NA,
> -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_8 =
> structure(list(
>     Object = c(2514L, 2517L, 2519L, 2520L, 2521L, 2523L, 2525L,
>     2526L, 2527L, 2528L, 2529L, 2530L, 2531L, 2532L, 2533L, 2534L,
>     2536L, 2543L, 2545L, 2553L, 2557L, 2561L, 2566L), minimum = c(5L,
>     44L, 121L, 153L, 224L, 380L, 546L, 603L, 668L, 721L, 802L,
>     841L, 907L, 960L, 1006L, 1060L, 1106L, 1288L, 1518L, 1748L,
>     1843L, 1893L, 2148L), maximum = c(23L, 86L, 146L, 170L, 242L,
>     409L, 588L, 655L, 699L, 738L, 830L, 872L, 924L, 994L, 1029L,
>     1084L, 1143L, 1302L, 1543L, 1781L, 1870L, 1925L, 2148L),
>     midpoint = c(14, 65, 133.5, 161.5, 233, 394.5, 567, 629,
>     683.5, 729.5, 816, 856.5, 915.5, 977, 1017.5, 1072, 1124.5,
>     1295, 1530.5, 1764.5, 1856.5, 1909, 2148)), row.names = c(NA,
> -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_9 =
> structure(list(
>     Object = c(2492L, 2493L, 2497L, 2498L, 2499L, 2501L, 2503L,
>     2504L, 2505L, 2506L, 2507L, 2508L, 2509L, 2510L, 2511L, 2513L,
>     2516L, 2522L, 2524L, 2532L, 2535L, 2538L), minimum = c(6L,
>     44L, 111L, 149L, 224L, 375L, 548L, 596L, 668L, 722L, 800L,
>     840L, 908L, 960L, 1005L, 1058L, 1127L, 1289L, 1519L, 1748L,
>     1842L, 1891L), maximum = c(24L, 81L, 137L, 167L, 242L, 403L,
>     589L, 656L, 699L, 738L, 828L, 872L, 925L, 994L, 1028L, 1081L,
>     1149L, 1302L, 1544L, 1780L, 1868L, 1924L), midpoint = c(15,
>     62.5, 124, 158, 233, 389, 568.5, 626, 683.5, 730, 814, 856,
>     916.5, 977, 1016.5, 1069.5, 1138, 1295.5, 1531.5, 1764, 1855,
>     1907.5)), row.names = c(NA, -22L), class = c("tbl_df", "tbl",
> "data.frame")), position_tab_10 = structure(list(Object = c(2469L,
> 2471L, 2474L, 2475L, 2476L, 2478L, 2481L, 2482L, 2483L, 2484L,
> 2485L, 2486L, 2487L, 2488L, 2489L, 2491L, 2495L, 2500L, 2502L,
> 2512L, 2515L, 2518L), minimum = c(6L, 38L, 109L, 147L, 223L,
> 363L, 548L, 597L, 668L, 719L, 803L, 839L, 908L, 958L, 1004L,
> 1058L, 1126L, 1288L, 1519L, 1746L, 1841L, 1892L), maximum = c(24L,
> 76L, 134L, 165L, 240L, 394L, 591L, 656L, 698L, 737L, 829L, 869L,
> 924L, 996L, 1027L, 1081L, 1147L, 1301L, 1543L, 1781L, 1868L,
> 1925L), midpoint = c(15, 57, 121.5, 156, 231.5, 378.5, 569.5,
> 626.5, 683, 728, 816, 854, 916, 977, 1015.5, 1069.5, 1136.5,
> 1294.5, 1531, 1763.5, 1854.5, 1908.5)), row.names = c(NA, -22L
> ), class = c("tbl_df", "tbl", "data.frame")))
>
> *What is produced when running the base code without any loops:*
>
> This is the base code without me trying to loop it in anyway, below is what
> it produces when its used with dataframe 4 and 5:
>
> #the code:
> list_df$position_tab_5$ID <- unlist(lapply(list_df$position_tab_5$midpoint,
> function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <= 1),1,0)))
>
> ##position_tab_5 after manipulations have occured:
> structure(list(Object = c(2580L, 2581L, 2585L, 2586L, 2589L,
> 2590L, 2592L, 2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L,
> 2601L, 2603L, 2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L
> ), minimum = c(3L, 43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L,
> 808L, 836L, 861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L,
> 1748L, 1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L,
> 419L, 629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L,
> 1050L, 1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L
> ), midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
> 818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5, 1531.5,
> 1764, 1855.5, 1909, 2148), ID = c(1, 1, 0, 1, 0, 0, 0, 1, 1,
> 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0)), row.names = c(NA,
> -23L), class = c("tbl_df", "tbl", "data.frame"))
>
> #position_tab_4 (the DF pos_tab_5 is being compared to)
> structure(list(Object = c(2600L, 2604L, 2606L, 2609L, 2611L,
> 2613L, 2614L, 2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L,
> 2626L, 2628L, 2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L,
> 42L, 142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
> 908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L),
>     maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
>     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
>     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
>     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
>     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names = c(NA,
> -21L), class = c("tbl_df", "tbl", "data.frame"))
>
> *Appreciate any help, anyone can provide!*
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kde@@|1 @end|ng |rom @he|||e|d@@c@uk  Sat Jul  4 15:33:07 2020
From: kde@@|1 @end|ng |rom @he|||e|d@@c@uk (Kathan Desai)
Date: Sat, 4 Jul 2020 14:33:07 +0100
Subject: [R] Fwd:  Help with looping a function over a list of dataframes:
In-Reply-To: <CAH05x1FBaqFynVU_8BQWC=s+4mehS-6pF9NcVKMQ3px9u1HH3g@mail.gmail.com>
References: <CAH05x1G34LOV5BM=y61ZDumxg2+p4Mq8iEo8xLk=E5HVhNw7GQ@mail.gmail.com>
 <CA+8X3fVb5aAXQUVLkTrE7qCxRZjCEqb5XDc6s=MurFrebUSj8A@mail.gmail.com>
 <CAH05x1FBaqFynVU_8BQWC=s+4mehS-6pF9NcVKMQ3px9u1HH3g@mail.gmail.com>
Message-ID: <CAH05x1G668Hs9cvXaJAqCNjcHUwWppjq91qDnZwMALUVX88rfA@mail.gmail.com>

---------- Forwarded message ---------
From: Kathan Desai <kdesai1 at sheffield.ac.uk>
Date: Sat, 4 Jul 2020 at 14:31
Subject: Re: [R] Help with looping a function over a list of dataframes:
To: Jim Lemon <drjimlemon at gmail.com>


Hi Jim,

Thankyou for your reply, I tried the function you suggested and it
doesn't seem to work. There are again no error messages produced, however
the transformation to each position_tab_n table isn't being applied.

Cheers,
Kathan


On Sat, 4 Jul 2020 at 11:14, Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Kathan,
> This is a very lazy answer as I haven't tested it. I think you will
> need to wrap your loop in a function and return the modified list_df
> to assign it like this:
>
> add_IDs<-function(xdf) {
>  for(i in seq_along(xdf)) {
>   xdf$position_tab_[[i]]$ID <-
>    unlist(lapply(xdf$position_tab_[[i]]$midpoint, function(x)
>     ifelse(any(abs(x - xdf$position_tab_[[i-1]]$midpoint)<= 1),1,0)))
>  }
>  return(xdf)
> }
> list_df<-add_IDs(list_df)
>
> Jim
>
> On Sat, Jul 4, 2020 at 4:48 PM Kathan Desai <kdesai1 at sheffield.ac.uk>
> wrote:
> >
> > I have been trying to run a forloop for a function that compares
> dataframe n
> > with dataframe n-1, across a list of dataframes. It does this by checking
> > each midpoint of dataframe n with each midpoint of dataframe n-1. This is
> > done to make up for an disparity in row length. The idea of this code is
> to
> > identify any objects that are stationary, and assign them an id of 1, and
> > the dynamic objects are assigned an id of 0 (examples can be found
> below).
> >
> >
> > *This is what i have so far:*
> > for(i in seq_along(list_df)){
> >    list_df$position_tab_[[i]]$ID <-
> >      unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
> >                  ifelse(any(abs(x -
> list_df$position_tab_[[i-1]]$midpoint)
> > <= 1),1,0)
> >             ))
> > }
> >
> > There is no error message being produced so theres nothing to debug, i am
> > quite new to R programming in general so excuse any silly mistakes i may
> > have made. The function doesnt seem to be adding the ID columns and
> > comparing the data as it should.
> >
> > my list of dataframes contain dataframes named: position_tab_1,
> > position_tab_2 .... position_tab_121. Each position_tab represents a
> > timepoints, so in total there are 121 timepoints (frames). I need the
> loop
> > to run so that pos_tab_2 compares to pos_tab_1 and this continues all the
> > way to pos_tab_121 comparing to pos_tab_120.
> >
> > The function adds a column named "id" to each of these dataframes as it
> > compares to the dataframe before it, so all dataframes apart from
> > position_tab_1 (as it has nothing to compare to) should have this added.
> >
> >
> > *Some of my data (first 10 dataframes in list):*
> > > dput(list_df[1:10])
> > list(position_tab_1 = structure(list(Object = c(2666L, 2668L,
> > 2671L, 2674L, 2676L, 2677L, 2678L, 2679L, 2680L, 2682L, 2683L,
> > 2684L, 2685L, 2686L, 2687L, 2689L, 2692L, 2693L, 2694L, 2695L,
> > 2696L), minimum = c(4L, 39L, 147L, 224L, 419L, 531L, 595L, 641L,
> > 669L, 723L, 810L, 836L, 907L, 978L, 1061L, 1129L, 1290L, 1519L,
> > 1749L, 1843L, 1897L), maximum = c(22L, 85L, 173L, 242L, 449L,
> > 587L, 627L, 655L, 702L, 740L, 828L, 890L, 923L, 1024L, 1086L,
> > 1144L, 1302L, 1544L, 1780L, 1870L, 1925L), midpoint = c(13, 62,
> > 160, 233, 434, 559, 611, 648, 685.5, 731.5, 819, 863, 915, 1001,
> > 1073.5, 1136.5, 1296, 1531.5, 1764.5, 1856.5, 1911)), row.names = c(NA,
> > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_2 =
> > structure(list(
> >     Object = c(2645L, 2646L, 2650L, 2652L, 2655L, 2656L, 2657L,
> >     2658L, 2659L, 2661L, 2662L, 2663L, 2664L, 2665L, 2667L, 2670L,
> >     2675L, 2681L, 2688L, 2690L, 2691L), minimum = c(4L, 40L,
> >     147L, 224L, 415L, 532L, 595L, 641L, 670L, 722L, 811L, 835L,
> >     907L, 978L, 1061L, 1128L, 1289L, 1520L, 1748L, 1843L, 1897L
> >     ), maximum = c(22L, 85L, 173L, 242L, 445L, 588L, 627L, 655L,
> >     702L, 739L, 828L, 891L, 923L, 1022L, 1085L, 1143L, 1302L,
> >     1544L, 1779L, 1870L, 1925L), midpoint = c(13, 62.5, 160,
> >     233, 430, 560, 611, 648, 686, 730.5, 819.5, 863, 915, 1000,
> >     1073, 1135.5, 1295.5, 1532, 1763.5, 1856.5, 1911)), row.names = c(NA,
> > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_3 =
> > structure(list(
> >     Object = c(2623L, 2624L, 2627L, 2631L, 2633L, 2635L, 2636L,
> >     2637L, 2638L, 2640L, 2641L, 2642L, 2643L, 2644L, 2647L, 2649L,
> >     2654L, 2660L, 2669L, 2672L, 2673L), minimum = c(3L, 39L,
> >     149L, 223L, 402L, 539L, 594L, 639L, 669L, 722L, 811L, 834L,
> >     907L, 979L, 1060L, 1129L, 1289L, 1520L, 1749L, 1842L, 1897L
> >     ), maximum = c(22L, 86L, 175L, 241L, 431L, 587L, 627L, 653L,
> >     700L, 738L, 828L, 894L, 925L, 1021L, 1084L, 1144L, 1302L,
> >     1544L, 1779L, 1869L, 1925L), midpoint = c(12.5, 62.5, 162,
> >     232, 416.5, 563, 610.5, 646, 684.5, 730, 819.5, 864, 916,
> >     1000, 1072, 1136.5, 1295.5, 1532, 1764, 1855.5, 1911)), row.names =
> > c(NA,
> > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_4 =
> > structure(list(
> >     Object = c(2600L, 2604L, 2606L, 2609L, 2611L, 2613L, 2614L,
> >     2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L, 2626L, 2628L,
> >     2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L, 42L,
> >     142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
> >     908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L
> >     ), maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
> >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
> >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
> >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
> >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names = c(NA,
> > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_5 =
> > structure(list(
> >     Object = c(2580L, 2581L, 2585L, 2586L, 2589L, 2590L, 2592L,
> >     2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L, 2601L, 2603L,
> >     2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L), minimum = c(3L,
> >     43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L, 808L, 836L,
> >     861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L, 1748L,
> >     1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L, 419L,
> >     629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L, 1050L,
> >     1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L),
> >     midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
> >     818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5,
> >     1531.5, 1764, 1855.5, 1909, 2148)), row.names = c(NA, -23L
> > ), class = c("tbl_df", "tbl", "data.frame")), position_tab_6 =
> > structure(list(
> >     Object = c(2555L, 2559L, 2562L, 2563L, 2564L, 2567L, 2569L,
> >     2570L, 2571L, 2572L, 2573L, 2574L, 2575L, 2576L, 2577L, 2579L,
> >     2583L, 2587L, 2591L, 2602L, 2607L, 2608L, 2612L), minimum = c(4L,
> >     45L, 123L, 154L, 224L, 390L, 546L, 600L, 643L, 669L, 720L,
> >     804L, 836L, 908L, 967L, 1058L, 1129L, 1289L, 1519L, 1748L,
> >     1843L, 1893L, 2147L), maximum = c(23L, 86L, 150L, 171L, 241L,
> >     419L, 589L, 636L, 657L, 701L, 738L, 827L, 879L, 925L, 1011L,
> >     1084L, 1144L, 1301L, 1543L, 1780L, 1871L, 1924L, 2148L),
> >     midpoint = c(13.5, 65.5, 136.5, 162.5, 232.5, 404.5, 567.5,
> >     618, 650, 685, 729, 815.5, 857.5, 916.5, 989, 1071, 1136.5,
> >     1295, 1531, 1764, 1857, 1908.5, 2147.5)), row.names = c(NA,
> > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_7 =
> > structure(list(
> >     Object = c(2537L, 2539L, 2540L, 2541L, 2542L, 2544L, 2546L,
> >     2547L, 2548L, 2549L, 2550L, 2551L, 2552L, 2554L, 2556L, 2558L,
> >     2560L, 2565L, 2568L, 2578L, 2582L, 2584L, 2588L), minimum = c(3L,
> >     45L, 122L, 156L, 224L, 387L, 546L, 601L, 669L, 719L, 803L,
> >     837L, 908L, 959L, 1059L, 1096L, 1128L, 1289L, 1519L, 1748L,
> >     1844L, 1892L, 2147L), maximum = c(22L, 86L, 147L, 172L, 241L,
> >     415L, 590L, 656L, 699L, 738L, 830L, 871L, 924L, 1014L, 1082L,
> >     1119L, 1144L, 1301L, 1543L, 1781L, 1872L, 1925L, 2148L),
> >     midpoint = c(12.5, 65.5, 134.5, 164, 232.5, 401, 568, 628.5,
> >     684, 728.5, 816.5, 854, 916, 986.5, 1070.5, 1107.5, 1136,
> >     1295, 1531, 1764.5, 1858, 1908.5, 2147.5)), row.names = c(NA,
> > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_8 =
> > structure(list(
> >     Object = c(2514L, 2517L, 2519L, 2520L, 2521L, 2523L, 2525L,
> >     2526L, 2527L, 2528L, 2529L, 2530L, 2531L, 2532L, 2533L, 2534L,
> >     2536L, 2543L, 2545L, 2553L, 2557L, 2561L, 2566L), minimum = c(5L,
> >     44L, 121L, 153L, 224L, 380L, 546L, 603L, 668L, 721L, 802L,
> >     841L, 907L, 960L, 1006L, 1060L, 1106L, 1288L, 1518L, 1748L,
> >     1843L, 1893L, 2148L), maximum = c(23L, 86L, 146L, 170L, 242L,
> >     409L, 588L, 655L, 699L, 738L, 830L, 872L, 924L, 994L, 1029L,
> >     1084L, 1143L, 1302L, 1543L, 1781L, 1870L, 1925L, 2148L),
> >     midpoint = c(14, 65, 133.5, 161.5, 233, 394.5, 567, 629,
> >     683.5, 729.5, 816, 856.5, 915.5, 977, 1017.5, 1072, 1124.5,
> >     1295, 1530.5, 1764.5, 1856.5, 1909, 2148)), row.names = c(NA,
> > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_9 =
> > structure(list(
> >     Object = c(2492L, 2493L, 2497L, 2498L, 2499L, 2501L, 2503L,
> >     2504L, 2505L, 2506L, 2507L, 2508L, 2509L, 2510L, 2511L, 2513L,
> >     2516L, 2522L, 2524L, 2532L, 2535L, 2538L), minimum = c(6L,
> >     44L, 111L, 149L, 224L, 375L, 548L, 596L, 668L, 722L, 800L,
> >     840L, 908L, 960L, 1005L, 1058L, 1127L, 1289L, 1519L, 1748L,
> >     1842L, 1891L), maximum = c(24L, 81L, 137L, 167L, 242L, 403L,
> >     589L, 656L, 699L, 738L, 828L, 872L, 925L, 994L, 1028L, 1081L,
> >     1149L, 1302L, 1544L, 1780L, 1868L, 1924L), midpoint = c(15,
> >     62.5, 124, 158, 233, 389, 568.5, 626, 683.5, 730, 814, 856,
> >     916.5, 977, 1016.5, 1069.5, 1138, 1295.5, 1531.5, 1764, 1855,
> >     1907.5)), row.names = c(NA, -22L), class = c("tbl_df", "tbl",
> > "data.frame")), position_tab_10 = structure(list(Object = c(2469L,
> > 2471L, 2474L, 2475L, 2476L, 2478L, 2481L, 2482L, 2483L, 2484L,
> > 2485L, 2486L, 2487L, 2488L, 2489L, 2491L, 2495L, 2500L, 2502L,
> > 2512L, 2515L, 2518L), minimum = c(6L, 38L, 109L, 147L, 223L,
> > 363L, 548L, 597L, 668L, 719L, 803L, 839L, 908L, 958L, 1004L,
> > 1058L, 1126L, 1288L, 1519L, 1746L, 1841L, 1892L), maximum = c(24L,
> > 76L, 134L, 165L, 240L, 394L, 591L, 656L, 698L, 737L, 829L, 869L,
> > 924L, 996L, 1027L, 1081L, 1147L, 1301L, 1543L, 1781L, 1868L,
> > 1925L), midpoint = c(15, 57, 121.5, 156, 231.5, 378.5, 569.5,
> > 626.5, 683, 728, 816, 854, 916, 977, 1015.5, 1069.5, 1136.5,
> > 1294.5, 1531, 1763.5, 1854.5, 1908.5)), row.names = c(NA, -22L
> > ), class = c("tbl_df", "tbl", "data.frame")))
> >
> > *What is produced when running the base code without any loops:*
> >
> > This is the base code without me trying to loop it in anyway, below is
> what
> > it produces when its used with dataframe 4 and 5:
> >
> > #the code:
> > list_df$position_tab_5$ID <-
> unlist(lapply(list_df$position_tab_5$midpoint,
> > function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <=
> 1),1,0)))
> >
> > ##position_tab_5 after manipulations have occured:
> > structure(list(Object = c(2580L, 2581L, 2585L, 2586L, 2589L,
> > 2590L, 2592L, 2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L,
> > 2601L, 2603L, 2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L
> > ), minimum = c(3L, 43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L,
> > 808L, 836L, 861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L,
> > 1748L, 1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L,
> > 419L, 629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L,
> > 1050L, 1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L
> > ), midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
> > 818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5, 1531.5,
> > 1764, 1855.5, 1909, 2148), ID = c(1, 1, 0, 1, 0, 0, 0, 1, 1,
> > 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0)), row.names = c(NA,
> > -23L), class = c("tbl_df", "tbl", "data.frame"))
> >
> > #position_tab_4 (the DF pos_tab_5 is being compared to)
> > structure(list(Object = c(2600L, 2604L, 2606L, 2609L, 2611L,
> > 2613L, 2614L, 2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L,
> > 2626L, 2628L, 2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L,
> > 42L, 142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
> > 908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L),
> >     maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
> >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
> >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
> >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
> >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names = c(NA,
> > -21L), class = c("tbl_df", "tbl", "data.frame"))
> >
> > *Appreciate any help, anyone can provide!*
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Sat Jul  4 15:43:38 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sat, 4 Jul 2020 16:43:38 +0300
Subject: [R] 
 Fwd: Help with looping a function over a list of dataframes:
In-Reply-To: <CAH05x1G668Hs9cvXaJAqCNjcHUwWppjq91qDnZwMALUVX88rfA@mail.gmail.com>
References: <CAH05x1G34LOV5BM=y61ZDumxg2+p4Mq8iEo8xLk=E5HVhNw7GQ@mail.gmail.com>
 <CA+8X3fVb5aAXQUVLkTrE7qCxRZjCEqb5XDc6s=MurFrebUSj8A@mail.gmail.com>
 <CAH05x1FBaqFynVU_8BQWC=s+4mehS-6pF9NcVKMQ3px9u1HH3g@mail.gmail.com>
 <CAH05x1G668Hs9cvXaJAqCNjcHUwWppjq91qDnZwMALUVX88rfA@mail.gmail.com>
Message-ID: <CAGgJW74aNnekWtvfSS50ss+E9pGnzA3rm-_WWxb=w7cWU7+5bw@mail.gmail.com>

Hi Kathan,
How about trying to create a *minimal* reproducible example, e.g. with a
list of two data frames, where each data frame has 5 rows,?
My guess is that there is a good chance that when you try to create such an
example, you will discover the problem yourself.
In the event that you create the example but still cannot solve your issue,
you will find more people on this list willing to look into your question,
as it will be much faster for them to do that (compared to the original
formulation.)

Eric


On Sat, Jul 4, 2020 at 4:33 PM Kathan Desai <kdesai1 at sheffield.ac.uk> wrote:

> ---------- Forwarded message ---------
> From: Kathan Desai <kdesai1 at sheffield.ac.uk>
> Date: Sat, 4 Jul 2020 at 14:31
> Subject: Re: [R] Help with looping a function over a list of dataframes:
> To: Jim Lemon <drjimlemon at gmail.com>
>
>
> Hi Jim,
>
> Thankyou for your reply, I tried the function you suggested and it
> doesn't seem to work. There are again no error messages produced, however
> the transformation to each position_tab_n table isn't being applied.
>
> Cheers,
> Kathan
>
>
> On Sat, 4 Jul 2020 at 11:14, Jim Lemon <drjimlemon at gmail.com> wrote:
>
> > Hi Kathan,
> > This is a very lazy answer as I haven't tested it. I think you will
> > need to wrap your loop in a function and return the modified list_df
> > to assign it like this:
> >
> > add_IDs<-function(xdf) {
> >  for(i in seq_along(xdf)) {
> >   xdf$position_tab_[[i]]$ID <-
> >    unlist(lapply(xdf$position_tab_[[i]]$midpoint, function(x)
> >     ifelse(any(abs(x - xdf$position_tab_[[i-1]]$midpoint)<= 1),1,0)))
> >  }
> >  return(xdf)
> > }
> > list_df<-add_IDs(list_df)
> >
> > Jim
> >
> > On Sat, Jul 4, 2020 at 4:48 PM Kathan Desai <kdesai1 at sheffield.ac.uk>
> > wrote:
> > >
> > > I have been trying to run a forloop for a function that compares
> > dataframe n
> > > with dataframe n-1, across a list of dataframes. It does this by
> checking
> > > each midpoint of dataframe n with each midpoint of dataframe n-1. This
> is
> > > done to make up for an disparity in row length. The idea of this code
> is
> > to
> > > identify any objects that are stationary, and assign them an id of 1,
> and
> > > the dynamic objects are assigned an id of 0 (examples can be found
> > below).
> > >
> > >
> > > *This is what i have so far:*
> > > for(i in seq_along(list_df)){
> > >    list_df$position_tab_[[i]]$ID <-
> > >      unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
> > >                  ifelse(any(abs(x -
> > list_df$position_tab_[[i-1]]$midpoint)
> > > <= 1),1,0)
> > >             ))
> > > }
> > >
> > > There is no error message being produced so theres nothing to debug, i
> am
> > > quite new to R programming in general so excuse any silly mistakes i
> may
> > > have made. The function doesnt seem to be adding the ID columns and
> > > comparing the data as it should.
> > >
> > > my list of dataframes contain dataframes named: position_tab_1,
> > > position_tab_2 .... position_tab_121. Each position_tab represents a
> > > timepoints, so in total there are 121 timepoints (frames). I need the
> > loop
> > > to run so that pos_tab_2 compares to pos_tab_1 and this continues all
> the
> > > way to pos_tab_121 comparing to pos_tab_120.
> > >
> > > The function adds a column named "id" to each of these dataframes as it
> > > compares to the dataframe before it, so all dataframes apart from
> > > position_tab_1 (as it has nothing to compare to) should have this
> added.
> > >
> > >
> > > *Some of my data (first 10 dataframes in list):*
> > > > dput(list_df[1:10])
> > > list(position_tab_1 = structure(list(Object = c(2666L, 2668L,
> > > 2671L, 2674L, 2676L, 2677L, 2678L, 2679L, 2680L, 2682L, 2683L,
> > > 2684L, 2685L, 2686L, 2687L, 2689L, 2692L, 2693L, 2694L, 2695L,
> > > 2696L), minimum = c(4L, 39L, 147L, 224L, 419L, 531L, 595L, 641L,
> > > 669L, 723L, 810L, 836L, 907L, 978L, 1061L, 1129L, 1290L, 1519L,
> > > 1749L, 1843L, 1897L), maximum = c(22L, 85L, 173L, 242L, 449L,
> > > 587L, 627L, 655L, 702L, 740L, 828L, 890L, 923L, 1024L, 1086L,
> > > 1144L, 1302L, 1544L, 1780L, 1870L, 1925L), midpoint = c(13, 62,
> > > 160, 233, 434, 559, 611, 648, 685.5, 731.5, 819, 863, 915, 1001,
> > > 1073.5, 1136.5, 1296, 1531.5, 1764.5, 1856.5, 1911)), row.names = c(NA,
> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_2 =
> > > structure(list(
> > >     Object = c(2645L, 2646L, 2650L, 2652L, 2655L, 2656L, 2657L,
> > >     2658L, 2659L, 2661L, 2662L, 2663L, 2664L, 2665L, 2667L, 2670L,
> > >     2675L, 2681L, 2688L, 2690L, 2691L), minimum = c(4L, 40L,
> > >     147L, 224L, 415L, 532L, 595L, 641L, 670L, 722L, 811L, 835L,
> > >     907L, 978L, 1061L, 1128L, 1289L, 1520L, 1748L, 1843L, 1897L
> > >     ), maximum = c(22L, 85L, 173L, 242L, 445L, 588L, 627L, 655L,
> > >     702L, 739L, 828L, 891L, 923L, 1022L, 1085L, 1143L, 1302L,
> > >     1544L, 1779L, 1870L, 1925L), midpoint = c(13, 62.5, 160,
> > >     233, 430, 560, 611, 648, 686, 730.5, 819.5, 863, 915, 1000,
> > >     1073, 1135.5, 1295.5, 1532, 1763.5, 1856.5, 1911)), row.names =
> c(NA,
> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_3 =
> > > structure(list(
> > >     Object = c(2623L, 2624L, 2627L, 2631L, 2633L, 2635L, 2636L,
> > >     2637L, 2638L, 2640L, 2641L, 2642L, 2643L, 2644L, 2647L, 2649L,
> > >     2654L, 2660L, 2669L, 2672L, 2673L), minimum = c(3L, 39L,
> > >     149L, 223L, 402L, 539L, 594L, 639L, 669L, 722L, 811L, 834L,
> > >     907L, 979L, 1060L, 1129L, 1289L, 1520L, 1749L, 1842L, 1897L
> > >     ), maximum = c(22L, 86L, 175L, 241L, 431L, 587L, 627L, 653L,
> > >     700L, 738L, 828L, 894L, 925L, 1021L, 1084L, 1144L, 1302L,
> > >     1544L, 1779L, 1869L, 1925L), midpoint = c(12.5, 62.5, 162,
> > >     232, 416.5, 563, 610.5, 646, 684.5, 730, 819.5, 864, 916,
> > >     1000, 1072, 1136.5, 1295.5, 1532, 1764, 1855.5, 1911)), row.names =
> > > c(NA,
> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_4 =
> > > structure(list(
> > >     Object = c(2600L, 2604L, 2606L, 2609L, 2611L, 2613L, 2614L,
> > >     2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L, 2626L, 2628L,
> > >     2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L, 42L,
> > >     142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
> > >     908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L
> > >     ), maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
> > >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
> > >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
> > >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
> > >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names =
> c(NA,
> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_5 =
> > > structure(list(
> > >     Object = c(2580L, 2581L, 2585L, 2586L, 2589L, 2590L, 2592L,
> > >     2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L, 2601L, 2603L,
> > >     2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L), minimum = c(3L,
> > >     43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L, 808L, 836L,
> > >     861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L, 1748L,
> > >     1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L, 419L,
> > >     629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L, 1050L,
> > >     1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L),
> > >     midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
> > >     818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5,
> > >     1531.5, 1764, 1855.5, 1909, 2148)), row.names = c(NA, -23L
> > > ), class = c("tbl_df", "tbl", "data.frame")), position_tab_6 =
> > > structure(list(
> > >     Object = c(2555L, 2559L, 2562L, 2563L, 2564L, 2567L, 2569L,
> > >     2570L, 2571L, 2572L, 2573L, 2574L, 2575L, 2576L, 2577L, 2579L,
> > >     2583L, 2587L, 2591L, 2602L, 2607L, 2608L, 2612L), minimum = c(4L,
> > >     45L, 123L, 154L, 224L, 390L, 546L, 600L, 643L, 669L, 720L,
> > >     804L, 836L, 908L, 967L, 1058L, 1129L, 1289L, 1519L, 1748L,
> > >     1843L, 1893L, 2147L), maximum = c(23L, 86L, 150L, 171L, 241L,
> > >     419L, 589L, 636L, 657L, 701L, 738L, 827L, 879L, 925L, 1011L,
> > >     1084L, 1144L, 1301L, 1543L, 1780L, 1871L, 1924L, 2148L),
> > >     midpoint = c(13.5, 65.5, 136.5, 162.5, 232.5, 404.5, 567.5,
> > >     618, 650, 685, 729, 815.5, 857.5, 916.5, 989, 1071, 1136.5,
> > >     1295, 1531, 1764, 1857, 1908.5, 2147.5)), row.names = c(NA,
> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_7 =
> > > structure(list(
> > >     Object = c(2537L, 2539L, 2540L, 2541L, 2542L, 2544L, 2546L,
> > >     2547L, 2548L, 2549L, 2550L, 2551L, 2552L, 2554L, 2556L, 2558L,
> > >     2560L, 2565L, 2568L, 2578L, 2582L, 2584L, 2588L), minimum = c(3L,
> > >     45L, 122L, 156L, 224L, 387L, 546L, 601L, 669L, 719L, 803L,
> > >     837L, 908L, 959L, 1059L, 1096L, 1128L, 1289L, 1519L, 1748L,
> > >     1844L, 1892L, 2147L), maximum = c(22L, 86L, 147L, 172L, 241L,
> > >     415L, 590L, 656L, 699L, 738L, 830L, 871L, 924L, 1014L, 1082L,
> > >     1119L, 1144L, 1301L, 1543L, 1781L, 1872L, 1925L, 2148L),
> > >     midpoint = c(12.5, 65.5, 134.5, 164, 232.5, 401, 568, 628.5,
> > >     684, 728.5, 816.5, 854, 916, 986.5, 1070.5, 1107.5, 1136,
> > >     1295, 1531, 1764.5, 1858, 1908.5, 2147.5)), row.names = c(NA,
> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_8 =
> > > structure(list(
> > >     Object = c(2514L, 2517L, 2519L, 2520L, 2521L, 2523L, 2525L,
> > >     2526L, 2527L, 2528L, 2529L, 2530L, 2531L, 2532L, 2533L, 2534L,
> > >     2536L, 2543L, 2545L, 2553L, 2557L, 2561L, 2566L), minimum = c(5L,
> > >     44L, 121L, 153L, 224L, 380L, 546L, 603L, 668L, 721L, 802L,
> > >     841L, 907L, 960L, 1006L, 1060L, 1106L, 1288L, 1518L, 1748L,
> > >     1843L, 1893L, 2148L), maximum = c(23L, 86L, 146L, 170L, 242L,
> > >     409L, 588L, 655L, 699L, 738L, 830L, 872L, 924L, 994L, 1029L,
> > >     1084L, 1143L, 1302L, 1543L, 1781L, 1870L, 1925L, 2148L),
> > >     midpoint = c(14, 65, 133.5, 161.5, 233, 394.5, 567, 629,
> > >     683.5, 729.5, 816, 856.5, 915.5, 977, 1017.5, 1072, 1124.5,
> > >     1295, 1530.5, 1764.5, 1856.5, 1909, 2148)), row.names = c(NA,
> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_9 =
> > > structure(list(
> > >     Object = c(2492L, 2493L, 2497L, 2498L, 2499L, 2501L, 2503L,
> > >     2504L, 2505L, 2506L, 2507L, 2508L, 2509L, 2510L, 2511L, 2513L,
> > >     2516L, 2522L, 2524L, 2532L, 2535L, 2538L), minimum = c(6L,
> > >     44L, 111L, 149L, 224L, 375L, 548L, 596L, 668L, 722L, 800L,
> > >     840L, 908L, 960L, 1005L, 1058L, 1127L, 1289L, 1519L, 1748L,
> > >     1842L, 1891L), maximum = c(24L, 81L, 137L, 167L, 242L, 403L,
> > >     589L, 656L, 699L, 738L, 828L, 872L, 925L, 994L, 1028L, 1081L,
> > >     1149L, 1302L, 1544L, 1780L, 1868L, 1924L), midpoint = c(15,
> > >     62.5, 124, 158, 233, 389, 568.5, 626, 683.5, 730, 814, 856,
> > >     916.5, 977, 1016.5, 1069.5, 1138, 1295.5, 1531.5, 1764, 1855,
> > >     1907.5)), row.names = c(NA, -22L), class = c("tbl_df", "tbl",
> > > "data.frame")), position_tab_10 = structure(list(Object = c(2469L,
> > > 2471L, 2474L, 2475L, 2476L, 2478L, 2481L, 2482L, 2483L, 2484L,
> > > 2485L, 2486L, 2487L, 2488L, 2489L, 2491L, 2495L, 2500L, 2502L,
> > > 2512L, 2515L, 2518L), minimum = c(6L, 38L, 109L, 147L, 223L,
> > > 363L, 548L, 597L, 668L, 719L, 803L, 839L, 908L, 958L, 1004L,
> > > 1058L, 1126L, 1288L, 1519L, 1746L, 1841L, 1892L), maximum = c(24L,
> > > 76L, 134L, 165L, 240L, 394L, 591L, 656L, 698L, 737L, 829L, 869L,
> > > 924L, 996L, 1027L, 1081L, 1147L, 1301L, 1543L, 1781L, 1868L,
> > > 1925L), midpoint = c(15, 57, 121.5, 156, 231.5, 378.5, 569.5,
> > > 626.5, 683, 728, 816, 854, 916, 977, 1015.5, 1069.5, 1136.5,
> > > 1294.5, 1531, 1763.5, 1854.5, 1908.5)), row.names = c(NA, -22L
> > > ), class = c("tbl_df", "tbl", "data.frame")))
> > >
> > > *What is produced when running the base code without any loops:*
> > >
> > > This is the base code without me trying to loop it in anyway, below is
> > what
> > > it produces when its used with dataframe 4 and 5:
> > >
> > > #the code:
> > > list_df$position_tab_5$ID <-
> > unlist(lapply(list_df$position_tab_5$midpoint,
> > > function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <=
> > 1),1,0)))
> > >
> > > ##position_tab_5 after manipulations have occured:
> > > structure(list(Object = c(2580L, 2581L, 2585L, 2586L, 2589L,
> > > 2590L, 2592L, 2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L,
> > > 2601L, 2603L, 2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L
> > > ), minimum = c(3L, 43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L,
> > > 808L, 836L, 861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L,
> > > 1748L, 1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L,
> > > 419L, 629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L,
> > > 1050L, 1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L
> > > ), midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
> > > 818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5, 1531.5,
> > > 1764, 1855.5, 1909, 2148), ID = c(1, 1, 0, 1, 0, 0, 0, 1, 1,
> > > 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0)), row.names = c(NA,
> > > -23L), class = c("tbl_df", "tbl", "data.frame"))
> > >
> > > #position_tab_4 (the DF pos_tab_5 is being compared to)
> > > structure(list(Object = c(2600L, 2604L, 2606L, 2609L, 2611L,
> > > 2613L, 2614L, 2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L,
> > > 2626L, 2628L, 2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L,
> > > 42L, 142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
> > > 908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L),
> > >     maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
> > >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
> > >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
> > >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
> > >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names =
> c(NA,
> > > -21L), class = c("tbl_df", "tbl", "data.frame"))
> > >
> > > *Appreciate any help, anyone can provide!*
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From gr@h@m_|e@@k @end|ng |rom y@hoo@com  Sat Jul  4 16:34:26 2020
From: gr@h@m_|e@@k @end|ng |rom y@hoo@com (Graham Leask)
Date: Sat, 4 Jul 2020 15:34:26 +0100
Subject: [R] Mapping Geographical Coordinate Data
References: <84E351F3-0FF2-4C04-BB8C-4BF3E5EEEAEA.ref@yahoo.com>
Message-ID: <84E351F3-0FF2-4C04-BB8C-4BF3E5EEEAEA@yahoo.com>

Dear List,

I have a postcode file containing geographical coordinates but this is not in the
format of a standard shape file. I list the first 5 observations below;

Postcode Postcode_geometry                                             
  <chr>    <chr>                                                         
1 101      [[[[15.066294,54.986481],[15.08849170010846,54.98916685060565]?
2 102      [[[[12.529952999999999,55.631105],[12.525127622017353,55.62519?
3 103      [[[[12.545395,55.684824],[12.564698,55.684824],[12.568558,55.6?
4 104      [[[[12.510651,55.635403],[12.526093,55.635403],[12.52995299999?
5 105      [[[[12.50293,55.641849],[12.511615913774403,55.65205570659488]?


The length of the second variable precludes showing all of each line.


tibble [62 ? 2] (S3: tbl_df/tbl/data.frame)
 $ Postcode         : chr [1:62] "101" "102" "103" "104" ...
  ..- attr(*, "label")= chr "Brick code"
  ..- attr(*, "format.stata")= chr "%9s"
 $ Postcode_geometry: chr [1:62] "[[[[15.066294,54.986481],[15.08849170010846,54.98916685060565],[15.109724384490239,55.009579959623146],[15.1203"| __truncated__ "[[[[12.529952999999999,55.631105],[12.525127622017353,55.62519635262449],[12.507755425704989,55.61552698519515]"| __truncated__ "[[[[12.545395,55.684824],[12.564698,55.684824],[12.568558,55.689122],[12.552151038503252,55.70792316285329],[12"| __truncated__ "[[[[12.510651,55.635403],[12.526093,55.635403],[12.529952999999999,55.631105],[12.552151038503252,55.6445350874"| __truncated__ ?

How can I map this file using R? I?ve tried using the sf package with st_multipolygon and st_multilinestring without success. 

Any help as to which package and appropriate commands to successfully map this data using R will be appreciated.

Kind regards


Graham


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  4 16:41:28 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 4 Jul 2020 07:41:28 -0700
Subject: [R] Mapping Geographical Coordinate Data
In-Reply-To: <84E351F3-0FF2-4C04-BB8C-4BF3E5EEEAEA@yahoo.com>
References: <84E351F3-0FF2-4C04-BB8C-4BF3E5EEEAEA.ref@yahoo.com>
 <84E351F3-0FF2-4C04-BB8C-4BF3E5EEEAEA@yahoo.com>
Message-ID: <CAGxFJbSnXrOvB8DBZjiLrSE2hkwB1_1-kR7q3BcL9XAr2tnOvQ@mail.gmail.com>

You should post on r-sig-geo, not here. You are much more likely to find
the interest and expertise you seek there.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jul 4, 2020 at 7:34 AM Graham Leask via R-help <r-help at r-project.org>
wrote:

> Dear List,
>
> I have a postcode file containing geographical coordinates but this is not
> in the
> format of a standard shape file. I list the first 5 observations below;
>
> Postcode Postcode_geometry
>   <chr>    <chr>
> 1 101      [[[[15.066294,54.986481],[15.08849170010846,54.98916685060565]?
> 2 102      [[[[12.529952999999999,55.631105],[12.525127622017353,55.62519?
> 3 103      [[[[12.545395,55.684824],[12.564698,55.684824],[12.568558,55.6?
> 4 104      [[[[12.510651,55.635403],[12.526093,55.635403],[12.52995299999?
> 5 105      [[[[12.50293,55.641849],[12.511615913774403,55.65205570659488]?
>
>
> The length of the second variable precludes showing all of each line.
>
>
> tibble [62 ? 2] (S3: tbl_df/tbl/data.frame)
>  $ Postcode         : chr [1:62] "101" "102" "103" "104" ...
>   ..- attr(*, "label")= chr "Brick code"
>   ..- attr(*, "format.stata")= chr "%9s"
>  $ Postcode_geometry: chr [1:62]
> "[[[[15.066294,54.986481],[15.08849170010846,54.98916685060565],[15.109724384490239,55.009579959623146],[15.1203"|
> __truncated__
> "[[[[12.529952999999999,55.631105],[12.525127622017353,55.62519635262449],[12.507755425704989,55.61552698519515]"|
> __truncated__
> "[[[[12.545395,55.684824],[12.564698,55.684824],[12.568558,55.689122],[12.552151038503252,55.70792316285329],[12"|
> __truncated__
> "[[[[12.510651,55.635403],[12.526093,55.635403],[12.529952999999999,55.631105],[12.552151038503252,55.6445350874"|
> __truncated__ ?
>
> How can I map this file using R? I?ve tried using the sf package with
> st_multipolygon and st_multilinestring without success.
>
> Any help as to which package and appropriate commands to successfully map
> this data using R will be appreciated.
>
> Kind regards
>
>
> Graham
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jul  4 16:54:09 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 04 Jul 2020 07:54:09 -0700
Subject: [R] Mapping Geographical Coordinate Data
In-Reply-To: <CAGxFJbSnXrOvB8DBZjiLrSE2hkwB1_1-kR7q3BcL9XAr2tnOvQ@mail.gmail.com>
References: <84E351F3-0FF2-4C04-BB8C-4BF3E5EEEAEA.ref@yahoo.com>
 <84E351F3-0FF2-4C04-BB8C-4BF3E5EEEAEA@yahoo.com>
 <CAGxFJbSnXrOvB8DBZjiLrSE2hkwB1_1-kR7q3BcL9XAr2tnOvQ@mail.gmail.com>
Message-ID: <20E38B37-674C-48B0-A0A4-D41DC08EE902@dcn.davis.ca.us>

And post a minimal reproducible example (perhaps using dput(head(dta))).

On July 4, 2020 7:41:28 AM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>You should post on r-sig-geo, not here. You are much more likely to
>find
>the interest and expertise you seek there.
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Sat, Jul 4, 2020 at 7:34 AM Graham Leask via R-help
><r-help at r-project.org>
>wrote:
>
>> Dear List,
>>
>> I have a postcode file containing geographical coordinates but this
>is not
>> in the
>> format of a standard shape file. I list the first 5 observations
>below;
>>
>> Postcode Postcode_geometry
>>   <chr>    <chr>
>> 1 101     
>[[[[15.066294,54.986481],[15.08849170010846,54.98916685060565]?
>> 2 102     
>[[[[12.529952999999999,55.631105],[12.525127622017353,55.62519?
>> 3 103     
>[[[[12.545395,55.684824],[12.564698,55.684824],[12.568558,55.6?
>> 4 104     
>[[[[12.510651,55.635403],[12.526093,55.635403],[12.52995299999?
>> 5 105     
>[[[[12.50293,55.641849],[12.511615913774403,55.65205570659488]?
>>
>>
>> The length of the second variable precludes showing all of each line.
>>
>>
>> tibble [62 ? 2] (S3: tbl_df/tbl/data.frame)
>>  $ Postcode         : chr [1:62] "101" "102" "103" "104" ...
>>   ..- attr(*, "label")= chr "Brick code"
>>   ..- attr(*, "format.stata")= chr "%9s"
>>  $ Postcode_geometry: chr [1:62]
>>
>"[[[[15.066294,54.986481],[15.08849170010846,54.98916685060565],[15.109724384490239,55.009579959623146],[15.1203"|
>> __truncated__
>>
>"[[[[12.529952999999999,55.631105],[12.525127622017353,55.62519635262449],[12.507755425704989,55.61552698519515]"|
>> __truncated__
>>
>"[[[[12.545395,55.684824],[12.564698,55.684824],[12.568558,55.689122],[12.552151038503252,55.70792316285329],[12"|
>> __truncated__
>>
>"[[[[12.510651,55.635403],[12.526093,55.635403],[12.529952999999999,55.631105],[12.552151038503252,55.6445350874"|
>> __truncated__ ?
>>
>> How can I map this file using R? I?ve tried using the sf package with
>> st_multipolygon and st_multilinestring without success.
>>
>> Any help as to which package and appropriate commands to successfully
>map
>> this data using R will be appreciated.
>>
>> Kind regards
>>
>>
>> Graham
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From kde@@|1 @end|ng |rom @he|||e|d@@c@uk  Sat Jul  4 16:54:32 2020
From: kde@@|1 @end|ng |rom @he|||e|d@@c@uk (Kathan Desai)
Date: Sat, 4 Jul 2020 15:54:32 +0100
Subject: [R] 
 Fwd: Help with looping a function over a list of dataframes:
In-Reply-To: <CAGgJW74aNnekWtvfSS50ss+E9pGnzA3rm-_WWxb=w7cWU7+5bw@mail.gmail.com>
References: <CAH05x1G34LOV5BM=y61ZDumxg2+p4Mq8iEo8xLk=E5HVhNw7GQ@mail.gmail.com>
 <CA+8X3fVb5aAXQUVLkTrE7qCxRZjCEqb5XDc6s=MurFrebUSj8A@mail.gmail.com>
 <CAH05x1FBaqFynVU_8BQWC=s+4mehS-6pF9NcVKMQ3px9u1HH3g@mail.gmail.com>
 <CAH05x1G668Hs9cvXaJAqCNjcHUwWppjq91qDnZwMALUVX88rfA@mail.gmail.com>
 <CAGgJW74aNnekWtvfSS50ss+E9pGnzA3rm-_WWxb=w7cWU7+5bw@mail.gmail.com>
Message-ID: <CAH05x1GJC5gLh13WCpPHrrQLvfKwKDqqVrMVwXjPcmoP___o4g@mail.gmail.com>

*I hope this is more succinct.*

*I have the following code: *
list_df$position_tab_5$ID <- unlist(lapply(list_df$position_tab_5$midpoint,
function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <= 1),1,0)))


It compares every observation from the midpoint column from dataframe 2 to
every observation from the midpoint column from dataframe 1. It does this
in order to find any values within +/- 1 of the value, and if it satisfies
this criteria then it assigns it a unique id of 1. If not then a value of
0.

In the example below, pos_tab_5 is being compared to pos_tab_4:

Pos tab 4:
Object minimum maximum midpoint
2600    4             22             13
2604    42           85             63.5
2606    142         172           157
2609    223         241           232
2611    393         421           407

Pos tab 5:
Object minimum maximum midpoint ID
2580    3             21             12           1
2581    43           85             64           1
2585    132         168           150         0
2586    223         241           232         1
2589    391         419           405         0

The reason it compares every observation from pos_tab_(n) to pos_tab_(n-1)
is because some of the dataframes are of different row length, and so by
comparing every observation from one DF to another, it can find any values
that are within +/- 1 of each other. (which is the main thing i'm looking
for)

I need help looping this function over a list of dataframes. The list of
dataframes called: list_df contains 121 different dataframes all
representing a different time point of the object.

This is what i have so far:
for(i in seq_along(list_df)){
   list_df$position_tab_[[i]]$ID <-
     unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
                 ifelse(any(abs(x - list_df$position_tab_[[i-1]]$midpoint)
<= 1),1,0)
            ))
}

On Sat, 4 Jul 2020 at 14:44, Eric Berger <ericjberger at gmail.com> wrote:

> Hi Kathan,
> How about trying to create a *minimal* reproducible example, e.g. with a
> list of two data frames, where each data frame has 5 rows,?
> My guess is that there is a good chance that when you try to create such
> an example, you will discover the problem yourself.
> In the event that you create the example but still cannot solve your
> issue, you will find more people on this list willing to look into your
> question, as it will be much faster for them to do that (compared to the
> original formulation.)
>
> Eric
>
>
> On Sat, Jul 4, 2020 at 4:33 PM Kathan Desai <kdesai1 at sheffield.ac.uk>
> wrote:
>
>> ---------- Forwarded message ---------
>> From: Kathan Desai <kdesai1 at sheffield.ac.uk>
>> Date: Sat, 4 Jul 2020 at 14:31
>> Subject: Re: [R] Help with looping a function over a list of dataframes:
>> To: Jim Lemon <drjimlemon at gmail.com>
>>
>>
>> Hi Jim,
>>
>> Thankyou for your reply, I tried the function you suggested and it
>> doesn't seem to work. There are again no error messages produced, however
>> the transformation to each position_tab_n table isn't being applied.
>>
>> Cheers,
>> Kathan
>>
>>
>> On Sat, 4 Jul 2020 at 11:14, Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> > Hi Kathan,
>> > This is a very lazy answer as I haven't tested it. I think you will
>> > need to wrap your loop in a function and return the modified list_df
>> > to assign it like this:
>> >
>> > add_IDs<-function(xdf) {
>> >  for(i in seq_along(xdf)) {
>> >   xdf$position_tab_[[i]]$ID <-
>> >    unlist(lapply(xdf$position_tab_[[i]]$midpoint, function(x)
>> >     ifelse(any(abs(x - xdf$position_tab_[[i-1]]$midpoint)<= 1),1,0)))
>> >  }
>> >  return(xdf)
>> > }
>> > list_df<-add_IDs(list_df)
>> >
>> > Jim
>> >
>> > On Sat, Jul 4, 2020 at 4:48 PM Kathan Desai <kdesai1 at sheffield.ac.uk>
>> > wrote:
>> > >
>> > > I have been trying to run a forloop for a function that compares
>> > dataframe n
>> > > with dataframe n-1, across a list of dataframes. It does this by
>> checking
>> > > each midpoint of dataframe n with each midpoint of dataframe n-1.
>> This is
>> > > done to make up for an disparity in row length. The idea of this code
>> is
>> > to
>> > > identify any objects that are stationary, and assign them an id of 1,
>> and
>> > > the dynamic objects are assigned an id of 0 (examples can be found
>> > below).
>> > >
>> > >
>> > > *This is what i have so far:*
>> > > for(i in seq_along(list_df)){
>> > >    list_df$position_tab_[[i]]$ID <-
>> > >      unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
>> > >                  ifelse(any(abs(x -
>> > list_df$position_tab_[[i-1]]$midpoint)
>> > > <= 1),1,0)
>> > >             ))
>> > > }
>> > >
>> > > There is no error message being produced so theres nothing to debug,
>> i am
>> > > quite new to R programming in general so excuse any silly mistakes i
>> may
>> > > have made. The function doesnt seem to be adding the ID columns and
>> > > comparing the data as it should.
>> > >
>> > > my list of dataframes contain dataframes named: position_tab_1,
>> > > position_tab_2 .... position_tab_121. Each position_tab represents a
>> > > timepoints, so in total there are 121 timepoints (frames). I need the
>> > loop
>> > > to run so that pos_tab_2 compares to pos_tab_1 and this continues all
>> the
>> > > way to pos_tab_121 comparing to pos_tab_120.
>> > >
>> > > The function adds a column named "id" to each of these dataframes as
>> it
>> > > compares to the dataframe before it, so all dataframes apart from
>> > > position_tab_1 (as it has nothing to compare to) should have this
>> added.
>> > >
>> > >
>> > > *Some of my data (first 10 dataframes in list):*
>> > > > dput(list_df[1:10])
>> > > list(position_tab_1 = structure(list(Object = c(2666L, 2668L,
>> > > 2671L, 2674L, 2676L, 2677L, 2678L, 2679L, 2680L, 2682L, 2683L,
>> > > 2684L, 2685L, 2686L, 2687L, 2689L, 2692L, 2693L, 2694L, 2695L,
>> > > 2696L), minimum = c(4L, 39L, 147L, 224L, 419L, 531L, 595L, 641L,
>> > > 669L, 723L, 810L, 836L, 907L, 978L, 1061L, 1129L, 1290L, 1519L,
>> > > 1749L, 1843L, 1897L), maximum = c(22L, 85L, 173L, 242L, 449L,
>> > > 587L, 627L, 655L, 702L, 740L, 828L, 890L, 923L, 1024L, 1086L,
>> > > 1144L, 1302L, 1544L, 1780L, 1870L, 1925L), midpoint = c(13, 62,
>> > > 160, 233, 434, 559, 611, 648, 685.5, 731.5, 819, 863, 915, 1001,
>> > > 1073.5, 1136.5, 1296, 1531.5, 1764.5, 1856.5, 1911)), row.names =
>> c(NA,
>> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_2 =
>> > > structure(list(
>> > >     Object = c(2645L, 2646L, 2650L, 2652L, 2655L, 2656L, 2657L,
>> > >     2658L, 2659L, 2661L, 2662L, 2663L, 2664L, 2665L, 2667L, 2670L,
>> > >     2675L, 2681L, 2688L, 2690L, 2691L), minimum = c(4L, 40L,
>> > >     147L, 224L, 415L, 532L, 595L, 641L, 670L, 722L, 811L, 835L,
>> > >     907L, 978L, 1061L, 1128L, 1289L, 1520L, 1748L, 1843L, 1897L
>> > >     ), maximum = c(22L, 85L, 173L, 242L, 445L, 588L, 627L, 655L,
>> > >     702L, 739L, 828L, 891L, 923L, 1022L, 1085L, 1143L, 1302L,
>> > >     1544L, 1779L, 1870L, 1925L), midpoint = c(13, 62.5, 160,
>> > >     233, 430, 560, 611, 648, 686, 730.5, 819.5, 863, 915, 1000,
>> > >     1073, 1135.5, 1295.5, 1532, 1763.5, 1856.5, 1911)), row.names =
>> c(NA,
>> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_3 =
>> > > structure(list(
>> > >     Object = c(2623L, 2624L, 2627L, 2631L, 2633L, 2635L, 2636L,
>> > >     2637L, 2638L, 2640L, 2641L, 2642L, 2643L, 2644L, 2647L, 2649L,
>> > >     2654L, 2660L, 2669L, 2672L, 2673L), minimum = c(3L, 39L,
>> > >     149L, 223L, 402L, 539L, 594L, 639L, 669L, 722L, 811L, 834L,
>> > >     907L, 979L, 1060L, 1129L, 1289L, 1520L, 1749L, 1842L, 1897L
>> > >     ), maximum = c(22L, 86L, 175L, 241L, 431L, 587L, 627L, 653L,
>> > >     700L, 738L, 828L, 894L, 925L, 1021L, 1084L, 1144L, 1302L,
>> > >     1544L, 1779L, 1869L, 1925L), midpoint = c(12.5, 62.5, 162,
>> > >     232, 416.5, 563, 610.5, 646, 684.5, 730, 819.5, 864, 916,
>> > >     1000, 1072, 1136.5, 1295.5, 1532, 1764, 1855.5, 1911)), row.names
>> =
>> > > c(NA,
>> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_4 =
>> > > structure(list(
>> > >     Object = c(2600L, 2604L, 2606L, 2609L, 2611L, 2613L, 2614L,
>> > >     2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L, 2626L, 2628L,
>> > >     2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L, 42L,
>> > >     142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
>> > >     908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L
>> > >     ), maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
>> > >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
>> > >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
>> > >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
>> > >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names =
>> c(NA,
>> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_5 =
>> > > structure(list(
>> > >     Object = c(2580L, 2581L, 2585L, 2586L, 2589L, 2590L, 2592L,
>> > >     2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L, 2601L, 2603L,
>> > >     2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L), minimum = c(3L,
>> > >     43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L, 808L, 836L,
>> > >     861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L, 1748L,
>> > >     1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L, 419L,
>> > >     629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L, 1050L,
>> > >     1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L),
>> > >     midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
>> > >     818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5,
>> > >     1531.5, 1764, 1855.5, 1909, 2148)), row.names = c(NA, -23L
>> > > ), class = c("tbl_df", "tbl", "data.frame")), position_tab_6 =
>> > > structure(list(
>> > >     Object = c(2555L, 2559L, 2562L, 2563L, 2564L, 2567L, 2569L,
>> > >     2570L, 2571L, 2572L, 2573L, 2574L, 2575L, 2576L, 2577L, 2579L,
>> > >     2583L, 2587L, 2591L, 2602L, 2607L, 2608L, 2612L), minimum = c(4L,
>> > >     45L, 123L, 154L, 224L, 390L, 546L, 600L, 643L, 669L, 720L,
>> > >     804L, 836L, 908L, 967L, 1058L, 1129L, 1289L, 1519L, 1748L,
>> > >     1843L, 1893L, 2147L), maximum = c(23L, 86L, 150L, 171L, 241L,
>> > >     419L, 589L, 636L, 657L, 701L, 738L, 827L, 879L, 925L, 1011L,
>> > >     1084L, 1144L, 1301L, 1543L, 1780L, 1871L, 1924L, 2148L),
>> > >     midpoint = c(13.5, 65.5, 136.5, 162.5, 232.5, 404.5, 567.5,
>> > >     618, 650, 685, 729, 815.5, 857.5, 916.5, 989, 1071, 1136.5,
>> > >     1295, 1531, 1764, 1857, 1908.5, 2147.5)), row.names = c(NA,
>> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_7 =
>> > > structure(list(
>> > >     Object = c(2537L, 2539L, 2540L, 2541L, 2542L, 2544L, 2546L,
>> > >     2547L, 2548L, 2549L, 2550L, 2551L, 2552L, 2554L, 2556L, 2558L,
>> > >     2560L, 2565L, 2568L, 2578L, 2582L, 2584L, 2588L), minimum = c(3L,
>> > >     45L, 122L, 156L, 224L, 387L, 546L, 601L, 669L, 719L, 803L,
>> > >     837L, 908L, 959L, 1059L, 1096L, 1128L, 1289L, 1519L, 1748L,
>> > >     1844L, 1892L, 2147L), maximum = c(22L, 86L, 147L, 172L, 241L,
>> > >     415L, 590L, 656L, 699L, 738L, 830L, 871L, 924L, 1014L, 1082L,
>> > >     1119L, 1144L, 1301L, 1543L, 1781L, 1872L, 1925L, 2148L),
>> > >     midpoint = c(12.5, 65.5, 134.5, 164, 232.5, 401, 568, 628.5,
>> > >     684, 728.5, 816.5, 854, 916, 986.5, 1070.5, 1107.5, 1136,
>> > >     1295, 1531, 1764.5, 1858, 1908.5, 2147.5)), row.names = c(NA,
>> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_8 =
>> > > structure(list(
>> > >     Object = c(2514L, 2517L, 2519L, 2520L, 2521L, 2523L, 2525L,
>> > >     2526L, 2527L, 2528L, 2529L, 2530L, 2531L, 2532L, 2533L, 2534L,
>> > >     2536L, 2543L, 2545L, 2553L, 2557L, 2561L, 2566L), minimum = c(5L,
>> > >     44L, 121L, 153L, 224L, 380L, 546L, 603L, 668L, 721L, 802L,
>> > >     841L, 907L, 960L, 1006L, 1060L, 1106L, 1288L, 1518L, 1748L,
>> > >     1843L, 1893L, 2148L), maximum = c(23L, 86L, 146L, 170L, 242L,
>> > >     409L, 588L, 655L, 699L, 738L, 830L, 872L, 924L, 994L, 1029L,
>> > >     1084L, 1143L, 1302L, 1543L, 1781L, 1870L, 1925L, 2148L),
>> > >     midpoint = c(14, 65, 133.5, 161.5, 233, 394.5, 567, 629,
>> > >     683.5, 729.5, 816, 856.5, 915.5, 977, 1017.5, 1072, 1124.5,
>> > >     1295, 1530.5, 1764.5, 1856.5, 1909, 2148)), row.names = c(NA,
>> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_9 =
>> > > structure(list(
>> > >     Object = c(2492L, 2493L, 2497L, 2498L, 2499L, 2501L, 2503L,
>> > >     2504L, 2505L, 2506L, 2507L, 2508L, 2509L, 2510L, 2511L, 2513L,
>> > >     2516L, 2522L, 2524L, 2532L, 2535L, 2538L), minimum = c(6L,
>> > >     44L, 111L, 149L, 224L, 375L, 548L, 596L, 668L, 722L, 800L,
>> > >     840L, 908L, 960L, 1005L, 1058L, 1127L, 1289L, 1519L, 1748L,
>> > >     1842L, 1891L), maximum = c(24L, 81L, 137L, 167L, 242L, 403L,
>> > >     589L, 656L, 699L, 738L, 828L, 872L, 925L, 994L, 1028L, 1081L,
>> > >     1149L, 1302L, 1544L, 1780L, 1868L, 1924L), midpoint = c(15,
>> > >     62.5, 124, 158, 233, 389, 568.5, 626, 683.5, 730, 814, 856,
>> > >     916.5, 977, 1016.5, 1069.5, 1138, 1295.5, 1531.5, 1764, 1855,
>> > >     1907.5)), row.names = c(NA, -22L), class = c("tbl_df", "tbl",
>> > > "data.frame")), position_tab_10 = structure(list(Object = c(2469L,
>> > > 2471L, 2474L, 2475L, 2476L, 2478L, 2481L, 2482L, 2483L, 2484L,
>> > > 2485L, 2486L, 2487L, 2488L, 2489L, 2491L, 2495L, 2500L, 2502L,
>> > > 2512L, 2515L, 2518L), minimum = c(6L, 38L, 109L, 147L, 223L,
>> > > 363L, 548L, 597L, 668L, 719L, 803L, 839L, 908L, 958L, 1004L,
>> > > 1058L, 1126L, 1288L, 1519L, 1746L, 1841L, 1892L), maximum = c(24L,
>> > > 76L, 134L, 165L, 240L, 394L, 591L, 656L, 698L, 737L, 829L, 869L,
>> > > 924L, 996L, 1027L, 1081L, 1147L, 1301L, 1543L, 1781L, 1868L,
>> > > 1925L), midpoint = c(15, 57, 121.5, 156, 231.5, 378.5, 569.5,
>> > > 626.5, 683, 728, 816, 854, 916, 977, 1015.5, 1069.5, 1136.5,
>> > > 1294.5, 1531, 1763.5, 1854.5, 1908.5)), row.names = c(NA, -22L
>> > > ), class = c("tbl_df", "tbl", "data.frame")))
>> > >
>> > > *What is produced when running the base code without any loops:*
>> > >
>> > > This is the base code without me trying to loop it in anyway, below is
>> > what
>> > > it produces when its used with dataframe 4 and 5:
>> > >
>> > > #the code:
>> > > list_df$position_tab_5$ID <-
>> > unlist(lapply(list_df$position_tab_5$midpoint,
>> > > function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <=
>> > 1),1,0)))
>> > >
>> > > ##position_tab_5 after manipulations have occured:
>> > > structure(list(Object = c(2580L, 2581L, 2585L, 2586L, 2589L,
>> > > 2590L, 2592L, 2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L,
>> > > 2601L, 2603L, 2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L
>> > > ), minimum = c(3L, 43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L,
>> > > 808L, 836L, 861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L,
>> > > 1748L, 1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L,
>> > > 419L, 629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L,
>> > > 1050L, 1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L
>> > > ), midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
>> > > 818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5, 1531.5,
>> > > 1764, 1855.5, 1909, 2148), ID = c(1, 1, 0, 1, 0, 0, 0, 1, 1,
>> > > 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0)), row.names = c(NA,
>> > > -23L), class = c("tbl_df", "tbl", "data.frame"))
>> > >
>> > > #position_tab_4 (the DF pos_tab_5 is being compared to)
>> > > structure(list(Object = c(2600L, 2604L, 2606L, 2609L, 2611L,
>> > > 2613L, 2614L, 2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L,
>> > > 2626L, 2628L, 2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L,
>> > > 42L, 142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
>> > > 908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L),
>> > >     maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
>> > >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
>> > >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
>> > >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
>> > >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names =
>> c(NA,
>> > > -21L), class = c("tbl_df", "tbl", "data.frame"))
>> > >
>> > > *Appreciate any help, anyone can provide!*
>> > >
>> > >         [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  4 17:25:07 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 4 Jul 2020 08:25:07 -0700
Subject: [R] 
 Fwd: Help with looping a function over a list of dataframes:
In-Reply-To: <CAH05x1GJC5gLh13WCpPHrrQLvfKwKDqqVrMVwXjPcmoP___o4g@mail.gmail.com>
References: <CAH05x1G34LOV5BM=y61ZDumxg2+p4Mq8iEo8xLk=E5HVhNw7GQ@mail.gmail.com>
 <CA+8X3fVb5aAXQUVLkTrE7qCxRZjCEqb5XDc6s=MurFrebUSj8A@mail.gmail.com>
 <CAH05x1FBaqFynVU_8BQWC=s+4mehS-6pF9NcVKMQ3px9u1HH3g@mail.gmail.com>
 <CAH05x1G668Hs9cvXaJAqCNjcHUwWppjq91qDnZwMALUVX88rfA@mail.gmail.com>
 <CAGgJW74aNnekWtvfSS50ss+E9pGnzA3rm-_WWxb=w7cWU7+5bw@mail.gmail.com>
 <CAH05x1GJC5gLh13WCpPHrrQLvfKwKDqqVrMVwXjPcmoP___o4g@mail.gmail.com>
Message-ID: <CAGxFJbS-bF2TunCyyA7fvJwN9=NY0BQ5jAQF_4XwG-54m6y5Ug@mail.gmail.com>

Perhaps the following will be helpful (you can ignore the warning message
here):

> set.seed(1001)
> x <- sample(1:5,10, rep = TRUE)
> y <- sample(1:5,12, rep = TRUE)
> n <- seq_len(min(length(x), length(y)))
> flag <- as.numeric(abs(x-y)[n] <= 1)
Warning message:
In x - y : longer object length is not a multiple of shorter object length
> cbind(x[n], y[n], flag)
          flag
 [1,] 3 2    1
 [2,] 3 2    1
 [3,] 4 4    1
 [4,] 4 3    1
 [5,] 4 4    1
 [6,] 4 1    0
 [7,] 4 2    0
 [8,] 5 3    0
 [9,] 5 5    1
[10,] 3 1    0

Do note that all columns in a data frame must have the same length, so
maybe you'll need to pad with NA's -- I do not entirely get what you are
trying to do.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jul 4, 2020 at 8:04 AM Kathan Desai <kdesai1 at sheffield.ac.uk> wrote:

> *I hope this is more succinct.*
>
> *I have the following code: *
> list_df$position_tab_5$ID <- unlist(lapply(list_df$position_tab_5$midpoint,
> function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <=
> 1),1,0)))
>
>
> It compares every observation from the midpoint column from dataframe 2 to
> every observation from the midpoint column from dataframe 1. It does this
> in order to find any values within +/- 1 of the value, and if it satisfies
> this criteria then it assigns it a unique id of 1. If not then a value of
> 0.
>
> In the example below, pos_tab_5 is being compared to pos_tab_4:
>
> Pos tab 4:
> Object minimum maximum midpoint
> 2600    4             22             13
> 2604    42           85             63.5
> 2606    142         172           157
> 2609    223         241           232
> 2611    393         421           407
>
> Pos tab 5:
> Object minimum maximum midpoint ID
> 2580    3             21             12           1
> 2581    43           85             64           1
> 2585    132         168           150         0
> 2586    223         241           232         1
> 2589    391         419           405         0
>
> The reason it compares every observation from pos_tab_(n) to pos_tab_(n-1)
> is because some of the dataframes are of different row length, and so by
> comparing every observation from one DF to another, it can find any values
> that are within +/- 1 of each other. (which is the main thing i'm looking
> for)
>
> I need help looping this function over a list of dataframes. The list of
> dataframes called: list_df contains 121 different dataframes all
> representing a different time point of the object.
>
> This is what i have so far:
> for(i in seq_along(list_df)){
>    list_df$position_tab_[[i]]$ID <-
>      unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
>                  ifelse(any(abs(x - list_df$position_tab_[[i-1]]$midpoint)
> <= 1),1,0)
>             ))
> }
>
> On Sat, 4 Jul 2020 at 14:44, Eric Berger <ericjberger at gmail.com> wrote:
>
> > Hi Kathan,
> > How about trying to create a *minimal* reproducible example, e.g. with a
> > list of two data frames, where each data frame has 5 rows,?
> > My guess is that there is a good chance that when you try to create such
> > an example, you will discover the problem yourself.
> > In the event that you create the example but still cannot solve your
> > issue, you will find more people on this list willing to look into your
> > question, as it will be much faster for them to do that (compared to the
> > original formulation.)
> >
> > Eric
> >
> >
> > On Sat, Jul 4, 2020 at 4:33 PM Kathan Desai <kdesai1 at sheffield.ac.uk>
> > wrote:
> >
> >> ---------- Forwarded message ---------
> >> From: Kathan Desai <kdesai1 at sheffield.ac.uk>
> >> Date: Sat, 4 Jul 2020 at 14:31
> >> Subject: Re: [R] Help with looping a function over a list of dataframes:
> >> To: Jim Lemon <drjimlemon at gmail.com>
> >>
> >>
> >> Hi Jim,
> >>
> >> Thankyou for your reply, I tried the function you suggested and it
> >> doesn't seem to work. There are again no error messages produced,
> however
> >> the transformation to each position_tab_n table isn't being applied.
> >>
> >> Cheers,
> >> Kathan
> >>
> >>
> >> On Sat, 4 Jul 2020 at 11:14, Jim Lemon <drjimlemon at gmail.com> wrote:
> >>
> >> > Hi Kathan,
> >> > This is a very lazy answer as I haven't tested it. I think you will
> >> > need to wrap your loop in a function and return the modified list_df
> >> > to assign it like this:
> >> >
> >> > add_IDs<-function(xdf) {
> >> >  for(i in seq_along(xdf)) {
> >> >   xdf$position_tab_[[i]]$ID <-
> >> >    unlist(lapply(xdf$position_tab_[[i]]$midpoint, function(x)
> >> >     ifelse(any(abs(x - xdf$position_tab_[[i-1]]$midpoint)<= 1),1,0)))
> >> >  }
> >> >  return(xdf)
> >> > }
> >> > list_df<-add_IDs(list_df)
> >> >
> >> > Jim
> >> >
> >> > On Sat, Jul 4, 2020 at 4:48 PM Kathan Desai <kdesai1 at sheffield.ac.uk>
> >> > wrote:
> >> > >
> >> > > I have been trying to run a forloop for a function that compares
> >> > dataframe n
> >> > > with dataframe n-1, across a list of dataframes. It does this by
> >> checking
> >> > > each midpoint of dataframe n with each midpoint of dataframe n-1.
> >> This is
> >> > > done to make up for an disparity in row length. The idea of this
> code
> >> is
> >> > to
> >> > > identify any objects that are stationary, and assign them an id of
> 1,
> >> and
> >> > > the dynamic objects are assigned an id of 0 (examples can be found
> >> > below).
> >> > >
> >> > >
> >> > > *This is what i have so far:*
> >> > > for(i in seq_along(list_df)){
> >> > >    list_df$position_tab_[[i]]$ID <-
> >> > >      unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
> >> > >                  ifelse(any(abs(x -
> >> > list_df$position_tab_[[i-1]]$midpoint)
> >> > > <= 1),1,0)
> >> > >             ))
> >> > > }
> >> > >
> >> > > There is no error message being produced so theres nothing to debug,
> >> i am
> >> > > quite new to R programming in general so excuse any silly mistakes i
> >> may
> >> > > have made. The function doesnt seem to be adding the ID columns and
> >> > > comparing the data as it should.
> >> > >
> >> > > my list of dataframes contain dataframes named: position_tab_1,
> >> > > position_tab_2 .... position_tab_121. Each position_tab represents a
> >> > > timepoints, so in total there are 121 timepoints (frames). I need
> the
> >> > loop
> >> > > to run so that pos_tab_2 compares to pos_tab_1 and this continues
> all
> >> the
> >> > > way to pos_tab_121 comparing to pos_tab_120.
> >> > >
> >> > > The function adds a column named "id" to each of these dataframes as
> >> it
> >> > > compares to the dataframe before it, so all dataframes apart from
> >> > > position_tab_1 (as it has nothing to compare to) should have this
> >> added.
> >> > >
> >> > >
> >> > > *Some of my data (first 10 dataframes in list):*
> >> > > > dput(list_df[1:10])
> >> > > list(position_tab_1 = structure(list(Object = c(2666L, 2668L,
> >> > > 2671L, 2674L, 2676L, 2677L, 2678L, 2679L, 2680L, 2682L, 2683L,
> >> > > 2684L, 2685L, 2686L, 2687L, 2689L, 2692L, 2693L, 2694L, 2695L,
> >> > > 2696L), minimum = c(4L, 39L, 147L, 224L, 419L, 531L, 595L, 641L,
> >> > > 669L, 723L, 810L, 836L, 907L, 978L, 1061L, 1129L, 1290L, 1519L,
> >> > > 1749L, 1843L, 1897L), maximum = c(22L, 85L, 173L, 242L, 449L,
> >> > > 587L, 627L, 655L, 702L, 740L, 828L, 890L, 923L, 1024L, 1086L,
> >> > > 1144L, 1302L, 1544L, 1780L, 1870L, 1925L), midpoint = c(13, 62,
> >> > > 160, 233, 434, 559, 611, 648, 685.5, 731.5, 819, 863, 915, 1001,
> >> > > 1073.5, 1136.5, 1296, 1531.5, 1764.5, 1856.5, 1911)), row.names =
> >> c(NA,
> >> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_2 =
> >> > > structure(list(
> >> > >     Object = c(2645L, 2646L, 2650L, 2652L, 2655L, 2656L, 2657L,
> >> > >     2658L, 2659L, 2661L, 2662L, 2663L, 2664L, 2665L, 2667L, 2670L,
> >> > >     2675L, 2681L, 2688L, 2690L, 2691L), minimum = c(4L, 40L,
> >> > >     147L, 224L, 415L, 532L, 595L, 641L, 670L, 722L, 811L, 835L,
> >> > >     907L, 978L, 1061L, 1128L, 1289L, 1520L, 1748L, 1843L, 1897L
> >> > >     ), maximum = c(22L, 85L, 173L, 242L, 445L, 588L, 627L, 655L,
> >> > >     702L, 739L, 828L, 891L, 923L, 1022L, 1085L, 1143L, 1302L,
> >> > >     1544L, 1779L, 1870L, 1925L), midpoint = c(13, 62.5, 160,
> >> > >     233, 430, 560, 611, 648, 686, 730.5, 819.5, 863, 915, 1000,
> >> > >     1073, 1135.5, 1295.5, 1532, 1763.5, 1856.5, 1911)), row.names =
> >> c(NA,
> >> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_3 =
> >> > > structure(list(
> >> > >     Object = c(2623L, 2624L, 2627L, 2631L, 2633L, 2635L, 2636L,
> >> > >     2637L, 2638L, 2640L, 2641L, 2642L, 2643L, 2644L, 2647L, 2649L,
> >> > >     2654L, 2660L, 2669L, 2672L, 2673L), minimum = c(3L, 39L,
> >> > >     149L, 223L, 402L, 539L, 594L, 639L, 669L, 722L, 811L, 834L,
> >> > >     907L, 979L, 1060L, 1129L, 1289L, 1520L, 1749L, 1842L, 1897L
> >> > >     ), maximum = c(22L, 86L, 175L, 241L, 431L, 587L, 627L, 653L,
> >> > >     700L, 738L, 828L, 894L, 925L, 1021L, 1084L, 1144L, 1302L,
> >> > >     1544L, 1779L, 1869L, 1925L), midpoint = c(12.5, 62.5, 162,
> >> > >     232, 416.5, 563, 610.5, 646, 684.5, 730, 819.5, 864, 916,
> >> > >     1000, 1072, 1136.5, 1295.5, 1532, 1764, 1855.5, 1911)),
> row.names
> >> =
> >> > > c(NA,
> >> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_4 =
> >> > > structure(list(
> >> > >     Object = c(2600L, 2604L, 2606L, 2609L, 2611L, 2613L, 2614L,
> >> > >     2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L, 2626L, 2628L,
> >> > >     2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L, 42L,
> >> > >     142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
> >> > >     908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L
> >> > >     ), maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
> >> > >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
> >> > >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
> >> > >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
> >> > >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names =
> >> c(NA,
> >> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_5 =
> >> > > structure(list(
> >> > >     Object = c(2580L, 2581L, 2585L, 2586L, 2589L, 2590L, 2592L,
> >> > >     2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L, 2601L, 2603L,
> >> > >     2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L), minimum =
> c(3L,
> >> > >     43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L, 808L, 836L,
> >> > >     861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L, 1748L,
> >> > >     1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L, 419L,
> >> > >     629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L, 1050L,
> >> > >     1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L),
> >> > >     midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
> >> > >     818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5,
> >> > >     1531.5, 1764, 1855.5, 1909, 2148)), row.names = c(NA, -23L
> >> > > ), class = c("tbl_df", "tbl", "data.frame")), position_tab_6 =
> >> > > structure(list(
> >> > >     Object = c(2555L, 2559L, 2562L, 2563L, 2564L, 2567L, 2569L,
> >> > >     2570L, 2571L, 2572L, 2573L, 2574L, 2575L, 2576L, 2577L, 2579L,
> >> > >     2583L, 2587L, 2591L, 2602L, 2607L, 2608L, 2612L), minimum =
> c(4L,
> >> > >     45L, 123L, 154L, 224L, 390L, 546L, 600L, 643L, 669L, 720L,
> >> > >     804L, 836L, 908L, 967L, 1058L, 1129L, 1289L, 1519L, 1748L,
> >> > >     1843L, 1893L, 2147L), maximum = c(23L, 86L, 150L, 171L, 241L,
> >> > >     419L, 589L, 636L, 657L, 701L, 738L, 827L, 879L, 925L, 1011L,
> >> > >     1084L, 1144L, 1301L, 1543L, 1780L, 1871L, 1924L, 2148L),
> >> > >     midpoint = c(13.5, 65.5, 136.5, 162.5, 232.5, 404.5, 567.5,
> >> > >     618, 650, 685, 729, 815.5, 857.5, 916.5, 989, 1071, 1136.5,
> >> > >     1295, 1531, 1764, 1857, 1908.5, 2147.5)), row.names = c(NA,
> >> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_7 =
> >> > > structure(list(
> >> > >     Object = c(2537L, 2539L, 2540L, 2541L, 2542L, 2544L, 2546L,
> >> > >     2547L, 2548L, 2549L, 2550L, 2551L, 2552L, 2554L, 2556L, 2558L,
> >> > >     2560L, 2565L, 2568L, 2578L, 2582L, 2584L, 2588L), minimum =
> c(3L,
> >> > >     45L, 122L, 156L, 224L, 387L, 546L, 601L, 669L, 719L, 803L,
> >> > >     837L, 908L, 959L, 1059L, 1096L, 1128L, 1289L, 1519L, 1748L,
> >> > >     1844L, 1892L, 2147L), maximum = c(22L, 86L, 147L, 172L, 241L,
> >> > >     415L, 590L, 656L, 699L, 738L, 830L, 871L, 924L, 1014L, 1082L,
> >> > >     1119L, 1144L, 1301L, 1543L, 1781L, 1872L, 1925L, 2148L),
> >> > >     midpoint = c(12.5, 65.5, 134.5, 164, 232.5, 401, 568, 628.5,
> >> > >     684, 728.5, 816.5, 854, 916, 986.5, 1070.5, 1107.5, 1136,
> >> > >     1295, 1531, 1764.5, 1858, 1908.5, 2147.5)), row.names = c(NA,
> >> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_8 =
> >> > > structure(list(
> >> > >     Object = c(2514L, 2517L, 2519L, 2520L, 2521L, 2523L, 2525L,
> >> > >     2526L, 2527L, 2528L, 2529L, 2530L, 2531L, 2532L, 2533L, 2534L,
> >> > >     2536L, 2543L, 2545L, 2553L, 2557L, 2561L, 2566L), minimum =
> c(5L,
> >> > >     44L, 121L, 153L, 224L, 380L, 546L, 603L, 668L, 721L, 802L,
> >> > >     841L, 907L, 960L, 1006L, 1060L, 1106L, 1288L, 1518L, 1748L,
> >> > >     1843L, 1893L, 2148L), maximum = c(23L, 86L, 146L, 170L, 242L,
> >> > >     409L, 588L, 655L, 699L, 738L, 830L, 872L, 924L, 994L, 1029L,
> >> > >     1084L, 1143L, 1302L, 1543L, 1781L, 1870L, 1925L, 2148L),
> >> > >     midpoint = c(14, 65, 133.5, 161.5, 233, 394.5, 567, 629,
> >> > >     683.5, 729.5, 816, 856.5, 915.5, 977, 1017.5, 1072, 1124.5,
> >> > >     1295, 1530.5, 1764.5, 1856.5, 1909, 2148)), row.names = c(NA,
> >> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_9 =
> >> > > structure(list(
> >> > >     Object = c(2492L, 2493L, 2497L, 2498L, 2499L, 2501L, 2503L,
> >> > >     2504L, 2505L, 2506L, 2507L, 2508L, 2509L, 2510L, 2511L, 2513L,
> >> > >     2516L, 2522L, 2524L, 2532L, 2535L, 2538L), minimum = c(6L,
> >> > >     44L, 111L, 149L, 224L, 375L, 548L, 596L, 668L, 722L, 800L,
> >> > >     840L, 908L, 960L, 1005L, 1058L, 1127L, 1289L, 1519L, 1748L,
> >> > >     1842L, 1891L), maximum = c(24L, 81L, 137L, 167L, 242L, 403L,
> >> > >     589L, 656L, 699L, 738L, 828L, 872L, 925L, 994L, 1028L, 1081L,
> >> > >     1149L, 1302L, 1544L, 1780L, 1868L, 1924L), midpoint = c(15,
> >> > >     62.5, 124, 158, 233, 389, 568.5, 626, 683.5, 730, 814, 856,
> >> > >     916.5, 977, 1016.5, 1069.5, 1138, 1295.5, 1531.5, 1764, 1855,
> >> > >     1907.5)), row.names = c(NA, -22L), class = c("tbl_df", "tbl",
> >> > > "data.frame")), position_tab_10 = structure(list(Object = c(2469L,
> >> > > 2471L, 2474L, 2475L, 2476L, 2478L, 2481L, 2482L, 2483L, 2484L,
> >> > > 2485L, 2486L, 2487L, 2488L, 2489L, 2491L, 2495L, 2500L, 2502L,
> >> > > 2512L, 2515L, 2518L), minimum = c(6L, 38L, 109L, 147L, 223L,
> >> > > 363L, 548L, 597L, 668L, 719L, 803L, 839L, 908L, 958L, 1004L,
> >> > > 1058L, 1126L, 1288L, 1519L, 1746L, 1841L, 1892L), maximum = c(24L,
> >> > > 76L, 134L, 165L, 240L, 394L, 591L, 656L, 698L, 737L, 829L, 869L,
> >> > > 924L, 996L, 1027L, 1081L, 1147L, 1301L, 1543L, 1781L, 1868L,
> >> > > 1925L), midpoint = c(15, 57, 121.5, 156, 231.5, 378.5, 569.5,
> >> > > 626.5, 683, 728, 816, 854, 916, 977, 1015.5, 1069.5, 1136.5,
> >> > > 1294.5, 1531, 1763.5, 1854.5, 1908.5)), row.names = c(NA, -22L
> >> > > ), class = c("tbl_df", "tbl", "data.frame")))
> >> > >
> >> > > *What is produced when running the base code without any loops:*
> >> > >
> >> > > This is the base code without me trying to loop it in anyway, below
> is
> >> > what
> >> > > it produces when its used with dataframe 4 and 5:
> >> > >
> >> > > #the code:
> >> > > list_df$position_tab_5$ID <-
> >> > unlist(lapply(list_df$position_tab_5$midpoint,
> >> > > function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <=
> >> > 1),1,0)))
> >> > >
> >> > > ##position_tab_5 after manipulations have occured:
> >> > > structure(list(Object = c(2580L, 2581L, 2585L, 2586L, 2589L,
> >> > > 2590L, 2592L, 2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L,
> >> > > 2601L, 2603L, 2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L
> >> > > ), minimum = c(3L, 43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L,
> >> > > 808L, 836L, 861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L,
> >> > > 1748L, 1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L,
> >> > > 419L, 629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L,
> >> > > 1050L, 1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L
> >> > > ), midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
> >> > > 818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5, 1531.5,
> >> > > 1764, 1855.5, 1909, 2148), ID = c(1, 1, 0, 1, 0, 0, 0, 1, 1,
> >> > > 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0)), row.names = c(NA,
> >> > > -23L), class = c("tbl_df", "tbl", "data.frame"))
> >> > >
> >> > > #position_tab_4 (the DF pos_tab_5 is being compared to)
> >> > > structure(list(Object = c(2600L, 2604L, 2606L, 2609L, 2611L,
> >> > > 2613L, 2614L, 2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L,
> >> > > 2626L, 2628L, 2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L,
> >> > > 42L, 142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
> >> > > 908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L),
> >> > >     maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
> >> > >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
> >> > >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
> >> > >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
> >> > >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names =
> >> c(NA,
> >> > > -21L), class = c("tbl_df", "tbl", "data.frame"))
> >> > >
> >> > > *Appreciate any help, anyone can provide!*
> >> > >
> >> > >         [[alternative HTML version deleted]]
> >> > >
> >> > > ______________________________________________
> >> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > > PLEASE do read the posting guide
> >> > http://www.R-project.org/posting-guide.html
> >> > > and provide commented, minimal, self-contained, reproducible code.
> >> >
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kde@@|1 @end|ng |rom @he|||e|d@@c@uk  Sat Jul  4 17:39:18 2020
From: kde@@|1 @end|ng |rom @he|||e|d@@c@uk (Kathan Desai)
Date: Sat, 4 Jul 2020 16:39:18 +0100
Subject: [R] 
 Fwd: Help with looping a function over a list of dataframes:
In-Reply-To: <CAGxFJbS-bF2TunCyyA7fvJwN9=NY0BQ5jAQF_4XwG-54m6y5Ug@mail.gmail.com>
References: <CAH05x1G34LOV5BM=y61ZDumxg2+p4Mq8iEo8xLk=E5HVhNw7GQ@mail.gmail.com>
 <CA+8X3fVb5aAXQUVLkTrE7qCxRZjCEqb5XDc6s=MurFrebUSj8A@mail.gmail.com>
 <CAH05x1FBaqFynVU_8BQWC=s+4mehS-6pF9NcVKMQ3px9u1HH3g@mail.gmail.com>
 <CAH05x1G668Hs9cvXaJAqCNjcHUwWppjq91qDnZwMALUVX88rfA@mail.gmail.com>
 <CAGgJW74aNnekWtvfSS50ss+E9pGnzA3rm-_WWxb=w7cWU7+5bw@mail.gmail.com>
 <CAH05x1GJC5gLh13WCpPHrrQLvfKwKDqqVrMVwXjPcmoP___o4g@mail.gmail.com>
 <CAGxFJbS-bF2TunCyyA7fvJwN9=NY0BQ5jAQF_4XwG-54m6y5Ug@mail.gmail.com>
Message-ID: <CAH05x1Fh9T_aj2-oB12-KTnj_FHj_DJPfQhsgw-B0F2ZFkvuQw@mail.gmail.com>

Hello thanks everyone for your help i managed to get a working function as
followed:

for(i in 2:length(list_df)){
list_df[[paste0("position_tab_",i)]][['ID']] <-
 unlist(lapply(list_df[[paste0("position_tab_",i)]][['midpoint']],
function(x)
  ifelse(any(abs(x - list_df[[paste0("position_tab_",i-1)]][['midpoint']])
                       <= 1),1,0)         )) }

The idea with this was to detect stationary mitochondria from each frame.
So i needed to link objects from frame to frame (pos_tab = one frame) and
find any of them that didnt move more than 2 pixels hence the +/- one
requirement.

On Sat, 4 Jul 2020 at 16:25, Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Perhaps the following will be helpful (you can ignore the warning message
> here):
>
> > set.seed(1001)
> > x <- sample(1:5,10, rep = TRUE)
> > y <- sample(1:5,12, rep = TRUE)
> > n <- seq_len(min(length(x), length(y)))
> > flag <- as.numeric(abs(x-y)[n] <= 1)
> Warning message:
> In x - y : longer object length is not a multiple of shorter object length
> > cbind(x[n], y[n], flag)
>           flag
>  [1,] 3 2    1
>  [2,] 3 2    1
>  [3,] 4 4    1
>  [4,] 4 3    1
>  [5,] 4 4    1
>  [6,] 4 1    0
>  [7,] 4 2    0
>  [8,] 5 3    0
>  [9,] 5 5    1
> [10,] 3 1    0
>
> Do note that all columns in a data frame must have the same length, so
> maybe you'll need to pad with NA's -- I do not entirely get what you are
> trying to do.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sat, Jul 4, 2020 at 8:04 AM Kathan Desai <kdesai1 at sheffield.ac.uk>
> wrote:
>
>> *I hope this is more succinct.*
>>
>> *I have the following code: *
>> list_df$position_tab_5$ID <-
>> unlist(lapply(list_df$position_tab_5$midpoint,
>> function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <=
>> 1),1,0)))
>>
>>
>> It compares every observation from the midpoint column from dataframe 2 to
>> every observation from the midpoint column from dataframe 1. It does this
>> in order to find any values within +/- 1 of the value, and if it satisfies
>> this criteria then it assigns it a unique id of 1. If not then a value of
>> 0.
>>
>> In the example below, pos_tab_5 is being compared to pos_tab_4:
>>
>> Pos tab 4:
>> Object minimum maximum midpoint
>> 2600    4             22             13
>> 2604    42           85             63.5
>> 2606    142         172           157
>> 2609    223         241           232
>> 2611    393         421           407
>>
>> Pos tab 5:
>> Object minimum maximum midpoint ID
>> 2580    3             21             12           1
>> 2581    43           85             64           1
>> 2585    132         168           150         0
>> 2586    223         241           232         1
>> 2589    391         419           405         0
>>
>> The reason it compares every observation from pos_tab_(n) to pos_tab_(n-1)
>> is because some of the dataframes are of different row length, and so by
>> comparing every observation from one DF to another, it can find any values
>> that are within +/- 1 of each other. (which is the main thing i'm looking
>> for)
>>
>> I need help looping this function over a list of dataframes. The list of
>> dataframes called: list_df contains 121 different dataframes all
>> representing a different time point of the object.
>>
>> This is what i have so far:
>> for(i in seq_along(list_df)){
>>    list_df$position_tab_[[i]]$ID <-
>>      unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
>>                  ifelse(any(abs(x - list_df$position_tab_[[i-1]]$midpoint)
>> <= 1),1,0)
>>             ))
>> }
>>
>> On Sat, 4 Jul 2020 at 14:44, Eric Berger <ericjberger at gmail.com> wrote:
>>
>> > Hi Kathan,
>> > How about trying to create a *minimal* reproducible example, e.g. with a
>> > list of two data frames, where each data frame has 5 rows,?
>> > My guess is that there is a good chance that when you try to create such
>> > an example, you will discover the problem yourself.
>> > In the event that you create the example but still cannot solve your
>> > issue, you will find more people on this list willing to look into your
>> > question, as it will be much faster for them to do that (compared to the
>> > original formulation.)
>> >
>> > Eric
>> >
>> >
>> > On Sat, Jul 4, 2020 at 4:33 PM Kathan Desai <kdesai1 at sheffield.ac.uk>
>> > wrote:
>> >
>> >> ---------- Forwarded message ---------
>> >> From: Kathan Desai <kdesai1 at sheffield.ac.uk>
>> >> Date: Sat, 4 Jul 2020 at 14:31
>> >> Subject: Re: [R] Help with looping a function over a list of
>> dataframes:
>> >> To: Jim Lemon <drjimlemon at gmail.com>
>> >>
>> >>
>> >> Hi Jim,
>> >>
>> >> Thankyou for your reply, I tried the function you suggested and it
>> >> doesn't seem to work. There are again no error messages produced,
>> however
>> >> the transformation to each position_tab_n table isn't being applied.
>> >>
>> >> Cheers,
>> >> Kathan
>> >>
>> >>
>> >> On Sat, 4 Jul 2020 at 11:14, Jim Lemon <drjimlemon at gmail.com> wrote:
>> >>
>> >> > Hi Kathan,
>> >> > This is a very lazy answer as I haven't tested it. I think you will
>> >> > need to wrap your loop in a function and return the modified list_df
>> >> > to assign it like this:
>> >> >
>> >> > add_IDs<-function(xdf) {
>> >> >  for(i in seq_along(xdf)) {
>> >> >   xdf$position_tab_[[i]]$ID <-
>> >> >    unlist(lapply(xdf$position_tab_[[i]]$midpoint, function(x)
>> >> >     ifelse(any(abs(x - xdf$position_tab_[[i-1]]$midpoint)<= 1),1,0)))
>> >> >  }
>> >> >  return(xdf)
>> >> > }
>> >> > list_df<-add_IDs(list_df)
>> >> >
>> >> > Jim
>> >> >
>> >> > On Sat, Jul 4, 2020 at 4:48 PM Kathan Desai <kdesai1 at sheffield.ac.uk
>> >
>> >> > wrote:
>> >> > >
>> >> > > I have been trying to run a forloop for a function that compares
>> >> > dataframe n
>> >> > > with dataframe n-1, across a list of dataframes. It does this by
>> >> checking
>> >> > > each midpoint of dataframe n with each midpoint of dataframe n-1.
>> >> This is
>> >> > > done to make up for an disparity in row length. The idea of this
>> code
>> >> is
>> >> > to
>> >> > > identify any objects that are stationary, and assign them an id of
>> 1,
>> >> and
>> >> > > the dynamic objects are assigned an id of 0 (examples can be found
>> >> > below).
>> >> > >
>> >> > >
>> >> > > *This is what i have so far:*
>> >> > > for(i in seq_along(list_df)){
>> >> > >    list_df$position_tab_[[i]]$ID <-
>> >> > >      unlist(lapply(list_df$position_tab_[[i]]$midpoint, function(x)
>> >> > >                  ifelse(any(abs(x -
>> >> > list_df$position_tab_[[i-1]]$midpoint)
>> >> > > <= 1),1,0)
>> >> > >             ))
>> >> > > }
>> >> > >
>> >> > > There is no error message being produced so theres nothing to
>> debug,
>> >> i am
>> >> > > quite new to R programming in general so excuse any silly mistakes
>> i
>> >> may
>> >> > > have made. The function doesnt seem to be adding the ID columns and
>> >> > > comparing the data as it should.
>> >> > >
>> >> > > my list of dataframes contain dataframes named: position_tab_1,
>> >> > > position_tab_2 .... position_tab_121. Each position_tab represents
>> a
>> >> > > timepoints, so in total there are 121 timepoints (frames). I need
>> the
>> >> > loop
>> >> > > to run so that pos_tab_2 compares to pos_tab_1 and this continues
>> all
>> >> the
>> >> > > way to pos_tab_121 comparing to pos_tab_120.
>> >> > >
>> >> > > The function adds a column named "id" to each of these dataframes
>> as
>> >> it
>> >> > > compares to the dataframe before it, so all dataframes apart from
>> >> > > position_tab_1 (as it has nothing to compare to) should have this
>> >> added.
>> >> > >
>> >> > >
>> >> > > *Some of my data (first 10 dataframes in list):*
>> >> > > > dput(list_df[1:10])
>> >> > > list(position_tab_1 = structure(list(Object = c(2666L, 2668L,
>> >> > > 2671L, 2674L, 2676L, 2677L, 2678L, 2679L, 2680L, 2682L, 2683L,
>> >> > > 2684L, 2685L, 2686L, 2687L, 2689L, 2692L, 2693L, 2694L, 2695L,
>> >> > > 2696L), minimum = c(4L, 39L, 147L, 224L, 419L, 531L, 595L, 641L,
>> >> > > 669L, 723L, 810L, 836L, 907L, 978L, 1061L, 1129L, 1290L, 1519L,
>> >> > > 1749L, 1843L, 1897L), maximum = c(22L, 85L, 173L, 242L, 449L,
>> >> > > 587L, 627L, 655L, 702L, 740L, 828L, 890L, 923L, 1024L, 1086L,
>> >> > > 1144L, 1302L, 1544L, 1780L, 1870L, 1925L), midpoint = c(13, 62,
>> >> > > 160, 233, 434, 559, 611, 648, 685.5, 731.5, 819, 863, 915, 1001,
>> >> > > 1073.5, 1136.5, 1296, 1531.5, 1764.5, 1856.5, 1911)), row.names =
>> >> c(NA,
>> >> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_2 =
>> >> > > structure(list(
>> >> > >     Object = c(2645L, 2646L, 2650L, 2652L, 2655L, 2656L, 2657L,
>> >> > >     2658L, 2659L, 2661L, 2662L, 2663L, 2664L, 2665L, 2667L, 2670L,
>> >> > >     2675L, 2681L, 2688L, 2690L, 2691L), minimum = c(4L, 40L,
>> >> > >     147L, 224L, 415L, 532L, 595L, 641L, 670L, 722L, 811L, 835L,
>> >> > >     907L, 978L, 1061L, 1128L, 1289L, 1520L, 1748L, 1843L, 1897L
>> >> > >     ), maximum = c(22L, 85L, 173L, 242L, 445L, 588L, 627L, 655L,
>> >> > >     702L, 739L, 828L, 891L, 923L, 1022L, 1085L, 1143L, 1302L,
>> >> > >     1544L, 1779L, 1870L, 1925L), midpoint = c(13, 62.5, 160,
>> >> > >     233, 430, 560, 611, 648, 686, 730.5, 819.5, 863, 915, 1000,
>> >> > >     1073, 1135.5, 1295.5, 1532, 1763.5, 1856.5, 1911)), row.names =
>> >> c(NA,
>> >> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_3 =
>> >> > > structure(list(
>> >> > >     Object = c(2623L, 2624L, 2627L, 2631L, 2633L, 2635L, 2636L,
>> >> > >     2637L, 2638L, 2640L, 2641L, 2642L, 2643L, 2644L, 2647L, 2649L,
>> >> > >     2654L, 2660L, 2669L, 2672L, 2673L), minimum = c(3L, 39L,
>> >> > >     149L, 223L, 402L, 539L, 594L, 639L, 669L, 722L, 811L, 834L,
>> >> > >     907L, 979L, 1060L, 1129L, 1289L, 1520L, 1749L, 1842L, 1897L
>> >> > >     ), maximum = c(22L, 86L, 175L, 241L, 431L, 587L, 627L, 653L,
>> >> > >     700L, 738L, 828L, 894L, 925L, 1021L, 1084L, 1144L, 1302L,
>> >> > >     1544L, 1779L, 1869L, 1925L), midpoint = c(12.5, 62.5, 162,
>> >> > >     232, 416.5, 563, 610.5, 646, 684.5, 730, 819.5, 864, 916,
>> >> > >     1000, 1072, 1136.5, 1295.5, 1532, 1764, 1855.5, 1911)),
>> row.names
>> >> =
>> >> > > c(NA,
>> >> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_4 =
>> >> > > structure(list(
>> >> > >     Object = c(2600L, 2604L, 2606L, 2609L, 2611L, 2613L, 2614L,
>> >> > >     2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L, 2626L, 2628L,
>> >> > >     2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L, 42L,
>> >> > >     142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
>> >> > >     908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L
>> >> > >     ), maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
>> >> > >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
>> >> > >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
>> >> > >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
>> >> > >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names =
>> >> c(NA,
>> >> > > -21L), class = c("tbl_df", "tbl", "data.frame")), position_tab_5 =
>> >> > > structure(list(
>> >> > >     Object = c(2580L, 2581L, 2585L, 2586L, 2589L, 2590L, 2592L,
>> >> > >     2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L, 2601L, 2603L,
>> >> > >     2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L), minimum =
>> c(3L,
>> >> > >     43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L, 808L, 836L,
>> >> > >     861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L, 1748L,
>> >> > >     1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L, 419L,
>> >> > >     629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L, 1050L,
>> >> > >     1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L),
>> >> > >     midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
>> >> > >     818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5,
>> >> > >     1531.5, 1764, 1855.5, 1909, 2148)), row.names = c(NA, -23L
>> >> > > ), class = c("tbl_df", "tbl", "data.frame")), position_tab_6 =
>> >> > > structure(list(
>> >> > >     Object = c(2555L, 2559L, 2562L, 2563L, 2564L, 2567L, 2569L,
>> >> > >     2570L, 2571L, 2572L, 2573L, 2574L, 2575L, 2576L, 2577L, 2579L,
>> >> > >     2583L, 2587L, 2591L, 2602L, 2607L, 2608L, 2612L), minimum =
>> c(4L,
>> >> > >     45L, 123L, 154L, 224L, 390L, 546L, 600L, 643L, 669L, 720L,
>> >> > >     804L, 836L, 908L, 967L, 1058L, 1129L, 1289L, 1519L, 1748L,
>> >> > >     1843L, 1893L, 2147L), maximum = c(23L, 86L, 150L, 171L, 241L,
>> >> > >     419L, 589L, 636L, 657L, 701L, 738L, 827L, 879L, 925L, 1011L,
>> >> > >     1084L, 1144L, 1301L, 1543L, 1780L, 1871L, 1924L, 2148L),
>> >> > >     midpoint = c(13.5, 65.5, 136.5, 162.5, 232.5, 404.5, 567.5,
>> >> > >     618, 650, 685, 729, 815.5, 857.5, 916.5, 989, 1071, 1136.5,
>> >> > >     1295, 1531, 1764, 1857, 1908.5, 2147.5)), row.names = c(NA,
>> >> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_7 =
>> >> > > structure(list(
>> >> > >     Object = c(2537L, 2539L, 2540L, 2541L, 2542L, 2544L, 2546L,
>> >> > >     2547L, 2548L, 2549L, 2550L, 2551L, 2552L, 2554L, 2556L, 2558L,
>> >> > >     2560L, 2565L, 2568L, 2578L, 2582L, 2584L, 2588L), minimum =
>> c(3L,
>> >> > >     45L, 122L, 156L, 224L, 387L, 546L, 601L, 669L, 719L, 803L,
>> >> > >     837L, 908L, 959L, 1059L, 1096L, 1128L, 1289L, 1519L, 1748L,
>> >> > >     1844L, 1892L, 2147L), maximum = c(22L, 86L, 147L, 172L, 241L,
>> >> > >     415L, 590L, 656L, 699L, 738L, 830L, 871L, 924L, 1014L, 1082L,
>> >> > >     1119L, 1144L, 1301L, 1543L, 1781L, 1872L, 1925L, 2148L),
>> >> > >     midpoint = c(12.5, 65.5, 134.5, 164, 232.5, 401, 568, 628.5,
>> >> > >     684, 728.5, 816.5, 854, 916, 986.5, 1070.5, 1107.5, 1136,
>> >> > >     1295, 1531, 1764.5, 1858, 1908.5, 2147.5)), row.names = c(NA,
>> >> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_8 =
>> >> > > structure(list(
>> >> > >     Object = c(2514L, 2517L, 2519L, 2520L, 2521L, 2523L, 2525L,
>> >> > >     2526L, 2527L, 2528L, 2529L, 2530L, 2531L, 2532L, 2533L, 2534L,
>> >> > >     2536L, 2543L, 2545L, 2553L, 2557L, 2561L, 2566L), minimum =
>> c(5L,
>> >> > >     44L, 121L, 153L, 224L, 380L, 546L, 603L, 668L, 721L, 802L,
>> >> > >     841L, 907L, 960L, 1006L, 1060L, 1106L, 1288L, 1518L, 1748L,
>> >> > >     1843L, 1893L, 2148L), maximum = c(23L, 86L, 146L, 170L, 242L,
>> >> > >     409L, 588L, 655L, 699L, 738L, 830L, 872L, 924L, 994L, 1029L,
>> >> > >     1084L, 1143L, 1302L, 1543L, 1781L, 1870L, 1925L, 2148L),
>> >> > >     midpoint = c(14, 65, 133.5, 161.5, 233, 394.5, 567, 629,
>> >> > >     683.5, 729.5, 816, 856.5, 915.5, 977, 1017.5, 1072, 1124.5,
>> >> > >     1295, 1530.5, 1764.5, 1856.5, 1909, 2148)), row.names = c(NA,
>> >> > > -23L), class = c("tbl_df", "tbl", "data.frame")), position_tab_9 =
>> >> > > structure(list(
>> >> > >     Object = c(2492L, 2493L, 2497L, 2498L, 2499L, 2501L, 2503L,
>> >> > >     2504L, 2505L, 2506L, 2507L, 2508L, 2509L, 2510L, 2511L, 2513L,
>> >> > >     2516L, 2522L, 2524L, 2532L, 2535L, 2538L), minimum = c(6L,
>> >> > >     44L, 111L, 149L, 224L, 375L, 548L, 596L, 668L, 722L, 800L,
>> >> > >     840L, 908L, 960L, 1005L, 1058L, 1127L, 1289L, 1519L, 1748L,
>> >> > >     1842L, 1891L), maximum = c(24L, 81L, 137L, 167L, 242L, 403L,
>> >> > >     589L, 656L, 699L, 738L, 828L, 872L, 925L, 994L, 1028L, 1081L,
>> >> > >     1149L, 1302L, 1544L, 1780L, 1868L, 1924L), midpoint = c(15,
>> >> > >     62.5, 124, 158, 233, 389, 568.5, 626, 683.5, 730, 814, 856,
>> >> > >     916.5, 977, 1016.5, 1069.5, 1138, 1295.5, 1531.5, 1764, 1855,
>> >> > >     1907.5)), row.names = c(NA, -22L), class = c("tbl_df", "tbl",
>> >> > > "data.frame")), position_tab_10 = structure(list(Object = c(2469L,
>> >> > > 2471L, 2474L, 2475L, 2476L, 2478L, 2481L, 2482L, 2483L, 2484L,
>> >> > > 2485L, 2486L, 2487L, 2488L, 2489L, 2491L, 2495L, 2500L, 2502L,
>> >> > > 2512L, 2515L, 2518L), minimum = c(6L, 38L, 109L, 147L, 223L,
>> >> > > 363L, 548L, 597L, 668L, 719L, 803L, 839L, 908L, 958L, 1004L,
>> >> > > 1058L, 1126L, 1288L, 1519L, 1746L, 1841L, 1892L), maximum = c(24L,
>> >> > > 76L, 134L, 165L, 240L, 394L, 591L, 656L, 698L, 737L, 829L, 869L,
>> >> > > 924L, 996L, 1027L, 1081L, 1147L, 1301L, 1543L, 1781L, 1868L,
>> >> > > 1925L), midpoint = c(15, 57, 121.5, 156, 231.5, 378.5, 569.5,
>> >> > > 626.5, 683, 728, 816, 854, 916, 977, 1015.5, 1069.5, 1136.5,
>> >> > > 1294.5, 1531, 1763.5, 1854.5, 1908.5)), row.names = c(NA, -22L
>> >> > > ), class = c("tbl_df", "tbl", "data.frame")))
>> >> > >
>> >> > > *What is produced when running the base code without any loops:*
>> >> > >
>> >> > > This is the base code without me trying to loop it in anyway,
>> below is
>> >> > what
>> >> > > it produces when its used with dataframe 4 and 5:
>> >> > >
>> >> > > #the code:
>> >> > > list_df$position_tab_5$ID <-
>> >> > unlist(lapply(list_df$position_tab_5$midpoint,
>> >> > > function(x) ifelse(any(abs(x - list_df$position_tab_4$midpoint) <=
>> >> > 1),1,0)))
>> >> > >
>> >> > > ##position_tab_5 after manipulations have occured:
>> >> > > structure(list(Object = c(2580L, 2581L, 2585L, 2586L, 2589L,
>> >> > > 2590L, 2592L, 2593L, 2594L, 2595L, 2596L, 2597L, 2598L, 2599L,
>> >> > > 2601L, 2603L, 2605L, 2610L, 2616L, 2625L, 2629L, 2630L, 2634L
>> >> > > ), minimum = c(3L, 43L, 132L, 223L, 391L, 547L, 643L, 669L, 721L,
>> >> > > 808L, 836L, 861L, 908L, 978L, 1028L, 1057L, 1127L, 1288L, 1519L,
>> >> > > 1748L, 1842L, 1893L, 2148L), maximum = c(21L, 85L, 168L, 241L,
>> >> > > 419L, 629L, 656L, 701L, 738L, 828L, 858L, 890L, 925L, 1013L,
>> >> > > 1050L, 1083L, 1143L, 1301L, 1544L, 1780L, 1869L, 1925L, 2148L
>> >> > > ), midpoint = c(12, 64, 150, 232, 405, 588, 649.5, 685, 729.5,
>> >> > > 818, 847, 875.5, 916.5, 995.5, 1039, 1070, 1135, 1294.5, 1531.5,
>> >> > > 1764, 1855.5, 1909, 2148), ID = c(1, 1, 0, 1, 0, 0, 0, 1, 1,
>> >> > > 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0)), row.names = c(NA,
>> >> > > -23L), class = c("tbl_df", "tbl", "data.frame"))
>> >> > >
>> >> > > #position_tab_4 (the DF pos_tab_5 is being compared to)
>> >> > > structure(list(Object = c(2600L, 2604L, 2606L, 2609L, 2611L,
>> >> > > 2613L, 2614L, 2615L, 2617L, 2618L, 2619L, 2620L, 2621L, 2622L,
>> >> > > 2626L, 2628L, 2632L, 2639L, 2648L, 2651L, 2653L), minimum = c(4L,
>> >> > > 42L, 142L, 223L, 393L, 547L, 595L, 641L, 669L, 720L, 809L, 835L,
>> >> > > 908L, 979L, 1059L, 1127L, 1289L, 1519L, 1749L, 1841L, 1897L),
>> >> > >     maximum = c(22L, 85L, 172L, 241L, 421L, 587L, 629L, 655L,
>> >> > >     701L, 738L, 826L, 890L, 925L, 1019L, 1084L, 1143L, 1301L,
>> >> > >     1544L, 1780L, 1868L, 1925L), midpoint = c(13, 63.5, 157,
>> >> > >     232, 407, 567, 612, 648, 685, 729, 817.5, 862.5, 916.5, 999,
>> >> > >     1071.5, 1135, 1295, 1531.5, 1764.5, 1854.5, 1911)), row.names =
>> >> c(NA,
>> >> > > -21L), class = c("tbl_df", "tbl", "data.frame"))
>> >> > >
>> >> > > *Appreciate any help, anyone can provide!*
>> >> > >
>> >> > >         [[alternative HTML version deleted]]
>> >> > >
>> >> > > ______________________________________________
>> >> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> >> > > PLEASE do read the posting guide
>> >> > http://www.R-project.org/posting-guide.html
>> >> > > and provide commented, minimal, self-contained, reproducible code.
>> >> >
>> >>
>> >>         [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >> and provide commented, minimal, self-contained, reproducible code.
>> >>
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From chr|@ho|d @end|ng |rom p@yctc@org  Sun Jul  5 10:43:35 2020
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sun, 5 Jul 2020 09:43:35 +0100 (BST)
Subject: [R] Can I pass the grouped portions of a dataframe/tibble to a
 function in dplyr
Message-ID: <436569067.11600799.1593938615607.JavaMail.zimbra@psyctc.org>

Apologies if this is a stupid question but searching keeps getting things I know and don't need. 

What I want to do is to use the group-by() power of dplyr to run functions that expect a dataframe/tibble per group but I can't see how do it. Here is a reproducible example. 

### create trivial tibble
n <- 50 
x <- 1:n 
y <- sample(1:3, n, replace = TRUE) 
z <- rnorm(n) 
tib <- as_tibble(cbind(x,y,z)) 

### create trivial function that expects a tibble/data frame
sillyFun <- function(tib){ 
return(list(nrow = nrow(tib), 
ncol = ncol(tib))) 
} 

### works fine on the whole tibble
tib %>% 
summarise(dim = list(sillyFun(.))) %>% 
unnest_wider(dim) 

That gives me:
# A tibble: 1 x 2
   nrow  ncol
  <int> <int>
1    50     3


### So I try the following hoping to apply the function to the grouped tibble
tib %>% 
group_by(y) %>% 
summarise(dim = list(sillyFun(.))) %>% 
unnest_wider(dim)

### But that gives me:
# A tibble: 3 x 3
      y  nrow  ncol
  <dbl> <int> <int>
1     1    50     3
2     2    50     3
3     3    50     3

Clearly "." is still passing the whole tibble, not the grouped subsets.  What I can't find is whether there is an alternative to "." that would pass just the grouped subset of the tibble.

I have bodged my way around this by writing a function that takes individual columns and reassembles them into a data frame that the actual functions I need to use require but that takes me back to a lot of clumsiness both selecting the variables to pass in the dplyr call to the function and putting the reassemble-to-data-frame bit in the function I call.  (The functions I really need are reliability explorations and can called on whole dataframes.)

I know I can do this using base R split and lapply but I feel sure it must be possible to do this within dplyr/tidyverse.  I'm slowly transferring most of my code to the tidyverse and hitting frustrations but also finding that it does really help me program more sensibly, handle relational data structures more easily, and write code that I seem better at reading when I come back to it after months on other things so I am slowly trying to move all my coding to tidyverse.  If I could see how to do this, it would help.

Very sorry if the answer should be blindingly obvious to me.  I'd also love to have pointers to guidance to the tidyverse written for people who aren't professional coders or statisticians and that go a bit beyond the obvious basics of tidyverse into issues like this.

TIA,

Chris

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jul  5 13:04:44 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 5 Jul 2020 12:04:44 +0100
Subject: [R] Can I pass the grouped portions of a dataframe/tibble to a
 function in dplyr
In-Reply-To: <436569067.11600799.1593938615607.JavaMail.zimbra@psyctc.org>
References: <436569067.11600799.1593938615607.JavaMail.zimbra@psyctc.org>
Message-ID: <95eb1446-5dd4-eeec-f992-4d6ca922992b@sapo.pt>

Hello,

You can pass a grouped tibble to a function with grouped_modify but the 
function must return a data.frame (or similar).

## this will also do it
#sillyFun <- function(tib){
#  tibble(nrow = nrow(tib), ncol = ncol(tib))
#}


sillyFun <- function(tib){
   data.frame(nrow = nrow(tib), ncol = ncol(tib)))
}

tib %>%
   group_by(y) %>%
   group_modify(~ sillyFun(.))
## A tibble: 3 x 3
## Groups:   y [3]
#      y  nrow  ncol
#  <dbl> <int> <int>
#1     1    17     2
#2     2    21     2
#3     3    12     2


Hope this helps,

Rui Barradas

?s 09:43 de 05/07/2020, Chris Evans escreveu:
> Apologies if this is a stupid question but searching keeps getting things I know and don't need.
> 
> What I want to do is to use the group-by() power of dplyr to run functions that expect a dataframe/tibble per group but I can't see how do it. Here is a reproducible example.
> 
> ### create trivial tibble
> n <- 50
> x <- 1:n
> y <- sample(1:3, n, replace = TRUE)
> z <- rnorm(n)
> tib <- as_tibble(cbind(x,y,z))
> 
> ### create trivial function that expects a tibble/data frame
> sillyFun <- function(tib){
> return(list(nrow = nrow(tib),
> ncol = ncol(tib)))
> }
> 
> ### works fine on the whole tibble
> tib %>%
> summarise(dim = list(sillyFun(.))) %>%
> unnest_wider(dim)
> 
> That gives me:
> # A tibble: 1 x 2
>     nrow  ncol
>    <int> <int>
> 1    50     3
> 
> 
> ### So I try the following hoping to apply the function to the grouped tibble
> tib %>%
> group_by(y) %>%
> summarise(dim = list(sillyFun(.))) %>%
> unnest_wider(dim)
> 
> ### But that gives me:
> # A tibble: 3 x 3
>        y  nrow  ncol
>    <dbl> <int> <int>
> 1     1    50     3
> 2     2    50     3
> 3     3    50     3
> 
> Clearly "." is still passing the whole tibble, not the grouped subsets.  What I can't find is whether there is an alternative to "." that would pass just the grouped subset of the tibble.
> 
> I have bodged my way around this by writing a function that takes individual columns and reassembles them into a data frame that the actual functions I need to use require but that takes me back to a lot of clumsiness both selecting the variables to pass in the dplyr call to the function and putting the reassemble-to-data-frame bit in the function I call.  (The functions I really need are reliability explorations and can called on whole dataframes.)
> 
> I know I can do this using base R split and lapply but I feel sure it must be possible to do this within dplyr/tidyverse.  I'm slowly transferring most of my code to the tidyverse and hitting frustrations but also finding that it does really help me program more sensibly, handle relational data structures more easily, and write code that I seem better at reading when I come back to it after months on other things so I am slowly trying to move all my coding to tidyverse.  If I could see how to do this, it would help.
> 
> Very sorry if the answer should be blindingly obvious to me.  I'd also love to have pointers to guidance to the tidyverse written for people who aren't professional coders or statisticians and that go a bit beyond the obvious basics of tidyverse into issues like this.
> 
> TIA,
> 
> Chris
> 

-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jul  5 13:16:19 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 5 Jul 2020 12:16:19 +0100
Subject: [R] Can I pass the grouped portions of a dataframe/tibble to a
 function in dplyr
In-Reply-To: <95eb1446-5dd4-eeec-f992-4d6ca922992b@sapo.pt>
References: <436569067.11600799.1593938615607.JavaMail.zimbra@psyctc.org>
 <95eb1446-5dd4-eeec-f992-4d6ca922992b@sapo.pt>
Message-ID: <5e822ed0-2285-306e-7ee5-c90e444812ef@sapo.pt>

Hello,

I forgot to say I redid the data set setting the RNG seed first.



set.seed(2020)
n <- 50
x <- 1:n
y <- sample(1:3, n, replace = TRUE)
z <- rnorm(n)
tib <- tibble(x,y,z)


Also, don't do

as_tibble(cbind(...))
as.data.frame(cbind(...))


If one of the variables is of a different class (example, "character") 
all variables are coerced to the least common denominator. It's much 
better to call tibble() or data.frame() directly.

Hope this helps,

Rui Barradas


?s 12:04 de 05/07/2020, Rui Barradas escreveu:
> Hello,
> 
> You can pass a grouped tibble to a function with grouped_modify but the 
> function must return a data.frame (or similar).
> 
> ## this will also do it
> #sillyFun <- function(tib){
> #? tibble(nrow = nrow(tib), ncol = ncol(tib))
> #}
> 
> 
> sillyFun <- function(tib){
>  ? data.frame(nrow = nrow(tib), ncol = ncol(tib)))
> }
> 
> tib %>%
>  ? group_by(y) %>%
>  ? group_modify(~ sillyFun(.))
> ## A tibble: 3 x 3
> ## Groups:?? y [3]
> #????? y? nrow? ncol
> #? <dbl> <int> <int>
> #1???? 1??? 17???? 2
> #2???? 2??? 21???? 2
> #3???? 3??? 12???? 2
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 09:43 de 05/07/2020, Chris Evans escreveu:
>> Apologies if this is a stupid question but searching keeps getting 
>> things I know and don't need.
>>
>> What I want to do is to use the group-by() power of dplyr to run 
>> functions that expect a dataframe/tibble per group but I can't see how 
>> do it. Here is a reproducible example.
>>
>> ### create trivial tibble
>> n <- 50
>> x <- 1:n
>> y <- sample(1:3, n, replace = TRUE)
>> z <- rnorm(n)
>> tib <- as_tibble(cbind(x,y,z))
>>
>> ### create trivial function that expects a tibble/data frame
>> sillyFun <- function(tib){
>> return(list(nrow = nrow(tib),
>> ncol = ncol(tib)))
>> }
>>
>> ### works fine on the whole tibble
>> tib %>%
>> summarise(dim = list(sillyFun(.))) %>%
>> unnest_wider(dim)
>>
>> That gives me:
>> # A tibble: 1 x 2
>> ??? nrow? ncol
>> ?? <int> <int>
>> 1??? 50???? 3
>>
>>
>> ### So I try the following hoping to apply the function to the grouped 
>> tibble
>> tib %>%
>> group_by(y) %>%
>> summarise(dim = list(sillyFun(.))) %>%
>> unnest_wider(dim)
>>
>> ### But that gives me:
>> # A tibble: 3 x 3
>> ?????? y? nrow? ncol
>> ?? <dbl> <int> <int>
>> 1???? 1??? 50???? 3
>> 2???? 2??? 50???? 3
>> 3???? 3??? 50???? 3
>>
>> Clearly "." is still passing the whole tibble, not the grouped 
>> subsets.? What I can't find is whether there is an alternative to "." 
>> that would pass just the grouped subset of the tibble.
>>
>> I have bodged my way around this by writing a function that takes 
>> individual columns and reassembles them into a data frame that the 
>> actual functions I need to use require but that takes me back to a lot 
>> of clumsiness both selecting the variables to pass in the dplyr call 
>> to the function and putting the reassemble-to-data-frame bit in the 
>> function I call.? (The functions I really need are reliability 
>> explorations and can called on whole dataframes.)
>>
>> I know I can do this using base R split and lapply but I feel sure it 
>> must be possible to do this within dplyr/tidyverse.? I'm slowly 
>> transferring most of my code to the tidyverse and hitting frustrations 
>> but also finding that it does really help me program more sensibly, 
>> handle relational data structures more easily, and write code that I 
>> seem better at reading when I come back to it after months on other 
>> things so I am slowly trying to move all my coding to tidyverse.? If I 
>> could see how to do this, it would help.
>>
>> Very sorry if the answer should be blindingly obvious to me.? I'd also 
>> love to have pointers to guidance to the tidyverse written for people 
>> who aren't professional coders or statisticians and that go a bit 
>> beyond the obvious basics of tidyverse into issues like this.
>>
>> TIA,
>>
>> Chris
>>
> 

-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From chr|@ho|d @end|ng |rom p@yctc@org  Sun Jul  5 14:00:48 2020
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sun, 5 Jul 2020 13:00:48 +0100 (BST)
Subject: [R] Can I pass the grouped portions of a dataframe/tibble to a
 function in dplyr
In-Reply-To: <5e822ed0-2285-306e-7ee5-c90e444812ef@sapo.pt>
References: <436569067.11600799.1593938615607.JavaMail.zimbra@psyctc.org>
 <95eb1446-5dd4-eeec-f992-4d6ca922992b@sapo.pt>
 <5e822ed0-2285-306e-7ee5-c90e444812ef@sapo.pt>
Message-ID: <1391555008.11688982.1593950448099.JavaMail.zimbra@psyctc.org>

Ouch.  I should have know all those points Rui: my bad.  Casual behaviour while just rushing up a little example. Good to be reminded. 

group_modify()  is clearly exactly what I wanted and I will experiment with it and make sure I understand it properly.  I see from the help that it evolves from, or supercedes aspects of do() which I think must have been the function I had forgotten.  Even more interestingly I see that it seems to lead me into interesting options and experimental developments in tidyverse that I didn't know.

Excellent.  Perfect help ... many thanks!

Chris

----- Original Message -----
> From: "Rui Barradas" <ruipbarradas at sapo.pt>
> To: "Chris Evans" <chrishold at psyctc.org>, "R-help" <r-help at r-project.org>
> Sent: Sunday, 5 July, 2020 13:16:19
> Subject: Re: [R] Can I pass the grouped portions of a dataframe/tibble to a function in dplyr

> Hello,
> 
> I forgot to say I redid the data set setting the RNG seed first.
> 
> 
> 
> set.seed(2020)
> n <- 50
> x <- 1:n
> y <- sample(1:3, n, replace = TRUE)
> z <- rnorm(n)
> tib <- tibble(x,y,z)
> 
> 
> Also, don't do
> 
> as_tibble(cbind(...))
> as.data.frame(cbind(...))
> 
> 
> If one of the variables is of a different class (example, "character")
> all variables are coerced to the least common denominator. It's much
> better to call tibble() or data.frame() directly.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
> ?s 12:04 de 05/07/2020, Rui Barradas escreveu:
>> Hello,
>> 
>> You can pass a grouped tibble to a function with grouped_modify but the
>> function must return a data.frame (or similar).
>> 
>> ## this will also do it
>> #sillyFun <- function(tib){
>> #? tibble(nrow = nrow(tib), ncol = ncol(tib))
>> #}
>> 
>> 
>> sillyFun <- function(tib){
>>  ? data.frame(nrow = nrow(tib), ncol = ncol(tib)))
>> }
>> 
>> tib %>%
>>  ? group_by(y) %>%
>>  ? group_modify(~ sillyFun(.))
>> ## A tibble: 3 x 3
>> ## Groups:?? y [3]
>> #????? y? nrow? ncol
>> #? <dbl> <int> <int>
>> #1???? 1??? 17???? 2
>> #2???? 2??? 21???? 2
>> #3???? 3??? 12???? 2
>> 
>> 
>> Hope this helps,
>> 
>> Rui Barradas
>> 
>> ?s 09:43 de 05/07/2020, Chris Evans escreveu:
>>> Apologies if this is a stupid question but searching keeps getting
>>> things I know and don't need.
>>>
>>> What I want to do is to use the group-by() power of dplyr to run
>>> functions that expect a dataframe/tibble per group but I can't see how
>>> do it. Here is a reproducible example.
>>>
>>> ### create trivial tibble
>>> n <- 50
>>> x <- 1:n
>>> y <- sample(1:3, n, replace = TRUE)
>>> z <- rnorm(n)
>>> tib <- as_tibble(cbind(x,y,z))
>>>
>>> ### create trivial function that expects a tibble/data frame
>>> sillyFun <- function(tib){
>>> return(list(nrow = nrow(tib),
>>> ncol = ncol(tib)))
>>> }
>>>
>>> ### works fine on the whole tibble
>>> tib %>%
>>> summarise(dim = list(sillyFun(.))) %>%
>>> unnest_wider(dim)
>>>
>>> That gives me:
>>> # A tibble: 1 x 2
>>> ??? nrow? ncol
>>> ?? <int> <int>
>>> 1??? 50???? 3
>>>
>>>
>>> ### So I try the following hoping to apply the function to the grouped
>>> tibble
>>> tib %>%
>>> group_by(y) %>%
>>> summarise(dim = list(sillyFun(.))) %>%
>>> unnest_wider(dim)
>>>
>>> ### But that gives me:
>>> # A tibble: 3 x 3
>>> ?????? y? nrow? ncol
>>> ?? <dbl> <int> <int>
>>> 1???? 1??? 50???? 3
>>> 2???? 2??? 50???? 3
>>> 3???? 3??? 50???? 3
>>>
>>> Clearly "." is still passing the whole tibble, not the grouped
>>> subsets.? What I can't find is whether there is an alternative to "."
>>> that would pass just the grouped subset of the tibble.
>>>
>>> I have bodged my way around this by writing a function that takes
>>> individual columns and reassembles them into a data frame that the
>>> actual functions I need to use require but that takes me back to a lot
>>> of clumsiness both selecting the variables to pass in the dplyr call
>>> to the function and putting the reassemble-to-data-frame bit in the
>>> function I call.? (The functions I really need are reliability
>>> explorations and can called on whole dataframes.)
>>>
>>> I know I can do this using base R split and lapply but I feel sure it
>>> must be possible to do this within dplyr/tidyverse.? I'm slowly
>>> transferring most of my code to the tidyverse and hitting frustrations
>>> but also finding that it does really help me program more sensibly,
>>> handle relational data structures more easily, and write code that I
>>> seem better at reading when I come back to it after months on other
>>> things so I am slowly trying to move all my coding to tidyverse.? If I
>>> could see how to do this, it would help.
>>>
>>> Very sorry if the answer should be blindingly obvious to me.? I'd also
>>> love to have pointers to guidance to the tidyverse written for people
>>> who aren't professional coders or statisticians and that go a bit
>>> beyond the obvious basics of tidyverse into issues like this.
>>>
>>> TIA,
>>>
>>> Chris
>>>
>> 
> 
> --
> Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
> https://www.avast.com/antivirus

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From cry@n @end|ng |rom b|ngh@mton@edu  Sun Jul  5 20:50:51 2020
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher W. Ryan)
Date: Sun, 5 Jul 2020 14:50:51 -0400
Subject: [R] challenging data merging/joining problem
Message-ID: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>

I've been conducting relatively simple COVID-19 surveillance for our
jurisdiction. We get data on lab test results automatically, and then
interview patients to obtain other information, like clinical details.
We had been recording all data in our long-time data system (call it
dataSystemA). But as of a particular date, there was a major change in
the data system we were compelled to use. Call the new one dataSystemB.
dataSystemA and dataSystemB contain very similar information,
conceptually, but the variable names are all different, and there are
some variables in one that do not appear in the other. Total number of
variables in each is about 50-70.

Furthermore, for about 2 weeks prior to the transition, lab test results
started being deposited into dataSystemB while dataSystemA was still
being used to record the full information from the interviews.
Subsequent to the transition, lab test results and interview information
are being recorded in dataSystemB, while the lab test results alone are
still being automatically deposited into dataSystemA.

Diagrammatically:

dataSystemA usage: ____________________ ............>>

dataSystemB usage:               ......._____________>>

where ________ represents full data and ..... represents partial data,
and >> represents the progress of time.


The following will create MWE of the data wrangling problem, with the
change in data systems made to occur overnight on 2020-07-07:

library(dplyr)
dataSystemA <- tibble(lastName = c("POTTER", "WEASLEY", "GRAINGER",
"LONGBOTTOM"),
                      firstName = c("harry", "ron", "hermione", "neville"),
                      dob = as.Date(Sys.Date() + c(sample(-3650:-3000,
size = 2), -3500, -3450)),
                      onsetDate = as.Date(Sys.Date() + 1:4),
                      symptomatic = c(TRUE, FALSE, NA, NA) )
dataSystemB <- tibble(last_name = c("GRAINGER", "LONGBOTTOM", "MALFOY",
"LOVEGOOD", "DIGGORY"),
                      first_name = c("hermione", "neville", "draco",
"luna", "cedric"),
                      birthdate = as.Date(Sys.Date() + c(-3500, -3450,
sample(-3650:-3000, size = 3))),
                      date_of_onset = as.Date(Sys.Date() + 3:7),
                      symptoms_present = c(TRUE, TRUE, FALSE, FALSE, TRUE))



Obviously, this is all the same public health problem, so I don't want a
big uninterpretable gap in my reports. I am looking for advice on the
best strategy for combining two different tibbles with some overlap in
observations (some patients appear in both data systems, with varying
degrees of completeness of data) and with some of the same things being
mesaured and recorded in the two data systems, but with different
variable names.

I've thought of two different strategies, neither of which seems ideal
but either of which might work:

1. change the variable names in dataSystemB to match their
conceptually-identical variables in dataSystemA, and then use some
version of bind_rows()

2. Create a unique identifier from last names, first names, and dates of
birth, use some type of full_join(), matching on that identifier,
obtaining all columns from both tibbles, and then "collapse"
conceptually-identical variables like onsetDate and date_of_onset using
coalesce()

Sorry for my long-windedness. Grateful for any advice.

--Chris Ryan


From bgunter@4567 @end|ng |rom gm@||@com  Sun Jul  5 23:52:42 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 5 Jul 2020 14:52:42 -0700
Subject: [R] challenging data merging/joining problem
In-Reply-To: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>
References: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>
Message-ID: <CAGxFJbSNhwwX4_pZsejZptgqcg675Ja+cz5YCzmYayvZmxg42g@mail.gmail.com>

*Just my opinion* : --> feel free to disregard

I would suggest that you stop thinking in terms of tidyverse functionality
and instead think of what kind of data structure you need for your ongoing
work and where you will source data to populate that structure both now --
including legacy data -- and in future. *Then* you can decide what
functionality you need and whether/how tidyverse functionality meets those
needs. It sounds like you are tying yourself in knots by restricting
yourself to what you know of one limited paradigm. R has the richness and
flexibility to create general purpose data structures (e.g. via lists) --
tidyverse functionality may or may not be sufficient or convenient for your
needs **once you have fully defined them (which only you can do).**


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jul 5, 2020 at 11:51 AM Christopher W. Ryan <cryan at binghamton.edu>
wrote:

> I've been conducting relatively simple COVID-19 surveillance for our
> jurisdiction. We get data on lab test results automatically, and then
> interview patients to obtain other information, like clinical details.
> We had been recording all data in our long-time data system (call it
> dataSystemA). But as of a particular date, there was a major change in
> the data system we were compelled to use. Call the new one dataSystemB.
> dataSystemA and dataSystemB contain very similar information,
> conceptually, but the variable names are all different, and there are
> some variables in one that do not appear in the other. Total number of
> variables in each is about 50-70.
>
> Furthermore, for about 2 weeks prior to the transition, lab test results
> started being deposited into dataSystemB while dataSystemA was still
> being used to record the full information from the interviews.
> Subsequent to the transition, lab test results and interview information
> are being recorded in dataSystemB, while the lab test results alone are
> still being automatically deposited into dataSystemA.
>
> Diagrammatically:
>
> dataSystemA usage: ____________________ ............>>
>
> dataSystemB usage:               ......._____________>>
>
> where ________ represents full data and ..... represents partial data,
> and >> represents the progress of time.
>
>
> The following will create MWE of the data wrangling problem, with the
> change in data systems made to occur overnight on 2020-07-07:
>
> library(dplyr)
> dataSystemA <- tibble(lastName = c("POTTER", "WEASLEY", "GRAINGER",
> "LONGBOTTOM"),
>                       firstName = c("harry", "ron", "hermione", "neville"),
>                       dob = as.Date(Sys.Date() + c(sample(-3650:-3000,
> size = 2), -3500, -3450)),
>                       onsetDate = as.Date(Sys.Date() + 1:4),
>                       symptomatic = c(TRUE, FALSE, NA, NA) )
> dataSystemB <- tibble(last_name = c("GRAINGER", "LONGBOTTOM", "MALFOY",
> "LOVEGOOD", "DIGGORY"),
>                       first_name = c("hermione", "neville", "draco",
> "luna", "cedric"),
>                       birthdate = as.Date(Sys.Date() + c(-3500, -3450,
> sample(-3650:-3000, size = 3))),
>                       date_of_onset = as.Date(Sys.Date() + 3:7),
>                       symptoms_present = c(TRUE, TRUE, FALSE, FALSE, TRUE))
>
>
>
> Obviously, this is all the same public health problem, so I don't want a
> big uninterpretable gap in my reports. I am looking for advice on the
> best strategy for combining two different tibbles with some overlap in
> observations (some patients appear in both data systems, with varying
> degrees of completeness of data) and with some of the same things being
> mesaured and recorded in the two data systems, but with different
> variable names.
>
> I've thought of two different strategies, neither of which seems ideal
> but either of which might work:
>
> 1. change the variable names in dataSystemB to match their
> conceptually-identical variables in dataSystemA, and then use some
> version of bind_rows()
>
> 2. Create a unique identifier from last names, first names, and dates of
> birth, use some type of full_join(), matching on that identifier,
> obtaining all columns from both tibbles, and then "collapse"
> conceptually-identical variables like onsetDate and date_of_onset using
> coalesce()
>
> Sorry for my long-windedness. Grateful for any advice.
>
> --Chris Ryan
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@p@rk4 @end|ng |rom u|c@edu  Mon Jul  6 00:06:52 2020
From: j@p@rk4 @end|ng |rom u|c@edu (Sparks, John)
Date: Sun, 5 Jul 2020 22:06:52 +0000
Subject: [R] Opening Another Application in R Then Hangs
Message-ID: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>

Hi R Helpers,

I am trying to open another application from within R and then work with it.

I can get the application to open, but R then hangs at that point (spinning blue circle in the middle of the screen) and my subsequent programming does not execute.

Does anybody know how to get R to unlock?

I am using Windows 10 and R4.0.

The example below freezes R on my machine.

Any guidance appreciated.  Thanks.
--John Sparks

setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Accessories")
system2("Notepad",invisible=FALSE)






	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jul  6 00:08:53 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 05 Jul 2020 15:08:53 -0700
Subject: [R] Opening Another Application in R Then Hangs
In-Reply-To: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
References: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
Message-ID: <5AE111E1-16BE-4748-8BFB-3DC00B151FE5@dcn.davis.ca.us>

Exit the application you started?

On July 5, 2020 3:06:52 PM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>Hi R Helpers,
>
>I am trying to open another application from within R and then work
>with it.
>
>I can get the application to open, but R then hangs at that point
>(spinning blue circle in the middle of the screen) and my subsequent
>programming does not execute.
>
>Does anybody know how to get R to unlock?
>
>I am using Windows 10 and R4.0.
>
>The example below freezes R on my machine.
>
>Any guidance appreciated.  Thanks.
>--John Sparks
>
>setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start
>Menu/Programs/Accessories")
>system2("Notepad",invisible=FALSE)
>
>
>
>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From j@p@rk4 @end|ng |rom u|c@edu  Mon Jul  6 00:16:12 2020
From: j@p@rk4 @end|ng |rom u|c@edu (Sparks, John)
Date: Sun, 5 Jul 2020 22:16:12 +0000
Subject: [R] Opening Another Application in R Then Hangs
In-Reply-To: <5AE111E1-16BE-4748-8BFB-3DC00B151FE5@dcn.davis.ca.us>
References: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>,
 <5AE111E1-16BE-4748-8BFB-3DC00B151FE5@dcn.davis.ca.us>
Message-ID: <DM5PR13MB11612428E23C6C4BFEB3D6FFFA680@DM5PR13MB1161.namprd13.prod.outlook.com>

Hi Jeff,

Greatly appreciate your reply, but I don't quite understand it.

Perhaps I should give a little more detail.

For this example, I want to open notepad, then go to notepad and type something in.  So the program

library(KeyboardSimulator)
setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Accessories")
system2("Notepad",invisible=FALSE)
mouse.move(2423,236)
mouse.click()
keybd.type_string("Hello world!")

would do this, but it does not advance passed the system2 command.

Best wishes,
--JJS

________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Sunday, July 5, 2020 5:08 PM
To: r-help at r-project.org <r-help at r-project.org>; Sparks, John <jspark4 at uic.edu>; R-help <r-help at r-project.org>
Subject: Re: [R] Opening Another Application in R Then Hangs

Exit the application you started?

On July 5, 2020 3:06:52 PM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>Hi R Helpers,
>
>I am trying to open another application from within R and then work
>with it.
>
>I can get the application to open, but R then hangs at that point
>(spinning blue circle in the middle of the screen) and my subsequent
>programming does not execute.
>
>Does anybody know how to get R to unlock?
>
>I am using Windows 10 and R4.0.
>
>The example below freezes R on my machine.
>
>Any guidance appreciated.  Thanks.
>--John Sparks
>
>setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start
>Menu/Programs/Accessories")
>system2("Notepad",invisible=FALSE)
>
>
>
>
>
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Mon Jul  6 00:11:48 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 6 Jul 2020 00:11:48 +0200
Subject: [R] challenging data merging/joining problem
In-Reply-To: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>
References: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>
Message-ID: <20200705221148.GA96551@posteo.no>

On 2020-07-05 14:50 -0400, Christopher W. Ryan wrote:
> I've been conducting relatively simple 
> COVID-19 surveillance for our jurisdiction. 

Dear Christopher,

As I am a bit unfamiliar when it comes to the 
tidyverse, I wrote these lines using regular 
data.frames:

	### Convert to data.frame
	dataSystemA <- as.data.frame(dataSystemA)
	dataSystemB <- as.data.frame(dataSystemB)
	
	### Add some unique columns to show how 
	#   they are formatted later in this pipe.
	dataSystemA$someIncompleteInfo <- 1:4
	dataSystemB$other_incomplete_info <-
	  c("Yes", "No", "Perhaps", "Sometimes", "Yes")
	
	### Add the dfs to a list, as perhaps the 
	#   data kan be read somehow using 
	#   something like
	#   sapply(c("A", "B"), read.from.somewhere)
	dat <- list("A"=dataSystemA,
	            "B"=dataSystemB)
	
	### Define a new dataSystem column in boths dfs
	dat <- sapply(names(dat), function(n, dat) {
	  dat[[n]]$dataSystem <- n
	  return(list(dat[[n]]))
	}, dat=dat)
	
	### Read from a csv file column names 
	#   where you have defined which ones 
	#   are conceptually identical.
	text <- "A,B
	lastName,last_name
	firstName,first_name
	dob,birthdate
	onsetDate,date_of_onset
	symptomatic,symptoms_present"
	conceptually.identical <- read.csv(text=text)
	
	### Rename dataSystemA columns to the 
	#   dataSystemB naming convention.
	idx <- match(x=conceptually.identical$A,
	             table=colnames(dat$A))
	colnames(dat$A)[idx] <-
	  conceptually.identical[idx,"B"]
	
	### Find all column names, and fill the
	#   ones that does not exists in each 
	#   df with NA, order the dfs by this 
	#   vector, then rbind the dfs.
	cn <- unique(unlist(lapply(dat, colnames)))
	dat <- sapply(dat, function(x, cn) {
	  x[,cn[!(cn %in% colnames(x))]] <- NA
	  list(x[,cn])
	}, cn=cn)
	dat <- do.call(rbind, dat)
	
	### Order unified df decreasingly by 
	#   last_name and birthdate
	dat <- dat[order(dat$last_name,
	  dat$birthdate, decreasing=FALSE),]
	rownames(dat) <- NULL
	
	dat

which yields

	   last_name first_name  birthdate date_of_onset symptoms_present someIncompleteInfo dataSystem other_incomplete_info
	1    DIGGORY     cedric 2011-12-16    2020-07-12             TRUE                 NA          B                   Yes
	2   GRAINGER   hermione 2010-12-05    2020-07-08               NA                  3          A                  <NA>
	3   GRAINGER   hermione 2010-12-05    2020-07-08             TRUE                 NA          B                   Yes
	4 LONGBOTTOM    neville 2011-01-24    2020-07-09               NA                  4          A                  <NA>
	5 LONGBOTTOM    neville 2011-01-24    2020-07-09             TRUE                 NA          B                    No
	6   LOVEGOOD       luna 2011-03-15    2020-07-11            FALSE                 NA          B             Sometimes
	7     MALFOY      draco 2011-07-04    2020-07-10            FALSE                 NA          B               Perhaps
	8     POTTER      harry 2010-12-16    2020-07-06             TRUE                  1          A                  <NA>
	9    WEASLEY        ron 2010-12-30    2020-07-07            FALSE                  2          A                  <NA>

When comparing the incomplete columns in each 
data system, it might be useful to do some 
reshaping like this:

	cols <- c("last_name", "birthdate", "dataSystem", "date_of_onset")
	reshape(dat[,cols],
	        idvar=c("last_name", "birthdate"),
	        timevar="dataSystem",
	        direction="wide")

which yields

	   last_name  birthdate date_of_onset.B date_of_onset.A
	1    DIGGORY 2011-03-17      2020-07-13            <NA>
	2   GRAINGER 2010-12-06      2020-07-09      2020-07-09
	4 LONGBOTTOM 2011-01-25      2020-07-10      2020-07-10
	6   LOVEGOOD 2010-10-15      2020-07-12            <NA>
	7     MALFOY 2010-12-25      2020-07-11            <NA>
	8     POTTER 2011-05-09            <NA>      2020-07-07
	9    WEASLEY 2012-04-05            <NA>      2020-07-08

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200706/a49f40f1/attachment.sig>

From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Jul  6 00:38:28 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 5 Jul 2020 15:38:28 -0700
Subject: [R] Opening Another Application in R Then Hangs
In-Reply-To: <DM5PR13MB11612428E23C6C4BFEB3D6FFFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
References: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
 <5AE111E1-16BE-4748-8BFB-3DC00B151FE5@dcn.davis.ca.us>
 <DM5PR13MB11612428E23C6C4BFEB3D6FFFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
Message-ID: <d3881739-1388-626f-392b-36d452e80f35@comcast.net>

This list is not the recommended location for support of that Windows 
only package. The URL in the DESCRIPTION file has this to advise:

++++++++++++++++++


      This package doesn't work on my computer! How can I make it work?

Open aGitHub <https://github.com/ChiHangChen/KeyboardSimulator>issue and 
let us know what version of Windows you are using and what keyboard and 
mouse hardware you have connected.

++++++++++++++++++


-- David.

On 7/5/20 3:16 PM, Sparks, John wrote:
> Hi Jeff,
>
> Greatly appreciate your reply, but I don't quite understand it.
>
> Perhaps I should give a little more detail.
>
> For this example, I want to open notepad, then go to notepad and type something in.  So the program
>
> library(KeyboardSimulator)
> setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Accessories")
> system2("Notepad",invisible=FALSE)
> mouse.move(2423,236)
> mouse.click()
> keybd.type_string("Hello world!")
>
> would do this, but it does not advance passed the system2 command.
>
> Best wishes,
> --JJS
>
> ________________________________
> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Sent: Sunday, July 5, 2020 5:08 PM
> To: r-help at r-project.org <r-help at r-project.org>; Sparks, John <jspark4 at uic.edu>; R-help <r-help at r-project.org>
> Subject: Re: [R] Opening Another Application in R Then Hangs
>
> Exit the application you started?
>
> On July 5, 2020 3:06:52 PM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>> Hi R Helpers,
>>
>> I am trying to open another application from within R and then work
>> with it.
>>
>> I can get the application to open, but R then hangs at that point
>> (spinning blue circle in the middle of the screen) and my subsequent
>> programming does not execute.
>>
>> Does anybody know how to get R to unlock?
>>
>> I am using Windows 10 and R4.0.
>>
>> The example below freezes R on my machine.
>>
>> Any guidance appreciated.  Thanks.
>> --John Sparks
>>
>> setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start
>> Menu/Programs/Accessories")
>> system2("Notepad",invisible=FALSE)
>>
>>
>>
>>
>>
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> --
> Sent from my phone. Please excuse my brevity.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Mon Jul  6 00:46:05 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 6 Jul 2020 00:46:05 +0200
Subject: [R] Opening Another Application in R Then Hangs
In-Reply-To: <DM5PR13MB11612428E23C6C4BFEB3D6FFFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
References: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
 <5AE111E1-16BE-4748-8BFB-3DC00B151FE5@dcn.davis.ca.us>
 <DM5PR13MB11612428E23C6C4BFEB3D6FFFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
Message-ID: <20200705224605.GB96551@posteo.no>

On 2020-07-05 22:16 +0000, Sparks, John wrote:
> 
> For this example, I want to open notepad, 
> then go to notepad and type something in.  

Dear John,

Perhaps start Notepad in the background is 
what you mean?  Something like 

	system2("START /B Notepad", invisible=FALSE)

Found it at [1].  I'm not on Windows ever, so 
I can not test it.

What are you trying to achieve here?

Where would the things you type into Notepad 
end up?  Will R read it.  It might be more 
useful to take user input by calling 

	readline(prompt="Enter something here at least: ")

Best,
Rasmus

[1] https://superuser.com/a/591084

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200706/7414ad74/attachment.sig>

From rmh @end|ng |rom temp|e@edu  Mon Jul  6 01:03:05 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sun, 5 Jul 2020 19:03:05 -0400
Subject: [R] [External]  challenging data merging/joining problem
In-Reply-To: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>
References: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>
Message-ID: <CAGx1TMDm4Ssb5iw-hGkZr4-5HZnO0YvTfqj2gB5oVruABFD-QQ@mail.gmail.com>

Have you talked directly to the designers of the new database?
One would hope that they had a clear migration path in mind.
Perhaps they just didn't document it to your satisfaction.

Rich

On Sun, Jul 5, 2020 at 2:51 PM Christopher W. Ryan <cryan at binghamton.edu> wrote:
>
> I've been conducting relatively simple COVID-19 surveillance for our
> jurisdiction. We get data on lab test results automatically, and then
> interview patients to obtain other information, like clinical details.
> We had been recording all data in our long-time data system (call it
> dataSystemA). But as of a particular date, there was a major change in
> the data system we were compelled to use. Call the new one dataSystemB.
> dataSystemA and dataSystemB contain very similar information,
> conceptually, but the variable names are all different, and there are
> some variables in one that do not appear in the other. Total number of
> variables in each is about 50-70.
>
> Furthermore, for about 2 weeks prior to the transition, lab test results
> started being deposited into dataSystemB while dataSystemA was still
> being used to record the full information from the interviews.
> Subsequent to the transition, lab test results and interview information
> are being recorded in dataSystemB, while the lab test results alone are
> still being automatically deposited into dataSystemA.
>
> Diagrammatically:
>
> dataSystemA usage: ____________________ ............>>
>
> dataSystemB usage:               ......._____________>>
>
> where ________ represents full data and ..... represents partial data,
> and >> represents the progress of time.
>
>
> The following will create MWE of the data wrangling problem, with the
> change in data systems made to occur overnight on 2020-07-07:
>
> library(dplyr)
> dataSystemA <- tibble(lastName = c("POTTER", "WEASLEY", "GRAINGER",
> "LONGBOTTOM"),
>                       firstName = c("harry", "ron", "hermione", "neville"),
>                       dob = as.Date(Sys.Date() + c(sample(-3650:-3000,
> size = 2), -3500, -3450)),
>                       onsetDate = as.Date(Sys.Date() + 1:4),
>                       symptomatic = c(TRUE, FALSE, NA, NA) )
> dataSystemB <- tibble(last_name = c("GRAINGER", "LONGBOTTOM", "MALFOY",
> "LOVEGOOD", "DIGGORY"),
>                       first_name = c("hermione", "neville", "draco",
> "luna", "cedric"),
>                       birthdate = as.Date(Sys.Date() + c(-3500, -3450,
> sample(-3650:-3000, size = 3))),
>                       date_of_onset = as.Date(Sys.Date() + 3:7),
>                       symptoms_present = c(TRUE, TRUE, FALSE, FALSE, TRUE))
>
>
>
> Obviously, this is all the same public health problem, so I don't want a
> big uninterpretable gap in my reports. I am looking for advice on the
> best strategy for combining two different tibbles with some overlap in
> observations (some patients appear in both data systems, with varying
> degrees of completeness of data) and with some of the same things being
> mesaured and recorded in the two data systems, but with different
> variable names.
>
> I've thought of two different strategies, neither of which seems ideal
> but either of which might work:
>
> 1. change the variable names in dataSystemB to match their
> conceptually-identical variables in dataSystemA, and then use some
> version of bind_rows()
>
> 2. Create a unique identifier from last names, first names, and dates of
> birth, use some type of full_join(), matching on that identifier,
> obtaining all columns from both tibbles, and then "collapse"
> conceptually-identical variables like onsetDate and date_of_onset using
> coalesce()
>
> Sorry for my long-windedness. Grateful for any advice.
>
> --Chris Ryan
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jul  6 00:50:44 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 05 Jul 2020 15:50:44 -0700
Subject: [R] Opening Another Application in R Then Hangs
In-Reply-To: <DM5PR13MB11612428E23C6C4BFEB3D6FFFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
References: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>,
 <5AE111E1-16BE-4748-8BFB-3DC00B151FE5@dcn.davis.ca.us>
 <DM5PR13MB11612428E23C6C4BFEB3D6FFFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
Message-ID: <11E73204-A163-4E10-B5A3-69D4A0EA1D33@dcn.davis.ca.us>

If you open an app using the default settings for system2, R normally expects to let you know what the program's return value was, so if it was interactive you would need to terminate the program so there would be a result for system2 to return with. For what you actually appear to be doing you probably want to read ?system2.

On July 5, 2020 3:16:12 PM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>Hi Jeff,
>
>Greatly appreciate your reply, but I don't quite understand it.
>
>Perhaps I should give a little more detail.
>
>For this example, I want to open notepad, then go to notepad and type
>something in.  So the program
>
>library(KeyboardSimulator)
>setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start
>Menu/Programs/Accessories")
>system2("Notepad",invisible=FALSE)
>mouse.move(2423,236)
>mouse.click()
>keybd.type_string("Hello world!")
>
>would do this, but it does not advance passed the system2 command.
>
>Best wishes,
>--JJS
>
>________________________________
>From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Sunday, July 5, 2020 5:08 PM
>To: r-help at r-project.org <r-help at r-project.org>; Sparks, John
><jspark4 at uic.edu>; R-help <r-help at r-project.org>
>Subject: Re: [R] Opening Another Application in R Then Hangs
>
>Exit the application you started?
>
>On July 5, 2020 3:06:52 PM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>>Hi R Helpers,
>>
>>I am trying to open another application from within R and then work
>>with it.
>>
>>I can get the application to open, but R then hangs at that point
>>(spinning blue circle in the middle of the screen) and my subsequent
>>programming does not execute.
>>
>>Does anybody know how to get R to unlock?
>>
>>I am using Windows 10 and R4.0.
>>
>>The example below freezes R on my machine.
>>
>>Any guidance appreciated.  Thanks.
>>--John Sparks
>>
>>setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start
>>Menu/Programs/Accessories")
>>system2("Notepad",invisible=FALSE)
>>
>>
>>
>>
>>
>>
>>       [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.


From @purd|e@@ @end|ng |rom gm@||@com  Mon Jul  6 01:35:44 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Mon, 6 Jul 2020 11:35:44 +1200
Subject: [R] Opening Another Application in R Then Hangs
In-Reply-To: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
References: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>
Message-ID: <CAB8pepwW4q5WQ9q9H3n8G-fbogd2AJgXQk3YsdYhs-eF7T_JBg@mail.gmail.com>

shell ("Notepad", wait=FALSE)

On Mon, Jul 6, 2020 at 10:07 AM Sparks, John <jspark4 at uic.edu> wrote:
>
> Hi R Helpers,
>
> I am trying to open another application from within R and then work with it.
>
> I can get the application to open, but R then hangs at that point (spinning blue circle in the middle of the screen) and my subsequent programming does not execute.
>
> Does anybody know how to get R to unlock?
>
> I am using Windows 10 and R4.0.
>
> The example below freezes R on my machine.
>
> Any guidance appreciated.  Thanks.
> --John Sparks
>
> setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Accessories")
> system2("Notepad",invisible=FALSE)
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@p@rk4 @end|ng |rom u|c@edu  Mon Jul  6 02:26:03 2020
From: j@p@rk4 @end|ng |rom u|c@edu (Sparks, John)
Date: Mon, 6 Jul 2020 00:26:03 +0000
Subject: [R] Opening Another Application in R Then Hangs
In-Reply-To: <CAB8pepwW4q5WQ9q9H3n8G-fbogd2AJgXQk3YsdYhs-eF7T_JBg@mail.gmail.com>
References: <DM5PR13MB116116026086508F1EB0004FFA680@DM5PR13MB1161.namprd13.prod.outlook.com>,
 <CAB8pepwW4q5WQ9q9H3n8G-fbogd2AJgXQk3YsdYhs-eF7T_JBg@mail.gmail.com>
Message-ID: <DM5PR13MB1161852ACBB590CF18752B38FA690@DM5PR13MB1161.namprd13.prod.outlook.com>

For posterity, Abby's suggestion is spot on.

The small program below demonstrates the functionality.  May need to change numbers in mouse.move depending on where your copy of Notepad opens up.  You can find the position of your mouse on the screen using mouse.get_cursor()

Thanks to all, but especially to Abby.

--JJS


library(KeyboardSimulator)
setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Accessories")
shell ("Notepad", wait=FALSE)
Sys.sleep(3)
mouse.move(362,300)
mouse.click()
keybd.type_string("Hello world!")




________________________________
From: Abby Spurdle <spurdle.a at gmail.com>
Sent: Sunday, July 5, 2020 6:35 PM
To: Sparks, John <jspark4 at uic.edu>
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Opening Another Application in R Then Hangs

shell ("Notepad", wait=FALSE)

On Mon, Jul 6, 2020 at 10:07 AM Sparks, John <jspark4 at uic.edu> wrote:
>
> Hi R Helpers,
>
> I am trying to open another application from within R and then work with it.
>
> I can get the application to open, but R then hangs at that point (spinning blue circle in the middle of the screen) and my subsequent programming does not execute.
>
> Does anybody know how to get R to unlock?
>
> I am using Windows 10 and R4.0.
>
> The example below freezes R on my machine.
>
> Any guidance appreciated.  Thanks.
> --John Sparks
>
> setwd("C:/Users/JSparks/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Accessories")
> system2("Notepad",invisible=FALSE)
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Jul  6 11:03:43 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 6 Jul 2020 12:03:43 +0300
Subject: [R] [External] challenging data merging/joining problem
In-Reply-To: <CAGx1TMDm4Ssb5iw-hGkZr4-5HZnO0YvTfqj2gB5oVruABFD-QQ@mail.gmail.com>
References: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>
 <CAGx1TMDm4Ssb5iw-hGkZr4-5HZnO0YvTfqj2gB5oVruABFD-QQ@mail.gmail.com>
Message-ID: <CAGgJW7702t9X7040SJvnC4baCU91DR9hyer+U6=1JvSPo0+Eaw@mail.gmail.com>

Hi Christopher,
This seems pretty standard and straightforward, unless I am missing
something. You can do the "full join" without changing variable names.
Here's a small code example with two tibbles, a and b, where the
column 'x' in a corresponds to the column 'u' in b.

a <- tibble(x=1:15,y=21:35)
b <- tibble(u=c(1:10,51:55),z=31:45)
foo <- merge(a,b,by.x="x",by.y="u",all.x=TRUE,all.y=TRUE)
foo

#     x  y  z
# 1   1 21 31
# 2   2 22 32
# 3   3 23 33
# 4   4 24 34
# 5   5 25 35
# 6   6 26 36
# 7   7 27 37
# 8   8 28 38
# 9   9 29 39
# 10 10 30 40
# 11 11 31 NA
# 12 12 32 NA
# 13 13 33 NA
# 14 14 34 NA
# 15 15 35 NA
# 16 51 NA 41
# 17 52 NA 42
# 18 53 NA 43
# 19 54 NA 44
# 20 55 NA 45

HTH,
Eric

On Mon, Jul 6, 2020 at 2:07 AM Richard M. Heiberger <rmh at temple.edu> wrote:
>
> Have you talked directly to the designers of the new database?
> One would hope that they had a clear migration path in mind.
> Perhaps they just didn't document it to your satisfaction.
>
> Rich
>
> On Sun, Jul 5, 2020 at 2:51 PM Christopher W. Ryan <cryan at binghamton.edu> wrote:
> >
> > I've been conducting relatively simple COVID-19 surveillance for our
> > jurisdiction. We get data on lab test results automatically, and then
> > interview patients to obtain other information, like clinical details.
> > We had been recording all data in our long-time data system (call it
> > dataSystemA). But as of a particular date, there was a major change in
> > the data system we were compelled to use. Call the new one dataSystemB.
> > dataSystemA and dataSystemB contain very similar information,
> > conceptually, but the variable names are all different, and there are
> > some variables in one that do not appear in the other. Total number of
> > variables in each is about 50-70.
> >
> > Furthermore, for about 2 weeks prior to the transition, lab test results
> > started being deposited into dataSystemB while dataSystemA was still
> > being used to record the full information from the interviews.
> > Subsequent to the transition, lab test results and interview information
> > are being recorded in dataSystemB, while the lab test results alone are
> > still being automatically deposited into dataSystemA.
> >
> > Diagrammatically:
> >
> > dataSystemA usage: ____________________ ............>>
> >
> > dataSystemB usage:               ......._____________>>
> >
> > where ________ represents full data and ..... represents partial data,
> > and >> represents the progress of time.
> >
> >
> > The following will create MWE of the data wrangling problem, with the
> > change in data systems made to occur overnight on 2020-07-07:
> >
> > library(dplyr)
> > dataSystemA <- tibble(lastName = c("POTTER", "WEASLEY", "GRAINGER",
> > "LONGBOTTOM"),
> >                       firstName = c("harry", "ron", "hermione", "neville"),
> >                       dob = as.Date(Sys.Date() + c(sample(-3650:-3000,
> > size = 2), -3500, -3450)),
> >                       onsetDate = as.Date(Sys.Date() + 1:4),
> >                       symptomatic = c(TRUE, FALSE, NA, NA) )
> > dataSystemB <- tibble(last_name = c("GRAINGER", "LONGBOTTOM", "MALFOY",
> > "LOVEGOOD", "DIGGORY"),
> >                       first_name = c("hermione", "neville", "draco",
> > "luna", "cedric"),
> >                       birthdate = as.Date(Sys.Date() + c(-3500, -3450,
> > sample(-3650:-3000, size = 3))),
> >                       date_of_onset = as.Date(Sys.Date() + 3:7),
> >                       symptoms_present = c(TRUE, TRUE, FALSE, FALSE, TRUE))
> >
> >
> >
> > Obviously, this is all the same public health problem, so I don't want a
> > big uninterpretable gap in my reports. I am looking for advice on the
> > best strategy for combining two different tibbles with some overlap in
> > observations (some patients appear in both data systems, with varying
> > degrees of completeness of data) and with some of the same things being
> > mesaured and recorded in the two data systems, but with different
> > variable names.
> >
> > I've thought of two different strategies, neither of which seems ideal
> > but either of which might work:
> >
> > 1. change the variable names in dataSystemB to match their
> > conceptually-identical variables in dataSystemA, and then use some
> > version of bind_rows()
> >
> > 2. Create a unique identifier from last names, first names, and dates of
> > birth, use some type of full_join(), matching on that identifier,
> > obtaining all columns from both tibbles, and then "collapse"
> > conceptually-identical variables like onsetDate and date_of_onset using
> > coalesce()
> >
> > Sorry for my long-windedness. Grateful for any advice.
> >
> > --Chris Ryan
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Jul  6 15:01:34 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 6 Jul 2020 15:01:34 +0200
Subject: [R] how to calculate odd ratios with R?
Message-ID: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>

Hello,
Is it possible to calculate with a single function the odd ratios?
Now I can use this implement:
```
or <- (De/He)/(Dn/Hn) # Disease exposed, Healthy non-exposed
logo <- log(or)
x <- sqrt(((1/De) + (1/He) + (1/Dn) + (1/Hn)))
lower_ci = exp(logo - 1.96*x)
upper_ci = exp(logo + 1.96*x)
cat("OR:", round(or, 3), "(", round(lower_ci, 3), "-", round(upper_ci, 3), ")",
    spe = "")
```
for instance,
```
De <-6
Dn <-3
He <-4
Hn <-5
or <- (De/He)/(Dn/Hn)
logo <- log(or)
x <- sqrt(((1/De) + (1/He) + (1/Dn) + (1/Hn)))
lower_ci = exp(logo - 1.96*x)
upper_ci = exp(logo + 1.96*x)
cat("OR:", round(or, 3), "(", round(lower_ci, 3), "-", round(upper_ci, 3), ")",
    spe = "")
> OR: 2.5 ( 0.37 - 16.889 )
```
Is there a simple function from some package that can also add a
p-value to this test? Or how can I calculate the p-value on my own?
-- 
Best regards,
Luigi


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  6 15:17:57 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 6 Jul 2020 13:17:57 +0000
Subject: [R] how to calculate odd ratios with R?
In-Reply-To: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>
References: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>
Message-ID: <MN2PR03MB5167BFBB3DF5C43474571C4EE2690@MN2PR03MB5167.namprd03.prod.outlook.com>

Luigi,
Odds ratios can be produced using a logistic regression, which can be performed using the glm function. The following has a detailed description of how logistic regression can be performed using R:

https://stats.idre.ucla.edu/r/dae/logit-regression/

John


John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street
GRECC (BT/18/GR)
Baltimore, MD 21201-1524
(Phone) 410-605-7119
(Fax) 410-605-7913 (Please call phone number above prior to faxing)


________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Luigi Marongiu <marongiu.luigi at gmail.com>
Sent: Monday, July 6, 2020 9:01 AM
To: r-help <r-help at r-project.org>
Subject: [R] how to calculate odd ratios with R?

Hello,
Is it possible to calculate with a single function the odd ratios?
Now I can use this implement:
```
or <- (De/He)/(Dn/Hn) # Disease exposed, Healthy non-exposed
logo <- log(or)
x <- sqrt(((1/De) + (1/He) + (1/Dn) + (1/Hn)))
lower_ci = exp(logo - 1.96*x)
upper_ci = exp(logo + 1.96*x)
cat("OR:", round(or, 3), "(", round(lower_ci, 3), "-", round(upper_ci, 3), ")",
    spe = "")
```
for instance,
```
De <-6
Dn <-3
He <-4
Hn <-5
or <- (De/He)/(Dn/Hn)
logo <- log(or)
x <- sqrt(((1/De) + (1/He) + (1/Dn) + (1/Hn)))
lower_ci = exp(logo - 1.96*x)
upper_ci = exp(logo + 1.96*x)
cat("OR:", round(or, 3), "(", round(lower_ci, 3), "-", round(upper_ci, 3), ")",
    spe = "")
> OR: 2.5 ( 0.37 - 16.889 )
```
Is there a simple function from some package that can also add a
p-value to this test? Or how can I calculate the p-value on my own?
--
Best regards,
Luigi

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=02%7C01%7C%7C2cd90411f0e34701d7f308d821acceb7%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637296373389265031&amp;sdata=GVQUX4DafNEu29kEupPbDrNblkQyas3LquN%2FVahCFPw%3D&amp;reserved=0
PLEASE do read the posting guide https://nam03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=02%7C01%7C%7C2cd90411f0e34701d7f308d821acceb7%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637296373389265031&amp;sdata=9hLF%2F0BrW3Tn%2BleeHoXaoRXY0NNxeXVQZAJQEvLBn7E%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Mon Jul  6 15:21:00 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Mon, 6 Jul 2020 14:21:00 +0100
Subject: [R] how to calculate odd ratios with R?
In-Reply-To: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>
References: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>
Message-ID: <d8fac0dc-1b43-b15d-bf81-849500a4698e@dewey.myzen.co.uk>

Dear Luigi

You could try the epitools package which gives a large number of ways of 
doing this. I would have thought that using Wald intervals for the log 
odds ration was not optimal with small frequencies.

Michael

On 06/07/2020 14:01, Luigi Marongiu wrote:
> Hello,
> Is it possible to calculate with a single function the odd ratios?
> Now I can use this implement:
> ```
> or <- (De/He)/(Dn/Hn) # Disease exposed, Healthy non-exposed
> logo <- log(or)
> x <- sqrt(((1/De) + (1/He) + (1/Dn) + (1/Hn)))
> lower_ci = exp(logo - 1.96*x)
> upper_ci = exp(logo + 1.96*x)
> cat("OR:", round(or, 3), "(", round(lower_ci, 3), "-", round(upper_ci, 3), ")",
>      spe = "")
> ```
> for instance,
> ```
> De <-6
> Dn <-3
> He <-4
> Hn <-5
> or <- (De/He)/(Dn/Hn)
> logo <- log(or)
> x <- sqrt(((1/De) + (1/He) + (1/Dn) + (1/Hn)))
> lower_ci = exp(logo - 1.96*x)
> upper_ci = exp(logo + 1.96*x)
> cat("OR:", round(or, 3), "(", round(lower_ci, 3), "-", round(upper_ci, 3), ")",
>      spe = "")
>> OR: 2.5 ( 0.37 - 16.889 )
> ```
> Is there a simple function from some package that can also add a
> p-value to this test? Or how can I calculate the p-value on my own?
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From jr@| @end|ng |rom po@teo@no  Mon Jul  6 18:15:00 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 6 Jul 2020 18:15:00 +0200
Subject: [R] [External] challenging data merging/joining problem
In-Reply-To: <CAGgJW7702t9X7040SJvnC4baCU91DR9hyer+U6=1JvSPo0+Eaw@mail.gmail.com>
References: <65c1134b-5aaf-6f9f-b1b4-f238f0bc047d@binghamton.edu>
 <CAGx1TMDm4Ssb5iw-hGkZr4-5HZnO0YvTfqj2gB5oVruABFD-QQ@mail.gmail.com>
 <CAGgJW7702t9X7040SJvnC4baCU91DR9hyer+U6=1JvSPo0+Eaw@mail.gmail.com>
Message-ID: <20200706161500.GA753@posteo.no>

On 2020-07-06 12:03 +0300, Eric Berger wrote:
> On Mon, Jul 6, 2020 at 2:07 AM Richard M. Heiberger <rmh at temple.edu> wrote:
> > On Sun, Jul 5, 2020 at 2:51 PM Christopher W. Ryan <cryan at binghamton.edu> wrote:
> > >
> > > I've been conducting relatively simple 
> > > COVID-19 surveillance for our 
> > > jurisdiction. 
> >
> > Have you talked directly to the designers 
> > of the new database?
> 
> Hi Christopher,
> This seems pretty standard and 
> straightforward, unless I am missing 
> something. You can do the "full join" 
> without changing variable names.  Here's a 
> small code example with two tibbles, a and 
> b, where the column 'x' in a corresponds to 
> the column 'u' in b.
> 
> a <- tibble(x=1:15,y=21:35)
> b <- tibble(u=c(1:10,51:55),z=31:45)
> foo <- merge(a,b,by.x="x",by.y="u",all.x=TRUE,all.y=TRUE)

Perhaps something like

	new_names <-
	  c("dob"="birthdate",
	    "lastName"="last_name",
	    "firstName"="first_name")
	idx <- match(x=names(new_names),
	  table=colnames(dataSystemA))
	colnames(dataSystemA)[idx] <- new_names
	merge(
	  x=dataSystemA,
	  y=dataSystemB,
	  by=new_names,
	  all=TRUE)

which yields

	   birthdate  last_name first_name  onsetDate
	1 2010-10-11   LOVEGOOD       luna       <NA>
	2 2010-12-06   GRAINGER   hermione 2020-07-09
	3 2011-01-25 LONGBOTTOM    neville 2020-07-10
	4 2011-07-03     MALFOY      draco       <NA>
	5 2011-07-14    WEASLEY        ron 2020-07-08
	6 2011-10-04     POTTER      harry 2020-07-07
	7 2012-02-13    DIGGORY     cedric       <NA>
	  symptomatic date_of_onset symptoms_present
	1          NA    2020-07-12            FALSE
	2          NA    2020-07-09             TRUE
	3          NA    2020-07-10             TRUE
	4          NA    2020-07-11            FALSE
	5       FALSE          <NA>               NA
	6        TRUE          <NA>               NA
	7          NA    2020-07-13             TRUE

?

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200706/b6602a2b/attachment.sig>

From herd_dog @end|ng |rom cox@net  Mon Jul  6 18:29:16 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Mon, 6 Jul 2020 09:29:16 -0700
Subject: [R] National Weather Service Data
In-Reply-To: <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
 <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
Message-ID: <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>

I am trying to access National Weather Service forecasting data through the rNOMADS package.  I?m not sure if the Weather Service software ? grib2 ? loaded correctly.  Second, some of the examples in the rNOMADS documentation seem to run correctly but I?m not sure what the output means.  Any anvise would be greatly appreciated.

1 - I tried to load the wgrib2 software from instructions in the following website:

    https://bovineaerospace.wordpress.com/2015/04/26/how-to-install-rnomads-with-grib-file-support-on-windows/

2 ? the instructions say that if it loaded correctly I should get a laundry list similar to what is below from the command: >system(?wgrib2?).



The list I get looks different.  Below is the first 20 or so entries.  How can I check to see if the wgrib2 loaded correctly?

wgrib2 v0.1.9.9 9/2013 Wesley Ebisuzaki, Reinoud Bokhorst, Jaakko Hyv??tti, Dusan Jovic, Kristian Nilssen, Karl Pfeiffer, Pablo Romero, Manfred Schwarb, Arlindo da Silva, Niklas Sondell, Sergey Varlamov
-0xSec           inv  X      Hex dump of section X (0..8)
-MM              inv         reference time MM
-N_ens           inv         number of ensemble members
-RT              inv         type of reference Time
-S               inv         simple inventory with minutes and seconds (subject to change)
-Sec0            inv         contents of section0
-Sec3            inv         contents of section 3 (Grid Definition Section)
-Sec4            inv         Sec 4 values (Product definition section)
-Sec5            inv         Sec 5 values (Data representation section)
-Sec6            inv         show bit-map section
-Sec_len         inv         length of various grib sections
-T               inv         reference time YYYYMMDDHHMMSS
-V               inv         diagnostic output
-VT              inv         verf time = reference_time + forecast_time (YYYYMMDDHHMMSS)
-YY              inv         reference time YYYY

3 ? As I said, some of the documentation examples work and for some I get error messages.  Below is an example of one that seemed to work but I don?t understand the output.

#GribInfo - page 20
urlsOut <- CrawlModels(abbrev="gfs_0p50",depth=2)
ModelParameters <- ParseModelPage(urlsOut[2])#[1] is most recent model
MyPred <- ModelParameters$pred[grep("06$",ModelParameters$pred)]
   Levels <- c("2_m_above_ground","800_mb")
   Variables <- c("TMP","RH")
   GribInfo <- GribGrab(urlsOut[2],MyPred,Levels,Variables)
GribInv <- GribInfo(GribInfo[[1]]$file.name,"grib2")

The command GribInv$inventory returns:

$inventory
[1] "1:0:d=2020070606:TMP:800 mb:6 hour fcst:"                "2:148450:d=2020070606:RH:800 mb:6 hour fcst:"           
[3] "3:414132:d=2020070606:TMP:2 m above ground:6 hour fcst:" "4:571266:d=2020070606:RH:2 m above ground:6 hour fcst:" 

This is supposed to be temperature and relative humidity 2 meters above the ground and at 800 milibars for 2020 ? July 6 ? at ZULU time 0600.  But I have no idea what the numbers 414132 ? second line ? mean.

Any advise would be greatly appreciated.

Philip Heinrich

From: stephen sefick 
Sent: Thursday, July 2, 2020 3:20 PM
To: Philip 
Cc: r-help 
Subject: Re: [R] National Weather Service Data

I am unfamiliar with Rnomads. Could you provide a minimal reproducable example? You are more likely to receive help this way.


On Thu, Jul 2, 2020, 18:06 Philip <herd_dog at cox.net> wrote:

  Is anyone out there familiar with rNOMADS?  It is a package to get into National Weather Service forecasting data with R?

  I'm not sure the Weather Service software named wgrib2 loaded correctly because some of the stuff won't run and I can't make much sense out of some of the output.

  Thanks.
          [[alternative HTML version deleted]]

  ______________________________________________
  R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
  https://stat.ethz.ch/mailman/listinfo/r-help
  PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
  and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From t@n@@@ @end|ng |rom gm@||@com  Mon Jul  6 19:11:28 2020
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Mon, 6 Jul 2020 10:11:28 -0700
Subject: [R] algorithms that cluster time series data
Message-ID: <CA+JEM00+H=cvExq1uXPkKzT1CXht5N1zq-aCcQ5C+BPakWnz7Q@mail.gmail.com>

Dear all,

please may I ask for a suggestion regarding the algorithms to cluster the
expression data in single cells (scRNA-seq) at multiple time points :

we do have expression data for 30 000 genes  in 10 datasets that have been
collected at multiple time points,

and i was wondering if you could please recommend *any algorithms/R
packages that could help with the clustering of the gene expression at
different time points.* thanks a lot, and all the best,

-- bogdan

	[[alternative HTML version deleted]]


From @@r@h@go@|ee @end|ng |rom gm@||@com  Mon Jul  6 19:20:34 2020
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Mon, 6 Jul 2020 13:20:34 -0400
Subject: [R] algorithms that cluster time series data
In-Reply-To: <CA+JEM00+H=cvExq1uXPkKzT1CXht5N1zq-aCcQ5C+BPakWnz7Q@mail.gmail.com>
References: <CA+JEM00+H=cvExq1uXPkKzT1CXht5N1zq-aCcQ5C+BPakWnz7Q@mail.gmail.com>
Message-ID: <CAM_vjum0dqqOBkJqqO72wjAzJfW5DGvCyg=zMCbgNzHROtjYvg@mail.gmail.com>

Hi,

Unsupervised classification (clustering) is a huge field. There's an
entire task view devoted to it, where you can see many of the large
array of R packages that perform some sort of clustering.

https://cran.r-project.org/web/views/Cluster.html

Since that is an overwhelming list, you may be best served by looking
at how others in your field have approached similar problems, and then
look for R packages that perform the relevant analyses.

Sarah

On Mon, Jul 6, 2020 at 1:11 PM Bogdan Tanasa <tanasa at gmail.com> wrote:
>
> Dear all,
>
> please may I ask for a suggestion regarding the algorithms to cluster the
> expression data in single cells (scRNA-seq) at multiple time points :
>
> we do have expression data for 30 000 genes  in 10 datasets that have been
> collected at multiple time points,
>
> and i was wondering if you could please recommend *any algorithms/R
> packages that could help with the clustering of the gene expression at
> different time points.* thanks a lot, and all the best,
>
> -- bogdan
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From roy@mende|@@ohn @end|ng |rom no@@@gov  Mon Jul  6 19:43:13 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 6 Jul 2020 10:43:13 -0700
Subject: [R] National Weather Service Data
In-Reply-To: <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
 <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
 <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>
Message-ID: <28C66B99-9B31-45E1-BEB0-AF88E81D4C67@noaa.gov>

Hi Philip:

Results look correct to me.  This might help you:

https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/default_inv.html

-Roy


> On Jul 6, 2020, at 9:29 AM, Philip <herd_dog at cox.net> wrote:
> 
> I am trying to access National Weather Service forecasting data through the rNOMADS package.  I?m not sure if the Weather Service software ? grib2 ? loaded correctly.  Second, some of the examples in the rNOMADS documentation seem to run correctly but I?m not sure what the output means.  Any anvise would be greatly appreciated.
> 
> 1 - I tried to load the wgrib2 software from instructions in the following website:
> 
>    https://bovineaerospace.wordpress.com/2015/04/26/how-to-install-rnomads-with-grib-file-support-on-windows/
> 
> 2 ? the instructions say that if it loaded correctly I should get a laundry list similar to what is below from the command: >system(?wgrib2?).
> 
> 
> 
> The list I get looks different.  Below is the first 20 or so entries.  How can I check to see if the wgrib2 loaded correctly?
> 
> wgrib2 v0.1.9.9 9/2013 Wesley Ebisuzaki, Reinoud Bokhorst, Jaakko Hyv??tti, Dusan Jovic, Kristian Nilssen, Karl Pfeiffer, Pablo Romero, Manfred Schwarb, Arlindo da Silva, Niklas Sondell, Sergey Varlamov
> -0xSec           inv  X      Hex dump of section X (0..8)
> -MM              inv         reference time MM
> -N_ens           inv         number of ensemble members
> -RT              inv         type of reference Time
> -S               inv         simple inventory with minutes and seconds (subject to change)
> -Sec0            inv         contents of section0
> -Sec3            inv         contents of section 3 (Grid Definition Section)
> -Sec4            inv         Sec 4 values (Product definition section)
> -Sec5            inv         Sec 5 values (Data representation section)
> -Sec6            inv         show bit-map section
> -Sec_len         inv         length of various grib sections
> -T               inv         reference time YYYYMMDDHHMMSS
> -V               inv         diagnostic output
> -VT              inv         verf time = reference_time + forecast_time (YYYYMMDDHHMMSS)
> -YY              inv         reference time YYYY
> 
> 3 ? As I said, some of the documentation examples work and for some I get error messages.  Below is an example of one that seemed to work but I don?t understand the output.
> 
> #GribInfo - page 20
> urlsOut <- CrawlModels(abbrev="gfs_0p50",depth=2)
> ModelParameters <- ParseModelPage(urlsOut[2])#[1] is most recent model
> MyPred <- ModelParameters$pred[grep("06$",ModelParameters$pred)]
>   Levels <- c("2_m_above_ground","800_mb")
>   Variables <- c("TMP","RH")
>   GribInfo <- GribGrab(urlsOut[2],MyPred,Levels,Variables)
> GribInv <- GribInfo(GribInfo[[1]]$file.name,"grib2")
> 
> The command GribInv$inventory returns:
> 
> $inventory
> [1] "1:0:d=2020070606:TMP:800 mb:6 hour fcst:"                "2:148450:d=2020070606:RH:800 mb:6 hour fcst:"           
> [3] "3:414132:d=2020070606:TMP:2 m above ground:6 hour fcst:" "4:571266:d=2020070606:RH:2 m above ground:6 hour fcst:" 
> 
> This is supposed to be temperature and relative humidity 2 meters above the ground and at 800 milibars for 2020 ? July 6 ? at ZULU time 0600.  But I have no idea what the numbers 414132 ? second line ? mean.
> 
> Any advise would be greatly appreciated.
> 
> Philip Heinrich
> 
> From: stephen sefick 
> Sent: Thursday, July 2, 2020 3:20 PM
> To: Philip 
> Cc: r-help 
> Subject: Re: [R] National Weather Service Data
> 
> I am unfamiliar with Rnomads. Could you provide a minimal reproducable example? You are more likely to receive help this way.
> 
> 
> On Thu, Jul 2, 2020, 18:06 Philip <herd_dog at cox.net> wrote:
> 
>  Is anyone out there familiar with rNOMADS?  It is a package to get into National Weather Service forecasting data with R?
> 
>  I'm not sure the Weather Service software named wgrib2 loaded correctly because some of the stuff won't run and I can't make much sense out of some of the output.
> 
>  Thanks.
>          [[alternative HTML version deleted]]
> 
>  ______________________________________________
>  R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>  https://stat.ethz.ch/mailman/listinfo/r-help
>  PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>  and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From jr@| @end|ng |rom po@teo@no  Mon Jul  6 19:42:46 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 6 Jul 2020 19:42:46 +0200
Subject: [R] National Weather Service Data
In-Reply-To: <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
 <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
 <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>
Message-ID: <20200706174246.GA45429@posteo.no>

On 2020-07-06 09:29 -0700, Philip wrote:
> $inventory
> [1] "1:0:d=2020070606:TMP:800 mb:6 hour fcst:"                "2:148450:d=2020070606:RH:800 mb:6 hour fcst:"           
> [3] "3:414132:d=2020070606:TMP:2 m above ground:6 hour fcst:" "4:571266:d=2020070606:RH:2 m above ground:6 hour fcst:" 
> 
> But I have no idea what the numbers 414132 
> ? second line ? mean.

Dear Philip,

This page[1] says it's the byte location.  
?byte location of the start of the message 
starting from 0? 

Best,
Rasmus

[1] https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/default_inv.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200706/64019fec/attachment.sig>

From t@n@@@ @end|ng |rom gm@||@com  Mon Jul  6 20:14:28 2020
From: t@n@@@ @end|ng |rom gm@||@com (Bogdan Tanasa)
Date: Mon, 6 Jul 2020 11:14:28 -0700
Subject: [R] algorithms that cluster time series data
In-Reply-To: <CAM_vjum0dqqOBkJqqO72wjAzJfW5DGvCyg=zMCbgNzHROtjYvg@mail.gmail.com>
References: <CA+JEM00+H=cvExq1uXPkKzT1CXht5N1zq-aCcQ5C+BPakWnz7Q@mail.gmail.com>
 <CAM_vjum0dqqOBkJqqO72wjAzJfW5DGvCyg=zMCbgNzHROtjYvg@mail.gmail.com>
Message-ID: <CA+JEM01f+0Pq=xRP2oA9iYOpN+6soZQSzf0ByEcj3_9Z90A5KQ@mail.gmail.com>

Dear Sarah,

thank you very much for pointing to the list of available packages and
algorithms.

On Mon, Jul 6, 2020 at 10:20 AM Sarah Goslee <sarah.goslee at gmail.com> wrote:

> Hi,
>
> Unsupervised classification (clustering) is a huge field. There's an
> entire task view devoted to it, where you can see many of the large
> array of R packages that perform some sort of clustering.
>
> https://cran.r-project.org/web/views/Cluster.html
>
> Since that is an overwhelming list, you may be best served by looking
> at how others in your field have approached similar problems, and then
> look for R packages that perform the relevant analyses.
>
> Sarah
>
> On Mon, Jul 6, 2020 at 1:11 PM Bogdan Tanasa <tanasa at gmail.com> wrote:
> >
> > Dear all,
> >
> > please may I ask for a suggestion regarding the algorithms to cluster the
> > expression data in single cells (scRNA-seq) at multiple time points :
> >
> > we do have expression data for 30 000 genes  in 10 datasets that have
> been
> > collected at multiple time points,
> >
> > and i was wondering if you could please recommend *any algorithms/R
> > packages that could help with the clustering of the gene expression at
> > different time points.* thanks a lot, and all the best,
> >
> > -- bogdan
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Sarah Goslee (she/her)
> http://www.numberwright.com
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jul  6 21:01:15 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 6 Jul 2020 12:01:15 -0700
Subject: [R] algorithms that cluster time series data
In-Reply-To: <CAM_vjum0dqqOBkJqqO72wjAzJfW5DGvCyg=zMCbgNzHROtjYvg@mail.gmail.com>
References: <CA+JEM00+H=cvExq1uXPkKzT1CXht5N1zq-aCcQ5C+BPakWnz7Q@mail.gmail.com>
 <CAM_vjum0dqqOBkJqqO72wjAzJfW5DGvCyg=zMCbgNzHROtjYvg@mail.gmail.com>
Message-ID: <CAGxFJbQbBCVBW=WTgBovxpMgiuGimnpzmCbxKGYjD67oiw26jA@mail.gmail.com>

And since this is about RNA expression data, you would do better posting on
the Bioconductor Help site rather than here. You are more likely to find
the expertise and interest you seek there.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jul 6, 2020 at 10:22 AM Sarah Goslee <sarah.goslee at gmail.com> wrote:

> Hi,
>
> Unsupervised classification (clustering) is a huge field. There's an
> entire task view devoted to it, where you can see many of the large
> array of R packages that perform some sort of clustering.
>
> https://cran.r-project.org/web/views/Cluster.html
>
> Since that is an overwhelming list, you may be best served by looking
> at how others in your field have approached similar problems, and then
> look for R packages that perform the relevant analyses.
>
> Sarah
>
> On Mon, Jul 6, 2020 at 1:11 PM Bogdan Tanasa <tanasa at gmail.com> wrote:
> >
> > Dear all,
> >
> > please may I ask for a suggestion regarding the algorithms to cluster the
> > expression data in single cells (scRNA-seq) at multiple time points :
> >
> > we do have expression data for 30 000 genes  in 10 datasets that have
> been
> > collected at multiple time points,
> >
> > and i was wondering if you could please recommend *any algorithms/R
> > packages that could help with the clustering of the gene expression at
> > different time points.* thanks a lot, and all the best,
> >
> > -- bogdan
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Sarah Goslee (she/her)
> http://www.numberwright.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @te|@nML @end|ng |rom co||oc@t|on@@de  Mon Jul  6 22:28:33 2020
From: @te|@nML @end|ng |rom co||oc@t|on@@de (Stefan Evert)
Date: Mon, 6 Jul 2020 22:28:33 +0200
Subject: [R] how to calculate odd ratios with R?
In-Reply-To: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>
References: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>
Message-ID: <8F44062F-1B2C-4365-9132-8452EE0403EF@collocations.de>

fisher.test() computes exact confidence intervals for the odds ratio.

> On 6 Jul 2020, at 15:01, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> 
> Is there a simple function from some package that can also add a
> p-value to this test? Or how can I calculate the p-value on my own?


From herd_dog @end|ng |rom cox@net  Tue Jul  7 02:41:05 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Mon, 6 Jul 2020 17:41:05 -0700
Subject: [R] National Weather Service Data
In-Reply-To: <20200706174246.GA45429@posteo.no>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
 <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
 <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC> <20200706174246.GA45429@posteo.no>
Message-ID: <5CCE4FB770DE4F858303392BFCE9018B@OWNERPC>

Thanks for getting back to me.  It is good to know that I am on the right 
track.

-----Original Message----- 
From: Rasmus Liland
Sent: Monday, July 6, 2020 10:42 AM
To: r-help
Subject: Re: [R] National Weather Service Data

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Tue Jul  7 03:51:58 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 7 Jul 2020 03:51:58 +0200
Subject: [R] National Weather Service Data
In-Reply-To: <5CCE4FB770DE4F858303392BFCE9018B@OWNERPC>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
 <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
 <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>
 <20200706174246.GA45429@posteo.no>
 <5CCE4FB770DE4F858303392BFCE9018B@OWNERPC>
Message-ID: <20200707015158.GB59826@posteo.no>

On 2020-07-06 17:41 -0700, Philip wrote:
> Thanks for getting back to me.  It is good 
> to know that I am on the right track.

Oh, it's always such a pleasure to be of help 
to someone in need :-)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200707/e466908f/attachment.sig>

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Jul  7 08:57:28 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 7 Jul 2020 08:57:28 +0200
Subject: [R] How to compare the fitting of function?
Message-ID: <CAMk+s2SkvBUjoT5-3zSS8M6vqWsVX4W_XRNca4Czm-ZBkS-2MQ@mail.gmail.com>

Hello,
I have fitted two curves to the data. How can I tell which one is more
fitted? By eye (see plot underneath) I would say that the function
Gompertz is better than the function Holling type III; how can I give
a number to this hunch?
This is an example:
```
# functions
holling = function(a, b, x) {
  y = (a * x^2) / (b^2 + x^2)
  return(y)
}
gompertz = function(a, b, c, x) {
  y = a * exp(-b * exp(-c * x))
  return(y)
}
# data
actual <- c(8,  24,  39,  63,  89, 115, 153)
holling <- c(4.478803,  17.404533,  37.384128,  62.492663,  90.683630,
120.118174, 149.347683)
gompertz <- c(11.30771,  22.39017,  38.99516,  61.19318,  88.23403,
118.77225, 151.19849)
# plot
plot(1:length(actual), actual, lty = 1 , type = "l", lwd = 2,
     xlab = "Index", ylab = "Values")
points(1:length(actual), holling, lty = 2, type = "l", col = "red")
points(1:length(actual), gompertz, lty = 3, type = "l", col = "blue")
legend("bottomright",
       legend = c("Actual values", "Holling III", "Gompertz"),
       lty = c(1, 2, 3), lwd = c(2, 1,1), col = c("black", "red", "blue"))
```
Thank you


From o||ver@b@|mer @end|ng |rom un|b@@@ch  Mon Jul  6 23:38:23 2020
From: o||ver@b@|mer @end|ng |rom un|b@@@ch (Oliver Balmer)
Date: Mon, 6 Jul 2020 23:38:23 +0200
Subject: [R] crash when opening existing scripts
Message-ID: <04a54eef-ac83-5b3d-3217-14c516d0f4a1@unibas.ch>

I have a newly installed R (v. 4.0.2) on an all new MacBook Pro with OS 
Catalina (v. 10.15.4). R works perfectly smooth except for one thing: 
Many of my scripts (but not all - and consistently the same) will cause 
R to crash when I attempt to open them either by double-clicking them or 
by opening them from within R with File>Open Recent. I never had that 
problem before and I did not find answers to this problem in older posts 
or StackOverflow. The only way to open them is to open them in another 
text editor and copy-paste them into a new script within R. But when I 
then save that new script and try to reopen it, the same thing happens 
again.

*Dr. Oliver Balmer*
Project leader
Tel. +41 (0)61 284 87 48
oliver.balmer at swisstph.ch

*Swiss Tropical and Public Health Institute*
Socinstrasse 57, 4051 Basel, Switzerland
www.swisstph.ch


	[[alternative HTML version deleted]]


From bhh @end|ng |rom x@4@||@n|  Tue Jul  7 09:38:37 2020
From: bhh @end|ng |rom x@4@||@n| (Berend Hasselman)
Date: Tue, 7 Jul 2020 09:38:37 +0200
Subject: [R] crash when opening existing scripts
In-Reply-To: <04a54eef-ac83-5b3d-3217-14c516d0f4a1@unibas.ch>
References: <04a54eef-ac83-5b3d-3217-14c516d0f4a1@unibas.ch>
Message-ID: <D087A35E-D657-4472-AF29-6A29154D6576@xs4all.nl>



> On 6 Jul 2020, at 23:38, Oliver Balmer <oliver.balmer at unibas.ch> wrote:
> 
> I have a newly installed R (v. 4.0.2) on an all new MacBook Pro with OS 
> Catalina (v. 10.15.4). R works perfectly smooth except for one thing: 
> Many of my scripts (but not all - and consistently the same) will cause 
> R to crash when I attempt to open them either by double-clicking them or 
> by opening them from within R with File>Open Recent. I never had that 
> problem before and I did not find answers to this problem in older posts 
> or StackOverflow. The only way to open them is to open them in another 
> text editor and copy-paste them into a new script within R. But when I 
> then save that new script and try to reopen it, the same thing happens 
> again.
> 

This belongs on the R-SIG-Mac list (https://stat.ethz.ch/pipermail/r-sig-mac/).

See this thread:  https://stat.ethz.ch/pipermail/r-sig-mac/2020-June/013575.html

and the solution: https://stat.ethz.ch/pipermail/r-sig-mac/2020-July/013641.html

Berend Hasselman


From c@t@||nro|bu @end|ng |rom gm@||@com  Tue Jul  7 12:00:11 2020
From: c@t@||nro|bu @end|ng |rom gm@||@com (Catalin Roibu)
Date: Tue, 7 Jul 2020 13:00:11 +0300
Subject: [R] unique scale color ggplot2
Message-ID: <CAEW+BDJXxGLxBKd=OWtW4xmAfnWaFx4ggfufnvcELbEbJvJL-w@mail.gmail.com>

Dear R users,

I want to create a plot for multiple sites and to keep the same color range
scale (the correlation values range from -0.5 to 0.7 for all data, but I
have sites with different min and max).

I used this code:
cols<-c("#0288D1", "#039BE5", "#03A9F4","#29B6F6", "#4FC3F7", "#FFCDD2",
"#E57373", "#F44336", "#E53935", "#D32F2F", "#C62828", "#B71C1C")
zCuts <-seq(-.5, 0.6, by = 0.1)
p<-ggplot(df1, aes(x=as.factor(spei), y=as.factor(month), fill = cut(cor,
zCuts))) +
  geom_tile() +
  scale_fill_manual(values=cols)

but for each site the scale color is different.


Please help me to solve this problem!

Thank you!


Bests!

Catalin




-- 

-
-
Catalin-Constantin ROIBU
Lecturer PhD, Forestry engineer
Forestry Faculty of Suceava
Str. Universitatii no. 13, Suceava, 720229, Romania
office phone      +4 0230 52 29 78, ext. 531
mobile phone    +4 0745 53 18 01
FAX:                +4 0230 52 16 64
silvic.usv.ro <http://www.usv.ro/>

	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Tue Jul  7 12:44:10 2020
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Tue, 7 Jul 2020 12:44:10 +0200
Subject: [R] unique scale color ggplot2
In-Reply-To: <CAEW+BDJXxGLxBKd=OWtW4xmAfnWaFx4ggfufnvcELbEbJvJL-w@mail.gmail.com>
References: <CAEW+BDJXxGLxBKd=OWtW4xmAfnWaFx4ggfufnvcELbEbJvJL-w@mail.gmail.com>
Message-ID: <CAJuCY5wA74CMAbYt2AnLMyOTCyN2dZH0U2NLEOhokG7dRNt5QA@mail.gmail.com>

Dear Catalin,

use scale_fill_gradient() and set fixed limits

ggplot(df1, aes(x=as.factor(spei), y=as.factor(month), fill = cut(cor,
zCuts))) +
  geom_tile() +
  scale_fill_gradient(limits = c(-0.7, 0.7))

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op di 7 jul. 2020 om 12:02 schreef Catalin Roibu <catalinroibu at gmail.com>:

> Dear R users,
>
> I want to create a plot for multiple sites and to keep the same color range
> scale (the correlation values range from -0.5 to 0.7 for all data, but I
> have sites with different min and max).
>
> I used this code:
> cols<-c("#0288D1", "#039BE5", "#03A9F4","#29B6F6", "#4FC3F7", "#FFCDD2",
> "#E57373", "#F44336", "#E53935", "#D32F2F", "#C62828", "#B71C1C")
> zCuts <-seq(-.5, 0.6, by = 0.1)
> p<-ggplot(df1, aes(x=as.factor(spei), y=as.factor(month), fill = cut(cor,
> zCuts))) +
>   geom_tile() +
>   scale_fill_manual(values=cols)
>
> but for each site the scale color is different.
>
>
> Please help me to solve this problem!
>
> Thank you!
>
>
> Bests!
>
> Catalin
>
>
>
>
> --
>
> -
> -
> Catalin-Constantin ROIBU
> Lecturer PhD, Forestry engineer
> Forestry Faculty of Suceava
> Str. Universitatii no. 13, Suceava, 720229, Romania
> office phone      +4 0230 52 29 78, ext. 531
> mobile phone    +4 0745 53 18 01
> FAX:                +4 0230 52 16 64
> silvic.usv.ro <http://www.usv.ro/>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jul  7 13:31:47 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 7 Jul 2020 14:31:47 +0300
Subject: [R] How to compare the fitting of function?
In-Reply-To: <CAMk+s2SkvBUjoT5-3zSS8M6vqWsVX4W_XRNca4Czm-ZBkS-2MQ@mail.gmail.com>
References: <CAMk+s2SkvBUjoT5-3zSS8M6vqWsVX4W_XRNca4Czm-ZBkS-2MQ@mail.gmail.com>
Message-ID: <20200707143147.1162eb40@trisector>

On Tue, 7 Jul 2020 08:57:28 +0200
Luigi Marongiu <marongiu.luigi at gmail.com> wrote:

>I would say that the function Gompertz is better than the function
>Holling type III; how can I give a number to this hunch?

There are many different goodness-of-fit measures; typically,
regression problems are solved by minimising the sums of squared
residuals, so you can just take a look at those (sum((y.predicted -
y.reference)^2)). Root-mean-square-error [*] is another widely used
metric. When comparing different methods, one should be aware of
multiple comparisons problem [**] and potential for overfitting [***].

All this and more is discussed in books on statistics and regression,
such as Regression Modeling Strategies by Frank E. Harrell, Jr.
[doi:10.1007/978-3-319-19425-7]. For more advice on statistics,
consider dedicated communities such as
<https://stats.stackexchange.com/>, since statistics advice is
considered off-topic here in R-help.

-- 
Best regards,
Ivan

[*] https://en.wikipedia.org/wiki/RMSE

[**] https://en.wikipedia.org/wiki/Multiple_testing

[***] https://en.wikipedia.org/wiki/Overfitting


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Jul  7 13:35:29 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 7 Jul 2020 13:35:29 +0200
Subject: [R] How to compare the fitting of function?
In-Reply-To: <20200707143147.1162eb40@trisector>
References: <CAMk+s2SkvBUjoT5-3zSS8M6vqWsVX4W_XRNca4Czm-ZBkS-2MQ@mail.gmail.com>
 <20200707143147.1162eb40@trisector>
Message-ID: <CAMk+s2QFqx9cT6mixhw+=NHRBmDPbZyZMgd3j0SMiddLc-WAcA@mail.gmail.com>

Thank you. The problem was the implementation of the goodness-of-fit
in R (any method, really).
regards

On Tue, Jul 7, 2020 at 1:31 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Tue, 7 Jul 2020 08:57:28 +0200
> Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> >I would say that the function Gompertz is better than the function
> >Holling type III; how can I give a number to this hunch?
>
> There are many different goodness-of-fit measures; typically,
> regression problems are solved by minimising the sums of squared
> residuals, so you can just take a look at those (sum((y.predicted -
> y.reference)^2)). Root-mean-square-error [*] is another widely used
> metric. When comparing different methods, one should be aware of
> multiple comparisons problem [**] and potential for overfitting [***].
>
> All this and more is discussed in books on statistics and regression,
> such as Regression Modeling Strategies by Frank E. Harrell, Jr.
> [doi:10.1007/978-3-319-19425-7]. For more advice on statistics,
> consider dedicated communities such as
> <https://stats.stackexchange.com/>, since statistics advice is
> considered off-topic here in R-help.
>
> --
> Best regards,
> Ivan
>
> [*] https://en.wikipedia.org/wiki/RMSE
>
> [**] https://en.wikipedia.org/wiki/Multiple_testing
>
> [***] https://en.wikipedia.org/wiki/Overfitting



-- 
Best regards,
Luigi


From nejood96 @end|ng |rom y@hoo@com  Sun Jul  5 16:38:46 2020
From: nejood96 @end|ng |rom y@hoo@com (nejood Al-walidi)
Date: Sun, 5 Jul 2020 14:38:46 +0000 (UTC)
Subject: [R] Recommenderlab pacakge
References: <633807704.2682750.1593959926748.ref@mail.yahoo.com>
Message-ID: <633807704.2682750.1593959926748@mail.yahoo.com>

Dear all,My name is Nejood.?
I'm interested in Rstudio.?
I'm looking for using the Recommenderlab package for tracing requirements and source code.?
My problem with the dataset.?How can I prepare my dataset to use in recommenderlab package??The datasets for requirements traceability.The data sets for two artifacts in requirements traceability:Source code and requirements.?I attached two types of datasets(CSV and XML).Please, I need your help.?I didn't find any solution to my problem.?I would appreciate it if you help me as soon as.
Your's sincerely?Nejood


From jr@| @end|ng |rom po@teo@no  Tue Jul  7 18:23:38 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 7 Jul 2020 18:23:38 +0200
Subject: [R] Recommenderlab pacakge
In-Reply-To: <633807704.2682750.1593959926748@mail.yahoo.com>
References: <633807704.2682750.1593959926748.ref@mail.yahoo.com>
 <633807704.2682750.1593959926748@mail.yahoo.com>
Message-ID: <20200707162338.GA15996@posteo.no>

Dear nejood,

Please provide a miniminal reproducible 
example.

On 2020-07-05 14:38 +0000, nejood Al-walidi via R-help wrote:
| I'm looking for using the 
| Recommenderlab package for tracing 
| requirements and source code.? My 
| problem with the dataset.?How can I 
| prepare my dataset to use in 
| recommenderlab package??

The vignette[1] is usually a good 
starting point.  It is listed at the end 
of the readme[2] ...

| The datasets for requirements 
| traceability.The data sets for two 
| artifacts in requirements 
| traceability:Source code and 
| requirements.

I am not able to understand this.

| I attached two types of datasets(CSV 
| and XML).

It is not possible to send csv and xml 
files on this list, you have to put them 
somewhere else, e.g. github.

Best,
Rasmus

[1] https://cran.r-project.org/web/packages/recommenderlab/vignettes/recommenderlab.pdf
[2] https://github.com/mhahsler/recommenderlab/blob/master/README.md


From jr@| @end|ng |rom po@teo@no  Tue Jul  7 18:42:13 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 7 Jul 2020 18:42:13 +0200
Subject: [R] unique scale color ggplot2
In-Reply-To: <CAJuCY5wA74CMAbYt2AnLMyOTCyN2dZH0U2NLEOhokG7dRNt5QA@mail.gmail.com>
References: <CAEW+BDJXxGLxBKd=OWtW4xmAfnWaFx4ggfufnvcELbEbJvJL-w@mail.gmail.com>
 <CAJuCY5wA74CMAbYt2AnLMyOTCyN2dZH0U2NLEOhokG7dRNt5QA@mail.gmail.com>
Message-ID: <20200707164213.GB15996@posteo.no>

On 2020-07-07 12:44 +0200, Thierry Onkelinx via R-help wrote:
> Op di 7 jul. 2020 om 12:02 schreef Catalin Roibu <catalinroibu at gmail.com>:
> > 
> > Dear R users,
> >
> > I want to create a plot for multiple 
> > sites and to keep the same color 
> > range scale (the correlation values 
> > range from -0.5 to 0.7 for all data, 
> > but I have sites with different min 
> > and max).
> >
> > I used this code:
> > cols<-c("#0288D1", "#039BE5", "#03A9F4","#29B6F6", "#4FC3F7", "#FFCDD2",
> > "#E57373", "#F44336", "#E53935", "#D32F2F", "#C62828", "#B71C1C")
> > zCuts <-seq(-.5, 0.6, by = 0.1)
> > p<-ggplot(df1, aes(x=as.factor(spei), y=as.factor(month), fill = cut(cor,
> > zCuts))) +
> >   geom_tile() +
> >   scale_fill_manual(values=cols)
> >
> > but for each site the scale color is different.
> >
> 
> Dear Catalin,
> 
> use scale_fill_gradient() and set fixed limits
> 
> ggplot(df1, aes(x=as.factor(spei), y=as.factor(month), fill = cut(cor,
> zCuts))) +
>   geom_tile() +
>   scale_fill_gradient(limits = c(-0.7, 0.7))

Hmm ... what might df1 have looked like 
... creating a df with columns spei, 
month, cor, and zCuts containing 1:5 
doesn't do the trick ... 

	df1 <-
	  data.frame(
	    spei=1:5,
	    month=1:5,
	    cor=1:5,
	    zCuts=1:5
	  )
	cols <-
	  c("#0288D1", "#039BE5",
	    "#03A9F4","#29B6F6", "#4FC3F7",
	    "#FFCDD2", "#E57373", "#F44336",
	    "#E53935", "#D32F2F", "#C62828",
	    "#B71C1C")
	zCuts <- seq(-.5, 0.6, by=0.1)
	filename <- "/tmp/catalin1.png"
	width <- 800
	height <- 600
	res <- 150
	png(filename=filename, width=width, height=height, res=res)
	mapping <- ggplot2::aes(
	  x = as.factor(spei),
	  y = as.factor(month),
	  fill = cut(cor, zCuts)
	)
	p <- ggplot2::ggplot(df1, mapping=mapping) +
	   ggplot2::geom_tile() +
	   ggplot2::scale_fill_gradient(limits = c(-0.7, 0.7))
	#   ggplot2::scale_fill_manual(values=cols)
	p
	dev.off()

... which only produces the error

	Error: Discrete value supplied to continuous scale
	Execution halted

V

r


From th|erry@onke||nx @end|ng |rom |nbo@be  Tue Jul  7 19:23:44 2020
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Tue, 7 Jul 2020 19:23:44 +0200
Subject: [R] unique scale color ggplot2
In-Reply-To: <20200707164213.GB15996@posteo.no>
References: <CAEW+BDJXxGLxBKd=OWtW4xmAfnWaFx4ggfufnvcELbEbJvJL-w@mail.gmail.com>
 <CAJuCY5wA74CMAbYt2AnLMyOTCyN2dZH0U2NLEOhokG7dRNt5QA@mail.gmail.com>
 <20200707164213.GB15996@posteo.no>
Message-ID: <CAJuCY5yX67A5Mra0kA8ThP4QPMLECqGby76aSTWt8BtA=JCQMw@mail.gmail.com>

Don't use the cut() function.

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op di 7 jul. 2020 om 18:42 schreef Rasmus Liland <jral at posteo.no>:

> On 2020-07-07 12:44 +0200, Thierry Onkelinx via R-help wrote:
> > Op di 7 jul. 2020 om 12:02 schreef Catalin Roibu <catalinroibu at gmail.com
> >:
> > >
> > > Dear R users,
> > >
> > > I want to create a plot for multiple
> > > sites and to keep the same color
> > > range scale (the correlation values
> > > range from -0.5 to 0.7 for all data,
> > > but I have sites with different min
> > > and max).
> > >
> > > I used this code:
> > > cols<-c("#0288D1", "#039BE5", "#03A9F4","#29B6F6", "#4FC3F7",
> "#FFCDD2",
> > > "#E57373", "#F44336", "#E53935", "#D32F2F", "#C62828", "#B71C1C")
> > > zCuts <-seq(-.5, 0.6, by = 0.1)
> > > p<-ggplot(df1, aes(x=as.factor(spei), y=as.factor(month), fill =
> cut(cor,
> > > zCuts))) +
> > >   geom_tile() +
> > >   scale_fill_manual(values=cols)
> > >
> > > but for each site the scale color is different.
> > >
> >
> > Dear Catalin,
> >
> > use scale_fill_gradient() and set fixed limits
> >
> > ggplot(df1, aes(x=as.factor(spei), y=as.factor(month), fill = cut(cor,
> > zCuts))) +
> >   geom_tile() +
> >   scale_fill_gradient(limits = c(-0.7, 0.7))
>
> Hmm ... what might df1 have looked like
> ... creating a df with columns spei,
> month, cor, and zCuts containing 1:5
> doesn't do the trick ...
>
>         df1 <-
>           data.frame(
>             spei=1:5,
>             month=1:5,
>             cor=1:5,
>             zCuts=1:5
>           )
>         cols <-
>           c("#0288D1", "#039BE5",
>             "#03A9F4","#29B6F6", "#4FC3F7",
>             "#FFCDD2", "#E57373", "#F44336",
>             "#E53935", "#D32F2F", "#C62828",
>             "#B71C1C")
>         zCuts <- seq(-.5, 0.6, by=0.1)
>         filename <- "/tmp/catalin1.png"
>         width <- 800
>         height <- 600
>         res <- 150
>         png(filename=filename, width=width, height=height, res=res)
>         mapping <- ggplot2::aes(
>           x = as.factor(spei),
>           y = as.factor(month),
>           fill = cut(cor, zCuts)
>         )
>         p <- ggplot2::ggplot(df1, mapping=mapping) +
>            ggplot2::geom_tile() +
>            ggplot2::scale_fill_gradient(limits = c(-0.7, 0.7))
>         #   ggplot2::scale_fill_manual(values=cols)
>         p
>         dev.off()
>
> ... which only produces the error
>
>         Error: Discrete value supplied to continuous scale
>         Execution halted
>
> V
>
> r
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Tue Jul  7 19:43:28 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 7 Jul 2020 19:43:28 +0200
Subject: [R] unique scale color ggplot2
In-Reply-To: <CAJuCY5yX67A5Mra0kA8ThP4QPMLECqGby76aSTWt8BtA=JCQMw@mail.gmail.com>
References: <CAEW+BDJXxGLxBKd=OWtW4xmAfnWaFx4ggfufnvcELbEbJvJL-w@mail.gmail.com>
 <CAJuCY5wA74CMAbYt2AnLMyOTCyN2dZH0U2NLEOhokG7dRNt5QA@mail.gmail.com>
 <20200707164213.GB15996@posteo.no>
 <CAJuCY5yX67A5Mra0kA8ThP4QPMLECqGby76aSTWt8BtA=JCQMw@mail.gmail.com>
Message-ID: <20200707174328.GA19074@posteo.no>

On 2020-07-07 19:23 +0200, Thierry Onkelinx wrote:
> 
> Don't use the cut() function.

Ah, I see it now.  Changing 

	fill = cut(cor, zCuts)

to

	fill = cor

did it, probably.  Perhaps Catalin agrees.


From |vowe| @end|ng |rom gm@||@com  Wed Jul  8 06:20:39 2020
From: |vowe| @end|ng |rom gm@||@com (ivo welch)
Date: Tue, 7 Jul 2020 21:20:39 -0700
Subject: [R] parallel number of cores according to memory?
Message-ID: <CAPr7RtUd99n_VeYG0AFnBe5ZfgprgZWuW4qgdNSLvgS+9guJxQ@mail.gmail.com>

if I understand correctly, R makes a copy of the full environment for each
process.  thus, even if I have 32 processors, if I only have 64GB of RAM
and my R process holds about 10GB, I should probably not spawn 32 processes.

has anyone written a function that sets the number of cores for use (in
mclapply) to be guessed at by appropriate memory requirements (e.g.,
"amount-of-RAM"/"RAM held by R")?

(it would be even nicer if I could declare my 8GB data frame to be
read-only and to be shared among my processes, but this is presumably
technically very difficult.)

pointers appreciated.

/iaw

	[[alternative HTML version deleted]]


From m|n@to-n@k@z@w@ @end|ng |rom um|n@net  Tue Jul  7 07:57:27 2020
From: m|n@to-n@k@z@w@ @end|ng |rom um|n@net (Minato Nakazawa)
Date: Tue, 7 Jul 2020 14:57:27 +0900
Subject: [R] how to calculate odd ratios with R?
In-Reply-To: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>
References: <CAMk+s2RERrPE4EnDASqpyihZDTjxcPu=gAXjFLgtrrvc1N1TAA@mail.gmail.com>
Message-ID: <20200707145727.76cd369cc2fcb2ca064d402a@umin.net>


A review (sorry in Japanese) on the calculation of odds ratios 
with confidence intervals using several packages in R is given
by Prof. Okumura, Mie Univ.

https://oku.edu.mie-u.ac.jp/~okumura/stat/2by2.html

x <- matrix(c(6, 3, 4, 5), 2)
# using vcd
library(vcd)
res <- oddsratio(x)
exp(confint(res))
summary(res)
# Note: summary(oddsratio(x, log=FALSE)) gives inappropriate p-value.
# using fmsb
library(fmsb)
oddsratio(x, p.calc.by.independence=FALSE)

Best,
Minato Nakazawa

On Mon, 6 Jul 2020 15:01:34 +0200
Luigi Marongiu <marongiu.luigi at gmail.com> wrote:

> Hello,
> Is it possible to calculate with a single function the odd ratios?
> Now I can use this implement:
> ```
> or <- (De/He)/(Dn/Hn) # Disease exposed, Healthy non-exposed
> logo <- log(or)
> x <- sqrt(((1/De) + (1/He) + (1/Dn) + (1/Hn)))
> lower_ci = exp(logo - 1.96*x)
> upper_ci = exp(logo + 1.96*x)
> cat("OR:", round(or, 3), "(", round(lower_ci, 3), "-", round(upper_ci, 3), ")",
>     spe = "")
> ```
> for instance,
> ```
> De <-6
> Dn <-3
> He <-4
> Hn <-5
> or <- (De/He)/(Dn/Hn)
> logo <- log(or)
> x <- sqrt(((1/De) + (1/He) + (1/Dn) + (1/Hn)))
> lower_ci = exp(logo - 1.96*x)
> upper_ci = exp(logo + 1.96*x)
> cat("OR:", round(or, 3), "(", round(lower_ci, 3), "-", round(upper_ci, 3), ")",
>     spe = "")
> > OR: 2.5 ( 0.37 - 16.889 )
> ```
> Is there a simple function from some package that can also add a
> p-value to this test? Or how can I calculate the p-value on my own?
> -- 
> Best regards,
> Luigi
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


-- 
Minato Nakazawa <minato-nakazawa at umin.net>
Professor, Division of Global Health, Department of Public Health,
Kobe University Graduate School of Health Sciences
[web] http://minato.sip21c.org/
[phone] +81-78-796-4551
[mobile e-mail] minatonakazawa at gmail.com


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jul  8 06:40:50 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 07 Jul 2020 21:40:50 -0700
Subject: [R] parallel number of cores according to memory?
In-Reply-To: <CAPr7RtUd99n_VeYG0AFnBe5ZfgprgZWuW4qgdNSLvgS+9guJxQ@mail.gmail.com>
References: <CAPr7RtUd99n_VeYG0AFnBe5ZfgprgZWuW4qgdNSLvgS+9guJxQ@mail.gmail.com>
Message-ID: <6C215610-CA71-48E6-937C-453823507823@dcn.davis.ca.us>

Use an operating system that supports forking, like Linux or MacOSX, and use the parallel package mclapply function or similar to share memory for read operations. [1]

And stop posting in HTML here.

[1] https://cran.r-project.org/web/views/HighPerformanceComputing.html

On July 7, 2020 9:20:39 PM PDT, ivo welch <ivowel at gmail.com> wrote:
>if I understand correctly, R makes a copy of the full environment for
>each
>process.  thus, even if I have 32 processors, if I only have 64GB of
>RAM
>and my R process holds about 10GB, I should probably not spawn 32
>processes.
>
>has anyone written a function that sets the number of cores for use (in
>mclapply) to be guessed at by appropriate memory requirements (e.g.,
>"amount-of-RAM"/"RAM held by R")?
>
>(it would be even nicer if I could declare my 8GB data frame to be
>read-only and to be shared among my processes, but this is presumably
>technically very difficult.)
>
>pointers appreciated.
>
>/iaw
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From |vowe| @end|ng |rom gm@||@com  Wed Jul  8 07:15:15 2020
From: |vowe| @end|ng |rom gm@||@com (ivo welch)
Date: Tue, 7 Jul 2020 22:15:15 -0700
Subject: [R] parallel number of cores according to memory?
In-Reply-To: <6C215610-CA71-48E6-937C-453823507823@dcn.davis.ca.us>
References: <CAPr7RtUd99n_VeYG0AFnBe5ZfgprgZWuW4qgdNSLvgS+9guJxQ@mail.gmail.com>
 <6C215610-CA71-48E6-937C-453823507823@dcn.davis.ca.us>
Message-ID: <CAPr7RtVAN_U-uY0jdNQL=HU_T6u5fNo0Ke62w+7mCWW5y56wyQ@mail.gmail.com>

ugghhh---apologies.  although in 2020, it would be nice if the mailing
list had an automatic html filter (or even bouncer!)

I am using macos.  alas, my experiments suggest that `mclapply()` on a
32-core intel system with 64GB of RAM, where the input data frame is
8GB and the output is about 500MB per core (to be stitched together
into about 16GB), the system starts swapping like crazy, comes to a
halt, and then usually crashes.

/iaw


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jul  8 07:22:40 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 07 Jul 2020 22:22:40 -0700
Subject: [R] parallel number of cores according to memory?
In-Reply-To: <CAPr7RtVAN_U-uY0jdNQL=HU_T6u5fNo0Ke62w+7mCWW5y56wyQ@mail.gmail.com>
References: <CAPr7RtUd99n_VeYG0AFnBe5ZfgprgZWuW4qgdNSLvgS+9guJxQ@mail.gmail.com>
 <6C215610-CA71-48E6-937C-453823507823@dcn.davis.ca.us>
 <CAPr7RtVAN_U-uY0jdNQL=HU_T6u5fNo0Ke62w+7mCWW5y56wyQ@mail.gmail.com>
Message-ID: <327B80A5-C624-423E-B1A5-F07015B1E796@dcn.davis.ca.us>

The list does strip html, but the quality of what remains varies greatly.

Are you using tidyverse functions in your workers? Sounds to me like you are doing something in the workers that is triggering making copies of the input data frame.

On July 7, 2020 10:15:15 PM PDT, ivo welch <ivowel at gmail.com> wrote:
>ugghhh---apologies.  although in 2020, it would be nice if the mailing
>list had an automatic html filter (or even bouncer!)
>
>I am using macos.  alas, my experiments suggest that `mclapply()` on a
>32-core intel system with 64GB of RAM, where the input data frame is
>8GB and the output is about 500MB per core (to be stitched together
>into about 16GB), the system starts swapping like crazy, comes to a
>halt, and then usually crashes.
>
>/iaw

-- 
Sent from my phone. Please excuse my brevity.


From |vo@we|ch @end|ng |rom uc|@@edu  Wed Jul  8 08:12:47 2020
From: |vo@we|ch @end|ng |rom uc|@@edu (ivo welch)
Date: Tue, 7 Jul 2020 23:12:47 -0700
Subject: [R] parallel number of cores according to memory?
In-Reply-To: <327B80A5-C624-423E-B1A5-F07015B1E796@dcn.davis.ca.us>
References: <CAPr7RtUd99n_VeYG0AFnBe5ZfgprgZWuW4qgdNSLvgS+9guJxQ@mail.gmail.com>
 <6C215610-CA71-48E6-937C-453823507823@dcn.davis.ca.us>
 <CAPr7RtVAN_U-uY0jdNQL=HU_T6u5fNo0Ke62w+7mCWW5y56wyQ@mail.gmail.com>
 <327B80A5-C624-423E-B1A5-F07015B1E796@dcn.davis.ca.us>
Message-ID: <CAJrNScTF73EMyPSNg5m1bkaNfVkR5wEx31Tyk7nYqrU7ykm1Rg@mail.gmail.com>

no, I'm not.   mostly conventional use afaik.  if this should not be
happening, I can trace it down to a small reproducible example to
figure it out.

--
Ivo Welch (ivo.welch at ucla.edu)

--
Ivo Welch (ivo.welch at ucla.edu)
http://www.ivo-welch.info/
J. Fred Weston Distinguished Professor of Finance, UCLA Anderson



On Tue, Jul 7, 2020 at 10:24 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> The list does strip html, but the quality of what remains varies greatly.
>
> Are you using tidyverse functions in your workers? Sounds to me like you are doing something in the workers that is triggering making copies of the input data frame.
>
> On July 7, 2020 10:15:15 PM PDT, ivo welch <ivowel at gmail.com> wrote:
> >ugghhh---apologies.  although in 2020, it would be nice if the mailing
> >list had an automatic html filter (or even bouncer!)
> >
> >I am using macos.  alas, my experiments suggest that `mclapply()` on a
> >32-core intel system with 64GB of RAM, where the input data frame is
> >8GB and the output is about 500MB per core (to be stitched together
> >into about 16GB), the system starts swapping like crazy, comes to a
> >halt, and then usually crashes.
> >
> >/iaw
>
> --
> Sent from my phone. Please excuse my brevity.


From chr|@@prener @end|ng |rom @|u@edu  Wed Jul  8 02:15:32 2020
From: chr|@@prener @end|ng |rom @|u@edu (Chris Prener)
Date: Wed, 8 Jul 2020 00:15:32 +0000
Subject: [R] useR! Live Events Underway!
Message-ID: <469F2023-0901-461D-8DED-DBDC249FCB84@slu.edu>

Hi all,
Our first breakout session for useR! 2020 was today, and our welcome session begins tomorrow followed by Martin M?chler and Luke Tierney?s keynotes and our panel of R Core contributors. The Slido site for Q and A<https://app.sli.do/event/ccilmxcz/live/questions> is already open. If you have questions about R Core, where R is headed, or questions for Martin and Luke, please post them there! Then, head back there for the livestream tomorrow. A full list of our live events is available here<https://user2020.r-project.org/program/agenda/>. Our site also includes links to posters and videos, and will include tutorial information as soon as it is available.

We look forward to seeing you all at our events this week!

Best,
Chris Prener, Heidi Seibold, and Jenine Harris
user! 2020 Co-Leads


	[[alternative HTML version deleted]]

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce

From c@t@||nro|bu @end|ng |rom gm@||@com  Wed Jul  8 13:37:42 2020
From: c@t@||nro|bu @end|ng |rom gm@||@com (Catalin Roibu)
Date: Wed, 8 Jul 2020 14:37:42 +0300
Subject: [R] unique scale color ggplot2
In-Reply-To: <20200707174328.GA19074@posteo.no>
References: <CAEW+BDJXxGLxBKd=OWtW4xmAfnWaFx4ggfufnvcELbEbJvJL-w@mail.gmail.com>
 <CAJuCY5wA74CMAbYt2AnLMyOTCyN2dZH0U2NLEOhokG7dRNt5QA@mail.gmail.com>
 <20200707164213.GB15996@posteo.no>
 <CAJuCY5yX67A5Mra0kA8ThP4QPMLECqGby76aSTWt8BtA=JCQMw@mail.gmail.com>
 <20200707174328.GA19074@posteo.no>
Message-ID: <CAEW+BDKRQa5hFxMwmT4ot8jdgyN3Cr2T4=dL7rdKWzLR6uAXTA@mail.gmail.com>

Dear all,

Thank you for your email and help. I solved the problem!

All the best!

Catalin

On Tue, 7 Jul 2020 at 20:43, Rasmus Liland <jral at posteo.no> wrote:

> On 2020-07-07 19:23 +0200, Thierry Onkelinx wrote:
> >
> > Don't use the cut() function.
>
> Ah, I see it now.  Changing
>
>         fill = cut(cor, zCuts)
>
> to
>
>         fill = cor
>
> did it, probably.  Perhaps Catalin agrees.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 

-
-
Catalin-Constantin ROIBU
?
Lecturer PhD, Forestry engineer
Forestry Faculty of Suceava
Str. Universitatii no. 13, Suceava, 720229, Romania
office phone      +4 0230 52 29 78, ext. 531
mobile phone    +4 0745 53 18 01
FAX:                +4 0230 52 16 64
silvic.usv.ro <http://www.usv.ro/>

	[[alternative HTML version deleted]]


From herd_dog @end|ng |rom cox@net  Wed Jul  8 17:19:14 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Wed, 8 Jul 2020 08:19:14 -0700
Subject: [R] National Weather Service Data
In-Reply-To: <A5E1093B-0129-4892-A5DD-02768971D970@noaa.gov>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
 <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
 <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>
 <28C66B99-9B31-45E1-BEB0-AF88E81D4C67@noaa.gov>
 <197A5AE5DF294658913B204791ECF6AF@OWNERPC>
 <A5E1093B-0129-4892-A5DD-02768971D970@noaa.gov>
Message-ID: <0CB660599A55486686F8E86AE58420C4@OWNERPC>

Thanks again for confirming that the wgrib2 software loaded correctly.  I 
have been making good progress finding variables related to low level winds 
such as the HGT series that, as you know, converts millibars to altitude 
MSL.

The next step is to look at Rapid Refresh (RAP).  Can you direct me to 
someplace that has the names of the forecast models - equivalent to gfs_0p50 
for the Global Forecast System?

Thanks.

-----Original Message----- 
From: Roy Mendelssohn - NOAA Federal
Sent: Monday, July 6, 2020 6:35 PM
To: Philip
Subject: Re: [R] National Weather Service Data

Skimming the docs seems to assume a lot of knowledge of the data.  The best 
I can see there are two temperature variables:

> tmpsfc (surface air temperature, K)
> tmp2m (air temperature at 2m, K)

and one relative humidity:

> rh2m (relative humidity at 2m, %)

Depending on what you are after,  you might find it easier to use the UAF 
ERDDAP server (https://upwell.pfeg.noaa.gov/erddap/griddap/ncep_global.html) 
and 'rerddap' to get the data.  'rerddap' will read in the data into a nice 
tibble,  I also think the documentation is clearer with some nice vignettes 
and the ability to get info about the data.  For example the command

> rerddap::info('ncep_global')

returns:


> <ERDDAP info> ncep_global
>  Base URL: https://upwell.pfeg.noaa.gov/erddap/
>  Dimensions (range):
>      time: (2011-05-06T12:00:00Z, 2020-07-08T12:00:00Z)
>      latitude: (-90.0, 90.0)
>      longitude: (0.0, 359.5)
>  Variables:
>      dlwrfsfc:
>          Units: W m-2
>      dswrfsfc:
>          Units: W m-2
>      pratesfc:
>          Units: kg m-2 s-1
>      prmslmsl:
>          Units: Pa
>      rh2m:
>          Units: %
>      tmp2m:
>          Units: K
>      tmpsfc:
>          Units: K
>      ugrd10m:
>          Units: m s-1
>      vgrd10m:
>          Units: m s-1

which would have answered a lot of your questions.  If you had saved that 
command to a variable  there would be a lot more information,  that is just 
the summary.

HTH,

-Roy

>
> On Jul 6, 2020, at 5:47 PM, Philip <herd_dog at cox.net> wrote:
>
> Thanks for getting back to me.  It is good to know that I am on the right 
> track.
>
> I understand now that the output byte location of the data in the grib2 
> file not the actual data which in this case would be the 2 am forecast six 
> hours into the future.  Can you advise me which of the examples in Dr. 
> Bowman's rNOMADS documentation will get me the tem[perature and relative 
> humidity data?
>
> Philip.
>
> -----Original Message----- From: Roy Mendelssohn - NOAA Federal
> Sent: Monday, July 6, 2020 10:43 AM
> To: Philip
> Cc: stephen sefick ; r-help
> Subject: Re: [R] National Weather Service Data
>
> Hi Philip:
>
> Results look correct to me.  This might help you:
>
> https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/default_inv.html
>
> -Roy
>
>
>> On Jul 6, 2020, at 9:29 AM, Philip <herd_dog at cox.net> wrote:
>>
>> I am trying to access National Weather Service forecasting data through 
>> the rNOMADS package.  I?m not sure if the Weather Service software ? 
>> grib2 ? loaded correctly.  Second, some of the examples in the rNOMADS 
>> documentation seem to run correctly but I?m not sure what the output 
>> means.  Any anvise would be greatly appreciated.
>>
>> 1 - I tried to load the wgrib2 software from instructions in the 
>> following website:
>>
>> https://bovineaerospace.wordpress.com/2015/04/26/how-to-install-rnomads-with-grib-file-support-on-windows/
>>
>> 2 ? the instructions say that if it loaded correctly I should get a 
>> laundry list similar to what is below from the command: 
>>  >system(?wgrib2?).
>>
>>
>>
>> The list I get looks different.  Below is the first 20 or so entries. 
>> How can I check to see if the wgrib2 loaded correctly?
>>
>> wgrib2 v0.1.9.9 9/2013 Wesley Ebisuzaki, Reinoud Bokhorst, Jaakko 
>> Hyv??tti, Dusan Jovic, Kristian Nilssen, Karl Pfeiffer, Pablo Romero, 
>> Manfred Schwarb, Arlindo da Silva, Niklas Sondell, Sergey Varlamov
>> -0xSec           inv  X      Hex dump of section X (0..8)
>> -MM              inv         reference time MM
>> -N_ens           inv         number of ensemble members
>> -RT              inv         type of reference Time
>> -S               inv         simple inventory with minutes and seconds 
>> (subject to change)
>> -Sec0            inv         contents of section0
>> -Sec3            inv         contents of section 3 (Grid Definition 
>> Section)
>> -Sec4            inv         Sec 4 values (Product definition section)
>> -Sec5            inv         Sec 5 values (Data representation section)
>> -Sec6            inv         show bit-map section
>> -Sec_len         inv         length of various grib sections
>> -T               inv         reference time YYYYMMDDHHMMSS
>> -V               inv         diagnostic output
>> -VT              inv         verf time = reference_time + forecast_time 
>> (YYYYMMDDHHMMSS)
>> -YY              inv         reference time YYYY
>>
>> 3 ? As I said, some of the documentation examples work and for some I get 
>> error messages.  Below is an example of one that seemed to work but I don?t 
>> understand the output.
>>
>> #GribInfo - page 20
>> urlsOut <- CrawlModels(abbrev="gfs_0p50",depth=2)
>> ModelParameters <- ParseModelPage(urlsOut[2])#[1] is most recent model
>> MyPred <- ModelParameters$pred[grep("06$",ModelParameters$pred)]
>>  Levels <- c("2_m_above_ground","800_mb")
>>  Variables <- c("TMP","RH")
>>  GribInfo <- GribGrab(urlsOut[2],MyPred,Levels,Variables)
>> GribInv <- GribInfo(GribInfo[[1]]$file.name,"grib2")
>>
>> The command GribInv$inventory returns:
>>
>> $inventory
>> [1] "1:0:d=2020070606:TMP:800 mb:6 hour fcst:" 
>> "2:148450:d=2020070606:RH:800 mb:6 hour fcst:"
>> [3] "3:414132:d=2020070606:TMP:2 m above ground:6 hour fcst:" 
>> "4:571266:d=2020070606:RH:2 m above ground:6 hour fcst:"
>>
>> This is supposed to be temperature and relative humidity 2 meters above 
>> the ground and at 800 milibars for 2020 ? July 6 ? at ZULU time 0600. 
>> But I have no idea what the numbers 414132 ? second line ? mean.
>>
>> Any advise would be greatly appreciated.
>>
>> Philip Heinrich
>>
>> From: stephen sefick
>> Sent: Thursday, July 2, 2020 3:20 PM
>> To: Philip
>> Cc: r-help
>> Subject: Re: [R] National Weather Service Data
>>
>> I am unfamiliar with Rnomads. Could you provide a minimal reproducable 
>> example? You are more likely to receive help this way.
>>
>>
>> On Thu, Jul 2, 2020, 18:06 Philip <herd_dog at cox.net> wrote:
>>
>> Is anyone out there familiar with rNOMADS?  It is a package to get into 
>> National Weather Service forecasting data with R?
>>
>> I'm not sure the Weather Service software named wgrib2 loaded correctly 
>> because some of the stuff won't run and I can't make much sense out of 
>> some of the output.
>>
>> Thanks.
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> **********************
> "The contents of this message do not reflect any position of the U.S. 
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK 
> Jr.
>

**********************
"The contents of this message do not reflect any position of the U.S. 
Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected"
"the arc of the moral universe is long, but it bends toward justice" -MLK 
Jr.


From roy@mende|@@ohn @end|ng |rom no@@@gov  Wed Jul  8 18:43:34 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 8 Jul 2020 09:43:34 -0700
Subject: [R] National Weather Service Data
In-Reply-To: <0CB660599A55486686F8E86AE58420C4@OWNERPC>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
 <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
 <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>
 <28C66B99-9B31-45E1-BEB0-AF88E81D4C67@noaa.gov>
 <197A5AE5DF294658913B204791ECF6AF@OWNERPC>
 <A5E1093B-0129-4892-A5DD-02768971D970@noaa.gov>
 <0CB660599A55486686F8E86AE58420C4@OWNERPC>
Message-ID: <729266C1-8117-4A81-BD85-FB64B5703BEA@noaa.gov>

I would suggest looking at the NOMADS page for information on what is available through NOMADS:

https://nomads.ncep.noaa.gov

-Roy


> On Jul 8, 2020, at 8:19 AM, Philip <herd_dog at cox.net> wrote:
> 
> Thanks again for confirming that the wgrib2 software loaded correctly.  I have been making good progress finding variables related to low level winds such as the HGT series that, as you know, converts millibars to altitude MSL.
> 
> The next step is to look at Rapid Refresh (RAP).  Can you direct me to someplace that has the names of the forecast models - equivalent to gfs_0p50 for the Global Forecast System?
> 
> Thanks.
> 
> -----Original Message----- From: Roy Mendelssohn - NOAA Federal
> Sent: Monday, July 6, 2020 6:35 PM
> To: Philip
> Subject: Re: [R] National Weather Service Data
> 
> Skimming the docs seems to assume a lot of knowledge of the data.  The best I can see there are two temperature variables:
> 
>> tmpsfc (surface air temperature, K)
>> tmp2m (air temperature at 2m, K)
> 
> and one relative humidity:
> 
>> rh2m (relative humidity at 2m, %)
> 
> Depending on what you are after,  you might find it easier to use the UAF ERDDAP server (https://upwell.pfeg.noaa.gov/erddap/griddap/ncep_global.html) and 'rerddap' to get the data.  'rerddap' will read in the data into a nice tibble,  I also think the documentation is clearer with some nice vignettes and the ability to get info about the data.  For example the command
> 
>> rerddap::info('ncep_global')
> 
> returns:
> 
> 
>> <ERDDAP info> ncep_global
>> Base URL: https://upwell.pfeg.noaa.gov/erddap/
>> Dimensions (range):
>>     time: (2011-05-06T12:00:00Z, 2020-07-08T12:00:00Z)
>>     latitude: (-90.0, 90.0)
>>     longitude: (0.0, 359.5)
>> Variables:
>>     dlwrfsfc:
>>         Units: W m-2
>>     dswrfsfc:
>>         Units: W m-2
>>     pratesfc:
>>         Units: kg m-2 s-1
>>     prmslmsl:
>>         Units: Pa
>>     rh2m:
>>         Units: %
>>     tmp2m:
>>         Units: K
>>     tmpsfc:
>>         Units: K
>>     ugrd10m:
>>         Units: m s-1
>>     vgrd10m:
>>         Units: m s-1
> 
> which would have answered a lot of your questions.  If you had saved that command to a variable  there would be a lot more information,  that is just the summary.
> 
> HTH,
> 
> -Roy
> 
>> 
>> On Jul 6, 2020, at 5:47 PM, Philip <herd_dog at cox.net> wrote:
>> 
>> Thanks for getting back to me.  It is good to know that I am on the right track.
>> 
>> I understand now that the output byte location of the data in the grib2 file not the actual data which in this case would be the 2 am forecast six hours into the future.  Can you advise me which of the examples in Dr. Bowman's rNOMADS documentation will get me the tem[perature and relative humidity data?
>> 
>> Philip.
>> 
>> -----Original Message----- From: Roy Mendelssohn - NOAA Federal
>> Sent: Monday, July 6, 2020 10:43 AM
>> To: Philip
>> Cc: stephen sefick ; r-help
>> Subject: Re: [R] National Weather Service Data
>> 
>> Hi Philip:
>> 
>> Results look correct to me.  This might help you:
>> 
>> https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/default_inv.html
>> 
>> -Roy
>> 
>> 
>>> On Jul 6, 2020, at 9:29 AM, Philip <herd_dog at cox.net> wrote:
>>> 
>>> I am trying to access National Weather Service forecasting data through the rNOMADS package.  I?m not sure if the Weather Service software ? grib2 ? loaded correctly.  Second, some of the examples in the rNOMADS documentation seem to run correctly but I?m not sure what the output means.  Any anvise would be greatly appreciated.
>>> 
>>> 1 - I tried to load the wgrib2 software from instructions in the following website:
>>> 
>>> https://bovineaerospace.wordpress.com/2015/04/26/how-to-install-rnomads-with-grib-file-support-on-windows/
>>> 
>>> 2 ? the instructions say that if it loaded correctly I should get a laundry list similar to what is below from the command:  >system(?wgrib2?).
>>> 
>>> 
>>> 
>>> The list I get looks different.  Below is the first 20 or so entries. How can I check to see if the wgrib2 loaded correctly?
>>> 
>>> wgrib2 v0.1.9.9 9/2013 Wesley Ebisuzaki, Reinoud Bokhorst, Jaakko Hyv??tti, Dusan Jovic, Kristian Nilssen, Karl Pfeiffer, Pablo Romero, Manfred Schwarb, Arlindo da Silva, Niklas Sondell, Sergey Varlamov
>>> -0xSec           inv  X      Hex dump of section X (0..8)
>>> -MM              inv         reference time MM
>>> -N_ens           inv         number of ensemble members
>>> -RT              inv         type of reference Time
>>> -S               inv         simple inventory with minutes and seconds (subject to change)
>>> -Sec0            inv         contents of section0
>>> -Sec3            inv         contents of section 3 (Grid Definition Section)
>>> -Sec4            inv         Sec 4 values (Product definition section)
>>> -Sec5            inv         Sec 5 values (Data representation section)
>>> -Sec6            inv         show bit-map section
>>> -Sec_len         inv         length of various grib sections
>>> -T               inv         reference time YYYYMMDDHHMMSS
>>> -V               inv         diagnostic output
>>> -VT              inv         verf time = reference_time + forecast_time (YYYYMMDDHHMMSS)
>>> -YY              inv         reference time YYYY
>>> 
>>> 3 ? As I said, some of the documentation examples work and for some I get error messages.  Below is an example of one that seemed to work but I don?t understand the output.
>>> 
>>> #GribInfo - page 20
>>> urlsOut <- CrawlModels(abbrev="gfs_0p50",depth=2)
>>> ModelParameters <- ParseModelPage(urlsOut[2])#[1] is most recent model
>>> MyPred <- ModelParameters$pred[grep("06$",ModelParameters$pred)]
>>> Levels <- c("2_m_above_ground","800_mb")
>>> Variables <- c("TMP","RH")
>>> GribInfo <- GribGrab(urlsOut[2],MyPred,Levels,Variables)
>>> GribInv <- GribInfo(GribInfo[[1]]$file.name,"grib2")
>>> 
>>> The command GribInv$inventory returns:
>>> 
>>> $inventory
>>> [1] "1:0:d=2020070606:TMP:800 mb:6 hour fcst:" "2:148450:d=2020070606:RH:800 mb:6 hour fcst:"
>>> [3] "3:414132:d=2020070606:TMP:2 m above ground:6 hour fcst:" "4:571266:d=2020070606:RH:2 m above ground:6 hour fcst:"
>>> 
>>> This is supposed to be temperature and relative humidity 2 meters above the ground and at 800 milibars for 2020 ? July 6 ? at ZULU time 0600. But I have no idea what the numbers 414132 ? second line ? mean.
>>> 
>>> Any advise would be greatly appreciated.
>>> 
>>> Philip Heinrich
>>> 
>>> From: stephen sefick
>>> Sent: Thursday, July 2, 2020 3:20 PM
>>> To: Philip
>>> Cc: r-help
>>> Subject: Re: [R] National Weather Service Data
>>> 
>>> I am unfamiliar with Rnomads. Could you provide a minimal reproducable example? You are more likely to receive help this way.
>>> 
>>> 
>>> On Thu, Jul 2, 2020, 18:06 Philip <herd_dog at cox.net> wrote:
>>> 
>>> Is anyone out there familiar with rNOMADS?  It is a package to get into National Weather Service forecasting data with R?
>>> 
>>> I'm not sure the Weather Service software named wgrib2 loaded correctly because some of the stuff won't run and I can't make much sense out of some of the output.
>>> 
>>> Thanks.
>>>        [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>>> [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From herd_dog @end|ng |rom cox@net  Wed Jul  8 19:37:00 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Wed, 8 Jul 2020 10:37:00 -0700
Subject: [R] National Weather Service Data
In-Reply-To: <729266C1-8117-4A81-BD85-FB64B5703BEA@noaa.gov>
References: <086B46A8D1A2497AA82D27A3F131DE9B@OWNERPC>
 <CADKEMqjk+fXk_pv3UZHXGy7HTRES-VYZ0jk=GgUXYmLewJQh4w@mail.gmail.com>
 <D6E95147B1F747F6A2DB2A9E3FC78519@OWNERPC>
 <28C66B99-9B31-45E1-BEB0-AF88E81D4C67@noaa.gov>
 <197A5AE5DF294658913B204791ECF6AF@OWNERPC>
 <A5E1093B-0129-4892-A5DD-02768971D970@noaa.gov>
 <0CB660599A55486686F8E86AE58420C4@OWNERPC>
 <729266C1-8117-4A81-BD85-FB64B5703BEA@noaa.gov>
Message-ID: <4CE2A142DDAC421E9428BB458F9C47A7@OWNERPC>

Thanks.

Found the url's, names, and abbreviations on Daniel Bowman's rNOMADS package 
for R - NOMADS Real time List.

Thanks.

-----Original Message----- 
From: Roy Mendelssohn - NOAA Federal
Sent: Wednesday, July 8, 2020 9:43 AM
To: Philip
Cc: r-help
Subject: Re: [R] National Weather Service Data

I would suggest looking at the NOMADS page for information on what is 
available through NOMADS:

https://nomads.ncep.noaa.gov

-Roy


> On Jul 8, 2020, at 8:19 AM, Philip <herd_dog at cox.net> wrote:
>
> Thanks again for confirming that the wgrib2 software loaded correctly.  I 
> have been making good progress finding variables related to low level 
> winds such as the HGT series that, as you know, converts millibars to 
> altitude MSL.
>
> The next step is to look at Rapid Refresh (RAP).  Can you direct me to 
> someplace that has the names of the forecast models - equivalent to 
> gfs_0p50 for the Global Forecast System?
>
> Thanks.
>
> -----Original Message----- From: Roy Mendelssohn - NOAA Federal
> Sent: Monday, July 6, 2020 6:35 PM
> To: Philip
> Subject: Re: [R] National Weather Service Data
>
> Skimming the docs seems to assume a lot of knowledge of the data.  The 
> best I can see there are two temperature variables:
>
>> tmpsfc (surface air temperature, K)
>> tmp2m (air temperature at 2m, K)
>
> and one relative humidity:
>
>> rh2m (relative humidity at 2m, %)
>
> Depending on what you are after,  you might find it easier to use the UAF 
> ERDDAP server 
> (https://upwell.pfeg.noaa.gov/erddap/griddap/ncep_global.html) and 
> 'rerddap' to get the data.  'rerddap' will read in the data into a nice 
> tibble,  I also think the documentation is clearer with some nice 
> vignettes and the ability to get info about the data.  For example the 
> command
>
>> rerddap::info('ncep_global')
>
> returns:
>
>
>> <ERDDAP info> ncep_global
>> Base URL: https://upwell.pfeg.noaa.gov/erddap/
>> Dimensions (range):
>>     time: (2011-05-06T12:00:00Z, 2020-07-08T12:00:00Z)
>>     latitude: (-90.0, 90.0)
>>     longitude: (0.0, 359.5)
>> Variables:
>>     dlwrfsfc:
>>         Units: W m-2
>>     dswrfsfc:
>>         Units: W m-2
>>     pratesfc:
>>         Units: kg m-2 s-1
>>     prmslmsl:
>>         Units: Pa
>>     rh2m:
>>         Units: %
>>     tmp2m:
>>         Units: K
>>     tmpsfc:
>>         Units: K
>>     ugrd10m:
>>         Units: m s-1
>>     vgrd10m:
>>         Units: m s-1
>
> which would have answered a lot of your questions.  If you had saved that 
> command to a variable  there would be a lot more information,  that is 
> just the summary.
>
> HTH,
>
> -Roy
>
>>
>> On Jul 6, 2020, at 5:47 PM, Philip <herd_dog at cox.net> wrote:
>>
>> Thanks for getting back to me.  It is good to know that I am on the right 
>> track.
>>
>> I understand now that the output byte location of the data in the grib2 
>> file not the actual data which in this case would be the 2 am forecast 
>> six hours into the future.  Can you advise me which of the examples in 
>> Dr. Bowman's rNOMADS documentation will get me the tem[perature and 
>> relative humidity data?
>>
>> Philip.
>>
>> -----Original Message----- From: Roy Mendelssohn - NOAA Federal
>> Sent: Monday, July 6, 2020 10:43 AM
>> To: Philip
>> Cc: stephen sefick ; r-help
>> Subject: Re: [R] National Weather Service Data
>>
>> Hi Philip:
>>
>> Results look correct to me.  This might help you:
>>
>> https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/default_inv.html
>>
>> -Roy
>>
>>
>>> On Jul 6, 2020, at 9:29 AM, Philip <herd_dog at cox.net> wrote:
>>>
>>> I am trying to access National Weather Service forecasting data through 
>>> the rNOMADS package.  I?m not sure if the Weather Service software ? 
>>> grib2 ? loaded correctly.  Second, some of the examples in the rNOMADS 
>>> documentation seem to run correctly but I?m not sure what the output 
>>> means.  Any anvise would be greatly appreciated.
>>>
>>> 1 - I tried to load the wgrib2 software from instructions in the 
>>> following website:
>>>
>>> https://bovineaerospace.wordpress.com/2015/04/26/how-to-install-rnomads-with-grib-file-support-on-windows/
>>>
>>> 2 ? the instructions say that if it loaded correctly I should get a 
>>> laundry list similar to what is below from the command: 
>>>   >system(?wgrib2?).
>>>
>>>
>>>
>>> The list I get looks different.  Below is the first 20 or so entries. 
>>> How can I check to see if the wgrib2 loaded correctly?
>>>
>>> wgrib2 v0.1.9.9 9/2013 Wesley Ebisuzaki, Reinoud Bokhorst, Jaakko 
>>> Hyv??tti, Dusan Jovic, Kristian Nilssen, Karl Pfeiffer, Pablo Romero, 
>>> Manfred Schwarb, Arlindo da Silva, Niklas Sondell, Sergey Varlamov
>>> -0xSec           inv  X      Hex dump of section X (0..8)
>>> -MM              inv         reference time MM
>>> -N_ens           inv         number of ensemble members
>>> -RT              inv         type of reference Time
>>> -S               inv         simple inventory with minutes and seconds 
>>> (subject to change)
>>> -Sec0            inv         contents of section0
>>> -Sec3            inv         contents of section 3 (Grid Definition 
>>> Section)
>>> -Sec4            inv         Sec 4 values (Product definition section)
>>> -Sec5            inv         Sec 5 values (Data representation section)
>>> -Sec6            inv         show bit-map section
>>> -Sec_len         inv         length of various grib sections
>>> -T               inv         reference time YYYYMMDDHHMMSS
>>> -V               inv         diagnostic output
>>> -VT              inv         verf time = reference_time + forecast_time 
>>> (YYYYMMDDHHMMSS)
>>> -YY              inv         reference time YYYY
>>>
>>> 3 ? As I said, some of the documentation examples work and for some I 
>>> get error messages.  Below is an example of one that seemed to work but 
>>> I don?t understand the output.
>>>
>>> #GribInfo - page 20
>>> urlsOut <- CrawlModels(abbrev="gfs_0p50",depth=2)
>>> ModelParameters <- ParseModelPage(urlsOut[2])#[1] is most recent model
>>> MyPred <- ModelParameters$pred[grep("06$",ModelParameters$pred)]
>>> Levels <- c("2_m_above_ground","800_mb")
>>> Variables <- c("TMP","RH")
>>> GribInfo <- GribGrab(urlsOut[2],MyPred,Levels,Variables)
>>> GribInv <- GribInfo(GribInfo[[1]]$file.name,"grib2")
>>>
>>> The command GribInv$inventory returns:
>>>
>>> $inventory
>>> [1] "1:0:d=2020070606:TMP:800 mb:6 hour fcst:" 
>>> "2:148450:d=2020070606:RH:800 mb:6 hour fcst:"
>>> [3] "3:414132:d=2020070606:TMP:2 m above ground:6 hour fcst:" 
>>> "4:571266:d=2020070606:RH:2 m above ground:6 hour fcst:"
>>>
>>> This is supposed to be temperature and relative humidity 2 meters above 
>>> the ground and at 800 milibars for 2020 ? July 6 ? at ZULU time 0600. 
>>> But I have no idea what the numbers 414132 ? second line ? mean.
>>>
>>> Any advise would be greatly appreciated.
>>>
>>> Philip Heinrich
>>>
>>> From: stephen sefick
>>> Sent: Thursday, July 2, 2020 3:20 PM
>>> To: Philip
>>> Cc: r-help
>>> Subject: Re: [R] National Weather Service Data
>>>
>>> I am unfamiliar with Rnomads. Could you provide a minimal reproducable 
>>> example? You are more likely to receive help this way.
>>>
>>>
>>> On Thu, Jul 2, 2020, 18:06 Philip <herd_dog at cox.net> wrote:
>>>
>>> Is anyone out there familiar with rNOMADS?  It is a package to get into 
>>> National Weather Service forecasting data with R?
>>>
>>> I'm not sure the Weather Service software named wgrib2 loaded correctly 
>>> because some of the stuff won't run and I can't make much sense out of 
>>> some of the output.
>>>
>>> Thanks.
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> **********************
>> "The contents of this message do not reflect any position of the U.S. 
>> Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>>
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK 
>> Jr.
>>
>
> **********************
> "The contents of this message do not reflect any position of the U.S. 
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK 
> Jr.
>

**********************
"The contents of this message do not reflect any position of the U.S. 
Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected"
"the arc of the moral universe is long, but it bends toward justice" -MLK 
Jr.


From o@@m@78he|ny @end|ng |rom gm@||@com  Wed Jul  8 10:04:16 2020
From: o@@m@78he|ny @end|ng |rom gm@||@com (Osama Mostafa)
Date: Wed, 8 Jul 2020 10:04:16 +0200
Subject: [R] Estimate garch model by GMM
Message-ID: <CAFeRt_evH=bUuojkgjt=pEJm5a-2GEdqQ-r7AgdeVz-_BENs9w@mail.gmail.com>

Dear Professors



Hope this e-mail find you well. I am currently doing my Masters in
statistics and econometrics and my thesis is about the Properties and
Estimation of Garch Models and their applications I need to know if it is
to possible to estimate Garch model by Generalized Method of Moments
<http://cameron.econ.ucdavis.edu/mmabook/transparencies/ct06_gmm.pdf>

 (GMM) method using R . and If it possible I need a example of it by coding



My sincere regards,

ossama

	[[alternative HTML version deleted]]


From M@Roo@ @end|ng |rom |1-out@ourc|ng@eu  Wed Jul  8 20:31:10 2020
From: M@Roo@ @end|ng |rom |1-out@ourc|ng@eu (Marc Roos)
Date: Wed, 8 Jul 2020 20:31:10 +0200
Subject: [R] output from R to simple html
Message-ID: <"H000007100174024.1594233070.sx.f1-outsourcing.eu*"@MHS>



I would like to parse some input to an R script and use its result 
output (maybe in json) on a web page. I think this shiny framework is a 
bit over kill. What is the simplest to implement this? 


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jul  8 21:56:36 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 8 Jul 2020 12:56:36 -0700
Subject: [R] output from R to simple html
In-Reply-To: <H000007100174024.1594233070.sx.f1-outsourcing.eu*@MHS>
References: <H000007100174024.1594233070.sx.f1-outsourcing.eu*@MHS>
Message-ID: <CAGxFJbT+P4UOtMwhuJD4VB5WmHJbOB4AOuPJL3jcdkb_+w0rfQ@mail.gmail.com>

This might be helpful:

https://cran.r-project.org/web/views/WebTechnologies.html

Cheers,
Bert

On Wed, Jul 8, 2020 at 12:02 PM Marc Roos <M.Roos at f1-outsourcing.eu> wrote:

>
>
> I would like to parse some input to an R script and use its result
> output (maybe in json) on a web page. I think this shiny framework is a
> bit over kill. What is the simplest to implement this?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @@r@h@go@|ee @end|ng |rom gm@||@com  Wed Jul  8 22:00:04 2020
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Wed, 8 Jul 2020 16:00:04 -0400
Subject: [R] Estimate garch model by GMM
In-Reply-To: <CAFeRt_evH=bUuojkgjt=pEJm5a-2GEdqQ-r7AgdeVz-_BENs9w@mail.gmail.com>
References: <CAFeRt_evH=bUuojkgjt=pEJm5a-2GEdqQ-r7AgdeVz-_BENs9w@mail.gmail.com>
Message-ID: <CAM_vjuksrFk0Z95ChEL43eP2EwtvmYeWb+JNnZpRG_EaAQDVow@mail.gmail.com>

Hi,

The very useful search engine rseek.org lists a lot of packages,
functions, and tutorials for Garch modeling in R. Perhaps some of
those meet your requirements.

Sarah

On Wed, Jul 8, 2020 at 3:02 PM Osama Mostafa <osama78hefny at gmail.com> wrote:
>
> Dear Professors
>
>
>
> Hope this e-mail find you well. I am currently doing my Masters in
> statistics and econometrics and my thesis is about the Properties and
> Estimation of Garch Models and their applications I need to know if it is
> to possible to estimate Garch model by Generalized Method of Moments
> <http://cameron.econ.ucdavis.edu/mmabook/transparencies/ct06_gmm.pdf>
>
>  (GMM) method using R . and If it possible I need a example of it by coding
>
>
>
> My sincere regards,
>
> ossama
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jul  8 22:06:59 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 8 Jul 2020 13:06:59 -0700
Subject: [R] Estimate garch model by GMM
In-Reply-To: <CAFeRt_evH=bUuojkgjt=pEJm5a-2GEdqQ-r7AgdeVz-_BENs9w@mail.gmail.com>
References: <CAFeRt_evH=bUuojkgjt=pEJm5a-2GEdqQ-r7AgdeVz-_BENs9w@mail.gmail.com>
Message-ID: <CAGxFJbTb8ZPDiijdt6KCP8XnbRY7C5MdWo0b=Ps5_Ym-QC0UAQ@mail.gmail.com>

Well, as a first suggestion, you should improve your research skills before
posting here: A web search on "garch models in R" came up with what looked
like many useful hits (including rugarch).

See also the GARCH section of the CRAN Time Series CRAN task view

https://CRAN.R-project.org/view=TimeSeries

Also read the posting guide for this list linked below to learn how to post
properly (for example, post in plain text, not HTML, which can get mangled).

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jul 8, 2020 at 12:02 PM Osama Mostafa <osama78hefny at gmail.com>
wrote:

> Dear Professors
>
>
>
> Hope this e-mail find you well. I am currently doing my Masters in
> statistics and econometrics and my thesis is about the Properties and
> Estimation of Garch Models and their applications I need to know if it is
> to possible to estimate Garch model by Generalized Method of Moments
> <http://cameron.econ.ucdavis.edu/mmabook/transparencies/ct06_gmm.pdf>
>
>  (GMM) method using R . and If it possible I need a example of it by coding
>
>
>
> My sincere regards,
>
> ossama
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jmh@nnon@ucd@v|@ @end|ng |rom gm@||@com  Thu Jul  9 01:19:37 2020
From: jmh@nnon@ucd@v|@ @end|ng |rom gm@||@com (Michael Hannon)
Date: Wed, 8 Jul 2020 16:19:37 -0700
Subject: [R] output from R to simple html
In-Reply-To: <H000007100174024.1594233070.sx.f1-outsourcing.eu*@MHS>
References: <H000007100174024.1594233070.sx.f1-outsourcing.eu*@MHS>
Message-ID: <CACdH2Za9sgDXbiRN-g-7-yyHb5uNRMgLsNkLBWDnwgN3H3injQ@mail.gmail.com>

I can't tell what kind of structure you want to output, but one simple
thing that I've done along these lines is to use knitr::kable to
output a dataframe in either HTML or LaTeX format (for direct
inclusion on a web page or to convert to PDF for other uses).

-- Mike

On Wed, Jul 8, 2020 at 12:02 PM Marc Roos <M.Roos at f1-outsourcing.eu> wrote:
>
>
>
> I would like to parse some input to an R script and use its result
> output (maybe in json) on a web page. I think this shiny framework is a
> bit over kill. What is the simplest to implement this?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jul  9 02:15:24 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 08 Jul 2020 17:15:24 -0700
Subject: [R] output from R to simple html
In-Reply-To: <CACdH2Za9sgDXbiRN-g-7-yyHb5uNRMgLsNkLBWDnwgN3H3injQ@mail.gmail.com>
References: <H000007100174024.1594233070.sx.f1-outsourcing.eu*@MHS>
 <CACdH2Za9sgDXbiRN-g-7-yyHb5uNRMgLsNkLBWDnwgN3H3injQ@mail.gmail.com>
Message-ID: <798D1833-80F0-485E-AAE4-85122DD03C3A@dcn.davis.ca.us>

Perhaps an answer as simple as using the rmarkdown package to generate a standalone html file is all the OP needs?

On July 8, 2020 4:19:37 PM PDT, Michael Hannon <jmhannon.ucdavis at gmail.com> wrote:
>I can't tell what kind of structure you want to output, but one simple
>thing that I've done along these lines is to use knitr::kable to
>output a dataframe in either HTML or LaTeX format (for direct
>inclusion on a web page or to convert to PDF for other uses).
>
>-- Mike
>
>On Wed, Jul 8, 2020 at 12:02 PM Marc Roos <M.Roos at f1-outsourcing.eu>
>wrote:
>>
>>
>>
>> I would like to parse some input to an R script and use its result
>> output (maybe in json) on a web page. I think this shiny framework is
>a
>> bit over kill. What is the simplest to implement this?
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @c|@bo|@zz@ @end|ng |rom gm@||@com  Thu Jul  9 12:09:01 2020
From: @c|@bo|@zz@ @end|ng |rom gm@||@com (Valerio Leone Sciabolazza)
Date: Thu, 9 Jul 2020 12:09:01 +0200
Subject: [R] Fixed effects regression constant (intercept) using lfe::felm
Message-ID: <CABZtLWy2XfOouj13iLS8-F8stqvgyFL6odO+NhdcSNSM=i9gYA@mail.gmail.com>

Dear list users,
When calculating a panel data regression with multiple fixed effects
using the function felm() from the lfe package, no constant term (i.e.
intercept) is generated in the summary results.

In an old post on stackoverflow [1], someone suggested that it is
possible to retrieve the value of the intercept by using the function
lfe::getfe, setting the field "ef" equal to "zm2".

However, I get different results when comparing the value of the
intercept calculated by the function lm, with that obtained with the
function lfe::getfe.

Here's a reproducible example:

library(lfe)

# set seed for reproducible example
set.seed(123)

## generate independent variables
x <- rnorm(4000)
x2 <- rnorm(length(x))

## create individual and firm ids
id <- factor(sample(500,length(x),replace=TRUE))
firm <- factor(sample(300,length(x),replace=TRUE))

## generate dependent variable
id.eff <- rlnorm(nlevels(id))
firm.eff <- rexp(nlevels(firm))
y <- x + 0.25*x2 + id.eff[id] + firm.eff[firm] + rnorm(length(x))

## estimate results
est <- felm(y ~ x + x2 | id + firm)
est2 <- lm(y ~ x + x2 + id + firm)

## Compare estimates
coef(est)
#         x        x2
# 1.017696 0.246784
coef(est2)[2:3]
#         x        x2
# 1.017696 0.246784

# estimate fixed effects
fe_est <- getfe(est, ef = "zm2")

## Compare intercept
fe_est[grepl("icpt", rownames(fe_est)), ]
#          effect  obs comp
# icpt.1 2.583704 4000    1
coef(est2)[1]
# (Intercept)
#   7.312307

I am wondering if anyone can explain this difference.
Also, I would like to know if it is possible to obtain a reliable
approximation of the value of the intercept estimated by lm using
lfe::getfe.

Best,
Valerio

P.s.Observe that 3 weeks ago I have posted this question on
stackoverflow [2] but no one answered.

[1] https://stackoverflow.com/questions/49351201/fixed-effects-regression-constant-intercept-using-lfe-felm-in-r
[2] https://stackoverflow.com/questions/62497705/estimate-of-constant-term-using-r-felmlfe-package-and-differences-with-stats

Valerio Leone Sciabolazza, Ph.D.
Department of Business and Economics
University of Naples, Parthenope.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Jul  9 14:59:12 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 9 Jul 2020 14:59:12 +0200
Subject: [R] plot shows exponential values incompatible with data
Message-ID: <CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>

Hello,
I have these vectors:
```
X <- 1:7
Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
213484643920, 580311678200)
plot(Y~X)
```
The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
axis does not start at 1e9?



-- 
Best regards,
Luigi


From mp @end|ng |rom bodk@n@net  Wed Jul  8 21:52:36 2020
From: mp @end|ng |rom bodk@n@net (Martin Petr)
Date: Wed, 8 Jul 2020 21:52:36 +0200
Subject: [R] [R-pkgs] admixr: An Interface for Running 'ADMIXTOOLS' Analyses
Message-ID: <CADwGh-7j9nYgr0xV6xOdB-6heHgAaBELiL6GhSm2AQ1qY_A9Vw@mail.gmail.com>

Dear R users,

I would like to introduce my R package, admixr, which provides an interface
for performing population genetic analyses using the ADMIXTOOLS suite of
command-line utilities: https://cran.r-project.org/package=admixr.

ADMIXTOOLS (https://www.genetics.org/content/192/3/1065) is a very popular
software in population genetics. However, because each of its command-line
programs requires configuration files specific to each analysis, it is very
cumbersome to use.

The admixr package wraps around ADMIXTOOLS utilities and presents them as
if they were simple R functions. It achieves this by creating all
intermediate files needed by ADMIXTOOLS and extracting relevant statistics
from generated output files, which all happens under the hood.

Extended tutorial and overview of the package can be found at:
https://bodkan.net/admixr/articles/tutorial.html
Any feedback is welcome at: https://github.com/bodkan/admixr/issues

Best regards,
Martin Petr

-- 
www.bodkan.net

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From j|ox @end|ng |rom mcm@@ter@c@  Thu Jul  9 15:44:50 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Thu, 9 Jul 2020 13:44:50 +0000
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <388_1594299576_069CxaRX020258_CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
References: <388_1594299576_069CxaRX020258_CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
Message-ID: <6C8E6124-E43F-4687-A858-FF263923F931@mcmaster.ca>

Dear Luigi,

> On Jul 9, 2020, at 8:59 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> 
> Hello,
> I have these vectors:
> ```
> X <- 1:7
> Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
> 213484643920, 580311678200)
> plot(Y~X)
> ```
> The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
> axis does not start at 1e9?

Because you're plotting on a linear, not log, scale, and 0*10^11 = 0. 

> round(Y/1e11)
[1] 0 0 0 0 1 2 6

Then try plot(log(Y) ~ X).

I hope this helps,
 John

  -----------------------------
  John Fox, Professor Emeritus
  McMaster University
  Hamilton, Ontario, Canada
  Web: http::/socserv.mcmaster.ca/jfox
> 
> 
> 
> -- 
> Best regards,
> Luigi
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Jul  9 15:59:16 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 9 Jul 2020 15:59:16 +0200
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <6C8E6124-E43F-4687-A858-FF263923F931@mcmaster.ca>
References: <388_1594299576_069CxaRX020258_CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
 <6C8E6124-E43F-4687-A858-FF263923F931@mcmaster.ca>
Message-ID: <CAMk+s2Q9L_W_A_PUkftAf6brO64Dmd3T=kPOmd__p5i5Zh0Qpg@mail.gmail.com>

Thank you,
but why it does not work in linear? With the log scale, I know it
works but I am not looking for it; is there a way to force a linear
scale?
Regards
Luigi

On Thu, Jul 9, 2020 at 3:44 PM Fox, John <jfox at mcmaster.ca> wrote:
>
> Dear Luigi,
>
> > On Jul 9, 2020, at 8:59 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> >
> > Hello,
> > I have these vectors:
> > ```
> > X <- 1:7
> > Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
> > 213484643920, 580311678200)
> > plot(Y~X)
> > ```
> > The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
> > axis does not start at 1e9?
>
> Because you're plotting on a linear, not log, scale, and 0*10^11 = 0.
>
> > round(Y/1e11)
> [1] 0 0 0 0 1 2 6
>
> Then try plot(log(Y) ~ X).
>
> I hope this helps,
>  John
>
>   -----------------------------
>   John Fox, Professor Emeritus
>   McMaster University
>   Hamilton, Ontario, Canada
>   Web: http::/socserv.mcmaster.ca/jfox
> >
> >
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Best regards,
Luigi


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jul  9 16:15:05 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 9 Jul 2020 07:15:05 -0700
Subject: [R] 
 Fixed effects regression constant (intercept) using lfe::felm
In-Reply-To: <CABZtLWy2XfOouj13iLS8-F8stqvgyFL6odO+NhdcSNSM=i9gYA@mail.gmail.com>
References: <CABZtLWy2XfOouj13iLS8-F8stqvgyFL6odO+NhdcSNSM=i9gYA@mail.gmail.com>
Message-ID: <CAGxFJbTEy1YN3G16rwohwiqw5H2K9KN9paNfrUOiR6x+4c4pFA@mail.gmail.com>

While you may get lucky here, your experience on SO indicates that you may
do better by contacting the package maintainer (?maintainer) and asking
him/her to refer you to appropriate references, as this sounds like a
statistical methodology query.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 9, 2020 at 3:09 AM Valerio Leone Sciabolazza <
sciabolazza at gmail.com> wrote:

> Dear list users,
> When calculating a panel data regression with multiple fixed effects
> using the function felm() from the lfe package, no constant term (i.e.
> intercept) is generated in the summary results.
>
> In an old post on stackoverflow [1], someone suggested that it is
> possible to retrieve the value of the intercept by using the function
> lfe::getfe, setting the field "ef" equal to "zm2".
>
> However, I get different results when comparing the value of the
> intercept calculated by the function lm, with that obtained with the
> function lfe::getfe.
>
> Here's a reproducible example:
>
> library(lfe)
>
> # set seed for reproducible example
> set.seed(123)
>
> ## generate independent variables
> x <- rnorm(4000)
> x2 <- rnorm(length(x))
>
> ## create individual and firm ids
> id <- factor(sample(500,length(x),replace=TRUE))
> firm <- factor(sample(300,length(x),replace=TRUE))
>
> ## generate dependent variable
> id.eff <- rlnorm(nlevels(id))
> firm.eff <- rexp(nlevels(firm))
> y <- x + 0.25*x2 + id.eff[id] + firm.eff[firm] + rnorm(length(x))
>
> ## estimate results
> est <- felm(y ~ x + x2 | id + firm)
> est2 <- lm(y ~ x + x2 + id + firm)
>
> ## Compare estimates
> coef(est)
> #         x        x2
> # 1.017696 0.246784
> coef(est2)[2:3]
> #         x        x2
> # 1.017696 0.246784
>
> # estimate fixed effects
> fe_est <- getfe(est, ef = "zm2")
>
> ## Compare intercept
> fe_est[grepl("icpt", rownames(fe_est)), ]
> #          effect  obs comp
> # icpt.1 2.583704 4000    1
> coef(est2)[1]
> # (Intercept)
> #   7.312307
>
> I am wondering if anyone can explain this difference.
> Also, I would like to know if it is possible to obtain a reliable
> approximation of the value of the intercept estimated by lm using
> lfe::getfe.
>
> Best,
> Valerio
>
> P.s.Observe that 3 weeks ago I have posted this question on
> stackoverflow [2] but no one answered.
>
> [1]
> https://stackoverflow.com/questions/49351201/fixed-effects-regression-constant-intercept-using-lfe-felm-in-r
> [2]
> https://stackoverflow.com/questions/62497705/estimate-of-constant-term-using-r-felmlfe-package-and-differences-with-stats
>
> Valerio Leone Sciabolazza, Ph.D.
> Department of Business and Economics
> University of Naples, Parthenope.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Thu Jul  9 16:16:32 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Thu, 9 Jul 2020 14:16:32 +0000
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <23963_1594303516_069E5FWM005320_CAMk+s2Q9L_W_A_PUkftAf6brO64Dmd3T=kPOmd__p5i5Zh0Qpg@mail.gmail.com>
References: <388_1594299576_069CxaRX020258_CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
 <6C8E6124-E43F-4687-A858-FF263923F931@mcmaster.ca>
 <23963_1594303516_069E5FWM005320_CAMk+s2Q9L_W_A_PUkftAf6brO64Dmd3T=kPOmd__p5i5Zh0Qpg@mail.gmail.com>
Message-ID: <C35200DE-1145-43C4-85BA-3C8D10C4B16F@mcmaster.ca>

Dear Luigi,

> On Jul 9, 2020, at 9:59 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> 
> Thank you,
> but why it does not work in linear? With the log scale, I know it
> works but I am not looking for it; is there a way to force a linear
> scale?

The scale *is* linear and the choice of tick marks, which are evenly spaced, is reasonable, given that 10^9 is 2 orders of magnitude smaller than 10^11. That is, on a linear scale with this range, 10^9 isn't much larger than 0.

If you really want a tick at 10^9, then you can just put one there:

plot(Y~X, axes=FALSE, frame=TRUE)
axis(1)
axis(2, at=c(1e9, (1:6)*1e11))

But now the ticks aren't evenly spaced (though they appear to be because, as I mentioned, 10^9 is "close" to 0).

Best,
 John

> Regards
> Luigi
> 
> On Thu, Jul 9, 2020 at 3:44 PM Fox, John <jfox at mcmaster.ca> wrote:
>> 
>> Dear Luigi,
>> 
>>> On Jul 9, 2020, at 8:59 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>>> 
>>> Hello,
>>> I have these vectors:
>>> ```
>>> X <- 1:7
>>> Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
>>> 213484643920, 580311678200)
>>> plot(Y~X)
>>> ```
>>> The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
>>> axis does not start at 1e9?
>> 
>> Because you're plotting on a linear, not log, scale, and 0*10^11 = 0.
>> 
>>> round(Y/1e11)
>> [1] 0 0 0 0 1 2 6
>> 
>> Then try plot(log(Y) ~ X).
>> 
>> I hope this helps,
>> John
>> 
>>  -----------------------------
>>  John Fox, Professor Emeritus
>>  McMaster University
>>  Hamilton, Ontario, Canada
>>  Web: http::/socserv.mcmaster.ca/jfox
>>> 
>>> 
>>> 
>>> --
>>> Best regards,
>>> Luigi
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> 
> -- 
> Best regards,
> Luigi
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jul  9 16:22:25 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 9 Jul 2020 07:22:25 -0700
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
References: <CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
Message-ID: <CAGxFJbTzvxarSmT4hwhZZ6P6T7sguhX6A+DUVygWKXKw_x0Kkw@mail.gmail.com>

Please consult ?axis and follow its links (e.g. "axTicks" and "pretty") for
the details of the algorithm used to construct axis annotation.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 9, 2020 at 5:59 AM Luigi Marongiu <marongiu.luigi at gmail.com>
wrote:

> Hello,
> I have these vectors:
> ```
> X <- 1:7
> Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
> 213484643920, 580311678200)
> plot(Y~X)
> ```
> The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
> axis does not start at 1e9?
>
>
>
> --
> Best regards,
> Luigi
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mcg@rvey@bern@rd @end|ng |rom comc@@t@net  Thu Jul  9 16:25:32 2020
From: mcg@rvey@bern@rd @end|ng |rom comc@@t@net (Bernard Comcast)
Date: Thu, 9 Jul 2020 10:25:32 -0400
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <CAMk+s2Q9L_W_A_PUkftAf6brO64Dmd3T=kPOmd__p5i5Zh0Qpg@mail.gmail.com>
References: <CAMk+s2Q9L_W_A_PUkftAf6brO64Dmd3T=kPOmd__p5i5Zh0Qpg@mail.gmail.com>
Message-ID: <D0C790CE-CF2F-4C9E-9974-B6B5D6D1D6A2@comcast.net>

Use the xlim option in the plot function?

Bernard
Sent from my iPhone so please excuse the spelling!"

> On Jul 9, 2020, at 10:06 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> 
> ?Thank you,
> but why it does not work in linear? With the log scale, I know it
> works but I am not looking for it; is there a way to force a linear
> scale?
> Regards
> Luigi
> 
>> On Thu, Jul 9, 2020 at 3:44 PM Fox, John <jfox at mcmaster.ca> wrote:
>> 
>> Dear Luigi,
>> 
>>>> On Jul 9, 2020, at 8:59 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>>> 
>>> Hello,
>>> I have these vectors:
>>> ```
>>> X <- 1:7
>>> Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
>>> 213484643920, 580311678200)
>>> plot(Y~X)
>>> ```
>>> The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
>>> axis does not start at 1e9?
>> 
>> Because you're plotting on a linear, not log, scale, and 0*10^11 = 0.
>> 
>>> round(Y/1e11)
>> [1] 0 0 0 0 1 2 6
>> 
>> Then try plot(log(Y) ~ X).
>> 
>> I hope this helps,
>> John
>> 
>>  -----------------------------
>>  John Fox, Professor Emeritus
>>  McMaster University
>>  Hamilton, Ontario, Canada
>>  Web: http::/socserv.mcmaster.ca/jfox
>>> 
>>> 
>>> 
>>> --
>>> Best regards,
>>> Luigi
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> 
> -- 
> Best regards,
> Luigi
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Jul  9 17:24:41 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 9 Jul 2020 16:24:41 +0100
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <CAMk+s2Q9L_W_A_PUkftAf6brO64Dmd3T=kPOmd__p5i5Zh0Qpg@mail.gmail.com>
References: <388_1594299576_069CxaRX020258_CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
 <6C8E6124-E43F-4687-A858-FF263923F931@mcmaster.ca>
 <CAMk+s2Q9L_W_A_PUkftAf6brO64Dmd3T=kPOmd__p5i5Zh0Qpg@mail.gmail.com>
Message-ID: <baee6a81-5889-877f-babd-fc2d9a3ada4b@sapo.pt>

Hello,

Like this?

plot(Y~X, log="y")



Hope this helps,

Rui Barradas

?s 14:59 de 09/07/20, Luigi Marongiu escreveu:
> Thank you,
> but why it does not work in linear? With the log scale, I know it
> works but I am not looking for it; is there a way to force a linear
> scale?
> Regards
> Luigi
> 
> On Thu, Jul 9, 2020 at 3:44 PM Fox, John <jfox at mcmaster.ca> wrote:
>>
>> Dear Luigi,
>>
>>> On Jul 9, 2020, at 8:59 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>>>
>>> Hello,
>>> I have these vectors:
>>> ```
>>> X <- 1:7
>>> Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
>>> 213484643920, 580311678200)
>>> plot(Y~X)
>>> ```
>>> The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
>>> axis does not start at 1e9?
>>
>> Because you're plotting on a linear, not log, scale, and 0*10^11 = 0.
>>
>>> round(Y/1e11)
>> [1] 0 0 0 0 1 2 6
>>
>> Then try plot(log(Y) ~ X).
>>
>> I hope this helps,
>>   John
>>
>>    -----------------------------
>>    John Fox, Professor Emeritus
>>    McMaster University
>>    Hamilton, Ontario, Canada
>>    Web: http::/socserv.mcmaster.ca/jfox
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Luigi
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
>


From j|ox @end|ng |rom mcm@@ter@c@  Thu Jul  9 17:36:49 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Thu, 9 Jul 2020 15:36:49 +0000
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <6387_1594305931_069EjSJW008001_D0C790CE-CF2F-4C9E-9974-B6B5D6D1D6A2@comcast.net>
References: <CAMk+s2Q9L_W_A_PUkftAf6brO64Dmd3T=kPOmd__p5i5Zh0Qpg@mail.gmail.com>
 <6387_1594305931_069EjSJW008001_D0C790CE-CF2F-4C9E-9974-B6B5D6D1D6A2@comcast.net>
Message-ID: <BA90CF8B-81E9-4414-93F4-04D9838DA41B@mcmaster.ca>

Dear Bernard,

> On Jul 9, 2020, at 10:25 AM, Bernard Comcast <mcgarvey.bernard at comcast.net> wrote:
> 
> Use the xlim option in the plot function?

I think you mean ylim, but as you'll find out when you try it, you still (reasonably) get an evenly spaced tick mark at 0:

plot(Y ~ X, ylim=c(1e9, 6e11))

The "right" thing to do with exponential values is to plot on a log scale or (as Rui reasonably suggested) use a logged axis.

Best,
 John

> 
> Bernard
> Sent from my iPhone so please excuse the spelling!"
> 
>> On Jul 9, 2020, at 10:06 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>> 
>> ?Thank you,
>> but why it does not work in linear? With the log scale, I know it
>> works but I am not looking for it; is there a way to force a linear
>> scale?
>> Regards
>> Luigi
>> 
>>> On Thu, Jul 9, 2020 at 3:44 PM Fox, John <jfox at mcmaster.ca> wrote:
>>> 
>>> Dear Luigi,
>>> 
>>>>> On Jul 9, 2020, at 8:59 AM, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>>>> 
>>>> Hello,
>>>> I have these vectors:
>>>> ```
>>>> X <- 1:7
>>>> Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
>>>> 213484643920, 580311678200)
>>>> plot(Y~X)
>>>> ```
>>>> The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
>>>> axis does not start at 1e9?
>>> 
>>> Because you're plotting on a linear, not log, scale, and 0*10^11 = 0.
>>> 
>>>> round(Y/1e11)
>>> [1] 0 0 0 0 1 2 6
>>> 
>>> Then try plot(log(Y) ~ X).
>>> 
>>> I hope this helps,
>>> John
>>> 
>>> -----------------------------
>>> John Fox, Professor Emeritus
>>> McMaster University
>>> Hamilton, Ontario, Canada
>>> Web: http::/socserv.mcmaster.ca/jfox
>>>> 
>>>> 
>>>> 
>>>> --
>>>> Best regards,
>>>> Luigi
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>> 
>> 
>> -- 
>> Best regards,
>> Luigi
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Thu Jul  9 18:44:10 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 9 Jul 2020 18:44:10 +0200
Subject: [R] 
 Fixed effects regression constant (intercept) using lfe::felm
In-Reply-To: <CAGxFJbTEy1YN3G16rwohwiqw5H2K9KN9paNfrUOiR6x+4c4pFA@mail.gmail.com>
References: <CABZtLWy2XfOouj13iLS8-F8stqvgyFL6odO+NhdcSNSM=i9gYA@mail.gmail.com>
 <CAGxFJbTEy1YN3G16rwohwiqw5H2K9KN9paNfrUOiR6x+4c4pFA@mail.gmail.com>
Message-ID: <20200709164410.GB47330@posteo.no>

On 2020-07-09 07:15 -0700, Bert Gunter wrote:
> On Thu, Jul 9, 2020 at 3:09 AM Valerio Leone Sciabolazza <sciabolazza at gmail.com> wrote:
> > 
> > When calculating a panel data 
> > regression with multiple fixed 
> > effects using the function felm() 
> > from the lfe package, no constant 
> > term (i.e.  intercept) is generated 
> > in the summary results.
> >
> > Also, I would like to know if it is 
> > possible to obtain a reliable 
> > approximation of the value of the 
> > intercept estimated by lm using 
> > lfe::getfe.
> 
> you may do better by contacting the 
> package maintainer (?maintainer) and 
> asking him/her to refer you to 
> appropriate references, as this sounds 
> like a statistical methodology query.

Valerio,

these are such interesting questions.  

Rememeber to post a follow-up of your 
findings here and on SO if you are able 
to solve this.

V

r

-- 
 _________________________________________
/ Difficulty                              \
|                                         |
| Practice no-action; Attend to           |
| do-nothing; Taste the flavorless,       |
| Magnify the small, Multiply the few,    |
| Return love for hate. Deal with the     |
| difficult while it is yet easy; Deal    |
| with the great while it is yet small;   |
| The difficult develops naturally from   |
| the easy, And the great from the small; |
| So the sage, by dealing with the small, |
| Achieves the great. Who finds it easy   |
| to promise finds it hard to be trusted; |
| Who takes things lightly finds things   |
| difficult; The sage recognizes          |
| difficulty, and so has none.            |
|                                         |
\ -- Lao Tse, "Tao Te Ching"              /
 -----------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200709/4bab4da5/attachment.sig>

From drj|m|emon @end|ng |rom gm@||@com  Fri Jul 10 06:08:10 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 10 Jul 2020 14:08:10 +1000
Subject: [R] output from R to simple html
In-Reply-To: <H000007100174024.1594233070.sx.f1-outsourcing.eu*@MHS>
References: <H000007100174024.1594233070.sx.f1-outsourcing.eu*@MHS>
Message-ID: <CA+8X3fUk2EqMfLXJuV_0bx=ns8A935bS1mQTXugU5wTTUHT9Nw@mail.gmail.com>

Hi Marc,
The "htmlize" function in the prettyR package might be what you are looking for.

Jim

On Thu, Jul 9, 2020 at 5:02 AM Marc Roos <M.Roos at f1-outsourcing.eu> wrote:
>
>
>
> I would like to parse some input to an R script and use its result
> output (maybe in json) on a web page. I think this shiny framework is a
> bit over kill. What is the simplest to implement this?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Fri Jul 10 06:13:52 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 10 Jul 2020 14:13:52 +1000
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
References: <CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
Message-ID: <CA+8X3fUhT90h-cF62gKr=O_PGaXThyWGFkDtDA4hH3ONS8kxew@mail.gmail.com>

Hi Luigi,
This is a result of the "pretty" function that calculates hopefully
good looking axis ticks automatically. You can always specify
ylim=c(1.0E09,max(Y)) if you want.

Jim

On Thu, Jul 9, 2020 at 10:59 PM Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> Hello,
> I have these vectors:
> ```
> X <- 1:7
> Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
> 213484643920, 580311678200)
> plot(Y~X)
> ```
> The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
> axis does not start at 1e9?
>
>
>
> --
> Best regards,
> Luigi
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Jul 10 08:59:27 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 10 Jul 2020 08:59:27 +0200
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <CA+8X3fUhT90h-cF62gKr=O_PGaXThyWGFkDtDA4hH3ONS8kxew@mail.gmail.com>
References: <CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
 <CA+8X3fUhT90h-cF62gKr=O_PGaXThyWGFkDtDA4hH3ONS8kxew@mail.gmail.com>
Message-ID: <CAMk+s2RppuqqtLdZxQgtAgdBf9zxFN5YyrrMu7-FdCijwki_zw@mail.gmail.com>

Thank you!
I reckon the main problem is the large data range, anyway. I should
stick with logarithmic scales...
Best regards
Luigi

On Fri, Jul 10, 2020 at 6:14 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Luigi,
> This is a result of the "pretty" function that calculates hopefully
> good looking axis ticks automatically. You can always specify
> ylim=c(1.0E09,max(Y)) if you want.
>
> Jim
>
> On Thu, Jul 9, 2020 at 10:59 PM Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> >
> > Hello,
> > I have these vectors:
> > ```
> > X <- 1:7
> > Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
> > 213484643920, 580311678200)
> > plot(Y~X)
> > ```
> > The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
> > axis does not start at 1e9?
> >
> >
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From j|ox @end|ng |rom mcm@@ter@c@  Fri Jul 10 14:58:32 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Fri, 10 Jul 2020 12:58:32 +0000
Subject: [R] plot shows exponential values incompatible with data
In-Reply-To: <7296_1594354722_06A4IfgI016223_CA+8X3fUhT90h-cF62gKr=O_PGaXThyWGFkDtDA4hH3ONS8kxew@mail.gmail.com>
References: <CAMk+s2QU_DoVmc62L499CBNQ5BEX5qrDeeV=U+WpM7uteMU45g@mail.gmail.com>
 <7296_1594354722_06A4IfgI016223_CA+8X3fUhT90h-cF62gKr=O_PGaXThyWGFkDtDA4hH3ONS8kxew@mail.gmail.com>
Message-ID: <E7FECA58-5955-4A24-AE88-37409F84903B@mcmaster.ca>

Dear Jim,

As I pointed out yesterday, setting ylim as you suggest still results in "0e+00" as the smallest tick mark, as it should for evenly spaced ticks. 

Best,
 John

> On Jul 10, 2020, at 12:13 AM, Jim Lemon <drjimlemon at gmail.com> wrote:
> 
> Hi Luigi,
> This is a result of the "pretty" function that calculates hopefully
> good looking axis ticks automatically. You can always specify
> ylim=c(1.0E09,max(Y)) if you want.
> 
> Jim
> 
> On Thu, Jul 9, 2020 at 10:59 PM Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>> 
>> Hello,
>> I have these vectors:
>> ```
>> X <- 1:7
>> Y <- c(1438443863, 3910100650, 10628760108, 28891979048, 78536576706,
>> 213484643920, 580311678200)
>> plot(Y~X)
>> ```
>> The y-axis starts at 0e0, but the first value is 1.4 billion. Why the
>> axis does not start at 1e9?
>> 
>> 
>> 
>> --
>> Best regards,
>> Luigi
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From d@n|e||obo1990 @end|ng |rom y@hoo@com  Fri Jul 10 13:36:13 2020
From: d@n|e||obo1990 @end|ng |rom y@hoo@com (Arun Kumar Saha)
Date: Fri, 10 Jul 2020 11:36:13 +0000 (UTC)
Subject: [R] Bivariate ReLU Distribution
References: <1398793978.9432149.1594380973005.ref@mail.yahoo.com>
Message-ID: <1398793978.9432149.1594380973005@mail.yahoo.com>

Hi,
I would rather have a Statistics related question hope experts here can provide some suggestions. I have posted this request in some other forum but failed to generate meaningful response
I am looking for some technical document on deriving the Distribution function for sum of 2?ReLU(?)=max{0,?} distributions i.e?max{0,?1} +?max{0,?2} where X1 and X2 jointly follow some bivariate Nomal distribution.
There are few technical notes available for univariate?ReLU distribution, however I failed to find any spec for bivariate/multivariate setup.
Any pointer on above subject will be highly helpful.
	[[alternative HTML version deleted]]


From p@u||n@@@ko| @end|ng |rom hotm@||@com  Fri Jul 10 15:32:36 2020
From: p@u||n@@@ko| @end|ng |rom hotm@||@com (Paulina Skolasinska)
Date: Fri, 10 Jul 2020 13:32:36 +0000
Subject: [R] How to differ stats_cor labels by group on a ggplot
Message-ID: <SN2PR03MB2190BDE30A1C31CDE2518B4494650@SN2PR03MB2190.namprd03.prod.outlook.com>

'm using ggplot2 to plot two variables at a time. I'm plotting two age groups and overall data on the same graph. I'm also using stat_cor form the ggpubr package to report correlations for the two groups and overall data.

I want each stat_cor label to have a custom subscript - the group name ("old", "young"). I have managed to do this for the overall data, but I don't know how to add custom labels for each group separately. I'd like the labels to look like this: https://imgur.com/a/naF7uNW

> for (i in 18:21) {
  p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) + 
    geom_smooth(method="lm") + 
    geom_point(size = 4) +
    geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
    scale_colour_discrete(name="Group", labels=c("young", "old", "overall")) + 
    stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i]))) +
    stat_cor(aes(x = Age, y = unlist(df[i]), group=1, color="black", 
                 label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~")))
  
  ggsave(p1, file=paste0("Age_", names(df)[i], ".png"), scale=1)
}

From @b|tbo| @end|ng |rom @ent@com  Fri Jul 10 19:50:18 2020
From: @b|tbo| @end|ng |rom @ent@com (Jean-Louis Abitbol)
Date: Fri, 10 Jul 2020 19:50:18 +0200
Subject: [R] Character (1a, 1b) to numeric
Message-ID: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>

Dear All

I have a character vector,  representing histology stages, such as for example:
xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")

and this goes on to 3, 3a etc in various order for each patient. I do have of course a pre-established  classification available which does change according to the histology criteria under assessment.

I would want to convert xc, for plotting reasons, to a numeric vector such as

xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)

Unfortunately I have no clue on how to do that.

Thanks for any help and apologies if I am missing the obvious way to do it.

JL
-- 
Verif30042020


From j|ox @end|ng |rom mcm@@ter@c@  Fri Jul 10 20:10:27 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Fri, 10 Jul 2020 18:10:27 +0000
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
Message-ID: <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>

Dear Jean-Louis,

There must be many ways to do this. Here's one simple way (with no claim of optimality!):

> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> 
> set.seed(123) # for reproducibility
> x <- sample(xc, 20, replace=TRUE) # "data"
> 
> names(xn) <- xc
> z <- xn[x]
> 
> data.frame(z, x)
     z  x
1  2.5 2b
2  2.5 2b
3  1.5 1b
4  2.3 2a
5  1.5 1b
6  1.3 1a
7  1.3 1a
8  2.3 2a
9  1.5 1b
10 2.0  2
11 1.7 1c
12 2.3 2a
13 2.3 2a
14 1.0  1
15 1.3 1a
16 1.5 1b
17 2.7 2c
18 2.0  2
19 1.5 1b
20 1.5 1b

I hope this helps,
 John

  -----------------------------
  John Fox, Professor Emeritus
  McMaster University
  Hamilton, Ontario, Canada
  Web: http::/socserv.mcmaster.ca/jfox

> On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com> wrote:
> 
> Dear All
> 
> I have a character vector,  representing histology stages, such as for example:
> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> 
> and this goes on to 3, 3a etc in various order for each patient. I do have of course a pre-established  classification available which does change according to the histology criteria under assessment.
> 
> I would want to convert xc, for plotting reasons, to a numeric vector such as
> 
> xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> 
> Unfortunately I have no clue on how to do that.
> 
> Thanks for any help and apologies if I am missing the obvious way to do it.
> 
> JL
> -- 
> Verif30042020
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rmh @end|ng |rom temp|e@edu  Fri Jul 10 20:11:15 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Fri, 10 Jul 2020 14:11:15 -0400
Subject: [R] [External]  Character (1a, 1b) to numeric
In-Reply-To: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
References: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
Message-ID: <CAGx1TMD2V8QuJdew7XLAPZpJGTqifx-VmFr_aEATcYf=KscnAA@mail.gmail.com>

> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> testdata <- rep(c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c"), times=1:8)
> testdata
 [1] "1"  "1a" "1a" "1b" "1b" "1b" "1c" "1c" "1c" "1c" "2"  "2"  "2"  "2"  "2"
[16] "2a" "2a" "2a" "2a" "2a" "2a" "2b" "2b" "2b" "2b" "2b" "2b" "2b" "2c" "2c"
[31] "2c" "2c" "2c" "2c" "2c" "2c"
> ?match
> xn[match(testdata, xc)]
 [1] 1.0 1.3 1.3 1.5 1.5 1.5 1.7 1.7 1.7 1.7 2.0 2.0 2.0 2.0 2.0 2.3 2.3 2.3 2.3
[20] 2.3 2.3 2.5 2.5 2.5 2.5 2.5 2.5 2.5 2.7 2.7 2.7 2.7 2.7 2.7 2.7 2.7
>

On Fri, Jul 10, 2020 at 1:51 PM Jean-Louis Abitbol <abitbol at sent.com> wrote:
>
> Dear All
>
> I have a character vector,  representing histology stages, such as for example:
> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
>
> and this goes on to 3, 3a etc in various order for each patient. I do have of course a pre-established  classification available which does change according to the histology criteria under assessment.
>
> I would want to convert xc, for plotting reasons, to a numeric vector such as
>
> xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
>
> Unfortunately I have no clue on how to do that.
>
> Thanks for any help and apologies if I am missing the obvious way to do it.
>
> JL
> --
> Verif30042020
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jul 10 20:20:18 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 10 Jul 2020 11:20:18 -0700
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
References: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
Message-ID: <A8301FFA-2464-41FC-AE39-2F3DB88DC294@dcn.davis.ca.us>

Obvious is in the eye of the beholder. Presuming your letters don't go beyond "i":

a) Lookup table:

tbl <- read.table( text=
"OldCode  NewCode
1         1
1a        1.1
1b        1.2
1c        1.3
2         2
2a        2.1
2b        2.2
", as.is=TRUE, header=TRUE )

tblv <- setNames( tbl$NewCode, tbl$OldCode )
test <- c( "2", "1c", "2b" )
as.vector( tblv[ test ] )

b) String manipulation:

n <- as.integer( sub( "[a-i]$", "", test ) )
d <- match( sub( "^\\d+", "", test ), letters[1:9] )
d[ is.na( d ) ] <- 0
n + d / 10

On July 10, 2020 10:50:18 AM PDT, Jean-Louis Abitbol <abitbol at sent.com> wrote:
>Dear All
>
>I have a character vector,  representing histology stages, such as for
>example:
>xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
>
>and this goes on to 3, 3a etc in various order for each patient. I do
>have of course a pre-established  classification available which does
>change according to the histology criteria under assessment.
>
>I would want to convert xc, for plotting reasons, to a numeric vector
>such as
>
>xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
>
>Unfortunately I have no clue on how to do that.
>
>Thanks for any help and apologies if I am missing the obvious way to do
>it.
>
>JL

-- 
Sent from my phone. Please excuse my brevity.


From dc@r|@on @end|ng |rom t@mu@edu  Fri Jul 10 21:28:03 2020
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Fri, 10 Jul 2020 14:28:03 -0500
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
Message-ID: <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>

Here is a different approach:

xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
xn
# [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7

David L Carlson
Professor Emeritus of Anthropology
Texas A&M University

On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:

> Dear Jean-Louis,
>
> There must be many ways to do this. Here's one simple way (with no claim
> of optimality!):
>
> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> >
> > set.seed(123) # for reproducibility
> > x <- sample(xc, 20, replace=TRUE) # "data"
> >
> > names(xn) <- xc
> > z <- xn[x]
> >
> > data.frame(z, x)
>      z  x
> 1  2.5 2b
> 2  2.5 2b
> 3  1.5 1b
> 4  2.3 2a
> 5  1.5 1b
> 6  1.3 1a
> 7  1.3 1a
> 8  2.3 2a
> 9  1.5 1b
> 10 2.0  2
> 11 1.7 1c
> 12 2.3 2a
> 13 2.3 2a
> 14 1.0  1
> 15 1.3 1a
> 16 1.5 1b
> 17 2.7 2c
> 18 2.0  2
> 19 1.5 1b
> 20 1.5 1b
>
> I hope this helps,
>  John
>
>   -----------------------------
>   John Fox, Professor Emeritus
>   McMaster University
>   Hamilton, Ontario, Canada
>   Web: http::/socserv.mcmaster.ca/jfox
>
> > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com>
> wrote:
> >
> > Dear All
> >
> > I have a character vector,  representing histology stages, such as for
> example:
> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> >
> > and this goes on to 3, 3a etc in various order for each patient. I do
> have of course a pre-established  classification available which does
> change according to the histology criteria under assessment.
> >
> > I would want to convert xc, for plotting reasons, to a numeric vector
> such as
> >
> > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> >
> > Unfortunately I have no clue on how to do that.
> >
> > Thanks for any help and apologies if I am missing the obvious way to do
> it.
> >
> > JL
> > --
> > Verif30042020
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> PLEASE do read the posting guide
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jul 10 21:54:09 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 10 Jul 2020 12:54:09 -0700
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
Message-ID: <CAGxFJbTRdr-4RPh+oF=V454GfL5moJ2wvHDmZrPPXQ0e7R723Q@mail.gmail.com>

... and continuing with this cute little thread...

I found the OP's specification a little imprecise -- are your values always
a string that begins with *some sort" of numeric value followed by "some
sort" of alpha code? That is, could the numeric value be several digits and
the alpha code several letters? Probably not, and the existing solutions
you have been provided are almost certainly all you need. But for fun,
assuming this more general specification, here is a general way to split
your alphanumeric codes up into numeric and alpha parts and then convert by
using a couple of sub() 's.

> set.seed(131)
> xc <- sample(c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c"), 15, replace
= TRUE)
> nums <- sub("[[:alpha:]]+","",xc)  ## extract numeric part
> alph <- sub("\\d+","",xc)   ## extract alpha part
> codes <- letters[1:3] ## whatever alpha codes are used
> vals <- setNames(c(.3,.5,.7), codes) ## whatever numeric values to
convert codes to
> xnew <- as.numeric(nums) + ifelse(alph == "",0, vals[alph])
> data.frame (xc = xc, xnew = xnew)
   xc xnew
1  1a  1.3
2   2  2.0
3  1c  1.7
4  1c  1.7
5  1b  1.5
6  1a  1.3
7   2  2.0
8   2  2.0
9  1a  1.3
10 1a  1.3
11 2c  2.7
12 1b  1.5
13 1b  1.5
14  1  1.0
15 1c  1.7

Echoing others, no claim for optimality in any sense.

Cheers,
Bert


On Fri, Jul 10, 2020 at 12:28 PM David Carlson <dcarlson at tamu.edu> wrote:

> Here is a different approach:
>
> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
> xn
> # [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7
>
> David L Carlson
> Professor Emeritus of Anthropology
> Texas A&M University
>
> On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:
>
> > Dear Jean-Louis,
> >
> > There must be many ways to do this. Here's one simple way (with no claim
> > of optimality!):
> >
> > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > >
> > > set.seed(123) # for reproducibility
> > > x <- sample(xc, 20, replace=TRUE) # "data"
> > >
> > > names(xn) <- xc
> > > z <- xn[x]
> > >
> > > data.frame(z, x)
> >      z  x
> > 1  2.5 2b
> > 2  2.5 2b
> > 3  1.5 1b
> > 4  2.3 2a
> > 5  1.5 1b
> > 6  1.3 1a
> > 7  1.3 1a
> > 8  2.3 2a
> > 9  1.5 1b
> > 10 2.0  2
> > 11 1.7 1c
> > 12 2.3 2a
> > 13 2.3 2a
> > 14 1.0  1
> > 15 1.3 1a
> > 16 1.5 1b
> > 17 2.7 2c
> > 18 2.0  2
> > 19 1.5 1b
> > 20 1.5 1b
> >
> > I hope this helps,
> >  John
> >
> >   -----------------------------
> >   John Fox, Professor Emeritus
> >   McMaster University
> >   Hamilton, Ontario, Canada
> >   Web: http::/socserv.mcmaster.ca/jfox
> >
> > > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com>
> > wrote:
> > >
> > > Dear All
> > >
> > > I have a character vector,  representing histology stages, such as for
> > example:
> > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > >
> > > and this goes on to 3, 3a etc in various order for each patient. I do
> > have of course a pre-established  classification available which does
> > change according to the histology criteria under assessment.
> > >
> > > I would want to convert xc, for plotting reasons, to a numeric vector
> > such as
> > >
> > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > >
> > > Unfortunately I have no clue on how to do that.
> > >
> > > Thanks for any help and apologies if I am missing the obvious way to do
> > it.
> > >
> > > JL
> > > --
> > > Verif30042020
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >
> >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > PLEASE do read the posting guide
> >
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > PLEASE do read the posting guide
> >
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Fri Jul 10 22:02:47 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Fri, 10 Jul 2020 20:02:47 +0000
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
Message-ID: <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>

Hi,

We've had several solutions, and I was curious about their relative efficiency. Here's a test with a moderately large data vector:

> library("microbenchmark")
> set.seed(123) # for reproducibility
> x <- sample(xc, 1e4, replace=TRUE) # "data"
> microbenchmark(John = John <- xn[x], 
+                Rich = Rich <- xn[match(x, xc)], 
+                Jeff = Jeff <- {
+                 n <- as.integer( sub( "[a-i]$", "", x ) )
+                 d <- match( sub( "^\\d+", "", x ), letters[1:9] )
+                 d[ is.na( d ) ] <- 0
+                 n + d / 10
+                 },
+                David = David <- as.numeric(gsub("a", ".3", 
+                                      gsub("b", ".5", 
+                                           gsub("c", ".7", x)))),
+                times=1000L
+                )
Unit: microseconds
  expr       min        lq       mean     median         uq       max neval cld
  John   228.816   345.371   513.5614   503.5965   533.0635  10829.08  1000 a  
  Rich   217.395   343.035   534.2074   489.0075   518.3260  15388.96  1000 a  
  Jeff 10325.471 13070.737 15387.2545 15397.9790 17204.0115 153486.94  1000  b 
 David 14256.673 18148.492 20185.7156 20170.3635 22067.6690  34998.95  1000   c
> all.equal(John, Rich)
[1] TRUE
> all.equal(John, David)
[1] "names for target but not for current"
> all.equal(John, Jeff)
[1] "names for target but not for current" "Mean relative difference: 0.1498243" 

Of course, efficiency isn't the only consideration, and aesthetically (and no doubt subjectively) I prefer Rich Heiberger's solution. OTOH, Jeff's solution is more general in that it generates the correspondence between letters and numbers. The argument for Jeff's solution would, however, be stronger if it gave the desired answer.

Best,
 John

> On Jul 10, 2020, at 3:28 PM, David Carlson <dcarlson at tamu.edu> wrote:
> 
> Here is a different approach:
> 
> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
> xn
> # [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7
> 
> David L Carlson
> Professor Emeritus of Anthropology
> Texas A&M University
> 
> On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:
> Dear Jean-Louis,
> 
> There must be many ways to do this. Here's one simple way (with no claim of optimality!):
> 
> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > 
> > set.seed(123) # for reproducibility
> > x <- sample(xc, 20, replace=TRUE) # "data"
> > 
> > names(xn) <- xc
> > z <- xn[x]
> > 
> > data.frame(z, x)
>      z  x
> 1  2.5 2b
> 2  2.5 2b
> 3  1.5 1b
> 4  2.3 2a
> 5  1.5 1b
> 6  1.3 1a
> 7  1.3 1a
> 8  2.3 2a
> 9  1.5 1b
> 10 2.0  2
> 11 1.7 1c
> 12 2.3 2a
> 13 2.3 2a
> 14 1.0  1
> 15 1.3 1a
> 16 1.5 1b
> 17 2.7 2c
> 18 2.0  2
> 19 1.5 1b
> 20 1.5 1b
> 
> I hope this helps,
>  John
> 
>   -----------------------------
>   John Fox, Professor Emeritus
>   McMaster University
>   Hamilton, Ontario, Canada
>   Web: http::/socserv.mcmaster.ca/jfox
> 
> > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com> wrote:
> > 
> > Dear All
> > 
> > I have a character vector,  representing histology stages, such as for example:
> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > 
> > and this goes on to 3, 3a etc in various order for each patient. I do have of course a pre-established  classification available which does change according to the histology criteria under assessment.
> > 
> > I would want to convert xc, for plotting reasons, to a numeric vector such as
> > 
> > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > 
> > Unfortunately I have no clue on how to do that.
> > 
> > Thanks for any help and apologies if I am missing the obvious way to do it.
> > 
> > JL
> > -- 
> > Verif30042020
> > 
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$ 
> > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$ 
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$ 
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$ 
> and provide commented, minimal, self-contained, reproducible code.


From j|ox @end|ng |rom mcm@@ter@c@  Fri Jul 10 22:21:06 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Fri, 10 Jul 2020 20:21:06 +0000
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CAGxFJbTRdr-4RPh+oF=V454GfL5moJ2wvHDmZrPPXQ0e7R723Q@mail.gmail.com>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
 <CAGxFJbTRdr-4RPh+oF=V454GfL5moJ2wvHDmZrPPXQ0e7R723Q@mail.gmail.com>
Message-ID: <43ED69CD-5CCB-4857-9D9B-1B26426FF14F@mcmaster.ca>

Dear Bert,

Wouldn't you know it, but your contribution arrived just after I pressed "send" on my last message? So here's how your solution compares:

> microbenchmark(John = John <- xn[x], 
+                Rich = Rich <- xn[match(x, xc)], 
+                Jeff = Jeff <- {
+                   n <- as.integer( sub( "[a-i]$", "", x ) )
+                   d <- match( sub( "^\\d+", "", x ), letters[1:9] )
+                   d[ is.na( d ) ] <- 0
+                   n + d / 10
+                },
+                David = David <- as.numeric(gsub("a", ".3", 
+                                      gsub("b", ".5", 
+                                           gsub("c", ".7", x)))),
+                Bert = Bert <- {
+                   nums <- sub("[[:alpha:]]+","",x)  
+                   alph <- sub("\\d+","",x)  
+                   as.numeric(nums) + ifelse(alph == "",0, vals[alph])
+                },
+                times=1000L
+                )
Unit: microseconds
  expr       min         lq       mean    median         uq       max neval  cld
  John   261.739   373.9765   599.9411   536.571   569.3750  14489.48  1000 a   
  Rich   250.697   372.4450   542.3208   520.383   554.7215  10682.73  1000 a   
  Jeff 10879.223 13477.7665 15647.7856 15549.255 17516.7420 146155.28  1000  b  
 David 14337.510 18375.0100 20325.8796 20187.174 22161.0195  32575.31  1000    d
  Bert 12344.506 15753.2510 18024.2757 17702.838 19973.0465  32043.80  1000   c 
> all.equal(John, Rich)
[1] TRUE
> all.equal(John, David)
[1] "names for target but not for current"
> all.equal(John, Jeff)
[1] "names for target but not for current" "Mean relative difference: 0.1498243" 
> all.equal(John, Bert)
[1] "names for target but not for current"

To make the comparison fair, I moved the parts of the solutions that don't depend on the length of the data outside the benchmark. Your solution does have the virtue of providing the right answer.

Best,
 John

> On Jul 10, 2020, at 3:54 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> ... and continuing with this cute little thread...
> 
> I found the OP's specification a little imprecise -- are your values always a string that begins with *some sort" of numeric value followed by "some sort" of alpha code? That is, could the numeric value be several digits and the alpha code several letters? Probably not, and the existing solutions you have been provided are almost certainly all you need. But for fun, assuming this more general specification, here is a general way to split your alphanumeric codes up into numeric and alpha parts and then convert by using a couple of sub() 's.
> 
> > set.seed(131)
> > xc <- sample(c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c"), 15, replace = TRUE) 
> > nums <- sub("[[:alpha:]]+","",xc)  ## extract numeric part
> > alph <- sub("\\d+","",xc)   ## extract alpha part
> > codes <- letters[1:3] ## whatever alpha codes are used
> > vals <- setNames(c(.3,.5,.7), codes) ## whatever numeric values to convert codes to
> > xnew <- as.numeric(nums) + ifelse(alph == "",0, vals[alph])
> > data.frame (xc = xc, xnew = xnew)
>    xc xnew
> 1  1a  1.3
> 2   2  2.0
> 3  1c  1.7
> 4  1c  1.7
> 5  1b  1.5
> 6  1a  1.3
> 7   2  2.0
> 8   2  2.0
> 9  1a  1.3
> 10 1a  1.3
> 11 2c  2.7
> 12 1b  1.5
> 13 1b  1.5
> 14  1  1.0
> 15 1c  1.7
> 
> Echoing others, no claim for optimality in any sense.
> 
> Cheers,
> Bert
> 
> 
> On Fri, Jul 10, 2020 at 12:28 PM David Carlson <dcarlson at tamu.edu> wrote:
> Here is a different approach:
> 
> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
> xn
> # [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7
> 
> David L Carlson
> Professor Emeritus of Anthropology
> Texas A&M University
> 
> On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:
> 
> > Dear Jean-Louis,
> >
> > There must be many ways to do this. Here's one simple way (with no claim
> > of optimality!):
> >
> > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > >
> > > set.seed(123) # for reproducibility
> > > x <- sample(xc, 20, replace=TRUE) # "data"
> > >
> > > names(xn) <- xc
> > > z <- xn[x]
> > >
> > > data.frame(z, x)
> >      z  x
> > 1  2.5 2b
> > 2  2.5 2b
> > 3  1.5 1b
> > 4  2.3 2a
> > 5  1.5 1b
> > 6  1.3 1a
> > 7  1.3 1a
> > 8  2.3 2a
> > 9  1.5 1b
> > 10 2.0  2
> > 11 1.7 1c
> > 12 2.3 2a
> > 13 2.3 2a
> > 14 1.0  1
> > 15 1.3 1a
> > 16 1.5 1b
> > 17 2.7 2c
> > 18 2.0  2
> > 19 1.5 1b
> > 20 1.5 1b
> >
> > I hope this helps,
> >  John
> >
> >   -----------------------------
> >   John Fox, Professor Emeritus
> >   McMaster University
> >   Hamilton, Ontario, Canada
> >   Web: http::/socserv.mcmaster.ca/jfox
> >
> > > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com>
> > wrote:
> > >
> > > Dear All
> > >
> > > I have a character vector,  representing histology stages, such as for
> > example:
> > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > >
> > > and this goes on to 3, 3a etc in various order for each patient. I do
> > have of course a pre-established  classification available which does
> > change according to the histology criteria under assessment.
> > >
> > > I would want to convert xc, for plotting reasons, to a numeric vector
> > such as
> > >
> > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > >
> > > Unfortunately I have no clue on how to do that.
> > >
> > > Thanks for any help and apologies if I am missing the obvious way to do
> > it.
> > >
> > > JL
> > > --
> > > Verif30042020
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > PLEASE do read the posting guide
> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > PLEASE do read the posting guide
> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > and provide commented, minimal, self-contained, reproducible code.
> >
> 
>         [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jul 10 22:26:37 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 10 Jul 2020 13:26:37 -0700
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <43ED69CD-5CCB-4857-9D9B-1B26426FF14F@mcmaster.ca>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
 <CAGxFJbTRdr-4RPh+oF=V454GfL5moJ2wvHDmZrPPXQ0e7R723Q@mail.gmail.com>
 <43ED69CD-5CCB-4857-9D9B-1B26426FF14F@mcmaster.ca>
Message-ID: <CAGxFJbQ9E1sq-aOJTe4p+Hi5c1zQN8apvo7kQ-Vhgf-vsW9mCw@mail.gmail.com>

Thanks! As I said, cute exercise.

Best,
Bert




On Fri, Jul 10, 2020 at 1:21 PM Fox, John <jfox at mcmaster.ca> wrote:

> Dear Bert,
>
> Wouldn't you know it, but your contribution arrived just after I pressed
> "send" on my last message? So here's how your solution compares:
>
> > microbenchmark(John = John <- xn[x],
> +                Rich = Rich <- xn[match(x, xc)],
> +                Jeff = Jeff <- {
> +                   n <- as.integer( sub( "[a-i]$", "", x ) )
> +                   d <- match( sub( "^\\d+", "", x ), letters[1:9] )
> +                   d[ is.na( d ) ] <- 0
> +                   n + d / 10
> +                },
> +                David = David <- as.numeric(gsub("a", ".3",
> +                                      gsub("b", ".5",
> +                                           gsub("c", ".7", x)))),
> +                Bert = Bert <- {
> +                   nums <- sub("[[:alpha:]]+","",x)
> +                   alph <- sub("\\d+","",x)
> +                   as.numeric(nums) + ifelse(alph == "",0, vals[alph])
> +                },
> +                times=1000L
> +                )
> Unit: microseconds
>   expr       min         lq       mean    median         uq       max
> neval  cld
>   John   261.739   373.9765   599.9411   536.571   569.3750  14489.48
> 1000 a
>   Rich   250.697   372.4450   542.3208   520.383   554.7215  10682.73
> 1000 a
>   Jeff 10879.223 13477.7665 15647.7856 15549.255 17516.7420 146155.28
> 1000  b
>  David 14337.510 18375.0100 20325.8796 20187.174 22161.0195  32575.31
> 1000    d
>   Bert 12344.506 15753.2510 18024.2757 17702.838 19973.0465  32043.80
> 1000   c
> > all.equal(John, Rich)
> [1] TRUE
> > all.equal(John, David)
> [1] "names for target but not for current"
> > all.equal(John, Jeff)
> [1] "names for target but not for current" "Mean relative difference:
> 0.1498243"
> > all.equal(John, Bert)
> [1] "names for target but not for current"
>
> To make the comparison fair, I moved the parts of the solutions that don't
> depend on the length of the data outside the benchmark. Your solution does
> have the virtue of providing the right answer.
>
> Best,
>  John
>
> > On Jul 10, 2020, at 3:54 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> > ... and continuing with this cute little thread...
> >
> > I found the OP's specification a little imprecise -- are your values
> always a string that begins with *some sort" of numeric value followed by
> "some sort" of alpha code? That is, could the numeric value be several
> digits and the alpha code several letters? Probably not, and the existing
> solutions you have been provided are almost certainly all you need. But for
> fun, assuming this more general specification, here is a general way to
> split your alphanumeric codes up into numeric and alpha parts and then
> convert by using a couple of sub() 's.
> >
> > > set.seed(131)
> > > xc <- sample(c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c"), 15,
> replace = TRUE)
> > > nums <- sub("[[:alpha:]]+","",xc)  ## extract numeric part
> > > alph <- sub("\\d+","",xc)   ## extract alpha part
> > > codes <- letters[1:3] ## whatever alpha codes are used
> > > vals <- setNames(c(.3,.5,.7), codes) ## whatever numeric values to
> convert codes to
> > > xnew <- as.numeric(nums) + ifelse(alph == "",0, vals[alph])
> > > data.frame (xc = xc, xnew = xnew)
> >    xc xnew
> > 1  1a  1.3
> > 2   2  2.0
> > 3  1c  1.7
> > 4  1c  1.7
> > 5  1b  1.5
> > 6  1a  1.3
> > 7   2  2.0
> > 8   2  2.0
> > 9  1a  1.3
> > 10 1a  1.3
> > 11 2c  2.7
> > 12 1b  1.5
> > 13 1b  1.5
> > 14  1  1.0
> > 15 1c  1.7
> >
> > Echoing others, no claim for optimality in any sense.
> >
> > Cheers,
> > Bert
> >
> >
> > On Fri, Jul 10, 2020 at 12:28 PM David Carlson <dcarlson at tamu.edu>
> wrote:
> > Here is a different approach:
> >
> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
> > xn
> > # [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7
> >
> > David L Carlson
> > Professor Emeritus of Anthropology
> > Texas A&M University
> >
> > On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:
> >
> > > Dear Jean-Louis,
> > >
> > > There must be many ways to do this. Here's one simple way (with no
> claim
> > > of optimality!):
> > >
> > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > >
> > > > set.seed(123) # for reproducibility
> > > > x <- sample(xc, 20, replace=TRUE) # "data"
> > > >
> > > > names(xn) <- xc
> > > > z <- xn[x]
> > > >
> > > > data.frame(z, x)
> > >      z  x
> > > 1  2.5 2b
> > > 2  2.5 2b
> > > 3  1.5 1b
> > > 4  2.3 2a
> > > 5  1.5 1b
> > > 6  1.3 1a
> > > 7  1.3 1a
> > > 8  2.3 2a
> > > 9  1.5 1b
> > > 10 2.0  2
> > > 11 1.7 1c
> > > 12 2.3 2a
> > > 13 2.3 2a
> > > 14 1.0  1
> > > 15 1.3 1a
> > > 16 1.5 1b
> > > 17 2.7 2c
> > > 18 2.0  2
> > > 19 1.5 1b
> > > 20 1.5 1b
> > >
> > > I hope this helps,
> > >  John
> > >
> > >   -----------------------------
> > >   John Fox, Professor Emeritus
> > >   McMaster University
> > >   Hamilton, Ontario, Canada
> > >   Web: http::/socserv.mcmaster.ca/jfox
> > >
> > > > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com>
> > > wrote:
> > > >
> > > > Dear All
> > > >
> > > > I have a character vector,  representing histology stages, such as
> for
> > > example:
> > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > >
> > > > and this goes on to 3, 3a etc in various order for each patient. I do
> > > have of course a pre-established  classification available which does
> > > change according to the histology criteria under assessment.
> > > >
> > > > I would want to convert xc, for plotting reasons, to a numeric vector
> > > such as
> > > >
> > > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > >
> > > > Unfortunately I have no clue on how to do that.
> > > >
> > > > Thanks for any help and apologies if I am missing the obvious way to
> do
> > > it.
> > > >
> > > > JL
> > > > --
> > > > Verif30042020
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >
> > >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > > PLEASE do read the posting guide
> > >
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >
> > >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > PLEASE do read the posting guide
> > >
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From @b|tbo| @end|ng |rom @ent@com  Fri Jul 10 22:19:05 2020
From: @b|tbo| @end|ng |rom @ent@com (Jean-Louis Abitbol)
Date: Fri, 10 Jul 2020 22:19:05 +0200
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
 <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>
Message-ID: <021bb81d-fc58-4af9-92c3-f5e6ce87a844@www.fastmail.com>

Many thanks to all. This help-list is wonderful.

I have used Rich Heiberger solution using match and found something to learn in each answer. 

off topic, I also enjoyed very much his 2008 paper on the graphical presentation of safety data....

Best wishes.


On Fri, Jul 10, 2020, at 10:02 PM, Fox, John wrote:
> Hi,
> 
> We've had several solutions, and I was curious about their relative 
> efficiency. Here's a test with a moderately large data vector:
> 
> > library("microbenchmark")
> > set.seed(123) # for reproducibility
> > x <- sample(xc, 1e4, replace=TRUE) # "data"
> > microbenchmark(John = John <- xn[x], 
> +                Rich = Rich <- xn[match(x, xc)], 
> +                Jeff = Jeff <- {
> +                 n <- as.integer( sub( "[a-i]$", "", x ) )
> +                 d <- match( sub( "^\\d+", "", x ), letters[1:9] )
> +                 d[ is.na( d ) ] <- 0
> +                 n + d / 10
> +                 },
> +                David = David <- as.numeric(gsub("a", ".3", 
> +                                      gsub("b", ".5", 
> +                                           gsub("c", ".7", x)))),
> +                times=1000L
> +                )
> Unit: microseconds
>   expr       min        lq       mean     median         uq       max neval cld
>   John   228.816   345.371   513.5614   503.5965   533.0635  10829.08  1000 a  
>   Rich   217.395   343.035   534.2074   489.0075   518.3260  15388.96  1000 a  
>   Jeff 10325.471 13070.737 15387.2545 15397.9790 17204.0115 153486.94  1000  b 
>  David 14256.673 18148.492 20185.7156 20170.3635 22067.6690  34998.95  1000   c
> > all.equal(John, Rich)
> [1] TRUE
> > all.equal(John, David)
> [1] "names for target but not for current"
> > all.equal(John, Jeff)
> [1] "names for target but not for current" "Mean relative difference: 
> 0.1498243" 
> 
> Of course, efficiency isn't the only consideration, and aesthetically 
> (and no doubt subjectively) I prefer Rich Heiberger's solution. OTOH, 
> Jeff's solution is more general in that it generates the correspondence 
> between letters and numbers. The argument for Jeff's solution would, 
> however, be stronger if it gave the desired answer.
> 
> Best,
>  John
> 
> > On Jul 10, 2020, at 3:28 PM, David Carlson <dcarlson at tamu.edu> wrote:
> > 
> > Here is a different approach:
> > 
> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
> > xn
> > # [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7
> > 
> > David L Carlson
> > Professor Emeritus of Anthropology
> > Texas A&M University
> > 
> > On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:
> > Dear Jean-Louis,
> > 
> > There must be many ways to do this. Here's one simple way (with no claim of optimality!):
> > 
> > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > 
> > > set.seed(123) # for reproducibility
> > > x <- sample(xc, 20, replace=TRUE) # "data"
> > > 
> > > names(xn) <- xc
> > > z <- xn[x]
> > > 
> > > data.frame(z, x)
> >      z  x
> > 1  2.5 2b
> > 2  2.5 2b
> > 3  1.5 1b
> > 4  2.3 2a
> > 5  1.5 1b
> > 6  1.3 1a
> > 7  1.3 1a
> > 8  2.3 2a
> > 9  1.5 1b
> > 10 2.0  2
> > 11 1.7 1c
> > 12 2.3 2a
> > 13 2.3 2a
> > 14 1.0  1
> > 15 1.3 1a
> > 16 1.5 1b
> > 17 2.7 2c
> > 18 2.0  2
> > 19 1.5 1b
> > 20 1.5 1b
> > 
> > I hope this helps,
> >  John
> > 
> >   -----------------------------
> >   John Fox, Professor Emeritus
> >   McMaster University
> >   Hamilton, Ontario, Canada
> >   Web: http::/socserv.mcmaster.ca/jfox
> > 
> > > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com> wrote:
> > > 
> > > Dear All
> > > 
> > > I have a character vector,  representing histology stages, such as for example:
> > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > 
> > > and this goes on to 3, 3a etc in various order for each patient. I do have of course a pre-established  classification available which does change according to the histology criteria under assessment.
> > > 
> > > I would want to convert xc, for plotting reasons, to a numeric vector such as
> > > 
> > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > 
> > > Unfortunately I have no clue on how to do that.
> > > 
> > > Thanks for any help and apologies if I am missing the obvious way to do it.
> > > 
> > > JL
> > > -- 
> > > Verif30042020
> > > 
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$ 
> > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$ 
> > > and provide commented, minimal, self-contained, reproducible code.
> > 
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$ 
> > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$ 
> > and provide commented, minimal, self-contained, reproducible code.
> 
>

-- 
Verif30042020


From @purd|e@@ @end|ng |rom gm@||@com  Sat Jul 11 03:31:51 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 11 Jul 2020 13:31:51 +1200
Subject: [R] Bivariate ReLU Distribution
In-Reply-To: <1398793978.9432149.1594380973005@mail.yahoo.com>
References: <1398793978.9432149.1594380973005.ref@mail.yahoo.com>
 <1398793978.9432149.1594380973005@mail.yahoo.com>
Message-ID: <CAB8pepxi3u3CGp-1BDk0KBqr+pod9MMSFK_CndbDUohFjqJtMA@mail.gmail.com>

NOTE: LIMITED TESTING
(You may want to check this carefully, if you're interested in using it).

library (kubik)
library (mvtnorm)

sim.cdf <- function (mx, my, sdx, sdy, cor, ..., n=2e5)
    sim.cdf.2 (mx, my, sdx^2, sdy^2, sdx * sdy * cor, n=n)

sim.cdf.2 <- function (mx, my, vx, vy, cov, ..., n=2e5)
{   m <- c (mx, my)
    v <- matrix (c (vx, cov, cov, vy), 2, 2)
    u <- rmvnorm (2 * n, m, v)
    for (i in 1:(2 * n) )
        u [i] <- max (0, u [i])
    z <- u [1:n] + u [(n + 1):(2 * n)]

    P0 <- sum (z == 0) / n

    z2 <- z [z != 0]
    z2 <- c (-z2, z2)
    de <- density (z2)
    xFh <- chs.integral (de$x, de$y)

    cx <- seq (0, max (de$x), length.out=60)
    cy <- xFh (cx)
    cy <- cy - cy [1]
    cy <- P0 + cy * (1 - P0) / cy [60]

    cs = chs.constraints (increasing=TRUE)
    chs (cx, cy, constraints=cs, outside = c (0, cy [60]) )
}

#X1, X2 means: 0 and 2
#X1, Y2 sds: 1.5 and 3.5
#cor (X1, X2): 0.75
Fh <- sim.cdf (0, 2, 1.5, 3.5, 0.75)

plot (Fh, ylim = c (0, 1.05), yaxs="i")

#prob 1 < U < 2
Fh (2) - Fh (1)


On Sat, Jul 11, 2020 at 1:49 AM Arun Kumar Saha via R-help
<r-help at r-project.org> wrote:
>
> Hi,
> I would rather have a Statistics related question hope experts here can provide some suggestions. I have posted this request in some other forum but failed to generate meaningful response
> I am looking for some technical document on deriving the Distribution function for sum of 2 ReLU(?)=max{0,?} distributions i.e max{0,?1} + max{0,?2} where X1 and X2 jointly follow some bivariate Nomal distribution.
> There are few technical notes available for univariate ReLU distribution, however I failed to find any spec for bivariate/multivariate setup.
> Any pointer on above subject will be highly helpful.
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @purd|e@@ @end|ng |rom gm@||@com  Sat Jul 11 03:37:35 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sat, 11 Jul 2020 13:37:35 +1200
Subject: [R] Bivariate ReLU Distribution
In-Reply-To: <CAB8pepxi3u3CGp-1BDk0KBqr+pod9MMSFK_CndbDUohFjqJtMA@mail.gmail.com>
References: <1398793978.9432149.1594380973005.ref@mail.yahoo.com>
 <1398793978.9432149.1594380973005@mail.yahoo.com>
 <CAB8pepxi3u3CGp-1BDk0KBqr+pod9MMSFK_CndbDUohFjqJtMA@mail.gmail.com>
Message-ID: <CAB8pepyfdqjrUR=MEPEeD1+LCnjEsv=X2iNrpJUo=uWPvCpN0Q@mail.gmail.com>

Last line should use outside = c (0, 1).
But not that important.

On Sat, Jul 11, 2020 at 1:31 PM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> NOTE: LIMITED TESTING
> (You may want to check this carefully, if you're interested in using it).
>
> library (kubik)
> library (mvtnorm)
>
> sim.cdf <- function (mx, my, sdx, sdy, cor, ..., n=2e5)
>     sim.cdf.2 (mx, my, sdx^2, sdy^2, sdx * sdy * cor, n=n)
>
> sim.cdf.2 <- function (mx, my, vx, vy, cov, ..., n=2e5)
> {   m <- c (mx, my)
>     v <- matrix (c (vx, cov, cov, vy), 2, 2)
>     u <- rmvnorm (2 * n, m, v)
>     for (i in 1:(2 * n) )
>         u [i] <- max (0, u [i])
>     z <- u [1:n] + u [(n + 1):(2 * n)]
>
>     P0 <- sum (z == 0) / n
>
>     z2 <- z [z != 0]
>     z2 <- c (-z2, z2)
>     de <- density (z2)
>     xFh <- chs.integral (de$x, de$y)
>
>     cx <- seq (0, max (de$x), length.out=60)
>     cy <- xFh (cx)
>     cy <- cy - cy [1]
>     cy <- P0 + cy * (1 - P0) / cy [60]
>
>     cs = chs.constraints (increasing=TRUE)
>     chs (cx, cy, constraints=cs, outside = c (0, cy [60]) )
> }
>
> #X1, X2 means: 0 and 2
> #X1, Y2 sds: 1.5 and 3.5
> #cor (X1, X2): 0.75
> Fh <- sim.cdf (0, 2, 1.5, 3.5, 0.75)
>
> plot (Fh, ylim = c (0, 1.05), yaxs="i")
>
> #prob 1 < U < 2
> Fh (2) - Fh (1)
>
>
> On Sat, Jul 11, 2020 at 1:49 AM Arun Kumar Saha via R-help
> <r-help at r-project.org> wrote:
> >
> > Hi,
> > I would rather have a Statistics related question hope experts here can provide some suggestions. I have posted this request in some other forum but failed to generate meaningful response
> > I am looking for some technical document on deriving the Distribution function for sum of 2 ReLU(?)=max{0,?} distributions i.e max{0,?1} + max{0,?2} where X1 and X2 jointly follow some bivariate Nomal distribution.
> > There are few technical notes available for univariate ReLU distribution, however I failed to find any spec for bivariate/multivariate setup.
> > Any pointer on above subject will be highly helpful.
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From r@oknz @end|ng |rom gm@||@com  Sat Jul 11 04:08:37 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Sat, 11 Jul 2020 14:08:37 +1200
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
References: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
Message-ID: <CABcYAdLfdoHUS6BhhPGvSx0epopBAzoR4H-sChShy6rh_mosgw@mail.gmail.com>

This can be done very simply because vectors in R can have
named elements, and can be indexed by strings.

> stage <- c("1" = 1, "1a" = 1.3, "1b" = 1.5, "1c" = 1.7,
+            "2" = 2, "2a" = 2.3, "2b" = 2.5, "2c" = 2.7,
+            "3" = 3, "3a" = 3.3, "3b" = 3.5, "3c" = 3.7)

> testdata <- rep(c("1", "1a", "1b", "1c",
+                   "2", "2a", "2b", "2c",
+                   "3", "3a", "3b", "3c"), times=c(1:6,6:1))

> stage[testdata]
  1  1a  1a  1b  1b  1b  1c  1c  1c  1c   2   2   2   2   2  2a  2a  2a  2a
 2a
1.0 1.3 1.3 1.5 1.5 1.5 1.7 1.7 1.7 1.7 2.0 2.0 2.0 2.0 2.0 2.3 2.3 2.3 2.3
2.3
 2a  2b  2b  2b  2b  2b  2b  2c  2c  2c  2c  2c   3   3   3   3  3a  3a  3a
 3b
2.3 2.5 2.5 2.5 2.5 2.5 2.5 2.7 2.7 2.7 2.7 2.7 3.0 3.0 3.0 3.0 3.3 3.3 3.3
3.5
 3b  3c
3.5 3.7

On Sat, 11 Jul 2020 at 05:51, Jean-Louis Abitbol <abitbol at sent.com> wrote:

> Dear All
>
> I have a character vector,  representing histology stages, such as for
> example:
> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
>
> and this goes on to 3, 3a etc in various order for each patient. I do have
> of course a pre-established  classification available which does change
> according to the histology criteria under assessment.
>
> I would want to convert xc, for plotting reasons, to a numeric vector such
> as
>
> xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
>
> Unfortunately I have no clue on how to do that.
>
> Thanks for any help and apologies if I am missing the obvious way to do it.
>
> JL
> --
> Verif30042020
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sat Jul 11 06:09:51 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 11 Jul 2020 14:09:51 +1000
Subject: [R] How to differ stats_cor labels by group on a ggplot
In-Reply-To: <SN2PR03MB2190BDE30A1C31CDE2518B4494650@SN2PR03MB2190.namprd03.prod.outlook.com>
References: <SN2PR03MB2190BDE30A1C31CDE2518B4494650@SN2PR03MB2190.namprd03.prod.outlook.com>
Message-ID: <CA+8X3fXPPR6Y_+CaVAEwPc00SyGqK4rSQqVRZg9Rtsw6RuRNew@mail.gmail.com>

Hi Paulina,
Without data it's hard to work out what you are doing. Even a small
simulated data set would help to get answers.

Jim

On Fri, Jul 10, 2020 at 11:49 PM Paulina Skolasinska
<paulina.skol at hotmail.com> wrote:
>
> 'm using ggplot2 to plot two variables at a time. I'm plotting two age groups and overall data on the same graph. I'm also using stat_cor form the ggpubr package to report correlations for the two groups and overall data.
>
> I want each stat_cor label to have a custom subscript - the group name ("old", "young"). I have managed to do this for the overall data, but I don't know how to add custom labels for each group separately. I'd like the labels to look like this: https://imgur.com/a/naF7uNW
>
> > for (i in 18:21) {
>   p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
>     geom_smooth(method="lm") +
>     geom_point(size = 4) +
>     geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
>     scale_colour_discrete(name="Group", labels=c("young", "old", "overall")) +
>     stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i]))) +
>     stat_cor(aes(x = Age, y = unlist(df[i]), group=1, color="black",
>                  label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~")))
>
>   ggsave(p1, file=paste0("Age_", names(df)[i], ".png"), scale=1)
> }
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Sat Jul 11 07:16:25 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sat, 11 Jul 2020 08:16:25 +0300
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CABcYAdLfdoHUS6BhhPGvSx0epopBAzoR4H-sChShy6rh_mosgw@mail.gmail.com>
References: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <CABcYAdLfdoHUS6BhhPGvSx0epopBAzoR4H-sChShy6rh_mosgw@mail.gmail.com>
Message-ID: <CAGgJW74QdODbH0gUcAa2qrKePwk54ugrRgtab64kWXYvhHqjEw@mail.gmail.com>

xn <- as.numeric(sub("c",".7",sub("b",".5",sub("a",".3",xc))))


On Sat, Jul 11, 2020 at 5:09 AM Richard O'Keefe <raoknz at gmail.com> wrote:

> This can be done very simply because vectors in R can have
> named elements, and can be indexed by strings.
>
> > stage <- c("1" = 1, "1a" = 1.3, "1b" = 1.5, "1c" = 1.7,
> +            "2" = 2, "2a" = 2.3, "2b" = 2.5, "2c" = 2.7,
> +            "3" = 3, "3a" = 3.3, "3b" = 3.5, "3c" = 3.7)
>
> > testdata <- rep(c("1", "1a", "1b", "1c",
> +                   "2", "2a", "2b", "2c",
> +                   "3", "3a", "3b", "3c"), times=c(1:6,6:1))
>
> > stage[testdata]
>   1  1a  1a  1b  1b  1b  1c  1c  1c  1c   2   2   2   2   2  2a  2a  2a  2a
>  2a
> 1.0 1.3 1.3 1.5 1.5 1.5 1.7 1.7 1.7 1.7 2.0 2.0 2.0 2.0 2.0 2.3 2.3 2.3 2.3
> 2.3
>  2a  2b  2b  2b  2b  2b  2b  2c  2c  2c  2c  2c   3   3   3   3  3a  3a  3a
>  3b
> 2.3 2.5 2.5 2.5 2.5 2.5 2.5 2.7 2.7 2.7 2.7 2.7 3.0 3.0 3.0 3.0 3.3 3.3 3.3
> 3.5
>  3b  3c
> 3.5 3.7
>
> On Sat, 11 Jul 2020 at 05:51, Jean-Louis Abitbol <abitbol at sent.com> wrote:
>
> > Dear All
> >
> > I have a character vector,  representing histology stages, such as for
> > example:
> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> >
> > and this goes on to 3, 3a etc in various order for each patient. I do
> have
> > of course a pre-established  classification available which does change
> > according to the histology criteria under assessment.
> >
> > I would want to convert xc, for plotting reasons, to a numeric vector
> such
> > as
> >
> > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> >
> > Unfortunately I have no clue on how to do that.
> >
> > Thanks for any help and apologies if I am missing the obvious way to do
> it.
> >
> > JL
> > --
> > Verif30042020
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Sat Jul 11 08:25:03 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Fri, 10 Jul 2020 23:25:03 -0700
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <021bb81d-fc58-4af9-92c3-f5e6ce87a844@www.fastmail.com>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
 <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>
 <021bb81d-fc58-4af9-92c3-f5e6ce87a844@www.fastmail.com>
Message-ID: <CAA99HCx+jvO=4==1fZCR0gyp-+59PfJOMOwZ7mwFwoPHLKyudA@mail.gmail.com>

Hello Jean-Louis,

Noting the subject line of your post I thought the first answer would
have been encoding histology stages as factors, and "unclass-ing" them
to obtain integers that then can be mathematically manipulated. You
can get a lot of work done with all the commands listed on the
"factor" help page:

?factor
samples <- 1:36
values <- runif(length(samples), min=1, max=length(samples))
hist <- rep(c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c"), times=1:8)
data1 <- data.frame("samples" = samples, "values" = values, "hist" = hist )
(data1$hist <- factor(data1$hist, levels=c("1", "1a", "1b", "1c", "2",
"2a", "2b", "2c")) )
unclass(data1$hist)

library(RColorBrewer); pal_1 <- brewer.pal(8, "Pastel2")
barplot(data1$value, beside=T, col=pal_1[data1$hist])
plot(data1$hist, data1$value, col=pal_1)
pal_2 <- brewer.pal(8, "Dark2")
plot(unclass(data1$hist)/4, data1$value, pch=19, col=pal_2[data1$hist] )
group <- c(rep(0,10),rep(1,26)); data1$group <- group
library(lattice); dotplot(hist ~ values | group, data=data1, xlim=c(0,36) )

HTH, Bill.

W. Michels, Ph.D.




On Fri, Jul 10, 2020 at 1:41 PM Jean-Louis Abitbol <abitbol at sent.com> wrote:
>
> Many thanks to all. This help-list is wonderful.
>
> I have used Rich Heiberger solution using match and found something to learn in each answer.
>
> off topic, I also enjoyed very much his 2008 paper on the graphical presentation of safety data....
>
> Best wishes.
>
>
> On Fri, Jul 10, 2020, at 10:02 PM, Fox, John wrote:
> > Hi,
> >
> > We've had several solutions, and I was curious about their relative
> > efficiency. Here's a test with a moderately large data vector:
> >
> > > library("microbenchmark")
> > > set.seed(123) # for reproducibility
> > > x <- sample(xc, 1e4, replace=TRUE) # "data"
> > > microbenchmark(John = John <- xn[x],
> > +                Rich = Rich <- xn[match(x, xc)],
> > +                Jeff = Jeff <- {
> > +                 n <- as.integer( sub( "[a-i]$", "", x ) )
> > +                 d <- match( sub( "^\\d+", "", x ), letters[1:9] )
> > +                 d[ is.na( d ) ] <- 0
> > +                 n + d / 10
> > +                 },
> > +                David = David <- as.numeric(gsub("a", ".3",
> > +                                      gsub("b", ".5",
> > +                                           gsub("c", ".7", x)))),
> > +                times=1000L
> > +                )
> > Unit: microseconds
> >   expr       min        lq       mean     median         uq       max neval cld
> >   John   228.816   345.371   513.5614   503.5965   533.0635  10829.08  1000 a
> >   Rich   217.395   343.035   534.2074   489.0075   518.3260  15388.96  1000 a
> >   Jeff 10325.471 13070.737 15387.2545 15397.9790 17204.0115 153486.94  1000  b
> >  David 14256.673 18148.492 20185.7156 20170.3635 22067.6690  34998.95  1000   c
> > > all.equal(John, Rich)
> > [1] TRUE
> > > all.equal(John, David)
> > [1] "names for target but not for current"
> > > all.equal(John, Jeff)
> > [1] "names for target but not for current" "Mean relative difference:
> > 0.1498243"
> >
> > Of course, efficiency isn't the only consideration, and aesthetically
> > (and no doubt subjectively) I prefer Rich Heiberger's solution. OTOH,
> > Jeff's solution is more general in that it generates the correspondence
> > between letters and numbers. The argument for Jeff's solution would,
> > however, be stronger if it gave the desired answer.
> >
> > Best,
> >  John
> >
> > > On Jul 10, 2020, at 3:28 PM, David Carlson <dcarlson at tamu.edu> wrote:
> > >
> > > Here is a different approach:
> > >
> > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
> > > xn
> > > # [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7
> > >
> > > David L Carlson
> > > Professor Emeritus of Anthropology
> > > Texas A&M University
> > >
> > > On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:
> > > Dear Jean-Louis,
> > >
> > > There must be many ways to do this. Here's one simple way (with no claim of optimality!):
> > >
> > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > >
> > > > set.seed(123) # for reproducibility
> > > > x <- sample(xc, 20, replace=TRUE) # "data"
> > > >
> > > > names(xn) <- xc
> > > > z <- xn[x]
> > > >
> > > > data.frame(z, x)
> > >      z  x
> > > 1  2.5 2b
> > > 2  2.5 2b
> > > 3  1.5 1b
> > > 4  2.3 2a
> > > 5  1.5 1b
> > > 6  1.3 1a
> > > 7  1.3 1a
> > > 8  2.3 2a
> > > 9  1.5 1b
> > > 10 2.0  2
> > > 11 1.7 1c
> > > 12 2.3 2a
> > > 13 2.3 2a
> > > 14 1.0  1
> > > 15 1.3 1a
> > > 16 1.5 1b
> > > 17 2.7 2c
> > > 18 2.0  2
> > > 19 1.5 1b
> > > 20 1.5 1b
> > >
> > > I hope this helps,
> > >  John
> > >
> > >   -----------------------------
> > >   John Fox, Professor Emeritus
> > >   McMaster University
> > >   Hamilton, Ontario, Canada
> > >   Web: http::/socserv.mcmaster.ca/jfox
> > >
> > > > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com> wrote:
> > > >
> > > > Dear All
> > > >
> > > > I have a character vector,  representing histology stages, such as for example:
> > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > >
> > > > and this goes on to 3, 3a etc in various order for each patient. I do have of course a pre-established  classification available which does change according to the histology criteria under assessment.
> > > >
> > > > I would want to convert xc, for plotting reasons, to a numeric vector such as
> > > >
> > > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > >
> > > > Unfortunately I have no clue on how to do that.
> > > >
> > > > Thanks for any help and apologies if I am missing the obvious way to do it.
> > > >
> > > > JL
> > > > --
> > > > Verif30042020
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> >
>
> --
> Verif30042020
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@oknz @end|ng |rom gm@||@com  Sat Jul 11 09:02:11 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Sat, 11 Jul 2020 19:02:11 +1200
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CAGgJW74QdODbH0gUcAa2qrKePwk54ugrRgtab64kWXYvhHqjEw@mail.gmail.com>
References: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <CABcYAdLfdoHUS6BhhPGvSx0epopBAzoR4H-sChShy6rh_mosgw@mail.gmail.com>
 <CAGgJW74QdODbH0gUcAa2qrKePwk54ugrRgtab64kWXYvhHqjEw@mail.gmail.com>
Message-ID: <CABcYAdLjywLozR7hn_JTBnx=WyAxuMHJ5HHtwdOUVtjTjeye8w@mail.gmail.com>

The string index approach works with any mapping from stage names
to stage numbers, not just regular ones.  For example, if we had
"1" -> 1, "1a" -> 1.4, "1b" -> 1.6
"2" -> 2, "2a" -> 2.3, "2b" -> 2.7
the 'sub' version would fail miserably while the string index
version would just work.  The 'sub' version would also not work
terribly well if the mapping were
"1" -> 1, "a1" -> 1.3, "b1" -> 1.5, "c1" -> 1.7
and so on. The thing I like about the indexing approach is that
it uses a fundamental operation of the language very directly.

Anyone using R would do well to *master* what indexing can do
for you.


On Sat, 11 Jul 2020 at 17:16, Eric Berger <ericjberger at gmail.com> wrote:

> xn <- as.numeric(sub("c",".7",sub("b",".5",sub("a",".3",xc))))
>
>
> On Sat, Jul 11, 2020 at 5:09 AM Richard O'Keefe <raoknz at gmail.com> wrote:
>
>> This can be done very simply because vectors in R can have
>> named elements, and can be indexed by strings.
>>
>> > stage <- c("1" = 1, "1a" = 1.3, "1b" = 1.5, "1c" = 1.7,
>> +            "2" = 2, "2a" = 2.3, "2b" = 2.5, "2c" = 2.7,
>> +            "3" = 3, "3a" = 3.3, "3b" = 3.5, "3c" = 3.7)
>>
>> > testdata <- rep(c("1", "1a", "1b", "1c",
>> +                   "2", "2a", "2b", "2c",
>> +                   "3", "3a", "3b", "3c"), times=c(1:6,6:1))
>>
>> > stage[testdata]
>>   1  1a  1a  1b  1b  1b  1c  1c  1c  1c   2   2   2   2   2  2a  2a  2a
>> 2a
>>  2a
>> 1.0 1.3 1.3 1.5 1.5 1.5 1.7 1.7 1.7 1.7 2.0 2.0 2.0 2.0 2.0 2.3 2.3 2.3
>> 2.3
>> 2.3
>>  2a  2b  2b  2b  2b  2b  2b  2c  2c  2c  2c  2c   3   3   3   3  3a  3a
>> 3a
>>  3b
>> 2.3 2.5 2.5 2.5 2.5 2.5 2.5 2.7 2.7 2.7 2.7 2.7 3.0 3.0 3.0 3.0 3.3 3.3
>> 3.3
>> 3.5
>>  3b  3c
>> 3.5 3.7
>>
>> On Sat, 11 Jul 2020 at 05:51, Jean-Louis Abitbol <abitbol at sent.com>
>> wrote:
>>
>> > Dear All
>> >
>> > I have a character vector,  representing histology stages, such as for
>> > example:
>> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
>> >
>> > and this goes on to 3, 3a etc in various order for each patient. I do
>> have
>> > of course a pre-established  classification available which does change
>> > according to the histology criteria under assessment.
>> >
>> > I would want to convert xc, for plotting reasons, to a numeric vector
>> such
>> > as
>> >
>> > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
>> >
>> > Unfortunately I have no clue on how to do that.
>> >
>> > Thanks for any help and apologies if I am missing the obvious way to do
>> it.
>> >
>> > JL
>> > --
>> > Verif30042020
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From @b|tbo| @end|ng |rom @ent@com  Sat Jul 11 09:14:31 2020
From: @b|tbo| @end|ng |rom @ent@com (Jean-Louis Abitbol)
Date: Sat, 11 Jul 2020 09:14:31 +0200
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CAA99HCx+jvO=4==1fZCR0gyp-+59PfJOMOwZ7mwFwoPHLKyudA@mail.gmail.com>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
 <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>
 <021bb81d-fc58-4af9-92c3-f5e6ce87a844@www.fastmail.com>
 <CAA99HCx+jvO=4==1fZCR0gyp-+59PfJOMOwZ7mwFwoPHLKyudA@mail.gmail.com>
Message-ID: <ec3b35eb-a5b8-425c-8222-fa868068ce6c@www.fastmail.com>

Hello Bill,

Thanks.

That has indeed the advantage of keeping the histology classification on the  plot instead of some arbitrary numeric scale.

Best wishes, JL

On Sat, Jul 11, 2020, at 8:25 AM, William Michels wrote:
> Hello Jean-Louis,
> 
> Noting the subject line of your post I thought the first answer would
> have been encoding histology stages as factors, and "unclass-ing" them
> to obtain integers that then can be mathematically manipulated. You
> can get a lot of work done with all the commands listed on the
> "factor" help page:
> 
> ?factor
> samples <- 1:36
> values <- runif(length(samples), min=1, max=length(samples))
> hist <- rep(c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c"), times=1:8)
> data1 <- data.frame("samples" = samples, "values" = values, "hist" = hist )
> (data1$hist <- factor(data1$hist, levels=c("1", "1a", "1b", "1c", "2",
> "2a", "2b", "2c")) )
> unclass(data1$hist)
> 
> library(RColorBrewer); pal_1 <- brewer.pal(8, "Pastel2")
> barplot(data1$value, beside=T, col=pal_1[data1$hist])
> plot(data1$hist, data1$value, col=pal_1)
> pal_2 <- brewer.pal(8, "Dark2")
> plot(unclass(data1$hist)/4, data1$value, pch=19, col=pal_2[data1$hist] )
> group <- c(rep(0,10),rep(1,26)); data1$group <- group
> library(lattice); dotplot(hist ~ values | group, data=data1, xlim=c(0,36) )
> 
> HTH, Bill.
> 
> W. Michels, Ph.D.
> 
> 
> 
> 
> On Fri, Jul 10, 2020 at 1:41 PM Jean-Louis Abitbol <abitbol at sent.com> wrote:
> >
> > Many thanks to all. This help-list is wonderful.
> >
> > I have used Rich Heiberger solution using match and found something to learn in each answer.
> >
> > off topic, I also enjoyed very much his 2008 paper on the graphical presentation of safety data....
> >
> > Best wishes.
> >
> >
> > On Fri, Jul 10, 2020, at 10:02 PM, Fox, John wrote:
> > > Hi,
> > >
> > > We've had several solutions, and I was curious about their relative
> > > efficiency. Here's a test with a moderately large data vector:
> > >
> > > > library("microbenchmark")
> > > > set.seed(123) # for reproducibility
> > > > x <- sample(xc, 1e4, replace=TRUE) # "data"
> > > > microbenchmark(John = John <- xn[x],
> > > +                Rich = Rich <- xn[match(x, xc)],
> > > +                Jeff = Jeff <- {
> > > +                 n <- as.integer( sub( "[a-i]$", "", x ) )
> > > +                 d <- match( sub( "^\\d+", "", x ), letters[1:9] )
> > > +                 d[ is.na( d ) ] <- 0
> > > +                 n + d / 10
> > > +                 },
> > > +                David = David <- as.numeric(gsub("a", ".3",
> > > +                                      gsub("b", ".5",
> > > +                                           gsub("c", ".7", x)))),
> > > +                times=1000L
> > > +                )
> > > Unit: microseconds
> > >   expr       min        lq       mean     median         uq       max neval cld
> > >   John   228.816   345.371   513.5614   503.5965   533.0635  10829.08  1000 a
> > >   Rich   217.395   343.035   534.2074   489.0075   518.3260  15388.96  1000 a
> > >   Jeff 10325.471 13070.737 15387.2545 15397.9790 17204.0115 153486.94  1000  b
> > >  David 14256.673 18148.492 20185.7156 20170.3635 22067.6690  34998.95  1000   c
> > > > all.equal(John, Rich)
> > > [1] TRUE
> > > > all.equal(John, David)
> > > [1] "names for target but not for current"
> > > > all.equal(John, Jeff)
> > > [1] "names for target but not for current" "Mean relative difference:
> > > 0.1498243"
> > >
> > > Of course, efficiency isn't the only consideration, and aesthetically
> > > (and no doubt subjectively) I prefer Rich Heiberger's solution. OTOH,
> > > Jeff's solution is more general in that it generates the correspondence
> > > between letters and numbers. The argument for Jeff's solution would,
> > > however, be stronger if it gave the desired answer.
> > >
> > > Best,
> > >  John
> > >
> > > > On Jul 10, 2020, at 3:28 PM, David Carlson <dcarlson at tamu.edu> wrote:
> > > >
> > > > Here is a different approach:
> > > >
> > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > > xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
> > > > xn
> > > > # [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7
> > > >
> > > > David L Carlson
> > > > Professor Emeritus of Anthropology
> > > > Texas A&M University
> > > >
> > > > On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:
> > > > Dear Jean-Louis,
> > > >
> > > > There must be many ways to do this. Here's one simple way (with no claim of optimality!):
> > > >
> > > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > > >
> > > > > set.seed(123) # for reproducibility
> > > > > x <- sample(xc, 20, replace=TRUE) # "data"
> > > > >
> > > > > names(xn) <- xc
> > > > > z <- xn[x]
> > > > >
> > > > > data.frame(z, x)
> > > >      z  x
> > > > 1  2.5 2b
> > > > 2  2.5 2b
> > > > 3  1.5 1b
> > > > 4  2.3 2a
> > > > 5  1.5 1b
> > > > 6  1.3 1a
> > > > 7  1.3 1a
> > > > 8  2.3 2a
> > > > 9  1.5 1b
> > > > 10 2.0  2
> > > > 11 1.7 1c
> > > > 12 2.3 2a
> > > > 13 2.3 2a
> > > > 14 1.0  1
> > > > 15 1.3 1a
> > > > 16 1.5 1b
> > > > 17 2.7 2c
> > > > 18 2.0  2
> > > > 19 1.5 1b
> > > > 20 1.5 1b
> > > >
> > > > I hope this helps,
> > > >  John
> > > >
> > > >   -----------------------------
> > > >   John Fox, Professor Emeritus
> > > >   McMaster University
> > > >   Hamilton, Ontario, Canada
> > > >   Web: http::/socserv.mcmaster.ca/jfox
> > > >
> > > > > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com> wrote:
> > > > >
> > > > > Dear All
> > > > >
> > > > > I have a character vector,  representing histology stages, such as for example:
> > > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > > >
> > > > > and this goes on to 3, 3a etc in various order for each patient. I do have of course a pre-established  classification available which does change according to the histology criteria under assessment.
> > > > >
> > > > > I would want to convert xc, for plotting reasons, to a numeric vector such as
> > > > >
> > > > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > > >
> > > > > Unfortunately I have no clue on how to do that.
> > > > >
> > > > > Thanks for any help and apologies if I am missing the obvious way to do it.
> > > > >
> > > > > JL
> > > > > --
> > > > > Verif30042020
> > > > >
> > > > > ______________________________________________
> > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > > > and provide commented, minimal, self-contained, reproducible code.
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> > >
> >
> > --
> > Verif30042020
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

-- 
Verif30042020


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Sat Jul 11 10:52:35 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sat, 11 Jul 2020 01:52:35 -0700
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <ec3b35eb-a5b8-425c-8222-fa868068ce6c@www.fastmail.com>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
 <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>
 <021bb81d-fc58-4af9-92c3-f5e6ce87a844@www.fastmail.com>
 <CAA99HCx+jvO=4==1fZCR0gyp-+59PfJOMOwZ7mwFwoPHLKyudA@mail.gmail.com>
 <ec3b35eb-a5b8-425c-8222-fa868068ce6c@www.fastmail.com>
Message-ID: <CAA99HCydSj0FmT9=zdVfOaA6Jbk54sOir6G0z7iFw1fBr2pqgw@mail.gmail.com>

Agreed, I meant to add this line (for unclassed factor levels 1-through-8):

> ((1:8 - 1)*(0.25))+1
[1] 1.00 1.25 1.50 1.75 2.00 2.25 2.50 2.75

Depending on the circumstance, you can also consider using dummy
factors or even "NA" as a level; see the "factor" help page for
details.

Best, Bill.

W. Michels, Ph.D.



On Sat, Jul 11, 2020 at 12:16 AM Jean-Louis Abitbol <abitbol at sent.com> wrote:
>
> Hello Bill,
>
> Thanks.
>
> That has indeed the advantage of keeping the histology classification on the  plot instead of some arbitrary numeric scale.
>
> Best wishes, JL
>
> On Sat, Jul 11, 2020, at 8:25 AM, William Michels wrote:
> > Hello Jean-Louis,
> >
> > Noting the subject line of your post I thought the first answer would
> > have been encoding histology stages as factors, and "unclass-ing" them
> > to obtain integers that then can be mathematically manipulated. You
> > can get a lot of work done with all the commands listed on the
> > "factor" help page:
> >
> > ?factor
> > samples <- 1:36
> > values <- runif(length(samples), min=1, max=length(samples))
> > hist <- rep(c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c"), times=1:8)
> > data1 <- data.frame("samples" = samples, "values" = values, "hist" = hist )
> > (data1$hist <- factor(data1$hist, levels=c("1", "1a", "1b", "1c", "2",
> > "2a", "2b", "2c")) )
> > unclass(data1$hist)
> >
> > library(RColorBrewer); pal_1 <- brewer.pal(8, "Pastel2")
> > barplot(data1$value, beside=T, col=pal_1[data1$hist])
> > plot(data1$hist, data1$value, col=pal_1)
> > pal_2 <- brewer.pal(8, "Dark2")
> > plot(unclass(data1$hist)/4, data1$value, pch=19, col=pal_2[data1$hist] )
> > group <- c(rep(0,10),rep(1,26)); data1$group <- group
> > library(lattice); dotplot(hist ~ values | group, data=data1, xlim=c(0,36) )
> >
> > HTH, Bill.
> >
> > W. Michels, Ph.D.
> >
> >
> >
> >
> > On Fri, Jul 10, 2020 at 1:41 PM Jean-Louis Abitbol <abitbol at sent.com> wrote:
> > >
> > > Many thanks to all. This help-list is wonderful.
> > >
> > > I have used Rich Heiberger solution using match and found something to learn in each answer.
> > >
> > > off topic, I also enjoyed very much his 2008 paper on the graphical presentation of safety data....
> > >
> > > Best wishes.
> > >
> > >
> > > On Fri, Jul 10, 2020, at 10:02 PM, Fox, John wrote:
> > > > Hi,
> > > >
> > > > We've had several solutions, and I was curious about their relative
> > > > efficiency. Here's a test with a moderately large data vector:
> > > >
> > > > > library("microbenchmark")
> > > > > set.seed(123) # for reproducibility
> > > > > x <- sample(xc, 1e4, replace=TRUE) # "data"
> > > > > microbenchmark(John = John <- xn[x],
> > > > +                Rich = Rich <- xn[match(x, xc)],
> > > > +                Jeff = Jeff <- {
> > > > +                 n <- as.integer( sub( "[a-i]$", "", x ) )
> > > > +                 d <- match( sub( "^\\d+", "", x ), letters[1:9] )
> > > > +                 d[ is.na( d ) ] <- 0
> > > > +                 n + d / 10
> > > > +                 },
> > > > +                David = David <- as.numeric(gsub("a", ".3",
> > > > +                                      gsub("b", ".5",
> > > > +                                           gsub("c", ".7", x)))),
> > > > +                times=1000L
> > > > +                )
> > > > Unit: microseconds
> > > >   expr       min        lq       mean     median         uq       max neval cld
> > > >   John   228.816   345.371   513.5614   503.5965   533.0635  10829.08  1000 a
> > > >   Rich   217.395   343.035   534.2074   489.0075   518.3260  15388.96  1000 a
> > > >   Jeff 10325.471 13070.737 15387.2545 15397.9790 17204.0115 153486.94  1000  b
> > > >  David 14256.673 18148.492 20185.7156 20170.3635 22067.6690  34998.95  1000   c
> > > > > all.equal(John, Rich)
> > > > [1] TRUE
> > > > > all.equal(John, David)
> > > > [1] "names for target but not for current"
> > > > > all.equal(John, Jeff)
> > > > [1] "names for target but not for current" "Mean relative difference:
> > > > 0.1498243"
> > > >
> > > > Of course, efficiency isn't the only consideration, and aesthetically
> > > > (and no doubt subjectively) I prefer Rich Heiberger's solution. OTOH,
> > > > Jeff's solution is more general in that it generates the correspondence
> > > > between letters and numbers. The argument for Jeff's solution would,
> > > > however, be stronger if it gave the desired answer.
> > > >
> > > > Best,
> > > >  John
> > > >
> > > > > On Jul 10, 2020, at 3:28 PM, David Carlson <dcarlson at tamu.edu> wrote:
> > > > >
> > > > > Here is a different approach:
> > > > >
> > > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > > > xn <- as.numeric(gsub("a", ".3", gsub("b", ".5", gsub("c", ".7", xc))))
> > > > > xn
> > > > > # [1] 1.0 1.3 1.5 1.7 2.0 2.3 2.5 2.7
> > > > >
> > > > > David L Carlson
> > > > > Professor Emeritus of Anthropology
> > > > > Texas A&M University
> > > > >
> > > > > On Fri, Jul 10, 2020 at 1:10 PM Fox, John <jfox at mcmaster.ca> wrote:
> > > > > Dear Jean-Louis,
> > > > >
> > > > > There must be many ways to do this. Here's one simple way (with no claim of optimality!):
> > > > >
> > > > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > > > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > > > >
> > > > > > set.seed(123) # for reproducibility
> > > > > > x <- sample(xc, 20, replace=TRUE) # "data"
> > > > > >
> > > > > > names(xn) <- xc
> > > > > > z <- xn[x]
> > > > > >
> > > > > > data.frame(z, x)
> > > > >      z  x
> > > > > 1  2.5 2b
> > > > > 2  2.5 2b
> > > > > 3  1.5 1b
> > > > > 4  2.3 2a
> > > > > 5  1.5 1b
> > > > > 6  1.3 1a
> > > > > 7  1.3 1a
> > > > > 8  2.3 2a
> > > > > 9  1.5 1b
> > > > > 10 2.0  2
> > > > > 11 1.7 1c
> > > > > 12 2.3 2a
> > > > > 13 2.3 2a
> > > > > 14 1.0  1
> > > > > 15 1.3 1a
> > > > > 16 1.5 1b
> > > > > 17 2.7 2c
> > > > > 18 2.0  2
> > > > > 19 1.5 1b
> > > > > 20 1.5 1b
> > > > >
> > > > > I hope this helps,
> > > > >  John
> > > > >
> > > > >   -----------------------------
> > > > >   John Fox, Professor Emeritus
> > > > >   McMaster University
> > > > >   Hamilton, Ontario, Canada
> > > > >   Web: http::/socserv.mcmaster.ca/jfox
> > > > >
> > > > > > On Jul 10, 2020, at 1:50 PM, Jean-Louis Abitbol <abitbol at sent.com> wrote:
> > > > > >
> > > > > > Dear All
> > > > > >
> > > > > > I have a character vector,  representing histology stages, such as for example:
> > > > > > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
> > > > > >
> > > > > > and this goes on to 3, 3a etc in various order for each patient. I do have of course a pre-established  classification available which does change according to the histology criteria under assessment.
> > > > > >
> > > > > > I would want to convert xc, for plotting reasons, to a numeric vector such as
> > > > > >
> > > > > > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
> > > > > >
> > > > > > Unfortunately I have no clue on how to do that.
> > > > > >
> > > > > > Thanks for any help and apologies if I am missing the obvious way to do it.
> > > > > >
> > > > > > JL
> > > > > > --
> > > > > > Verif30042020
> > > > > >
> > > > > > ______________________________________________
> > > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > > > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > > > > and provide commented, minimal, self-contained, reproducible code.
> > > > >
> > > > > ______________________________________________
> > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcU3rSW6I$
> > > > > PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!V7p9rtNSgBWmF3KJ3U_01fR7vP_I7y-OnWHiTFxwRZ6bVJ3-emOwkBtcg7nzsmk$
> > > > > and provide commented, minimal, self-contained, reproducible code.
> > > >
> > > >
> > >
> > > --
> > > Verif30042020
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Verif30042020


From p@u||n@@@ko| @end|ng |rom hotm@||@com  Sat Jul 11 16:09:00 2020
From: p@u||n@@@ko| @end|ng |rom hotm@||@com (Paulina Skolasinska)
Date: Sat, 11 Jul 2020 14:09:00 +0000
Subject: [R] ODP:  How to differ stats_cor labels by group on a ggplot
In-Reply-To: <CA+8X3fXPPR6Y_+CaVAEwPc00SyGqK4rSQqVRZg9Rtsw6RuRNew@mail.gmail.com>
References: <SN2PR03MB2190BDE30A1C31CDE2518B4494650@SN2PR03MB2190.namprd03.prod.outlook.com>,
 <CA+8X3fXPPR6Y_+CaVAEwPc00SyGqK4rSQqVRZg9Rtsw6RuRNew@mail.gmail.com>
Message-ID: <SN2PR03MB2190440F30A01F050243549A94620@SN2PR03MB2190.namprd03.prod.outlook.com>

Thanks Tim, here is the link to the data: https://we.tl/t-c4x9Lw7LeR
I'm posting my code again so it better matches the modified data, and because I've added several improvements in the meantime.

for (i in 3:6) {
    p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
        geom_smooth(method="lm") +
        geom_point(size = 4) +
        scale_x_continuous(breaks = seq(20,90, by=10)) +
        scale_y_continuous(breaks = seq(0.1,0.5, by=0.1)) +
        theme_classic() +
        expand_limits(y = 0.5) +
        ylab(names(df)[i]) +
        theme(axis.text.x = element_text(face="bold", size=14),
              axis.text.y = element_text(face="bold", size=14),
              axis.title.x = element_text(size=14, face="bold"),
              axis.title.y = element_text(size=14, face="bold"),
              legend.title = element_text(color="black", size=12),
              legend.text = element_text(colour="black", size = 14, face = "bold")) +
        geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
        scale_colour_discrete(name="Group", labels=c("Young", "Old", "Overall")) +
        stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i])),
                 method = "pearson", label.x.npc = c("center"), label.y.npc="top") +
        stat_cor(aes(x = Age, y = unlist(df[i]),
                 label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~"),
                 group=1, color="black"), method = "pearson",label.y=0.5, label.x.npc = c("center"),
                 position = position_nudge(y = 0.015 * 0.5))

    ggsave(p1, file=paste0("TestAge_", names(df)[i], ".png"), scale=1, width=16, height=10, units="cm")
}


________________________________
Od: Jim Lemon <drjimlemon at gmail.com>
Wys?ane: sobota, 11 lipca 2020 04:09
Do: Paulina Skolasinska <paulina.skol at hotmail.com>
DW: r-help at r-project.org <r-help at r-project.org>
Temat: Re: [R] How to differ stats_cor labels by group on a ggplot

Hi Paulina,
Without data it's hard to work out what you are doing. Even a small
simulated data set would help to get answers.

Jim

On Fri, Jul 10, 2020 at 11:49 PM Paulina Skolasinska
<paulina.skol at hotmail.com> wrote:
>
> 'm using ggplot2 to plot two variables at a time. I'm plotting two age groups and overall data on the same graph. I'm also using stat_cor form the ggpubr package to report correlations for the two groups and overall data.
>
> I want each stat_cor label to have a custom subscript - the group name ("old", "young"). I have managed to do this for the overall data, but I don't know how to add custom labels for each group separately. I'd like the labels to look like this: https://imgur.com/a/naF7uNW
>
> > for (i in 18:21) {
>   p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
>     geom_smooth(method="lm") +
>     geom_point(size = 4) +
>     geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
>     scale_colour_discrete(name="Group", labels=c("young", "old", "overall")) +
>     stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i]))) +
>     stat_cor(aes(x = Age, y = unlist(df[i]), group=1, color="black",
>                  label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~")))
>
>   ggsave(p1, file=paste0("Age_", names(df)[i], ".png"), scale=1)
> }
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jul 11 18:11:26 2020
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 11 Jul 2020 12:11:26 -0400
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CABcYAdLjywLozR7hn_JTBnx=WyAxuMHJ5HHtwdOUVtjTjeye8w@mail.gmail.com>
References: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <CABcYAdLfdoHUS6BhhPGvSx0epopBAzoR4H-sChShy6rh_mosgw@mail.gmail.com>
 <CAGgJW74QdODbH0gUcAa2qrKePwk54ugrRgtab64kWXYvhHqjEw@mail.gmail.com>
 <CABcYAdLjywLozR7hn_JTBnx=WyAxuMHJ5HHtwdOUVtjTjeye8w@mail.gmail.com>
Message-ID: <00ed01d6579d$ee3549c0$ca9fdd40$@verizon.net>

There are many ways to do what is requested and some are fairly simple and
robust. A simple switch statement will do if you write some code but
consider using a function from some package for simple vectors or factors.

You could use the recode() or recode_factor() functions in package dplyr or
other similar functions elsewhere and type in the conversions like so:

library("dplyr")

xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")

xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)

sample <- rep(xc, each=3)

recode(sample,
       "1" = 1,
       "1a" = 1.3,
       "1b" = 1.5,
       "1c" = 1.7,
       "2" = 2,
       "2a" =2.3,
       "2b" = 2.5,
       "2c" = 2.7)

That returns:

[1] 1.0 1.0 1.0 1.3 1.3 1.3 1.5 1.5 1.5 1.7 1.7 1.7 2.0 2.0 2.0 2.3 2.3 2.3
2.5 2.5 2.5 2.7 2.7 2.7

To use the original vectors would be a tad harder but doable perhaps using
some indirection.

As has been noted, you need to be careful in matching things to use the
entire item from beginning to end as matching  a substring can produce odd
results. If you add this code to the above, in a silly way, it works for a
more general case:

library(glue)

converted <- sample
for (i in 1:length(xc)) {
  converted <- sub(glue("^{xc[i]}$"), xn[i], converted)
}

result <- as.numeric(converted)

Returns:

> result
 [1] 1.0 1.0 1.0 1.3 1.3 1.3 1.5 1.5 1.5 1.7 1.7 1.7 2.0 2.0 2.0 2.3 2.3 2.3
2.5 2.5 2.5 2.7 2.7 2.7

Not necessarily efficient but it works. You could use something like
glue::glue() to create the arguments you want to use for something like
recode() in more complex cases and so on.

I think we have had enough solutions and methods posted but there are likely
many more as there is rarely only one way to do things in R.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Richard O'Keefe
Sent: Saturday, July 11, 2020 3:02 AM
To: Eric Berger <ericjberger at gmail.com>
Cc: Jean-Louis Abitbol <abitbol at sent.com>; R Project Help
<r-help at r-project.org>
Subject: Re: [R] Character (1a, 1b) to numeric

The string index approach works with any mapping from stage names to stage
numbers, not just regular ones.  For example, if we had "1" -> 1, "1a" ->
1.4, "1b" -> 1.6 "2" -> 2, "2a" -> 2.3, "2b" -> 2.7 the 'sub' version would
fail miserably while the string index version would just work.  The 'sub'
version would also not work terribly well if the mapping were "1" -> 1, "a1"
-> 1.3, "b1" -> 1.5, "c1" -> 1.7 and so on. The thing I like about the
indexing approach is that it uses a fundamental operation of the language
very directly.

Anyone using R would do well to *master* what indexing can do for you.


On Sat, 11 Jul 2020 at 17:16, Eric Berger <ericjberger at gmail.com> wrote:

> xn <- as.numeric(sub("c",".7",sub("b",".5",sub("a",".3",xc))))
>
>
> On Sat, Jul 11, 2020 at 5:09 AM Richard O'Keefe <raoknz at gmail.com> wrote:
>
>> This can be done very simply because vectors in R can have named 
>> elements, and can be indexed by strings.
>>
>> > stage <- c("1" = 1, "1a" = 1.3, "1b" = 1.5, "1c" = 1.7,
>> +            "2" = 2, "2a" = 2.3, "2b" = 2.5, "2c" = 2.7,
>> +            "3" = 3, "3a" = 3.3, "3b" = 3.5, "3c" = 3.7)
>>
>> > testdata <- rep(c("1", "1a", "1b", "1c",
>> +                   "2", "2a", "2b", "2c",
>> +                   "3", "3a", "3b", "3c"), times=c(1:6,6:1))
>>
>> > stage[testdata]
>>   1  1a  1a  1b  1b  1b  1c  1c  1c  1c   2   2   2   2   2  2a  2a  2a
>> 2a
>>  2a
>> 1.0 1.3 1.3 1.5 1.5 1.5 1.7 1.7 1.7 1.7 2.0 2.0 2.0 2.0 2.0 2.3 2.3 
>> 2.3
>> 2.3
>> 2.3
>>  2a  2b  2b  2b  2b  2b  2b  2c  2c  2c  2c  2c   3   3   3   3  3a  3a
>> 3a
>>  3b
>> 2.3 2.5 2.5 2.5 2.5 2.5 2.5 2.7 2.7 2.7 2.7 2.7 3.0 3.0 3.0 3.0 3.3 
>> 3.3
>> 3.3
>> 3.5
>>  3b  3c
>> 3.5 3.7
>>
>> On Sat, 11 Jul 2020 at 05:51, Jean-Louis Abitbol <abitbol at sent.com>
>> wrote:
>>
>> > Dear All
>> >
>> > I have a character vector,  representing histology stages, such as 
>> > for
>> > example:
>> > xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
>> >
>> > and this goes on to 3, 3a etc in various order for each patient. I 
>> > do
>> have
>> > of course a pre-established  classification available which does 
>> > change according to the histology criteria under assessment.
>> >
>> > I would want to convert xc, for plotting reasons, to a numeric 
>> > vector
>> such
>> > as
>> >
>> > xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
>> >
>> > Unfortunately I have no clue on how to do that.
>> >
>> > Thanks for any help and apologies if I am missing the obvious way 
>> > to do
>> it.
>> >
>> > JL
>> > --
>> > Verif30042020
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @@ch|n@p@t|| @end|ng |rom vergoc||n|c@|@@|n  Sat Jul 11 11:45:33 2020
From: @@ch|n@p@t|| @end|ng |rom vergoc||n|c@|@@|n (Sachin Patil)
Date: Sat, 11 Jul 2020 15:15:33 +0530
Subject: [R] Inquiry for R software Licensing.
Message-ID: <000a01d65768$063ee9d0$12bcbd70$@vergoclinicals.in>

Dear R Software Team,

 

We want to know about R software Licensing to procure it. Do you have R
software License version or any professional version?

 

Regards,

Sachin Patil

IT Executive

Vergo Pharma Research Pvt Ltd.

(Division - Vergo Clinicals)
Plot 24/1 D-1 Mologa de Orora, Corlim,

Tiswadi, Goa-403110 India,

Tel: +91 8326640555

 


	[[alternative HTML version deleted]]


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Sat Jul 11 19:50:05 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Sat, 11 Jul 2020 13:50:05 -0400
Subject: [R] Inquiry for R software Licensing.
In-Reply-To: <000a01d65768$063ee9d0$12bcbd70$@vergoclinicals.in>
References: <000a01d65768$063ee9d0$12bcbd70$@vergoclinicals.in>
Message-ID: <CAJc=yOEqjY7vbHH=wRHAsXf6mfbZaM25ixC8wOzU+VL9PPWDWA@mail.gmail.com>

There's only one version and it's free.

On Sat, Jul 11, 2020 at 1:46 PM Sachin Patil
<sachin.patil at vergoclinicals.in> wrote:
>
> Dear R Software Team,
>
>
>
> We want to know about R software Licensing to procure it. Do you have R
> software License version or any professional version?
>
>
>
> Regards,
>
> Sachin Patil
>
> IT Executive
>
> Vergo Pharma Research Pvt Ltd.
>
> (Division - Vergo Clinicals)
> Plot 24/1 D-1 Mologa de Orora, Corlim,
>
> Tiswadi, Goa-403110 India,
>
> Tel: +91 8326640555
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Jul 11 20:01:28 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sat, 11 Jul 2020 11:01:28 -0700
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CABcYAdLfdoHUS6BhhPGvSx0epopBAzoR4H-sChShy6rh_mosgw@mail.gmail.com>
References: <aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <CABcYAdLfdoHUS6BhhPGvSx0epopBAzoR4H-sChShy6rh_mosgw@mail.gmail.com>
Message-ID: <85dd888f-4b0e-c8fc-d6a2-dd22b8040516@comcast.net>

It might be easier to simply assign names to the numeric vector if you 
already have numeric and character vectors of the right lengths. Using 
Heibergers's vectors:


xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)

names(xn) <- xc

testdata <- rep(c("1", "1a", "1b", "1c",
                     "2", "2a", "2b", "2c",
                    "3", "3a", "3b", "3c"), times=c(1:6,6:1))

xn[ testdata ]  #  NA's when there's no match is a feature.

-- 
David.

On 7/10/20 7:08 PM, Richard O'Keefe wrote:
> This can be done very simply because vectors in R can have
> named elements, and can be indexed by strings.
>
>> stage <- c("1" = 1, "1a" = 1.3, "1b" = 1.5, "1c" = 1.7,
> +            "2" = 2, "2a" = 2.3, "2b" = 2.5, "2c" = 2.7,
> +            "3" = 3, "3a" = 3.3, "3b" = 3.5, "3c" = 3.7)
>
>> testdata <- rep(c("1", "1a", "1b", "1c",
> +                   "2", "2a", "2b", "2c",
> +                   "3", "3a", "3b", "3c"), times=c(1:6,6:1))
>
>> stage[testdata]
>    1  1a  1a  1b  1b  1b  1c  1c  1c  1c   2   2   2   2   2  2a  2a  2a  2a
>   2a
> 1.0 1.3 1.3 1.5 1.5 1.5 1.7 1.7 1.7 1.7 2.0 2.0 2.0 2.0 2.0 2.3 2.3 2.3 2.3
> 2.3
>   2a  2b  2b  2b  2b  2b  2b  2c  2c  2c  2c  2c   3   3   3   3  3a  3a  3a
>   3b
> 2.3 2.5 2.5 2.5 2.5 2.5 2.5 2.7 2.7 2.7 2.7 2.7 3.0 3.0 3.0 3.0 3.3 3.3 3.3
> 3.5
>   3b  3c
> 3.5 3.7
>
> On Sat, 11 Jul 2020 at 05:51, Jean-Louis Abitbol <abitbol at sent.com> wrote:
>
>> Dear All
>>
>> I have a character vector,  representing histology stages, such as for
>> example:
>> xc <-  c("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
>>
>> and this goes on to 3, 3a etc in various order for each patient. I do have
>> of course a pre-established  classification available which does change
>> according to the histology criteria under assessment.
>>
>> I would want to convert xc, for plotting reasons, to a numeric vector such
>> as
>>
>> xn <- c(1, 1.3, 1.5, 1.7, 2, 2.3, 2.5, 2.7)
>>
>> Unfortunately I have no clue on how to do that.
>>
>> Thanks for any help and apologies if I am missing the obvious way to do it.
>>
>> JL
>> --
>> Verif30042020
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul 11 20:01:54 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 11 Jul 2020 11:01:54 -0700
Subject: [R] Inquiry for R software Licensing.
In-Reply-To: <CAJc=yOEqjY7vbHH=wRHAsXf6mfbZaM25ixC8wOzU+VL9PPWDWA@mail.gmail.com>
References: <000a01d65768$063ee9d0$12bcbd70$@vergoclinicals.in>
 <CAJc=yOEqjY7vbHH=wRHAsXf6mfbZaM25ixC8wOzU+VL9PPWDWA@mail.gmail.com>
Message-ID: <CAGxFJbQY0gmQqpiK1v4_NXXAWLPRC7QmqhzpVeU+Nv1sMwZNDA@mail.gmail.com>

... and details for downloading including worldwide repositories (i.e.
*mirrors*) can be found here:
https://cran.r-project.org/

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jul 11, 2020 at 10:56 AM Patrick (Malone Quantitative) <
malone at malonequantitative.com> wrote:

> There's only one version and it's free.
>
> On Sat, Jul 11, 2020 at 1:46 PM Sachin Patil
> <sachin.patil at vergoclinicals.in> wrote:
> >
> > Dear R Software Team,
> >
> >
> >
> > We want to know about R software Licensing to procure it. Do you have R
> > software License version or any professional version?
> >
> >
> >
> > Regards,
> >
> > Sachin Patil
> >
> > IT Executive
> >
> > Vergo Pharma Research Pvt Ltd.
> >
> > (Division - Vergo Clinicals)
> > Plot 24/1 D-1 Mologa de Orora, Corlim,
> >
> > Tiswadi, Goa-403110 India,
> >
> > Tel: +91 8326640555
> >
> >
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Patrick S. Malone, Ph.D., Malone Quantitative
> NEW Service Models: http://malonequantitative.com
>
> He/Him/His
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From S@E|||@on @end|ng |rom LGCGroup@com  Sun Jul 12 00:19:48 2020
From: S@E|||@on @end|ng |rom LGCGroup@com (Stephen Ellison)
Date: Sat, 11 Jul 2020 22:19:48 +0000
Subject: [R] Inquiry for R software Licensing.
In-Reply-To: <CAJc=yOEqjY7vbHH=wRHAsXf6mfbZaM25ixC8wOzU+VL9PPWDWA@mail.gmail.com>
References: <000a01d65768$063ee9d0$12bcbd70$@vergoclinicals.in>
 <CAJc=yOEqjY7vbHH=wRHAsXf6mfbZaM25ixC8wOzU+VL9PPWDWA@mail.gmail.com>
Message-ID: <f6e5e39e5ad7424fa7eae7bbbaff48c5@GBDCVPEXC08.corp.lgc-group.com>

> Patrick (Malone Quantitative)
> There's only one version and it's free.

You're forgetting Microsoft R, formerly Revolution R (https://mran.revolutionanalytics.com/download), which comes in open and enterprise flavours, both with multithreading and the latter with beefed up database access services (from the marketing fluff). I should say I've tried neither; the standard R download at R-project.org is fine for what I do.

S Ellison

On Sat, Jul 11, 2020 at 1:46 PM Sachin Patil <sachin.patil at vergoclinicals.in> wrote:
>
> Dear R Software Team,
>
>
>
> We want to know about R software Licensing to procure it. Do you have 
> R software License version or any professional version?
>
>
>
> Regards,
>
> Sachin Patil



*******************************************************************
This email and any attachments are confidential. Any use...{{dropped:8}}


From |@t@z@hn @end|ng |rom gm@||@com  Sun Jul 12 00:52:13 2020
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Sat, 11 Jul 2020 18:52:13 -0400
Subject: [R] Inquiry for R software Licensing.
In-Reply-To: <f6e5e39e5ad7424fa7eae7bbbaff48c5@GBDCVPEXC08.corp.lgc-group.com>
References: <000a01d65768$063ee9d0$12bcbd70$@vergoclinicals.in>
 <CAJc=yOEqjY7vbHH=wRHAsXf6mfbZaM25ixC8wOzU+VL9PPWDWA@mail.gmail.com>
 <f6e5e39e5ad7424fa7eae7bbbaff48c5@GBDCVPEXC08.corp.lgc-group.com>
Message-ID: <CA+vqiLGsf4v3rK4hVqJLs5G7Ry-vc8S3HMPmRMnWZwXojg9=Ng@mail.gmail.com>

On Sat, Jul 11, 2020 at 6:20 PM Stephen Ellison <S.Ellison at lgcgroup.com> wrote:
>
> > Patrick (Malone Quantitative)
> > There's only one version and it's free.
>
> You're forgetting Microsoft R, formerly Revolution R (https://mran.revolutionanalytics.com/download), which comes in open and enterprise flavours, both with multithreading and the latter with beefed up database access services (from the marketing fluff).

Is there actually an enterprise version? All I've ever seen is MRO,
which hasn't been updated from R 3.5.3.

--Ista

>
> S Ellison
>
> On Sat, Jul 11, 2020 at 1:46 PM Sachin Patil <sachin.patil at vergoclinicals.in> wrote:
> >
> > Dear R Software Team,
> >
> >
> >
> > We want to know about R software Licensing to procure it. Do you have
> > R software License version or any professional version?
> >
> >
> >
> > Regards,
> >
> > Sachin Patil
>
>
>
> *******************************************************************
> This email and any attachments are confidential. Any u...{{dropped:8}}


From @purd|e@@ @end|ng |rom gm@||@com  Sun Jul 12 01:06:19 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Sun, 12 Jul 2020 11:06:19 +1200
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
 <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>
Message-ID: <CAB8pepw=ReMgFAUPJyO3M5NQz5F=h73C-5Kp41VoOC-KMnSLLA@mail.gmail.com>

On Sat, Jul 11, 2020 at 8:04 AM Fox, John <jfox at mcmaster.ca> wrote:
> We've had several solutions, and I was curious about their relative efficiency. Here's a test

Am I the only person on this mailing list who learnt to program with ASCII...?

In theory, the most ***efficient*** solution, is to get the
ASCII/UTF8/etc values.
Then use a simple (math) formula.
No matching, no searching, required ...

Here's one possibility:

    xc <-  c ("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")

    I <- (nchar (xc) == 2)
    xn <- as.integer (substring (xc, 1, 1) )
    xn [I] <- xn [I] + (utf8ToInt (paste (substring (xc [I], 2, 2),
collapse="") ) - 96) / 4
    xn

Unfortunately, this makes R look bad.
The corresponding C implementation is simpler and presumably the
performance winner.


From drj|m|emon @end|ng |rom gm@||@com  Sun Jul 12 01:32:13 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 12 Jul 2020 09:32:13 +1000
Subject: [R] How to differ stats_cor labels by group on a ggplot
In-Reply-To: <SN2PR03MB2190440F30A01F050243549A94620@SN2PR03MB2190.namprd03.prod.outlook.com>
References: <SN2PR03MB2190BDE30A1C31CDE2518B4494650@SN2PR03MB2190.namprd03.prod.outlook.com>
 <CA+8X3fXPPR6Y_+CaVAEwPc00SyGqK4rSQqVRZg9Rtsw6RuRNew@mail.gmail.com>
 <SN2PR03MB2190440F30A01F050243549A94620@SN2PR03MB2190.namprd03.prod.outlook.com>
Message-ID: <CA+8X3fUPkawtQa4Fvj-L3ODgB5Ot=QnSWJeVw_Jrda0XYRQPMg@mail.gmail.com>

Hi Paulina,
Thanks for the data. Even after downloading a ton of packages along
with the "ggpubr" package, I get a namespace error when I try to load
it. After a bit of wrangling, I did get the code to run without the
"stat_cor" function, producing the four PNG images. My best guess is
to try the geom_label function with stat="cor", but I can't see any
argument to format the actual label. I think this is about as far as
I'm going to get.

Jim

On Sun, Jul 12, 2020 at 12:09 AM Paulina Skolasinska
<paulina.skol at hotmail.com> wrote:
>
> Thanks Tim, here is the link to the data: https://we.tl/t-c4x9Lw7LeR
> I'm posting my code again so it better matches the modified data, and because I've added several improvements in the meantime.
>
> for (i in 3:6) {
>     p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
>         geom_smooth(method="lm") +
>         geom_point(size = 4) +
>         scale_x_continuous(breaks = seq(20,90, by=10)) +
>         scale_y_continuous(breaks = seq(0.1,0.5, by=0.1)) +
>         theme_classic() +
>         expand_limits(y = 0.5) +
>         ylab(names(df)[i]) +
>         theme(axis.text.x = element_text(face="bold", size=14),
>               axis.text.y = element_text(face="bold", size=14),
>               axis.title.x = element_text(size=14, face="bold"),
>               axis.title.y = element_text(size=14, face="bold"),
>               legend.title = element_text(color="black", size=12),
>               legend.text = element_text(colour="black", size = 14, face = "bold")) +
>         geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
>         scale_colour_discrete(name="Group", labels=c("Young", "Old", "Overall")) +
>         stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i])),
>                  method = "pearson", label.x.npc = c("center"), label.y.npc="top") +
>         stat_cor(aes(x = Age, y = unlist(df[i]),
>                  label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~"),
>                  group=1, color="black"), method = "pearson",label.y=0.5, label.x.npc = c("center"),
>                  position = position_nudge(y = 0.015 * 0.5))
>
>     ggsave(p1, file=paste0("TestAge_", names(df)[i], ".png"), scale=1, width=16, height=10, units="cm")
> }
>
>
> ________________________________
> Od: Jim Lemon <drjimlemon at gmail.com>
> Wys?ane: sobota, 11 lipca 2020 04:09
> Do: Paulina Skolasinska <paulina.skol at hotmail.com>
> DW: r-help at r-project.org <r-help at r-project.org>
> Temat: Re: [R] How to differ stats_cor labels by group on a ggplot
>
> Hi Paulina,
> Without data it's hard to work out what you are doing. Even a small
> simulated data set would help to get answers.
>
> Jim
>
> On Fri, Jul 10, 2020 at 11:49 PM Paulina Skolasinska
> <paulina.skol at hotmail.com> wrote:
> >
> > 'm using ggplot2 to plot two variables at a time. I'm plotting two age groups and overall data on the same graph. I'm also using stat_cor form the ggpubr package to report correlations for the two groups and overall data.
> >
> > I want each stat_cor label to have a custom subscript - the group name ("old", "young"). I have managed to do this for the overall data, but I don't know how to add custom labels for each group separately. I'd like the labels to look like this: https://imgur.com/a/naF7uNW
> >
> > > for (i in 18:21) {
> >   p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
> >     geom_smooth(method="lm") +
> >     geom_point(size = 4) +
> >     geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
> >     scale_colour_discrete(name="Group", labels=c("young", "old", "overall")) +
> >     stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i]))) +
> >     stat_cor(aes(x = Age, y = unlist(df[i]), group=1, color="black",
> >                  label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~")))
> >
> >   ggsave(p1, file=paste0("Age_", names(df)[i], ".png"), scale=1)
> > }
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Sun Jul 12 02:04:39 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 12 Jul 2020 10:04:39 +1000
Subject: [R] Character (1a, 1b) to numeric
In-Reply-To: <CAB8pepw=ReMgFAUPJyO3M5NQz5F=h73C-5Kp41VoOC-KMnSLLA@mail.gmail.com>
References: <15064_1594403475_06AHpF6f005082_aad65cc9-be22-45df-adbb-50eeab509397@www.fastmail.com>
 <5281CE73-01D2-4D1D-92D6-4A7C70122BF9@mcmaster.ca>
 <CAE-dL2pRo_maEtvk75dOKhrsxQ8HxDFF807Hj-B4vFxQ=OYrRw@mail.gmail.com>
 <4713362B-418E-41EB-A560-1CABC5CB04EB@mcmaster.ca>
 <CAB8pepw=ReMgFAUPJyO3M5NQz5F=h73C-5Kp41VoOC-KMnSLLA@mail.gmail.com>
Message-ID: <CA+8X3fUFD1qRJC1rJBPFFu9e5ECOz8yKfUB-vgB1pjKKcCchHA@mail.gmail.com>

I'll admit that I cut my teeth on ASCII, but I worried about your
reliance on that ancient typographic ordering. I wrote a little
function:

al2num_sub<-function(x) {
 xspl<-unlist(strsplit(x,""))
 if(length(xspl) > 1)
  xspl<-paste(xspl[1],which(letters==xspl[2]),sep=".")
 return(xspl)
}
unlist(sapply(xc,al2num_sub(xc)))

that does the trick with ASCII, but there was a nagging worry that it
wouldn't work for any ordering apart from the Roman alphabet.
Unfortunately I couldn't find any way to substitute something for
"letters" that would allow me to plug in a more general solution like:

alpha.set<-c("letters","greek",...)

Maybe someone else can crack that one.

Jim

On Sun, Jul 12, 2020 at 9:07 AM Abby Spurdle <spurdle.a at gmail.com> wrote:
>
> On Sat, Jul 11, 2020 at 8:04 AM Fox, John <jfox at mcmaster.ca> wrote:
> > We've had several solutions, and I was curious about their relative efficiency. Here's a test
>
> Am I the only person on this mailing list who learnt to program with ASCII...?
>
> In theory, the most ***efficient*** solution, is to get the
> ASCII/UTF8/etc values.
> Then use a simple (math) formula.
> No matching, no searching, required ...
>
> Here's one possibility:
>
>     xc <-  c ("1", "1a", "1b", "1c", "2", "2a", "2b", "2c")
>
>     I <- (nchar (xc) == 2)
>     xn <- as.integer (substring (xc, 1, 1) )
>     xn [I] <- xn [I] + (utf8ToInt (paste (substring (xc [I], 2, 2),
> collapse="") ) - 96) / 4
>     xn
>
> Unfortunately, this makes R look bad.
> The corresponding C implementation is simpler and presumably the
> performance winner.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From p@u||n@@@ko| @end|ng |rom hotm@||@com  Sun Jul 12 03:20:02 2020
From: p@u||n@@@ko| @end|ng |rom hotm@||@com (Paulina Skolasinska)
Date: Sun, 12 Jul 2020 01:20:02 +0000
Subject: [R] How to differ stats_cor labels by group on a ggplot
In-Reply-To: <CA+8X3fUPkawtQa4Fvj-L3ODgB5Ot=QnSWJeVw_Jrda0XYRQPMg@mail.gmail.com>
References: <SN2PR03MB2190BDE30A1C31CDE2518B4494650@SN2PR03MB2190.namprd03.prod.outlook.com>
 <CA+8X3fXPPR6Y_+CaVAEwPc00SyGqK4rSQqVRZg9Rtsw6RuRNew@mail.gmail.com>
 <SN2PR03MB2190440F30A01F050243549A94620@SN2PR03MB2190.namprd03.prod.outlook.com>,
 <CA+8X3fUPkawtQa4Fvj-L3ODgB5Ot=QnSWJeVw_Jrda0XYRQPMg@mail.gmail.com>
Message-ID: <SN2PR03MB219071241A3258FEE35C46CC94630@SN2PR03MB2190.namprd03.prod.outlook.com>

Sorry for misspelling your name, Jim. Well, it seems this is not worth the effort then. If my advisor decides this is absolutely essential, I?ll add it in gimp or something. Thanks for giving it a go, Jim.

Get Outlook for iOS<https://aka.ms/o0ukef>
________________________________
From: Jim Lemon <drjimlemon at gmail.com>
Sent: Saturday, July 11, 2020 6:32:13 PM
To: Paulina Skolasinska <paulina.skol at hotmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] How to differ stats_cor labels by group on a ggplot

Hi Paulina,
Thanks for the data. Even after downloading a ton of packages along
with the "ggpubr" package, I get a namespace error when I try to load
it. After a bit of wrangling, I did get the code to run without the
"stat_cor" function, producing the four PNG images. My best guess is
to try the geom_label function with stat="cor", but I can't see any
argument to format the actual label. I think this is about as far as
I'm going to get.

Jim

On Sun, Jul 12, 2020 at 12:09 AM Paulina Skolasinska
<paulina.skol at hotmail.com> wrote:
>
> Thanks Tim, here is the link to the data: https://we.tl/t-c4x9Lw7LeR
> I'm posting my code again so it better matches the modified data, and because I've added several improvements in the meantime.
>
> for (i in 3:6) {
>     p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
>         geom_smooth(method="lm") +
>         geom_point(size = 4) +
>         scale_x_continuous(breaks = seq(20,90, by=10)) +
>         scale_y_continuous(breaks = seq(0.1,0.5, by=0.1)) +
>         theme_classic() +
>         expand_limits(y = 0.5) +
>         ylab(names(df)[i]) +
>         theme(axis.text.x = element_text(face="bold", size=14),
>               axis.text.y = element_text(face="bold", size=14),
>               axis.title.x = element_text(size=14, face="bold"),
>               axis.title.y = element_text(size=14, face="bold"),
>               legend.title = element_text(color="black", size=12),
>               legend.text = element_text(colour="black", size = 14, face = "bold")) +
>         geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
>         scale_colour_discrete(name="Group", labels=c("Young", "Old", "Overall")) +
>         stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i])),
>                  method = "pearson", label.x.npc = c("center"), label.y.npc="top") +
>         stat_cor(aes(x = Age, y = unlist(df[i]),
>                  label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~"),
>                  group=1, color="black"), method = "pearson",label.y=0.5, label.x.npc = c("center"),
>                  position = position_nudge(y = 0.015 * 0.5))
>
>     ggsave(p1, file=paste0("TestAge_", names(df)[i], ".png"), scale=1, width=16, height=10, units="cm")
> }
>
>
> ________________________________
> Od: Jim Lemon <drjimlemon at gmail.com>
> Wys?ane: sobota, 11 lipca 2020 04:09
> Do: Paulina Skolasinska <paulina.skol at hotmail.com>
> DW: r-help at r-project.org <r-help at r-project.org>
> Temat: Re: [R] How to differ stats_cor labels by group on a ggplot
>
> Hi Paulina,
> Without data it's hard to work out what you are doing. Even a small
> simulated data set would help to get answers.
>
> Jim
>
> On Fri, Jul 10, 2020 at 11:49 PM Paulina Skolasinska
> <paulina.skol at hotmail.com> wrote:
> >
> > 'm using ggplot2 to plot two variables at a time. I'm plotting two age groups and overall data on the same graph. I'm also using stat_cor form the ggpubr package to report correlations for the two groups and overall data.
> >
> > I want each stat_cor label to have a custom subscript - the group name ("old", "young"). I have managed to do this for the overall data, but I don't know how to add custom labels for each group separately. I'd like the labels to look like this: https://imgur.com/a/naF7uNW
> >
> > > for (i in 18:21) {
> >   p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
> >     geom_smooth(method="lm") +
> >     geom_point(size = 4) +
> >     geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
> >     scale_colour_discrete(name="Group", labels=c("young", "old", "overall")) +
> >     stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i]))) +
> >     stat_cor(aes(x = Age, y = unlist(df[i]), group=1, color="black",
> >                  label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~")))
> >
> >   ggsave(p1, file=paste0("Age_", names(df)[i], ".png"), scale=1)
> > }
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sun Jul 12 08:08:03 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sun, 12 Jul 2020 16:08:03 +1000
Subject: [R] How to differ stats_cor labels by group on a ggplot
In-Reply-To: <SN2PR03MB219071241A3258FEE35C46CC94630@SN2PR03MB2190.namprd03.prod.outlook.com>
References: <SN2PR03MB2190BDE30A1C31CDE2518B4494650@SN2PR03MB2190.namprd03.prod.outlook.com>
 <CA+8X3fXPPR6Y_+CaVAEwPc00SyGqK4rSQqVRZg9Rtsw6RuRNew@mail.gmail.com>
 <SN2PR03MB2190440F30A01F050243549A94620@SN2PR03MB2190.namprd03.prod.outlook.com>
 <CA+8X3fUPkawtQa4Fvj-L3ODgB5Ot=QnSWJeVw_Jrda0XYRQPMg@mail.gmail.com>
 <SN2PR03MB219071241A3258FEE35C46CC94630@SN2PR03MB2190.namprd03.prod.outlook.com>
Message-ID: <CA+8X3fWdBdopJgTmn5Wb3_=D5fmTD9sWWf-=zhkXp4R54d=Tzw@mail.gmail.com>

Okay. If you get stuck, you can always roll your own:

psdf<-read.table("sim_data.txt",header=TRUE,stringsAsFactors=FALSE)
library(plotrix)
source("supsubtext.R")
par(cex.axis=1.5)
for(i in 3:6) {
 png(paste0("TestAge_",names(psdf[i]),".png"),width=600)
 plot(psdf$Age,psdf[,i],xlim=c(20,85),ylim=c(-0.1,0.5),
  xlab="Age",ylab=names(psdf)[i],
  axes=FALSE,pch=19,col=c("green","orange")[psdf$AgeGroup+1],
  cex=2)
 fullaxis(1,col="black",lwd=1.5)
 fullaxis(2,col="black",lwd=1.5)
 # fit the entire column
 lmfit<-lm(psdf[,i]~psdf$Age)
 lmpf<-predict(lmfit,se.fit=TRUE)
 uniqage<-sort(unique(psdf$Age))
 cis<-supsmu(psdf$Age,lmpf$se.fit)$y
 lmline<-lmfit$coefficients[1]+uniqage*lmfit$coefficients[2]
 # display the overall confidence band
 polygon(c(uniqage,rev(uniqage)),c(lmline+cis,rev(lmline-cis)),
  border=NA,col="lightgray")
 # now the "young" group
 young<-psdf$AgeGroup == 0
 lmfit<-lm(psdf[young,i]~psdf[young,"Age"])
 lmpf<-predict(lmfit,se.fit=TRUE)
 uniqage<-sort(unique(psdf$Age[young]))
 cis<-supsmu(psdf$Age[young],lmpf$se.fit)$y
 lmline<-lmfit$coefficients[1]+uniqage*lmfit$coefficients[2]
 polygon(c(uniqage,rev(uniqage)),c(lmline+cis,rev(lmline-cis)),
  border=NA,col="#88ff8880")
 # now the "old" group
 old<-psdf$AgeGroup == 1
 lmfit<-lm(psdf[old,i]~psdf[old,"Age"])
 lmpf<-predict(lmfit,se.fit=TRUE)
 uniqage<-sort(unique(psdf$Age[old]))
 cis<-supsmu(psdf$Age[old],lmpf$se.fit)$y
 lmline<-lmfit$coefficients[1]+uniqage*lmfit$coefficients[2]
 polygon(c(uniqage,rev(uniqage)),c(lmline+cis,rev(lmline-cis)),
  border=NA,col="#ffaa8880")
 points(psdf$Age,psdf[,i],pch=19,
  col=c("green","orange")[psdf$AgeGroup+1],cex=2)
 # overall correlation
 corval<-cor.test(psdf$Age,psdf[,i])
 corstr<-paste0("R(overall) = ",round(corval$estimate,2),", p = ",
  round(corval$p.value,2))
 supsubtext(20,0.05,corstr,sub=2:10,col="blue")
 # young correlation
 corval<-cor.test(psdf[young,"Age"],psdf[young,i])
 corstr<-paste0("R(young) = ",round(corval$estimate,2),", p = ",
  round(corval$p.value,2))
 supsubtext(20,0,corstr,sub=2:8,col="green")
 # old correlation
 corval<-cor.test(psdf[old,"Age"],psdf[old,i])
 corstr<-paste0("R(old) = ",round(corval$estimate,2),", p = ",
  round(corval$p.value,2))
 supsubtext(20,-0.05,corstr,sub=2:6,col="orange")
 legend(40,0.5,c("Overall","Young","Old"),pch=19,
  col=c("lightgray","green","orange"))
 dev.off()
}

I've been meaning to finish off the "supsubtext" function for a while.

Jim

On Sun, Jul 12, 2020 at 11:20 AM Paulina Skolasinska
<paulina.skol at hotmail.com> wrote:
>
> Sorry for misspelling your name, Jim. Well, it seems this is not worth the effort then. If my advisor decides this is absolutely essential, I?ll add it in gimp or something. Thanks for giving it a go, Jim.
>
> Get Outlook for iOS
> ________________________________
> From: Jim Lemon <drjimlemon at gmail.com>
> Sent: Saturday, July 11, 2020 6:32:13 PM
> To: Paulina Skolasinska <paulina.skol at hotmail.com>
> Cc: r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] How to differ stats_cor labels by group on a ggplot
>
> Hi Paulina,
> Thanks for the data. Even after downloading a ton of packages along
> with the "ggpubr" package, I get a namespace error when I try to load
> it. After a bit of wrangling, I did get the code to run without the
> "stat_cor" function, producing the four PNG images. My best guess is
> to try the geom_label function with stat="cor", but I can't see any
> argument to format the actual label. I think this is about as far as
> I'm going to get.
>
> Jim
>
> On Sun, Jul 12, 2020 at 12:09 AM Paulina Skolasinska
> <paulina.skol at hotmail.com> wrote:
> >
> > Thanks Tim, here is the link to the data: https://we.tl/t-c4x9Lw7LeR
> > I'm posting my code again so it better matches the modified data, and because I've added several improvements in the meantime.
> >
> > for (i in 3:6) {
> >     p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
> >         geom_smooth(method="lm") +
> >         geom_point(size = 4) +
> >         scale_x_continuous(breaks = seq(20,90, by=10)) +
> >         scale_y_continuous(breaks = seq(0.1,0.5, by=0.1)) +
> >         theme_classic() +
> >         expand_limits(y = 0.5) +
> >         ylab(names(df)[i]) +
> >         theme(axis.text.x = element_text(face="bold", size=14),
> >               axis.text.y = element_text(face="bold", size=14),
> >               axis.title.x = element_text(size=14, face="bold"),
> >               axis.title.y = element_text(size=14, face="bold"),
> >               legend.title = element_text(color="black", size=12),
> >               legend.text = element_text(colour="black", size = 14, face = "bold")) +
> >         geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
> >         scale_colour_discrete(name="Group", labels=c("Young", "Old", "Overall")) +
> >         stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i])),
> >                  method = "pearson", label.x.npc = c("center"), label.y.npc="top") +
> >         stat_cor(aes(x = Age, y = unlist(df[i]),
> >                  label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~"),
> >                  group=1, color="black"), method = "pearson",label.y=0.5, label.x.npc = c("center"),
> >                  position = position_nudge(y = 0.015 * 0.5))
> >
> >     ggsave(p1, file=paste0("TestAge_", names(df)[i], ".png"), scale=1, width=16, height=10, units="cm")
> > }
> >
> >
> > ________________________________
> > Od: Jim Lemon <drjimlemon at gmail.com>
> > Wys?ane: sobota, 11 lipca 2020 04:09
> > Do: Paulina Skolasinska <paulina.skol at hotmail.com>
> > DW: r-help at r-project.org <r-help at r-project.org>
> > Temat: Re: [R] How to differ stats_cor labels by group on a ggplot
> >
> > Hi Paulina,
> > Without data it's hard to work out what you are doing. Even a small
> > simulated data set would help to get answers.
> >
> > Jim
> >
> > On Fri, Jul 10, 2020 at 11:49 PM Paulina Skolasinska
> > <paulina.skol at hotmail.com> wrote:
> > >
> > > 'm using ggplot2 to plot two variables at a time. I'm plotting two age groups and overall data on the same graph. I'm also using stat_cor form the ggpubr package to report correlations for the two groups and overall data.
> > >
> > > I want each stat_cor label to have a custom subscript - the group name ("old", "young"). I have managed to do this for the overall data, but I don't know how to add custom labels for each group separately. I'd like the labels to look like this: https://imgur.com/a/naF7uNW
> > >
> > > > for (i in 18:21) {
> > >   p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
> > >     geom_smooth(method="lm") +
> > >     geom_point(size = 4) +
> > >     geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
> > >     scale_colour_discrete(name="Group", labels=c("young", "old", "overall")) +
> > >     stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i]))) +
> > >     stat_cor(aes(x = Age, y = unlist(df[i]), group=1, color="black",
> > >                  label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~")))
> > >
> > >   ggsave(p1, file=paste0("Age_", names(df)[i], ".png"), scale=1)
> > > }
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.

From tri@g m@iii@g oii gvd@et@dk  Sun Jul 12 11:42:33 2020
From: tri@g m@iii@g oii gvd@et@dk (tri@g m@iii@g oii gvd@et@dk)
Date: Sun, 12 Jul 2020 11:42:33 +0200
Subject: [R] Rmpfr correlation
Message-ID: <19f3601d65830$c6231230$52693690$@gvdnet.dk>

Dear friends - I'm calculating buffer capacities by different methods and
need very high precision and package Rmpfr is working beautifully. However,
I have not been able to find out how to keep precision when finding
correlations.

library(Rmpfr)

KA <- mpfr(10^-4.6, 128)

x <- rnorm(100)*KA

y <- rnorm(100)*x

cor(x,y) # "x" must be numeric

cor(as.numeric(x),as.numeric(y))# 0.2918954

 

In my concrete application I get cor = 1 for
cor(as.numeric(dff$BB),as.numeric(BBVS)) even though I have 

 

str(summary((dff$BB)-(BBVS)))
Class 'summaryMpfr' [package "Rmpfr"] of length 6 and precision 128
 4.61351010833e-8 7.33418976521e-7 1.31009046563e-5 3.76407022709e-5
5.72386764888e-5 ...

 

I am on windows 10

R version 3.6.1
 
Best wishes
Troels Ring,
Aalborg, Denmark

 

 


This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com
<http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
p&url=/> 

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jul 12 12:59:11 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 12 Jul 2020 11:59:11 +0100
Subject: [R] Rmpfr correlation
In-Reply-To: <19f3601d65830$c6231230$52693690$@gvdnet.dk>
References: <19f3601d65830$c6231230$52693690$@gvdnet.dk>
Message-ID: <08edf449-9de1-3e82-9a17-d799289b3895@sapo.pt>

Hello,

Why not write a function COR? Not one as general purpose as stats::cor 
but a simple one, to compute the sample Pearson correlation only.


library(Rmpfr)

COR <- function(x, y){
   precBits <- getPrec(x)[1]
   n <- mpfr(length(x), precBits = precBits)
   x.bar <- mean(x)
   y.bar <- mean(y)
   numer <- sum(x*y) - n*x.bar*y.bar
   denom <- sqrt(sum(x*x) - n*x.bar*x.bar) * sqrt(sum(y*y) - n*y.bar*y.bar)
   numer/denom
}

set.seed(2020)
KA <- mpfr(10^-4.6, 128)
x <- rnorm(100)*KA
y <- rnorm(100)*x

cor(as.numeric(x), as.numeric(y)) # -0.1874986
#[1] -0.1874986

COR(x, y)
#1 'mpfr' number of precision  128   bits
#[1] -0.1874985950531874160800643775644747505073


Hope this helps,

Rui Barradas

?s 10:42 de 12/07/20, tring at gvdnet.dk escreveu:
> Dear friends - I'm calculating buffer capacities by different methods and
> need very high precision and package Rmpfr is working beautifully. However,
> I have not been able to find out how to keep precision when finding
> correlations.
> 
> library(Rmpfr)
> 
> KA <- mpfr(10^-4.6, 128)
> 
> x <- rnorm(100)*KA
> 
> y <- rnorm(100)*x
> 
> cor(x,y) # "x" must be numeric
> 
> cor(as.numeric(x),as.numeric(y))# 0.2918954
> 
>   
> 
> In my concrete application I get cor = 1 for
> cor(as.numeric(dff$BB),as.numeric(BBVS)) even though I have
> 
>   
> 
> str(summary((dff$BB)-(BBVS)))
> Class 'summaryMpfr' [package "Rmpfr"] of length 6 and precision 128
>   4.61351010833e-8 7.33418976521e-7 1.31009046563e-5 3.76407022709e-5
> 5.72386764888e-5 ...
> 
>   
> 
> I am on windows 10
> 
> R version 3.6.1
>   
> Best wishes
> Troels Ring,
> Aalborg, Denmark
> 
>   
> 
>   
> 
> 
> This email has been scanned by BullGuard antivirus protection.
> For more info visit www.bullguard.com
> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
> p&url=/>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From tri@g m@iii@g oii gvd@et@dk  Sun Jul 12 14:57:05 2020
From: tri@g m@iii@g oii gvd@et@dk (tri@g m@iii@g oii gvd@et@dk)
Date: Sun, 12 Jul 2020 14:57:05 +0200
Subject: [R] Rmpfr correlation
In-Reply-To: uZhWjmUb9myVguZhYjv5hU
References: <19f3601d65830$c6231230$52693690$@gvdnet.dk> uZhWjmUb9myVguZhYjv5hU
Message-ID: <3130301d6584b$f23c7c10$d6b57430$@gvdnet.dk>

Thanks a lot - solved the issue!

BW
Troels

-----Oprindelig meddelelse-----
Fra: Rui Barradas <ruipbarradas at sapo.pt> 
Sendt: 12. juli 2020 12:59
Til: tring at gvdnet.dk; r-help mailing list <r-help at r-project.org>
Emne: Re: [R] Rmpfr correlation

Hello,

Why not write a function COR? Not one as general purpose as stats::cor but a simple one, to compute the sample Pearson correlation only.


library(Rmpfr)

COR <- function(x, y){
   precBits <- getPrec(x)[1]
   n <- mpfr(length(x), precBits = precBits)
   x.bar <- mean(x)
   y.bar <- mean(y)
   numer <- sum(x*y) - n*x.bar*y.bar
   denom <- sqrt(sum(x*x) - n*x.bar*x.bar) * sqrt(sum(y*y) - n*y.bar*y.bar)
   numer/denom
}

set.seed(2020)
KA <- mpfr(10^-4.6, 128)
x <- rnorm(100)*KA
y <- rnorm(100)*x

cor(as.numeric(x), as.numeric(y)) # -0.1874986
#[1] -0.1874986

COR(x, y)
#1 'mpfr' number of precision  128   bits
#[1] -0.1874985950531874160800643775644747505073


Hope this helps,

Rui Barradas

?s 10:42 de 12/07/20, tring at gvdnet.dk escreveu:
> Dear friends - I'm calculating buffer capacities by different methods and
> need very high precision and package Rmpfr is working beautifully. However,
> I have not been able to find out how to keep precision when finding
> correlations.
> 
> library(Rmpfr)
> 
> KA <- mpfr(10^-4.6, 128)
> 
> x <- rnorm(100)*KA
> 
> y <- rnorm(100)*x
> 
> cor(x,y) # "x" must be numeric
> 
> cor(as.numeric(x),as.numeric(y))# 0.2918954
> 
>   
> 
> In my concrete application I get cor = 1 for
> cor(as.numeric(dff$BB),as.numeric(BBVS)) even though I have
> 
>   
> 
> str(summary((dff$BB)-(BBVS)))
> Class 'summaryMpfr' [package "Rmpfr"] of length 6 and precision 128
>   4.61351010833e-8 7.33418976521e-7 1.31009046563e-5 3.76407022709e-5
> 5.72386764888e-5 ...
> 
>   
> 
> I am on windows 10
> 
> R version 3.6.1
>   
> Best wishes
> Troels Ring,
> Aalborg, Denmark
> 
>   
> 
>   
> 
> 
> This email has been scanned by BullGuard antivirus protection.
> For more info visit www.bullguard.com
> <http://www.bullguard.com/tracking.aspx?affiliate=bullguard&buyaffiliate=smt
> p&url=/>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


This email has been scanned by BullGuard antivirus protection.
For more info visit www.bullguard.com


From ph@t@ch@u @end|ng |rom m@||@utoronto@c@  Sun Jul 12 15:52:18 2020
From: ph@t@ch@u @end|ng |rom m@||@utoronto@c@ (Phat Chau)
Date: Sun, 12 Jul 2020 13:52:18 +0000
Subject: [R] 
 Multi-level (nested) correlation structures via geepack package
Message-ID: <88023D7E-3BCB-4360-9899-8BF1583955E9@mail.utoronto.ca>

Hello,

I have a multi-level, cohort dataset with three levels: repeat measures of a response (level 1), that are collected from individual participants (level 2) who are students within a school (level 3). I would like to do a generalized estimating equation (GEE) analysis of this clustered data, but to do so I need to specify ?nested? correlation structures (e.g. exchangeable, compound symmetric, Toeplitz) to account for the within-individual and within-cluster correlations.

Here is a reference paper that describes a nested exchangeable correlation structure and nested compound symmetry: doi:10.1111/j.1541-0420.2009.01374.x.

The geepack is available in R to do GEE analyses, but it seems to me that it only allows the user to specify a correlation structure via the geepack(??corstr = ?) option which only accounts for the within-individual correlations (that arise from repeated measures). Would it be possible to specify the nested correlation structures that I refer to here to also account for the within-cluster correlations using this package?

Thank you,

Edward


	[[alternative HTML version deleted]]


From t|||@ny@deko|@ @end|ng |rom gm@||@com  Sun Jul 12 19:42:30 2020
From: t|||@ny@deko|@ @end|ng |rom gm@||@com (Tiffany Adekola)
Date: Sun, 12 Jul 2020 18:42:30 +0100
Subject: [R] Using Rvest to scrape pages
Message-ID: <CAFThPKw+b_QiB38gDz3DjNR4s7NxT5FePV86S0AKDF9v53PAAA@mail.gmail.com>

Dear All,

I am just learning how to use R programming. I want to extract reviews
from a page and loop till I extract for all pages:

#specify the first page URL
fpURL <- 'https://wordpress.org/support/plugin/easyrecipe/reviews/'

#read the HTML contents in the first page URL
contentfpURL <- read_html(fpURL)

#identify the anchor tags in the first page URL
fpAnchors <- html_nodes(contentfpURL, css='a.bbp-topic-permalink')

#extract the HREF attribute value of each anchor tag
fpHREF <- html_attr(fpAnchors, 'href')

#create empty lists to store titles & contents found in the HREF
attribute value of each anchor tag
titles = c()
contents = c()

#loop the following actions for each HREF found firstpage
for (u in fpHREF) {

   #read the HTML content of the review page
   fpURL = read_html(u)

  #identify the title anchor and read the title text
  fpreviewT = html_text(html_nodes(fpURL, css='h1.page-title'))

  #identify the content anchor and read the content text
  fpreviewC = html_text(html_nodes(fpURL, css='div.bbp-topic-content'))

  #store the review titles and contents in the previous lists
  titles = c(titles, fpreviewT)
  contents = c(contents, fpreviewC)
}
#identify the anchor tag pointing to the next summary page
npAnchor <- html_text(html_node(contentfpURL, css='a.next page-numbers'))

#extract the HREF attribute value of the anchor tag pointing to the
next summary page
npHREF <- html_attr(npAnchor, 'href')

#loop the following actions for every next summary page HREF attribute
for (u in npHREF) {

  #specify the URL of the summary page
  spURL <- read_html('npHREF')

  #identify all the anchor tags on that summary page
  spAnchors <- html_nodes(spURL, css='a.bbp-topic-permalink')

  #extract the HREF attribute value of each anchor tag
  spHREF <- html_attr(spAnchors, 'href')

  #loop the following actions for each HREF found on that summarypage

   for (u in fpHREF) {
     #read the HTML contents of the review page
     spURL = read_html(u)

      #identify the title anchor and read the title text
      spreviewT = html_text(html_nodes(spURL, css='h1.page-title'))

      #identify the content anchor and read the content text
      spreviewC = html_text(html_nodes(spURL, css='div.bbp-topic-content'))

      #store the review titles and contents in the previous lists
      titles = c(titles, spreviewT)
      contents = c(contents, spreviewC)
      }
}

I got stuck at the step to extract the HREF attribute value of the
anchor tag pointing to the next summary page with the error: Error in
UseMethod("xml_attr") :
  no applicable method for 'xml_attr' applied to an object of class "character"

 I will appreciate any help with this task.
Thanks in advance.

---Tiffany


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jul 12 21:09:10 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 12 Jul 2020 20:09:10 +0100
Subject: [R] How to differ stats_cor labels by group on a ggplot
In-Reply-To: <SN2PR03MB219071241A3258FEE35C46CC94630@SN2PR03MB2190.namprd03.prod.outlook.com>
References: <SN2PR03MB2190BDE30A1C31CDE2518B4494650@SN2PR03MB2190.namprd03.prod.outlook.com>
 <CA+8X3fXPPR6Y_+CaVAEwPc00SyGqK4rSQqVRZg9Rtsw6RuRNew@mail.gmail.com>
 <SN2PR03MB2190440F30A01F050243549A94620@SN2PR03MB2190.namprd03.prod.outlook.com>
 <CA+8X3fUPkawtQa4Fvj-L3ODgB5Ot=QnSWJeVw_Jrda0XYRQPMg@mail.gmail.com>
 <SN2PR03MB219071241A3258FEE35C46CC94630@SN2PR03MB2190.namprd03.prod.outlook.com>
Message-ID: <2981e1ad-7ea3-b686-aa78-d69a8b1d1607@sapo.pt>

Hello,

The code below puts the group names as subscripts to 'R'.
The trick is to create each of the labels with those names before 
pasting the ..p.label..
This is done by Map, calling a function f defined outside the for loop.

I have also changed your code a bit, simplifying parts of it.

1. I have named the data set df1, since df already is a base R function.
2. Instead of redefining theme() elements in the loop, I have created a 
custom one.
3. The for loop runs directly through the names of the data set df1, not 
through indices into them.
4. df1[[i]] is the same as unlist(df1[i]). And simpler.
5. After testing the code with df1[[i]], there were warnings, telling to 
use the pronoun .data, which I do.
6. The code repeated itself a lot, if you define aesthetics in the 
initial call to ggplot, there is no need to redefine them in the layers 
calls unless you are changing them. For instance, after

ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup)))


you don't have to define the same y and color again:

stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i]))


7. Some arguments (method = "pearson" and others) didn't change their 
default values and were removed.


Now the code.
Note that before writing to file, the filename is output to stdin, 
remove it, it's not part of your original code.



theme_custom_ps <- function(){

   theme_classic() %+replace%    # replace elements we want to change

     theme(axis.text.x = element_text(face = "bold", size = 14),
           axis.text.y = element_text(face = "bold", size = 14),
           axis.title.x = element_text(face = "bold", size = 14),
           axis.title.y = element_text(face = "bold", size = 14),
           legend.text = element_text(face = "bold", size = 14, colour = 
"black"),
           legend.title = element_text(size = 12, colour = "black")
     )
}


library(ggplot2)
library(ggpubr)

df1 <- read.table("sim_data.txt", header = TRUE)

group_name <- c("old", "young")
f <- function(grp, rlab) sub("R", paste0("R[", grp, "]"), rlab)

for (i in names(df1)[3:6]) {
   p1 <- ggplot(df1, mapping = aes(x = Age, y = .data[[i]], color = 
factor(AgeGroup))) +
     geom_point(size = 4) +
     geom_smooth(method = "lm", formula = y ~ x) +
     geom_smooth(mapping = aes(group = 1), method = "lm", formula = y ~ x) +
     stat_cor(aes(label = paste(Map(f, group_name, ..r.label..), 
..p.label.., sep = "~`,`~")),
              label.x.npc = "center",
              show.legend = FALSE) +
     stat_cor(aes(label = paste(sub("R", expression("R"[overall]), 
..r.label..), ..p.label.., sep = "~`,`~"),
                  group = 1, color = "black"),
              label.y = 0.5,
              label.x.npc = "center",
              position = position_nudge(y = 0.015 * 0.5),
              show.legend = FALSE) +
     scale_colour_discrete(name = "Group", labels = c("Young", "Old", 
"Overall")) +
     scale_x_continuous(breaks = seq(20, 90, by = 10)) +
     scale_y_continuous(breaks = seq(0.1, 0.5, by = 0.1)) +
     expand_limits(y = 0.5) +
     ylab(i) +
     theme_custom_ps()

   pngfile <- paste0("TestAge_", i, ".png")
   cat("filename:", pngfile, "\n")
   ggsave(p1, file = pngfile, scale = 1, width = 16, height = 10, units 
= "cm")
}


So it seems this is worth the effort after all.
Just trickier than expected.


Hope this helps,

Rui Barradas

?s 02:20 de 12/07/20, Paulina Skolasinska escreveu:
> Sorry for misspelling your name, Jim. Well, it seems this is not worth the effort then. If my advisor decides this is absolutely essential, I?ll add it in gimp or something. Thanks for giving it a go, Jim.
> 
> Get Outlook for iOS<https://aka.ms/o0ukef>
> ________________________________
> From: Jim Lemon <drjimlemon at gmail.com>
> Sent: Saturday, July 11, 2020 6:32:13 PM
> To: Paulina Skolasinska <paulina.skol at hotmail.com>
> Cc: r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] How to differ stats_cor labels by group on a ggplot
> 
> Hi Paulina,
> Thanks for the data. Even after downloading a ton of packages along
> with the "ggpubr" package, I get a namespace error when I try to load
> it. After a bit of wrangling, I did get the code to run without the
> "stat_cor" function, producing the four PNG images. My best guess is
> to try the geom_label function with stat="cor", but I can't see any
> argument to format the actual label. I think this is about as far as
> I'm going to get.
> 
> Jim
> 
> On Sun, Jul 12, 2020 at 12:09 AM Paulina Skolasinska
> <paulina.skol at hotmail.com> wrote:
>>
>> Thanks Tim, here is the link to the data: https://we.tl/t-c4x9Lw7LeR
>> I'm posting my code again so it better matches the modified data, and because I've added several improvements in the meantime.
>>
>> for (i in 3:6) {
>>      p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
>>          geom_smooth(method="lm") +
>>          geom_point(size = 4) +
>>          scale_x_continuous(breaks = seq(20,90, by=10)) +
>>          scale_y_continuous(breaks = seq(0.1,0.5, by=0.1)) +
>>          theme_classic() +
>>          expand_limits(y = 0.5) +
>>          ylab(names(df)[i]) +
>>          theme(axis.text.x = element_text(face="bold", size=14),
>>                axis.text.y = element_text(face="bold", size=14),
>>                axis.title.x = element_text(size=14, face="bold"),
>>                axis.title.y = element_text(size=14, face="bold"),
>>                legend.title = element_text(color="black", size=12),
>>                legend.text = element_text(colour="black", size = 14, face = "bold")) +
>>          geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
>>          scale_colour_discrete(name="Group", labels=c("Young", "Old", "Overall")) +
>>          stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i])),
>>                   method = "pearson", label.x.npc = c("center"), label.y.npc="top") +
>>          stat_cor(aes(x = Age, y = unlist(df[i]),
>>                   label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~"),
>>                   group=1, color="black"), method = "pearson",label.y=0.5, label.x.npc = c("center"),
>>                   position = position_nudge(y = 0.015 * 0.5))
>>
>>      ggsave(p1, file=paste0("TestAge_", names(df)[i], ".png"), scale=1, width=16, height=10, units="cm")
>> }
>>
>>
>> ________________________________
>> Od: Jim Lemon <drjimlemon at gmail.com>
>> Wys?ane: sobota, 11 lipca 2020 04:09
>> Do: Paulina Skolasinska <paulina.skol at hotmail.com>
>> DW: r-help at r-project.org <r-help at r-project.org>
>> Temat: Re: [R] How to differ stats_cor labels by group on a ggplot
>>
>> Hi Paulina,
>> Without data it's hard to work out what you are doing. Even a small
>> simulated data set would help to get answers.
>>
>> Jim
>>
>> On Fri, Jul 10, 2020 at 11:49 PM Paulina Skolasinska
>> <paulina.skol at hotmail.com> wrote:
>>>
>>> 'm using ggplot2 to plot two variables at a time. I'm plotting two age groups and overall data on the same graph. I'm also using stat_cor form the ggpubr package to report correlations for the two groups and overall data.
>>>
>>> I want each stat_cor label to have a custom subscript - the group name ("old", "young"). I have managed to do this for the overall data, but I don't know how to add custom labels for each group separately. I'd like the labels to look like this: https://imgur.com/a/naF7uNW
>>>
>>>> for (i in 18:21) {
>>>    p1 <- ggplot(df, mapping=aes(x = Age, y = unlist(df[i]), color=factor(AgeGroup))) +
>>>      geom_smooth(method="lm") +
>>>      geom_point(size = 4) +
>>>      geom_smooth(data=df, mapping = aes(x = Age, y = unlist(df[i]), group=1, color="black"), method = "lm") +
>>>      scale_colour_discrete(name="Group", labels=c("young", "old", "overall")) +
>>>      stat_cor(aes(color = factor(AgeGroup), y = unlist(df[i]))) +
>>>      stat_cor(aes(x = Age, y = unlist(df[i]), group=1, color="black",
>>>                   label = paste(sub("R",expression("R"[overall]),..r.label..), ..p.label.., sep = "~`,`~")))
>>>
>>>    ggsave(p1, file=paste0("Age_", names(df)[i], ".png"), scale=1)
>>> }
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bgunter@4567 @end|ng |rom gm@||@com  Sun Jul 12 22:18:37 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 12 Jul 2020 13:18:37 -0700
Subject: [R] 
 Multi-level (nested) correlation structures via geepack package
In-Reply-To: <88023D7E-3BCB-4360-9899-8BF1583955E9@mail.utoronto.ca>
References: <88023D7E-3BCB-4360-9899-8BF1583955E9@mail.utoronto.ca>
Message-ID: <CAGxFJbThBKgLczG5w7VJ=U9-aETKPoD+AN2uP1fLy=pA8qhzAw@mail.gmail.com>

You may get lucky, but generally such package-specific questions don't get
responses here. There are about 20000 packages after all. You might do
better posting on the r-sig-mixed-models list or by asking the package
maintainer (?maintainer) whether there is some sort of support list for the
package.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jul 12, 2020 at 9:59 AM Phat Chau <phat.chau at mail.utoronto.ca>
wrote:

> Hello,
>
> I have a multi-level, cohort dataset with three levels: repeat measures of
> a response (level 1), that are collected from individual participants
> (level 2) who are students within a school (level 3). I would like to do a
> generalized estimating equation (GEE) analysis of this clustered data, but
> to do so I need to specify ?nested? correlation structures (e.g.
> exchangeable, compound symmetric, Toeplitz) to account for the
> within-individual and within-cluster correlations.
>
> Here is a reference paper that describes a nested exchangeable correlation
> structure and nested compound symmetry:
> doi:10.1111/j.1541-0420.2009.01374.x.
>
> The geepack is available in R to do GEE analyses, but it seems to me that
> it only allows the user to specify a correlation structure via the
> geepack(??corstr = ?) option which only accounts for the within-individual
> correlations (that arise from repeated measures). Would it be possible to
> specify the nested correlation structures that I refer to here to also
> account for the within-cluster correlations using this package?
>
> Thank you,
>
> Edward
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Jul 13 01:28:50 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 12 Jul 2020 16:28:50 -0700
Subject: [R] Using Rvest to scrape pages
In-Reply-To: <CAFThPKw+b_QiB38gDz3DjNR4s7NxT5FePV86S0AKDF9v53PAAA@mail.gmail.com>
References: <CAFThPKw+b_QiB38gDz3DjNR4s7NxT5FePV86S0AKDF9v53PAAA@mail.gmail.com>
Message-ID: <b7e06018-7626-96dd-235a-a236b12e5c99@comcast.net>


On 7/12/20 10:42 AM, Tiffany Adekola wrote:
> Dear All,
>
> I am just learning how to use R programming. I want to extract reviews
> from a page and loop till I extract for all pages:
>
> #specify the first page URL
> fpURL <- 'https://wordpress.org/support/plugin/easyrecipe/reviews/'
>
> #read the HTML contents in the first page URL
> contentfpURL <- read_html(fpURL)
>
> #identify the anchor tags in the first page URL
> fpAnchors <- html_nodes(contentfpURL, css='a.bbp-topic-permalink')
>
> #extract the HREF attribute value of each anchor tag
> fpHREF <- html_attr(fpAnchors, 'href')
>
> #create empty lists to store titles & contents found in the HREF
> attribute value of each anchor tag
> titles = c()
> contents = c()
>
> #loop the following actions for each HREF found firstpage
> for (u in fpHREF) {
>
>     #read the HTML content of the review page
>     fpURL = read_html(u)
>
>    #identify the title anchor and read the title text
>    fpreviewT = html_text(html_nodes(fpURL, css='h1.page-title'))
>
>    #identify the content anchor and read the content text
>    fpreviewC = html_text(html_nodes(fpURL, css='div.bbp-topic-content'))
>
>    #store the review titles and contents in the previous lists
>    titles = c(titles, fpreviewT)
>    contents = c(contents, fpreviewC)
> }
> #identify the anchor tag pointing to the next summary page
> npAnchor <- html_text(html_node(contentfpURL, css='a.next page-numbers'))
>
> #extract the HREF attribute value of the anchor tag pointing to the
> next summary page
> npHREF <- html_attr(npAnchor, 'href')


The error occurs with the line above, but if you look at the argument to 
`html_attr` you see that the problem is higher up

str(npAnchor)
# chr NA

Perhaps the problem occurs here:


html_node(contentfpURL, css='a.next page-numbers')
#{xml_missing}
#<NA>

-- 

David.

>
> #loop the following actions for every next summary page HREF attribute
> for (u in npHREF) {
>
>    #specify the URL of the summary page
>    spURL <- read_html('npHREF')
>
>    #identify all the anchor tags on that summary page
>    spAnchors <- html_nodes(spURL, css='a.bbp-topic-permalink')
>
>    #extract the HREF attribute value of each anchor tag
>    spHREF <- html_attr(spAnchors, 'href')
>
>    #loop the following actions for each HREF found on that summarypage
>
>     for (u in fpHREF) {
>       #read the HTML contents of the review page
>       spURL = read_html(u)
>
>        #identify the title anchor and read the title text
>        spreviewT = html_text(html_nodes(spURL, css='h1.page-title'))
>
>        #identify the content anchor and read the content text
>        spreviewC = html_text(html_nodes(spURL, css='div.bbp-topic-content'))
>
>        #store the review titles and contents in the previous lists
>        titles = c(titles, spreviewT)
>        contents = c(contents, spreviewC)
>        }
> }
>
> I got stuck at the step to extract the HREF attribute value of the
> anchor tag pointing to the next summary page with the error: Error in
> UseMethod("xml_attr") :
>    no applicable method for 'xml_attr' applied to an object of class "character"
>
>   I will appreciate any help with this task.
> Thanks in advance.
>
> ---Tiffany
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From du|c@|m@ @end|ng |rom b|gpond@com  Mon Jul 13 05:06:32 2020
From: du|c@|m@ @end|ng |rom b|gpond@com (dulcalma dulcalma)
Date: Mon, 13 Jul 2020 13:06:32 +1000 (AEST)
Subject: [R] 
 Multi-level (nested) correlation structures via geepack package
In-Reply-To: <88023D7E-3BCB-4360-9899-8BF1583955E9@mail.utoronto.ca>
References: <88023D7E-3BCB-4360-9899-8BF1583955E9@mail.utoronto.ca>
Message-ID: <6ede047e.abb46.17346236796.Webtop.96@bigpond.com>

Hi

Your choice of package should partly depend on the type of dependent 
variable or Y that you are going to be dealing with
categorical/ordinal data may involve different packages than continuous 
or binary data see multgee for one.
The number of samples can also make a difference GEE with the "correct 
model" should normally have no problems with numbers 30-40; 25 or less 
would normally require corrections and a diffence package.

The doi for multgee  paper is 10.1111/biom.12054 and Touloumis paper in 
Journal of Statistical Software

For longitudinal data there is the following doi:
10.2307/2531248
and
10.1097/EDE.0b013e3181caeb90
10.1093/biomet/90.1.29
10.1007/s00362-017-0881-0
10.1002/sim.2368

a search for gee in the list of available packages should show you the 
alternatives.

As a check of the result do the statistics on another package. I 
remember doing a simple gee with an example
from a book using 4 different packages 2 of which gave poor or 
unreasonable answers

Regards

Duncan

Duncan Mackay
Department of Agronomy and Soil Science
University of New England
ARMIDALE NSW 2351



------ Original Message ------
From: "Phat Chau" <phat.chau at mail.utoronto.ca>
To: "r-help at R-project.org" <r-help at R-project.org>; "sorenh at math.aau.dk" 
<sorenh at math.aau.dk>
Sent: Sunday, 12 Jul, 2020 At 11:52 PM
Subject: Re: [R]  Multi-level (nested) correlation structures via 
geepack package

Hello,

I have a multi-level, cohort dataset with three levels: repeat measures 
of a response (level 1), that are collected from individual participants 
(level 2) who are students within a school (level 3). I would like to do 
a generalized estimating equation (GEE) analysis of this clustered data, 
but to do so I need to specify ?nested? correlation structures (e.g. 
exchangeable, compound symmetric, Toeplitz) to account for the 
within-individual and within-cluster correlations.

Here is a reference paper that describes a nested exchangeable 
correlation structure and nested compound symmetry: 
doi:10.1111/j.1541-0420.2009.01374.x.

The geepack is available in R to do GEE analyses, but it seems to me 
that it only allows the user to specify a correlation structure via the 
geepack(??corstr = ?) option which only accounts for the 
within-individual correlations (that arise from repeated measures). 
Would it be possible to specify the nested correlation structures that I 
refer to here to also account for the within-cluster correlations using 
this package?

Thank you,

Edward


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide 
http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From wewo|@k| @end|ng |rom gm@||@com  Mon Jul 13 15:41:45 2020
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Mon, 13 Jul 2020 15:41:45 +0200
Subject: [R] brms does not work with R4.0.2
Message-ID: <CAAjnpdiimUb+pC=joU3QfVvrrS9W7sXOcOyvDxkAEdSOhu+tAQ@mail.gmail.com>

Hello,

I upgraded today to R4.0.2 from 3.6.3 on my Windows machine (actually
2 of them - first desktop and then laptop just to verify the problem)
and on both of them I am getting the following error when running the
brms::brm function example code.

```
> bprior1 <- prior(student_t(5,0,10), class = b) +
+     prior(cauchy(0,2), class = sd)
> fit1 <- brm(count ~ zAge + zBase * Trt + (1|patient),
+             data = epilepsy, family = poisson(), prior = bprior1)
Compiling the C++ model
>
> fit1
Error: object 'fit1' not found
```

I tried to get some more information by setting `silent = FALSE` but
nothing is being printed.
All I see is:

```
> brm(count ~ zAge + zBase * Trt + (1|patient),
+     data = epilepsy, family = poisson(), prior = bprior1, silent=FALSE)
Compiling the C++ model
>
```

R tools is installed and I did test that they work properly.
Also:

```
system.file(package = "StanHeaders")
[1] "C:/Users/wewol/OneDrive/Documents/R/win-library/4.0/StanHeaders"
```

Help highly appreciated.

Witek
--
Witold Eryk Wolski


From @xe|@urb|z @end|ng |rom gm@||@com  Mon Jul 13 15:54:03 2020
From: @xe|@urb|z @end|ng |rom gm@||@com (Axel Urbiz)
Date: Mon, 13 Jul 2020 09:54:03 -0400
Subject: [R] lme4 - Mixed Model question
Message-ID: <E45A3535-F886-44AB-95EB-AF2F7EFC95EB@gmail.com>

Dear List, 

I?d appreciate any guidance on the following. 

I?m using a mixed effects logistic regression model, to allow coefficients to vary by a group variable. However, my case is not typical in the sense that I need to specify a different set of covariates for each level of the group variable. Say I have 3 covariates {x1, x2, x3} and 2 groups {g1, g2}. I want to specify a model for g1 that only depends on x1 and x2, and a model for g2 that only depends on x2 and x3. 

Is this possible with lme4?

Thanks,
Axel. 


From wewo|@k| @end|ng |rom gm@||@com  Mon Jul 13 15:55:35 2020
From: wewo|@k| @end|ng |rom gm@||@com (Witold E Wolski)
Date: Mon, 13 Jul 2020 15:55:35 +0200
Subject: [R] brms does not work with R4.0.2
In-Reply-To: <CAAjnpdiimUb+pC=joU3QfVvrrS9W7sXOcOyvDxkAEdSOhu+tAQ@mail.gmail.com>
References: <CAAjnpdiimUb+pC=joU3QfVvrrS9W7sXOcOyvDxkAEdSOhu+tAQ@mail.gmail.com>
Message-ID: <CAAjnpdgcFu5upjG9ozNSS8Foh1JD9hJKbdiZkJ2Lh1JHqhYe4w@mail.gmail.com>

Hello,

Got the following info from the brms package Maintainer.

"This is a caused by a problem in the current rstan CRAN version on
Windows and is not related to brms. You can find various threads that
deal with that topic on https://discourse.mc-stan.org/. For now, it
may be easiest to revert to rstan 2.19.3."

Thanks
Witek



On Mon, 13 Jul 2020 at 15:41, Witold E Wolski <wewolski at gmail.com> wrote:
>
> Hello,
>
> I upgraded today to R4.0.2 from 3.6.3 on my Windows machine (actually
> 2 of them - first desktop and then laptop just to verify the problem)
> and on both of them I am getting the following error when running the
> brms::brm function example code.
>
> ```
> > bprior1 <- prior(student_t(5,0,10), class = b) +
> +     prior(cauchy(0,2), class = sd)
> > fit1 <- brm(count ~ zAge + zBase * Trt + (1|patient),
> +             data = epilepsy, family = poisson(), prior = bprior1)
> Compiling the C++ model
> >
> > fit1
> Error: object 'fit1' not found
> ```
>
> I tried to get some more information by setting `silent = FALSE` but
> nothing is being printed.
> All I see is:
>
> ```
> > brm(count ~ zAge + zBase * Trt + (1|patient),
> +     data = epilepsy, family = poisson(), prior = bprior1, silent=FALSE)
> Compiling the C++ model
> >
> ```
>
> R tools is installed and I did test that they work properly.
> Also:
>
> ```
> system.file(package = "StanHeaders")
> [1] "C:/Users/wewol/OneDrive/Documents/R/win-library/4.0/StanHeaders"
> ```
>
> Help highly appreciated.
>
> Witek
> --
> Witold Eryk Wolski



-- 
Witold Eryk Wolski


From th|erry@onke||nx @end|ng |rom |nbo@be  Mon Jul 13 16:15:36 2020
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Mon, 13 Jul 2020 16:15:36 +0200
Subject: [R] lme4 - Mixed Model question
In-Reply-To: <E45A3535-F886-44AB-95EB-AF2F7EFC95EB@gmail.com>
References: <E45A3535-F886-44AB-95EB-AF2F7EFC95EB@gmail.com>
Message-ID: <CAJuCY5yC0bpisBfQ9qKC=JKBcUqxSzA3s_HMJwJ1HZP0uPXWuw@mail.gmail.com>

Dear Axel,

A few quick remarks.

1) This question is more suitable for r-sig-mixed-models.
2) A mixed model needs much more than two groups. If you have only a few
groups, consider a glm with group interactions.
3) Setting the value of a covariate to zero for a set of observations has
the same effect as setting its coefficient to zero for that set of
observations.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op ma 13 jul. 2020 om 16:00 schreef Axel Urbiz <axel.urbiz at gmail.com>:

> Dear List,
>
> I?d appreciate any guidance on the following.
>
> I?m using a mixed effects logistic regression model, to allow coefficients
> to vary by a group variable. However, my case is not typical in the sense
> that I need to specify a different set of covariates for each level of the
> group variable. Say I have 3 covariates {x1, x2, x3} and 2 groups {g1, g2}.
> I want to specify a model for g1 that only depends on x1 and x2, and a
> model for g2 that only depends on x2 and x3.
>
> Is this possible with lme4?
>
> Thanks,
> Axel.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@u|bern@|07 @end|ng |rom gm@||@com  Mon Jul 13 20:40:37 2020
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Mon, 13 Jul 2020 13:40:37 -0500
Subject: [R] Issues whenWorking with Daily Time Series and Generating
 Forecasts
Message-ID: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>

Dear friends, hope you are doing great,

I am working with a daily time series, the series starts on march,10, 2020
until july 9th, 2020.

I would like to know if there is a way to make it a ts object, specifying
the year, month and day with the ts function.

First, I tried setting the ts object as follows:

trainingts <- ts(Dataset2$PANCASES, frequency=7)

but when I plot trainingts, the x-axis (time axis) shows values like 5, 10,
15 and not the dates.

Secondly, I tried doing the following

trainingts2 <- ts(Dataset2$PANCASES, start=c(2020,3,10), end=c(2020,7,9),
frequency=365.25)

but with this setup, now the x-axis has extrange values like 2020.006,
2020.008, etc.

Now, when generating forecasts with auto.arima function I get extremely
large values for the y-axis, which makes the forecasts look like a flat
line:

trainingts <- ts(Dataset2$PANCASES, frequency=7)

ModelArima2 <- auto.arima(trainingts, lambda=0)
ModelArima2For <- forecast(ModelArima2, h=30)
plot(ModelArima2For)

I am providing the dput() for my dataset below.

Any help and/or guidance will be greatly appreciated,

Best regards,

Paul

 > dput(Dataset2)
structure(list(DATE = structure(c(18331, 18332, 18333, 18334,
18335, 18336, 18337, 18338, 18339, 18340, 18341, 18342, 18343,
18344, 18345, 18346, 18347, 18348, 18349, 18350, 18351, 18352,
18353, 18354, 18355, 18356, 18357, 18358, 18359, 18360, 18361,
18362, 18363, 18364, 18365, 18366, 18367, 18368, 18369, 18370,
18371, 18372, 18373, 18374, 18375, 18376, 18377, 18378, 18379,
18380, 18381, 18382, 18383, 18384, 18385, 18386, 18387, 18388,
18389, 18390, 18391, 18392, 18393, 18394, 18395, 18396, 18397,
18398, 18399, 18400, 18401, 18402, 18403, 18404, 18405, 18406,
18407, 18408, 18409, 18410, 18411, 18412, 18413, 18414, 18415,
18416, 18417, 18418, 18419, 18420, 18421, 18422, 18423, 18424,
18425, 18426, 18427, 18428, 18429, 18430, 18431, 18432, 18433,
18434, 18435, 18436, 18437, 18438, 18439, 18440, 18441, 18442,
18443, 18444, 18445, 18446, 18447, 18448, 18449, 18450, 18451,
18452), class = "Date"), PANCASES = c(1, 8, 11, 27, 36, 43, 55,
69, 86, 109, 137, 200, 313, 345, 345, 443, 558, 674, 786, 901,
989, 1181, 1181, 1317, 1475, 1673, 1801, 1988, 2100, 2249, 2528,
2752, 2974, 3234, 3400, 3472, 3574, 3751, 4016, 4210, 4273, 4467,
4658, 4821, 5166, 5338, 5538, 5779, 6021, 6021, 6378, 6532, 6720,
7090, 7090, 7197, 7523, 7731, 7868, 8070, 8282, 8448, 8616, 8783,
8944, 9118, 9268, 9449, 9606, 9726, 9867, 9977, 10116, 10267,
10577, 10926, 11183, 11447, 11728, 12131, 12531, 13018, 13463,
13837, 14095, 14609, 15044, 15463, 16004, 16425, 16854, 17233,
17889, 18586, 19211, 20059, 21418, 21422, 21962, 22597, 23351,
24274, 25222, 26030, 26752, 27314, 28030, 29037, 29905, 30658,
31686, 32785, 33550, 34463, 35237, 35995, 36983, 38149, 39334,
40291, 41251, 42216)), row.names = c(NA, -122L), class = "data.frame")

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Mon Jul 13 20:44:27 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Mon, 13 Jul 2020 12:44:27 -0600
Subject: [R] Issues whenWorking with Daily Time Series and Generating
 Forecasts
In-Reply-To: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>
References: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>
Message-ID: <CACxE24=O=ZFfF3x=Ui50avGwSyTCGxKz0yJJnmFqeA2MBbqi3g@mail.gmail.com>

Hi Paul

Have you looked at the xts or zoo packages, please?

They work very well on daily series.

Thanks,
Erin

On Mon, Jul 13, 2020 at 12:41 PM Paul Bernal <paulbernal07 at gmail.com> wrote:

> Dear friends, hope you are doing great,
>
> I am working with a daily time series, the series starts on march,10, 2020
> until july 9th, 2020.
>
> I would like to know if there is a way to make it a ts object, specifying
> the year, month and day with the ts function.
>
> First, I tried setting the ts object as follows:
>
> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>
> but when I plot trainingts, the x-axis (time axis) shows values like 5, 10,
> 15 and not the dates.
>
> Secondly, I tried doing the following
>
> trainingts2 <- ts(Dataset2$PANCASES, start=c(2020,3,10), end=c(2020,7,9),
> frequency=365.25)
>
> but with this setup, now the x-axis has extrange values like 2020.006,
> 2020.008, etc.
>
> Now, when generating forecasts with auto.arima function I get extremely
> large values for the y-axis, which makes the forecasts look like a flat
> line:
>
> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>
> ModelArima2 <- auto.arima(trainingts, lambda=0)
> ModelArima2For <- forecast(ModelArima2, h=30)
> plot(ModelArima2For)
>
> I am providing the dput() for my dataset below.
>
> Any help and/or guidance will be greatly appreciated,
>
> Best regards,
>
> Paul
>
>  > dput(Dataset2)
> structure(list(DATE = structure(c(18331, 18332, 18333, 18334,
> 18335, 18336, 18337, 18338, 18339, 18340, 18341, 18342, 18343,
> 18344, 18345, 18346, 18347, 18348, 18349, 18350, 18351, 18352,
> 18353, 18354, 18355, 18356, 18357, 18358, 18359, 18360, 18361,
> 18362, 18363, 18364, 18365, 18366, 18367, 18368, 18369, 18370,
> 18371, 18372, 18373, 18374, 18375, 18376, 18377, 18378, 18379,
> 18380, 18381, 18382, 18383, 18384, 18385, 18386, 18387, 18388,
> 18389, 18390, 18391, 18392, 18393, 18394, 18395, 18396, 18397,
> 18398, 18399, 18400, 18401, 18402, 18403, 18404, 18405, 18406,
> 18407, 18408, 18409, 18410, 18411, 18412, 18413, 18414, 18415,
> 18416, 18417, 18418, 18419, 18420, 18421, 18422, 18423, 18424,
> 18425, 18426, 18427, 18428, 18429, 18430, 18431, 18432, 18433,
> 18434, 18435, 18436, 18437, 18438, 18439, 18440, 18441, 18442,
> 18443, 18444, 18445, 18446, 18447, 18448, 18449, 18450, 18451,
> 18452), class = "Date"), PANCASES = c(1, 8, 11, 27, 36, 43, 55,
> 69, 86, 109, 137, 200, 313, 345, 345, 443, 558, 674, 786, 901,
> 989, 1181, 1181, 1317, 1475, 1673, 1801, 1988, 2100, 2249, 2528,
> 2752, 2974, 3234, 3400, 3472, 3574, 3751, 4016, 4210, 4273, 4467,
> 4658, 4821, 5166, 5338, 5538, 5779, 6021, 6021, 6378, 6532, 6720,
> 7090, 7090, 7197, 7523, 7731, 7868, 8070, 8282, 8448, 8616, 8783,
> 8944, 9118, 9268, 9449, 9606, 9726, 9867, 9977, 10116, 10267,
> 10577, 10926, 11183, 11447, 11728, 12131, 12531, 13018, 13463,
> 13837, 14095, 14609, 15044, 15463, 16004, 16425, 16854, 17233,
> 17889, 18586, 19211, 20059, 21418, 21422, 21962, 22597, 23351,
> 24274, 25222, 26030, 26752, 27314, 28030, 29037, 29905, 30658,
> 31686, 32785, 33550, 34463, 35237, 35995, 36983, 38149, 39334,
> 40291, 41251, 42216)), row.names = c(NA, -122L), class = "data.frame")
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Jul 13 22:35:41 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 13 Jul 2020 22:35:41 +0200
Subject: [R] How to install libisl.so.19 on chromebook?
Message-ID: <CAMk+s2S8M9L3tZ5wu_g4yhjD2ejXmBViEhcFiyVe+PDORAmUZg@mail.gmail.com>

I am trying to install minpack.lm on R 3.3.3 on a Chromebook. But I
get this error:
```
> install.packages("minpack.lm")
Installing package into ?/home/marongiuluigi/R/x86_64-pc-linux-gnu-library/3.3?
(as ?lib? is unspecified)
trying URL 'https://cran.rstudio.com/src/contrib/minpack.lm_1.2-1.tar.gz'
Content type 'application/x-gzip' length 43029 bytes (42 KB)
==================================================
downloaded 42 KB

* installing *source* package ?minpack.lm? ...
** package ?minpack.lm? successfully unpacked and MD5 sums checked
** libs
gfortran   -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-3.3.3=.
-fstack-protector-strong  -c chkder.f -o chkder.o
/usr/local/libexec/gcc/x86_64-cros-linux-gnu/8.3.0/f951: error while
loading shared libraries: libisl.so.19: cannot open shared object
file: No such file or directory
/usr/lib/R/etc/Makeconf:155: recipe for target 'chkder.o' failed
make: *** [chkder.o] Error 1
ERROR: compilation failed for package ?minpack.lm?
* removing ?/home/marongiuluigi/R/x86_64-pc-linux-gnu-library/3.3/minpack.lm?
Warning in install.packages :
  installation of package ?minpack.lm? had non-zero exit status
```
I tried to install  libisl.so.19 but:
```
$ sudo apt-get install libisl19
Reading package lists... Done
Building dependency tree
Reading state information... Done
E: Unable to locate package libisl19
```
I downloaded libisl.so.19 for debian, but where shall I place it?
Is there an easier way to install this library?
Thank you


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jul 14 00:11:08 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 13 Jul 2020 15:11:08 -0700
Subject: [R] How to install libisl.so.19 on chromebook?
In-Reply-To: <CAMk+s2S8M9L3tZ5wu_g4yhjD2ejXmBViEhcFiyVe+PDORAmUZg@mail.gmail.com>
References: <CAMk+s2S8M9L3tZ5wu_g4yhjD2ejXmBViEhcFiyVe+PDORAmUZg@mail.gmail.com>
Message-ID: <9EFA7F96-6B3F-40B9-9104-C9D5F67C8914@dcn.davis.ca.us>

This question is off topic here (it is not about R... read the Posting Guide... contributed packages are not R), but... it is not AFAIK possible to install R on ChromeOS though you can install it within the "Linux (Beta)" container, which comes by default with the Debian distribution.

Assuming you have not altered this (your confusion about which operating system you are interacting with suggests not?) then go ask this question on R-sig-debian.

FWIW I think the description for this package is deficient... it should mention this system dependency. [1]

[1] https://cran.r-project.org/web/packages/minpack.lm/index.html

On July 13, 2020 1:35:41 PM PDT, Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>I am trying to install minpack.lm on R 3.3.3 on a Chromebook. But I
>get this error:
>```
>> install.packages("minpack.lm")
>Installing package into
>?/home/marongiuluigi/R/x86_64-pc-linux-gnu-library/3.3?
>(as ?lib? is unspecified)
>trying URL
>'https://cran.rstudio.com/src/contrib/minpack.lm_1.2-1.tar.gz'
>Content type 'application/x-gzip' length 43029 bytes (42 KB)
>==================================================
>downloaded 42 KB
>
>* installing *source* package ?minpack.lm? ...
>** package ?minpack.lm? successfully unpacked and MD5 sums checked
>** libs
>gfortran   -fpic  -g -O2 -fdebug-prefix-map=/build/r-base-3.3.3=.
>-fstack-protector-strong  -c chkder.f -o chkder.o
>/usr/local/libexec/gcc/x86_64-cros-linux-gnu/8.3.0/f951: error while
>loading shared libraries: libisl.so.19: cannot open shared object
>file: No such file or directory
>/usr/lib/R/etc/Makeconf:155: recipe for target 'chkder.o' failed
>make: *** [chkder.o] Error 1
>ERROR: compilation failed for package ?minpack.lm?
>* removing
>?/home/marongiuluigi/R/x86_64-pc-linux-gnu-library/3.3/minpack.lm?
>Warning in install.packages :
>  installation of package ?minpack.lm? had non-zero exit status
>```
>I tried to install  libisl.so.19 but:
>```
>$ sudo apt-get install libisl19
>Reading package lists... Done
>Building dependency tree
>Reading state information... Done
>E: Unable to locate package libisl19
>```
>I downloaded libisl.so.19 for debian, but where shall I place it?
>Is there an easier way to install this library?
>Thank you
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From p@u|bern@|07 @end|ng |rom gm@||@com  Tue Jul 14 00:35:51 2020
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Mon, 13 Jul 2020 17:35:51 -0500
Subject: [R] Issues whenWorking with Daily Time Series and Generating
 Forecasts
In-Reply-To: <CACxE24=O=ZFfF3x=Ui50avGwSyTCGxKz0yJJnmFqeA2MBbqi3g@mail.gmail.com>
References: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>
 <CACxE24=O=ZFfF3x=Ui50avGwSyTCGxKz0yJJnmFqeA2MBbqi3g@mail.gmail.com>
Message-ID: <CAMOcQfOJ-DwC7uRupO7SuTDaD1Nm6aadkZkNDnkYQ5N+9LBsGg@mail.gmail.com>

Dear friend Erin,

Thank you so much for your kind reply. I have not tried xts nor zoo, but I
will give it a shot and let you know how it goes.

Best regards,

Paul

El lun., 13 jul. 2020 a las 13:44, Erin Hodgess (<erinm.hodgess at gmail.com>)
escribi?:

> Hi Paul
>
> Have you looked at the xts or zoo packages, please?
>
> They work very well on daily series.
>
> Thanks,
> Erin
>
> On Mon, Jul 13, 2020 at 12:41 PM Paul Bernal <paulbernal07 at gmail.com>
> wrote:
>
>> Dear friends, hope you are doing great,
>>
>> I am working with a daily time series, the series starts on march,10, 2020
>> until july 9th, 2020.
>>
>> I would like to know if there is a way to make it a ts object, specifying
>> the year, month and day with the ts function.
>>
>> First, I tried setting the ts object as follows:
>>
>> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>>
>> but when I plot trainingts, the x-axis (time axis) shows values like 5,
>> 10,
>> 15 and not the dates.
>>
>> Secondly, I tried doing the following
>>
>> trainingts2 <- ts(Dataset2$PANCASES, start=c(2020,3,10), end=c(2020,7,9),
>> frequency=365.25)
>>
>> but with this setup, now the x-axis has extrange values like 2020.006,
>> 2020.008, etc.
>>
>> Now, when generating forecasts with auto.arima function I get extremely
>> large values for the y-axis, which makes the forecasts look like a flat
>> line:
>>
>> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>>
>> ModelArima2 <- auto.arima(trainingts, lambda=0)
>> ModelArima2For <- forecast(ModelArima2, h=30)
>> plot(ModelArima2For)
>>
>> I am providing the dput() for my dataset below.
>>
>> Any help and/or guidance will be greatly appreciated,
>>
>> Best regards,
>>
>> Paul
>>
>>  > dput(Dataset2)
>> structure(list(DATE = structure(c(18331, 18332, 18333, 18334,
>> 18335, 18336, 18337, 18338, 18339, 18340, 18341, 18342, 18343,
>> 18344, 18345, 18346, 18347, 18348, 18349, 18350, 18351, 18352,
>> 18353, 18354, 18355, 18356, 18357, 18358, 18359, 18360, 18361,
>> 18362, 18363, 18364, 18365, 18366, 18367, 18368, 18369, 18370,
>> 18371, 18372, 18373, 18374, 18375, 18376, 18377, 18378, 18379,
>> 18380, 18381, 18382, 18383, 18384, 18385, 18386, 18387, 18388,
>> 18389, 18390, 18391, 18392, 18393, 18394, 18395, 18396, 18397,
>> 18398, 18399, 18400, 18401, 18402, 18403, 18404, 18405, 18406,
>> 18407, 18408, 18409, 18410, 18411, 18412, 18413, 18414, 18415,
>> 18416, 18417, 18418, 18419, 18420, 18421, 18422, 18423, 18424,
>> 18425, 18426, 18427, 18428, 18429, 18430, 18431, 18432, 18433,
>> 18434, 18435, 18436, 18437, 18438, 18439, 18440, 18441, 18442,
>> 18443, 18444, 18445, 18446, 18447, 18448, 18449, 18450, 18451,
>> 18452), class = "Date"), PANCASES = c(1, 8, 11, 27, 36, 43, 55,
>> 69, 86, 109, 137, 200, 313, 345, 345, 443, 558, 674, 786, 901,
>> 989, 1181, 1181, 1317, 1475, 1673, 1801, 1988, 2100, 2249, 2528,
>> 2752, 2974, 3234, 3400, 3472, 3574, 3751, 4016, 4210, 4273, 4467,
>> 4658, 4821, 5166, 5338, 5538, 5779, 6021, 6021, 6378, 6532, 6720,
>> 7090, 7090, 7197, 7523, 7731, 7868, 8070, 8282, 8448, 8616, 8783,
>> 8944, 9118, 9268, 9449, 9606, 9726, 9867, 9977, 10116, 10267,
>> 10577, 10926, 11183, 11447, 11728, 12131, 12531, 13018, 13463,
>> 13837, 14095, 14609, 15044, 15463, 16004, 16425, 16854, 17233,
>> 17889, 18586, 19211, 20059, 21418, 21422, 21962, 22597, 23351,
>> 24274, 25222, 26030, 26752, 27314, 28030, 29037, 29905, 30658,
>> 31686, 32785, 33550, 34463, 35237, 35995, 36983, 38149, 39334,
>> 40291, 41251, 42216)), row.names = c(NA, -122L), class = "data.frame")
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> --
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Tue Jul 14 02:10:32 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Mon, 13 Jul 2020 18:10:32 -0600
Subject: [R] Issues whenWorking with Daily Time Series and Generating
 Forecasts
In-Reply-To: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>
References: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>
Message-ID: <CACxE24nuLXBqhdq-FSDL=H-rwkaN4_uUH+CQbMPp1=+roRt9cA@mail.gmail.com>

Hi again, Paul!

When you are plotting the final product, do you want both the original
series, the fitted values, and the forecast, please?

I am messing around with your data.

Thanks,
Erin

Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Mon, Jul 13, 2020 at 12:41 PM Paul Bernal <paulbernal07 at gmail.com> wrote:

> Dear friends, hope you are doing great,
>
> I am working with a daily time series, the series starts on march,10, 2020
> until july 9th, 2020.
>
> I would like to know if there is a way to make it a ts object, specifying
> the year, month and day with the ts function.
>
> First, I tried setting the ts object as follows:
>
> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>
> but when I plot trainingts, the x-axis (time axis) shows values like 5, 10,
> 15 and not the dates.
>
> Secondly, I tried doing the following
>
> trainingts2 <- ts(Dataset2$PANCASES, start=c(2020,3,10), end=c(2020,7,9),
> frequency=365.25)
>
> but with this setup, now the x-axis has extrange values like 2020.006,
> 2020.008, etc.
>
> Now, when generating forecasts with auto.arima function I get extremely
> large values for the y-axis, which makes the forecasts look like a flat
> line:
>
> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>
> ModelArima2 <- auto.arima(trainingts, lambda=0)
> ModelArima2For <- forecast(ModelArima2, h=30)
> plot(ModelArima2For)
>
> I am providing the dput() for my dataset below.
>
> Any help and/or guidance will be greatly appreciated,
>
> Best regards,
>
> Paul
>
>  > dput(Dataset2)
> structure(list(DATE = structure(c(18331, 18332, 18333, 18334,
> 18335, 18336, 18337, 18338, 18339, 18340, 18341, 18342, 18343,
> 18344, 18345, 18346, 18347, 18348, 18349, 18350, 18351, 18352,
> 18353, 18354, 18355, 18356, 18357, 18358, 18359, 18360, 18361,
> 18362, 18363, 18364, 18365, 18366, 18367, 18368, 18369, 18370,
> 18371, 18372, 18373, 18374, 18375, 18376, 18377, 18378, 18379,
> 18380, 18381, 18382, 18383, 18384, 18385, 18386, 18387, 18388,
> 18389, 18390, 18391, 18392, 18393, 18394, 18395, 18396, 18397,
> 18398, 18399, 18400, 18401, 18402, 18403, 18404, 18405, 18406,
> 18407, 18408, 18409, 18410, 18411, 18412, 18413, 18414, 18415,
> 18416, 18417, 18418, 18419, 18420, 18421, 18422, 18423, 18424,
> 18425, 18426, 18427, 18428, 18429, 18430, 18431, 18432, 18433,
> 18434, 18435, 18436, 18437, 18438, 18439, 18440, 18441, 18442,
> 18443, 18444, 18445, 18446, 18447, 18448, 18449, 18450, 18451,
> 18452), class = "Date"), PANCASES = c(1, 8, 11, 27, 36, 43, 55,
> 69, 86, 109, 137, 200, 313, 345, 345, 443, 558, 674, 786, 901,
> 989, 1181, 1181, 1317, 1475, 1673, 1801, 1988, 2100, 2249, 2528,
> 2752, 2974, 3234, 3400, 3472, 3574, 3751, 4016, 4210, 4273, 4467,
> 4658, 4821, 5166, 5338, 5538, 5779, 6021, 6021, 6378, 6532, 6720,
> 7090, 7090, 7197, 7523, 7731, 7868, 8070, 8282, 8448, 8616, 8783,
> 8944, 9118, 9268, 9449, 9606, 9726, 9867, 9977, 10116, 10267,
> 10577, 10926, 11183, 11447, 11728, 12131, 12531, 13018, 13463,
> 13837, 14095, 14609, 15044, 15463, 16004, 16425, 16854, 17233,
> 17889, 18586, 19211, 20059, 21418, 21422, 21962, 22597, 23351,
> 24274, 25222, 26030, 26752, 27314, 28030, 29037, 29905, 30658,
> 31686, 32785, 33550, 34463, 35237, 35995, 36983, 38149, 39334,
> 40291, 41251, 42216)), row.names = c(NA, -122L), class = "data.frame")
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@u|bern@|07 @end|ng |rom gm@||@com  Tue Jul 14 02:58:33 2020
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Mon, 13 Jul 2020 19:58:33 -0500
Subject: [R] Issues whenWorking with Daily Time Series and Generating
 Forecasts
In-Reply-To: <CACxE24nuLXBqhdq-FSDL=H-rwkaN4_uUH+CQbMPp1=+roRt9cA@mail.gmail.com>
References: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>
 <CACxE24nuLXBqhdq-FSDL=H-rwkaN4_uUH+CQbMPp1=+roRt9cA@mail.gmail.com>
Message-ID: <CAMOcQfPi99aeq=w+-hES5_xqh9+siJdQYJCDOvuuVT8hje7UHw@mail.gmail.com>

Dear friend, yes,

When I generate the forecasts i want the output to include the original
series, the fitted vaules and the forecast and I want the x-axis to show
all dates (both the dates of the historical series plus the future dares in
YYYY-mm-dd format).

Thank you so much for your kind and valuable help.

Cheers,

Paul


El lun., 13 de julio de 2020 7:10 p. m., Erin Hodgess <
erinm.hodgess at gmail.com> escribi?:

> Hi again, Paul!
>
> When you are plotting the final product, do you want both the original
> series, the fitted values, and the forecast, please?
>
> I am messing around with your data.
>
> Thanks,
> Erin
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
> On Mon, Jul 13, 2020 at 12:41 PM Paul Bernal <paulbernal07 at gmail.com>
> wrote:
>
>> Dear friends, hope you are doing great,
>>
>> I am working with a daily time series, the series starts on march,10, 2020
>> until july 9th, 2020.
>>
>> I would like to know if there is a way to make it a ts object, specifying
>> the year, month and day with the ts function.
>>
>> First, I tried setting the ts object as follows:
>>
>> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>>
>> but when I plot trainingts, the x-axis (time axis) shows values like 5,
>> 10,
>> 15 and not the dates.
>>
>> Secondly, I tried doing the following
>>
>> trainingts2 <- ts(Dataset2$PANCASES, start=c(2020,3,10), end=c(2020,7,9),
>> frequency=365.25)
>>
>> but with this setup, now the x-axis has extrange values like 2020.006,
>> 2020.008, etc.
>>
>> Now, when generating forecasts with auto.arima function I get extremely
>> large values for the y-axis, which makes the forecasts look like a flat
>> line:
>>
>> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>>
>> ModelArima2 <- auto.arima(trainingts, lambda=0)
>> ModelArima2For <- forecast(ModelArima2, h=30)
>> plot(ModelArima2For)
>>
>> I am providing the dput() for my dataset below.
>>
>> Any help and/or guidance will be greatly appreciated,
>>
>> Best regards,
>>
>> Paul
>>
>>  > dput(Dataset2)
>> structure(list(DATE = structure(c(18331, 18332, 18333, 18334,
>> 18335, 18336, 18337, 18338, 18339, 18340, 18341, 18342, 18343,
>> 18344, 18345, 18346, 18347, 18348, 18349, 18350, 18351, 18352,
>> 18353, 18354, 18355, 18356, 18357, 18358, 18359, 18360, 18361,
>> 18362, 18363, 18364, 18365, 18366, 18367, 18368, 18369, 18370,
>> 18371, 18372, 18373, 18374, 18375, 18376, 18377, 18378, 18379,
>> 18380, 18381, 18382, 18383, 18384, 18385, 18386, 18387, 18388,
>> 18389, 18390, 18391, 18392, 18393, 18394, 18395, 18396, 18397,
>> 18398, 18399, 18400, 18401, 18402, 18403, 18404, 18405, 18406,
>> 18407, 18408, 18409, 18410, 18411, 18412, 18413, 18414, 18415,
>> 18416, 18417, 18418, 18419, 18420, 18421, 18422, 18423, 18424,
>> 18425, 18426, 18427, 18428, 18429, 18430, 18431, 18432, 18433,
>> 18434, 18435, 18436, 18437, 18438, 18439, 18440, 18441, 18442,
>> 18443, 18444, 18445, 18446, 18447, 18448, 18449, 18450, 18451,
>> 18452), class = "Date"), PANCASES = c(1, 8, 11, 27, 36, 43, 55,
>> 69, 86, 109, 137, 200, 313, 345, 345, 443, 558, 674, 786, 901,
>> 989, 1181, 1181, 1317, 1475, 1673, 1801, 1988, 2100, 2249, 2528,
>> 2752, 2974, 3234, 3400, 3472, 3574, 3751, 4016, 4210, 4273, 4467,
>> 4658, 4821, 5166, 5338, 5538, 5779, 6021, 6021, 6378, 6532, 6720,
>> 7090, 7090, 7197, 7523, 7731, 7868, 8070, 8282, 8448, 8616, 8783,
>> 8944, 9118, 9268, 9449, 9606, 9726, 9867, 9977, 10116, 10267,
>> 10577, 10926, 11183, 11447, 11728, 12131, 12531, 13018, 13463,
>> 13837, 14095, 14609, 15044, 15463, 16004, 16425, 16854, 17233,
>> 17889, 18586, 19211, 20059, 21418, 21422, 21962, 22597, 23351,
>> 24274, 25222, 26030, 26752, 27314, 28030, 29037, 29905, 30658,
>> 31686, 32785, 33550, 34463, 35237, 35995, 36983, 38149, 39334,
>> 40291, 41251, 42216)), row.names = c(NA, -122L), class = "data.frame")
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Tue Jul 14 03:00:43 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Mon, 13 Jul 2020 19:00:43 -0600
Subject: [R] Issues whenWorking with Daily Time Series and Generating
 Forecasts
In-Reply-To: <CAMOcQfPi99aeq=w+-hES5_xqh9+siJdQYJCDOvuuVT8hje7UHw@mail.gmail.com>
References: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>
 <CACxE24nuLXBqhdq-FSDL=H-rwkaN4_uUH+CQbMPp1=+roRt9cA@mail.gmail.com>
 <CAMOcQfPi99aeq=w+-hES5_xqh9+siJdQYJCDOvuuVT8hje7UHw@mail.gmail.com>
Message-ID: <CACxE24krcodyEDr9N+spKQH4ZjmLz+50s3Hakg6s53wRUGt2Zw@mail.gmail.com>

I?m not entirely sure if we can do the Y-m-d format, but I will give it a
try!

Thanks

On Mon, Jul 13, 2020 at 6:58 PM Paul Bernal <paulbernal07 at gmail.com> wrote:

> Dear friend, yes,
>
> When I generate the forecasts i want the output to include the original
> series, the fitted vaules and the forecast and I want the x-axis to show
> all dates (both the dates of the historical series plus the future dares in
> YYYY-mm-dd format).
>
> Thank you so much for your kind and valuable help.
>
> Cheers,
>
> Paul
>
>
> El lun., 13 de julio de 2020 7:10 p. m., Erin Hodgess <
> erinm.hodgess at gmail.com> escribi?:
>
>> Hi again, Paul!
>>
>> When you are plotting the final product, do you want both the original
>> series, the fitted values, and the forecast, please?
>>
>> I am messing around with your data.
>>
>> Thanks,
>> Erin
>>
>> Erin Hodgess, PhD
>> mailto: erinm.hodgess at gmail.com
>>
>>
>> On Mon, Jul 13, 2020 at 12:41 PM Paul Bernal <paulbernal07 at gmail.com>
>> wrote:
>>
>>> Dear friends, hope you are doing great,
>>>
>>> I am working with a daily time series, the series starts on march,10,
>>> 2020
>>> until july 9th, 2020.
>>>
>>> I would like to know if there is a way to make it a ts object, specifying
>>> the year, month and day with the ts function.
>>>
>>> First, I tried setting the ts object as follows:
>>>
>>> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>>>
>>> but when I plot trainingts, the x-axis (time axis) shows values like 5,
>>> 10,
>>> 15 and not the dates.
>>>
>>> Secondly, I tried doing the following
>>>
>>> trainingts2 <- ts(Dataset2$PANCASES, start=c(2020,3,10), end=c(2020,7,9),
>>> frequency=365.25)
>>>
>>> but with this setup, now the x-axis has extrange values like 2020.006,
>>> 2020.008, etc.
>>>
>>> Now, when generating forecasts with auto.arima function I get extremely
>>> large values for the y-axis, which makes the forecasts look like a flat
>>> line:
>>>
>>> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>>>
>>> ModelArima2 <- auto.arima(trainingts, lambda=0)
>>> ModelArima2For <- forecast(ModelArima2, h=30)
>>> plot(ModelArima2For)
>>>
>>> I am providing the dput() for my dataset below.
>>>
>>> Any help and/or guidance will be greatly appreciated,
>>>
>>> Best regards,
>>>
>>> Paul
>>>
>>>  > dput(Dataset2)
>>> structure(list(DATE = structure(c(18331, 18332, 18333, 18334,
>>> 18335, 18336, 18337, 18338, 18339, 18340, 18341, 18342, 18343,
>>> 18344, 18345, 18346, 18347, 18348, 18349, 18350, 18351, 18352,
>>> 18353, 18354, 18355, 18356, 18357, 18358, 18359, 18360, 18361,
>>> 18362, 18363, 18364, 18365, 18366, 18367, 18368, 18369, 18370,
>>> 18371, 18372, 18373, 18374, 18375, 18376, 18377, 18378, 18379,
>>> 18380, 18381, 18382, 18383, 18384, 18385, 18386, 18387, 18388,
>>> 18389, 18390, 18391, 18392, 18393, 18394, 18395, 18396, 18397,
>>> 18398, 18399, 18400, 18401, 18402, 18403, 18404, 18405, 18406,
>>> 18407, 18408, 18409, 18410, 18411, 18412, 18413, 18414, 18415,
>>> 18416, 18417, 18418, 18419, 18420, 18421, 18422, 18423, 18424,
>>> 18425, 18426, 18427, 18428, 18429, 18430, 18431, 18432, 18433,
>>> 18434, 18435, 18436, 18437, 18438, 18439, 18440, 18441, 18442,
>>> 18443, 18444, 18445, 18446, 18447, 18448, 18449, 18450, 18451,
>>> 18452), class = "Date"), PANCASES = c(1, 8, 11, 27, 36, 43, 55,
>>> 69, 86, 109, 137, 200, 313, 345, 345, 443, 558, 674, 786, 901,
>>> 989, 1181, 1181, 1317, 1475, 1673, 1801, 1988, 2100, 2249, 2528,
>>> 2752, 2974, 3234, 3400, 3472, 3574, 3751, 4016, 4210, 4273, 4467,
>>> 4658, 4821, 5166, 5338, 5538, 5779, 6021, 6021, 6378, 6532, 6720,
>>> 7090, 7090, 7197, 7523, 7731, 7868, 8070, 8282, 8448, 8616, 8783,
>>> 8944, 9118, 9268, 9449, 9606, 9726, 9867, 9977, 10116, 10267,
>>> 10577, 10926, 11183, 11447, 11728, 12131, 12531, 13018, 13463,
>>> 13837, 14095, 14609, 15044, 15463, 16004, 16425, 16854, 17233,
>>> 17889, 18586, 19211, 20059, 21418, 21422, 21962, 22597, 23351,
>>> 24274, 25222, 26030, 26752, 27314, 28030, 29037, 29905, 30658,
>>> 31686, 32785, 33550, 34463, 35237, 35995, 36983, 38149, 39334,
>>> 40291, 41251, 42216)), row.names = c(NA, -122L), class = "data.frame")
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> --
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Tue Jul 14 03:06:49 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Mon, 13 Jul 2020 19:06:49 -0600
Subject: [R] Issues whenWorking with Daily Time Series and Generating
 Forecasts
In-Reply-To: <CAMOcQfPi99aeq=w+-hES5_xqh9+siJdQYJCDOvuuVT8hje7UHw@mail.gmail.com>
References: <CAMOcQfOfkSL8oD2mU78KY9GnB0nTMkbpd-uhN=CLyi0P8GGfOA@mail.gmail.com>
 <CACxE24nuLXBqhdq-FSDL=H-rwkaN4_uUH+CQbMPp1=+roRt9cA@mail.gmail.com>
 <CAMOcQfPi99aeq=w+-hES5_xqh9+siJdQYJCDOvuuVT8hje7UHw@mail.gmail.com>
Message-ID: <CACxE24kw5jeGXiyHQMh7+2sj+9LQzi40RBfjGQzOdk+wqtNvAA@mail.gmail.com>

Just figured out the label format!

Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Mon, Jul 13, 2020 at 6:58 PM Paul Bernal <paulbernal07 at gmail.com> wrote:

> Dear friend, yes,
>
> When I generate the forecasts i want the output to include the original
> series, the fitted vaules and the forecast and I want the x-axis to show
> all dates (both the dates of the historical series plus the future dares in
> YYYY-mm-dd format).
>
> Thank you so much for your kind and valuable help.
>
> Cheers,
>
> Paul
>
>
> El lun., 13 de julio de 2020 7:10 p. m., Erin Hodgess <
> erinm.hodgess at gmail.com> escribi?:
>
>> Hi again, Paul!
>>
>> When you are plotting the final product, do you want both the original
>> series, the fitted values, and the forecast, please?
>>
>> I am messing around with your data.
>>
>> Thanks,
>> Erin
>>
>> Erin Hodgess, PhD
>> mailto: erinm.hodgess at gmail.com
>>
>>
>> On Mon, Jul 13, 2020 at 12:41 PM Paul Bernal <paulbernal07 at gmail.com>
>> wrote:
>>
>>> Dear friends, hope you are doing great,
>>>
>>> I am working with a daily time series, the series starts on march,10,
>>> 2020
>>> until july 9th, 2020.
>>>
>>> I would like to know if there is a way to make it a ts object, specifying
>>> the year, month and day with the ts function.
>>>
>>> First, I tried setting the ts object as follows:
>>>
>>> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>>>
>>> but when I plot trainingts, the x-axis (time axis) shows values like 5,
>>> 10,
>>> 15 and not the dates.
>>>
>>> Secondly, I tried doing the following
>>>
>>> trainingts2 <- ts(Dataset2$PANCASES, start=c(2020,3,10), end=c(2020,7,9),
>>> frequency=365.25)
>>>
>>> but with this setup, now the x-axis has extrange values like 2020.006,
>>> 2020.008, etc.
>>>
>>> Now, when generating forecasts with auto.arima function I get extremely
>>> large values for the y-axis, which makes the forecasts look like a flat
>>> line:
>>>
>>> trainingts <- ts(Dataset2$PANCASES, frequency=7)
>>>
>>> ModelArima2 <- auto.arima(trainingts, lambda=0)
>>> ModelArima2For <- forecast(ModelArima2, h=30)
>>> plot(ModelArima2For)
>>>
>>> I am providing the dput() for my dataset below.
>>>
>>> Any help and/or guidance will be greatly appreciated,
>>>
>>> Best regards,
>>>
>>> Paul
>>>
>>>  > dput(Dataset2)
>>> structure(list(DATE = structure(c(18331, 18332, 18333, 18334,
>>> 18335, 18336, 18337, 18338, 18339, 18340, 18341, 18342, 18343,
>>> 18344, 18345, 18346, 18347, 18348, 18349, 18350, 18351, 18352,
>>> 18353, 18354, 18355, 18356, 18357, 18358, 18359, 18360, 18361,
>>> 18362, 18363, 18364, 18365, 18366, 18367, 18368, 18369, 18370,
>>> 18371, 18372, 18373, 18374, 18375, 18376, 18377, 18378, 18379,
>>> 18380, 18381, 18382, 18383, 18384, 18385, 18386, 18387, 18388,
>>> 18389, 18390, 18391, 18392, 18393, 18394, 18395, 18396, 18397,
>>> 18398, 18399, 18400, 18401, 18402, 18403, 18404, 18405, 18406,
>>> 18407, 18408, 18409, 18410, 18411, 18412, 18413, 18414, 18415,
>>> 18416, 18417, 18418, 18419, 18420, 18421, 18422, 18423, 18424,
>>> 18425, 18426, 18427, 18428, 18429, 18430, 18431, 18432, 18433,
>>> 18434, 18435, 18436, 18437, 18438, 18439, 18440, 18441, 18442,
>>> 18443, 18444, 18445, 18446, 18447, 18448, 18449, 18450, 18451,
>>> 18452), class = "Date"), PANCASES = c(1, 8, 11, 27, 36, 43, 55,
>>> 69, 86, 109, 137, 200, 313, 345, 345, 443, 558, 674, 786, 901,
>>> 989, 1181, 1181, 1317, 1475, 1673, 1801, 1988, 2100, 2249, 2528,
>>> 2752, 2974, 3234, 3400, 3472, 3574, 3751, 4016, 4210, 4273, 4467,
>>> 4658, 4821, 5166, 5338, 5538, 5779, 6021, 6021, 6378, 6532, 6720,
>>> 7090, 7090, 7197, 7523, 7731, 7868, 8070, 8282, 8448, 8616, 8783,
>>> 8944, 9118, 9268, 9449, 9606, 9726, 9867, 9977, 10116, 10267,
>>> 10577, 10926, 11183, 11447, 11728, 12131, 12531, 13018, 13463,
>>> 13837, 14095, 14609, 15044, 15463, 16004, 16425, 16854, 17233,
>>> 17889, 18586, 19211, 20059, 21418, 21422, 21962, 22597, 23351,
>>> 24274, 25222, 26030, 26752, 27314, 28030, 29037, 29905, 30658,
>>> 31686, 32785, 33550, 34463, 35237, 35995, 36983, 38149, 39334,
>>> 40291, 41251, 42216)), row.names = c(NA, -122L), class = "data.frame")
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From ph@t@ch@u @end|ng |rom m@||@utoronto@c@  Mon Jul 13 17:40:56 2020
From: ph@t@ch@u @end|ng |rom m@||@utoronto@c@ (Phat Chau)
Date: Mon, 13 Jul 2020 15:40:56 +0000
Subject: [R] 
 Multi-level (nested) correlation structures via geepack package
In-Reply-To: <6ede047e.abb46.17346236796.Webtop.96@bigpond.com>
References: <88023D7E-3BCB-4360-9899-8BF1583955E9@mail.utoronto.ca>
 <6ede047e.abb46.17346236796.Webtop.96@bigpond.com>
Message-ID: <AE51803C-87E9-4A99-856B-FCB8D75680DA@mail.utoronto.ca>

Hi Duncan, 

Thank you for your message. All of those citations and suggestions are wonderful and highly relevant for GEEs. My concern is that I need multi-level/nested correlation structures, whereas those handle the specification of covariance matrices at the level of repeated observations within-subject. I think the paper attached contains the theory behind such nested correlation structures, but the coding for it is not as apparent.

Edward

?On 2020-07-12, 11:06 PM, "dulcalma dulcalma" <dulcalma at bigpond.com> wrote:

    Hi
    
    Your choice of package should partly depend on the type of dependent 
    variable or Y that you are going to be dealing with
    categorical/ordinal data may involve different packages than continuous 
    or binary data see multgee for one.
    The number of samples can also make a difference GEE with the "correct 
    model" should normally have no problems with numbers 30-40; 25 or less 
    would normally require corrections and a diffence package.
    
    The doi for multgee  paper is 10.1111/biom.12054 and Touloumis paper in 
    Journal of Statistical Software
    
    For longitudinal data there is the following doi:
    10.2307/2531248
    and
    10.1097/EDE.0b013e3181caeb90
    10.1093/biomet/90.1.29
    10.1007/s00362-017-0881-0
    10.1002/sim.2368
    
    a search for gee in the list of available packages should show you the 
    alternatives.
    
    As a check of the result do the statistics on another package. I 
    remember doing a simple gee with an example
    from a book using 4 different packages 2 of which gave poor or 
    unreasonable answers
    
    Regards
    
    Duncan
    
    Duncan Mackay
    Department of Agronomy and Soil Science
    University of New England
    ARMIDALE NSW 2351
    
    
    
    ------ Original Message ------
    From: "Phat Chau" <phat.chau at mail.utoronto.ca>
    To: "r-help at R-project.org" <r-help at R-project.org>; "sorenh at math.aau.dk" 
    <sorenh at math.aau.dk>
    Sent: Sunday, 12 Jul, 2020 At 11:52 PM
    Subject: Re: [R]  Multi-level (nested) correlation structures via 
    geepack package
    
    Hello,
    
    I have a multi-level, cohort dataset with three levels: repeat measures 
    of a response (level 1), that are collected from individual participants 
    (level 2) who are students within a school (level 3). I would like to do 
    a generalized estimating equation (GEE) analysis of this clustered data, 
    but to do so I need to specify ?nested? correlation structures (e.g. 
    exchangeable, compound symmetric, Toeplitz) to account for the 
    within-individual and within-cluster correlations.
    
    Here is a reference paper that describes a nested exchangeable 
    correlation structure and nested compound symmetry: 
    doi:10.1111/j.1541-0420.2009.01374.x.
    
    The geepack is available in R to do GEE analyses, but it seems to me 
    that it only allows the user to specify a correlation structure via the 
    geepack(??corstr = ?) option which only accounts for the 
    within-individual correlations (that arise from repeated measures). 
    Would it be possible to specify the nested correlation structures that I 
    refer to here to also account for the within-cluster correlations using 
    this package?
    
    Thank you,
    
    Edward
    
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide 
    http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    
    
    
    


From m||uj|@b @end|ng |rom gm@||@com  Wed Jul 15 00:26:03 2020
From: m||uj|@b @end|ng |rom gm@||@com (Miluji Sb)
Date: Wed, 15 Jul 2020 00:26:03 +0200
Subject: [R] Year and month from a sequence
Message-ID: <CAMLwc7OkDye_N+gaDggbMC805XGwvLnhYOHy16xgUU74_pRd2A@mail.gmail.com>

Dear all,
I have a panel dataset with a large number of groups (200K+) with a
sequence representing the month of the observations (2400 - 4139). The data
is from January 1861 to December 2005.
My goal is to extract the corresponding month and year for each observation.

I tried the following;
x$dt <- seq(from=as.Date("1861-01-01"),by='1 month',length=209000)

However, the end date is clearly out of the range. I would like to convert
the month number (2400 - 4139) to January 1861 to December 2005 by ID. How
can I achieve this? Any help will be highly appreciated.

Best,

Milu

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Wed Jul 15 00:58:51 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 15 Jul 2020 08:58:51 +1000
Subject: [R] Year and month from a sequence
In-Reply-To: <CAMLwc7OkDye_N+gaDggbMC805XGwvLnhYOHy16xgUU74_pRd2A@mail.gmail.com>
References: <CAMLwc7OkDye_N+gaDggbMC805XGwvLnhYOHy16xgUU74_pRd2A@mail.gmail.com>
Message-ID: <CA+8X3fXctRvwBOLaVdu2vvKfQJWovf4U72c2-xAXhxpCnC2RqA@mail.gmail.com>

Hi Milu,
This is similar to the "birthday age" problem as it is much easier to
deal with the constant "12 months in a year" rather than the highly
variable number of days between two dates:

monthno2my<-function(x,startyear=1861,startmonth=2400) {
 year<-startyear+(x-startmonth)%/%12
 month<-1+(x-startmonth)%%12
 return(paste(month.abb[month],year))
}

Adjust this to suit what sort of output you want (i.e. numeric, date).

Jim

On Wed, Jul 15, 2020 at 8:26 AM Miluji Sb <milujisb at gmail.com> wrote:
>
> Dear all,
> I have a panel dataset with a large number of groups (200K+) with a
> sequence representing the month of the observations (2400 - 4139). The data
> is from January 1861 to December 2005.
> My goal is to extract the corresponding month and year for each observation.
>
> I tried the following;
> x$dt <- seq(from=as.Date("1861-01-01"),by='1 month',length=209000)
>
> However, the end date is clearly out of the range. I would like to convert
> the month number (2400 - 4139) to January 1861 to December 2005 by ID. How
> can I achieve this? Any help will be highly appreciated.
>
> Best,
>
> Milu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Wed Jul 15 09:04:25 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 15 Jul 2020 10:04:25 +0300
Subject: [R] Year and month from a sequence
In-Reply-To: <CA+8X3fXctRvwBOLaVdu2vvKfQJWovf4U72c2-xAXhxpCnC2RqA@mail.gmail.com>
References: <CAMLwc7OkDye_N+gaDggbMC805XGwvLnhYOHy16xgUU74_pRd2A@mail.gmail.com>
 <CA+8X3fXctRvwBOLaVdu2vvKfQJWovf4U72c2-xAXhxpCnC2RqA@mail.gmail.com>
Message-ID: <CAGgJW76vwnGy0SCSCu-tGqFrW3ATn6Eq6h-0Eub6Z9GEfZhaWg@mail.gmail.com>

Hi Milu,
Jim gave a good solution. Another approach is to use standard packages
and objects.
In particular 'ts' (time series) objects from the stats package, and
'xts' (extensible time-series) objects from the xts package.

library(xts)
# construct dummy data
z <- rnorm(36)
# convert it into a monthly time series starting from January 1861
a <- ts(z,start=c(1861,1),frequency=12)
# create an xts object from 'a'
b <- as.xts(a)

# you can use index(b) to get what you want, e.g.
as.Date(index(b))
#  [1] "1861-01-01" "1861-02-01" "1861-03-01" "1861-04-01"
"1861-05-01" "1861-06-01"
# [7] "1861-07-01" "1861-08-01" "1861-09-01" "1861-10-01" "1861-11-01"
"1861-12-01"
# [13] "1862-01-01" "1862-02-01" "1862-03-01" "1862-04-01"
"1862-05-01" "1862-06-01"
# [19] "1862-07-01" "1862-08-01" "1862-09-01" "1862-10-01"
"1862-11-01" "1862-12-01"
# [25] "1863-01-01" "1863-02-01" "1863-03-01" "1863-04-01"
"1863-05-01" "1863-06-01"
# [31] "1863-07-01" "1863-08-01" "1863-09-01" "1863-10-01"
"1863-11-01" "1863-12-01"

HTH,
Eric






On Wed, Jul 15, 2020 at 1:59 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Milu,
> This is similar to the "birthday age" problem as it is much easier to
> deal with the constant "12 months in a year" rather than the highly
> variable number of days between two dates:
>
> monthno2my<-function(x,startyear=1861,startmonth=2400) {
>  year<-startyear+(x-startmonth)%/%12
>  month<-1+(x-startmonth)%%12
>  return(paste(month.abb[month],year))
> }
>
> Adjust this to suit what sort of output you want (i.e. numeric, date).
>
> Jim
>
> On Wed, Jul 15, 2020 at 8:26 AM Miluji Sb <milujisb at gmail.com> wrote:
> >
> > Dear all,
> > I have a panel dataset with a large number of groups (200K+) with a
> > sequence representing the month of the observations (2400 - 4139). The data
> > is from January 1861 to December 2005.
> > My goal is to extract the corresponding month and year for each observation.
> >
> > I tried the following;
> > x$dt <- seq(from=as.Date("1861-01-01"),by='1 month',length=209000)
> >
> > However, the end date is clearly out of the range. I would like to convert
> > the month number (2400 - 4139) to January 1861 to December 2005 by ID. How
> > can I achieve this? Any help will be highly appreciated.
> >
> > Best,
> >
> > Milu
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jul 15 09:20:29 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 15 Jul 2020 08:20:29 +0100
Subject: [R] Year and month from a sequence
In-Reply-To: <CAMLwc7OkDye_N+gaDggbMC805XGwvLnhYOHy16xgUU74_pRd2A@mail.gmail.com>
References: <CAMLwc7OkDye_N+gaDggbMC805XGwvLnhYOHy16xgUU74_pRd2A@mail.gmail.com>
Message-ID: <e2fb8036-3da8-cc63-1eca-cd03e6f946b8@sapo.pt>

Hello,

Yet another way, with package lubridate.
When creating the "Date" objects, I set day = 1 to compare to TRUE below.


library(lubridate)

start <- as.Date(ISOdate(1861, 1, 1))
end <- as.Date(ISOdate(2005, 12, 1))

start + months(4139 - 2400)
#[1] "2005-12-01"

end == start + months(4139 - 2400)
#[1] TRUE


The argument to function months can be a vector of integers.


start + months(1:(4139 - 2400))



Then extract the months.

month(start)
month(end)
month(start + months(<value>))
month(start + months(4139 - 2400))


Hope this helps,

Rui Barradas

?s 23:26 de 14/07/20, Miluji Sb escreveu:
> Dear all,
> I have a panel dataset with a large number of groups (200K+) with a
> sequence representing the month of the observations (2400 - 4139). The data
> is from January 1861 to December 2005.
> My goal is to extract the corresponding month and year for each observation.
> 
> I tried the following;
> x$dt <- seq(from=as.Date("1861-01-01"),by='1 month',length=209000)
> 
> However, the end date is clearly out of the range. I would like to convert
> the month number (2400 - 4139) to January 1861 to December 2005 by ID. How
> can I achieve this? Any help will be highly appreciated.
> 
> Best,
> 
> Milu
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @@m@hhh1 @end|ng |rom gm@||@com  Wed Jul 15 09:45:13 2020
From: @@m@hhh1 @end|ng |rom gm@||@com (Sam H)
Date: Wed, 15 Jul 2020 03:45:13 -0400
Subject: [R] read.csv fails in R console in Ubuntu terminal but works in
 RStudio after R 3.6.3 upgrade to R 4.0.2?
Message-ID: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>

Hi,

I am trying to download some data using read.csv and it works perfectly in
RStudio and fails in the R console in the terminal in Ubuntu 18.04 after
upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the R
console in the terminal also without any issues.

Why would that be? How to fix this?

Below please find R code output and sessionInfo().

*Works in RStudio*

> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download", header=TRUE, as.is=TRUE, na="n/a")
    Symbol                                                Name
LastSale MarketCap IPOyear1      TXG
10x Genomics, Inc.  87.4400     $8.6B    20192       YI
                           111, Inc.   6.4800  $533.69M    20183
PIH              1347 Property Insurance Holdings, Inc.   4.5350
$27.52M    2014
 sessionInfo()
R version 4.0.2 (2020-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.4 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:[1] stats     graphics  grDevices utils
datasets  methods   base

loaded via a namespace (and not attached):[1] compiler_4.0.2 tools_4.0.2

*Fails in R console in terminal*

    > read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
header=TRUE, as.is=TRUE, na="n/a")
Error in file(file, "rt") :
  cannot open the connection to
'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
In addition: Warning message:
In file(file, "rt") :
  URL 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
status was 'Failure when receiving data from the peer'> traceback()3:
file(file, "rt")2: read.table(file = file, header = header, sep = sep,
quote = quote,
       dec = dec, fill = fill, comment.char = comment.char, ...)1:
read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
       header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
R version 4.0.2 (2020-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 18.04.4 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:[1] stats     graphics  grDevices utils
datasets  methods   base

loaded via a namespace (and not attached):[1] compiler_4.0.2>

I also asked this question here
https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
. Since there was no answer on stackoverflow I sent this question also to
this list.

Best regards,
Sam

	[[alternative HTML version deleted]]


From @ndy@e|pr@m@ @end|ng |rom gm@||@com  Wed Jul 15 10:31:06 2020
From: @ndy@e|pr@m@ @end|ng |rom gm@||@com (andy elprama)
Date: Wed, 15 Jul 2020 10:31:06 +0200
Subject: [R] levels
Message-ID: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>

Dear R-users,

Something strange happened within the command "levels"

R version 3.6.1
name <- c("a","b","c")
values <- c(1,2,3)
data <- data.frame(name,values)
levels(data$name)
[1] "a" "b" "c"

R version 4.0
name <- c("a","b","c")
values <- c(1,2,3)
data <- data.frame(name,values)
levels(data$name)
[1] NULL

What is happening here?

	[[alternative HTML version deleted]]


From ho@@@|nmm @end|ng |rom jun|v@edu  Wed Jul 15 13:21:50 2020
From: ho@@@|nmm @end|ng |rom jun|v@edu (Md. Moyazzem Hossain)
Date: Wed, 15 Jul 2020 12:21:50 +0100
Subject: [R] Help for forecasting by SVM
Message-ID: <CAO29qn7YkEYP=GNwDjHGC3y9Acjv+J-C6VwKe9nvG1Krs5Z49w@mail.gmail.com>

Dear Concern,

I am interested to forecast a time series by SVM.

I have used library e1071 and svm.pred. Please help me by recommending an R
code.

Thanks in advance.

*Md*

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jul 15 17:51:13 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 15 Jul 2020 08:51:13 -0700
Subject: [R] levels
In-Reply-To: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
References: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
Message-ID: <F0CFE8C8-908C-453D-B344-DAA44E23E158@dcn.davis.ca.us>

Read the NEWS about R4.0.0 [1] (search for stringsAsFactors), or read any of the many announcements in blogs and forums around the Internet.

[1] https://cran.r-project.org/doc/manuals/r-release/NEWS.html

On July 15, 2020 1:31:06 AM PDT, andy elprama <andy.elprama at gmail.com> wrote:
>Dear R-users,
>
>Something strange happened within the command "levels"
>
>R version 3.6.1
>name <- c("a","b","c")
>values <- c(1,2,3)
>data <- data.frame(name,values)
>levels(data$name)
>[1] "a" "b" "c"
>
>R version 4.0
>name <- c("a","b","c")
>values <- c(1,2,3)
>data <- data.frame(name,values)
>levels(data$name)
>[1] NULL
>
>What is happening here?
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From er|cjberger @end|ng |rom gm@||@com  Wed Jul 15 18:00:40 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 15 Jul 2020 19:00:40 +0300
Subject: [R] levels
In-Reply-To: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
References: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
Message-ID: <CAGgJW75MnJJ536U52mTebu0ye2F8L6KPuEPCY0ubP5kWT0rqrw@mail.gmail.com>

Hi Andy,
I believe this is because R 4.0 has changed the default behavior of
data.frame().
Prior to 4.0, the default was stringsAsFactors=TRUE.
In 4.0, the default is stringsAsFactors=FALSE.

If you run your code in R 3.6.1 and change the command to

data <- data.frame(name,values,stringsAsFactors=FALSE)

you will get the same behavior as in R 4.0.

HTH,
Eric


On Wed, Jul 15, 2020 at 6:45 PM andy elprama <andy.elprama at gmail.com> wrote:

> Dear R-users,
>
> Something strange happened within the command "levels"
>
> R version 3.6.1
> name <- c("a","b","c")
> values <- c(1,2,3)
> data <- data.frame(name,values)
> levels(data$name)
> [1] "a" "b" "c"
>
> R version 4.0
> name <- c("a","b","c")
> values <- c(1,2,3)
> data <- data.frame(name,values)
> levels(data$name)
> [1] NULL
>
> What is happening here?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @end|ng |rom me@com  Wed Jul 15 18:16:48 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Wed, 15 Jul 2020 12:16:48 -0400
Subject: [R] levels
In-Reply-To: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
References: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
Message-ID: <215C4371-3D8A-4792-A7C8-48B530E8DCB4@me.com>


> On Jul 15, 2020, at 4:31 AM, andy elprama <andy.elprama at gmail.com> wrote:
> 
> Dear R-users,
> 
> Something strange happened within the command "levels"
> 
> R version 3.6.1
> name <- c("a","b","c")
> values <- c(1,2,3)
> data <- data.frame(name,values)
> levels(data$name)
> [1] "a" "b" "c"
> 
> R version 4.0
> name <- c("a","b","c")
> values <- c(1,2,3)
> data <- data.frame(name,values)
> levels(data$name)
> [1] NULL
> 
> What is happening here?


Hi,

The default value for 'stringsAsFactors' for data.frame() and read.table() changed from TRUE to FALSE in version 4.0.0, per the news() file:

"R now uses a stringsAsFactors = FALSE default, and hence by default no longer converts strings to factors in calls to data.frame() and read.table()."


Using 4.0.2:

data <- data.frame(name, values, stringsAsFactors = TRUE)

> levels(data$name)
[1] "a" "b" "c"


If you see behavioral changes from one version of R to another, especially major version increments, check the news() file.

Regards,

Marc Schwartz

 

From bgunter@4567 @end|ng |rom gm@||@com  Wed Jul 15 18:26:56 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 15 Jul 2020 09:26:56 -0700
Subject: [R] Help for forecasting by SVM
In-Reply-To: <CAO29qn7YkEYP=GNwDjHGC3y9Acjv+J-C6VwKe9nvG1Krs5Z49w@mail.gmail.com>
References: <CAO29qn7YkEYP=GNwDjHGC3y9Acjv+J-C6VwKe9nvG1Krs5Z49w@mail.gmail.com>
Message-ID: <CAGxFJbTvJR8n5sDxxUKkZ-0bOYsPDF6sWgFuCxpzxz3b7fnYyA@mail.gmail.com>

Please read and follow the posting guide linked below when asking for help
here. This is not a "we do the work for you" forum.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jul 15, 2020 at 8:45 AM Md. Moyazzem Hossain <hossainmm at juniv.edu>
wrote:

> Dear Concern,
>
> I am interested to forecast a time series by SVM.
>
> I have used library e1071 and svm.pred. Please help me by recommending an R
> code.
>
> Thanks in advance.
>
> *Md*
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jul 15 18:30:32 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 15 Jul 2020 09:30:32 -0700
Subject: [R] read.csv fails in R console in Ubuntu terminal but works in
 RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
Message-ID: <CAGxFJbTQGbzzc64FftntQWbMVcJwgejHZpxS=VWmY+LBUonfVA@mail.gmail.com>

I may be wrong, but probably better posted on r-sig-debian rather than here.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jul 15, 2020 at 8:44 AM Sam H <sam.hhh1 at gmail.com> wrote:

> Hi,
>
> I am trying to download some data using read.csv and it works perfectly in
> RStudio and fails in the R console in the terminal in Ubuntu 18.04 after
> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the R
> console in the terminal also without any issues.
>
> Why would that be? How to fix this?
>
> Below please find R code output and sessionInfo().
>
> *Works in RStudio*
>
> > read.csv("
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> header=TRUE, as.is=TRUE, na="n/a")
>     Symbol                                                Name
> LastSale MarketCap IPOyear1      TXG
> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
>                            111, Inc.   6.4800  $533.69M    20183
> PIH              1347 Property Insurance Holdings, Inc.   4.5350
> $27.52M    2014
>  sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.4 LTS
>
> Matrix products: default
> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> LC_PAPER=en_US.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:[1] stats     graphics  grDevices utils
> datasets  methods   base
>
> loaded via a namespace (and not attached):[1] compiler_4.0.2 tools_4.0.2
>
> *Fails in R console in terminal*
>
>     > read.csv("
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ",
> header=TRUE, as.is=TRUE, na="n/a")
> Error in file(file, "rt") :
>   cannot open the connection to
> '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> '
> In addition: Warning message:
> In file(file, "rt") :
>   URL '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ':
> status was 'Failure when receiving data from the peer'> traceback()3:
> file(file, "rt")2: read.table(file = file, header = header, sep = sep,
> quote = quote,
>        dec = dec, fill = fill, comment.char = comment.char, ...)1:
> read.csv("
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ",
>        header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.4 LTS
>
> Matrix products: default
> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:[1] stats     graphics  grDevices utils
> datasets  methods   base
>
> loaded via a namespace (and not attached):[1] compiler_4.0.2>
>
> I also asked this question here
>
> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
> . Since there was no answer on stackoverflow I sent this question also to
> this list.
>
> Best regards,
> Sam
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Wed Jul 15 18:44:54 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Wed, 15 Jul 2020 10:44:54 -0600
Subject: [R] levels
In-Reply-To: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
References: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
Message-ID: <CACxE24mX8gv3iYEH8-dSUGGYiNkmPq1d=yvz0m2VRDNprdE3rQ@mail.gmail.com>

Hi Andy:

I just checked in "options", and the following appears:


$stringsAsFactors

[1] FALSE


I think this might be it.


You may want to look at options() in R-3.6.1.


Thanks,

Erin


Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Wed, Jul 15, 2020 at 9:45 AM andy elprama <andy.elprama at gmail.com> wrote:

> Dear R-users,
>
> Something strange happened within the command "levels"
>
> R version 3.6.1
> name <- c("a","b","c")
> values <- c(1,2,3)
> data <- data.frame(name,values)
> levels(data$name)
> [1] "a" "b" "c"
>
> R version 4.0
> name <- c("a","b","c")
> values <- c(1,2,3)
> data <- data.frame(name,values)
> levels(data$name)
> [1] NULL
>
> What is happening here?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Jul 15 23:15:24 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 16 Jul 2020 09:15:24 +1200
Subject: [R] [FORGED] read.csv fails in R console in Ubuntu terminal but
 works in RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
Message-ID: <43af8fee-5ec6-406f-68a9-e29eba148f0f@auckland.ac.nz>


On 15/07/20 7:45 pm, Sam H wrote:

> Hi,
> 
> I am trying to download some data using read.csv and it works perfectly in
> RStudio and fails in the R console in the terminal in Ubuntu 18.04 after
> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the R
> console in the terminal also without any issues.
> 
> Why would that be? How to fix this?
> 
> Below please find R code output and sessionInfo().
> 
> *Works in RStudio*

<SNIP>

> *Fails in R console in terminal*
> 
>      > read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> header=TRUE, as.is=TRUE, na="n/a")
> Error in file(file, "rt") :
>    cannot open the connection to
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> In addition: Warning message:
> In file(file, "rt") :
>    URL 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
> status was 'Failure when receiving data from the peer'> traceback()3:
> file(file, "rt")2: read.table(file = file, header = header, sep = sep,
> quote = quote,
>         dec = dec, fill = fill, comment.char = comment.char, ...)1:
> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>         header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.4 LTS

<SNIP>

I'm running Ubuntu 18.04.4 and R 4.0.2.

When I tried the foregoing read.csv() command, it just hung; nothing 
happened until I hit <ctrl>-c; no output was returned (and no error 
message appeared).  However I was able to download the file 
"companylist.csv" from the site, and then read.csv() happily read that file.

I'm afraid that I have no insight into what's going on here, and 
certainly no insight into why Rstudio can read directly from the URL but 
raw R apparently can't.  Sorry.

Perhaps enquire of Rstudio and see if *they* have any insight.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Jul 16 01:02:27 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 16 Jul 2020 00:02:27 +0100
Subject: [R] read.csv fails in R console in Ubuntu terminal but works in
 RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
Message-ID: <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>

Hello,

R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.

I'm also unable to read the file with Rscript from the Ubuntu terminal 
but the error is not the same as the OP's.


The first try was a file test1.R with the following commands.

x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
read.csv(x, as.is=TRUE, na="n/a")


And run with Rscript

rui at rui:~$ Rscript --vanilla test1.R
Error in file(file, "rt") :
   cannot open the connection to 
'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
Calls: read.csv -> read.table -> file
In addition: Warning message:
In file(file, "rt") :
   cannot open URL 
'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download': 
HTTP status was '403 Forbidden'
Execution halted



The second try was download.file() and then read it.
File test2.R is:

x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
download.file(x, "companylist.csv")
read.csv("companylist.csv", as.is=TRUE, na="n/a")


But this too failed with error 403 Forbiden.

rui at rui:~$ Rscript --vanilla test2.R
trying URL 
'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
Error in download.file(x, "companylist.csv") :
   cannot open URL 
'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
In addition: Warning message:
In download.file(x, "companylist.csv") :
   cannot open URL 
'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download': 
HTTP status was '403 Forbidden'
Execution halted


This is my session info.

rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'
R version 4.0.2 (2020-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 20.04 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0

locale:
  [1] LC_CTYPE=pt_PT.UTF-8       LC_NUMERIC=C
  [3] LC_TIME=pt_PT.UTF-8        LC_COLLATE=pt_PT.UTF-8
  [5] LC_MONETARY=pt_PT.UTF-8    LC_MESSAGES=pt_PT.UTF-8
  [7] LC_PAPER=pt_PT.UTF-8       LC_NAME=C
  [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.0.2



?s 08:45 de 15/07/20, Sam H escreveu:
> Hi,
> 
> I am trying to download some data using read.csv and it works perfectly in
> RStudio and fails in the R console in the terminal in Ubuntu 18.04 after
> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the R
> console in the terminal also without any issues.
> 
> Why would that be? How to fix this?
> 
> Below please find R code output and sessionInfo().
> 
> *Works in RStudio*
> 
>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download", header=TRUE, as.is=TRUE, na="n/a")
>      Symbol                                                Name
> LastSale MarketCap IPOyear1      TXG
> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
>                             111, Inc.   6.4800  $533.69M    20183
> PIH              1347 Property Insurance Holdings, Inc.   4.5350
> $27.52M    2014
>   sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.4 LTS
> 
> Matrix products: default
> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
> 
> locale:
>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>   [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> LC_PAPER=en_US.UTF-8       LC_NAME=C
>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> 
> attached base packages:[1] stats     graphics  grDevices utils
> datasets  methods   base
> 
> loaded via a namespace (and not attached):[1] compiler_4.0.2 tools_4.0.2
> 
> *Fails in R console in terminal*
> 
>      > read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> header=TRUE, as.is=TRUE, na="n/a")
> Error in file(file, "rt") :
>    cannot open the connection to
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> In addition: Warning message:
> In file(file, "rt") :
>    URL 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
> status was 'Failure when receiving data from the peer'> traceback()3:
> file(file, "rt")2: read.table(file = file, header = header, sep = sep,
> quote = quote,
>         dec = dec, fill = fill, comment.char = comment.char, ...)1:
> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>         header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 18.04.4 LTS
> 
> Matrix products: default
> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
> 
> locale:
>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>   [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>   [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>   [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>   [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> 
> attached base packages:[1] stats     graphics  grDevices utils
> datasets  methods   base
> 
> loaded via a namespace (and not attached):[1] compiler_4.0.2>
> 
> I also asked this question here
> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
> . Since there was no answer on stackoverflow I sent this question also to
> this list.
> 
> Best regards,
> Sam
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jul 16 06:31:22 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 15 Jul 2020 21:31:22 -0700
Subject: [R] read.csv fails in R console in Ubuntu terminal but works in
 RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
 <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>
Message-ID: <B55131C8-E007-479C-BCD9-0B484CBB0F72@dcn.davis.ca.us>

Perhaps read FAQ 7.43? [1]

[1] https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f

On July 15, 2020 4:02:27 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>Hello,
>
>R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.
>
>I'm also unable to read the file with Rscript from the Ubuntu terminal 
>but the error is not the same as the OP's.
>
>
>The first try was a file test1.R with the following commands.
>
>x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
>read.csv(x, as.is=TRUE, na="n/a")
>
>
>And run with Rscript
>
>rui at rui:~$ Rscript --vanilla test1.R
>Error in file(file, "rt") :
>   cannot open the connection to 
>'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>Calls: read.csv -> read.table -> file
>In addition: Warning message:
>In file(file, "rt") :
>   cannot open URL 
>'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>
>HTTP status was '403 Forbidden'
>Execution halted
>
>
>
>The second try was download.file() and then read it.
>File test2.R is:
>
>x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
>download.file(x, "companylist.csv")
>read.csv("companylist.csv", as.is=TRUE, na="n/a")
>
>
>But this too failed with error 403 Forbiden.
>
>rui at rui:~$ Rscript --vanilla test2.R
>trying URL 
>'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>Error in download.file(x, "companylist.csv") :
>   cannot open URL 
>'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>In addition: Warning message:
>In download.file(x, "companylist.csv") :
>   cannot open URL 
>'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>
>HTTP status was '403 Forbidden'
>Execution halted
>
>
>This is my session info.
>
>rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'
>R version 4.0.2 (2020-06-22)
>Platform: x86_64-pc-linux-gnu (64-bit)
>Running under: Ubuntu 20.04 LTS
>
>Matrix products: default
>BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
>LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
>
>locale:
>  [1] LC_CTYPE=pt_PT.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=pt_PT.UTF-8        LC_COLLATE=pt_PT.UTF-8
>  [5] LC_MONETARY=pt_PT.UTF-8    LC_MESSAGES=pt_PT.UTF-8
>  [7] LC_PAPER=pt_PT.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>[11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C
>
>attached base packages:
>[1] stats     graphics  grDevices utils     datasets  methods   base
>
>loaded via a namespace (and not attached):
>[1] compiler_4.0.2
>
>
>
>?s 08:45 de 15/07/20, Sam H escreveu:
>> Hi,
>> 
>> I am trying to download some data using read.csv and it works
>perfectly in
>> RStudio and fails in the R console in the terminal in Ubuntu 18.04
>after
>> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the
>R
>> console in the terminal also without any issues.
>> 
>> Why would that be? How to fix this?
>> 
>> Below please find R code output and sessionInfo().
>> 
>> *Works in RStudio*
>> 
>>>
>read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>header=TRUE, as.is=TRUE, na="n/a")
>>      Symbol                                                Name
>> LastSale MarketCap IPOyear1      TXG
>> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
>>                             111, Inc.   6.4800  $533.69M    20183
>> PIH              1347 Property Insurance Holdings, Inc.   4.5350
>> $27.52M    2014
>>   sessionInfo()
>> R version 4.0.2 (2020-06-22)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> Running under: Ubuntu 18.04.4 LTS
>> 
>> Matrix products: default
>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>> 
>> locale:
>>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>   [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>> LC_PAPER=en_US.UTF-8       LC_NAME=C
>>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> 
>> attached base packages:[1] stats     graphics  grDevices utils
>> datasets  methods   base
>> 
>> loaded via a namespace (and not attached):[1] compiler_4.0.2
>tools_4.0.2
>> 
>> *Fails in R console in terminal*
>> 
>>      >
>read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>> header=TRUE, as.is=TRUE, na="n/a")
>> Error in file(file, "rt") :
>>    cannot open the connection to
>>
>'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>> In addition: Warning message:
>> In file(file, "rt") :
>>    URL
>'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>> status was 'Failure when receiving data from the peer'> traceback()3:
>> file(file, "rt")2: read.table(file = file, header = header, sep =
>sep,
>> quote = quote,
>>         dec = dec, fill = fill, comment.char = comment.char, ...)1:
>>
>read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>>         header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
>> R version 4.0.2 (2020-06-22)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> Running under: Ubuntu 18.04.4 LTS
>> 
>> Matrix products: default
>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>> 
>> locale:
>>   [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>   [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>   [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>   [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>   [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> 
>> attached base packages:[1] stats     graphics  grDevices utils
>> datasets  methods   base
>> 
>> loaded via a namespace (and not attached):[1] compiler_4.0.2>
>> 
>> I also asked this question here
>>
>https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
>> . Since there was no answer on stackoverflow I sent this question
>also to
>> this list.
>> 
>> Best regards,
>> Sam
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From nev||@@mo@ @end|ng |rom gm@||@com  Thu Jul 16 11:28:11 2020
From: nev||@@mo@ @end|ng |rom gm@||@com (nevil amos)
Date: Thu, 16 Jul 2020 19:28:11 +1000
Subject: [R] aws.s3::s3sync Error in curl::curl_fetch_disk(url, x$path,
 handle = handle) : Failed to open file
Message-ID: <CAN9eD7np8ZgvfCiU6btuYUS8zag=0M3c_fvf6ij1dkb4EKBVzg@mail.gmail.com>

I am trying to use aws.s3::s3sync to sync the contents of a bucket to an
aws ec2 instance ( via rstudio server)

my script is as follows I cannot make a repro since that would need to be
run from the instance with my account key and details ( replaced with
xxxxxxxxxxxxxx below).

all files I am trying to sync are under the s3 prefix  FAME_FMR which is
the only top level "directory" in the bucket
Have I missed a setting?
If not any suggestions on this error?

thanks

Nevil Amos



library(aws.s3)
Sys.setenv("AWS_ACCESS_KEY_ID" = "xxxxxxxxxxxxxxxxxxxxxxxxx",
           "AWS_SECRET_ACCESS_KEY" =
"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
           "AWS_DEFAULT_REGION" = "ap-southeast-2")
myBucket<-"ecological-risk-analysis"
myPath<-"~/ShinyApps"

> bucket_exists(myBucket)[1][1] TRUE> dir.exists(myPath)[1] TRUE

>s3sync(path = myPath ,bucket =myBucket)

 [998] "FAME_FMR/HDMS/75m/BinaryThresholded/Satin_Bowerbird_Spp10679_Thresholded_Binary.tif"
 [999] "FAME_FMR/HDMS/75m/BinaryThresholded/Satin_Flycatcher_Spp10366_Thresholded_Binary.tif"
[1000] "FAME_FMR/HDMS/75m/BinaryThresholded/Scaly_breasted_Lorikeet_Spp10256_Thresholded_Binary.tif"
 [ reached getOption("max.print") -- omitted 191 entries ]1191 bucket
objects not found in local directory<== Saving object 'FAME_FMR/' to
'~/ShinyApps/FAME_FMR/'Error in curl::curl_fetch_disk(url, x$path,
handle = handle) :
  Failed to open file /home/rstudio/ShinyApps/FAME_FMR/.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Jul 16 14:17:52 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 16 Jul 2020 13:17:52 +0100
Subject: [R] read.csv fails in R console in Ubuntu terminal but works in
 RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <B55131C8-E007-479C-BCD9-0B484CBB0F72@dcn.davis.ca.us>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
 <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>
 <B55131C8-E007-479C-BCD9-0B484CBB0F72@dcn.davis.ca.us>
Message-ID: <da2f0767-770f-9032-a476-c505e8c20d49@sapo.pt>

Hello,

Thanks, but no, download.file still gives 403 Forbidden with both method 
= "libcurl" and method = "wget".

Rui Barradas

?s 05:31 de 16/07/20, Jeff Newmiller escreveu:
> Perhaps read FAQ 7.43? [1]
> 
> [1] https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f
> 
> On July 15, 2020 4:02:27 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>> Hello,
>>
>> R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.
>>
>> I'm also unable to read the file with Rscript from the Ubuntu terminal
>> but the error is not the same as the OP's.
>>
>>
>> The first try was a file test1.R with the following commands.
>>
>> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
>> read.csv(x, as.is=TRUE, na="n/a")
>>
>>
>> And run with Rscript
>>
>> rui at rui:~$ Rscript --vanilla test1.R
>> Error in file(file, "rt") :
>>    cannot open the connection to
>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>> Calls: read.csv -> read.table -> file
>> In addition: Warning message:
>> In file(file, "rt") :
>>    cannot open URL
>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>>
>> HTTP status was '403 Forbidden'
>> Execution halted
>>
>>
>>
>> The second try was download.file() and then read it.
>> File test2.R is:
>>
>> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
>> download.file(x, "companylist.csv")
>> read.csv("companylist.csv", as.is=TRUE, na="n/a")
>>
>>
>> But this too failed with error 403 Forbiden.
>>
>> rui at rui:~$ Rscript --vanilla test2.R
>> trying URL
>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>> Error in download.file(x, "companylist.csv") :
>>    cannot open URL
>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>> In addition: Warning message:
>> In download.file(x, "companylist.csv") :
>>    cannot open URL
>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>>
>> HTTP status was '403 Forbidden'
>> Execution halted
>>
>>
>> This is my session info.
>>
>> rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'
>> R version 4.0.2 (2020-06-22)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> Running under: Ubuntu 20.04 LTS
>>
>> Matrix products: default
>> BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
>> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
>>
>> locale:
>>   [1] LC_CTYPE=pt_PT.UTF-8       LC_NUMERIC=C
>>   [3] LC_TIME=pt_PT.UTF-8        LC_COLLATE=pt_PT.UTF-8
>>   [5] LC_MONETARY=pt_PT.UTF-8    LC_MESSAGES=pt_PT.UTF-8
>>   [7] LC_PAPER=pt_PT.UTF-8       LC_NAME=C
>>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_4.0.2
>>
>>
>>
>> ?s 08:45 de 15/07/20, Sam H escreveu:
>>> Hi,
>>>
>>> I am trying to download some data using read.csv and it works
>> perfectly in
>>> RStudio and fails in the R console in the terminal in Ubuntu 18.04
>> after
>>> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the
>> R
>>> console in the terminal also without any issues.
>>>
>>> Why would that be? How to fix this?
>>>
>>> Below please find R code output and sessionInfo().
>>>
>>> *Works in RStudio*
>>>
>>>>
>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>> header=TRUE, as.is=TRUE, na="n/a")
>>>       Symbol                                                Name
>>> LastSale MarketCap IPOyear1      TXG
>>> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
>>>                              111, Inc.   6.4800  $533.69M    20183
>>> PIH              1347 Property Insurance Holdings, Inc.   4.5350
>>> $27.52M    2014
>>>    sessionInfo()
>>> R version 4.0.2 (2020-06-22)
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>> Running under: Ubuntu 18.04.4 LTS
>>>
>>> Matrix products: default
>>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>>>
>>> locale:
>>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>> LC_PAPER=en_US.UTF-8       LC_NAME=C
>>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>
>>> attached base packages:[1] stats     graphics  grDevices utils
>>> datasets  methods   base
>>>
>>> loaded via a namespace (and not attached):[1] compiler_4.0.2
>> tools_4.0.2
>>>
>>> *Fails in R console in terminal*
>>>
>>>       >
>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>>> header=TRUE, as.is=TRUE, na="n/a")
>>> Error in file(file, "rt") :
>>>     cannot open the connection to
>>>
>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>>> In addition: Warning message:
>>> In file(file, "rt") :
>>>     URL
>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>>> status was 'Failure when receiving data from the peer'> traceback()3:
>>> file(file, "rt")2: read.table(file = file, header = header, sep =
>> sep,
>>> quote = quote,
>>>          dec = dec, fill = fill, comment.char = comment.char, ...)1:
>>>
>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>>>          header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
>>> R version 4.0.2 (2020-06-22)
>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>> Running under: Ubuntu 18.04.4 LTS
>>>
>>> Matrix products: default
>>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>>>
>>> locale:
>>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>>    [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>>    [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>
>>> attached base packages:[1] stats     graphics  grDevices utils
>>> datasets  methods   base
>>>
>>> loaded via a namespace (and not attached):[1] compiler_4.0.2>
>>>
>>> I also asked this question here
>>>
>> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
>>> . Since there was no answer on stackoverflow I sent this question
>> also to
>>> this list.
>>>
>>> Best regards,
>>> Sam
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Jul 16 18:27:06 2020
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 16 Jul 2020 18:27:06 +0200
Subject: [R] Error in chol.default
Message-ID: <CAMk+s2QKcS=8rUdbajEYpLm9r2E+vC43vZaMUMyexHraUb=zgg@mail.gmail.com>

Hello,
I am trying to fit a Richards model to some cumulative incidence data
of infection. I got this example:
```
rich = function(p, x) {
  a = p["curvature"]
  k = p["finalPop"]
  r = p["growthRate"]
  y = r * x * (1-(x/k)^a)
  return(y)
}
ricky = function(p, x, y) p$r * x * (1-(x/p$k)^p$a) -y
# values
Y <- c(41,   41,   41,   41,   41,   41,   45,   62,  121,  198,  275,
 288,  859, 1118)
X <- 1:14
a = 1
k = 83347
r = 40
fit = rich(c(curvature=a, finalPop=k, growthRate=r), X)
plot(Y ~ X,
     col = "red", lwd = 2,
     main = "Richards model",
     xlab = expression(bold("Days")),
     ylab = expression(bold("Cases")))
points(X, fit, type = "l", lty = 2, lwd = 2)
library("minpack.lm")
o <- nls.lm(par = list(a=a, k=k, r=r), fn = ricky, x = X, y = Y)
summary(o)
```
When I run the optimization (given that I can't find parameters that
fit the data by eyeball), I get the error:
```
Error in chol.default(object$hessian) :
  the leading minor of order 1 is not positive definite
```
What is this about?
Thank you




-- 
Best regards,
Luigi


From pro|jcn@@h @end|ng |rom gm@||@com  Thu Jul 16 19:09:41 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Thu, 16 Jul 2020 13:09:41 -0400
Subject: [R] Error in chol.default
In-Reply-To: <CAMk+s2QKcS=8rUdbajEYpLm9r2E+vC43vZaMUMyexHraUb=zgg@mail.gmail.com>
References: <CAMk+s2QKcS=8rUdbajEYpLm9r2E+vC43vZaMUMyexHraUb=zgg@mail.gmail.com>
Message-ID: <96374458-df7a-95a8-8cef-595ae3a9a232@gmail.com>

The error msg says it all if you know how to read it.

> When I run the optimization (given that I can't find parameters that
> fit the data by eyeball), I get the error:
> ```
> Error in chol.default(object$hessian) :
>   the leading minor of order 1 is not positive definite


Your Jacobian (derivatives of the residual function w.r.t. the parameters)
is singular -- rather spectacularly so.

Try the short addition to your code to use analytic derivatives:

rich = function(p, x) {
  a = p["curvature"]
  k = p["finalPop"]
  r = p["growthRate"]
  y = r * x * (1-(x/k)^a)
  return(y)
}
ricky = function(p, x, y) p$r * x * (1-(x/p$k)^p$a) -y
# values
Y <- c(41,   41,   41,   41,   41,   41,   45,   62,  121,  198,  275,
       288,  859, 1118)
X <- 1:14
a = 1
k = 83347
r = 40
fit = rich(c(curvature=a, finalPop=k, growthRate=r), X)
plot(Y ~ X,
     col = "red", lwd = 2,
     main = "Richards model",
     xlab = expression(bold("Days")),
     ylab = expression(bold("Cases")))
points(X, fit, type = "l", lty = 2, lwd = 2)
library("minpack.lm")
o <- nls.lm(par = list(a=a, k=k, r=r), fn = ricky, x = X, y = Y)
summary(o)
print(o1)
library(nlsr)
xy=data.frame(x=X, y=Y)
rcky2 = y ~ r * x * (1-(x/k)^a) -y
o1 <- nlxb(rcky2, start = c(a=a, k=k, r=r), data=xy, trace=TRUE)


You should find

> o1
nlsr object: x
residual sumsquares =  3161769  on  14 observations
    after  8    Jacobian and  13 function evaluations
  name            coeff          SE       tstat      pval      gradient    JSingval
a                294.113            NA         NA         NA           0       31.86
k                  83347            NA         NA         NA           0           0
r                74.9576            NA         NA         NA  -6.064e-05           0
>
Note the singular values of the Jacobian. Actual zeros!

Even so, nlsr had managed to make some progress.

nls() and nls.lm() use approximate derivatives. Often that's fine (and it is more flexible
in handling awkward functions), but a lot of the time it is NOT OK.

JN


From m||uj|@b @end|ng |rom gm@||@com  Thu Jul 16 19:50:39 2020
From: m||uj|@b @end|ng |rom gm@||@com (Miluji Sb)
Date: Thu, 16 Jul 2020 19:50:39 +0200
Subject: [R] Year and month from a sequence
In-Reply-To: <e2fb8036-3da8-cc63-1eca-cd03e6f946b8@sapo.pt>
References: <CAMLwc7OkDye_N+gaDggbMC805XGwvLnhYOHy16xgUU74_pRd2A@mail.gmail.com>
 <e2fb8036-3da8-cc63-1eca-cd03e6f946b8@sapo.pt>
Message-ID: <CAMLwc7No9mJwfD7FtCb9h=ck_upAz6oC2y5nvT3jhmx1F8Z7vQ@mail.gmail.com>

Dear Jim, Eric, and Rui,

Great solutions! Thank you so much.

Best,

Milu

On Wed, Jul 15, 2020 at 9:20 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Yet another way, with package lubridate.
> When creating the "Date" objects, I set day = 1 to compare to TRUE below.
>
>
> library(lubridate)
>
> start <- as.Date(ISOdate(1861, 1, 1))
> end <- as.Date(ISOdate(2005, 12, 1))
>
> start + months(4139 - 2400)
> #[1] "2005-12-01"
>
> end == start + months(4139 - 2400)
> #[1] TRUE
>
>
> The argument to function months can be a vector of integers.
>
>
> start + months(1:(4139 - 2400))
>
>
>
> Then extract the months.
>
> month(start)
> month(end)
> month(start + months(<value>))
> month(start + months(4139 - 2400))
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 23:26 de 14/07/20, Miluji Sb escreveu:
> > Dear all,
> > I have a panel dataset with a large number of groups (200K+) with a
> > sequence representing the month of the observations (2400 - 4139). The
> data
> > is from January 1861 to December 2005.
> > My goal is to extract the corresponding month and year for each
> observation.
> >
> > I tried the following;
> > x$dt <- seq(from=as.Date("1861-01-01"),by='1 month',length=209000)
> >
> > However, the end date is clearly out of the range. I would like to
> convert
> > the month number (2400 - 4139) to January 1861 to December 2005 by ID.
> How
> > can I achieve this? Any help will be highly appreciated.
> >
> > Best,
> >
> > Milu
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From djnord|und @end|ng |rom gm@||@com  Thu Jul 16 21:26:21 2020
From: djnord|und @end|ng |rom gm@||@com (Daniel Nordlund)
Date: Thu, 16 Jul 2020 12:26:21 -0700
Subject: [R] read.csv fails in R console in Ubuntu terminal but works in
 RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
 <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>
Message-ID: <94763f78-2786-62fe-4ba8-88da97ce355f@gmail.com>

On 7/15/2020 4:02 PM, Rui Barradas wrote:
> Hello,
>
> R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.
>
> I'm also unable to read the file with Rscript from the Ubuntu terminal 
> but the error is not the same as the OP's.
>
>
> The first try was a file test1.R with the following commands.
>
> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download" 
>
> read.csv(x, as.is=TRUE, na="n/a")
>
>
> And run with Rscript
>
> rui at rui:~$ Rscript --vanilla test1.R
> Error in file(file, "rt") :
> ? cannot open the connection to 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> Calls: read.csv -> read.table -> file
> In addition: Warning message:
> In file(file, "rt") :
> ? cannot open URL 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download': 
> HTTP status was '403 Forbidden'
> Execution halted
>
>
>
> The second try was download.file() and then read it.
> File test2.R is:
>
> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download" 
>
> download.file(x, "companylist.csv")
> read.csv("companylist.csv", as.is=TRUE, na="n/a")
>
>
> But this too failed with error 403 Forbiden.
>
> rui at rui:~$ Rscript --vanilla test2.R
> trying URL 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> Error in download.file(x, "companylist.csv") :
> ? cannot open URL 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> In addition: Warning message:
> In download.file(x, "companylist.csv") :
> ? cannot open URL 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download': 
> HTTP status was '403 Forbidden'
> Execution halted
>
>
> <<<snip>>>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Works fine in Windows 10 64-bit with R-4.0.2, so I would echo Bert 
Gunter's advise to try r-sig-debian list.

Dan

-- 
Daniel Nordlund
Port Townsend, WA  USA


From |@t@z@hn @end|ng |rom gm@||@com  Thu Jul 16 23:15:12 2020
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Thu, 16 Jul 2020 17:15:12 -0400
Subject: [R] read.csv fails in R console in Ubuntu terminal but works in
 RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <da2f0767-770f-9032-a476-c505e8c20d49@sapo.pt>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
 <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>
 <B55131C8-E007-479C-BCD9-0B484CBB0F72@dcn.davis.ca.us>
 <da2f0767-770f-9032-a476-c505e8c20d49@sapo.pt>
Message-ID: <CA+vqiLGCm+apcF90iE-idUJT+JY6xfrsJq3MhtR_EodxiZMA_A@mail.gmail.com>

On Thu, Jul 16, 2020 at 8:18 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> Hello,
>
> Thanks, but no, download.file still gives 403 Forbidden with both method
> = "libcurl" and method = "wget".

I think that makes it "not an R question". Ask on
https://unix.stackexchange.com/ maybe?

Best,
Ista

>
> Rui Barradas
>
> ?s 05:31 de 16/07/20, Jeff Newmiller escreveu:
> > Perhaps read FAQ 7.43? [1]
> >
> > [1] https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f
> >
> > On July 15, 2020 4:02:27 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> >> Hello,
> >>
> >> R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.
> >>
> >> I'm also unable to read the file with Rscript from the Ubuntu terminal
> >> but the error is not the same as the OP's.
> >>
> >>
> >> The first try was a file test1.R with the following commands.
> >>
> >> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
> >> read.csv(x, as.is=TRUE, na="n/a")
> >>
> >>
> >> And run with Rscript
> >>
> >> rui at rui:~$ Rscript --vanilla test1.R
> >> Error in file(file, "rt") :
> >>    cannot open the connection to
> >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> >> Calls: read.csv -> read.table -> file
> >> In addition: Warning message:
> >> In file(file, "rt") :
> >>    cannot open URL
> >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
> >>
> >> HTTP status was '403 Forbidden'
> >> Execution halted
> >>
> >>
> >>
> >> The second try was download.file() and then read it.
> >> File test2.R is:
> >>
> >> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
> >> download.file(x, "companylist.csv")
> >> read.csv("companylist.csv", as.is=TRUE, na="n/a")
> >>
> >>
> >> But this too failed with error 403 Forbiden.
> >>
> >> rui at rui:~$ Rscript --vanilla test2.R
> >> trying URL
> >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> >> Error in download.file(x, "companylist.csv") :
> >>    cannot open URL
> >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> >> In addition: Warning message:
> >> In download.file(x, "companylist.csv") :
> >>    cannot open URL
> >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
> >>
> >> HTTP status was '403 Forbidden'
> >> Execution halted
> >>
> >>
> >> This is my session info.
> >>
> >> rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'
> >> R version 4.0.2 (2020-06-22)
> >> Platform: x86_64-pc-linux-gnu (64-bit)
> >> Running under: Ubuntu 20.04 LTS
> >>
> >> Matrix products: default
> >> BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
> >> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
> >>
> >> locale:
> >>   [1] LC_CTYPE=pt_PT.UTF-8       LC_NUMERIC=C
> >>   [3] LC_TIME=pt_PT.UTF-8        LC_COLLATE=pt_PT.UTF-8
> >>   [5] LC_MONETARY=pt_PT.UTF-8    LC_MESSAGES=pt_PT.UTF-8
> >>   [7] LC_PAPER=pt_PT.UTF-8       LC_NAME=C
> >>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
> >> [11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C
> >>
> >> attached base packages:
> >> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>
> >> loaded via a namespace (and not attached):
> >> [1] compiler_4.0.2
> >>
> >>
> >>
> >> ?s 08:45 de 15/07/20, Sam H escreveu:
> >>> Hi,
> >>>
> >>> I am trying to download some data using read.csv and it works
> >> perfectly in
> >>> RStudio and fails in the R console in the terminal in Ubuntu 18.04
> >> after
> >>> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the
> >> R
> >>> console in the terminal also without any issues.
> >>>
> >>> Why would that be? How to fix this?
> >>>
> >>> Below please find R code output and sessionInfo().
> >>>
> >>> *Works in RStudio*
> >>>
> >>>>
> >> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> >> header=TRUE, as.is=TRUE, na="n/a")
> >>>       Symbol                                                Name
> >>> LastSale MarketCap IPOyear1      TXG
> >>> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
> >>>                              111, Inc.   6.4800  $533.69M    20183
> >>> PIH              1347 Property Insurance Holdings, Inc.   4.5350
> >>> $27.52M    2014
> >>>    sessionInfo()
> >>> R version 4.0.2 (2020-06-22)
> >>> Platform: x86_64-pc-linux-gnu (64-bit)
> >>> Running under: Ubuntu 18.04.4 LTS
> >>>
> >>> Matrix products: default
> >>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> >>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
> >>>
> >>> locale:
> >>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> >>> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> >>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> >>> LC_PAPER=en_US.UTF-8       LC_NAME=C
> >>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C
> >>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >>>
> >>> attached base packages:[1] stats     graphics  grDevices utils
> >>> datasets  methods   base
> >>>
> >>> loaded via a namespace (and not attached):[1] compiler_4.0.2
> >> tools_4.0.2
> >>>
> >>> *Fails in R console in terminal*
> >>>
> >>>       >
> >> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> >>> header=TRUE, as.is=TRUE, na="n/a")
> >>> Error in file(file, "rt") :
> >>>     cannot open the connection to
> >>>
> >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> >>> In addition: Warning message:
> >>> In file(file, "rt") :
> >>>     URL
> >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
> >>> status was 'Failure when receiving data from the peer'> traceback()3:
> >>> file(file, "rt")2: read.table(file = file, header = header, sep =
> >> sep,
> >>> quote = quote,
> >>>          dec = dec, fill = fill, comment.char = comment.char, ...)1:
> >>>
> >> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> >>>          header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
> >>> R version 4.0.2 (2020-06-22)
> >>> Platform: x86_64-pc-linux-gnu (64-bit)
> >>> Running under: Ubuntu 18.04.4 LTS
> >>>
> >>> Matrix products: default
> >>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> >>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
> >>>
> >>> locale:
> >>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> >>>    [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> >>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> >>>    [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> >>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
> >>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >>>
> >>> attached base packages:[1] stats     graphics  grDevices utils
> >>> datasets  methods   base
> >>>
> >>> loaded via a namespace (and not attached):[1] compiler_4.0.2>
> >>>
> >>> I also asked this question here
> >>>
> >> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
> >>> . Since there was no answer on stackoverflow I sent this question
> >> also to
> >>> this list.
> >>>
> >>> Best regards,
> >>> Sam
> >>>
> >>>     [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |@t@z@hn @end|ng |rom gm@||@com  Thu Jul 16 23:19:49 2020
From: |@t@z@hn @end|ng |rom gm@||@com (Ista Zahn)
Date: Thu, 16 Jul 2020 17:19:49 -0400
Subject: [R] read.csv fails in R console in Ubuntu terminal but works in
 RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <CA+vqiLGCm+apcF90iE-idUJT+JY6xfrsJq3MhtR_EodxiZMA_A@mail.gmail.com>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
 <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>
 <B55131C8-E007-479C-BCD9-0B484CBB0F72@dcn.davis.ca.us>
 <da2f0767-770f-9032-a476-c505e8c20d49@sapo.pt>
 <CA+vqiLGCm+apcF90iE-idUJT+JY6xfrsJq3MhtR_EodxiZMA_A@mail.gmail.com>
Message-ID: <CA+vqiLGPBiHxeXitDmVPCy0AZZg6O-nhOUJi-PQhTNK=ROUt7g@mail.gmail.com>

On Thu, Jul 16, 2020 at 5:15 PM Ista Zahn <istazahn at gmail.com> wrote:
>
> On Thu, Jul 16, 2020 at 8:18 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
> >
> > Hello,
> >
> > Thanks, but no, download.file still gives 403 Forbidden with both method
> > = "libcurl" and method = "wget".
>
> I think that makes it "not an R question". Ask on
> https://unix.stackexchange.com/ maybe?

Oh, sorry I misread your message. Nevertheless:

$ curl "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
<HTML><HEAD>
<TITLE>Access Denied</TITLE>
</HEAD><BODY>
<H1>Access Denied</H1>

You don't have permission to access
"http&#58;&#47;&#47;old&#46;nasdaq&#46;com&#47;screening&#47;companies&#45;by&#45;name&#46;aspx&#63;"
on this server.<P>
Reference&#32;&#35;18&#46;5506d217&#46;1594934303&#46;938edcb
</BODY>
</HTML>

$ wget "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
--2020-07-16 17:19:12--
https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
Loaded CA certificate '/etc/ssl/certs/ca-certificates.crt'
Resolving old.nasdaq.com (old.nasdaq.com)... 2600:1400:9000:28f::1b46,
2600:1400:9000:29b::1b46, 23.78.161.120
Connecting to old.nasdaq.com
(old.nasdaq.com)|2600:1400:9000:28f::1b46|:443... connected.
HTTP request sent, awaiting response... 403 Forbidden
2020-07-16 17:19:12 ERROR 403: Forbidden.

I don't think this is an R problem.

Best,
Ista

>
> Best,
> Ista
>
> >
> > Rui Barradas
> >
> > ?s 05:31 de 16/07/20, Jeff Newmiller escreveu:
> > > Perhaps read FAQ 7.43? [1]
> > >
> > > [1] https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f
> > >
> > > On July 15, 2020 4:02:27 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> > >> Hello,
> > >>
> > >> R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.
> > >>
> > >> I'm also unable to read the file with Rscript from the Ubuntu terminal
> > >> but the error is not the same as the OP's.
> > >>
> > >>
> > >> The first try was a file test1.R with the following commands.
> > >>
> > >> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
> > >> read.csv(x, as.is=TRUE, na="n/a")
> > >>
> > >>
> > >> And run with Rscript
> > >>
> > >> rui at rui:~$ Rscript --vanilla test1.R
> > >> Error in file(file, "rt") :
> > >>    cannot open the connection to
> > >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> > >> Calls: read.csv -> read.table -> file
> > >> In addition: Warning message:
> > >> In file(file, "rt") :
> > >>    cannot open URL
> > >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
> > >>
> > >> HTTP status was '403 Forbidden'
> > >> Execution halted
> > >>
> > >>
> > >>
> > >> The second try was download.file() and then read it.
> > >> File test2.R is:
> > >>
> > >> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
> > >> download.file(x, "companylist.csv")
> > >> read.csv("companylist.csv", as.is=TRUE, na="n/a")
> > >>
> > >>
> > >> But this too failed with error 403 Forbiden.
> > >>
> > >> rui at rui:~$ Rscript --vanilla test2.R
> > >> trying URL
> > >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> > >> Error in download.file(x, "companylist.csv") :
> > >>    cannot open URL
> > >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> > >> In addition: Warning message:
> > >> In download.file(x, "companylist.csv") :
> > >>    cannot open URL
> > >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
> > >>
> > >> HTTP status was '403 Forbidden'
> > >> Execution halted
> > >>
> > >>
> > >> This is my session info.
> > >>
> > >> rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'
> > >> R version 4.0.2 (2020-06-22)
> > >> Platform: x86_64-pc-linux-gnu (64-bit)
> > >> Running under: Ubuntu 20.04 LTS
> > >>
> > >> Matrix products: default
> > >> BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
> > >> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
> > >>
> > >> locale:
> > >>   [1] LC_CTYPE=pt_PT.UTF-8       LC_NUMERIC=C
> > >>   [3] LC_TIME=pt_PT.UTF-8        LC_COLLATE=pt_PT.UTF-8
> > >>   [5] LC_MONETARY=pt_PT.UTF-8    LC_MESSAGES=pt_PT.UTF-8
> > >>   [7] LC_PAPER=pt_PT.UTF-8       LC_NAME=C
> > >>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
> > >> [11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C
> > >>
> > >> attached base packages:
> > >> [1] stats     graphics  grDevices utils     datasets  methods   base
> > >>
> > >> loaded via a namespace (and not attached):
> > >> [1] compiler_4.0.2
> > >>
> > >>
> > >>
> > >> ?s 08:45 de 15/07/20, Sam H escreveu:
> > >>> Hi,
> > >>>
> > >>> I am trying to download some data using read.csv and it works
> > >> perfectly in
> > >>> RStudio and fails in the R console in the terminal in Ubuntu 18.04
> > >> after
> > >>> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the
> > >> R
> > >>> console in the terminal also without any issues.
> > >>>
> > >>> Why would that be? How to fix this?
> > >>>
> > >>> Below please find R code output and sessionInfo().
> > >>>
> > >>> *Works in RStudio*
> > >>>
> > >>>>
> > >> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> > >> header=TRUE, as.is=TRUE, na="n/a")
> > >>>       Symbol                                                Name
> > >>> LastSale MarketCap IPOyear1      TXG
> > >>> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
> > >>>                              111, Inc.   6.4800  $533.69M    20183
> > >>> PIH              1347 Property Insurance Holdings, Inc.   4.5350
> > >>> $27.52M    2014
> > >>>    sessionInfo()
> > >>> R version 4.0.2 (2020-06-22)
> > >>> Platform: x86_64-pc-linux-gnu (64-bit)
> > >>> Running under: Ubuntu 18.04.4 LTS
> > >>>
> > >>> Matrix products: default
> > >>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> > >>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
> > >>>
> > >>> locale:
> > >>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> > >>> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> > >>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> > >>> LC_PAPER=en_US.UTF-8       LC_NAME=C
> > >>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C
> > >>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> > >>>
> > >>> attached base packages:[1] stats     graphics  grDevices utils
> > >>> datasets  methods   base
> > >>>
> > >>> loaded via a namespace (and not attached):[1] compiler_4.0.2
> > >> tools_4.0.2
> > >>>
> > >>> *Fails in R console in terminal*
> > >>>
> > >>>       >
> > >> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> > >>> header=TRUE, as.is=TRUE, na="n/a")
> > >>> Error in file(file, "rt") :
> > >>>     cannot open the connection to
> > >>>
> > >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
> > >>> In addition: Warning message:
> > >>> In file(file, "rt") :
> > >>>     URL
> > >> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
> > >>> status was 'Failure when receiving data from the peer'> traceback()3:
> > >>> file(file, "rt")2: read.table(file = file, header = header, sep =
> > >> sep,
> > >>> quote = quote,
> > >>>          dec = dec, fill = fill, comment.char = comment.char, ...)1:
> > >>>
> > >> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
> > >>>          header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
> > >>> R version 4.0.2 (2020-06-22)
> > >>> Platform: x86_64-pc-linux-gnu (64-bit)
> > >>> Running under: Ubuntu 18.04.4 LTS
> > >>>
> > >>> Matrix products: default
> > >>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> > >>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
> > >>>
> > >>> locale:
> > >>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> > >>>    [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> > >>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> > >>>    [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> > >>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
> > >>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> > >>>
> > >>> attached base packages:[1] stats     graphics  grDevices utils
> > >>> datasets  methods   base
> > >>>
> > >>> loaded via a namespace (and not attached):[1] compiler_4.0.2>
> > >>>
> > >>> I also asked this question here
> > >>>
> > >> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
> > >>> . Since there was no answer on stackoverflow I sent this question
> > >> also to
> > >>> this list.
> > >>>
> > >>> Best regards,
> > >>> Sam
> > >>>
> > >>>     [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >> http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>>
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > >> http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From dr@@|@m@o|@ng| @end|ng |rom gm@||@com  Thu Jul 16 19:14:15 2020
From: dr@@|@m@o|@ng| @end|ng |rom gm@||@com (Shah Alam)
Date: Thu, 16 Jul 2020 19:14:15 +0200
Subject: [R] Probabilities in discrete event simulation model in R
Message-ID: <CA+bivFhkR7Z69XnwMOcDFerBO-o+1OA4kXH8rX-L9m9C7Ur6aA@mail.gmail.com>

I am designing a programme in R to simulate two events that are 1. a person
gets cancer, or 2. die of other causes. I have data for the probability of
getting cancer by age and probability of death due to causes other than
cancer.

   1.

   My dataset has 3 columns 1) age 2) prob getting cancer 3) prob dying
   other causes. I generate random number using runif(1, min = 0, max = 1).
   2.

   This random number compares with all the values in the second column
   (prob getting cancer) and give the age which has the same value of
   probability as this random number. Then it compares with all the values in
   the 3rd column and gives the age at which women die because of causes other
   than cancer.

The problem is:

   1.

   I want an R code in which the random number compares in both the columns
   simultaneously (prob of getting cancer, and prob of death) step by step.
   for example, if the random number is 0.2, first the code checks the
   observation 1 in the column of getting cancer if it fails to get the same
   values. Then it checks the observation 1 in the column of death due to
   other causes. If it fails then move to 2nd observation of prob getting
   cancer............ The process should go on until it finds the age which
   has the same value of probability as this random number. Kindly help me on
   how to do this in R.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jul 17 00:44:09 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 16 Jul 2020 15:44:09 -0700
Subject: [R] Probabilities in discrete event simulation model in R
In-Reply-To: <CA+bivFhkR7Z69XnwMOcDFerBO-o+1OA4kXH8rX-L9m9C7Ur6aA@mail.gmail.com>
References: <CA+bivFhkR7Z69XnwMOcDFerBO-o+1OA4kXH8rX-L9m9C7Ur6aA@mail.gmail.com>
Message-ID: <CAGxFJbSoQnLoE2f6SujVbLq9ycc4C6+X9x=uFVxjTM5vfnmJPg@mail.gmail.com>

Please read and follow the posting guide linked below when asking for help
here. This is not a "we do the work for you" forum.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 16, 2020 at 3:39 PM Shah Alam <dr.alamsolangi at gmail.com> wrote:

> I am designing a programme in R to simulate two events that are 1. a person
> gets cancer, or 2. die of other causes. I have data for the probability of
> getting cancer by age and probability of death due to causes other than
> cancer.
>
>    1.
>
>    My dataset has 3 columns 1) age 2) prob getting cancer 3) prob dying
>    other causes. I generate random number using runif(1, min = 0, max = 1).
>    2.
>
>    This random number compares with all the values in the second column
>    (prob getting cancer) and give the age which has the same value of
>    probability as this random number. Then it compares with all the values
> in
>    the 3rd column and gives the age at which women die because of causes
> other
>    than cancer.
>
> The problem is:
>
>    1.
>
>    I want an R code in which the random number compares in both the columns
>    simultaneously (prob of getting cancer, and prob of death) step by step.
>    for example, if the random number is 0.2, first the code checks the
>    observation 1 in the column of getting cancer if it fails to get the
> same
>    values. Then it checks the observation 1 in the column of death due to
>    other causes. If it fails then move to 2nd observation of prob getting
>    cancer............ The process should go on until it finds the age which
>    has the same value of probability as this random number. Kindly help me
> on
>    how to do this in R.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Jul 17 03:59:26 2020
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Thu, 16 Jul 2020 20:59:26 -0500 (CDT)
Subject: [R] 
 [External] Re: read.csv fails in R console in Ubuntu terminal
 but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <CA+vqiLGPBiHxeXitDmVPCy0AZZg6O-nhOUJi-PQhTNK=ROUt7g@mail.gmail.com>
References: <CAEtT+h2+5G5D--deBOPywi2qxF=YZOAmhz+sv7USWj8SL_Bz-w@mail.gmail.com>
 <0c1d36a9-a078-084b-cc74-32700fb7398d@sapo.pt>
 <B55131C8-E007-479C-BCD9-0B484CBB0F72@dcn.davis.ca.us>
 <da2f0767-770f-9032-a476-c505e8c20d49@sapo.pt>
 <CA+vqiLGCm+apcF90iE-idUJT+JY6xfrsJq3MhtR_EodxiZMA_A@mail.gmail.com>
 <CA+vqiLGPBiHxeXitDmVPCy0AZZg6O-nhOUJi-PQhTNK=ROUt7g@mail.gmail.com>
Message-ID: <alpine.DEB.2.21.2007162045150.3465@luke-Latitude-7480>

On my Ubuntu system the download with read.csv succeeds in an R
console if I set the HTTPUserAgent and download.file.method options to
match the ones used by RStudio.

Given how picky the server is being I would worry about whether this
use is in line with the site's terms of service.

Best,

luke

On Thu, 16 Jul 2020, Ista Zahn wrote:

> On Thu, Jul 16, 2020 at 5:15 PM Ista Zahn <istazahn at gmail.com> wrote:
>>
>> On Thu, Jul 16, 2020 at 8:18 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>>
>>> Hello,
>>>
>>> Thanks, but no, download.file still gives 403 Forbidden with both method
>>> = "libcurl" and method = "wget".
>>
>> I think that makes it "not an R question". Ask on
>> https://unix.stackexchange.com/ maybe?
>
> Oh, sorry I misread your message. Nevertheless:
>
> $ curl "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
> <HTML><HEAD>
> <TITLE>Access Denied</TITLE>
> </HEAD><BODY>
> <H1>Access Denied</H1>
>
> You don't have permission to access
> "http&#58;&#47;&#47;old&#46;nasdaq&#46;com&#47;screening&#47;companies&#45;by&#45;name&#46;aspx&#63;"
> on this server.<P>
> Reference&#32;&#35;18&#46;5506d217&#46;1594934303&#46;938edcb
> </BODY>
> </HTML>
>
> $ wget "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
> --2020-07-16 17:19:12--
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> Loaded CA certificate '/etc/ssl/certs/ca-certificates.crt'
> Resolving old.nasdaq.com (old.nasdaq.com)... 2600:1400:9000:28f::1b46,
> 2600:1400:9000:29b::1b46, 23.78.161.120
> Connecting to old.nasdaq.com
> (old.nasdaq.com)|2600:1400:9000:28f::1b46|:443... connected.
> HTTP request sent, awaiting response... 403 Forbidden
> 2020-07-16 17:19:12 ERROR 403: Forbidden.
>
> I don't think this is an R problem.
>
> Best,
> Ista
>
>>
>> Best,
>> Ista
>>
>>>
>>> Rui Barradas
>>>
>>> ?s 05:31 de 16/07/20, Jeff Newmiller escreveu:
>>>> Perhaps read FAQ 7.43? [1]
>>>>
>>>> [1] https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f
>>>>
>>>> On July 15, 2020 4:02:27 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>>>> Hello,
>>>>>
>>>>> R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.
>>>>>
>>>>> I'm also unable to read the file with Rscript from the Ubuntu terminal
>>>>> but the error is not the same as the OP's.
>>>>>
>>>>>
>>>>> The first try was a file test1.R with the following commands.
>>>>>
>>>>> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
>>>>> read.csv(x, as.is=TRUE, na="n/a")
>>>>>
>>>>>
>>>>> And run with Rscript
>>>>>
>>>>> rui at rui:~$ Rscript --vanilla test1.R
>>>>> Error in file(file, "rt") :
>>>>>    cannot open the connection to
>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>>>>> Calls: read.csv -> read.table -> file
>>>>> In addition: Warning message:
>>>>> In file(file, "rt") :
>>>>>    cannot open URL
>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>>>>>
>>>>> HTTP status was '403 Forbidden'
>>>>> Execution halted
>>>>>
>>>>>
>>>>>
>>>>> The second try was download.file() and then read it.
>>>>> File test2.R is:
>>>>>
>>>>> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
>>>>> download.file(x, "companylist.csv")
>>>>> read.csv("companylist.csv", as.is=TRUE, na="n/a")
>>>>>
>>>>>
>>>>> But this too failed with error 403 Forbiden.
>>>>>
>>>>> rui at rui:~$ Rscript --vanilla test2.R
>>>>> trying URL
>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>>>>> Error in download.file(x, "companylist.csv") :
>>>>>    cannot open URL
>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>>>>> In addition: Warning message:
>>>>> In download.file(x, "companylist.csv") :
>>>>>    cannot open URL
>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>>>>>
>>>>> HTTP status was '403 Forbidden'
>>>>> Execution halted
>>>>>
>>>>>
>>>>> This is my session info.
>>>>>
>>>>> rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'
>>>>> R version 4.0.2 (2020-06-22)
>>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>>>> Running under: Ubuntu 20.04 LTS
>>>>>
>>>>> Matrix products: default
>>>>> BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
>>>>>
>>>>> locale:
>>>>>   [1] LC_CTYPE=pt_PT.UTF-8       LC_NUMERIC=C
>>>>>   [3] LC_TIME=pt_PT.UTF-8        LC_COLLATE=pt_PT.UTF-8
>>>>>   [5] LC_MONETARY=pt_PT.UTF-8    LC_MESSAGES=pt_PT.UTF-8
>>>>>   [7] LC_PAPER=pt_PT.UTF-8       LC_NAME=C
>>>>>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>>>> [11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C
>>>>>
>>>>> attached base packages:
>>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>
>>>>> loaded via a namespace (and not attached):
>>>>> [1] compiler_4.0.2
>>>>>
>>>>>
>>>>>
>>>>> ?s 08:45 de 15/07/20, Sam H escreveu:
>>>>>> Hi,
>>>>>>
>>>>>> I am trying to download some data using read.csv and it works
>>>>> perfectly in
>>>>>> RStudio and fails in the R console in the terminal in Ubuntu 18.04
>>>>> after
>>>>>> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the
>>>>> R
>>>>>> console in the terminal also without any issues.
>>>>>>
>>>>>> Why would that be? How to fix this?
>>>>>>
>>>>>> Below please find R code output and sessionInfo().
>>>>>>
>>>>>> *Works in RStudio*
>>>>>>
>>>>>>>
>>>>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>>>>> header=TRUE, as.is=TRUE, na="n/a")
>>>>>>       Symbol                                                Name
>>>>>> LastSale MarketCap IPOyear1      TXG
>>>>>> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
>>>>>>                              111, Inc.   6.4800  $533.69M    20183
>>>>>> PIH              1347 Property Insurance Holdings, Inc.   4.5350
>>>>>> $27.52M    2014
>>>>>>    sessionInfo()
>>>>>> R version 4.0.2 (2020-06-22)
>>>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>>>>> Running under: Ubuntu 18.04.4 LTS
>>>>>>
>>>>>> Matrix products: default
>>>>>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>>>>>>
>>>>>> locale:
>>>>>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>>>>> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>>>>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>>>>> LC_PAPER=en_US.UTF-8       LC_NAME=C
>>>>>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>>>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>>>>
>>>>>> attached base packages:[1] stats     graphics  grDevices utils
>>>>>> datasets  methods   base
>>>>>>
>>>>>> loaded via a namespace (and not attached):[1] compiler_4.0.2
>>>>> tools_4.0.2
>>>>>>
>>>>>> *Fails in R console in terminal*
>>>>>>
>>>>>>      >
>>>>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>>>>>> header=TRUE, as.is=TRUE, na="n/a")
>>>>>> Error in file(file, "rt") :
>>>>>>     cannot open the connection to
>>>>>>
>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
>>>>>> In addition: Warning message:
>>>>>> In file(file, "rt") :
>>>>>>     URL
>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':
>>>>>> status was 'Failure when receiving data from the peer'> traceback()3:
>>>>>> file(file, "rt")2: read.table(file = file, header = header, sep =
>>>>> sep,
>>>>>> quote = quote,
>>>>>>          dec = dec, fill = fill, comment.char = comment.char, ...)1:
>>>>>>
>>>>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",
>>>>>>          header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
>>>>>> R version 4.0.2 (2020-06-22)
>>>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>>>>>> Running under: Ubuntu 18.04.4 LTS
>>>>>>
>>>>>> Matrix products: default
>>>>>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>>>>>>
>>>>>> locale:
>>>>>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>>>>>    [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>>>>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>>>>>    [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>>>>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
>>>>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>>>>
>>>>>> attached base packages:[1] stats     graphics  grDevices utils
>>>>>> datasets  methods   base
>>>>>>
>>>>>> loaded via a namespace (and not attached):[1] compiler_4.0.2>
>>>>>>
>>>>>> I also asked this question here
>>>>>>
>>>>> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
>>>>>> . Since there was no answer on stackoverflow I sent this question
>>>>> also to
>>>>>> this list.
>>>>>>
>>>>>> Best regards,
>>>>>> Sam
>>>>>>
>>>>>>     [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jul 17 10:30:35 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (ruipbarradas)
Date: Fri, 17 Jul 2020 09:30:35 +0100
Subject: [R] 
 [External] Re: read.csv fails in R console in Ubuntu terminal
 but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
Message-ID: <sk1k0p17hbvtkugldt520d7j.1594974635059@email.android.com>

Hello,Yes, I thought it's a site policy issue too. But the file can be accessed and read/downloaded from RStudio and Firefox so apparently there's no reason why R console shouldn't .Anyway, I believe it's time for the OP to say someyhing, maybe he has solved it and there's no point in continuing.Rui Barradas?Enviado a partir do meu smartphone Samsung Galaxy.-------- Mensagem original --------De: luke-tierney at uiowa.edu Data: 17/07/2020  02:59  (GMT+00:00) Para: Ista Zahn <istazahn at gmail.com> Cc: Rui Barradas <ruipbarradas at sapo.pt>, r-help at r-project.org, Sam H <sam.hhh1 at gmail.com> Assunto: Re: [External] Re: [R] read.csv fails in R console in Ubuntu terminal but works in RStudio after R 3.6.3 upgrade to R 4.0.2? On my Ubuntu system the download with read.csv succeeds in an Rconsole if I set the HTTPUserAgent and download.file.method options tomatch the ones used by RStudio.Given how picky the server is being I would worry about whether thisuse is in line with the site's terms of service.Best,lukeOn Thu, 16 Jul 2020, Ista Zahn wrote:> On Thu, Jul 16, 2020 at 5:15 PM Ista Zahn <istazahn at gmail.com> wrote:>>>> On Thu, Jul 16, 2020 at 8:18 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:>>>>>> Hello,>>>>>> Thanks, but no, download.file still gives 403 Forbidden with both method>>> = "libcurl" and method = "wget".>>>> I think that makes it "not an R question". Ask on>> https://unix.stackexchange.com/ maybe?>> Oh, sorry I misread your message. Nevertheless:>> $ curl "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"> <HTML><HEAD>> <TITLE>Access Denied</TITLE>> </HEAD><BODY>> <H1>Access Denied</H1>>> You don't have permission to access> "http&#58;&#47;&#47;old&#46;nasdaq&#46;com&#47;screening&#47;companies&#45;by&#45;name&#46;aspx&#63;"> on this server.<P>> Reference&#32;&#35;18&#46;5506d217&#46;1594934303&#46;938edcb> </BODY>> </HTML>>> $ wget "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"> --2020-07-16 17:19:12--> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download> Loaded CA certificate '/etc/ssl/certs/ca-certificates.crt'> Resolving old.nasdaq.com (old.nasdaq.com)... 2600:1400:9000:28f::1b46,> 2600:1400:9000:29b::1b46, 23.78.161.120> Connecting to old.nasdaq.com> (old.nasdaq.com)|2600:1400:9000:28f::1b46|:443... connected.> HTTP request sent, awaiting response... 403 Forbidden> 2020-07-16 17:19:12 ERROR 403: Forbidden.>> I don't think this is an R problem.>> Best,> Ista>>>>> Best,>> Ista>>>>>>>> Rui Barradas>>>>>> ?s 05:31 de 16/07/20, Jeff Newmiller escreveu:>>>> Perhaps read FAQ 7.43? [1]>>>>>>>> [1] https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f>>>>>>>> On July 15, 2020 4:02:27 PM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:>>>>> Hello,>>>>>>>>>> R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.>>>>>>>>>> I'm also unable to read the file with Rscript from the Ubuntu terminal>>>>> but the error is not the same as the OP's.>>>>>>>>>>>>>>> The first try was a file test1.R with the following commands.>>>>>>>>>> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download">>>>> read.csv(x, as.is=TRUE, na="n/a")>>>>>>>>>>>>>>> And run with Rscript>>>>>>>>>> rui at rui:~$ Rscript --vanilla test1.R>>>>> Error in file(file, "rt") :>>>>>??? cannot open the connection to>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'>>>>> Calls: read.csv -> read.table -> file>>>>> In addition: Warning message:>>>>> In file(file, "rt") :>>>>>??? cannot open URL>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':>>>>>>>>>> HTTP status was '403 Forbidden'>>>>> Execution halted>>>>>>>>>>>>>>>>>>>> The second try was download.file() and then read it.>>>>> File test2.R is:>>>>>>>>>> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download">>>>> download.file(x, "companylist.csv")>>>>> read.csv("companylist.csv", as.is=TRUE, na="n/a")>>>>>>>>>>>>>>> But this too failed with error 403 Forbiden.>>>>>>>>>> rui at rui:~$ Rscript --vanilla test2.R>>>>> trying URL>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'>>>>> Error in download.file(x, "companylist.csv") :>>>>>??? cannot open URL>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'>>>>> In addition: Warning message:>>>>> In download.file(x, "companylist.csv") :>>>>>??? cannot open URL>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':>>>>>>>>>> HTTP status was '403 Forbidden'>>>>> Execution halted>>>>>>>>>>>>>>> This is my session info.>>>>>>>>>> rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'>>>>> R version 4.0.2 (2020-06-22)>>>>> Platform: x86_64-pc-linux-gnu (64-bit)>>>>> Running under: Ubuntu 20.04 LTS>>>>>>>>>> Matrix products: default>>>>> BLAS:?? /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0>>>>>>>>>> locale:>>>>>?? [1] LC_CTYPE=pt_PT.UTF-8?????? LC_NUMERIC=C>>>>>?? [3] LC_TIME=pt_PT.UTF-8??????? LC_COLLATE=pt_PT.UTF-8>>>>>?? [5] LC_MONETARY=pt_PT.UTF-8??? LC_MESSAGES=pt_PT.UTF-8>>>>>?? [7] LC_PAPER=pt_PT.UTF-8?????? LC_NAME=C>>>>>?? [9] LC_ADDRESS=C?????????????? LC_TELEPHONE=C>>>>> [11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C>>>>>>>>>> attached base packages:>>>>> [1] stats???? graphics? grDevices utils???? datasets? methods?? base>>>>>>>>>> loaded via a namespace (and not attached):>>>>> [1] compiler_4.0.2>>>>>>>>>>>>>>>>>>>> ?s 08:45 de 15/07/20, Sam H escreveu:>>>>>> Hi,>>>>>>>>>>>> I am trying to download some data using read.csv and it works>>>>> perfectly in>>>>>> RStudio and fails in the R console in the terminal in Ubuntu 18.04>>>>> after>>>>>> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the>>>>> R>>>>>> console in the terminal also without any issues.>>>>>>>>>>>> Why would that be? How to fix this?>>>>>>>>>>>> Below please find R code output and sessionInfo().>>>>>>>>>>>> *Works in RStudio*>>>>>>>>>>>>>>>>>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",>>>>> header=TRUE, as.is=TRUE, na="n/a")>>>>>>?????? Symbol??????????????????????????????????????????????? Name>>>>>> LastSale MarketCap IPOyear1????? TXG>>>>>> 10x Genomics, Inc.? 87.4400???? $8.6B??? 20192?????? YI>>>>>>????????????????????????????? 111, Inc.?? 6.4800? $533.69M??? 20183>>>>>> PIH????????????? 1347 Property Insurance Holdings, Inc.?? 4.5350>>>>>> $27.52M??? 2014>>>>>>??? sessionInfo()>>>>>> R version 4.0.2 (2020-06-22)>>>>>> Platform: x86_64-pc-linux-gnu (64-bit)>>>>>> Running under: Ubuntu 18.04.4 LTS>>>>>>>>>>>> Matrix products: default>>>>>> BLAS:?? /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3>>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so>>>>>>>>>>>> locale:>>>>>>??? [1] LC_CTYPE=en_US.UTF-8?????? LC_NUMERIC=C>>>>>> LC_TIME=en_US.UTF-8??????? LC_COLLATE=en_US.UTF-8>>>>>>??? [5] LC_MONETARY=en_US.UTF-8??? LC_MESSAGES=en_US.UTF-8>>>>>> LC_PAPER=en_US.UTF-8?????? LC_NAME=C>>>>>>??? [9] LC_ADDRESS=C?????????????? LC_TELEPHONE=C>>>>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C>>>>>>>>>>>> attached base packages:[1] stats???? graphics? grDevices utils>>>>>> datasets? methods?? base>>>>>>>>>>>> loaded via a namespace (and not attached):[1] compiler_4.0.2>>>>> tools_4.0.2>>>>>>>>>>>> *Fails in R console in terminal*>>>>>>>>>>>>????? >>>>>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",>>>>>> header=TRUE, as.is=TRUE, na="n/a")>>>>>> Error in file(file, "rt") :>>>>>>???? cannot open the connection to>>>>>>>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'>>>>>> In addition: Warning message:>>>>>> In file(file, "rt") :>>>>>>???? URL>>>>> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':>>>>>> status was 'Failure when receiving data from the peer'> traceback()3:>>>>>> file(file, "rt")2: read.table(file = file, header = header, sep =>>>>> sep,>>>>>> quote = quote,>>>>>>????????? dec = dec, fill = fill, comment.char = comment.char, ...)1:>>>>>>>>>>> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",>>>>>>????????? header = TRUE, as.is = TRUE, na = "n/a")>? sessionInfo()>>>>>> R version 4.0.2 (2020-06-22)>>>>>> Platform: x86_64-pc-linux-gnu (64-bit)>>>>>> Running under: Ubuntu 18.04.4 LTS>>>>>>>>>>>> Matrix products: default>>>>>> BLAS:?? /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3>>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so>>>>>>>>>>>> locale:>>>>>>??? [1] LC_CTYPE=en_US.UTF-8?????? LC_NUMERIC=C>>>>>>??? [3] LC_TIME=en_US.UTF-8??????? LC_COLLATE=en_US.UTF-8>>>>>>??? [5] LC_MONETARY=en_US.UTF-8??? LC_MESSAGES=en_US.UTF-8>>>>>>??? [7] LC_PAPER=en_US.UTF-8?????? LC_NAME=C>>>>>>??? [9] LC_ADDRESS=C?????????????? LC_TELEPHONE=C??????????? [11]>>>>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C>>>>>>>>>>>> attached base packages:[1] stats???? graphics? grDevices utils>>>>>> datasets? methods?? base>>>>>>>>>>>> loaded via a namespace (and not attached):[1] compiler_4.0.2>>>>>>>>>>>>> I also asked this question here>>>>>>>>>>> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r>>>>>> . Since there was no answer on stackoverflow I sent this question>>>>> also to>>>>>> this list.>>>>>>>>>>>> Best regards,>>>>>> Sam>>>>>>>>>>>>???? [[alternative HTML version deleted]]>>>>>>>>>>>> ______________________________________________>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help>>>>>> PLEASE do read the posting guide>>>>> http://www.R-project.org/posting-guide.html>>>>>> and provide commented, minimal, self-contained, reproducible code.>>>>>>>>>>>>>>>> ______________________________________________>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see>>>>> https://stat.ethz.ch/mailman/listinfo/r-help>>>>> PLEASE do read the posting guide>>>>> http://www.R-project.org/posting-guide.html>>>>> and provide commented, minimal, self-contained, reproducible code.>>>>>>>>>> ______________________________________________>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see>>> https://stat.ethz.ch/mailman/listinfo/r-help>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html>>> and provide commented, minimal, self-contained, reproducible code.>> ______________________________________________> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see> https://stat.ethz.ch/mailman/listinfo/r-help> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html> and provide commented, minimal, self-contained, reproducible code.>-- Luke TierneyRalph E. Wareham Professor of Mathematical SciencesUniversity of Iowa????????????????? Phone:???????????? 319-335-3386Department of Statistics and??????? Fax:?????????????? 319-335-3017??? Actuarial Science241 Schaeffer Hall????????????????? email:?? luke-tierney at uiowa.eduIowa City, IA 52242???????????????? WWW:? http://www.stat.uiowa.edu
	[[alternative HTML version deleted]]


From @@m@hhh1 @end|ng |rom gm@||@com  Fri Jul 17 13:54:54 2020
From: @@m@hhh1 @end|ng |rom gm@||@com (Sam H)
Date: Fri, 17 Jul 2020 07:54:54 -0400
Subject: [R] 
 [External] Re: read.csv fails in R console in Ubuntu terminal
 but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <sk1k0p17hbvtkugldt520d7j.1594974635059@email.android.com>
References: <sk1k0p17hbvtkugldt520d7j.1594974635059@email.android.com>
Message-ID: <CAEtT+h0S42s8TQiZxsWUhZxgtr4kZ3i81Jc398LYf0wj5vpavA@mail.gmail.com>

Hello,

Thank you very much to you all to look into this.

I came across this problem when I was using TTR::stockSymbols() (
https://github.com/joshuaulrich/TTR/blob/e6609b9f7621f3a4b1a204c159af61aebc89997e/R/WebData.R)
.

As a workaround I added this function to my private R package and instead
of read.csv I am now using data.table::fread() which properly (without
failing) downloads the file and reads it.

Best,
Sam


On Fri, Jul 17, 2020 at 4:30 AM ruipbarradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> Yes, I thought it's a site policy issue too. But the file can be accessed
> and read/downloaded from RStudio and Firefox so apparently there's no
> reason why R console shouldn't .
>
> Anyway, I believe it's time for the OP to say someyhing, maybe he has
> solved it and there's no point in continuing.
>
> Rui Barradas
>
>
>
>
>
> Enviado a partir do meu smartphone Samsung Galaxy.
> -------- Mensagem original --------
> De: luke-tierney at uiowa.edu
> Data: 17/07/2020 02:59 (GMT+00:00)
> Para: Ista Zahn <istazahn at gmail.com>
> Cc: Rui Barradas <ruipbarradas at sapo.pt>, r-help at r-project.org, Sam H <
> sam.hhh1 at gmail.com>
> Assunto: Re: [External] Re: [R] read.csv fails in R console in Ubuntu
> terminal but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
>
> On my Ubuntu system the download with read.csv succeeds in an R
> console if I set the HTTPUserAgent and download.file.method options to
> match the ones used by RStudio.
>
> Given how picky the server is being I would worry about whether this
> use is in line with the site's terms of service.
>
> Best,
>
> luke
>
> On Thu, 16 Jul 2020, Ista Zahn wrote:
>
> > On Thu, Jul 16, 2020 at 5:15 PM Ista Zahn <istazahn at gmail.com> wrote:
> >>
> >> On Thu, Jul 16, 2020 at 8:18 AM Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >>>
> >>> Hello,
> >>>
> >>> Thanks, but no, download.file still gives 403 Forbidden with both
> method
> >>> = "libcurl" and method = "wget".
> >>
> >> I think that makes it "not an R question". Ask on
> >> https://unix.stackexchange.com/ maybe?
> >
> > Oh, sorry I misread your message. Nevertheless:
> >
> > $ curl "
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> "
> > <HTML><HEAD>
> > <TITLE>Access Denied</TITLE>
> > </HEAD><BODY>
> > <H1>Access Denied</H1>
> >
> > You don't have permission to access
> >
> "http&#58;&#47;&#47;old&#46;nasdaq&#46;com&#47;screening&#47;companies&#45;by&#45;name&#46;aspx&#63;"
> > on this server.<P>
> > Reference&#32;&#35;18&#46;5506d217&#46;1594934303&#46;938edcb
> > </BODY>
> > </HTML>
> >
> > $ wget "
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> "
> > --2020-07-16 17:19:12--
> >
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> > Loaded CA certificate '/etc/ssl/certs/ca-certificates.crt'
> > Resolving old.nasdaq.com (old.nasdaq.com)... 2600:1400:9000:28f::1b46,
> > 2600:1400:9000:29b::1b46, 23.78.161.120
> > Connecting to old.nasdaq.com
> > (old.nasdaq.com)|2600:1400:9000:28f::1b46|:443... connected.
> > HTTP request sent, awaiting response... 403 Forbidden
> > 2020-07-16 17:19:12 ERROR 403: Forbidden.
> >
> > I don't think this is an R problem.
> >
> > Best,
> > Ista
> >
> >>
> >> Best,
> >> Ista
> >>
> >>>
> >>> Rui Barradas
> >>>
> >>> ?s 05:31 de 16/07/20, Jeff Newmiller escreveu:
> >>>> Perhaps read FAQ 7.43? [1]
> >>>>
> >>>> [1]
> https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f
> >>>>
> >>>> On July 15, 2020 4:02:27 PM PDT, Rui Barradas <ruipbarradas at sapo.pt>
> wrote:
> >>>>> Hello,
> >>>>>
> >>>>> R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.
> >>>>>
> >>>>> I'm also unable to read the file with Rscript from the Ubuntu
> terminal
> >>>>> but the error is not the same as the OP's.
> >>>>>
> >>>>>
> >>>>> The first try was a file test1.R with the following commands.
> >>>>>
> >>>>> x<-"
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> "
> >>>>> read.csv(x, as.is=TRUE, na="n/a")
> >>>>>
> >>>>>
> >>>>> And run with Rscript
> >>>>>
> >>>>> rui at rui:~$ Rscript --vanilla test1.R
> >>>>> Error in file(file, "rt") :
> >>>>>    cannot open the connection to
> >>>>> '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> '
> >>>>> Calls: read.csv -> read.table -> file
> >>>>> In addition: Warning message:
> >>>>> In file(file, "rt") :
> >>>>>    cannot open URL
> >>>>> '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ':
> >>>>>
> >>>>> HTTP status was '403 Forbidden'
> >>>>> Execution halted
> >>>>>
> >>>>>
> >>>>>
> >>>>> The second try was download.file() and then read it.
> >>>>> File test2.R is:
> >>>>>
> >>>>> x<-"
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> "
> >>>>> download.file(x, "companylist.csv")
> >>>>> read.csv("companylist.csv", as.is=TRUE, na="n/a")
> >>>>>
> >>>>>
> >>>>> But this too failed with error 403 Forbiden.
> >>>>>
> >>>>> rui at rui:~$ Rscript --vanilla test2.R
> >>>>> trying URL
> >>>>> '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> '
> >>>>> Error in download.file(x, "companylist.csv") :
> >>>>>    cannot open URL
> >>>>> '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> '
> >>>>> In addition: Warning message:
> >>>>> In download.file(x, "companylist.csv") :
> >>>>>    cannot open URL
> >>>>> '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ':
> >>>>>
> >>>>> HTTP status was '403 Forbidden'
> >>>>> Execution halted
> >>>>>
> >>>>>
> >>>>> This is my session info.
> >>>>>
> >>>>> rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'
> >>>>> R version 4.0.2 (2020-06-22)
> >>>>> Platform: x86_64-pc-linux-gnu (64-bit)
> >>>>> Running under: Ubuntu 20.04 LTS
> >>>>>
> >>>>> Matrix products: default
> >>>>> BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
> >>>>> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
> >>>>>
> >>>>> locale:
> >>>>>   [1] LC_CTYPE=pt_PT.UTF-8       LC_NUMERIC=C
> >>>>>   [3] LC_TIME=pt_PT.UTF-8        LC_COLLATE=pt_PT.UTF-8
> >>>>>   [5] LC_MONETARY=pt_PT.UTF-8    LC_MESSAGES=pt_PT.UTF-8
> >>>>>   [7] LC_PAPER=pt_PT.UTF-8       LC_NAME=C
> >>>>>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
> >>>>> [11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C
> >>>>>
> >>>>> attached base packages:
> >>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>>>>
> >>>>> loaded via a namespace (and not attached):
> >>>>> [1] compiler_4.0.2
> >>>>>
> >>>>>
> >>>>>
> >>>>> ?s 08:45 de 15/07/20, Sam H escreveu:
> >>>>>> Hi,
> >>>>>>
> >>>>>> I am trying to download some data using read.csv and it works
> >>>>> perfectly in
> >>>>>> RStudio and fails in the R console in the terminal in Ubuntu 18.04
> >>>>> after
> >>>>>> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in the
> >>>>> R
> >>>>>> console in the terminal also without any issues.
> >>>>>>
> >>>>>> Why would that be? How to fix this?
> >>>>>>
> >>>>>> Below please find R code output and sessionInfo().
> >>>>>>
> >>>>>> *Works in RStudio*
> >>>>>>
> >>>>>>>
> >>>>> read.csv("
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ",
> >>>>> header=TRUE, as.is=TRUE, na="n/a")
> >>>>>>       Symbol                                                Name
> >>>>>> LastSale MarketCap IPOyear1      TXG
> >>>>>> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
> >>>>>>                              111, Inc.   6.4800  $533.69M    20183
> >>>>>> PIH              1347 Property Insurance Holdings, Inc.   4.5350
> >>>>>> $27.52M    2014
> >>>>>>    sessionInfo()
> >>>>>> R version 4.0.2 (2020-06-22)
> >>>>>> Platform: x86_64-pc-linux-gnu (64-bit)
> >>>>>> Running under: Ubuntu 18.04.4 LTS
> >>>>>>
> >>>>>> Matrix products: default
> >>>>>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> >>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
> >>>>>>
> >>>>>> locale:
> >>>>>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> >>>>>> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> >>>>>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> >>>>>> LC_PAPER=en_US.UTF-8       LC_NAME=C
> >>>>>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C
> >>>>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >>>>>>
> >>>>>> attached base packages:[1] stats     graphics  grDevices utils
> >>>>>> datasets  methods   base
> >>>>>>
> >>>>>> loaded via a namespace (and not attached):[1] compiler_4.0.2
> >>>>> tools_4.0.2
> >>>>>>
> >>>>>> *Fails in R console in terminal*
> >>>>>>
> >>>>>>      >
> >>>>> read.csv("
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ",
> >>>>>> header=TRUE, as.is=TRUE, na="n/a")
> >>>>>> Error in file(file, "rt") :
> >>>>>>     cannot open the connection to
> >>>>>>
> >>>>> '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> '
> >>>>>> In addition: Warning message:
> >>>>>> In file(file, "rt") :
> >>>>>>     URL
> >>>>> '
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ':
> >>>>>> status was 'Failure when receiving data from the peer'>
> traceback()3:
> >>>>>> file(file, "rt")2: read.table(file = file, header = header, sep =
> >>>>> sep,
> >>>>>> quote = quote,
> >>>>>>          dec = dec, fill = fill, comment.char = comment.char, ...)1:
> >>>>>>
> >>>>> read.csv("
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
> ",
> >>>>>>          header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
> >>>>>> R version 4.0.2 (2020-06-22)
> >>>>>> Platform: x86_64-pc-linux-gnu (64-bit)
> >>>>>> Running under: Ubuntu 18.04.4 LTS
> >>>>>>
> >>>>>> Matrix products: default
> >>>>>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> >>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
> >>>>>>
> >>>>>> locale:
> >>>>>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> >>>>>>    [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> >>>>>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> >>>>>>    [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> >>>>>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
> >>>>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >>>>>>
> >>>>>> attached base packages:[1] stats     graphics  grDevices utils
> >>>>>> datasets  methods   base
> >>>>>>
> >>>>>> loaded via a namespace (and not attached):[1] compiler_4.0.2>
> >>>>>>
> >>>>>> I also asked this question here
> >>>>>>
> >>>>>
> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
> >>>>>> . Since there was no answer on stackoverflow I sent this question
> >>>>> also to
> >>>>>> this list.
> >>>>>>
> >>>>>> Best regards,
> >>>>>> Sam
> >>>>>>
> >>>>>>     [[alternative HTML version deleted]]
> >>>>>>
> >>>>>> ______________________________________________
> >>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>>> PLEASE do read the posting guide
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>>>
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Luke Tierney
> Ralph E. Wareham Professor of Mathematical Sciences
> University of Iowa                  Phone:             319-335-3386
> Department of Statistics and        Fax:               319-335-3017
>     Actuarial Science
> 241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
> Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu
>


-- 
Best regards,
Sam

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Fri Jul 17 15:23:43 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 17 Jul 2020 15:23:43 +0200
Subject: [R] 
 [External] Re: read.csv fails in R console in Ubuntu terminal
 but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <CAEtT+h0S42s8TQiZxsWUhZxgtr4kZ3i81Jc398LYf0wj5vpavA@mail.gmail.com>
References: <sk1k0p17hbvtkugldt520d7j.1594974635059@email.android.com>
 <CAEtT+h0S42s8TQiZxsWUhZxgtr4kZ3i81Jc398LYf0wj5vpavA@mail.gmail.com>
Message-ID: <20200717132343.GA13403@posteo.no>

On 2020-07-17 07:54 -0400, Sam H wrote:
| On 2020-07-17 09:30 +0100, ruipbarradas wrote:
| | On 2020-07-16 20:59 -0500, luke-tierney at uiowa.edu wrote:
| | | ?s 08:45 de 15/07/20, Sam H escreveu:
| | | | Hi,
| | | | 
| | | | I am trying to download some 
| | | | data using read.csv and it works 
| | | | perfectly in RStudio and fails 
| | | | in the R console in the terminal 
| | | | in Ubuntu 18.04 after upgrading 
| | | | from R 3.6.3 to 4.0.2. 
| | | 
| | | On my Ubuntu system the download 
| | | with read.csv succeeds in an R 
| | | console if I set the HTTPUserAgent 
| | | and download.file.method options to 
| | | match the ones used by RStudio.
| | | 
| | | Given how picky the server is being 
| | | I would worry about whether this use 
| | | is in line with the site's terms of 
| | | service.
| |
| | Yes, I thought it's a site policy 
| | issue too. But the file can be 
| | accessed and read/downloaded from 
| | RStudio and Firefox so apparently 
| | there's no reason why R console 
| | shouldn't .
| 
| Hello,
| 
| Thank you very much to you all to look into this.
| 
| I came across this problem when I was using TTR::stockSymbols() (
| https://github.com/joshuaulrich/TTR/blob/e6609b9f7621f3a4b1a204c159af61aebc89997e/R/WebData.R)
| .
| 
| As a workaround I added this function 
| to my private R package and instead of 
| read.csv I am now using 
| data.table::fread() which properly 
| (without failing) downloads the file 
| and reads it.

Dear Sam,

Good thing you solved this.  

Like Luke said, to use read.csv you need 
to set the HTTPUserAgent option:

	options("HTTPUserAgent"="User-Agent: RStudio Desktop (1.3.959)")

... or with cURL directly:

	rasmus at twentyfive ~ % curl -H 'User-Agent: RStudio Desktop (1.3.959)' 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'

?s 08:45 de 15/07/20, Sam H escreveu:
| Before upgrading this worked in the R 
| console in the terminal also without 
| any issues.

In version 3.6.3, I was not able to 
run the lines

	> R.Version()$version.string
	[1] "R version 3.6.3 (2020-02-29)"
	> options()[c("download.file.method", "HTTPUserAgent")]
	$<NA>
	NULL
	
	$HTTPUserAgent
	[1] "R (3.6.3 x86_64-pc-linux-gnu x86_64 linux-gnu)"
	
	> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
	> read.csv(x, as.is=TRUE, na="n/a")
	Error in file(file, "rt") :
	  cannot open the connection to 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'
	In addition: Warning message:
	In file(file, "rt") :
	  cannot open URL 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download': HTTP status was '403 Forbidden'
	>

Running data.table::fread in 4.0.2:

	> options()[c("download.file.method", "HTTPUserAgent")]
	$<NA>
	NULL
	
	$HTTPUserAgent
	[1] "R (4.0.2 x86_64-pc-linux-gnu x86_64 linux-gnu)"
	> x <- "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download"
	> data.table::fread(x, header=TRUE)[1:2,]
	   Symbol               Name LastSale
	1:    TXG 10x Genomics, Inc.    89.19
	2:     YI          111, Inc.     6.53
	   MarketCap IPOyear        Sector
	1:    $8.77B    2019 Capital Goods
	2:  $537.81M    2018   Health Care
	                                           industry
	1: Biotechnology: Laboratory Analytical Instruments
	2:                         Medical/Nursing Services
	                       Summary Quote V9
	1: https://old.nasdaq.com/symbol/txg NA
	2:  https://old.nasdaq.com/symbol/yi NA

Does anyone know what data.table::fread 
does different to read.csv here (so 
setting HTTPUserAgent is not needed)?  

Without HTTPUserAgent, I think 
data.table::fread just reports something 
like "libcurl/7.71.1", like read.csv 
would have done ...

Best,
Rasmus


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jul 17 17:32:14 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 17 Jul 2020 16:32:14 +0100
Subject: [R] Fwd: Re: [External] Re: read.csv fails in R console in Ubuntu
 terminal but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <81808429-0637-1809-4afc-b3964594851d@sapo.pt>
References: <81808429-0637-1809-4afc-b3964594851d@sapo.pt>
Message-ID: <5c459851-2844-3c9d-2c61-dbb49945aa5d@sapo.pt>

Hello,

Sorry, once again, this time I forgot to cc the list.
See the answer to Martin Maechler's mail below.

Rui Barradas


-------- Mensagem reencaminhada --------
Assunto: 	Re: [R] [External] Re: read.csv fails in R console in Ubuntu 
terminal but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
Data: 	Fri, 17 Jul 2020 14:27:37 +0100
De: 	Rui Barradas <ruipbarradas at sapo.pt>
Para: 	Martin Maechler <maechler at stat.math.ethz.ch>



Hello,

My apologies to the list.

I seldom use the cell phone from where I sent that e-mail and forgot to 
check the settings.
The original text, updated since the OP already solved the problem was:

Yes, I thought it's a site policy issue too.
But the file can be accessed and read/downloaded from RStudio and 
Firefox so apparently there's no reason why R console shouldn't.
Anyway, in the mean time the OP has solved the problem but not using 
read.csv.

Rui Barradas

?s 10:21 de 17/07/2020, Martin Maechler escreveu:
> Dear Rui,
>
> I think you should try re-sending this, *not* using html ...
>
> Best,
>
> Martin
>
>
>
>>>>>> ruipbarradas
>>>>>> on Fri, 17 Jul 2020 09:30:35 +0100 writes:
> > Hello,Yes, I thought it's a site policy issue too. But the
> > file can be accessed and read/downloaded from RStudio and
> > Firefox so apparently there's no reason why R console
> > shouldn't .Anyway, I believe it's time for the OP to say
> > someyhing, maybe he has solved it and there's no point in
> > continuing.Rui Barradas?Enviado a partir do meu smartphone
> > Samsung Galaxy.-------- Mensagem original --------De:
> > luke-tierney at uiowa.edu Data: 17/07/2020 02:59 (GMT+00:00)
> > Para: Ista Zahn <istazahn at gmail.com> Cc: Rui Barradas
> > <ruipbarradas at sapo.pt>, r-help at r-project.org, Sam H
> > <sam.hhh1 at gmail.com> Assunto: Re: [External] Re: [R]
> > read.csv fails in R console in Ubuntu terminal but works
> > in RStudio after R 3.6.3 upgrade to R 4.0.2? On my Ubuntu
> > system the download with read.csv succeeds in an Rconsole
> > if I set the HTTPUserAgent and download.file.method
> > options tomatch the ones used by RStudio.Given how picky
> > the server is being I would worry about whether thisuse is
> > in line with the site's terms of service.Best,lukeOn Thu,
> > 16 Jul 2020, Ista Zahn wrote:> On Thu, Jul 16, 2020 at
> > 5:15 PM Ista Zahn <istazahn at gmail.com> wrote:>>>> On Thu,
> > Jul 16, 2020 at 8:18 AM Rui Barradas
> > <ruipbarradas at sapo.pt> wrote:>>>>>> Hello,>>>>>> Thanks,
> > but no, download.file still gives 403 Forbidden with both
> > method>>> = "libcurl" and method = "wget".>>>> I think
> > that makes it "not an R question". Ask on>>
> > https://unix.stackexchange.com/ maybe?>> Oh, sorry I
> > misread your message. Nevertheless:>> $ curl
> > 
> "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download">
> > <HTML><HEAD>> <TITLE>Access Denied</TITLE>> </HEAD><BODY>>
> > <H1>Access Denied</H1>>> You don't have permission to
> > access>
> > 
> "http&#58;&#47;&#47;old&#46;nasdaq&#46;com&#47;screening&#47;companies&#45;by&#45;name&#46;aspx&#63;">
> > on this server.<P>>
> > Reference&#32;&#35;18&#46;5506d217&#46;1594934303&#46;938edcb>
> > </BODY>> </HTML>>> $ wget
> > 
> "https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download">
> > --2020-07-16 17:19:12-->
> > 
> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download>
> > Loaded CA certificate
> > '/etc/ssl/certs/ca-certificates.crt'> Resolving
> > old.nasdaq.com
> > (old.nasdaq.com)... 2600:1400:9000:28f::1b46,>
> > 2600:1400:9000:29b::1b46, 23.78.161.120> Connecting to
> > old.nasdaq.com>
> > (old.nasdaq.com)|2600:1400:9000:28f::1b46|:443... connected.>
> > HTTP request sent, awaiting response... 403 Forbidden>
> > 2020-07-16 17:19:12 ERROR 403: Forbidden.>> I don't think
> > this is an R problem.>> Best,> Ista>>>>> Best,>>
> > Ista>>>>>>>> Rui Barradas>>>>>> ?s 05:31 de 16/07/20, Jeff
> > Newmiller escreveu:>>>> Perhaps read FAQ 7.43? [1]>>>>>>>>
> > [1]
> > 
> https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f>>>>>>>>
> > On July 15, 2020 4:02:27 PM PDT, Rui Barradas
> > <ruipbarradas at sapo.pt> wrote:>>>>> Hello,>>>>>>>>>> R
> > 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.>>>>>>>>>>
> > I'm also unable to read the file with Rscript from the
> > Ubuntu terminal>>>>> but the error is not the same as the
> > OP's.>>>>>>>>>>>>>>> The first try was a file test1.R with
> > the following commands.>>>>>>>>>>
> > 
> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download">>>>>
> > read.csv(x, as.is=TRUE, na="n/a")>>>>>>>>>>>>>>> And run
> > with Rscript>>>>>>>>>> rui at rui:~$ Rscript --vanilla
> > test1.R>>>>> Error in file(file, "rt") :>>>>>??? cannot
> > open the connection to>>>>>
> > 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'>>>>>
> > Calls: read.csv -> read.table -> file>>>>> In addition:
> > Warning message:>>>>> In file(file, "rt") :>>>>>??? cannot
> > open URL>>>>>
> > 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':>>>>>>>>>>
> > HTTP status was '403 Forbidden'>>>>> Execution
> > halted>>>>>>>>>>>>>>>>>>>> The second try was
> > download.file() and then read it.>>>>> File test2.R
> > is:>>>>>>>>>>
> > 
> x<-"https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download">>>>>
> > download.file(x, "companylist.csv")>>>>>
> > read.csv("companylist.csv", as.is=TRUE,
> > na="n/a")>>>>>>>>>>>>>>> But this too failed with error
> > 403 Forbiden.>>>>>>>>>> rui at rui:~$ Rscript --vanilla
> > test2.R>>>>> trying URL>>>>>
> > 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'>>>>>
> > Error in download.file(x, "companylist.csv") :>>>>>
> > cannot open URL>>>>>
> > 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'>>>>>
> > In addition: Warning message:>>>>> In download.file(x,
> > "companylist.csv") :>>>>>??? cannot open URL>>>>>
> > 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':>>>>>>>>>>
> > HTTP status was '403 Forbidden'>>>>> Execution
> > halted>>>>>>>>>>>>>>> This is my session info.>>>>>>>>>>
> > rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'>>>>> R
> > version 4.0.2 (2020-06-22)>>>>> Platform:
> > x86_64-pc-linux-gnu (64-bit)>>>>> Running under: Ubuntu
> > 20.04 LTS>>>>>>>>>> Matrix products: default>>>>> BLAS:
> > /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0>>>>>
> > LAPACK:
> > /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0>>>>>>>>>>
> > locale:>>>>>?? [1] LC_CTYPE=pt_PT.UTF-8
> > LC_NUMERIC=C>>>>>?? [3] LC_TIME=pt_PT.UTF-8
> > LC_COLLATE=pt_PT.UTF-8>>>>>?? [5]
> > LC_MONETARY=pt_PT.UTF-8 LC_MESSAGES=pt_PT.UTF-8>>>>>
> > [7] LC_PAPER=pt_PT.UTF-8 LC_NAME=C>>>>>?? [9]
> > LC_ADDRESS=C LC_TELEPHONE=C>>>>> [11]
> > LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C>>>>>>>>>>
> > attached base packages:>>>>> [1] stats graphics
> > grDevices utils???? datasets? methods base>>>>>>>>>>
> > loaded via a namespace (and not attached):>>>>> [1]
> > compiler_4.0.2>>>>>>>>>>>>>>>>>>>> ?s 08:45 de 15/07/20,
> > Sam H escreveu:>>>>>> Hi,>>>>>>>>>>>> I am trying to
> > download some data using read.csv and it works>>>>>
> > perfectly in>>>>>> RStudio and fails in the R console in
> > the terminal in Ubuntu 18.04>>>>> after>>>>>> upgrading
> > from R 3.6.3 to 4.0.2. Before upgrading this worked in
> > the>>>>> R>>>>>> console in the terminal also without any
> > issues.>>>>>>>>>>>> Why would that be? How to fix
> > this?>>>>>>>>>>>> Below please find R code output and
> > sessionInfo().>>>>>>>>>>>> *Works in
> > RStudio*>>>>>>>>>>>>>>>>>>
> > 
> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",>>>>>
> > header=TRUE, as.is=TRUE, na="n/a")>>>>>>
> > Symbol
> > Name>>>>>> LastSale MarketCap IPOyear1????? TXG>>>>>> 10x
> > Genomics, Inc.? 87.4400???? $8.6B??? 20192
> > YI>>>>>> 111, Inc.?? 6.4800
> > $533.69M??? 20183>>>>>> PIH 1347 Property
> > Insurance Holdings, Inc.?? 4.5350>>>>>> $27.52M
> > 2014>>>>>> sessionInfo()>>>>>> R version 4.0.2
> > (2020-06-22)>>>>>> Platform: x86_64-pc-linux-gnu
> > (64-bit)>>>>>> Running under: Ubuntu 18.04.4
> > LTS>>>>>>>>>>>> Matrix products: default>>>>>> BLAS:
> > /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3>>>>>>
> > LAPACK:
> > /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so>>>>>>>>>>>>
> > locale:>>>>>>??? [1] LC_CTYPE=en_US.UTF-8
> > LC_NUMERIC=C>>>>>> LC_TIME=en_US.UTF-8
> > LC_COLLATE=en_US.UTF-8>>>>>>??? [5]
> > LC_MONETARY=en_US.UTF-8 LC_MESSAGES=en_US.UTF-8>>>>>>
> > LC_PAPER=en_US.UTF-8 LC_NAME=C>>>>>>??? [9]
> > LC_ADDRESS=C LC_TELEPHONE=C>>>>>>
> > LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C>>>>>>>>>>>>
> > attached base packages:[1] stats???? graphics? grDevices
> > utils>>>>>> datasets? methods base>>>>>>>>>>>> loaded
> > via a namespace (and not attached):[1] compiler_4.0.2>>>>>
> > tools_4.0.2>>>>>>>>>>>> *Fails in R console in
> > terminal*>>>>>>>>>>>> >>>>>>
> > 
> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",>>>>>>
> > header=TRUE, as.is=TRUE, na="n/a")>>>>>> Error in
> > file(file, "rt") :>>>>>>???? cannot open the connection
> > to>>>>>>>>>>>
> > 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download'>>>>>>
> > In addition: Warning message:>>>>>> In file(file, "rt")
> > :>>>>>>???? URL>>>>>
> > 
> 'https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download':>>>>>>
> > status was 'Failure when receiving data from the peer'>
> > traceback()3:>>>>>> file(file, "rt")2: read.table(file =
> > file, header = header, sep =>>>>> sep,>>>>>> quote =
> > quote,>>>>>>????????? dec = dec, fill = fill, comment.char
> > = comment.char, ...)1:>>>>>>>>>>>
> > 
> read.csv("https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download",>>>>>>
> > header = TRUE, as.is = TRUE, na = "n/a")>
> > sessionInfo()>>>>>> R version 4.0.2 (2020-06-22)>>>>>>
> > Platform: x86_64-pc-linux-gnu (64-bit)>>>>>> Running
> > under: Ubuntu 18.04.4 LTS>>>>>>>>>>>> Matrix products:
> > default>>>>>> BLAS:
> > /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3>>>>>>
> > LAPACK:
> > /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so>>>>>>>>>>>>
> > locale:>>>>>>??? [1] LC_CTYPE=en_US.UTF-8
> > LC_NUMERIC=C>>>>>>??? [3] LC_TIME=en_US.UTF-8
> > LC_COLLATE=en_US.UTF-8>>>>>>??? [5]
> > LC_MONETARY=en_US.UTF-8
> > LC_MESSAGES=en_US.UTF-8>>>>>>??? [7]
> > LC_PAPER=en_US.UTF-8 LC_NAME=C>>>>>>??? [9]
> > LC_ADDRESS=C?????????????? LC_TELEPHONE=C
> > [11]>>>>>> LC_MEASUREMENT=en_US.UTF-8
> > LC_IDENTIFICATION=C>>>>>>>>>>>> attached base packages:[1]
> > stats???? graphics? grDevices utils>>>>>> datasets
> > methods base>>>>>>>>>>>> loaded via a namespace (and not
> > attached):[1] compiler_4.0.2>>>>>>>>>>>>> I also asked
> > this question here>>>>>>>>>>>
> > 
> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r>>>>>>
> > . Since there was no answer on stackoverflow I sent this
> > question>>>>> also to>>>>>> this list.>>>>>>>>>>>> Best
> > regards,>>>>>> Sam>>>>>>>>>>>> [[alternative HTML
> > version deleted]]>>>>>>>>>>>>
> > ______________________________________________>>>>>>
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> > more, see>>>>>>
> > https://stat.ethz.ch/mailman/listinfo/r-help>>>>>> PLEASE
> > do read the posting guide>>>>>
> > http://www.R-project.org/posting-guide.html>>>>>> and
> > provide commented, minimal, self-contained, reproducible
> > code.>>>>>>>>>>>>>>>>
> > ______________________________________________>>>>>
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> > more, see>>>>>
> > https://stat.ethz.ch/mailman/listinfo/r-help>>>>> PLEASE
> > do read the posting guide>>>>>
> > http://www.R-project.org/posting-guide.html>>>>> and
> > provide commented, minimal, self-contained, reproducible
> > code.>>>>>>>>>>
> > ______________________________________________>>>
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> > more, see>>>
> > https://stat.ethz.ch/mailman/listinfo/r-help>>> PLEASE do
> > read the posting guide
> > http://www.R-project.org/posting-guide.html>>> and provide
> > commented, minimal, self-contained, reproducible code.>>
> > ______________________________________________>
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> > more, see> https://stat.ethz.ch/mailman/listinfo/r-help>
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html> and provide
> > commented, minimal, self-contained, reproducible code.>--
> > Luke TierneyRalph E. Wareham Professor of Mathematical
> > SciencesUniversity of Iowa
> > Phone:???????????? 319-335-3386Department of Statistics
> > and??????? Fax:?????????????? 319-335-3017??? Actuarial
> > Science241 Schaeffer Hall????????????????? email:
> > luke-tierney at uiowa.eduIowa City, IA 52242
> > WWW:? http://www.stat.uiowa.edu [[alternative HTML version
> > deleted]]
>
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> > more, see https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html and provide
> > commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus

	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Sat Jul 18 03:27:56 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Fri, 17 Jul 2020 21:27:56 -0400
Subject: [R] Help with read.csv.sql()
Message-ID: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>

I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.

The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.

I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.

It seems that the above should be feasible but I am missing something? Does anyone know?

A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.

Is it possible to do this when importing using read.csv.sql()?


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul 18 03:49:03 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 17 Jul 2020 18:49:03 -0700
Subject: [R] Help with read.csv.sql()
In-Reply-To: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
Message-ID: <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>

Is there some reason that you can't make the changes to the data frame
(column names, as.date(), ...) *after* you have read all your data in?

Do all your csv files use the same names and date formats?


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com> wrote:

> I have created a dataframe with columns that are characters, integers and
> numeric and with column names assigned by me. I am using read.csv.sql() to
> read portions of a number of large csv files into this dataframe, each csv
> file having a header row with columb names.
>
> The problem I am having is that the csv files have header rows with column
> names that are slightly different from the column names I have assigned in
> the dataframe and it seems that when I read the csv data into the
> dataframe, the column names from the csv file replace the column names I
> chose when creating the dataframe.
>
> I have been unable to figure out if it is possible to assign column names
> of my choosing in the read.csv.sql() function? I have tried various
> variations but none seem to work. I tried colClasses = c(....) but that did
> not work, I tried field.types = c(...) but could not get that to work
> either.
>
> It seems that the above should be feasible but I am missing something?
> Does anyone know?
>
> A secondary issue is that the csv files have a column with a date in
> mm/dd/yyyy format that I would like to make into a Date type column in my
> dataframe. Again, I have been unable to find a way - if at all possible -
> to force a conversion into a Date format when importing into the dataframe.
> The best I have so far is to import is a character column and then use
> as.Date() to later force the conversion of the dataframe column.
>
> Is it possible to do this when importing using read.csv.sql()?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @ndy@e|pr@m@ @end|ng |rom gm@||@com  Sat Jul 18 08:13:07 2020
From: @ndy@e|pr@m@ @end|ng |rom gm@||@com (andy elprama)
Date: Sat, 18 Jul 2020 08:13:07 +0200
Subject: [R] levels
In-Reply-To: <0583f5ce-e2f0-69e2-b57f-5e6ba0b3ac8a@gmail.com>
References: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
 <215C4371-3D8A-4792-A7C8-48B530E8DCB4@me.com>
 <0583f5ce-e2f0-69e2-b57f-5e6ba0b3ac8a@gmail.com>
Message-ID: <CANPMfBBYVY93F-U2hy0LUGfD-+uJdXKHZkGjPmwPawYzpHP5jA@mail.gmail.com>

Thanks, I will check it out.

Op za 18 jul. 2020 om 00:47 schreef Chris Gordon-Smith <
c.gordonsmith at gmail.com>:

> There is an interesting item on stringsAsFactors in this useR! 2020
> session:
>
> https://www.youtube.com/watch?v=X_eDHNVceCU&feature=youtu.be
>
> It's about 27 minutes in.
>
> Chris Gordon-Smith
> On 15/07/2020 17:16, Marc Schwartz via R-help wrote:
>
> On Jul 15, 2020, at 4:31 AM, andy elprama <andy.elprama at gmail.com> <andy.elprama at gmail.com> wrote:
>
> Dear R-users,
>
> Something strange happened within the command "levels"
>
> R version 3.6.1
> name <- c("a","b","c")
> values <- c(1,2,3)
> data <- data.frame(name,values)
> levels(data$name)
> [1] "a" "b" "c"
>
> R version 4.0
> name <- c("a","b","c")
> values <- c(1,2,3)
> data <- data.frame(name,values)
> levels(data$name)
> [1] NULL
>
> What is happening here?
>
> Hi,
>
> The default value for 'stringsAsFactors' for data.frame() and read.table() changed from TRUE to FALSE in version 4.0.0, per the news() file:
>
> "R now uses a stringsAsFactors = FALSE default, and hence by default no longer converts strings to factors in calls to data.frame() and read.table()."
>
>
> Using 4.0.2:
>
> data <- data.frame(name, values, stringsAsFactors = TRUE)
>
>
> levels(data$name)
>
> [1] "a" "b" "c"
>
>
> If you see behavioral changes from one version of R to another, especially major version increments, check the news() file.
>
> Regards,
>
> Marc Schwartz
>
>
> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Sat Jul 18 17:43:58 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sat, 18 Jul 2020 11:43:58 -0400
Subject: [R] Help with read.csv.sql()
In-Reply-To: <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
Message-ID: <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>

On 07/17/2020 09:49 PM, Bert Gunter wrote:
> Is there some reason that you can't make the changes to the data frame (column names, as.date(), ...) *after* you have read all your data in?
>
> Do all your csv files use the same names and date formats?
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
>
>     I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.
>
>     The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.
>
>     I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.
>
>     It seems that the above should be feasible but I am missing something? Does anyone know?
>
>     A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.
>
>     Is it possible to do this when importing using read.csv.sql()?
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>
Yes, the files use the same column names and date format (at least as far as I know now.) I agree I could do it as you suggest above but from a purist perspective I would rather do it when importing the data using read.csv.sql(), particularly if column names and/or date format might change, or be different between different files. I am indeed selecting rows from a large number of csv files so this is entirely plausible.

Has anyone been able to name columns in the read.csv.sql() call and/or force date format conversion in the call itself? The first refers to naming columns differently from what a header in the csv file may have.


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jul 18 17:54:28 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 18 Jul 2020 16:54:28 +0100
Subject: [R] Help with read.csv.sql()
In-Reply-To: <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
Message-ID: <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>

Hello,

I don't believe that what you are asking for is possible but like Bert 
suggested, you can do it after reading in the data.
You could write a convenience function to read the data, then change 
what you need to change.
Then the function would return this final object.

Rui Barradas

?s 16:43 de 18/07/2020, H escreveu:

> On 07/17/2020 09:49 PM, Bert Gunter wrote:
>> Is there some reason that you can't make the changes to the data frame (column names, as.date(), ...) *after* you have read all your data in?
>>
>> Do all your csv files use the same names and date formats?
>>
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
>>
>>      I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.
>>
>>      The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.
>>
>>      I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.
>>
>>      It seems that the above should be feasible but I am missing something? Does anyone know?
>>
>>      A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.
>>
>>      Is it possible to do this when importing using read.csv.sql()?
>>
>>      ______________________________________________
>>      R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>>      https://stat.ethz.ch/mailman/listinfo/r-help
>>      PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>      and provide commented, minimal, self-contained, reproducible code.
>>
> Yes, the files use the same column names and date format (at least as far as I know now.) I agree I could do it as you suggest above but from a purist perspective I would rather do it when importing the data using read.csv.sql(), particularly if column names and/or date format might change, or be different between different files. I am indeed selecting rows from a large number of csv files so this is entirely plausible.
>
> Has anyone been able to name columns in the read.csv.sql() call and/or force date format conversion in the call itself? The first refers to naming columns differently from what a header in the csv file may have.
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From @gent@ @end|ng |rom medd@t@|nc@com  Sat Jul 18 18:59:31 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sat, 18 Jul 2020 12:59:31 -0400
Subject: [R] Help with read.csv.sql()
In-Reply-To: <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
Message-ID: <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>

On 07/18/2020 11:54 AM, Rui Barradas wrote:
> Hello,
>
> I don't believe that what you are asking for is possible but like Bert suggested, you can do it after reading in the data.
> You could write a convenience function to read the data, then change what you need to change.
> Then the function would return this final object.
>
> Rui Barradas
>
> ?s 16:43 de 18/07/2020, H escreveu:
>
>> On 07/17/2020 09:49 PM, Bert Gunter wrote:
>>> Is there some reason that you can't make the changes to the data frame (column names, as.date(), ...) *after* you have read all your data in?
>>>
>>> Do all your csv files use the same names and date formats?
>>>
>>>
>>> Bert Gunter
>>>
>>> "The trouble with having an open mind is that people keep coming along and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>
>>>
>>> On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
>>>
>>> ???? I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.
>>>
>>> ???? The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.
>>>
>>> ???? I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.
>>>
>>> ???? It seems that the above should be feasible but I am missing something? Does anyone know?
>>>
>>> ???? A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.
>>>
>>> ???? Is it possible to do this when importing using read.csv.sql()?
>>>
>>> ???? ______________________________________________
>>> ???? R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>>> ???? https://stat.ethz.ch/mailman/listinfo/r-help
>>> ???? PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> ???? and provide commented, minimal, self-contained, reproducible code.
>>>
>> Yes, the files use the same column names and date format (at least as far as I know now.) I agree I could do it as you suggest above but from a purist perspective I would rather do it when importing the data using read.csv.sql(), particularly if column names and/or date format might change, or be different between different files. I am indeed selecting rows from a large number of csv files so this is entirely plausible.
>>
>> Has anyone been able to name columns in the read.csv.sql() call and/or force date format conversion in the call itself? The first refers to naming columns differently from what a header in the csv file may have.
>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
The documentation for read.csv.sql() suggests that colClasses() and/or field.types() should work but I may well have misunderstood the documentation, hence my question in this group.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jul 18 19:09:36 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 18 Jul 2020 18:09:36 +0100
Subject: [R] Help with read.csv.sql()
In-Reply-To: <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
Message-ID: <b10549b9-bd2f-f2b0-cb18-589ce416f3ac@sapo.pt>

Hello,

The documentation says the following.

field.types
A list whose names are the column names and whose contents are the 
SQLite types (not the R class names) of the columns.


So argument field.types is a named list.

 ?- The list members names are the column names of the table to be read.
 ?- The list members values are SQLite types, like "CHAR", "VARCHAR", 
"INT", etc.


As for colClasses, those are R class names.

Rui Barradas




?s 17:59 de 18/07/2020, H escreveu:
> On 07/18/2020 11:54 AM, Rui Barradas wrote:
>> Hello,
>>
>> I don't believe that what you are asking for is possible but like Bert suggested, you can do it after reading in the data.
>> You could write a convenience function to read the data, then change what you need to change.
>> Then the function would return this final object.
>>
>> Rui Barradas
>>
>> ?s 16:43 de 18/07/2020, H escreveu:
>>
>>> On 07/17/2020 09:49 PM, Bert Gunter wrote:
>>>> Is there some reason that you can't make the changes to the data frame (column names, as.date(), ...) *after* you have read all your data in?
>>>>
>>>> Do all your csv files use the same names and date formats?
>>>>
>>>>
>>>> Bert Gunter
>>>>
>>>> "The trouble with having an open mind is that people keep coming along and sticking things into it."
>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>
>>>>
>>>> On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
>>>>
>>>>  ???? I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.
>>>>
>>>>  ???? The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.
>>>>
>>>>  ???? I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.
>>>>
>>>>  ???? It seems that the above should be feasible but I am missing something? Does anyone know?
>>>>
>>>>  ???? A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.
>>>>
>>>>  ???? Is it possible to do this when importing using read.csv.sql()?
>>>>
>>>>  ???? ______________________________________________
>>>>  ???? R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>>>>  ???? https://stat.ethz.ch/mailman/listinfo/r-help
>>>>  ???? PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>  ???? and provide commented, minimal, self-contained, reproducible code.
>>>>
>>> Yes, the files use the same column names and date format (at least as far as I know now.) I agree I could do it as you suggest above but from a purist perspective I would rather do it when importing the data using read.csv.sql(), particularly if column names and/or date format might change, or be different between different files. I am indeed selecting rows from a large number of csv files so this is entirely plausible.
>>>
>>> Has anyone been able to name columns in the read.csv.sql() call and/or force date format conversion in the call itself? The first refers to naming columns differently from what a header in the csv file may have.
>>>
>>>
>>>  ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> The documentation for read.csv.sql() suggests that colClasses() and/or field.types() should work but I may well have misunderstood the documentation, hence my question in this group.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Sat Jul 18 19:38:21 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sat, 18 Jul 2020 10:38:21 -0700
Subject: [R] Help with read.csv.sql()
In-Reply-To: <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
Message-ID: <CAA99HCxnMXk2-oXtojEYS0-XpT35a-ovJqNARLPiTX4Qu8n+9A@mail.gmail.com>

Do either of the postings/threads below help?

https://r.789695.n4.nabble.com/read-csv-sql-to-select-from-a-large-csv-file-td4650565.html#a4651534
https://r.789695.n4.nabble.com/using-sqldf-s-read-csv-sql-to-read-a-file-with-quot-NA-quot-for-missing-td4642327.html

Otherwise you can try reading through the FAQ on Github:

https://github.com/ggrothendieck/sqldf

HTH, Bill.

W. Michels, Ph.D.



On Sat, Jul 18, 2020 at 9:59 AM H <agents at meddatainc.com> wrote:
>
> On 07/18/2020 11:54 AM, Rui Barradas wrote:
> > Hello,
> >
> > I don't believe that what you are asking for is possible but like Bert suggested, you can do it after reading in the data.
> > You could write a convenience function to read the data, then change what you need to change.
> > Then the function would return this final object.
> >
> > Rui Barradas
> >
> > ?s 16:43 de 18/07/2020, H escreveu:
> >
> >> On 07/17/2020 09:49 PM, Bert Gunter wrote:
> >>> Is there some reason that you can't make the changes to the data frame (column names, as.date(), ...) *after* you have read all your data in?
> >>>
> >>> Do all your csv files use the same names and date formats?
> >>>
> >>>
> >>> Bert Gunter
> >>>
> >>> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> >>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>>
> >>>
> >>> On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
> >>>
> >>>      I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.
> >>>
> >>>      The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.
> >>>
> >>>      I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.
> >>>
> >>>      It seems that the above should be feasible but I am missing something? Does anyone know?
> >>>
> >>>      A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.
> >>>
> >>>      Is it possible to do this when importing using read.csv.sql()?
> >>>
> >>>      ______________________________________________
> >>>      R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> >>>      https://stat.ethz.ch/mailman/listinfo/r-help
> >>>      PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>>      and provide commented, minimal, self-contained, reproducible code.
> >>>
> >> Yes, the files use the same column names and date format (at least as far as I know now.) I agree I could do it as you suggest above but from a purist perspective I would rather do it when importing the data using read.csv.sql(), particularly if column names and/or date format might change, or be different between different files. I am indeed selecting rows from a large number of csv files so this is entirely plausible.
> >>
> >> Has anyone been able to name columns in the read.csv.sql() call and/or force date format conversion in the call itself? The first refers to naming columns differently from what a header in the csv file may have.
> >>
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> The documentation for read.csv.sql() suggests that colClasses() and/or field.types() should work but I may well have misunderstood the documentation, hence my question in this group.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @@m@hhh1 @end|ng |rom gm@||@com  Sun Jul 19 03:42:35 2020
From: @@m@hhh1 @end|ng |rom gm@||@com (Sam H)
Date: Sun, 19 Jul 2020 03:42:35 +0200
Subject: [R] 
 [External] Re: read.csv fails in R console in Ubuntu terminal
 but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
In-Reply-To: <CAEtT+h0S42s8TQiZxsWUhZxgtr4kZ3i81Jc398LYf0wj5vpavA@mail.gmail.com>
References: <sk1k0p17hbvtkugldt520d7j.1594974635059@email.android.com>
 <CAEtT+h0S42s8TQiZxsWUhZxgtr4kZ3i81Jc398LYf0wj5vpavA@mail.gmail.com>
Message-ID: <CAEtT+h1t6XQk4TGVMY2uZ-xHGJaLj87Sp6i1Zoxr5e_E7ZNt+g@mail.gmail.com>

This issue was now solved in TTR::stockSymbols() by package author
https://github.com/joshuaulrich/TTR/commit/98dec2b5aa68c3cee750397c7d11b164895e0140

Thanks for all the help and ideas.

Best,
Sam

On Fri, Jul 17, 2020, 13:54 Sam H <sam.hhh1 at gmail.com> wrote:

> Hello,
>
> Thank you very much to you all to look into this.
>
> I came across this problem when I was using TTR::stockSymbols() (
> https://github.com/joshuaulrich/TTR/blob/e6609b9f7621f3a4b1a204c159af61aebc89997e/R/WebData.R)
> .
>
> As a workaround I added this function to my private R package and instead
> of read.csv I am now using data.table::fread() which properly (without
> failing) downloads the file and reads it.
>
> Best,
> Sam
>
>
> On Fri, Jul 17, 2020 at 4:30 AM ruipbarradas <ruipbarradas at sapo.pt> wrote:
>
>> Hello,
>>
>> Yes, I thought it's a site policy issue too. But the file can be accessed
>> and read/downloaded from RStudio and Firefox so apparently there's no
>> reason why R console shouldn't .
>>
>> Anyway, I believe it's time for the OP to say someyhing, maybe he has
>> solved it and there's no point in continuing.
>>
>> Rui Barradas
>>
>>
>>
>>
>>
>> Enviado a partir do meu smartphone Samsung Galaxy.
>> -------- Mensagem original --------
>> De: luke-tierney at uiowa.edu
>> Data: 17/07/2020 02:59 (GMT+00:00)
>> Para: Ista Zahn <istazahn at gmail.com>
>> Cc: Rui Barradas <ruipbarradas at sapo.pt>, r-help at r-project.org, Sam H <
>> sam.hhh1 at gmail.com>
>> Assunto: Re: [External] Re: [R] read.csv fails in R console in Ubuntu
>> terminal but works in RStudio after R 3.6.3 upgrade to R 4.0.2?
>>
>> On my Ubuntu system the download with read.csv succeeds in an R
>> console if I set the HTTPUserAgent and download.file.method options to
>> match the ones used by RStudio.
>>
>> Given how picky the server is being I would worry about whether this
>> use is in line with the site's terms of service.
>>
>> Best,
>>
>> luke
>>
>> On Thu, 16 Jul 2020, Ista Zahn wrote:
>>
>> > On Thu, Jul 16, 2020 at 5:15 PM Ista Zahn <istazahn at gmail.com> wrote:
>> >>
>> >> On Thu, Jul 16, 2020 at 8:18 AM Rui Barradas <ruipbarradas at sapo.pt>
>> wrote:
>> >>>
>> >>> Hello,
>> >>>
>> >>> Thanks, but no, download.file still gives 403 Forbidden with both
>> method
>> >>> = "libcurl" and method = "wget".
>> >>
>> >> I think that makes it "not an R question". Ask on
>> >> https://unix.stackexchange.com/ maybe?
>> >
>> > Oh, sorry I misread your message. Nevertheless:
>> >
>> > $ curl "
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> "
>> > <HTML><HEAD>
>> > <TITLE>Access Denied</TITLE>
>> > </HEAD><BODY>
>> > <H1>Access Denied</H1>
>> >
>> > You don't have permission to access
>> >
>> "http&#58;&#47;&#47;old&#46;nasdaq&#46;com&#47;screening&#47;companies&#45;by&#45;name&#46;aspx&#63;"
>> > on this server.<P>
>> > Reference&#32;&#35;18&#46;5506d217&#46;1594934303&#46;938edcb
>> > </BODY>
>> > </HTML>
>> >
>> > $ wget "
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> "
>> > --2020-07-16 17:19:12--
>> >
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> > Loaded CA certificate '/etc/ssl/certs/ca-certificates.crt'
>> > Resolving old.nasdaq.com (old.nasdaq.com)... 2600:1400:9000:28f::1b46,
>> > 2600:1400:9000:29b::1b46, 23.78.161.120
>> > Connecting to old.nasdaq.com
>> > (old.nasdaq.com)|2600:1400:9000:28f::1b46|:443... connected.
>> > HTTP request sent, awaiting response... 403 Forbidden
>> > 2020-07-16 17:19:12 ERROR 403: Forbidden.
>> >
>> > I don't think this is an R problem.
>> >
>> > Best,
>> > Ista
>> >
>> >>
>> >> Best,
>> >> Ista
>> >>
>> >>>
>> >>> Rui Barradas
>> >>>
>> >>> ?s 05:31 de 16/07/20, Jeff Newmiller escreveu:
>> >>>> Perhaps read FAQ 7.43? [1]
>> >>>>
>> >>>> [1]
>> https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-enable-secure-https-downloads-in-R_003f
>> >>>>
>> >>>> On July 15, 2020 4:02:27 PM PDT, Rui Barradas <ruipbarradas at sapo.pt>
>> wrote:
>> >>>>> Hello,
>> >>>>>
>> >>>>> R 4.0.2 on Ubuntu 20.04 LTS, sessionInfo below.
>> >>>>>
>> >>>>> I'm also unable to read the file with Rscript from the Ubuntu
>> terminal
>> >>>>> but the error is not the same as the OP's.
>> >>>>>
>> >>>>>
>> >>>>> The first try was a file test1.R with the following commands.
>> >>>>>
>> >>>>> x<-"
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> "
>> >>>>> read.csv(x, as.is=TRUE, na="n/a")
>> >>>>>
>> >>>>>
>> >>>>> And run with Rscript
>> >>>>>
>> >>>>> rui at rui:~$ Rscript --vanilla test1.R
>> >>>>> Error in file(file, "rt") :
>> >>>>>    cannot open the connection to
>> >>>>> '
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> '
>> >>>>> Calls: read.csv -> read.table -> file
>> >>>>> In addition: Warning message:
>> >>>>> In file(file, "rt") :
>> >>>>>    cannot open URL
>> >>>>> '
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> ':
>> >>>>>
>> >>>>> HTTP status was '403 Forbidden'
>> >>>>> Execution halted
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>> The second try was download.file() and then read it.
>> >>>>> File test2.R is:
>> >>>>>
>> >>>>> x<-"
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> "
>> >>>>> download.file(x, "companylist.csv")
>> >>>>> read.csv("companylist.csv", as.is=TRUE, na="n/a")
>> >>>>>
>> >>>>>
>> >>>>> But this too failed with error 403 Forbiden.
>> >>>>>
>> >>>>> rui at rui:~$ Rscript --vanilla test2.R
>> >>>>> trying URL
>> >>>>> '
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> '
>> >>>>> Error in download.file(x, "companylist.csv") :
>> >>>>>    cannot open URL
>> >>>>> '
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> '
>> >>>>> In addition: Warning message:
>> >>>>> In download.file(x, "companylist.csv") :
>> >>>>>    cannot open URL
>> >>>>> '
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> ':
>> >>>>>
>> >>>>> HTTP status was '403 Forbidden'
>> >>>>> Execution halted
>> >>>>>
>> >>>>>
>> >>>>> This is my session info.
>> >>>>>
>> >>>>> rui at rui:~$ Rscript --vanilla -e 'sessionInfo()'
>> >>>>> R version 4.0.2 (2020-06-22)
>> >>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>> >>>>> Running under: Ubuntu 20.04 LTS
>> >>>>>
>> >>>>> Matrix products: default
>> >>>>> BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
>> >>>>> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0
>> >>>>>
>> >>>>> locale:
>> >>>>>   [1] LC_CTYPE=pt_PT.UTF-8       LC_NUMERIC=C
>> >>>>>   [3] LC_TIME=pt_PT.UTF-8        LC_COLLATE=pt_PT.UTF-8
>> >>>>>   [5] LC_MONETARY=pt_PT.UTF-8    LC_MESSAGES=pt_PT.UTF-8
>> >>>>>   [7] LC_PAPER=pt_PT.UTF-8       LC_NAME=C
>> >>>>>   [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> >>>>> [11] LC_MEASUREMENT=pt_PT.UTF-8 LC_IDENTIFICATION=C
>> >>>>>
>> >>>>> attached base packages:
>> >>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>> >>>>>
>> >>>>> loaded via a namespace (and not attached):
>> >>>>> [1] compiler_4.0.2
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>> ?s 08:45 de 15/07/20, Sam H escreveu:
>> >>>>>> Hi,
>> >>>>>>
>> >>>>>> I am trying to download some data using read.csv and it works
>> >>>>> perfectly in
>> >>>>>> RStudio and fails in the R console in the terminal in Ubuntu 18.04
>> >>>>> after
>> >>>>>> upgrading from R 3.6.3 to 4.0.2. Before upgrading this worked in
>> the
>> >>>>> R
>> >>>>>> console in the terminal also without any issues.
>> >>>>>>
>> >>>>>> Why would that be? How to fix this?
>> >>>>>>
>> >>>>>> Below please find R code output and sessionInfo().
>> >>>>>>
>> >>>>>> *Works in RStudio*
>> >>>>>>
>> >>>>>>>
>> >>>>> read.csv("
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> ",
>> >>>>> header=TRUE, as.is=TRUE, na="n/a")
>> >>>>>>       Symbol                                                Name
>> >>>>>> LastSale MarketCap IPOyear1      TXG
>> >>>>>> 10x Genomics, Inc.  87.4400     $8.6B    20192       YI
>> >>>>>>                              111, Inc.   6.4800  $533.69M    20183
>> >>>>>> PIH              1347 Property Insurance Holdings, Inc.   4.5350
>> >>>>>> $27.52M    2014
>> >>>>>>    sessionInfo()
>> >>>>>> R version 4.0.2 (2020-06-22)
>> >>>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>> >>>>>> Running under: Ubuntu 18.04.4 LTS
>> >>>>>>
>> >>>>>> Matrix products: default
>> >>>>>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>> >>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>> >>>>>>
>> >>>>>> locale:
>> >>>>>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> >>>>>> LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>> >>>>>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>> >>>>>> LC_PAPER=en_US.UTF-8       LC_NAME=C
>> >>>>>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> >>>>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> >>>>>>
>> >>>>>> attached base packages:[1] stats     graphics  grDevices utils
>> >>>>>> datasets  methods   base
>> >>>>>>
>> >>>>>> loaded via a namespace (and not attached):[1] compiler_4.0.2
>> >>>>> tools_4.0.2
>> >>>>>>
>> >>>>>> *Fails in R console in terminal*
>> >>>>>>
>> >>>>>>      >
>> >>>>> read.csv("
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> ",
>> >>>>>> header=TRUE, as.is=TRUE, na="n/a")
>> >>>>>> Error in file(file, "rt") :
>> >>>>>>     cannot open the connection to
>> >>>>>>
>> >>>>> '
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> '
>> >>>>>> In addition: Warning message:
>> >>>>>> In file(file, "rt") :
>> >>>>>>     URL
>> >>>>> '
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> ':
>> >>>>>> status was 'Failure when receiving data from the peer'>
>> traceback()3:
>> >>>>>> file(file, "rt")2: read.table(file = file, header = header, sep =
>> >>>>> sep,
>> >>>>>> quote = quote,
>> >>>>>>          dec = dec, fill = fill, comment.char = comment.char,
>> ...)1:
>> >>>>>>
>> >>>>> read.csv("
>> https://old.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=1&render=download
>> ",
>> >>>>>>          header = TRUE, as.is = TRUE, na = "n/a")>  sessionInfo()
>> >>>>>> R version 4.0.2 (2020-06-22)
>> >>>>>> Platform: x86_64-pc-linux-gnu (64-bit)
>> >>>>>> Running under: Ubuntu 18.04.4 LTS
>> >>>>>>
>> >>>>>> Matrix products: default
>> >>>>>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>> >>>>>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.2.20.so
>> >>>>>>
>> >>>>>> locale:
>> >>>>>>    [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> >>>>>>    [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>> >>>>>>    [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>> >>>>>>    [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>> >>>>>>    [9] LC_ADDRESS=C               LC_TELEPHONE=C            [11]
>> >>>>>> LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> >>>>>>
>> >>>>>> attached base packages:[1] stats     graphics  grDevices utils
>> >>>>>> datasets  methods   base
>> >>>>>>
>> >>>>>> loaded via a namespace (and not attached):[1] compiler_4.0.2>
>> >>>>>>
>> >>>>>> I also asked this question here
>> >>>>>>
>> >>>>>
>> https://stackoverflow.com/questions/62898008/why-read-csv-fails-in-r-console-in-ubuntu-terminal-but-works-in-rstudio-after-r
>> >>>>>> . Since there was no answer on stackoverflow I sent this question
>> >>>>> also to
>> >>>>>> this list.
>> >>>>>>
>> >>>>>> Best regards,
>> >>>>>> Sam
>> >>>>>>
>> >>>>>>     [[alternative HTML version deleted]]
>> >>>>>>
>> >>>>>> ______________________________________________
>> >>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>>>> PLEASE do read the posting guide
>> >>>>> http://www.R-project.org/posting-guide.html
>> >>>>>> and provide commented, minimal, self-contained, reproducible code.
>> >>>>>>
>> >>>>>
>> >>>>> ______________________________________________
>> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>>> PLEASE do read the posting guide
>> >>>>> http://www.R-project.org/posting-guide.html
>> >>>>> and provide commented, minimal, self-contained, reproducible code.
>> >>>>
>> >>>
>> >>> ______________________________________________
>> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> >>> and provide commented, minimal, self-contained, reproducible code.
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>> --
>> Luke Tierney
>> Ralph E. Wareham Professor of Mathematical Sciences
>> University of Iowa                  Phone:             319-335-3386
>> Department of Statistics and        Fax:               319-335-3017
>>     Actuarial Science
>> 241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
>> Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu
>>
>
>
> --
> Best regards,
> Sam
>

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Sun Jul 19 05:42:54 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sun, 19 Jul 2020 05:42:54 +0200
Subject: [R] Help with read.csv.sql()
In-Reply-To: <b10549b9-bd2f-f2b0-cb18-589ce416f3ac@sapo.pt>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <b10549b9-bd2f-f2b0-cb18-589ce416f3ac@sapo.pt>
Message-ID: <20200719034254.GA30464@posteo.no>

On 2020-07-18 18:09 +0100, Rui Barradas wrote:
| ?s 17:59 de 18/07/2020, H escreveu:
| | On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com> wrote:
| | | 
| | | The problem I am having is that 
| | | the csv files have header rows 
| | | with column names that are 
| | | slightly different from the column 
| | | names I have assigned in the 
| | | dataframe and it seems that when I 
| | | read the csv data into the 
| | | dataframe, the column names from 
| | | the csv file replace the column 
| | | names I chose when creating the 
| | | dataframe.
| | | 
| | | A secondary issue is that the csv 
| | | files have a column with a date in 
| | | mm/dd/yyyy format that I would 
| | | like to make into a Date type 
| | | column in my dataframe. Again, I 
| | | have been unable to find a way - 
| | | if at all possible - to force a 
| | | conversion into a Date format when 
| | | importing into the dataframe. The 
| | | best I have so far is to import is 
| | | a character column and then use 
| | | as.Date() to later force the 
| | | conversion of the dataframe 
| | | column.
| | 
| | The documentation for read.csv.sql() 
| | suggests that colClasses() and/or 
| | field.types() should work but I may 
| | well have misunderstood the 
| | documentation, hence my question in 
| | this group.
| 
| As for colClasses, those are R class 
| names.

Ok Mister H, I might have hit the nail 
on the head this time with this badass 
example for your usecase:

	# Make a csv with %d/%m/%Y dates in it ...
	Lines <- "STM05-1 2005/02/28 17:35 Good -35.562 177.158
	STM05-1 2005/02/28 19:44 Good -35.487 177.129
	STM05-1 2005/02/28 23:01 Unknown -35.399 177.064
	STM05-1 2005/03/01 07:28 Unknown -34.978 177.268
	STM05-1 2005/03/01 18:06 Poor -34.799 177.027
	STM05-1 2005/03/01 18:47 Poor -34.85 177.059
	STM05-2 2005/02/28 12:49 Good -35.928 177.328
	STM05-2 2005/02/28 21:23 Poor -35.926 177.314
	"
	DF <- read.table(textConnection(Lines), as.is = TRUE,
	  col.names = c("Id", "Date", "Time", "Quality", "Lat", "Long"))
	DF$Date <- format(as.Date(DF$Date, "%Y/%m/%d"), "%d/%m/%Y")
	write.csv(DF, file="df.csv", row.names=FALSE)
	
	colClasses <-
	  c("character",
	    "Date",
	    "character",
	    "character",
	    "numeric",
	    "numeric")
	sql <- paste0(
	  "select ",
	    "date(",  # [2]
	      "substr(Date, 8, 4) || '-' || ",  # [1]
	      "substr(Date, 5, 2) || '-' || ",
	      "substr(Date, 2, 2)), Long, Lat, Quality ",
	  "from ff where Quality like '%oo%' and Long>177.129")
	ff <- file(description="df.csv", open="r")
	dat <- sqldf::read.csv.sql(
	  sql=sql, colClasses=colClasses)
	close(ff)
	
	str(dat)
	
	as.Date(dat[,1])
	dat[,3]

Both sqlite and Postgres has a function 
substr you can call on strings like 
this.[5]  I have a hunch this has always 
been possible in sql from way back ... 

The warning from sqldf about unused 
connections, might suggest file 
descriptor handling to be a bit crusty 
... [3] 

The thing is, defining the second column 
as of type Date in colClasses happens to 
work, but it's still character when you 
check with str(dat) ... perhaps it has 
something to do with this info from [4]: 

	as_tibble_row() converts a vector to 
	a tibble with one row. The input 
	must be a bare vector, e.g. vectors 
	of dates are not supported yet. If 
	the input is a list, all elements 
	must have length one.

[1] https://stackoverflow.com/questions/15563656/convert-string-to-date-in-sqlite
[2] https://www.sqlite.org/lang_datefunc.html
[3] https://groups.google.com/forum/#!topic/sqldf/mcQ_K_E--q8
[4] https://tibble.tidyverse.org/reference/as_tibble.html
[5] https://www.sqlite.org/lang_corefunc.html#substr, 
https://www.postgresql.org/docs/9.1/functions-string.html,
http://www.h2database.com/html/functions.html#substring 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200719/f6c63baa/attachment.sig>

From c@gordon@m|th @end|ng |rom gm@||@com  Sat Jul 18 00:47:39 2020
From: c@gordon@m|th @end|ng |rom gm@||@com (Chris Gordon-Smith)
Date: Fri, 17 Jul 2020 23:47:39 +0100
Subject: [R] levels
In-Reply-To: <215C4371-3D8A-4792-A7C8-48B530E8DCB4@me.com>
References: <CANPMfBDuZjzx43vhDsVyWvCURuhSQ=9=RVZV2-aHWujhg+cXmQ@mail.gmail.com>
 <215C4371-3D8A-4792-A7C8-48B530E8DCB4@me.com>
Message-ID: <0583f5ce-e2f0-69e2-b57f-5e6ba0b3ac8a@gmail.com>

There is an interesting item on stringsAsFactors in this useR! 2020 session:

https://www.youtube.com/watch?v=X_eDHNVceCU&feature=youtu.be

It's about 27 minutes in.

Chris Gordon-Smith

On 15/07/2020 17:16, Marc Schwartz via R-help wrote:
>> On Jul 15, 2020, at 4:31 AM, andy elprama <andy.elprama at gmail.com> wrote:
>>
>> Dear R-users,
>>
>> Something strange happened within the command "levels"
>>
>> R version 3.6.1
>> name <- c("a","b","c")
>> values <- c(1,2,3)
>> data <- data.frame(name,values)
>> levels(data$name)
>> [1] "a" "b" "c"
>>
>> R version 4.0
>> name <- c("a","b","c")
>> values <- c(1,2,3)
>> data <- data.frame(name,values)
>> levels(data$name)
>> [1] NULL
>>
>> What is happening here?
>
> Hi,
>
> The default value for 'stringsAsFactors' for data.frame() and read.table() changed from TRUE to FALSE in version 4.0.0, per the news() file:
>
> "R now uses a stringsAsFactors = FALSE default, and hence by default no longer converts strings to factors in calls to data.frame() and read.table()."
>
>
> Using 4.0.2:
>
> data <- data.frame(name, values, stringsAsFactors = TRUE)
>
>> levels(data$name)
> [1] "a" "b" "c"
>
>
> If you see behavioral changes from one version of R to another, especially major version increments, check the news() file.
>
> Regards,
>
> Marc Schwartz
>
>   
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From nz@h@@m @end|ng |rom gm@||@com  Sat Jul 18 05:14:16 2020
From: nz@h@@m @end|ng |rom gm@||@com (Shaami)
Date: Sat, 18 Jul 2020 08:14:16 +0500
Subject: [R] Integrating a function that contains for loop or vectorization
 for for loop
Message-ID: <CAGR+MS4hDMmW9Mm9O__=3frGQpT42w7Gdhd0wAu1Zb03x3F+fQ@mail.gmail.com>

Hi Everyone

It has been a long time I am facing a problem with integrating a function
that contains for-loop or even vectorization of for loop. Could you please
guide for the following MWE that how I could get rid of the error or
warning messages?

My MWE code is here:

myfun <- function(X, a, b){
  k <- 1:10
  term <- a * b * X^k
  fx <- exp(X) * sum(term)
  print(X)
  print(term)
  return(fx)
}

a <- 5
b <- 4
integrate(myfun, lower = 0, upper = 10, a = a, b = b)

If I use the following version of my code, it does not give any error.
However, I am not sure that it is correct.

myfun <- function(X, a, b){
  term <- list()
  for(k in 1:10){
    term[[k]] <- a * b * X^k
  }
  fx <- exp(X) * sum(unlist(term))
  print(X)
  print(term)
  return(fx)
}

a <- 5
b <- 4
integrate(myfun, lower = 0, upper = 10, a = a, b = b)



Thank you

Regrads

	[[alternative HTML version deleted]]


From nz@h@@m @end|ng |rom gm@||@com  Sat Jul 18 05:17:31 2020
From: nz@h@@m @end|ng |rom gm@||@com (Shaami)
Date: Sat, 18 Jul 2020 08:17:31 +0500
Subject: [R] Editing of .Rd files generated by roxygen2
Message-ID: <CAGR+MS4L=Ca5xS3iWadx_KN0-3G3nUDLtC5NdsQVMKAfzHB6VQ@mail.gmail.com>

 Hi All

Could you please guide how we can edit the .Rd files generated by roxygen2
for better formatting? I get the function and its input arguments into
multiple lines in the PDF file. Also, I do not get \usage{} line in .Rd
file for an Rcpp functions.

An example of an .Rd file and its corresponding R file are as follows:
____________________
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sumEx.R
\name{SumEx}
\alias{SumEx}
\alias{sumEx}
\title{sum of objects}
\usage{
SumEx(
  FirstVector,
  SecondVector,
  ThirdVector,
  FourthVector,
  FifthVector,
  SixthVector
)
}
\arguments{
\item{FirstVector}{is a vector of length \eqn{n}.}

\item{SecondVector}{is a vector of length \eqn{n}.}

\item{ThirdVector}{is a vector of length \eqn{n}.}

\item{FourthVector}{is a vector of length \eqn{n}.}

\item{FifthVector}{is a vector of length \eqn{n}.}

\item{SixthVector}{is a vector of length \eqn{n}.}
}
\description{
COmputes the sum of objects
}

#' sum of objects
#'
#' COmputes the sum of objects
#' @aliases sumEx
#' @param FirstVector is a vector of length \eqn{n}.
#' @param SecondVector is a vector of length \eqn{n}.
#' @param ThirdVector is a vector of length \eqn{n}.
#' @param FourthVector is a vector of length \eqn{n}.
#' @param FifthVector is a vector of length \eqn{n}.
#' @param SixthVector is a vector of length \eqn{n}.
#' @import stats Rcpp
#' @importFrom Rcpp sourceCpp
#' @export
#'
SumEx <- function(FirstVector, SecondVector, ThirdVector, FourthVector,
FifthVector, SixthVector)
{
  sumall <- sum(FirstVector, SecondVector, ThirdVector, FourthVector,
FifthVector, SixthVector)
  return(sumall)
}
---------------------------------------------------------
An example of an .cpp() function and its corresponding .Rd() file are as
follows:

//' Probability density function of gamma distribution
//'
//' Calculates the PDF of gamma distribution
//' @name dgammaC
//' @aliases dgammaC
//' @param x is the observed data.
//' @param alpha is the shape parameter of gamma distribution.
//' @param beta is the scale parameter of gamma distribution.
//' @param give_log is an integer for logirthm. If 0, then no logrithm of
PDF is considered.
//' @return PDF of gamma distribution
//' @export
//'
#include <Rcpp.h>
using namespace Rcpp;
//[[Rcpp::export]]

NumericVector  dgammaC(NumericVector x, double alpha, double beta, int
give_log)
{
        int T = x.size();
        NumericVector f(T);
        for(int t=0;t<T; t++)
                {
                f(t) = R::dgamma(x(t), alpha, beta, give_log);
                }
        return f;
}


% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{dgammaC}
\alias{dgammaC}
\title{Probability density function of gamma distribution}
\arguments{
\item{x}{is the observed data.}

\item{alpha}{is the shape parameter of a gamma distribution.}

\item{beta}{is the scale parameter of a gamma distribution.}

\item{give_log}{is an integer for logarithm. If 0, then no logarithm of PDF
is considered.}
}
\value{
PDF of the gamma distribution
}
\description{
Calculates the PDF of gamma distribution
}

Thank you

Regards

	[[alternative HTML version deleted]]


From percent||101 @end|ng |rom gm@||@com  Sun Jul 19 20:18:50 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Sun, 19 Jul 2020 20:18:50 +0200
Subject: [R] Plot base 100
Message-ID: <CAB-TgNurjLCdDeyfc_PAXn+Nq_zXv-EgHaCjDH3MLF4=Tboeog@mail.gmail.com>

Hi all,

I am trying to make a plot based on stock market prices and the library
quantmod, imagine

BatchGetSymbols(?^IBEX?, first.date = ?1999-12-31?,
 last.date = ?2020-12-07?)

The thing is I want to plot a plot that for each year on 31/12/year tthe
base is 100 and each day calvulate the cumulative returns so if on
01/01/year t+1 in one day stock climbs a 3% the Index values 103. I want to
plot for each day off the year to the end of the year a line (in fact would
be 20 lines) in the example from year 2000 to actual 2020.

Aditionally on the current year I want to plot the line more thig (dar) to
clearly distinguish It.

Do you know if there is some predefinited function to construct It.

Many thanks in advance

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Jul 19 21:12:53 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 19 Jul 2020 12:12:53 -0700
Subject: [R] Plot base 100
In-Reply-To: <CAB-TgNurjLCdDeyfc_PAXn+Nq_zXv-EgHaCjDH3MLF4=Tboeog@mail.gmail.com>
References: <CAB-TgNurjLCdDeyfc_PAXn+Nq_zXv-EgHaCjDH3MLF4=Tboeog@mail.gmail.com>
Message-ID: <000db2ce-a155-bcd3-a9c9-404c54e191c1@comcast.net>


On 7/19/20 11:18 AM, Pedro p?ramo wrote:
> Hi all,
>
> I am trying to make a plot based on stock market prices and the library
> quantmod, imagine
>
> BatchGetSymbols(?^IBEX?, first.date = ?1999-12-31?,
>   last.date = ?2020-12-07?)
>
> The thing is I want to plot a plot that for each year on 31/12/year tthe
> base is 100 and each day calvulate the cumulative returns so if on
> 01/01/year t+1 in one day stock climbs a 3% the Index values 103. I want to
> plot for each day off the year to the end of the year a line (in fact would
> be 20 lines) in the example from year 2000 to actual 2020.
>
> Aditionally on the current year I want to plot the line more thig (dar) to
> clearly distinguish It.
>
> Do you know if there is some predefinited function to construct It.
>
> Many thanks in advance
>
> 	[[alternative HTML version deleted]]


Rhelp is a plain text mailing list. It is not a project server. We don't 
exist to deliver code on command. We do exist to help with efforts at R 
coding. First you need to use an editor that does not create "smart 
quotes" by default. You should also start your code with library calls 
to load all necessary packages. I note this because GetBatchSymbols is 
not in package:quantmod. You should then show all the code from your 
efforts at investigation of objects' structure and properties and your 
efforts at plotting. Then describe what sort of problems you seem to be 
having in understanding the results and modifying them.


-- 

David

>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sun Jul 19 21:49:19 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 19 Jul 2020 12:49:19 -0700
Subject: [R] Editing of .Rd files generated by roxygen2
In-Reply-To: <CAGR+MS4L=Ca5xS3iWadx_KN0-3G3nUDLtC5NdsQVMKAfzHB6VQ@mail.gmail.com>
References: <CAGR+MS4L=Ca5xS3iWadx_KN0-3G3nUDLtC5NdsQVMKAfzHB6VQ@mail.gmail.com>
Message-ID: <CAGxFJbRr5ByQL3y40cdKV5n_ArC-B67zt9toShSb7mRq9EVBRQ@mail.gmail.com>

No.
Post to r-package-devel for help with R packages.

However, roxygen2 is an Rstudio supported package, and you may need to post
on Rstudio's site for help on it.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jul 19, 2020 at 11:46 AM Shaami <nzshaam at gmail.com> wrote:

>  Hi All
>
> Could you please guide how we can edit the .Rd files generated by roxygen2
> for better formatting? I get the function and its input arguments into
> multiple lines in the PDF file. Also, I do not get \usage{} line in .Rd
> file for an Rcpp functions.
>
> An example of an .Rd file and its corresponding R file are as follows:
> ____________________
> % Generated by roxygen2: do not edit by hand
> % Please edit documentation in R/sumEx.R
> \name{SumEx}
> \alias{SumEx}
> \alias{sumEx}
> \title{sum of objects}
> \usage{
> SumEx(
>   FirstVector,
>   SecondVector,
>   ThirdVector,
>   FourthVector,
>   FifthVector,
>   SixthVector
> )
> }
> \arguments{
> \item{FirstVector}{is a vector of length \eqn{n}.}
>
> \item{SecondVector}{is a vector of length \eqn{n}.}
>
> \item{ThirdVector}{is a vector of length \eqn{n}.}
>
> \item{FourthVector}{is a vector of length \eqn{n}.}
>
> \item{FifthVector}{is a vector of length \eqn{n}.}
>
> \item{SixthVector}{is a vector of length \eqn{n}.}
> }
> \description{
> COmputes the sum of objects
> }
>
> #' sum of objects
> #'
> #' COmputes the sum of objects
> #' @aliases sumEx
> #' @param FirstVector is a vector of length \eqn{n}.
> #' @param SecondVector is a vector of length \eqn{n}.
> #' @param ThirdVector is a vector of length \eqn{n}.
> #' @param FourthVector is a vector of length \eqn{n}.
> #' @param FifthVector is a vector of length \eqn{n}.
> #' @param SixthVector is a vector of length \eqn{n}.
> #' @import stats Rcpp
> #' @importFrom Rcpp sourceCpp
> #' @export
> #'
> SumEx <- function(FirstVector, SecondVector, ThirdVector, FourthVector,
> FifthVector, SixthVector)
> {
>   sumall <- sum(FirstVector, SecondVector, ThirdVector, FourthVector,
> FifthVector, SixthVector)
>   return(sumall)
> }
> ---------------------------------------------------------
> An example of an .cpp() function and its corresponding .Rd() file are as
> follows:
>
> //' Probability density function of gamma distribution
> //'
> //' Calculates the PDF of gamma distribution
> //' @name dgammaC
> //' @aliases dgammaC
> //' @param x is the observed data.
> //' @param alpha is the shape parameter of gamma distribution.
> //' @param beta is the scale parameter of gamma distribution.
> //' @param give_log is an integer for logirthm. If 0, then no logrithm of
> PDF is considered.
> //' @return PDF of gamma distribution
> //' @export
> //'
> #include <Rcpp.h>
> using namespace Rcpp;
> //[[Rcpp::export]]
>
> NumericVector  dgammaC(NumericVector x, double alpha, double beta, int
> give_log)
> {
>         int T = x.size();
>         NumericVector f(T);
>         for(int t=0;t<T; t++)
>                 {
>                 f(t) = R::dgamma(x(t), alpha, beta, give_log);
>                 }
>         return f;
> }
>
>
> % Generated by roxygen2: do not edit by hand
> % Please edit documentation in R/RcppExports.R
> \name{dgammaC}
> \alias{dgammaC}
> \title{Probability density function of gamma distribution}
> \arguments{
> \item{x}{is the observed data.}
>
> \item{alpha}{is the shape parameter of a gamma distribution.}
>
> \item{beta}{is the scale parameter of a gamma distribution.}
>
> \item{give_log}{is an integer for logarithm. If 0, then no logarithm of PDF
> is considered.}
> }
> \value{
> PDF of the gamma distribution
> }
> \description{
> Calculates the PDF of gamma distribution
> }
>
> Thank you
>
> Regards
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jul 19 22:19:30 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 19 Jul 2020 21:19:30 +0100
Subject: [R] 
 Integrating a function that contains for loop or vectorization
 for for loop
In-Reply-To: <CAGR+MS4hDMmW9Mm9O__=3frGQpT42w7Gdhd0wAu1Zb03x3F+fQ@mail.gmail.com>
References: <CAGR+MS4hDMmW9Mm9O__=3frGQpT42w7Gdhd0wAu1Zb03x3F+fQ@mail.gmail.com>
Message-ID: <0c2e61af-9de1-f1e5-38fe-e02b424d7279@sapo.pt>

Hello,

The functions are not equivalent.
integrate subdivides the interval lower = 0, upper = 10 in into a 
maximum subdivisions = 100L. If you print length(X) you will see that 
it's 21.
X is a vector of 21 values and to compute X^(1:10) this expands to

X[1]^1, X[2]^2, ..., X[10]^10, X[11]^1, X[12]^2, ..., X[20]^10, X[21]^1

Each of these values is multiplied by a*b and then added.
A total different computation is performed by the second function:

X[1:21]^1, X[1:21]^2, etc.

I have rewrote the functions a bit, without the print statements and in 
myfun2 creating the list term beforehand.



myfun <- function(X, a, b){
 ? k <- 1:10
 ? term <- a * b * X^k
 ? fx <- exp(X) * sum(term)
 ? fx
}

myfun2 <- function(X, a, b){
 ? term <- vector("list", length = 10)
 ? for(k in 1:10){
 ??? term[[k]] <- a * b * X^k
 ? }
 ? fx <- exp(X) * sum(unlist(term))
 ? fx
}

a <- 5
b <- 4

integrate(myfun, lower = 0, upper = 10, a = a, b = b)
integrate(myfun2, lower = 0, upper = 10, a = a, b = b)

curve(myfun(x, a = a, b = b), 0, 10)
curve(myfun2(x, a = a, b = b), 0, 10, col = "blue", add = TRUE)

Hope this helps,

Rui Barradas

?s 04:14 de 18/07/2020, Shaami escreveu:
> Hi Everyone
>
> It has been a long time I am facing a problem with integrating a function
> that contains for-loop or even vectorization of for loop. Could you please
> guide for the following MWE that how I could get rid of the error or
> warning messages?
>
> My MWE code is here:
>
> myfun <- function(X, a, b){
>    k <- 1:10
>    term <- a * b * X^k
>    fx <- exp(X) * sum(term)
>    print(X)
>    print(term)
>    return(fx)
> }
>
> a <- 5
> b <- 4
> integrate(myfun, lower = 0, upper = 10, a = a, b = b)
>
> If I use the following version of my code, it does not give any error.
> However, I am not sure that it is correct.
>
> myfun <- function(X, a, b){
>    term <- list()
>    for(k in 1:10){
>      term[[k]] <- a * b * X^k
>    }
>    fx <- exp(X) * sum(unlist(term))
>    print(X)
>    print(term)
>    return(fx)
> }
>
> a <- 5
> b <- 4
> integrate(myfun, lower = 0, upper = 10, a = a, b = b)
>
>
>
> Thank you
>
> Regrads
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jul 19 23:45:19 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 19 Jul 2020 17:45:19 -0400
Subject: [R] Editing of .Rd files generated by roxygen2
In-Reply-To: <CAGR+MS4L=Ca5xS3iWadx_KN0-3G3nUDLtC5NdsQVMKAfzHB6VQ@mail.gmail.com>
References: <CAGR+MS4L=Ca5xS3iWadx_KN0-3G3nUDLtC5NdsQVMKAfzHB6VQ@mail.gmail.com>
Message-ID: <195aee1f-6e72-6a03-9f8a-6953061d2d26@gmail.com>

On 17/07/2020 11:17 p.m., Shaami wrote:
>   Hi All
> 
> Could you please guide how we can edit the .Rd files generated by roxygen2
> for better formatting? 

Edit the Roxygen2 comments in your R source code, or just don't use 
Roxygen2.

I get the function and its input arguments into
> multiple lines in the PDF file. Also, I do not get \usage{} line in .Rd
> file for an Rcpp functions.

You give examples below, but you don't say specifically what's wrong 
with them.

Duncan Murdoch

> 
> An example of an .Rd file and its corresponding R file are as follows:
> ____________________
> % Generated by roxygen2: do not edit by hand
> % Please edit documentation in R/sumEx.R
> \name{SumEx}
> \alias{SumEx}
> \alias{sumEx}
> \title{sum of objects}
> \usage{
> SumEx(
>    FirstVector,
>    SecondVector,
>    ThirdVector,
>    FourthVector,
>    FifthVector,
>    SixthVector
> )
> }
> \arguments{
> \item{FirstVector}{is a vector of length \eqn{n}.}
> 
> \item{SecondVector}{is a vector of length \eqn{n}.}
> 
> \item{ThirdVector}{is a vector of length \eqn{n}.}
> 
> \item{FourthVector}{is a vector of length \eqn{n}.}
> 
> \item{FifthVector}{is a vector of length \eqn{n}.}
> 
> \item{SixthVector}{is a vector of length \eqn{n}.}
> }
> \description{
> COmputes the sum of objects
> }
> 
> #' sum of objects
> #'
> #' COmputes the sum of objects
> #' @aliases sumEx
> #' @param FirstVector is a vector of length \eqn{n}.
> #' @param SecondVector is a vector of length \eqn{n}.
> #' @param ThirdVector is a vector of length \eqn{n}.
> #' @param FourthVector is a vector of length \eqn{n}.
> #' @param FifthVector is a vector of length \eqn{n}.
> #' @param SixthVector is a vector of length \eqn{n}.
> #' @import stats Rcpp
> #' @importFrom Rcpp sourceCpp
> #' @export
> #'
> SumEx <- function(FirstVector, SecondVector, ThirdVector, FourthVector,
> FifthVector, SixthVector)
> {
>    sumall <- sum(FirstVector, SecondVector, ThirdVector, FourthVector,
> FifthVector, SixthVector)
>    return(sumall)
> }
> ---------------------------------------------------------
> An example of an .cpp() function and its corresponding .Rd() file are as
> follows:
> 
> //' Probability density function of gamma distribution
> //'
> //' Calculates the PDF of gamma distribution
> //' @name dgammaC
> //' @aliases dgammaC
> //' @param x is the observed data.
> //' @param alpha is the shape parameter of gamma distribution.
> //' @param beta is the scale parameter of gamma distribution.
> //' @param give_log is an integer for logirthm. If 0, then no logrithm of
> PDF is considered.
> //' @return PDF of gamma distribution
> //' @export
> //'
> #include <Rcpp.h>
> using namespace Rcpp;
> //[[Rcpp::export]]
> 
> NumericVector  dgammaC(NumericVector x, double alpha, double beta, int
> give_log)
> {
>          int T = x.size();
>          NumericVector f(T);
>          for(int t=0;t<T; t++)
>                  {
>                  f(t) = R::dgamma(x(t), alpha, beta, give_log);
>                  }
>          return f;
> }
> 
> 
> % Generated by roxygen2: do not edit by hand
> % Please edit documentation in R/RcppExports.R
> \name{dgammaC}
> \alias{dgammaC}
> \title{Probability density function of gamma distribution}
> \arguments{
> \item{x}{is the observed data.}
> 
> \item{alpha}{is the shape parameter of a gamma distribution.}
> 
> \item{beta}{is the scale parameter of a gamma distribution.}
> 
> \item{give_log}{is an integer for logarithm. If 0, then no logarithm of PDF
> is considered.}
> }
> \value{
> PDF of the gamma distribution
> }
> \description{
> Calculates the PDF of gamma distribution
> }
> 
> Thank you
> 
> Regards
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From drj|m|emon @end|ng |rom gm@||@com  Mon Jul 20 01:14:04 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 20 Jul 2020 09:14:04 +1000
Subject: [R] Plot base 100
In-Reply-To: <CAB-TgNurjLCdDeyfc_PAXn+Nq_zXv-EgHaCjDH3MLF4=Tboeog@mail.gmail.com>
References: <CAB-TgNurjLCdDeyfc_PAXn+Nq_zXv-EgHaCjDH3MLF4=Tboeog@mail.gmail.com>
Message-ID: <CA+8X3fVnhy1SNO+n60YVK-cCiOuA4a2QRP6r2iAgK_SdjpOW+w@mail.gmail.com>

Hi Pedro,
Assuming that you get a vector of daily percentage changes:

dpc<-c(+3.1, -2.8, +1.7, +2.1)

get the cumulative change and add 100:

cumsum(dpc)+100
[1] 103.1 100.3 102.0 104.1

You can then plot that. As Rui noted, your mail client is inserting
invisible characters that prevent cutting and pasting into R.

Jim

On Mon, Jul 20, 2020 at 4:46 AM Pedro p?ramo <percentil101 at gmail.com> wrote:
>
> Hi all,
>
> I am trying to make a plot based on stock market prices and the library
> quantmod, imagine
>
> BatchGetSymbols(?^IBEX?, first.date = ?1999-12-31?,
>  last.date = ?2020-12-07?)
>
> The thing is I want to plot a plot that for each year on 31/12/year tthe
> base is 100 and each day calvulate the cumulative returns so if on
> 01/01/year t+1 in one day stock climbs a 3% the Index values 103. I want to
> plot for each day off the year to the end of the year a line (in fact would
> be 20 lines) in the example from year 2000 to actual 2020.
>
> Aditionally on the current year I want to plot the line more thig (dar) to
> clearly distinguish It.
>
> Do you know if there is some predefinited function to construct It.
>
> Many thanks in advance
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @gent@ @end|ng |rom medd@t@|nc@com  Mon Jul 20 02:07:37 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sun, 19 Jul 2020 20:07:37 -0400
Subject: [R] Help with read.csv.sql()
In-Reply-To: <CAA99HCxnMXk2-oXtojEYS0-XpT35a-ovJqNARLPiTX4Qu8n+9A@mail.gmail.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <CAA99HCxnMXk2-oXtojEYS0-XpT35a-ovJqNARLPiTX4Qu8n+9A@mail.gmail.com>
Message-ID: <358300fd-4a98-2101-bc2f-44e78d27be21@meddatainc.com>

On 07/18/2020 01:38 PM, William Michels wrote:
> Do either of the postings/threads below help?
>
> https://r.789695.n4.nabble.com/read-csv-sql-to-select-from-a-large-csv-file-td4650565.html#a4651534
> https://r.789695.n4.nabble.com/using-sqldf-s-read-csv-sql-to-read-a-file-with-quot-NA-quot-for-missing-td4642327.html
>
> Otherwise you can try reading through the FAQ on Github:
>
> https://github.com/ggrothendieck/sqldf
>
> HTH, Bill.
>
> W. Michels, Ph.D.
>
>
>
> On Sat, Jul 18, 2020 at 9:59 AM H <agents at meddatainc.com> wrote:
>> On 07/18/2020 11:54 AM, Rui Barradas wrote:
>>> Hello,
>>>
>>> I don't believe that what you are asking for is possible but like Bert suggested, you can do it after reading in the data.
>>> You could write a convenience function to read the data, then change what you need to change.
>>> Then the function would return this final object.
>>>
>>> Rui Barradas
>>>
>>> ?s 16:43 de 18/07/2020, H escreveu:
>>>
>>>> On 07/17/2020 09:49 PM, Bert Gunter wrote:
>>>>> Is there some reason that you can't make the changes to the data frame (column names, as.date(), ...) *after* you have read all your data in?
>>>>>
>>>>> Do all your csv files use the same names and date formats?
>>>>>
>>>>>
>>>>> Bert Gunter
>>>>>
>>>>> "The trouble with having an open mind is that people keep coming along and sticking things into it."
>>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>>
>>>>>
>>>>> On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
>>>>>
>>>>>      I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.
>>>>>
>>>>>      The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.
>>>>>
>>>>>      I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.
>>>>>
>>>>>      It seems that the above should be feasible but I am missing something? Does anyone know?
>>>>>
>>>>>      A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.
>>>>>
>>>>>      Is it possible to do this when importing using read.csv.sql()?
>>>>>
>>>>>      ______________________________________________
>>>>>      R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>>>>>      https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>      PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>      and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>> Yes, the files use the same column names and date format (at least as far as I know now.) I agree I could do it as you suggest above but from a purist perspective I would rather do it when importing the data using read.csv.sql(), particularly if column names and/or date format might change, or be different between different files. I am indeed selecting rows from a large number of csv files so this is entirely plausible.
>>>>
>>>> Has anyone been able to name columns in the read.csv.sql() call and/or force date format conversion in the call itself? The first refers to naming columns differently from what a header in the csv file may have.
>>>>
>>>>
>>>>     [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>> The documentation for read.csv.sql() suggests that colClasses() and/or field.types() should work but I may well have misunderstood the documentation, hence my question in this group.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

I had read the sqldf() documentation but was left with the impression that what I want to do is not easily doable.


From percent||101 @end|ng |rom gm@||@com  Sun Jul 19 22:21:41 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Sun, 19 Jul 2020 22:21:41 +0200
Subject: [R] Plot base 100
In-Reply-To: <000db2ce-a155-bcd3-a9c9-404c54e191c1@comcast.net>
References: <CAB-TgNurjLCdDeyfc_PAXn+Nq_zXv-EgHaCjDH3MLF4=Tboeog@mail.gmail.com>
 <000db2ce-a155-bcd3-a9c9-404c54e191c1@comcast.net>
Message-ID: <CAB-TgNsDisADGNCDR9aONHPNdvagp1kAXM1i5ypr6LgPVa9Cgg@mail.gmail.com>

I understand. I Will send my Code tomorrow, I am outside home now.

Many thanks David, sorry about all.

El dom., 19 jul. 2020 21:13, David Winsemius <dwinsemius at comcast.net>
escribi?:

>
> On 7/19/20 11:18 AM, Pedro p?ramo wrote:
> > Hi all,
> >
> > I am trying to make a plot based on stock market prices and the library
> > quantmod, imagine
> >
> > BatchGetSymbols(?^IBEX?, first.date = ?1999-12-31?,
> >   last.date = ?2020-12-07?)
> >
> > The thing is I want to plot a plot that for each year on 31/12/year tthe
> > base is 100 and each day calvulate the cumulative returns so if on
> > 01/01/year t+1 in one day stock climbs a 3% the Index values 103. I want
> to
> > plot for each day off the year to the end of the year a line (in fact
> would
> > be 20 lines) in the example from year 2000 to actual 2020.
> >
> > Aditionally on the current year I want to plot the line more thig (dar)
> to
> > clearly distinguish It.
> >
> > Do you know if there is some predefinited function to construct It.
> >
> > Many thanks in advance
> >
> >       [[alternative HTML version deleted]]
>
>
> Rhelp is a plain text mailing list. It is not a project server. We don't
> exist to deliver code on command. We do exist to help with efforts at R
> coding. First you need to use an editor that does not create "smart
> quotes" by default. You should also start your code with library calls
> to load all necessary packages. I note this because GetBatchSymbols is
> not in package:quantmod. You should then show all the code from your
> efforts at investigation of objects' structure and properties and your
> efforts at plotting. Then describe what sort of problems you seem to be
> having in understanding the results and modifying them.
>
>
> --
>
> David
>
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @purvpr|y@m @end|ng |rom gm@||@com  Mon Jul 20 01:51:46 2020
From: @purvpr|y@m @end|ng |rom gm@||@com (Apurv Priyam)
Date: Sun, 19 Jul 2020 19:51:46 -0400
Subject: [R] [R-pkgs] 'analyzer' - R package to automatic data analysis
Message-ID: <CADF+LybHP5ygoeo0DzEyEQ5jeRqdj6_4pRPTZM-xuyOtJuXK7w@mail.gmail.com>

Hi all,

I would like to introduce a recently published R package 'analyzer' which
can be used for automated data analysis. With one command a detailed R
markdown notebook can be generated with pre-written codes for data analysis
using 15+ statistical tests, model, variable selection, and plots.

To install the package simply use
install.packages('analyzer')

CRAN link -  https://CRAN.R-project.org/package=analyzer
<https://cran.r-project.org/package=analyzer>

Regards,
Apurv Priyam
MS-CSE, Georgia Tech

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Mon Jul 20 14:29:40 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Mon, 20 Jul 2020 07:29:40 -0500
Subject: [R] Plot base 100
In-Reply-To: <CAB-TgNurjLCdDeyfc_PAXn+Nq_zXv-EgHaCjDH3MLF4=Tboeog@mail.gmail.com>
References: <CAB-TgNurjLCdDeyfc_PAXn+Nq_zXv-EgHaCjDH3MLF4=Tboeog@mail.gmail.com>
Message-ID: <CAPPM_gSpMXdyd4d1SnQog4x3grVnk2Pt2MP6oZwRAu8SW8zkxQ@mail.gmail.com>

You can do this with PerformanceAnalytics.

library(PerformanceAnalytics)
data(edhec)
chart.RelativePerformance(edhec, 0, legend = "topleft")

Also note that there's a finance-specific mailing list: R-SIG-Finance.

Best,
Josh

On Sun, Jul 19, 2020 at 1:46 PM Pedro p?ramo <percentil101 at gmail.com> wrote:
>
> Hi all,
>
> I am trying to make a plot based on stock market prices and the library
> quantmod, imagine
>
> BatchGetSymbols(?^IBEX?, first.date = ?1999-12-31?,
>  last.date = ?2020-12-07?)
>
> The thing is I want to plot a plot that for each year on 31/12/year tthe
> base is 100 and each day calvulate the cumulative returns so if on
> 01/01/year t+1 in one day stock climbs a 3% the Index values 103. I want to
> plot for each day off the year to the end of the year a line (in fact would
> be 20 lines) in the example from year 2000 to actual 2020.
>
> Aditionally on the current year I want to plot the line more thig (dar) to
> clearly distinguish It.
>
> Do you know if there is some predefinited function to construct It.
>
> Many thanks in advance
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Jul 20 22:31:42 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 20 Jul 2020 15:31:42 -0500
Subject: [R] Creating xts objects from csv file
References: <000401d65ed4$c7ef6140$57ce23c0$.ref@sbcglobal.net>
Message-ID: <000401d65ed4$c7ef6140$57ce23c0$@sbcglobal.net>

R-Help Forum

 

Starting to work with xts objects but can't figure out what I'm doing wrong
when converting *.csv file with a dtg variable to a *.xts object. When I'm
converting to an appropriate time object all I get are NA, so that's my
first issue.

 

dtg <- c("1/5/2010 2:30", "1/5/2010 10:32", "1/5/2010 12:03")

seq <- c(1,2,3)

 

dat <- data.frame(dtg, seq)

 

dat$dtg <- as.POSIXlt(dat$dtg, format = "%m/%d/%Y %H:%M")

 

dat.xts <- xts(x = dat[,-1], order.by = dat[,1])

               

head(dat.xts)


	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Jul 20 22:31:55 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 20 Jul 2020 15:31:55 -0500
Subject: [R] Recall: Creating xts objects from csv file
References: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=.ref@sbcglobal.net>
Message-ID: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>

Jeff Reichman would like to recall the message, "Creating xts objects from
csv file".

From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Jul 20 22:32:05 2020
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 20 Jul 2020 15:32:05 -0500
Subject: [R] Creating xts objects from csv file
References: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=.ref@sbcglobal.net>
Message-ID: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>

R-Help Forum

 

Starting to work with xts objects but can't figure out what I'm doing wrong
when converting *.csv file with a dtg variable to a *.xts object. When I'm
converting to an appropriate time object all I get are NA, so that's my
first issue.

 

dtg <- c("1/5/2010 2:30", "1/5/2010 10:32", "1/5/2010 12:03")

seq <- c(1,2,3)

 

dat <- data.frame(dtg, seq)

 

dat$dtg <- as.POSIXlt(dat$dtg, format = "%m/%d/%Y %H:%M")

 

dat.xts <- xts(x = dat[,-1], order.by = dat[,1])

               

head(dat.xts)

 

Sincerely

 

Jeff Reichman


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jul 20 23:37:03 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 20 Jul 2020 22:37:03 +0100
Subject: [R] Creating xts objects from csv file
In-Reply-To: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>
References: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=.ref@sbcglobal.net>
 <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>
Message-ID: <a31dff6f-ab6e-50a1-287e-c1ddd5f7a95f@sapo.pt>

Hello,

I cannot reproduce the error, your code runs as expected. Try as.POSIXct?

Hope this helps,

Rui Barradas

?s 21:32 de 20/07/2020, Jeff Reichman escreveu:
> R-Help Forum
>
>   
>
> Starting to work with xts objects but can't figure out what I'm doing wrong
> when converting *.csv file with a dtg variable to a *.xts object. When I'm
> converting to an appropriate time object all I get are NA, so that's my
> first issue.
>
>   
>
> dtg <- c("1/5/2010 2:30", "1/5/2010 10:32", "1/5/2010 12:03")
>
> seq <- c(1,2,3)
>
>   
>
> dat <- data.frame(dtg, seq)
>
>   
>
> dat$dtg <- as.POSIXlt(dat$dtg, format = "%m/%d/%Y %H:%M")
>
>   
>
> dat.xts <- xts(x = dat[,-1], order.by = dat[,1])
>
>                 
>
> head(dat.xts)
>
>   
>
> Sincerely
>
>   
>
> Jeff Reichman
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From @gent@ @end|ng |rom medd@t@|nc@com  Mon Jul 20 23:54:56 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Mon, 20 Jul 2020 17:54:56 -0400
Subject: [R] Help with read.csv.sql()
In-Reply-To: <20200719034254.GA30464@posteo.no>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <b10549b9-bd2f-f2b0-cb18-589ce416f3ac@sapo.pt>
 <20200719034254.GA30464@posteo.no>
Message-ID: <bf9443ca-9b59-3b1b-8af3-146f8c15542f@meddatainc.com>

On 07/18/2020 11:42 PM, Rasmus Liland wrote:
> On 2020-07-18 18:09 +0100, Rui Barradas wrote:
> | ?s 17:59 de 18/07/2020, H escreveu:
> | | On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com> wrote:
> | | | 
> | | | The problem I am having is that 
> | | | the csv files have header rows 
> | | | with column names that are 
> | | | slightly different from the column 
> | | | names I have assigned in the 
> | | | dataframe and it seems that when I 
> | | | read the csv data into the 
> | | | dataframe, the column names from 
> | | | the csv file replace the column 
> | | | names I chose when creating the 
> | | | dataframe.
> | | | 
> | | | A secondary issue is that the csv 
> | | | files have a column with a date in 
> | | | mm/dd/yyyy format that I would 
> | | | like to make into a Date type 
> | | | column in my dataframe. Again, I 
> | | | have been unable to find a way - 
> | | | if at all possible - to force a 
> | | | conversion into a Date format when 
> | | | importing into the dataframe. The 
> | | | best I have so far is to import is 
> | | | a character column and then use 
> | | | as.Date() to later force the 
> | | | conversion of the dataframe 
> | | | column.
> | | 
> | | The documentation for read.csv.sql() 
> | | suggests that colClasses() and/or 
> | | field.types() should work but I may 
> | | well have misunderstood the 
> | | documentation, hence my question in 
> | | this group.
> | 
> | As for colClasses, those are R class 
> | names.
>
> Ok Mister H, I might have hit the nail 
> on the head this time with this badass 
> example for your usecase:
>
> 	# Make a csv with %d/%m/%Y dates in it ...
> 	Lines <- "STM05-1 2005/02/28 17:35 Good -35.562 177.158
> 	STM05-1 2005/02/28 19:44 Good -35.487 177.129
> 	STM05-1 2005/02/28 23:01 Unknown -35.399 177.064
> 	STM05-1 2005/03/01 07:28 Unknown -34.978 177.268
> 	STM05-1 2005/03/01 18:06 Poor -34.799 177.027
> 	STM05-1 2005/03/01 18:47 Poor -34.85 177.059
> 	STM05-2 2005/02/28 12:49 Good -35.928 177.328
> 	STM05-2 2005/02/28 21:23 Poor -35.926 177.314
> 	"
> 	DF <- read.table(textConnection(Lines), as.is = TRUE,
> 	  col.names = c("Id", "Date", "Time", "Quality", "Lat", "Long"))
> 	DF$Date <- format(as.Date(DF$Date, "%Y/%m/%d"), "%d/%m/%Y")
> 	write.csv(DF, file="df.csv", row.names=FALSE)
> 	
> 	colClasses <-
> 	  c("character",
> 	    "Date",
> 	    "character",
> 	    "character",
> 	    "numeric",
> 	    "numeric")
> 	sql <- paste0(
> 	  "select ",
> 	    "date(",  # [2]
> 	      "substr(Date, 8, 4) || '-' || ",  # [1]
> 	      "substr(Date, 5, 2) || '-' || ",
> 	      "substr(Date, 2, 2)), Long, Lat, Quality ",
> 	  "from ff where Quality like '%oo%' and Long>177.129")
> 	ff <- file(description="df.csv", open="r")
> 	dat <- sqldf::read.csv.sql(
> 	  sql=sql, colClasses=colClasses)
> 	close(ff)
> 	
> 	str(dat)
> 	
> 	as.Date(dat[,1])
> 	dat[,3]
>
> Both sqlite and Postgres has a function 
> substr you can call on strings like 
> this.[5]  I have a hunch this has always 
> been possible in sql from way back ... 
>
> The warning from sqldf about unused 
> connections, might suggest file 
> descriptor handling to be a bit crusty 
> ... [3] 
>
> The thing is, defining the second column 
> as of type Date in colClasses happens to 
> work, but it's still character when you 
> check with str(dat) ... perhaps it has 
> something to do with this info from [4]: 
>
> 	as_tibble_row() converts a vector to 
> 	a tibble with one row. The input 
> 	must be a bare vector, e.g. vectors 
> 	of dates are not supported yet. If 
> 	the input is a list, all elements 
> 	must have length one.
>
> [1] https://stackoverflow.com/questions/15563656/convert-string-to-date-in-sqlite
> [2] https://www.sqlite.org/lang_datefunc.html
> [3] https://groups.google.com/forum/#!topic/sqldf/mcQ_K_E--q8
> [4] https://tibble.tidyverse.org/reference/as_tibble.html
> [5] https://www.sqlite.org/lang_corefunc.html#substr, 
> https://www.postgresql.org/docs/9.1/functions-string.html,
> http://www.h2database.com/html/functions.html#substring 
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Thank you for your extensive example. However, I have decided to simply convert column types as necessary and rename columns as desired after importing the data since that seems the simplest solution.


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jul 21 00:03:00 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 20 Jul 2020 15:03:00 -0700
Subject: [R] Creating xts objects from csv file
In-Reply-To: <a31dff6f-ab6e-50a1-287e-c1ddd5f7a95f@sapo.pt>
References: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=.ref@sbcglobal.net>
 <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>
 <a31dff6f-ab6e-50a1-287e-c1ddd5f7a95f@sapo.pt>
Message-ID: <CAGxFJbSWoB_a7kz_ekVqhrjA6Mp7Oipjn4Xr74x2FNn3ciQHqw@mail.gmail.com>

Might this be related to the stringsAsfactors change? -- the new default is
FALSE, the old was TRUE.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jul 20, 2020 at 2:37 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> Hello,
>
> I cannot reproduce the error, your code runs as expected. Try as.POSIXct?
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 21:32 de 20/07/2020, Jeff Reichman escreveu:
> > R-Help Forum
> >
> >
> >
> > Starting to work with xts objects but can't figure out what I'm doing
> wrong
> > when converting *.csv file with a dtg variable to a *.xts object. When
> I'm
> > converting to an appropriate time object all I get are NA, so that's my
> > first issue.
> >
> >
> >
> > dtg <- c("1/5/2010 2:30", "1/5/2010 10:32", "1/5/2010 12:03")
> >
> > seq <- c(1,2,3)
> >
> >
> >
> > dat <- data.frame(dtg, seq)
> >
> >
> >
> > dat$dtg <- as.POSIXlt(dat$dtg, format = "%m/%d/%Y %H:%M")
> >
> >
> >
> > dat.xts <- xts(x = dat[,-1], order.by = dat[,1])
> >
> >
> >
> > head(dat.xts)
> >
> >
> >
> > Sincerely
> >
> >
> >
> > Jeff Reichman
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
> --
> Este e-mail foi verificado em termos de v?rus pelo software antiv?rus
> Avast.
> https://www.avast.com/antivirus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From byron_dom @end|ng |rom y@hoo@com  Mon Jul 20 01:10:11 2020
From: byron_dom @end|ng |rom y@hoo@com (Byron Dom)
Date: Sun, 19 Jul 2020 23:10:11 +0000 (UTC)
Subject: [R] rgl terminology: the definitions of "thickness" and "width" in
 rgl
References: <2111960350.1165974.1595200211113.ref@mail.yahoo.com>
Message-ID: <2111960350.1165974.1595200211113-9343@mail.yahoo.com>

I'm struggling to come up to speed with rgl. At the moment, I'm struggling with the function arrows3d(). In the R documentation for that, two parameters/arguments are mentioned:?"thickness" (of the arrow's shaft) and "width"?(of the arrow's shaft).?
Naively, I would expect the arrow's shaft under normal circumstances to be cylindrical and its width or thickness would reduce to the single parameter "diameter." Then in some cases like plotting a 2-dimensional arrow on a 2-dimensional surface embedded?in a 3D space, things like "width" would have an obvious meaning.
Would someone explain this to me, including the difference between width and thickness.
Thanks in advance.

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Tue Jul 21 06:07:25 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 21 Jul 2020 06:07:25 +0200
Subject: [R] Help with read.csv.sql()
In-Reply-To: <bf9443ca-9b59-3b1b-8af3-146f8c15542f@meddatainc.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <b10549b9-bd2f-f2b0-cb18-589ce416f3ac@sapo.pt>
 <20200719034254.GA30464@posteo.no>
 <bf9443ca-9b59-3b1b-8af3-146f8c15542f@meddatainc.com>
Message-ID: <20200721040725.GA44044@posteo.no>

On 2020-07-20 17:54 -0400, H wrote:
> On 07/18/2020 11:42 PM, Rasmus Liland wrote:
> >
> > The thing is, defining the second column 
> > as of type Date in colClasses happens to 
> > work, but it's still character when you 
> > check with str(dat) ... perhaps it has 
> > something to do with this info from [4]: 
> >
> > 	as_tibble_row() converts a vector to 
> > 	a tibble with one row. The input 
> > 	must be a bare vector, e.g. vectors 
> > 	of dates are not supported yet. If 
> > 	the input is a list, all elements 
> > 	must have length one.
> >
> > [4] https://tibble.tidyverse.org/reference/as_tibble.html
> 
> Thank you for your extensive example. 
> However, I have decided to simply 
> convert column types as necessary and 
> rename columns as desired after 
> importing the data since that seems 
> the simplest solution.

Dear H,

Right, I am glad you figured this out.  
Please just elaborate (if you want 
to/are able) what solution/idea you were 
after so I, others, learn something for 
another time.

I imagined you were sitting on tonnes of 
csv files and were going to handle dates 
on some very specific, rarely-occurring 
rows in there ...

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200721/8f6ed11a/attachment.sig>

From percent||101 @end|ng |rom gm@||@com  Tue Jul 21 10:25:47 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Tue, 21 Jul 2020 10:25:47 +0200
Subject: [R] Ploting lines with different lenght
Message-ID: <CAB-TgNtgyL4DX-1Ssd5xPxsDHGhtVuyQzNU+zm7DSBsyVLKOZQ@mail.gmail.com>

Plotting lines with different "lenght"

I am trying trying to plot a chart thar always have values from 01/01 of
the beginning of the year till 31/12 of the end of the year.

The thing is sometimes I will have NA or not values in one time series but
not in the others. In the next code you can see two variables b (with a
length of 138 of the current year) and b2019 (of the previous year) but I
want to plot both b and b2019 in one chart with the X-axis from 01/01 to
31/12 without specifying the year.

Can someone guide me with this:

Code:

library(PerformanceAnalytics)
library(quantmod)
library(tidyverse)
library(tidyquant)
loadSymbols("TSLA")
a<-dailyReturn(TSLA,subset='2020')
a2019<-dailyReturn(TSLA,subset='2019')
b<-cumsum(a)*100
b2019<-cumsum(a2019)*100

plot(b, type = "l", lty = 1)
lines(b2019, type = "l", lty = 4)

Many thanks in advance

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Tue Jul 21 11:00:26 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 21 Jul 2020 19:00:26 +1000
Subject: [R] 
 rgl terminology: the definitions of "thickness" and "width" in rgl
In-Reply-To: <2111960350.1165974.1595200211113-9343@mail.yahoo.com>
References: <2111960350.1165974.1595200211113.ref@mail.yahoo.com>
 <2111960350.1165974.1595200211113-9343@mail.yahoo.com>
Message-ID: <CA+8X3fXuVmSyqrx50E+C2UitWVMmrTuSxxkq0=nTs+hOxtjMkA@mail.gmail.com>

Hi Byron,
As in the help page, three types of arrows can be specified. In the
"rotation" type, "width" is the parameter that determines the diameter
of the cylindrical shaft as a fraction of the "barb", the cone at the
end. In the default "extrusion" arrow, "thickness" is the fraction of
the "width" of the shaft. Effectively how thick the fettuccine is
relative to its width. Thickness doesn't seem to affect the "lines" or
"flat" type, with the latter apparently of zero thickness.

Jim

On Tue, Jul 21, 2020 at 11:39 AM Byron Dom via R-help
<r-help at r-project.org> wrote:
>
> I'm struggling to come up to speed with rgl. At the moment, I'm struggling with the function arrows3d(). In the R documentation for that, two parameters/arguments are mentioned: "thickness" (of the arrow's shaft) and "width" (of the arrow's shaft).
> Naively, I would expect the arrow's shaft under normal circumstances to be cylindrical and its width or thickness would reduce to the single parameter "diameter." Then in some cases like plotting a 2-dimensional arrow on a 2-dimensional surface embedded in a 3D space, things like "width" would have an obvious meaning.
> Would someone explain this to me, including the difference between width and thickness.
> Thanks in advance.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jul 21 16:06:40 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Tue, 21 Jul 2020 10:06:40 -0400
Subject: [R] Creating xts objects from csv file
In-Reply-To: <000401d65ed4$c7ef6140$57ce23c0$@sbcglobal.net>
References: <000401d65ed4$c7ef6140$57ce23c0$.ref@sbcglobal.net>
 <000401d65ed4$c7ef6140$57ce23c0$@sbcglobal.net>
Message-ID: <CAKZQJMANAO4kX5V=rgXEE0uqY_8kGfFK1=qNVxrySyBx_DKF=A@mail.gmail.com>

Are you sure you loaded the xts library?

On Mon, 20 Jul 2020 at 16:32, Jeff Reichman <reichmanj at sbcglobal.net> wrote:

> R-Help Forum
>
>
>
> Starting to work with xts objects but can't figure out what I'm doing wrong
> when converting *.csv file with a dtg variable to a *.xts object. When I'm
> converting to an appropriate time object all I get are NA, so that's my
> first issue.
>
>
>
> dtg <- c("1/5/2010 2:30", "1/5/2010 10:32", "1/5/2010 12:03")
>
> seq <- c(1,2,3)
>
>
>
> dat <- data.frame(dtg, seq)
>
>
>
> dat$dtg <- as.POSIXlt(dat$dtg, format = "%m/%d/%Y %H:%M")
>
>
>
> dat.xts <- xts(x = dat[,-1], order.by = dat[,1])
>
>
>
> head(dat.xts)
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Tue Jul 21 16:28:03 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Tue, 21 Jul 2020 09:28:03 -0500
Subject: [R] Creating xts objects from csv file
In-Reply-To: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>
References: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=.ref@sbcglobal.net>
 <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>
Message-ID: <CAPPM_gRYMOhhkOrG--By3iwBatX1tAAztmpzwFxEV2b+qsPbAQ@mail.gmail.com>

Your example works for me. Can you provide a sample of the CSV you're
trying to read, and the commands you use to read it?  The output of
sessionInfo() might also be helpful.


On Mon, Jul 20, 2020 at 3:42 PM Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>
> R-Help Forum
>
>
>
> Starting to work with xts objects but can't figure out what I'm doing wrong
> when converting *.csv file with a dtg variable to a *.xts object. When I'm
> converting to an appropriate time object all I get are NA, so that's my
> first issue.
>
>
>
> dtg <- c("1/5/2010 2:30", "1/5/2010 10:32", "1/5/2010 12:03")
>
> seq <- c(1,2,3)
>
>
>
> dat <- data.frame(dtg, seq)
>
>
>
> dat$dtg <- as.POSIXlt(dat$dtg, format = "%m/%d/%Y %H:%M")
>
>
>
> dat.xts <- xts(x = dat[,-1], order.by = dat[,1])
>
>
>
> head(dat.xts)
>
>
>
> Sincerely
>
>
>
> Jeff Reichman
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From |vmcph@|| @end|ng |rom gm@||@com  Tue Jul 21 17:08:36 2020
From: |vmcph@|| @end|ng |rom gm@||@com (Ian McPhail)
Date: Tue, 21 Jul 2020 11:08:36 -0400
Subject: [R] Error in mice package when trying to use subset of variables
 for imputation model
Message-ID: <CAHF845HqhGYGkVhfFZkFpYW4tZ6Y3=iR+xJcLe1LEW2LJFVDWA@mail.gmail.com>

Hello,



I am attempting to create a multiple imputation model using the mice
package in R. Here are some details about what I am specifically trying to
do, and below is a subset of the data I am working with, the code I have
tried, and the error that I am getting.



In the dataset, labelled 'mturk.all', there are ~300 variables and around
1300 cases. For the multiple imputation model, I am trying to use only 33
of the ~300 variables; these 33 variables are dichotomous (coded as 0 and 1
in the dataset).



Following the mice code provided at
https://stefvanbuuren.name/fimd/sec-toomany.html (see section 9.1.6 on the
linked website), I have tried the following code, which resulted in an
error (also shown below):





```

>library(mice)

>pred <- quickpred(mturk.all, mincor = .1, minpuc = 0, inc=c("TSHS_1R",
"TSHS_2R", "TSHS_3R", "TSHS_4R", "TSHS_5R", "TSHS_6R", "TSHS_7R",
"TSHS_8R", "TSHS_9R", "TSHS_10R", "TSHS_11R", "TSHS_12R", "TSHS_13R",
"TSHS_14R", "TSHS_15R", "TSHS_16R", "TSHS_17R", "TSHS_18R", "TSHS_19R",
"TSHS_20R", "TSHS_21R", "TSHS_22R", "TSHS_23R", "TSHS_24R", "TSHS_25R",
"TSHS_26R", "TSHS_27R", "TSHS_28R", "TSHS_29R", "TSHS_30R", "TSHS_31R",
"TSHS_32R", "TSHS_33R"))

There were 14 warnings (use warnings() to see them)

> warnings()

Warning messages:

1: In data.matrix(data) : NAs introduced by coercion

2: In data.matrix(data) : NAs introduced by coercion

3: In data.matrix(data) : NAs introduced by coercion

4: In data.matrix(data) : NAs introduced by coercion

5: In data.matrix(data) : NAs introduced by coercion

6: In data.matrix(data) : NAs introduced by coercion

7: In data.matrix(data) : NAs introduced by coercion

8: In data.matrix(data) : NAs introduced by coercion

9: In data.matrix(data) : NAs introduced by coercion

10: In data.matrix(data) : NAs introduced by coercion

11: In data.matrix(data) : NAs introduced by coercion

12: In data.matrix(data) : NAs introduced by coercion

13: In data.matrix(data) : NAs introduced by coercion

14: In data.matrix(data) : NAs introduced by coercion

>mturk.all.imp <- mice(mturk.all, m = 40, method = 'logreg', pred = pred)

Error in parse(text = x, keep.source = FALSE) :

  <text>:1:1: unexpected '<'

1: <

    ^

```



Alternatively, I tried the following:



```

>inlist <- mturk.all[c("TSHS_1R", "TSHS_2R", "TSHS_3R", "TSHS_4R",
"TSHS_5R", "TSHS_6R", "TSHS_7R", "TSHS_8R", "TSHS_9R", "TSHS_10R",
"TSHS_11R", "TSHS_12R", "TSHS_13R", "TSHS_14R", "TSHS_15R", "TSHS_16R",
"TSHS_17R", "TSHS_18R", "TSHS_19R", "TSHS_20R", "TSHS_21R", "TSHS_22R",
"TSHS_23R", "TSHS_24R", "TSHS_25R", "TSHS_26R", "TSHS_27R", "TSHS_28R",
"TSHS_29R", "TSHS_30R", "TSHS_31R", "TSHS_32R", "TSHS_33R")]

>pred <- quickpred(mturk.all, mincor = .1, minpuc = 0, inc=inlist)

>mturk.all.imp <- mice(mturk.all, m = 40, method = 'logreg', pred = pred)

Error in parse(text = x, keep.source = FALSE) :

  <text>:1:1: unexpected '<'

1: <

    ^

```



I have also switched out the 'logreg' imputation method with 'pmm' and
received the same error message.



Here is a subset of the dataset, mturk.all, and the version of R Studio I
am using, plus the version of mice I am using.



```

> dput(mturk.all[425:434, 1:33])

structure(list(TSHS_1R = c(0, 1, 1, 0, 0, 0, 1, 1, 0, 1), TSHS_2R = c(0,

0, 0, 1, 0, 0, 0, 0, 0, 0), TSHS_3R = c(0, 1, 0, 0, 0, 0, 0,

0, 1, 0), TSHS_4R = c(0, 1, 0, 0, 0, 0, 1, 0, 1, 0), TSHS_5R = c(0,

0, 0, 1, 0, 0, 0, 0, 1, 0), TSHS_6R = c(0, 0, NA, NA, 0, 0, 1,

0, 0, 0), TSHS_7R = c(0, 0, 0, 1, 0, 1, 1, 0, 0, 0), TSHS_8R = c(1,

1, 0, 0, 1, 1, 1, 1, 0, 1), TSHS_9R = c(0, 0, 0, 0, 0, 0, 0,

1, 1, 0), TSHS_10R = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_11R = c(0,

0, NA, 0, 0, 0, 0, 1, 0, 0), TSHS_12R = c(1, 0, 1, 0, 1, 0, 0,

0, 0, 0), TSHS_13R = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 1), TSHS_14R = c(0,

0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_15R = c(0, 0, 1, 0, 0, 0, 0,

0, 0, 0), TSHS_16R = c(0, 0, 1, 0, 0, 0, 0, 0, 0, 0), TSHS_17R = c(0,

0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_18R = c(0, 0, 0, 0, 1, 0, 0,

0, 0, 0), TSHS_19R = c(0, 0, 0, NA, 0, 0, 0, 0, 0, 0), TSHS_20R = c(0,

0, 0, 1, 0, 0, 0, 0, 0, 0), TSHS_21R = c(0, 0, 0, 0, 1, 0, 0,

0, 0, 0), TSHS_22R = c(0, 1, 0, 0, NA, 1, 0, 0, 0, 0), TSHS_23R = c(0,

0, 0, 0, NA, 1, 0, 0, 0, 1), TSHS_24R = c(0, 0, 0, 1, NA, 1,

0, 1, 1, 0), TSHS_25R = c(1, 1, 1, 0, 1, 1, 1, 1, 1, 1), TSHS_26R = c(1,

0, 1, 0, 0, 0, 0, 1, 0, 1), TSHS_27R = c(1, 0, 0, 1, 0, 1, 1,

0, 0, 1), TSHS_28R = c(0, 0, 0, 0, 0, 0, 0, 0, 1, 0), TSHS_29R = c(1,

0, 0, 0, 1, 0, 0, 0, 0, 0), TSHS_30R = c(0, 0, 0, 0, 0, 0, 0,

0, 0, 0), TSHS_31R = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_32R = c(0,

0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_33R = c(0, 0, 0, 0, 0, 0, 0,

0, 0, 0)), row.names = c(NA, -10L), class = c("tbl_df", "tbl",

"data.frame"))

> rstudioapi::versionInfo()

$`citation`



To cite RStudio in publications use:



  RStudio Team (2018). RStudio: Integrated Development for R. RStudio,
Inc., Boston, MA URL http://www.rstudio.com/.



A BibTeX entry for LaTeX users is



  @Manual{,

    title = {RStudio: Integrated Development Environment for R},

    author = {{RStudio Team}},

    organization = {RStudio, Inc.},

    address = {Boston, MA},

    year = {2018},

    url = {http://www.rstudio.com/},

  }





$`mode`

[1] "desktop"



$version

[1] ?1.2.1335?



> packageVersion("mice")

[1] ?3.8.0?

```



Any help identifying what I am doing wrong in the code would be appreciated!



Ian

-- 
Ian McPhail, M.A.
Clinical Psychology Graduate Student
Department of Psychology, University of Saskatchewan

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Tue Jul 21 17:30:42 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Tue, 21 Jul 2020 09:30:42 -0600
Subject: [R] A WSL question with allocation
Message-ID: <CACxE24km+VtMUekZm=_KSOY8O5cZFU14tYdGDn+rFtTTNZpszQ@mail.gmail.com>

Hello!

Hope everyone is staying well.

I?m not sure if this is the right list for this question, but here goes.

I am using the new experimental WSL on my Windows laptop.  It was going
well until yesterday.   I?m using Ubuntu 20.04.  I am starting to get ?
error: cannot allocate vector of size 1.3 gb?.  I have 32 gb of RAM.  I
tried using ?unlimit -v 1600000000?, not working.

Has anyone else had trouble with this, please? I?m thinking that it might
be because of the newness of the WSL platform.

Thanks,
Erin

-- 
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jul 21 17:32:40 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 21 Jul 2020 11:32:40 -0400
Subject: [R] 
 rgl terminology: the definitions of "thickness" and "width" in rgl
In-Reply-To: <CA+8X3fXuVmSyqrx50E+C2UitWVMmrTuSxxkq0=nTs+hOxtjMkA@mail.gmail.com>
References: <2111960350.1165974.1595200211113.ref@mail.yahoo.com>
 <2111960350.1165974.1595200211113-9343@mail.yahoo.com>
 <CA+8X3fXuVmSyqrx50E+C2UitWVMmrTuSxxkq0=nTs+hOxtjMkA@mail.gmail.com>
Message-ID: <01af2866-c918-74da-e16f-4ffee4988d46@gmail.com>

On 21/07/2020 5:00 a.m., Jim Lemon wrote:
> Hi Byron,
> As in the help page, three types of arrows can be specified.

Actually four types:  rotation, extrusion, lines, flat.  But the rest of 
your answer is right.

Duncan Murdoch

  In the
> "rotation" type, "width" is the parameter that determines the diameter
> of the cylindrical shaft as a fraction of the "barb", the cone at the
> end. In the default "extrusion" arrow, "thickness" is the fraction of
> the "width" of the shaft. Effectively how thick the fettuccine is
> relative to its width. Thickness doesn't seem to affect the "lines" or
> "flat" type, with the latter apparently of zero thickness.
> 
> Jim
> 
> On Tue, Jul 21, 2020 at 11:39 AM Byron Dom via R-help
> <r-help at r-project.org> wrote:
>>
>> I'm struggling to come up to speed with rgl. At the moment, I'm struggling with the function arrows3d(). In the R documentation for that, two parameters/arguments are mentioned: "thickness" (of the arrow's shaft) and "width" (of the arrow's shaft).
>> Naively, I would expect the arrow's shaft under normal circumstances to be cylindrical and its width or thickness would reduce to the single parameter "diameter." Then in some cases like plotting a 2-dimensional arrow on a 2-dimensional surface embedded in a 3D space, things like "width" would have an obvious meaning.
>> Would someone explain this to me, including the difference between width and thickness.
>> Thanks in advance.
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From m@015k3113 @end|ng |rom b|ueyonder@co@uk  Tue Jul 21 19:20:54 2020
From: m@015k3113 @end|ng |rom b|ueyonder@co@uk (e-mail ma015k3113)
Date: Tue, 21 Jul 2020 18:20:54 +0100 (BST)
Subject: [R] Looping through a dataframe
Message-ID: <1260146996.503324.1595352054915@mail2.virginmedia.com>

Dear All, I have a dataframe which has a few thousand companies with unique company numbers and names and  each company has data for several years and each year is stored in a separate row.

I want to get a total for the number of years of data for each company. When I loop through the data with the following command  I get a value of ?1? rather than a total of the rows for each company

All_companies$count <-0

while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1

+ {All_companies$count=All_companies$count+1}

Can you kindly help me on this?

Ahson
	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jul 21 19:41:47 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 21 Jul 2020 10:41:47 -0700
Subject: [R] Looping through a dataframe
In-Reply-To: <1260146996.503324.1595352054915@mail2.virginmedia.com>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
Message-ID: <CAGxFJbRww-KjuxFNPrkhPXbaHC+5BjuyJhraypeAafUTRWRxiw@mail.gmail.com>

What language are you programming in? -- it certainly isn't R.

I suggest that you stop what you're doing and go through an R tutorial or
two before proceeding. This list cannot serve as a substitute for doing
such homework (is this homework, btw? -- that's off topic here) nor can we
provide such tutorials.

I'm pretty sure the answer is quite simple, though it's a bit unclear as
you did not provide a reprex (see the posting guide linked below for how to
post here). However, I see no purpose in my blurting it out when you do not
seem aware of even the most basic R constructs -- e.g. see ?while. Of
course, others may disagree and provide you what you seek.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 21, 2020 at 10:21 AM e-mail ma015k3113 via R-help <
r-help at r-project.org> wrote:

> Dear All, I have a dataframe which has a few thousand companies with
> unique company numbers and names and  each company has data for several
> years and each year is stored in a separate row.
>
> I want to get a total for the number of years of data for each company.
> When I loop through the data with the following command  I get a value of
> ?1? rather than a total of the rows for each company
>
> All_companies$count <-0
>
> while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1
>
> + {All_companies$count=All_companies$count+1}
>
> Can you kindly help me on this?
>
> Ahson
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Tue Jul 21 19:56:55 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Tue, 21 Jul 2020 12:56:55 -0500
Subject: [R] Creating xts objects from csv file
In-Reply-To: <CAPPM_gRYMOhhkOrG--By3iwBatX1tAAztmpzwFxEV2b+qsPbAQ@mail.gmail.com>
References: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=.ref@sbcglobal.net>
 <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>
 <CAPPM_gRYMOhhkOrG--By3iwBatX1tAAztmpzwFxEV2b+qsPbAQ@mail.gmail.com>
Message-ID: <CAPPM_gRLvfPTgr4bLN8vDnzMdG53DcLLFxzONDM3Asg0em4Wmg@mail.gmail.com>

Please reply on-list, so others may benefit from the conversation.

I'm glad you got it working, despite not being sure what the problem
was.  I agree that you should use POSIXct instead of POSIXlt.  POSIXlt
are fairly large, since they're a list of 9 elements each with an
observation for each timestamp.

Here's a sample of your file (as text) and a way you can read it into
R using read.csv.zoo().  Replace the `irreg` object with your filename
(e.g. `"irreg.csv"`).

Lines <- "DTG,Seq
1/5/2010 2:30,1
1/5/2010 10:32,2
1/5/2010 12:03,3
1/6/2010 6:01,4
1/6/2010 17:55,5
1/6/2010 23:42,6
1/7/2010 1:14,7
1/7/2010 5:00,8
1/7/2010 9:40,9
1/7/2010 13:14,10
1/7/2010 13:22,11
1/7/2010 16:12,12
1/7/2010 20:10,13
1/7/2010 21:52,14
1/7/2010 22:22,15"
irreg <- textConnection(Lines)
z <- zoo::read.csv.zoo(irreg, format = "%m/%d/%Y %H:%M", tz = "", drop = FALSE)
x <- xts::as.xts(z)  # if you want an xts object


On Tue, Jul 21, 2020 at 12:09 PM Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>
>        Joshua
>
>        I tried POSIXct and it worked just fine???
>
>        Then I tried modifying my code to
>
>        myDat$DTG <- as.POSIXlt(myDat$DTG, format = "%m/%d/%Y %H:%M")
>        irreg <- xts(x=myDat[,-1],order.by= as.POSIXct(myDat$DTG))
>
>        which seemed to work, so I'm not sure what I was doing wrong. But I also gather I should probably use POSIXct objects  as opposed to POSIXlt objects.
>
>        Jeff
>
>
> -----Original Message-----
> From: Joshua Ulrich <josh.m.ulrich at gmail.com>
> Sent: Tuesday, July 21, 2020 9:28 AM
> To: reichmanj at sbcglobal.net
> Cc: R-Help <r-help at r-project.org>
> Subject: Re: [R] Creating xts objects from csv file
>
> Your example works for me. Can you provide a sample of the CSV you're trying to read, and the commands you use to read it?  The output of
> sessionInfo() might also be helpful.
>
>
> On Mon, Jul 20, 2020 at 3:42 PM Jeff Reichman <reichmanj at sbcglobal.net> wrote:
> >
> > R-Help Forum
> >
> >
> >
> > Starting to work with xts objects but can't figure out what I'm doing wrong
> > when converting *.csv file with a dtg variable to a *.xts object. When I'm
> > converting to an appropriate time object all I get are NA, so that's my
> > first issue.
> >
> >
> >
> > dtg <- c("1/5/2010 2:30", "1/5/2010 10:32", "1/5/2010 12:03")
> >
> > seq <- c(1,2,3)
> >
> >
> >
> > dat <- data.frame(dtg, seq)
> >
> >
> >
> > dat$dtg <- as.POSIXlt(dat$dtg, format = "%m/%d/%Y %H:%M")
> >
> >
> >
> > dat.xts <- xts(x = dat[,-1], order.by = dat[,1])
> >
> >
> >
> > head(dat.xts)
> >
> >
> >
> > Sincerely
> >
> >
> >
> > Jeff Reichman
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From v@h|d@borj|65 @end|ng |rom gm@||@com  Tue Jul 21 20:00:49 2020
From: v@h|d@borj|65 @end|ng |rom gm@||@com (Vahid Borji)
Date: Tue, 21 Jul 2020 22:30:49 +0430
Subject: [R] Playing a music file in R
Message-ID: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>

Hello my R friends,

How can we call a music file from our laptop (for example from desktop) and
play it in R? Could you please give me an explicit example by writing
commands in R. Is it necessary for our music file to be in a specific
format? If yes, which format it has to be?

Thank you in advance

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jul 21 20:01:26 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Tue, 21 Jul 2020 14:01:26 -0400
Subject: [R] Looping through a dataframe
In-Reply-To: <CAGxFJbRww-KjuxFNPrkhPXbaHC+5BjuyJhraypeAafUTRWRxiw@mail.gmail.com>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
 <CAGxFJbRww-KjuxFNPrkhPXbaHC+5BjuyJhraypeAafUTRWRxiw@mail.gmail.com>
Message-ID: <CAKZQJMB3CQVE8wQ+gPLdLKCzg5VBNcYDb4JT=Pqz=qMqsp-bTA@mail.gmail.com>

As Bert says that does not look like R

Have a look an these links for some suggestions on asking questions here.

 http://adv-r.had.co.nz/Reproducibility.html

http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

On Tue, 21 Jul 2020 at 13:42, Bert Gunter <bgunter.4567 at gmail.com> wrote:

> What language are you programming in? -- it certainly isn't R.
>
> I suggest that you stop what you're doing and go through an R tutorial or
> two before proceeding. This list cannot serve as a substitute for doing
> such homework (is this homework, btw? -- that's off topic here) nor can we
> provide such tutorials.
>
> I'm pretty sure the answer is quite simple, though it's a bit unclear as
> you did not provide a reprex (see the posting guide linked below for how to
> post here). However, I see no purpose in my blurting it out when you do not
> seem aware of even the most basic R constructs -- e.g. see ?while. Of
> course, others may disagree and provide you what you seek.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Jul 21, 2020 at 10:21 AM e-mail ma015k3113 via R-help <
> r-help at r-project.org> wrote:
>
> > Dear All, I have a dataframe which has a few thousand companies with
> > unique company numbers and names and  each company has data for several
> > years and each year is stored in a separate row.
> >
> > I want to get a total for the number of years of data for each company.
> > When I loop through the data with the following command  I get a value of
> > ?1? rather than a total of the rows for each company
> >
> > All_companies$count <-0
> >
> > while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1
> >
> > + {All_companies$count=All_companies$count+1}
> >
> > Can you kindly help me on this?
> >
> > Ahson
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jul 21 20:07:30 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 21 Jul 2020 19:07:30 +0100
Subject: [R] Creating xts objects from csv file
In-Reply-To: <001f01d65f80$5ebee630$1c3cb290$@sbcglobal.net>
References: <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=.ref@sbcglobal.net>
 <!&!GAAAAAAAAABWob9e2JwrSqMGgmGX/wghwoAAABgAAAAAAAAAVqG/XticK0qjBoJhl/8IIWQ1XAAAAAAAEAAAALnZt8dPkC5Mp9ybol261wwjAAAAQ3JlYXRpbmcgeHRzIG9iamVjdHMgZnJvbSBjc3YgZmlsZQA=@sbcglobal.net>
 <a31dff6f-ab6e-50a1-287e-c1ddd5f7a95f@sapo.pt>
 <000701d65eef$2a502b20$7ef08160$@sbcglobal.net>
 <ee01315e-b9dd-e8a9-84b7-afd518453193@sapo.pt>
 <001f01d65f80$5ebee630$1c3cb290$@sbcglobal.net>
Message-ID: <0d094296-47e8-3317-b5eb-8d356cdee0ed@sapo.pt>

Hello,

I've cc-ed the list.

Yes, I believe that generally speaking, POSIXct is better than POSIXlt. 
POSIXlt is a complicated structure, POSXct is much simpler and gives 
less problems. Datetimes are a problem because they are datetimes but 
POSIXct is a good way of trying to make things simpler. It's also the 
class returned by packages like lubridate, functions ymd_hms and 
similar. SO I think it's the prefered class for problems with datetime 
variables.

Rui Barradas

?s 17:59 de 21/07/2020, Jeff Reichman escreveu:
> Rui
>
> So generally would it be better to us POSIXct than POSIXlt?
>
> Jeff
> -----Original Message-----
> From: Rui Barradas <ruipbarradas at sapo.pt>
> Sent: Tuesday, July 21, 2020 5:58 AM
> To: reichmanj at sbcglobal.net
> Subject: Re: [R] Creating xts objects from csv file
>
> Hello,
>
> Why it didn't work I don't know but the opposite happens to me, I rarely use as.POSIXlt.
> This is because "POSIXlt" objects are complicated, list-like objects. Try
>
> ct <- as.POSIXct("2020-07-21 12:30")
> lt <- as.POSIXlt("2020-07-21 12:30")
>
> attributes(ct)
> unclass(ct)
> attributes(lt)
> unclass(lt)
>
> POSIXlt objects can be usefull when their components are needed but many times the problems are simple and the POSIXct class is simpler.
>
>
> Rui Barradas
>
> ?s 00:40 de 21/07/2020, Jeff Reichman escreveu:
>> Rui
>>
>> Yes that worked. I rarely if ever use the POSIXct function . Wonder why POSIXct worded and POSIXlt didn't????
>>
>> JEff
>>
>> -----Original Message-----
>> From: Rui Barradas <ruipbarradas at sapo.pt>
>> Sent: Monday, July 20, 2020 4:37 PM
>> To: reichmanj at sbcglobal.net; r-help at r-project.org
>> Subject: Re: [R] Creating xts objects from csv file
>>
>> Hello,
>>
>> I cannot reproduce the error, your code runs as expected. Try as.POSIXct?
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 21:32 de 20/07/2020, Jeff Reichman escreveu:
>>> R-Help Forum
>>>
>>>     
>>>
>>> Starting to work with xts objects but can't figure out what I'm doing
>>> wrong when converting *.csv file with a dtg variable to a *.xts
>>> object. When I'm converting to an appropriate time object all I get
>>> are NA, so that's my first issue.
>>>
>>>     
>>>
>>> dtg <- c("1/5/2010 2:30", "1/5/2010 10:32", "1/5/2010 12:03")
>>>
>>> seq <- c(1,2,3)
>>>
>>>     
>>>
>>> dat <- data.frame(dtg, seq)
>>>
>>>     
>>>
>>> dat$dtg <- as.POSIXlt(dat$dtg, format = "%m/%d/%Y %H:%M")
>>>
>>>     
>>>
>>> dat.xts <- xts(x = dat[,-1], order.by = dat[,1])
>>>
>>>                   
>>>
>>> head(dat.xts)
>>>
>>>     
>>>
>>> Sincerely
>>>
>>>     
>>>
>>> Jeff Reichman
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> --
>> Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
>> https://www.avast.com/antivirus
>>


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jul 21 20:13:05 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Tue, 21 Jul 2020 14:13:05 -0400
Subject: [R] Looping through a dataframe
In-Reply-To: <CAKZQJMB3CQVE8wQ+gPLdLKCzg5VBNcYDb4JT=Pqz=qMqsp-bTA@mail.gmail.com>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
 <CAGxFJbRww-KjuxFNPrkhPXbaHC+5BjuyJhraypeAafUTRWRxiw@mail.gmail.com>
 <CAKZQJMB3CQVE8wQ+gPLdLKCzg5VBNcYDb4JT=Pqz=qMqsp-bTA@mail.gmail.com>
Message-ID: <CAKZQJMBh20bY9itZcxYnP7NsnDvVvw0f+Ek2DeOheHpuJKKedw@mail.gmail.com>

It occurs to me a simple table command will do what you say you want but I
suspect the real analysis is more complicated

dat1  <-  data.frame(aa =  sample(letters[1:5], 10, replace = TRUE),
           bb  =  1:10)

 table(dat1$aa)

On Tue, 21 Jul 2020 at 14:01, John Kane <jrkrideau at gmail.com> wrote:

> As Bert says that does not look like R
>
> Have a look an these links for some suggestions on asking questions here.
>
>  http://adv-r.had.co.nz/Reproducibility.html
>
>
> http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>
> On Tue, 21 Jul 2020 at 13:42, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> What language are you programming in? -- it certainly isn't R.
>>
>> I suggest that you stop what you're doing and go through an R tutorial or
>> two before proceeding. This list cannot serve as a substitute for doing
>> such homework (is this homework, btw? -- that's off topic here) nor can we
>> provide such tutorials.
>>
>> I'm pretty sure the answer is quite simple, though it's a bit unclear as
>> you did not provide a reprex (see the posting guide linked below for how
>> to
>> post here). However, I see no purpose in my blurting it out when you do
>> not
>> seem aware of even the most basic R constructs -- e.g. see ?while. Of
>> course, others may disagree and provide you what you seek.
>>
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Tue, Jul 21, 2020 at 10:21 AM e-mail ma015k3113 via R-help <
>> r-help at r-project.org> wrote:
>>
>> > Dear All, I have a dataframe which has a few thousand companies with
>> > unique company numbers and names and  each company has data for several
>> > years and each year is stored in a separate row.
>> >
>> > I want to get a total for the number of years of data for each company.
>> > When I loop through the data with the following command  I get a value
>> of
>> > ?1? rather than a total of the rows for each company
>> >
>> > All_companies$count <-0
>> >
>> > while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1
>> >
>> > + {All_companies$count=All_companies$count+1}
>> >
>> > Can you kindly help me on this?
>> >
>> > Ahson
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> John Kane
> Kingston ON Canada
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From you@r|@|@nou@ @end|ng |rom gm@||@com  Tue Jul 21 20:20:56 2020
From: you@r|@|@nou@ @end|ng |rom gm@||@com (Yousri Fanous)
Date: Tue, 21 Jul 2020 14:20:56 -0400
Subject: [R] Playing a music file in R
In-Reply-To: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
Message-ID: <CADsEwSfLEAZu-=PfF34m=d_DrPozGxB=w4iesdY54rvhB_cjeQ@mail.gmail.com>

Google search "playing music with r"
for example:
https://stackoverflow.com/questions/31782580/how-can-i-play-birthday-music-using-r

It can be a starting point

Yousri

On Tue, Jul 21, 2020 at 2:02 PM Vahid Borji <vahid.borji65 at gmail.com> wrote:
>
> Hello my R friends,
>
> How can we call a music file from our laptop (for example from desktop) and
> play it in R? Could you please give me an explicit example by writing
> commands in R. Is it necessary for our music file to be in a specific
> format? If yes, which format it has to be?
>
> Thank you in advance
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jul 21 20:36:16 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Tue, 21 Jul 2020 14:36:16 -0400
Subject: [R] 
 Error in mice package when trying to use subset of variables
 for imputation model
In-Reply-To: <CAHF845HqhGYGkVhfFZkFpYW4tZ6Y3=iR+xJcLe1LEW2LJFVDWA@mail.gmail.com>
References: <CAHF845HqhGYGkVhfFZkFpYW4tZ6Y3=iR+xJcLe1LEW2LJFVDWA@mail.gmail.com>
Message-ID: <CAKZQJMDcxC0rVuwo-O_61H5GH8+aHYU=hLXHpWSxPqTDnwQkpA@mail.gmail.com>

I wonder if you have a non-ascii symbol in there somewhere? That may be
what this is trying to tell you.

Error in parse(text = x, keep.source = FALSE) :

  <text>:1:1: unexpected '<'


I have no dea what "mice" is supposed to output but using your data,
renamed dat1,
I did

library(mice)
pred <- quickpred(dat1, mincor = .1, minpuc = 0, inc=inlist)

and got
         TSHS_1R TSHS_2R TSHS_3R TSHS_4R TSHS_5R TSHS_6R TSHS_7R TSHS_8R
TSHS_1R        0       0       0       0       0       0       0       0
TSHS_2R        0       0       0       0       0       0       0       0
TSHS_3R        0       0       0       0       0       0       0       0
TSHS_4R        0       0       0       0       0       0       0       0
TSHS_5R        0       0       0       0       0       0       0       0
TSHS_6R        1       1       1       1       1       0       1       1
TSHS_7R        0       0       0       0       0       0       0       0
TSHS_8R        0       0       0       0       0       0       0       0
TSHS_9R        0       0       0       0       0       0       0       0
TSHS_10R       0       0       0       0       0       0       0       0
TSHS_11R       1       1       1       1       1       1       1       1
TSHS_12R       0       0       0       0       0       0       0       0
TSHS_13R       0       0       0       0       0       0       0       0
TSHS_14R       0       0       0       0       0       0       0       0
TSHS_15R       0       0       0       0       0       0       0       0
TSHS_16R       0       0       0       0       0       0       0       0
TSHS_17R       0       0       0       0       0       0       0       0
TSHS_18R       0       0       0       0       0       0       0       0
TSHS_19R       1       1       1       1       1       0       1       1
TSHS_20R       0       0       0       0       0       0       0       0
TSHS_21R       0       0       0       0       0       0       0       0
TSHS_22R       1       1       1       1       1       1       1       1
TSHS_23R       1       1       1       1       1       1       1       1
TSHS_24R       1       1       1       1       1       1       1       1
TSHS_25R       0       0       0       0       0       0       0       0
TSHS_26R       0       0       0       0       0       0       0       0
TSHS_27R       0       0       0       0       0       0       0       0
TSHS_28R       0       0       0       0       0       0       0       0
TSHS_29R       0       0       0       0       0       0       0       0
TSHS_30R       0       0       0       0       0       0       0       0
etc.

On Tue, 21 Jul 2020 at 11:09, Ian McPhail <ivmcphail at gmail.com> wrote:

> Hello,
>
>
>
> I am attempting to create a multiple imputation model using the mice
> package in R. Here are some details about what I am specifically trying to
> do, and below is a subset of the data I am working with, the code I have
> tried, and the error that I am getting.
>
>
>
> In the dataset, labelled 'mturk.all', there are ~300 variables and around
> 1300 cases. For the multiple imputation model, I am trying to use only 33
> of the ~300 variables; these 33 variables are dichotomous (coded as 0 and 1
> in the dataset).
>
>
>
> Following the mice code provided at
> https://stefvanbuuren.name/fimd/sec-toomany.html (see section 9.1.6 on the
> linked website), I have tried the following code, which resulted in an
> error (also shown below):
>
>
>
>
>
> ```
>
> >library(mice)
>
> >pred <- quickpred(mturk.all, mincor = .1, minpuc = 0, inc=c("TSHS_1R",
> "TSHS_2R", "TSHS_3R", "TSHS_4R", "TSHS_5R", "TSHS_6R", "TSHS_7R",
> "TSHS_8R", "TSHS_9R", "TSHS_10R", "TSHS_11R", "TSHS_12R", "TSHS_13R",
> "TSHS_14R", "TSHS_15R", "TSHS_16R", "TSHS_17R", "TSHS_18R", "TSHS_19R",
> "TSHS_20R", "TSHS_21R", "TSHS_22R", "TSHS_23R", "TSHS_24R", "TSHS_25R",
> "TSHS_26R", "TSHS_27R", "TSHS_28R", "TSHS_29R", "TSHS_30R", "TSHS_31R",
> "TSHS_32R", "TSHS_33R"))
>
> There were 14 warnings (use warnings() to see them)
>
> > warnings()
>
> Warning messages:
>
> 1: In data.matrix(data) : NAs introduced by coercion
>
> 2: In data.matrix(data) : NAs introduced by coercion
>
> 3: In data.matrix(data) : NAs introduced by coercion
>
> 4: In data.matrix(data) : NAs introduced by coercion
>
> 5: In data.matrix(data) : NAs introduced by coercion
>
> 6: In data.matrix(data) : NAs introduced by coercion
>
> 7: In data.matrix(data) : NAs introduced by coercion
>
> 8: In data.matrix(data) : NAs introduced by coercion
>
> 9: In data.matrix(data) : NAs introduced by coercion
>
> 10: In data.matrix(data) : NAs introduced by coercion
>
> 11: In data.matrix(data) : NAs introduced by coercion
>
> 12: In data.matrix(data) : NAs introduced by coercion
>
> 13: In data.matrix(data) : NAs introduced by coercion
>
> 14: In data.matrix(data) : NAs introduced by coercion
>
> >mturk.all.imp <- mice(mturk.all, m = 40, method = 'logreg', pred = pred)
>
> Error in parse(text = x, keep.source = FALSE) :
>
>   <text>:1:1: unexpected '<'
>
> 1: <
>
>     ^
>
> ```
>
>
>
> Alternatively, I tried the following:
>
>
>
> ```
>
> >inlist <- mturk.all[c("TSHS_1R", "TSHS_2R", "TSHS_3R", "TSHS_4R",
> "TSHS_5R", "TSHS_6R", "TSHS_7R", "TSHS_8R", "TSHS_9R", "TSHS_10R",
> "TSHS_11R", "TSHS_12R", "TSHS_13R", "TSHS_14R", "TSHS_15R", "TSHS_16R",
> "TSHS_17R", "TSHS_18R", "TSHS_19R", "TSHS_20R", "TSHS_21R", "TSHS_22R",
> "TSHS_23R", "TSHS_24R", "TSHS_25R", "TSHS_26R", "TSHS_27R", "TSHS_28R",
> "TSHS_29R", "TSHS_30R", "TSHS_31R", "TSHS_32R", "TSHS_33R")]
>
> >pred <- quickpred(mturk.all, mincor = .1, minpuc = 0, inc=inlist)
>
> >mturk.all.imp <- mice(mturk.all, m = 40, method = 'logreg', pred = pred)
>
> Error in parse(text = x, keep.source = FALSE) :
>
>   <text>:1:1: unexpected '<'
>
> 1: <
>
>     ^
>
> ```
>
>
>
> I have also switched out the 'logreg' imputation method with 'pmm' and
> received the same error message.
>
>
>
> Here is a subset of the dataset, mturk.all, and the version of R Studio I
> am using, plus the version of mice I am using.
>
>
>
> ```
>
> > dput(mturk.all[425:434, 1:33])
>
> structure(list(TSHS_1R = c(0, 1, 1, 0, 0, 0, 1, 1, 0, 1), TSHS_2R = c(0,
>
> 0, 0, 1, 0, 0, 0, 0, 0, 0), TSHS_3R = c(0, 1, 0, 0, 0, 0, 0,
>
> 0, 1, 0), TSHS_4R = c(0, 1, 0, 0, 0, 0, 1, 0, 1, 0), TSHS_5R = c(0,
>
> 0, 0, 1, 0, 0, 0, 0, 1, 0), TSHS_6R = c(0, 0, NA, NA, 0, 0, 1,
>
> 0, 0, 0), TSHS_7R = c(0, 0, 0, 1, 0, 1, 1, 0, 0, 0), TSHS_8R = c(1,
>
> 1, 0, 0, 1, 1, 1, 1, 0, 1), TSHS_9R = c(0, 0, 0, 0, 0, 0, 0,
>
> 1, 1, 0), TSHS_10R = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_11R = c(0,
>
> 0, NA, 0, 0, 0, 0, 1, 0, 0), TSHS_12R = c(1, 0, 1, 0, 1, 0, 0,
>
> 0, 0, 0), TSHS_13R = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 1), TSHS_14R = c(0,
>
> 0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_15R = c(0, 0, 1, 0, 0, 0, 0,
>
> 0, 0, 0), TSHS_16R = c(0, 0, 1, 0, 0, 0, 0, 0, 0, 0), TSHS_17R = c(0,
>
> 0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_18R = c(0, 0, 0, 0, 1, 0, 0,
>
> 0, 0, 0), TSHS_19R = c(0, 0, 0, NA, 0, 0, 0, 0, 0, 0), TSHS_20R = c(0,
>
> 0, 0, 1, 0, 0, 0, 0, 0, 0), TSHS_21R = c(0, 0, 0, 0, 1, 0, 0,
>
> 0, 0, 0), TSHS_22R = c(0, 1, 0, 0, NA, 1, 0, 0, 0, 0), TSHS_23R = c(0,
>
> 0, 0, 0, NA, 1, 0, 0, 0, 1), TSHS_24R = c(0, 0, 0, 1, NA, 1,
>
> 0, 1, 1, 0), TSHS_25R = c(1, 1, 1, 0, 1, 1, 1, 1, 1, 1), TSHS_26R = c(1,
>
> 0, 1, 0, 0, 0, 0, 1, 0, 1), TSHS_27R = c(1, 0, 0, 1, 0, 1, 1,
>
> 0, 0, 1), TSHS_28R = c(0, 0, 0, 0, 0, 0, 0, 0, 1, 0), TSHS_29R = c(1,
>
> 0, 0, 0, 1, 0, 0, 0, 0, 0), TSHS_30R = c(0, 0, 0, 0, 0, 0, 0,
>
> 0, 0, 0), TSHS_31R = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_32R = c(0,
>
> 0, 0, 0, 0, 0, 0, 0, 0, 0), TSHS_33R = c(0, 0, 0, 0, 0, 0, 0,
>
> 0, 0, 0)), row.names = c(NA, -10L), class = c("tbl_df", "tbl",
>
> "data.frame"))
>
> > rstudioapi::versionInfo()
>
> $`citation`
>
>
>
> To cite RStudio in publications use:
>
>
>
>   RStudio Team (2018). RStudio: Integrated Development for R. RStudio,
> Inc., Boston, MA URL http://www.rstudio.com/.
>
>
>
> A BibTeX entry for LaTeX users is
>
>
>
>   @Manual{,
>
>     title = {RStudio: Integrated Development Environment for R},
>
>     author = {{RStudio Team}},
>
>     organization = {RStudio, Inc.},
>
>     address = {Boston, MA},
>
>     year = {2018},
>
>     url = {http://www.rstudio.com/},
>
>   }
>
>
>
>
>
> $`mode`
>
> [1] "desktop"
>
>
>
> $version
>
> [1] ?1.2.1335?
>
>
>
> > packageVersion("mice")
>
> [1] ?3.8.0?
>
> ```
>
>
>
> Any help identifying what I am doing wrong in the code would be
> appreciated!
>
>
>
> Ian
>
> --
> Ian McPhail, M.A.
> Clinical Psychology Graduate Student
> Department of Psychology, University of Saskatchewan
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From roger@bo@ @end|ng |rom gm@||@com  Tue Jul 21 19:38:34 2020
From: roger@bo@ @end|ng |rom gm@||@com (Roger Bos)
Date: Tue, 21 Jul 2020 13:38:34 -0400
Subject: [R] Looping through a dataframe
In-Reply-To: <1260146996.503324.1595352054915@mail2.virginmedia.com>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
Message-ID: <CAPV07m-_9DZ8=8MJ46=9KmDQpbDdZw2cq7tzAp1aO5MN56DkHQ@mail.gmail.com>

What you are asking is one area where the package data.table really
shines.  You didn't provide an example, but based on your question you
would do something like:

library(data.table)
dt <- as.data.table(All_companies)
dt[, .N, by=COMPANY_NAME]

You will have to read up on data.table, but .N gives you the number of
observations and when using data.table (unike data.frames) you can use the
column name directly in the 'by' parameter with needing to append the name
of the R object or use quotes.

Obviously this is just one of many ways to do what you are asking.

HTH, Roger

On Tue, Jul 21, 2020 at 1:21 PM e-mail ma015k3113 via R-help <
r-help at r-project.org> wrote:

> Dear All, I have a dataframe which has a few thousand companies with
> unique company numbers and names and  each company has data for several
> years and each year is stored in a separate row.
>
> I want to get a total for the number of years of data for each company.
> When I loop through the data with the following command  I get a value of
> ?1? rather than a total of the rows for each company
>
> All_companies$count <-0
>
> while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1
>
> + {All_companies$count=All_companies$count+1}
>
> Can you kindly help me on this?
>
> Ahson
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @t@t|@t|c@84 @end|ng |rom hotm@||@com  Tue Jul 21 22:26:16 2020
From: @t@t|@t|c@84 @end|ng |rom hotm@||@com (peri He)
Date: Tue, 21 Jul 2020 20:26:16 +0000
Subject: [R] Installation of a source package in R
Message-ID: <VI1PR10MB2702A900D45D6B989D317F65C6780@VI1PR10MB2702.EURPRD10.PROD.OUTLOOK.COM>

Hello,

I have installed all packages successfully in order to unpack a source package.
I am still getting error when I run: install.packages ("package.tar.gz', repos = NULL,  type = "source").

Is that possible my system doesn't allow Rstudio to compile some information in C++ ?
My colleague is running the same program without any error.

Any idea will be appreciated.

Regards,





	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Tue Jul 21 23:14:49 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 22 Jul 2020 07:14:49 +1000
Subject: [R] Playing a music file in R
In-Reply-To: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
Message-ID: <CA+8X3fV5Or3yGaJtvxw75jU2Es1yfzF55ROkeQEE6bd99u4JyA@mail.gmail.com>

Hi Vahid,
The following command:

system("mplayer /home/jim/songs/bimbo_soul.mp3",
 wait=FALSE,ignore.stdout=TRUE)

works fine for me. Of course you'll have to specify a music player and
music file that you have...

Jim

On Wed, Jul 22, 2020 at 4:02 AM Vahid Borji <vahid.borji65 at gmail.com> wrote:
>
> Hello my R friends,
>
> How can we call a music file from our laptop (for example from desktop) and
> play it in R? Could you please give me an explicit example by writing
> commands in R. Is it necessary for our music file to be in a specific
> format? If yes, which format it has to be?
>
> Thank you in advance
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jul 21 23:16:24 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 22 Jul 2020 00:16:24 +0300
Subject: [R] Installation of a source package in R
In-Reply-To: <VI1PR10MB2702A900D45D6B989D317F65C6780@VI1PR10MB2702.EURPRD10.PROD.OUTLOOK.COM>
References: <VI1PR10MB2702A900D45D6B989D317F65C6780@VI1PR10MB2702.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <20200722001624.1bbd5fd1@trisector>

On Tue, 21 Jul 2020 20:26:16 +0000
peri He <statistics84 at hotmail.com> wrote:

> I am still getting error when I run: install.packages
> ("package.tar.gz', repos = NULL,  type = "source").

It's a good idea to specify both the things you are doing (which you
did) and the results you are getting, i.e. the exact error message
(which you didn't), otherwise providing help may be impossible.

Please see the link below each message on this mailing list for the
posting guide. <http://www.catb.org/~esr/faqs/smart-questions.html>
could also be useful.

> Is that possible my system doesn't allow Rstudio to compile some
> information in C++ ?

The answer may depend on what exactly you have installed: versions of
your operating system, R, RStudio, Rtools, etc. Some things may also
depend on the package you are trying to install.

-- 
Best regards,
Ivan


From drj|m|emon @end|ng |rom gm@||@com  Tue Jul 21 23:31:46 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 22 Jul 2020 07:31:46 +1000
Subject: [R] Looping through a dataframe
In-Reply-To: <1260146996.503324.1595352054915@mail2.virginmedia.com>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
Message-ID: <CA+8X3fW9hx_qOjaGg3QXnxpBnh7cJUPvUnOasmSGxZp5bUkXSg@mail.gmail.com>

Hi Ahson,
Guessing what your data frame might look like, here are two easy ways:

All_companies<-data.frame(year=c(1970:2015,2000:2015,2010:2015),
 COMPANY_NUMBER=c(rep(1,46),rep(2,16),rep(3,6)),
 COMPANY_NAME=c(rep("IBM",46),rep("AMAZON",16),rep("SPACE-X",6)))
# easy ways
table(All_companies$COMPANY_NAME)
table(All_companies$COMPANY_NUMBER)

I'm too lazy to provide a difficult way.

Jim

On Wed, Jul 22, 2020 at 3:21 AM e-mail ma015k3113 via R-help
<r-help at r-project.org> wrote:
>
> Dear All, I have a dataframe which has a few thousand companies with unique company numbers and names and  each company has data for several years and each year is stored in a separate row.
>
> I want to get a total for the number of years of data for each company. When I loop through the data with the following command  I get a value of ?1? rather than a total of the rows for each company
>
> All_companies$count <-0
>
> while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1
>
> + {All_companies$count=All_companies$count+1}
>
> Can you kindly help me on this?
>
> Ahson
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bret@chr @end|ng |rom x@4@||@n|  Tue Jul 21 23:39:40 2020
From: bret@chr @end|ng |rom x@4@||@n| (bretschr)
Date: Tue, 21 Jul 2020 23:39:40 +0200
Subject: [R] Playing a music file in R
In-Reply-To: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
Message-ID: <CF5D5614-A376-4B25-AAA9-43B2396AB5D5@xs4all.nl>

Hello vahid.borji,


Re:

> How can we call a music file from our laptop (for example from desktop) and
> play it in R? Could you please give me an explicit example by writing
> commands in R. Is it necessary for our music file to be in a specific
> format? If yes, which format it has to be?

Wave files, and probably a few other formata, can be loaded, saved and manupulated with (a.o.)  these packages:

library(signal)  
library(seewave)
library(tuneR)


In addition, to play a wave file, a small Unix file is necessary, called "play".
It must be attached by the following line:

	setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")   # path depends on your R version etc.


Then, a simple script like the following will do:


	inname = file.choose()
	ywave=readWave(inname)
	ster=ywave at stereo
	srate=ywave at samp.rate
	play(ywave)


Hoping this helps, I remain
With best regards,


Franklin Bretschneider
Dept of Biology
Utrecht University
f.bretschneider at uu.nl


From pd@|gd @end|ng |rom gm@||@com  Tue Jul 21 23:54:46 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 21 Jul 2020 23:54:46 +0200
Subject: [R] A WSL question with allocation
In-Reply-To: <CACxE24km+VtMUekZm=_KSOY8O5cZFU14tYdGDn+rFtTTNZpszQ@mail.gmail.com>
References: <CACxE24km+VtMUekZm=_KSOY8O5cZFU14tYdGDn+rFtTTNZpszQ@mail.gmail.com>
Message-ID: <32B7E418-7815-4B98-837C-1CB7A459C56B@gmail.com>

Does "ulimit -a" give a hint? (NB: no n in there...)

-pd

> On 21 Jul 2020, at 17:30 , Erin Hodgess <erinm.hodgess at gmail.com> wrote:
> 
> Hello!
> 
> Hope everyone is staying well.
> 
> I?m not sure if this is the right list for this question, but here goes.
> 
> I am using the new experimental WSL on my Windows laptop.  It was going
> well until yesterday.   I?m using Ubuntu 20.04.  I am starting to get ?
> error: cannot allocate vector of size 1.3 gb?.  I have 32 gb of RAM.  I
> tried using ?unlimit -v 1600000000?, not working.
> 
> Has anyone else had trouble with this, please? I?m thinking that it might
> be because of the newness of the WSL platform.
> 
> Thanks,
> Erin
> 
> -- 
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@j|@n03 @end|ng |rom gm@||@com  Wed Jul 22 02:31:19 2020
From: m@j|@n03 @end|ng |rom gm@||@com (=?ISO-8859-1?B?TWEgSmlhbg==?=)
Date: Wed, 22 Jul 2020 08:31:19 +0800
Subject: [R] copent - the package for estimating copula entropy
Message-ID: <tencent_BE08CF48094F44C1ADF3790031CB637FE505@qq.com>

Hi all,

I'm writing to you to introduce our new package, copent [6]. This package 
estimates copula entropy, a new mathematical concept for multivariate 
statistical independence measure and testing [1].  The estimating method is 
nonparametric and can be applied to any cases without making assumptions. 
The package has been used for  
    * association discovery [2], in which copula entropy is an association measure 
shown to be better than correlation coeffients, 
    * structure learning [3], 
    * variable selection [4], and  
    * causal discovery [5] by estimating transfer entropy.

CRAN: https://cran.r-project.org/package=copent
GITHUB: https://github.com/majianthu/copent/

Hope it helpful for you. Any comments and suggestions are welcome.

Best Regards,
MA Jian
------
References
1. Ma Jian, Sun Zengqi. Mutual information is copula entropy. Tsinghua Science & Technology, 2011, 16(1): 51-54. See also arXiv preprint, arXiv:0808.0845, 2008.
2. Ma Jian. Discovering Association with Copula Entropy. arXiv preprint arXiv:1907.12268, 2019.
3. Ma Jian, Sun Zengqi. Dependence Structure Estimation via Copula. arXiv preprint arXiv:0804.4451v2, 2019.
4. Ma Jian. Variable Selection with Copula Entropy. arXiv preprint arXiv:1910.12389, 2019.
5. Ma Jian. Estimating Transfer Entropy via Copula Entropy. arXiv preprint arXiv:1910.04375, 2019.
6. Ma Jian. copent: Estimating Copula Entropy in R. arXiv preprint, arXiv:2005.14025, 2020.

From p@u|bern@|07 @end|ng |rom gm@||@com  Wed Jul 22 04:26:35 2020
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Tue, 21 Jul 2020 21:26:35 -0500
Subject: [R] Testing wether my dataset follows a poisson distribution with R
Message-ID: <CAMOcQfMac0WmQZPSkn8B1yiMO8=bTuO1ks1MXGdL-v9qSk7=9w@mail.gmail.com>

Dear friends,

I have a sample dataset, which is basically the number of transits through
a particular waterway, and is on a daily basis.

MyDat <- dataset$DailyTransits

What I?d like to do is to test whether MyDat follows a poisson distribution
or not. What R function could accomplish this?

Any help and/or guidance will be greatly appreciated,

Best regards,

Paul

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Jul 22 05:03:05 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 21 Jul 2020 20:03:05 -0700
Subject: [R] 
 Testing wether my dataset follows a poisson distribution with R
In-Reply-To: <CAMOcQfMac0WmQZPSkn8B1yiMO8=bTuO1ks1MXGdL-v9qSk7=9w@mail.gmail.com>
References: <CAMOcQfMac0WmQZPSkn8B1yiMO8=bTuO1ks1MXGdL-v9qSk7=9w@mail.gmail.com>
Message-ID: <d38d02e2-968b-2f2d-963f-64d331652211@comcast.net>

Your first check might be to see in the mean and sd are "reasonably" 
close. Next approach would be to see if the `qqplot` of that vector has 
an arguably straight-line relationship with a random draw from a Poisson 
random generator function with the same mean.

?rpois

?qqplot

And do remember that Rhelp is a plain-text mailing list.

-- 

David

On 7/21/20 7:26 PM, Paul Bernal wrote:
> Dear friends,
>
> I have a sample dataset, which is basically the number of transits through
> a particular waterway, and is on a daily basis.
>
> MyDat <- dataset$DailyTransits
>
> What I?d like to do is to test whether MyDat follows a poisson distribution
> or not. What R function could accomplish this?
>
> Any help and/or guidance will be greatly appreciated,
>
> Best regards,
>
> Paul
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Jul 22 05:15:08 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 21 Jul 2020 20:15:08 -0700
Subject: [R] Playing a music file in R
In-Reply-To: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
Message-ID: <adde0cda-31ac-6a82-8eff-f610bc7c6cf7@comcast.net>

 From the package's DESCRIPTION file found as the first hit to a search 
with rseek.org using strategy "play mp3 files":

Package:?? ? ?tuneR? July 8, 2018

Version:?? ? 1.3.3 Date 2018-07-03

Title:?? ? Analysis of Music and Speech

Author:?? ? Uwe Ligges with contributions from Sebastian Krey, Olaf 
Mersmann, Sarah Schnackenberg, Guillaume Guenard, Andrea Preusser, Anita 
Thieler, Johanna Mielke and Claus Weihs, as well as code fragments and 
ideas from the former package 'sound' by Matthias Heymann and functions 
from 'rastamat' by Daniel P. W. Ellis. The included parts of the libmad 
MPEG audio decoder library are authored by Underbit Technologies

Description:?? ? Analyze music and speech, extract features like MFCCs, 
handle wave files and their representation in various ways, read mp3, 
read midi, perform steps of a transcription, ... Also contains functions 
ported from the 'rastamat' 'Matlab' package.

-- 

David

On 7/21/20 11:00 AM, Vahid Borji wrote:
> Hello my R friends,
>
> How can we call a music file from our laptop (for example from desktop) and
> play it in R? Could you please give me an explicit example by writing
> commands in R. Is it necessary for our music file to be in a specific
> format? If yes, which format it has to be?
>
> Thank you in advance
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jul 22 06:50:57 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 21 Jul 2020 21:50:57 -0700
Subject: [R] 
 Testing wether my dataset follows a poisson distribution with R
In-Reply-To: <CAMOcQfMac0WmQZPSkn8B1yiMO8=bTuO1ks1MXGdL-v9qSk7=9w@mail.gmail.com>
References: <CAMOcQfMac0WmQZPSkn8B1yiMO8=bTuO1ks1MXGdL-v9qSk7=9w@mail.gmail.com>
Message-ID: <CAGxFJbQrbc5adV8qpsU=H1tqy=0sGQh6fnRJffyDHyFB+gV+vw@mail.gmail.com>

That is logically impossible.

You can only show that there is insufficient evidence (according to
whatever evidentiary criterion you have chosen) to show that the data were
*not* a (iid or other) sample from a Poisson. This may seem esoteric, but
it is not. (The simplest incantation is that you can reject, but not accept
a hypothesis in the classical N-P frequentist framework ). Given sufficient
data, you will almost always have enough evidence to be formally
inconsistent with any prechosen model/distribution. This does not mean that
the model is not useful, however.

Further discussion would meander even farther offtopic. These are
statistical (and philosophy of science) issues that don't properly belong
here. Mea culpa.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 21, 2020 at 7:27 PM Paul Bernal <paulbernal07 at gmail.com> wrote:

> Dear friends,
>
> I have a sample dataset, which is basically the number of transits through
> a particular waterway, and is on a daily basis.
>
> MyDat <- dataset$DailyTransits
>
> What I?d like to do is to test whether MyDat follows a poisson distribution
> or not. What R function could accomplish this?
>
> Any help and/or guidance will be greatly appreciated,
>
> Best regards,
>
> Paul
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drd@dkh@h @end|ng |rom out|ook@com  Wed Jul 22 07:26:34 2020
From: drd@dkh@h @end|ng |rom out|ook@com (Dr. Mehdi Dadkhah)
Date: Wed, 22 Jul 2020 05:26:34 +0000
Subject: [R] Question about citing R packages in an academic paper
Message-ID: <VI1PR04MB5262D7508181F768B6EECA0DA1790@VI1PR04MB5262.eurprd04.prod.outlook.com>

Hi,
I hope you are doing well!

I have a question. I and my colleagues wrote a paper by using R language and its packages. We also used some tutorials. We have words count limitation for our paper. In early version of paper, I cited all packages in the reference list of paper (my paper will be published in an academic journal). After that, we had to keep references to tutorials in the reference list and remove reference to R and its packages (I strictly should fit paper to 2000 words). We created an online appendix and listed all packages which we used. Some packages are related to paper. For example, when i used command 'citation()'  in R console for package "tidytext", R informed me that i should cite such package as this:


Silge, J., & Robinson, D. (2016). tidytext: Text Mining and Analysis Using Tidy Data Principles in R. JOSS, 1(3). https://doi.org/10.21105/joss.00037

Now, all packages and their related papers are not in the reference list of paper, but they will be available in an online appendix in the journal website. Is such practice OK or should I cite all packages in the reference list?
I attached online appendix. We will submit our paper to a journal soon.
Should I cite papers which are related to packages in the reference list? if I do not cite, i will face with permission problem regard to usage of package?

Many thanks!
With best regards,


Dr. Mehdi Dadkhah



From |ev7379 @end|ng |rom gm@||@com  Wed Jul 22 06:11:33 2020
From: |ev7379 @end|ng |rom gm@||@com (Jason Levy)
Date: Tue, 21 Jul 2020 18:11:33 -1000
Subject: [R] viewing, editing and saving an RDATA file
Message-ID: <CA+14-QEg_v8+dM9omFPeE4NrT5FWY0VgJDUrbtOAMZd+2q5TdA@mail.gmail.com>

Dear R Scholars
Many R users have successfully loaded and used the attached WVS RDATA file
into my R program. I would just would like help viewing, editing etc.
It is only one line of code to load in.
*load('WVS.RData')*

I would like help on how to view, edit and save this 2.461 MB RData file.
There have been so many questions and answers about this topic but I am at
my wits end. I apologize for asking such a basic question. I ave

I have tried this command and I cannot even view it, let alone edit the file
y <- load('WVS.RData')
head(y)

thank you for your guidance, Jack

From z|xu@n@q| @end|ng |rom duke@edu  Wed Jul 22 09:06:18 2020
From: z|xu@n@q| @end|ng |rom duke@edu (Zixuan Qi)
Date: Wed, 22 Jul 2020 07:06:18 +0000
Subject: [R] A Question about MLE in R
Message-ID: <SN6PR05MB5214EC34097CC5CD6F151CB098790@SN6PR05MB5214.namprd05.prod.outlook.com>

Hi,

I encounter a problem. I use optim() function in R to estimate likelihood
function and the method is SANN in the optim function.
out <-
optim(parm,logLik,method='SANN',hessian=T,control=list(maxit=5000000))

However, I find that each time I run the program, I will get different
values of parameters. My initial values are same, but the number of
iterations has reached the maximum limit. I expanded the number of
iterations to 5 million, but it??s still wrong.

I want to know what I should do. Is anyone willing to help me? Thanks so
much!

Best,
Cisy

	[[alternative HTML version deleted]]


From |ev7379 @end|ng |rom gm@||@com  Wed Jul 22 09:35:49 2020
From: |ev7379 @end|ng |rom gm@||@com (Jason Levy)
Date: Tue, 21 Jul 2020 21:35:49 -1000
Subject: [R] how to view and edit this RData file
Message-ID: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>

Dear R Scholars

Many R users have successfully loaded and used the attached WVS RDATA file
into my R program. I would just would like help viewing, editing etc.

I wanted to include the actual RData file (which was not attached
previously)

I can successfully load the RData file:
load('WVS.RData')

https://drive.google.com/drive/u/1/folders/15QhSBkwEfHLqgZznoaqodWglXuxV4f7P


I would like help on how to view, edit and save this 2.461 MB RData file.
I am at my wits end. I apologize for asking such a basic question. I
appreciate your help in advance

	[[alternative HTML version deleted]]


From t@v|b@r @end|ng |rom gm@||@com  Wed Jul 22 11:15:29 2020
From: t@v|b@r @end|ng |rom gm@||@com (Micha Silver)
Date: Wed, 22 Jul 2020 12:15:29 +0300
Subject: [R] how to view and edit this RData file
In-Reply-To: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
References: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
Message-ID: <050562a4-1fef-befe-1181-958a496fc140@gmail.com>


On 22/07/2020 10:35, Jason Levy wrote:
> Dear R Scholars
>
> Many R users have successfully loaded and used the attached WVS RDATA file
> into my R program. I would just would like help viewing, editing etc.
>
> I wanted to include the actual RData file (which was not attached
> previously)
>
> I can successfully load the RData file:
> load('WVS.RData')
>
> https://drive.google.com/drive/u/1/folders/15QhSBkwEfHLqgZznoaqodWglXuxV4f7P


This works:


load("~/Downloads/WVS.RData")
ls()
[1] "final.ord"
str(final.ord)
 ?num [1:82992, 1:74] 2 2 1 2 2 1 2 1 2 2 ...
 ?- attr(*, "dimnames")=List of 2
 ? ..$ : NULL
 ? ..$ : chr [1:74] "v12" "v13" "v14" "v15" ...
head(final.ord)


>
> I would like help on how to view, edit and save this 2.461 MB RData file.
> I am at my wits end. I apologize for asking such a basic question. I
> appreciate your help in advance
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Micha Silver
Ben Gurion Univ.
Sde Boker, Remote Sensing Lab
cell: +972-523-665918
https://orcid.org/0000-0002-1128-1325


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jul 22 11:42:48 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 22 Jul 2020 12:42:48 +0300
Subject: [R] how to view and edit this RData file
In-Reply-To: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
References: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
Message-ID: <20200722124248.084b9eca@trisector>

On Tue, 21 Jul 2020 21:35:49 -1000
Jason Levy <lev7379 at gmail.com> wrote:

> I would like help on how to view, edit and save this 2.461 MB RData
> file.

Check out the envir= argument to load() and save() if you want to
isolate the loaded data from the rest of the session.

For an example:

# create an environment to load the .rda into...
dataenv <- new.env(parent = emptyenv())
load('data.rda', envir = dataenv) # ...and load it there
ls(dataenv) # see what was inside the .rda file
dataenv$z <- volcano # edit the contents of the environment
# save the contents of the environment to an .rda file
save(list = ls(dataenv), file = 'data.rda', envir = dataenv)

-- 
Best regards,
Ivan


From pd@|gd @end|ng |rom gm@||@com  Wed Jul 22 12:06:00 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 22 Jul 2020 12:06:00 +0200
Subject: [R] A Question about MLE in R
In-Reply-To: <SN6PR05MB5214EC34097CC5CD6F151CB098790@SN6PR05MB5214.namprd05.prod.outlook.com>
References: <SN6PR05MB5214EC34097CC5CD6F151CB098790@SN6PR05MB5214.namprd05.prod.outlook.com>
Message-ID: <8BEFB19E-529D-4CF8-AA5C-42B0F6BBBA6E@gmail.com>

Simulated annealing is a probabilistic method and will do things like that. You should probably read an introduction to the method, e.g. the Wikipedia page. Not too unlikely, you really want to use one of the other methods in optim() (or better still optimr from the optimx package). 

(I take it that logLik is really the _negative_ log-likelihood function, right? Otherwise, the problem could be that you are minimizing, not maximizing.)

-pd

> On 22 Jul 2020, at 09:06 , Zixuan Qi <zixuan.qi at duke.edu> wrote:
> 
> Hi,
> 
> I encounter a problem. I use optim() function in R to estimate likelihood
> function and the method is SANN in the optim function.
> out <-
> optim(parm,logLik,method='SANN',hessian=T,control=list(maxit=5000000))
> 
> However, I find that each time I run the program, I will get different
> values of parameters. My initial values are same, but the number of
> iterations has reached the maximum limit. I expanded the number of
> iterations to 5 million, but it?s still wrong.
> 
> I want to know what I should do. Is anyone willing to help me? Thanks so
> much!
> 
> Best,
> Cisy
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Jul 22 12:40:28 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 22 Jul 2020 12:40:28 +0200
Subject: [R] how to view and edit this RData file
In-Reply-To: <20200722124248.084b9eca@trisector>
References: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
 <20200722124248.084b9eca@trisector>
Message-ID: <24344.6044.759000.411630@stat.math.ethz.ch>

>>>>> Ivan Krylov n Wed, 22 Jul 2020 12:42:48 +0300 writes:

   > On Tue, 21 Jul 2020 21:35:49 -1000 Jason Levy <lev7379 at gmail.com> wrote:

    >> I would like help on how to view, edit and save this
    >> 2.461 MB RData file.

    > Check out the envir= argument to load() and save() if you
    > want to isolate the loaded data from the rest of the
    > session.

    > For an example:

    > # create an environment to load the .rda into...
    > dataenv <- new.env(parent = emptyenv())
    > load('data.rda', envir = dataenv) # ...and load it there
    > ls(dataenv) # see what was inside the .rda file

    > dataenv$z <- volcano # edit the contents of the environment
    > # save the contents of the environment to an .rda file
    > save(list = ls(dataenv), file = 'data.rda', envir = dataenv)

    > -- 
    > Best regards,
    > Ivan

Indeed.
An -- underused and not much known -- alternative is to use

  attach("data.rda")

in my view *the only*  "legitimate" use of attach() nowadays.

Martin Maechler
ETH Zurich  and   R Core team


From drj|m|emon @end|ng |rom gm@||@com  Wed Jul 22 12:47:14 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 22 Jul 2020 20:47:14 +1000
Subject: [R] viewing, editing and saving an RDATA file
In-Reply-To: <CA+14-QEg_v8+dM9omFPeE4NrT5FWY0VgJDUrbtOAMZd+2q5TdA@mail.gmail.com>
References: <CA+14-QEg_v8+dM9omFPeE4NrT5FWY0VgJDUrbtOAMZd+2q5TdA@mail.gmail.com>
Message-ID: <CA+8X3fWFZ5jU_FDVJzx4+TNruvaqhA9KGa8t0fDSGVcAk7iAGw@mail.gmail.com>

Hi Jason,
I assume that you actually have "WVS.RData" in your working directory
when you try to load it. Otherwise you will get an error message. If
you don't get an error message when you do this:

load("WVS.RData")

there will be a new object in your workspace. So if you want to see
what the object is, try this:

objects()
load("WVS.RData")
objects()

Unless you have already run the "load" command, there will be a new
object in the list. That is what you're looking for. Say that object
is named "x". You can look at the first part of it with:

head(x)

and maybe do some basic editing with:

edit(x)

Good luck.

Jim


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Jul 22 13:31:41 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 22 Jul 2020 23:31:41 +1200
Subject: [R] [FORGED] Testing wether my dataset follows a poisson
 distribution with R
In-Reply-To: <CAMOcQfMac0WmQZPSkn8B1yiMO8=bTuO1ks1MXGdL-v9qSk7=9w@mail.gmail.com>
References: <CAMOcQfMac0WmQZPSkn8B1yiMO8=bTuO1ks1MXGdL-v9qSk7=9w@mail.gmail.com>
Message-ID: <cc27f22d-bccc-d805-cabd-1e17ef5e2125@auckland.ac.nz>


On 22/07/20 2:26 pm, Paul Bernal wrote:

> Dear friends,
> 
> I have a sample dataset, which is basically the number of transits through
> a particular waterway, and is on a daily basis.
> 
> MyDat <- dataset$DailyTransits
> 
> What I?d like to do is to test whether MyDat follows a poisson distribution
> or not. What R function could accomplish this?
> 
> Any help and/or guidance will be greatly appreciated,

I presume (your question is a bit vague) that you want to do a goodness 
of fit test of the Poisson distribution to your data.  Doing such a test 
would, I think, involve the assumption that your observations are 
independent and identically distributed (i.i.d.).  Since you appear to 
have a time series of daily counts, this assumption is unlikely to be valid.

Modelling such a time series and investigating whether the underlying 
marginal distributions are Poisson is likely to be a fairly subtle 
problem.  Others may be able to offer more insight here.  However such a 
discussion would be about statistical theory and methodology and  hence 
inappropriate for this list.

If you make the (likely to be untenable) assumption that your data are 
i.i.d. then such a g.o.f. test is probably most appropriately done using 
a chi-squared goodness of fit test.

The function chisq.test() would  help you.  Getting the details right 
may prove a bit tricky, but if you can't handle that, then you should 
probably seek "local" statistical advice.

In fact, you should (in view of the likely lack of independence of your 
data) seek local statistical advice in any case.

cheers,

Rolf Turner

P.S. Please note that it's "whether" not "wether".  (A wether is a 
castrated ram.)  Also "Poisson" should be capitalised.  (It's a bloke's 
name.)

R. T.

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From pro|jcn@@h @end|ng |rom gm@||@com  Wed Jul 22 14:48:36 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Wed, 22 Jul 2020 08:48:36 -0400
Subject: [R] A Question about MLE in R
In-Reply-To: <SN6PR05MB5214EC34097CC5CD6F151CB098790@SN6PR05MB5214.namprd05.prod.outlook.com>
References: <SN6PR05MB5214EC34097CC5CD6F151CB098790@SN6PR05MB5214.namprd05.prod.outlook.com>
Message-ID: <c443265f-a4a2-24fd-2dc6-f21617d293f6@gmail.com>

SANN is almost NEVER the tool to use.

I've given up trying to get it removed from optim(), and will soon give up
on telling folk not to use it.

JN

On 2020-07-22 3:06 a.m., Zixuan Qi wrote:
> Hi,
> 
> I encounter a problem. I use optim() function in R to estimate likelihood
> function and the method is SANN in the optim function.
> out <-
> optim(parm,logLik,method='SANN',hessian=T,control=list(maxit=5000000))
> 
> However, I find that each time I run the program, I will get different
> values of parameters. My initial values are same, but the number of
> iterations has reached the maximum limit. I expanded the number of
> iterations to 5 million, but it??s still wrong.
> 
> I want to know what I should do. Is anyone willing to help me? Thanks so
> much!
> 
> Best,
> Cisy
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed Jul 22 18:36:14 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 22 Jul 2020 09:36:14 -0700
Subject: [R] viewing, editing and saving an RDATA file
In-Reply-To: <CA+14-QEg_v8+dM9omFPeE4NrT5FWY0VgJDUrbtOAMZd+2q5TdA@mail.gmail.com>
References: <CA+14-QEg_v8+dM9omFPeE4NrT5FWY0VgJDUrbtOAMZd+2q5TdA@mail.gmail.com>
Message-ID: <a6485f17-4f80-2f92-7c1e-c82653438347@comcast.net>


On 7/21/20 9:11 PM, Jason Levy wrote:
> Dear R Scholars
> Many R users have successfully loaded and used the attached WVS RDATA file
> into my R program.


You appear to have made a common mistake in assuming that attachments of 
any sort can be processed by the Rhelp mail-server. Only attachments of 
type postscript, PDF and plain-text can survive the scrubbing process. 
It is possible to make an attachment that will hold a faithful 
representation of R objects using dput or dump, but they must have 
extension .txt when attached by mail-clients.


-- 

David.

> I would just would like help viewing, editing etc.
> It is only one line of code to load in.
> *load('WVS.RData')*
>
> I would like help on how to view, edit and save this 2.461 MB RData file.
> There have been so many questions and answers about this topic but I am at
> my wits end. I apologize for asking such a basic question. I ave
>
> I have tried this command and I cannot even view it, let alone edit the file
> y <- load('WVS.RData')
> head(y)
>
> thank you for your guidance, Jack
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rb@er @end|ng |rom @t@u@edu  Wed Jul 22 23:28:47 2020
From: rb@er @end|ng |rom @t@u@edu (Robert Baer)
Date: Wed, 22 Jul 2020 16:28:47 -0500
Subject: [R] viewing, editing and saving an RDATA file
In-Reply-To: <CA+8X3fWFZ5jU_FDVJzx4+TNruvaqhA9KGa8t0fDSGVcAk7iAGw@mail.gmail.com>
References: <CA+14-QEg_v8+dM9omFPeE4NrT5FWY0VgJDUrbtOAMZd+2q5TdA@mail.gmail.com>
 <CA+8X3fWFZ5jU_FDVJzx4+TNruvaqhA9KGa8t0fDSGVcAk7iAGw@mail.gmail.com>
Message-ID: <d14d5a84-0ee1-15ba-f378-5574b84fe651@atsu.edu>

You may misunderstand how RData files work.? Note that RData files are 
not necessarily JUST a single variable unless they were explicitly 
written to store a single variable only.

If you save a single variable (a dataframe, for example) named 'mydata' 
with save(mydata, file = "saveddata.RData") and then load the variable 
back into a new R session with y? <- load("saveddata.RData"), your data 
will still be contained in a variable named 'mydata',? not renamed? y.

Look at ?load and ?save

On 7/22/2020 5:47 AM, Jim Lemon wrote:
> Hi Jason,
> I assume that you actually have "WVS.RData" in your working directory
> when you try to load it. Otherwise you will get an error message. If
> you don't get an error message when you do this:
>
> load("WVS.RData")
>
> there will be a new object in your workspace. So if you want to see
> what the object is, try this:
>
> objects()
> load("WVS.RData")
> objects()
>
> Unless you have already run the "load" command, there will be a new
> object in the list. That is what you're looking for. Say that object
> is named "x". You can look at the first part of it with:
>
> head(x)
>
> and maybe do some basic editing with:
>
> edit(x)
>
> Good luck.
>
> Jim
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Jul 23 00:43:23 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 23 Jul 2020 00:43:23 +0200
Subject: [R] Error in Rose Method (class balancing)
Message-ID: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>

Hello,


I get the following error when I use the ROSE class balancing method but
when I use other methods like SMOTE, up, down, I do not get any error
message.


Something is wrong; all the ROC metric values are missing:

ROC Sens Spec

Min. : NA Min. : NA Min. : NA

1st Qu.: NA 1st Qu.: NA 1st Qu.: NA

Median : NA Median : NA Median : NA

Mean :NaN Mean :NaN Mean :NaN

3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA

Max. : NA Max. : NA Max. : NA



library(DMwR)

d=readARFF("bughunter.arff")

index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)

tr <- d[index, ]

ts <- d[-index, ]

boot3 <- trainControl(method = "repeatedcv", number=10,
repeats=10,classProbs = TRUE,verboseIter = FALSE,

summaryFunction = twoClassSummary, sampling = "rose")

set.seed(30218)

ct <- train(`Bug class` ~ ., data = tr,

method = "pls",

metric = "AUC",

preProc = c("center", "scale", "nzv"),

trControl = boot3)

getTrainPerf(ct)

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Jul 23 01:08:19 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 22 Jul 2020 16:08:19 -0700
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
Message-ID: <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>


On 7/22/20 3:43 PM, Neha gupta wrote:
> Hello,
>
>
> I get the following error when I use the ROSE class balancing method but
> when I use other methods like SMOTE, up, down, I do not get any error
> message.
>
>
> Something is wrong; all the ROC metric values are missing:
>
> ROC Sens Spec
>
> Min. : NA Min. : NA Min. : NA
>
> 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
>
> Median : NA Median : NA Median : NA
>
> Mean :NaN Mean :NaN Mean :NaN
>
> 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
>
> Max. : NA Max. : NA Max. : NA
>
>
>
> library(DMwR)
>
> d=readARFF("bughunter.arff")

After installing that package and loading pkg:DMwR I get:


Error in readARFF("bughunter.arff") : could not find function "readARFF"


Since you also posted in HTML, I suggest you read the Posting Guide, 
restart and R session and post a reproducible example that loads all 
needed packages and data.

-- 

David.

>
> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
> tr <- d[index, ]
>
> ts <- d[-index, ]
>
> boot3 <- trainControl(method = "repeatedcv", number=10,
> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
> summaryFunction = twoClassSummary, sampling = "rose")
>
> set.seed(30218)
>
> ct <- train(`Bug class` ~ ., data = tr,
>
> method = "pls",
>
> metric = "AUC",
>
> preProc = c("center", "scale", "nzv"),
>
> trControl = boot3)
>
> getTrainPerf(ct)
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From percent||101 @end|ng |rom gm@||@com  Wed Jul 22 13:16:38 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Wed, 22 Jul 2020 13:16:38 +0200
Subject: [R] Dataframe with different lengths
Message-ID: <CAB-TgNusP9Et=d_37x8pW7P9YXCQD4vyNsjTv4YyPaa=FhFCXA@mail.gmail.com>

Hi all,

I am trying to draw a plot with cumsum values but each "line" has different
lengths

Ilibrary(dplyr)
library(tibble)
library(lubridate)
library(PerformanceAnalytics)
library(quantmod)
library(ggplot2)

getSymbols('TSLA')

I want to create the variables:

a<-cumsum(dailyReturn(TSLA, subset = c('2019')) )
b<-cumsum(dailyReturn(TSLA, subset = c('2020')) )
c<-cumsum(dailyReturn(TSLA, subset = c('2018')) )

Each value, on a,b,c has two columns date, and values.

The thing is I want to plot the three lines in one plot with the maximum
values of a,b,c in this case a has 252 values, and plot the other two lines
could be in the axis I should put (x <- 1:252) on the axis but I was not
able for the moment.

	[[alternative HTML version deleted]]


From t|m@|ocke123 @end|ng |rom hotm@||@com  Wed Jul 22 13:30:45 2020
From: t|m@|ocke123 @end|ng |rom hotm@||@com (Tim Locke)
Date: Wed, 22 Jul 2020 11:30:45 +0000
Subject: [R] Compositional Data Analysis
Message-ID: <AM6PR06MB49644B113BF96A652759B47FCF790@AM6PR06MB4964.eurprd06.prod.outlook.com>

Hi All,

I am currently working on a project examining the health effects of physical
activity using a compositional data (CoDa) approach. I am using a
linear regression to measure the effect of physical activity. What I want to
do is predict an outcome, e.g. body mass index, based on the mean physical
activity composition. I then want to alter this composition by reallocating
time from one behavior (such as sedentary) to light intensity physical
activity, and see what effect this has on BMI. I have included the code
below. My problem is that I cannot seem to generate this new composition
correctly.



library(compositions)
attach(Data_Analysis)

#Replace zeros in raw data with 0.00001
bedtimemins[bedtimemins==0] <- 0.00001
sedwakingmins[sedwakingmins==0] <- 0.00001
standingtimemins[standingtimemins==0] <- 0.00001
LIPAmins[LIPAmins==0] <- 0.00001
MVPAmins[MVPAmins==0] <- 0.00001

# make the composition by       binding the components together
comp <- cbind(bedtimemins, sedwakingmins, standingtimemins, LIPAmins,
MVPAmins)
# tell R that comp is a compositional   variable
comp <- acomp(comp)

#Generate variation matrix
PAvar_matrix <- var.acomp(comp)

# make the ilr multiple linear regression model. BMI = body mass index. .
lm <- lm(bmi    ~ ilr(comp) + age)

#determine the mean composition, geometric mean of behaviors which sum to 1
comp.mean <- mean(comp)

# predict BMI for the mean composition from above, keeping age constant at
its mean.
mean.pred       <- predict(lm,  newdata=list(comp=comp.mean, age = mean(age)))

#generate new compostion of PA with 30 minutes of sleep reallocated to 30
mins of LIPA
new.comp        <- acomp(comp.mean +c(-30/1440, 0/1440, 0/1440, 30/1440, 0/1440))

#predict BMI based on new composition
pred    <- predict(lm,  newdata=list(comp=new.comp,     age=mean(age)))

#Estimated difference in BMI for the above reallocation
pred    - mean.pred


When I run the command to generate the new composition, I receive the
message below

new.comp        <- acomp(comp.mean +c(-30/1440, 0/1440, 0/1440, 30/1440, 0/1440))
Warning messages:
1: In acomp(gsi.mul(x, y)) :
  Negative values in composition are used as detection limits
2: In acomp(comp.mean + c(-30/1440, 0/1440, 0/1440, 30/1440, 0/1440)) :
  Negative values in composition are used as detection limits

When I print comp.mean I get a result that seems to make sense:
comp.mean
     bedtimemins    sedwakingmins standingtimemins         LIPAmins       MVPAmins

      0.36410089       0.32460230       0.22278324                0.06948202         0.01903155


I can't say the same for the new composition:
new.comp
     bedtimemins    sedwakingmins standingtimemins         LIPAmins       MVPAmins
       <5.240217              BDL              BDL                             1.000000            BDL

Any help or advice would be greatly appreciated!



	[[alternative HTML version deleted]]


From m@015k3113 @end|ng |rom b|ueyonder@co@uk  Wed Jul 22 16:04:52 2020
From: m@015k3113 @end|ng |rom b|ueyonder@co@uk (e-mail ma015k3113)
Date: Wed, 22 Jul 2020 15:04:52 +0100 (BST)
Subject: [R] Looping thorugh dataframe
Message-ID: <1172360604.547623.1595426692920@mail2.virginmedia.com>

Bert, thanks for responding to my email. I do realise that newbie's like my can expect curt answers but not to worry. I am definitely learning 'R' and what I posted are also statements from R. The statements run perfectly well but don't do what I want them to do. My mistake I have posted sample data. Here is the data:

COMPANY_NUMBER 	COMPANY_NAME 	YEAR_END_DATE 	Turnover
22705 	AA 	30/09/10 	420,000
22705 	AA 	30/09/09 	406,000
113560 	BB 	30/06/19 	474,000
192761 	CC 	31/01/19 	796,000
192761 	CC 	31/01/18 	909,000
192761 	CC 	31/01/17 	788,000
5625107 	DD 	30/06/19 	3,254,002
5625107 	DD 	30/06/18 	1,840,436

All_companies$count <-0
while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1
+ {All_companies$count=All_companies$count+1}

I want to find out many times each company has appeared in the dataframe and the average of the turnover for the years. Like company AA appears twice and average turnover is 413,000.

'All_companies' is the name of the dataframe.

In the end apologies for not being more clear the first time around and of course many thanks for your help in advance.

Kind regards


Ahson

On 21 July 2020 at 18:41 Bert Gunter <bgunter.4567 at gmail.com> wrote:

What language are you programming in? -- it certainly isn't R.

I suggest that you stop what you're doing and go through an R tutorial or two before proceeding. This list cannot serve as a substitute for doing such homework (is this homework, btw? -- that's off topic here) nor can we provide such tutorials.

I'm pretty sure the answer is quite simple, though it's a bit unclear as you did not provide a reprex (see the posting guide linked below for how to post here). However, I see no purpose in my blurting it out when you do not seem aware of even the most basic R constructs -- e.g. see ?while. Of course, others may disagree and provide you what you seek.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


From percent||101 @end|ng |rom gm@||@com  Wed Jul 22 19:18:12 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Wed, 22 Jul 2020 19:18:12 +0200
Subject: [R] Logo or text in a plot
Message-ID: <CAB-TgNsTvhsg9sLie=cSyhgM57pnj3JG3hV+bETOodeM1CsuWw@mail.gmail.com>

Hi all,

I want to add an image on my plot or a text if not possible

getSymbols("APPL", from="2020-01-01")
getSymbols("QQQQ",from="2020-01-01")
library(grid)

ret <- na.omit(CalculateReturns(cbind(Cl(AAPL), Cl(QQQQ))))  # same as
Cl(AAPL)/lag(Cl(AAPL)) - 1)*100
chart.CumReturns(ret,wealth.index = FALSE, main = "Buy & Hold
performance",legend.loc = "topright")


I have seen some options on plot but here I am using chart.CumReturns and I
am not able to insert one image or "free text"

Can anyone guide me

	[[alternative HTML version deleted]]


From percent||101 @end|ng |rom gm@||@com  Wed Jul 22 19:20:08 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Wed, 22 Jul 2020 19:20:08 +0200
Subject: [R] Reading help functions
Message-ID: <CAB-TgNtE_h62a83rbS5EA-NmJJ5B9US=jTY-invMt6kLzAZV-g@mail.gmail.com>

Hi all,

I am trying all time to use ?? help function but most of the time it cost
me a lot to understand what they are saying, explaining, there is some
manual to step by step how to interpret help guides in R.

I hope you can understand me because of my english its not the best also.

Many thanks

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jul 23 01:37:15 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 22 Jul 2020 16:37:15 -0700
Subject: [R] viewing, editing and saving an RDATA file
In-Reply-To: <d14d5a84-0ee1-15ba-f378-5574b84fe651@atsu.edu>
References: <CA+14-QEg_v8+dM9omFPeE4NrT5FWY0VgJDUrbtOAMZd+2q5TdA@mail.gmail.com>
 <CA+8X3fWFZ5jU_FDVJzx4+TNruvaqhA9KGa8t0fDSGVcAk7iAGw@mail.gmail.com>
 <d14d5a84-0ee1-15ba-f378-5574b84fe651@atsu.edu>
Message-ID: <CAGxFJbS+piwGztrABexF=Ay1J8mYWXAokvh9A6y4XwO0+CT44w@mail.gmail.com>

Inline

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jul 22, 2020 at 2:29 PM Robert Baer <rbaer at atsu.edu> wrote:

> You may misunderstand how RData files work.  Note that RData files are
> not necessarily JUST a single variable unless they were explicitly
> written to store a single variable only.
>
> If you save a single variable (a dataframe, for example) named 'mydata'
> with save(mydata, file = "saveddata.RData") and then load the variable
> back into a new R session with y  <- load("saveddata.RData"), your data
> will still be contained in a variable named 'mydata',  not renamed  y.
>

Yes indeedy. In fact, y will be:
Value

A character vector of the names of objects created, invisibly.

>
> Look at ?load and ?save
>

Which should have been the OP's first port of call....

>
> On 7/22/2020 5:47 AM, Jim Lemon wrote:
> > Hi Jason,
> > I assume that you actually have "WVS.RData" in your working directory
> > when you try to load it. Otherwise you will get an error message. If
> > you don't get an error message when you do this:
> >
> > load("WVS.RData")
> >
> > there will be a new object in your workspace. So if you want to see
> > what the object is, try this:
> >
> > objects()
> > load("WVS.RData")
> > objects()
> >
> > Unless you have already run the "load" command, there will be a new
> > object in the list. That is what you're looking for. Say that object
> > is named "x". You can look at the first part of it with:
> >
> > head(x)
> >
> > and maybe do some basic editing with:
> >
> > edit(x)
> >
> > Good luck.
> >
> > Jim
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Jul 23 01:38:23 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 22 Jul 2020 16:38:23 -0700
Subject: [R] how to view and edit this RData file
In-Reply-To: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
References: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
Message-ID: <d1b40278-0645-4ca5-a28c-ecb55ae58721@comcast.net>


On 7/22/20 12:35 AM, Jason Levy wrote:
> Dear R Scholars
>
> Many R users have successfully loaded and used the attached WVS RDATA file
> into my R program. I would just would like help viewing, editing etc.
>
> I wanted to include the actual RData file (which was not attached
> previously)
>
> I can successfully load the RData file:
> load('WVS.RData')
>
> https://drive.google.com/drive/u/1/folders/15QhSBkwEfHLqgZznoaqodWglXuxV4f7P

In a clean session I executed this:


load("/home/david/Downloads/WVS RData file/WVS.RData")

ls()

#[1] "final.ord"


 ?str(final.ord)
# num [1:82992, 1:74] 2 2 1 2 2 1 2 1 2 2 ...
#- attr(*, "dimnames")=List of 2
#..$ : NULL

# ..$ : chr [1:74] "v12" "v13" "v14" "v15" ...


So it appears to be a matrix with 74 columns and 82,992 rows.

>
> I would like help on how to view, edit and save this 2.461 MB RData file.
> I am at my wits end. I apologize for asking such a basic question. I
> appreciate your help in advance
>
> 	[[alternative HTML version deleted]]


You have repeatedly posted in HTML. Gmail makes it easy to post in palin 
text if you are using their client. Please read the Posting Guide and I 
would suggest also reading and working through the examples in a good 
introductory tutorial on Rhelp. The "Introduction to R" that ships with 
all copies of R should have illustrated using both ls() and str().

-- 

David


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 23 01:42:48 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 22 Jul 2020 19:42:48 -0400
Subject: [R] Reading help functions
In-Reply-To: <CAB-TgNtE_h62a83rbS5EA-NmJJ5B9US=jTY-invMt6kLzAZV-g@mail.gmail.com>
References: <CAB-TgNtE_h62a83rbS5EA-NmJJ5B9US=jTY-invMt6kLzAZV-g@mail.gmail.com>
Message-ID: <fa228c44-af66-9096-6f22-8979b9ce4fcd@gmail.com>

On 22/07/2020 1:20 p.m., Pedro p?ramo wrote:
> Hi all,
> 
> I am trying all time to use ?? help function but most of the time it cost
> me a lot to understand what they are saying, explaining, there is some
> manual to step by step how to interpret help guides in R.
> 
> I hope you can understand me because of my english its not the best also.
> 

The manuals that come with R give more of an overview than the 
individual help pages.  "An Introduction to R" is the basic 
introduction.  You should read that first, then go to the help pages 
when you need detailed technical information about a particular function.

To see the manuals, run help.start() and click on one of the links near 
the top of the page.

If your problems are with help pages from contributed packages, then you 
should look for vignettes in the package.  Not all packages have them, 
but it's a sign of a lack of interest in documentation if they don't: 
and I'd recommend avoiding such packages.

To see the vignettes for "somepackage", run

  browseVignettes(package = "somepackage")

Duncan Murdoch


From @@r@h@go@|ee @end|ng |rom gm@||@com  Thu Jul 23 01:53:53 2020
From: @@r@h@go@|ee @end|ng |rom gm@||@com (Sarah Goslee)
Date: Wed, 22 Jul 2020 19:53:53 -0400
Subject: [R] Looping thorugh dataframe
In-Reply-To: <1172360604.547623.1595426692920@mail2.virginmedia.com>
References: <1172360604.547623.1595426692920@mail2.virginmedia.com>
Message-ID: <CAM_vjukh02MQ5UPai7JsU-hXy4veuT-Gdk1pyGiT_mOjVyZCpA@mail.gmail.com>

Hi,

Your sample code suggests that you don't yet understand how R works,
and might benefit from a tutorial or two. However, your verbal
description of what you want is quite straightforward. Here's a
R-style way to count the number of times each company appears, and to
get the mean value of Turnover for each company:


All_companies <- read.table(text =
"COMPANY_NUMBER  COMPANY_NAME    YEAR_END_DATE   Turnover
22705   AA      30/09/10        420000
22705   AA      30/09/09        406000
113560  BB      30/06/19        474000
192761  CC      31/01/19        796000
192761  CC      31/01/18        909000
192761  CC      31/01/17        788000
5625107         DD      30/06/19        3254002
5625107         DD      30/06/18        1840436", header=TRUE)

table(All_companies$COMPANY_NAME)

AA BB CC DD
 2  1  3  2

aggregate(Turnover ~ COMPANY_NAME, data = All_companies, FUN = mean)

  COMPANY_NAME Turnover
1           AA   413000
2           BB   474000
3           CC   831000
4           DD  2547219


On Wed, Jul 22, 2020 at 7:36 PM e-mail ma015k3113 via R-help
<r-help at r-project.org> wrote:
>
> Bert, thanks for responding to my email. I do realise that newbie's like my can expect curt answers but not to worry. I am definitely learning 'R' and what I posted are also statements from R. The statements run perfectly well but don't do what I want them to do. My mistake I have posted sample data. Here is the data:
>
> COMPANY_NUMBER  COMPANY_NAME    YEAR_END_DATE   Turnover
> 22705   AA      30/09/10        420,000
> 22705   AA      30/09/09        406,000
> 113560  BB      30/06/19        474,000
> 192761  CC      31/01/19        796,000
> 192761  CC      31/01/18        909,000
> 192761  CC      31/01/17        788,000
> 5625107         DD      30/06/19        3,254,002
> 5625107         DD      30/06/18        1,840,436
>
> All_companies$count <-0
> while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1
> + {All_companies$count=All_companies$count+1}
>
> I want to find out many times each company has appeared in the dataframe and the average of the turnover for the years. Like company AA appears twice and average turnover is 413,000.
>
> 'All_companies' is the name of the dataframe.
>
> In the end apologies for not being more clear the first time around and of course many thanks for your help in advance.
>
> Kind regards
>
>
> Ahson
>
> On 21 July 2020 at 18:41 Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> What language are you programming in? -- it certainly isn't R.
>
> I suggest that you stop what you're doing and go through an R tutorial or two before proceeding. This list cannot serve as a substitute for doing such homework (is this homework, btw? -- that's off topic here) nor can we provide such tutorials.
>
> I'm pretty sure the answer is quite simple, though it's a bit unclear as you did not provide a reprex (see the posting guide linked below for how to post here). However, I see no purpose in my blurting it out when you do not seem aware of even the most basic R constructs -- e.g. see ?while. Of course, others may disagree and provide you what you seek.
>


-- 
Sarah Goslee (she/her)
http://www.numberwright.com


From jr@| @end|ng |rom po@teo@no  Thu Jul 23 02:34:35 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 23 Jul 2020 02:34:35 +0200
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
Message-ID: <20200723003435.GA22775@posteo.no>

On 2020-07-22 16:08 -0700, David Winsemius wrote:
| On 7/22/20 3:43 PM, Neha gupta wrote:
| | Hello,
| | 
| | I get the following error when I use 
| | the ROSE class balancing method but 
| | when I use other methods like SMOTE, 
| | up, down, I do not get any error 
| | message.
| | 
| | Something is wrong; all the ROC 
| | metric values are missing:
| | 
| | ROC Sens Spec
| | Min. : NA Min. : NA Min. : NA
| | 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
| | Median : NA Median : NA Median : NA
| | Mean :NaN Mean :NaN Mean :NaN
| | 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
| | Max. : NA Max. : NA Max. : NA
| | 
| | library(DMwR)
| | d=readARFF("bughunter.arff")
| 
| After installing that package and 
| loading pkg:DMwR I get:
| 
| 	Error in readARFF("bughunter.arff") : could not find function "readARFF"

*Psst* ... I think this is 
farff::readARFF ... Where is 
"bughunter.arff" from?

| | 	[[alternative HTML version deleted]]
| 
| Since you also posted in HTML, I 
| suggest you read the Posting Guide, 
| restart and R session and post a 
| reproducible example that loads all 
| needed packages and data.

Hear, hear

| | index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)

Maybe this is 
caret::createDataPartition?

| | tr <- d[index, ]
| | 
| | ts <- d[-index, ]
| | 
| | boot3 <- trainControl(method = "repeatedcv", number=10,
| | repeats=10,classProbs = TRUE,verboseIter = FALSE,

Also caret ... ?caret::trainControl

| | summaryFunction = twoClassSummary, sampling = "rose")

Missing ?(? also perhaps other params 
have fallen off here ?  The C looks like 
a paranthesis because of camel-case 
maybe ... hmmm ...

| | set.seed(30218)
| | 
| | ct <- train(`Bug class` ~ ., data = tr,
| | 	method = "pls",
| | 	metric = "AUC",
| | 	preProc = c("center", "scale", "nzv"),
| | 	trControl = boot3)
| | 
| | getTrainPerf(ct)
| 

V

r

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200723/c2f5b7dc/attachment.sig>

From wdun|@p @end|ng |rom t|bco@com  Thu Jul 23 02:38:26 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 22 Jul 2020 17:38:26 -0700
Subject: [R] Looping thorugh dataframe
In-Reply-To: <1172360604.547623.1595426692920@mail2.virginmedia.com>
References: <1172360604.547623.1595426692920@mail2.virginmedia.com>
Message-ID: <CAF8bMcatb72A37jfCxCHyHugD5kERVQbus1Q59Du_-OR=ppbmg@mail.gmail.com>

> library(dplyr, warn.conflicts=FALSE)
> d <- data.frame(Company=c("MATH","IFUL","SSI","MATH","MATH","SSI"), Turnover=c(2,3,5,7,9,11))
> d %>% group_by(Company) %>% summarize(Count=n(), MeanTurnover=mean(Turnover), TotalTurnover=sum(Turnover))
`summarise()` ungrouping output (override with `.groups` argument)
# A tibble: 3 x 4
  Company Count MeanTurnover TotalTurnover
  <chr>   <int>        <dbl>         <dbl>
1 IFUL        1            3             3
2 MATH        3            6            18
3 SSI         2            8            16

[The 'override with .groups' comment arose in a recent version of
dplyr.  It is a bit annoying.]

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Jul 22, 2020 at 4:36 PM e-mail ma015k3113 via R-help
<r-help at r-project.org> wrote:
>
> Bert, thanks for responding to my email. I do realise that newbie's like my can expect curt answers but not to worry. I am definitely learning 'R' and what I posted are also statements from R. The statements run perfectly well but don't do what I want them to do. My mistake I have posted sample data. Here is the data:
>
> COMPANY_NUMBER  COMPANY_NAME    YEAR_END_DATE   Turnover
> 22705   AA      30/09/10        420,000
> 22705   AA      30/09/09        406,000
> 113560  BB      30/06/19        474,000
> 192761  CC      31/01/19        796,000
> 192761  CC      31/01/18        909,000
> 192761  CC      31/01/17        788,000
> 5625107         DD      30/06/19        3,254,002
> 5625107         DD      30/06/18        1,840,436
>
> All_companies$count <-0
> while All_companies$COMPANY_NAME == All_companies$COMPANY_NAME + 1
> + {All_companies$count=All_companies$count+1}
>
> I want to find out many times each company has appeared in the dataframe and the average of the turnover for the years. Like company AA appears twice and average turnover is 413,000.
>
> 'All_companies' is the name of the dataframe.
>
> In the end apologies for not being more clear the first time around and of course many thanks for your help in advance.
>
> Kind regards
>
>
> Ahson
>
> On 21 July 2020 at 18:41 Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> What language are you programming in? -- it certainly isn't R.
>
> I suggest that you stop what you're doing and go through an R tutorial or two before proceeding. This list cannot serve as a substitute for doing such homework (is this homework, btw? -- that's off topic here) nor can we provide such tutorials.
>
> I'm pretty sure the answer is quite simple, though it's a bit unclear as you did not provide a reprex (see the posting guide linked below for how to post here). However, I see no purpose in my blurting it out when you do not seem aware of even the most basic R constructs -- e.g. see ?while. Of course, others may disagree and provide you what you seek.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @rr@ypro|||e @end|ng |rom y@hoo@com  Wed Jul 22 23:14:10 2020
From: @rr@ypro|||e @end|ng |rom y@hoo@com (array chip)
Date: Wed, 22 Jul 2020 21:14:10 +0000 (UTC)
Subject: [R] How to generate this type of scatter plots in R
References: <663032042.5728737.1595452450306.ref@mail.yahoo.com>
Message-ID: <663032042.5728737.1595452450306-7586@mail.yahoo.com>


Hello everyone,

I saw this scatterplots from a paper and thought it looked very nice:

https://drive.google.com/file/d/1V7F1gq-J_GIFDOrJs00hwGyXUqCZ_xwa/view?usp=sharing

It was similar to stripchart() with 'jitter' method, but it has a special pattern of aligning points which made it look nicer than standard stripchart().

Does anyone know if there is a package in R that can do this kind of plots?

Thanks,

John


From jr@| @end|ng |rom po@teo@no  Thu Jul 23 02:54:29 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 23 Jul 2020 02:54:29 +0200
Subject: [R] how to view and edit this RData file
In-Reply-To: <d1b40278-0645-4ca5-a28c-ecb55ae58721@comcast.net>
References: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
 <d1b40278-0645-4ca5-a28c-ecb55ae58721@comcast.net>
Message-ID: <20200723005429.GB22775@posteo.no>

On 2020-07-22 16:38 -0700, David Winsemius wrote:
> On 7/22/20 12:35 AM, Jason Levy wrote:
> > Dear R Scholars
> > 
> > Many R users have successfully loaded and used the attached WVS RDATA file
> > into my R program. I would just would like help viewing, editing etc.
> > 
> > I wanted to include the actual RData file (which was not attached
> > previously)
> > 
> > I can successfully load the RData file:
> > load('WVS.RData')
> > 
> > https://drive.google.com/drive/u/1/folders/15QhSBkwEfHLqgZznoaqodWglXuxV4f7P
> 
> In a clean session I executed this:
> 
> load("/home/david/Downloads/WVS RData file/WVS.RData")
> ls()
> #[1] "final.ord"
> 
> ?str(final.ord)
> # num [1:82992, 1:74] 2 2 1 2 2 1 2 1 2 2 ...
> #- attr(*, "dimnames")=List of 2
> #..$ : NULL
> 
> # ..$ : chr [1:74] "v12" "v13" "v14" "v15" ...
> 
> So it appears to be a matrix with 74 
> columns and 82,992 rows.
> 
> > I would like help on how to view, edit and save this 2.461 MB RData file.
> > I am at my wits end. I apologize for asking such a basic question. I
> > appreciate your help in advance
> > 
> > 	[[alternative HTML version deleted]]
> 
> You have repeatedly posted in HTML. 
> Gmail makes it easy to post in palin 
> text if you are using their client. 
> Please read the Posting Guide and I 
> would suggest also reading and working 
> through the examples in a good 
> introductory tutorial on Rhelp. The 
> "Introduction to R" that ships with 
> all copies of R should have 
> illustrated using both ls() and 
> str().

On 2020-07-22 20:47 +1000, Jim Lemon wrote:
> Hi Jason,
> I assume that you actually have 
> "WVS.RData" in your working directory 
> when you try to load it. Otherwise you 
> will get an error message. If you 
> don't get an error message when you do 
> this:

Dear Jason,

Just re-iterating Jim and David's 
answers:

> objects()
character(0)
> load("WVS.RData")
> objects()
[1] "final.ord"
> str(final.ord)
 num [1:82992, 1:74] 2 2 1 2 2 1 2 1 2 2 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:74] "v12" "v13" "v14" "v15" ...
> typeof(final.ord)
[1] "double"
> dim(final.ord)
[1] 82992    74
> options(width=40)
> table(final.ord)
final.ord
      1       2       3       4       5
2159651 1649054  727911  385054  232812
      6       7       8       9      10
 118567   99269   92795   60633  111955
     11
  36141
> final.ord.1 <- edit(final.ord)
> table(final.ord.1)
final.ord.1
      1       2       3       4       5
2159649 1649053  727911  385054  232812
      6       7       8       9      10
 118567   99269   92795   60633  111955
     11      42   1e+05
  36141       2       1
> save(final.ord.1, file="WVS.1.RData")

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200723/0168bfa2/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Thu Jul 23 03:19:30 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 23 Jul 2020 03:19:30 +0200
Subject: [R] Reading help functions
In-Reply-To: <fa228c44-af66-9096-6f22-8979b9ce4fcd@gmail.com>
References: <CAB-TgNtE_h62a83rbS5EA-NmJJ5B9US=jTY-invMt6kLzAZV-g@mail.gmail.com>
 <fa228c44-af66-9096-6f22-8979b9ce4fcd@gmail.com>
Message-ID: <20200723011930.GC22775@posteo.no>

On 2020-07-22 19:42 -0400, Duncan Murdoch wrote:
> On 22/07/2020 1:20 p.m., Pedro p?ramo wrote:
> > Hi all,
> > 
> > I am trying all time to use ?? help 
> > function but most of the time it 
> > cost me a lot to understand what 
> > they are saying, explaining, there 
> > is some manual to step by step how 
> > to interpret help guides in R.
> > 
> > I hope you can understand me because 
> > of my english its not the best 
> > also.
> 
> The manuals that come with R give more 
> of an overview than the individual 
> help pages.  "An Introduction to R" is 
> the basic introduction.  You should 
> read that first, then go to the help 
> pages when you need detailed technical 
> information about a particular 
> function.
> 
> To see the manuals, run help.start() 
> and click on one of the links near the 
> top of the page.
> 
> If your problems are with help pages 
> from contributed packages, then you 
> should look for vignettes in the 
> package.  Not all packages have them, 
> but it's a sign of a lack of interest 
> in documentation if they don't: and 
> I'd recommend avoiding such packages.
> 
> To see the vignettes for 
> "somepackage", run 
> 
>  browseVignettes(package = "somepackage")

Dear Pedro,

I also use ?? alot.  Recently I found it 
really useful to list the functions of a 
recently installed package somepackage, 
using these to lines:

	library(somepackage)
	ls.str('package:somepackage')

I just put them in a script to run it 
quickly in the shell like this:

	#!/usr/bin/env Rscript
	pkg <- commandArgs(trailingOnly=TRUE)[1]
	
	text <-
	  paste0("library(",
	         pkg,
	         "); ls.str('package:",
	         pkg,
	         "')")
	eval(parse(text=text))

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200723/d7a871da/attachment.sig>

From r@oknz @end|ng |rom gm@||@com  Thu Jul 23 05:18:31 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Thu, 23 Jul 2020 15:18:31 +1200
Subject: [R] how to view and edit this RData file
In-Reply-To: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
References: <CA+14-QETyyyVX2UQ+1d6yH98=zU3R5bCYh_Eddim1rx79e-kdw@mail.gmail.com>
Message-ID: <CABcYAdL-c4Hs6yANNWb2Abux2MxH+8RV9EjnJu-W-UFiQSd1kg@mail.gmail.com>

> load("WVS.RData", verbose=TRUE)
Loading objects:
  final.ord
> str(final.ord)
 num [1:82992, 1:74] 2 2 1 2 2 1 2 1 2 2 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:74] "v12" "v13" "v14" "v15" ...

When using load() with unfamiliar data,
verbose=TRUE is your friend.
Note that this is a numeric matrix, not a data frame.

I do hope you have been told what the column names
mean because the existing names suggest only that this
may be a selection from a larger collection.

On Wed, 22 Jul 2020 at 19:40, Jason Levy <lev7379 at gmail.com> wrote:

> Dear R Scholars
>
> Many R users have successfully loaded and used the attached WVS RDATA file
> into my R program. I would just would like help viewing, editing etc.
>
> I wanted to include the actual RData file (which was not attached
> previously)
>
> I can successfully load the RData file:
> load('WVS.RData')
>
>
> https://drive.google.com/drive/u/1/folders/15QhSBkwEfHLqgZznoaqodWglXuxV4f7P
>
>
> I would like help on how to view, edit and save this 2.461 MB RData file.
> I am at my wits end. I apologize for asking such a basic question. I
> appreciate your help in advance
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Jul 23 06:31:05 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 23 Jul 2020 14:31:05 +1000
Subject: [R] How to generate this type of scatter plots in R
In-Reply-To: <663032042.5728737.1595452450306-7586@mail.yahoo.com>
References: <663032042.5728737.1595452450306.ref@mail.yahoo.com>
 <663032042.5728737.1595452450306-7586@mail.yahoo.com>
Message-ID: <CA+8X3fXY7aPdF6VXHsAYdrbOPqZHe33r7EQUasgBJXfpX6-hGg@mail.gmail.com>

Hi John,
Perhaps "dendroPlot" in the plotrix package?

JIm

On Thu, Jul 23, 2020 at 11:00 AM array chip via R-help
<r-help at r-project.org> wrote:
>
>
> Hello everyone,
>
> I saw this scatterplots from a paper and thought it looked very nice:
>
> https://drive.google.com/file/d/1V7F1gq-J_GIFDOrJs00hwGyXUqCZ_xwa/view?usp=sharing
>
> It was similar to stripchart() with 'jitter' method, but it has a special pattern of aligning points which made it look nicer than standard stripchart().
>
> Does anyone know if there is a package in R that can do this kind of plots?
>
> Thanks,
>
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @rr@ypro|||e @end|ng |rom y@hoo@com  Wed Jul 22 07:23:57 2020
From: @rr@ypro|||e @end|ng |rom y@hoo@com (array chip)
Date: Wed, 22 Jul 2020 05:23:57 +0000 (UTC)
Subject: [R] how to generate this kind of graph
References: <2144390390.5306128.1595395437392.ref@mail.yahoo.com>
Message-ID: <2144390390.5306128.1595395437392-7664@mail.yahoo.com>


Hello everyone,

I saw this scatterplots from a paper and thought it looked very nice:

https://drive.google.com/file/d/1V7F1gq-J_GIFDOrJs00hwGyXUqCZ_xwa/view?usp=sharing

It was similar to stripchart() with 'jitter' method, but it has a special pattern of aligning points which made it look nicer than standard stripchart().

Does anyone know if there is a package in R that can do this kind of plots?

Thanks,

John


From gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de  Thu Jul 23 08:42:51 2020
From: gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de (Gerrit Eichner)
Date: Thu, 23 Jul 2020 08:42:51 +0200
Subject: [R] how to generate this kind of graph
In-Reply-To: <2144390390.5306128.1595395437392-7664@mail.yahoo.com>
References: <2144390390.5306128.1595395437392.ref@mail.yahoo.com>
 <2144390390.5306128.1595395437392-7664@mail.yahoo.com>
Message-ID: <d2181251-f5de-02af-596b-6ae5b0428b2f@math.uni-giessen.de>

Hi, John,

look for the package beeswarm.

  Regards  --  Gerrit

---------------------------------------------------------------------
Dr. Gerrit Eichner                   Mathematical Institute, Room 212
gerrit.eichner at math.uni-giessen.de   Justus-Liebig-University Giessen
Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
http://www.uni-giessen.de/eichner
---------------------------------------------------------------------

Am 22.07.2020 um 07:23 schrieb array chip via R-help:
> 
> Hello everyone,
> 
> I saw this scatterplots from a paper and thought it looked very nice:
> 
> https://drive.google.com/file/d/1V7F1gq-J_GIFDOrJs00hwGyXUqCZ_xwa/view?usp=sharing
> 
> It was similar to stripchart() with 'jitter' method, but it has a special pattern of aligning points which made it look nicer than standard stripchart().
> 
> Does anyone know if there is a package in R that can do this kind of plots?
> 
> Thanks,
> 
> John
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From drj|m|emon @end|ng |rom gm@||@com  Thu Jul 23 09:57:34 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 23 Jul 2020 17:57:34 +1000
Subject: [R] Playing a music file in R
In-Reply-To: <CAEPHqhYWSxWKg9UhRfOVdWzxk4kXTZpiCNquk20iecKrNoQ3NQ@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
 <CA+8X3fV5Or3yGaJtvxw75jU2Es1yfzF55ROkeQEE6bd99u4JyA@mail.gmail.com>
 <CAEPHqhYWSxWKg9UhRfOVdWzxk4kXTZpiCNquk20iecKrNoQ3NQ@mail.gmail.com>
Message-ID: <CA+8X3fU8ruRaGoSSu4RXvNXLFYBRw=+eQdAJUThYtiRN_oHyhg@mail.gmail.com>

Thie "system" command in R takes the first argument and passes that to
the shell in which R is running.
1) I run R in the bash shell under Fedora Linux version 30
2) I have installed "mplayer" as an audio/visual player that can be
called from the bash shell
3) The command I pass says "Start the mplayer program using the first
argument as the file to process.

One method is to find the easiest way to play an audio/visual file on
your system and then call it from R using "system".
Other ways using R packages have been suggested by other respondents.

Jim

On Thu, Jul 23, 2020 at 5:26 PM Vahid Borji <vahid.borji65 at gmail.com> wrote:
>
> Dear Jim,
>
> Thank you for your answer.
>
> I have a question for you.
>
> This is your code: system("mplayer /home/jim/songs/bimbo_soul.mp3",
>  wait=FALSE,ignore.stdout=TRUE)
>
> 1. Which part of your code is related to call a music player?
>
> 2. Which part is related to call a music file?
>
> I want to do this on my laptop, so I need to understand your code (the answer to the above questions).
>
> Regards,
> Vahid
>
>
> On Wed, Jul 22, 2020 at 1:45 AM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Vahid,
>> The following command:
>>
>> system("mplayer /home/jim/songs/bimbo_soul.mp3",
>>  wait=FALSE,ignore.stdout=TRUE)
>>
>> works fine for me. Of course you'll have to specify a music player and
>> music file that you have...
>>
>> Jim
>>
>> On Wed, Jul 22, 2020 at 4:02 AM Vahid Borji <vahid.borji65 at gmail.com> wrote:
>> >
>> > Hello my R friends,
>> >
>> > How can we call a music file from our laptop (for example from desktop) and
>> > play it in R? Could you please give me an explicit example by writing
>> > commands in R. Is it necessary for our music file to be in a specific
>> > format? If yes, which format it has to be?
>> >
>> > Thank you in advance
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Thu Jul 23 10:32:47 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 23 Jul 2020 09:32:47 +0100
Subject: [R] Reading help functions
In-Reply-To: <CAB-TgNtE_h62a83rbS5EA-NmJJ5B9US=jTY-invMt6kLzAZV-g@mail.gmail.com>
References: <CAB-TgNtE_h62a83rbS5EA-NmJJ5B9US=jTY-invMt6kLzAZV-g@mail.gmail.com>
Message-ID: <3efe7fd2-8b8b-bf59-e661-547e3b5d8ef8@dewey.myzen.co.uk>

Dear Pedro

If you prefer reading in Spanish which from your name may be the case 
then if you go to CRAN, click on Documentation | Contributed you will 
find some documentation in Spanish including several aimed at beginners. 
There are some in Portuguese as well if I have mis-interpreted your name.

Of course ultimately you may prefer to read the documents in English 
because the program help and vignettes are usually in English and 
familiarity with the English terminology may help.

Michael

On 22/07/2020 18:20, Pedro p?ramo wrote:
> Hi all,
> 
> I am trying all time to use ?? help function but most of the time it cost
> me a lot to understand what they are saying, explaining, there is some
> manual to step by step how to interpret help guides in R.
> 
> I hope you can understand me because of my english its not the best also.
> 
> Many thanks
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Thu Jul 23 10:36:27 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 23 Jul 2020 09:36:27 +0100
Subject: [R] Question about citing R packages in an academic paper
In-Reply-To: <VI1PR04MB5262D7508181F768B6EECA0DA1790@VI1PR04MB5262.eurprd04.prod.outlook.com>
References: <VI1PR04MB5262D7508181F768B6EECA0DA1790@VI1PR04MB5262.eurprd04.prod.outlook.com>
Message-ID: <90f9877e-b8fa-deef-af9f-0bbfc38c1ff5@dewey.myzen.co.uk>

Dear Medhi

It is good that you are going to cite the packages properly. I do not 
think it matters too much whether they are in the article itself or in 
the supplementary material, the important thing is that they are there. 
You do not have any legal obligation to cite them, as far as I know 
although I am not a lawyer, but it is a kindness to the authors.

Michael

On 22/07/2020 06:26, Dr. Mehdi Dadkhah wrote:
> Hi,
> I hope you are doing well!
> 
> I have a question. I and my colleagues wrote a paper by using R language and its packages. We also used some tutorials. We have words count limitation for our paper. In early version of paper, I cited all packages in the reference list of paper (my paper will be published in an academic journal). After that, we had to keep references to tutorials in the reference list and remove reference to R and its packages (I strictly should fit paper to 2000 words). We created an online appendix and listed all packages which we used. Some packages are related to paper. For example, when i used command 'citation()'  in R console for package "tidytext", R informed me that i should cite such package as this:
> 
> 
> Silge, J., & Robinson, D. (2016). tidytext: Text Mining and Analysis Using Tidy Data Principles in R. JOSS, 1(3). https://doi.org/10.21105/joss.00037
> 
> Now, all packages and their related papers are not in the reference list of paper, but they will be available in an online appendix in the journal website. Is such practice OK or should I cite all packages in the reference list?
> I attached online appendix. We will submit our paper to a journal soon.
> Should I cite papers which are related to packages in the reference list? if I do not cite, i will face with permission problem regard to usage of package?
> 
> Many thanks!
> With best regards,
> 
> 
> Dr. Mehdi Dadkhah
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From er|cjberger @end|ng |rom gm@||@com  Thu Jul 23 10:42:31 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 23 Jul 2020 11:42:31 +0300
Subject: [R] Reading help functions
In-Reply-To: <3efe7fd2-8b8b-bf59-e661-547e3b5d8ef8@dewey.myzen.co.uk>
References: <CAB-TgNtE_h62a83rbS5EA-NmJJ5B9US=jTY-invMt6kLzAZV-g@mail.gmail.com>
 <3efe7fd2-8b8b-bf59-e661-547e3b5d8ef8@dewey.myzen.co.uk>
Message-ID: <CAGgJW76nVZs-bfFQLpamDoJWZN8K=BHie2W3fSsUjZufr6Rrdw@mail.gmail.com>

Hi Pedro,
Reading R help pages definitely takes practice.
Here's a tip: when you bring up the help page, scroll down to the bottom to
see if there are examples (there usually are.)
I find that seeing examples often provides enough information to let you
figure out what you need to do.

HTH,
Eric


On Thu, Jul 23, 2020 at 11:33 AM Michael Dewey <lists at dewey.myzen.co.uk>
wrote:

> Dear Pedro
>
> If you prefer reading in Spanish which from your name may be the case
> then if you go to CRAN, click on Documentation | Contributed you will
> find some documentation in Spanish including several aimed at beginners.
> There are some in Portuguese as well if I have mis-interpreted your name.
>
> Of course ultimately you may prefer to read the documents in English
> because the program help and vignettes are usually in English and
> familiarity with the English terminology may help.
>
> Michael
>
> On 22/07/2020 18:20, Pedro p?ramo wrote:
> > Hi all,
> >
> > I am trying all time to use ?? help function but most of the time it cost
> > me a lot to understand what they are saying, explaining, there is some
> > manual to step by step how to interpret help guides in R.
> >
> > I hope you can understand me because of my english its not the best also.
> >
> > Many thanks
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bret@chr @end|ng |rom x@4@||@n|  Thu Jul 23 13:18:50 2020
From: bret@chr @end|ng |rom x@4@||@n| (bretschr)
Date: Thu, 23 Jul 2020 13:18:50 +0200
Subject: [R] Playing a music file in R
In-Reply-To: <CAEPHqhY3iA8KX1_LHCLUmvhFJU7u6z14Us2k-PH+1CD9zch5EA@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
 <CF5D5614-A376-4B25-AAA9-43B2396AB5D5@xs4all.nl>
 <CAEPHqhY3iA8KX1_LHCLUmvhFJU7u6z14Us2k-PH+1CD9zch5EA@mail.gmail.com>
Message-ID: <AB896727-D406-49D7-99A9-3C17A29BB7FA@xs4all.nl>

Dear Vahid,


Re:

> I have a question regarding the following code:
> setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")   # path depends on your R version etc. 
> 
> How can I find the corresponding path on my laptop?


This line ...

setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")   

... is the path on my MacBook Air running Mac OS Mojave.
The structure of R on similar computers and OS versions will be the same, but I don't know if you use Windows or Linux.
Maybe an R-user working with Windows or Linux can help.
Success,

Franklin
----



Franklin Bretschneider
Dept of Biology
Utrecht University
f.bretschneider at uu.nl


From bret@chr @end|ng |rom x@4@||@n|  Thu Jul 23 13:20:38 2020
From: bret@chr @end|ng |rom x@4@||@n| (bretschr)
Date: Thu, 23 Jul 2020 13:20:38 +0200
Subject: [R] Playing a music file in R
In-Reply-To: <CAEPHqhY3iA8KX1_LHCLUmvhFJU7u6z14Us2k-PH+1CD9zch5EA@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
 <CF5D5614-A376-4B25-AAA9-43B2396AB5D5@xs4all.nl>
 <CAEPHqhY3iA8KX1_LHCLUmvhFJU7u6z14Us2k-PH+1CD9zch5EA@mail.gmail.com>
Message-ID: <2409287C-3170-4EE9-9E7C-C0228ED12890@xs4all.nl>

Dear Vahid,


Re:

> I have a question regarding the following code:
> setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")   # path depends on your R version etc. 
> 
> How can I find the corresponding path on my laptop?


This line ...

setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")   

... is the path on my MacBook Air running Mac OS Mojave.
The structure of R on similar computers and OS versions will be the same, but I don't know if you use Windows or Linux.
Maybe an R-user working with Windows or Linux can help.
Success,

Franklin
----



Franklin Bretschneider
Dept of Biology
Utrecht University
f.bretschneider at uu.nl


From drd@dkh@h @end|ng |rom out|ook@com  Thu Jul 23 10:41:07 2020
From: drd@dkh@h @end|ng |rom out|ook@com (Dr. Mehdi Dadkhah)
Date: Thu, 23 Jul 2020 08:41:07 +0000
Subject: [R] Question about citing R packages in an academic paper
In-Reply-To: <90f9877e-b8fa-deef-af9f-0bbfc38c1ff5@dewey.myzen.co.uk>
References: <VI1PR04MB5262D7508181F768B6EECA0DA1790@VI1PR04MB5262.eurprd04.prod.outlook.com>,
 <90f9877e-b8fa-deef-af9f-0bbfc38c1ff5@dewey.myzen.co.uk>
Message-ID: <VI1PR04MB5262D8C08CDBE978EBE20E04A1760@VI1PR04MB5262.eurprd04.prod.outlook.com>

Thank you very much!
With best regards

Dr. Mehdi Dadkhah
Email: drdadkhah at outlook.com
Website: drdadkhah.click

________________________________
From: Michael Dewey <lists at dewey.myzen.co.uk>
Sent: Thursday, July 23, 2020 1:06 PM
To: Dr. Mehdi Dadkhah <drdadkhah at outlook.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Question about citing R packages in an academic paper

Dear Medhi

It is good that you are going to cite the packages properly. I do not
think it matters too much whether they are in the article itself or in
the supplementary material, the important thing is that they are there.
You do not have any legal obligation to cite them, as far as I know
although I am not a lawyer, but it is a kindness to the authors.

Michael

On 22/07/2020 06:26, Dr. Mehdi Dadkhah wrote:
> Hi,
> I hope you are doing well!
>
> I have a question. I and my colleagues wrote a paper by using R language and its packages. We also used some tutorials. We have words count limitation for our paper. In early version of paper, I cited all packages in the reference list of paper (my paper will be published in an academic journal). After that, we had to keep references to tutorials in the reference list and remove reference to R and its packages (I strictly should fit paper to 2000 words). We created an online appendix and listed all packages which we used. Some packages are related to paper. For example, when i used command 'citation()'  in R console for package "tidytext", R informed me that i should cite such package as this:
>
>
> Silge, J., & Robinson, D. (2016). tidytext: Text Mining and Analysis Using Tidy Data Principles in R. JOSS, 1(3). https://doi.org/10.21105/joss.00037
>
> Now, all packages and their related papers are not in the reference list of paper, but they will be available in an online appendix in the journal website. Is such practice OK or should I cite all packages in the reference list?
> I attached online appendix. We will submit our paper to a journal soon.
> Should I cite papers which are related to packages in the reference list? if I do not cite, i will face with permission problem regard to usage of package?
>
> Many thanks!
> With best regards,
>
>
> Dr. Mehdi Dadkhah
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

--
Michael
http://www.dewey.myzen.co.uk/home.html

	[[alternative HTML version deleted]]


From cry@n @end|ng |rom b|ngh@mton@edu  Thu Jul 23 15:33:55 2020
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher W Ryan)
Date: Thu, 23 Jul 2020 09:33:55 -0400
Subject: [R] [External Email]  how to generate this kind of graph
In-Reply-To: <2144390390.5306128.1595395437392-7664@mail.yahoo.com>
References: <2144390390.5306128.1595395437392.ref@mail.yahoo.com>
 <2144390390.5306128.1595395437392-7664@mail.yahoo.com>
Message-ID: <CAM+rpYnke7UBMO+Ww6g87UShRNH_V-8JaoxUurnMJq_LbncQhw@mail.gmail.com>

You might like the beeswarm package.

--Chris Ryan
SUNY Upstate Medical University
and
Broome County Health Department

On Thu, Jul 23, 2020 at 1:15 AM array chip via R-help <r-help at r-project.org>
wrote:

>
> Hello everyone,
>
> I saw this scatterplots from a paper and thought it looked very nice:
>
>
> https://drive.google.com/file/d/1V7F1gq-J_GIFDOrJs00hwGyXUqCZ_xwa/view?usp=sharing
>
> It was similar to stripchart() with 'jitter' method, but it has a special
> pattern of aligning points which made it look nicer than standard
> stripchart().
>
> Does anyone know if there is a package in R that can do this kind of plots?
>
> Thanks,
>
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v@h|d@borj|65 @end|ng |rom gm@||@com  Thu Jul 23 15:36:15 2020
From: v@h|d@borj|65 @end|ng |rom gm@||@com (Vahid Borji)
Date: Thu, 23 Jul 2020 18:06:15 +0430
Subject: [R] Notes of music in R
Message-ID: <CAEPHqhZUrxXq5VOLs2+8y2qmzg1QXVxnw6KqrjWOAhLUPcSxig@mail.gmail.com>

Hellol,

I am trying to compose and play the start music of the serial "Game of
Thrones" in R. I would like to do it by making a vector of notes of this
music, then play this vector. I have read the following link, it is about
making "Jingle Bells" music:

https://towardsdatascience.com/compose-and-play-music-in-r-with-the-rmusic-package-b2afa90761ea

It used "Rmusic" package and play_music() function. I know "music" package
and playProgression() function also plays notes. Could someone please help
me for making notes of game of thrones and playing it in R?

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Jul 23 16:01:58 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 23 Jul 2020 16:01:58 +0200
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
Message-ID: <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>

Hello David, thanks for your reply. I have added the information.

library(caret)
library(farff)
library(DMwR)

d=readARFF("bughunter.arff")
dput( head( d, 30 ) )

index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)

tr <- d[index, ]

ts <- d[-index, ]

boot3 <- trainControl(method = "repeatedcv", number=10,
repeats=10,classProbs = TRUE,verboseIter = FALSE,

summaryFunction = twoClassSummary, sampling = "rose")

set.seed(30218)

ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC", preProc
= c("center", "scale", "nzv"), trControl = boot3)

getTrainPerf(ct)

On Thu, Jul 23, 2020 at 1:08 AM David Winsemius <dwinsemius at comcast.net>
wrote:

>
> On 7/22/20 3:43 PM, Neha gupta wrote:
> > Hello,
> >
> >
> > I get the following error when I use the ROSE class balancing method but
> > when I use other methods like SMOTE, up, down, I do not get any error
> > message.
> >
> >
> > Something is wrong; all the ROC metric values are missing:
> >
> > ROC Sens Spec
> >
> > Min. : NA Min. : NA Min. : NA
> >
> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
> >
> > Median : NA Median : NA Median : NA
> >
> > Mean :NaN Mean :NaN Mean :NaN
> >
> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
> >
> > Max. : NA Max. : NA Max. : NA
> >
> >
> >
> > library(DMwR)
> >
> > d=readARFF("bughunter.arff")
>
> After installing that package and loading pkg:DMwR I get:
>
>
> Error in readARFF("bughunter.arff") : could not find function "readARFF"
>
>
> Since you also posted in HTML, I suggest you read the Posting Guide,
> restart and R session and post a reproducible example that loads all
> needed packages and data.
>
> --
>
> David.
>
> >
> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
> >
> > tr <- d[index, ]
> >
> > ts <- d[-index, ]
> >
> > boot3 <- trainControl(method = "repeatedcv", number=10,
> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
> >
> > summaryFunction = twoClassSummary, sampling = "rose")
> >
> > set.seed(30218)
> >
> > ct <- train(`Bug class` ~ ., data = tr,
> >
> > method = "pls",
> >
> > metric = "AUC",
> >
> > preProc = c("center", "scale", "nzv"),
> >
> > trControl = boot3)
> >
> > getTrainPerf(ct)
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Jul 23 17:39:07 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 23 Jul 2020 08:39:07 -0700
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
Message-ID: <75ab5d0a-898f-3ffe-8223-86ed1e48e597@comcast.net>


On 7/23/20 7:01 AM, Neha gupta wrote:
>
> library(caret)
> library(farff)
> library(DMwR)
>
> d=readARFF("bughunter.arff")


Error in readARFF("bughunter.arff") :
 ? Assertion on 'path' failed: File does not exist: 'bughunter.arff'.


I say again:

> I suggest you read the Posting Guide,
> restart and R session and post a reproducible example that loads all
> needed packages and data.

-- 

David.


> dput( head( d, 30 ) )
>
> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
> tr <- d[index, ]
>
> ts <- d[-index, ]
>
> boot3 <- trainControl(method = "repeatedcv", number=10, 
> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
> summaryFunction = twoClassSummary, sampling = "rose")
>
> set.seed(30218)
>
> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = 
> "AUC", preProc = c("center", "scale", "nzv"), trControl = boot3)
>
> getTrainPerf(ct)
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Jul 23 18:34:36 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 23 Jul 2020 18:34:36 +0200
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
Message-ID: <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>

Hello David, file not found should be the path problem I guess. I just
forgot the pROC library, which I included here. These are all the libraries
I am using.

library(caret)
library(farff)
library(DMwR)
library(pROC)
library(pls)

setwd("C:/Users/PC/Documents")
d=readARFF("bughunter.arff")
dput( head( d, 30 ) )

index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)

tr <- d[index, ]

ts <- d[-index, ]

boot3 <- trainControl(method = "repeatedcv", number=10,
repeats=10,classProbs = TRUE,verboseIter = FALSE,

summaryFunction = twoClassSummary, sampling = "rose")

set.seed(30218)

ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC", preProc
= c("center", "scale", "nzv"), trControl = boot3)

getTrainPerf(ct)


<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
Virus-free.
www.avast.com
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

On Thu, Jul 23, 2020 at 4:01 PM Neha gupta <neha.bologna90 at gmail.com> wrote:

>
> Hello David, thanks for your reply. I have added the information.
>
> library(caret)
> library(farff)
> library(DMwR)
>
> d=readARFF("bughunter.arff")
> dput( head( d, 30 ) )
>
> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
> tr <- d[index, ]
>
> ts <- d[-index, ]
>
> boot3 <- trainControl(method = "repeatedcv", number=10,
> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
> summaryFunction = twoClassSummary, sampling = "rose")
>
> set.seed(30218)
>
> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC", preProc
> = c("center", "scale", "nzv"), trControl = boot3)
>
> getTrainPerf(ct)
>
> On Thu, Jul 23, 2020 at 1:08 AM David Winsemius <dwinsemius at comcast.net>
> wrote:
>
>>
>> On 7/22/20 3:43 PM, Neha gupta wrote:
>> > Hello,
>> >
>> >
>> > I get the following error when I use the ROSE class balancing method but
>> > when I use other methods like SMOTE, up, down, I do not get any error
>> > message.
>> >
>> >
>> > Something is wrong; all the ROC metric values are missing:
>> >
>> > ROC Sens Spec
>> >
>> > Min. : NA Min. : NA Min. : NA
>> >
>> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
>> >
>> > Median : NA Median : NA Median : NA
>> >
>> > Mean :NaN Mean :NaN Mean :NaN
>> >
>> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
>> >
>> > Max. : NA Max. : NA Max. : NA
>> >
>> >
>> >
>> > library(DMwR)
>> >
>> > d=readARFF("bughunter.arff")
>>
>> After installing that package and loading pkg:DMwR I get:
>>
>>
>> Error in readARFF("bughunter.arff") : could not find function "readARFF"
>>
>>
>> Since you also posted in HTML, I suggest you read the Posting Guide,
>> restart and R session and post a reproducible example that loads all
>> needed packages and data.
>>
>> --
>>
>> David.
>>
>> >
>> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>> >
>> > tr <- d[index, ]
>> >
>> > ts <- d[-index, ]
>> >
>> > boot3 <- trainControl(method = "repeatedcv", number=10,
>> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
>> >
>> > summaryFunction = twoClassSummary, sampling = "rose")
>> >
>> > set.seed(30218)
>> >
>> > ct <- train(`Bug class` ~ ., data = tr,
>> >
>> > method = "pls",
>> >
>> > metric = "AUC",
>> >
>> > preProc = c("center", "scale", "nzv"),
>> >
>> > trControl = boot3)
>> >
>> > getTrainPerf(ct)
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jul 23 19:42:55 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 23 Jul 2020 10:42:55 -0700
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
Message-ID: <CAGxFJbR76jWR_zh_88Xq9zR8o+asuhTzQy4XUPTW3P1=azC8gQ@mail.gmail.com>

Actually, you are using no libraries. You are using R *packages* .

Don't ask me why the call is library() and not package() -- I'm just
another worker bee.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 23, 2020 at 9:35 AM Neha gupta <neha.bologna90 at gmail.com> wrote:

> Hello David, file not found should be the path problem I guess. I just
> forgot the pROC library, which I included here. These are all the libraries
> I am using.
>
> library(caret)
> library(farff)
> library(DMwR)
> library(pROC)
> library(pls)
>
> setwd("C:/Users/PC/Documents")
> d=readARFF("bughunter.arff")
> dput( head( d, 30 ) )
>
> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
> tr <- d[index, ]
>
> ts <- d[-index, ]
>
> boot3 <- trainControl(method = "repeatedcv", number=10,
> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
> summaryFunction = twoClassSummary, sampling = "rose")
>
> set.seed(30218)
>
> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC",
> preProc
> = c("center", "scale", "nzv"), trControl = boot3)
>
> getTrainPerf(ct)
>
>
> <
> https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon
> >
> Virus-free.
> www.avast.com
> <
> https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link
> >
> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>
> On Thu, Jul 23, 2020 at 4:01 PM Neha gupta <neha.bologna90 at gmail.com>
> wrote:
>
> >
> > Hello David, thanks for your reply. I have added the information.
> >
> > library(caret)
> > library(farff)
> > library(DMwR)
> >
> > d=readARFF("bughunter.arff")
> > dput( head( d, 30 ) )
> >
> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
> >
> > tr <- d[index, ]
> >
> > ts <- d[-index, ]
> >
> > boot3 <- trainControl(method = "repeatedcv", number=10,
> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
> >
> > summaryFunction = twoClassSummary, sampling = "rose")
> >
> > set.seed(30218)
> >
> > ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC",
> preProc
> > = c("center", "scale", "nzv"), trControl = boot3)
> >
> > getTrainPerf(ct)
> >
> > On Thu, Jul 23, 2020 at 1:08 AM David Winsemius <dwinsemius at comcast.net>
> > wrote:
> >
> >>
> >> On 7/22/20 3:43 PM, Neha gupta wrote:
> >> > Hello,
> >> >
> >> >
> >> > I get the following error when I use the ROSE class balancing method
> but
> >> > when I use other methods like SMOTE, up, down, I do not get any error
> >> > message.
> >> >
> >> >
> >> > Something is wrong; all the ROC metric values are missing:
> >> >
> >> > ROC Sens Spec
> >> >
> >> > Min. : NA Min. : NA Min. : NA
> >> >
> >> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
> >> >
> >> > Median : NA Median : NA Median : NA
> >> >
> >> > Mean :NaN Mean :NaN Mean :NaN
> >> >
> >> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
> >> >
> >> > Max. : NA Max. : NA Max. : NA
> >> >
> >> >
> >> >
> >> > library(DMwR)
> >> >
> >> > d=readARFF("bughunter.arff")
> >>
> >> After installing that package and loading pkg:DMwR I get:
> >>
> >>
> >> Error in readARFF("bughunter.arff") : could not find function "readARFF"
> >>
> >>
> >> Since you also posted in HTML, I suggest you read the Posting Guide,
> >> restart and R session and post a reproducible example that loads all
> >> needed packages and data.
> >>
> >> --
> >>
> >> David.
> >>
> >> >
> >> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
> >> >
> >> > tr <- d[index, ]
> >> >
> >> > ts <- d[-index, ]
> >> >
> >> > boot3 <- trainControl(method = "repeatedcv", number=10,
> >> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
> >> >
> >> > summaryFunction = twoClassSummary, sampling = "rose")
> >> >
> >> > set.seed(30218)
> >> >
> >> > ct <- train(`Bug class` ~ ., data = tr,
> >> >
> >> > method = "pls",
> >> >
> >> > metric = "AUC",
> >> >
> >> > preProc = c("center", "scale", "nzv"),
> >> >
> >> > trControl = boot3)
> >> >
> >> > getTrainPerf(ct)
> >> >
> >> >       [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Thu Jul 23 20:19:12 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 23 Jul 2020 14:19:12 -0400
Subject: [R] [External] Re:  Playing a music file in R
In-Reply-To: <2409287C-3170-4EE9-9E7C-C0228ED12890@xs4all.nl>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
 <CF5D5614-A376-4B25-AAA9-43B2396AB5D5@xs4all.nl>
 <CAEPHqhY3iA8KX1_LHCLUmvhFJU7u6z14Us2k-PH+1CD9zch5EA@mail.gmail.com>
 <2409287C-3170-4EE9-9E7C-C0228ED12890@xs4all.nl>
Message-ID: <CAGx1TMBKe8xaFvACj3Mne8qAfFhxe+i_xteokzNrk3AHBiP+VQ@mail.gmail.com>

The R command
system.file()

tells you where the currently running version of R is located on your
machine and your operating system.

On the Macintosh it shows
> system.file()
[1] "/Library/Frameworks/R.framework/Resources/library/base"

You don't need to worry about the R version number, as R knows where
it is and gives you the location
of the currently running version.  You can now open a system directory
file (Finder on Mac, WindowsExplorer on Windows, etc)
and navigate up and down to what you are looking for.

Or, within R, you can navigate with .. and more directory statements,
thus the example from the original email

setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")
  # path depends on your R version etc.

would be written
tmp <- system.file("../../bin/play")
and the result is the correct location (if it is there).
You will get an empty string if it is not ther, but this will get you
started on where to look.
then you write

setWavPlayer(tmp)   # path depends on your R version etc.

On Thu, Jul 23, 2020 at 7:21 AM bretschr <bretschr at xs4all.nl> wrote:
>
> Dear Vahid,
>
>
> Re:
>
> > I have a question regarding the following code:
> > setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")   # path depends on your R version etc.
> >
> > How can I find the corresponding path on my laptop?
>
>
> This line ...
>
> setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")
>
> ... is the path on my MacBook Air running Mac OS Mojave.
> The structure of R on similar computers and OS versions will be the same, but I don't know if you use Windows or Linux.
> Maybe an R-user working with Windows or Linux can help.
> Success,
>
> Franklin
> ----
>
>
>
> Franklin Bretschneider
> Dept of Biology
> Utrecht University
> f.bretschneider at uu.nl
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Thu Jul 23 21:19:24 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 23 Jul 2020 21:19:24 +0200
Subject: [R] [External] Re:  Playing a music file in R
In-Reply-To: <CAGx1TMBKe8xaFvACj3Mne8qAfFhxe+i_xteokzNrk3AHBiP+VQ@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
 <CF5D5614-A376-4B25-AAA9-43B2396AB5D5@xs4all.nl>
 <CAEPHqhY3iA8KX1_LHCLUmvhFJU7u6z14Us2k-PH+1CD9zch5EA@mail.gmail.com>
 <2409287C-3170-4EE9-9E7C-C0228ED12890@xs4all.nl>
 <CAGx1TMBKe8xaFvACj3Mne8qAfFhxe+i_xteokzNrk3AHBiP+VQ@mail.gmail.com>
Message-ID: <20200723191924.GA144650@posteo.no>

On 2020-07-23 14:19 -0400, Richard M. Heiberger wrote:
> On Thu, Jul 23, 2020 at 7:21 AM bretschr <bretschr at xs4all.nl> wrote:
> >
> > Dear Vahid,
> >
> >
> > Re:
> >
> > > I have a question regarding the 
> > > following code:
> > > setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")   # path depends on your R version etc.
> > >
> > > How can I find the corresponding 
> > > path on my laptop?
> >
> >
> > This line ...
> >
> > setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")
> >
> > ... is the path on my MacBook Air 
> > running Mac OS Mojave.  The 
> > structure of R on similar computers 
> > and OS versions will be the same, 
> > but I don't know if you use Windows 
> > or Linux.  Maybe an R-user working 
> > with Windows or Linux can help.
> 
> The R command
> system.file()
> 
> tells you where the currently running 
> version of R is located on your 
> machine and your operating system.
> 
> On the Macintosh it shows
> > system.file()
> [1] "/Library/Frameworks/R.framework/Resources/library/base"
> 
> You don't need to worry about the R 
> version number, as R knows where it is 
> and gives you the location of the 
> currently running version.  You can 
> now open a system directory file 
> (Finder on Mac, WindowsExplorer on 
> Windows, etc) and navigate up and down 
> to what you are looking for.
> 
> Or, within R, you can navigate with .. 
> and more directory statements, thus 
> the example from the original email
> 
> setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")
>   # path depends on your R version etc.
> 
> would be written
> tmp <- system.file("../../bin/play")
> and the result is the correct location 
> (if it is there).
> You will get an empty string if it is 
> not ther, but this will get you 
> started on where to look.  then you 
> write
> 
> setWavPlayer(tmp)   # path depends on your R version etc.


Hello, I found you can use mpv (and 
mplayer) as well, instead of sox[1].  
There are many ways to install it[1] 
including various ways on mac.

	> system("whereis mpv")
	mpv: /usr/bin/mpv /etc/mpv /usr/include/mpv /usr/share/mpv /usr/share/man/man1/mpv.1.gz
	> tuneR::setWavPlayer("/usr/bin/mpv")
	> w <- tuneR::readWave(filename="rf_07.wav", from=0, to=1e6)
	> w
	
	Wave Object
	        Number of Samples:      1000001
	        Duration (seconds):     22.68
	        Samplingrate (Hertz):   44100
	        Channels (Mono/Stereo): Stereo
	        PCM (integer format):   TRUE
	        Bit (8/16/24/32/64):    16
	
	> tuneR::play(w)
	 (+) Audio --aid=1 (pcm_s16le 2ch 44100Hz)
	AO: [pulse] 44100Hz stereo 2ch s16
	A: 00:00:22 / 00:00:22 (98%)
	
	
	Exiting... (End of file)
	>
	> tuneR::setWavPlayer("/usr/bin/play")
	> tuneR::play(w)
	
	/tmp/RtmpadTOu6/tuneRtemp.wav:
	
	 File Size: 4.00M     Bit Rate: 1.41M
	  Encoding: Signed PCM
	  Channels: 2 @ 16-bit
	Samplerate: 44100Hz
	Replaygain: off
	  Duration: 00:00:22.68
	
	In:100%  00:00:22.68 [00:00:00.00] Out:1.00M [ -====|====- ] Hd:4.2 Clip:0
	Done.
	>


Best,
Rasmus

[1] http://sox.sourceforge.net/
[1] https://mpv.io/installation/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200723/6e16c546/attachment.sig>

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jul 23 22:10:59 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 23 Jul 2020 13:10:59 -0700
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <CAGxFJbR76jWR_zh_88Xq9zR8o+asuhTzQy4XUPTW3P1=azC8gQ@mail.gmail.com>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
 <CAGxFJbR76jWR_zh_88Xq9zR8o+asuhTzQy4XUPTW3P1=azC8gQ@mail.gmail.com>
Message-ID: <F8FDA76A-CBA1-44E8-A82D-9F04B3E18256@dcn.davis.ca.us>

The R Administration and Installation manual explains this nomenclature. OP _is_ typically using two libraries... the one installed with R and the "personal" library which contains the packages installed by the user. You retrieve packages from libraries using library(somepackage)

Of more relevance here is the fact that OP has yet again failed to read the Posting Guide, and appears to have attempted to send a disallowed attachment type through the mailing list and it has been removed from the message. Ordinarily I would recommend trying to use dput() to remove the need for the file, but in this case it may be best for the OP to send a link to the file stored on a file sharing website.

In any event, making the example reproducible is the responsibility of the p person asking the question. I highly recommend reading [1][2] and using [3] to verify that the plain text example actually runs up to the point where the error occurs.

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette) 


On July 23, 2020 10:42:55 AM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>Actually, you are using no libraries. You are using R *packages* .
>
>Don't ask me why the call is library() and not package() -- I'm just
>another worker bee.
>
>Bert Gunter
>
>"The trouble with having an open mind is that people keep coming along
>and
>sticking things into it."
>-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
>On Thu, Jul 23, 2020 at 9:35 AM Neha gupta <neha.bologna90 at gmail.com>
>wrote:
>
>> Hello David, file not found should be the path problem I guess. I
>just
>> forgot the pROC library, which I included here. These are all the
>libraries
>> I am using.
>>
>> library(caret)
>> library(farff)
>> library(DMwR)
>> library(pROC)
>> library(pls)
>>
>> setwd("C:/Users/PC/Documents")
>> d=readARFF("bughunter.arff")
>> dput( head( d, 30 ) )
>>
>> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>>
>> tr <- d[index, ]
>>
>> ts <- d[-index, ]
>>
>> boot3 <- trainControl(method = "repeatedcv", number=10,
>> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>>
>> summaryFunction = twoClassSummary, sampling = "rose")
>>
>> set.seed(30218)
>>
>> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>"AUC",
>> preProc
>> = c("center", "scale", "nzv"), trControl = boot3)
>>
>> getTrainPerf(ct)
>>
>>
>> <
>>
>https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon
>> >
>> Virus-free.
>> www.avast.com
>> <
>>
>https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link
>> >
>> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>>
>> On Thu, Jul 23, 2020 at 4:01 PM Neha gupta <neha.bologna90 at gmail.com>
>> wrote:
>>
>> >
>> > Hello David, thanks for your reply. I have added the information.
>> >
>> > library(caret)
>> > library(farff)
>> > library(DMwR)
>> >
>> > d=readARFF("bughunter.arff")
>> > dput( head( d, 30 ) )
>> >
>> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>> >
>> > tr <- d[index, ]
>> >
>> > ts <- d[-index, ]
>> >
>> > boot3 <- trainControl(method = "repeatedcv", number=10,
>> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
>> >
>> > summaryFunction = twoClassSummary, sampling = "rose")
>> >
>> > set.seed(30218)
>> >
>> > ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>"AUC",
>> preProc
>> > = c("center", "scale", "nzv"), trControl = boot3)
>> >
>> > getTrainPerf(ct)
>> >
>> > On Thu, Jul 23, 2020 at 1:08 AM David Winsemius
><dwinsemius at comcast.net>
>> > wrote:
>> >
>> >>
>> >> On 7/22/20 3:43 PM, Neha gupta wrote:
>> >> > Hello,
>> >> >
>> >> >
>> >> > I get the following error when I use the ROSE class balancing
>method
>> but
>> >> > when I use other methods like SMOTE, up, down, I do not get any
>error
>> >> > message.
>> >> >
>> >> >
>> >> > Something is wrong; all the ROC metric values are missing:
>> >> >
>> >> > ROC Sens Spec
>> >> >
>> >> > Min. : NA Min. : NA Min. : NA
>> >> >
>> >> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
>> >> >
>> >> > Median : NA Median : NA Median : NA
>> >> >
>> >> > Mean :NaN Mean :NaN Mean :NaN
>> >> >
>> >> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
>> >> >
>> >> > Max. : NA Max. : NA Max. : NA
>> >> >
>> >> >
>> >> >
>> >> > library(DMwR)
>> >> >
>> >> > d=readARFF("bughunter.arff")
>> >>
>> >> After installing that package and loading pkg:DMwR I get:
>> >>
>> >>
>> >> Error in readARFF("bughunter.arff") : could not find function
>"readARFF"
>> >>
>> >>
>> >> Since you also posted in HTML, I suggest you read the Posting
>Guide,
>> >> restart and R session and post a reproducible example that loads
>all
>> >> needed packages and data.
>> >>
>> >> --
>> >>
>> >> David.
>> >>
>> >> >
>> >> > index <- createDataPartition(d$`Bug class`, p = .70,list =
>FALSE)
>> >> >
>> >> > tr <- d[index, ]
>> >> >
>> >> > ts <- d[-index, ]
>> >> >
>> >> > boot3 <- trainControl(method = "repeatedcv", number=10,
>> >> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
>> >> >
>> >> > summaryFunction = twoClassSummary, sampling = "rose")
>> >> >
>> >> > set.seed(30218)
>> >> >
>> >> > ct <- train(`Bug class` ~ ., data = tr,
>> >> >
>> >> > method = "pls",
>> >> >
>> >> > metric = "AUC",
>> >> >
>> >> > preProc = c("center", "scale", "nzv"),
>> >> >
>> >> > trControl = boot3)
>> >> >
>> >> > getTrainPerf(ct)
>> >> >
>> >> >       [[alternative HTML version deleted]]
>> >> >
>> >> > ______________________________________________
>> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>see
>> >> > https://stat.ethz.ch/mailman/listinfo/r-help
>> >> > PLEASE do read the posting guide
>> >> http://www.R-project.org/posting-guide.html
>> >> > and provide commented, minimal, self-contained, reproducible
>code.
>> >>
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Jul 23 22:47:42 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 23 Jul 2020 13:47:42 -0700
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
Message-ID: <bab7a532-089e-2ba3-1223-837c49488271@comcast.net>


On 7/23/20 9:34 AM, Neha gupta wrote:
>
> Hello David, file not found should be the path problem I guess. I just 
> forgot the pROC library, which I included here. These are all the 
> libraries I am using.
>
> library(caret)
> library(farff)
> library(DMwR)
> library(pROC)
> library(pls)
>
> setwd("C:/Users/PC/Documents")
> d=readARFF("bughunter.arff")


I suppose *you* might have such a file in that directory, but do you 
assume that *we* will????

A reproducible example will allow others to run your code. Seems fairly 
clear that we are not there yet.

-- 

David.

> dput( head( d, 30 ) )
>
> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
> tr <- d[index, ]
>
> ts <- d[-index, ]
>
> boot3 <- trainControl(method = "repeatedcv", number=10, 
> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
> summaryFunction = twoClassSummary, sampling = "rose")
>
> set.seed(30218)
>
> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = 
> "AUC", preProc = c("center", "scale", "nzv"), trControl = boot3)
>
> getTrainPerf(ct)
>
>
>
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon> 
> 	Virus-free. www.avast.com 
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link> 
>
>
>
> On Thu, Jul 23, 2020 at 4:01 PM Neha gupta <neha.bologna90 at gmail.com 
> <mailto:neha.bologna90 at gmail.com>> wrote:
>
>
>     Hello David, thanks for your?reply. I have added the information.
>
>     library(caret)
>     library(farff)
>     library(DMwR)
>
>     d=readARFF("bughunter.arff")
>     dput( head( d, 30 ) )
>
>     index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
>     tr <- d[index, ]
>
>     ts <- d[-index, ]
>
>     boot3 <- trainControl(method = "repeatedcv", number=10,
>     repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
>     summaryFunction = twoClassSummary, sampling = "rose")
>
>     set.seed(30218)
>
>     ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>     "AUC", preProc = c("center", "scale", "nzv"), trControl = boot3)
>
>     getTrainPerf(ct)
>
>
>     On Thu, Jul 23, 2020 at 1:08 AM David Winsemius
>     <dwinsemius at comcast.net <mailto:dwinsemius at comcast.net>> wrote:
>
>
>         On 7/22/20 3:43 PM, Neha gupta wrote:
>         > Hello,
>         >
>         >
>         > I get the following error when I use the ROSE class
>         balancing method but
>         > when I use other methods like SMOTE, up, down, I do not get
>         any error
>         > message.
>         >
>         >
>         > Something is wrong; all the ROC metric values are missing:
>         >
>         > ROC Sens Spec
>         >
>         > Min. : NA Min. : NA Min. : NA
>         >
>         > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
>         >
>         > Median : NA Median : NA Median : NA
>         >
>         > Mean :NaN Mean :NaN Mean :NaN
>         >
>         > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
>         >
>         > Max. : NA Max. : NA Max. : NA
>         >
>         >
>         >
>         > library(DMwR)
>         >
>         > d=readARFF("bughunter.arff")
>
>         After installing that package and loading pkg:DMwR I get:
>
>
>         Error in readARFF("bughunter.arff") : could not find function
>         "readARFF"
>
>
>         Since you also posted in HTML, I suggest you read the Posting
>         Guide,
>         restart and R session and post a reproducible example that
>         loads all
>         needed packages and data.
>
>         -- 
>
>         David.
>
>         >
>         > index <- createDataPartition(d$`Bug class`, p = .70,list =
>         FALSE)
>         >
>         > tr <- d[index, ]
>         >
>         > ts <- d[-index, ]
>         >
>         > boot3 <- trainControl(method = "repeatedcv", number=10,
>         > repeats=10,classProbs = TRUE,verboseIter = FALSE,
>         >
>         > summaryFunction = twoClassSummary, sampling = "rose")
>         >
>         > set.seed(30218)
>         >
>         > ct <- train(`Bug class` ~ ., data = tr,
>         >
>         > method = "pls",
>         >
>         > metric = "AUC",
>         >
>         > preProc = c("center", "scale", "nzv"),
>         >
>         > trControl = boot3)
>         >
>         > getTrainPerf(ct)
>         >
>         >? ? ? ?[[alternative HTML version deleted]]
>         >
>         > ______________________________________________
>         > R-help at r-project.org <mailto:R-help at r-project.org> mailing
>         list -- To UNSUBSCRIBE and more, see
>         > https://stat.ethz.ch/mailman/listinfo/r-help
>         > PLEASE do read the posting guide
>         http://www.R-project.org/posting-guide.html
>         > and provide commented, minimal, self-contained, reproducible
>         code.
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Thu Jul 23 23:43:31 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Thu, 23 Jul 2020 23:43:31 +0200
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <bab7a532-089e-2ba3-1223-837c49488271@comcast.net>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
 <bab7a532-089e-2ba3-1223-837c49488271@comcast.net>
Message-ID: <CA+nrPnv9-MHXgCrdK-3e3nBCPT-vssyWSy6LE-jV+KpK+xLWww@mail.gmail.com>

David, I understand that the file will not be in your directory but I have
provided the data using dput? Didn't I? Previously members of this group
have used dput to provide the detail about their data. Seriously, I have no
idea how else I can provide a reproducible example.



<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
Virus-free.
www.avast.com
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

On Thu, Jul 23, 2020 at 10:47 PM David Winsemius <dwinsemius at comcast.net>
wrote:

>
> On 7/23/20 9:34 AM, Neha gupta wrote:
>
>
> Hello David, file not found should be the path problem I guess. I just
> forgot the pROC library, which I included here. These are all the libraries
> I am using.
>
> library(caret)
> library(farff)
> library(DMwR)
> library(pROC)
> library(pls)
>
> setwd("C:/Users/PC/Documents")
> d=readARFF("bughunter.arff")
>
>
> I suppose *you* might have such a file in that directory, but do you
> assume that *we* will????
>
> A reproducible example will allow others to run your code. Seems fairly
> clear that we are not there yet.
>
> --
>
> David.
>
> dput( head( d, 30 ) )
>
> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
> tr <- d[index, ]
>
> ts <- d[-index, ]
>
> boot3 <- trainControl(method = "repeatedcv", number=10,
> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
> summaryFunction = twoClassSummary, sampling = "rose")
>
> set.seed(30218)
>
> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC", preProc
> = c("center", "scale", "nzv"), trControl = boot3)
>
> getTrainPerf(ct)
>
>
>
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon> Virus-free.
> www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
>
> On Thu, Jul 23, 2020 at 4:01 PM Neha gupta <neha.bologna90 at gmail.com>
> wrote:
>
>>
>> Hello David, thanks for your reply. I have added the information.
>>
>> library(caret)
>> library(farff)
>> library(DMwR)
>>
>> d=readARFF("bughunter.arff")
>> dput( head( d, 30 ) )
>>
>> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>>
>> tr <- d[index, ]
>>
>> ts <- d[-index, ]
>>
>> boot3 <- trainControl(method = "repeatedcv", number=10,
>> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>>
>> summaryFunction = twoClassSummary, sampling = "rose")
>>
>> set.seed(30218)
>>
>> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC", preProc
>> = c("center", "scale", "nzv"), trControl = boot3)
>>
>> getTrainPerf(ct)
>>
>> On Thu, Jul 23, 2020 at 1:08 AM David Winsemius <dwinsemius at comcast.net>
>> wrote:
>>
>>>
>>> On 7/22/20 3:43 PM, Neha gupta wrote:
>>> > Hello,
>>> >
>>> >
>>> > I get the following error when I use the ROSE class balancing method
>>> but
>>> > when I use other methods like SMOTE, up, down, I do not get any error
>>> > message.
>>> >
>>> >
>>> > Something is wrong; all the ROC metric values are missing:
>>> >
>>> > ROC Sens Spec
>>> >
>>> > Min. : NA Min. : NA Min. : NA
>>> >
>>> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
>>> >
>>> > Median : NA Median : NA Median : NA
>>> >
>>> > Mean :NaN Mean :NaN Mean :NaN
>>> >
>>> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
>>> >
>>> > Max. : NA Max. : NA Max. : NA
>>> >
>>> >
>>> >
>>> > library(DMwR)
>>> >
>>> > d=readARFF("bughunter.arff")
>>>
>>> After installing that package and loading pkg:DMwR I get:
>>>
>>>
>>> Error in readARFF("bughunter.arff") : could not find function "readARFF"
>>>
>>>
>>> Since you also posted in HTML, I suggest you read the Posting Guide,
>>> restart and R session and post a reproducible example that loads all
>>> needed packages and data.
>>>
>>> --
>>>
>>> David.
>>>
>>> >
>>> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>>> >
>>> > tr <- d[index, ]
>>> >
>>> > ts <- d[-index, ]
>>> >
>>> > boot3 <- trainControl(method = "repeatedcv", number=10,
>>> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
>>> >
>>> > summaryFunction = twoClassSummary, sampling = "rose")
>>> >
>>> > set.seed(30218)
>>> >
>>> > ct <- train(`Bug class` ~ ., data = tr,
>>> >
>>> > method = "pls",
>>> >
>>> > metric = "AUC",
>>> >
>>> > preProc = c("center", "scale", "nzv"),
>>> >
>>> > trControl = boot3)
>>> >
>>> > getTrainPerf(ct)
>>> >
>>> >       [[alternative HTML version deleted]]
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Jul 23 23:49:11 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 23 Jul 2020 16:49:11 -0500
Subject: [R] help with web scraping
Message-ID: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>

Hello, All:


 ????? I've failed with multiple attempts to scrape the table of 
candidates from the website of the Missouri Secretary of State:


https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975


 ??? ? I've tried base::url, base::readLines, xml2::read_html, and 
XML::readHTMLTable; see summary below.


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer Graves


sosURL <- 
"https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"

str(baseURL <- base::url(sosURL))
# this might give me something, but I don't know what

sosRead <- base::readLines(sosURL) # 404 Not Found
sosRb <- base::readLines(baseURL) # 404 Not Found

sosXml2 <- xml2::read_html(sosURL) # HTTP error 404.

sosXML <- XML::readHTMLTable(sosURL)
# List of 0;? does not seem to be XML

sessionInfo()

R version 4.0.2 (2020-06-22)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Catalina 10.15.5

Matrix products: default
BLAS: 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets
[6] methods?? base

loaded via a namespace (and not attached):
[1] compiler_4.0.2 tools_4.0.2??? curl_4.3
[4] xml2_1.3.2???? XML_3.99-0.3


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jul 23 23:50:41 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 23 Jul 2020 14:50:41 -0700
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <CA+nrPnv9-MHXgCrdK-3e3nBCPT-vssyWSy6LE-jV+KpK+xLWww@mail.gmail.com>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
 <bab7a532-089e-2ba3-1223-837c49488271@comcast.net>
 <CA+nrPnv9-MHXgCrdK-3e3nBCPT-vssyWSy6LE-jV+KpK+xLWww@mail.gmail.com>
Message-ID: <ABD6AC6F-3493-49FA-8D57-E75951C834D5@dcn.davis.ca.us>

All you did was include the dput command in your example. We need the output of dput, not the command itself.

On July 23, 2020 2:43:31 PM PDT, Neha gupta <neha.bologna90 at gmail.com> wrote:
>David, I understand that the file will not be in your directory but I
>have
>provided the data using dput? Didn't I? Previously members of this
>group
>have used dput to provide the detail about their data. Seriously, I
>have no
>idea how else I can provide a reproducible example.
>
>
>
><https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
>Virus-free.
>www.avast.com
><https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
><#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>
>On Thu, Jul 23, 2020 at 10:47 PM David Winsemius
><dwinsemius at comcast.net>
>wrote:
>
>>
>> On 7/23/20 9:34 AM, Neha gupta wrote:
>>
>>
>> Hello David, file not found should be the path problem I guess. I
>just
>> forgot the pROC library, which I included here. These are all the
>libraries
>> I am using.
>>
>> library(caret)
>> library(farff)
>> library(DMwR)
>> library(pROC)
>> library(pls)
>>
>> setwd("C:/Users/PC/Documents")
>> d=readARFF("bughunter.arff")
>>
>>
>> I suppose *you* might have such a file in that directory, but do you
>> assume that *we* will????
>>
>> A reproducible example will allow others to run your code. Seems
>fairly
>> clear that we are not there yet.
>>
>> --
>>
>> David.
>>
>> dput( head( d, 30 ) )
>>
>> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>>
>> tr <- d[index, ]
>>
>> ts <- d[-index, ]
>>
>> boot3 <- trainControl(method = "repeatedcv", number=10,
>> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>>
>> summaryFunction = twoClassSummary, sampling = "rose")
>>
>> set.seed(30218)
>>
>> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>"AUC", preProc
>> = c("center", "scale", "nzv"), trControl = boot3)
>>
>> getTrainPerf(ct)
>>
>>
>>
>>
><https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
>Virus-free.
>> www.avast.com
>>
><https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
>>
>> On Thu, Jul 23, 2020 at 4:01 PM Neha gupta <neha.bologna90 at gmail.com>
>> wrote:
>>
>>>
>>> Hello David, thanks for your reply. I have added the information.
>>>
>>> library(caret)
>>> library(farff)
>>> library(DMwR)
>>>
>>> d=readARFF("bughunter.arff")
>>> dput( head( d, 30 ) )
>>>
>>> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>>>
>>> tr <- d[index, ]
>>>
>>> ts <- d[-index, ]
>>>
>>> boot3 <- trainControl(method = "repeatedcv", number=10,
>>> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>>>
>>> summaryFunction = twoClassSummary, sampling = "rose")
>>>
>>> set.seed(30218)
>>>
>>> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>"AUC", preProc
>>> = c("center", "scale", "nzv"), trControl = boot3)
>>>
>>> getTrainPerf(ct)
>>>
>>> On Thu, Jul 23, 2020 at 1:08 AM David Winsemius
><dwinsemius at comcast.net>
>>> wrote:
>>>
>>>>
>>>> On 7/22/20 3:43 PM, Neha gupta wrote:
>>>> > Hello,
>>>> >
>>>> >
>>>> > I get the following error when I use the ROSE class balancing
>method
>>>> but
>>>> > when I use other methods like SMOTE, up, down, I do not get any
>error
>>>> > message.
>>>> >
>>>> >
>>>> > Something is wrong; all the ROC metric values are missing:
>>>> >
>>>> > ROC Sens Spec
>>>> >
>>>> > Min. : NA Min. : NA Min. : NA
>>>> >
>>>> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
>>>> >
>>>> > Median : NA Median : NA Median : NA
>>>> >
>>>> > Mean :NaN Mean :NaN Mean :NaN
>>>> >
>>>> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
>>>> >
>>>> > Max. : NA Max. : NA Max. : NA
>>>> >
>>>> >
>>>> >
>>>> > library(DMwR)
>>>> >
>>>> > d=readARFF("bughunter.arff")
>>>>
>>>> After installing that package and loading pkg:DMwR I get:
>>>>
>>>>
>>>> Error in readARFF("bughunter.arff") : could not find function
>"readARFF"
>>>>
>>>>
>>>> Since you also posted in HTML, I suggest you read the Posting
>Guide,
>>>> restart and R session and post a reproducible example that loads
>all
>>>> needed packages and data.
>>>>
>>>> --
>>>>
>>>> David.
>>>>
>>>> >
>>>> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>>>> >
>>>> > tr <- d[index, ]
>>>> >
>>>> > ts <- d[-index, ]
>>>> >
>>>> > boot3 <- trainControl(method = "repeatedcv", number=10,
>>>> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
>>>> >
>>>> > summaryFunction = twoClassSummary, sampling = "rose")
>>>> >
>>>> > set.seed(30218)
>>>> >
>>>> > ct <- train(`Bug class` ~ ., data = tr,
>>>> >
>>>> > method = "pls",
>>>> >
>>>> > metric = "AUC",
>>>> >
>>>> > preProc = c("center", "scale", "nzv"),
>>>> >
>>>> > trControl = boot3)
>>>> >
>>>> > getTrainPerf(ct)
>>>> >
>>>> >       [[alternative HTML version deleted]]
>>>> >
>>>> > ______________________________________________
>>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>>> > PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> > and provide commented, minimal, self-contained, reproducible
>code.
>>>>
>>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Jul 23 23:56:08 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 23 Jul 2020 14:56:08 -0700
Subject: [R] curl options?
Message-ID: <86EEC745-4CDE-4314-A881-E9655B82B6E7@noaa.gov>

I am trying to get the following command to work:

> sshInfo <- rerddap::info('hawaii_soest_f75b_adc6_12ab', url = 'https://apdrc.soest.hawaii.edu/erddap/') 

On a Mac at least (but I know for a fact not necessarily on other OSes) I get:

> Error in curl::curl_fetch_memory(x$url$url, handle = x$url$handle) : 
>   SSL certificate problem: certificate has expired

Parenthetically,  this also happened with R itself awhile back  where an intermediate cert on the search path had expired,  not the cert of the service itself,  and depending on which implementation of ssl was used,  it either ignored it or threw an error,  as  in this case.  Someone I am working with on another OS can indeed run the same command,  so if your particular OS may not have an issue

Anyhow, for a problem a I am working on I need to access this server with that and related commands.  'rerddap::info()' allows me to pass curl options,  and normally with Curl you can get around the expired certificate using the  '-k' or '--insecure' option.  When I look at:

> curl::curl_options()

I do not see this option. I do not understand all the options listed there,  so maybe that option is in a different form that I am missing. Or is there another way around this still using 'curl' .  Using another function that does similar to 'curl'  is not an option, because I need the 'rerddap::info()' call which calls a package called "crul" which ultimately calls 'curl'.

Thanks,

-Roy

PS - And yes I informed the owner of the site about the expired certificate,  that was a couple of weeks ago.

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Fri Jul 24 00:15:10 2020
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Thu, 23 Jul 2020 22:15:10 +0000
Subject: [R] by function with sum does not give what is expected from by
 function with print
Message-ID: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>

Colleagues,
?
The by function in the R program below is not giving me the sums
I expect to see, viz., 
382+170=552
4730+170=4900
5+6=11
199+25=224
###################################################
#full R program:
mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
sex=(rep(c(1,1,0,0),2)),
status=rep(c(1,0),2),
values=c(382,4730,5,199,170,497,6,25))
mydata
by(mydata,list(mydata$sex,mydata$status),sum)
by(mydata,list(mydata$sex,mydata$status),print)
###################################################

More complete explanation of my question
?
I have created a simple dataframe having three factors:
?mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
?sex=(rep(c(1,1,0,0),2)),
?status=rep(c(1,0),2),
?values=c(382,4730,5,199,170,497,6,25))
?
?> mydata
? covid sex status values
1???? 0?? 1????? 1??? 382
2???? 0?? 1????? 0?? 4730
3???? 0?? 0????? 1????? 5
4???? 0?? 0????? 0??? 199
5???? 1?? 1????? 1??? 170
6???? 1?? 1????? 0??? 497
7???? 1?? 0????? 1????? 6
8???? 1?? 0????? 0???? 25
?
When I use the by function with a sum as an argument, I don?t
get the sums that I would expect to 
receive based either on the listing of the dataframe above,
or from using by with print as an argument:
?
> by(mydata,list(mydata$sex,mydata$status),sum)
: 0
: 0
[1] 225
------------------------------------------------------------------------------- 
: 1
: 0
[1] 5230
------------------------------------------------------------------------------- 
: 0
: 1
[1] 14
------------------------------------------------------------------------------- 
: 1
: 1
[1] 557
?
I expected to see the following sums: 
382+170=552
4730+170=4900
5+6=11
199+25=224
Which as can be seen by the output above, I am not getting. 
?
Using print as an argument to the by function, I get the values
grouped as I would expect, but for some reason I get a double
printing of the values!
?
> by(mydata,list(mydata$sex,mydata$status),print)
? covid sex status values
4???? 0?? 0????? 0??? 199
8???? 1?? 0????? 0???? 25
? covid sex status values
2???? 0?? 1????? 0?? 4730
6???? 1?? 1????? 0??? 497
? covid sex status values
3???? 0?? 0????? 1??? ??5
7???? 1?? 0????? 1????? 6
? covid sex status values
1???? 0?? 1????? 1??? 382
5???? 1?? 1????? 1??? 170
: 0
: 0
? covid sex status values
4???? 0?? 0????? 0??? 199
8???? 1?? 0????? 0???? 25
------------------------------------------------------------------------------- 
: 1
: 0
? covid sex status values
2???? 0?? 1????? 0?? 4730
6???? 1?? 1????? 0??? 497
------------------------------------------------------------------------------- 
: 0
: 1
? covid sex status values
3???? 0?? 0????? 1????? 5
7???? 1? ?0????? 1????? 6
------------------------------------------------------------------------------- 
: 1
: 1
? covid sex status values
1???? 0?? 1????? 1??? 382
5???? 1?? 1????? 1??? 170
?
What am I doing wrong, or what don?t I understand
About the by function?
?
Thank you
John
?
?

















John David Sorkin M.D., Ph.D.

Professor of Medicine

Chief, Biostatistics and Informatics

University of Maryland School of Medicine Division of?Gerontology and Geriatric Medicine

Baltimore VA Medical Center

10 North Greene Street

GRECC (BT/18/GR)

Baltimore, MD 21201-1524

(Phone) 410-605-7119

(Fax) 410-605-7913 (Please call phone number above prior to faxing) 




From bgunter@4567 @end|ng |rom gm@||@com  Fri Jul 24 00:43:18 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 23 Jul 2020 15:43:18 -0700
Subject: [R] by function with sum does not give what is expected from by
 function with print
In-Reply-To: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <CAGxFJbRbZOE_hJxox-Byt6fqiFP+wOC-nFpJSA4=kjyuwGiegA@mail.gmail.com>

by() chooses **data frame** subsets -- sum() is acting on these frames,
adding up everything in them.
Try this instead:

> by(mydata,list(mydata$sex,mydata$status),function(x)sum(x$values))
: 0
: 0
[1] 224
-----------------------------------------------------------
: 1
: 0
[1] 5227
-----------------------------------------------------------
: 0
: 1
[1] 11
-----------------------------------------------------------
: 1
: 1
[1] 552

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 23, 2020 at 3:25 PM Sorkin, John <jsorkin at som.umaryland.edu>
wrote:

> Colleagues,
>
> The by function in the R program below is not giving me the sums
> I expect to see, viz.,
> 382+170=552
> 4730+170=4900
> 5+6=11
> 199+25=224
> ###################################################
> #full R program:
> mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
> sex=(rep(c(1,1,0,0),2)),
> status=rep(c(1,0),2),
> values=c(382,4730,5,199,170,497,6,25))
> mydata
> by(mydata,list(mydata$sex,mydata$status),sum)
> by(mydata,list(mydata$sex,mydata$status),print)
> ###################################################
>
> More complete explanation of my question
>
> I have created a simple dataframe having three factors:
>  mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
>  sex=(rep(c(1,1,0,0),2)),
>  status=rep(c(1,0),2),
>  values=c(382,4730,5,199,170,497,6,25))
>
>  > mydata
>   covid sex status values
> 1     0   1      1    382
> 2     0   1      0   4730
> 3     0   0      1      5
> 4     0   0      0    199
> 5     1   1      1    170
> 6     1   1      0    497
> 7     1   0      1      6
> 8     1   0      0     25
>
> When I use the by function with a sum as an argument, I don?t
> get the sums that I would expect to
> receive based either on the listing of the dataframe above,
> or from using by with print as an argument:
>
> > by(mydata,list(mydata$sex,mydata$status),sum)
> : 0
> : 0
> [1] 225
> -------------------------------------------------------------------------------
>
> : 1
> : 0
> [1] 5230
> -------------------------------------------------------------------------------
>
> : 0
> : 1
> [1] 14
> -------------------------------------------------------------------------------
>
> : 1
> : 1
> [1] 557
>
> I expected to see the following sums:
> 382+170=552
> 4730+170=4900
> 5+6=11
> 199+25=224
> Which as can be seen by the output above, I am not getting.
>
> Using print as an argument to the by function, I get the values
> grouped as I would expect, but for some reason I get a double
> printing of the values!
>
> > by(mydata,list(mydata$sex,mydata$status),print)
>   covid sex status values
> 4     0   0      0    199
> 8     1   0      0     25
>   covid sex status values
> 2     0   1      0   4730
> 6     1   1      0    497
>   covid sex status values
> 3     0   0      1      5
> 7     1   0      1      6
>   covid sex status values
> 1     0   1      1    382
> 5     1   1      1    170
> : 0
> : 0
>   covid sex status values
> 4     0   0      0    199
> 8     1   0      0     25
> -------------------------------------------------------------------------------
>
> : 1
> : 0
>   covid sex status values
> 2     0   1      0   4730
> 6     1   1      0    497
> -------------------------------------------------------------------------------
>
> : 0
> : 1
>   covid sex status values
> 3     0   0      1      5
> 7     1   0      1      6
> -------------------------------------------------------------------------------
>
> : 1
> : 1
>   covid sex status values
> 1     0   1      1    382
> 5     1   1      1    170
>
> What am I doing wrong, or what don?t I understand
> About the by function?
>
> Thank you
> John
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> John David Sorkin M.D., Ph.D.
>
> Professor of Medicine
>
> Chief, Biostatistics and Informatics
>
> University of Maryland School of Medicine Division of Gerontology and
> Geriatric Medicine
>
> Baltimore VA Medical Center
>
> 10 North Greene Street
>
> GRECC (BT/18/GR)
>
> Baltimore, MD 21201-1524
>
> (Phone) 410-605-7119
>
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Fri Jul 24 00:46:08 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Thu, 23 Jul 2020 15:46:08 -0700
Subject: [R] help with web scraping
In-Reply-To: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
Message-ID: <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>

Hi Spencer,

I tried the code below on an older R-installation, and it works fine.
Not a full solution, but it's a start:

> library(RCurl)
Loading required package: bitops
> url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> M_sos <- getURL(url)
> print(M_sos)
[1] "\r\n<!DOCTYPE html>\r\n\r\n<html
lang=\"en-us\">\r\n<head><title>\r\n\tSOS, Missouri - Elections:
Offices Filed in Candidate Filing\r\n</title><meta name=\"viewport\"
content=\"width=device-width, initial-scale=1.0\" [...remainder
truncated].

HTH, Bill.

W. Michels, Ph.D.



On Thu, Jul 23, 2020 at 2:55 PM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello, All:
>
>
>        I've failed with multiple attempts to scrape the table of
> candidates from the website of the Missouri Secretary of State:
>
>
> https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975
>
>
>        I've tried base::url, base::readLines, xml2::read_html, and
> XML::readHTMLTable; see summary below.
>
>
>        Suggestions?
>        Thanks,
>        Spencer Graves
>
>
> sosURL <-
> "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>
> str(baseURL <- base::url(sosURL))
> # this might give me something, but I don't know what
>
> sosRead <- base::readLines(sosURL) # 404 Not Found
> sosRb <- base::readLines(baseURL) # 404 Not Found
>
> sosXml2 <- xml2::read_html(sosURL) # HTTP error 404.
>
> sosXML <- XML::readHTMLTable(sosURL)
> # List of 0;  does not seem to be XML
>
> sessionInfo()
>
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Catalina 10.15.5
>
> Matrix products: default
> BLAS:
> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets
> [6] methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_4.0.2 tools_4.0.2    curl_4.3
> [4] xml2_1.3.2     XML_3.99-0.3
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul 24 00:54:34 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 23 Jul 2020 18:54:34 -0400
Subject: [R] by function with sum does not give what is expected from by
 function with print
In-Reply-To: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <c8331615-ffc5-36da-64cf-e75945bfc673@gmail.com>

On 23/07/2020 6:15 p.m., Sorkin, John wrote:
> Colleagues,
>   
> The by function in the R program below is not giving me the sums
> I expect to see, viz.,
> 382+170=552
> 4730+170=4900
> 5+6=11
> 199+25=224
> ###################################################
> #full R program:
> mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
> sex=(rep(c(1,1,0,0),2)),
> status=rep(c(1,0),2),
> values=c(382,4730,5,199,170,497,6,25))
> mydata
> by(mydata,list(mydata$sex,mydata$status),sum)
> by(mydata,list(mydata$sex,mydata$status),print)
> ###################################################

The problem is that you are summing the mydata values, not the 
mydata$values values.  That will include covid, sex and status in the 
sums.  I think you'll get what you should (though it doesn't match what 
you say you expected, which looks wrong to me) with this code:

by(mydata$values,list(mydata$sex,mydata$status),sum)

for 0,0, the sum is 224 = 199+25
for 0,1, the sum is  11 = 5+6
for 1,0, the sum is 5227 = 4730 + 497 (not 4730 + 170)
for 1,1, the sum is 552 = 382 + 170

Duncan Murdoch


> 
> More complete explanation of my question
>   
> I have created a simple dataframe having three factors:
>  ?mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
>  ?sex=(rep(c(1,1,0,0),2)),
>  ?status=rep(c(1,0),2),
>  ?values=c(382,4730,5,199,170,497,6,25))
>   
>  ?> mydata
>  ? covid sex status values
> 1???? 0?? 1????? 1??? 382
> 2???? 0?? 1????? 0?? 4730
> 3???? 0?? 0????? 1????? 5
> 4???? 0?? 0????? 0??? 199
> 5???? 1?? 1????? 1??? 170
> 6???? 1?? 1????? 0??? 497
> 7???? 1?? 0????? 1????? 6
> 8???? 1?? 0????? 0???? 25
>   
> When I use the by function with a sum as an argument, I don?t
> get the sums that I would expect to
> receive based either on the listing of the dataframe above,
> or from using by with print as an argument:
>   
>> by(mydata,list(mydata$sex,mydata$status),sum)
> : 0
> : 0
> [1] 225
> -------------------------------------------------------------------------------
> : 1
> : 0
> [1] 5230
> -------------------------------------------------------------------------------
> : 0
> : 1
> [1] 14
> -------------------------------------------------------------------------------
> : 1
> : 1
> [1] 557
>   
> I expected to see the following sums:
> 382+170=552
> 4730+170=4900
> 5+6=11
> 199+25=224
> Which as can be seen by the output above, I am not getting.
>   
> Using print as an argument to the by function, I get the values
> grouped as I would expect, but for some reason I get a double
> printing of the values!
>   
>> by(mydata,list(mydata$sex,mydata$status),print)
>  ? covid sex status values
> 4???? 0?? 0????? 0??? 199
> 8???? 1?? 0????? 0???? 25
>  ? covid sex status values
> 2???? 0?? 1????? 0?? 4730
> 6???? 1?? 1????? 0??? 497
>  ? covid sex status values
> 3???? 0?? 0????? 1??? ??5
> 7???? 1?? 0????? 1????? 6
>  ? covid sex status values
> 1???? 0?? 1????? 1??? 382
> 5???? 1?? 1????? 1??? 170
> : 0
> : 0
>  ? covid sex status values
> 4???? 0?? 0????? 0??? 199
> 8???? 1?? 0????? 0???? 25
> -------------------------------------------------------------------------------
> : 1
> : 0
>  ? covid sex status values
> 2???? 0?? 1????? 0?? 4730
> 6???? 1?? 1????? 0??? 497
> -------------------------------------------------------------------------------
> : 0
> : 1
>  ? covid sex status values
> 3???? 0?? 0????? 1????? 5
> 7???? 1? ?0????? 1????? 6
> -------------------------------------------------------------------------------
> : 1
> : 1
>  ? covid sex status values
> 1???? 0?? 1????? 1??? 382
> 5???? 1?? 1????? 1??? 170
>   
> What am I doing wrong, or what don?t I understand
> About the by function?
>   
> Thank you
> John
>   
>   
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> John David Sorkin M.D., Ph.D.
> 
> Professor of Medicine
> 
> Chief, Biostatistics and Informatics
> 
> University of Maryland School of Medicine Division of?Gerontology and Geriatric Medicine
> 
> Baltimore VA Medical Center
> 
> 10 North Greene Street
> 
> GRECC (BT/18/GR)
> 
> Baltimore, MD 21201-1524
> 
> (Phone) 410-605-7119
> 
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
> 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jr@| @end|ng |rom po@teo@no  Fri Jul 24 01:20:38 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 24 Jul 2020 01:20:38 +0200
Subject: [R] curl options?
In-Reply-To: <86EEC745-4CDE-4314-A881-E9655B82B6E7@noaa.gov>
References: <86EEC745-4CDE-4314-A881-E9655B82B6E7@noaa.gov>
Message-ID: <20200723232038.GJ1283@posteo.no>

On 2020-07-23 14:56 -0700, Roy Mendelssohn - NOAA Federal via R-help wrote:
> I am trying to get the following command to work:
> 
> > sshInfo <- rerddap::info('hawaii_soest_f75b_adc6_12ab', url = 'https://apdrc.soest.hawaii.edu/erddap/') 
> 
> On a Mac at least (but I know for a 
> fact not necessarily on other OSes) I 
> get:
> 
> > Error in curl::curl_fetch_memory(x$url$url, handle = x$url$handle) : 
> >   SSL certificate problem: certificate has expired
> 
> Parenthetically,  this also happened 
> with R itself awhile back  where an 
> intermediate cert on the search path 
> had expired,  not the cert of the 
> service itself,  and depending on 
> which implementation of ssl was used,  
> it either ignored it or threw an 
> error,  as  in this case.  Someone I 
> am working with on another OS can 
> indeed run the same command,  so if 
> your particular OS may not have an 
> issue

I can download the dataset without 
problems on my Linux thinkpad.  Perhaps 
you can provide some more info (but I do 
not know what ...) so I/others can 
reproduce this strange error ... 

Have you checked the time on the laptop 
being correct and not set to e.g. 
1970-01-01 01:29?  In the past, I have 
found ssl errors are caused by the time 
being off on my laptop, as in the case 
of a flat cmos battery.

> Anyhow, for a problem a I am working 
> on I need to access this server with 
> that and related commands.  
> 'rerddap::info()' allows me to pass 
> curl options,  and normally with Curl 
> you can get around the expired 
> certificate using the  '-k' or 
> '--insecure' option.  When I look at:
> 
> > curl::curl_options()
> 
> I do not see this option. I do not 
> understand all the options listed 
> there,  so maybe that option is in a 
> different form that I am missing. Or 
> is there another way around this still 
> using 'curl' .  Using another function 
> that does similar to 'curl'  is not an 
> option, because I need the 
> 'rerddap::info()' call which calls a 
> package called "crul" which ultimately 
> calls 'curl'.
> 
> Thanks,
> 
> -Roy
> 
> PS - And yes I informed the owner of 
> the site about the expired 
> certificate,  that was a couple of 
> weeks ago.

Perhaps setting

	options("ssl_verifyhost"=0, "ssl_verifypeer"=0) 

helps? [1]

Best,
Rasmus

[1] https://stackoverflow.com/questions/47715918/how-to-pass-the-curl-insecure-alternative-when-using-r

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200724/8ea5291b/attachment.sig>

From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Jul 24 01:25:31 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 23 Jul 2020 16:25:31 -0700
Subject: [R] [External] Re: Playing a music file in R
In-Reply-To: <20200723191924.GA144650@posteo.no>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
 <CF5D5614-A376-4B25-AAA9-43B2396AB5D5@xs4all.nl>
 <CAEPHqhY3iA8KX1_LHCLUmvhFJU7u6z14Us2k-PH+1CD9zch5EA@mail.gmail.com>
 <2409287C-3170-4EE9-9E7C-C0228ED12890@xs4all.nl>
 <CAGx1TMBKe8xaFvACj3Mne8qAfFhxe+i_xteokzNrk3AHBiP+VQ@mail.gmail.com>
 <20200723191924.GA144650@posteo.no>
Message-ID: <CAFDcVCQUcWmM=MY3_hCs8HCGPLFNCs-__RfpYqE78pCAe_e0Sg@mail.gmail.com>

FWIW, see also the 'midi' R package
(https://github.com/moodymudskipper/midi).  It's not on CRAN.  /Henrik

On Thu, Jul 23, 2020 at 12:19 PM Rasmus Liland <jral at posteo.no> wrote:
>
> On 2020-07-23 14:19 -0400, Richard M. Heiberger wrote:
> > On Thu, Jul 23, 2020 at 7:21 AM bretschr <bretschr at xs4all.nl> wrote:
> > >
> > > Dear Vahid,
> > >
> > >
> > > Re:
> > >
> > > > I have a question regarding the
> > > > following code:
> > > > setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")   # path depends on your R version etc.
> > > >
> > > > How can I find the corresponding
> > > > path on my laptop?
> > >
> > >
> > > This line ...
> > >
> > > setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")
> > >
> > > ... is the path on my MacBook Air
> > > running Mac OS Mojave.  The
> > > structure of R on similar computers
> > > and OS versions will be the same,
> > > but I don't know if you use Windows
> > > or Linux.  Maybe an R-user working
> > > with Windows or Linux can help.
> >
> > The R command
> > system.file()
> >
> > tells you where the currently running
> > version of R is located on your
> > machine and your operating system.
> >
> > On the Macintosh it shows
> > > system.file()
> > [1] "/Library/Frameworks/R.framework/Resources/library/base"
> >
> > You don't need to worry about the R
> > version number, as R knows where it is
> > and gives you the location of the
> > currently running version.  You can
> > now open a system directory file
> > (Finder on Mac, WindowsExplorer on
> > Windows, etc) and navigate up and down
> > to what you are looking for.
> >
> > Or, within R, you can navigate with ..
> > and more directory statements, thus
> > the example from the original email
> >
> > setWavPlayer("/Library/Frameworks/R.framework/Versions/3.6/Resources/bin/play")
> >   # path depends on your R version etc.
> >
> > would be written
> > tmp <- system.file("../../bin/play")
> > and the result is the correct location
> > (if it is there).
> > You will get an empty string if it is
> > not ther, but this will get you
> > started on where to look.  then you
> > write
> >
> > setWavPlayer(tmp)   # path depends on your R version etc.
>
>
> Hello, I found you can use mpv (and
> mplayer) as well, instead of sox[1].
> There are many ways to install it[1]
> including various ways on mac.
>
>         > system("whereis mpv")
>         mpv: /usr/bin/mpv /etc/mpv /usr/include/mpv /usr/share/mpv /usr/share/man/man1/mpv.1.gz
>         > tuneR::setWavPlayer("/usr/bin/mpv")
>         > w <- tuneR::readWave(filename="rf_07.wav", from=0, to=1e6)
>         > w
>
>         Wave Object
>                 Number of Samples:      1000001
>                 Duration (seconds):     22.68
>                 Samplingrate (Hertz):   44100
>                 Channels (Mono/Stereo): Stereo
>                 PCM (integer format):   TRUE
>                 Bit (8/16/24/32/64):    16
>
>         > tuneR::play(w)
>          (+) Audio --aid=1 (pcm_s16le 2ch 44100Hz)
>         AO: [pulse] 44100Hz stereo 2ch s16
>         A: 00:00:22 / 00:00:22 (98%)
>
>
>         Exiting... (End of file)
>         >
>         > tuneR::setWavPlayer("/usr/bin/play")
>         > tuneR::play(w)
>
>         /tmp/RtmpadTOu6/tuneRtemp.wav:
>
>          File Size: 4.00M     Bit Rate: 1.41M
>           Encoding: Signed PCM
>           Channels: 2 @ 16-bit
>         Samplerate: 44100Hz
>         Replaygain: off
>           Duration: 00:00:22.68
>
>         In:100%  00:00:22.68 [00:00:00.00] Out:1.00M [ -====|====- ] Hd:4.2 Clip:0
>         Done.
>         >
>
>
> Best,
> Rasmus
>
> [1] http://sox.sourceforge.net/
> [1] https://mpv.io/installation/
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Fri Jul 24 01:48:30 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 24 Jul 2020 01:48:30 +0200
Subject: [R] by function with sum does not give what is expected from by
 function with print
In-Reply-To: <c8331615-ffc5-36da-64cf-e75945bfc673@gmail.com>
References: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>
 <c8331615-ffc5-36da-64cf-e75945bfc673@gmail.com>
Message-ID: <20200723234830.GK1283@posteo.no>

On 2020-07-23 18:54 -0400, Duncan Murdoch wrote:
> On 23/07/2020 6:15 p.m., Sorkin, John wrote:
> > Colleagues,
> > The by function in the R program below is not giving me the sums
> > I expect to see, viz.,
> > 382+170=552
> > 4730+170=4900
> > 5+6=11
> > 199+25=224
> > ###################################################
> > #full R program:
> > mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
> > sex=(rep(c(1,1,0,0),2)),
> > status=rep(c(1,0),2),
> > values=c(382,4730,5,199,170,497,6,25))
> > mydata
> > by(mydata,list(mydata$sex,mydata$status),sum)
> > by(mydata,list(mydata$sex,mydata$status),print)
> > ###################################################
> 
> The problem is that you are summing the mydata values, not the mydata$values
> values.  That will include covid, sex and status in the sums.  I think
> you'll get what you should (though it doesn't match what you say you
> expected, which looks wrong to me) with this code:
> 
> by(mydata$values,list(mydata$sex,mydata$status),sum)
> 
> for 0,0, the sum is 224 = 199+25
> for 0,1, the sum is  11 = 5+6
> for 1,0, the sum is 5227 = 4730 + 497 (not 4730 + 170)
> for 1,1, the sum is 552 = 382 + 170

Dear John,

Aggregate also does this, but sex and 
status are columns in a data.frame and 
not attributes of the double.

	aggregate(x=list("values"=mydata$values),
	          by=list("sex"=mydata$sex,
	                  "status"=mydata$status),
	          FUN=sum)

yields

	  sex status values
	1   0      0    224
	2   1      0   5227
	3   0      1     11
	4   1      1    552

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200724/dd903768/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Fri Jul 24 02:27:52 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 24 Jul 2020 02:27:52 +0200
Subject: [R] [External] Re: Playing a music file in R
In-Reply-To: <CAFDcVCQUcWmM=MY3_hCs8HCGPLFNCs-__RfpYqE78pCAe_e0Sg@mail.gmail.com>
References: <CAEPHqhaoy98YH5cqFP31yRfTm2hmoovvziMc89nb2SO+NXaVTw@mail.gmail.com>
 <CF5D5614-A376-4B25-AAA9-43B2396AB5D5@xs4all.nl>
 <CAEPHqhY3iA8KX1_LHCLUmvhFJU7u6z14Us2k-PH+1CD9zch5EA@mail.gmail.com>
 <2409287C-3170-4EE9-9E7C-C0228ED12890@xs4all.nl>
 <CAGx1TMBKe8xaFvACj3Mne8qAfFhxe+i_xteokzNrk3AHBiP+VQ@mail.gmail.com>
 <20200723191924.GA144650@posteo.no>
 <CAFDcVCQUcWmM=MY3_hCs8HCGPLFNCs-__RfpYqE78pCAe_e0Sg@mail.gmail.com>
Message-ID: <20200724002752.GL1283@posteo.no>

On 2020-07-23 16:25 -0700, Henrik Bengtsson wrote:
> FWIW, see also the 'midi' R package
> (https://github.com/moodymudskipper/midi).  
> It's not on CRAN.  /Henrik 

Interesting!  I tried to play the midi 
running these lines, but failed:

	> mid <- midi::midi$new(file.path(find.package("midi"), "extdata/vivaldi_spring.mid"))
	> mid$play("Violin")
	sh: /tmp/RtmpTGH8Qu/tuneRtemp.wav: Permission denied

This blogpost[1] is good for francophile 
music theorists.

/Rasmus

[1] https://www.davidsolito.com/post/midiplayer-avec-r-part-2/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200724/05ad3883/attachment.sig>

From @gent@ @end|ng |rom medd@t@|nc@com  Fri Jul 24 02:36:15 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Thu, 23 Jul 2020 20:36:15 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
Message-ID: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>

I am trying to arrange two plots vertically, ie plot 2 below plot 1, where I want the plots to align columnwise but have a height ratio of eg 3:1.

My attempts so far after consulting various webpages is that the following code aligns them columnwise correctly but I have, so far, failed in setting the relative heights...

g2<-ggplotGrob(s)
g3<-ggplotGrob(v)
g<-rbind(g2, g3, size = "first")
g$widths<-unit.pmax(g2$widths, g3$widths)

what would the appropriate statement for the relative heights to add here be?

grid.newpage()
grid.draw(g)

Thank you!


From jr@| @end|ng |rom po@teo@no  Fri Jul 24 02:42:12 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 24 Jul 2020 02:42:12 +0200
Subject: [R] by function with sum does not give what is expected from by
 function with print
In-Reply-To: <20200723234830.GK1283@posteo.no>
References: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>
 <c8331615-ffc5-36da-64cf-e75945bfc673@gmail.com>
 <20200723234830.GK1283@posteo.no>
Message-ID: <20200724004212.GM1283@posteo.no>

On 2020-07-24 01:48 +0200, Rasmus Liland wrote:
> 	aggregate(x=list("values"=mydata$values),
> 	          by=list("sex"=mydata$sex,
> 	                  "status"=mydata$status),
> 	          FUN=sum)
> 
> yields
> 
> 	  sex status values
> 	1   0      0    224
> 	2   1      0   5227
> 	3   0      1     11
> 	4   1      1    552

After reading more in ?aggregate, I 
realized this does the same thing ...

	aggregate(formula=formula("values~sex+status"),
	          FUN=sum,
	          data=mydata)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200724/bd9400c1/attachment.sig>

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jul 24 06:52:03 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 24 Jul 2020 05:52:03 +0100
Subject: [R] by function with sum does not give what is expected from by
 function with print
In-Reply-To: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB516772C0736ADD38CE66B9EDE2760@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <2cc17fd0-ae56-c0a2-cbbe-895e6635e8b9@sapo.pt>

Hello,

These two gives the same results:


aggregate(values ~ sex + status, mydata, sum)
#? sex status values
#1?? 0????? 0??? 224
#2?? 1????? 0?? 5227
#3?? 0????? 1???? 11
#4?? 1????? 1??? 552


by(mydata$values, list(mydata$sex, mydata$status), sum)
#: 0
#: 0
#[1] 224
#------------------------------------------------------------
#: 1
#: 0
#[1] 5227
#------------------------------------------------------------
#: 0
#: 1
#[1] 11
#------------------------------------------------------------
#: 1
#: 1
#[1] 552


So Duncan is right, your expected output's 2nd sum is wrong, the right 
sum is

mydata rows 2 and 6: 4730 + 497 == 5227
----------------------------------------^

Another option, returning a matrix,

 ?tapply(mydata$values, list(mydata$sex, mydata$status), sum)
#? ? ? ?? ??? 0?? 1
#0 ? ? 224? 11
#1 5227 552


Hope this helps,

Rui Barradas


?s 23:15 de 23/07/2020, Sorkin, John escreveu:
> Colleagues,
>   
> The by function in the R program below is not giving me the sums
> I expect to see, viz.,
> 382+170=552
> 4730+170=4900
> 5+6=11
> 199+25=224
> ###################################################
> #full R program:
> mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
> sex=(rep(c(1,1,0,0),2)),
> status=rep(c(1,0),2),
> values=c(382,4730,5,199,170,497,6,25))
> mydata
> by(mydata,list(mydata$sex,mydata$status),sum)
> by(mydata,list(mydata$sex,mydata$status),print)
> ###################################################
>
> More complete explanation of my question
>   
> I have created a simple dataframe having three factors:
>  ?mydata <- data.frame(covid=c(0,0,0,0,1,1,1,1),
>  ?sex=(rep(c(1,1,0,0),2)),
>  ?status=rep(c(1,0),2),
>  ?values=c(382,4730,5,199,170,497,6,25))
>   
>  ?> mydata
>  ? covid sex status values
> 1???? 0?? 1????? 1??? 382
> 2???? 0?? 1????? 0?? 4730
> 3???? 0?? 0????? 1????? 5
> 4???? 0?? 0????? 0??? 199
> 5???? 1?? 1????? 1??? 170
> 6???? 1?? 1????? 0??? 497
> 7???? 1?? 0????? 1????? 6
> 8???? 1?? 0????? 0???? 25
>   
> When I use the by function with a sum as an argument, I don?t
> get the sums that I would expect to
> receive based either on the listing of the dataframe above,
> or from using by with print as an argument:
>   
>> by(mydata,list(mydata$sex,mydata$status),sum)
> : 0
> : 0
> [1] 225
> -------------------------------------------------------------------------------
> : 1
> : 0
> [1] 5230
> -------------------------------------------------------------------------------
> : 0
> : 1
> [1] 14
> -------------------------------------------------------------------------------
> : 1
> : 1
> [1] 557
>   
> I expected to see the following sums:
> 382+170=552
> 4730+170=4900
> 5+6=11
> 199+25=224
> Which as can be seen by the output above, I am not getting.
>   
> Using print as an argument to the by function, I get the values
> grouped as I would expect, but for some reason I get a double
> printing of the values!
>   
>> by(mydata,list(mydata$sex,mydata$status),print)
>  ? covid sex status values
> 4???? 0?? 0????? 0??? 199
> 8???? 1?? 0????? 0???? 25
>  ? covid sex status values
> 2???? 0?? 1????? 0?? 4730
> 6???? 1?? 1????? 0??? 497
>  ? covid sex status values
> 3???? 0?? 0????? 1??? ??5
> 7???? 1?? 0????? 1????? 6
>  ? covid sex status values
> 1???? 0?? 1????? 1??? 382
> 5???? 1?? 1????? 1??? 170
> : 0
> : 0
>  ? covid sex status values
> 4???? 0?? 0????? 0??? 199
> 8???? 1?? 0????? 0???? 25
> -------------------------------------------------------------------------------
> : 1
> : 0
>  ? covid sex status values
> 2???? 0?? 1????? 0?? 4730
> 6???? 1?? 1????? 0??? 497
> -------------------------------------------------------------------------------
> : 0
> : 1
>  ? covid sex status values
> 3???? 0?? 0????? 1????? 5
> 7???? 1? ?0????? 1????? 6
> -------------------------------------------------------------------------------
> : 1
> : 1
>  ? covid sex status values
> 1???? 0?? 1????? 1??? 382
> 5???? 1?? 1????? 1??? 170
>   
> What am I doing wrong, or what don?t I understand
> About the by function?
>   
> Thank you
> John
>   
>   
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> John David Sorkin M.D., Ph.D.
>
> Professor of Medicine
>
> Chief, Biostatistics and Informatics
>
> University of Maryland School of Medicine Division of?Gerontology and Geriatric Medicine
>
> Baltimore VA Medical Center
>
> 10 North Greene Street
>
> GRECC (BT/18/GR)
>
> Baltimore, MD 21201-1524
>
> (Phone) 410-605-7119
>
> (Fax) 410-605-7913 (Please call phone number above prior to faxing)
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From kr@ckh@rdt @end|ng |rom gm@||@com  Thu Jul 23 18:44:57 2020
From: kr@ckh@rdt @end|ng |rom gm@||@com (David Krackhardt)
Date: Thu, 23 Jul 2020 12:44:57 -0400
Subject: [R] mice package won't install
Message-ID: <CALALL9OyMBw5hpMejHLp0yA9vRGWPSSctDVRuK0DAyp7Dd+KmQ@mail.gmail.com>

When I try to install the "mice" package, it tells me I can't without a
current version of Rtools.  When I try to install Rtools, it tells me the
current version is actually Rtools40.  When I try to install Rtools40, it
tells me that Rtools40 is not available for R version 3.6.3, which is the
newest version of R (and the one I have).

All I want is the "mice" library.  What do I do?

-David
 --------------------

David Krackhardt, Professor of Organizations
Heinz College of Public Policy and Management, and
     The Tepper School of Business
2215 Hamburg Hall
Carnegie Mellon University
Pittsburgh, PA 15213
website: www.andrew.cmu.edu/~krack
     (Erdos#=2)

--------------------

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Jul 24 08:55:57 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 24 Jul 2020 09:55:57 +0300
Subject: [R] mice package won't install
In-Reply-To: <CALALL9OyMBw5hpMejHLp0yA9vRGWPSSctDVRuK0DAyp7Dd+KmQ@mail.gmail.com>
References: <CALALL9OyMBw5hpMejHLp0yA9vRGWPSSctDVRuK0DAyp7Dd+KmQ@mail.gmail.com>
Message-ID: <20200724095557.07d06afe@trisector>

On Thu, 23 Jul 2020 12:44:57 -0400
David Krackhardt <krackhardt at gmail.com> wrote:

> When I try to install Rtools, it tells me the current version is
> actually Rtools40.  When I try to install Rtools40, it tells me that
> Rtools40 is not available for R version 3.6.3, which is the newest
> version of R (and the one I have).

For R 3.6.3, install the previous version of Rtools (see the
compatibility matrix at [*]).

The latest version of R as of now is R 4.0.2 [**], not 3.6.3.

I wonder why doesn't it install the binary package from [***] despite
it being available there.

-- 
Best regards,
Ivan

[*] https://cran.r-project.org/bin/windows/Rtools/history.html

[**] https://cran.r-project.org/bin/windows/base/R-4.0.2-win.exe

[***] https://cran.r-project.org/bin/windows/contrib/3.6/


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Fri Jul 24 12:08:04 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Fri, 24 Jul 2020 12:08:04 +0200
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <ABD6AC6F-3493-49FA-8D57-E75951C834D5@dcn.davis.ca.us>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
 <bab7a532-089e-2ba3-1223-837c49488271@comcast.net>
 <CA+nrPnv9-MHXgCrdK-3e3nBCPT-vssyWSy6LE-jV+KpK+xLWww@mail.gmail.com>
 <ABD6AC6F-3493-49FA-8D57-E75951C834D5@dcn.davis.ca.us>
Message-ID: <CA+nrPnsq9dUTZk8AcQem34OrF+jB=xbRJz+oGCF32eK4aofZYg@mail.gmail.com>

Ohhhh, I am very sorry for that, I have now included

output of dput is: structure(list(unique_id = c("L116", "L117", "L496",
"L9719",
"L9720", "L9721", "L9722", "L9723", "L10200", "L10201", "L10202",
"L10203", "L10204", "L10205", "L10206", "L10705", "L10706", "L10707",
"L10708", "L10709", "L10710", "L10711", "L10712", "L10713", "L10714",
"L10715", "L10716", "L10717", "L10718", "L13486"), McCC = c(6,
40, 115, 12, 14, 1, 56, 17, 1, 22, 24, 3, 59, 67, 11, 30, 1,
16, 1, 18, 4, 4, 1, 44, 1, 18, 40, 54, 1, 23), CLOC = c(0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0), LLOC = c(52, 276, 663, 73, 82, 28, 318,
167, 50, 110, 98, 22, 374, 532, 39, 266, 67, 198, 37, 84, 63,
68, 4, 372, 58, 97, 290, 318, 8, 90), `Number of previous fixes` = c(1,
2, 6, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1,
0, 1, 0, 0, 0, 1, 0, 0), `Number of previous modifications` = c(19,
58, 195, 50, 22, 11, 43, 47, 25, 14, 24, 10, 53, 97, 13, 58,
22, 94, 23, 51, 34, 18, 19, 75, 47, 28, 79, 96, 4, 10), `Number of
committers` = c(3,
3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 2, 1, 3, 2, 2,
1, 2, 2, 2, 2, 3, 1, 1), `Number of developer commits` = c(1843,
1843, 1843, 1300, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843,
1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843,
1843, 1843, 1843, 1843, 1843, 1843, 1843), `Bug class` = structure(c(2L,
2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("true",
"false"), class = "factor")), row.names = c(NA, 30L), class = "data.frame")

library(caret)
library(farff)
library(DMwR)
library(pROC)
library(pls)

setwd("C:/Users/PC/Documents")
d=readARFF("bughunter.arff")
dput( head( d, 30 ) )

index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)

tr <- d[index, ]

ts <- d[-index, ]

boot3 <- trainControl(method = "repeatedcv", number=10,
repeats=10,classProbs = TRUE,verboseIter = FALSE,

summaryFunction = twoClassSummary, sampling = "rose")

set.seed(30218)

ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC", preProc
= c("center", "scale", "nzv"), trControl = boot3)

getTrainPerf(ct)

On Thu, Jul 23, 2020 at 11:50 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> All you did was include the dput command in your example. We need the
> output of dput, not the command itself.
>
> On July 23, 2020 2:43:31 PM PDT, Neha gupta <neha.bologna90 at gmail.com>
> wrote:
> >David, I understand that the file will not be in your directory but I
> >have
> >provided the data using dput? Didn't I? Previously members of this
> >group
> >have used dput to provide the detail about their data. Seriously, I
> >have no
> >idea how else I can provide a reproducible example.
> >
> >
> >
> ><
> https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon
> >
> >Virus-free.
> >www.avast.com
> ><
> https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link
> >
> ><#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> >
> >On Thu, Jul 23, 2020 at 10:47 PM David Winsemius
> ><dwinsemius at comcast.net>
> >wrote:
> >
> >>
> >> On 7/23/20 9:34 AM, Neha gupta wrote:
> >>
> >>
> >> Hello David, file not found should be the path problem I guess. I
> >just
> >> forgot the pROC library, which I included here. These are all the
> >libraries
> >> I am using.
> >>
> >> library(caret)
> >> library(farff)
> >> library(DMwR)
> >> library(pROC)
> >> library(pls)
> >>
> >> setwd("C:/Users/PC/Documents")
> >> d=readARFF("bughunter.arff")
> >>
> >>
> >> I suppose *you* might have such a file in that directory, but do you
> >> assume that *we* will????
> >>
> >> A reproducible example will allow others to run your code. Seems
> >fairly
> >> clear that we are not there yet.
> >>
> >> --
> >>
> >> David.
> >>
> >> dput( head( d, 30 ) )
> >>
> >> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
> >>
> >> tr <- d[index, ]
> >>
> >> ts <- d[-index, ]
> >>
> >> boot3 <- trainControl(method = "repeatedcv", number=10,
> >> repeats=10,classProbs = TRUE,verboseIter = FALSE,
> >>
> >> summaryFunction = twoClassSummary, sampling = "rose")
> >>
> >> set.seed(30218)
> >>
> >> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
> >"AUC", preProc
> >> = c("center", "scale", "nzv"), trControl = boot3)
> >>
> >> getTrainPerf(ct)
> >>
> >>
> >>
> >>
> ><
> https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon
> >
> >Virus-free.
> >> www.avast.com
> >>
> ><
> https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link
> >
> >>
> >> On Thu, Jul 23, 2020 at 4:01 PM Neha gupta <neha.bologna90 at gmail.com>
> >> wrote:
> >>
> >>>
> >>> Hello David, thanks for your reply. I have added the information.
> >>>
> >>> library(caret)
> >>> library(farff)
> >>> library(DMwR)
> >>>
> >>> d=readARFF("bughunter.arff")
> >>> dput( head( d, 30 ) )
> >>>
> >>> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
> >>>
> >>> tr <- d[index, ]
> >>>
> >>> ts <- d[-index, ]
> >>>
> >>> boot3 <- trainControl(method = "repeatedcv", number=10,
> >>> repeats=10,classProbs = TRUE,verboseIter = FALSE,
> >>>
> >>> summaryFunction = twoClassSummary, sampling = "rose")
> >>>
> >>> set.seed(30218)
> >>>
> >>> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
> >"AUC", preProc
> >>> = c("center", "scale", "nzv"), trControl = boot3)
> >>>
> >>> getTrainPerf(ct)
> >>>
> >>> On Thu, Jul 23, 2020 at 1:08 AM David Winsemius
> ><dwinsemius at comcast.net>
> >>> wrote:
> >>>
> >>>>
> >>>> On 7/22/20 3:43 PM, Neha gupta wrote:
> >>>> > Hello,
> >>>> >
> >>>> >
> >>>> > I get the following error when I use the ROSE class balancing
> >method
> >>>> but
> >>>> > when I use other methods like SMOTE, up, down, I do not get any
> >error
> >>>> > message.
> >>>> >
> >>>> >
> >>>> > Something is wrong; all the ROC metric values are missing:
> >>>> >
> >>>> > ROC Sens Spec
> >>>> >
> >>>> > Min. : NA Min. : NA Min. : NA
> >>>> >
> >>>> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
> >>>> >
> >>>> > Median : NA Median : NA Median : NA
> >>>> >
> >>>> > Mean :NaN Mean :NaN Mean :NaN
> >>>> >
> >>>> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
> >>>> >
> >>>> > Max. : NA Max. : NA Max. : NA
> >>>> >
> >>>> >
> >>>> >
> >>>> > library(DMwR)
> >>>> >
> >>>> > d=readARFF("bughunter.arff")
> >>>>
> >>>> After installing that package and loading pkg:DMwR I get:
> >>>>
> >>>>
> >>>> Error in readARFF("bughunter.arff") : could not find function
> >"readARFF"
> >>>>
> >>>>
> >>>> Since you also posted in HTML, I suggest you read the Posting
> >Guide,
> >>>> restart and R session and post a reproducible example that loads
> >all
> >>>> needed packages and data.
> >>>>
> >>>> --
> >>>>
> >>>> David.
> >>>>
> >>>> >
> >>>> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
> >>>> >
> >>>> > tr <- d[index, ]
> >>>> >
> >>>> > ts <- d[-index, ]
> >>>> >
> >>>> > boot3 <- trainControl(method = "repeatedcv", number=10,
> >>>> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
> >>>> >
> >>>> > summaryFunction = twoClassSummary, sampling = "rose")
> >>>> >
> >>>> > set.seed(30218)
> >>>> >
> >>>> > ct <- train(`Bug class` ~ ., data = tr,
> >>>> >
> >>>> > method = "pls",
> >>>> >
> >>>> > metric = "AUC",
> >>>> >
> >>>> > preProc = c("center", "scale", "nzv"),
> >>>> >
> >>>> > trControl = boot3)
> >>>> >
> >>>> > getTrainPerf(ct)
> >>>> >
> >>>> >       [[alternative HTML version deleted]]
> >>>> >
> >>>> > ______________________________________________
> >>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> > PLEASE do read the posting guide
> >>>> http://www.R-project.org/posting-guide.html
> >>>> > and provide commented, minimal, self-contained, reproducible
> >code.
> >>>>
> >>>
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From r|tm84 @end|ng |rom gm@||@com  Thu Jul 23 20:11:57 2020
From: r|tm84 @end|ng |rom gm@||@com (Ritwik Mohapatra)
Date: Thu, 23 Jul 2020 23:41:57 +0530
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
Message-ID: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>

How to create a readable and legible plot in R with 10k+ values.I have a
dataframe with 17298 records.There are two columns:Machine Name(Character)
and Region(Character).So i want to create a readable plot with region in x
axis and machine name in y axis.How do i do that using ggplot or any other
way.Please help.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul 24 14:29:35 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 24 Jul 2020 08:29:35 -0400
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
Message-ID: <3edfb608-da8b-824d-7901-52261117dbac@gmail.com>

On 23/07/2020 2:11 p.m., Ritwik Mohapatra wrote:
> How to create a readable and legible plot in R with 10k+ values.I have a
> dataframe with 17298 records.There are two columns:Machine Name(Character)
> and Region(Character).So i want to create a readable plot with region in x
> axis and machine name in y axis.How do i do that using ggplot or any other
> way.Please help.

Can you point to the URL of a plot online that is similar to what you 
want?  I can't imagine a way to show 17298 character records in a graph 
in any useful way.

Duncan Murdoch


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Jul 24 14:35:16 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 24 Jul 2020 14:35:16 +0200
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
Message-ID: <24346.54660.178533.634124@stat.math.ethz.ch>

>>>>> Ritwik Mohapatra 
>>>>>     on Thu, 23 Jul 2020 23:41:57 +0530 writes:

    > How to create a readable and legible plot in R with 10k+ values.I have a
    > dataframe with 17298 records.There are two columns:Machine Name(Character)
    > and Region(Character).So i want to create a readable plot with region in x
    > axis and machine name in y axis.How do i do that using ggplot or any other
    > way.Please help.

Good answers to this question will depend very much on how many
'Machine' and 'Region' levels there are.

(and this is a case where in my opinion it'd be *MUCH* more
 useful to have 'factor' instead of 'character'.. if only just
 so
 	 str(<data>)
or   summary(<data>)

would give useful/relevant information.

--
One possibility for a somewhat cute plot is a  "good ole"
sunflower plot (base graphics, but the idea must be easily
transferable to grid-based graphics such as ggplot2):

  help(sunflowerplot)


Martin Maechler
ETH Zurich


From r@v|@v@r@dh@n @end|ng |rom jhu@edu  Thu Jul 23 21:41:05 2020
From: r@v|@v@r@dh@n @end|ng |rom jhu@edu (Ravi Varadhan)
Date: Thu, 23 Jul 2020 19:41:05 +0000
Subject: [R] A Question about MLE in R
Message-ID: <f8afff228e3b42df8ae7df61e2b5323e@jhu.edu>

I agree with John that SANN should be removed from optim.


More importantly, the default choice of optimizer in optim should be changed from "Nelder-Mead" to "BFGS."   Nelder-Mead is a bad choice for the most commonly encountered optimization problems in statistics.  I really do not see a good reason for not changing the default in optim.


Best regards,

Ravi

	[[alternative HTML version deleted]]


From moun|c@m|r|y@|@0716 @end|ng |rom gm@||@com  Fri Jul 24 01:34:26 2020
From: moun|c@m|r|y@|@0716 @end|ng |rom gm@||@com (Mounica Miriyala)
Date: Thu, 23 Jul 2020 18:34:26 -0500
Subject: [R] Windows, R version 4.0.2, read.csv() - -Error in file(file,
 "rt") : cannot open the connection In addition: Warning
 message: In file(file,
 "rt") : cannot open file 'hw1_data': No such file or directory
Message-ID: <CABsKH5=xb=9B-LRZFa1Meu5mhBuLiqqD6Zq7XiJpjQPmtmbtbA@mail.gmail.com>

HI,
I am currently taking my week 1 quiz 1. The quiz has  1 to 20 questions in
which 11 to 20 should be dealt with dataset given by the coursera. But I am
not able to open due to the mentioned error above. When I give dir() it
shows the exact file that has the dataset to be used in the quiz1 but when
i try to read the file in R it throwing the error -----"*Error in
file(file, "rt") : cannot open the connection*


*In addition: Warning message:In file(file, "rt") :  cannot open file
'hw1_data': No such file or directory*
"
Please help! I tried the google for the error and tried different ways but
still gets the same error message. I hope is will get this done in the
second attempt for my quiz1.

Regards,

Mounica Miriyala.

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Jul 24 15:06:44 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 24 Jul 2020 08:06:44 -0500
Subject: [R] help with web scraping
In-Reply-To: <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
Message-ID: <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>

Hi Bill et al.:


 ????? That broke the dam:? It gave me a character vector of length 1 
consisting of 218 KB.? I fed that to XML::readHTMLTable and 
purrr::map_chr, both of which returned lists of 337 data.frames. The 
former retained names for all the tables, absent from the latter.? The 
columns of the former are all character;? that's not true for the latter.


 ????? Sadly, it's not quite what I want:? It's one table for each 
office-party combination, but it's lost the office designation. However, 
I'm confident I can figure out how to hack that.


 ????? Thanks,
 ????? Spencer Graves


On 2020-07-23 17:46, William Michels wrote:
> Hi Spencer,
>
> I tried the code below on an older R-installation, and it works fine.
> Not a full solution, but it's a start:
>
>> library(RCurl)
> Loading required package: bitops
>> url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>> M_sos <- getURL(url)
>> print(M_sos)
> [1] "\r\n<!DOCTYPE html>\r\n\r\n<html
> lang=\"en-us\">\r\n<head><title>\r\n\tSOS, Missouri - Elections:
> Offices Filed in Candidate Filing\r\n</title><meta name=\"viewport\"
> content=\"width=device-width, initial-scale=1.0\" [...remainder
> truncated].
>
> HTH, Bill.
>
> W. Michels, Ph.D.
>
>
>
> On Thu, Jul 23, 2020 at 2:55 PM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>> Hello, All:
>>
>>
>>         I've failed with multiple attempts to scrape the table of
>> candidates from the website of the Missouri Secretary of State:
>>
>>
>> https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975
>>
>>
>>         I've tried base::url, base::readLines, xml2::read_html, and
>> XML::readHTMLTable; see summary below.
>>
>>
>>         Suggestions?
>>         Thanks,
>>         Spencer Graves
>>
>>
>> sosURL <-
>> "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>>
>> str(baseURL <- base::url(sosURL))
>> # this might give me something, but I don't know what
>>
>> sosRead <- base::readLines(sosURL) # 404 Not Found
>> sosRb <- base::readLines(baseURL) # 404 Not Found
>>
>> sosXml2 <- xml2::read_html(sosURL) # HTTP error 404.
>>
>> sosXML <- XML::readHTMLTable(sosURL)
>> # List of 0;  does not seem to be XML
>>
>> sessionInfo()
>>
>> R version 4.0.2 (2020-06-22)
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>> Running under: macOS Catalina 10.15.5
>>
>> Matrix products: default
>> BLAS:
>> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>> LAPACK:
>> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets
>> [6] methods   base
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_4.0.2 tools_4.0.2    curl_4.3
>> [4] xml2_1.3.2     XML_3.99-0.3
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Fri Jul 24 15:08:38 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Fri, 24 Jul 2020 16:08:38 +0300
Subject: [R] Windows, R version 4.0.2, read.csv() - -Error in file(file,
 "rt") : cannot open the connection In addition: Warning
 message: In file(file,
 "rt") : cannot open file 'hw1_data': No such file or directory
In-Reply-To: <CABsKH5=xb=9B-LRZFa1Meu5mhBuLiqqD6Zq7XiJpjQPmtmbtbA@mail.gmail.com>
References: <CABsKH5=xb=9B-LRZFa1Meu5mhBuLiqqD6Zq7XiJpjQPmtmbtbA@mail.gmail.com>
Message-ID: <CAGgJW748WWvhVZ_0vxQdHVkwo9OCbDCGfBxOO=7USYKkJTiR_g@mail.gmail.com>

What happens when you give the command
list.files(".","hw1_data")
?

On Fri, Jul 24, 2020 at 3:53 PM Mounica Miriyala <
mounicamiriyala0716 at gmail.com> wrote:

> HI,
> I am currently taking my week 1 quiz 1. The quiz has  1 to 20 questions in
> which 11 to 20 should be dealt with dataset given by the coursera. But I am
> not able to open due to the mentioned error above. When I give dir() it
> shows the exact file that has the dataset to be used in the quiz1 but when
> i try to read the file in R it throwing the error -----"*Error in
> file(file, "rt") : cannot open the connection*
>
>
> *In addition: Warning message:In file(file, "rt") :  cannot open file
> 'hw1_data': No such file or directory*
> "
> Please help! I tried the google for the error and tried different ways but
> still gets the same error message. I hope is will get this done in the
> second attempt for my quiz1.
>
> Regards,
>
> Mounica Miriyala.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Fri Jul 24 15:20:09 2020
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Fri, 24 Jul 2020 08:20:09 -0500 (CDT)
Subject: [R] [External] Re:  help with web scraping
In-Reply-To: <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
Message-ID: <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>

Maybe try something like this:

url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
h <- xml2::read_html(url)
tbl <- rvest::html_table(h)

Best,

luke

On Fri, 24 Jul 2020, Spencer Graves wrote:

> Hi Bill et al.:
>
>
> ????? That broke the dam:? It gave me a character vector of length 1 
> consisting of 218 KB.? I fed that to XML::readHTMLTable and purrr::map_chr, 
> both of which returned lists of 337 data.frames. The former retained names 
> for all the tables, absent from the latter.? The columns of the former are 
> all character;? that's not true for the latter.
>
>
> ????? Sadly, it's not quite what I want:? It's one table for each 
> office-party combination, but it's lost the office designation. However, I'm 
> confident I can figure out how to hack that.
>
>
> ????? Thanks,
> ????? Spencer Graves
>
>
> On 2020-07-23 17:46, William Michels wrote:
>> Hi Spencer,
>> 
>> I tried the code below on an older R-installation, and it works fine.
>> Not a full solution, but it's a start:
>> 
>>> library(RCurl)
>> Loading required package: bitops
>>> url <- 
>>> "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>>> M_sos <- getURL(url)
>>> print(M_sos)
>> [1] "\r\n<!DOCTYPE html>\r\n\r\n<html
>> lang=\"en-us\">\r\n<head><title>\r\n\tSOS, Missouri - Elections:
>> Offices Filed in Candidate Filing\r\n</title><meta name=\"viewport\"
>> content=\"width=device-width, initial-scale=1.0\" [...remainder
>> truncated].
>> 
>> HTH, Bill.
>> 
>> W. Michels, Ph.D.
>> 
>> 
>> 
>> On Thu, Jul 23, 2020 at 2:55 PM Spencer Graves
>> <spencer.graves at effectivedefense.org> wrote:
>>> Hello, All:
>>> 
>>>
>>>         I've failed with multiple attempts to scrape the table of
>>> candidates from the website of the Missouri Secretary of State:
>>> 
>>> 
>>> https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975
>>> 
>>>
>>>         I've tried base::url, base::readLines, xml2::read_html, and
>>> XML::readHTMLTable; see summary below.
>>> 
>>>
>>>         Suggestions?
>>>         Thanks,
>>>         Spencer Graves
>>> 
>>> 
>>> sosURL <-
>>> "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>>> 
>>> str(baseURL <- base::url(sosURL))
>>> # this might give me something, but I don't know what
>>> 
>>> sosRead <- base::readLines(sosURL) # 404 Not Found
>>> sosRb <- base::readLines(baseURL) # 404 Not Found
>>> 
>>> sosXml2 <- xml2::read_html(sosURL) # HTTP error 404.
>>> 
>>> sosXML <- XML::readHTMLTable(sosURL)
>>> # List of 0;  does not seem to be XML
>>> 
>>> sessionInfo()
>>> 
>>> R version 4.0.2 (2020-06-22)
>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>> Running under: macOS Catalina 10.15.5
>>> 
>>> Matrix products: default
>>> BLAS:
>>> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
>>> LAPACK:
>>> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>>> 
>>> locale:
>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>> 
>>> attached base packages:
>>> [1] stats     graphics  grDevices utils     datasets
>>> [6] methods   base
>>> 
>>> loaded via a namespace (and not attached):
>>> [1] compiler_4.0.2 tools_4.0.2    curl_4.3
>>> [4] xml2_1.3.2     XML_3.99-0.3
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From r|tm84 @end|ng |rom gm@||@com  Fri Jul 24 15:29:03 2020
From: r|tm84 @end|ng |rom gm@||@com (Ritwik Mohapatra)
Date: Fri, 24 Jul 2020 18:59:03 +0530
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <24346.54660.178533.634124@stat.math.ethz.ch>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
 <24346.54660.178533.634124@stat.math.ethz.ch>
Message-ID: <CAGY2U92yvAYhbBin2hb2Z8d5cWzii_9uGXysmFWnk1j-fDBybw@mail.gmail.com>

Hi All,

These are the two codes i have used so far:-
ggplot(df3_machine_region,aes(Region,Machine.Name)) +
  geom_count()
!![2nd Plot|690x375](upload://gTyYUXe6lPJXCdyvqRBtUZ8zsyL.png) [1st
Plot|690x375](upload://bb0ux9WheqM4ViyYf3Gki6TKtlG.png)
ggplot(df3_machine_region,aes(Region,Machine.Name)) +
  geom_jitter(aes(colour=Region))

I have to present the plot to my stakeholders,so thats why its required in
a readable and legible way.

There would be approximately 10k+ values(max) for machine and region
combination.

I have attached the output plots for your reference.Please find below a
snapshot of data for your reference.

|Machine.Name|Region|
|0460-EPBS1.sga-res.com|Europe|
|04821-EABS1.sga-res.com|Europe|
|10429-EDABS1.sga-res.com|Europe|
|1042619-ESWEBS1.sga-res.com|Europe|
|ABE-L-98769.europe.shell.com|Americas|
|AB-L-98769.europe.shell.com|APAC|
|AB-L-98769.europe.shell.com|Europe|
|ABE-L-98769.europe.shell.com (2)|Americas|
|ABE-L-98769.europe.shell.com (2)|Europe|
|ABE-L-98840.europe.shell.com|Americas|
|AB-L-98840.europe.shell.com|APAC|
|ABE-L-98840.europe.shell.com|Europe|
|AB-L-98854.europe.shell.com|Americas|
|ABE-L-98854.europe.shell.com|Europe|
|ABE-L-98862.europe.shell.com|Americas|

Regards,
Ritwik

On Fri, Jul 24, 2020 at 6:05 PM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Ritwik Mohapatra
> >>>>>     on Thu, 23 Jul 2020 23:41:57 +0530 writes:
>
>     > How to create a readable and legible plot in R with 10k+ values.I
> have a
>     > dataframe with 17298 records.There are two columns:Machine
> Name(Character)
>     > and Region(Character).So i want to create a readable plot with
> region in x
>     > axis and machine name in y axis.How do i do that using ggplot or any
> other
>     > way.Please help.
>
> Good answers to this question will depend very much on how many
> 'Machine' and 'Region' levels there are.
>
> (and this is a case where in my opinion it'd be *MUCH* more
>  useful to have 'factor' instead of 'character'.. if only just
>  so
>          str(<data>)
> or   summary(<data>)
>
> would give useful/relevant information.
>
> --
> One possibility for a somewhat cute plot is a  "good ole"
> sunflower plot (base graphics, but the idea must be easily
> transferable to grid-based graphics such as ggplot2):
>
>   help(sunflowerplot)
>
>
> Martin Maechler
> ETH Zurich
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 1st Plot.png
Type: image/png
Size: 29513 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200724/24142a98/attachment.png>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2nd Plot.png
Type: image/png
Size: 35282 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200724/24142a98/attachment-0001.png>

From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Jul 24 15:58:33 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 24 Jul 2020 08:58:33 -0500
Subject: [R] [External] Re:  help with web scraping
In-Reply-To: <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
Message-ID: <1e04ebcb-e039-c957-4954-82d6fbf247cc@effectivedefense.org>



On 2020-07-24 08:20, luke-tierney at uiowa.edu wrote:
> Maybe try something like this:
>
> url <- 
> "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> h <- xml2::read_html(url)


Error in open.connection(x, "rb") : HTTP error 404.


 ????? Thanks for the suggestion, but this failed for me on the platform 
described in "sessionInfo" below.


> tbl <- rvest::html_table(h)


 ????? As I previously noted, RCurl::getURL returned a single character 
string of roughly 218 KB, from which I've so far gotten most but not all 
of what I want.? Unfortunately, when I fed that character vector to 
rvest::html_table, I got:


Error in UseMethod("html_table") :
 ? no applicable method for 'html_table' applied to an object of class 
"character"


 ????? I don't know for sure yet, but I believe I'll be able to get what 
I want from the single character string using, e.g., gregexpr and other 
functions.


 ????? Thanks again,
 ????? Spencer Graves

>
> Best,
>
> luke
>
> On Fri, 24 Jul 2020, Spencer Graves wrote:
>
>> Hi Bill et al.:
>>
>>
>> ????? That broke the dam:? It gave me a character vector of length 1 
>> consisting of 218 KB.? I fed that to XML::readHTMLTable and 
>> purrr::map_chr, both of which returned lists of 337 data.frames. The 
>> former retained names for all the tables, absent from the latter.? 
>> The columns of the former are all character;? that's not true for the 
>> latter.
>>
>>
>> ????? Sadly, it's not quite what I want:? It's one table for each 
>> office-party combination, but it's lost the office designation. 
>> However, I'm confident I can figure out how to hack that.
>>
>>
>> ????? Thanks,
>> ????? Spencer Graves
>>
>>
>> On 2020-07-23 17:46, William Michels wrote:
>>> Hi Spencer,
>>>
>>> I tried the code below on an older R-installation, and it works fine.
>>> Not a full solution, but it's a start:
>>>
>>>> library(RCurl)
>>> Loading required package: bitops
>>>> url <- 
>>>> "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>>>> M_sos <- getURL(url)
>>>> print(M_sos)
>>> [1] "\r\n<!DOCTYPE html>\r\n\r\n<html
>>> lang=\"en-us\">\r\n<head><title>\r\n\tSOS, Missouri - Elections:
>>> Offices Filed in Candidate Filing\r\n</title><meta name=\"viewport\"
>>> content=\"width=device-width, initial-scale=1.0\" [...remainder
>>> truncated].
>>>
>>> HTH, Bill.
>>>
>>> W. Michels, Ph.D.
>>>
>>>
>>>
>>> On Thu, Jul 23, 2020 at 2:55 PM Spencer Graves
>>> <spencer.graves at effectivedefense.org> wrote:
>>>> Hello, All:
>>>>
>>>>
>>>> ??????? I've failed with multiple attempts to scrape the table of
>>>> candidates from the website of the Missouri Secretary of State:
>>>>
>>>>
>>>> https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975 
>>>>
>>>>
>>>>
>>>> ??????? I've tried base::url, base::readLines, xml2::read_html, and
>>>> XML::readHTMLTable; see summary below.
>>>>
>>>>
>>>> ??????? Suggestions?
>>>> ??????? Thanks,
>>>> ??????? Spencer Graves
>>>>
>>>>
>>>> sosURL <-
>>>> "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975" 
>>>>
>>>>
>>>> str(baseURL <- base::url(sosURL))
>>>> # this might give me something, but I don't know what
>>>>
>>>> sosRead <- base::readLines(sosURL) # 404 Not Found
>>>> sosRb <- base::readLines(baseURL) # 404 Not Found
>>>>
>>>> sosXml2 <- xml2::read_html(sosURL) # HTTP error 404.
>>>>
>>>> sosXML <- XML::readHTMLTable(sosURL)
>>>> # List of 0;? does not seem to be XML
>>>>
>>>> sessionInfo()
>>>>
>>>> R version 4.0.2 (2020-06-22)
>>>> Platform: x86_64-apple-darwin17.0 (64-bit)
>>>> Running under: macOS Catalina 10.15.5
>>>>
>>>> Matrix products: default
>>>> BLAS:
>>>> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 
>>>>
>>>> LAPACK:
>>>> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib 
>>>>
>>>>
>>>> locale:
>>>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>>>
>>>> attached base packages:
>>>> [1] stats???? graphics? grDevices utils???? datasets
>>>> [6] methods?? base
>>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] compiler_4.0.2 tools_4.0.2??? curl_4.3
>>>> [4] xml2_1.3.2???? XML_3.99-0.3
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide 
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From jr@| @end|ng |rom po@teo@no  Fri Jul 24 16:16:18 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 24 Jul 2020 16:16:18 +0200
Subject: [R] [External] Re:  help with web scraping
In-Reply-To: <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
Message-ID: <20200724141618.GB144650@posteo.no>

On 2020-07-24 08:20 -0500, luke-tierney at uiowa.edu wrote:
> On Fri, 24 Jul 2020, Spencer Graves wrote:
> > On 2020-07-23 17:46, William Michels wrote:
> > > On Thu, Jul 23, 2020 at 2:55 PM Spencer Graves
> > > <spencer.graves at effectivedefense.org> wrote:
> > > > Hello, All:
> > > > 
> > > > I've failed with multiple 
> > > > attempts to scrape the table of 
> > > > candidates from the website of 
> > > > the Missouri Secretary of 
> > > > State:
> > > > 
> > > > https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975
> > > 
> > > Hi Spencer,
> > > 
> > > I tried the code below on an older 
> > > R-installation, and it works fine.  
> > > Not a full solution, but it's a 
> > > start:
> > > 
> > > > library(RCurl)
> > > Loading required package: bitops
> > > > url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> > > > M_sos <- getURL(url)
> > 
> > Hi Bill et al.:
> > 
> > That broke the dam:? It gave me a 
> > character vector of length 1 
> > consisting of 218 KB.? I fed that to 
> > XML::readHTMLTable and 
> > purrr::map_chr, both of which 
> > returned lists of 337 data.frames. 
> > The former retained names for all 
> > the tables, absent from the latter.? 
> > The columns of the former are all 
> > character;? that's not true for the 
> > latter.
> > 
> > Sadly, it's not quite what I want:? 
> > It's one table for each office-party 
> > combination, but it's lost the 
> > office designation. However, I'm 
> > confident I can figure out how to 
> > hack that.
> 
> Maybe try something like this:
> 
> url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> h <- xml2::read_html(url)
> tbl <- rvest::html_table(h)

Dear Spencer,

I unified the party tables after the 
first summary table like this:

	url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
	M_sos <- RCurl::getURL(url)
	saveRDS(object=M_sos, file="dcp.rds")
	dat <- XML::readHTMLTable(M_sos)
	idx <- 2:length(dat)
	cn <- unique(unlist(lapply(dat[idx], colnames)))
	dat <- do.call(rbind,
	  sapply(idx, function(i, dat, cn) {
	    x <- dat[[i]]
	    x[,cn[!(cn %in% colnames(x))]] <- NA
	    x <- x[,cn]
	    x$Party <- names(dat)[i]
	    return(list(x))
	  }, dat=dat, cn=cn))
	dat[,"Date Filed"] <-
	  as.Date(x=dat[,"Date Filed"],
	          format="%m/%d/%Y")
	write.table(dat, file="dcp.tsv", sep="\t",
	            row.names=FALSE,
	            quote=TRUE, na="N/A") 

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200724/1d52dffb/attachment.sig>

From jrkr|de@u @end|ng |rom gm@||@com  Fri Jul 24 16:16:14 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Fri, 24 Jul 2020 10:16:14 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
Message-ID: <CAKZQJMB5yC1LGQ3BnBiUTpUcM+zB4c4Yg39+3F29f3cPGzD-Ng@mail.gmail.com>

We reallly need to see more code (a minimum working example and some data.

For some suggestions on how to do this see

 http://adv-r.had.co.nz/Reproducibility.html

http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

On Fri, 24 Jul 2020 at 01:16, H <agents at meddatainc.com> wrote:

> I am trying to arrange two plots vertically, ie plot 2 below plot 1, where
> I want the plots to align columnwise but have a height ratio of eg 3:1.
>
> My attempts so far after consulting various webpages is that the following
> code aligns them columnwise correctly but I have, so far, failed in setting
> the relative heights...
>
> g2<-ggplotGrob(s)
> g3<-ggplotGrob(v)
> g<-rbind(g2, g3, size = "first")
> g$widths<-unit.pmax(g2$widths, g3$widths)
>
> what would the appropriate statement for the relative heights to add here
> be?
>
> grid.newpage()
> grid.draw(g)
>
> Thank you!
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From pro|jcn@@h @end|ng |rom gm@||@com  Fri Jul 24 16:48:29 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 24 Jul 2020 10:48:29 -0400
Subject: [R] mice package won't install
In-Reply-To: <CALALL9OyMBw5hpMejHLp0yA9vRGWPSSctDVRuK0DAyp7Dd+KmQ@mail.gmail.com>
References: <CALALL9OyMBw5hpMejHLp0yA9vRGWPSSctDVRuK0DAyp7Dd+KmQ@mail.gmail.com>
Message-ID: <284aee0b-4145-2f8e-f428-dfb8e9fef1e3@gmail.com>

Apologies in advance if this is a red herring, but I've had a number of issues
with installing latest (4.0.2) version of R and related packages. Maybe my
experience will be helpful to you.

Note that you don't give your OS etc., which also my mean my suggestions are
moot.

I run Linux, mostly Mint. Recently I upgraded to LM 20. And then upgraded
R from 3.5.x to 4.0.x. When updating packages, I found lots of errors where
a dependency was stated to be pre-version 4 and to reinstall. But even
after a re-install, I got the same message. This occurred on 3 machines in
slightly different manifestations, likely because the machines are different
ages and there may be more or less "old" material lurking in folders that
should have been removed a long time ago. My suspicion is that the wrong
libraries were being accessed.

My solution was to
- remove --purge r-base-dev r-recommended
- delete directories /usr/lib/R, /usr/local/lib/R and ~/R
- reinstall (noting that the software sources needed to point to debian focal and cran40).
- install packages I needed

This may be a bit drastic, but R and Linux make the task relatively undemanding. It also
gives a cleaned up R ecosystem, as the ongoing addition of bits and pieces makes for
quite a load of packages, some of which are almost certain to be unused but may cause
trouble.

Good luck,

John Nash

On 2020-07-23 12:44 p.m., David Krackhardt wrote:
> When I try to install the "mice" package, it tells me I can't without a
> current version of Rtools.  When I try to install Rtools, it tells me the
> current version is actually Rtools40.  When I try to install Rtools40, it
> tells me that Rtools40 is not available for R version 3.6.3, which is the
> newest version of R (and the one I have).
> 
> All I want is the "mice" library.  What do I do?
> 
> -David
>  --------------------
> 
> David Krackhardt, Professor of Organizations
> Heinz College of Public Policy and Management, and
>      The Tepper School of Business
> 2215 Hamburg Hall
> Carnegie Mellon University
> Pittsburgh, PA 15213
> website: www.andrew.cmu.edu/~krack
>      (Erdos#=2)
> 
> --------------------
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jul 24 16:50:02 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 24 Jul 2020 07:50:02 -0700
Subject: [R] Windows, R version 4.0.2, read.csv() - -Error in file(file,
 "rt") : cannot open the connection In addition: Warning
 message: In file(file,
 "rt") : cannot open file 'hw1_data': No such file or directory
In-Reply-To: <CABsKH5=xb=9B-LRZFa1Meu5mhBuLiqqD6Zq7XiJpjQPmtmbtbA@mail.gmail.com>
References: <CABsKH5=xb=9B-LRZFa1Meu5mhBuLiqqD6Zq7XiJpjQPmtmbtbA@mail.gmail.com>
Message-ID: <F26F439B-4339-46B4-92B1-EA00F5F4B3EE@dcn.davis.ca.us>

Per the Posting Guide, homework help is off-topic on this mailing list, since educational institutions are supposed to have support tailored to your educational pragram.

Regardless of policy, it is very difficult to address very basic questions such as yours via written communication only... for your sake you should find interactive support through screen sharing or at least audio channels from someone already familiar with your assignment.

On July 23, 2020 4:34:26 PM PDT, Mounica Miriyala <mounicamiriyala0716 at gmail.com> wrote:
>HI,
>I am currently taking my week 1 quiz 1. The quiz has  1 to 20 questions
>in
>which 11 to 20 should be dealt with dataset given by the coursera. But
>I am
>not able to open due to the mentioned error above. When I give dir() it
>shows the exact file that has the dataset to be used in the quiz1 but
>when
>i try to read the file in R it throwing the error -----"*Error in
>file(file, "rt") : cannot open the connection*
>
>
>*In addition: Warning message:In file(file, "rt") :  cannot open file
>'hw1_data': No such file or directory*
>"
>Please help! I tried the google for the error and tried different ways
>but
>still gets the same error message. I hope is will get this done in the
>second attempt for my quiz1.
>
>Regards,
>
>Mounica Miriyala.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Jul 24 17:28:12 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 24 Jul 2020 10:28:12 -0500
Subject: [R] [External] Re: help with web scraping
In-Reply-To: <20200724141618.GB144650@posteo.no>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
 <20200724141618.GB144650@posteo.no>
Message-ID: <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>

Dear Rasmus:


On 2020-07-24 09:16, Rasmus Liland wrote:
> On 2020-07-24 08:20 -0500, luke-tierney at uiowa.edu wrote:
>> On Fri, 24 Jul 2020, Spencer Graves wrote:
>>> On 2020-07-23 17:46, William Michels wrote:
>>>> On Thu, Jul 23, 2020 at 2:55 PM Spencer Graves
>>>> <spencer.graves at effectivedefense.org> wrote:
>>>>> Hello, All:
>>>>>
>>>>> I've failed with multiple
>>>>> attempts to scrape the table of
>>>>> candidates from the website of
>>>>> the Missouri Secretary of
>>>>> State:
>>>>>
>>>>> https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975
>>>> Hi Spencer,
>>>>
>>>> I tried the code below on an older
>>>> R-installation, and it works fine.
>>>> Not a full solution, but it's a
>>>> start:
>>>>
>>>>> library(RCurl)
>>>> Loading required package: bitops
>>>>> url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>>>>> M_sos <- getURL(url)
>>> Hi Bill et al.:
>>>
>>> That broke the dam:? It gave me a
>>> character vector of length 1
>>> consisting of 218 KB.? I fed that to
>>> XML::readHTMLTable and
>>> purrr::map_chr, both of which
>>> returned lists of 337 data.frames.
>>> The former retained names for all
>>> the tables, absent from the latter.
>>> The columns of the former are all
>>> character;? that's not true for the
>>> latter.
>>>
>>> Sadly, it's not quite what I want:
>>> It's one table for each office-party
>>> combination, but it's lost the
>>> office designation. However, I'm
>>> confident I can figure out how to
>>> hack that.
>> Maybe try something like this:
>>
>> url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>> h <- xml2::read_html(url)
>> tbl <- rvest::html_table(h)
> Dear Spencer,
>
> I unified the party tables after the
> first summary table like this:
>
> 	url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> 	M_sos <- RCurl::getURL(url)
> 	saveRDS(object=M_sos, file="dcp.rds")
> 	dat <- XML::readHTMLTable(M_sos)
> 	idx <- 2:length(dat)
> 	cn <- unique(unlist(lapply(dat[idx], colnames)))


 ????? This is useful for this application.

> 	dat <- do.call(rbind,
> 	  sapply(idx, function(i, dat, cn) {
> 	    x <- dat[[i]]
> 	    x[,cn[!(cn %in% colnames(x))]] <- NA
> 	    x <- x[,cn]
> 	    x$Party <- names(dat)[i]
> 	    return(list(x))
> 	  }, dat=dat, cn=cn))
> 	dat[,"Date Filed"] <-
> 	  as.Date(x=dat[,"Date Filed"],
> 	          format="%m/%d/%Y")


 ????? This misses something extremely important for this application:? 
The political office.? That's buried in the HTML or whatever it is.? I'm 
using something like the following to find that:


str(LtGov <- gregexpr('Lieutenant Governor', M_sos)[[1]])


 ????? After I figure this out, I will use something like your code to 
combine it all into separate tables for each office, and then probably 
combine those into one table for the offices I'm interested in.? For my 
present purposes, I don't want all the offices in Missouri, only the 
executive positions and those representing parts of the Kansas City 
metro area in the Missouri legislature.


 ????? Thanks again,
 ????? Spencer Graves

> 	write.table(dat, file="dcp.tsv", sep="\t",
> 	            row.names=FALSE,
> 	            quote=TRUE, na="N/A")
>
> Best,
> Rasmus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Fri Jul 24 18:01:32 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Fri, 24 Jul 2020 12:01:32 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <CAKZQJMB5yC1LGQ3BnBiUTpUcM+zB4c4Yg39+3F29f3cPGzD-Ng@mail.gmail.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <CAKZQJMB5yC1LGQ3BnBiUTpUcM+zB4c4Yg39+3F29f3cPGzD-Ng@mail.gmail.com>
Message-ID: <d599154d-664f-bc06-ba15-dba4950cc9d2@meddatainc.com>

On 07/24/2020 10:16 AM, John Kane wrote:
> We reallly need to see more code (a minimum working example and some data.
>
> For some suggestions on how to do this see
>
> ?http://adv-r.had.co.nz/Reproducibility.html
>
> http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>
> On Fri, 24 Jul 2020 at 01:16, H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
>
>     I am trying to arrange two plots vertically, ie plot 2 below plot 1, where I want the plots to align columnwise but have a height ratio of eg 3:1.
>
>     My attempts so far after consulting various webpages is that the following code aligns them columnwise correctly but I have, so far, failed in setting the relative heights...
>
>     g2<-ggplotGrob(s)
>     g3<-ggplotGrob(v)
>     g<-rbind(g2, g3, size = "first")
>     g$widths<-unit.pmax(g2$widths, g3$widths)
>
>     what would the appropriate statement for the relative heights to add here be?
>
>     grid.newpage()
>     grid.draw(g)
>
>     Thank you!
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>
>
>
> -- 
> John Kane
> Kingston ON Canada

Well, I am not looking for help debugging my code but for information to better understand arranging plots vertically. The code above aligns them horizontally as expected.


	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Fri Jul 24 18:02:37 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Fri, 24 Jul 2020 12:02:37 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
Message-ID: <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>

On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
> Hav a look at the packages cowplot and patchwork
>
>> On 24.07.2020, at 02:36, H <agents at meddatainc.com> wrote:
>>
>> I am trying to arrange two plots vertically, ie plot 2 below plot 1, where I want the plots to align columnwise but have a height ratio of eg 3:1.
>>
>> My attempts so far after consulting various webpages is that the following code aligns them columnwise correctly but I have, so far, failed in setting the relative heights...
>>
>> g2<-ggplotGrob(s)
>> g3<-ggplotGrob(v)
>> g<-rbind(g2, g3, size = "first")
>> g$widths<-unit.pmax(g2$widths, g3$widths)
>>
>> what would the appropriate statement for the relative heights to add here be?
>>
>> grid.newpage()
>> grid.draw(g)
>>
>> Thank you!
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

So this is not possible without using one of those two packages? I got the impression I should be able to use grid.arrange to do so but was not able to get it to work without disturbing the width alignment above...


From jrkr|de@u @end|ng |rom gm@||@com  Fri Jul 24 19:14:30 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Fri, 24 Jul 2020 13:14:30 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
Message-ID: <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>

<i>Well, I am not looking for help debugging my code but for information to
better understand arranging plots vertically. The code above aligns them
horizontally as expected.</i>

Sigh, we know the code works but we do not know what the plots are   and we
cannot play around with them to see if we can help you if we have nothing
to work with.

On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com> wrote:

> On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
> > Hav a look at the packages cowplot and patchwork
> >
> >> On 24.07.2020, at 02:36, H <agents at meddatainc.com> wrote:
> >>
> >> I am trying to arrange two plots vertically, ie plot 2 below plot 1,
> where I want the plots to align columnwise but have a height ratio of eg
> 3:1.
> >>
> >> My attempts so far after consulting various webpages is that the
> following code aligns them columnwise correctly but I have, so far, failed
> in setting the relative heights...
> >>
> >> g2<-ggplotGrob(s)
> >> g3<-ggplotGrob(v)
> >> g<-rbind(g2, g3, size = "first")
> >> g$widths<-unit.pmax(g2$widths, g3$widths)
> >>
> >> what would the appropriate statement for the relative heights to add
> here be?
> >>
> >> grid.newpage()
> >> grid.draw(g)
> >>
> >> Thank you!
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
> So this is not possible without using one of those two packages? I got the
> impression I should be able to use grid.arrange to do so but was not able
> to get it to work without disturbing the width alignment above...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Fri Jul 24 19:46:57 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Fri, 24 Jul 2020 13:46:57 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
Message-ID: <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>

On 07/24/2020 01:14 PM, John Kane wrote:
> <i>Well, I am not looking for help debugging my code but for information to better understand arranging plots vertically. The code above aligns them horizontally as expected.</i>
>
> Sigh, we know the code works but we do not know what the plots are ? and we cannot play around with them to see if we can help you if we have nothing to work with.
>
> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
>
>     On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>     > Hav a look at the packages cowplot and patchwork
>     >
>     >> On 24.07.2020, at 02:36, H <agents at meddatainc.com <mailto:agents at meddatainc.com>> wrote:
>     >>
>     >> I am trying to arrange two plots vertically, ie plot 2 below plot 1, where I want the plots to align columnwise but have a height ratio of eg 3:1.
>     >>
>     >> My attempts so far after consulting various webpages is that the following code aligns them columnwise correctly but I have, so far, failed in setting the relative heights...
>     >>
>     >> g2<-ggplotGrob(s)
>     >> g3<-ggplotGrob(v)
>     >> g<-rbind(g2, g3, size = "first")
>     >> g$widths<-unit.pmax(g2$widths, g3$widths)
>     >>
>     >> what would the appropriate statement for the relative heights to add here be?
>     >>
>     >> grid.newpage()
>     >> grid.draw(g)
>     >>
>     >> Thank you!
>     >>
>     >> ______________________________________________
>     >> R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>     >> https://stat.ethz.ch/mailman/listinfo/r-help
>     >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     >> and provide commented, minimal, self-contained, reproducible code.
>
>     So this is not possible without using one of those two packages? I got the impression I should be able to use grid.arrange to do so but was not able to get it to work without disturbing the width alignment above...
>
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>
>
>
> -- 
> John Kane
> Kingston ON Canada

No need to play around with anything. I am simply looking for assistance on how to use eg arrangeGrob to not only align two plots columnwise but also adjust their heights relative to each other rather than 1:1.

Can arrangeGrob() be used for that?


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jul 24 20:03:08 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 24 Jul 2020 11:03:08 -0700
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
Message-ID: <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>

The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.

On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>On 07/24/2020 01:14 PM, John Kane wrote:
>> <i>Well, I am not looking for help debugging my code but for
>information to better understand arranging plots vertically. The code
>above aligns them horizontally as expected.</i>
>>
>> Sigh, we know the code works but we do not know what the plots are ?
>and we cannot play around with them to see if we can help you if we
>have nothing to work with.
>>
>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
><mailto:agents at meddatainc.com>> wrote:
>>
>>     On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>     > Hav a look at the packages cowplot and patchwork
>>     >
>>     >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
><mailto:agents at meddatainc.com>> wrote:
>>     >>
>>     >> I am trying to arrange two plots vertically, ie plot 2 below
>plot 1, where I want the plots to align columnwise but have a height
>ratio of eg 3:1.
>>     >>
>>     >> My attempts so far after consulting various webpages is that
>the following code aligns them columnwise correctly but I have, so far,
>failed in setting the relative heights...
>>     >>
>>     >> g2<-ggplotGrob(s)
>>     >> g3<-ggplotGrob(v)
>>     >> g<-rbind(g2, g3, size = "first")
>>     >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>     >>
>>     >> what would the appropriate statement for the relative heights
>to add here be?
>>     >>
>>     >> grid.newpage()
>>     >> grid.draw(g)
>>     >>
>>     >> Thank you!
>>     >>
>>     >> ______________________________________________
>>     >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>list -- To UNSUBSCRIBE and more, see
>>     >> https://stat.ethz.ch/mailman/listinfo/r-help
>>     >> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>>     >> and provide commented, minimal, self-contained, reproducible
>code.
>>
>>     So this is not possible without using one of those two packages?
>I got the impression I should be able to use grid.arrange to do so but
>was not able to get it to work without disturbing the width alignment
>above...
>>
>>     ______________________________________________
>>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>-- To UNSUBSCRIBE and more, see
>>     https://stat.ethz.ch/mailman/listinfo/r-help
>>     PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>>     and provide commented, minimal, self-contained, reproducible
>code.
>>
>>
>>
>> -- 
>> John Kane
>> Kingston ON Canada
>
>No need to play around with anything. I am simply looking for
>assistance on how to use eg arrangeGrob to not only align two plots
>columnwise but also adjust their heights relative to each other rather
>than 1:1.
>
>Can arrangeGrob() be used for that?
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @gent@ @end|ng |rom medd@t@|nc@com  Fri Jul 24 20:50:48 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Fri, 24 Jul 2020 14:50:48 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
Message-ID: <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>

On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>
> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>> On 07/24/2020 01:14 PM, John Kane wrote:
>>> <i>Well, I am not looking for help debugging my code but for
>> information to better understand arranging plots vertically. The code
>> above aligns them horizontally as expected.</i>
>>> Sigh, we know the code works but we do not know what the plots are ?
>> and we cannot play around with them to see if we can help you if we
>> have nothing to work with.
>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>> <mailto:agents at meddatainc.com>> wrote:
>>>     On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>     > Hav a look at the packages cowplot and patchwork
>>>     >
>>>     >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>> <mailto:agents at meddatainc.com>> wrote:
>>>     >>
>>>     >> I am trying to arrange two plots vertically, ie plot 2 below
>> plot 1, where I want the plots to align columnwise but have a height
>> ratio of eg 3:1.
>>>     >>
>>>     >> My attempts so far after consulting various webpages is that
>> the following code aligns them columnwise correctly but I have, so far,
>> failed in setting the relative heights...
>>>     >>
>>>     >> g2<-ggplotGrob(s)
>>>     >> g3<-ggplotGrob(v)
>>>     >> g<-rbind(g2, g3, size = "first")
>>>     >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>     >>
>>>     >> what would the appropriate statement for the relative heights
>> to add here be?
>>>     >>
>>>     >> grid.newpage()
>>>     >> grid.draw(g)
>>>     >>
>>>     >> Thank you!
>>>     >>
>>>     >> ______________________________________________
>>>     >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>> list -- To UNSUBSCRIBE and more, see
>>>     >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>     >> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>>     >> and provide commented, minimal, self-contained, reproducible
>> code.
>>>     So this is not possible without using one of those two packages?
>> I got the impression I should be able to use grid.arrange to do so but
>> was not able to get it to work without disturbing the width alignment
>> above...
>>>     ______________________________________________
>>>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>> -- To UNSUBSCRIBE and more, see
>>>     https://stat.ethz.ch/mailman/listinfo/r-help
>>>     PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>>     and provide commented, minimal, self-contained, reproducible
>> code.
>>>
>>>
>>> -- 
>>> John Kane
>>> Kingston ON Canada
>> No need to play around with anything. I am simply looking for
>> assistance on how to use eg arrangeGrob to not only align two plots
>> columnwise but also adjust their heights relative to each other rather
>> than 1:1.
>>
>> Can arrangeGrob() be used for that?
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:

|library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |

|to make the second chart 1/2 the size of the top one?|

||


	[[alternative HTML version deleted]]


From m@z@t|@nmex|co @end|ng |rom y@hoo@com  Fri Jul 24 20:57:11 2020
From: m@z@t|@nmex|co @end|ng |rom y@hoo@com (Felipe Carrillo)
Date: Fri, 24 Jul 2020 18:57:11 +0000 (UTC)
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
Message-ID: <603185094.6758128.1595617031422@mail.yahoo.com>

What about cowplot?
https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html

    On Friday, July 24, 2020, 11:51:17 AM PDT, H <agents at meddatainc.com> wrote:  
 
 On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>
> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>> On 07/24/2020 01:14 PM, John Kane wrote:
>>> <i>Well, I am not looking for help debugging my code but for
>> information to better understand arranging plots vertically. The code
>> above aligns them horizontally as expected.</i>
>>> Sigh, we know the code works but we do not know what the plots are ?
>> and we cannot play around with them to see if we can help you if we
>> have nothing to work with.
>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>> <mailto:agents at meddatainc.com>> wrote:
>>>? ? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>? ? > Hav a look at the packages cowplot and patchwork
>>>? ? >
>>>? ? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>> <mailto:agents at meddatainc.com>> wrote:
>>>? ? >>
>>>? ? >> I am trying to arrange two plots vertically, ie plot 2 below
>> plot 1, where I want the plots to align columnwise but have a height
>> ratio of eg 3:1.
>>>? ? >>
>>>? ? >> My attempts so far after consulting various webpages is that
>> the following code aligns them columnwise correctly but I have, so far,
>> failed in setting the relative heights...
>>>? ? >>
>>>? ? >> g2<-ggplotGrob(s)
>>>? ? >> g3<-ggplotGrob(v)
>>>? ? >> g<-rbind(g2, g3, size = "first")
>>>? ? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>? ? >>
>>>? ? >> what would the appropriate statement for the relative heights
>> to add here be?
>>>? ? >>
>>>? ? >> grid.newpage()
>>>? ? >> grid.draw(g)
>>>? ? >>
>>>? ? >> Thank you!
>>>? ? >>
>>>? ? >> ______________________________________________
>>>? ? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>> list -- To UNSUBSCRIBE and more, see
>>>? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>? ? >> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>>? ? >> and provide commented, minimal, self-contained, reproducible
>> code.
>>>? ? So this is not possible without using one of those two packages?
>> I got the impression I should be able to use grid.arrange to do so but
>> was not able to get it to work without disturbing the width alignment
>> above...
>>>? ? ______________________________________________
>>>? ? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>> -- To UNSUBSCRIBE and more, see
>>>? ? https://stat.ethz.ch/mailman/listinfo/r-help
>>>? ? PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>>? ? and provide commented, minimal, self-contained, reproducible
>> code.
>>>
>>>
>>> -- 
>>> John Kane
>>> Kingston ON Canada
>> No need to play around with anything. I am simply looking for
>> assistance on how to use eg arrangeGrob to not only align two plots
>> columnwise but also adjust their heights relative to each other rather
>> than 1:1.
>>
>> Can arrangeGrob() be used for that?
>>
>>
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:

|library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |

|to make the second chart 1/2 the size of the top one?|

||


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Fri Jul 24 21:07:08 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Fri, 24 Jul 2020 15:07:08 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
Message-ID: <b0bda5bd-f11c-e9a8-7b0e-19ee6a766803@meddatainc.com>

On 07/24/2020 02:50 PM, H wrote:
> On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>>
>> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>> On 07/24/2020 01:14 PM, John Kane wrote:
>>>> <i>Well, I am not looking for help debugging my code but for
>>> information to better understand arranging plots vertically. The code
>>> above aligns them horizontally as expected.</i>
>>>> Sigh, we know the code works but we do not know what the plots are ?
>>> and we cannot play around with them to see if we can help you if we
>>> have nothing to work with.
>>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>> <mailto:agents at meddatainc.com>> wrote:
>>>>     On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>>     > Hav a look at the packages cowplot and patchwork
>>>>     >
>>>>     >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>> <mailto:agents at meddatainc.com>> wrote:
>>>>     >>
>>>>     >> I am trying to arrange two plots vertically, ie plot 2 below
>>> plot 1, where I want the plots to align columnwise but have a height
>>> ratio of eg 3:1.
>>>>     >>
>>>>     >> My attempts so far after consulting various webpages is that
>>> the following code aligns them columnwise correctly but I have, so far,
>>> failed in setting the relative heights...
>>>>     >>
>>>>     >> g2<-ggplotGrob(s)
>>>>     >> g3<-ggplotGrob(v)
>>>>     >> g<-rbind(g2, g3, size = "first")
>>>>     >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>>     >>
>>>>     >> what would the appropriate statement for the relative heights
>>> to add here be?
>>>>     >>
>>>>     >> grid.newpage()
>>>>     >> grid.draw(g)
>>>>     >>
>>>>     >> Thank you!
>>>>     >>
>>>>     >> ______________________________________________
>>>>     >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>> list -- To UNSUBSCRIBE and more, see
>>>>     >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>     >> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>>     >> and provide commented, minimal, self-contained, reproducible
>>> code.
>>>>     So this is not possible without using one of those two packages?
>>> I got the impression I should be able to use grid.arrange to do so but
>>> was not able to get it to work without disturbing the width alignment
>>> above...
>>>>     ______________________________________________
>>>>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>> -- To UNSUBSCRIBE and more, see
>>>>     https://stat.ethz.ch/mailman/listinfo/r-help
>>>>     PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>>     and provide commented, minimal, self-contained, reproducible
>>> code.
>>>> -- 
>>>> John Kane
>>>> Kingston ON Canada
>>> No need to play around with anything. I am simply looking for
>>> assistance on how to use eg arrangeGrob to not only align two plots
>>> columnwise but also adjust their heights relative to each other rather
>>> than 1:1.
>>>
>>> Can arrangeGrob() be used for that?
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
> Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:
>
> |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |
>
> |to make the second chart 1/2 the size of the top one?|
>
> ||
>
The following code aligns the two plot areas of the two charts perfectly but they are the same height whereas I want to make the bottom one 1/2 as tall as the top one:

g2<-ggplotGrob(s)
g3<-ggplotGrob(v)
g<-rbind(g2, g3, size = "first")
g$widths<-unit.pmax(g2$widths, g3$widths)
grid.newpage()
grid.draw(g)


	[[alternative HTML version deleted]]


From @pro @end|ng |rom un|me|b@edu@@u  Fri Jul 24 21:12:48 2020
From: @pro @end|ng |rom un|me|b@edu@@u (Andrew Robinson)
Date: Fri, 24 Jul 2020 19:12:48 +0000
Subject: [R] A Question about MLE in R
In-Reply-To: <c443265f-a4a2-24fd-2dc6-f21617d293f6@gmail.com>
References: <SN6PR05MB5214EC34097CC5CD6F151CB098790@SN6PR05MB5214.namprd05.prod.outlook.com>
 <c443265f-a4a2-24fd-2dc6-f21617d293f6@gmail.com>
Message-ID: <3cf6d730-8fe7-4761-ac99-dc61d6ba535d@Spark>

Hi John,

I wonder if you can suggest some reading material on that topic?  A cursory search of the net doesn't uncover anything obvious.

Andrew

--
Andrew Robinson
Director, CEBRA and Professor of Biosecurity,
School/s of BioSciences and Mathematics & Statistics
University of Melbourne, VIC 3010 Australia
Tel: (+61) 0403 138 955
Email: apro at unimelb.edu.au
Website: https://researchers.ms.unimelb.edu.au/~apro at unimelb/

I acknowledge the Traditional Owners of the land I inhabit, and pay my respects to their Elders.
On Jul 22, 2020, 10:49 PM +1000, J C Nash <profjcnash at gmail.com>, wrote:
SANN is almost NEVER the tool to use.

I've given up trying to get it removed from optim(), and will soon give up
on telling folk not to use it.

JN

On 2020-07-22 3:06 a.m., Zixuan Qi wrote:
Hi,

I encounter a problem. I use optim() function in R to estimate likelihood
function and the method is SANN in the optim function.
out <-
optim(parm,logLik,method='SANN',hessian=T,control=list(maxit=5000000))

However, I find that each time I run the program, I will get different
values of parameters. My initial values are same, but the number of
iterations has reached the maximum limit. I expanded the number of
iterations to 5 million, but it??s still wrong.

I want to know what I should do. Is anyone willing to help me? Thanks so
much!

Best,
Cisy

[[alternative HTML version deleted]]


______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From @pro @end|ng |rom un|me|b@edu@@u  Fri Jul 24 21:13:53 2020
From: @pro @end|ng |rom un|me|b@edu@@u (Andrew Robinson)
Date: Fri, 24 Jul 2020 19:13:53 +0000
Subject: [R] A Question about MLE in R
In-Reply-To: <f8afff228e3b42df8ae7df61e2b5323e@jhu.edu>
References: <f8afff228e3b42df8ae7df61e2b5323e@jhu.edu>
Message-ID: <e1107c7e-9021-4d71-bb3b-3e8657a0b1f1@Spark>

Hi Ravi,

that's an interesting claim and N-M.  Can you provide any reading matter to support it?

Cheers,

Andrew

--
Andrew Robinson
Director, CEBRA and Professor of Biosecurity,
School/s of BioSciences and Mathematics & Statistics
University of Melbourne, VIC 3010 Australia
Tel: (+61) 0403 138 955
Email: apro at unimelb.edu.au
Website: https://researchers.ms.unimelb.edu.au/~apro at unimelb/

I acknowledge the Traditional Owners of the land I inhabit, and pay my respects to their Elders.
On Jul 24, 2020, 10:54 PM +1000, Ravi Varadhan <ravi.varadhan at jhu.edu>, wrote:
I agree with John that SANN should be removed from optim.


More importantly, the default choice of optimizer in optim should be changed from "Nelder-Mead" to "BFGS." Nelder-Mead is a bad choice for the most commonly encountered optimization problems in statistics. I really do not see a good reason for not changing the default in optim.


Best regards,

Ravi

[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jul 24 21:58:38 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 24 Jul 2020 12:58:38 -0700
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <b0bda5bd-f11c-e9a8-7b0e-19ee6a766803@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <b0bda5bd-f11c-e9a8-7b0e-19ee6a766803@meddatainc.com>
Message-ID: <CAGxFJbTwEwmnF8npOiHx_RKWzidK8-mQFrhxUF_j1rk6S0XELg@mail.gmail.com>

?grid.frame, etc. should be straightforward for this I would think.
But of course you have to resort to the underlying grid framework rather
than the ggplot2 interface.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jul 24, 2020 at 12:11 PM H <agents at meddatainc.com> wrote:

> On 07/24/2020 02:50 PM, H wrote:
> > On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
> >> The set of people interested in helping when you supply a minimal
> reproducible example is rather larger than the set of people willing to
> read the documentation for you (hint) and guess what aspect of alignment
> you are having trouble with.
> >>
> >> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
> >>> On 07/24/2020 01:14 PM, John Kane wrote:
> >>>> <i>Well, I am not looking for help debugging my code but for
> >>> information to better understand arranging plots vertically. The code
> >>> above aligns them horizontally as expected.</i>
> >>>> Sigh, we know the code works but we do not know what the plots are
> >>> and we cannot play around with them to see if we can help you if we
> >>> have nothing to work with.
> >>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
> >>> <mailto:agents at meddatainc.com>> wrote:
> >>>>     On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
> >>>>     > Hav a look at the packages cowplot and patchwork
> >>>>     >
> >>>>     >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
> >>> <mailto:agents at meddatainc.com>> wrote:
> >>>>     >>
> >>>>     >> I am trying to arrange two plots vertically, ie plot 2 below
> >>> plot 1, where I want the plots to align columnwise but have a height
> >>> ratio of eg 3:1.
> >>>>     >>
> >>>>     >> My attempts so far after consulting various webpages is that
> >>> the following code aligns them columnwise correctly but I have, so far,
> >>> failed in setting the relative heights...
> >>>>     >>
> >>>>     >> g2<-ggplotGrob(s)
> >>>>     >> g3<-ggplotGrob(v)
> >>>>     >> g<-rbind(g2, g3, size = "first")
> >>>>     >> g$widths<-unit.pmax(g2$widths, g3$widths)
> >>>>     >>
> >>>>     >> what would the appropriate statement for the relative heights
> >>> to add here be?
> >>>>     >>
> >>>>     >> grid.newpage()
> >>>>     >> grid.draw(g)
> >>>>     >>
> >>>>     >> Thank you!
> >>>>     >>
> >>>>     >> ______________________________________________
> >>>>     >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
> >>> list -- To UNSUBSCRIBE and more, see
> >>>>     >> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>     >> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>>>     >> and provide commented, minimal, self-contained, reproducible
> >>> code.
> >>>>     So this is not possible without using one of those two packages?
> >>> I got the impression I should be able to use grid.arrange to do so but
> >>> was not able to get it to work without disturbing the width alignment
> >>> above...
> >>>>     ______________________________________________
> >>>>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
> >>> -- To UNSUBSCRIBE and more, see
> >>>>     https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>     PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>>>     and provide commented, minimal, self-contained, reproducible
> >>> code.
> >>>> --
> >>>> John Kane
> >>>> Kingston ON Canada
> >>> No need to play around with anything. I am simply looking for
> >>> assistance on how to use eg arrangeGrob to not only align two plots
> >>> columnwise but also adjust their heights relative to each other rather
> >>> than 1:1.
> >>>
> >>> Can arrangeGrob() be used for that?
> >>>
> >>>
> >>>     [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >
> > Look at
> https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html
> where there are two mpg charts, one above the other. What would I need to
> add to:
> >
> > |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2,
> g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths)
> grid.newpage() grid.draw(g) |
> >
> > |to make the second chart 1/2 the size of the top one?|
> >
> > ||
> >
> The following code aligns the two plot areas of the two charts perfectly
> but they are the same height whereas I want to make the bottom one 1/2 as
> tall as the top one:
>
> g2<-ggplotGrob(s)
> g3<-ggplotGrob(v)
> g<-rbind(g2, g3, size = "first")
> g$widths<-unit.pmax(g2$widths, g3$widths)
> grid.newpage()
> grid.draw(g)
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Jul 24 22:21:13 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 24 Jul 2020 13:21:13 -0700
Subject: [R] curl options?
In-Reply-To: <20200723232038.GJ1283@posteo.no>
References: <86EEC745-4CDE-4314-A881-E9655B82B6E7@noaa.gov>
 <20200723232038.GJ1283@posteo.no>
Message-ID: <423B4B0F-5BF3-4F47-A952-B75A95166F22@noaa.gov>

Thank you very much.  That indeed did work,  more specifically as (to include solution for the record):

> sshInfo <- rerddap::info('hawaii_soest_f75b_adc6_12ab', url = 'https://apdrc.soest.hawaii.edu/erddap/', ssl_verifyhost=0, ssl_verifypeer=0)

BTW - my clock and date are fine, the reason it works on some systems has to do with the SSL library being used, whether openSSL or libreSSL.  And as I said,  similar happened to R itself for a very short time.  I can't find the references to the email exchange,  but Simon Urbanek gave a very nice explanation of why this was happening.  I also wonder whether it really is desirable to ignore an expired Cert in the Cert search path.  Not particularly knowledgeable on this,  but my offhand feeling is that could lead to problems.

Thanks again for the solution!

-Roy


> On Jul 23, 2020, at 4:20 PM, Rasmus Liland <jral at posteo.no> wrote:
> 
> On 2020-07-23 14:56 -0700, Roy Mendelssohn - NOAA Federal via R-help wrote:
>> I am trying to get the following command to work:
>> 
>>> sshInfo <- rerddap::info('hawaii_soest_f75b_adc6_12ab', url = 'https://apdrc.soest.hawaii.edu/erddap/') 
>> 
>> On a Mac at least (but I know for a 
>> fact not necessarily on other OSes) I 
>> get:
>> 
>>> Error in curl::curl_fetch_memory(x$url$url, handle = x$url$handle) : 
>>>  SSL certificate problem: certificate has expired
>> 
>> Parenthetically,  this also happened 
>> with R itself awhile back  where an 
>> intermediate cert on the search path 
>> had expired,  not the cert of the 
>> service itself,  and depending on 
>> which implementation of ssl was used,  
>> it either ignored it or threw an 
>> error,  as  in this case.  Someone I 
>> am working with on another OS can 
>> indeed run the same command,  so if 
>> your particular OS may not have an 
>> issue
> 
> I can download the dataset without 
> problems on my Linux thinkpad.  Perhaps 
> you can provide some more info (but I do 
> not know what ...) so I/others can 
> reproduce this strange error ... 
> 
> Have you checked the time on the laptop 
> being correct and not set to e.g. 
> 1970-01-01 01:29?  In the past, I have 
> found ssl errors are caused by the time 
> being off on my laptop, as in the case 
> of a flat cmos battery.
> 
>> Anyhow, for a problem a I am working 
>> on I need to access this server with 
>> that and related commands.  
>> 'rerddap::info()' allows me to pass 
>> curl options,  and normally with Curl 
>> you can get around the expired 
>> certificate using the  '-k' or 
>> '--insecure' option.  When I look at:
>> 
>>> curl::curl_options()
>> 
>> I do not see this option. I do not 
>> understand all the options listed 
>> there,  so maybe that option is in a 
>> different form that I am missing. Or 
>> is there another way around this still 
>> using 'curl' .  Using another function 
>> that does similar to 'curl'  is not an 
>> option, because I need the 
>> 'rerddap::info()' call which calls a 
>> package called "crul" which ultimately 
>> calls 'curl'.
>> 
>> Thanks,
>> 
>> -Roy
>> 
>> PS - And yes I informed the owner of 
>> the site about the expired 
>> certificate,  that was a couple of 
>> weeks ago.
> 
> Perhaps setting
> 
> 	options("ssl_verifyhost"=0, "ssl_verifypeer"=0) 
> 
> helps? [1]
> 
> Best,
> Rasmus
> 
> [1] https://stackoverflow.com/questions/47715918/how-to-pass-the-curl-insecure-alternative-when-using-r

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Jul 24 22:34:55 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 24 Jul 2020 13:34:55 -0700
Subject: [R] curl options?
In-Reply-To: <423B4B0F-5BF3-4F47-A952-B75A95166F22@noaa.gov>
References: <86EEC745-4CDE-4314-A881-E9655B82B6E7@noaa.gov>
 <20200723232038.GJ1283@posteo.no>
 <423B4B0F-5BF3-4F47-A952-B75A95166F22@noaa.gov>
Message-ID: <5CB0AD5D-52F3-44F5-99D2-47853376ABBF@noaa.gov>

Found it.  On June 9,  in the R-developers mail-list,  a chain under the topic "SSL certificate issues".

-Roy


> On Jul 24, 2020, at 1:21 PM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> Thank you very much.  That indeed did work,  more specifically as (to include solution for the record):
> 
>> sshInfo <- rerddap::info('hawaii_soest_f75b_adc6_12ab', url = 'https://apdrc.soest.hawaii.edu/erddap/', ssl_verifyhost=0, ssl_verifypeer=0)
> 
> BTW - my clock and date are fine, the reason it works on some systems has to do with the SSL library being used, whether openSSL or libreSSL.  And as I said,  similar happened to R itself for a very short time.  I can't find the references to the email exchange,  but Simon Urbanek gave a very nice explanation of why this was happening.  I also wonder whether it really is desirable to ignore an expired Cert in the Cert search path.  Not particularly knowledgeable on this,  but my offhand feeling is that could lead to problems.
> 
> Thanks again for the solution!
> 
> -Roy
> 
> 
>> On Jul 23, 2020, at 4:20 PM, Rasmus Liland <jral at posteo.no> wrote:
>> 
>> On 2020-07-23 14:56 -0700, Roy Mendelssohn - NOAA Federal via R-help wrote:
>>> I am trying to get the following command to work:
>>> 
>>>> sshInfo <- rerddap::info('hawaii_soest_f75b_adc6_12ab', url = 'https://apdrc.soest.hawaii.edu/erddap/') 
>>> 
>>> On a Mac at least (but I know for a 
>>> fact not necessarily on other OSes) I 
>>> get:
>>> 
>>>> Error in curl::curl_fetch_memory(x$url$url, handle = x$url$handle) : 
>>>> SSL certificate problem: certificate has expired
>>> 
>>> Parenthetically,  this also happened 
>>> with R itself awhile back  where an 
>>> intermediate cert on the search path 
>>> had expired,  not the cert of the 
>>> service itself,  and depending on 
>>> which implementation of ssl was used,  
>>> it either ignored it or threw an 
>>> error,  as  in this case.  Someone I 
>>> am working with on another OS can 
>>> indeed run the same command,  so if 
>>> your particular OS may not have an 
>>> issue
>> 
>> I can download the dataset without 
>> problems on my Linux thinkpad.  Perhaps 
>> you can provide some more info (but I do 
>> not know what ...) so I/others can 
>> reproduce this strange error ... 
>> 
>> Have you checked the time on the laptop 
>> being correct and not set to e.g. 
>> 1970-01-01 01:29?  In the past, I have 
>> found ssl errors are caused by the time 
>> being off on my laptop, as in the case 
>> of a flat cmos battery.
>> 
>>> Anyhow, for a problem a I am working 
>>> on I need to access this server with 
>>> that and related commands.  
>>> 'rerddap::info()' allows me to pass 
>>> curl options,  and normally with Curl 
>>> you can get around the expired 
>>> certificate using the  '-k' or 
>>> '--insecure' option.  When I look at:
>>> 
>>>> curl::curl_options()
>>> 
>>> I do not see this option. I do not 
>>> understand all the options listed 
>>> there,  so maybe that option is in a 
>>> different form that I am missing. Or 
>>> is there another way around this still 
>>> using 'curl' .  Using another function 
>>> that does similar to 'curl'  is not an 
>>> option, because I need the 
>>> 'rerddap::info()' call which calls a 
>>> package called "crul" which ultimately 
>>> calls 'curl'.
>>> 
>>> Thanks,
>>> 
>>> -Roy
>>> 
>>> PS - And yes I informed the owner of 
>>> the site about the expired 
>>> certificate,  that was a couple of 
>>> weeks ago.
>> 
>> Perhaps setting
>> 
>> 	options("ssl_verifyhost"=0, "ssl_verifypeer"=0) 
>> 
>> helps? [1]
>> 
>> Best,
>> Rasmus
>> 
>> [1] https://stackoverflow.com/questions/47715918/how-to-pass-the-curl-insecure-alternative-when-using-r
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jul 24 23:56:04 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 24 Jul 2020 22:56:04 +0100
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <603185094.6758128.1595617031422@mail.yahoo.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <603185094.6758128.1595617031422@mail.yahoo.com>
Message-ID: <973a825b-e3f8-ecfb-2295-c0b456290568@sapo.pt>

Hello,

I've just tried it.

library(ggplot2)
#library(grid)
library(cowplot)

s <- ggplot(data = subset(iris, Species == 'virginica'), 
aes(Sepal.Length, Sepal.Width)) + geom_point()
v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, 
Sepal.Width)) + geom_point()

#g2 <- ggplotGrob(s)
#g3 <- ggplotGrob(v)
#g <- rbind(g2, g3, size = "first")

cowplot::plot_grid(s, v, align = "h", nrow = 2, rel_heights = 2:1)


Hope this helps,

Rui Barradas

?s 19:57 de 24/07/2020, Felipe Carrillo via R-help escreveu:
> What about cowplot?
> https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html
>
>      On Friday, July 24, 2020, 11:51:17 AM PDT, H <agents at meddatainc.com> wrote:
>   
>   On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>>
>> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>> On 07/24/2020 01:14 PM, John Kane wrote:
>>>> <i>Well, I am not looking for help debugging my code but for
>>> information to better understand arranging plots vertically. The code
>>> above aligns them horizontally as expected.</i>
>>>> Sigh, we know the code works but we do not know what the plots are
>>> and we cannot play around with them to see if we can help you if we
>>> have nothing to work with.
>>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>> <mailto:agents at meddatainc.com>> wrote:
>>>>  ? ? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>>  ? ? > Hav a look at the packages cowplot and patchwork
>>>>  ? ? >
>>>>  ? ? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>> <mailto:agents at meddatainc.com>> wrote:
>>>>  ? ? >>
>>>>  ? ? >> I am trying to arrange two plots vertically, ie plot 2 below
>>> plot 1, where I want the plots to align columnwise but have a height
>>> ratio of eg 3:1.
>>>>  ? ? >>
>>>>  ? ? >> My attempts so far after consulting various webpages is that
>>> the following code aligns them columnwise correctly but I have, so far,
>>> failed in setting the relative heights...
>>>>  ? ? >>
>>>>  ? ? >> g2<-ggplotGrob(s)
>>>>  ? ? >> g3<-ggplotGrob(v)
>>>>  ? ? >> g<-rbind(g2, g3, size = "first")
>>>>  ? ? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>>  ? ? >>
>>>>  ? ? >> what would the appropriate statement for the relative heights
>>> to add here be?
>>>>  ? ? >>
>>>>  ? ? >> grid.newpage()
>>>>  ? ? >> grid.draw(g)
>>>>  ? ? >>
>>>>  ? ? >> Thank you!
>>>>  ? ? >>
>>>>  ? ? >> ______________________________________________
>>>>  ? ? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>> list -- To UNSUBSCRIBE and more, see
>>>>  ? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>  ? ? >> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>>  ? ? >> and provide commented, minimal, self-contained, reproducible
>>> code.
>>>>  ? ? So this is not possible without using one of those two packages?
>>> I got the impression I should be able to use grid.arrange to do so but
>>> was not able to get it to work without disturbing the width alignment
>>> above...
>>>>  ? ? ______________________________________________
>>>>  ? ? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>> -- To UNSUBSCRIBE and more, see
>>>>  ? ? https://stat.ethz.ch/mailman/listinfo/r-help
>>>>  ? ? PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>>  ? ? and provide commented, minimal, self-contained, reproducible
>>> code.
>>>>
>>>> -- 
>>>> John Kane
>>>> Kingston ON Canada
>>> No need to play around with anything. I am simply looking for
>>> assistance on how to use eg arrangeGrob to not only align two plots
>>> columnwise but also adjust their heights relative to each other rather
>>> than 1:1.
>>>
>>> Can arrangeGrob() be used for that?
>>>
>>>
>>>  ??? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:
>
> |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |
>
> |to make the second chart 1/2 the size of the top one?|
>
> ||
>
>
>  ??? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>    
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Jul 25 02:53:32 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 24 Jul 2020 17:53:32 -0700
Subject: [R] Fortune nomination .... Re:  Looping through a dataframe
In-Reply-To: <CA+8X3fW9hx_qOjaGg3QXnxpBnh7cJUPvUnOasmSGxZp5bUkXSg@mail.gmail.com>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
 <CA+8X3fW9hx_qOjaGg3QXnxpBnh7cJUPvUnOasmSGxZp5bUkXSg@mail.gmail.com>
Message-ID: <9efafb4c-16cf-fb91-53bf-3e3c927d93af@comcast.net>


On 7/21/20 2:31 PM, Jim Lemon wrote:
>   I want to get a total for the number of years of data for each company. When I loop through the data ....

After two one liners using `table`:
> I'm too lazy to provide a difficult way.
>
> Jim
>


From jrkr|de@u @end|ng |rom gm@||@com  Sat Jul 25 02:55:34 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Fri, 24 Jul 2020 20:55:34 -0400
Subject: [R] Fortune nomination .... Re: Looping through a dataframe
In-Reply-To: <9efafb4c-16cf-fb91-53bf-3e3c927d93af@comcast.net>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
 <CA+8X3fW9hx_qOjaGg3QXnxpBnh7cJUPvUnOasmSGxZp5bUkXSg@mail.gmail.com>
 <9efafb4c-16cf-fb91-53bf-3e3c927d93af@comcast.net>
Message-ID: <CAKZQJMDqJgH_CMLvYuzCGfYrhZkU3T6XvkTS6Hk7C9W6oTAkNA@mail.gmail.com>

Yes I think so.

On Fri, 24 Jul 2020 at 20:53, David Winsemius <dwinsemius at comcast.net>
wrote:

>
> On 7/21/20 2:31 PM, Jim Lemon wrote:
> >   I want to get a total for the number of years of data for each
> company. When I loop through the data ....
>
> After two one liners using `table`:
> > I'm too lazy to provide a difficult way.
> >
> > Jim
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Jul 25 05:59:55 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 24 Jul 2020 22:59:55 -0500
Subject: [R] prevent XML::readHTMLTable from suppressing <br/>
Message-ID: <8e1b8a1f-57ed-de26-366c-3b6ae9e2dfb1@effectivedefense.org>

Hello, All:


 ????? Thanks to Rasmus Liland, William Michels, and Luke Tierney with 
my earlier web scraping question.? With their help, I've made progress.? 
Sadly, I still have a problem:? One field has "<br/>", which gets 
suppressed by XML::readHTMLTable:


sosURL <- 
"https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
sosChars <- RCurl::getURL(sosURL)
MOcan <- XML::readHTMLTable(sosChars)
MOcan[[2]][1, 2]
[1] "4476 FIVE MILE RDSENECA MO 64865"


(Seneca <- regexpr('SENECA', sosChars))
substring(sosChars, Seneca-22, Seneca+14)


[1] "4476 FIVE MILE RD<br/>SENECA MO 64865"


 ????? How can I get essentially the same result but without having 
XML::readHTMLTable suppress "<br/>"?


NOTE:? I get something very similar with xml2::read_html and 
rvest::html_table:


sosPointers <- xml2::read_html(sosChars)
MOcan2 <- rvest::html_table(sosPointers)
MOcan2[[2]][1, 2]
[1] "4476 FIVE MILE RDSENECA MO 64865"


 ????? MOcan2 does not have names, and some of the fields are 
automatically converted to integers, which I think is not smart in this 
application.


 ????? Thanks,
 ????? Spencer Graves


From chr|@ho|d @end|ng |rom p@yctc@org  Sat Jul 25 07:21:57 2020
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sat, 25 Jul 2020 06:21:57 +0100 (BST)
Subject: [R] Fortune nomination .... Re: Looping through a dataframe
In-Reply-To: <CAKZQJMDqJgH_CMLvYuzCGfYrhZkU3T6XvkTS6Hk7C9W6oTAkNA@mail.gmail.com>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
 <CA+8X3fW9hx_qOjaGg3QXnxpBnh7cJUPvUnOasmSGxZp5bUkXSg@mail.gmail.com>
 <9efafb4c-16cf-fb91-53bf-3e3c927d93af@comcast.net>
 <CAKZQJMDqJgH_CMLvYuzCGfYrhZkU3T6XvkTS6Hk7C9W6oTAkNA@mail.gmail.com>
Message-ID: <1558411735.11622135.1595654517444.JavaMail.zimbra@psyctc.org>

I really don't want to put too many Emails to the list but I had the same reaction to that lovely line ... so now my question is:

Is there a way to make fortune nominations other than through the list.  I see the package has a long list of illustrious authors but I can't find a side channel or open port for nominations despite a bit of searching.

TIA and very best to all,

Chris

----- Original Message -----
> From: "John Kane" <jrkrideau at gmail.com>
> To: "David Winsemius" <dwinsemius at comcast.net>
> Cc: "R. Help Mailing List" <r-help at r-project.org>
> Sent: Saturday, 25 July, 2020 02:55:34
> Subject: Re: [R] Fortune nomination .... Re: Looping through a dataframe

> Yes I think so.
> 
> On Fri, 24 Jul 2020 at 20:53, David Winsemius <dwinsemius at comcast.net>
> wrote:
> 
>>
>> On 7/21/20 2:31 PM, Jim Lemon wrote:
>> >   I want to get a total for the number of years of data for each
>> company. When I loop through the data ....
>>
>> After two one liners using `table`:
>> > I'm too lazy to provide a difficult way.
>> >
>> > Jim
>> >
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 
> --
> John Kane
> Kingston ON Canada
> 
>	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Small contribution in our coronavirus rigours: 
https://www.coresystemtrust.org.uk/home/free-options-to-replace-paper-core-forms-during-the-coronavirus-pandemic/

Chris Evans <chris at psyctc.org> Visiting Professor, University of Sheffield <chris.evans at sheffield.ac.uk>
I do some consultation work for the University of Roehampton <chris.evans at roehampton.ac.uk> and other places
but <chris at psyctc.org> remains my main Email address.  I have a work web site at:
   https://www.psyctc.org/psyctc/
and a site I manage for CORE and CORE system trust at:
   http://www.coresystemtrust.org.uk/
I have "semigrated" to France, see: 
   https://www.psyctc.org/pelerinage2016/semigrating-to-france/ 
   https://www.psyctc.org/pelerinage2016/register-to-get-updates-from-pelerinage2016/

If you want an Emeeting, I am trying to keep them to Thursdays and my diary is at:
   https://www.psyctc.org/pelerinage2016/ceworkdiary/
Beware: French time, generally an hour ahead of UK.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sat Jul 25 08:48:52 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Fri, 24 Jul 2020 23:48:52 -0700
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <CA+nrPnsq9dUTZk8AcQem34OrF+jB=xbRJz+oGCF32eK4aofZYg@mail.gmail.com>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
 <bab7a532-089e-2ba3-1223-837c49488271@comcast.net>
 <CA+nrPnv9-MHXgCrdK-3e3nBCPT-vssyWSy6LE-jV+KpK+xLWww@mail.gmail.com>
 <ABD6AC6F-3493-49FA-8D57-E75951C834D5@dcn.davis.ca.us>
 <CA+nrPnsq9dUTZk8AcQem34OrF+jB=xbRJz+oGCF32eK4aofZYg@mail.gmail.com>
Message-ID: <2ee6b5c6-5f1b-0a2a-3670-554f90a8278e@comcast.net>


On 7/24/20 3:08 AM, Neha gupta wrote:
> Ohhhh, I am very sorry for that, I have now included
>
> output of dput is: structure(list(unique_id = c("L116", "L117", 
> "L496", "L9719",
> "L9720", "L9721", "L9722", "L9723", "L10200", "L10201", "L10202",
> "L10203", "L10204", "L10205", "L10206", "L10705", "L10706", "L10707",
> "L10708", "L10709", "L10710", "L10711", "L10712", "L10713", "L10714",
> "L10715", "L10716", "L10717", "L10718", "L13486"), McCC = c(6,
> 40, 115, 12, 14, 1, 56, 17, 1, 22, 24, 3, 59, 67, 11, 30, 1,
> 16, 1, 18, 4, 4, 1, 44, 1, 18, 40, 54, 1, 23), CLOC = c(0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0), LLOC = c(52, 276, 663, 73, 82, 28, 318,
> 167, 50, 110, 98, 22, 374, 532, 39, 266, 67, 198, 37, 84, 63,
> 68, 4, 372, 58, 97, 290, 318, 8, 90), `Number of previous fixes` = c(1,
> 2, 6, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1,
> 0, 1, 0, 0, 0, 1, 0, 0), `Number of previous modifications` = c(19,
> 58, 195, 50, 22, 11, 43, 47, 25, 14, 24, 10, 53, 97, 13, 58,
> 22, 94, 23, 51, 34, 18, 19, 75, 47, 28, 79, 96, 4, 10), `Number of 
> committers` = c(3,
> 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 2, 1, 3, 2, 2,
> 1, 2, 2, 2, 2, 3, 1, 1), `Number of developer commits` = c(1843,
> 1843, 1843, 1300, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843,
> 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843,
> 1843, 1843, 1843, 1843, 1843, 1843, 1843), `Bug class` = structure(c(2L,
> 2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("true",
> "false"), class = "factor")), row.names = c(NA, 30L), class = 
> "data.frame")


I suggest this pre-processing step:


names(d) <- gsub("\\s", "", names(d) )

# then add `library(ROSE)`


# and rerun. Some packages are not adept at handling non-standard column 
names.

-- 

David

>
> library(caret)
> library(farff)
> library(DMwR)
> library(pROC)
> library(pls)
>
> setwd("C:/Users/PC/Documents")
> d=readARFF("bughunter.arff")
> dput( head( d, 30 ) )
>
> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
> tr <- d[index, ]
>
> ts <- d[-index, ]
>
> boot3 <- trainControl(method = "repeatedcv", number=10, 
> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
> summaryFunction = twoClassSummary, sampling = "rose")
>
> set.seed(30218)
>
> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = 
> "AUC", preProc = c("center", "scale", "nzv"), trControl = boot3)
>
> getTrainPerf(ct)
>
>
> On Thu, Jul 23, 2020 at 11:50 PM Jeff Newmiller 
> <jdnewmil at dcn.davis.ca.us <mailto:jdnewmil at dcn.davis.ca.us>> wrote:
>
>     All you did was include the dput command in your example. We need
>     the output of dput, not the command itself.
>
>     On July 23, 2020 2:43:31 PM PDT, Neha gupta
>     <neha.bologna90 at gmail.com <mailto:neha.bologna90 at gmail.com>> wrote:
>     >David, I understand that the file will not be in your directory but I
>     >have
>     >provided the data using dput? Didn't I? Previously members of this
>     >group
>     >have used dput to provide the detail about their data. Seriously, I
>     >have no
>     >idea how else I can provide a reproducible example.
>     >
>     >
>     >
>     ><https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
>     >Virus-free.
>     >www.avast.com <
>     ><https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
>     ><#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>     >
>     >On Thu, Jul 23, 2020 at 10:47 PM David Winsemius
>     ><dwinsemius at comcast.net <mailto:dwinsemius at comcast.net>>
>     >wrote:
>     >
>     >>
>     >> On 7/23/20 9:34 AM, Neha gupta wrote:
>     >>
>     >>
>     >> Hello David, file not found should be the path problem I guess. I
>     >just
>     >> forgot the pROC library, which I included here. These are all the
>     >libraries
>     >> I am using.
>     >>
>     >> library(caret)
>     >> library(farff)
>     >> library(DMwR)
>     >> library(pROC)
>     >> library(pls)
>     >>
>     >> setwd("C:/Users/PC/Documents")
>     >> d=readARFF("bughunter.arff")
>     >>
>     >>
>     >> I suppose *you* might have such a file in that directory, but
>     do you
>     >> assume that *we* will????
>     >>
>     >> A reproducible example will allow others to run your code. Seems
>     >fairly
>     >> clear that we are not there yet.
>     >>
>     >> --
>     >>
>     >> David.
>     >>
>     >> dput( head( d, 30 ) )
>     >>
>     >> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>     >>
>     >> tr <- d[index, ]
>     >>
>     >> ts <- d[-index, ]
>     >>
>     >> boot3 <- trainControl(method = "repeatedcv", number=10,
>     >> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>     >>
>     >> summaryFunction = twoClassSummary, sampling = "rose")
>     >>
>     >> set.seed(30218)
>     >>
>     >> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>     >"AUC", preProc
>     >> = c("center", "scale", "nzv"), trControl = boot3)
>     >>
>     >> getTrainPerf(ct)
>     >>
>     >>
>     >>
>     >>
>     ><https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
>     >Virus-free.
>     >> www.avast.com <
>     >>
>     ><https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
>     >>
>     >> On Thu, Jul 23, 2020 at 4:01 PM Neha gupta
>     <neha.bologna90 at gmail.com <mailto:neha.bologna90 at gmail.com>>
>     >> wrote:
>     >>
>     >>>
>     >>> Hello David, thanks for your reply. I have added the information.
>     >>>
>     >>> library(caret)
>     >>> library(farff)
>     >>> library(DMwR)
>     >>>
>     >>> d=readARFF("bughunter.arff")
>     >>> dput( head( d, 30 ) )
>     >>>
>     >>> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>     >>>
>     >>> tr <- d[index, ]
>     >>>
>     >>> ts <- d[-index, ]
>     >>>
>     >>> boot3 <- trainControl(method = "repeatedcv", number=10,
>     >>> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>     >>>
>     >>> summaryFunction = twoClassSummary, sampling = "rose")
>     >>>
>     >>> set.seed(30218)
>     >>>
>     >>> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>     >"AUC", preProc
>     >>> = c("center", "scale", "nzv"), trControl = boot3)
>     >>>
>     >>> getTrainPerf(ct)
>     >>>
>     >>> On Thu, Jul 23, 2020 at 1:08 AM David Winsemius
>     ><dwinsemius at comcast.net <mailto:dwinsemius at comcast.net>>
>     >>> wrote:
>     >>>
>     >>>>
>     >>>> On 7/22/20 3:43 PM, Neha gupta wrote:
>     >>>> > Hello,
>     >>>> >
>     >>>> >
>     >>>> > I get the following error when I use the ROSE class balancing
>     >method
>     >>>> but
>     >>>> > when I use other methods like SMOTE, up, down, I do not get any
>     >error
>     >>>> > message.
>     >>>> >
>     >>>> >
>     >>>> > Something is wrong; all the ROC metric values are missing:
>     >>>> >
>     >>>> > ROC Sens Spec
>     >>>> >
>     >>>> > Min. : NA Min. : NA Min. : NA
>     >>>> >
>     >>>> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
>     >>>> >
>     >>>> > Median : NA Median : NA Median : NA
>     >>>> >
>     >>>> > Mean :NaN Mean :NaN Mean :NaN
>     >>>> >
>     >>>> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
>     >>>> >
>     >>>> > Max. : NA Max. : NA Max. : NA
>     >>>> >
>     >>>> >
>     >>>> >
>     >>>> > library(DMwR)
>     >>>> >
>     >>>> > d=readARFF("bughunter.arff")
>     >>>>
>     >>>> After installing that package and loading pkg:DMwR I get:
>     >>>>
>     >>>>
>     >>>> Error in readARFF("bughunter.arff") : could not find function
>     >"readARFF"
>     >>>>
>     >>>>
>     >>>> Since you also posted in HTML, I suggest you read the Posting
>     >Guide,
>     >>>> restart and R session and post a reproducible example that loads
>     >all
>     >>>> needed packages and data.
>     >>>>
>     >>>> --
>     >>>>
>     >>>> David.
>     >>>>
>     >>>> >
>     >>>> > index <- createDataPartition(d$`Bug class`, p = .70,list =
>     FALSE)
>     >>>> >
>     >>>> > tr <- d[index, ]
>     >>>> >
>     >>>> > ts <- d[-index, ]
>     >>>> >
>     >>>> > boot3 <- trainControl(method = "repeatedcv", number=10,
>     >>>> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
>     >>>> >
>     >>>> > summaryFunction = twoClassSummary, sampling = "rose")
>     >>>> >
>     >>>> > set.seed(30218)
>     >>>> >
>     >>>> > ct <- train(`Bug class` ~ ., data = tr,
>     >>>> >
>     >>>> > method = "pls",
>     >>>> >
>     >>>> > metric = "AUC",
>     >>>> >
>     >>>> > preProc = c("center", "scale", "nzv"),
>     >>>> >
>     >>>> > trControl = boot3)
>     >>>> >
>     >>>> > getTrainPerf(ct)
>     >>>> >
>     >>>> >? ? ? ?[[alternative HTML version deleted]]
>     >>>> >
>     >>>> > ______________________________________________
>     >>>> > R-help at r-project.org <mailto:R-help at r-project.org> mailing
>     list -- To UNSUBSCRIBE and more, see
>     >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>     >>>> > PLEASE do read the posting guide
>     >>>> http://www.R-project.org/posting-guide.html
>     >>>> > and provide commented, minimal, self-contained, reproducible
>     >code.
>     >>>>
>     >>>
>     >
>     >? ? ? ?[[alternative HTML version deleted]]
>     >
>     >______________________________________________
>     >R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>     >https://stat.ethz.ch/mailman/listinfo/r-help
>     >PLEASE do read the posting guide
>     >http://www.R-project.org/posting-guide.html
>     >and provide commented, minimal, self-contained, reproducible code.
>
>     -- 
>     Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Sat Jul 25 11:10:51 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sat, 25 Jul 2020 11:10:51 +0200
Subject: [R] [External] Re: help with web scraping
In-Reply-To: <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
 <20200724141618.GB144650@posteo.no>
 <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>
Message-ID: <20200725091051.GN1283@posteo.no>

On 2020-07-24 10:28 -0500, Spencer Graves wrote:
> Dear Rasmus:
> 
> > Dear Spencer,
> >
> > I unified the party tables after the
> > first summary table like this:
> >
> > 	url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> > 	M_sos <- RCurl::getURL(url)
> > 	saveRDS(object=M_sos, file="dcp.rds")
> > 	dat <- XML::readHTMLTable(M_sos)
> > 	idx <- 2:length(dat)
> > 	cn <- unique(unlist(lapply(dat[idx], colnames)))
> 
> This is useful for this application.
> 
> > 	dat <- do.call(rbind,
> > 	  sapply(idx, function(i, dat, cn) {
> > 	    x <- dat[[i]]
> > 	    x[,cn[!(cn %in% colnames(x))]] <- NA
> > 	    x <- x[,cn]
> > 	    x$Party <- names(dat)[i]
> > 	    return(list(x))
> > 	  }, dat=dat, cn=cn))
> > 	dat[,"Date Filed"] <-
> > 	  as.Date(x=dat[,"Date Filed"],
> > 	          format="%m/%d/%Y")
> 
> This misses something extremely 
> important for this application:?  The 
> political office.? That's buried in 
> the HTML or whatever it is.? I'm using 
> something like the following to find 
> that:
> 
> str(LtGov <- gregexpr('Lieutenant Governor', M_sos)[[1]])

Dear Spencer,

I came up with a solution, but it is not 
very elegant.  Instead of showing you 
the solution, hoping you understand 
everything in it, I istead want to give 
you some emphatic hints to see if you 
can come up with a solution on you own.

- XML::htmlTreeParse(M_sos)
  - *Gandalf voice*: climb the tree 
    until you find the content you are 
    looking for flat out at the level of 
    ?The Children of the Div?, *uuuUUU*
  - you only want to keep the table and 
    header tags at this level
- Use XML::xmlValue to extract the 
  values of all the headers (the 
  political positions)
- Observe that all the tables on the 
  page you were able to extract 
  previously using XML::readHTMLTable, 
  are at this level, shuffled between 
  the political position header tags, 
  this means you extract the political 
  position and party affiliation by 
  using a for loop, if statements, 
  typeof, names, and [] and [[]] to grab 
  different things from the list 
  (content or the bag itself). 
  XML::readHTMLTable strips away the 
  line break tags from the Mailing 
  address, so if you find a better way 
  of extracting the tables, tell me, 
  e.g. you get

	8805 HUNTER AVEKANSAS CITY MO 64138

  and not 

	8805 HUNTER AVE<br/>KANSAS CITY MO 64138

When you've completed this ?programming 
quest?, you're back at the level of the 
previous email, i.e.  you have have the 
same tables, but with political position 
and party affiliation added to them.

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200725/126cd316/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Sat Jul 25 11:44:29 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sat, 25 Jul 2020 11:44:29 +0200
Subject: [R] curl options?
In-Reply-To: <5CB0AD5D-52F3-44F5-99D2-47853376ABBF@noaa.gov>
References: <86EEC745-4CDE-4314-A881-E9655B82B6E7@noaa.gov>
 <20200723232038.GJ1283@posteo.no>
 <423B4B0F-5BF3-4F47-A952-B75A95166F22@noaa.gov>
 <5CB0AD5D-52F3-44F5-99D2-47853376ABBF@noaa.gov>
Message-ID: <20200725094429.GO1283@posteo.no>

On 2020-07-24 13:34 -0700, Roy Mendelssohn - NOAA Federal wrote:
| On Jul 24, 2020, at 1:21 PM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
| | On Jul 23, 2020, at 4:20 PM, Rasmus Liland <jral at posteo.no> wrote:
| | | On 2020-07-23 14:56 -0700, Roy Mendelssohn - NOAA Federal via R-help wrote:
| | | | I am trying to get the following command to work:
| | | | 
| | | | > sshInfo <- rerddap::info('hawaii_soest_f75b_adc6_12ab', url = 'https://apdrc.soest.hawaii.edu/erddap/') 
| | | 
| | | Perhaps setting
| | | 
| | | 	options("ssl_verifyhost"=0, "ssl_verifypeer"=0) 
| | | 
| | | helps? [1]
| | | 
| | | [1] https://stackoverflow.com/questions/47715918/how-to-pass-the-curl-insecure-alternative-when-using-r
| | 
| | Thank you very much.  That indeed 
| | did work,  more specifically as (to 
| | include solution for the record):
| | 
| | > sshInfo <- rerddap::info('hawaii_soest_f75b_adc6_12ab', url = 'https://apdrc.soest.hawaii.edu/erddap/', ssl_verifyhost=0, ssl_verifypeer=0)

Hey, I'm glad this solved your issue!

| | | Have you checked the time on the 
| | | laptop being correct and not set 
| | | to e.g. 1970-01-01 01:29?  In the 
| | | past, I have found ssl errors are 
| | | caused by the time being off on my 
| | | laptop, as in the case of a flat 
| | | cmos battery.
| | 
| | BTW - my clock and date are fine, 
| | the reason it works on some systems 
| | has to do with the SSL library being 
| | used, whether openSSL or libreSSL.  
| | And as I said,  similar happened to 
| | R itself for a very short time.  I 
| | can't find the references to the 
| | email exchange,  but Simon Urbanek 
| | gave a very nice explanation of why 
| | this was happening.  I also wonder 
| | whether it really is desirable to 
| | ignore an expired Cert in the Cert 
| | search path.  Not particularly 
| | knowledgeable on this,  but my 
| | offhand feeling is that could lead 
| | to problems.
| | 
| | Thanks again for the solution!
| | 
| | -Roy
| 
| Found it.  On June 9,  in the 
| R-developers mail-list,  a chain under 
| the topic "SSL certificate issues".
| 
| -Roy

Perhaps it's this[*] one.  OpenSSL is 
really crusty and simply a mistake, thus 
I have heard, I hope LibreSSL or 
something else can replace it at some 
point, not just in MacOS and OpenBSD ... 

Best,
Rasmus

[*] https://stat.ethz.ch/pipermail/r-devel/2020-June/079664.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200725/2b6d0959/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Sat Jul 25 12:20:43 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sat, 25 Jul 2020 12:20:43 +0200
Subject: [R] prevent XML::readHTMLTable from suppressing <br/>
In-Reply-To: <8e1b8a1f-57ed-de26-366c-3b6ae9e2dfb1@effectivedefense.org>
References: <8e1b8a1f-57ed-de26-366c-3b6ae9e2dfb1@effectivedefense.org>
Message-ID: <20200725102043.GP1283@posteo.no>

On 2020-07-24 22:59 -0500, Spencer Graves wrote:
> Hello, All:
> 
> Thanks to Rasmus Liland, William 
> Michels, and Luke Tierney with my 
> earlier web scraping question.? With 
> their help, I've made progress.? 
> Sadly, I still have a problem:? One 
> field has "<br/>", which gets 
> suppressed by XML::readHTMLTable:
> 
> sosURL <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> sosChars <- RCurl::getURL(sosURL)
> MOcan <- XML::readHTMLTable(sosChars)
> MOcan[[2]][1, 2]
> [1] "4476 FIVE MILE RDSENECA MO 64865"
> 
> (Seneca <- regexpr('SENECA', sosChars))
> substring(sosChars, Seneca-22, Seneca+14)
> 
> [1] "4476 FIVE MILE RD<br/>SENECA MO 64865"
> 
> How can I get essentially the same 
> result but without having > 
> XML::readHTMLTable suppress "<br/>"?
> 
> NOTE:? I get something very similar with xml2::read_html and
> rvest::html_table:
> 
> sosPointers <- xml2::read_html(sosChars)
> MOcan2 <- rvest::html_table(sosPointers)
> MOcan2[[2]][1, 2]
> [1] "4476 FIVE MILE RDSENECA MO 64865"
> 
> MOcan2 does not have names, and some 
> of the fields are automatically 
> converted to integers, which I think 
> is not smart in this application.

Yes, I observed this also, if you see my 
challenging quest to you in the old 
thread.

You could just edit it yourself by 
finding all the string separators:

	cities <-
	  c("KANSAS CITY",
	    "SENECA MO")
	for (city in cities) {
	  idx <- grepl(city, tab[,"Mailing Address"])
	  tab[idx,"Mailing Address"] <-
	    sapply(strsplit(tab[idx,"Mailing Address"], city), paste,
	      collapse=paste0("\n", city))
	}
	cat(sum(!grepl("\n", tab[,"Mailing Address"])),
	    "addresses left to hard-code a newline char into!", "\n")

... I'm sure the post office can mail 
out your snail mail letters correctly if 
you put the addresses in without the 
newline char, after all the area code is 
correct ... 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200725/8ac9e8ee/attachment.sig>

From ||@t@ @end|ng |rom dewey@myzen@co@uk  Sat Jul 25 13:27:54 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Sat, 25 Jul 2020 12:27:54 +0100
Subject: [R] Fortune nomination .... Re: Looping through a dataframe
In-Reply-To: <1558411735.11622135.1595654517444.JavaMail.zimbra@psyctc.org>
References: <1260146996.503324.1595352054915@mail2.virginmedia.com>
 <CA+8X3fW9hx_qOjaGg3QXnxpBnh7cJUPvUnOasmSGxZp5bUkXSg@mail.gmail.com>
 <9efafb4c-16cf-fb91-53bf-3e3c927d93af@comcast.net>
 <CAKZQJMDqJgH_CMLvYuzCGfYrhZkU3T6XvkTS6Hk7C9W6oTAkNA@mail.gmail.com>
 <1558411735.11622135.1595654517444.JavaMail.zimbra@psyctc.org>
Message-ID: <9baeeb77-1cde-b041-76f9-1b2dd2e5c033@dewey.myzen.co.uk>

Dear Chris

Just send it to the maintainer Achim Zeileis to whom I have cc'ed this 
in case he is not reading the list at the moment.

Michael

On 25/07/2020 06:21, Chris Evans wrote:
> I really don't want to put too many Emails to the list but I had the same reaction to that lovely line ... so now my question is:
> 
> Is there a way to make fortune nominations other than through the list.  I see the package has a long list of illustrious authors but I can't find a side channel or open port for nominations despite a bit of searching.
> 
> TIA and very best to all,
> 
> Chris
> 
> ----- Original Message -----
>> From: "John Kane" <jrkrideau at gmail.com>
>> To: "David Winsemius" <dwinsemius at comcast.net>
>> Cc: "R. Help Mailing List" <r-help at r-project.org>
>> Sent: Saturday, 25 July, 2020 02:55:34
>> Subject: Re: [R] Fortune nomination .... Re: Looping through a dataframe
> 
>> Yes I think so.
>>
>> On Fri, 24 Jul 2020 at 20:53, David Winsemius <dwinsemius at comcast.net>
>> wrote:
>>
>>>
>>> On 7/21/20 2:31 PM, Jim Lemon wrote:
>>>>    I want to get a total for the number of years of data for each
>>> company. When I loop through the data ....
>>>
>>> After two one liners using `table`:
>>>> I'm too lazy to provide a difficult way.
>>>>
>>>> Jim
>>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> John Kane
>> Kingston ON Canada
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Sat Jul 25 13:53:29 2020
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Sat, 25 Jul 2020 13:53:29 +0200
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <2ee6b5c6-5f1b-0a2a-3670-554f90a8278e@comcast.net>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
 <bab7a532-089e-2ba3-1223-837c49488271@comcast.net>
 <CA+nrPnv9-MHXgCrdK-3e3nBCPT-vssyWSy6LE-jV+KpK+xLWww@mail.gmail.com>
 <ABD6AC6F-3493-49FA-8D57-E75951C834D5@dcn.davis.ca.us>
 <CA+nrPnsq9dUTZk8AcQem34OrF+jB=xbRJz+oGCF32eK4aofZYg@mail.gmail.com>
 <2ee6b5c6-5f1b-0a2a-3670-554f90a8278e@comcast.net>
Message-ID: <CA+nrPnsLM+wNM34rz6icKmVHa27wkuf4P7pJqsV4S-=MYHtEGw@mail.gmail.com>

OK thanks a lot David, I hope it will work for me.

Best regards
Neha

On Saturday, July 25, 2020, David Winsemius <dwinsemius at comcast.net> wrote:

>
> On 7/24/20 3:08 AM, Neha gupta wrote:
>
> Ohhhh, I am very sorry for that, I have now included
>
> output of dput is: structure(list(unique_id = c("L116", "L117", "L496",
> "L9719",
> "L9720", "L9721", "L9722", "L9723", "L10200", "L10201", "L10202",
> "L10203", "L10204", "L10205", "L10206", "L10705", "L10706", "L10707",
> "L10708", "L10709", "L10710", "L10711", "L10712", "L10713", "L10714",
> "L10715", "L10716", "L10717", "L10718", "L13486"), McCC = c(6,
> 40, 115, 12, 14, 1, 56, 17, 1, 22, 24, 3, 59, 67, 11, 30, 1,
> 16, 1, 18, 4, 4, 1, 44, 1, 18, 40, 54, 1, 23), CLOC = c(0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0), LLOC = c(52, 276, 663, 73, 82, 28, 318,
> 167, 50, 110, 98, 22, 374, 532, 39, 266, 67, 198, 37, 84, 63,
> 68, 4, 372, 58, 97, 290, 318, 8, 90), `Number of previous fixes` = c(1,
> 2, 6, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1,
> 0, 1, 0, 0, 0, 1, 0, 0), `Number of previous modifications` = c(19,
> 58, 195, 50, 22, 11, 43, 47, 25, 14, 24, 10, 53, 97, 13, 58,
> 22, 94, 23, 51, 34, 18, 19, 75, 47, 28, 79, 96, 4, 10), `Number of
> committers` = c(3,
> 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 2, 1, 3, 2, 2,
> 1, 2, 2, 2, 2, 3, 1, 1), `Number of developer commits` = c(1843,
> 1843, 1843, 1300, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843,
> 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843, 1843,
> 1843, 1843, 1843, 1843, 1843, 1843, 1843), `Bug class` = structure(c(2L,
> 2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("true",
> "false"), class = "factor")), row.names = c(NA, 30L), class = "data.frame")
>
>
> I suggest this pre-processing step:
>
>
> names(d) <- gsub("\\s", "", names(d) )
>
> # then add `library(ROSE)`
>
>
> # and rerun. Some packages are not adept at handling non-standard column
> names.
>
> --
>
> David
>
>
> library(caret)
> library(farff)
> library(DMwR)
> library(pROC)
> library(pls)
>
> setwd("C:/Users/PC/Documents")
> d=readARFF("bughunter.arff")
> dput( head( d, 30 ) )
>
> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>
> tr <- d[index, ]
>
> ts <- d[-index, ]
>
> boot3 <- trainControl(method = "repeatedcv", number=10,
> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>
> summaryFunction = twoClassSummary, sampling = "rose")
>
> set.seed(30218)
>
> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric = "AUC", preProc
> = c("center", "scale", "nzv"), trControl = boot3)
>
> getTrainPerf(ct)
>
> On Thu, Jul 23, 2020 at 11:50 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
>> All you did was include the dput command in your example. We need the
>> output of dput, not the command itself.
>>
>> On July 23, 2020 2:43:31 PM PDT, Neha gupta <neha.bologna90 at gmail.com>
>> wrote:
>> >David, I understand that the file will not be in your directory but I
>> >have
>> >provided the data using dput? Didn't I? Previously members of this
>> >group
>> >have used dput to provide the detail about their data. Seriously, I
>> >have no
>> >idea how else I can provide a reproducible example.
>> >
>> >
>> >
>> ><https://www.avast.com/sig-email?utm_medium=email&utm_
>> source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
>> >Virus-free.
>> >www.avast.com
>> ><https://www.avast.com/sig-email?utm_medium=email&utm_
>> source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
>> ><#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>> >
>> >On Thu, Jul 23, 2020 at 10:47 PM David Winsemius
>> ><dwinsemius at comcast.net>
>> >wrote:
>> >
>> >>
>> >> On 7/23/20 9:34 AM, Neha gupta wrote:
>> >>
>> >>
>> >> Hello David, file not found should be the path problem I guess. I
>> >just
>> >> forgot the pROC library, which I included here. These are all the
>> >libraries
>> >> I am using.
>> >>
>> >> library(caret)
>> >> library(farff)
>> >> library(DMwR)
>> >> library(pROC)
>> >> library(pls)
>> >>
>> >> setwd("C:/Users/PC/Documents")
>> >> d=readARFF("bughunter.arff")
>> >>
>> >>
>> >> I suppose *you* might have such a file in that directory, but do you
>> >> assume that *we* will????
>> >>
>> >> A reproducible example will allow others to run your code. Seems
>> >fairly
>> >> clear that we are not there yet.
>> >>
>> >> --
>> >>
>> >> David.
>> >>
>> >> dput( head( d, 30 ) )
>> >>
>> >> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>> >>
>> >> tr <- d[index, ]
>> >>
>> >> ts <- d[-index, ]
>> >>
>> >> boot3 <- trainControl(method = "repeatedcv", number=10,
>> >> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>> >>
>> >> summaryFunction = twoClassSummary, sampling = "rose")
>> >>
>> >> set.seed(30218)
>> >>
>> >> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>> >"AUC", preProc
>> >> = c("center", "scale", "nzv"), trControl = boot3)
>> >>
>> >> getTrainPerf(ct)
>> >>
>> >>
>> >>
>> >>
>> ><https://www.avast.com/sig-email?utm_medium=email&utm_
>> source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
>> >Virus-free.
>> >> www.avast.com
>> >>
>> ><https://www.avast.com/sig-email?utm_medium=email&utm_
>> source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
>> >>
>> >> On Thu, Jul 23, 2020 at 4:01 PM Neha gupta <neha.bologna90 at gmail.com>
>> >> wrote:
>> >>
>> >>>
>> >>> Hello David, thanks for your reply. I have added the information.
>> >>>
>> >>> library(caret)
>> >>> library(farff)
>> >>> library(DMwR)
>> >>>
>> >>> d=readARFF("bughunter.arff")
>> >>> dput( head( d, 30 ) )
>> >>>
>> >>> index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>> >>>
>> >>> tr <- d[index, ]
>> >>>
>> >>> ts <- d[-index, ]
>> >>>
>> >>> boot3 <- trainControl(method = "repeatedcv", number=10,
>> >>> repeats=10,classProbs = TRUE,verboseIter = FALSE,
>> >>>
>> >>> summaryFunction = twoClassSummary, sampling = "rose")
>> >>>
>> >>> set.seed(30218)
>> >>>
>> >>> ct <- train(`Bug class` ~ ., data = tr, method = "pls", metric =
>> >"AUC", preProc
>> >>> = c("center", "scale", "nzv"), trControl = boot3)
>> >>>
>> >>> getTrainPerf(ct)
>> >>>
>> >>> On Thu, Jul 23, 2020 at 1:08 AM David Winsemius
>> ><dwinsemius at comcast.net>
>> >>> wrote:
>> >>>
>> >>>>
>> >>>> On 7/22/20 3:43 PM, Neha gupta wrote:
>> >>>> > Hello,
>> >>>> >
>> >>>> >
>> >>>> > I get the following error when I use the ROSE class balancing
>> >method
>> >>>> but
>> >>>> > when I use other methods like SMOTE, up, down, I do not get any
>> >error
>> >>>> > message.
>> >>>> >
>> >>>> >
>> >>>> > Something is wrong; all the ROC metric values are missing:
>> >>>> >
>> >>>> > ROC Sens Spec
>> >>>> >
>> >>>> > Min. : NA Min. : NA Min. : NA
>> >>>> >
>> >>>> > 1st Qu.: NA 1st Qu.: NA 1st Qu.: NA
>> >>>> >
>> >>>> > Median : NA Median : NA Median : NA
>> >>>> >
>> >>>> > Mean :NaN Mean :NaN Mean :NaN
>> >>>> >
>> >>>> > 3rd Qu.: NA 3rd Qu.: NA 3rd Qu.: NA
>> >>>> >
>> >>>> > Max. : NA Max. : NA Max. : NA
>> >>>> >
>> >>>> >
>> >>>> >
>> >>>> > library(DMwR)
>> >>>> >
>> >>>> > d=readARFF("bughunter.arff")
>> >>>>
>> >>>> After installing that package and loading pkg:DMwR I get:
>> >>>>
>> >>>>
>> >>>> Error in readARFF("bughunter.arff") : could not find function
>> >"readARFF"
>> >>>>
>> >>>>
>> >>>> Since you also posted in HTML, I suggest you read the Posting
>> >Guide,
>> >>>> restart and R session and post a reproducible example that loads
>> >all
>> >>>> needed packages and data.
>> >>>>
>> >>>> --
>> >>>>
>> >>>> David.
>> >>>>
>> >>>> >
>> >>>> > index <- createDataPartition(d$`Bug class`, p = .70,list = FALSE)
>> >>>> >
>> >>>> > tr <- d[index, ]
>> >>>> >
>> >>>> > ts <- d[-index, ]
>> >>>> >
>> >>>> > boot3 <- trainControl(method = "repeatedcv", number=10,
>> >>>> > repeats=10,classProbs = TRUE,verboseIter = FALSE,
>> >>>> >
>> >>>> > summaryFunction = twoClassSummary, sampling = "rose")
>> >>>> >
>> >>>> > set.seed(30218)
>> >>>> >
>> >>>> > ct <- train(`Bug class` ~ ., data = tr,
>> >>>> >
>> >>>> > method = "pls",
>> >>>> >
>> >>>> > metric = "AUC",
>> >>>> >
>> >>>> > preProc = c("center", "scale", "nzv"),
>> >>>> >
>> >>>> > trControl = boot3)
>> >>>> >
>> >>>> > getTrainPerf(ct)
>> >>>> >
>> >>>> >       [[alternative HTML version deleted]]
>> >>>> >
>> >>>> > ______________________________________________
>> >>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>> > PLEASE do read the posting guide
>> >>>> http://www.R-project.org/posting-guide.html
>> >>>> > and provide commented, minimal, self-contained, reproducible
>> >code.
>> >>>>
>> >>>
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> >______________________________________________
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >https://stat.ethz.ch/mailman/listinfo/r-help
>> >PLEASE do read the posting guide
>> >http://www.R-project.org/posting-guide.html
>> >and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Sat Jul 25 14:00:24 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sat, 25 Jul 2020 14:00:24 +0200
Subject: [R] Error in Rose Method (class balancing)
In-Reply-To: <F8FDA76A-CBA1-44E8-A82D-9F04B3E18256@dcn.davis.ca.us>
References: <CA+nrPnvat0E3PL17kwLQCRz4rGRxbd9BEDy9VoVyNpBqZdYaXw@mail.gmail.com>
 <b4a9d6cf-66f0-3533-e252-3c509cd02570@comcast.net>
 <CA+nrPnsor1jMQWmp54oczUy_Q+k1bbNsDrO0B2vqhD9=Kx6qsQ@mail.gmail.com>
 <CA+nrPnusE9H+o3=m0Xu=eGXcsuhZ48cne0fLtuKRZASg1f2JQw@mail.gmail.com>
 <CAGxFJbR76jWR_zh_88Xq9zR8o+asuhTzQy4XUPTW3P1=azC8gQ@mail.gmail.com>
 <F8FDA76A-CBA1-44E8-A82D-9F04B3E18256@dcn.davis.ca.us>
Message-ID: <20200725120024.GQ1283@posteo.no>

On 2020-07-23 13:10 -0700, Jeff Newmiller wrote:
> 
> I would recommend trying to use dput() 
> to remove the need for the file 

Awesome!  I've been looking for dput() 
for a long time.  Thank you!

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200725/9b32a37b/attachment.sig>

From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Jul 25 16:56:38 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sat, 25 Jul 2020 09:56:38 -0500
Subject: [R] [External] Re: help with web scraping
In-Reply-To: <20200725091051.GN1283@posteo.no>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
 <20200724141618.GB144650@posteo.no>
 <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>
 <20200725091051.GN1283@posteo.no>
Message-ID: <5537ff4f-a677-935a-855b-18431992f6b6@effectivedefense.org>

Dear Rasmus et al.:


On 2020-07-25 04:10, Rasmus Liland wrote:
> On 2020-07-24 10:28 -0500, Spencer Graves wrote:
>> Dear Rasmus:
>>
>>> Dear Spencer,
>>>
>>> I unified the party tables after the
>>> first summary table like this:
>>>
>>> 	url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
>>> 	M_sos <- RCurl::getURL(url)
>>> 	saveRDS(object=M_sos, file="dcp.rds")
>>> 	dat <- XML::readHTMLTable(M_sos)
>>> 	idx <- 2:length(dat)
>>> 	cn <- unique(unlist(lapply(dat[idx], colnames)))
>> This is useful for this application.
>>
>>> 	dat <- do.call(rbind,
>>> 	  sapply(idx, function(i, dat, cn) {
>>> 	    x <- dat[[i]]
>>> 	    x[,cn[!(cn %in% colnames(x))]] <- NA
>>> 	    x <- x[,cn]
>>> 	    x$Party <- names(dat)[i]
>>> 	    return(list(x))
>>> 	  }, dat=dat, cn=cn))
>>> 	dat[,"Date Filed"] <-
>>> 	  as.Date(x=dat[,"Date Filed"],
>>> 	          format="%m/%d/%Y")
>> This misses something extremely
>> important for this application:?  The
>> political office.? That's buried in
>> the HTML or whatever it is.? I'm using
>> something like the following to find
>> that:
>>
>> str(LtGov <- gregexpr('Lieutenant Governor', M_sos)[[1]])
> Dear Spencer,
>
> I came up with a solution, but it is not
> very elegant.  Instead of showing you
> the solution, hoping you understand
> everything in it, I istead want to give
> you some emphatic hints to see if you
> can come up with a solution on you own.
>
> - XML::htmlTreeParse(M_sos)
>    - *Gandalf voice*: climb the tree
>      until you find the content you are
>      looking for flat out at the level of
>      ?The Children of the Div?, *uuuUUU*
>    - you only want to keep the table and
>      header tags at this level
> - Use XML::xmlValue to extract the
>    values of all the headers (the
>    political positions)
> - Observe that all the tables on the
>    page you were able to extract
>    previously using XML::readHTMLTable,
>    are at this level, shuffled between
>    the political position header tags,
>    this means you extract the political
>    position and party affiliation by
>    using a for loop, if statements,
>    typeof, names, and [] and [[]] to grab
>    different things from the list
>    (content or the bag itself).
>    XML::readHTMLTable strips away the
>    line break tags from the Mailing
>    address, so if you find a better way
>    of extracting the tables, tell me,
>    e.g. you get
>
> 	8805 HUNTER AVEKANSAS CITY MO 64138
>
>    and not
>
> 	8805 HUNTER AVE<br/>KANSAS CITY MO 64138
>
> When you've completed this ?programming
> quest?, you're back at the level of the
> previous email, i.e.  you have have the
> same tables, but with political position
> and party affiliation added to them.


 ????? Please excuse:? Before my last post, I had written code to do all 
that.? In brief, the political offices are "h3" tags.? I used "strsplit" 
to split the string at "<h3>".? I then wrote a function to find "</h3>", 
extract the political office and pass the rest to "XML::readHTMLTable", 
adding columns for party and political office.


 ????? However, this suppressed "<br/>" everywhere.? I thought there 
should be an option with something like "XML::readHTMLTable" that would 
not delete "<br/>" everywhere, but I couldn't find it.? If you aren't 
aware of one, I can gsub("<br/>", "\n", ...) on the string for each 
political office before passing it to "XML::readHTMLTable".? I just 
tested this:? It works.


 ????? I have other web scraping problems in my work plan for the few 
days.? I will definitely try XML::htmlTreeParse, etc., as you suggest.


 ????? Thanks again.
 ????? Spencer Graves
>
> Best,
> Rasmus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From percent||101 @end|ng |rom gm@||@com  Sat Jul 25 12:10:58 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Sat, 25 Jul 2020 12:10:58 +0200
Subject: [R] One year return not year to date
Message-ID: <CAB-TgNtyzifN2xAe=5Ps8w8DZiZhZ9bySQ4GOtb9keCLqgC4kw@mail.gmail.com>

Hi all,

I want to calculate interanual (not year to date) variation of a stock, I
am able to obtain year to date with annualReturn, but no way to obtain the
interanual increase. It says me no numerical output.

Can anyone guide me to obtain it.

library(PerformanceAnalytics)
library(dplyr)
library(tibble)
library(lubridate)
library(PerformanceAnalytics)
library(quantmod)
library(ggplot2)
library(png)
library(RCurl)

fecha<-Sys.Date()-365 #with this I obtain one year back beginning
precio<-getSymbols("ACX.MC",from='fecha')
ret2<- na.omit(CalculateReturns(Cl(ACX.MC)))
g<-annualReturn(ACX.MC) #This is year to date
d<-CalculateReturns(Cl(ACX.MCC))
aaa<-getQuote('ACX.MC',from='fecha')
Lastprice<-aaa[1,2]

lo<-c(diff(log(aaa),250))  #With this I try  to obtain interanual year
variation but error


Hope you can help me

	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Sat Jul 25 17:54:06 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sat, 25 Jul 2020 11:54:06 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <973a825b-e3f8-ecfb-2295-c0b456290568@sapo.pt>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <603185094.6758128.1595617031422@mail.yahoo.com>
 <973a825b-e3f8-ecfb-2295-c0b456290568@sapo.pt>
Message-ID: <17fe6b15-77c0-9b0e-a92f-a31685efec88@meddatainc.com>

On 07/24/2020 05:56 PM, Rui Barradas wrote:
> Hello,
>
> I've just tried it.
>
> library(ggplot2)
> #library(grid)
> library(cowplot)
>
> s <- ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>
> #g2 <- ggplotGrob(s)
> #g3 <- ggplotGrob(v)
> #g <- rbind(g2, g3, size = "first")
>
> cowplot::plot_grid(s, v, align = "h", nrow = 2, rel_heights = 2:1)
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 19:57 de 24/07/2020, Felipe Carrillo via R-help escreveu:
>> What about cowplot?
>> https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html
>>
>> ???? On Friday, July 24, 2020, 11:51:17 AM PDT, H <agents at meddatainc.com> wrote:
>> ? ? On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>>> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>>>
>>> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>>> On 07/24/2020 01:14 PM, John Kane wrote:
>>>>> <i>Well, I am not looking for help debugging my code but for
>>>> information to better understand arranging plots vertically. The code
>>>> above aligns them horizontally as expected.</i>
>>>>> Sigh, we know the code works but we do not know what the plots are
>>>> and we cannot play around with them to see if we can help you if we
>>>> have nothing to work with.
>>>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>> ?? ? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>>> ?? ? > Hav a look at the packages cowplot and patchwork
>>>>> ?? ? >
>>>>> ?? ? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>> ?? ? >>
>>>>> ?? ? >> I am trying to arrange two plots vertically, ie plot 2 below
>>>> plot 1, where I want the plots to align columnwise but have a height
>>>> ratio of eg 3:1.
>>>>> ?? ? >>
>>>>> ?? ? >> My attempts so far after consulting various webpages is that
>>>> the following code aligns them columnwise correctly but I have, so far,
>>>> failed in setting the relative heights...
>>>>> ?? ? >>
>>>>> ?? ? >> g2<-ggplotGrob(s)
>>>>> ?? ? >> g3<-ggplotGrob(v)
>>>>> ?? ? >> g<-rbind(g2, g3, size = "first")
>>>>> ?? ? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>>> ?? ? >>
>>>>> ?? ? >> what would the appropriate statement for the relative heights
>>>> to add here be?
>>>>> ?? ? >>
>>>>> ?? ? >> grid.newpage()
>>>>> ?? ? >> grid.draw(g)
>>>>> ?? ? >>
>>>>> ?? ? >> Thank you!
>>>>> ?? ? >>
>>>>> ?? ? >> ______________________________________________
>>>>> ?? ? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>>> list -- To UNSUBSCRIBE and more, see
>>>>> ?? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> ?? ? >> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>>> ?? ? >> and provide commented, minimal, self-contained, reproducible
>>>> code.
>>>>> ?? ? So this is not possible without using one of those two packages?
>>>> I got the impression I should be able to use grid.arrange to do so but
>>>> was not able to get it to work without disturbing the width alignment
>>>> above...
>>>>> ?? ? ______________________________________________
>>>>> ?? ? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>>> -- To UNSUBSCRIBE and more, see
>>>>> ?? ? https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> ?? ? PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>>> ?? ? and provide commented, minimal, self-contained, reproducible
>>>> code.
>>>>>
>>>>> --?
>>>>> John Kane
>>>>> Kingston ON Canada
>>>> No need to play around with anything. I am simply looking for
>>>> assistance on how to use eg arrangeGrob to not only align two plots
>>>> columnwise but also adjust their heights relative to each other rather
>>>> than 1:1.
>>>>
>>>> Can arrangeGrob() be used for that?
>>>>
>>>>
>>>> ???? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>> Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:
>>
>> |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |
>>
>> |to make the second chart 1/2 the size of the top one?|
>>
>> ||
>>
>>
>> ???? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> ?? ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
Thank you for your example. However, this does not align the plot areas horizontally. It happens to do so in this example because the y-axis labels are the same length etc but when this is not the case, it fails.


From jr@| @end|ng |rom po@teo@no  Sat Jul 25 18:30:52 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sat, 25 Jul 2020 18:30:52 +0200
Subject: [R] [External] Re: help with web scraping
In-Reply-To: <5537ff4f-a677-935a-855b-18431992f6b6@effectivedefense.org>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
 <20200724141618.GB144650@posteo.no>
 <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>
 <20200725091051.GN1283@posteo.no>
 <5537ff4f-a677-935a-855b-18431992f6b6@effectivedefense.org>
Message-ID: <20200725163052.GA60251@posteo.no>

On 2020-07-25 09:56 -0500, Spencer Graves wrote:
> Dear Rasmus et al.:

It is LILAND et al., is it not?  I do 
not belong to a large Confucian family 
structure (putting the hunter-gatherer 
horse-rider tribe name first in all-caps 
in the email), else it's customary to 
put a comma in there, isn't it? ... 
right, moving on:

On 2020-07-25 04:10, Rasmus Liland wrote:
> 
>  ????? 

It might be a better idea to write the 
reply in plain-text utf-8 or at least 
Western or Eastern-European ISO euro 
encoding instead of us-ascii (maybe 
KOI8, ?\_(?)_/?) ...  something in your 
email got string-replaced by "?????" and 
also "?" got replaced by "?".

Please research using Thunderbird, Claws 
mail, or some other sane e-mail client; 
they are great, I promise.

> Please excuse:? Before my last post, I 
> had written code to do all that.? 

Good!

> In brief, the political offices are 
> "h3" tags.?

Yes, some type of header element at 
least, in-between the various tables, 
everything children of the div in the 
element tree.

> I used "strsplit" to split the string 
> at "<h3>".? I then wrote a 
> function to find "</h3>", extract the 
> political office and pass the rest to 
> "XML::readHTMLTable", adding columns 
> for party and political office.

Yes, doing that for the political office 
is also possible, but the party is 
inside the table's caption tag, which 
end up as the name of the table in the 
XML::readHTMLTable list ...

> However, this suppressed "<br/>" 
> everywhere.?

Why is that, please explain.

> I thought there should be 
> an option with something like 
> "XML::readHTMLTable" that would not 
> delete "<br/>" everywhere, but I 
> couldn't find it.?

No, there is not, AFAIK.  Please, if 
anyone else knows, please say so *echoes 
in the forest*

> If you aren't aware of one, I can 
> gsub("<br/>", "\n", ...) on the string 
> for each political office before 
> passing it to "XML::readHTMLTable".? I 
> just tested this:? It works.

Such a great hack!  IMHO, this is much 
more flexible than using 
xml2::read_html, rvest::read_table, 
dplyr::mutate like here[1]

> I have other web scraping problems in 
> my work plan for the few days.?

Maybe, idk ... 

> I will definitely try 
> XML::htmlTreeParse, etc., as you 
> suggest.

I wish you good luck,
Rasmus

[1] https://stackoverflow.com/questions/38707669/how-to-read-an-html-table-and-account-for-line-breaks-within-cells

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200725/bfa09420/attachment.sig>

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jul 25 18:36:24 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 25 Jul 2020 17:36:24 +0100
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <17fe6b15-77c0-9b0e-a92f-a31685efec88@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <603185094.6758128.1595617031422@mail.yahoo.com>
 <973a825b-e3f8-ecfb-2295-c0b456290568@sapo.pt>
 <17fe6b15-77c0-9b0e-a92f-a31685efec88@meddatainc.com>
Message-ID: <09bcafd3-bc95-3b71-3468-c8f5c49f989e@sapo.pt>

Hello,

Inline.

?s 16:54 de 25/07/2020, H escreveu:
> On 07/24/2020 05:56 PM, Rui Barradas wrote:
>> Hello,
>>
>> I've just tried it.
>>
>> library(ggplot2)
>> #library(grid)
>> library(cowplot)
>>
>> s <- ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>
>> #g2 <- ggplotGrob(s)
>> #g3 <- ggplotGrob(v)
>> #g <- rbind(g2, g3, size = "first")
>>
>> cowplot::plot_grid(s, v, align = "h", nrow = 2, rel_heights = 2:1)
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 19:57 de 24/07/2020, Felipe Carrillo via R-help escreveu:
>>> What about cowplot?
>>> https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html
>>>
>>>  ???? On Friday, July 24, 2020, 11:51:17 AM PDT, H <agents at meddatainc.com> wrote:
>>>  ? ? On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>>>> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>>>>
>>>> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>>>> On 07/24/2020 01:14 PM, John Kane wrote:
>>>>>> <i>Well, I am not looking for help debugging my code but for
>>>>> information to better understand arranging plots vertically. The code
>>>>> above aligns them horizontally as expected.</i>
>>>>>> Sigh, we know the code works but we do not know what the plots are
>>>>> and we cannot play around with them to see if we can help you if we
>>>>> have nothing to work with.
>>>>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>  ?? ? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>>>>  ?? ? > Hav a look at the packages cowplot and patchwork
>>>>>>  ?? ? >
>>>>>>  ?? ? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>  ?? ? >>
>>>>>>  ?? ? >> I am trying to arrange two plots vertically, ie plot 2 below
>>>>> plot 1, where I want the plots to align columnwise but have a height
>>>>> ratio of eg 3:1.
>>>>>>  ?? ? >>
>>>>>>  ?? ? >> My attempts so far after consulting various webpages is that
>>>>> the following code aligns them columnwise correctly but I have, so far,
>>>>> failed in setting the relative heights...
>>>>>>  ?? ? >>
>>>>>>  ?? ? >> g2<-ggplotGrob(s)
>>>>>>  ?? ? >> g3<-ggplotGrob(v)
>>>>>>  ?? ? >> g<-rbind(g2, g3, size = "first")
>>>>>>  ?? ? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>>>>  ?? ? >>
>>>>>>  ?? ? >> what would the appropriate statement for the relative heights
>>>>> to add here be?
>>>>>>  ?? ? >>
>>>>>>  ?? ? >> grid.newpage()
>>>>>>  ?? ? >> grid.draw(g)
>>>>>>  ?? ? >>
>>>>>>  ?? ? >> Thank you!
>>>>>>  ?? ? >>
>>>>>>  ?? ? >> ______________________________________________
>>>>>>  ?? ? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>>>> list -- To UNSUBSCRIBE and more, see
>>>>>>  ?? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>  ?? ? >> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>>>  ?? ? >> and provide commented, minimal, self-contained, reproducible
>>>>> code.
>>>>>>  ?? ? So this is not possible without using one of those two packages?
>>>>> I got the impression I should be able to use grid.arrange to do so but
>>>>> was not able to get it to work without disturbing the width alignment
>>>>> above...
>>>>>>  ?? ? ______________________________________________
>>>>>>  ?? ? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>>>> -- To UNSUBSCRIBE and more, see
>>>>>>  ?? ? https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>  ?? ? PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>>>  ?? ? and provide commented, minimal, self-contained, reproducible
>>>>> code.
>>>>>> -- 
>>>>>> John Kane
>>>>>> Kingston ON Canada
>>>>> No need to play around with anything. I am simply looking for
>>>>> assistance on how to use eg arrangeGrob to not only align two plots
>>>>> columnwise but also adjust their heights relative to each other rather
>>>>> than 1:1.
>>>>>
>>>>> Can arrangeGrob() be used for that?
>>>>>
>>>>>
>>>>>  ???? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>> Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:
>>>
>>> |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |
>>>
>>> |to make the second chart 1/2 the size of the top one?|
>>>
>>> ||
>>>
>>>
>>>  ???? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>  ?? ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> Thank you for your example. However, this does not align the plot areas horizontally. It happens to do so in this example because the y-axis labels are the same length etc but when this is not the case, it fails.

Maybe it fails but can you give an example?
The question, as far as I understand it, is about the plots' relative 
heights, not about horizontal alignment. And (all) others have asked you 
to give a reproducible example, please don't ask us to guess a use case 
axis labels lengths (!), which is impossible to do.

Anyway, the function cowplot::plot_grid has an argument `align`. One of 
the possible values is "hv" for both horizontal and vertical alignment.

Hope this helps,

Rui Barradas

>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Jul 25 19:43:20 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sat, 25 Jul 2020 12:43:20 -0500
Subject: [R] [External] Re: help with web scraping
In-Reply-To: <20200725163052.GA60251@posteo.no>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
 <20200724141618.GB144650@posteo.no>
 <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>
 <20200725091051.GN1283@posteo.no>
 <5537ff4f-a677-935a-855b-18431992f6b6@effectivedefense.org>
 <20200725163052.GA60251@posteo.no>
Message-ID: <0faf9c8b-c08f-2ec9-c8dd-661e335dffee@effectivedefense.org>

Dear Rasmus Liland et al.:


On 2020-07-25 11:30, Rasmus Liland wrote:
> On 2020-07-25 09:56 -0500, Spencer Graves wrote:
>> Dear Rasmus et al.:
> 
> It is LILAND et al., is it not?  ... else it's customary to
> put a comma in there, isn't it? ...


The APA Style recommends "Sharp et al., 2007":


https://blog.apastyle.org/apastyle/2011/11/the-proper-use-of-et-al-in-apa-style.html


	  Regarding Confucius, I'm confused.



> right, moving on:
> 
> On 2020-07-25 04:10, Rasmus Liland wrote:
>>

<snip>

> 
> Please research using Thunderbird, Claws
> mail, or some other sane e-mail client;
> they are great, I promise.


Thanks.  I researched it and turned of HTML.  Please excuse:  I noticed 
it was a problem, but hadn't prioritized time to research and fix it 
until your comment.  Thanks.

> 
>> Please excuse:? Before my last post, I
>> had written code to do all that.?
> 
> Good!
> 
>> In brief, the political offices are
>> "h3" tags.?
> 
> Yes, some type of header element at
> least, in-between the various tables,
> everything children of the div in the
> element tree.
> 
>> I used "strsplit" to split the string
>> at "<h3>".? I then wrote a
>> function to find "</h3>", extract the
>> political office and pass the rest to
>> "XML::readHTMLTable", adding columns
>> for party and political office.
> 
> Yes, doing that for the political office
> is also possible, but the party is
> inside the table's caption tag, which
> end up as the name of the table in the
> XML::readHTMLTable list ...
> 
>> However, this suppressed "<br/>"
>> everywhere.?
> 
> Why is that, please explain.
> 

	  I don't know why the Missouri Secretary of State's web site includes 
"<br/>" to signal a new line, but it does.  I also don't know why 
XML::readHTMLTable suppressed "<br/>" everywhere it occurred, but it did 
that.  After I used gsub to replace "<br/>" with "\n", I found that 
XML::readHTMLTable did not replace "\n", so I got what I wanted.


>> I thought there should be
>> an option with something like
>> "XML::readHTMLTable" that would not
>> delete "<br/>" everywhere, but I
>> couldn't find it.?
> 
> No, there is not, AFAIK.  Please, if
> anyone else knows, please say so *echoes
> in the forest*
> 
>> If you aren't aware of one, I can
>> gsub("<br/>", "\n", ...) on the string
>> for each political office before
>> passing it to "XML::readHTMLTable".? I
>> just tested this:? It works.
> 
> Such a great hack!  IMHO, this is much
> more flexible than using
> xml2::read_html, rvest::read_table,
> dplyr::mutate like here[1]
> 
>> I have other web scraping problems in
>> my work plan for the few days.?
> 
> Maybe, idk ...
> 
>> I will definitely try
>> XML::htmlTreeParse, etc., as you
>> suggest.
> 
> I wish you good luck,
> Rasmus
> 
> [1] https://stackoverflow.com/questions/38707669/how-to-read-an-html-table-and-account-for-line-breaks-within-cells


	  And I added my solution to this problem to this Stackoverflow thread.


	  Thanks again,
	  Spencer
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Sat Jul 25 19:58:12 2020
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Sat, 25 Jul 2020 10:58:12 -0700
Subject: [R] [External] Re: help with web scraping
In-Reply-To: <5537ff4f-a677-935a-855b-18431992f6b6@effectivedefense.org>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
 <20200724141618.GB144650@posteo.no>
 <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>
 <20200725091051.GN1283@posteo.no>
 <5537ff4f-a677-935a-855b-18431992f6b6@effectivedefense.org>
Message-ID: <CAA99HCxFEvnSuGzwq8zbwo2XwCozEtPeG43+VUnp+eNqQPnwzQ@mail.gmail.com>

Dear Spencer Graves (and Rasmus Liland),

I've had some luck just using gsub() to alter the offending "</br>"
characters, appending a "___" tag at each instance of "<br>" (first I
checked the text to make sure it didn't contain any pre-existing
instances of "___"). See the output snippet below:

> library(RCurl)
> library(XML)
> sosURL <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> sosChars <- getURL(sosURL)
> sosChars2 <- gsub("<br/>", "<br/>___", sosChars)
> MOcan <- readHTMLTable(sosChars2)
> MOcan[[2]]
                  Name                          Mailing Address Random
Number Date Filed
1       Raleigh Ritter      4476 FIVE MILE RD___SENECA MO 64865
   185  2/25/2020
2          Mike Parson         1458 E 464 RD___BOLIVAR MO 65613
   348  2/25/2020
3 James W. (Jim) Neely            PO BOX 343___CAMERON MO 64429
   477  2/25/2020
4     Saundra McDowell 3854 SOUTH AVENUE___SPRINGFIELD MO 65807
        3/31/2020
>

It's true, there's one a 'section' of MOcan output that contains
odd-looking characters (see the "Total" line of MOcan[[1]]). But my
guess is you'll be deleting this 'line' anyway--and recalulating totals in R.

Now that you have a comprehensive list object, you should be able to
pull out districts/races of interest. You might want to take a look at
the "rlist" package, to see if it can make your work a little easier:

https://CRAN.R-project.org/package=rlist
https://renkun-ken.github.io/rlist-tutorial/index.html

HTH, Bill.

W. Michels, Ph.D.









On Sat, Jul 25, 2020 at 7:56 AM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Dear Rasmus et al.:
>
>
> On 2020-07-25 04:10, Rasmus Liland wrote:
> > On 2020-07-24 10:28 -0500, Spencer Graves wrote:
> >> Dear Rasmus:
> >>
> >>> Dear Spencer,
> >>>
> >>> I unified the party tables after the
> >>> first summary table like this:
> >>>
> >>>     url <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> >>>     M_sos <- RCurl::getURL(url)
> >>>     saveRDS(object=M_sos, file="dcp.rds")
> >>>     dat <- XML::readHTMLTable(M_sos)
> >>>     idx <- 2:length(dat)
> >>>     cn <- unique(unlist(lapply(dat[idx], colnames)))
> >> This is useful for this application.
> >>
> >>>     dat <- do.call(rbind,
> >>>       sapply(idx, function(i, dat, cn) {
> >>>         x <- dat[[i]]
> >>>         x[,cn[!(cn %in% colnames(x))]] <- NA
> >>>         x <- x[,cn]
> >>>         x$Party <- names(dat)[i]
> >>>         return(list(x))
> >>>       }, dat=dat, cn=cn))
> >>>     dat[,"Date Filed"] <-
> >>>       as.Date(x=dat[,"Date Filed"],
> >>>               format="%m/%d/%Y")
> >> This misses something extremely
> >> important for this application:?  The
> >> political office.? That's buried in
> >> the HTML or whatever it is.? I'm using
> >> something like the following to find
> >> that:
> >>
> >> str(LtGov <- gregexpr('Lieutenant Governor', M_sos)[[1]])
> > Dear Spencer,
> >
> > I came up with a solution, but it is not
> > very elegant.  Instead of showing you
> > the solution, hoping you understand
> > everything in it, I istead want to give
> > you some emphatic hints to see if you
> > can come up with a solution on you own.
> >
> > - XML::htmlTreeParse(M_sos)
> >    - *Gandalf voice*: climb the tree
> >      until you find the content you are
> >      looking for flat out at the level of
> >      ?The Children of the Div?, *uuuUUU*
> >    - you only want to keep the table and
> >      header tags at this level
> > - Use XML::xmlValue to extract the
> >    values of all the headers (the
> >    political positions)
> > - Observe that all the tables on the
> >    page you were able to extract
> >    previously using XML::readHTMLTable,
> >    are at this level, shuffled between
> >    the political position header tags,
> >    this means you extract the political
> >    position and party affiliation by
> >    using a for loop, if statements,
> >    typeof, names, and [] and [[]] to grab
> >    different things from the list
> >    (content or the bag itself).
> >    XML::readHTMLTable strips away the
> >    line break tags from the Mailing
> >    address, so if you find a better way
> >    of extracting the tables, tell me,
> >    e.g. you get
> >
> >       8805 HUNTER AVEKANSAS CITY MO 64138
> >
> >    and not
> >
> >       8805 HUNTER AVE<br/>KANSAS CITY MO 64138
> >
> > When you've completed this ?programming
> > quest?, you're back at the level of the
> > previous email, i.e.  you have have the
> > same tables, but with political position
> > and party affiliation added to them.
>
>
>        Please excuse:  Before my last post, I had written code to do all
> that.  In brief, the political offices are "h3" tags.  I used "strsplit"
> to split the string at "<h3>".  I then wrote a function to find "</h3>",
> extract the political office and pass the rest to "XML::readHTMLTable",
> adding columns for party and political office.
>
>
>        However, this suppressed "<br/>" everywhere.  I thought there
> should be an option with something like "XML::readHTMLTable" that would
> not delete "<br/>" everywhere, but I couldn't find it.  If you aren't
> aware of one, I can gsub("<br/>", "\n", ...) on the string for each
> political office before passing it to "XML::readHTMLTable".  I just
> tested this:  It works.
>
>
>        I have other web scraping problems in my work plan for the few
> days.  I will definitely try XML::htmlTreeParse, etc., as you suggest.
>
>
>        Thanks again.
>        Spencer Graves
> >
> > Best,
> > Rasmus
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul 25 20:06:10 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 25 Jul 2020 11:06:10 -0700
Subject: [R] One year return not year to date
In-Reply-To: <CAB-TgNtyzifN2xAe=5Ps8w8DZiZhZ9bySQ4GOtb9keCLqgC4kw@mail.gmail.com>
References: <CAB-TgNtyzifN2xAe=5Ps8w8DZiZhZ9bySQ4GOtb9keCLqgC4kw@mail.gmail.com>
Message-ID: <CAGxFJbRNPtZ_zjzvmBkTYQwinZ3QQPcCsg_ha9p_pvrpFGLCxg@mail.gmail.com>

What is the error message? Knowing this may help others diagnose the
problem.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jul 25, 2020 at 8:41 AM Pedro p?ramo <percentil101 at gmail.com> wrote:

> Hi all,
>
> I want to calculate interanual (not year to date) variation of a stock, I
> am able to obtain year to date with annualReturn, but no way to obtain the
> interanual increase. It says me no numerical output.
>
> Can anyone guide me to obtain it.
>
> library(PerformanceAnalytics)
> library(dplyr)
> library(tibble)
> library(lubridate)
> library(PerformanceAnalytics)
> library(quantmod)
> library(ggplot2)
> library(png)
> library(RCurl)
>
> fecha<-Sys.Date()-365 #with this I obtain one year back beginning
> precio<-getSymbols("ACX.MC",from='fecha')
> ret2<- na.omit(CalculateReturns(Cl(ACX.MC)))
> g<-annualReturn(ACX.MC) #This is year to date
> d<-CalculateReturns(Cl(ACX.MCC))
> aaa<-getQuote('ACX.MC',from='fecha')
> Lastprice<-aaa[1,2]
>
> lo<-c(diff(log(aaa),250))  #With this I try  to obtain interanual year
> variation but error
>
>
> Hope you can help me
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Sat Jul 25 20:13:23 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sat, 25 Jul 2020 14:13:23 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <09bcafd3-bc95-3b71-3468-c8f5c49f989e@sapo.pt>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <603185094.6758128.1595617031422@mail.yahoo.com>
 <973a825b-e3f8-ecfb-2295-c0b456290568@sapo.pt>
 <17fe6b15-77c0-9b0e-a92f-a31685efec88@meddatainc.com>
 <09bcafd3-bc95-3b71-3468-c8f5c49f989e@sapo.pt>
Message-ID: <e25d4441-8160-a11f-9434-2e6a9be094e0@meddatainc.com>

On 07/25/2020 12:36 PM, Rui Barradas wrote:
> Hello,
>
> Inline.
>
> ?s 16:54 de 25/07/2020, H escreveu:
>> On 07/24/2020 05:56 PM, Rui Barradas wrote:
>>> Hello,
>>>
>>> I've just tried it.
>>>
>>> library(ggplot2)
>>> #library(grid)
>>> library(cowplot)
>>>
>>> s <- ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>>
>>> #g2 <- ggplotGrob(s)
>>> #g3 <- ggplotGrob(v)
>>> #g <- rbind(g2, g3, size = "first")
>>>
>>> cowplot::plot_grid(s, v, align = "h", nrow = 2, rel_heights = 2:1)
>>>
>>>
>>> Hope this helps,
>>>
>>> Rui Barradas
>>>
>>> ?s 19:57 de 24/07/2020, Felipe Carrillo via R-help escreveu:
>>>> What about cowplot?
>>>> https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html
>>>>
>>>> ????? On Friday, July 24, 2020, 11:51:17 AM PDT, H <agents at meddatainc.com> wrote:
>>>> ?? ? On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>>>>> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>>>>>
>>>>> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>>>>> On 07/24/2020 01:14 PM, John Kane wrote:
>>>>>>> <i>Well, I am not looking for help debugging my code but for
>>>>>> information to better understand arranging plots vertically. The code
>>>>>> above aligns them horizontally as expected.</i>
>>>>>>> Sigh, we know the code works but we do not know what the plots are
>>>>>> and we cannot play around with them to see if we can help you if we
>>>>>> have nothing to work with.
>>>>>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>> ??? ? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>>>>> ??? ? > Hav a look at the packages cowplot and patchwork
>>>>>>> ??? ? >
>>>>>>> ??? ? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>> ??? ? >>
>>>>>>> ??? ? >> I am trying to arrange two plots vertically, ie plot 2 below
>>>>>> plot 1, where I want the plots to align columnwise but have a height
>>>>>> ratio of eg 3:1.
>>>>>>> ??? ? >>
>>>>>>> ??? ? >> My attempts so far after consulting various webpages is that
>>>>>> the following code aligns them columnwise correctly but I have, so far,
>>>>>> failed in setting the relative heights...
>>>>>>> ??? ? >>
>>>>>>> ??? ? >> g2<-ggplotGrob(s)
>>>>>>> ??? ? >> g3<-ggplotGrob(v)
>>>>>>> ??? ? >> g<-rbind(g2, g3, size = "first")
>>>>>>> ??? ? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>>>>> ??? ? >>
>>>>>>> ??? ? >> what would the appropriate statement for the relative heights
>>>>>> to add here be?
>>>>>>> ??? ? >>
>>>>>>> ??? ? >> grid.newpage()
>>>>>>> ??? ? >> grid.draw(g)
>>>>>>> ??? ? >>
>>>>>>> ??? ? >> Thank you!
>>>>>>> ??? ? >>
>>>>>>> ??? ? >> ______________________________________________
>>>>>>> ??? ? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>>>>> list -- To UNSUBSCRIBE and more, see
>>>>>>> ??? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> ??? ? >> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> ??? ? >> and provide commented, minimal, self-contained, reproducible
>>>>>> code.
>>>>>>> ??? ? So this is not possible without using one of those two packages?
>>>>>> I got the impression I should be able to use grid.arrange to do so but
>>>>>> was not able to get it to work without disturbing the width alignment
>>>>>> above...
>>>>>>> ??? ? ______________________________________________
>>>>>>> ??? ? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>>>>> -- To UNSUBSCRIBE and more, see
>>>>>>> ??? ? https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> ??? ? PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> ??? ? and provide commented, minimal, self-contained, reproducible
>>>>>> code.
>>>>>>> --?
>>>>>>> John Kane
>>>>>>> Kingston ON Canada
>>>>>> No need to play around with anything. I am simply looking for
>>>>>> assistance on how to use eg arrangeGrob to not only align two plots
>>>>>> columnwise but also adjust their heights relative to each other rather
>>>>>> than 1:1.
>>>>>>
>>>>>> Can arrangeGrob() be used for that?
>>>>>>
>>>>>>
>>>>>> ????? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:
>>>>
>>>> |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |
>>>>
>>>> |to make the second chart 1/2 the size of the top one?|
>>>>
>>>> ||
>>>>
>>>>
>>>> ????? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> ??? ????[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> Thank you for your example. However, this does not align the plot areas horizontally. It happens to do so in this example because the y-axis labels are the same length etc but when this is not the case, it fails.
>
> Maybe it fails but can you give an example?
> The question, as far as I understand it, is about the plots' relative heights, not about horizontal alignment. And (all) others have asked you to give a reproducible example, please don't ask us to guess a use case axis labels lengths (!), which is impossible to do.
>
> Anyway, the function cowplot::plot_grid has an argument `align`. One of the possible values is "hv" for both horizontal and vertical alignment.
>
> Hope this helps,
>
> Rui Barradas
>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
The easiest demonstration would be to replace:

v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()

with:

v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width * 1000)) + geom_point()

I am looking to not only being able to set relative heights of rows (as your code correctly does) but also have the plot areas aligned.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jul 25 21:01:23 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 25 Jul 2020 20:01:23 +0100
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <e25d4441-8160-a11f-9434-2e6a9be094e0@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <603185094.6758128.1595617031422@mail.yahoo.com>
 <973a825b-e3f8-ecfb-2295-c0b456290568@sapo.pt>
 <17fe6b15-77c0-9b0e-a92f-a31685efec88@meddatainc.com>
 <09bcafd3-bc95-3b71-3468-c8f5c49f989e@sapo.pt>
 <e25d4441-8160-a11f-9434-2e6a9be094e0@meddatainc.com>
Message-ID: <a72f5a6c-29ce-331a-172f-c15a401cf83a@sapo.pt>

Hello,

OK, now it's reproducible, thanks.
align = "hv" works like I had suggested.

The full code is now

library(ggplot2)
library(cowplot)

s <- ggplot(data = subset(iris, Species == 'virginica'), 
aes(Sepal.Length, Sepal.Width)) + geom_point()
v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, 
Sepal.Width * 1000)) + geom_point()

cowplot::plot_grid(s, v, align = "hv", nrow = 2, rel_heights = 2:1)


Also, I have been failing to comply to the posting guide and never 
posted the output of

sessionInfo()
R version 4.0.2 (2020-06-22)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18362)

Matrix products: default

locale:
[1] LC_COLLATE=Portuguese_Portugal.1252 LC_CTYPE=Portuguese_Portugal.1252
[3] LC_MONETARY=Portuguese_Portugal.1252 LC_NUMERIC=C
[5] LC_TIME=Portuguese_Portugal.1252

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets? methods base

other attached packages:
[1] cowplot_1.0.0 ggplot2_3.3.2 tidyr_1.1.0?? dplyr_1.0.0 sos_2.0-0
[6] brew_1.0-6

loaded via a namespace (and not attached):
 ?[1] Rcpp_1.0.4.6???? magrittr_1.5???? tidyselect_1.1.0 munsell_0.5.0
 ?[5] colorspace_1.4-1 R6_2.4.1???????? rlang_0.4.6 fansi_0.4.1
 ?[9] tools_4.0.2????? grid_4.0.2?????? gtable_0.3.0 utf8_1.1.4
[13] cli_2.0.2??????? withr_2.2.0????? ellipsis_0.3.1 digest_0.6.25
[17] assertthat_0.2.1 tibble_3.0.1???? lifecycle_0.2.0 crayon_1.3.4
[21] farver_2.0.3???? purrr_0.3.4????? vctrs_0.3.1 glue_1.4.1
[25] labeling_0.3???? compiler_4.0.2?? pillar_1.4.4 generics_0.0.2
[29] scales_1.1.1???? pkgconfig_2.0.3


Hope this helps,

Rui Barradas

?s 19:13 de 25/07/2020, H escreveu:
> On 07/25/2020 12:36 PM, Rui Barradas wrote:
>> Hello,
>>
>> Inline.
>>
>> ?s 16:54 de 25/07/2020, H escreveu:
>>> On 07/24/2020 05:56 PM, Rui Barradas wrote:
>>>> Hello,
>>>>
>>>> I've just tried it.
>>>>
>>>> library(ggplot2)
>>>> #library(grid)
>>>> library(cowplot)
>>>>
>>>> s <- ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>>>
>>>> #g2 <- ggplotGrob(s)
>>>> #g3 <- ggplotGrob(v)
>>>> #g <- rbind(g2, g3, size = "first")
>>>>
>>>> cowplot::plot_grid(s, v, align = "h", nrow = 2, rel_heights = 2:1)
>>>>
>>>>
>>>> Hope this helps,
>>>>
>>>> Rui Barradas
>>>>
>>>> ?s 19:57 de 24/07/2020, Felipe Carrillo via R-help escreveu:
>>>>> What about cowplot?
>>>>> https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html
>>>>>
>>>>>  ????? On Friday, July 24, 2020, 11:51:17 AM PDT, H <agents at meddatainc.com> wrote:
>>>>>  ?? ? On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>>>>>> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>>>>>>
>>>>>> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>>>>>> On 07/24/2020 01:14 PM, John Kane wrote:
>>>>>>>> <i>Well, I am not looking for help debugging my code but for
>>>>>>> information to better understand arranging plots vertically. The code
>>>>>>> above aligns them horizontally as expected.</i>
>>>>>>>> Sigh, we know the code works but we do not know what the plots are
>>>>>>> and we cannot play around with them to see if we can help you if we
>>>>>>> have nothing to work with.
>>>>>>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>>>  ??? ? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>>>>>>  ??? ? > Hav a look at the packages cowplot and patchwork
>>>>>>>>  ??? ? >
>>>>>>>>  ??? ? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>>>  ??? ? >>
>>>>>>>>  ??? ? >> I am trying to arrange two plots vertically, ie plot 2 below
>>>>>>> plot 1, where I want the plots to align columnwise but have a height
>>>>>>> ratio of eg 3:1.
>>>>>>>>  ??? ? >>
>>>>>>>>  ??? ? >> My attempts so far after consulting various webpages is that
>>>>>>> the following code aligns them columnwise correctly but I have, so far,
>>>>>>> failed in setting the relative heights...
>>>>>>>>  ??? ? >>
>>>>>>>>  ??? ? >> g2<-ggplotGrob(s)
>>>>>>>>  ??? ? >> g3<-ggplotGrob(v)
>>>>>>>>  ??? ? >> g<-rbind(g2, g3, size = "first")
>>>>>>>>  ??? ? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>>>>>>  ??? ? >>
>>>>>>>>  ??? ? >> what would the appropriate statement for the relative heights
>>>>>>> to add here be?
>>>>>>>>  ??? ? >>
>>>>>>>>  ??? ? >> grid.newpage()
>>>>>>>>  ??? ? >> grid.draw(g)
>>>>>>>>  ??? ? >>
>>>>>>>>  ??? ? >> Thank you!
>>>>>>>>  ??? ? >>
>>>>>>>>  ??? ? >> ______________________________________________
>>>>>>>>  ??? ? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>>>>>> list -- To UNSUBSCRIBE and more, see
>>>>>>>>  ??? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>  ??? ? >> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>  ??? ? >> and provide commented, minimal, self-contained, reproducible
>>>>>>> code.
>>>>>>>>  ??? ? So this is not possible without using one of those two packages?
>>>>>>> I got the impression I should be able to use grid.arrange to do so but
>>>>>>> was not able to get it to work without disturbing the width alignment
>>>>>>> above...
>>>>>>>>  ??? ? ______________________________________________
>>>>>>>>  ??? ? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>>>>>> -- To UNSUBSCRIBE and more, see
>>>>>>>>  ??? ? https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>  ??? ? PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>  ??? ? and provide commented, minimal, self-contained, reproducible
>>>>>>> code.
>>>>>>>> -- 
>>>>>>>> John Kane
>>>>>>>> Kingston ON Canada
>>>>>>> No need to play around with anything. I am simply looking for
>>>>>>> assistance on how to use eg arrangeGrob to not only align two plots
>>>>>>> columnwise but also adjust their heights relative to each other rather
>>>>>>> than 1:1.
>>>>>>>
>>>>>>> Can arrangeGrob() be used for that?
>>>>>>>
>>>>>>>
>>>>>>>  ????? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide
>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>> Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:
>>>>>
>>>>> |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |
>>>>>
>>>>> |to make the second chart 1/2 the size of the top one?|
>>>>>
>>>>> ||
>>>>>
>>>>>
>>>>>  ????? [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>  ??? ????[[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>> Thank you for your example. However, this does not align the plot areas horizontally. It happens to do so in this example because the y-axis labels are the same length etc but when this is not the case, it fails.
>> Maybe it fails but can you give an example?
>> The question, as far as I understand it, is about the plots' relative heights, not about horizontal alignment. And (all) others have asked you to give a reproducible example, please don't ask us to guess a use case axis labels lengths (!), which is impossible to do.
>>
>> Anyway, the function cowplot::plot_grid has an argument `align`. One of the possible values is "hv" for both horizontal and vertical alignment.
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> The easiest demonstration would be to replace:
>
> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>
> with:
>
> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width * 1000)) + geom_point()
>
> I am looking to not only being able to set relative heights of rows (as your code correctly does) but also have the plot areas aligned.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jul 25 21:05:34 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 25 Jul 2020 20:05:34 +0100
Subject: [R] One year return not year to date
In-Reply-To: <CAGxFJbRNPtZ_zjzvmBkTYQwinZ3QQPcCsg_ha9p_pvrpFGLCxg@mail.gmail.com>
References: <CAB-TgNtyzifN2xAe=5Ps8w8DZiZhZ9bySQ4GOtb9keCLqgC4kw@mail.gmail.com>
 <CAGxFJbRNPtZ_zjzvmBkTYQwinZ3QQPcCsg_ha9p_pvrpFGLCxg@mail.gmail.com>
Message-ID: <2e0915c7-731e-5fd0-925e-0818437cd157@sapo.pt>

Hello,

I believe the error message comes from the last line, getQuote returns a 
data.frame with a Date column and log(aaa) will try to log a date.
Error.
log(aaa[-1]) works, maybe the OP wants to revise the code and then come 
back to this or other thread.

Hope this helps,

Rui Barradas

?s 19:06 de 25/07/2020, Bert Gunter escreveu:
> What is the error message? Knowing this may help others diagnose the
> problem.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sat, Jul 25, 2020 at 8:41 AM Pedro p?ramo <percentil101 at gmail.com> wrote:
>
>> Hi all,
>>
>> I want to calculate interanual (not year to date) variation of a stock, I
>> am able to obtain year to date with annualReturn, but no way to obtain the
>> interanual increase. It says me no numerical output.
>>
>> Can anyone guide me to obtain it.
>>
>> library(PerformanceAnalytics)
>> library(dplyr)
>> library(tibble)
>> library(lubridate)
>> library(PerformanceAnalytics)
>> library(quantmod)
>> library(ggplot2)
>> library(png)
>> library(RCurl)
>>
>> fecha<-Sys.Date()-365 #with this I obtain one year back beginning
>> precio<-getSymbols("ACX.MC",from='fecha')
>> ret2<- na.omit(CalculateReturns(Cl(ACX.MC)))
>> g<-annualReturn(ACX.MC) #This is year to date
>> d<-CalculateReturns(Cl(ACX.MCC))
>> aaa<-getQuote('ACX.MC',from='fecha')
>> Lastprice<-aaa[1,2]
>>
>> lo<-c(diff(log(aaa),250))  #With this I try  to obtain interanual year
>> variation but error
>>
>>
>> Hope you can help me
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From @gent@ @end|ng |rom medd@t@|nc@com  Sat Jul 25 21:05:32 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sat, 25 Jul 2020 15:05:32 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <a72f5a6c-29ce-331a-172f-c15a401cf83a@sapo.pt>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <603185094.6758128.1595617031422@mail.yahoo.com>
 <973a825b-e3f8-ecfb-2295-c0b456290568@sapo.pt>
 <17fe6b15-77c0-9b0e-a92f-a31685efec88@meddatainc.com>
 <09bcafd3-bc95-3b71-3468-c8f5c49f989e@sapo.pt>
 <e25d4441-8160-a11f-9434-2e6a9be094e0@meddatainc.com>
 <a72f5a6c-29ce-331a-172f-c15a401cf83a@sapo.pt>
Message-ID: <95ff5da5-9e39-ecbd-b4a6-a198146a625d@meddatainc.com>

On 07/25/2020 03:01 PM, Rui Barradas wrote:
> Hello,
>
> OK, now it's reproducible, thanks.
> align = "hv" works like I had suggested.
>
> The full code is now
>
> library(ggplot2)
> library(cowplot)
>
> s <- ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width * 1000)) + geom_point()
>
> cowplot::plot_grid(s, v, align = "hv", nrow = 2, rel_heights = 2:1)
>
>
> Also, I have been failing to comply to the posting guide and never posted the output of
>
> sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 18362)
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=Portuguese_Portugal.1252 LC_CTYPE=Portuguese_Portugal.1252
> [3] LC_MONETARY=Portuguese_Portugal.1252 LC_NUMERIC=C
> [5] LC_TIME=Portuguese_Portugal.1252
>
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods base
>
> other attached packages:
> [1] cowplot_1.0.0 ggplot2_3.3.2 tidyr_1.1.0?? dplyr_1.0.0 sos_2.0-0
> [6] brew_1.0-6
>
> loaded via a namespace (and not attached):
> ?[1] Rcpp_1.0.4.6???? magrittr_1.5???? tidyselect_1.1.0 munsell_0.5.0
> ?[5] colorspace_1.4-1 R6_2.4.1???????? rlang_0.4.6 fansi_0.4.1
> ?[9] tools_4.0.2????? grid_4.0.2?????? gtable_0.3.0 utf8_1.1.4
> [13] cli_2.0.2??????? withr_2.2.0????? ellipsis_0.3.1 digest_0.6.25
> [17] assertthat_0.2.1 tibble_3.0.1???? lifecycle_0.2.0 crayon_1.3.4
> [21] farver_2.0.3???? purrr_0.3.4????? vctrs_0.3.1 glue_1.4.1
> [25] labeling_0.3???? compiler_4.0.2?? pillar_1.4.4 generics_0.0.2
> [29] scales_1.1.1???? pkgconfig_2.0.3
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 19:13 de 25/07/2020, H escreveu:
>> On 07/25/2020 12:36 PM, Rui Barradas wrote:
>>> Hello,
>>>
>>> Inline.
>>>
>>> ?s 16:54 de 25/07/2020, H escreveu:
>>>> On 07/24/2020 05:56 PM, Rui Barradas wrote:
>>>>> Hello,
>>>>>
>>>>> I've just tried it.
>>>>>
>>>>> library(ggplot2)
>>>>> #library(grid)
>>>>> library(cowplot)
>>>>>
>>>>> s <- ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>>>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>>>>
>>>>> #g2 <- ggplotGrob(s)
>>>>> #g3 <- ggplotGrob(v)
>>>>> #g <- rbind(g2, g3, size = "first")
>>>>>
>>>>> cowplot::plot_grid(s, v, align = "h", nrow = 2, rel_heights = 2:1)
>>>>>
>>>>>
>>>>> Hope this helps,
>>>>>
>>>>> Rui Barradas
>>>>>
>>>>> ?s 19:57 de 24/07/2020, Felipe Carrillo via R-help escreveu:
>>>>>> What about cowplot?
>>>>>> https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html
>>>>>>
>>>>>> ?????? On Friday, July 24, 2020, 11:51:17 AM PDT, H <agents at meddatainc.com> wrote:
>>>>>> ??? ? On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>>>>>>> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>>>>>>>
>>>>>>> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>>>>>>> On 07/24/2020 01:14 PM, John Kane wrote:
>>>>>>>>> <i>Well, I am not looking for help debugging my code but for
>>>>>>>> information to better understand arranging plots vertically. The code
>>>>>>>> above aligns them horizontally as expected.</i>
>>>>>>>>> Sigh, we know the code works but we do not know what the plots are
>>>>>>>> and we cannot play around with them to see if we can help you if we
>>>>>>>> have nothing to work with.
>>>>>>>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>>>> ???? ? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>>>>>>> ???? ? > Hav a look at the packages cowplot and patchwork
>>>>>>>>> ???? ? >
>>>>>>>>> ???? ? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>>>> ???? ? >>
>>>>>>>>> ???? ? >> I am trying to arrange two plots vertically, ie plot 2 below
>>>>>>>> plot 1, where I want the plots to align columnwise but have a height
>>>>>>>> ratio of eg 3:1.
>>>>>>>>> ???? ? >>
>>>>>>>>> ???? ? >> My attempts so far after consulting various webpages is that
>>>>>>>> the following code aligns them columnwise correctly but I have, so far,
>>>>>>>> failed in setting the relative heights...
>>>>>>>>> ???? ? >>
>>>>>>>>> ???? ? >> g2<-ggplotGrob(s)
>>>>>>>>> ???? ? >> g3<-ggplotGrob(v)
>>>>>>>>> ???? ? >> g<-rbind(g2, g3, size = "first")
>>>>>>>>> ???? ? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>>>>>>> ???? ? >>
>>>>>>>>> ???? ? >> what would the appropriate statement for the relative heights
>>>>>>>> to add here be?
>>>>>>>>> ???? ? >>
>>>>>>>>> ???? ? >> grid.newpage()
>>>>>>>>> ???? ? >> grid.draw(g)
>>>>>>>>> ???? ? >>
>>>>>>>>> ???? ? >> Thank you!
>>>>>>>>> ???? ? >>
>>>>>>>>> ???? ? >> ______________________________________________
>>>>>>>>> ???? ? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>>>>>>> list -- To UNSUBSCRIBE and more, see
>>>>>>>>> ???? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>> ???? ? >> PLEASE do read the posting guide
>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>> ???? ? >> and provide commented, minimal, self-contained, reproducible
>>>>>>>> code.
>>>>>>>>> ???? ? So this is not possible without using one of those two packages?
>>>>>>>> I got the impression I should be able to use grid.arrange to do so but
>>>>>>>> was not able to get it to work without disturbing the width alignment
>>>>>>>> above...
>>>>>>>>> ???? ? ______________________________________________
>>>>>>>>> ???? ? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>>>>>>> -- To UNSUBSCRIBE and more, see
>>>>>>>>> ???? ? https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>> ???? ? PLEASE do read the posting guide
>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>> ???? ? and provide commented, minimal, self-contained, reproducible
>>>>>>>> code.
>>>>>>>>> --?
>>>>>>>>> John Kane
>>>>>>>>> Kingston ON Canada
>>>>>>>> No need to play around with anything. I am simply looking for
>>>>>>>> assistance on how to use eg arrangeGrob to not only align two plots
>>>>>>>> columnwise but also adjust their heights relative to each other rather
>>>>>>>> than 1:1.
>>>>>>>>
>>>>>>>> Can arrangeGrob() be used for that?
>>>>>>>>
>>>>>>>>
>>>>>>>> ?????? [[alternative HTML version deleted]]
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>> PLEASE do read the posting guide
>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>> Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:
>>>>>>
>>>>>> |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |
>>>>>>
>>>>>> |to make the second chart 1/2 the size of the top one?|
>>>>>>
>>>>>> ||
>>>>>>
>>>>>>
>>>>>> ?????? [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>> ???? ????[[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> Thank you for your example. However, this does not align the plot areas horizontally. It happens to do so in this example because the y-axis labels are the same length etc but when this is not the case, it fails.
>>> Maybe it fails but can you give an example?
>>> The question, as far as I understand it, is about the plots' relative heights, not about horizontal alignment. And (all) others have asked you to give a reproducible example, please don't ask us to guess a use case axis labels lengths (!), which is impossible to do.
>>>
>>> Anyway, the function cowplot::plot_grid has an argument `align`. One of the possible values is "hv" for both horizontal and vertical alignment.
>>>
>>> Hope this helps,
>>>
>>> Rui Barradas
>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> The easiest demonstration would be to replace:
>>
>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>
>> with:
>>
>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width * 1000)) + geom_point()
>>
>> I am looking to not only being able to set relative heights of rows (as your code correctly does) but also have the plot areas aligned.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
Just tried it and it works in this example, however, with my two plots where the top plot does not have an x-axis legend the code above still reserves room for the legend which now shows up as a large empty space...

This is harder than I thought. I wonder if going back to the grobs would offer a better solution? The problem is that diving into the underlying code and understanding which variables to change is hard, there are /lots/ of variables...


From @gent@ @end|ng |rom medd@t@|nc@com  Sat Jul 25 21:11:24 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sat, 25 Jul 2020 15:11:24 -0400
Subject: [R] Modifying dataframe with mutate()
Message-ID: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>

In a statement like:

df %>% mutate(v1 = as.double(v1))

I expect the variable v1 in dataframe df to have been converted into a double. However, when I do:

str(df)

v1 still shows as int. Do I need to save the modified dataframe after mutating a variable?


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Sat Jul 25 21:42:04 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Sat, 25 Jul 2020 15:42:04 -0400
Subject: [R] Modifying dataframe with mutate()
In-Reply-To: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
References: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
Message-ID: <CAJc=yOFtyzb=OHfNT_QbifGhYE8BSKb7VY2YTBMUS7RYAhbnsA@mail.gmail.com>

This seems needlessly complicated.

df$v1 <- as.double(df$v1)

Or as.numeric()

On Sat, Jul 25, 2020 at 3:31 PM H <agents at meddatainc.com> wrote:

> In a statement like:
>
> df %>% mutate(v1 = as.double(v1))
>
> I expect the variable v1 in dataframe df to have been converted into a
> double. However, when I do:
>
> str(df)
>
> v1 still shows as int. Do I need to save the modified dataframe after
> mutating a variable?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jul 25 21:42:50 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 25 Jul 2020 12:42:50 -0700
Subject: [R] Modifying dataframe with mutate()
In-Reply-To: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
References: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
Message-ID: <E3FB4519-D3B9-4A28-AF7D-7FF331741363@dcn.davis.ca.us>

R is largely a functional language. You do something to an input and end up with an output that has no effect on the input. This is actually a highly desirable feature.

If you want your df variable to reflect changes made then you  need to assign your result back into it.

df <- df %>% mutate(v1 = as.double(v1))

(Note that the data.table package violates this principle and is controversial as a result.)

On July 25, 2020 12:11:24 PM PDT, H <agents at meddatainc.com> wrote:
>In a statement like:
>
>df %>% mutate(v1 = as.double(v1))
>
>I expect the variable v1 in dataframe df to have been converted into a
>double. However, when I do:
>
>str(df)
>
>v1 still shows as int. Do I need to save the modified dataframe after
>mutating a variable?
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Sat Jul 25 21:59:06 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Sat, 25 Jul 2020 15:59:06 -0400
Subject: [R] Modifying dataframe with mutate()
In-Reply-To: <E3FB4519-D3B9-4A28-AF7D-7FF331741363@dcn.davis.ca.us>
References: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
 <E3FB4519-D3B9-4A28-AF7D-7FF331741363@dcn.davis.ca.us>
Message-ID: <CAJc=yOFL_FD3ercauxbVgSjXoJNTaUGXTOp0UyVVCDouKNjXRg@mail.gmail.com>

Jeff,

mutate(), which is I think part of dplyr, also violates this, for what it's
worth. I suspect the breaking point is that mutate() is intended to create
new columns in the dataframe, not alter existing ones.

On Sat, Jul 25, 2020 at 3:52 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> R is largely a functional language. You do something to an input and end
> up with an output that has no effect on the input. This is actually a
> highly desirable feature.
>
> If you want your df variable to reflect changes made then you  need to
> assign your result back into it.
>
> df <- df %>% mutate(v1 = as.double(v1))
>
> (Note that the data.table package violates this principle and is
> controversial as a result.)
>
> On July 25, 2020 12:11:24 PM PDT, H <agents at meddatainc.com> wrote:
> >In a statement like:
> >
> >df %>% mutate(v1 = as.double(v1))
> >
> >I expect the variable v1 in dataframe df to have been converted into a
> >double. However, when I do:
> >
> >str(df)
> >
> >v1 still shows as int. Do I need to save the modified dataframe after
> >mutating a variable?
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jul 25 22:17:02 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 25 Jul 2020 13:17:02 -0700
Subject: [R] Modifying dataframe with mutate()
In-Reply-To: <CAJc=yOFL_FD3ercauxbVgSjXoJNTaUGXTOp0UyVVCDouKNjXRg@mail.gmail.com>
References: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
 <E3FB4519-D3B9-4A28-AF7D-7FF331741363@dcn.davis.ca.us>
 <CAJc=yOFL_FD3ercauxbVgSjXoJNTaUGXTOp0UyVVCDouKNjXRg@mail.gmail.com>
Message-ID: <F2BCD413-5F98-4BF6-A1D7-8CF6D3C644AD@dcn.davis.ca.us>

False. Mutate is similar in structure to the base function `within`. Which is why you have to assign the altered data frame back onto itself.

On July 25, 2020 12:59:06 PM PDT, "Patrick (Malone Quantitative)" <malone at malonequantitative.com> wrote:
>Jeff,
>
>mutate(), which is I think part of dplyr, also violates this, for what
>it's
>worth. I suspect the breaking point is that mutate() is intended to
>create
>new columns in the dataframe, not alter existing ones.
>
>On Sat, Jul 25, 2020 at 3:52 PM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> R is largely a functional language. You do something to an input and
>end
>> up with an output that has no effect on the input. This is actually a
>> highly desirable feature.
>>
>> If you want your df variable to reflect changes made then you  need
>to
>> assign your result back into it.
>>
>> df <- df %>% mutate(v1 = as.double(v1))
>>
>> (Note that the data.table package violates this principle and is
>> controversial as a result.)
>>
>> On July 25, 2020 12:11:24 PM PDT, H <agents at meddatainc.com> wrote:
>> >In a statement like:
>> >
>> >df %>% mutate(v1 = as.double(v1))
>> >
>> >I expect the variable v1 in dataframe df to have been converted into
>a
>> >double. However, when I do:
>> >
>> >str(df)
>> >
>> >v1 still shows as int. Do I need to save the modified dataframe
>after
>> >mutating a variable?
>> >
>> >______________________________________________
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >https://stat.ethz.ch/mailman/listinfo/r-help
>> >PLEASE do read the posting guide
>> >http://www.R-project.org/posting-guide.html
>> >and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>

-- 
Sent from my phone. Please excuse my brevity.


From m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com  Sat Jul 25 22:18:13 2020
From: m@|one @end|ng |rom m@|onequ@nt|t@t|ve@com (Patrick (Malone Quantitative))
Date: Sat, 25 Jul 2020 16:18:13 -0400
Subject: [R] Modifying dataframe with mutate()
In-Reply-To: <F2BCD413-5F98-4BF6-A1D7-8CF6D3C644AD@dcn.davis.ca.us>
References: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
 <E3FB4519-D3B9-4A28-AF7D-7FF331741363@dcn.davis.ca.us>
 <CAJc=yOFL_FD3ercauxbVgSjXoJNTaUGXTOp0UyVVCDouKNjXRg@mail.gmail.com>
 <F2BCD413-5F98-4BF6-A1D7-8CF6D3C644AD@dcn.davis.ca.us>
Message-ID: <CAJc=yOGdRsnNNmseefumQ=xhRC_KA61OyG9jgt1qmDDhG-HvZA@mail.gmail.com>

Oh, right--I puzzled out my mistake.

On Sat, Jul 25, 2020 at 4:17 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> False. Mutate is similar in structure to the base function `within`. Which
> is why you have to assign the altered data frame back onto itself.
>
> On July 25, 2020 12:59:06 PM PDT, "Patrick (Malone Quantitative)" <
> malone at malonequantitative.com> wrote:
> >Jeff,
> >
> >mutate(), which is I think part of dplyr, also violates this, for what
> >it's
> >worth. I suspect the breaking point is that mutate() is intended to
> >create
> >new columns in the dataframe, not alter existing ones.
> >
> >On Sat, Jul 25, 2020 at 3:52 PM Jeff Newmiller
> ><jdnewmil at dcn.davis.ca.us>
> >wrote:
> >
> >> R is largely a functional language. You do something to an input and
> >end
> >> up with an output that has no effect on the input. This is actually a
> >> highly desirable feature.
> >>
> >> If you want your df variable to reflect changes made then you  need
> >to
> >> assign your result back into it.
> >>
> >> df <- df %>% mutate(v1 = as.double(v1))
> >>
> >> (Note that the data.table package violates this principle and is
> >> controversial as a result.)
> >>
> >> On July 25, 2020 12:11:24 PM PDT, H <agents at meddatainc.com> wrote:
> >> >In a statement like:
> >> >
> >> >df %>% mutate(v1 = as.double(v1))
> >> >
> >> >I expect the variable v1 in dataframe df to have been converted into
> >a
> >> >double. However, when I do:
> >> >
> >> >str(df)
> >> >
> >> >v1 still shows as int. Do I need to save the modified dataframe
> >after
> >> >mutating a variable?
> >> >
> >> >______________________________________________
> >> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> >https://stat.ethz.ch/mailman/listinfo/r-help
> >> >PLEASE do read the posting guide
> >> >http://www.R-project.org/posting-guide.html
> >> >and provide commented, minimal, self-contained, reproducible code.
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
>
> --
> Sent from my phone. Please excuse my brevity.
>


-- 
Patrick S. Malone, Ph.D., Malone Quantitative
NEW Service Models: http://malonequantitative.com

He/Him/His

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jul 26 01:54:55 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 25 Jul 2020 19:54:55 -0400
Subject: [R] Modifying dataframe with mutate()
In-Reply-To: <CAJc=yOGdRsnNNmseefumQ=xhRC_KA61OyG9jgt1qmDDhG-HvZA@mail.gmail.com>
References: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
 <E3FB4519-D3B9-4A28-AF7D-7FF331741363@dcn.davis.ca.us>
 <CAJc=yOFL_FD3ercauxbVgSjXoJNTaUGXTOp0UyVVCDouKNjXRg@mail.gmail.com>
 <F2BCD413-5F98-4BF6-A1D7-8CF6D3C644AD@dcn.davis.ca.us>
 <CAJc=yOGdRsnNNmseefumQ=xhRC_KA61OyG9jgt1qmDDhG-HvZA@mail.gmail.com>
Message-ID: <f315b5ec-49cf-ed99-e48b-b709da9287ca@gmail.com>

Were you thinking of the %<>% operator?  That's a magrittr thing, where 
x %<>% y acts like x <- x %>% y .

Duncan Murdoch

On 25/07/2020 4:18 p.m., Patrick (Malone Quantitative) wrote:
> Oh, right--I puzzled out my mistake.
> 
> On Sat, Jul 25, 2020 at 4:17 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
> 
>> False. Mutate is similar in structure to the base function `within`. Which
>> is why you have to assign the altered data frame back onto itself.
>>
>> On July 25, 2020 12:59:06 PM PDT, "Patrick (Malone Quantitative)" <
>> malone at malonequantitative.com> wrote:
>>> Jeff,
>>>
>>> mutate(), which is I think part of dplyr, also violates this, for what
>>> it's
>>> worth. I suspect the breaking point is that mutate() is intended to
>>> create
>>> new columns in the dataframe, not alter existing ones.
>>>
>>> On Sat, Jul 25, 2020 at 3:52 PM Jeff Newmiller
>>> <jdnewmil at dcn.davis.ca.us>
>>> wrote:
>>>
>>>> R is largely a functional language. You do something to an input and
>>> end
>>>> up with an output that has no effect on the input. This is actually a
>>>> highly desirable feature.
>>>>
>>>> If you want your df variable to reflect changes made then you  need
>>> to
>>>> assign your result back into it.
>>>>
>>>> df <- df %>% mutate(v1 = as.double(v1))
>>>>
>>>> (Note that the data.table package violates this principle and is
>>>> controversial as a result.)
>>>>
>>>> On July 25, 2020 12:11:24 PM PDT, H <agents at meddatainc.com> wrote:
>>>>> In a statement like:
>>>>>
>>>>> df %>% mutate(v1 = as.double(v1))
>>>>>
>>>>> I expect the variable v1 in dataframe df to have been converted into
>>> a
>>>>> double. However, when I do:
>>>>>
>>>>> str(df)
>>>>>
>>>>> v1 still shows as int. Do I need to save the modified dataframe
>>> after
>>>>> mutating a variable?
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
> 
>


From @gent@ @end|ng |rom medd@t@|nc@com  Sun Jul 26 02:11:03 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sat, 25 Jul 2020 20:11:03 -0400
Subject: [R] Modifying dataframe with mutate()
In-Reply-To: <F2BCD413-5F98-4BF6-A1D7-8CF6D3C644AD@dcn.davis.ca.us>
References: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
 <E3FB4519-D3B9-4A28-AF7D-7FF331741363@dcn.davis.ca.us>
 <CAJc=yOFL_FD3ercauxbVgSjXoJNTaUGXTOp0UyVVCDouKNjXRg@mail.gmail.com>
 <F2BCD413-5F98-4BF6-A1D7-8CF6D3C644AD@dcn.davis.ca.us>
Message-ID: <cbdb09f1-8ab2-d91b-b96c-28e40513e7da@meddatainc.com>

On 07/25/2020 04:17 PM, Jeff Newmiller wrote:
> False. Mutate is similar in structure to the base function `within`. Which is why you have to assign the altered data frame back onto itself.
>
> On July 25, 2020 12:59:06 PM PDT, "Patrick (Malone Quantitative)" <malone at malonequantitative.com> wrote:
>> Jeff,
>>
>> mutate(), which is I think part of dplyr, also violates this, for what
>> it's
>> worth. I suspect the breaking point is that mutate() is intended to
>> create
>> new columns in the dataframe, not alter existing ones.
>>
>> On Sat, Jul 25, 2020 at 3:52 PM Jeff Newmiller
>> <jdnewmil at dcn.davis.ca.us>
>> wrote:
>>
>>> R is largely a functional language. You do something to an input and
>> end
>>> up with an output that has no effect on the input. This is actually a
>>> highly desirable feature.
>>>
>>> If you want your df variable to reflect changes made then you  need
>> to
>>> assign your result back into it.
>>>
>>> df <- df %>% mutate(v1 = as.double(v1))
>>>
>>> (Note that the data.table package violates this principle and is
>>> controversial as a result.)
>>>
>>> On July 25, 2020 12:11:24 PM PDT, H <agents at meddatainc.com> wrote:
>>>> In a statement like:
>>>>
>>>> df %>% mutate(v1 = as.double(v1))
>>>>
>>>> I expect the variable v1 in dataframe df to have been converted into
>> a
>>>> double. However, when I do:
>>>>
>>>> str(df)
>>>>
>>>> v1 still shows as int. Do I need to save the modified dataframe
>> after
>>>> mutating a variable?
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
Thank you, code corrected and problem solved. I was thrown off by the fact that after mutating it looked like the column data type had been changed. I also tried mutate_at() which similarly failed...


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jul 26 03:56:14 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 25 Jul 2020 18:56:14 -0700
Subject: [R] Modifying dataframe with mutate()
In-Reply-To: <cbdb09f1-8ab2-d91b-b96c-28e40513e7da@meddatainc.com>
References: <a34b8274-1d59-2e7f-e6d7-b4192f34efe5@meddatainc.com>
 <E3FB4519-D3B9-4A28-AF7D-7FF331741363@dcn.davis.ca.us>
 <CAJc=yOFL_FD3ercauxbVgSjXoJNTaUGXTOp0UyVVCDouKNjXRg@mail.gmail.com>
 <F2BCD413-5F98-4BF6-A1D7-8CF6D3C644AD@dcn.davis.ca.us>
 <cbdb09f1-8ab2-d91b-b96c-28e40513e7da@meddatainc.com>
Message-ID: <E878E51F-A27D-4EDE-9BCB-0A7BC1B40EC7@dcn.davis.ca.us>

> I was thrown off by the fact that after mutating it looked like the column data type had been changed. 

It was changed... in a new copy of the data frame that, because it was at the top-level interactive prompt and not being saved, was printed and then discarded.

On July 25, 2020 5:11:03 PM PDT, H <agents at meddatainc.com> wrote:
>On 07/25/2020 04:17 PM, Jeff Newmiller wrote:
>> False. Mutate is similar in structure to the base function `within`.
>Which is why you have to assign the altered data frame back onto
>itself.
>>
>> On July 25, 2020 12:59:06 PM PDT, "Patrick (Malone Quantitative)"
><malone at malonequantitative.com> wrote:
>>> Jeff,
>>>
>>> mutate(), which is I think part of dplyr, also violates this, for
>what
>>> it's
>>> worth. I suspect the breaking point is that mutate() is intended to
>>> create
>>> new columns in the dataframe, not alter existing ones.
>>>
>>> On Sat, Jul 25, 2020 at 3:52 PM Jeff Newmiller
>>> <jdnewmil at dcn.davis.ca.us>
>>> wrote:
>>>
>>>> R is largely a functional language. You do something to an input
>and
>>> end
>>>> up with an output that has no effect on the input. This is actually
>a
>>>> highly desirable feature.
>>>>
>>>> If you want your df variable to reflect changes made then you  need
>>> to
>>>> assign your result back into it.
>>>>
>>>> df <- df %>% mutate(v1 = as.double(v1))
>>>>
>>>> (Note that the data.table package violates this principle and is
>>>> controversial as a result.)
>>>>
>>>> On July 25, 2020 12:11:24 PM PDT, H <agents at meddatainc.com> wrote:
>>>>> In a statement like:
>>>>>
>>>>> df %>% mutate(v1 = as.double(v1))
>>>>>
>>>>> I expect the variable v1 in dataframe df to have been converted
>into
>>> a
>>>>> double. However, when I do:
>>>>>
>>>>> str(df)
>>>>>
>>>>> v1 still shows as int. Do I need to save the modified dataframe
>>> after
>>>>> mutating a variable?
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>> --
>>>> Sent from my phone. Please excuse my brevity.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>Thank you, code corrected and problem solved. I was thrown off by the
>fact that after mutating it looked like the column data type had been
>changed. I also tried mutate_at() which similarly failed...
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From z|xu@n@q| @end|ng |rom duke@edu  Sun Jul 26 16:33:32 2020
From: z|xu@n@q| @end|ng |rom duke@edu (Zixuan Qi)
Date: Sun, 26 Jul 2020 14:33:32 +0000
Subject: [R] A question about optim function in R
Message-ID: <SN6PR05MB52140EAB0BA7D72C639EBA0998750@SN6PR05MB5214.namprd05.prod.outlook.com>

Hi,

I encounter a problem in R. My program is as follows.
lower <- c(-Inf,-Inf,-Inf,-Inf,0,0,0,-1,-1,-1)
upper <- c(Inf,Inf,Inf,Inf,Inf,Inf,Inf,1,1,1)
out <- optim(parm,logLik,method='L-BFGS-B',lower=lower,upper=upper,hessian=hessian)

As you can see, I have restricted parameter[5], parameter[6] and parameter[7] to be greater than 0, but the program error is shown in the attached picture ('??' means 'produce'). The reason for this error seems to be the limit in the function does not work. I don't know why.

Can you help me? Thanks very much!.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: picture.png
Type: image/png
Size: 35455 bytes
Desc: picture.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200726/0dc535e9/attachment.png>

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jul 26 16:36:43 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 26 Jul 2020 07:36:43 -0700
Subject: [R] A question about optim function in R
In-Reply-To: <SN6PR05MB52140EAB0BA7D72C639EBA0998750@SN6PR05MB5214.namprd05.prod.outlook.com>
References: <SN6PR05MB52140EAB0BA7D72C639EBA0998750@SN6PR05MB5214.namprd05.prod.outlook.com>
Message-ID: <4D23E3D3-D6F0-4DE4-B1A1-7FC39BFD1BFF@dcn.davis.ca.us>

This is not reproducible.

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette) 


On July 26, 2020 7:33:32 AM PDT, Zixuan Qi <zixuan.qi at duke.edu> wrote:
>Hi,
>
>I encounter a problem in R. My program is as follows.
>lower <- c(-Inf,-Inf,-Inf,-Inf,0,0,0,-1,-1,-1)
>upper <- c(Inf,Inf,Inf,Inf,Inf,Inf,Inf,1,1,1)
>out <-
>optim(parm,logLik,method='L-BFGS-B',lower=lower,upper=upper,hessian=hessian)
>
>As you can see, I have restricted parameter[5], parameter[6] and
>parameter[7] to be greater than 0, but the program error is shown in
>the attached picture ('??' means 'produce'). The reason for this error
>seems to be the limit in the function does not work. I don't know why.
>
>Can you help me? Thanks very much!.

-- 
Sent from my phone. Please excuse my brevity.


From z|xu@n@q| @end|ng |rom duke@edu  Sun Jul 26 17:15:09 2020
From: z|xu@n@q| @end|ng |rom duke@edu (Zixuan Qi)
Date: Sun, 26 Jul 2020 15:15:09 +0000
Subject: [R] A question about nlminb function
Message-ID: <SN6PR05MB52145028C95A5BB4DB5E8A1298750@SN6PR05MB5214.namprd05.prod.outlook.com>

Hi,

I use the function nlminb to maximize a function and got convergence with the message false-convergence. I know the reason may be the gradient $B"`(Bf(x) may be computed incorrectly, the other stopping tolerances may be too tight, or either f or $B"`(Bf may be discontinuous near the current iterate x.

However, I want to know how to modify the program after this problem occurs.

Thanks very much.

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Sun Jul 26 17:43:49 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sun, 26 Jul 2020 17:43:49 +0200
Subject: [R] [External] Re: help with web scraping
In-Reply-To: <0faf9c8b-c08f-2ec9-c8dd-661e335dffee@effectivedefense.org>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
 <20200724141618.GB144650@posteo.no>
 <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>
 <20200725091051.GN1283@posteo.no>
 <5537ff4f-a677-935a-855b-18431992f6b6@effectivedefense.org>
 <20200725163052.GA60251@posteo.no>
 <0faf9c8b-c08f-2ec9-c8dd-661e335dffee@effectivedefense.org>
Message-ID: <20200726154349.GA97557@posteo.no>

Dear GRAVES et al.,

On 2020-07-25 12:43 -0500, Spencer Graves wrote:
> Dear Rasmus Liland et al.:
> 
> On 2020-07-25 11:30, Rasmus Liland wrote:
> > On 2020-07-25 09:56 -0500, Spencer Graves wrote:
> > > Dear Rasmus et al.:
> > 
> > It is LILAND et al., is it not?  ... else it's customary to
> > put a comma in there, isn't it? ...
> 
> The APA Style recommends "Sharp et al., 2007":
> 
> https://blog.apastyle.org/apastyle/2011/11/the-proper-use-of-et-al-in-apa-style.html

If "Sharp et al., 2007" is an APA 
citation of this book[*], Sharp is John A 
Sharp's surname, Liland is my surname.  
Q.E.D.

I have not used APA before (as I am not 
a Psychiatrist), as the minimalism of 
IEEE[**] always seemed more desirable.  

> Regarding Confucius, I'm confused.

Nevermind, just fooling around, that's 
all.

> > On 2020-07-25 04:10, Rasmus Liland wrote:
> > > 
> > > However, this suppressed "<br/>"
> > > everywhere.?
> > 
> > Why is that, please explain.
> 
> I don't know why the Missouri 
> Secretary of State's web site includes 
> "<br/>" to signal a new line, but it 
> does.

Me neither!  On top of that, <br /> is 
actually[***] an XHTML tag, not an HTML 
tag.

> I also don't know why 
> XML::readHTMLTable suppressed "<br/>" 
> everywhere it occurred, but it did 
> that.

Yes, I know, I also observed this.  But 
now we swiftly solved this by gsubbig it 
with the newline char, "\n", which does 
not make sense for HTML parses anyway. 

> > > If you aren't aware of one, I can
> > > gsub("<br/>", "\n", ...) on the string
> > > for each political office before
> > > passing it to "XML::readHTMLTable".? I
> > > just tested this:? It works.
> > 
> > Such a great hack!  IMHO, this is much
> > more flexible than using
> > xml2::read_html, rvest::read_table,
> > dplyr::mutate like here[1]
> > 
> > [1] https://stackoverflow.com/questions/38707669/how-to-read-an-html-table-and-account-for-line-breaks-within-cells
> 
> And I added my solution to this 
> problem to this Stackoverflow thread.

I wish you many upvotes, alas the 
political competition is obiously not 
tough there, as the other guy just got 
one down vote.

[*] https://www.amazon.co.uk/Management-Student-Research-Project/dp/0566084902 
[**] https://pitt.libguides.com/citationhelp/ieee
[***] https://stackoverflow.com/questions/1946426/html-5-is-it-br-br-or-br

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200726/138ec8c5/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Sun Jul 26 17:43:59 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sun, 26 Jul 2020 17:43:59 +0200
Subject: [R] [External] Re: help with web scraping
In-Reply-To: <CAA99HCxFEvnSuGzwq8zbwo2XwCozEtPeG43+VUnp+eNqQPnwzQ@mail.gmail.com>
References: <a4a42752-aeeb-6b4d-2d1f-3b038d2fa71b@effectivedefense.org>
 <CAA99HCw_N=x+-TtLqbhfpmH-SnivDCDRmnVWnxesOn227=6=Jw@mail.gmail.com>
 <10bf395c-d793-35c0-8af4-2d9fd042fd37@effectivedefense.org>
 <alpine.DEB.2.21.2007240818070.3754@luke-Latitude-7480>
 <20200724141618.GB144650@posteo.no>
 <9ad668f9-a4b3-3f1f-3b65-fc5b3d6a9090@effectivedefense.org>
 <20200725091051.GN1283@posteo.no>
 <5537ff4f-a677-935a-855b-18431992f6b6@effectivedefense.org>
 <CAA99HCxFEvnSuGzwq8zbwo2XwCozEtPeG43+VUnp+eNqQPnwzQ@mail.gmail.com>
Message-ID: <20200726154359.GB97557@posteo.no>

Dear William Michels,

On 2020-07-25 10:58 -0700, William Michels wrote:
> 
> Dear Spencer Graves (and Rasmus Liland),
> 
> I've had some luck just using gsub() 
> to alter the offending "</br>" 
> characters, appending a "___" tag at 
> each instance of "<br>" (first I 
> checked the text to make sure it 
> didn't contain any pre-existing 
> instances of "___"). See the output 
> snippet below:
> 
> > library(RCurl)
> > library(XML)
> > sosURL <- "https://s1.sos.mo.gov/CandidatesOnWeb/DisplayCandidatesPlacement.aspx?ElectionCode=750004975"
> > sosChars <- getURL(sosURL)
> > sosChars2 <- gsub("<br/>", "<br/>___", sosChars)
> > MOcan <- readHTMLTable(sosChars2)
> > MOcan[[2]]
>                   Name
> 1       Raleigh Ritter
> 2          Mike Parson
> 3 James W. (Jim) Neely
> 4     Saundra McDowell
>                            Mailing Address
> 1      4476 FIVE MILE RD___SENECA MO 64865
> 2         1458 E 464 RD___BOLIVAR MO 65613
> 3            PO BOX 343___CAMERON MO 64429
> 4 3854 SOUTH AVENUE___SPRINGFIELD MO 65807
>   Random Number Date Filed
> 1           185  2/25/2020
> 2           348  2/25/2020
> 3           477  2/25/2020
> 4                3/31/2020
> >
> 
> It's true, there's one a 'section' of 
> MOcan output that contains odd-looking 
> characters (see the "Total" line of 
> MOcan[[1]]). But my guess is you'll be 
> deleting this 'line' anyway--and 
> recalulating totals in R.

Perhaps it's the this table you mean?  

	                Offices Republican
	1              Governor          4
	2   Lieutenant Governor          4
	3    Secretary of State          1
	4       State Treasurer          1
	5      Attorney General          1
	6   U.S. Representative         24
	7         State Senator         28
	8  State Representative        187
	9         Circuit Judge         18
	10                Total 268\r\n___
	   Democratic Libertarian    Green
	1           5           1        1
	2           2           1        1
	3           1           1        1
	4           1           1        1
	5           2           1        0
	6          16           9        0
	7          22           2        1
	8         137           6        2
	9           1           0        0
	10 187\r\n___   22\r\n___ 7\r\n___
	   Constitution      Total
	1             0         11
	2             0          8
	3             1          5
	4             0          4
	5             0          4
	6             0         49
	7             0         53
	8             1        333
	9             0         19
	10     2\r\n___ 486\r\n___

Yes, somehow the Windows[1] character 
"0xD" gets converted to "\r\n" after 
your gsub, "<br/>" is still ignored.  

There is not a "0xD" inside the 
td.AddressCol cells in the tables we are 
interested in.

> Now that you have a comprehensive list 
> object, you should be able to pull out 
> districts/races of interest. You might 
> want to take a look at the "rlist" 
> package, to see if it can make your 
> work a little easier:
> 
> https://CRAN.R-project.org/package=rlist
> https://renkun-ken.github.io/rlist-tutorial/index.html

Thank you, this package seems useful.  

Please can you provide a hint (maybe) as 
to which of the many functions you were 
thinking of?  E.g. instead of using for 
over the index of the list of headers 
and tables, if typeof list or character, 
and updating variables to write in the 
political position to each table. 

V

r

[1] https://stackoverflow.com/questions/5843495/what-does-m-character-mean-in-vim

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200726/023e8723/attachment.sig>

From jr@| @end|ng |rom po@teo@no  Sun Jul 26 18:44:16 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sun, 26 Jul 2020 18:44:16 +0200
Subject: [R] One year return not year to date
In-Reply-To: <2e0915c7-731e-5fd0-925e-0818437cd157@sapo.pt>
References: <CAB-TgNtyzifN2xAe=5Ps8w8DZiZhZ9bySQ4GOtb9keCLqgC4kw@mail.gmail.com>
 <CAGxFJbRNPtZ_zjzvmBkTYQwinZ3QQPcCsg_ha9p_pvrpFGLCxg@mail.gmail.com>
 <2e0915c7-731e-5fd0-925e-0818437cd157@sapo.pt>
Message-ID: <20200726164416.GB60251@posteo.no>

Hello,

On 2020-07-25 20:05 +0100, Rui Barradas wrote:
> ?s 19:06 de 25/07/2020, Bert Gunter escreveu:
> > On Sat, Jul 25, 2020 at 8:41 AM Pedro p?ramo <percentil101 at gmail.com> wrote:
> > > Hi all,
> > > 
> > > I want to calculate interanual 
> > > (not year to date) variation of a 
> > > stock, I am able to obtain year to 
> > > date with annualReturn, but no way 
> > > to obtain the interanual increase. 
> > > It says me no numerical 
> > > output.
> > > 
> > > Can anyone guide me to obtain it.
> > > 
> > > library(PerformanceAnalytics)
> > > library(dplyr)
> > > library(tibble)
> > > library(lubridate)
> > > library(PerformanceAnalytics)
> > > library(quantmod)
> > > library(ggplot2)
> > > library(png)
> > > library(RCurl)
> > > 
> > > fecha<-Sys.Date()-365 #with this I obtain one year back beginning
> > > precio<-getSymbols("ACX.MC",from='fecha')

Why do you provide quantmod::getSymbols 
the word fecha in the from argument, 
instead of the variable created on the 
previous line?

> > > ret2<- na.omit(CalculateReturns(Cl(ACX.MC)))
> > > g<-annualReturn(ACX.MC) #This is year to date
> > > d<-CalculateReturns(Cl(ACX.MCC))
> > > aaa<-getQuote('ACX.MC',from='fecha')

The from argument is not a valid in 
getQuote.

> > > Lastprice<-aaa[1,2]
> > > 
> > > lo<-c(diff(log(aaa),250))  #With this I try  to obtain interanual year variation but error

Yes, as Rui says, log(aaa[,-1]) returns 
something here at least, but diffing on 
lag=250 just returns an empty list 
because the one-line aaa[,-1] df is only 
7 elements long.

> > > Hope you can help me
> > 
> > What is the error message? Knowing 
> > this may help others diagnose the 
> > problem.
> 
> Hello,
> 
> I believe the error message comes from 
> the last line, getQuote returns a 
> data.frame with a Date column and 
> log(aaa) will try to log a date.
> Error.
> log(aaa[-1]) works, maybe the OP wants 
> to revise the code and then come back 
> to this or other thread.

Yes, because the first column is a 
POSIXct:

	> str(aaa)
	'data.frame':   1 obs. of  8 variables:
	 $ Trade Time: POSIXct, format:  ...
	 $ Last      : num 7.14
	 $ Change    : num 0
	 $ % Change  : num 0
	 $ Open      : num 7
	 $ High      : num 7.16
	 $ Low       : num 6.99
	 $ Volume    : int 794567
	> aaa
	                Trade Time  Last Change
	ACX.MC 2020-07-24 17:35:10 7.136      0
	       % Change Open  High  Low Volume
	ACX.MC        0    7 7.162 6.99 794567

V

r

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200726/442f80ad/attachment.sig>

From pro|jcn@@h @end|ng |rom gm@||@com  Sun Jul 26 19:07:25 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Sun, 26 Jul 2020 13:07:25 -0400
Subject: [R] A question about optim function in R
In-Reply-To: <SN6PR05MB52140EAB0BA7D72C639EBA0998750@SN6PR05MB5214.namprd05.prod.outlook.com>
References: <SN6PR05MB52140EAB0BA7D72C639EBA0998750@SN6PR05MB5214.namprd05.prod.outlook.com>
Message-ID: <b1a4eed7-cb6e-4487-740e-80cb1843359f@gmail.com>

For this and the nlminb posting, a reproducible example would be useful.

The optimx package (I am maintainer) would make your life easier in that it
wraps nlminb and optim() and other solvers, so you can use a consistent call.
Also you can compare several methods with opm(), but do NOT use this for
production work as it chews cpu cycles. It is intended to test and compare
methods for a family of objective functions.

JN


On 2020-07-26 10:33 a.m., Zixuan Qi wrote:
> Hi,
> 
> I encounter a problem in R. My program is as follows.
> lower <- c(-Inf,-Inf,-Inf,-Inf,0,0,0,-1,-1,-1)
> upper <- c(Inf,Inf,Inf,Inf,Inf,Inf,Inf,1,1,1)
> out <- optim(parm,logLik,method='L-BFGS-B',lower=lower,upper=upper,hessian=hessian)
> 
> As you can see, I have restricted parameter[5], parameter[6] and parameter[7] to be greater than 0, but the program error is shown in the attached picture ('??' means 'produce'). The reason for this error seems to be the limit in the function does not work. I don't know why.
> 
> Can you help me? Thanks very much!.
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jr@| @end|ng |rom po@teo@no  Sun Jul 26 19:08:55 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Sun, 26 Jul 2020 19:08:55 +0200
Subject: [R] A question about optim function in R
In-Reply-To: <4D23E3D3-D6F0-4DE4-B1A1-7FC39BFD1BFF@dcn.davis.ca.us>
References: <SN6PR05MB52140EAB0BA7D72C639EBA0998750@SN6PR05MB5214.namprd05.prod.outlook.com>
 <4D23E3D3-D6F0-4DE4-B1A1-7FC39BFD1BFF@dcn.davis.ca.us>
Message-ID: <20200726170855.GA138445@posteo.no>

Dear Zixuan,

On 2020-07-26 07:36 -0700, Jeff Newmiller wrote:
> On July 26, 2020 7:33:32 AM PDT, Zixuan Qi <zixuan.qi at duke.edu> wrote:
> > Hi,
> > 
> > I encounter a problem in R. My program is as follows.
> > lower <- c(-Inf, -Inf, -Inf, -Inf, 0, 0, 0, -1, -1, -1)
> > upper <- c(Inf, Inf, Inf, Inf, Inf, Inf, Inf, 1, 1, 1)
> > out <- optim(parm, logLik, method='L-BFGS-B', lower=lower, upper=upper, hessian=hessian)

Can you include parm?

> > As you can see, I have restricted 
> > parameter[5], parameter[6] and 
> > parameter[7] to be greater than 0, 
> > but the program error is shown in 
> > the attached picture ('??' means 
> > 'produce'). The reason for this 
> > error seems to be the limit in the 
> > function does not work. I don't know 
> > why.
> > 
> > Can you help me? Thanks very much!.
> 
> This is not reproducible.
> 
> [1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
> [2] http://adv-r.had.co.nz/Reproducibility.html
> [3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette) 

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200726/46a617fc/attachment.sig>

From @gent@ @end|ng |rom medd@t@|nc@com  Sun Jul 26 21:34:21 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Sun, 26 Jul 2020 15:34:21 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <95ff5da5-9e39-ecbd-b4a6-a198146a625d@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <603185094.6758128.1595617031422@mail.yahoo.com>
 <973a825b-e3f8-ecfb-2295-c0b456290568@sapo.pt>
 <17fe6b15-77c0-9b0e-a92f-a31685efec88@meddatainc.com>
 <09bcafd3-bc95-3b71-3468-c8f5c49f989e@sapo.pt>
 <e25d4441-8160-a11f-9434-2e6a9be094e0@meddatainc.com>
 <a72f5a6c-29ce-331a-172f-c15a401cf83a@sapo.pt>
 <95ff5da5-9e39-ecbd-b4a6-a198146a625d@meddatainc.com>
Message-ID: <b9df4800-d0a5-c306-8ec8-243f1a639f80@meddatainc.com>

On 07/25/2020 03:05 PM, H wrote:
> On 07/25/2020 03:01 PM, Rui Barradas wrote:
>> Hello,
>>
>> OK, now it's reproducible, thanks.
>> align = "hv" works like I had suggested.
>>
>> The full code is now
>>
>> library(ggplot2)
>> library(cowplot)
>>
>> s <- ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width * 1000)) + geom_point()
>>
>> cowplot::plot_grid(s, v, align = "hv", nrow = 2, rel_heights = 2:1)
>>
>>
>> Also, I have been failing to comply to the posting guide and never posted the output of
>>
>> sessionInfo()
>> R version 4.0.2 (2020-06-22)
>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>> Running under: Windows 10 x64 (build 18362)
>>
>> Matrix products: default
>>
>> locale:
>> [1] LC_COLLATE=Portuguese_Portugal.1252 LC_CTYPE=Portuguese_Portugal.1252
>> [3] LC_MONETARY=Portuguese_Portugal.1252 LC_NUMERIC=C
>> [5] LC_TIME=Portuguese_Portugal.1252
>>
>> attached base packages:
>> [1] stats???? graphics? grDevices utils???? datasets? methods base
>>
>> other attached packages:
>> [1] cowplot_1.0.0 ggplot2_3.3.2 tidyr_1.1.0?? dplyr_1.0.0 sos_2.0-0
>> [6] brew_1.0-6
>>
>> loaded via a namespace (and not attached):
>> ?[1] Rcpp_1.0.4.6???? magrittr_1.5???? tidyselect_1.1.0 munsell_0.5.0
>> ?[5] colorspace_1.4-1 R6_2.4.1???????? rlang_0.4.6 fansi_0.4.1
>> ?[9] tools_4.0.2????? grid_4.0.2?????? gtable_0.3.0 utf8_1.1.4
>> [13] cli_2.0.2??????? withr_2.2.0????? ellipsis_0.3.1 digest_0.6.25
>> [17] assertthat_0.2.1 tibble_3.0.1???? lifecycle_0.2.0 crayon_1.3.4
>> [21] farver_2.0.3???? purrr_0.3.4????? vctrs_0.3.1 glue_1.4.1
>> [25] labeling_0.3???? compiler_4.0.2?? pillar_1.4.4 generics_0.0.2
>> [29] scales_1.1.1???? pkgconfig_2.0.3
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ?s 19:13 de 25/07/2020, H escreveu:
>>> On 07/25/2020 12:36 PM, Rui Barradas wrote:
>>>> Hello,
>>>>
>>>> Inline.
>>>>
>>>> ?s 16:54 de 25/07/2020, H escreveu:
>>>>> On 07/24/2020 05:56 PM, Rui Barradas wrote:
>>>>>> Hello,
>>>>>>
>>>>>> I've just tried it.
>>>>>>
>>>>>> library(ggplot2)
>>>>>> #library(grid)
>>>>>> library(cowplot)
>>>>>>
>>>>>> s <- ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>>>>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>>>>>
>>>>>> #g2 <- ggplotGrob(s)
>>>>>> #g3 <- ggplotGrob(v)
>>>>>> #g <- rbind(g2, g3, size = "first")
>>>>>>
>>>>>> cowplot::plot_grid(s, v, align = "h", nrow = 2, rel_heights = 2:1)
>>>>>>
>>>>>>
>>>>>> Hope this helps,
>>>>>>
>>>>>> Rui Barradas
>>>>>>
>>>>>> ?s 19:57 de 24/07/2020, Felipe Carrillo via R-help escreveu:
>>>>>>> What about cowplot?
>>>>>>> https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html
>>>>>>>
>>>>>>> ?????? On Friday, July 24, 2020, 11:51:17 AM PDT, H <agents at meddatainc.com> wrote:
>>>>>>> ??? ? On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>>>>>>>> The set of people interested in helping when you supply a minimal reproducible example is rather larger than the set of people willing to read the documentation for you (hint) and guess what aspect of alignment you are having trouble with.
>>>>>>>>
>>>>>>>> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>>>>>>>> On 07/24/2020 01:14 PM, John Kane wrote:
>>>>>>>>>> <i>Well, I am not looking for help debugging my code but for
>>>>>>>>> information to better understand arranging plots vertically. The code
>>>>>>>>> above aligns them horizontally as expected.</i>
>>>>>>>>>> Sigh, we know the code works but we do not know what the plots are
>>>>>>>>> and we cannot play around with them to see if we can help you if we
>>>>>>>>> have nothing to work with.
>>>>>>>>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>>>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>>>>> ???? ? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>>>>>>>>> ???? ? > Hav a look at the packages cowplot and patchwork
>>>>>>>>>> ???? ? >
>>>>>>>>>> ???? ? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>>>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>>>>>> ???? ? >>
>>>>>>>>>> ???? ? >> I am trying to arrange two plots vertically, ie plot 2 below
>>>>>>>>> plot 1, where I want the plots to align columnwise but have a height
>>>>>>>>> ratio of eg 3:1.
>>>>>>>>>> ???? ? >>
>>>>>>>>>> ???? ? >> My attempts so far after consulting various webpages is that
>>>>>>>>> the following code aligns them columnwise correctly but I have, so far,
>>>>>>>>> failed in setting the relative heights...
>>>>>>>>>> ???? ? >>
>>>>>>>>>> ???? ? >> g2<-ggplotGrob(s)
>>>>>>>>>> ???? ? >> g3<-ggplotGrob(v)
>>>>>>>>>> ???? ? >> g<-rbind(g2, g3, size = "first")
>>>>>>>>>> ???? ? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>>>>>>>>> ???? ? >>
>>>>>>>>>> ???? ? >> what would the appropriate statement for the relative heights
>>>>>>>>> to add here be?
>>>>>>>>>> ???? ? >>
>>>>>>>>>> ???? ? >> grid.newpage()
>>>>>>>>>> ???? ? >> grid.draw(g)
>>>>>>>>>> ???? ? >>
>>>>>>>>>> ???? ? >> Thank you!
>>>>>>>>>> ???? ? >>
>>>>>>>>>> ???? ? >> ______________________________________________
>>>>>>>>>> ???? ? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>>>>>>>> list -- To UNSUBSCRIBE and more, see
>>>>>>>>>> ???? ? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>>> ???? ? >> PLEASE do read the posting guide
>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>>> ???? ? >> and provide commented, minimal, self-contained, reproducible
>>>>>>>>> code.
>>>>>>>>>> ???? ? So this is not possible without using one of those two packages?
>>>>>>>>> I got the impression I should be able to use grid.arrange to do so but
>>>>>>>>> was not able to get it to work without disturbing the width alignment
>>>>>>>>> above...
>>>>>>>>>> ???? ? ______________________________________________
>>>>>>>>>> ???? ? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>>>>>>>> -- To UNSUBSCRIBE and more, see
>>>>>>>>>> ???? ? https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>>> ???? ? PLEASE do read the posting guide
>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>>> ???? ? and provide commented, minimal, self-contained, reproducible
>>>>>>>>> code.
>>>>>>>>>> --?
>>>>>>>>>> John Kane
>>>>>>>>>> Kingston ON Canada
>>>>>>>>> No need to play around with anything. I am simply looking for
>>>>>>>>> assistance on how to use eg arrangeGrob to not only align two plots
>>>>>>>>> columnwise but also adjust their heights relative to each other rather
>>>>>>>>> than 1:1.
>>>>>>>>>
>>>>>>>>> Can arrangeGrob() be used for that?
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ?????? [[alternative HTML version deleted]]
>>>>>>>>>
>>>>>>>>> ______________________________________________
>>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>>> PLEASE do read the posting guide
>>>>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>> Look at https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html where there are two mpg charts, one above the other. What would I need to add to:
>>>>>>>
>>>>>>> |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2, g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths) grid.newpage() grid.draw(g) |
>>>>>>>
>>>>>>> |to make the second chart 1/2 the size of the top one?|
>>>>>>>
>>>>>>> ||
>>>>>>>
>>>>>>>
>>>>>>> ?????? [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>> ???? ????[[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>> Thank you for your example. However, this does not align the plot areas horizontally. It happens to do so in this example because the y-axis labels are the same length etc but when this is not the case, it fails.
>>>> Maybe it fails but can you give an example?
>>>> The question, as far as I understand it, is about the plots' relative heights, not about horizontal alignment. And (all) others have asked you to give a reproducible example, please don't ask us to guess a use case axis labels lengths (!), which is impossible to do.
>>>>
>>>> Anyway, the function cowplot::plot_grid has an argument `align`. One of the possible values is "hv" for both horizontal and vertical alignment.
>>>>
>>>> Hope this helps,
>>>>
>>>> Rui Barradas
>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>> The easiest demonstration would be to replace:
>>>
>>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width)) + geom_point()
>>>
>>> with:
>>>
>>> v <- ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width * 1000)) + geom_point()
>>>
>>> I am looking to not only being able to set relative heights of rows (as your code correctly does) but also have the plot areas aligned.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> Just tried it and it works in this example, however, with my two plots where the top plot does not have an x-axis legend the code above still reserves room for the legend which now shows up as a large empty space...
>
> This is harder than I thought. I wonder if going back to the grobs would offer a better solution? The problem is that diving into the underlying code and understanding which variables to change is hard, there are /lots/ of variables...
>
Returning to this problem. Given the plots below where the plot areas are now nicely aligned, is it possible to change the heights to eg relative heights being 2:1?

s<-ggplot(data = subset(iris, Species == 'virginica'), aes(Sepal.Length, Sepal.Width)) + geom_point()
v<-ggplot(data = subset(iris, Species == 'setosa'), aes(Sepal.Length, Sepal.Width * 1000)) + geom_point()
g2<-ggplotGrob(s)
g3<-ggplotGrob(v)
g<-rbind(g2, g3, size = "first")
g$widths<-unit.pmax(g2$widths, g3$widths)
grid.newpage()
grid.draw(


From d||eepkunj@@| @end|ng |rom gm@||@com  Mon Jul 27 15:32:40 2020
From: d||eepkunj@@| @end|ng |rom gm@||@com (Dileepkumar R)
Date: Mon, 27 Jul 2020 19:02:40 +0530
Subject: [R] Axis with inverse logarithmic scale
Message-ID: <CALTF6sm2+=e0EKmAbOnxVqfvWb5xvHB4bYZdcaLaErZ21F77zw@mail.gmail.com>

Dear All,

I want to plot a simple cumulative probability distribution graph with like
the attached screenshot.
But I couldn't fix the y-axis scale as in that screenshot.

My data details are follows:








*y_values
=c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)*

*x_value=seq(63)*

Thank you all in advance

Dileepkumar R

From d||eepkunj@@| @end|ng |rom gm@||@com  Mon Jul 27 15:43:23 2020
From: d||eepkunj@@| @end|ng |rom gm@||@com (Dileepkumar R)
Date: Mon, 27 Jul 2020 19:13:23 +0530
Subject: [R] Axis with inverse logarithmic scale
Message-ID: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>

Dear All,

I want to plot a simple cumulative probability distribution graph with like
the attached screenshot.
But I couldn't fix the y-axis scale as in that screenshot.

My data details are follows:

y_values
=c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,
93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,
97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,
99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,
99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,
99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,
99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,
99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)

x_value=seq(63)

Thank you all in advance

Dileepkumar R

From jr@| @end|ng |rom po@teo@no  Mon Jul 27 16:44:13 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 27 Jul 2020 16:44:13 +0200
Subject: [R] Axis with inverse logarithmic scale
In-Reply-To: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
References: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
Message-ID: <20200727144413.GB141998@posteo.no>

Dear Dileepkumar R,

On 2020-07-27 19:13 +0530, Dileepkumar R wrote:
| Dear All,
| 
| I want to plot a simple cumulative 
| probability distribution graph with 
| like the attached screenshot.

The screenshot disappeared somewhere.  
Perhaps you can try to upload it 
somewhere, or attach it as a png?

| But I couldn't fix the y-axis scale as 
| in that screenshot.

You scale the y axis using ylim, 
removing it using yaxt="n", defining a 
new one using graphics::axis like in the 
last example in ?graphics::plot:

	png(
	  filename = "/tmp/ecdf.png",
	  width = 480,
	  height = 480,
	  units = "px",
	  pointsize = 12,
	  bg = "transparent",
	  res = 100)
	ymin <- 0
	ymax <- 100
	graphics::plot(
	  x=x_value,
	  y=y_values,
	  ylim=c(ymin,ymax),
	  yaxt="n")
	e.y <- ymin:ymax
	at.y <- 10^e.y
	FUN <- function(E) bquote(10^.(E))
	labels <- as.expression(
	  parallel::mclapply(X=e.y, FUN=FUN))
	graphics::axis(
	  side=2,
	  at = at.y,
	  col.axis = "orange",
	  las = 1,
	  labels = labels)
	dev.off()

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200727/f6094fcc/attachment.sig>

From d||eepkunj@@| @end|ng |rom gm@||@com  Mon Jul 27 17:56:47 2020
From: d||eepkunj@@| @end|ng |rom gm@||@com (Dileepkumar R)
Date: Mon, 27 Jul 2020 21:26:47 +0530
Subject: [R] Axis with inverse logarithmic scale
In-Reply-To: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
References: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
Message-ID: <CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>

I think the attached sample figure is not visible
Here is the sample figure:
https://drive.google.com/file/d/16Uy3JD0wsEucUv_KOhXCxLZ4U-3wiBTs/view?usp=sharing

sincerely,


Dileepkumar R




On Mon, Jul 27, 2020 at 7:13 PM Dileepkumar R <dileepkunjaai at gmail.com>
wrote:

> Dear All,
>
> I want to plot a simple cumulative probability distribution graph with
> like the attached screenshot.
> But I couldn't fix the y-axis scale as in that screenshot.
>
> My data details are follows:
>
> y_values
> =c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,
> 93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,
> 97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,
> 99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,
> 99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,
> 99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,
> 99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,
> 99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)
>
> x_value=seq(63)
>
> Thank you all in advance
>
> Dileepkumar R
>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Mon Jul 27 18:57:57 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Mon, 27 Jul 2020 12:57:57 -0400
Subject: [R] Axis with inverse logarithmic scale
In-Reply-To: <4871_1595865436_06RFvFm4029417_CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>
References: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
 <4871_1595865436_06RFvFm4029417_CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>
Message-ID: <41969c14-cc20-5996-b2f5-c8eeaace7c00@mcmaster.ca>

Dear Dileepkumar R,

As is obvious from the tick marks, the vertical axis is not log-scaled:

 > log10(99.999) - log10(99.99)
[1] 3.908865e-05
 > log10(99) - log10(90)
[1] 0.04139269


That is, these (approximately?) equally spaced ticks aren't equally 
spaced on the log scale.

The axis is instead apparently (at least approximately) on the logit 
(log-odds) scale:

 > library(car)
Loading required package: carData
 > logit(99.999) - logit(99.99)
[1] 2.302675
 > logit(99) - logit(90)
[1] 2.397895


You can get a graph close to the one you shared via the following:

library(car) # repeated so you don't omit it
 > logits <- logit(y_values)
 > plot(x_value, logits, log="x", axes=FALSE,
+      xlim=c(1, 200), ylim=logit(c(10, 99.999)),
+      xlab="Precipitation Intensity (mm/d)",
+      ylab="Cumulative Probability",
+      main="Daily U.S. Precipitation",
+      col="magenta")
 > axis(1, at=c(1, 2, 5, 10, 20, 50, 100, 200))
 > probabilityAxis(side=2, at=c(10, 30, 50, 90, 99, 99.9, 99.99, 
99.999)/100)
 > box()

Comments:

This produces probabilities, not percents, on the vertical axis, which 
conforms to what the axis label says. Also, the ticks in the R version 
point out rather than into the plotting region -- the former is 
generally considered better practice. Finally, the graph is not a 
histogram as the original title states.

I hope this helps,
  John


--------------------------------------------
   John Fox
   Professor Emeritus
   McMaster University
   Hamilton, Ontario, Canada
   web: https://socialsciences.mcmaster.ca/jfox/

On 7/27/2020 11:56 AM, Dileepkumar R wrote:
> I think the attached sample figure is not visible
> Here is the sample figure:
> https://drive.google.com/file/d/16Uy3JD0wsEucUv_KOhXCxLZ4U-3wiBTs/view?usp=sharing
> 
> sincerely,
> 
> 
> Dileepkumar R
> 
> 
> 
> 
> On Mon, Jul 27, 2020 at 7:13 PM Dileepkumar R <dileepkunjaai at gmail.com>
> wrote:
> 
>> Dear All,
>>
>> I want to plot a simple cumulative probability distribution graph with
>> like the attached screenshot.
>> But I couldn't fix the y-axis scale as in that screenshot.
>>
>> My data details are follows:
>>
>> y_values
>> =c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,
>> 93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,
>> 97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,
>> 99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,
>> 99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,
>> 99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,
>> 99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,
>> 99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)
>>
>> x_value=seq(63)
>>
>> Thank you all in advance
>>
>> Dileepkumar R
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jul 27 19:00:57 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 27 Jul 2020 13:00:57 -0400
Subject: [R] Axis with inverse logarithmic scale
In-Reply-To: <CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>
References: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
 <CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>
Message-ID: <b57a8f1e-0dba-d763-4e74-c84afe9e8d42@gmail.com>

On 27/07/2020 11:56 a.m., Dileepkumar R wrote:
> I think the attached sample figure is not visible
> Here is the sample figure:
> https://drive.google.com/file/d/16Uy3JD0wsEucUv_KOhXCxLZ4U-3wiBTs/view?usp=sharing
> 
> sincerely,
> 
> 
> Dileepkumar R
> 
> 
> 
> 
> On Mon, Jul 27, 2020 at 7:13 PM Dileepkumar R <dileepkunjaai at gmail.com>
> wrote:
> 
>> Dear All,
>>
>> I want to plot a simple cumulative probability distribution graph with
>> like the attached screenshot.
>> But I couldn't fix the y-axis scale as in that screenshot.
>>
>> My data details are follows:
>>
>> y_values
>> =c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,
>> 93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,
>> 97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,
>> 99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,
>> 99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,
>> 99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,
>> 99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,
>> 99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)
>>
>> x_value=seq(63)
>>
>> Thank you all in advance
>>

You need to figure out what scale was used.  It looks to me like a logit 
scale in y/100.  If that's right, this may show what you want:

scale <- function(y) log(y/100/(1-y/100))
plot(x_value, scale(y_values), axes = FALSE)
axis(1)
ticks <- c(10, 30, 50, 90, 99, 99.9, 99.99, 99.999)
axis(2, at=scale(ticks), labels=ticks)
box()

It doesn't have as large a range as your plot; this will match that:

plot(x_value, scale(y_values), axes = FALSE, ylim = scale(c(10, 99.9995)))

The rest of the code is the same.

Duncan Murdoch


From d||eepkunj@@| @end|ng |rom gm@||@com  Mon Jul 27 19:45:45 2020
From: d||eepkunj@@| @end|ng |rom gm@||@com (Dileepkumar R)
Date: Mon, 27 Jul 2020 23:15:45 +0530
Subject: [R] Axis with inverse logarithmic scale
In-Reply-To: <41969c14-cc20-5996-b2f5-c8eeaace7c00@mcmaster.ca>
References: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
 <4871_1595865436_06RFvFm4029417_CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>
 <41969c14-cc20-5996-b2f5-c8eeaace7c00@mcmaster.ca>
Message-ID: <CALTF6sksdRNh8b6AckkmihSJpO2MYjOxjRgy=vrTdLGzoNkjWw@mail.gmail.com>

Thanks a lot, John Fox.. Its working

Dileepkumar R
Postdoctoral Researcher,
Interdisciplinary Centre for Water Research (ICWaR),
Indian Institute of Sciences, Bangalore, 560012
Mob: 9953035600, skype id: dileepkunjaai



On Mon, Jul 27, 2020 at 10:27 PM John Fox <jfox at mcmaster.ca> wrote:

> Dear Dileepkumar R,
>
> As is obvious from the tick marks, the vertical axis is not log-scaled:
>
>  > log10(99.999) - log10(99.99)
> [1] 3.908865e-05
>  > log10(99) - log10(90)
> [1] 0.04139269
>
>
> That is, these (approximately?) equally spaced ticks aren't equally
> spaced on the log scale.
>
> The axis is instead apparently (at least approximately) on the logit
> (log-odds) scale:
>
>  > library(car)
> Loading required package: carData
>  > logit(99.999) - logit(99.99)
> [1] 2.302675
>  > logit(99) - logit(90)
> [1] 2.397895
>
>
> You can get a graph close to the one you shared via the following:
>
> library(car) # repeated so you don't omit it
>  > logits <- logit(y_values)
>  > plot(x_value, logits, log="x", axes=FALSE,
> +      xlim=c(1, 200), ylim=logit(c(10, 99.999)),
> +      xlab="Precipitation Intensity (mm/d)",
> +      ylab="Cumulative Probability",
> +      main="Daily U.S. Precipitation",
> +      col="magenta")
>  > axis(1, at=c(1, 2, 5, 10, 20, 50, 100, 200))
>  > probabilityAxis(side=2, at=c(10, 30, 50, 90, 99, 99.9, 99.99,
> 99.999)/100)
>  > box()
>
> Comments:
>
> This produces probabilities, not percents, on the vertical axis, which
> conforms to what the axis label says. Also, the ticks in the R version
> point out rather than into the plotting region -- the former is
> generally considered better practice. Finally, the graph is not a
> histogram as the original title states.
>
> I hope this helps,
>   John
>
>
> --------------------------------------------
>    John Fox
>    Professor Emeritus
>    McMaster University
>    Hamilton, Ontario, Canada
>    web: https://socialsciences.mcmaster.ca/jfox/
>
> On 7/27/2020 11:56 AM, Dileepkumar R wrote:
> > I think the attached sample figure is not visible
> > Here is the sample figure:
> >
> https://drive.google.com/file/d/16Uy3JD0wsEucUv_KOhXCxLZ4U-3wiBTs/view?usp=sharing
> >
> > sincerely,
> >
> >
> > Dileepkumar R
> >
> >
> >
> >
> > On Mon, Jul 27, 2020 at 7:13 PM Dileepkumar R <dileepkunjaai at gmail.com>
> > wrote:
> >
> >> Dear All,
> >>
> >> I want to plot a simple cumulative probability distribution graph with
> >> like the attached screenshot.
> >> But I couldn't fix the y-axis scale as in that screenshot.
> >>
> >> My data details are follows:
> >>
> >> y_values
> >>
> =c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,
> >> 93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,
> >> 97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,
> >> 99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,
> >> 99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,
> >> 99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,
> >> 99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,
> >> 99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)
> >>
> >> x_value=seq(63)
> >>
> >> Thank you all in advance
> >>
> >> Dileepkumar R
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From berrom@r|@no @end|ng |rom hotm@||@com  Mon Jul 27 18:00:33 2020
From: berrom@r|@no @end|ng |rom hotm@||@com (mariano berro)
Date: Mon, 27 Jul 2020 16:00:33 +0000
Subject: [R] Fine-Grey test
Message-ID: <BYAPR10MB32555D1F2406694BE2AD7F2FD0720@BYAPR10MB3255.namprd10.prod.outlook.com>

My name is Mariano Berro. I am a hematologist from Argentina.
I usually use R for most of my statistical analysis, but I cannot find the way of performing the Fine-Grey analysis with categorical variables (more than two options, example: type of donors tipically sibling, unrelated and haploidentical).
If there is a way of doing this with R, it will be very helpful.
Regards
Mariano Berro

Enviado desde Correo<https://go.microsoft.com/fwlink/?LinkId=550986> para Windows 10


	[[alternative HTML version deleted]]


From @bh@|@@@wk@r @end|ng |rom gm@||@com  Mon Jul 27 19:12:33 2020
From: @bh@|@@@wk@r @end|ng |rom gm@||@com (Abhai Sawkar)
Date: Mon, 27 Jul 2020 10:12:33 -0700
Subject: [R] grid and lattice packages not working
Message-ID: <CAHX1XkUC3k9ecichSR77JcdHkpqCFKCSpzzbCa=oSjoUYinCQQ@mail.gmail.com>

Hi R support team,

I downloaded R from the Internet and tried to use the grid GUI package but
it seems like the graphical functions can't be found.

I did a quick search() and despite the presence of the grid and lattice
packages in my R folder, it doesn't seem to be there either.

Any help would be appreciated.

Thank you and kind regards
Abhai

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jul 27 23:23:48 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 27 Jul 2020 14:23:48 -0700
Subject: [R] grid and lattice packages not working
In-Reply-To: <CAHX1XkUC3k9ecichSR77JcdHkpqCFKCSpzzbCa=oSjoUYinCQQ@mail.gmail.com>
References: <CAHX1XkUC3k9ecichSR77JcdHkpqCFKCSpzzbCa=oSjoUYinCQQ@mail.gmail.com>
Message-ID: <CAGxFJbRudiErRpDt6JQi8u+jC-XxAbZTRjEUhnrH56anQfUucg@mail.gmail.com>

?library

You have to load the packages into your workspace to use them.

If I am correct in this guess, then you need to spend some time with an R
tutorial or two before doing anything further. If I am incorrect, then it
may help if you provide the output of sessionInfo().

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jul 27, 2020 at 1:53 PM Abhai Sawkar <abhai.sawkar at gmail.com> wrote:

> Hi R support team,
>
> I downloaded R from the Internet and tried to use the grid GUI package but
> it seems like the graphical functions can't be found.
>
> I did a quick search() and despite the presence of the grid and lattice
> packages in my R folder, it doesn't seem to be there either.
>
> Any help would be appreciated.
>
> Thank you and kind regards
> Abhai
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Mon Jul 27 23:22:57 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon, 27 Jul 2020 23:22:57 +0200
Subject: [R] Fine-Grey test
In-Reply-To: <BYAPR10MB32555D1F2406694BE2AD7F2FD0720@BYAPR10MB3255.namprd10.prod.outlook.com>
References: <BYAPR10MB32555D1F2406694BE2AD7F2FD0720@BYAPR10MB3255.namprd10.prod.outlook.com>
Message-ID: <20200727212257.GA4317@posteo.no>

Dear Mariano,

On 2020-07-27 16:00 +0000, mariano berro wrote:
> My name is Mariano Berro. I am a 
> hematologist from Argentina.
> I usually use R for most of my 
> statistical analysis, but I cannot 
> find the way of performing the 
> Fine-Grey analysis with categorical 
> variables (more than two options, 
> example: type of donors tipically 
> sibling, unrelated and 
> haploidentical).
> If there is a way of doing this with 
> R, it will be very helpful.

A function survival::finegray[1] exists, 
perhaps it's what you're looking for?

Best,
Rasmus

[1] https://www.rdocumentation.org/packages/survival/versions/2.41-2/topics/finegray

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200727/51e07b6f/attachment.sig>

From jwd @end|ng |rom @urewe@t@net  Tue Jul 28 02:14:02 2020
From: jwd @end|ng |rom @urewe@t@net (John)
Date: Mon, 27 Jul 2020 17:14:02 -0700
Subject: [R] grid and lattice packages not working
In-Reply-To: <CAHX1XkUC3k9ecichSR77JcdHkpqCFKCSpzzbCa=oSjoUYinCQQ@mail.gmail.com>
References: <CAHX1XkUC3k9ecichSR77JcdHkpqCFKCSpzzbCa=oSjoUYinCQQ@mail.gmail.com>
Message-ID: <20200727171402.2dc9af9f@Draco>

On Mon, 27 Jul 2020 10:12:33 -0700
Abhai Sawkar <abhai.sawkar at gmail.com> wrote:

It might help if you provided an example of what happens when you
invoke one of the routines.  As it stands, this could be due to several
different causes.

JWdougherty

> Hi R support team,
> 
> I downloaded R from the Internet and tried to use the grid GUI
> package but it seems like the graphical functions can't be found.
> 
> I did a quick search() and despite the presence of the grid and
> lattice packages in my R folder, it doesn't seem to be there either.
> 
> Any help would be appreciated.
> 
> Thank you and kind regards
> Abhai
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html and provide commented,
> minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jul 28 03:58:43 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 27 Jul 2020 18:58:43 -0700
Subject: [R] grid and lattice packages not working
In-Reply-To: <20200727171402.2dc9af9f@Draco>
References: <CAHX1XkUC3k9ecichSR77JcdHkpqCFKCSpzzbCa=oSjoUYinCQQ@mail.gmail.com>
 <20200727171402.2dc9af9f@Draco>
Message-ID: <CAGxFJbSSwmrEg6BhuOafm9JKtAKedpRKk=dfWPq2S-0g6xa64A@mail.gmail.com>

BTW Abhai:

In case you did not understand, R-Help is **not** an official support
service. It is entirely a volunteer effort, and there is **no guarantee
that you will receive any reply** NOR that replies are correct or even
helpful (although they usually are).  One can considerably enhance the
probability of receiving a helpful reply by reading and following the
posting guide linked below.

As I said earlier, posting the result of sessionInfo() would be useful if
you have not already solved your problem.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jul 27, 2020 at 5:14 PM John via R-help <r-help at r-project.org>
wrote:

> On Mon, 27 Jul 2020 10:12:33 -0700
> Abhai Sawkar <abhai.sawkar at gmail.com> wrote:
>
> It might help if you provided an example of what happens when you
> invoke one of the routines.  As it stands, this could be due to several
> different causes.
>
> JWdougherty
>
> > Hi R support team,
> >
> > I downloaded R from the Internet and tried to use the grid GUI
> > package but it seems like the graphical functions can't be found.
> >
> > I did a quick search() and despite the presence of the grid and
> > lattice packages in my R folder, it doesn't seem to be there either.
> >
> > Any help would be appreciated.
> >
> > Thank you and kind regards
> > Abhai
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html and provide commented,
> > minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v@h|d@borj|65 @end|ng |rom gm@||@com  Tue Jul 28 08:01:07 2020
From: v@h|d@borj|65 @end|ng |rom gm@||@com (Vahid Borji)
Date: Tue, 28 Jul 2020 10:31:07 +0430
Subject: [R] Writing Persian (Arabic) in a data frame
Message-ID: <CAEPHqhbyA03=eYkOHXBxhiOdciSjZxu7jVCCCmJwypDhiXg=3Q@mail.gmail.com>

I am trying to make a data frame including two vectors. The first vector is
a vector of Persian names, and the second vector is a vector of numbers. My
code is as follows:

A<-data.frame(x=c("????","?????"),y=c(1,1))
A

But when I run these codes I do not receive my desired output. Indeed the
column of x is not in Persian. The output is like this:

                         x                 y1
<U+0645><U+0631><U+06CC><U+0645> 12
<U+0645><U+0627><U+0631><U+06CC><U+0627> 1

I want to have the column of x in *Persian language*. Could you please help
me how I can do it?

(I should say when I make a vector of Persian names and I run it, I receive
the correct output in Persian, like below:

x=c("????","?????")
x[1] "????"  "?????"

But in regard to the data frame I have the above problem)

	[[alternative HTML version deleted]]


From v@r||61 @end|ng |rom w|ndow@||ve@com  Sun Jul 26 19:38:26 2020
From: v@r||61 @end|ng |rom w|ndow@||ve@com (=?iso-8859-3?Q?ahmet_varl=B9?=)
Date: Sun, 26 Jul 2020 17:38:26 +0000
Subject: [R] getting raster layer between December and march in 1-year raster
Message-ID: <VI1PR0302MB31992659036B903AFB857CB8BB750@VI1PR0302MB3199.eurprd03.prod.outlook.com>


I am using these codes but it is not work between december and march. I want to use dates for select layers  but ? dont know how ? can do

Could u help me?


dir.create(dir.out1, showWarnings = F)
dir.create(dir.out2, showWarnings = F)
dir.create(dir.out3, showWarnings = F)


for (year in 1949:2019) {
  fi <- paste0(dir.in,"soilw2_",year,".nc")
  r <- brick(fi)
  d<-rotate(r)

  ec<-extent(-179.0625, 180.9375, 0, 89.49406  )
  ed<-extent(-179.0625, 180.9375, -89.49406, 0)
  c5<-crop(d,ec)
  c5.1<-crop(d,ed)
  c6<-calc(c5[[152:243]],fun = mean)
  c7<-calc(c5.1[[152:243]],fun = mean)



  fo1 <- paste0(dir.out1,"mean.JUN-AUG.North.2_",year,".tif")
  fo2 <- paste0(dir.out2,"mean.JUN-AUG.South.2_",year,".tif")


  writeRaster(c6,file=fo1,overwrite=T)
  writeRaster(c7,file=fo2,overwrite=T)   }


Windows 10 i?in Posta<https://go.microsoft.com/fwlink/?LinkId=550986> ile g?nderildi


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jul 28 13:57:50 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 28 Jul 2020 07:57:50 -0400
Subject: [R] Writing Persian (Arabic) in a data frame
In-Reply-To: <CAEPHqhbyA03=eYkOHXBxhiOdciSjZxu7jVCCCmJwypDhiXg=3Q@mail.gmail.com>
References: <CAEPHqhbyA03=eYkOHXBxhiOdciSjZxu7jVCCCmJwypDhiXg=3Q@mail.gmail.com>
Message-ID: <6f3b561b-b4b0-78aa-5889-082cd688dc85@gmail.com>

On 28/07/2020 2:01 a.m., Vahid Borji wrote:
> I am trying to make a data frame including two vectors. The first vector is
> a vector of Persian names, and the second vector is a vector of numbers. My
> code is as follows:
> 
> A<-data.frame(x=c("????","?????"),y=c(1,1))
> A
> 
> But when I run these codes I do not receive my desired output. Indeed the
> column of x is not in Persian. The output is like this:
> 
>                           x                 y1
> <U+0645><U+0631><U+06CC><U+0645> 12
> <U+0645><U+0627><U+0631><U+06CC><U+0627> 1
> 
> I want to have the column of x in *Persian language*. Could you please help
> me how I can do it?

You need to work on a system that uses a UTF-8 locale.  Otherwise R 
tries to express strings in the local encoding, finds that won't work, 
and shows Unicode escapes instead.

For decades Windows had no UTF-8 locale, so your only choice was to move 
to a different OS.  There are rumours now that it finally has one, but I 
don't know how to enable it, and I'm not certain that R will handle it 
properly:  you may need a very recent version (perhaps unreleased) for R 
not to automatically assume that Windows can't do it.

Duncan Murdoch

> 
> (I should say when I make a vector of Persian names and I run it, I receive
> the correct output in Persian, like below:
> 
> x=c("????","?????")
> x[1] "????"  "?????"
> 
> But in regard to the data frame I have the above problem)
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jul 28 14:32:03 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 28 Jul 2020 15:32:03 +0300
Subject: [R] Writing Persian (Arabic) in a data frame
In-Reply-To: <CAEPHqhbyA03=eYkOHXBxhiOdciSjZxu7jVCCCmJwypDhiXg=3Q@mail.gmail.com>
References: <CAEPHqhbyA03=eYkOHXBxhiOdciSjZxu7jVCCCmJwypDhiXg=3Q@mail.gmail.com>
Message-ID: <20200728153203.4675607f@trisector>

On Tue, 28 Jul 2020 10:31:07 +0430
Vahid Borji <vahid.borji65 at gmail.com> wrote:

> A<-data.frame(x=c("????","?????"),y=c(1,1))

> The output is like this:
> 
>                          x                 y1
> <U+0645><U+0631><U+06CC><U+0645> 12
> <U+0645><U+0627><U+0631><U+06CC><U+0627> 1

This is one of those problems heavily affected by your version of R
(does it have stringsAsFactors = TRUE or FALSE by default?), your
operating system and locale (see [*] for a description of
Unicode-related problems in R on Windows).

Here is a similar problem from 9 years ago where Unicode characters
were displayed as escapes on Windows with US English (ANSI-1251)
locale when data.frame() converted strings to factors:
https://r.789695.n4.nabble.com/gsub-with-unicode-and-escape-character-td3672737.html

-- 
Best regards,
Ivan

P.S.

> 	[[alternative HTML version deleted]]

Please post in plain text, not HTML.

[*]
https://developer.r-project.org/Blog/public/2020/05/02/utf-8-support-on-windows/index.html


From btupper @end|ng |rom b|ge|ow@org  Tue Jul 28 15:02:49 2020
From: btupper @end|ng |rom b|ge|ow@org (Ben Tupper)
Date: Tue, 28 Jul 2020 09:02:49 -0400
Subject: [R] getting raster layer between December and march in 1-year
 raster
In-Reply-To: <VI1PR0302MB31992659036B903AFB857CB8BB750@VI1PR0302MB3199.eurprd03.prod.outlook.com>
References: <VI1PR0302MB31992659036B903AFB857CB8BB750@VI1PR0302MB3199.eurprd03.prod.outlook.com>
Message-ID: <CALrbzg22q9fLs+GRQqWX_gBu5RTBVeppthhbde7XvKnsmDNHmQ@mail.gmail.com>

Hi,

I encourage you to subscribe the r-sig-geo mailing list for questions
regarding geospatial data handling.  Subscribe here...
https://stat.ethz.ch/mailman/listinfo/r-sig-geo

While you have shown your code, you have been very specific about what the
issue is and how you know it is not working.  Without more information, it
really isn't possible for anyone not sitting at your computer to
diagnose the issue you are having.  Can you make a reproducible example
that shows the problem?

Best wishes,
Ben

On Tue, Jul 28, 2020 at 3:25 AM ahmet varl? <varli61 at windowslive.com> wrote:

>
> I am using these codes but it is not work between december and march. I
> want to use dates for select layers  but ? dont know how ? can do
>
> Could u help me?
>
>
> dir.create(dir.out1, showWarnings = F)
> dir.create(dir.out2, showWarnings = F)
> dir.create(dir.out3, showWarnings = F)
>
>
> for (year in 1949:2019) {
>   fi <- paste0(dir.in,"soilw2_",year,".nc")
>   r <- brick(fi)
>   d<-rotate(r)
>
>   ec<-extent(-179.0625, 180.9375, 0, 89.49406  )
>   ed<-extent(-179.0625, 180.9375, -89.49406, 0)
>   c5<-crop(d,ec)
>   c5.1<-crop(d,ed)
>   c6<-calc(c5[[152:243]],fun = mean)
>   c7<-calc(c5.1[[152:243]],fun = mean)
>
>
>
>   fo1 <- paste0(dir.out1,"mean.JUN-AUG.North.2_",year,".tif")
>   fo2 <- paste0(dir.out2,"mean.JUN-AUG.South.2_",year,".tif")
>
>
>   writeRaster(c6,file=fo1,overwrite=T)
>   writeRaster(c7,file=fo2,overwrite=T)   }
>
>
> Windows 10 i?in Posta<https://go.microsoft.com/fwlink/?LinkId=550986> ile
> g?nderildi
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Ben Tupper
Bigelow Laboratory for Ocean Science
East Boothbay, Maine
http://www.bigelow.org/
https://eco.bigelow.org

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Tue Jul 28 15:51:07 2020
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Tue, 28 Jul 2020 09:51:07 -0400
Subject: [R] Writing Persian (Arabic) in a data frame
In-Reply-To: <20200728153203.4675607f@trisector>
References: <CAEPHqhbyA03=eYkOHXBxhiOdciSjZxu7jVCCCmJwypDhiXg=3Q@mail.gmail.com>
 <20200728153203.4675607f@trisector>
Message-ID: <CAKZQJMAPj4yz-L4qRDQSkNp_HB0TE_xmAcWvQ9XGJwYHy8jong@mail.gmail.com>

Just to agree with the other responses, note my default encoding is UTF-8.

> A<-data.frame(x=c("????","?????"),y=c(1,1))
> A
      x y
1  ???? 1
2 ????? 1
> str(A)
'data.frame': 2 obs. of  2 variables:
 $ x: chr  "????" "?????"
 $ y: num  1 1
>  sessionInfo()
R version 4.0.2 (2020-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 20.04 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0

locale:
 [1] LC_CTYPE=en_CA.UTF-8       LC_NUMERIC=C
LC_TIME=en_CA.UTF-8        LC_COLLATE=en_CA.UTF-8
 [5] LC_MONETARY=en_CA.UTF-8    LC_MESSAGES=en_CA.UTF-8
 LC_PAPER=en_CA.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
LC_MEASUREMENT=en_CA.UTF-8 LC_IDENTIFICATION=C

On Tue, 28 Jul 2020 at 08:32, Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Tue, 28 Jul 2020 10:31:07 +0430
> Vahid Borji <vahid.borji65 at gmail.com> wrote:
>
> > A<-data.frame(x=c("????","?????"),y=c(1,1))
>
> > The output is like this:
> >
> >                          x                 y1
> > <U+0645><U+0631><U+06CC><U+0645> 12
> > <U+0645><U+0627><U+0631><U+06CC><U+0627> 1
>
> This is one of those problems heavily affected by your version of R
> (does it have stringsAsFactors = TRUE or FALSE by default?), your
> operating system and locale (see [*] for a description of
> Unicode-related problems in R on Windows).
>
> Here is a similar problem from 9 years ago where Unicode characters
> were displayed as escapes on Windows with US English (ANSI-1251)
> locale when data.frame() converted strings to factors:
>
> https://r.789695.n4.nabble.com/gsub-with-unicode-and-escape-character-td3672737.html
>
> --
> Best regards,
> Ivan
>
> P.S.
>
> >       [[alternative HTML version deleted]]
>
> Please post in plain text, not HTML.
>
> [*]
>
> https://developer.r-project.org/Blog/public/2020/05/02/utf-8-support-on-windows/index.html
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Jul 28 15:56:10 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 28 Jul 2020 15:56:10 +0200
Subject: [R] Axis with inverse logarithmic scale
In-Reply-To: <41969c14-cc20-5996-b2f5-c8eeaace7c00@mcmaster.ca>
References: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
 <4871_1595865436_06RFvFm4029417_CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>
 <41969c14-cc20-5996-b2f5-c8eeaace7c00@mcmaster.ca>
Message-ID: <24352.11898.152007.158037@stat.math.ethz.ch>

>>>>> John Fox 
>>>>>     on Mon, 27 Jul 2020 12:57:57 -0400 writes:

    > Dear Dileepkumar R,
    > As is obvious from the tick marks, the vertical axis is not log-scaled:

    >> log10(99.999) - log10(99.99)
    > [1] 3.908865e-05
    >> log10(99) - log10(90)
    > [1] 0.04139269


    > That is, these (approximately?) equally spaced ticks aren't equally 
    > spaced on the log scale.

    > The axis is instead apparently (at least approximately) on the logit 
    > (log-odds) scale:

    >> library(car)
    > Loading required package: carData
    >> logit(99.999) - logit(99.99)
    > [1] 2.302675
    >> logit(99) - logit(90)
    > [1] 2.397895

Small remark : You don't need car (or any other extra pkg) to have logit:

  logit <- plogis # is sufficient

Note that the ?plogis (i.e. 'Logistic') help page has had a
  \concept{logit}

entry (which would help if one used  help.search() .. {I don't;
I have 10000 of packages}),
and that same help page has been talking about 'logit' for ca 16
years now (and I'm sure this is news for most readers, still)...


    > You can get a graph close to the one you shared via the following:

    > library(car) # repeated so you don't omit it

.. and here you need 'car'  for the nice  probabilityAxis(.) ..

    >> logits <- logit(y_values)
    >> plot(x_value, logits, log="x", axes=FALSE,
    > +      xlim=c(1, 200), ylim=logit(c(10, 99.999)),
    > +      xlab="Precipitation Intensity (mm/d)",
    > +      ylab="Cumulative Probability",
    > +      main="Daily U.S. Precipitation",
    > +      col="magenta")
    >> axis(1, at=c(1, 2, 5, 10, 20, 50, 100, 200))
    >> probabilityAxis(side=2, at=c(10, 30, 50, 90, 99, 99.9, 99.99, 
    >                  99.999)/100)
    >> box()

    > Comments:

    > This produces probabilities, not percents, on the vertical axis, which 
    > conforms to what the axis label says. Also, the ticks in the R version 
    > point out rather than into the plotting region -- the former is 
    > generally considered better practice. Finally, the graph is not a 
    > histogram as the original title states.

    > I hope this helps,
    > John


    > --------------------------------------------
    > John Fox
    > Professor Emeritus
    > McMaster University
    > Hamilton, Ontario, Canada
    > web: https://socialsciences.mcmaster.ca/jfox/

    > On 7/27/2020 11:56 AM, Dileepkumar R wrote:
    >> I think the attached sample figure is not visible
    >> Here is the sample figure:
    >> https://drive.google.com/file/d/16Uy3JD0wsEucUv_KOhXCxLZ4U-3wiBTs/view?usp=sharing
    >> 
    >> sincerely,
    >> 
    >> 
    >> Dileepkumar R
    >> 
    >> 
    >> 
    >> 
    >> On Mon, Jul 27, 2020 at 7:13 PM Dileepkumar R <dileepkunjaai at gmail.com>
    >> wrote:
    >> 
    >>> Dear All,
    >>> 
    >>> I want to plot a simple cumulative probability distribution graph with
    >>> like the attached screenshot.
    >>> But I couldn't fix the y-axis scale as in that screenshot.
    >>> 
    >>> My data details are follows:
    >>> 
    >>> y_values
    >>> =c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,
    >>> 93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,
    >>> 97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,
    >>> 99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,
    >>> 99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,
    >>> 99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,
    >>> 99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,
    >>> 99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)
    >>> 
    >>> x_value=seq(63)
    >>> 
    >>> Thank you all in advance
    >>> 
    >>> Dileepkumar R
    >>> 
    >> 
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >> and provide commented, minimal, self-contained, reproducible code.
    >> 

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Tue Jul 28 16:13:07 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 28 Jul 2020 14:13:07 +0000
Subject: [R] Nonlinear logistic regression fitting
Message-ID: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>

Hi 

I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:

L = intercept + emax * x / (EC50+x)

Which I guess could be expressed as the following R model 

~ emax*x/(ec50+x)

As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear. 

A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.

From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Jul 28 16:17:15 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 28 Jul 2020 16:17:15 +0200
Subject: [R] Axis with inverse logarithmic scale
In-Reply-To: <24352.11898.152007.158037@stat.math.ethz.ch>
References: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
 <4871_1595865436_06RFvFm4029417_CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>
 <41969c14-cc20-5996-b2f5-c8eeaace7c00@mcmaster.ca>
 <24352.11898.152007.158037@stat.math.ethz.ch>
Message-ID: <24352.13163.439122.277687@stat.math.ethz.ch>

>>>>> Martin Maechler 
>>>>>     on Tue, 28 Jul 2020 15:56:10 +0200 writes:

>>>>> John Fox 
>>>>>     on Mon, 27 Jul 2020 12:57:57 -0400 writes:

    >> Dear Dileepkumar R,
    >> As is obvious from the tick marks, the vertical axis is not log-scaled:

    >>> log10(99.999) - log10(99.99)
    >> [1] 3.908865e-05
    >>> log10(99) - log10(90)
    >> [1] 0.04139269


    >> That is, these (approximately?) equally spaced ticks aren't equally 
    >> spaced on the log scale.

    >> The axis is instead apparently (at least approximately) on the logit 
    >> (log-odds) scale:

    >>> library(car)
    >> Loading required package: carData
    >>> logit(99.999) - logit(99.99)
    >> [1] 2.302675
    >>> logit(99) - logit(90)
    >> [1] 2.397895

    > Small remark : You don't need car (or any other extra pkg) to have logit:

    > logit <- plogis # is sufficient

    > Note that the ?plogis (i.e. 'Logistic') help page has had a
    > \concept{logit}

    > entry (which would help if one used  help.search() .. {I don't;
    > I have 10000 of packages}),
    > and that same help page has been talking about 'logit' for ca 16
    > years now (and I'm sure this is news for most readers, still)...

but now I see that car uses the "empirical logit" function,
where plogis() provides the mathematical logit():

The former is typically needed for data transformations where
you don't want to map {0,1} to  -/+ Inf but rather to finite
values ..

So I should stayed quiet, probably..

Martin


    >> You can get a graph close to the one you shared via the following:

    >> library(car) # repeated so you don't omit it

    > .. and here you need 'car'  for the nice  probabilityAxis(.) ..

    >>> logits <- logit(y_values)
    >>> plot(x_value, logits, log="x", axes=FALSE,
    >> +      xlim=c(1, 200), ylim=logit(c(10, 99.999)),
    >> +      xlab="Precipitation Intensity (mm/d)",
    >> +      ylab="Cumulative Probability",
    >> +      main="Daily U.S. Precipitation",
    >> +      col="magenta")
    >>> axis(1, at=c(1, 2, 5, 10, 20, 50, 100, 200))
    >>> probabilityAxis(side=2, at=c(10, 30, 50, 90, 99, 99.9, 99.99, 
    >> 99.999)/100)
    >>> box()

    >> Comments:

    >> This produces probabilities, not percents, on the vertical axis, which 
    >> conforms to what the axis label says. Also, the ticks in the R version 
    >> point out rather than into the plotting region -- the former is 
    >> generally considered better practice. Finally, the graph is not a 
    >> histogram as the original title states.

    >> I hope this helps,
    >> John


    >> --------------------------------------------
    >> John Fox
    >> Professor Emeritus
    >> McMaster University
    >> Hamilton, Ontario, Canada
    >> web: https://socialsciences.mcmaster.ca/jfox/

    >> On 7/27/2020 11:56 AM, Dileepkumar R wrote:
    >>> I think the attached sample figure is not visible
    >>> Here is the sample figure:
    >>> https://drive.google.com/file/d/16Uy3JD0wsEucUv_KOhXCxLZ4U-3wiBTs/view?usp=sharing
    >>> 
    >>> sincerely,
    >>> 
    >>> 
    >>> Dileepkumar R
    >>> 
    >>> 
    >>> 
    >>> 
    >>> On Mon, Jul 27, 2020 at 7:13 PM Dileepkumar R <dileepkunjaai at gmail.com>
    >>> wrote:
    >>> 
    >>>> Dear All,
    >>>> 
    >>>> I want to plot a simple cumulative probability distribution graph with
    >>>> like the attached screenshot.
    >>>> But I couldn't fix the y-axis scale as in that screenshot.
    >>>> 
    >>>> My data details are follows:
    >>>> 
    >>>> y_values
    >>>> =c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,
    >>>> 93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,
    >>>> 97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,
    >>>> 99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,
    >>>> 99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,
    >>>> 99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,
    >>>> 99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,
    >>>> 99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)
    >>>> 
    >>>> x_value=seq(63)
    >>>> 
    >>>> Thank you all in advance
    >>>> 
    >>>> Dileepkumar R
    >>>> 
    >>> 
    >>> [[alternative HTML version deleted]]
    >>> 
    >>> ______________________________________________
    >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >>> https://stat.ethz.ch/mailman/listinfo/r-help
    >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >>> and provide commented, minimal, self-contained, reproducible code.
    >>> 

    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >> and provide commented, minimal, self-contained, reproducible code.

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From j|ox @end|ng |rom mcm@@ter@c@  Tue Jul 28 16:47:35 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 28 Jul 2020 10:47:35 -0400
Subject: [R] Axis with inverse logarithmic scale
In-Reply-To: <16473_1595946331_06SEPUre013001_24352.13163.439122.277687@stat.math.ethz.ch>
References: <CALTF6sm8LZakeEqxuhGUo1oM9AReZKB7GCP26B7GJqdwT0UMAQ@mail.gmail.com>
 <4871_1595865436_06RFvFm4029417_CALTF6snwtB__1KTkKAUwbbTj6gmjpY7eTJDk+O2TsCJSGkhAtw@mail.gmail.com>
 <41969c14-cc20-5996-b2f5-c8eeaace7c00@mcmaster.ca>
 <24352.11898.152007.158037@stat.math.ethz.ch>
 <16473_1595946331_06SEPUre013001_24352.13163.439122.277687@stat.math.ethz.ch>
Message-ID: <34ce1afd-ab7f-5c66-188c-8a366ffdd0b6@mcmaster.ca>

Dear Martin,

On 7/28/2020 10:17 AM, Martin Maechler wrote:
>>>>>> Martin Maechler
>>>>>>      on Tue, 28 Jul 2020 15:56:10 +0200 writes:
> 
>>>>>> John Fox
>>>>>>      on Mon, 27 Jul 2020 12:57:57 -0400 writes:
> 
>      >> Dear Dileepkumar R,
>      >> As is obvious from the tick marks, the vertical axis is not log-scaled:
> 
>      >>> log10(99.999) - log10(99.99)
>      >> [1] 3.908865e-05
>      >>> log10(99) - log10(90)
>      >> [1] 0.04139269
> 
> 
>      >> That is, these (approximately?) equally spaced ticks aren't equally
>      >> spaced on the log scale.
> 
>      >> The axis is instead apparently (at least approximately) on the logit
>      >> (log-odds) scale:
> 
>      >>> library(car)
>      >> Loading required package: carData
>      >>> logit(99.999) - logit(99.99)
>      >> [1] 2.302675
>      >>> logit(99) - logit(90)
>      >> [1] 2.397895
> 
>      > Small remark : You don't need car (or any other extra pkg) to have logit:
> 
>      > logit <- plogis # is sufficient
> 
>      > Note that the ?plogis (i.e. 'Logistic') help page has had a
>      > \concept{logit}
> 
>      > entry (which would help if one used  help.search() .. {I don't;
>      > I have 10000 of packages}),
>      > and that same help page has been talking about 'logit' for ca 16
>      > years now (and I'm sure this is news for most readers, still)...
> 
> but now I see that car uses the "empirical logit" function,
> where plogis() provides the mathematical logit():

Not quite the empirical logit, because we don't know the counts, but a 
similar idea when the proportions include 0 or 1. Also, logit() 
recognizes percents as well as proportions, and so there's no need to 
convert the former to the latter.

> 
> The former is typically needed for data transformations where
> you don't want to map {0,1} to  -/+ Inf but rather to finite
> values ..
> 
> So I should stayed quiet, probably..

Well, I wouldn't go so far as that.

Best,
  John

> 
> Martin
> 
> 
>      >> You can get a graph close to the one you shared via the following:
> 
>      >> library(car) # repeated so you don't omit it
> 
>      > .. and here you need 'car'  for the nice  probabilityAxis(.) ..
> 
>      >>> logits <- logit(y_values)
>      >>> plot(x_value, logits, log="x", axes=FALSE,
>      >> +      xlim=c(1, 200), ylim=logit(c(10, 99.999)),
>      >> +      xlab="Precipitation Intensity (mm/d)",
>      >> +      ylab="Cumulative Probability",
>      >> +      main="Daily U.S. Precipitation",
>      >> +      col="magenta")
>      >>> axis(1, at=c(1, 2, 5, 10, 20, 50, 100, 200))
>      >>> probabilityAxis(side=2, at=c(10, 30, 50, 90, 99, 99.9, 99.99,
>      >> 99.999)/100)
>      >>> box()
> 
>      >> Comments:
> 
>      >> This produces probabilities, not percents, on the vertical axis, which
>      >> conforms to what the axis label says. Also, the ticks in the R version
>      >> point out rather than into the plotting region -- the former is
>      >> generally considered better practice. Finally, the graph is not a
>      >> histogram as the original title states.
> 
>      >> I hope this helps,
>      >> John
> 
> 
>      >> --------------------------------------------
>      >> John Fox
>      >> Professor Emeritus
>      >> McMaster University
>      >> Hamilton, Ontario, Canada
>      >> web: https://socialsciences.mcmaster.ca/jfox/
> 
>      >> On 7/27/2020 11:56 AM, Dileepkumar R wrote:
>      >>> I think the attached sample figure is not visible
>      >>> Here is the sample figure:
>      >>> https://drive.google.com/file/d/16Uy3JD0wsEucUv_KOhXCxLZ4U-3wiBTs/view?usp=sharing
>      >>>
>      >>> sincerely,
>      >>>
>      >>>
>      >>> Dileepkumar R
>      >>>
>      >>>
>      >>>
>      >>>
>      >>> On Mon, Jul 27, 2020 at 7:13 PM Dileepkumar R <dileepkunjaai at gmail.com>
>      >>> wrote:
>      >>>
>      >>>> Dear All,
>      >>>>
>      >>>> I want to plot a simple cumulative probability distribution graph with
>      >>>> like the attached screenshot.
>      >>>> But I couldn't fix the y-axis scale as in that screenshot.
>      >>>>
>      >>>> My data details are follows:
>      >>>>
>      >>>> y_values
>      >>>> =c(66.78149,76.10846,81.65518,85.06448,87.61703,89.61314,91.20297,92.36884,
>      >>>> 93.64070,94.57693,95.23052,95.75163,96.15792,96.58188,96.97933,97.29730,
>      >>>> 97.59760,97.91556,98.14520,98.37485,98.57799,98.74580,98.87829,99.06377,
>      >>>> 99.16093,99.25808,99.37290,99.45239,99.54072,99.59371,99.62904,99.66437,
>      >>>> 99.69970,99.70853,99.72620,99.73503,99.77036,99.79686,99.80569,99.82335,
>      >>>> 99.83219,99.84985,99.86751,99.87635,99.87635,99.90284,99.90284,99.90284,
>      >>>> 99.91168,99.92051,99.92051,99.93817,99.93817,99.93817,99.95584,99.95584,
>      >>>> 99.97350,99.97350,99.97350,99.97350,99.97350,99.97350,99.97350)
>      >>>>
>      >>>> x_value=seq(63)
>      >>>>
>      >>>> Thank you all in advance
>      >>>>
>      >>>> Dileepkumar R
>      >>>>
>      >>>
>      >>> [[alternative HTML version deleted]]
>      >>>
>      >>> ______________________________________________
>      >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>      >>> https://stat.ethz.ch/mailman/listinfo/r-help
>      >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>      >>> and provide commented, minimal, self-contained, reproducible code.
>      >>>
> 
>      >> ______________________________________________
>      >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>      >> https://stat.ethz.ch/mailman/listinfo/r-help
>      >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>      >> and provide commented, minimal, self-contained, reproducible code.
> 
>      > ______________________________________________
>      > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>      > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>      > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jul 28 17:12:29 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 28 Jul 2020 08:12:29 -0700
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <CAGxFJbQ=Hsd6EaXHzbBKCA+9PumWmGXq1xcYdphiBAUM3m9_Lw@mail.gmail.com>

Search!
... for "nonlinear logistic regression" at rseek.org.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 28, 2020 at 7:25 AM Sebastien Bihorel via R-help <
r-help at r-project.org> wrote:

> Hi
>
> I need to fit a logistic regression model using a saturable
> Michaelis-Menten function of my predictor x. The likelihood could be
> expressed as:
>
> L = intercept + emax * x / (EC50+x)
>
> Which I guess could be expressed as the following R model
>
> ~ emax*x/(ec50+x)
>
> As far as I know (please, correct me if I am wrong), fitting such a model
> is to not doable with glm, since the function is not linear.
>
> A Stackoverflow post recommends the bnlr function from the gnlm (
> https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)...
> I would be grateful for any opinion on this package or for any alternative
> recommendation of package/function.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Tue Jul 28 17:19:35 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 28 Jul 2020 15:19:35 +0000
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <CAGxFJbQ=Hsd6EaXHzbBKCA+9PumWmGXq1xcYdphiBAUM3m9_Lw@mail.gmail.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>,
 <CAGxFJbQ=Hsd6EaXHzbBKCA+9PumWmGXq1xcYdphiBAUM3m9_Lw@mail.gmail.com>
Message-ID: <MN2PR19MB4110A8212561113EA02B600892730@MN2PR19MB4110.namprd19.prod.outlook.com>

Thank you for your subtle input, Bert... as usual!

This is literally the search I conducted and spent 2 hours on before posting to R-help. I was asking for expert opinions, not for search engine FAQ!

Thank anyways

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Tuesday, July 28, 2020 11:12
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Nonlinear logistic regression fitting

Search!
... for "nonlinear logistic regression" at rseek.org<http://rseek.org>.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 28, 2020 at 7:25 AM Sebastien Bihorel via R-help <r-help at r-project.org<mailto:r-help at r-project.org>> wrote:
Hi

I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:

L = intercept + emax * x / (EC50+x)

Which I guess could be expressed as the following R model

~ emax*x/(ec50+x)

As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.

A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jul 28 17:30:11 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 28 Jul 2020 08:30:11 -0700
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110A8212561113EA02B600892730@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <CAGxFJbQ=Hsd6EaXHzbBKCA+9PumWmGXq1xcYdphiBAUM3m9_Lw@mail.gmail.com>
 <MN2PR19MB4110A8212561113EA02B600892730@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <CAGxFJbQnjj8ssGV=XowGkcTXm3LQXv=icoQWxTvO2Enn=q_h0g@mail.gmail.com>

You said:
"As far as I know (please, correct me if I am wrong), fitting such a model
is to not doable with glm, since the function is not linear."

My reply responded to that.

AFAIK, opinions on packages are off topic here. Try stats.stackexchange.com
for that.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 28, 2020 at 8:19 AM Sebastien Bihorel <
Sebastien.Bihorel at cognigencorp.com> wrote:

> Thank you for your subtle input, Bert... as usual!
>
> This is literally the search I conducted and spent 2 hours on before
> posting to R-help. I was asking for expert opinions, not for search engine
> FAQ!
>
> Thank anyways
>
> ------------------------------
> *From:* Bert Gunter <bgunter.4567 at gmail.com>
> *Sent:* Tuesday, July 28, 2020 11:12
> *To:* Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>
> *Cc:* r-help at r-project.org <r-help at r-project.org>
> *Subject:* Re: [R] Nonlinear logistic regression fitting
>
> Search!
> ... for "nonlinear logistic regression" at rseek.org.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Jul 28, 2020 at 7:25 AM Sebastien Bihorel via R-help <
> r-help at r-project.org> wrote:
>
> Hi
>
> I need to fit a logistic regression model using a saturable
> Michaelis-Menten function of my predictor x. The likelihood could be
> expressed as:
>
> L = intercept + emax * x / (EC50+x)
>
> Which I guess could be expressed as the following R model
>
> ~ emax*x/(ec50+x)
>
> As far as I know (please, correct me if I am wrong), fitting such a model
> is to not doable with glm, since the function is not linear.
>
> A Stackoverflow post recommends the bnlr function from the gnlm (
> https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)...
> I would be grateful for any opinion on this package or for any alternative
> recommendation of package/function.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Tue Jul 28 17:47:27 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 28 Jul 2020 15:47:27 +0000
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <CAGxFJbQnjj8ssGV=XowGkcTXm3LQXv=icoQWxTvO2Enn=q_h0g@mail.gmail.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <CAGxFJbQ=Hsd6EaXHzbBKCA+9PumWmGXq1xcYdphiBAUM3m9_Lw@mail.gmail.com>
 <MN2PR19MB4110A8212561113EA02B600892730@MN2PR19MB4110.namprd19.prod.outlook.com>,
 <CAGxFJbQnjj8ssGV=XowGkcTXm3LQXv=icoQWxTvO2Enn=q_h0g@mail.gmail.com>
Message-ID: <MN2PR19MB4110205A8ED019A37656C4F792730@MN2PR19MB4110.namprd19.prod.outlook.com>

I hardly see how your reply addressed my question or any part of it. It looks to me that it was simply assumed that I did not perform any search before posting.

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Tuesday, July 28, 2020 11:30
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Nonlinear logistic regression fitting

You said:
"As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear."

My reply responded to that.

AFAIK, opinions on packages are off topic here. Try stats.stackexchange.com<http://stats.stackexchange.com> for that.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 28, 2020 at 8:19 AM Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com<mailto:Sebastien.Bihorel at cognigencorp.com>> wrote:
Thank you for your subtle input, Bert... as usual!

This is literally the search I conducted and spent 2 hours on before posting to R-help. I was asking for expert opinions, not for search engine FAQ!

Thank anyways

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com<mailto:bgunter.4567 at gmail.com>>
Sent: Tuesday, July 28, 2020 11:12
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com<mailto:Sebastien.Bihorel at cognigencorp.com>>
Cc: r-help at r-project.org<mailto:r-help at r-project.org> <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] Nonlinear logistic regression fitting

Search!
... for "nonlinear logistic regression" at rseek.org<http://rseek.org>.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 28, 2020 at 7:25 AM Sebastien Bihorel via R-help <r-help at r-project.org<mailto:r-help at r-project.org>> wrote:
Hi

I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:

L = intercept + emax * x / (EC50+x)

Which I guess could be expressed as the following R model

~ emax*x/(ec50+x)

As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.

A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ccberry @end|ng |rom he@|th@uc@d@edu  Tue Jul 28 18:18:47 2020
From: ccberry @end|ng |rom he@|th@uc@d@edu (Berry, Charles)
Date: Tue, 28 Jul 2020 16:18:47 +0000
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110A8212561113EA02B600892730@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <CAGxFJbQ=Hsd6EaXHzbBKCA+9PumWmGXq1xcYdphiBAUM3m9_Lw@mail.gmail.com>
 <MN2PR19MB4110A8212561113EA02B600892730@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <386A2F77-D6F3-4ED7-97B9-64BFFAE99E65@health.ucsd.edu>

Did you try searching for "Michaelis" on rseek.org?

It seems like there are many hits that might be pertinent to your query. 

If none is pertinent, maybe saying  why they are not sufficient will help others see how their "expert opinions" can help you.

HTH,

Chuck

> On Jul 28, 2020, at 8:19 AM, Sebastien Bihorel via R-help <r-help at r-project.org> wrote:
> 
> Thank you for your subtle input, Bert... as usual!
> 
> This is literally the search I conducted and spent 2 hours on before posting to R-help. I was asking for expert opinions, not for search engine FAQ!
> 
> Thank anyways
> 
> ________________________________
> From: Bert Gunter <bgunter.4567 at gmail.com>
> Sent: Tuesday, July 28, 2020 11:12
> To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>
> Cc: r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] Nonlinear logistic regression fitting
> 
> Search!
> ... for "nonlinear logistic regression" at rseek.org<http://rseek.org>.
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Tue, Jul 28, 2020 at 7:25 AM Sebastien Bihorel via R-help <r-help at r-project.org<mailto:r-help at r-project.org>> wrote:
> Hi
> 
> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
> 
> L = intercept + emax * x / (EC50+x)
> 
> Which I guess could be expressed as the following R model
> 
> ~ emax*x/(ec50+x)
> 
> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.
> 
> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 


From U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de  Tue Jul 28 18:35:37 2020
From: U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de (Ulrik Stervbo)
Date: Tue, 28 Jul 2020 18:35:37 +0200
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <CAGxFJbTwEwmnF8npOiHx_RKWzidK8-mQFrhxUF_j1rk6S0XELg@mail.gmail.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <b0bda5bd-f11c-e9a8-7b0e-19ee6a766803@meddatainc.com>
 <CAGxFJbTwEwmnF8npOiHx_RKWzidK8-mQFrhxUF_j1rk6S0XELg@mail.gmail.com>
Message-ID: <b50ef26ebef881b71852a74f2ad9ec6f@ruhr-uni-bochum.de>

Would this work:

```
library(ggplot2)
library(cowplot)

p1 <- ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + 
geom_point()
p2 <- ggplot(iris, aes(x = Petal.Length, y = Petal.Width * 1000)) + 
geom_point()

plot_grid(p1, p2, ncol = 1, align = "hv", rel_heights = c(2, 1))
```

Best,
Ulrik

On 2020-07-24 21:58, Bert Gunter wrote:
> ?grid.frame, etc. should be straightforward for this I would think.
> But of course you have to resort to the underlying grid framework 
> rather
> than the ggplot2 interface.
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along 
> and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Fri, Jul 24, 2020 at 12:11 PM H <agents at meddatainc.com> wrote:
> 
>> On 07/24/2020 02:50 PM, H wrote:
>> > On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>> >> The set of people interested in helping when you supply a minimal
>> reproducible example is rather larger than the set of people willing 
>> to
>> read the documentation for you (hint) and guess what aspect of 
>> alignment
>> you are having trouble with.
>> >>
>> >> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>> >>> On 07/24/2020 01:14 PM, John Kane wrote:
>> >>>> <i>Well, I am not looking for help debugging my code but for
>> >>> information to better understand arranging plots vertically. The code
>> >>> above aligns them horizontally as expected.</i>
>> >>>> Sigh, we know the code works but we do not know what the plots are
>> >>> and we cannot play around with them to see if we can help you if we
>> >>> have nothing to work with.
>> >>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>> >>> <mailto:agents at meddatainc.com>> wrote:
>> >>>>     On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>> >>>>     > Hav a look at the packages cowplot and patchwork
>> >>>>     >
>> >>>>     >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>> >>> <mailto:agents at meddatainc.com>> wrote:
>> >>>>     >>
>> >>>>     >> I am trying to arrange two plots vertically, ie plot 2 below
>> >>> plot 1, where I want the plots to align columnwise but have a height
>> >>> ratio of eg 3:1.
>> >>>>     >>
>> >>>>     >> My attempts so far after consulting various webpages is that
>> >>> the following code aligns them columnwise correctly but I have, so far,
>> >>> failed in setting the relative heights...
>> >>>>     >>
>> >>>>     >> g2<-ggplotGrob(s)
>> >>>>     >> g3<-ggplotGrob(v)
>> >>>>     >> g<-rbind(g2, g3, size = "first")
>> >>>>     >> g$widths<-unit.pmax(g2$widths, g3$widths)
>> >>>>     >>
>> >>>>     >> what would the appropriate statement for the relative heights
>> >>> to add here be?
>> >>>>     >>
>> >>>>     >> grid.newpage()
>> >>>>     >> grid.draw(g)
>> >>>>     >>
>> >>>>     >> Thank you!
>> >>>>     >>
>> >>>>     >> ______________________________________________
>> >>>>     >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>> >>> list -- To UNSUBSCRIBE and more, see
>> >>>>     >> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>>     >> PLEASE do read the posting guide
>> >>> http://www.R-project.org/posting-guide.html
>> >>>>     >> and provide commented, minimal, self-contained, reproducible
>> >>> code.
>> >>>>     So this is not possible without using one of those two packages?
>> >>> I got the impression I should be able to use grid.arrange to do so but
>> >>> was not able to get it to work without disturbing the width alignment
>> >>> above...
>> >>>>     ______________________________________________
>> >>>>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>> >>> -- To UNSUBSCRIBE and more, see
>> >>>>     https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>>     PLEASE do read the posting guide
>> >>> http://www.R-project.org/posting-guide.html
>> >>>>     and provide commented, minimal, self-contained, reproducible
>> >>> code.
>> >>>> --
>> >>>> John Kane
>> >>>> Kingston ON Canada
>> >>> No need to play around with anything. I am simply looking for
>> >>> assistance on how to use eg arrangeGrob to not only align two plots
>> >>> columnwise but also adjust their heights relative to each other rather
>> >>> than 1:1.
>> >>>
>> >>> Can arrangeGrob() be used for that?
>> >>>
>> >>>
>> >>>     [[alternative HTML version deleted]]
>> >>>
>> >>> ______________________________________________
>> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>> PLEASE do read the posting guide
>> >>> http://www.R-project.org/posting-guide.html
>> >>> and provide commented, minimal, self-contained, reproducible code.
>> >
>> > Look at
>> https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html
>> where there are two mpg charts, one above the other. What would I need 
>> to
>> add to:
>> >
>> > |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2,
>> g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths)
>> grid.newpage() grid.draw(g) |
>> >
>> > |to make the second chart 1/2 the size of the top one?|
>> >
>> > ||
>> >
>> The following code aligns the two plot areas of the two charts 
>> perfectly
>> but they are the same height whereas I want to make the bottom one 1/2 
>> as
>> tall as the top one:
>> 
>> g2<-ggplotGrob(s)
>> g3<-ggplotGrob(v)
>> g<-rbind(g2, g3, size = "first")
>> g$widths<-unit.pmax(g2$widths, g3$widths)
>> grid.newpage()
>> grid.draw(g)
>> 
>> 
>>         [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jul 28 18:42:43 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 28 Jul 2020 17:42:43 +0100
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <6efebe59-3702-e01e-2f75-d8cea8fb9b25@sapo.pt>

Hello,

glm might not be the right tool for the MM model but nls is meant to fit 
non-linear models.
And, after an on-line search, there is also package drc, function drm.

I will use the data and examples in the links below. (The second gave me 
right, it uses nls.)


#install.packages("drc")
library(drc)

#--- data

# substrate
S <- c(0,1,2,5,8,12,30,50)

# reaction rate
v <- c(0,11.1,25.4,44.8,54.5,58.2,72.0,60.1)
kinData <- data.frame(S, v)


#--- package drc fit

# use the two parameter MM model (MM.2)
drm_fit <- drm(v ~ S, data = kinData, fct = MM.2())

#--- nls fit
MMcurve <- formula(v ~ Vmax*S/(Km + S))
nls_fit <- nls(MMcurve, kinData, start = list(Vmax = 50, Km = 2))

coef(drm_fit)
coef(nls_fit)

#--- plot

SconcRange <- seq(0, 50, 0.1)
nls_Line <- predict(nls_fit, list(S = SconcRange))

plot(drm_fit, log = '', pch = 17, col = "red", main = "Fitted MM curve")
lines(SconcRange, nls_Line, col = "blue", lty = "dotted")


[1] 
https://davetang.org/muse/2013/05/17/fitting-a-michaelis-mentens-curve-using/
[2] 
http://rforbiochemists.blogspot.com/2015/05/plotting-and-fitting-enzymology-data.html


Hope this helps,

Rui Barradas

?s 15:13 de 28/07/2020, Sebastien Bihorel via R-help escreveu:
> Hi
>
> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
>
> L = intercept + emax * x / (EC50+x)
>
> Which I guess could be expressed as the following R model
>
> ~ emax*x/(ec50+x)
>
> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.
>
> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Tue Jul 28 18:59:57 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Tue, 28 Jul 2020 16:59:57 +0000
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <6efebe59-3702-e01e-2f75-d8cea8fb9b25@sapo.pt>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>,
 <6efebe59-3702-e01e-2f75-d8cea8fb9b25@sapo.pt>
Message-ID: <MN2PR19MB41106B7B5191368D96AE217C92730@MN2PR19MB4110.namprd19.prod.outlook.com>

Hi Rui,

Thanks for your input.

In my analysis, the MM model is not intended to fit continuous data but must be used within a logistic regression model of binary data. So, while useful in itself, the suggested example does not exactly apply.

I appreciate your time

________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Tuesday, July 28, 2020 12:42
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Nonlinear logistic regression fitting

Hello,

glm might not be the right tool for the MM model but nls is meant to fit
non-linear models.
And, after an on-line search, there is also package drc, function drm.

I will use the data and examples in the links below. (The second gave me
right, it uses nls.)


#install.packages("drc")
library(drc)

#--- data

# substrate
S <- c(0,1,2,5,8,12,30,50)

# reaction rate
v <- c(0,11.1,25.4,44.8,54.5,58.2,72.0,60.1)
kinData <- data.frame(S, v)


#--- package drc fit

# use the two parameter MM model (MM.2)
drm_fit <- drm(v ~ S, data = kinData, fct = MM.2())

#--- nls fit
MMcurve <- formula(v ~ Vmax*S/(Km + S))
nls_fit <- nls(MMcurve, kinData, start = list(Vmax = 50, Km = 2))

coef(drm_fit)
coef(nls_fit)

#--- plot

SconcRange <- seq(0, 50, 0.1)
nls_Line <- predict(nls_fit, list(S = SconcRange))

plot(drm_fit, log = '', pch = 17, col = "red", main = "Fitted MM curve")
lines(SconcRange, nls_Line, col = "blue", lty = "dotted")


[1]
https://davetang.org/muse/2013/05/17/fitting-a-michaelis-mentens-curve-using/
[2]
http://rforbiochemists.blogspot.com/2015/05/plotting-and-fitting-enzymology-data.html


Hope this helps,

Rui Barradas

?s 15:13 de 28/07/2020, Sebastien Bihorel via R-help escreveu:
> Hi
>
> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
>
> L = intercept + emax * x / (EC50+x)
>
> Which I guess could be expressed as the following R model
>
> ~ emax*x/(ec50+x)
>
> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.
>
> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


--
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jul 28 19:04:49 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 28 Jul 2020 18:04:49 +0100
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB41106B7B5191368D96AE217C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <6efebe59-3702-e01e-2f75-d8cea8fb9b25@sapo.pt>
 <MN2PR19MB41106B7B5191368D96AE217C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <5bd6278c-57ac-18ce-e4c5-33ee689867ce@sapo.pt>

Hello,

Glad it can be of help.
Post example data then, like this it's rather difficult to answer 
accurately.

Rui Barradas

?s 17:59 de 28/07/2020, Sebastien Bihorel escreveu:
> Hi Rui,
>
> Thanks for your input.
>
> In my analysis, the MM model is not intended to fit continuous data 
> but must be used within a logistic regression model of binary data. 
> So, while useful in itself, the suggested example does not exactly apply.
>
> I appreciate your time
>
> ------------------------------------------------------------------------
> *From:* Rui Barradas <ruipbarradas at sapo.pt>
> *Sent:* Tuesday, July 28, 2020 12:42
> *To:* Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; 
> r-help at r-project.org <r-help at r-project.org>
> *Subject:* Re: [R] Nonlinear logistic regression fitting
> Hello,
>
> glm might not be the right tool for the MM model but nls is meant to fit
> non-linear models.
> And, after an on-line search, there is also package drc, function drm.
>
> I will use the data and examples in the links below. (The second gave me
> right, it uses nls.)
>
>
> #install.packages("drc")
> library(drc)
>
> #--- data
>
> # substrate
> S <- c(0,1,2,5,8,12,30,50)
>
> # reaction rate
> v <- c(0,11.1,25.4,44.8,54.5,58.2,72.0,60.1)
> kinData <- data.frame(S, v)
>
>
> #--- package drc fit
>
> # use the two parameter MM model (MM.2)
> drm_fit <- drm(v ~ S, data = kinData, fct = MM.2())
>
> #--- nls fit
> MMcurve <- formula(v ~ Vmax*S/(Km + S))
> nls_fit <- nls(MMcurve, kinData, start = list(Vmax = 50, Km = 2))
>
> coef(drm_fit)
> coef(nls_fit)
>
> #--- plot
>
> SconcRange <- seq(0, 50, 0.1)
> nls_Line <- predict(nls_fit, list(S = SconcRange))
>
> plot(drm_fit, log = '', pch = 17, col = "red", main = "Fitted MM curve")
> lines(SconcRange, nls_Line, col = "blue", lty = "dotted")
>
>
> [1]
> https://davetang.org/muse/2013/05/17/fitting-a-michaelis-mentens-curve-using/
> [2]
> http://rforbiochemists.blogspot.com/2015/05/plotting-and-fitting-enzymology-data.html
>
>
> Hope this helps,
>
> Rui Barradas
>
> ?s 15:13 de 28/07/2020, Sebastien Bihorel via R-help escreveu:
> > Hi
> >
> > I need to fit a logistic regression model using a saturable 
> Michaelis-Menten function of my predictor x. The likelihood could be 
> expressed as:
> >
> > L = intercept + emax * x / (EC50+x)
> >
> > Which I guess could be expressed as the following R model
> >
> > ~ emax*x/(ec50+x)
> >
> > As far as I know (please, correct me if I am wrong), fitting such a 
> model is to not doable with glm, since the function is not linear.
> >
> > A Stackoverflow post recommends the bnlr function from the gnlm 
> (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... 
> I would be grateful for any opinion on this package or for any 
> alternative recommendation of package/function.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
> > and provide commented, minimal, self-contained, reproducible code.
>
>
> -- 
> Este e-mail foi verificado em termos de v?rus pelo software antiv?rus 
> Avast.
> https://www.avast.com/antivirus
>



-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Tue Jul 28 19:04:53 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 28 Jul 2020 19:04:53 +0200
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <20200728170453.GC4317@posteo.no>

Dear Sebastien,

On 2020-07-28 14:13 +0000, Sebastien Bihorel wrote:
| Hi 
| 
| I need to fit a logistic regression 
| model using a saturable 
| Michaelis-Menten function of my 
| predictor x. The likelihood could be 
| expressed as:
| 
| L = intercept + emax * x / (EC50+x)
| 
| Which I guess could be expressed as 
| the following R model 
| 
| ~ emax*x/(ec50+x)
| 
| As far as I know (please, correct me 
| if I am wrong), fitting such a model 
| is to not doable with glm, since the 
| function is not linear. 
| 
| A Stackoverflow post recommends the 
| bnlr function from the gnlm 
| (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... 
| I would be grateful for any opinion on 
| this package or for any alternative 
| recommendation of package/function.

I found base stats has the function 
stats::SSmicmen, also this page[1] 
mentions stats::nls ... 

I found cardioModel::cardioModel ...  
You need Google V8[3] which takes 
forever to build.

Also the emaxmodel vignette[4] might be 
useful, as it mentions both EC50 and 
Emax.

Best,
Rasmus

[1] https://dataconomy.com/2017/08/nonlinear-least-square-nonlinear-regression-r/
[2] https://www.rdocumentation.org/packages/cardioModel/versions/1.4/topics/cardioModel
[3] https://v8.dev/
[4] https://cran.r-project.org/web/packages/rstanemax/vignettes/emaxmodel.html


From pro|jcn@@h @end|ng |rom gm@||@com  Tue Jul 28 20:16:32 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Tue, 28 Jul 2020 14:16:32 -0400
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <e33372f9-1b4c-e651-1b51-097df20186fc@gmail.com>

There is a large literature on nonlinear logistic models and similar
curves. Some of it is referenced in my 2014 book Nonlinear Parameter
Optimization Using R Tools, which mentions nlxb(), now part of the
nlsr package. If useful, I could put the Bibtex refs for that somewhere.

nls() is now getting long in the tooth. It has a lot of flexibility and
great functionality, but it did very poorly on the Hobbs problem that
rather forced me to develop the codes that are 3/5ths of optim() and
also led to nlsr etc. The Hobbs problem dated from 1974, and with only
12 data points still defeats a majority of nonlinear fit programs.
nls() poops out because it has no LM stabilization and a rather weak
forward difference derivative approximation. nlsr tries to generate
analytic derivatives, which often help when things are very badly scaled.

Another posting suggests an example problem i.e., some data and a
model, though you also need the loss function (e.g., Max likelihood,
weights, etc.). Do post some data and functions so we can provide more
focussed advice.

JN

On 2020-07-28 10:13 a.m., Sebastien Bihorel via R-help wrote:
> Hi 
> 
> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
> 
> L = intercept + emax * x / (EC50+x)
> 
> Which I guess could be expressed as the following R model 
> 
> ~ emax*x/(ec50+x)
> 
> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear. 
> 
> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ||@her @end|ng |rom p|e@@th@n@com  Tue Jul 28 22:20:23 2020
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Tue, 28 Jul 2020 13:20:23 -0700
Subject: [R] Removing a space from a string
Message-ID: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>

R 4.0.2
OS X

Colleagues

I have strings that contain a space in an unexpected location.  The intended string is:
	?STRING 01.  Remainder of the string"
However, variants are:
	?STR ING 01.  Remainder of the string"
	?STRIN G 01.  Remainder of the string"

I would like a general approach to deleting a space, but only if it appears before the period.  Any suggestions on a regular expression for this?

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com <http://www.plessthan.com/>





	[[alternative HTML version deleted]]


From cpoiw@rt m@iii@g oii chemo@org@uk  Tue Jul 28 22:29:27 2020
From: cpoiw@rt m@iii@g oii chemo@org@uk (cpoiw@rt m@iii@g oii chemo@org@uk)
Date: Tue, 28 Jul 2020 21:29:27 +0100
Subject: [R] Removing a space from a string
In-Reply-To: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
Message-ID: <afa4de10383729162ef4774daafc3c4c@chemo.org.uk>

On 2020-07-28 21:20, Dennis Fisher wrote:
> R 4.0.2
> OS X
> 
> Colleagues
> 
> I have strings that contain a space in an unexpected location.  The
> intended string is:
> 	?STRING 01.  Remainder of the string"
> However, variants are:
> 	?STR ING 01.  Remainder of the string"
> 	?STRIN G 01.  Remainder of the string"
> 
> I would like a general approach to deleting a space, but only if it
> appears before the period.  Any suggestions on a regular expression
> for this?

You aren't deleting the space before 0? Is that in the requirement?


From ||@her @end|ng |rom p|e@@th@n@com  Tue Jul 28 22:31:12 2020
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Tue, 28 Jul 2020 13:31:12 -0700
Subject: [R] Removing a space from a string
In-Reply-To: <afa4de10383729162ef4774daafc3c4c@chemo.org.uk>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <afa4de10383729162ef4774daafc3c4c@chemo.org.uk>
Message-ID: <4D398F77-7813-47D5-A8C3-270221ADAC75@plessthan.com>

Only the spaces in STRING.  However, if I inadvertently delete the space between STRING and NN, I can add it back in.

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com <http://www.plessthan.com/>




> On Jul 28, 2020, at 1:29 PM, cpolwart at chemo.org.uk wrote:
> 
> On 2020-07-28 21:20, Dennis Fisher wrote:
>> R 4.0.2
>> OS X
>> Colleagues
>> I have strings that contain a space in an unexpected location.  The
>> intended string is:
>> 	?STRING 01.  Remainder of the string"
>> However, variants are:
>> 	?STR ING 01.  Remainder of the string"
>> 	?STRIN G 01.  Remainder of the string"
>> I would like a general approach to deleting a space, but only if it
>> appears before the period.  Any suggestions on a regular expression
>> for this?
> 
> You aren't deleting the space before 0? Is that in the requirement?


	[[alternative HTML version deleted]]


From cpoiw@rt m@iii@g oii chemo@org@uk  Tue Jul 28 22:33:21 2020
From: cpoiw@rt m@iii@g oii chemo@org@uk (cpoiw@rt m@iii@g oii chemo@org@uk)
Date: Tue, 28 Jul 2020 21:33:21 +0100
Subject: [R] Removing a space from a string
In-Reply-To: <4D398F77-7813-47D5-A8C3-270221ADAC75@plessthan.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <afa4de10383729162ef4774daafc3c4c@chemo.org.uk>
 <4D398F77-7813-47D5-A8C3-270221ADAC75@plessthan.com>
Message-ID: <483c7fff2b09bfb4434fc8b8dfe185c7@chemo.org.uk>

On 2020-07-28 21:31, Dennis Fisher wrote:
> Only the spaces in STRING.  However, if I inadvertently delete the
> space between STRING and NN, I can add it back in.
> 

Can there only be one space in STR ING or is ST RI NG possible?


> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com [1]
> 
>> On Jul 28, 2020, at 1:29 PM, cpolwart at chemo.org.uk wrote:
>> 
>> On 2020-07-28 21:20, Dennis Fisher wrote:
>> 
>>> R 4.0.2
>>> OS X
>>> Colleagues
>>> I have strings that contain a space in an unexpected location.
>>> The
>>> intended string is:
>>> ?STRING 01.  Remainder of the string"
>>> However, variants are:
>>> ?STR ING 01.  Remainder of the string"
>>> ?STRIN G 01.  Remainder of the string"
>>> I would like a general approach to deleting a space, but only if
>>> it
>>> appears before the period.  Any suggestions on a regular
>>> expression
>>> for this?
>> 
>> You aren't deleting the space before 0? Is that in the requirement?
> 
> 
> 
> Links:
> ------
> [1] http://www.plessthan.com/


From ||@her @end|ng |rom p|e@@th@n@com  Tue Jul 28 22:34:25 2020
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Tue, 28 Jul 2020 13:34:25 -0700
Subject: [R] Removing a space from a string
In-Reply-To: <afa4de10383729162ef4774daafc3c4c@chemo.org.uk>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <afa4de10383729162ef4774daafc3c4c@chemo.org.uk>
Message-ID: <39957E53-086B-4480-84BE-7FA24EE53C15@plessthan.com>

It is possible that there will be > 1 space.  But, most likely only one (i.e., a solution for one space will suffice; a solution for > 1 space would be even better)

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com <http://www.plessthan.com/>




> On Jul 28, 2020, at 1:29 PM, cpolwart at chemo.org.uk wrote:
> 
> On 2020-07-28 21:20, Dennis Fisher wrote:
>> R 4.0.2
>> OS X
>> Colleagues
>> I have strings that contain a space in an unexpected location.  The
>> intended string is:
>> 	?STRING 01.  Remainder of the string"
>> However, variants are:
>> 	?STR ING 01.  Remainder of the string"
>> 	?STRIN G 01.  Remainder of the string"
>> I would like a general approach to deleting a space, but only if it
>> appears before the period.  Any suggestions on a regular expression
>> for this?
> 
> You aren't deleting the space before 0? Is that in the requirement?


	[[alternative HTML version deleted]]


From herd_dog @end|ng |rom cox@net  Tue Jul 28 22:45:57 2020
From: herd_dog @end|ng |rom cox@net (Philip)
Date: Tue, 28 Jul 2020 13:45:57 -0700
Subject: [R] rNOMADS Package
Message-ID: <195C5070308545DFAB45BC6AA2C811D8@OWNERPC>

Don?t know if anyone out there can help me since the rNOMADS package is so specialized and it requires a download of wgrib2 software from NOAA ? National Oceanographic and Atmospheric Administration.
tion.

Is there a way to grab multiple forecasts with the ReadGrib function (page 33 of the documentation).  I?m trying to get  the rapid update forecast (RAP) on the 13 km scale


    RAPOut <- CrawlModels(abbrev = "rap", depth = 1)

    RAPParameters <- ParseModelPage(RAPOut[1])

    RAPPred <- RAPParameters$pred[grep("t12z", RAPParameters$pred)]#12 Zulu is 5 am in Phoenix

    RAPPred2 <- RAPPred[grep(c("awp130"), RAPPred)] #picks out 13 km forecasts

    RAPPred3 <- RAPPred2[grep(c("pgrbf00|pgrbf01"),RAPPred2)] #Forecast for 12 Z and 13 Z          

    levels <- c("800 mb")
    variables <- c("TMP")             

    RAPInfo <- GribGrab(RAPOut[1], RAPPred3, levels, variables) #Everything works perfectly to this point.  The two requested forecasts are listed below.  As you can see [[1]] is for 12 Z and [[2]] is for 13 Z ? red in 18 point type.

RAPInfo
[[1]]
[[1]]$file.name
[1] "C:\\Users\\Owner\\Documents\\Ballooning\\WeatherBriefing/rap.t12z.awp130pgrbf00.grib2.grb"

[[1]]$url
[1] "https://nomads.ncep.noaa.gov/cgi-bin/filter_rap.pl?file=rap.t12z.awp130pgrbf00.grib2&lev_800_mb=on&var_TMP=on&dir=%2Frap.20200728"


[[2]]
[[2]]$file.name
[1] "C:\\Users\\Owner\\Documents\\Ballooning\\WeatherBriefing/rap.t12z.awp130pgrbf01.grib2.grb"

[[2]]$url
[1] "https://nomads.ncep.noaa.gov/cgi-bin/filter_rap.pl?file=rap.t12z.awp130pgrbf01.grib2&lev_800_mb=on&var_TMP=on&dir=%2Frap.20200728"


RAPData <- ReadGrib(RAPInfo[[2]]$file.name, levels, variables,
                    domain=c(-113.20,-112.78,33.70,33.40), #an area west of Phoenix
                    domain.type="latlon",
                    file.type="grib2")

I can grab the 12 Z forecast with [[1]] in the first line above or the 13 Z forecast if I enter [[2]].  But is there a way to get both at t he same time?

Thanks,
Philip Heinrich
	[[alternative HTML version deleted]]


From cpoiw@rt m@iii@g oii chemo@org@uk  Tue Jul 28 22:48:07 2020
From: cpoiw@rt m@iii@g oii chemo@org@uk (cpoiw@rt m@iii@g oii chemo@org@uk)
Date: Tue, 28 Jul 2020 21:48:07 +0100
Subject: [R] Removing a space from a string
In-Reply-To: <39957E53-086B-4480-84BE-7FA24EE53C15@plessthan.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <afa4de10383729162ef4774daafc3c4c@chemo.org.uk>
 <39957E53-086B-4480-84BE-7FA24EE53C15@plessthan.com>
Message-ID: <1a3c25ba33f62661c8f120902cd3100d@chemo.org.uk>

This RegEx would do it I think:  \s(?=.*\s\d*\.)

Looks for space - \s
Before any strings followed by space, numbers, period

text <- "STR ING 01.  Remainder of the string"

stringr::str_replace_all(text, "\\s(?=.*\\s\\d*\\.)", "")

Should do it I think!

On 2020-07-28 21:34, Dennis Fisher wrote:
> It is possible that there will be > 1 space.  But, most likely only
> one (i.e., a solution for one space will suffice; a solution for > 1
> space would be even better)
> 
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com [1]
> 
>> On Jul 28, 2020, at 1:29 PM, cpolwart at chemo.org.uk wrote:
>> 
>> On 2020-07-28 21:20, Dennis Fisher wrote:
>> 
>>> R 4.0.2
>>> OS X
>>> Colleagues
>>> I have strings that contain a space in an unexpected location.
>>> The
>>> intended string is:
>>> ?STRING 01.  Remainder of the string"
>>> However, variants are:
>>> ?STR ING 01.  Remainder of the string"
>>> ?STRIN G 01.  Remainder of the string"
>>> I would like a general approach to deleting a space, but only if
>>> it
>>> appears before the period.  Any suggestions on a regular
>>> expression
>>> for this?
>> 
>> You aren't deleting the space before 0? Is that in the requirement?
> 
> 
> 
> Links:
> ------
> [1] http://www.plessthan.com/


From jr@| @end|ng |rom po@teo@no  Tue Jul 28 23:00:51 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 28 Jul 2020 23:00:51 +0200
Subject: [R] Removing a space from a string
In-Reply-To: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
Message-ID: <20200728210051.GD4317@posteo.no>

Dear Dennis,

On 2020-07-28 13:20 -0700, Dennis Fisher wrote:
| Colleagues
| 
| I have strings that contain a space in 
| an unexpected location.  The intended 
| string is:
| 	?STRING 01.  Remainder of the string"
| However, variants are:
| 	?STR ING 01.  Remainder of the string"
| 	?STRIN G 01.  Remainder of the string"
| 
| I would like a general approach to 
| deleting a space, but only if it 
| appears before the period.  Any 
| suggestions on a regular expression 
| for this?

Perhaps by using gregexpr to look for 
dots, remove spaces from the substring until the first 
finding, then pasting it back.

	strings <- 
	c("STRING 01.  Remainder of the string.",
	  "STR ING 01.  Remainder of the string.",
	  "STRIN G 01.  Remainder of the string.")
	
	search <- gregexpr("\\.", strings)
	lens <- nchar(strings)
	FUN <- function(i, strings, search, lens) {
	  before.dot <- substr(strings[i], 1, search[[i]][1])
	  before.dot <- gsub(" ", "", before.dot)
	  after.dot <- substr(strings[i], search[[i]][1]+1, lens[i])
	  return(paste0(before.dot, after.dot))
	}
	simplify2array(parallel::mclapply(
	  X=1:length(strings),
	  FUN=FUN,
	  strings=strings,
	  search=search,
	  lens=lens))

yields

	[1] "STRING01.  Remainder of the string."
	[2] "STRING01.  Remainder of the string."
	[3] "STRING01.  Remainder of the string."

Yes, I know, the space just before 01 
also disappears ... 

Best,
Rasmus


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Jul 28 23:26:36 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 28 Jul 2020 14:26:36 -0700
Subject: [R] rNOMADS Package
In-Reply-To: <195C5070308545DFAB45BC6AA2C811D8@OWNERPC>
References: <195C5070308545DFAB45BC6AA2C811D8@OWNERPC>
Message-ID: <AB5B666F-3DDE-4992-8ADA-E8256991336E@noaa.gov>

When you start rNOMADS it says:

> Welcome to rNOMADS 2.4.2 "Pandaemonium Fortress"!
> Questions? Follow @rNOMADS_r on Twitter or send a message to rnomads-user at lists.r-forge.r-project.org
> 

Likely to get much more knowledgeable answers there.

-Roy

> On Jul 28, 2020, at 1:45 PM, Philip <herd_dog at cox.net> wrote:
> 
> Don?t know if anyone out there can help me since the rNOMADS package is so specialized and it requires a download of wgrib2 software from NOAA ? National Oceanographic and Atmospheric Administration.
> tion.
> 
> Is there a way to grab multiple forecasts with the ReadGrib function (page 33 of the documentation).  I?m trying to get  the rapid update forecast (RAP) on the 13 km scale
> 
> 
>    RAPOut <- CrawlModels(abbrev = "rap", depth = 1)
> 
>    RAPParameters <- ParseModelPage(RAPOut[1])
> 
>    RAPPred <- RAPParameters$pred[grep("t12z", RAPParameters$pred)]#12 Zulu is 5 am in Phoenix
> 
>    RAPPred2 <- RAPPred[grep(c("awp130"), RAPPred)] #picks out 13 km forecasts
> 
>    RAPPred3 <- RAPPred2[grep(c("pgrbf00|pgrbf01"),RAPPred2)] #Forecast for 12 Z and 13 Z          
> 
>    levels <- c("800 mb")
>    variables <- c("TMP")             
> 
>    RAPInfo <- GribGrab(RAPOut[1], RAPPred3, levels, variables) #Everything works perfectly to this point.  The two requested forecasts are listed below.  As you can see [[1]] is for 12 Z and [[2]] is for 13 Z ? red in 18 point type.
> 
> RAPInfo
> [[1]]
> [[1]]$file.name
> [1] "C:\\Users\\Owner\\Documents\\Ballooning\\WeatherBriefing/rap.t12z.awp130pgrbf00.grib2.grb"
> 
> [[1]]$url
> [1] "https://nomads.ncep.noaa.gov/cgi-bin/filter_rap.pl?file=rap.t12z.awp130pgrbf00.grib2&lev_800_mb=on&var_TMP=on&dir=%2Frap.20200728"
> 
> 
> [[2]]
> [[2]]$file.name
> [1] "C:\\Users\\Owner\\Documents\\Ballooning\\WeatherBriefing/rap.t12z.awp130pgrbf01.grib2.grb"
> 
> [[2]]$url
> [1] "https://nomads.ncep.noaa.gov/cgi-bin/filter_rap.pl?file=rap.t12z.awp130pgrbf01.grib2&lev_800_mb=on&var_TMP=on&dir=%2Frap.20200728"
> 
> 
> RAPData <- ReadGrib(RAPInfo[[2]]$file.name, levels, variables,
>                    domain=c(-113.20,-112.78,33.70,33.40), #an area west of Phoenix
>                    domain.type="latlon",
>                    file.type="grib2")
> 
> I can grab the 12 Z forecast with [[1]] in the first line above or the 13 Z forecast if I enter [[2]].  But is there a way to get both at t he same time?
> 
> Thanks,
> Philip Heinrich
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From jr@| @end|ng |rom po@teo@no  Tue Jul 28 23:25:14 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Tue, 28 Jul 2020 23:25:14 +0200
Subject: [R] Removing a space from a string
In-Reply-To: <20200728210051.GD4317@posteo.no>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <20200728210051.GD4317@posteo.no>
Message-ID: <20200728212514.GA184657@posteo.no>

On 2020-07-28 23:00 +0200, Rasmus Liland wrote:
| 
| Perhaps by using gregexpr to look for 
| dots, remove spaces from the substring until the first 
| finding, then pasting it back.
| 
| 	strings <- 
| 	c("STRING 01.  Remainder of the string.",
| 	  "STR ING 01.  Remainder of the string.",
| 	  "STRIN G 01.  Remainder of the string.")
| 	
| 	search <- gregexpr("\\.", strings)
| 	lens <- nchar(strings)
| 	FUN <- function(i, strings, search, lens) {
| 	  before.dot <- substr(strings[i], 1, search[[i]][1])
| 	  before.dot <- gsub(" ", "", before.dot)
| 	  after.dot <- substr(strings[i], search[[i]][1]+1, lens[i])
| 	  return(paste0(before.dot, after.dot))
| 	}
| 	simplify2array(parallel::mclapply(
| 	  X=1:length(strings),
| 	  FUN=FUN,
| 	  strings=strings,
| 	  search=search,
| 	  lens=lens))
| 
| yields
| 
| 	[1] "STRING01.  Remainder of the string."
| 	[2] "STRING01.  Remainder of the string."
| 	[3] "STRING01.  Remainder of the string."
| 
| Yes, I know, the space just before 01 
| also disappears ... 

I forgot about regexpr ... this is 
simpler I think:

	strings <- 
	c("STRING 01.  Remainder of the string.",
	  "STR ING 01.  Remainder of the string.",
	  "STRIN G 01.  Remainder of the string.")
	
	search <- regexpr("...\\.", strings)  # search for the first dot and three chars in front of it
	ml <- attr(search, "match.length")
	paste0(
	  gsub(" ", "", substr(strings, 1, search)),
	  substr(strings, search, search+ml-1),
	  substr(strings, search+ml, nchar(strings))
	)

/Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200728/59f0f2f3/attachment.sig>

From bgunter@4567 @end|ng |rom gm@||@com  Tue Jul 28 23:53:31 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 28 Jul 2020 14:53:31 -0700
Subject: [R] Removing a space from a string
In-Reply-To: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
Message-ID: <CAGxFJbQgJyKg+LDCs1YKqo5fTub8U-95CKuSVGHeegQhosw0cg@mail.gmail.com>

1. Thanks for the nice reprex.
2. However, I thought there was still a bit of ambiguity. I interpreted
your specification to mean: "any number of spaces could occur in the
beginning alphabetic part of the strings before one or more digits occur
followed by a '.' (a period) and then more stuff after."
3. My strategy was simply to split the strings into the first part
consisting of the alphabetic characters and spaces and the second part with
the numbers and everything else. Then I just removed the spaces in the
first part. You can then concatenate them together again (using paste())
however you like. Thus

 >x
[1] "STRING 01.  Remainder of the string"  "STR ING 01.  Remainder of the
string"
[3] "STRIN G 01.  Remainder of the string"
> p1 <-gsub(" ","",gsub("([^[:digit:]]+)[[:digit:]]+\\..*$","\\1",x))
> p2 <- gsub("[^[:digit:]]+([[:digit:]]+\\..*$)","\\1",x)
> p1
[1] "STRING" "STRING" "STRING"
> p2
[1] "01.  Remainder of the string" "01.  Remainder of the string"
[3] "01.  Remainder of the string"

I look forward to better approaches using basic regex's (no additional
packages), however.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 28, 2020 at 1:20 PM Dennis Fisher <fisher at plessthan.com> wrote:

> R 4.0.2
> OS X
>
> Colleagues
>
> I have strings that contain a space in an unexpected location.  The
> intended string is:
>         ?STRING 01.  Remainder of the string"
> However, variants are:
>         ?STR ING 01.  Remainder of the string"
>         ?STRIN G 01.  Remainder of the string"
>
> I would like a general approach to deleting a space, but only if it
> appears before the period.  Any suggestions on a regular expression for
> this?
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com <http://www.plessthan.com/>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jul 29 02:06:02 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 28 Jul 2020 17:06:02 -0700
Subject: [R] Removing a space from a string
In-Reply-To: <CAGxFJbQgJyKg+LDCs1YKqo5fTub8U-95CKuSVGHeegQhosw0cg@mail.gmail.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <CAGxFJbQgJyKg+LDCs1YKqo5fTub8U-95CKuSVGHeegQhosw0cg@mail.gmail.com>
Message-ID: <CAGxFJbTN4+V1wB5CTyvdBVLH=dACwA4bZOXyNJeA9VK3Jt28vQ@mail.gmail.com>

Note that my previous strategy can be expressed slightly more clearly as:

x <- c("STRING 01.  Remainder of the string",
"STR ING 01.  Remainder of the string",
"STRIN G 01.  Remainder of the string",
"STR  IN G 01.  Remainder of the string") ## more spaces in this last
example entry

rx <- "([^[:digit:]]+)([[:digit:]]+.+)"

> gsub(" ","",gsub(rx,"\\1",x))
[1] "STRING" "STRING" "STRING" "STRING"

> gsub(rx,"\\2",x)
[1] "01.  Remainder of the string" "01.  Remainder of the string"
[3] "01.  Remainder of the string" "01.  Remainder of the string"

Bert Gunter




On Tue, Jul 28, 2020 at 2:53 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> 1. Thanks for the nice reprex.
> 2. However, I thought there was still a bit of ambiguity. I interpreted
> your specification to mean: "any number of spaces could occur in the
> beginning alphabetic part of the strings before one or more digits occur
> followed by a '.' (a period) and then more stuff after."
> 3. My strategy was simply to split the strings into the first part
> consisting of the alphabetic characters and spaces and the second part with
> the numbers and everything else. Then I just removed the spaces in the
> first part. You can then concatenate them together again (using paste())
> however you like. Thus
>
>  >x
> [1] "STRING 01.  Remainder of the string"  "STR ING 01.  Remainder of the
> string"
> [3] "STRIN G 01.  Remainder of the string"
> > p1 <-gsub(" ","",gsub("([^[:digit:]]+)[[:digit:]]+\\..*$","\\1",x))
> > p2 <- gsub("[^[:digit:]]+([[:digit:]]+\\..*$)","\\1",x)
> > p1
> [1] "STRING" "STRING" "STRING"
> > p2
> [1] "01.  Remainder of the string" "01.  Remainder of the string"
> [3] "01.  Remainder of the string"
>
> I look forward to better approaches using basic regex's (no additional
> packages), however.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Jul 28, 2020 at 1:20 PM Dennis Fisher <fisher at plessthan.com>
> wrote:
>
>> R 4.0.2
>> OS X
>>
>> Colleagues
>>
>> I have strings that contain a space in an unexpected location.  The
>> intended string is:
>>         ?STRING 01.  Remainder of the string"
>> However, variants are:
>>         ?STR ING 01.  Remainder of the string"
>>         ?STRIN G 01.  Remainder of the string"
>>
>> I would like a general approach to deleting a space, but only if it
>> appears before the period.  Any suggestions on a regular expression for
>> this?
>>
>> Dennis
>>
>> Dennis Fisher MD
>> P < (The "P Less Than" Company)
>> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>> www.PLessThan.com <http://www.plessthan.com/>
>>
>>
>>
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Wed Jul 29 02:11:11 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 29 Jul 2020 12:11:11 +1200
Subject: [R] Removing a space from a string
In-Reply-To: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
Message-ID: <CABcYAdJ89cHbtkxzX-AmOAErfAssMFAnqejwZ4jWcenNkE0M5w@mail.gmail.com>

The first response has to be "how did the spaces get there
in the first place?"  Can you fix the process that creates
the data?  If the process sometimes generates one extra
space, are you sure it never generates two?

But let's treat this purely as a regular expression
problem, where if there is a space before a dot you want
to delete the first.  In vi(1) you would do

s/^\([^  .]*\) \([^.]*\)/\1\2/

but apparently there is *supposed* to be a space before
the 01, so it is only when there are two or more spaces
that one should be deleted, so we'd want

s/^\([^  .]*\) \([^ .]* \)/\1\2/

I leave converting that to R as an exercise for the reader.




On Wed, 29 Jul 2020 at 08:20, Dennis Fisher <fisher at plessthan.com> wrote:

> R 4.0.2
> OS X
>
> Colleagues
>
> I have strings that contain a space in an unexpected location.  The
> intended string is:
>         ?STRING 01.  Remainder of the string"
> However, variants are:
>         ?STR ING 01.  Remainder of the string"
>         ?STRIN G 01.  Remainder of the string"
>
> I would like a general approach to deleting a space, but only if it
> appears before the period.  Any suggestions on a regular expression for
> this?
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com <http://www.plessthan.com/>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ||@her @end|ng |rom p|e@@th@n@com  Wed Jul 29 02:19:05 2020
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Tue, 28 Jul 2020 17:19:05 -0700
Subject: [R] Removing a space from a string
In-Reply-To: <CABcYAdJ89cHbtkxzX-AmOAErfAssMFAnqejwZ4jWcenNkE0M5w@mail.gmail.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <CABcYAdJ89cHbtkxzX-AmOAErfAssMFAnqejwZ4jWcenNkE0M5w@mail.gmail.com>
Message-ID: <65554499-8A95-4669-994D-20F2A47C221F@plessthan.com>

Richard

In reply to your ?first response?, the text was originally in a Word document and it did NOT contain the errant spaces.  I used read_docx in the textreadr package to access the text.  The spaces were added during that step.  I am copying the maintainer of that package to see if he has any idea as to the source.

Thanks for your regular expression suggestion.

Dennis


Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com <http://www.plessthan.com/>




> On Jul 28, 2020, at 5:11 PM, Richard O'Keefe <raoknz at gmail.com> wrote:
> 
> The first response has to be "how did the spaces get there
> in the first place?"  Can you fix the process that creates
> the data?  If the process sometimes generates one extra
> space, are you sure it never generates two?
> 
> But let's treat this purely as a regular expression
> problem, where if there is a space before a dot you want
> to delete the first.  In vi(1) you would do
> 
> s/^\([^  .]*\) \([^.]*\)/\1\2/
> 
> but apparently there is *supposed* to be a space before
> the 01, so it is only when there are two or more spaces
> that one should be deleted, so we'd want
> 
> s/^\([^  .]*\) \([^ .]* \)/\1\2/
> 
> I leave converting that to R as an exercise for the reader.
> 
> 
> 
> 
> On Wed, 29 Jul 2020 at 08:20, Dennis Fisher <fisher at plessthan.com <mailto:fisher at plessthan.com>> wrote:
> R 4.0.2
> OS X
> 
> Colleagues
> 
> I have strings that contain a space in an unexpected location.  The intended string is:
>         ?STRING 01.  Remainder of the string"
> However, variants are:
>         ?STR ING 01.  Remainder of the string"
>         ?STRIN G 01.  Remainder of the string"
> 
> I would like a general approach to deleting a space, but only if it appears before the period.  Any suggestions on a regular expression for this?
> 
> Dennis
> 
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com <http://www.plessthan.com/> <http://www.plessthan.com/ <http://www.plessthan.com/>>
> 
> 
> 
> 
> 
>         [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html <http://www.r-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From @gent@ @end|ng |rom medd@t@|nc@com  Wed Jul 29 02:32:34 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Tue, 28 Jul 2020 20:32:34 -0400
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <b50ef26ebef881b71852a74f2ad9ec6f@ruhr-uni-bochum.de>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <b0bda5bd-f11c-e9a8-7b0e-19ee6a766803@meddatainc.com>
 <CAGxFJbTwEwmnF8npOiHx_RKWzidK8-mQFrhxUF_j1rk6S0XELg@mail.gmail.com>
 <b50ef26ebef881b71852a74f2ad9ec6f@ruhr-uni-bochum.de>
Message-ID: <7b80a060-b41a-771b-1f9f-d0ee4d85ca7c@meddatainc.com>

On 07/28/2020 12:35 PM, Ulrik Stervbo wrote:
> Would this work:
>
> ```
> library(ggplot2)
> library(cowplot)
>
> p1 <- ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) + geom_point()
> p2 <- ggplot(iris, aes(x = Petal.Length, y = Petal.Width * 1000)) + geom_point()
>
> plot_grid(p1, p2, ncol = 1, align = "hv", rel_heights = c(2, 1))
> ```
>
> Best,
> Ulrik
>
> On 2020-07-24 21:58, Bert Gunter wrote:
>> ?grid.frame, etc. should be straightforward for this I would think.
>> But of course you have to resort to the underlying grid framework rather
>> than the ggplot2 interface.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Fri, Jul 24, 2020 at 12:11 PM H <agents at meddatainc.com> wrote:
>>
>>> On 07/24/2020 02:50 PM, H wrote:
>>> > On 07/24/2020 02:03 PM, Jeff Newmiller wrote:
>>> >> The set of people interested in helping when you supply a minimal
>>> reproducible example is rather larger than the set of people willing to
>>> read the documentation for you (hint) and guess what aspect of alignment
>>> you are having trouble with.
>>> >>
>>> >> On July 24, 2020 10:46:57 AM PDT, H <agents at meddatainc.com> wrote:
>>> >>> On 07/24/2020 01:14 PM, John Kane wrote:
>>> >>>> <i>Well, I am not looking for help debugging my code but for
>>> >>> information to better understand arranging plots vertically. The code
>>> >>> above aligns them horizontally as expected.</i>
>>> >>>> Sigh, we know the code works but we do not know what the plots are
>>> >>> and we cannot play around with them to see if we can help you if we
>>> >>> have nothing to work with.
>>> >>>> On Fri, 24 Jul 2020 at 12:12, H <agents at meddatainc.com
>>> >>> <mailto:agents at meddatainc.com>> wrote:
>>> >>>>???? On 07/24/2020 05:29 AM, Erich Subscriptions wrote:
>>> >>>>???? > Hav a look at the packages cowplot and patchwork
>>> >>>>???? >
>>> >>>>???? >> On 24.07.2020, at 02:36, H <agents at meddatainc.com
>>> >>> <mailto:agents at meddatainc.com>> wrote:
>>> >>>>???? >>
>>> >>>>???? >> I am trying to arrange two plots vertically, ie plot 2 below
>>> >>> plot 1, where I want the plots to align columnwise but have a height
>>> >>> ratio of eg 3:1.
>>> >>>>???? >>
>>> >>>>???? >> My attempts so far after consulting various webpages is that
>>> >>> the following code aligns them columnwise correctly but I have, so far,
>>> >>> failed in setting the relative heights...
>>> >>>>???? >>
>>> >>>>???? >> g2<-ggplotGrob(s)
>>> >>>>???? >> g3<-ggplotGrob(v)
>>> >>>>???? >> g<-rbind(g2, g3, size = "first")
>>> >>>>???? >> g$widths<-unit.pmax(g2$widths, g3$widths)
>>> >>>>???? >>
>>> >>>>???? >> what would the appropriate statement for the relative heights
>>> >>> to add here be?
>>> >>>>???? >>
>>> >>>>???? >> grid.newpage()
>>> >>>>???? >> grid.draw(g)
>>> >>>>???? >>
>>> >>>>???? >> Thank you!
>>> >>>>???? >>
>>> >>>>???? >> ______________________________________________
>>> >>>>???? >> R-help at r-project.org <mailto:R-help at r-project.org> mailing
>>> >>> list -- To UNSUBSCRIBE and more, see
>>> >>>>???? >> https://stat.ethz.ch/mailman/listinfo/r-help
>>> >>>>???? >> PLEASE do read the posting guide
>>> >>> http://www.R-project.org/posting-guide.html
>>> >>>>???? >> and provide commented, minimal, self-contained, reproducible
>>> >>> code.
>>> >>>>???? So this is not possible without using one of those two packages?
>>> >>> I got the impression I should be able to use grid.arrange to do so but
>>> >>> was not able to get it to work without disturbing the width alignment
>>> >>> above...
>>> >>>>???? ______________________________________________
>>> >>>>???? R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>> >>> -- To UNSUBSCRIBE and more, see
>>> >>>>???? https://stat.ethz.ch/mailman/listinfo/r-help
>>> >>>>???? PLEASE do read the posting guide
>>> >>> http://www.R-project.org/posting-guide.html
>>> >>>>???? and provide commented, minimal, self-contained, reproducible
>>> >>> code.
>>> >>>> --
>>> >>>> John Kane
>>> >>>> Kingston ON Canada
>>> >>> No need to play around with anything. I am simply looking for
>>> >>> assistance on how to use eg arrangeGrob to not only align two plots
>>> >>> columnwise but also adjust their heights relative to each other rather
>>> >>> than 1:1.
>>> >>>
>>> >>> Can arrangeGrob() be used for that?
>>> >>>
>>> >>>
>>> >>>???? [[alternative HTML version deleted]]
>>> >>>
>>> >>> ______________________________________________
>>> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> >>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> >>> PLEASE do read the posting guide
>>> >>> http://www.R-project.org/posting-guide.html
>>> >>> and provide commented, minimal, self-contained, reproducible code.
>>> >
>>> > Look at
>>> https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html
>>> where there are two mpg charts, one above the other. What would I need to
>>> add to:
>>> >
>>> > |library(gtable) g2 <-ggplotGrob(p2) g3 <-ggplotGrob(p3) g <-rbind(g2,
>>> g3, size = "first") g$widths <-unit.pmax(g2$widths, g3$widths)
>>> grid.newpage() grid.draw(g) |
>>> >
>>> > |to make the second chart 1/2 the size of the top one?|
>>> >
>>> > ||
>>> >
>>> The following code aligns the two plot areas of the two charts perfectly
>>> but they are the same height whereas I want to make the bottom one 1/2 as
>>> tall as the top one:
>>>
>>> g2<-ggplotGrob(s)
>>> g3<-ggplotGrob(v)
>>> g<-rbind(g2, g3, size = "first")
>>> g$widths<-unit.pmax(g2$widths, g3$widths)
>>> grid.newpage()
>>> grid.draw(g)
>>>
>>>
>>> ??????? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

That worked nicely but then the x-axis legend on the top graph needs to be blank. My recollection of trying this a few days ago was that I was left with blank space there...

So, going back to arrangeGrob(), how would one set relative heights while maintaining aligned plot areas?


From jr@| @end|ng |rom po@teo@no  Wed Jul 29 03:41:08 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 29 Jul 2020 03:41:08 +0200
Subject: [R] Bottom posting v top posting. Was: Arranging ggplot2 objects
 with ggplotGrob()
In-Reply-To: <7b80a060-b41a-771b-1f9f-d0ee4d85ca7c@meddatainc.com>
References: <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <b0bda5bd-f11c-e9a8-7b0e-19ee6a766803@meddatainc.com>
 <CAGxFJbTwEwmnF8npOiHx_RKWzidK8-mQFrhxUF_j1rk6S0XELg@mail.gmail.com>
 <b50ef26ebef881b71852a74f2ad9ec6f@ruhr-uni-bochum.de>
 <7b80a060-b41a-771b-1f9f-d0ee4d85ca7c@meddatainc.com>
Message-ID: <20200729014108.GA194354@posteo.no>

This email thread has some seriously 
long messages in it, e.g. one is 243 
lines long (i.e. 11K of plain text for 
something which could have been the size 
of a Post-It note), and people do not 
agree if top posting or bottom posting 
is, also this mime element gets attached 
by GNU Mailman to each message

	______________________________________________
	R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
	https://stat.ethz.ch/mailman/listinfo/r-help
	PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
	and provide commented, minimal, self-contained, reproducible code.

The result is a bit hard to read.

Most email clients support threading 
these days.

Personally, like H 
<agents at meddatainc.com> here, I'm a 
bottom-posting-kind-of-guy, of course.

For those who care at all, here are some 
useful arguments:

- https://en.wikipedia.org/wiki/Posting_style
- https://mutt-users.mutt.narkive.com/L3DegcbU/bottom-posting-v-top-posting
- https://forums.freebsd.org/threads/email-posting-style.45371/
- https://www.caliburn.nl/topposting.html
- https://www.freebsd.org/doc/en/articles/mailing-list-faq/etiquette.html
- https://www.openbsd.org/mail.html

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200729/d49010bb/attachment.sig>

From r@oknz @end|ng |rom gm@||@com  Wed Jul 29 05:07:08 2020
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 29 Jul 2020 15:07:08 +1200
Subject: [R] Removing a space from a string
In-Reply-To: <65554499-8A95-4669-994D-20F2A47C221F@plessthan.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <CABcYAdJ89cHbtkxzX-AmOAErfAssMFAnqejwZ4jWcenNkE0M5w@mail.gmail.com>
 <65554499-8A95-4669-994D-20F2A47C221F@plessthan.com>
Message-ID: <CABcYAdLkKjJX7CUuyCUMHTiz9XxMkCzAS+c0VnmPAMhT9zjnhQ@mail.gmail.com>

The spaces may not have been VISIBLE in the Word document,
but that does not mean that there wasn't anything THERE.

- What happens if you open the document in Word and
  save it as plain text?
- What happens if you open the document in Word and
  save it as RTF, then read that using read_rtf?
- If you do that, what does the RTF look like?
- Was the Word document typed by hand, or did was it
  the result of some other process?

The thing is, "our troubles come not as single spies,
but as whole battalions", so I'm wondering what _else_
is going wrong in the conversion process.

	[[alternative HTML version deleted]]


From m@||||@t@ @end|ng |rom pp@|net@||  Wed Jul 29 09:11:14 2020
From: m@||||@t@ @end|ng |rom pp@|net@|| (Kimmo Elo)
Date: Wed, 29 Jul 2020 10:11:14 +0300
Subject: [R] Removing a space from a string
In-Reply-To: <65554499-8A95-4669-994D-20F2A47C221F@plessthan.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <CABcYAdJ89cHbtkxzX-AmOAErfAssMFAnqejwZ4jWcenNkE0M5w@mail.gmail.com>
 <65554499-8A95-4669-994D-20F2A47C221F@plessthan.com>
Message-ID: <6b5622cb62f7df6500f7b0c6bc829621f730cc71.camel@pp.inet.fi>

Hi!

How about this?

--- snip ---

> x <- c("STRING 01.  Remainder of the string","STR ING 01.  Remainder
of the string","STRIN G 01.  Remainder of the string","STR  IN G
01.  Remainder of the string")

> x1<-unlist(strsplit(x,"\\."))

> for (i in seq(1,length(x1),2)) { x[(i+1) %/% 2]<-paste(gsub("
","",x1[i]),x1[i+1],sep=".") }

> x
[1] "STRING01.  Remainder of the string" "STRING01.  Remainder of the
string" "STRING01.  Remainder of the string"
[4] "STRING01.  Remainder of the string"

--- snip ---

Or do I miss something?

Best,

Kimmo


ti, 2020-07-28 kello 17:19 -0700, Dennis Fisher kirjoitti:
> Richard
> 
> In reply to your ?first response?, the text was originally in a Word
> document and it did NOT contain the errant spaces.  I used read_docx
> in the textreadr package to access the text.  The spaces were added
> during that step.  I am copying the maintainer of that package to see
> if he has any idea as to the source.
> 
> Thanks for your regular expression suggestion.
> 
> Dennis
> 
> 
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com <http://www.plessthan.com/>
> 
> 
> 
> 
> > On Jul 28, 2020, at 5:11 PM, Richard O'Keefe <raoknz at gmail.com>
> > wrote:
> > 
> > The first response has to be "how did the spaces get there
> > in the first place?"  Can you fix the process that creates
> > the data?  If the process sometimes generates one extra
> > space, are you sure it never generates two?
> > 
> > But let's treat this purely as a regular expression
> > problem, where if there is a space before a dot you want
> > to delete the first.  In vi(1) you would do
> > 
> > s/^\([^  .]*\) \([^.]*\)/\1\2/
> > 
> > but apparently there is *supposed* to be a space before
> > the 01, so it is only when there are two or more spaces
> > that one should be deleted, so we'd want
> > 
> > s/^\([^  .]*\) \([^ .]* \)/\1\2/
> > 
> > I leave converting that to R as an exercise for the reader.
> > 
> > 
> > 
> > 
> > On Wed, 29 Jul 2020 at 08:20, Dennis Fisher <fisher at plessthan.com
> > <mailto:fisher at plessthan.com>> wrote:
> > R 4.0.2
> > OS X
> > 
> > Colleagues
> > 
> > I have strings that contain a space in an unexpected location.  The
> > intended string is:
> >         ?STRING 01.  Remainder of the string"
> > However, variants are:
> >         ?STR ING 01.  Remainder of the string"
> >         ?STRIN G 01.  Remainder of the string"
> > 
> > I would like a general approach to deleting a space, but only if it
> > appears before the period.  Any suggestions on a regular expression
> > for this?
> > 
> > Dennis
> > 
> > Dennis Fisher MD
> > P < (The "P Less Than" Company)
> > Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> > www.PLessThan.com <http://www.plessthan.com/> <
> > http://www.plessthan.com/ <http://www.plessthan.com/>>
> > 
> > 
> > 
> > 
> > 
> >         [[alternative HTML version deleted]]
> > 
> > ______________________________________________
> > R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> > To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help <
> > https://stat.ethz.ch/mailman/listinfo/r-help>
> > PLEASE do read the posting guide 
> > http://www.R-project.org/posting-guide.html <
> > http://www.r-project.org/posting-guide.html>
> > and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Wed Jul 29 11:31:11 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 29 Jul 2020 19:31:11 +1000
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <CAGY2U92yvAYhbBin2hb2Z8d5cWzii_9uGXysmFWnk1j-fDBybw@mail.gmail.com>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
 <24346.54660.178533.634124@stat.math.ethz.ch>
 <CAGY2U92yvAYhbBin2hb2Z8d5cWzii_9uGXysmFWnk1j-fDBybw@mail.gmail.com>
Message-ID: <CA+8X3fUXS+aSSmeXEUHX1Sn-yBwm-doH2z0tqvtXr0jjXO8-1Q@mail.gmail.com>

Hi Ritwik,
I haven't seen any further answers to your request, so I'll make a
suggestion. I don't think there is any sensible way to illustrate that
many data points on a single plot. I would try to segment the data by
machine type or similar and plot a number of plots.

Jim

On Fri, Jul 24, 2020 at 11:34 PM Ritwik Mohapatra <ritm84 at gmail.com> wrote:
>
> Hi All,
>
> These are the two codes i have used so far:-
> ggplot(df3_machine_region,aes(Region,Machine.Name)) +
>   geom_count()
> !![2nd Plot|690x375](upload://gTyYUXe6lPJXCdyvqRBtUZ8zsyL.png) [1st
> Plot|690x375](upload://bb0ux9WheqM4ViyYf3Gki6TKtlG.png)
> ggplot(df3_machine_region,aes(Region,Machine.Name)) +
>   geom_jitter(aes(colour=Region))
>
> I have to present the plot to my stakeholders,so thats why its required in
> a readable and legible way.
>
> There would be approximately 10k+ values(max) for machine and region
> combination.
>
> I have attached the output plots for your reference.Please find below a
> snapshot of data for your reference.
>
> |Machine.Name|Region|
> |0460-EPBS1.sga-res.com|Europe|
> |04821-EABS1.sga-res.com|Europe|
> |10429-EDABS1.sga-res.com|Europe|
> |1042619-ESWEBS1.sga-res.com|Europe|
> |ABE-L-98769.europe.shell.com|Americas|
> |AB-L-98769.europe.shell.com|APAC|
> |AB-L-98769.europe.shell.com|Europe|
> |ABE-L-98769.europe.shell.com (2)|Americas|
> |ABE-L-98769.europe.shell.com (2)|Europe|
> |ABE-L-98840.europe.shell.com|Americas|
> |AB-L-98840.europe.shell.com|APAC|
> |ABE-L-98840.europe.shell.com|Europe|
> |AB-L-98854.europe.shell.com|Americas|
> |ABE-L-98854.europe.shell.com|Europe|
> |ABE-L-98862.europe.shell.com|Americas|
>
> Regards,
> Ritwik
>
> On Fri, Jul 24, 2020 at 6:05 PM Martin Maechler <maechler at stat.math.ethz.ch>
> wrote:
>
> > >>>>> Ritwik Mohapatra
> > >>>>>     on Thu, 23 Jul 2020 23:41:57 +0530 writes:
> >
> >     > How to create a readable and legible plot in R with 10k+ values.I
> > have a
> >     > dataframe with 17298 records.There are two columns:Machine
> > Name(Character)
> >     > and Region(Character).So i want to create a readable plot with
> > region in x
> >     > axis and machine name in y axis.How do i do that using ggplot or any
> > other
> >     > way.Please help.
> >
> > Good answers to this question will depend very much on how many
> > 'Machine' and 'Region' levels there are.
> >
> > (and this is a case where in my opinion it'd be *MUCH* more
> >  useful to have 'factor' instead of 'character'.. if only just
> >  so
> >          str(<data>)
> > or   summary(<data>)
> >
> > would give useful/relevant information.
> >
> > --
> > One possibility for a somewhat cute plot is a  "good ole"
> > sunflower plot (base graphics, but the idea must be easily
> > transferable to grid-based graphics such as ggplot2):
> >
> >   help(sunflowerplot)
> >
> >
> > Martin Maechler
> > ETH Zurich
> >
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de  Wed Jul 29 13:34:30 2020
From: U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de (Ulrik Stervbo)
Date: Wed, 29 Jul 2020 13:34:30 +0200
Subject: [R] Arranging ggplot2 objects with ggplotGrob()
In-Reply-To: <7b80a060-b41a-771b-1f9f-d0ee4d85ca7c@meddatainc.com>
References: <e1db3e67-8665-2328-d6f2-8387ada0f527@meddatainc.com>
 <B0F79936-BC08-4A7D-BF67-6BC8D415497F@neuwirth.priv.at>
 <9e9eca18-7514-d603-9fa6-d7020a565f52@meddatainc.com>
 <CAKZQJMDjX=yqr6WkhrVLGMLp89Bmxf1Mem_b1Fp0T4zudiJn-Q@mail.gmail.com>
 <68decf71-e77d-6e1b-b36e-88ec6bf04a29@meddatainc.com>
 <CA96DB84-3FB6-41D8-8EE6-764E6CAD2B5B@dcn.davis.ca.us>
 <0a884bd3-c5bf-fe28-c699-022d99b74802@meddatainc.com>
 <b0bda5bd-f11c-e9a8-7b0e-19ee6a766803@meddatainc.com>
 <CAGxFJbTwEwmnF8npOiHx_RKWzidK8-mQFrhxUF_j1rk6S0XELg@mail.gmail.com>
 <b50ef26ebef881b71852a74f2ad9ec6f@ruhr-uni-bochum.de>
 <7b80a060-b41a-771b-1f9f-d0ee4d85ca7c@meddatainc.com>
Message-ID: <018204bcfa22f1e7b69dc884e777796c@ruhr-uni-bochum.de>

Then this should work:

```
library(ggplot2)
library(cowplot)

p1 <- ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) +  
geom_point()
p2 <- ggplot(iris, aes(x = Petal.Length, y = Petal.Width * 1000)) + 
geom_point()

plot_grid(p1, p2, ncol = 1, align = "hv", rel_heights = c(2, 1), axis = 
"t")

p1 <- p1 + theme(
   axis.text.x = element_blank(),
   axis.title.x = element_blank(),
   axis.ticks.x = element_blank()
)

plot_grid(p1, p2, ncol = 1, align = "hv", rel_heights = c(2, 1), axis = 
"t")

# You can play around with ggplot2 plot.margin to further reduce the 
space
p1 <- p1 + theme(
   plot.margin = margin(b = -6)
)

p2 <- p2 + theme(
   plot.margin = margin(t = -6)
)

plot_grid(p1, p2, ncol = 1, align = "hv", rel_heights = c(2, 1), axis = 
"t")
```

Best,
Ulrik


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Wed Jul 29 14:56:29 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Wed, 29 Jul 2020 12:56:29 +0000
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <e33372f9-1b4c-e651-1b51-097df20186fc@gmail.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>,
 <e33372f9-1b4c-e651-1b51-097df20186fc@gmail.com>
Message-ID: <MN2PR19MB4110D27D0F73A61ADE1755C892700@MN2PR19MB4110.namprd19.prod.outlook.com>

Thank your, Pr. Nash, for your perspective on the issue.

Here is an example of binary data/response (resp) that were simulated and re-estimated assuming a non linear effect of the predictor (x) on the likelihood of response. For re-estimation, I have used gnlm::bnlr for the logistic regression. The accuracy of the parameter estimates is so-so, probably due to the low number of data points (8*nx). For illustration, I have also include a glm call to an incorrect linear model of x.

#install.packages(gnlm)
#require(gnlm)
set.seed(12345)

nx <- 10
x <- c(
  rep(0, 3*nx),
  rep(c(10, 30, 100, 500, 1000), each = nx)
)
rnd <- runif(length(x))
a <- log(0.2/(1-0.2))
b <- log(0.7/(1-0.7)) - a
c <- 30
likelihood <- a + b*x/(c+x)
p <- exp(likelihood) / (1 + exp(likelihood))
resp <- ifelse(rnd <= p, 1, 0)

df <- data.frame(
  x = x,
  resp = resp,
  nresp = 1- resp
)

head(df)

# glm can only assume linear effect of x, which is the wrong model
glm_mod <- glm(
  resp~x,
  data = df,
  family = 'binomial'
)
glm_mod

# Using gnlm package, estimate a model model with just intercept, and a model with predictor effect
int_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit', mu = ~ p_a, pmu = c(a) )
emax_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit',  mu = ~ p_a + p_b*x/(p_c+x),  pmu = c(a, b, c) )

int_mod
emax_mod

________________________________
From: J C Nash <profjcnash at gmail.com>
Sent: Tuesday, July 28, 2020 14:16
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Nonlinear logistic regression fitting

There is a large literature on nonlinear logistic models and similar
curves. Some of it is referenced in my 2014 book Nonlinear Parameter
Optimization Using R Tools, which mentions nlxb(), now part of the
nlsr package. If useful, I could put the Bibtex refs for that somewhere.

nls() is now getting long in the tooth. It has a lot of flexibility and
great functionality, but it did very poorly on the Hobbs problem that
rather forced me to develop the codes that are 3/5ths of optim() and
also led to nlsr etc. The Hobbs problem dated from 1974, and with only
12 data points still defeats a majority of nonlinear fit programs.
nls() poops out because it has no LM stabilization and a rather weak
forward difference derivative approximation. nlsr tries to generate
analytic derivatives, which often help when things are very badly scaled.

Another posting suggests an example problem i.e., some data and a
model, though you also need the loss function (e.g., Max likelihood,
weights, etc.). Do post some data and functions so we can provide more
focussed advice.

JN

On 2020-07-28 10:13 a.m., Sebastien Bihorel via R-help wrote:
> Hi
>
> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
>
> L = intercept + emax * x / (EC50+x)
>
> Which I guess could be expressed as the following R model
>
> ~ emax*x/(ec50+x)
>
> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.
>
> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@p@nyo|com @end|ng |rom gm@||@com  Wed Jul 29 15:57:00 2020
From: |@p@nyo|com @end|ng |rom gm@||@com (=?UTF-8?Q?Engin_Y=C4=B1lmaz?=)
Date: Wed, 29 Jul 2020 16:57:00 +0300
Subject: [R] R Subset by Factor levels
Message-ID: <CAMUSX8pKVShYV65Y_RyGs5bbT+R1=rfxH88yPkKsxv5yC3B07w@mail.gmail.com>

Dear

I try to create a new subset from my dataframe.
My dataframe's name is m1.
"Classification Description" column has 15 different factors.
The following code is used creating a subset for 1 factor.
m2<-m1[m1$`Classification Description` == levels(m1$`Classification
Description`)[1],]

My aim is to create a subset with 4 different factors. For example,
levels(m1$`Classification Description`)[1]
levels(m1$`Classification Description`)[15]
levels(m1$`Classification Description`)[2]
levels(m1$`Classification Description`)[4]

I try to following code but it didnt work

m2<-m1[m1$`Classification Description` == levels(m1$`Classification
Description`)[c(1,15,2,4],]

How can I solve This Problem ?

Example from my dataframe

`Record Date` `Classification Description`             `Current Month
Budget Amount`
   <date>        <fct>
      <dbl>
 1 2019-06-30    Total On-Budget and Off-Budget Results:
        NA
 2 2019-06-30    Off-Budget Surplus (+) or Deficit (-)
 41998597035.
 3 2019-06-30    Total Outlays
342428650968.
 4 2019-06-30    By Other Means
51648504883.
 5 2019-06-30    On-Budget Outlays
292169836521.
 6 2019-06-30    Off-Budget Outlays
50258814447.
 7 2019-06-30    Total Receipts
 333952332514.
 8 2019-06-30    On-Budget Surplus (+) or Deficit (-)
 -50474915489.
 9 2019-06-30    Off-Budget Receipts
 92257411482
10 2019-06-30    Total On-Budget and Off-Budget Financing
 8476318454



-- 
*Sayg?lar?mla*
Engin YILMAZ

	[[alternative HTML version deleted]]


From ||@her @end|ng |rom p|e@@th@n@com  Wed Jul 29 16:28:26 2020
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Wed, 29 Jul 2020 07:28:26 -0700
Subject: [R] Removing a space from a string
In-Reply-To: <CABcYAdLkKjJX7CUuyCUMHTiz9XxMkCzAS+c0VnmPAMhT9zjnhQ@mail.gmail.com>
References: <695DC915-E4BC-4937-BF35-B86F9CAFB368@plessthan.com>
 <CABcYAdJ89cHbtkxzX-AmOAErfAssMFAnqejwZ4jWcenNkE0M5w@mail.gmail.com>
 <65554499-8A95-4669-994D-20F2A47C221F@plessthan.com>
 <CABcYAdLkKjJX7CUuyCUMHTiz9XxMkCzAS+c0VnmPAMhT9zjnhQ@mail.gmail.com>
Message-ID: <0578C62B-0A74-4BBD-BF5F-93D9CC4792CC@plessthan.com>

Richard

Per your requests:
	1.  Plain text: no spaces 
	2.  read_docx: spaces
	3.  read_rtf: no spaces
	4.  Not requested by you: copying from the Word document, then pasting into ?vim?: no spaces

The Word document was created by hand but #1, #3, and #4 confirm that it contains no spaces.  The offending entity here is textreadr:read_dicx

That addresses how the spaces arose.  But, my question was not about that ? rather I was looking for a general fix when that situation arises.

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com <http://www.plessthan.com/>




> On Jul 28, 2020, at 8:07 PM, Richard O'Keefe <raoknz at gmail.com> wrote:
> 
> The spaces may not have been VISIBLE in the Word document,
> but that does not mean that there wasn't anything THERE.
> 
> - What happens if you open the document in Word and
>   save it as plain text?
> - What happens if you open the document in Word and
>   save it as RTF, then read that using read_rtf?
> - If you do that, what does the RTF look like?
> - Was the Word document typed by hand, or did was it
>   the result of some other process?
> 
> The thing is, "our troubles come not as single spies,
> but as whole battalions", so I'm wondering what _else_
> is going wrong in the conversion process.
> 
> 


	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jul 29 16:34:39 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 29 Jul 2020 15:34:39 +0100
Subject: [R] R Subset by Factor levels
In-Reply-To: <CAMUSX8pKVShYV65Y_RyGs5bbT+R1=rfxH88yPkKsxv5yC3B07w@mail.gmail.com>
References: <CAMUSX8pKVShYV65Y_RyGs5bbT+R1=rfxH88yPkKsxv5yC3B07w@mail.gmail.com>
Message-ID: <21a37e8c-aaa0-c501-868f-9f8c6ca00f6d@sapo.pt>

Hello,

Try %in% instead of == in:

m2<-m1[m1$`Classification Description` == levels(m1$`Classification Description`)[c(1,15,2,4],]


Hope this helps,

Rui Barradas



?s 14:57 de 29/07/2020, Engin Y?lmaz escreveu:
> Dear
>
> I try to create a new subset from my dataframe.
> My dataframe's name is m1.
> "Classification Description" column has 15 different factors.
> The following code is used creating a subset for 1 factor.
> m2<-m1[m1$`Classification Description` == levels(m1$`Classification
> Description`)[1],]
>
> My aim is to create a subset with 4 different factors. For example,
> levels(m1$`Classification Description`)[1]
> levels(m1$`Classification Description`)[15]
> levels(m1$`Classification Description`)[2]
> levels(m1$`Classification Description`)[4]
>
> I try to following code but it didnt work
>
> m2<-m1[m1$`Classification Description` == levels(m1$`Classification
> Description`)[c(1,15,2,4],]
>
> How can I solve This Problem ?
>
> Example from my dataframe
>
> `Record Date` `Classification Description`             `Current Month
> Budget Amount`
>     <date>        <fct>
>        <dbl>
>   1 2019-06-30    Total On-Budget and Off-Budget Results:
>          NA
>   2 2019-06-30    Off-Budget Surplus (+) or Deficit (-)
>   41998597035.
>   3 2019-06-30    Total Outlays
> 342428650968.
>   4 2019-06-30    By Other Means
> 51648504883.
>   5 2019-06-30    On-Budget Outlays
> 292169836521.
>   6 2019-06-30    Off-Budget Outlays
> 50258814447.
>   7 2019-06-30    Total Receipts
>   333952332514.
>   8 2019-06-30    On-Budget Surplus (+) or Deficit (-)
>   -50474915489.
>   9 2019-06-30    Off-Budget Receipts
>   92257411482
> 10 2019-06-30    Total On-Budget and Off-Budget Financing
>   8476318454
>
>
>


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From jr@| @end|ng |rom po@teo@no  Wed Jul 29 16:38:01 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 29 Jul 2020 16:38:01 +0200
Subject: [R] R Subset by Factor levels
In-Reply-To: <CAMUSX8pKVShYV65Y_RyGs5bbT+R1=rfxH88yPkKsxv5yC3B07w@mail.gmail.com>
References: <CAMUSX8pKVShYV65Y_RyGs5bbT+R1=rfxH88yPkKsxv5yC3B07w@mail.gmail.com>
Message-ID: <20200729143801.GA30190@posteo.no>

Dear Engin,

On 2020-07-29 16:57 +0300, Engin Y?lmaz wrote:
> Dear
> 
> I try to create a new subset from my dataframe.
> My dataframe's name is m1.
> "Classification Description" column has 15 different factors.
> The following code is used creating a subset for 1 factor.
> m2<-m1[m1$`Classification Description` == levels(m1$`Classification
> Description`)[1],]
> 
> My aim is to create a subset with 4 different factors. For example,
> levels(m1$`Classification Description`)[1]
> levels(m1$`Classification Description`)[15]
> levels(m1$`Classification Description`)[2]
> levels(m1$`Classification Description`)[4]
> 
> I try to following code but it didnt work
> 
> m2<-m1[m1$`Classification Description` == levels(m1$`Classification
> Description`)[c(1,15,2,4],]

You're almost correct, you just need to 
use match instead of ==:

	m1[m1$`Classification Description` %in%
	   levels(m1$`Classification Description`)[c(1, 15, 2, 4)],]

Read more about it at ?match (?`%in%`).

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200729/dc629e17/attachment.sig>

From U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de  Wed Jul 29 16:54:39 2020
From: U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de (Ulrik Stervbo)
Date: Wed, 29 Jul 2020 16:54:39 +0200
Subject: [R] Dataframe with different lengths
In-Reply-To: <CAB-TgNusP9Et=d_37x8pW7P9YXCQD4vyNsjTv4YyPaa=FhFCXA@mail.gmail.com>
References: <CAB-TgNusP9Et=d_37x8pW7P9YXCQD4vyNsjTv4YyPaa=FhFCXA@mail.gmail.com>
Message-ID: <6b0a3bbcd3f70fdb1fcfbd15cbe91fee@ruhr-uni-bochum.de>

Hi Pedro,

I see you use dplyr and ggplot2. Are you looking for something like 
this:

```
library(ggplot2)
library(dplyr)

test_data <- data.frame(
   year = c(rep("2018", 10), rep("2019", 8), rep("2020", 6)),
   value = sample(c(1:100), 24)
)

test_data <- test_data %>%
   group_by(year) %>%
   mutate(cumsum_value = cumsum(value),
          x_pos = 1:n())

ggplot(test_data) +
   aes(x = x_pos, y = cumsum_value, colour = year) +
   geom_point()
```

Best,
Ulrik

On 2020-07-22 13:16, Pedro p?ramo wrote:
> Hi all,
> 
> I am trying to draw a plot with cumsum values but each "line" has 
> different
> lengths
> 
> Ilibrary(dplyr)
> library(tibble)
> library(lubridate)
> library(PerformanceAnalytics)
> library(quantmod)
> library(ggplot2)
> 
> getSymbols('TSLA')
> 
> I want to create the variables:
> 
> a<-cumsum(dailyReturn(TSLA, subset = c('2019')) )
> b<-cumsum(dailyReturn(TSLA, subset = c('2020')) )
> c<-cumsum(dailyReturn(TSLA, subset = c('2018')) )
> 
> Each value, on a,b,c has two columns date, and values.
> 
> The thing is I want to plot the three lines in one plot with the 
> maximum
> values of a,b,c in this case a has 252 values, and plot the other two 
> lines
> could be in the axis I should put (x <- 1:252) on the axis but I was 
> not
> able for the moment.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de  Wed Jul 29 17:11:44 2020
From: U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de (Ulrik Stervbo)
Date: Wed, 29 Jul 2020 17:11:44 +0200
Subject: [R] Help with read.csv.sql()
In-Reply-To: <358300fd-4a98-2101-bc2f-44e78d27be21@meddatainc.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <CAA99HCxnMXk2-oXtojEYS0-XpT35a-ovJqNARLPiTX4Qu8n+9A@mail.gmail.com>
 <358300fd-4a98-2101-bc2f-44e78d27be21@meddatainc.com>
Message-ID: <147be8c7a2adaf9e0d30940d3f9ae0e6@ruhr-uni-bochum.de>

You might achieve this using readr:

```
library(readr)

lines <- "Id, Date, Time, Quality, Lat, Long
     STM05-1, 2005/02/28, 17:35, Good, -35.562, 177.158
     STM05-1, 2005/02/28, 19:44, Good, -35.487, 177.129
     STM05-1, 2005/02/28, 23:01, Unknown, -35.399, 177.064
     STM05-1, 2005/03/01, 07:28, Unknown, -34.978, 177.268
     STM05-1, 2005/03/01, 18:06, Poor, -34.799, 177.027
     STM05-1, 2005/03/01, 18:47, Poor, -34.85, 177.059
     STM05-2, 2005/02/28, 12:49, Good, -35.928, 177.328
     STM05-2, 2005/02/28, 21:23, Poor, -35.926, 177.314"

read_csv(lines)

read_csv(
   lines,
   skip = 1, # Ignore the header row
   col_names = c("myId", "myDate", "myTime", "myQuality", "myLat", 
"myLong"),
   col_types = cols(
     myDate = col_date(format = ""),
     myTime = col_time(format = ""),
     myLat = col_number(),
     myLong = col_number(),
     .default = col_character()
   )
   )

read_csv(
   lines,
   col_types = cols_only(
     Id = col_character(),
     Date = col_date(format = ""),
     Time = col_time(format = "")
   )
)

read_csv(
   lines,
   skip = 1, # Ignore the header row
   col_names = c("myId", "myDate", "myTime", "myQuality", "myLat", 
"myLong"),
   col_types = cols_only(
     myId = col_character(),
     myDate = col_date(format = ""),
     myTime = col_time(format = "")
   )
)
```

HTH
Ulrik

On 2020-07-20 02:07, H wrote:
> On 07/18/2020 01:38 PM, William Michels wrote:
>> Do either of the postings/threads below help?
>> 
>> https://r.789695.n4.nabble.com/read-csv-sql-to-select-from-a-large-csv-file-td4650565.html#a4651534
>> https://r.789695.n4.nabble.com/using-sqldf-s-read-csv-sql-to-read-a-file-with-quot-NA-quot-for-missing-td4642327.html
>> 
>> Otherwise you can try reading through the FAQ on Github:
>> 
>> https://github.com/ggrothendieck/sqldf
>> 
>> HTH, Bill.
>> 
>> W. Michels, Ph.D.
>> 
>> 
>> 
>> On Sat, Jul 18, 2020 at 9:59 AM H <agents at meddatainc.com> wrote:
>>> On 07/18/2020 11:54 AM, Rui Barradas wrote:
>>>> Hello,
>>>> 
>>>> I don't believe that what you are asking for is possible but like 
>>>> Bert suggested, you can do it after reading in the data.
>>>> You could write a convenience function to read the data, then change 
>>>> what you need to change.
>>>> Then the function would return this final object.
>>>> 
>>>> Rui Barradas
>>>> 
>>>> ?s 16:43 de 18/07/2020, H escreveu:
>>>> 
>>>>> On 07/17/2020 09:49 PM, Bert Gunter wrote:
>>>>>> Is there some reason that you can't make the changes to the data 
>>>>>> frame (column names, as.date(), ...) *after* you have read all 
>>>>>> your data in?
>>>>>> 
>>>>>> Do all your csv files use the same names and date formats?
>>>>>> 
>>>>>> 
>>>>>> Bert Gunter
>>>>>> 
>>>>>> "The trouble with having an open mind is that people keep coming 
>>>>>> along and sticking things into it."
>>>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>>> 
>>>>>> 
>>>>>> On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com 
>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>> 
>>>>>>      I have created a dataframe with columns that are characters, 
>>>>>> integers and numeric and with column names assigned by me. I am 
>>>>>> using read.csv.sql() to read portions of a number of large csv 
>>>>>> files into this dataframe, each csv file having a header row with 
>>>>>> columb names.
>>>>>> 
>>>>>>      The problem I am having is that the csv files have header 
>>>>>> rows with column names that are slightly different from the column 
>>>>>> names I have assigned in the dataframe and it seems that when I 
>>>>>> read the csv data into the dataframe, the column names from the 
>>>>>> csv file replace the column names I chose when creating the 
>>>>>> dataframe.
>>>>>> 
>>>>>>      I have been unable to figure out if it is possible to assign 
>>>>>> column names of my choosing in the read.csv.sql() function? I have 
>>>>>> tried various variations but none seem to work. I tried colClasses 
>>>>>> = c(....) but that did not work, I tried field.types = c(...) but 
>>>>>> could not get that to work either.
>>>>>> 
>>>>>>      It seems that the above should be feasible but I am missing 
>>>>>> something? Does anyone know?
>>>>>> 
>>>>>>      A secondary issue is that the csv files have a column with a 
>>>>>> date in mm/dd/yyyy format that I would like to make into a Date 
>>>>>> type column in my dataframe. Again, I have been unable to find a 
>>>>>> way - if at all possible - to force a conversion into a Date 
>>>>>> format when importing into the dataframe. The best I have so far 
>>>>>> is to import is a character column and then use as.Date() to later 
>>>>>> force the conversion of the dataframe column.
>>>>>> 
>>>>>>      Is it possible to do this when importing using 
>>>>>> read.csv.sql()?
>>>>>> 
>>>>>>      ______________________________________________
>>>>>>      R-help at r-project.org <mailto:R-help at r-project.org> mailing 
>>>>>> list -- To UNSUBSCRIBE and more, see
>>>>>>      https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>      PLEASE do read the posting guide 
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>      and provide commented, minimal, self-contained, reproducible 
>>>>>> code.
>>>>>> 
>>>>> Yes, the files use the same column names and date format (at least 
>>>>> as far as I know now.) I agree I could do it as you suggest above 
>>>>> but from a purist perspective I would rather do it when importing 
>>>>> the data using read.csv.sql(), particularly if column names and/or 
>>>>> date format might change, or be different between different files. 
>>>>> I am indeed selecting rows from a large number of csv files so this 
>>>>> is entirely plausible.
>>>>> 
>>>>> Has anyone been able to name columns in the read.csv.sql() call 
>>>>> and/or force date format conversion in the call itself? The first 
>>>>> refers to naming columns differently from what a header in the csv 
>>>>> file may have.
>>>>> 
>>>>> 
>>>>>     [[alternative HTML version deleted]]
>>>>> 
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide 
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>> The documentation for read.csv.sql() suggests that colClasses() 
>>> and/or field.types() should work but I may well have misunderstood 
>>> the documentation, hence my question in this group.
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> I had read the sqldf() documentation but was left with the impression
> that what I want to do is not easily doable.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de  Wed Jul 29 17:14:09 2020
From: U|r|k@Stervbo @end|ng |rom ruhr-un|-bochum@de (Ulrik Stervbo)
Date: Wed, 29 Jul 2020 17:14:09 +0200
Subject: [R] Help with read.csv.sql()
In-Reply-To: <358300fd-4a98-2101-bc2f-44e78d27be21@meddatainc.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <CAA99HCxnMXk2-oXtojEYS0-XpT35a-ovJqNARLPiTX4Qu8n+9A@mail.gmail.com>
 <358300fd-4a98-2101-bc2f-44e78d27be21@meddatainc.com>
Message-ID: <ff4830d6144e917731dc26317d3e9c00@ruhr-uni-bochum.de>

You might achieve this using readr:

```
library(readr)

lines <- "Id, Date, Time, Quality, Lat, Long
     STM05-1, 2005/02/28, 17:35, Good, -35.562, 177.158
     STM05-1, 2005/02/28, 19:44, Good, -35.487, 177.129
     STM05-1, 2005/02/28, 23:01, Unknown, -35.399, 177.064
     STM05-1, 2005/03/01, 07:28, Unknown, -34.978, 177.268
     STM05-1, 2005/03/01, 18:06, Poor, -34.799, 177.027
     STM05-1, 2005/03/01, 18:47, Poor, -34.85, 177.059
     STM05-2, 2005/02/28, 12:49, Good, -35.928, 177.328
     STM05-2, 2005/02/28, 21:23, Poor, -35.926, 177.314"

read_csv(lines)

read_csv(
   lines,
   skip = 1, # Ignore the header row
   col_names = c("myId", "myDate", "myTime", "myQuality", "myLat", 
"myLong"),
   col_types = cols(
     myDate = col_date(format = ""),
     myTime = col_time(format = ""),
     myLat = col_number(),
     myLong = col_number(),
     .default = col_character()
   )
   )

read_csv(
   lines,
   col_types = cols_only(
     Id = col_character(),
     Date = col_date(format = ""),
     Time = col_time(format = "")
   )
)

read_csv(
   lines,
   skip = 1, # Ignore the header row
   col_names = c("myId", "myDate", "myTime", "myQuality", "myLat", 
"myLong"),
   col_types = cols_only(
     myId = col_character(),
     myDate = col_date(format = ""),
     myTime = col_time(format = "")
   )
)
```

HTH
Ulrik

On 2020-07-20 02:07, H wrote:
> On 07/18/2020 01:38 PM, William Michels wrote:
>> Do either of the postings/threads below help?
>> 
>> https://r.789695.n4.nabble.com/read-csv-sql-to-select-from-a-large-csv-file-td4650565.html#a4651534
>> https://r.789695.n4.nabble.com/using-sqldf-s-read-csv-sql-to-read-a-file-with-quot-NA-quot-for-missing-td4642327.html
>> 
>> Otherwise you can try reading through the FAQ on Github:
>> 
>> https://github.com/ggrothendieck/sqldf
>> 
>> HTH, Bill.
>> 
>> W. Michels, Ph.D.
>> 
>> 
>> 
>> On Sat, Jul 18, 2020 at 9:59 AM H <agents at meddatainc.com> wrote:
>>> On 07/18/2020 11:54 AM, Rui Barradas wrote:
>>>> Hello,
>>>> 
>>>> I don't believe that what you are asking for is possible but like 
>>>> Bert suggested, you can do it after reading in the data.
>>>> You could write a convenience function to read the data, then change 
>>>> what you need to change.
>>>> Then the function would return this final object.
>>>> 
>>>> Rui Barradas
>>>> 
>>>> ?s 16:43 de 18/07/2020, H escreveu:
>>>> 
>>>>> On 07/17/2020 09:49 PM, Bert Gunter wrote:
>>>>>> Is there some reason that you can't make the changes to the data 
>>>>>> frame (column names, as.date(), ...) *after* you have read all 
>>>>>> your data in?
>>>>>> 
>>>>>> Do all your csv files use the same names and date formats?
>>>>>> 
>>>>>> 
>>>>>> Bert Gunter
>>>>>> 
>>>>>> "The trouble with having an open mind is that people keep coming 
>>>>>> along and sticking things into it."
>>>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>>> 
>>>>>> 
>>>>>> On Fri, Jul 17, 2020 at 6:28 PM H <agents at meddatainc.com 
>>>>>> <mailto:agents at meddatainc.com>> wrote:
>>>>>> 
>>>>>>      I have created a dataframe with columns that are characters, 
>>>>>> integers and numeric and with column names assigned by me. I am 
>>>>>> using read.csv.sql() to read portions of a number of large csv 
>>>>>> files into this dataframe, each csv file having a header row with 
>>>>>> columb names.
>>>>>> 
>>>>>>      The problem I am having is that the csv files have header 
>>>>>> rows with column names that are slightly different from the column 
>>>>>> names I have assigned in the dataframe and it seems that when I 
>>>>>> read the csv data into the dataframe, the column names from the 
>>>>>> csv file replace the column names I chose when creating the 
>>>>>> dataframe.
>>>>>> 
>>>>>>      I have been unable to figure out if it is possible to assign 
>>>>>> column names of my choosing in the read.csv.sql() function? I have 
>>>>>> tried various variations but none seem to work. I tried colClasses 
>>>>>> = c(....) but that did not work, I tried field.types = c(...) but 
>>>>>> could not get that to work either.
>>>>>> 
>>>>>>      It seems that the above should be feasible but I am missing 
>>>>>> something? Does anyone know?
>>>>>> 
>>>>>>      A secondary issue is that the csv files have a column with a 
>>>>>> date in mm/dd/yyyy format that I would like to make into a Date 
>>>>>> type column in my dataframe. Again, I have been unable to find a 
>>>>>> way - if at all possible - to force a conversion into a Date 
>>>>>> format when importing into the dataframe. The best I have so far 
>>>>>> is to import is a character column and then use as.Date() to later 
>>>>>> force the conversion of the dataframe column.
>>>>>> 
>>>>>>      Is it possible to do this when importing using 
>>>>>> read.csv.sql()?
>>>>>> 
>>>>>>      ______________________________________________
>>>>>>      R-help at r-project.org <mailto:R-help at r-project.org> mailing 
>>>>>> list -- To UNSUBSCRIBE and more, see
>>>>>>      https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>      PLEASE do read the posting guide 
>>>>>> http://www.R-project.org/posting-guide.html
>>>>>>      and provide commented, minimal, self-contained, reproducible 
>>>>>> code.
>>>>>> 
>>>>> Yes, the files use the same column names and date format (at least 
>>>>> as far as I know now.) I agree I could do it as you suggest above 
>>>>> but from a purist perspective I would rather do it when importing 
>>>>> the data using read.csv.sql(), particularly if column names and/or 
>>>>> date format might change, or be different between different files. 
>>>>> I am indeed selecting rows from a large number of csv files so this 
>>>>> is entirely plausible.
>>>>> 
>>>>> Has anyone been able to name columns in the read.csv.sql() call 
>>>>> and/or force date format conversion in the call itself? The first 
>>>>> refers to naming columns differently from what a header in the csv 
>>>>> file may have.
>>>>> 
>>>>> 
>>>>>     [[alternative HTML version deleted]]
>>>>> 
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide 
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>> The documentation for read.csv.sql() suggests that colClasses() 
>>> and/or field.types() should work but I may well have misunderstood 
>>> the documentation, hence my question in this group.
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> I had read the sqldf() documentation but was left with the impression
> that what I want to do is not easily doable.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Wed Jul 29 17:40:32 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Wed, 29 Jul 2020 17:40:32 +0200
Subject: [R] Help with read.csv.sql()
In-Reply-To: <ff4830d6144e917731dc26317d3e9c00@ruhr-uni-bochum.de>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <CAA99HCxnMXk2-oXtojEYS0-XpT35a-ovJqNARLPiTX4Qu8n+9A@mail.gmail.com>
 <358300fd-4a98-2101-bc2f-44e78d27be21@meddatainc.com>
 <ff4830d6144e917731dc26317d3e9c00@ruhr-uni-bochum.de>
Message-ID: <20200729154032.GB30190@posteo.no>

Dear Ulrik,

On 2020-07-29 17:14 +0200, Ulrik Stervbo via R-help wrote:
> library(readr)
> read_csv(

This thread was about 
sqldf::read.csv.sql ... 

What is the purpose of bringing up 
readr::read_csv?  I am unfamilliar with 
it, so it might be a good one.

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200729/84c29673/attachment.sig>

From pro|jcn@@h @end|ng |rom gm@||@com  Wed Jul 29 20:28:28 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Wed, 29 Jul 2020 14:28:28 -0400
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110D27D0F73A61ADE1755C892700@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <e33372f9-1b4c-e651-1b51-097df20186fc@gmail.com>
 <MN2PR19MB4110D27D0F73A61ADE1755C892700@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <af0b9804-9c18-2db8-e20c-56c9b71a722d@gmail.com>

My earlier posting on this thread was misleading. I thought the OP was trying to
fit a sigmoid to data. The problem is about fitting 0,1 responses.

The reproducible example cleared this up. Another strong demonstration that
a "simple reproducible example" can bring clarity so much more quickly than
general discussion.

JN


On 2020-07-29 8:56 a.m., Sebastien Bihorel wrote:
> #install.packages(gnlm)
> #require(gnlm)
> set.seed(12345)
> 
> nx <- 10
> x <- c(
> ? rep(0, 3*nx),
> ? rep(c(10, 30, 100, 500, 1000), each = nx)
> )
> rnd <- runif(length(x))
> a <- log(0.2/(1-0.2))
> b <- log(0.7/(1-0.7)) - a
> c <- 30
> likelihood <- a + b*x/(c+x)
> p <- exp(likelihood) / (1 + exp(likelihood))
> resp <- ifelse(rnd <= p, 1, 0)
> 
> df <- data.frame(
> ? x = x,
> ? resp = resp,
> ? nresp = 1- resp
> )
> 
> head(df)
> 
> # glm can only assume linear effect of x, which is the wrong model
> glm_mod <- glm(
> ? resp~x,
> ? data = df,
> ? family = 'binomial'
> )
> glm_mod
> 
> # Using gnlm package, estimate a model model with just intercept, and a model with predictor effect
> int_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit', mu = ~ p_a, pmu = c(a) )
> emax_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit',? mu = ~ p_a + p_b*x/(p_c+x),? pmu = c(a, b, c) )
> 
> int_mod
> emax_mod


From co|or|e @end|ng |rom gm@||@com  Wed Jul 29 21:04:43 2020
From: co|or|e @end|ng |rom gm@||@com (Carlos Ortega)
Date: Wed, 29 Jul 2020 21:04:43 +0200
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <CA+8X3fUXS+aSSmeXEUHX1Sn-yBwm-doH2z0tqvtXr0jjXO8-1Q@mail.gmail.com>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
 <24346.54660.178533.634124@stat.math.ethz.ch>
 <CAGY2U92yvAYhbBin2hb2Z8d5cWzii_9uGXysmFWnk1j-fDBybw@mail.gmail.com>
 <CA+8X3fUXS+aSSmeXEUHX1Sn-yBwm-doH2z0tqvtXr0jjXO8-1Q@mail.gmail.com>
Message-ID: <CAFKNbk+OWXuGh8qPt=X+eWYAMT3UatyCRRYFtU5PduutaFFUVQ@mail.gmail.com>

Hello Ritwik,

There is another possibility.

You can count (crosstab) the number of elements for each Region and Machine
(with table() function) and represent this table with geom_tile() function.
Wit this you will get an equivalent of a heatmap which will give you a good
sense of which combination of Region/Machine prevails.

Here you can get an example of how to use it:

   - https://www.r-graph-gallery.com/79-levelplot-with-ggplot2.html

And, just in in case you have to represent numeric values (numeric scatter
plot) there is an excellent way to graph that with this package, without
leaving ggplot ecosystem:

https://github.com/LKremer/ggpointdensity

Thanks,
Carlos Ortega.

On Wed, Jul 29, 2020 at 11:31 AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Ritwik,
> I haven't seen any further answers to your request, so I'll make a
> suggestion. I don't think there is any sensible way to illustrate that
> many data points on a single plot. I would try to segment the data by
> machine type or similar and plot a number of plots.
>
> Jim
>
> On Fri, Jul 24, 2020 at 11:34 PM Ritwik Mohapatra <ritm84 at gmail.com>
> wrote:
> >
> > Hi All,
> >
> > These are the two codes i have used so far:-
> > ggplot(df3_machine_region,aes(Region,Machine.Name)) +
> >   geom_count()
> > !![2nd Plot|690x375](upload://gTyYUXe6lPJXCdyvqRBtUZ8zsyL.png) [1st
> > Plot|690x375](upload://bb0ux9WheqM4ViyYf3Gki6TKtlG.png)
> > ggplot(df3_machine_region,aes(Region,Machine.Name)) +
> >   geom_jitter(aes(colour=Region))
> >
> > I have to present the plot to my stakeholders,so thats why its required
> in
> > a readable and legible way.
> >
> > There would be approximately 10k+ values(max) for machine and region
> > combination.
> >
> > I have attached the output plots for your reference.Please find below a
> > snapshot of data for your reference.
> >
> > |Machine.Name|Region|
> > |0460-EPBS1.sga-res.com|Europe|
> > |04821-EABS1.sga-res.com|Europe|
> > |10429-EDABS1.sga-res.com|Europe|
> > |1042619-ESWEBS1.sga-res.com|Europe|
> > |ABE-L-98769.europe.shell.com|Americas|
> > |AB-L-98769.europe.shell.com|APAC|
> > |AB-L-98769.europe.shell.com|Europe|
> > |ABE-L-98769.europe.shell.com (2)|Americas|
> > |ABE-L-98769.europe.shell.com (2)|Europe|
> > |ABE-L-98840.europe.shell.com|Americas|
> > |AB-L-98840.europe.shell.com|APAC|
> > |ABE-L-98840.europe.shell.com|Europe|
> > |AB-L-98854.europe.shell.com|Americas|
> > |ABE-L-98854.europe.shell.com|Europe|
> > |ABE-L-98862.europe.shell.com|Americas|
> >
> > Regards,
> > Ritwik
> >
> > On Fri, Jul 24, 2020 at 6:05 PM Martin Maechler <
> maechler at stat.math.ethz.ch>
> > wrote:
> >
> > > >>>>> Ritwik Mohapatra
> > > >>>>>     on Thu, 23 Jul 2020 23:41:57 +0530 writes:
> > >
> > >     > How to create a readable and legible plot in R with 10k+ values.I
> > > have a
> > >     > dataframe with 17298 records.There are two columns:Machine
> > > Name(Character)
> > >     > and Region(Character).So i want to create a readable plot with
> > > region in x
> > >     > axis and machine name in y axis.How do i do that using ggplot or
> any
> > > other
> > >     > way.Please help.
> > >
> > > Good answers to this question will depend very much on how many
> > > 'Machine' and 'Region' levels there are.
> > >
> > > (and this is a case where in my opinion it'd be *MUCH* more
> > >  useful to have 'factor' instead of 'character'.. if only just
> > >  so
> > >          str(<data>)
> > > or   summary(<data>)
> > >
> > > would give useful/relevant information.
> > >
> > > --
> > > One possibility for a somewhat cute plot is a  "good ole"
> > > sunflower plot (base graphics, but the idea must be easily
> > > transferable to grid-based graphics such as ggplot2):
> > >
> > >   help(sunflowerplot)
> > >
> > >
> > > Martin Maechler
> > > ETH Zurich
> > >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jul 29 22:04:57 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 29 Jul 2020 16:04:57 -0400
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110D27D0F73A61ADE1755C892700@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <e33372f9-1b4c-e651-1b51-097df20186fc@gmail.com>
 <MN2PR19MB4110D27D0F73A61ADE1755C892700@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <41c74d83-8e57-a16c-eaaa-85733ff2d6b4@gmail.com>

Just a quick note about jargon:  you are using the word "likelihood" in 
a way that I (and maybe some others) find confusing. (In fact, I think 
you used it two different ways, but maybe I'm just confused.) I would 
say that likelihood is the probability of observing the entire data set, 
considered as a function of the parameters.  You appear to be using it 
(at first) as the probability that a particular observation is equal to 
1, and then as the argument to a logit function to give that probability.

What you probably want to do is find the parameters that maximize the 
likelihood (in my sense).  The usual practice is to maximize the log of 
the likelihood; it tends to be easier to work with.  In your notation 
below, the log likelihood would be

   loglik <- sum( resp*log(p) + (1-resp)*log1p(-p) )

When you have a linear logistic regression model, this simplifies a bit, 
and there are fast algorithms that are usually stable to optimize it. 
With a nonlinear model, you lose some of that, and I'd suggest directly 
optimizing it.

Duncan Murdoch

On 29/07/2020 8:56 a.m., Sebastien Bihorel via R-help wrote:
> Thank your, Pr. Nash, for your perspective on the issue.
> 
> Here is an example of binary data/response (resp) that were simulated and re-estimated assuming a non linear effect of the predictor (x) on the likelihood of response. For re-estimation, I have used gnlm::bnlr for the logistic regression. The accuracy of the parameter estimates is so-so, probably due to the low number of data points (8*nx). For illustration, I have also include a glm call to an incorrect linear model of x.
> 
> #install.packages(gnlm)
> #require(gnlm)
> set.seed(12345)
> 
> nx <- 10
> x <- c(
>    rep(0, 3*nx),
>    rep(c(10, 30, 100, 500, 1000), each = nx)
> )
> rnd <- runif(length(x))
> a <- log(0.2/(1-0.2))
> b <- log(0.7/(1-0.7)) - a
> c <- 30
> likelihood <- a + b*x/(c+x)
> p <- exp(likelihood) / (1 + exp(likelihood))
> resp <- ifelse(rnd <= p, 1, 0)
> 
> df <- data.frame(
>    x = x,
>    resp = resp,
>    nresp = 1- resp
> )
> 
> head(df)
> 
> # glm can only assume linear effect of x, which is the wrong model
> glm_mod <- glm(
>    resp~x,
>    data = df,
>    family = 'binomial'
> )
> glm_mod
> 
> # Using gnlm package, estimate a model model with just intercept, and a model with predictor effect
> int_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit', mu = ~ p_a, pmu = c(a) )
> emax_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit',  mu = ~ p_a + p_b*x/(p_c+x),  pmu = c(a, b, c) )
> 
> int_mod
> emax_mod
> 
> ________________________________
> From: J C Nash <profjcnash at gmail.com>
> Sent: Tuesday, July 28, 2020 14:16
> To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] Nonlinear logistic regression fitting
> 
> There is a large literature on nonlinear logistic models and similar
> curves. Some of it is referenced in my 2014 book Nonlinear Parameter
> Optimization Using R Tools, which mentions nlxb(), now part of the
> nlsr package. If useful, I could put the Bibtex refs for that somewhere.
> 
> nls() is now getting long in the tooth. It has a lot of flexibility and
> great functionality, but it did very poorly on the Hobbs problem that
> rather forced me to develop the codes that are 3/5ths of optim() and
> also led to nlsr etc. The Hobbs problem dated from 1974, and with only
> 12 data points still defeats a majority of nonlinear fit programs.
> nls() poops out because it has no LM stabilization and a rather weak
> forward difference derivative approximation. nlsr tries to generate
> analytic derivatives, which often help when things are very badly scaled.
> 
> Another posting suggests an example problem i.e., some data and a
> model, though you also need the loss function (e.g., Max likelihood,
> weights, etc.). Do post some data and functions so we can provide more
> focussed advice.
> 
> JN
> 
> On 2020-07-28 10:13 a.m., Sebastien Bihorel via R-help wrote:
>> Hi
>>
>> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
>>
>> L = intercept + emax * x / (EC50+x)
>>
>> Which I guess could be expressed as the following R model
>>
>> ~ emax*x/(ec50+x)
>>
>> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.
>>
>> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Wed Jul 29 22:15:37 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Wed, 29 Jul 2020 20:15:37 +0000
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <41c74d83-8e57-a16c-eaaa-85733ff2d6b4@gmail.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <e33372f9-1b4c-e651-1b51-097df20186fc@gmail.com>
 <MN2PR19MB4110D27D0F73A61ADE1755C892700@MN2PR19MB4110.namprd19.prod.outlook.com>,
 <41c74d83-8e57-a16c-eaaa-85733ff2d6b4@gmail.com>
Message-ID: <MN2PR19MB4110496E51526EEE44FE055E92700@MN2PR19MB4110.namprd19.prod.outlook.com>

Thanks Duncan,

People working in my field are frequently (and rightly) accused of butchering statistical terminology. So I guess I'm guilty as charged ?

I will look into the suggested path. One question though in your expression:

loglik <- sum( resp*log(p) + (1-resp)*log1p(-p) )
a + b*x/(c+x)

________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Wednesday, July 29, 2020 16:04
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; J C Nash <profjcnash at gmail.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Nonlinear logistic regression fitting

Just a quick note about jargon:  you are using the word "likelihood" in
a way that I (and maybe some others) find confusing. (In fact, I think
you used it two different ways, but maybe I'm just confused.) I would
say that likelihood is the probability of observing the entire data set,
considered as a function of the parameters.  You appear to be using it
(at first) as the probability that a particular observation is equal to
1, and then as the argument to a logit function to give that probability.

What you probably want to do is find the parameters that maximize the
likelihood (in my sense).  The usual practice is to maximize the log of
the likelihood; it tends to be easier to work with.  In your notation
below, the log likelihood would be

   loglik <- sum( resp*log(p) + (1-resp)*log1p(-p) )

When you have a linear logistic regression model, this simplifies a bit,
and there are fast algorithms that are usually stable to optimize it.
With a nonlinear model, you lose some of that, and I'd suggest directly
optimizing it.

Duncan Murdoch

On 29/07/2020 8:56 a.m., Sebastien Bihorel via R-help wrote:
> Thank your, Pr. Nash, for your perspective on the issue.
>
> Here is an example of binary data/response (resp) that were simulated and re-estimated assuming a non linear effect of the predictor (x) on the likelihood of response. For re-estimation, I have used gnlm::bnlr for the logistic regression. The accuracy of the parameter estimates is so-so, probably due to the low number of data points (8*nx). For illustration, I have also include a glm call to an incorrect linear model of x.
>
> #install.packages(gnlm)
> #require(gnlm)
> set.seed(12345)
>
> nx <- 10
> x <- c(
>    rep(0, 3*nx),
>    rep(c(10, 30, 100, 500, 1000), each = nx)
> )
> rnd <- runif(length(x))
> a <- log(0.2/(1-0.2))
> b <- log(0.7/(1-0.7)) - a
> c <- 30
> likelihood <- a + b*x/(c+x)
> p <- exp(likelihood) / (1 + exp(likelihood))
> resp <- ifelse(rnd <= p, 1, 0)
>
> df <- data.frame(
>    x = x,
>    resp = resp,
>    nresp = 1- resp
> )
>
> head(df)
>
> # glm can only assume linear effect of x, which is the wrong model
> glm_mod <- glm(
>    resp~x,
>    data = df,
>    family = 'binomial'
> )
> glm_mod
>
> # Using gnlm package, estimate a model model with just intercept, and a model with predictor effect
> int_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit', mu = ~ p_a, pmu = c(a) )
> emax_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit',  mu = ~ p_a + p_b*x/(p_c+x),  pmu = c(a, b, c) )
>
> int_mod
> emax_mod
>
> ________________________________
> From: J C Nash <profjcnash at gmail.com>
> Sent: Tuesday, July 28, 2020 14:16
> To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] Nonlinear logistic regression fitting
>
> There is a large literature on nonlinear logistic models and similar
> curves. Some of it is referenced in my 2014 book Nonlinear Parameter
> Optimization Using R Tools, which mentions nlxb(), now part of the
> nlsr package. If useful, I could put the Bibtex refs for that somewhere.
>
> nls() is now getting long in the tooth. It has a lot of flexibility and
> great functionality, but it did very poorly on the Hobbs problem that
> rather forced me to develop the codes that are 3/5ths of optim() and
> also led to nlsr etc. The Hobbs problem dated from 1974, and with only
> 12 data points still defeats a majority of nonlinear fit programs.
> nls() poops out because it has no LM stabilization and a rather weak
> forward difference derivative approximation. nlsr tries to generate
> analytic derivatives, which often help when things are very badly scaled.
>
> Another posting suggests an example problem i.e., some data and a
> model, though you also need the loss function (e.g., Max likelihood,
> weights, etc.). Do post some data and functions so we can provide more
> focussed advice.
>
> JN
>
> On 2020-07-28 10:13 a.m., Sebastien Bihorel via R-help wrote:
>> Hi
>>
>> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
>>
>> L = intercept + emax * x / (EC50+x)
>>
>> Which I guess could be expressed as the following R model
>>
>> ~ emax*x/(ec50+x)
>>
>> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.
>>
>> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


	[[alternative HTML version deleted]]


From Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com  Wed Jul 29 22:16:58 2020
From: Seb@@t|en@B|hore| @end|ng |rom cogn|gencorp@com (Sebastien Bihorel)
Date: Wed, 29 Jul 2020 20:16:58 +0000
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB4110496E51526EEE44FE055E92700@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <e33372f9-1b4c-e651-1b51-097df20186fc@gmail.com>
 <MN2PR19MB4110D27D0F73A61ADE1755C892700@MN2PR19MB4110.namprd19.prod.outlook.com>,
 <41c74d83-8e57-a16c-eaaa-85733ff2d6b4@gmail.com>,
 <MN2PR19MB4110496E51526EEE44FE055E92700@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <MN2PR19MB41102F4874DDC79F0AC1032792700@MN2PR19MB4110.namprd19.prod.outlook.com>

Thanks Duncan,

(Sorry for the repeated email)

People working in my field are frequently (and rightly) accused of butchering statistical terminology. So I guess I'm guilty as charged ?

I will look into the suggested path. One question though in your expression of loglik, p is "a + b*x/(c+x)". Correct?

Thanks

________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Wednesday, July 29, 2020 16:04
To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; J C Nash <profjcnash at gmail.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Nonlinear logistic regression fitting

Just a quick note about jargon:  you are using the word "likelihood" in
a way that I (and maybe some others) find confusing. (In fact, I think
you used it two different ways, but maybe I'm just confused.) I would
say that likelihood is the probability of observing the entire data set,
considered as a function of the parameters.  You appear to be using it
(at first) as the probability that a particular observation is equal to
1, and then as the argument to a logit function to give that probability.

What you probably want to do is find the parameters that maximize the
likelihood (in my sense).  The usual practice is to maximize the log of
the likelihood; it tends to be easier to work with.  In your notation
below, the log likelihood would be

   loglik <- sum( resp*log(p) + (1-resp)*log1p(-p) )

When you have a linear logistic regression model, this simplifies a bit,
and there are fast algorithms that are usually stable to optimize it.
With a nonlinear model, you lose some of that, and I'd suggest directly
optimizing it.

Duncan Murdoch

On 29/07/2020 8:56 a.m., Sebastien Bihorel via R-help wrote:
> Thank your, Pr. Nash, for your perspective on the issue.
>
> Here is an example of binary data/response (resp) that were simulated and re-estimated assuming a non linear effect of the predictor (x) on the likelihood of response. For re-estimation, I have used gnlm::bnlr for the logistic regression. The accuracy of the parameter estimates is so-so, probably due to the low number of data points (8*nx). For illustration, I have also include a glm call to an incorrect linear model of x.
>
> #install.packages(gnlm)
> #require(gnlm)
> set.seed(12345)
>
> nx <- 10
> x <- c(
>    rep(0, 3*nx),
>    rep(c(10, 30, 100, 500, 1000), each = nx)
> )
> rnd <- runif(length(x))
> a <- log(0.2/(1-0.2))
> b <- log(0.7/(1-0.7)) - a
> c <- 30
> likelihood <- a + b*x/(c+x)
> p <- exp(likelihood) / (1 + exp(likelihood))
> resp <- ifelse(rnd <= p, 1, 0)
>
> df <- data.frame(
>    x = x,
>    resp = resp,
>    nresp = 1- resp
> )
>
> head(df)
>
> # glm can only assume linear effect of x, which is the wrong model
> glm_mod <- glm(
>    resp~x,
>    data = df,
>    family = 'binomial'
> )
> glm_mod
>
> # Using gnlm package, estimate a model model with just intercept, and a model with predictor effect
> int_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit', mu = ~ p_a, pmu = c(a) )
> emax_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit',  mu = ~ p_a + p_b*x/(p_c+x),  pmu = c(a, b, c) )
>
> int_mod
> emax_mod
>
> ________________________________
> From: J C Nash <profjcnash at gmail.com>
> Sent: Tuesday, July 28, 2020 14:16
> To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] Nonlinear logistic regression fitting
>
> There is a large literature on nonlinear logistic models and similar
> curves. Some of it is referenced in my 2014 book Nonlinear Parameter
> Optimization Using R Tools, which mentions nlxb(), now part of the
> nlsr package. If useful, I could put the Bibtex refs for that somewhere.
>
> nls() is now getting long in the tooth. It has a lot of flexibility and
> great functionality, but it did very poorly on the Hobbs problem that
> rather forced me to develop the codes that are 3/5ths of optim() and
> also led to nlsr etc. The Hobbs problem dated from 1974, and with only
> 12 data points still defeats a majority of nonlinear fit programs.
> nls() poops out because it has no LM stabilization and a rather weak
> forward difference derivative approximation. nlsr tries to generate
> analytic derivatives, which often help when things are very badly scaled.
>
> Another posting suggests an example problem i.e., some data and a
> model, though you also need the loss function (e.g., Max likelihood,
> weights, etc.). Do post some data and functions so we can provide more
> focussed advice.
>
> JN
>
> On 2020-07-28 10:13 a.m., Sebastien Bihorel via R-help wrote:
>> Hi
>>
>> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
>>
>> L = intercept + emax * x / (EC50+x)
>>
>> Which I guess could be expressed as the following R model
>>
>> ~ emax*x/(ec50+x)
>>
>> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.
>>
>> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... I would be grateful for any opinion on this package or for any alternative recommendation of package/function.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jul 29 22:30:34 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 29 Jul 2020 16:30:34 -0400
Subject: [R] Nonlinear logistic regression fitting
In-Reply-To: <MN2PR19MB41102F4874DDC79F0AC1032792700@MN2PR19MB4110.namprd19.prod.outlook.com>
References: <MN2PR19MB4110293F223357C81ED2950C92730@MN2PR19MB4110.namprd19.prod.outlook.com>
 <e33372f9-1b4c-e651-1b51-097df20186fc@gmail.com>
 <MN2PR19MB4110D27D0F73A61ADE1755C892700@MN2PR19MB4110.namprd19.prod.outlook.com>
 <41c74d83-8e57-a16c-eaaa-85733ff2d6b4@gmail.com>
 <MN2PR19MB4110496E51526EEE44FE055E92700@MN2PR19MB4110.namprd19.prod.outlook.com>
 <MN2PR19MB41102F4874DDC79F0AC1032792700@MN2PR19MB4110.namprd19.prod.outlook.com>
Message-ID: <d47d2ca8-7a5d-267e-751e-975520eb51a7@gmail.com>

On 29/07/2020 4:16 p.m., Sebastien Bihorel wrote:
> Thanks Duncan,
> 
> (Sorry for the repeated email)
> 
> People working in my field are frequently (and rightly) accused of 
> butchering statistical terminology. So I guess I'm guilty as charged ?
> 
> I will look into the suggested path. One question though in your 
> expression of loglik, p is "a + b*x/(c+x)". Correct?

p should be the probability of observing 1, so I would guess it is what 
you calculated below, i.e. exp(likelihood)/(1 + exp(likelihood)) (in 
your notation, not mine).

Duncan Murdoch

> 
> Thanks
> 
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Wednesday, July 29, 2020 16:04
> *To:* Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; J C Nash 
> <profjcnash at gmail.com>; r-help at r-project.org <r-help at r-project.org>
> *Subject:* Re: [R] Nonlinear logistic regression fitting
> Just a quick note about jargon:? you are using the word "likelihood" in
> a way that I (and maybe some others) find confusing. (In fact, I think
> you used it two different ways, but maybe I'm just confused.) I would
> say that likelihood is the probability of observing the entire data set,
> considered as a function of the parameters.? You appear to be using it
> (at first) as the probability that a particular observation is equal to
> 1, and then as the argument to a logit function to give that probability.
> 
> What you probably want to do is find the parameters that maximize the
> likelihood (in my sense).? The usual practice is to maximize the log of
> the likelihood; it tends to be easier to work with.? In your notation
> below, the log likelihood would be
> 
>  ?? loglik <- sum( resp*log(p) + (1-resp)*log1p(-p) )
> 
> When you have a linear logistic regression model, this simplifies a bit,
> and there are fast algorithms that are usually stable to optimize it.
> With a nonlinear model, you lose some of that, and I'd suggest directly
> optimizing it.
> 
> Duncan Murdoch
> 
> On 29/07/2020 8:56 a.m., Sebastien Bihorel via R-help wrote:
>> Thank your, Pr. Nash, for your perspective on the issue.
>> 
>> Here is an example of binary data/response (resp) that were simulated and re-estimated assuming a non linear effect of the predictor (x) on the likelihood of response. For re-estimation, I have used gnlm::bnlr for the logistic regression. The accuracy of  the parameter estimates is so-so, probably due to the low number of 
> data points (8*nx). For illustration, I have also include a glm call to 
> an incorrect linear model of x.
>> 
>> #install.packages(gnlm)
>> #require(gnlm)
>> set.seed(12345)
>> 
>> nx <- 10
>> x <- c(
>>??? rep(0, 3*nx),
>>??? rep(c(10, 30, 100, 500, 1000), each = nx)
>> )
>> rnd <- runif(length(x))
>> a <- log(0.2/(1-0.2))
>> b <- log(0.7/(1-0.7)) - a
>> c <- 30
>> likelihood <- a + b*x/(c+x)
>> p <- exp(likelihood) / (1 + exp(likelihood))
>> resp <- ifelse(rnd <= p, 1, 0)
>> 
>> df <- data.frame(
>>??? x = x,
>>??? resp = resp,
>>??? nresp = 1- resp
>> )
>> 
>> head(df)
>> 
>> # glm can only assume linear effect of x, which is the wrong model
>> glm_mod <- glm(
>>??? resp~x,
>>??? data = df,
>>??? family = 'binomial'
>> )
>> glm_mod
>> 
>> # Using gnlm package, estimate a model model with just intercept, and a model with predictor effect
>> int_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit', mu = ~ p_a, pmu = c(a) )
>> emax_mod <- gnlm::bnlr( y = df[,2:3], link = 'logit',? mu = ~ p_a + p_b*x/(p_c+x),? pmu = c(a, b, c) )
>> 
>> int_mod
>> emax_mod
>> 
>> ________________________________
>> From: J C Nash <profjcnash at gmail.com>
>> Sent: Tuesday, July 28, 2020 14:16
>> To: Sebastien Bihorel <Sebastien.Bihorel at cognigencorp.com>; r-help at r-project.org <r-help at r-project.org>
>> Subject: Re: [R] Nonlinear logistic regression fitting
>> 
>> There is a large literature on nonlinear logistic models and similar
>> curves. Some of it is referenced in my 2014 book Nonlinear Parameter
>> Optimization Using R Tools, which mentions nlxb(), now part of the
>> nlsr package. If useful, I could put the Bibtex refs for that somewhere.
>> 
>> nls() is now getting long in the tooth. It has a lot of flexibility and
>> great functionality, but it did very poorly on the Hobbs problem that
>> rather forced me to develop the codes that are 3/5ths of optim() and
>> also led to nlsr etc. The Hobbs problem dated from 1974, and with only
>> 12 data points still defeats a majority of nonlinear fit programs.
>> nls() poops out because it has no LM stabilization and a rather weak
>> forward difference derivative approximation. nlsr tries to generate
>> analytic derivatives, which often help when things are very badly scaled.
>> 
>> Another posting suggests an example problem i.e., some data and a
>> model, though you also need the loss function (e.g., Max likelihood,
>> weights, etc.). Do post some data and functions so we can provide more
>> focussed advice.
>> 
>> JN
>> 
>> On 2020-07-28 10:13 a.m., Sebastien Bihorel via R-help wrote:
>>> Hi
>>>
>>> I need to fit a logistic regression model using a saturable Michaelis-Menten function of my predictor x. The likelihood could be expressed as:
>>>
>>> L = intercept + emax * x / (EC50+x)
>>>
>>> Which I guess could be expressed as the following R model
>>>
>>> ~ emax*x/(ec50+x)
>>>
>>> As far as I know (please, correct me if I am wrong), fitting such a model is to not doable with glm, since the function is not linear.
>>>
>>> A Stackoverflow post recommends the bnlr function from the gnlm (https://stackoverflow.com/questions/45362548/nonlinear-logistic-regression-package-in-r)... 
> I would be grateful for any opinion on this package or for any 
> alternative recommendation of package/function.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> 
>>??????? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>


From u|r|k@@tervbo @end|ng |rom ruhr-un|-bochum@de  Wed Jul 29 22:56:37 2020
From: u|r|k@@tervbo @end|ng |rom ruhr-un|-bochum@de (Ulrik Stervbo)
Date: Wed, 29 Jul 2020 22:56:37 +0200
Subject: [R] Help with read.csv.sql()
In-Reply-To: <20200729154032.GB30190@posteo.no>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <CAA99HCxnMXk2-oXtojEYS0-XpT35a-ovJqNARLPiTX4Qu8n+9A@mail.gmail.com>
 <358300fd-4a98-2101-bc2f-44e78d27be21@meddatainc.com>
 <ff4830d6144e917731dc26317d3e9c00@ruhr-uni-bochum.de>
 <20200729154032.GB30190@posteo.no>
Message-ID: <f54f1dfe-53bb-4b31-8103-66b57266edaa@ruhr-uni-bochum.de>

True, but the question was also how to control for formats and naming columns while loading the file.

The only way I know how to do this (sans work on my part) is through the functions in readr. So, 50% on topic :-)

Best,
Ulrik


On 29 Jul 2020, 17:59, at 17:59, Rasmus Liland <jral at posteo.no> wrote:
>Dear Ulrik,
>
>On 2020-07-29 17:14 +0200, Ulrik Stervbo via R-help wrote:
>> library(readr)
>> read_csv(
>
>This thread was about
>sqldf::read.csv.sql ...
>
>What is the purpose of bringing up
>readr::read_csv?  I am unfamilliar with
>it, so it might be a good one.
>
>Best,
>Rasmus
>
>
>------------------------------------------------------------------------
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From byron_dom @end|ng |rom y@hoo@com  Wed Jul 29 23:35:33 2020
From: byron_dom @end|ng |rom y@hoo@com (Byron Dom)
Date: Wed, 29 Jul 2020 21:35:33 +0000 (UTC)
Subject: [R] Accessing the C++ source associated with the rgl function
 shade3d
References: <1366280438.6315892.1596058533897.ref@mail.yahoo.com>
Message-ID: <1366280438.6315892.1596058533897@mail.yahoo.com>

How can I access the C++ source associated with the rgl function shade3d. More specifically, I'm interested in the part of the code used by arrow3d to draw arrow heads.

I'm not familiar with how GitHub is organized and I've put in a lot of effort doing searches there and on the web in general. The result has been a few fragments of rgl C++ code but not what I'm looking for.


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 30 00:04:44 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 29 Jul 2020 18:04:44 -0400
Subject: [R] Accessing the C++ source associated with the rgl function
 shade3d
In-Reply-To: <1366280438.6315892.1596058533897@mail.yahoo.com>
References: <1366280438.6315892.1596058533897.ref@mail.yahoo.com>
 <1366280438.6315892.1596058533897@mail.yahoo.com>
Message-ID: <9baa0a7b-410c-2a8f-e4ab-c0f4ee722eb8@gmail.com>

On 29/07/2020 5:35 p.m., Byron Dom via R-help wrote:
> How can I access the C++ source associated with the rgl function shade3d. More specifically, I'm interested in the part of the code used by arrow3d to draw arrow heads.
> 
> I'm not familiar with how GitHub is organized and I've put in a lot of effort doing searches there and on the web in general. The result has been a few fragments of rgl C++ code but not what I'm looking for.

shade3d() is purely written in R:  so just type "shade3d" and you'll see 
that it's a generic function.  Most commonly it is used on objects of 
type "mesh3d", so type "rgl:::shade3d.mesh3d" and you can see the full 
source.  It makes calls to other R functions; C++ doesn't come in until 
it has chosen to draw triangles or quadrilaterals.  I think you probably 
don't care about how those are drawn, but let me know if you are.

The arrow3d function is also a pure R function, but not a generic.  You 
can see the source by typing "arrow3d".

Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jul 30 00:34:46 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 29 Jul 2020 15:34:46 -0700
Subject: [R] Accessing the C++ source associated with the rgl function
 shade3d
In-Reply-To: <1366280438.6315892.1596058533897@mail.yahoo.com>
References: <1366280438.6315892.1596058533897.ref@mail.yahoo.com>
 <1366280438.6315892.1596058533897@mail.yahoo.com>
Message-ID: <C32BA997-D293-4E40-8340-1AF944B52460@dcn.davis.ca.us>

To begin with, don't assume it is in C++... R supports multiple compiled languages, and rgl appears to have both C++ and C in it.

I googled "r rgl github" and found an online copy of the src (source) files right away. The official way is to find the CRAN package page and download the tar.gz file and extract the files. Either way, you get the whole package source code this way.

I am afraid I don't have time to dig into the source to identify which file you need. Keeping in mind that the rgl package is an interface to lower level code, beware that you may need to leave the R code to find what you are looking for... in which case you would be dealing with a different code base and community of coders.

On July 29, 2020 2:35:33 PM PDT, Byron Dom via R-help <r-help at r-project.org> wrote:
>How can I access the C++ source associated with the rgl function
>shade3d. More specifically, I'm interested in the part of the code used
>by arrow3d to draw arrow heads.
>
>I'm not familiar with how GitHub is organized and I've put in a lot of
>effort doing searches there and on the web in general. The result has
>been a few fragments of rgl C++ code but not what I'm looking for.
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jr@| @end|ng |rom po@teo@no  Thu Jul 30 00:59:09 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 30 Jul 2020 00:59:09 +0200
Subject: [R] Help with read.csv.sql()
In-Reply-To: <f54f1dfe-53bb-4b31-8103-66b57266edaa@ruhr-uni-bochum.de>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAGxFJbTtr6swQxJnDMSLEr+G-++AMTTBSqnNhoYevVeP958tUA@mail.gmail.com>
 <43f5a806-af13-bea1-efa5-95dddf083dd3@meddatainc.com>
 <9bcfe657-2303-38d0-1053-611935b06434@sapo.pt>
 <39572cdf-d721-4094-a501-739ca6c9c1df@meddatainc.com>
 <CAA99HCxnMXk2-oXtojEYS0-XpT35a-ovJqNARLPiTX4Qu8n+9A@mail.gmail.com>
 <358300fd-4a98-2101-bc2f-44e78d27be21@meddatainc.com>
 <ff4830d6144e917731dc26317d3e9c00@ruhr-uni-bochum.de>
 <20200729154032.GB30190@posteo.no>
 <f54f1dfe-53bb-4b31-8103-66b57266edaa@ruhr-uni-bochum.de>
Message-ID: <20200729225909.GD194354@posteo.no>

On 2020-07-29 22:56 +0200, Ulrik Stervbo wrote:
> So, 50% on topic :-)

I guess so haha :-)  Still I hope this 
is useful for H <agents at meddatainc.com>, 
others, or he solved it but still no 
bottom line volatile situation open for 
new ideas.


From jr@| @end|ng |rom po@teo@no  Thu Jul 30 01:27:26 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 30 Jul 2020 01:27:26 +0200
Subject: [R] Accessing the C++ source associated with the rgl function
 shade3d
In-Reply-To: <C32BA997-D293-4E40-8340-1AF944B52460@dcn.davis.ca.us>
References: <1366280438.6315892.1596058533897.ref@mail.yahoo.com>
 <1366280438.6315892.1596058533897@mail.yahoo.com>
 <C32BA997-D293-4E40-8340-1AF944B52460@dcn.davis.ca.us>
Message-ID: <20200729232726.GE194354@posteo.no>

Dear Byron,

On 2020-07-29 18:04 -0400, Duncan Murdoch wrote:
> The arrow3d function is also a pure R 
> function, but not a generic.  You can 
> see the source by typing "arrow3d".

... but if I type rgl::shade3d, I get

	> rgl::shade3d
	function (x, ...)
	UseMethod("shade3d")
	<bytecode: 0x562692966fb8>
	<environment: namespace:rgl>
	> dput(rgl::shade3d)
	function (x, ...)
	UseMethod("shade3d")

I've observed this is possible in the 
past, but now I can't remember how ...

On 2020-07-29 15:34 -0700, Jeff Newmiller wrote:
> On July 29, 2020 2:35:33 PM PDT, Byron Dom wrote:
> > I'm not familiar with how GitHub is 
> > organized 
> 
> The official way is to find the CRAN 
> package page and download the tar.gz 
> file and extract the files. Either 
> way, you get the whole package source 
> code this way.

I have a hunch this is the file you're 
looking for 
https://github.com/cran/rgl/blob/master/R/ashape3d.R 

Remember, dealing with code on github is 
just a small uptick from how Linux was 
developed before, by shipping around 
diffs and tarballs on a mailing list 
much similar to this one, Thorvalds 
merging them into the kernel in the 
authoritarian way.

You can do it!  *cheers*

Best,
Rasmus

[1] http://gameoftrees.org/


From @purd|e@@ @end|ng |rom gm@||@com  Thu Jul 30 06:16:52 2020
From: @purd|e@@ @end|ng |rom gm@||@com (Abby Spurdle)
Date: Thu, 30 Jul 2020 16:16:52 +1200
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <24346.54660.178533.634124@stat.math.ethz.ch>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
 <24346.54660.178533.634124@stat.math.ethz.ch>
Message-ID: <CAB8pepz01aLKspMTCxDNM-PYyudB=XKt87FOcR0yz8xd1nu5_g@mail.gmail.com>

On Sat, Jul 25, 2020 at 12:40 AM Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
> Good answers to this question will depend very much on how many
> 'Machine' and 'Region' levels there are.

I second that.
And unless I missed something, the OP hasn't answered this question, as such.
But "10k+" combinations, does imply around 100 levels each.

Another important question is, are the combinations unique or not?

It would be possible to create an (approx):
    100x100 heatmap of boolean values, for unique combinations, or;
    100x100 heatmap of counts (or density), for non-unique combinations.

But unless there's some meaningful order to the levels, the resulting
plot may end up looking like a $3 pizza.
I'm unable to comment on possible exploratory value, but I doubt that
this is a good approach, for presentation purposes.

If the goal was some sort of ranking, a textual summary, may work better...?
Or you could plot relevant subsets of the data...


From |@p@nyo|com @end|ng |rom gm@||@com  Thu Jul 30 09:17:09 2020
From: |@p@nyo|com @end|ng |rom gm@||@com (=?UTF-8?Q?Engin_Y=C4=B1lmaz?=)
Date: Thu, 30 Jul 2020 10:17:09 +0300
Subject: [R] R Subset by Factor levels
In-Reply-To: <CAMUSX8pKVShYV65Y_RyGs5bbT+R1=rfxH88yPkKsxv5yC3B07w@mail.gmail.com>
References: <CAMUSX8pKVShYV65Y_RyGs5bbT+R1=rfxH88yPkKsxv5yC3B07w@mail.gmail.com>
Message-ID: <CAMUSX8o8d_393XGM_Gj27NG2W6WFK++Cw8McsshtFz0yt_u2Rg@mail.gmail.com>

I solve this as follows

m2 <- subset(m1,`Classification Description`=="Borrowing from the Public" |
`Classification Description`=="By Other Means"  | `Classification
Description`=="Total Surplus (+) or Deficit (-)")

sincerely
Engin YILMAZ

Engin Y?lmaz <ispanyolcom at gmail.com>, 29 Tem 2020 ?ar, 16:57 tarihinde ?unu
yazd?:

> Dear
>
> I try to create a new subset from my dataframe.
> My dataframe's name is m1.
> "Classification Description" column has 15 different factors.
> The following code is used creating a subset for 1 factor.
> m2<-m1[m1$`Classification Description` == levels(m1$`Classification
> Description`)[1],]
>
> My aim is to create a subset with 4 different factors. For example,
> levels(m1$`Classification Description`)[1]
> levels(m1$`Classification Description`)[15]
> levels(m1$`Classification Description`)[2]
> levels(m1$`Classification Description`)[4]
>
> I try to following code but it didnt work
>
> m2<-m1[m1$`Classification Description` == levels(m1$`Classification
> Description`)[c(1,15,2,4],]
>
> How can I solve This Problem ?
>
> Example from my dataframe
>
> `Record Date` `Classification Description`             `Current Month
> Budget Amount`
>    <date>        <fct>
>         <dbl>
>  1 2019-06-30    Total On-Budget and Off-Budget Results:
>           NA
>  2 2019-06-30    Off-Budget Surplus (+) or Deficit (-)
>  41998597035.
>  3 2019-06-30    Total Outlays
> 342428650968.
>  4 2019-06-30    By Other Means
> 51648504883.
>  5 2019-06-30    On-Budget Outlays
> 292169836521.
>  6 2019-06-30    Off-Budget Outlays
> 50258814447.
>  7 2019-06-30    Total Receipts
>  333952332514.
>  8 2019-06-30    On-Budget Surplus (+) or Deficit (-)
>  -50474915489.
>  9 2019-06-30    Off-Budget Receipts
>  92257411482
> 10 2019-06-30    Total On-Budget and Off-Budget Financing
>  8476318454
>
>
>
> --
> *Sayg?lar?mla*
> Engin YILMAZ
>


-- 
*Sayg?lar?mla*
Engin YILMAZ

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 30 11:23:11 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 30 Jul 2020 05:23:11 -0400
Subject: [R] Accessing the C++ source associated with the rgl function
 shade3d
In-Reply-To: <20200729232726.GE194354@posteo.no>
References: <1366280438.6315892.1596058533897.ref@mail.yahoo.com>
 <1366280438.6315892.1596058533897@mail.yahoo.com>
 <C32BA997-D293-4E40-8340-1AF944B52460@dcn.davis.ca.us>
 <20200729232726.GE194354@posteo.no>
Message-ID: <e3f7015f-02ac-726a-ad61-fb8890db86a1@gmail.com>

On 29/07/2020 7:27 p.m., Rasmus Liland wrote:
> Dear Byron,
> 
> On 2020-07-29 18:04 -0400, Duncan Murdoch wrote:
>> The arrow3d function is also a pure R
>> function, but not a generic.  You can
>> see the source by typing "arrow3d".
> 
> ... but if I type rgl::shade3d, I get
> 
> 	> rgl::shade3d
> 	function (x, ...)
> 	UseMethod("shade3d")
> 	<bytecode: 0x562692966fb8>
> 	<environment: namespace:rgl>

That includes the full source code to shade3d.  Like most generic 
functions, it's a one-liner.

In the part of my post that you deleted, I told the OP where to look next.

> 	> dput(rgl::shade3d)
> 	function (x, ...)
> 	UseMethod("shade3d")
> 
> I've observed this is possible in the
> past, but now I can't remember how ...
> 
> On 2020-07-29 15:34 -0700, Jeff Newmiller wrote:
>> On July 29, 2020 2:35:33 PM PDT, Byron Dom wrote:
>>> I'm not familiar with how GitHub is
>>> organized
>>
>> The official way is to find the CRAN
>> package page and download the tar.gz
>> file and extract the files. Either
>> way, you get the whole package source
>> code this way.
> 
> I have a hunch this is the file you're
> looking for
> https://github.com/cran/rgl/blob/master/R/ashape3d.R

No, that's not it.  That file works with mesh3d objects, but it has 
nothing to do with arrows.

Duncan Murdoch

> 
> Remember, dealing with code on github is
> just a small uptick from how Linux was
> developed before, by shipping around
> diffs and tarballs on a mailing list
> much similar to this one, Thorvalds
> merging them into the kernel in the
> authoritarian way.
> 
> You can do it!  *cheers*
> 
> Best,
> Rasmus
> 
> [1] http://gameoftrees.org/
>


From |@p@nyo|com @end|ng |rom gm@||@com  Thu Jul 30 12:27:43 2020
From: |@p@nyo|com @end|ng |rom gm@||@com (=?UTF-8?Q?Engin_Y=C4=B1lmaz?=)
Date: Thu, 30 Jul 2020 13:27:43 +0300
Subject: [R] adding new level with new values and transpose the dataframe
Message-ID: <CAMUSX8qDz6HPawhRULB_f=597sCULGPbcrZXPGRq3bGPShvCRw@mail.gmail.com>

* Record Date*

*Classification Description*

*Current Month Budget Amount*



2020-06-30

Total Surplus (+) or Deficit (-)

 -864,074,068,492



2020-06-30

Borrowing from the Public

  716,272,172,707



2020-06-30

By Other Means

  420,704,500,379



2020-05-31

Borrowing from the Public

  759,987,728,236



2020-05-31

By Other Means

  -92,071,767,771



2020-05-31

Total Surplus (+) or Deficit (-)

 -398,821,413,660

Dear

I have a 2 questions

I have 3 different factors for every month in my dataframe.The column
of classification description has 3 factors.

Question 1:
I need to add a new factor to the column of classification description but
this *will be a summation* of other 3 factors in every month. How can I
realize this?

Question 2:
How can I transpose my dataframe as the following ?



Total Surplus (+) or Deficit (-)

Borrowing from the Public

By Other Means

2020-06-30

-864,074,068,492





716,272,172,707



420,704,500,379

2020-05-31

  759,987,728,236





-92,071,767,771



-398,821,413,660

Sincerely
Engin YILMAZ

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Thu Jul 30 13:02:24 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 30 Jul 2020 21:02:24 +1000
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
Message-ID: <CA+8X3fXjkygK7ecWBS-yU-NzMUAB=cJ13tYOA4=fO6GPj5OqZw@mail.gmail.com>

Hi Ritwik,
Carlos made an excellent suggestion and there are at least two ways to
plot "machine" and "region" as the cells in a 2D matrix and then add
two more variables (say count and price) as the attributes of each
cell. Is the data you are using publicly available? If so a
demonstration of this would not be difficult to program.

Jim

On Fri, Jul 24, 2020 at 9:55 PM Ritwik Mohapatra <ritm84 at gmail.com> wrote:
>
> How to create a readable and legible plot in R with 10k+ values.I have a
> dataframe with 17298 records.There are two columns:Machine Name(Character)
> and Region(Character).So i want to create a readable plot with region in x
> axis and machine name in y axis.How do i do that using ggplot or any other
> way.Please help.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Thu Jul 30 13:13:08 2020
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 30 Jul 2020 21:13:08 +1000
Subject: [R] 
 adding new level with new values and transpose the dataframe
In-Reply-To: <CAMUSX8qDz6HPawhRULB_f=597sCULGPbcrZXPGRq3bGPShvCRw@mail.gmail.com>
References: <CAMUSX8qDz6HPawhRULB_f=597sCULGPbcrZXPGRq3bGPShvCRw@mail.gmail.com>
Message-ID: <CA+8X3fX2cYXnRRyiBVz3Afh+xyUkYH1ZtZ_v+Ku+nQ7Mg43ODA@mail.gmail.com>

Hi Engin,
If you know what all the levels are, you can specify these in the
format command:

Classification_Description<-factor(Classification_Description,
 levels=c("Total Surplus (+) or Deficit (-)","Borrowing from the Public",
  "By other means"))

This ensures that all the levels are encoded even if one or more
levels is missing in the incoming data.

Jim

On Thu, Jul 30, 2020 at 8:33 PM Engin Y?lmaz <ispanyolcom at gmail.com> wrote:
>
> * Record Date*
>
> *Classification Description*
>
> *Current Month Budget Amount*
>
>
>
> 2020-06-30
>
> Total Surplus (+) or Deficit (-)
>
>  -864,074,068,492
>
>
>
> 2020-06-30
>
> Borrowing from the Public
>
>   716,272,172,707
>
>
>
> 2020-06-30
>
> By Other Means
>
>   420,704,500,379
>
>
>
> 2020-05-31
>
> Borrowing from the Public
>
>   759,987,728,236
>
>
>
> 2020-05-31
>
> By Other Means
>
>   -92,071,767,771
>
>
>
> 2020-05-31
>
> Total Surplus (+) or Deficit (-)
>
>  -398,821,413,660
>
> Dear
>
> I have a 2 questions
>
> I have 3 different factors for every month in my dataframe.The column
> of classification description has 3 factors.
>
> Question 1:
> I need to add a new factor to the column of classification description but
> this *will be a summation* of other 3 factors in every month. How can I
> realize this?
>
> Question 2:
> How can I transpose my dataframe as the following ?
>
>
>
> Total Surplus (+) or Deficit (-)
>
> Borrowing from the Public
>
> By Other Means
>
> 2020-06-30
>
> -864,074,068,492
>
>
>
>
>
> 716,272,172,707
>
>
>
> 420,704,500,379
>
> 2020-05-31
>
>   759,987,728,236
>
>
>
>
>
> -92,071,767,771
>
>
>
> -398,821,413,660
>
> Sincerely
> Engin YILMAZ
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jr@| @end|ng |rom po@teo@no  Thu Jul 30 13:15:32 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 30 Jul 2020 13:15:32 +0200
Subject: [R] Accessing the C++ source associated with the rgl function
 shade3d
In-Reply-To: <e3f7015f-02ac-726a-ad61-fb8890db86a1@gmail.com>
References: <1366280438.6315892.1596058533897.ref@mail.yahoo.com>
 <1366280438.6315892.1596058533897@mail.yahoo.com>
 <C32BA997-D293-4E40-8340-1AF944B52460@dcn.davis.ca.us>
 <20200729232726.GE194354@posteo.no>
 <e3f7015f-02ac-726a-ad61-fb8890db86a1@gmail.com>
Message-ID: <20200730111532.GC30190@posteo.no>

On 2020-07-30 05:23 -0400, Duncan Murdoch wrote:
> On 29/07/2020 7:27 p.m., Rasmus Liland wrote:
> > On 2020-07-29 18:04 -0400, Duncan Murdoch wrote:
> > > The arrow3d function is also a pure R
> > > function, but not a generic.  You can
> > > see the source by typing "arrow3d".
> > 
> > ... but if I type rgl::shade3d, I get
> > 
> > 	> rgl::shade3d
> > 	function (x, ...)
> > 	UseMethod("shade3d")
> > 	<bytecode: 0x562692966fb8>
> > 	<environment: namespace:rgl>
> 
> That includes the full source code to 
> shade3d.  Like most generic functions, 
> it's a one-liner.
> 
> In the part of my post that you 
> deleted, I told the OP where to look 
> next.

This part:

> > > type "rgl:::shade3d.mesh3d" and you 
> > > can see the full source.

Three colons.  I didn't see it at first; 
Hmm ... I might have dyslexia or 
something ... 

So, Byron, this is the code that R 
reinterprets from the source,

	Rscript -e 'rgl:::arrow3d' | less
	Rscript -e 'rgl:::shade3d.mesh3d' | less

so you cannot necessarily grab a line 
from there and expect it to look exactly 
the same in the source files.

	rasmus at beefylinuxbox ~ % grep -R 'paste(allowedMeshColor,' src/rgl
	src/rgl/R/mesh3d.R:    stop("'meshColor' must be one of: ", paste(allowedMeshColor, collapse = ", "))
	rasmus at beefylinuxbox ~ % grep -R 'pi - pi/nbarbs,' src/rgl
	1 rasmus at beefylinuxbox ~ % grep -R 'pi/nbarbs,' src/rgl
	src/rgl/R/arrow3d.R: phi <- seq(pi/nbarbs, 2*pi-pi/nbarbs, len = nbarbs)
	rasmus at beefylinuxbox ~ %

> > https://github.com/cran/rgl/blob/master/R/ashape3d.R
> 
> No, that's not it.  That file works 
> with mesh3d objects, but it has 
> nothing to do with arrows.

... I'm sorry, now I believe 
rgl::shade3d.mesh3d and rgl::arrow3d 
lives in 
https://github.com/cran/rgl/blob/master/R/mesh3d.R 
and 
https://github.com/cran/rgl/blob/master/R/arrow3d.R 
respectively.

Byron, there's a bunch of .cpp and .h 
files in 
https://github.com/cran/rgl/blob/master/src
you can look at to find the triangle or 
quadrilateral code you're interested in, 
I'm not quite sure what to look for 
there.

Best,
Rasmus


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jul 30 14:45:05 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 30 Jul 2020 08:45:05 -0400
Subject: [R] Accessing the C++ source associated with the rgl function
 shade3d
In-Reply-To: <C32BA997-D293-4E40-8340-1AF944B52460@dcn.davis.ca.us>
References: <1366280438.6315892.1596058533897.ref@mail.yahoo.com>
 <1366280438.6315892.1596058533897@mail.yahoo.com>
 <C32BA997-D293-4E40-8340-1AF944B52460@dcn.davis.ca.us>
Message-ID: <6adb6a11-cd8a-c96a-7c8b-3d2c94712623@gmail.com>

On 29/07/2020 6:34 p.m., Jeff Newmiller wrote:
> To begin with, don't assume it is in C++... R supports multiple compiled languages, and rgl appears to have both C++ and C in it.

Also a few thousand lines of Javascript, but in this case, the 
interesting code is all in R.

> 
> I googled "r rgl github" and found an online copy of the src (source) files right away. The official way is to find the CRAN package page and download the tar.gz file and extract the files. Either way, you get the whole package source code this way.

If you're using RStudio, a really convenient way to view the source for 
a package whose source is on Github (maybe the majority of packages 
these days?) is to create a new project from it.  Then you can use the 
built-in search functions to jump to the source of any function.

For rgl, you can get a copy of the Github mirror of the source by 
specifying the "Repository URL" as "https://github.com/rforge/rgl", and 
the "Project directory name" as "pkg/rgl".  (The source is hosted in 
Subversion on R-forge.r-project.org, but Subversion is less familiar to 
most people these days and R-forge is pretty old-fashioned, so I'd go 
with Github instead.  There are some irritating things about Github.)

Once you've got it in RStudio, you can type "shade3d" in the "Go to 
file/function" box, and it will offer the generic as well as the two 
methods shade3d.mesh3d and shade3d.shapelist3d.

This kind of search is probably also possible in other front ends (ESS 
etc.), and some purists probably know how to set it all up in command 
line BSD Unix, but I don't.

Duncan Murdoch

> I am afraid I don't have time to dig into the source to identify which file you need. Keeping in mind that the rgl package is an interface to lower level code, beware that you may need to leave the R code to find what you are looking for... in which case you would be dealing with a different code base and community of coders.
> 
> On July 29, 2020 2:35:33 PM PDT, Byron Dom via R-help <r-help at r-project.org> wrote:
>> How can I access the C++ source associated with the rgl function
>> shade3d. More specifically, I'm interested in the part of the code used
>> by arrow3d to draw arrow heads.
>>
>> I'm not familiar with how GitHub is organized and I've put in a lot of
>> effort doing searches there and on the web in general. The result has
>> been a few fragments of rgl C++ code but not what I'm looking for.
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From jr@| @end|ng |rom po@teo@no  Thu Jul 30 15:03:35 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 30 Jul 2020 15:03:35 +0200
Subject: [R] 
 adding new level with new values and transpose the dataframe
In-Reply-To: <CA+8X3fX2cYXnRRyiBVz3Afh+xyUkYH1ZtZ_v+Ku+nQ7Mg43ODA@mail.gmail.com>
References: <CAMUSX8qDz6HPawhRULB_f=597sCULGPbcrZXPGRq3bGPShvCRw@mail.gmail.com>
 <CA+8X3fX2cYXnRRyiBVz3Afh+xyUkYH1ZtZ_v+Ku+nQ7Mg43ODA@mail.gmail.com>
Message-ID: <20200730130335.GA70490@posteo.no>

Hi Engin,

On 2020-07-30 21:13 +1000, Jim Lemon wrote:
| On Thu, Jul 30, 2020 at 8:33 PM Engin Y?lmaz wrote:
| |
| | I have 3 different factors for every 
| | month in my dataframe.The column of 
| | classification description has 3 
| | factors.
| |
| | Question 1:
| | I need to add a new factor to the 
| | column of classification description 
| | but this *will be a summation* of 
| | other 3 factors in every month. How 
| | can I realize this?
| 
| Hi Engin,
| If you know what all the levels are, 
| you can specify these in the format 
| command:
| 
| Classification_Description<-factor(Classification_Description,
|  levels=c("Total Surplus (+) or Deficit (-)","Borrowing from the Public",
|   "By other means"))
| 
| This ensures that all the levels are 
| encoded even if one or more levels is 
| missing in the incoming data.

... and you can add a new/change
the order of the levels later on
using levels() like this:

	levels(engin[,"Classification Description"]) <-
	  c(levels(engin[,"Classification Description"]),
	    "New level")

| | Question 2:
| | How can I transpose my dataframe as 
| | the following ?

This is the same as the first example in 
?reshape on Indometh long to wide.

	reshape(data=engin,
	  v.names="Current Month Budget Amount",
	  idvar="Record Date",
	  timevar="Classification Description",
	  direction="wide")

P.S. dput() is such a great function for 
pasting data in emails like this:

	engin <- structure(list(
	`Record Date` = c("2020-06-30", 
	"2020-06-30", "2020-06-30", 
	"2020-05-31", "2020-05-31", 
	"2020-05-31"),
	`Classification Description` = 
	structure(c(3L, 1L, 2L, 1L, 2L, 3L),
	.Label = c("Borrowing from the Public", 
	"By Other Means", 
	"Total Surplus (+) or Deficit (-)"),
	class = "factor"),
	`Current Month Budget Amount` =
	c("-864,074,068,492", "716,272,172,707",
	"420,704,500,379", "759,987,728,236",
	"-92,071,767,771", "-398,821,413,660")),
	row.names = c(NA, -6L),
	class = "data.frame")

Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200730/52b7a1ef/attachment.sig>

From er|cjberger @end|ng |rom gm@||@com  Thu Jul 30 15:21:18 2020
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 30 Jul 2020 16:21:18 +0300
Subject: [R] Accessing the C++ source associated with the rgl function
 shade3d
In-Reply-To: <6adb6a11-cd8a-c96a-7c8b-3d2c94712623@gmail.com>
References: <1366280438.6315892.1596058533897.ref@mail.yahoo.com>
 <1366280438.6315892.1596058533897@mail.yahoo.com>
 <C32BA997-D293-4E40-8340-1AF944B52460@dcn.davis.ca.us>
 <6adb6a11-cd8a-c96a-7c8b-3d2c94712623@gmail.com>
Message-ID: <CAGgJW77=eOzk4BLgK=-4URC=hOUg4TMppRiaP6SBoExKpegGCw@mail.gmail.com>

Duncan writes:
>> " ... If you're using RStudio, a really convenient way to view the source ..."

This is fantastic! Thank you for this Duncan.

On Thu, Jul 30, 2020 at 3:45 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 29/07/2020 6:34 p.m., Jeff Newmiller wrote:
> > To begin with, don't assume it is in C++... R supports multiple compiled languages, and rgl appears to have both C++ and C in it.
>
> Also a few thousand lines of Javascript, but in this case, the
> interesting code is all in R.
>
> >
> > I googled "r rgl github" and found an online copy of the src (source) files right away. The official way is to find the CRAN package page and download the tar.gz file and extract the files. Either way, you get the whole package source code this way.
>
> If you're using RStudio, a really convenient way to view the source for
> a package whose source is on Github (maybe the majority of packages
> these days?) is to create a new project from it.  Then you can use the
> built-in search functions to jump to the source of any function.
>
> For rgl, you can get a copy of the Github mirror of the source by
> specifying the "Repository URL" as "https://github.com/rforge/rgl", and
> the "Project directory name" as "pkg/rgl".  (The source is hosted in
> Subversion on R-forge.r-project.org, but Subversion is less familiar to
> most people these days and R-forge is pretty old-fashioned, so I'd go
> with Github instead.  There are some irritating things about Github.)
>
> Once you've got it in RStudio, you can type "shade3d" in the "Go to
> file/function" box, and it will offer the generic as well as the two
> methods shade3d.mesh3d and shade3d.shapelist3d.
>
> This kind of search is probably also possible in other front ends (ESS
> etc.), and some purists probably know how to set it all up in command
> line BSD Unix, but I don't.
>
> Duncan Murdoch
>
> > I am afraid I don't have time to dig into the source to identify which file you need. Keeping in mind that the rgl package is an interface to lower level code, beware that you may need to leave the R code to find what you are looking for... in which case you would be dealing with a different code base and community of coders.
> >
> > On July 29, 2020 2:35:33 PM PDT, Byron Dom via R-help <r-help at r-project.org> wrote:
> >> How can I access the C++ source associated with the rgl function
> >> shade3d. More specifically, I'm interested in the part of the code used
> >> by arrow3d to draw arrow heads.
> >>
> >> I'm not familiar with how GitHub is organized and I've put in a lot of
> >> effort doing searches there and on the web in general. The result has
> >> been a few fragments of rgl C++ code but not what I'm looking for.
> >>
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From no@p@m @end|ng |rom ||@@e@NA  Wed Jul 29 22:21:32 2020
From: no@p@m @end|ng |rom ||@@e@NA (Dr Eberhard Lisse)
Date: Wed, 29 Jul 2020 22:21:32 +0200
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
Message-ID: <rfsloc$tjs$1@ciao.gmane.io>

I always find two things helpful

1) RTFM

2) Asking myself what information do I want to convey 
   before thinking about how to do that. 

>From the below I can not understand what you want to tell 
your audience.

I don't think it's helpful trying to read 17298 names on a 
plot so maybe show the counts by region, perhaps with another 
grouping.

>From the data sample in another post, one could maybe group/count
count the host(names) and them plot it on a worldmap with a colour 
scale showing the numbers.


el

On 2020-07-23 20:11 , Ritwik Mohapatra wrote:
> How to create a readable and legible plot in R with 10k+ values.I have a
> dataframe with 17298 records.There are two columns:Machine Name(Character)
> and Region(Character).So i want to create a readable plot with region in x
> axis and machine name in y axis.How do i do that using ggplot or any other
> way.Please help.
> 
> 	[[alternative HTML version deleted]]
> 


-- 
If you want to email me, replace nospam with el


From r|tm84 @end|ng |rom gm@||@com  Thu Jul 30 18:36:16 2020
From: r|tm84 @end|ng |rom gm@||@com (Ritwik Mohapatra)
Date: Thu, 30 Jul 2020 22:06:16 +0530
Subject: [R] How to create a readable plot in R with 10000+ values in a
 dataframe
In-Reply-To: <rfsloc$tjs$1@ciao.gmane.io>
References: <CAGY2U91w6rvazLFmScv6zsPngwSp=2yBvPS4H4ZoM51CjDxS-A@mail.gmail.com>
 <rfsloc$tjs$1@ciao.gmane.io>
Message-ID: <CAGY2U91OaoQ6+utfVU5JXbEdFUnDpSwpA0CG0e76h1bUn83dvg@mail.gmail.com>

Hi All,

Thanks for all the suggestions and help.I have gone for simpler plots with
lesser values for demonstration now which served the purpose.

Regards,
Ritwik

On Thu, 30 Jul, 2020, 22:00 Dr Eberhard Lisse, <nospam at lisse.na> wrote:

> I always find two things helpful
>
> 1) RTFM
>
> 2) Asking myself what information do I want to convey
>    before thinking about how to do that.
>
> From the below I can not understand what you want to tell
> your audience.
>
> I don't think it's helpful trying to read 17298 names on a
> plot so maybe show the counts by region, perhaps with another
> grouping.
>
> From the data sample in another post, one could maybe group/count
> count the host(names) and them plot it on a worldmap with a colour
> scale showing the numbers.
>
>
> el
>
> On 2020-07-23 20:11 , Ritwik Mohapatra wrote:
> > How to create a readable and legible plot in R with 10k+ values.I have a
> > dataframe with 17298 records.There are two columns:Machine
> Name(Character)
> > and Region(Character).So i want to create a readable plot with region in
> x
> > axis and machine name in y axis.How do i do that using ggplot or any
> other
> > way.Please help.
> >
> >       [[alternative HTML version deleted]]
> >
>
>
> --
> If you want to email me, replace nospam with el
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jr@| @end|ng |rom po@teo@no  Thu Jul 30 18:44:42 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Thu, 30 Jul 2020 18:44:42 +0200
Subject: [R] 
 adding new level with new values and transpose the dataframe
In-Reply-To: <CAMUSX8oAjp3wJzkdJ5EZYUxEWJB==3CdvZfvk=yX5HGQxUsvAQ@mail.gmail.com>
References: <CAMUSX8qDz6HPawhRULB_f=597sCULGPbcrZXPGRq3bGPShvCRw@mail.gmail.com>
 <CA+8X3fX2cYXnRRyiBVz3Afh+xyUkYH1ZtZ_v+Ku+nQ7Mg43ODA@mail.gmail.com>
 <20200730130335.GA70490@posteo.no>
 <CAMUSX8oAjp3wJzkdJ5EZYUxEWJB==3CdvZfvk=yX5HGQxUsvAQ@mail.gmail.com>
Message-ID: <20200730164442.GC83963@posteo.no>

On 2020-07-30 18:07 +0300, Engin Y?lmaz wrote:
| El jueves, 30 de julio de 2020, Rasmus Liland escribi?:
| | On 2020-07-30 21:13 +1000, Jim Lemon wrote:
| | | On Thu, Jul 30, 2020 at 8:33 PM Engin Y?lmaz wrote:
| | | |
| | | | I have 3 different factors for every
| | | | month in my dataframe.The column of
| | | | classification description has 3
| | | | factors.
| | | |
| | | | Question 1:
| | | | I need to add a new factor to the
| | | | column of classification description
| | | | but this *will be a summation* of
| | | | other 3 factors in every month. How
| | | | can I realize this?
| | |
| | | Hi Engin,
| | | If you know what all the levels are,
| | | you can specify these in the format
| | | command:
| | |
| | | Classification_Description<-factor(Classification_Description,
| | |  levels=c("Total Surplus (+) or Deficit (-)","Borrowing from the Public",
| | |   "By other means"))
| | |
| | | This ensures that all the levels are
| | | encoded even if one or more levels is
| | | missing in the incoming data.
| |
| | ... and you can add a new/change
| | the order of the levels later on
| | using levels() like this:
| |
| |         levels(engin[,"Classification Description"]) <-
| |           c(levels(engin[,"Classification Description"]),
| |             "New level")
| |
| | | | Question 2:
| | | | How can I transpose my dataframe as
| | | | the following ?
| |
| | This is the same as the first example in
| | ?reshape on Indometh long to wide.
| |
| |         reshape(data=engin,
| |           v.names="Current Month Budget Amount",
| |           idvar="Record Date",
| |           timevar="Classification Description",
| |           direction="wide")
| 
| Dear liland
| 
| 1-new level *will be a summation* of
| other 3 factors in every month?

Oh, you mean setting a group of levels 
to the same level, right?  Well, you 
could select them using match, like in 
the other mail thread:

	idx <-
	  levels(engin[,"Classification Description"]) %in%
	    c("Borrowing from the Public",
	      "Some other outrageous source of income")
	levels(engin[,"Classification Description"])[idx] <- 
	  "By Other Means"

Got some errors, thus did some 
?reading?[1], perhaps it is useful in 
this case to use reshape2 instead of the 
regular reshape to do the summation:

	my_func <- function(x) {
	  paste0(deparse(x), collapse="")
	}
	engin[,"Current Month Budget Amount"] <-
	  as.numeric(gsub(",", "",
	    engin[,"Current Month Budget Amount"]))
	engin.melt <- reshape2::melt(engin,
	  id.vars=
	    c("Record Date",
	      "Classification Description"))
	colnames(engin.melt)[1:2] <- 
	  c("date", "class")
	reshape2::dcast(
	  data=engin.melt,
	  formula=date~class+.,
	  value.var="value",
	  fun.aggregate=my_func)
	reshape2::dcast(
	  data=engin.melt,
	  formula=date~class+.,
	  value.var="value",
	  fun.aggregate=sum)

| 2-For your transpose approach, I have 
| a 200 rows

200 ?Record Date? rows or?  Please 
explain.

Best,
Rasmus

[1] https://stackoverflow.com/questions/20795290/why-is-it-returning-a-warning-when-reshaping-in-r

P.S. adding this into the list again ...

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200730/8f2aa111/attachment.sig>

From p@u|@b|v@nd @end|ng |rom gm@||@com  Thu Jul 30 18:50:46 2020
From: p@u|@b|v@nd @end|ng |rom gm@||@com (Paul Bivand)
Date: Thu, 30 Jul 2020 17:50:46 +0100
Subject: [R] How to generate this type of scatter plots in R
In-Reply-To: <CA+8X3fXY7aPdF6VXHsAYdrbOPqZHe33r7EQUasgBJXfpX6-hGg@mail.gmail.com>
References: <663032042.5728737.1595452450306.ref@mail.yahoo.com>
 <663032042.5728737.1595452450306-7586@mail.yahoo.com>
 <CA+8X3fXY7aPdF6VXHsAYdrbOPqZHe33r7EQUasgBJXfpX6-hGg@mail.gmail.com>
Message-ID: <CAC=KSNiaseKKhwQwUK8_p--z7ZMKRife9ahmroSggYjZSM-Xfw@mail.gmail.com>

This looks like a beeswarm plot - using package beeswarm or (for
ggplot users) ggbeeswarm.

Paul

On Thu, 23 Jul 2020 at 05:31, Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi John,
> Perhaps "dendroPlot" in the plotrix package?
>
> JIm
>
> On Thu, Jul 23, 2020 at 11:00 AM array chip via R-help
> <r-help at r-project.org> wrote:
> >
> >
> > Hello everyone,
> >
> > I saw this scatterplots from a paper and thought it looked very nice:
> >
> > https://drive.google.com/file/d/1V7F1gq-J_GIFDOrJs00hwGyXUqCZ_xwa/view?usp=sharing
> >
> > It was similar to stripchart() with 'jitter' method, but it has a special pattern of aligning points which made it look nicer than standard stripchart().
> >
> > Does anyone know if there is a package in R that can do this kind of plots?
> >
> > Thanks,
> >
> > John
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ggrothend|eck @end|ng |rom gm@||@com  Fri Jul 31 00:09:19 2020
From: ggrothend|eck @end|ng |rom gm@||@com (Gabor Grothendieck)
Date: Thu, 30 Jul 2020 18:09:19 -0400
Subject: [R] Help with read.csv.sql()
In-Reply-To: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
Message-ID: <CAP01uR=FuptYqi4eOAh4pV9GNozYo2dy7Kv9ZhtF9uHW6iLgqQ@mail.gmail.com>

Probably simplest to assign the names afterwards as others have
suggested but it could be done like this:

  library(sqldf)
  write.csv(BOD, "BOD.csv", quote = FALSE, row.names = FALSE)  # test data

  read.csv.sql("BOD.csv", "select Time as Time2, demand as demand2 from file")

giving the column names Time2 and demand2 rather than the original column names.

    Time2 demand2
  1     1     8.3
  2     2    10.3
  3     3    19.0
  4     4    16.0
  5     5    15.6
  6     7    19.8

On Fri, Jul 17, 2020 at 9:28 PM H <agents at meddatainc.com> wrote:
>
> I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.
>
> The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.
>
> I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.
>
> It seems that the above should be feasible but I am missing something? Does anyone know?
>
> A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.
>
> Is it possible to do this when importing using read.csv.sql()?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From @gent@ @end|ng |rom medd@t@|nc@com  Fri Jul 31 01:56:00 2020
From: @gent@ @end|ng |rom medd@t@|nc@com (H)
Date: Thu, 30 Jul 2020 19:56:00 -0400
Subject: [R] Help with read.csv.sql()
In-Reply-To: <CAP01uR=FuptYqi4eOAh4pV9GNozYo2dy7Kv9ZhtF9uHW6iLgqQ@mail.gmail.com>
References: <a3db267f-2a43-25c9-1ef3-35b2539b2924@meddatainc.com>
 <CAP01uR=FuptYqi4eOAh4pV9GNozYo2dy7Kv9ZhtF9uHW6iLgqQ@mail.gmail.com>
Message-ID: <444d20fe-2f8c-3af8-3455-e2fb80cefab5@meddatainc.com>

On 07/30/2020 06:09 PM, Gabor Grothendieck wrote:
> Probably simplest to assign the names afterwards as others have
> suggested but it could be done like this:
>
>   library(sqldf)
>   write.csv(BOD, "BOD.csv", quote = FALSE, row.names = FALSE)  # test data
>
>   read.csv.sql("BOD.csv", "select Time as Time2, demand as demand2 from file")
>
> giving the column names Time2 and demand2 rather than the original column names.
>
>     Time2 demand2
>   1     1     8.3
>   2     2    10.3
>   3     3    19.0
>   4     4    16.0
>   5     5    15.6
>   6     7    19.8
>
> On Fri, Jul 17, 2020 at 9:28 PM H <agents at meddatainc.com> wrote:
>> I have created a dataframe with columns that are characters, integers and numeric and with column names assigned by me. I am using read.csv.sql() to read portions of a number of large csv files into this dataframe, each csv file having a header row with columb names.
>>
>> The problem I am having is that the csv files have header rows with column names that are slightly different from the column names I have assigned in the dataframe and it seems that when I read the csv data into the dataframe, the column names from the csv file replace the column names I chose when creating the dataframe.
>>
>> I have been unable to figure out if it is possible to assign column names of my choosing in the read.csv.sql() function? I have tried various variations but none seem to work. I tried colClasses = c(....) but that did not work, I tried field.types = c(...) but could not get that to work either.
>>
>> It seems that the above should be feasible but I am missing something? Does anyone know?
>>
>> A secondary issue is that the csv files have a column with a date in mm/dd/yyyy format that I would like to make into a Date type column in my dataframe. Again, I have been unable to find a way - if at all possible - to force a conversion into a Date format when importing into the dataframe. The best I have so far is to import is a character column and then use as.Date() to later force the conversion of the dataframe column.
>>
>> Is it possible to do this when importing using read.csv.sql()?
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
Apologies, I had tuned out from this discussion since I solved the problem by renaming the columns after reading the file. Your suggestion to do it in the SQL statement itself, however, seems to be neatest one though!

Thank you.


From percent||101 @end|ng |rom gm@||@com  Thu Jul 30 22:16:18 2020
From: percent||101 @end|ng |rom gm@||@com (=?UTF-8?Q?Pedro_p=C3=A1ramo?=)
Date: Thu, 30 Jul 2020 22:16:18 +0200
Subject: [R] hist from a list
Message-ID: <CAB-TgNv88YE29BkrXg9teFoMGXVOGfrYtDWy+Ltb8znRK9_OFQ@mail.gmail.com>

Hi all,

I attach my code, the think is I want to make a bar plot the last variable
called "bwchist"

 so the X axis are "Accion" and the y axis are "reval" values.

I have prove class(bwchist) and says dataframe but its still a list because
it says me

I have prove to unlist,  but it doesnt work

hist(bwchist)
Error in hist.default(bwchist) : 'x' must be numeric

Or

barplot(bwchist)
Error in barplot.default(bwchist) : 'height' must be a vector or a matrix

library(PerformanceAnalytics)
library(dplyr)
library(tibble)
library(lubridate)
library(PerformanceAnalytics)
library(quantmod)
library(ggplot2)
library(png)
library(grid)
library(RCurl)
library(tidyquant)
library(timetk)
library(data.table)



Acciona<- tq_get("ANA.MC",from = '2019-12-31',get = "stock.prices")
ACS<- tq_get("ACS.MC",from = '2019-12-31',get = "stock.prices")
Aena<- tq_get("AENA.MC",from = '2019-12-31',get = "stock.prices")
Amadeus<- tq_get("AMS.MC",from = '2019-12-31',get = "stock.prices")
ArcelorMittal<- tq_get("MTS.MC",from = '2019-12-31',get = "stock.prices")
BBVA<- tq_get("BBVA.MC",from = '2019-12-31',get = "stock.prices")
Sabadell<- tq_get("SAB.MC",from = '2019-12-31',get = "stock.prices")
Santander<- tq_get("SAN.MC",from = '2019-12-31',get = "stock.prices")
Bankinter<- tq_get("BKT.MC",from = '2019-12-31',get = "stock.prices")
CaixaBank<- tq_get("CABK.MC",from = '2019-12-31',get = "stock.prices")
Cellnex<- tq_get("CLNX.MC",from = '2019-12-31',get = "stock.prices")
Enagas<- tq_get("ENG.MC",from = '2019-12-31',get = "stock.prices")
ENCE<- tq_get("ENC.MC",from = '2019-12-31',get = "stock.prices")
Endesa<- tq_get("ELE.MC",from = '2019-12-31',get = "stock.prices")
Ferrovial<- tq_get("FER.MC",from = '2019-12-31',get = "stock.prices")
Grifols<- tq_get("GRF.MC",from = '2019-12-31',get = "stock.prices")
Iberdrola<- tq_get("IBE.MC",from = '2019-12-31',get = "stock.prices")
Inditex<- tq_get("ITX.MC",from = '2019-12-31',get = "stock.prices")
Colonial<- tq_get("COL.MC",from = '2019-12-31',get = "stock.prices")
IAG<- tq_get("IAG.MC",from = '2019-12-31',get = "stock.prices")
Mapfre<- tq_get("MAP.MC",from = '2019-12-31',get = "stock.prices")
Melia<- tq_get("MEL.MC",from = '2019-12-31',get = "stock.prices")
Merlin<- tq_get("MRL.MC",from = '2019-12-31',get = "stock.prices")
Naturgy<- tq_get("NTGY.MC",from = '2019-12-31',get = "stock.prices")
REE<- tq_get("REE.MC",from = '2019-12-31',get = "stock.prices")
Repsol<- tq_get("REP.MC",from = '2019-12-31',get = "stock.prices")
SGamesa<- tq_get("SGRE.MC",from = '2019-12-31',get = "stock.prices")
Telefonica<- tq_get("TEF.MC",from = '2019-12-31',get = "stock.prices")
Viscofan<- tq_get("VIS.MC",from = '2019-12-31',get = "stock.prices")
Acerinox<- tq_get("ACX.MC",from = '2019-12-31',get = "stock.prices")
Bankia<- tq_get("BKIA.MC",from = '2019-12-31',get = "stock.prices")
CIE<- tq_get("CIE.MC",from = '2019-12-31',get = "stock.prices")
MasMovil<- tq_get("MAS.MC",from = '2019-12-31',get = "stock.prices")
Almirall<- tq_get("ALM.MC",from = '2019-12-31',get = "stock.prices")
Indra<- tq_get("IDR.MC",from ='2019-12-31',get = "stock.prices")

Indra_daily_returns <- Indra %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Indra_cum_returns <- Indra_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Almirall_daily_returns <- Almirall %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Almirall_cum_returns <- Almirall_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Acciona_daily_returns <- Acciona %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Acciona_cum_returns <- Acciona_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

ACS_daily_returns <- ACS %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
ACS_cum_returns <- ACS_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Aena_daily_returns <- Aena %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Aena_cum_returns <- Aena_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Amadeus_daily_returns <- Amadeus %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Amadeus_cum_returns <- Amadeus_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

ArcelorMittal_daily_returns <- ArcelorMittal %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
ArcelorMittal_cum_returns <- ArcelorMittal_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

BBVA_daily_returns <- BBVA %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
BBVA_cum_returns <- BBVA_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)


Sabadell_daily_returns <- Sabadell %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Sabadell_cum_returns <- Sabadell_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Santander_daily_returns <- Santander %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Santander_cum_returns <- Santander_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)


Bankinter_daily_returns <- Bankinter %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Bankinter_cum_returns <- Bankinter_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

CaixaBank_daily_returns <- CaixaBank %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
CaixaBank_cum_returns <- CaixaBank_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Cellnex_daily_returns <- Cellnex %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Cellnex_cum_returns <- Cellnex_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

CIE_daily_returns <- CIE %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
CIE_cum_returns <- CIE_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

CIE_daily_returns <- CIE %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
CIE_cum_returns <- CIE_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Enagas_daily_returns <- Enagas %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Enagas_cum_returns <- Enagas_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)


ENCE_daily_returns <- ENCE %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
ENCE_cum_returns <- ENCE_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)
Endesa_daily_returns <- Endesa %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Endesa_cum_returns <- Endesa_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)
Ferrovial_daily_returns <- Ferrovial %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Ferrovial_cum_returns <- Ferrovial_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Grifols_daily_returns <- Grifols %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Grifols_cum_returns <- Grifols_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Iberdrola_daily_returns <- Iberdrola %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Iberdrola_cum_returns <- Iberdrola_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Inditex_daily_returns <- Inditex %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Inditex_cum_returns <- Inditex_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Colonial_daily_returns <- Colonial %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Colonial_cum_returns <- Colonial_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

IAG_daily_returns <- IAG %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
IAG_cum_returns <- IAG_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Mapfre_daily_returns <- Mapfre %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Mapfre_cum_returns <- Mapfre_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Melia_daily_returns <- Melia %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Melia_cum_returns <- Melia_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Merlin_daily_returns <- Merlin %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Merlin_cum_returns <- Merlin_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Naturgy_daily_returns <- Naturgy %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Naturgy_cum_returns <- Naturgy_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

REE_daily_returns <- REE %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
REE_cum_returns <- REE_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Repsol_daily_returns <- Repsol %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Repsol_cum_returns <- Repsol_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

SGamesa_daily_returns <- SGamesa %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
SGamesa_cum_returns <- SGamesa_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Telefonica_daily_returns <- Telefonica %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Telefonica_cum_returns <- Telefonica_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Viscofan_daily_returns <- Viscofan %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Viscofan_cum_returns <- Viscofan_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Acerinox_daily_returns <- Acerinox %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Acerinox_cum_returns <- Acerinox_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)


Bankia_daily_returns <- Bankia %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Bankia_cum_returns <- Bankia_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

MasMovil_daily_returns <- MasMovil %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
MasMovil_cum_returns <- MasMovil_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

Indra_daily_returns <- Indra %>%
  tq_transmute(select = adjusted,           # this specifies which column
to select
               mutate_fun = periodReturn,   # This specifies what to do
with that column
               period = "daily",      # This argument calculates Daily
returns
               col_rename = "idr_returns") # renames the column
Indra_cum_returns <- Indra_daily_returns %>%
  mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
function
  mutate(cumulative_returns = cr - 1)

bestworst<-c(Acciona_cum_returns[nrow(Acciona_cum_returns),4],
             ACS_cum_returns[nrow(ACS_cum_returns),4],
             Aena_cum_returns[nrow(Aena_cum_returns),4],
             Amadeus_cum_returns[nrow(Amadeus_cum_returns),4],
             ArcelorMittal_cum_returns[nrow(ArcelorMittal_cum_returns),4],
             BBVA_cum_returns[nrow(BBVA_cum_returns),4],
             Sabadell_cum_returns[nrow(Sabadell_cum_returns),4],
             Santander_cum_returns[nrow(Santander_cum_returns),4],
             Bankinter_cum_returns[nrow(Bankinter_cum_returns),4],
             CaixaBank_cum_returns[nrow(CaixaBank_cum_returns),4],
             Cellnex_cum_returns[nrow(Cellnex_cum_returns),4],
             Enagas_cum_returns[nrow(Enagas_cum_returns),4],
             ENCE_cum_returns[nrow(ENCE_cum_returns),4],
             Endesa_cum_returns[nrow(Endesa_cum_returns),4],
             Ferrovial_cum_returns[nrow(Ferrovial_cum_returns),4],
             Grifols_cum_returns[nrow(Grifols_cum_returns),4],
             Iberdrola_cum_returns[nrow(Iberdrola_cum_returns),4],
             Inditex_cum_returns[nrow(Inditex_cum_returns),4],
             Colonial_cum_returns[nrow(Colonial_cum_returns),4],
             IAG_cum_returns[nrow(IAG_cum_returns),4],
             Mapfre_cum_returns[nrow(Mapfre_cum_returns),4],
             Melia_cum_returns[nrow(Melia_cum_returns),4],
             Merlin_cum_returns[nrow(Merlin_cum_returns),4],
             Naturgy_cum_returns[nrow(Naturgy_cum_returns),4],
             REE_cum_returns[nrow(REE_cum_returns),4],
             Repsol_cum_returns[nrow(Repsol_cum_returns),4],
             SGamesa_cum_returns[nrow(SGamesa_cum_returns),4],
             Telefonica_cum_returns[nrow(Telefonica_cum_returns),4],
             Viscofan_cum_returns[nrow(Viscofan_cum_returns),4],
             Acerinox_cum_returns[nrow(Acerinox_cum_returns),4],
             Bankia_cum_returns[nrow(Bankia_cum_returns),4],
             CIE_cum_returns[nrow(CIE_cum_returns),4],
             MasMovil_cum_returns[nrow(MasMovil_cum_returns),4],
             Almirall_cum_returns[nrow(Almirall_cum_returns),4],
             Indra_cum_returns[nrow(Indra_cum_returns),4])

namebw<-c("Acciona",
          "ACS",
          "Aena",
              "Amadeus",
          "ArcelorMittal",
          "BBVA",
          "Sabadell",
          "Santander",
          "Bankinter",
          "CaixaBank",
          "Cellnex",
               "Enagas",
          "ENCE",
               "Endesa",
          "Ferrovial",
               "Grifols",
          "Iberdrola",
               "Inditex",
          "Colonial",
               "IAG",
          "Mapfre",
               "Melia",
          "Merlin",
               "Naturgy",
          "REE",
               "Repsol",
          "SGamesa",
               "Telefonica",
          "Viscofan",
               "Acerinox",
          "Bankia",
               "CIE",
          "MasMovil",
               "Almirall",
          "Indra")


bwfinal <- matrix(bestworst, nrow =35 , ncol = 1)
bwfinal2 <- matrix(namebw, nrow =35 , ncol = 1)

bwc<-cbind(bwfinal2,bwfinal)
colnames(bwc)=c("Accion","reval")
bwc <- as.data.frame(bwc)
colnames(bwchist)=c("Accion","reval")
bwchist <-as.data.frame(bwc[order(bwc$reval), ])

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri Jul 31 16:44:21 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 31 Jul 2020 15:44:21 +0100
Subject: [R] hist from a list
In-Reply-To: <CAB-TgNv88YE29BkrXg9teFoMGXVOGfrYtDWy+Ltb8znRK9_OFQ@mail.gmail.com>
References: <CAB-TgNv88YE29BkrXg9teFoMGXVOGfrYtDWy+Ltb8znRK9_OFQ@mail.gmail.com>
Message-ID: <42a74b91-08ed-f5f2-b621-193e447dd824@dewey.myzen.co.uk>

Dear Pedro

Some comments in-line

On 30/07/2020 21:16, Pedro p?ramo wrote:
> Hi all,
> 
> I attach my code, the think is I want to make a bar plot the last variable
> called "bwchist"
> 
>   so the X axis are "Accion" and the y axis are "reval" values.
> 
> I have prove class(bwchist) and says dataframe but its still a list because
> it says me
> 
> I have prove to unlist,  but it doesnt work
> 
> hist(bwchist)
> Error in hist.default(bwchist) : 'x' must be numeric

So bwchist is not a numeric variable as hist needs. Aboce you said it is 
a data frame but data frames are not numeric.

For future reference your example is way too long for anyone to go 
through and try to help you. Try next time to reduce it to the absolute 
minimum by removing sections while you still get the error. It is also 
easier to get help if you can remove unnecessary packages.

It is also unreadable because you are posting in HTML and that makes the 
post unreadable as this is a plain text list.

Michael


> 
> Or
> 
> barplot(bwchist)
> Error in barplot.default(bwchist) : 'height' must be a vector or a matrix
> 
> library(PerformanceAnalytics)
> library(dplyr)
> library(tibble)
> library(lubridate)
> library(PerformanceAnalytics)
> library(quantmod)
> library(ggplot2)
> library(png)
> library(grid)
> library(RCurl)
> library(tidyquant)
> library(timetk)
> library(data.table)
> 
> 
> 
> Acciona<- tq_get("ANA.MC",from = '2019-12-31',get = "stock.prices")
> ACS<- tq_get("ACS.MC",from = '2019-12-31',get = "stock.prices")
> Aena<- tq_get("AENA.MC",from = '2019-12-31',get = "stock.prices")
> Amadeus<- tq_get("AMS.MC",from = '2019-12-31',get = "stock.prices")
> ArcelorMittal<- tq_get("MTS.MC",from = '2019-12-31',get = "stock.prices")
> BBVA<- tq_get("BBVA.MC",from = '2019-12-31',get = "stock.prices")
> Sabadell<- tq_get("SAB.MC",from = '2019-12-31',get = "stock.prices")
> Santander<- tq_get("SAN.MC",from = '2019-12-31',get = "stock.prices")
> Bankinter<- tq_get("BKT.MC",from = '2019-12-31',get = "stock.prices")
> CaixaBank<- tq_get("CABK.MC",from = '2019-12-31',get = "stock.prices")
> Cellnex<- tq_get("CLNX.MC",from = '2019-12-31',get = "stock.prices")
> Enagas<- tq_get("ENG.MC",from = '2019-12-31',get = "stock.prices")
> ENCE<- tq_get("ENC.MC",from = '2019-12-31',get = "stock.prices")
> Endesa<- tq_get("ELE.MC",from = '2019-12-31',get = "stock.prices")
> Ferrovial<- tq_get("FER.MC",from = '2019-12-31',get = "stock.prices")
> Grifols<- tq_get("GRF.MC",from = '2019-12-31',get = "stock.prices")
> Iberdrola<- tq_get("IBE.MC",from = '2019-12-31',get = "stock.prices")
> Inditex<- tq_get("ITX.MC",from = '2019-12-31',get = "stock.prices")
> Colonial<- tq_get("COL.MC",from = '2019-12-31',get = "stock.prices")
> IAG<- tq_get("IAG.MC",from = '2019-12-31',get = "stock.prices")
> Mapfre<- tq_get("MAP.MC",from = '2019-12-31',get = "stock.prices")
> Melia<- tq_get("MEL.MC",from = '2019-12-31',get = "stock.prices")
> Merlin<- tq_get("MRL.MC",from = '2019-12-31',get = "stock.prices")
> Naturgy<- tq_get("NTGY.MC",from = '2019-12-31',get = "stock.prices")
> REE<- tq_get("REE.MC",from = '2019-12-31',get = "stock.prices")
> Repsol<- tq_get("REP.MC",from = '2019-12-31',get = "stock.prices")
> SGamesa<- tq_get("SGRE.MC",from = '2019-12-31',get = "stock.prices")
> Telefonica<- tq_get("TEF.MC",from = '2019-12-31',get = "stock.prices")
> Viscofan<- tq_get("VIS.MC",from = '2019-12-31',get = "stock.prices")
> Acerinox<- tq_get("ACX.MC",from = '2019-12-31',get = "stock.prices")
> Bankia<- tq_get("BKIA.MC",from = '2019-12-31',get = "stock.prices")
> CIE<- tq_get("CIE.MC",from = '2019-12-31',get = "stock.prices")
> MasMovil<- tq_get("MAS.MC",from = '2019-12-31',get = "stock.prices")
> Almirall<- tq_get("ALM.MC",from = '2019-12-31',get = "stock.prices")
> Indra<- tq_get("IDR.MC",from ='2019-12-31',get = "stock.prices")
> 
> Indra_daily_returns <- Indra %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Indra_cum_returns <- Indra_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Almirall_daily_returns <- Almirall %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Almirall_cum_returns <- Almirall_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Acciona_daily_returns <- Acciona %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Acciona_cum_returns <- Acciona_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> ACS_daily_returns <- ACS %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> ACS_cum_returns <- ACS_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Aena_daily_returns <- Aena %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Aena_cum_returns <- Aena_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Amadeus_daily_returns <- Amadeus %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Amadeus_cum_returns <- Amadeus_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> ArcelorMittal_daily_returns <- ArcelorMittal %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> ArcelorMittal_cum_returns <- ArcelorMittal_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> BBVA_daily_returns <- BBVA %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> BBVA_cum_returns <- BBVA_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> 
> Sabadell_daily_returns <- Sabadell %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Sabadell_cum_returns <- Sabadell_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Santander_daily_returns <- Santander %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Santander_cum_returns <- Santander_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> 
> Bankinter_daily_returns <- Bankinter %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Bankinter_cum_returns <- Bankinter_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> CaixaBank_daily_returns <- CaixaBank %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> CaixaBank_cum_returns <- CaixaBank_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Cellnex_daily_returns <- Cellnex %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Cellnex_cum_returns <- Cellnex_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> CIE_daily_returns <- CIE %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> CIE_cum_returns <- CIE_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> CIE_daily_returns <- CIE %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> CIE_cum_returns <- CIE_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Enagas_daily_returns <- Enagas %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Enagas_cum_returns <- Enagas_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> 
> ENCE_daily_returns <- ENCE %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> ENCE_cum_returns <- ENCE_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> Endesa_daily_returns <- Endesa %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Endesa_cum_returns <- Endesa_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> Ferrovial_daily_returns <- Ferrovial %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Ferrovial_cum_returns <- Ferrovial_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Grifols_daily_returns <- Grifols %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Grifols_cum_returns <- Grifols_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Iberdrola_daily_returns <- Iberdrola %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Iberdrola_cum_returns <- Iberdrola_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Inditex_daily_returns <- Inditex %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Inditex_cum_returns <- Inditex_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Colonial_daily_returns <- Colonial %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Colonial_cum_returns <- Colonial_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> IAG_daily_returns <- IAG %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> IAG_cum_returns <- IAG_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Mapfre_daily_returns <- Mapfre %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Mapfre_cum_returns <- Mapfre_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Melia_daily_returns <- Melia %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Melia_cum_returns <- Melia_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Merlin_daily_returns <- Merlin %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Merlin_cum_returns <- Merlin_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Naturgy_daily_returns <- Naturgy %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Naturgy_cum_returns <- Naturgy_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> REE_daily_returns <- REE %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> REE_cum_returns <- REE_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Repsol_daily_returns <- Repsol %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Repsol_cum_returns <- Repsol_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> SGamesa_daily_returns <- SGamesa %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> SGamesa_cum_returns <- SGamesa_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Telefonica_daily_returns <- Telefonica %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Telefonica_cum_returns <- Telefonica_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Viscofan_daily_returns <- Viscofan %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Viscofan_cum_returns <- Viscofan_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Acerinox_daily_returns <- Acerinox %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Acerinox_cum_returns <- Acerinox_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> 
> Bankia_daily_returns <- Bankia %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Bankia_cum_returns <- Bankia_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> MasMovil_daily_returns <- MasMovil %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> MasMovil_cum_returns <- MasMovil_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> Indra_daily_returns <- Indra %>%
>    tq_transmute(select = adjusted,           # this specifies which column
> to select
>                 mutate_fun = periodReturn,   # This specifies what to do
> with that column
>                 period = "daily",      # This argument calculates Daily
> returns
>                 col_rename = "idr_returns") # renames the column
> Indra_cum_returns <- Indra_daily_returns %>%
>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> function
>    mutate(cumulative_returns = cr - 1)
> 
> bestworst<-c(Acciona_cum_returns[nrow(Acciona_cum_returns),4],
>               ACS_cum_returns[nrow(ACS_cum_returns),4],
>               Aena_cum_returns[nrow(Aena_cum_returns),4],
>               Amadeus_cum_returns[nrow(Amadeus_cum_returns),4],
>               ArcelorMittal_cum_returns[nrow(ArcelorMittal_cum_returns),4],
>               BBVA_cum_returns[nrow(BBVA_cum_returns),4],
>               Sabadell_cum_returns[nrow(Sabadell_cum_returns),4],
>               Santander_cum_returns[nrow(Santander_cum_returns),4],
>               Bankinter_cum_returns[nrow(Bankinter_cum_returns),4],
>               CaixaBank_cum_returns[nrow(CaixaBank_cum_returns),4],
>               Cellnex_cum_returns[nrow(Cellnex_cum_returns),4],
>               Enagas_cum_returns[nrow(Enagas_cum_returns),4],
>               ENCE_cum_returns[nrow(ENCE_cum_returns),4],
>               Endesa_cum_returns[nrow(Endesa_cum_returns),4],
>               Ferrovial_cum_returns[nrow(Ferrovial_cum_returns),4],
>               Grifols_cum_returns[nrow(Grifols_cum_returns),4],
>               Iberdrola_cum_returns[nrow(Iberdrola_cum_returns),4],
>               Inditex_cum_returns[nrow(Inditex_cum_returns),4],
>               Colonial_cum_returns[nrow(Colonial_cum_returns),4],
>               IAG_cum_returns[nrow(IAG_cum_returns),4],
>               Mapfre_cum_returns[nrow(Mapfre_cum_returns),4],
>               Melia_cum_returns[nrow(Melia_cum_returns),4],
>               Merlin_cum_returns[nrow(Merlin_cum_returns),4],
>               Naturgy_cum_returns[nrow(Naturgy_cum_returns),4],
>               REE_cum_returns[nrow(REE_cum_returns),4],
>               Repsol_cum_returns[nrow(Repsol_cum_returns),4],
>               SGamesa_cum_returns[nrow(SGamesa_cum_returns),4],
>               Telefonica_cum_returns[nrow(Telefonica_cum_returns),4],
>               Viscofan_cum_returns[nrow(Viscofan_cum_returns),4],
>               Acerinox_cum_returns[nrow(Acerinox_cum_returns),4],
>               Bankia_cum_returns[nrow(Bankia_cum_returns),4],
>               CIE_cum_returns[nrow(CIE_cum_returns),4],
>               MasMovil_cum_returns[nrow(MasMovil_cum_returns),4],
>               Almirall_cum_returns[nrow(Almirall_cum_returns),4],
>               Indra_cum_returns[nrow(Indra_cum_returns),4])
> 
> namebw<-c("Acciona",
>            "ACS",
>            "Aena",
>                "Amadeus",
>            "ArcelorMittal",
>            "BBVA",
>            "Sabadell",
>            "Santander",
>            "Bankinter",
>            "CaixaBank",
>            "Cellnex",
>                 "Enagas",
>            "ENCE",
>                 "Endesa",
>            "Ferrovial",
>                 "Grifols",
>            "Iberdrola",
>                 "Inditex",
>            "Colonial",
>                 "IAG",
>            "Mapfre",
>                 "Melia",
>            "Merlin",
>                 "Naturgy",
>            "REE",
>                 "Repsol",
>            "SGamesa",
>                 "Telefonica",
>            "Viscofan",
>                 "Acerinox",
>            "Bankia",
>                 "CIE",
>            "MasMovil",
>                 "Almirall",
>            "Indra")
> 
> 
> bwfinal <- matrix(bestworst, nrow =35 , ncol = 1)
> bwfinal2 <- matrix(namebw, nrow =35 , ncol = 1)
> 
> bwc<-cbind(bwfinal2,bwfinal)
> colnames(bwc)=c("Accion","reval")
> bwc <- as.data.frame(bwc)
> colnames(bwchist)=c("Accion","reval")
> bwchist <-as.data.frame(bwc[order(bwc$reval), ])
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jul 31 16:50:10 2020
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 31 Jul 2020 15:50:10 +0100
Subject: [R] hist from a list
In-Reply-To: <42a74b91-08ed-f5f2-b621-193e447dd824@dewey.myzen.co.uk>
References: <CAB-TgNv88YE29BkrXg9teFoMGXVOGfrYtDWy+Ltb8znRK9_OFQ@mail.gmail.com>
 <42a74b91-08ed-f5f2-b621-193e447dd824@dewey.myzen.co.uk>
Message-ID: <70ef6db0-8a9d-d140-8347-b4e8b758f640@sapo.pt>

Hello,

I second Michael's opinion. When the post's code is very long, there is 
a tendency to have less answers.

Please post the output of


dput(head(bwchist, 30))


It's much shorter code and it recreates the data so we will be able to 
see what's wrong and try to find a solution.

Hope this helps,

Rui Barradas


?s 15:44 de 31/07/2020, Michael Dewey escreveu:
> Dear Pedro
>
> Some comments in-line
>
> On 30/07/2020 21:16, Pedro p?ramo wrote:
>> Hi all,
>>
>> I attach my code, the think is I want to make a bar plot the last 
>> variable
>> called "bwchist"
>>
>> ? so the X axis are "Accion" and the y axis are "reval" values.
>>
>> I have prove class(bwchist) and says dataframe but its still a list 
>> because
>> it says me
>>
>> I have prove to unlist,? but it doesnt work
>>
>> hist(bwchist)
>> Error in hist.default(bwchist) : 'x' must be numeric
>
> So bwchist is not a numeric variable as hist needs. Aboce you said it 
> is a data frame but data frames are not numeric.
>
> For future reference your example is way too long for anyone to go 
> through and try to help you. Try next time to reduce it to the 
> absolute minimum by removing sections while you still get the error. 
> It is also easier to get help if you can remove unnecessary packages.
>
> It is also unreadable because you are posting in HTML and that makes 
> the post unreadable as this is a plain text list.
>
> Michael
>
>
>>
>> Or
>>
>> barplot(bwchist)
>> Error in barplot.default(bwchist) : 'height' must be a vector or a 
>> matrix
>>
>> library(PerformanceAnalytics)
>> library(dplyr)
>> library(tibble)
>> library(lubridate)
>> library(PerformanceAnalytics)
>> library(quantmod)
>> library(ggplot2)
>> library(png)
>> library(grid)
>> library(RCurl)
>> library(tidyquant)
>> library(timetk)
>> library(data.table)
>>
>>
>>
>> Acciona<- tq_get("ANA.MC",from = '2019-12-31',get = "stock.prices")
>> ACS<- tq_get("ACS.MC",from = '2019-12-31',get = "stock.prices")
>> Aena<- tq_get("AENA.MC",from = '2019-12-31',get = "stock.prices")
>> Amadeus<- tq_get("AMS.MC",from = '2019-12-31',get = "stock.prices")
>> ArcelorMittal<- tq_get("MTS.MC",from = '2019-12-31',get = 
>> "stock.prices")
>> BBVA<- tq_get("BBVA.MC",from = '2019-12-31',get = "stock.prices")
>> Sabadell<- tq_get("SAB.MC",from = '2019-12-31',get = "stock.prices")
>> Santander<- tq_get("SAN.MC",from = '2019-12-31',get = "stock.prices")
>> Bankinter<- tq_get("BKT.MC",from = '2019-12-31',get = "stock.prices")
>> CaixaBank<- tq_get("CABK.MC",from = '2019-12-31',get = "stock.prices")
>> Cellnex<- tq_get("CLNX.MC",from = '2019-12-31',get = "stock.prices")
>> Enagas<- tq_get("ENG.MC",from = '2019-12-31',get = "stock.prices")
>> ENCE<- tq_get("ENC.MC",from = '2019-12-31',get = "stock.prices")
>> Endesa<- tq_get("ELE.MC",from = '2019-12-31',get = "stock.prices")
>> Ferrovial<- tq_get("FER.MC",from = '2019-12-31',get = "stock.prices")
>> Grifols<- tq_get("GRF.MC",from = '2019-12-31',get = "stock.prices")
>> Iberdrola<- tq_get("IBE.MC",from = '2019-12-31',get = "stock.prices")
>> Inditex<- tq_get("ITX.MC",from = '2019-12-31',get = "stock.prices")
>> Colonial<- tq_get("COL.MC",from = '2019-12-31',get = "stock.prices")
>> IAG<- tq_get("IAG.MC",from = '2019-12-31',get = "stock.prices")
>> Mapfre<- tq_get("MAP.MC",from = '2019-12-31',get = "stock.prices")
>> Melia<- tq_get("MEL.MC",from = '2019-12-31',get = "stock.prices")
>> Merlin<- tq_get("MRL.MC",from = '2019-12-31',get = "stock.prices")
>> Naturgy<- tq_get("NTGY.MC",from = '2019-12-31',get = "stock.prices")
>> REE<- tq_get("REE.MC",from = '2019-12-31',get = "stock.prices")
>> Repsol<- tq_get("REP.MC",from = '2019-12-31',get = "stock.prices")
>> SGamesa<- tq_get("SGRE.MC",from = '2019-12-31',get = "stock.prices")
>> Telefonica<- tq_get("TEF.MC",from = '2019-12-31',get = "stock.prices")
>> Viscofan<- tq_get("VIS.MC",from = '2019-12-31',get = "stock.prices")
>> Acerinox<- tq_get("ACX.MC",from = '2019-12-31',get = "stock.prices")
>> Bankia<- tq_get("BKIA.MC",from = '2019-12-31',get = "stock.prices")
>> CIE<- tq_get("CIE.MC",from = '2019-12-31',get = "stock.prices")
>> MasMovil<- tq_get("MAS.MC",from = '2019-12-31',get = "stock.prices")
>> Almirall<- tq_get("ALM.MC",from = '2019-12-31',get = "stock.prices")
>> Indra<- tq_get("IDR.MC",from ='2019-12-31',get = "stock.prices")
>>
>> Indra_daily_returns <- Indra %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Indra_cum_returns <- Indra_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Almirall_daily_returns <- Almirall %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Almirall_cum_returns <- Almirall_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Acciona_daily_returns <- Acciona %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Acciona_cum_returns <- Acciona_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> ACS_daily_returns <- ACS %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> ACS_cum_returns <- ACS_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Aena_daily_returns <- Aena %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Aena_cum_returns <- Aena_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Amadeus_daily_returns <- Amadeus %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Amadeus_cum_returns <- Amadeus_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> ArcelorMittal_daily_returns <- ArcelorMittal %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> ArcelorMittal_cum_returns <- ArcelorMittal_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> BBVA_daily_returns <- BBVA %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> BBVA_cum_returns <- BBVA_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>>
>> Sabadell_daily_returns <- Sabadell %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Sabadell_cum_returns <- Sabadell_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Santander_daily_returns <- Santander %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Santander_cum_returns <- Santander_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>>
>> Bankinter_daily_returns <- Bankinter %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Bankinter_cum_returns <- Bankinter_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> CaixaBank_daily_returns <- CaixaBank %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> CaixaBank_cum_returns <- CaixaBank_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Cellnex_daily_returns <- Cellnex %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Cellnex_cum_returns <- Cellnex_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> CIE_daily_returns <- CIE %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> CIE_cum_returns <- CIE_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> CIE_daily_returns <- CIE %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> CIE_cum_returns <- CIE_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Enagas_daily_returns <- Enagas %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Enagas_cum_returns <- Enagas_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>>
>> ENCE_daily_returns <- ENCE %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> ENCE_cum_returns <- ENCE_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>> Endesa_daily_returns <- Endesa %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Endesa_cum_returns <- Endesa_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>> Ferrovial_daily_returns <- Ferrovial %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Ferrovial_cum_returns <- Ferrovial_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Grifols_daily_returns <- Grifols %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Grifols_cum_returns <- Grifols_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Iberdrola_daily_returns <- Iberdrola %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Iberdrola_cum_returns <- Iberdrola_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Inditex_daily_returns <- Inditex %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Inditex_cum_returns <- Inditex_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Colonial_daily_returns <- Colonial %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Colonial_cum_returns <- Colonial_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> IAG_daily_returns <- IAG %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> IAG_cum_returns <- IAG_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Mapfre_daily_returns <- Mapfre %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Mapfre_cum_returns <- Mapfre_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Melia_daily_returns <- Melia %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Melia_cum_returns <- Melia_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Merlin_daily_returns <- Merlin %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Merlin_cum_returns <- Merlin_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Naturgy_daily_returns <- Naturgy %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Naturgy_cum_returns <- Naturgy_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> REE_daily_returns <- REE %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> REE_cum_returns <- REE_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Repsol_daily_returns <- Repsol %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Repsol_cum_returns <- Repsol_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> SGamesa_daily_returns <- SGamesa %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> SGamesa_cum_returns <- SGamesa_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Telefonica_daily_returns <- Telefonica %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Telefonica_cum_returns <- Telefonica_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Viscofan_daily_returns <- Viscofan %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Viscofan_cum_returns <- Viscofan_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Acerinox_daily_returns <- Acerinox %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Acerinox_cum_returns <- Acerinox_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>>
>> Bankia_daily_returns <- Bankia %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Bankia_cum_returns <- Bankia_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> MasMovil_daily_returns <- MasMovil %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> MasMovil_cum_returns <- MasMovil_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> Indra_daily_returns <- Indra %>%
>> ?? tq_transmute(select = adjusted,?????????? # this specifies which 
>> column
>> to select
>> ??????????????? mutate_fun = periodReturn,?? # This specifies what to do
>> with that column
>> ??????????????? period = "daily",????? # This argument calculates Daily
>> returns
>> ??????????????? col_rename = "idr_returns") # renames the column
>> Indra_cum_returns <- Indra_daily_returns %>%
>> ?? mutate(cr = cumprod(1 + idr_returns)) %>%????? # using the cumprod
>> function
>> ?? mutate(cumulative_returns = cr - 1)
>>
>> bestworst<-c(Acciona_cum_returns[nrow(Acciona_cum_returns),4],
>> ????????????? ACS_cum_returns[nrow(ACS_cum_returns),4],
>> ????????????? Aena_cum_returns[nrow(Aena_cum_returns),4],
>> ????????????? Amadeus_cum_returns[nrow(Amadeus_cum_returns),4],
>> ArcelorMittal_cum_returns[nrow(ArcelorMittal_cum_returns),4],
>> ????????????? BBVA_cum_returns[nrow(BBVA_cum_returns),4],
>> Sabadell_cum_returns[nrow(Sabadell_cum_returns),4],
>> Santander_cum_returns[nrow(Santander_cum_returns),4],
>> Bankinter_cum_returns[nrow(Bankinter_cum_returns),4],
>> CaixaBank_cum_returns[nrow(CaixaBank_cum_returns),4],
>> ????????????? Cellnex_cum_returns[nrow(Cellnex_cum_returns),4],
>> ????????????? Enagas_cum_returns[nrow(Enagas_cum_returns),4],
>> ????????????? ENCE_cum_returns[nrow(ENCE_cum_returns),4],
>> ????????????? Endesa_cum_returns[nrow(Endesa_cum_returns),4],
>> Ferrovial_cum_returns[nrow(Ferrovial_cum_returns),4],
>> ????????????? Grifols_cum_returns[nrow(Grifols_cum_returns),4],
>> Iberdrola_cum_returns[nrow(Iberdrola_cum_returns),4],
>> ????????????? Inditex_cum_returns[nrow(Inditex_cum_returns),4],
>> Colonial_cum_returns[nrow(Colonial_cum_returns),4],
>> ????????????? IAG_cum_returns[nrow(IAG_cum_returns),4],
>> ????????????? Mapfre_cum_returns[nrow(Mapfre_cum_returns),4],
>> ????????????? Melia_cum_returns[nrow(Melia_cum_returns),4],
>> ????????????? Merlin_cum_returns[nrow(Merlin_cum_returns),4],
>> ????????????? Naturgy_cum_returns[nrow(Naturgy_cum_returns),4],
>> ????????????? REE_cum_returns[nrow(REE_cum_returns),4],
>> ????????????? Repsol_cum_returns[nrow(Repsol_cum_returns),4],
>> ????????????? SGamesa_cum_returns[nrow(SGamesa_cum_returns),4],
>> Telefonica_cum_returns[nrow(Telefonica_cum_returns),4],
>> Viscofan_cum_returns[nrow(Viscofan_cum_returns),4],
>> Acerinox_cum_returns[nrow(Acerinox_cum_returns),4],
>> ????????????? Bankia_cum_returns[nrow(Bankia_cum_returns),4],
>> ????????????? CIE_cum_returns[nrow(CIE_cum_returns),4],
>> MasMovil_cum_returns[nrow(MasMovil_cum_returns),4],
>> Almirall_cum_returns[nrow(Almirall_cum_returns),4],
>> ????????????? Indra_cum_returns[nrow(Indra_cum_returns),4])
>>
>> namebw<-c("Acciona",
>> ?????????? "ACS",
>> ?????????? "Aena",
>> ?????????????? "Amadeus",
>> ?????????? "ArcelorMittal",
>> ?????????? "BBVA",
>> ?????????? "Sabadell",
>> ?????????? "Santander",
>> ?????????? "Bankinter",
>> ?????????? "CaixaBank",
>> ?????????? "Cellnex",
>> ??????????????? "Enagas",
>> ?????????? "ENCE",
>> ??????????????? "Endesa",
>> ?????????? "Ferrovial",
>> ??????????????? "Grifols",
>> ?????????? "Iberdrola",
>> ??????????????? "Inditex",
>> ?????????? "Colonial",
>> ??????????????? "IAG",
>> ?????????? "Mapfre",
>> ??????????????? "Melia",
>> ?????????? "Merlin",
>> ??????????????? "Naturgy",
>> ?????????? "REE",
>> ??????????????? "Repsol",
>> ?????????? "SGamesa",
>> ??????????????? "Telefonica",
>> ?????????? "Viscofan",
>> ??????????????? "Acerinox",
>> ?????????? "Bankia",
>> ??????????????? "CIE",
>> ?????????? "MasMovil",
>> ??????????????? "Almirall",
>> ?????????? "Indra")
>>
>>
>> bwfinal <- matrix(bestworst, nrow =35 , ncol = 1)
>> bwfinal2 <- matrix(namebw, nrow =35 , ncol = 1)
>>
>> bwc<-cbind(bwfinal2,bwfinal)
>> colnames(bwc)=c("Accion","reval")
>> bwc <- as.data.frame(bwc)
>> colnames(bwchist)=c("Accion","reval")
>> bwchist <-as.data.frame(bwc[order(bwc$reval), ])
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


-- 
Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
https://www.avast.com/antivirus


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Fri Jul 31 17:07:23 2020
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Fri, 31 Jul 2020 10:07:23 -0500
Subject: [R] hist from a list
In-Reply-To: <70ef6db0-8a9d-d140-8347-b4e8b758f640@sapo.pt>
References: <CAB-TgNv88YE29BkrXg9teFoMGXVOGfrYtDWy+Ltb8znRK9_OFQ@mail.gmail.com>
 <42a74b91-08ed-f5f2-b621-193e447dd824@dewey.myzen.co.uk>
 <70ef6db0-8a9d-d140-8347-b4e8b758f640@sapo.pt>
Message-ID: <CAPPM_gQTOQwXdiMQtD_smhZDJ7uAjwyfT65TR_J-0Vhh+xhYqg@mail.gmail.com>

Hi Pedro,

Another 'best practice' and polite thing to do is link to other places
you may have cross-posted.  That will give people the opportunity to
see if your questions has been answered in another forum.

I saw your post on R-SIG-Finance
(https://stat.ethz.ch/pipermail/r-sig-finance/2020q3/014979.html), and
started to work on a solution.

I don't know how to do this in tidyquant, but here's how you can do it
with quantmod:

# all tickers
tk <- c("ANA.MC", "ACS.MC", "AENA.MC", "AMS.MC", "MTS.MC", "BBVA.MC", "SAB.MC",
  "SAN.MC", "BKT.MC", "CABK.MC", "CLNX.MC", "ENG.MC", "ENC.MC", "ELE.MC",
  "FER.MC", "GRF.MC", "IBE.MC", "ITX.MC", "COL.MC", "IAG.MC", "MAP.MC",
  "MEL.MC", "MRL.MC", "NTGY.MC", "REE.MC", "REP.MC", "SGRE.MC", "TEF.MC",
  "VIS.MC", "ACX.MC", "BKIA.MC", "CIE.MC", "MAS.MC", "ALM.MC", "IDR.MC")

# download them into an environment ('e')
require(quantmod)
getSymbols(tk, from = "2019-12-31", env = (e <- new.env()))

# extract adjusted close column
adj <- lapply(e, Ad)
# calculate daily returns from adjusted data,
# merge into a xts matrix, and fill NA with 0
ret <- do.call(merge, c(lapply(adj, dailyReturn), fill = 0))
# cumulative returns
cumret <- cumprod(1 + ret) - 1
# set names
colnames(cumret) <- names(adj)
last(cumret)
# calculate histogram for period-to-date returns
hist(drop(last(cumret)))

I'm not sure that's the histogram you're looking for, but I hope it
gives you a start toward a solution.

Best,
Josh

On Fri, Jul 31, 2020 at 9:55 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> Hello,
>
> I second Michael's opinion. When the post's code is very long, there is
> a tendency to have less answers.
>
> Please post the output of
>
>
> dput(head(bwchist, 30))
>
>
> It's much shorter code and it recreates the data so we will be able to
> see what's wrong and try to find a solution.
>
> Hope this helps,
>
> Rui Barradas
>
>
> ?s 15:44 de 31/07/2020, Michael Dewey escreveu:
> > Dear Pedro
> >
> > Some comments in-line
> >
> > On 30/07/2020 21:16, Pedro p?ramo wrote:
> >> Hi all,
> >>
> >> I attach my code, the think is I want to make a bar plot the last
> >> variable
> >> called "bwchist"
> >>
> >>   so the X axis are "Accion" and the y axis are "reval" values.
> >>
> >> I have prove class(bwchist) and says dataframe but its still a list
> >> because
> >> it says me
> >>
> >> I have prove to unlist,  but it doesnt work
> >>
> >> hist(bwchist)
> >> Error in hist.default(bwchist) : 'x' must be numeric
> >
> > So bwchist is not a numeric variable as hist needs. Aboce you said it
> > is a data frame but data frames are not numeric.
> >
> > For future reference your example is way too long for anyone to go
> > through and try to help you. Try next time to reduce it to the
> > absolute minimum by removing sections while you still get the error.
> > It is also easier to get help if you can remove unnecessary packages.
> >
> > It is also unreadable because you are posting in HTML and that makes
> > the post unreadable as this is a plain text list.
> >
> > Michael
> >
> >
> >>
> >> Or
> >>
> >> barplot(bwchist)
> >> Error in barplot.default(bwchist) : 'height' must be a vector or a
> >> matrix
> >>
> >> library(PerformanceAnalytics)
> >> library(dplyr)
> >> library(tibble)
> >> library(lubridate)
> >> library(PerformanceAnalytics)
> >> library(quantmod)
> >> library(ggplot2)
> >> library(png)
> >> library(grid)
> >> library(RCurl)
> >> library(tidyquant)
> >> library(timetk)
> >> library(data.table)
> >>
> >>
> >>
> >> Acciona<- tq_get("ANA.MC",from = '2019-12-31',get = "stock.prices")
> >> ACS<- tq_get("ACS.MC",from = '2019-12-31',get = "stock.prices")
> >> Aena<- tq_get("AENA.MC",from = '2019-12-31',get = "stock.prices")
> >> Amadeus<- tq_get("AMS.MC",from = '2019-12-31',get = "stock.prices")
> >> ArcelorMittal<- tq_get("MTS.MC",from = '2019-12-31',get =
> >> "stock.prices")
> >> BBVA<- tq_get("BBVA.MC",from = '2019-12-31',get = "stock.prices")
> >> Sabadell<- tq_get("SAB.MC",from = '2019-12-31',get = "stock.prices")
> >> Santander<- tq_get("SAN.MC",from = '2019-12-31',get = "stock.prices")
> >> Bankinter<- tq_get("BKT.MC",from = '2019-12-31',get = "stock.prices")
> >> CaixaBank<- tq_get("CABK.MC",from = '2019-12-31',get = "stock.prices")
> >> Cellnex<- tq_get("CLNX.MC",from = '2019-12-31',get = "stock.prices")
> >> Enagas<- tq_get("ENG.MC",from = '2019-12-31',get = "stock.prices")
> >> ENCE<- tq_get("ENC.MC",from = '2019-12-31',get = "stock.prices")
> >> Endesa<- tq_get("ELE.MC",from = '2019-12-31',get = "stock.prices")
> >> Ferrovial<- tq_get("FER.MC",from = '2019-12-31',get = "stock.prices")
> >> Grifols<- tq_get("GRF.MC",from = '2019-12-31',get = "stock.prices")
> >> Iberdrola<- tq_get("IBE.MC",from = '2019-12-31',get = "stock.prices")
> >> Inditex<- tq_get("ITX.MC",from = '2019-12-31',get = "stock.prices")
> >> Colonial<- tq_get("COL.MC",from = '2019-12-31',get = "stock.prices")
> >> IAG<- tq_get("IAG.MC",from = '2019-12-31',get = "stock.prices")
> >> Mapfre<- tq_get("MAP.MC",from = '2019-12-31',get = "stock.prices")
> >> Melia<- tq_get("MEL.MC",from = '2019-12-31',get = "stock.prices")
> >> Merlin<- tq_get("MRL.MC",from = '2019-12-31',get = "stock.prices")
> >> Naturgy<- tq_get("NTGY.MC",from = '2019-12-31',get = "stock.prices")
> >> REE<- tq_get("REE.MC",from = '2019-12-31',get = "stock.prices")
> >> Repsol<- tq_get("REP.MC",from = '2019-12-31',get = "stock.prices")
> >> SGamesa<- tq_get("SGRE.MC",from = '2019-12-31',get = "stock.prices")
> >> Telefonica<- tq_get("TEF.MC",from = '2019-12-31',get = "stock.prices")
> >> Viscofan<- tq_get("VIS.MC",from = '2019-12-31',get = "stock.prices")
> >> Acerinox<- tq_get("ACX.MC",from = '2019-12-31',get = "stock.prices")
> >> Bankia<- tq_get("BKIA.MC",from = '2019-12-31',get = "stock.prices")
> >> CIE<- tq_get("CIE.MC",from = '2019-12-31',get = "stock.prices")
> >> MasMovil<- tq_get("MAS.MC",from = '2019-12-31',get = "stock.prices")
> >> Almirall<- tq_get("ALM.MC",from = '2019-12-31',get = "stock.prices")
> >> Indra<- tq_get("IDR.MC",from ='2019-12-31',get = "stock.prices")
> >>
> >> Indra_daily_returns <- Indra %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Indra_cum_returns <- Indra_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Almirall_daily_returns <- Almirall %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Almirall_cum_returns <- Almirall_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Acciona_daily_returns <- Acciona %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Acciona_cum_returns <- Acciona_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> ACS_daily_returns <- ACS %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> ACS_cum_returns <- ACS_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Aena_daily_returns <- Aena %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Aena_cum_returns <- Aena_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Amadeus_daily_returns <- Amadeus %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Amadeus_cum_returns <- Amadeus_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> ArcelorMittal_daily_returns <- ArcelorMittal %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> ArcelorMittal_cum_returns <- ArcelorMittal_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> BBVA_daily_returns <- BBVA %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> BBVA_cum_returns <- BBVA_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >>
> >> Sabadell_daily_returns <- Sabadell %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Sabadell_cum_returns <- Sabadell_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Santander_daily_returns <- Santander %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Santander_cum_returns <- Santander_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >>
> >> Bankinter_daily_returns <- Bankinter %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Bankinter_cum_returns <- Bankinter_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> CaixaBank_daily_returns <- CaixaBank %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> CaixaBank_cum_returns <- CaixaBank_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Cellnex_daily_returns <- Cellnex %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Cellnex_cum_returns <- Cellnex_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> CIE_daily_returns <- CIE %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> CIE_cum_returns <- CIE_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> CIE_daily_returns <- CIE %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> CIE_cum_returns <- CIE_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Enagas_daily_returns <- Enagas %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Enagas_cum_returns <- Enagas_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >>
> >> ENCE_daily_returns <- ENCE %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> ENCE_cum_returns <- ENCE_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >> Endesa_daily_returns <- Endesa %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Endesa_cum_returns <- Endesa_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >> Ferrovial_daily_returns <- Ferrovial %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Ferrovial_cum_returns <- Ferrovial_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Grifols_daily_returns <- Grifols %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Grifols_cum_returns <- Grifols_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Iberdrola_daily_returns <- Iberdrola %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Iberdrola_cum_returns <- Iberdrola_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Inditex_daily_returns <- Inditex %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Inditex_cum_returns <- Inditex_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Colonial_daily_returns <- Colonial %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Colonial_cum_returns <- Colonial_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> IAG_daily_returns <- IAG %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> IAG_cum_returns <- IAG_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Mapfre_daily_returns <- Mapfre %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Mapfre_cum_returns <- Mapfre_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Melia_daily_returns <- Melia %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Melia_cum_returns <- Melia_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Merlin_daily_returns <- Merlin %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Merlin_cum_returns <- Merlin_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Naturgy_daily_returns <- Naturgy %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Naturgy_cum_returns <- Naturgy_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> REE_daily_returns <- REE %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> REE_cum_returns <- REE_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Repsol_daily_returns <- Repsol %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Repsol_cum_returns <- Repsol_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> SGamesa_daily_returns <- SGamesa %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> SGamesa_cum_returns <- SGamesa_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Telefonica_daily_returns <- Telefonica %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Telefonica_cum_returns <- Telefonica_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Viscofan_daily_returns <- Viscofan %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Viscofan_cum_returns <- Viscofan_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Acerinox_daily_returns <- Acerinox %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Acerinox_cum_returns <- Acerinox_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >>
> >> Bankia_daily_returns <- Bankia %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Bankia_cum_returns <- Bankia_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> MasMovil_daily_returns <- MasMovil %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> MasMovil_cum_returns <- MasMovil_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> Indra_daily_returns <- Indra %>%
> >>    tq_transmute(select = adjusted,           # this specifies which
> >> column
> >> to select
> >>                 mutate_fun = periodReturn,   # This specifies what to do
> >> with that column
> >>                 period = "daily",      # This argument calculates Daily
> >> returns
> >>                 col_rename = "idr_returns") # renames the column
> >> Indra_cum_returns <- Indra_daily_returns %>%
> >>    mutate(cr = cumprod(1 + idr_returns)) %>%      # using the cumprod
> >> function
> >>    mutate(cumulative_returns = cr - 1)
> >>
> >> bestworst<-c(Acciona_cum_returns[nrow(Acciona_cum_returns),4],
> >>               ACS_cum_returns[nrow(ACS_cum_returns),4],
> >>               Aena_cum_returns[nrow(Aena_cum_returns),4],
> >>               Amadeus_cum_returns[nrow(Amadeus_cum_returns),4],
> >> ArcelorMittal_cum_returns[nrow(ArcelorMittal_cum_returns),4],
> >>               BBVA_cum_returns[nrow(BBVA_cum_returns),4],
> >> Sabadell_cum_returns[nrow(Sabadell_cum_returns),4],
> >> Santander_cum_returns[nrow(Santander_cum_returns),4],
> >> Bankinter_cum_returns[nrow(Bankinter_cum_returns),4],
> >> CaixaBank_cum_returns[nrow(CaixaBank_cum_returns),4],
> >>               Cellnex_cum_returns[nrow(Cellnex_cum_returns),4],
> >>               Enagas_cum_returns[nrow(Enagas_cum_returns),4],
> >>               ENCE_cum_returns[nrow(ENCE_cum_returns),4],
> >>               Endesa_cum_returns[nrow(Endesa_cum_returns),4],
> >> Ferrovial_cum_returns[nrow(Ferrovial_cum_returns),4],
> >>               Grifols_cum_returns[nrow(Grifols_cum_returns),4],
> >> Iberdrola_cum_returns[nrow(Iberdrola_cum_returns),4],
> >>               Inditex_cum_returns[nrow(Inditex_cum_returns),4],
> >> Colonial_cum_returns[nrow(Colonial_cum_returns),4],
> >>               IAG_cum_returns[nrow(IAG_cum_returns),4],
> >>               Mapfre_cum_returns[nrow(Mapfre_cum_returns),4],
> >>               Melia_cum_returns[nrow(Melia_cum_returns),4],
> >>               Merlin_cum_returns[nrow(Merlin_cum_returns),4],
> >>               Naturgy_cum_returns[nrow(Naturgy_cum_returns),4],
> >>               REE_cum_returns[nrow(REE_cum_returns),4],
> >>               Repsol_cum_returns[nrow(Repsol_cum_returns),4],
> >>               SGamesa_cum_returns[nrow(SGamesa_cum_returns),4],
> >> Telefonica_cum_returns[nrow(Telefonica_cum_returns),4],
> >> Viscofan_cum_returns[nrow(Viscofan_cum_returns),4],
> >> Acerinox_cum_returns[nrow(Acerinox_cum_returns),4],
> >>               Bankia_cum_returns[nrow(Bankia_cum_returns),4],
> >>               CIE_cum_returns[nrow(CIE_cum_returns),4],
> >> MasMovil_cum_returns[nrow(MasMovil_cum_returns),4],
> >> Almirall_cum_returns[nrow(Almirall_cum_returns),4],
> >>               Indra_cum_returns[nrow(Indra_cum_returns),4])
> >>
> >> namebw<-c("Acciona",
> >>            "ACS",
> >>            "Aena",
> >>                "Amadeus",
> >>            "ArcelorMittal",
> >>            "BBVA",
> >>            "Sabadell",
> >>            "Santander",
> >>            "Bankinter",
> >>            "CaixaBank",
> >>            "Cellnex",
> >>                 "Enagas",
> >>            "ENCE",
> >>                 "Endesa",
> >>            "Ferrovial",
> >>                 "Grifols",
> >>            "Iberdrola",
> >>                 "Inditex",
> >>            "Colonial",
> >>                 "IAG",
> >>            "Mapfre",
> >>                 "Melia",
> >>            "Merlin",
> >>                 "Naturgy",
> >>            "REE",
> >>                 "Repsol",
> >>            "SGamesa",
> >>                 "Telefonica",
> >>            "Viscofan",
> >>                 "Acerinox",
> >>            "Bankia",
> >>                 "CIE",
> >>            "MasMovil",
> >>                 "Almirall",
> >>            "Indra")
> >>
> >>
> >> bwfinal <- matrix(bestworst, nrow =35 , ncol = 1)
> >> bwfinal2 <- matrix(namebw, nrow =35 , ncol = 1)
> >>
> >> bwc<-cbind(bwfinal2,bwfinal)
> >> colnames(bwc)=c("Accion","reval")
> >> bwc <- as.data.frame(bwc)
> >> colnames(bwchist)=c("Accion","reval")
> >> bwchist <-as.data.frame(bwc[order(bwc$reval), ])
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
>
>
> --
> Este e-mail foi verificado em termos de v?rus pelo software antiv?rus Avast.
> https://www.avast.com/antivirus
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From jr@| @end|ng |rom po@teo@no  Fri Jul 31 18:28:47 2020
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Fri, 31 Jul 2020 18:28:47 +0200
Subject: [R] hist from a list
In-Reply-To: <CAPPM_gQTOQwXdiMQtD_smhZDJ7uAjwyfT65TR_J-0Vhh+xhYqg@mail.gmail.com>
References: <CAB-TgNv88YE29BkrXg9teFoMGXVOGfrYtDWy+Ltb8znRK9_OFQ@mail.gmail.com>
 <42a74b91-08ed-f5f2-b621-193e447dd824@dewey.myzen.co.uk>
 <70ef6db0-8a9d-d140-8347-b4e8b758f640@sapo.pt>
 <CAPPM_gQTOQwXdiMQtD_smhZDJ7uAjwyfT65TR_J-0Vhh+xhYqg@mail.gmail.com>
Message-ID: <20200731162847.GB106339@posteo.no>

On 2020-07-31 10:07 -0500, Joshua Ulrich wrote:
| On Fri, Jul 31, 2020 at 9:55 AM Rui Barradas wrote:
| | ?s 15:44 de 31/07/2020, Michael Dewey escreveu:
| | | Dear Pedro
| | |
| | | Some comments in-line
| | |
| | | On 30/07/2020 21:16, Pedro p?ramo wrote:
| | | | Hi all,
| | | |
| | | | I attach my code, the think is I 
| | | | want to make a bar plot the last 
| | | | variable called "bwchist" so the 
| | | | X axis are "Accion" and the y 
| | | | axis are "reval" values.
| | | |
| | | | I have prove class(bwchist) and 
| | | | says dataframe but its still a 
| | | | list because it says me I have 
| | | | prove to unlist, but it doesnt 
| | | | work
| | | |
| | | | hist(bwchist)
| | | | Error in hist.default(bwchist) : 'x' must be numeric
| | |
| | | So bwchist is not a numeric 
| | | variable as hist needs. Aboce you 
| | | said it is a data frame but data 
| | | frames are not numeric.
| | |
| | | For future reference your example 
| | | is way too long for anyone to go 
| | | through and try to help you. Try 
| | | next time to reduce it to the 
| | | absolute minimum by removing 
| | | sections while you still get the 
| | | error.  It is also easier to get 
| | | help if you can remove unnecessary 
| | | packages.
| | |
| | | It is also unreadable because you 
| | | are posting in HTML and that makes 
| | | the post unreadable as this is a 
| | | plain text list.
| |
| | Hello,
| |
| | I second Michael's opinion. When the 
| | post's code is very long, there is a 
| | tendency to have less answers.
| |
| | Please post the output of
| |
| | 	dput(head(bwchist, 30))
| |
| | It's much shorter code and it 
| | recreates the data so we will be 
| | able to see what's wrong and try to 
| | find a solution.
| 
| Hi Pedro,
| 
| Another 'best practice' and polite 
| thing to do is link to other places 
| you may have cross-posted.  That will 
| give people the opportunity to see if 
| your questions has been answered in 
| another forum.
| 
| I saw your post on R-SIG-Finance 
| (https://stat.ethz.ch/pipermail/r-sig-finance/2020q3/014979.html), 
| and started to work on a solution.
| 
| I don't know how to do this in 
| tidyquant, but here's how you can do 
| it with quantmod:
| 
| # all tickers
| tk <- c("ANA.MC", "ACS.MC", "AENA.MC", "AMS.MC", "MTS.MC", "BBVA.MC", "SAB.MC",
|   "SAN.MC", "BKT.MC", "CABK.MC", "CLNX.MC", "ENG.MC", "ENC.MC", "ELE.MC",
|   "FER.MC", "GRF.MC", "IBE.MC", "ITX.MC", "COL.MC", "IAG.MC", "MAP.MC",
|   "MEL.MC", "MRL.MC", "NTGY.MC", "REE.MC", "REP.MC", "SGRE.MC", "TEF.MC",
|   "VIS.MC", "ACX.MC", "BKIA.MC", "CIE.MC", "MAS.MC", "ALM.MC", "IDR.MC")
| 
| # download them into an environment ('e')
| require(quantmod)
| getSymbols(tk, from = "2019-12-31", env = (e <- new.env()))
| 
| # extract adjusted close column
| adj <- lapply(e, Ad)
| # calculate daily returns from adjusted data,
| # merge into a xts matrix, and fill NA with 0
| ret <- do.call(merge, c(lapply(adj, dailyReturn), fill = 0))
| # cumulative returns
| cumret <- cumprod(1 + ret) - 1
| # set names
| colnames(cumret) <- names(adj)
| last(cumret)
| # calculate histogram for period-to-date returns
| hist(drop(last(cumret)))
| 
| I'm not sure that's the histogram 
| you're looking for, but I hope it 
| gives you a start toward a solution.
| 
| Best,
| Josh

Wow Josh!  That's very elegant.  

Myself now, I just plowed through the 
original code to make it simpler, but am 
at a loss as to how this histogram looks 
...

	x <- c("ANA.MC", "ACS.MC", "AENA.MC", "AMS.MC", "MTS.MC", "BBVA.MC",
	  "SAB.MC", "SAN.MC", "BKT.MC", "CABK.MC", "CLNX.MC", "ENG.MC",
	  "ENC.MC", "ELE.MC", "FER.MC", "GRF.MC", "IBE.MC", "ITX.MC",
	  "COL.MC", "IAG.MC", "MAP.MC", "MEL.MC", "MRL.MC", "NTGY.MC",
	  "REE.MC", "REP.MC", "SGRE.MC", "TEF.MC", "VIS.MC", "ACX.MC",
	  "BKIA.MC", "CIE.MC", "MAS.MC", "ALM.MC", "IDR.MC")
	stock.prices <- 
	  lapply(x, function(stock) {
	    tidyquant::tq_get(x=stock,from = '2019-12-31',get = "stock.prices")
	  })
	names(stock.prices) <- x
	
	library(tidyquant)
	
	returns <- lapply(stock.prices, function(data) {
	  tab <-
	    tq_transmute(
	      data = data,
	      select = adjusted,           # this specifies which column to select
	      mutate_fun = periodReturn,   # This specifies what to do with that column
	      period = "daily",            # This argument calculates Daily returns
	      col_rename = "idr_returns")  # renames the column
	  tab[,"cr"] <- cumprod(1 + tab[,"idr_returns"])
	  tab[,"cumulative_returns"] <- tab[,"cr"] - 1
	
	  dplyr::pull(
	    tab[nrow(tab[,"cumulative_returns"]),
	                  "cumulative_returns"]
	  )
	})
	
	bestworst <- simplify2array(returns)
	
	namebw <- 
	  c("Acciona", "ACS", "Aena", "Amadeus",
	    "ArcelorMittal", "BBVA", "Sabadell",
	    "Santander", "Bankinter",
	    "CaixaBank", "Cellnex", "Enagas",
	    "ENCE", "Endesa", "Ferrovial",
	    "Grifols", "Iberdrola", "Inditex",
	    "Colonial", "IAG", "Mapfre",
	    "Melia", "Merlin", "Naturgy", "REE",
	    "Repsol", "SGamesa", "Telefonica",
	    "Viscofan", "Acerinox", "Bankia",
	    "CIE", "MasMovil", "Almirall",
	    "Indra")
	
	bwc <- data.frame(
	  symbol=names(bestworst),
	  Accion=namebw,
	  reval=bestworst)

| | | | bwc<-cbind(bwfinal2,bwfinal)
| | | | colnames(bwc)=c("Accion","reval")
| | | | bwc <- as.data.frame(bwc)

... aaaand you know something's 
happening between here (where bwchist is 
created), but you don't know what it is, 
do you, Mr p?ramo?

| | | | colnames(bwchist)=c("Accion","reval")
| | | | bwchist <-as.data.frame(bwc[order(bwc$reval), ])

Best,
Rasmus

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20200731/a8fcb94d/attachment.sig>

