From yarmi1224 at hotmail.com  Sat Jul  1 09:43:43 2017
From: yarmi1224 at hotmail.com (=?big5?B?o2Mgoag=?=)
Date: Sat, 1 Jul 2017 07:43:43 +0000
Subject: [R] How to replace match words whith colum name of data frame?
Message-ID: <HK2PR0301MB118747C572C8B82DF0389E47A4D00@HK2PR0301MB1187.apcprd03.prod.outlook.com>

I have two data frame. I want to use "chemical_df" to match "concept_df "


concept_df <- data.frame(concept=c("butan acid ", "nano diamond particl", "slurri
composit", "composit ph polis", " inorgan particl ",  "grind liquid", "liquid formul", "nanoparticl", "size abras particl", "agent malic acid"))

chemical_df <- data.frame(chemical=c("basic", "alkalin", "alkali", "acid",  " ph ", "hss"))

Here is my match code:

library(magrittr)
match_df <- NULL
for (i in 1:length(chemical_df$chemical)) {
match_df<-data.frame(category=concept_df[grep(chemical_df$chemical[i], concept_df$concept), ] ) %>%
rbind(match_df)
 }

But I don't want this result:
          concept                                category
        1 butan acid                          butan acid
        2 nano diamond particl
        3 slurri composit
        4 composit ph polis             composit ph polis
        5 inorgan particl
        6 grind liquid
        7 liquid formul
        8 nanoparticl
        9 size abras particl
        10 agent malic acid              agent malic acid

I desire to get :
          concept                               category
        1 butan acid                         chemical
        2 nano diamond particl
        3 slurri composit
        4 composit ph polis             chemical
        5 inorgan particl
        6 grind liquid
        7 liquid formul
        8 nanoparticl
        9 size abras particl
        10 agent malic acid             chemical

Is any way to solve it?


	[[alternative HTML version deleted]]


From es at enricoschumann.net  Sat Jul  1 09:53:37 2017
From: es at enricoschumann.net (Enrico Schumann)
Date: Sat, 01 Jul 2017 09:53:37 +0200
Subject: [R] Packages for Learning Algorithm Independent Branch and
	Bound for Feature Selection
In-Reply-To: <CAJkA6kLsyuSPJaLcqhGfKPf4VpOzXgf-4UNX=WraoOCvVXmHMg@mail.gmail.com>
 (Alex Byrley's message of "Thu, 29 Jun 2017 13:25:38 -0400")
References: <CAJkA6kLsyuSPJaLcqhGfKPf4VpOzXgf-4UNX=WraoOCvVXmHMg@mail.gmail.com>
Message-ID: <878tk8d24e.fsf@enricoschumann.net>

On Thu, 29 Jun 2017, Alex Byrley writes:

> I am looking for packages that can run a branch-and-bound algorithm to
> maximize a distance measure (such as Bhattacharyya or Mahalanobis) on a set
> of features.
>
> I would like this to be learning algorithm independent, so that the method
> just looks at the features, and selects the subset of a user-defined size
> that maximizes a distance criteria such as those stated above.
>
> Can anyone give some suggestions?
>
> Alex Byrley
> Graduate Student
> Department of Electrical Engineering
> 235 Davis Hall
> (716) 341-1802
>

It seems you are looking for a generic optimisation
algorithm; so perhaps start at the task view:
https://cran.r-project.org/web/views/Optimization.html

What you describe is a combinatorial problem: select k
from N features, with k (much) smaller than N. So I'd
suggest to also look at heuristic algorithms that can
deal with such problems (e.g. genetic algorithms).


-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From jfox at mcmaster.ca  Sat Jul  1 16:13:38 2017
From: jfox at mcmaster.ca (Fox, John)
Date: Sat, 1 Jul 2017 14:13:38 +0000
Subject: [R] How to replace match words whith colum name of data frame?
In-Reply-To: <1315_1498895038_v617hvkF029619_HK2PR0301MB118747C572C8B82DF0389E47A4D00@HK2PR0301MB1187.apcprd03.prod.outlook.com>
References: <1315_1498895038_v617hvkF029619_HK2PR0301MB118747C572C8B82DF0389E47A4D00@HK2PR0301MB1187.apcprd03.prod.outlook.com>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC836694150@FHSDB4H16-2.csu.mcmaster.ca>

Dear ?,

I'm sure that there are many ways to do what you want; here's one:

> cbind(concept_df, category=                                     
+   ifelse(apply(
+             sapply(chemical_df$chemical, 
+                 function(x) grepl(x, concept_df$concept)), 
+             1, any), 
+     "chemical", ""))

                concept category
1           butan acid  chemical
2  nano diamond particl         
3       slurri composit         
4     composit ph polis chemical
5      inorgan particl          
6          grind liquid         
7         liquid formul         
8           nanoparticl         
9    size abras particl         
10     agent malic acid chemical

Or, if you're wedded to magrittr:

> sapply(chemical_df$chemical, 
+     function(x) grepl(x, concept_df$concept)) %>%
+   apply(1, any) %>%
+   ifelse("chemical", "") %>%
+   cbind(concept_df, category=.)

                concept category
1           butan acid  chemical
2  nano diamond particl         
3       slurri composit         
4     composit ph polis chemical
5      inorgan particl          
6          grind liquid         
7         liquid formul         
8           nanoparticl         
9    size abras particl         
10     agent malic acid chemical

I hope this helps,
 John

--------------------------------------
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: socserv.mcmaster.ca/jfox



> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of ? ?
> Sent: Saturday, July 1, 2017 3:44 AM
> To: r-help at r-project.org
> Subject: [R] How to replace match words whith colum name of data frame?
> 
> I have two data frame. I want to use "chemical_df" to match "concept_df
> "
> 
> 
> concept_df <- data.frame(concept=c("butan acid ", "nano diamond
> particl", "slurri composit", "composit ph polis", " inorgan particl ",
> "grind liquid", "liquid formul", "nanoparticl", "size abras particl",
> "agent malic acid"))
> 
> chemical_df <- data.frame(chemical=c("basic", "alkalin", "alkali",
> "acid",  " ph ", "hss"))
> 
> Here is my match code:
> 
> library(magrittr)
> match_df <- NULL
> for (i in 1:length(chemical_df$chemical)) { match_df<-
> data.frame(category=concept_df[grep(chemical_df$chemical[i],
> concept_df$concept), ] ) %>%
> rbind(match_df)
>  }
> 
> But I don't want this result:
>           concept                                category
>         1 butan acid                          butan acid
>         2 nano diamond particl
>         3 slurri composit
>         4 composit ph polis             composit ph polis
>         5 inorgan particl
>         6 grind liquid
>         7 liquid formul
>         8 nanoparticl
>         9 size abras particl
>         10 agent malic acid              agent malic acid
> 
> I desire to get :
>           concept                               category
>         1 butan acid                         chemical
>         2 nano diamond particl
>         3 slurri composit
>         4 composit ph polis             chemical
>         5 inorgan particl
>         6 grind liquid
>         7 liquid formul
>         8 nanoparticl
>         9 size abras particl
>         10 agent malic acid             chemical
> 
> Is any way to solve it?
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From anbyrley at buffalo.edu  Sat Jul  1 22:42:57 2017
From: anbyrley at buffalo.edu (Alex Byrley)
Date: Sat, 1 Jul 2017 16:42:57 -0400
Subject: [R] Packages for Learning Algorithm Independent Branch and
 Bound for Feature Selection
In-Reply-To: <878tk8d24e.fsf@enricoschumann.net>
References: <CAJkA6kLsyuSPJaLcqhGfKPf4VpOzXgf-4UNX=WraoOCvVXmHMg@mail.gmail.com>
 <878tk8d24e.fsf@enricoschumann.net>
Message-ID: <CAJkA6kLt=Hk59VnbMs7uXH0xv4eVTBjThThbAM2KKO1kKp1W-g@mail.gmail.com>

See, I have built my own genetic algorithm already and tested it on this
problem. I have a solution, but due to the heuristic nature of GA, I cannot
guarantee that it is the optimal subset.

If I was simply doing this for a company project, you are spot on with the
type of algorithm I would use, but I am doing this for a scientific paper.
I need to be able to find the optimal subset over my dataset, and I know
branch and bound will find it without resorting to exhaustive search. If I
can't claim that my subset is optimal, it is going to open my paper up to
serious enough criticism that it will get rejected, regardless of whether
my new method outperforms the state-of-the-art or not. (And regardless if
my dataset is representative enough to make such performance claims)

I will take a look at that page, thanks! Hopefully there is an R
implementation of generic B&B as I described out there somewhere...

Alex Byrley
Graduate Student
Department of Electrical Engineering
235 Davis Hall
(716) 341-1802

2017-07-01 3:53 GMT-04:00 Enrico Schumann <es at enricoschumann.net>:

> On Thu, 29 Jun 2017, Alex Byrley writes:
>
> > I am looking for packages that can run a branch-and-bound algorithm to
> > maximize a distance measure (such as Bhattacharyya or Mahalanobis) on a
> set
> > of features.
> >
> > I would like this to be learning algorithm independent, so that the
> method
> > just looks at the features, and selects the subset of a user-defined size
> > that maximizes a distance criteria such as those stated above.
> >
> > Can anyone give some suggestions?
> >
> > Alex Byrley
> > Graduate Student
> > Department of Electrical Engineering
> > 235 Davis Hall
> > (716) 341-1802
> >
>
> It seems you are looking for a generic optimisation
> algorithm; so perhaps start at the task view:
> https://cran.r-project.org/web/views/Optimization.html
>
> What you describe is a combinatorial problem: select k
> from N features, with k (much) smaller than N. So I'd
> suggest to also look at heuristic algorithms that can
> deal with such problems (e.g. genetic algorithms).
>
>
> --
> Enrico Schumann
> Lucerne, Switzerland
> http://enricoschumann.net
>

	[[alternative HTML version deleted]]


From varevare at googlemail.com  Sun Jul  2 12:54:34 2017
From: varevare at googlemail.com (vare vare)
Date: Sun, 2 Jul 2017 12:54:34 +0200
Subject: [R] package to fit mixtures of student-t distributions
In-Reply-To: <CABmqZHPg=o1yoRFuzwENczQHAkhYgwyF9Qo3zrULMX4uUcq67Q@mail.gmail.com>
References: <11F020B9-9C17-4EBE-BD1A-EEC26589CB93@googlemail.com>
 <CABmqZHPg=o1yoRFuzwENczQHAkhYgwyF9Qo3zrULMX4uUcq67Q@mail.gmail.com>
Message-ID: <88CB7FF7-D675-4C02-9926-F68DFE139BBA@googlemail.com>

Thanks Ranjan, 

that provides exactly what I need. 
I also got a more elaborate answer on stackoverflow  (after the same question got rejected form cross validated?) with a running example for this package:

https://stackoverflow.com/questions/44825529/package-to-fit-mixtures-of-student-t-distributions/44827220#44827220 <https://stackoverflow.com/questions/44825529/package-to-fit-mixtures-of-student-t-distributions/44827220#44827220>

Kind regards
Vare

> Would package "teigen" help?
> 
> Ranjan


> 
> 
> On Thu, Jun 29, 2017 at 2:41 PM, vare vare via R-help <r-help at r-project.org <mailto:r-help at r-project.org>> wrote:
> Hello!
> 
> I am new to R (before used python exclusively and would actually call the R solution for this issue inside a python notebook, hope that doesn?t disqualify me right of the batch).
> 
> Right now I am  looking for a piece of software  to fit a 1D data sample to a mixture of t-distributions.
> 
> I searched quite a while already and it seems to be that this is a somehwat obscure endeavor as most search results turn up for mixture of gaussians (what I am not interested here).
> 
> The most promising candidates so far are the "AdMit" and "MitSEM" R packages. However I do not know R and find the description of these packages rather comlple and it seems their core objective is not the fitting of mixtures of t?s but instead use this as a step to accomplish something else.
> 
> This is in a nutshell what I want the software to accomplish:
> 
> Fitting a mixture of t-distributions to some data and estimate the "location" "scale" and "degrees of freedom" for each.
> 
> I hope someone can point me to a simple package, I can?t believe that this is such an obscure use case.
> 
> Thanks!
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html <http://www.r-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.
> 


	[[alternative HTML version deleted]]


From tanasa at gmail.com  Mon Jul  3 09:22:07 2017
From: tanasa at gmail.com (Bogdan Tanasa)
Date: Mon, 3 Jul 2017 00:22:07 -0700
Subject: [R] reshaping the data
Message-ID: <CA+JEM03mBG_yekYX6ZpioE0cUjpP_dHPHTct6+tOs-c=sJ9yOg@mail.gmail.com>

Dear all,

I would appreciate please a piece of help regarding the use of acast/dcast
functions in reshape2 package.

Specifically, I'm working with a data frame, that has information about
SAMPLE, GENE, and TYPE of MUTATION (as shown below):

Sample    Gene  Type
22M       AEBP1   SNV
17M       AEBP1   SNV
22M         ATR   INDEL
22M         ATR   SNV
11M         BTK   SNV
11M         BTK INDEL


I would like to transform this DATAFRAME into a MATRIX that has GENE on
ROWS, SAMPLE on COLUMNS, and the elements of the matrix are SNV or INDEL
(ie the types of mutations).

The R code starts with :

y <- data.frame(Sample = x$Sample, Gene = x$Gene, Type=x$Type)

z <- acast(y, Cancer_Gene ~ Sample)

although in z, I do not have the information on Type (i.e.SNV or INDEL).

thanks a lot,

-- bogdan

	[[alternative HTML version deleted]]


From es at enricoschumann.net  Mon Jul  3 09:49:01 2017
From: es at enricoschumann.net (Enrico Schumann)
Date: Mon, 03 Jul 2017 09:49:01 +0200
Subject: [R] Packages for Learning Algorithm Independent Branch and
 Bound for Feature Selection
In-Reply-To: <CAJkA6kLt=Hk59VnbMs7uXH0xv4eVTBjThThbAM2KKO1kKp1W-g@mail.gmail.com>
References: <CAJkA6kLsyuSPJaLcqhGfKPf4VpOzXgf-4UNX=WraoOCvVXmHMg@mail.gmail.com>
 <878tk8d24e.fsf@enricoschumann.net>
 <CAJkA6kLt=Hk59VnbMs7uXH0xv4eVTBjThThbAM2KKO1kKp1W-g@mail.gmail.com>
Message-ID: <20170703094901.Horde.i_xLK0Gk9ahq_J9ylkI5c9H@webmail.your-server.de>


Quoting Alex Byrley <anbyrley at buffalo.edu>:

> See, I have built my own genetic algorithm already and tested it on this
> problem. I have a solution, but due to the heuristic nature of GA, I cannot
> guarantee that it is the optimal subset.
>
> If I was simply doing this for a company project, you are spot on with the
> type of algorithm I would use, but I am doing this for a scientific paper.
> I need to be able to find the optimal subset over my dataset, and I know
> branch and bound will find it without resorting to exhaustive search. If I
> can't claim that my subset is optimal, it is going to open my paper up to
> serious enough criticism that it will get rejected, regardless of whether
> my new method outperforms the state-of-the-art or not. (And regardless if
> my dataset is representative enough to make such performance claims)

Just a comment:

A heuristic such as a Genetic Algorithm does indeed not guarantee the
optimum [*], but will only provide a stochastic approximation. This
approximation will get better if the algorithm gets more computing time;
but still, the solution will remain random.

However, people who read scientific papers can deal with such randomness,
as long as it is properly explained and reported. (Otherwise, no results
that relied on stochastic methods, such as MCMC, would ever have
been published.)

Some years ago, we wrote a short article on this topic (though on a
financial application):
https://link.springer.com/article/10.1007/s10732-010-9138-y

Kind regards (and good luck)
     Enrico Schumann


[*] Which does not mean it has not found it.


> I will take a look at that page, thanks! Hopefully there is an R
> implementation of generic B&B as I described out there somewhere...
>
> Alex Byrley
> Graduate Student
> Department of Electrical Engineering
> 235 Davis Hall
> (716) 341-1802
>
> 2017-07-01 3:53 GMT-04:00 Enrico Schumann <es at enricoschumann.net>:
>
>> On Thu, 29 Jun 2017, Alex Byrley writes:
>>
>> > I am looking for packages that can run a branch-and-bound algorithm to
>> > maximize a distance measure (such as Bhattacharyya or Mahalanobis) on a
>> set
>> > of features.
>> >
>> > I would like this to be learning algorithm independent, so that the
>> method
>> > just looks at the features, and selects the subset of a user-defined size
>> > that maximizes a distance criteria such as those stated above.
>> >
>> > Can anyone give some suggestions?
>> >
>> > Alex Byrley
>> > Graduate Student
>> > Department of Electrical Engineering
>> > 235 Davis Hall
>> > (716) 341-1802
>> >
>>
>> It seems you are looking for a generic optimisation
>> algorithm; so perhaps start at the task view:
>> https://cran.r-project.org/web/views/Optimization.html
>>
>> What you describe is a combinatorial problem: select k
>> from N features, with k (much) smaller than N. So I'd
>> suggest to also look at heuristic algorithms that can
>> deal with such problems (e.g. genetic algorithms).
>>
>>
>> --
>> Enrico Schumann
>> Lucerne, Switzerland
>> http://enricoschumann.net
>>



-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From drjimlemon at gmail.com  Mon Jul  3 11:38:49 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Mon, 3 Jul 2017 19:38:49 +1000
Subject: [R] reshaping the data
In-Reply-To: <CA+JEM03mBG_yekYX6ZpioE0cUjpP_dHPHTct6+tOs-c=sJ9yOg@mail.gmail.com>
References: <CA+JEM03mBG_yekYX6ZpioE0cUjpP_dHPHTct6+tOs-c=sJ9yOg@mail.gmail.com>
Message-ID: <CA+8X3fVi_6c+twdD1Psp-jNLMxvsLKstdH9xeJCmbcY1eqX7=A@mail.gmail.com>

Hi Bogdan,
If you want something like this:

             22M     17M     11M
AEBP1  SNV     SNV     NA
ATR       INDEL   NA       NA
ATR       SNV     NA        NA
BTK        NA       NA      SNV
BTK       NA       NA       INDEL

You're in trouble with repeated row names. Same with column names if
you add extra columns for repeated values. You'll have to change
something in order to make this consistent.

Jim

On Mon, Jul 3, 2017 at 5:22 PM, Bogdan Tanasa <tanasa at gmail.com> wrote:
> Dear all,
>
> I would appreciate please a piece of help regarding the use of acast/dcast
> functions in reshape2 package.
>
> Specifically, I'm working with a data frame, that has information about
> SAMPLE, GENE, and TYPE of MUTATION (as shown below):
>
> Sample    Gene  Type
> 22M       AEBP1   SNV
> 17M       AEBP1   SNV
> 22M         ATR   INDEL
> 22M         ATR   SNV
> 11M         BTK   SNV
> 11M         BTK INDEL
>
>
> I would like to transform this DATAFRAME into a MATRIX that has GENE on
> ROWS, SAMPLE on COLUMNS, and the elements of the matrix are SNV or INDEL
> (ie the types of mutations).
>
> The R code starts with :
>
> y <- data.frame(Sample = x$Sample, Gene = x$Gene, Type=x$Type)
>
> z <- acast(y, Cancer_Gene ~ Sample)
>
> although in z, I do not have the information on Type (i.e.SNV or INDEL).
>
> thanks a lot,
>
> -- bogdan
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ashenkin at ufl.edu  Mon Jul  3 11:40:38 2017
From: ashenkin at ufl.edu (Alexander Shenkin)
Date: Mon, 3 Jul 2017 10:40:38 +0100
Subject: [R] Calculating cumulative lengths of hierarchical topology
Message-ID: <8b7a1569-8840-1200-b020-3caf4fb2e9f4@ufl.edu>

Hello All,

I need to calculate cumulative lengths along a hierarchical network 
topology (it's a representation of a tree).  I can roll my own, but 
thought that there might be a package out there that would handle 
hierarchical network topology functions such as this nicely (and that 
might bring along other useful functions as well).  However, I haven't 
found one after searching.

I did find data.tree, which looks quite interesting, but it carries a 
large overhead that doesn't seem quite appropriate for the relatively 
simple structure I'm dealing with.

Could anyone point me to such a package if one does exist?

Thanks very much,
Allie


Example of the hierarchical topology:

      len parent_row daughter_row index_num
1 1.7053          0            2         1
2 1.1653          1            3         2
3 1.1980          2            4         3
4 1.1462          3            5         4
5 1.1346          4            6         5
6 1.1024          5            7         6
...


From petr.pikal at precheza.cz  Mon Jul  3 11:53:10 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 3 Jul 2017 09:53:10 +0000
Subject: [R] reshaping the data
In-Reply-To: <CA+JEM03mBG_yekYX6ZpioE0cUjpP_dHPHTct6+tOs-c=sJ9yOg@mail.gmail.com>
References: <CA+JEM03mBG_yekYX6ZpioE0cUjpP_dHPHTct6+tOs-c=sJ9yOg@mail.gmail.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA24D@SRVEXCHCM301.precheza.cz>

Hi

Do you want something like

dcast(test, Sample~Gene, fun=function(x) paste(x, collapse=","))

or

dcast(test, Sample~Gene, fun=function(x) sum(as.numeric(x)))

1 means INDEL, 2 means SNV and three means both

Cheers
Petr


> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Bogdan
> Tanasa
> Sent: Monday, July 3, 2017 9:22 AM
> To: r-help <r-help at r-project.org>
> Subject: [R] reshaping the data
>
> Dear all,
>
> I would appreciate please a piece of help regarding the use of acast/dcast
> functions in reshape2 package.
>
> Specifically, I'm working with a data frame, that has information about
> SAMPLE, GENE, and TYPE of MUTATION (as shown below):
>
> Sample    Gene  Type
> 22M       AEBP1   SNV
> 17M       AEBP1   SNV
> 22M         ATR   INDEL
> 22M         ATR   SNV
> 11M         BTK   SNV
> 11M         BTK INDEL
>
>
> I would like to transform this DATAFRAME into a MATRIX that has GENE on
> ROWS, SAMPLE on COLUMNS, and the elements of the matrix are SNV or INDEL
> (ie the types of mutations).
>
> The R code starts with :
>
> y <- data.frame(Sample = x$Sample, Gene = x$Gene, Type=x$Type)
>
> z <- acast(y, Cancer_Gene ~ Sample)
>
> although in z, I do not have the information on Type (i.e.SNV or INDEL).
>
> thanks a lot,
>
> -- bogdan
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From robertzimbardo at gmail.com  Mon Jul  3 10:57:38 2017
From: robertzimbardo at gmail.com (Robert Zimbardo)
Date: Mon, 3 Jul 2017 10:57:38 +0200
Subject: [R] R memory limits on table(x, y) (and bigtabulate)
Message-ID: <CAGJyvhEkkRT7owkPOCR3t3VxLimzsa-hvfm_+bF6sY6MkKEXhQ@mail.gmail.com>

I have two character vectors x and y that have the following characteristics:

length(x)  # same as
length(y) # 872099

length(unique(x))  # 47740
length(unique(y)) # 52478

I need to crosstabulate them, which would lead to a table with

47740*52478 # 2505299720

cells, which is more than

2^31 # 2147483648

cells, which seems to be R's limit because I am getting the error message

Error in table(x, y) : attempt to make a table with >= 2^31 elements

Two questions:

- is this really R's limit, even on a 64bit machine? It seems like it
(given <https://stat.ethz.ch/R-manual/R-devel/library/base/html/Memory-limits.html>
and <http://www.win-vector.com/blog/2015/06/r-in-a-64-bit-world/>, but
I just want to make sure I understood that right);
- I thought I could handle this with the package bigtabulate, but whenever I run

xy.tab <- bigtable(data.frame(x, y), ccols=1:2)

R crashes as follows:

terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc
Aborted

Any idea on what I am doing wrong with bigtabulate? Thanks for your
consideration


From bgunter.4567 at gmail.com  Mon Jul  3 17:04:21 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Mon, 3 Jul 2017 08:04:21 -0700
Subject: [R] R memory limits on table(x, y) (and bigtabulate)
In-Reply-To: <CAGJyvhEkkRT7owkPOCR3t3VxLimzsa-hvfm_+bF6sY6MkKEXhQ@mail.gmail.com>
References: <CAGJyvhEkkRT7owkPOCR3t3VxLimzsa-hvfm_+bF6sY6MkKEXhQ@mail.gmail.com>
Message-ID: <CAGxFJbQopqEs0j6Eip3_B3ZpanszFu7xNF1_SwuqU_fuPO3OUg@mail.gmail.com>

Sorry, don't know enough to give you trustworthy answers,  but I can
say that crashes due to (or linked to) packages should usually be
reported to the package maintainer, who can be found by the
?maintainer function. That person may not monitor this list.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jul 3, 2017 at 1:57 AM, Robert Zimbardo
<robertzimbardo at gmail.com> wrote:
> I have two character vectors x and y that have the following characteristics:
>
> length(x)  # same as
> length(y) # 872099
>
> length(unique(x))  # 47740
> length(unique(y)) # 52478
>
> I need to crosstabulate them, which would lead to a table with
>
> 47740*52478 # 2505299720
>
> cells, which is more than
>
> 2^31 # 2147483648
>
> cells, which seems to be R's limit because I am getting the error message
>
> Error in table(x, y) : attempt to make a table with >= 2^31 elements
>
> Two questions:
>
> - is this really R's limit, even on a 64bit machine? It seems like it
> (given <https://stat.ethz.ch/R-manual/R-devel/library/base/html/Memory-limits.html>
> and <http://www.win-vector.com/blog/2015/06/r-in-a-64-bit-world/>, but
> I just want to make sure I understood that right);
> - I thought I could handle this with the package bigtabulate, but whenever I run
>
> xy.tab <- bigtable(data.frame(x, y), ccols=1:2)
>
> R crashes as follows:
>
> terminate called after throwing an instance of 'std::bad_alloc'
>   what():  std::bad_alloc
> Aborted
>
> Any idea on what I am doing wrong with bigtabulate? Thanks for your
> consideration
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dwinsemius at comcast.net  Mon Jul  3 17:58:50 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Mon, 3 Jul 2017 08:58:50 -0700
Subject: [R] R memory limits on table(x, y) (and bigtabulate)
In-Reply-To: <CAGxFJbQopqEs0j6Eip3_B3ZpanszFu7xNF1_SwuqU_fuPO3OUg@mail.gmail.com>
References: <CAGJyvhEkkRT7owkPOCR3t3VxLimzsa-hvfm_+bF6sY6MkKEXhQ@mail.gmail.com>
 <CAGxFJbQopqEs0j6Eip3_B3ZpanszFu7xNF1_SwuqU_fuPO3OUg@mail.gmail.com>
Message-ID: <A1A0AD54-DC3A-4FF7-BBE1-E59F8F3EB992@comcast.net>

Yes. Table and matrix size limits are set by the max.integer size which is fixed at what can be represented with 4 bytes. 

David

Sent from my iPhone

> On Jul 3, 2017, at 8:04 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Sorry, don't know enough to give you trustworthy answers,  but I can
> say that crashes due to (or linked to) packages should usually be
> reported to the package maintainer, who can be found by the
> ?maintainer function. That person may not monitor this list.
> 
> Cheers,
> Bert
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Jul 3, 2017 at 1:57 AM, Robert Zimbardo
> <robertzimbardo at gmail.com> wrote:
>> I have two character vectors x and y that have the following characteristics:
>> 
>> length(x)  # same as
>> length(y) # 872099
>> 
>> length(unique(x))  # 47740
>> length(unique(y)) # 52478
>> 
>> I need to crosstabulate them, which would lead to a table with
>> 
>> 47740*52478 # 2505299720
>> 
>> cells, which is more than
>> 
>> 2^31 # 2147483648
>> 
>> cells, which seems to be R's limit because I am getting the error message
>> 
>> Error in table(x, y) : attempt to make a table with >= 2^31 elements
>> 
>> Two questions:
>> 
>> - is this really R's limit, even on a 64bit machine? It seems like it
>> (given <https://stat.ethz.ch/R-manual/R-devel/library/base/html/Memory-limits.html>
>> and <http://www.win-vector.com/blog/2015/06/r-in-a-64-bit-world/>, but
>> I just want to make sure I understood that right);
>> - I thought I could handle this with the package bigtabulate, but whenever I run
>> 
>> xy.tab <- bigtable(data.frame(x, y), ccols=1:2)
>> 
>> R crashes as follows:
>> 
>> terminate called after throwing an instance of 'std::bad_alloc'
>>  what():  std::bad_alloc
>> Aborted
>> 
>> Any idea on what I am doing wrong with bigtabulate? Thanks for your
>> consideration
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tanasa at gmail.com  Mon Jul  3 20:20:42 2017
From: tanasa at gmail.com (Bogdan Tanasa)
Date: Mon, 3 Jul 2017 11:20:42 -0700
Subject: [R] reshaping the data
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA24D@SRVEXCHCM301.precheza.cz>
References: <CA+JEM03mBG_yekYX6ZpioE0cUjpP_dHPHTct6+tOs-c=sJ9yOg@mail.gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA24D@SRVEXCHCM301.precheza.cz>
Message-ID: <CA+JEM02VHpS=V0UM9i=O3ebvZ+CQb1ezCq5_L_B16dbi+Bs-NQ@mail.gmail.com>

Thanks a lot gentlemen, and particularly Petr -- the R code you did share
helped tremendously ;)

On Mon, Jul 3, 2017 at 2:53 AM, PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hi
>
> Do you want something like
>
> dcast(test, Sample~Gene, fun=function(x) paste(x, collapse=","))
>
> or
>
> dcast(test, Sample~Gene, fun=function(x) sum(as.numeric(x)))
>
> 1 means INDEL, 2 means SNV and three means both
>
> Cheers
> Petr
>
>
> > -----Original Message-----
> > From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Bogdan
> > Tanasa
> > Sent: Monday, July 3, 2017 9:22 AM
> > To: r-help <r-help at r-project.org>
> > Subject: [R] reshaping the data
> >
> > Dear all,
> >
> > I would appreciate please a piece of help regarding the use of
> acast/dcast
> > functions in reshape2 package.
> >
> > Specifically, I'm working with a data frame, that has information about
> > SAMPLE, GENE, and TYPE of MUTATION (as shown below):
> >
> > Sample    Gene  Type
> > 22M       AEBP1   SNV
> > 17M       AEBP1   SNV
> > 22M         ATR   INDEL
> > 22M         ATR   SNV
> > 11M         BTK   SNV
> > 11M         BTK INDEL
> >
> >
> > I would like to transform this DATAFRAME into a MATRIX that has GENE on
> > ROWS, SAMPLE on COLUMNS, and the elements of the matrix are SNV or INDEL
> > (ie the types of mutations).
> >
> > The R code starts with :
> >
> > y <- data.frame(Sample = x$Sample, Gene = x$Gene, Type=x$Type)
> >
> > z <- acast(y, Cancer_Gene ~ Sample)
> >
> > although in z, I do not have the information on Type (i.e.SNV or INDEL).
> >
> > thanks a lot,
> >
> > -- bogdan
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ________________________________
> Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou
> ur?eny pouze jeho adres?t?m.
> Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav?
> neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie
> vyma?te ze sv?ho syst?mu.
> Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email
> jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
> Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi
> ?i zpo?d?n?m p?enosu e-mailu.
>
> V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
> - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en?
> smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
> - a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout;
> Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany
> p??jemce s dodatkem ?i odchylkou.
> - trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve
> v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
> - odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za
> spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n
> nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto
> emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich
> existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.
>
> This e-mail and any documents attached to it may be confidential and are
> intended only for its intended recipients.
> If you received this e-mail by mistake, please immediately inform its
> sender. Delete the contents of this e-mail with all attachments and its
> copies from your system.
> If you are not the intended recipient of this e-mail, you are not
> authorized to use, disseminate, copy or disclose this e-mail in any manner.
> The sender of this e-mail shall not be liable for any possible damage
> caused by modifications of the e-mail or by delay with transfer of the
> email.
>
> In case that this e-mail forms part of business dealings:
> - the sender reserves the right to end negotiations about entering into a
> contract in any time, for any reason, and without stating any reasoning.
> - if the e-mail contains an offer, the recipient is entitled to
> immediately accept such offer; The sender of this e-mail (offer) excludes
> any acceptance of the offer on the part of the recipient containing any
> amendment or variation.
> - the sender insists on that the respective contract is concluded only
> upon an express mutual agreement on all its aspects.
> - the sender of this e-mail informs that he/she is not authorized to enter
> into any contracts on behalf of the company except for cases in which
> he/she is expressly authorized to do so in writing, and such authorization
> or power of attorney is submitted to the recipient or the person
> represented by the recipient, or the existence of such authorization is
> known to the recipient of the person represented by the recipient.
>

	[[alternative HTML version deleted]]


From bickis at snoopy.usask.ca  Mon Jul  3 22:13:11 2017
From: bickis at snoopy.usask.ca (Professor Bickis)
Date: Mon, 3 Jul 2017 14:13:11 -0600
Subject: [R] R console not echoing input
Message-ID: <bd125cd24fd743c090e165be00955be5@Mail02.usask.ca>

I have a weird problem running R.app 3.3.2 under Mac OS X 10.10.5.

I was trying to interrupt a command line using various Control codes until I discovered that ?Esc? is the escape key.  (Makes sense!)
Now I find that while I can enter new commands to R, they no longer echo back, so I cannot see what I am typing.  On unix terminals CTL-Q will reset this, but it does not seem to work on the R console.
I tried
> system("stty echo")

but was told

stty: stdin isn?t a terminal

So I tried the following, but it did not give me any info I can use.

> isatty(stdin)
[1] FALSE
> stdin()
description     class           mode    text    opened          can read        can write
"stdin"         "terminal"      "r"     "text"  "opened"        "yes"           "no"
>       stdout()
description     class           mode    text    opened          can read        can write
"stdout"        "terminal"      "w"     "text"  "opened"        "no"            "yes"


What have I done, and how can I reset it?

I know I can quit the R session and start again, but if I have lots of graphics windows on the screen, I don?t want to lose them all and have to recreate them, not to mention having to play with the par parameters again.

Mik Bickis

From murdoch.duncan at gmail.com  Mon Jul  3 22:17:51 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 3 Jul 2017 16:17:51 -0400
Subject: [R] R console not echoing input
In-Reply-To: <bd125cd24fd743c090e165be00955be5@Mail02.usask.ca>
References: <bd125cd24fd743c090e165be00955be5@Mail02.usask.ca>
Message-ID: <8b64e2fb-7c56-5349-ced0-db14cdf60b18@gmail.com>

Hi Mik.

Likely you executed sink(...) to redirect output somewhere.  You undo 
that with sink().  You can compute how many such sinks are in effect 
(they stack) using sink.number(), but you probably won't be able to see 
the output, so that's  more useful in something like

while (sink.number() > 0) sink()

than in providing useful information.

Duncan Murdoch

On 03/07/2017 4:13 PM, Professor Bickis wrote:
> I have a weird problem running R.app 3.3.2 under Mac OS X 10.10.5.
>
> I was trying to interrupt a command line using various Control codes until I discovered that ?Esc? is the escape key.  (Makes sense!)
> Now I find that while I can enter new commands to R, they no longer echo back, so I cannot see what I am typing.  On unix terminals CTL-Q will reset this, but it does not seem to work on the R console.
> I tried
>> system("stty echo")
>
> but was told
>
> stty: stdin isn?t a terminal
>
> So I tried the following, but it did not give me any info I can use.
>
>> isatty(stdin)
> [1] FALSE
>> stdin()
> description     class           mode    text    opened          can read        can write
> "stdin"         "terminal"      "r"     "text"  "opened"        "yes"           "no"
>>       stdout()
> description     class           mode    text    opened          can read        can write
> "stdout"        "terminal"      "w"     "text"  "opened"        "no"            "yes"
>
>
> What have I done, and how can I reset it?
>
> I know I can quit the R session and start again, but if I have lots of graphics windows on the screen, I don?t want to lose them all and have to recreate them, not to mention having to play with the par parameters again.
>
> Mik Bickis
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ilia-kats at gmx.net  Tue Jul  4 09:40:14 2017
From: ilia-kats at gmx.net (Ilia Kats)
Date: Tue, 4 Jul 2017 09:40:14 +0200
Subject: [R] italic font on cairo devices in R 3.4
Message-ID: <597b749b-47f0-1d00-1fe3-907f927c6fdb@gmx.net>

Hi all,

I have the following problem: Since R 3.4.0, italic fonts rendered on 
Cairo devices appear pixelated. Here's a minimal example:
cairo_pdf('test.pdf')
plot(1:10, ylab=expression(italic(test)))
dev.off()

The same problem occurs with bolditalic, but not bold. I am using Debian 
Stretch. Several friends tried the same on their machines, another 
Debian machine has the same problem. On MacOSX the output was not 
pixelated, but it wasn't italic either. Ubuntu 16.04.2 xenial works 
fine. My impression is that R somehow can't find the proper font to use 
and falls back to something weird. Ideas?

Note that I'm not subscribed to the list, so please CC me in replies.

Cheers, Ilia


From petr.pikal at precheza.cz  Tue Jul  4 11:15:19 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Tue, 4 Jul 2017 09:15:19 +0000
Subject: [R] R and UBUNTU startup
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>

Dear all

I have 3 questions. Due to some reason I switched from Vista to Ubuntu on home PC. I was used to start with Rgui.exe. However I am not able to find it under Ubuntu and R starts as terminal (probably Rterm).

Question 1. Is Rgui.exe available on linux?

In Windows doc folder I can find manuals, however I did not find doc folder in Ubuntu. I found somewhere that manuals need to be installed separately by make ....

Question 2. Is it necessary to install manuals or I made some mistake when installing from Ubuntu software repository.

And question 3 is simple. Are there some kind of "Linux R for Windows dummies" available?

Best regards
Petr


________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From ruben at kfupm.edu.sa  Tue Jul  4 11:48:34 2017
From: ruben at kfupm.edu.sa (Ruben Hernan Roa Ureta)
Date: Tue, 4 Jul 2017 09:48:34 +0000
Subject: [R] R and UBUNTU startup
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
Message-ID: <1499161714601.18996@kfupm.edu.sa>

I did the same transition, facing the same issues, so I settled for installation of RKWard. This pretty much reproduces my previous experience with Tinn-R and the Rgui.

HTH

Ruben
________________________________

Ruben H. Roa-Ureta, Ph. D.
Senior Scientist,
Center for Environment and Water, Marine Studies Section,
King Fahd University of Petroleum and Minerals,
KFUPM Box 1927, Dhahran 31261,
Saudi Arabia

Phone : 966-3-860-7850


________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of PIKAL Petr <petr.pikal at precheza.cz>
Sent: Tuesday, July 4, 2017 12:15 PM
To: r-help
Subject: [R] R and UBUNTU startup

Dear all

I have 3 questions. Due to some reason I switched from Vista to Ubuntu on home PC. I was used to start with Rgui.exe. However I am not able to find it under Ubuntu and R starts as terminal (probably Rterm).

Question 1. Is Rgui.exe available on linux?

In Windows doc folder I can find manuals, however I did not find doc folder in Ubuntu. I found somewhere that manuals need to be installed separately by make ....

Question 2. Is it necessary to install manuals or I made some mistake when installing from Ubuntu software repository.

And question 3 is simple. Are there some kind of "Linux R for Windows dummies" available?

Best regards
Petr


________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Tue Jul  4 13:02:01 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 04 Jul 2017 04:02:01 -0700
Subject: [R] R and UBUNTU startup
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
Message-ID: <FA31455D-5A27-4CC2-8B70-1BB84C49CC82@dcn.davis.ca.us>

Q1. No.

Q2. What do you do? Did you follow the instructions at [1]? If you go to the top level of the R help system you should be able to open the manuals. ?help 

Q3. Not that I know of. If you have difficulty with R on Linux then you should focus on learning how to use Linux in general... and learn what X-Windows is. But just as with Windows, googling your problem will usually lead to stepwise solutions. Note that most issues with R should not require entering your password, though some supporting system features may require that you use the package manager to install Ubuntu packages. 

[1] https://cran.r-project.org/bin/linux/ubuntu/
-- 
Sent from my phone. Please excuse my brevity.

On July 4, 2017 2:15:19 AM PDT, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>Dear all
>
>I have 3 questions. Due to some reason I switched from Vista to Ubuntu
>on home PC. I was used to start with Rgui.exe. However I am not able to
>find it under Ubuntu and R starts as terminal (probably Rterm).
>
>Question 1. Is Rgui.exe available on linux?
>
>In Windows doc folder I can find manuals, however I did not find doc
>folder in Ubuntu. I found somewhere that manuals need to be installed
>separately by make ....
>
>Question 2. Is it necessary to install manuals or I made some mistake
>when installing from Ubuntu software repository.
>
>And question 3 is simple. Are there some kind of "Linux R for Windows
>dummies" available?
>
>Best regards
>Petr
>
>
>________________________________
>Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou
>ur?eny pouze jeho adres?t?m.
>Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav?
>neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho
>kopie vyma?te ze sv?ho syst?mu.
>Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento
>email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
>Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou
>modifikacemi ?i zpo?d?n?m p?enosu e-mailu.
>
>V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
>- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en?
>smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
>- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn?
>p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky
>ze strany p??jemce s dodatkem ?i odchylkou.
>- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve
>v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
>- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za
>spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn?
>zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly
>adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje,
>p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen?
>zn?m?.
>
>This e-mail and any documents attached to it may be confidential and
>are intended only for its intended recipients.
>If you received this e-mail by mistake, please immediately inform its
>sender. Delete the contents of this e-mail with all attachments and its
>copies from your system.
>If you are not the intended recipient of this e-mail, you are not
>authorized to use, disseminate, copy or disclose this e-mail in any
>manner.
>The sender of this e-mail shall not be liable for any possible damage
>caused by modifications of the e-mail or by delay with transfer of the
>email.
>
>In case that this e-mail forms part of business dealings:
>- the sender reserves the right to end negotiations about entering into
>a contract in any time, for any reason, and without stating any
>reasoning.
>- if the e-mail contains an offer, the recipient is entitled to
>immediately accept such offer; The sender of this e-mail (offer)
>excludes any acceptance of the offer on the part of the recipient
>containing any amendment or variation.
>- the sender insists on that the respective contract is concluded only
>upon an express mutual agreement on all its aspects.
>- the sender of this e-mail informs that he/she is not authorized to
>enter into any contracts on behalf of the company except for cases in
>which he/she is expressly authorized to do so in writing, and such
>authorization or power of attorney is submitted to the recipient or the
>person represented by the recipient, or the existence of such
>authorization is known to the recipient of the person represented by
>the recipient.
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From petr.pikal at precheza.cz  Tue Jul  4 13:58:55 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Tue, 4 Jul 2017 11:58:55 +0000
Subject: [R] R and UBUNTU startup
In-Reply-To: <FA31455D-5A27-4CC2-8B70-1BB84C49CC82@dcn.davis.ca.us>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
 <FA31455D-5A27-4CC2-8B70-1BB84C49CC82@dcn.davis.ca.us>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA4D3@SRVEXCHCM301.precheza.cz>

Hi

> -----Original Message-----
> From: Jeff Newmiller [mailto:jdnewmil at dcn.davis.ca.us]
> Sent: Tuesday, July 4, 2017 1:02 PM
> To: r-help at r-project.org; PIKAL Petr <petr.pikal at precheza.cz>; r-help <r-
> help at r-project.org>
> Subject: Re: [R] R and UBUNTU startup
>
> Q1. No.
>
> Q2. What do you do? Did you follow the instructions at [1]? If you go to the top
> level of the R help system you should be able to open the manuals. ?help

No. I installed from Ubuntu Software Center (by point and click method) as I am not very familiar with sudo terminal issues and I thought that following a way which is offered by Ubuntu is enough.

>
> Q3. Not that I know of. If you have difficulty with R on Linux then you should
> focus on learning how to use Linux in general... and learn what X-Windows is.

Hm. I have some book about Linux from about 2005, which I think is quite old and I am not sure if almost 15 years old recommendations are still valid.

> But just as with Windows, googling your problem will usually lead to stepwise

I searched all questions and especially question 1 but was not able to find such concise answer.

Anyway, thank you for all answers. I will need to find my way through Linux. Probably the most problematic will be to get rid of Windows habits and shortcuts.

Best regards
Petr

> solutions. Note that most issues with R should not require entering your
> password, though some supporting system features may require that you use
> the package manager to install Ubuntu packages.
>
> [1] https://cran.r-project.org/bin/linux/ubuntu/
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 4, 2017 2:15:19 AM PDT, PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >Dear all
> >
> >I have 3 questions. Due to some reason I switched from Vista to Ubuntu
> >on home PC. I was used to start with Rgui.exe. However I am not able to
> >find it under Ubuntu and R starts as terminal (probably Rterm).
> >
> >Question 1. Is Rgui.exe available on linux?
> >
> >In Windows doc folder I can find manuals, however I did not find doc
> >folder in Ubuntu. I found somewhere that manuals need to be installed
> >separately by make ....
> >
> >Question 2. Is it necessary to install manuals or I made some mistake
> >when installing from Ubuntu software repository.
> >
> >And question 3 is simple. Are there some kind of "Linux R for Windows
> >dummies" available?
> >
> >Best regards
> >Petr
> >
> >
> >________________________________
> >Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou
> >ur?eny pouze jeho adres?t?m.
> >Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav?
> >neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho
> >kopie vyma?te ze sv?ho syst?mu.
> >Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento
> >email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
> >Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou
> >modifikacemi ?i zpo?d?n?m p?enosu e-mailu.
> >
> >V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
> >- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en?
> >smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
> >- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn?
> >p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky
> >ze strany p??jemce s dodatkem ?i odchylkou.
> >- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve
> >v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
> >- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za
> >spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn?
> >zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly
> >adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje,
> >p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen?
> >zn?m?.
> >
> >This e-mail and any documents attached to it may be confidential and
> >are intended only for its intended recipients.
> >If you received this e-mail by mistake, please immediately inform its
> >sender. Delete the contents of this e-mail with all attachments and its
> >copies from your system.
> >If you are not the intended recipient of this e-mail, you are not
> >authorized to use, disseminate, copy or disclose this e-mail in any
> >manner.
> >The sender of this e-mail shall not be liable for any possible damage
> >caused by modifications of the e-mail or by delay with transfer of the
> >email.
> >
> >In case that this e-mail forms part of business dealings:
> >- the sender reserves the right to end negotiations about entering into
> >a contract in any time, for any reason, and without stating any
> >reasoning.
> >- if the e-mail contains an offer, the recipient is entitled to
> >immediately accept such offer; The sender of this e-mail (offer)
> >excludes any acceptance of the offer on the part of the recipient
> >containing any amendment or variation.
> >- the sender insists on that the respective contract is concluded only
> >upon an express mutual agreement on all its aspects.
> >- the sender of this e-mail informs that he/she is not authorized to
> >enter into any contracts on behalf of the company except for cases in
> >which he/she is expressly authorized to do so in writing, and such
> >authorization or power of attorney is submitted to the recipient or the
> >person represented by the recipient, or the existence of such
> >authorization is known to the recipient of the person represented by
> >the recipient.
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From petr.pikal at precheza.cz  Tue Jul  4 14:00:18 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Tue, 4 Jul 2017 12:00:18 +0000
Subject: [R] R and UBUNTU startup
In-Reply-To: <1499161714601.18996@kfupm.edu.sa>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
 <1499161714601.18996@kfupm.edu.sa>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA4E5@SRVEXCHCM301.precheza.cz>

Thanks,

I will try.

Best regards.
Petr

> -----Original Message-----
> From: Ruben Hernan Roa Ureta [mailto:ruben at kfupm.edu.sa]
> Sent: Tuesday, July 4, 2017 11:49 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>; r-help <r-help at r-project.org>
> Subject: Re: R and UBUNTU startup
>
> I did the same transition, facing the same issues, so I settled for installation of
> RKWard. This pretty much reproduces my previous experience with Tinn-R and
> the Rgui.
>
> HTH
>
> Ruben
> ________________________________
>
> Ruben H. Roa-Ureta, Ph. D.
> Senior Scientist,
> Center for Environment and Water, Marine Studies Section, King Fahd
> University of Petroleum and Minerals, KFUPM Box 1927, Dhahran 31261, Saudi
> Arabia
>
> Phone : 966-3-860-7850
>
>
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of PIKAL Petr
> <petr.pikal at precheza.cz>
> Sent: Tuesday, July 4, 2017 12:15 PM
> To: r-help
> Subject: [R] R and UBUNTU startup
>
> Dear all
>
> I have 3 questions. Due to some reason I switched from Vista to Ubuntu on
> home PC. I was used to start with Rgui.exe. However I am not able to find it
> under Ubuntu and R starts as terminal (probably Rterm).
>
> Question 1. Is Rgui.exe available on linux?
>
> In Windows doc folder I can find manuals, however I did not find doc folder in
> Ubuntu. I found somewhere that manuals need to be installed separately by
> make ....
>
> Question 2. Is it necessary to install manuals or I made some mistake when
> installing from Ubuntu software repository.
>
> And question 3 is simple. Are there some kind of "Linux R for Windows
> dummies" available?
>
> Best regards
> Petr
>
>
> ________________________________
> Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou
> ur?eny pouze jeho adres?t?m.
> Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen?
> jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze
> sv?ho syst?mu.
> Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email
> jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
> Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i
> zpo?d?n?m p?enosu e-mailu.
>
> V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
> - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to
> z jak?hokoliv d?vodu i bez uveden? d?vodu.
> - a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout;
> Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s
> dodatkem ?i odchylkou.
> - trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m
> dosa?en?m shody na v?ech jej?ch n?le?itostech.
> - odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost
> ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo
> p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto
> emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich
> existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.
>
> This e-mail and any documents attached to it may be confidential and are
> intended only for its intended recipients.
> If you received this e-mail by mistake, please immediately inform its sender.
> Delete the contents of this e-mail with all attachments and its copies from your
> system.
> If you are not the intended recipient of this e-mail, you are not authorized to
> use, disseminate, copy or disclose this e-mail in any manner.
> The sender of this e-mail shall not be liable for any possible damage caused by
> modifications of the e-mail or by delay with transfer of the email.
>
> In case that this e-mail forms part of business dealings:
> - the sender reserves the right to end negotiations about entering into a
> contract in any time, for any reason, and without stating any reasoning.
> - if the e-mail contains an offer, the recipient is entitled to immediately accept
> such offer; The sender of this e-mail (offer) excludes any acceptance of the
> offer on the part of the recipient containing any amendment or variation.
> - the sender insists on that the respective contract is concluded only upon an
> express mutual agreement on all its aspects.
> - the sender of this e-mail informs that he/she is not authorized to enter into
> any contracts on behalf of the company except for cases in which he/she is
> expressly authorized to do so in writing, and such authorization or power of
> attorney is submitted to the recipient or the person represented by the
> recipient, or the existence of such authorization is known to the recipient of the
> person represented by the recipient.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.


From sunnysingha.analytics at gmail.com  Tue Jul  4 14:02:05 2017
From: sunnysingha.analytics at gmail.com (Sunny Singha)
Date: Tue, 4 Jul 2017 17:32:05 +0530
Subject: [R] Please help(urgent) - How to simulate transactional data
 for reliability/survival analysis
In-Reply-To: <8B17F5C0-6AAE-435D-92EE-A8ADBE214FE3@utoronto.ca>
References: <D2975E52-CE3D-4ECE-BDF3-8CC44C8CC444@gmail.com>
 <8B17F5C0-6AAE-435D-92EE-A8ADBE214FE3@utoronto.ca>
Message-ID: <CANOG_FVm1bdY4Hk7f3WXOOpPRNyStNHNMYp6V51UfsvR8j1wPQ@mail.gmail.com>

Thanks Boris and Bret,
I was successful in simulating granular/transactional data.
Now I need some guidance to transform the same data in format acceptable
for survival analysis i.e below format:

pump_id | event_episode_no. | event(0/1) | start | stop | time_to_dropout

The challenge I'm experience is to generate the 'start' and 'stop' in units
of minutes/days from single column of 'Timestamp' which is
the column from transactional/granular data based on condition tagged in
separate column, 'event 0/1, (i.e event ).

Please guide how to do such transformation in 'R'.

Regards,
Sandeep



On Wed, Jun 28, 2017 at 2:51 PM, Boris Steipe <boris.steipe at utoronto.ca>
wrote:

> In principle what you need to do is the following:
>
>  - break down the time you wish to simulate into intervals.
>  - for each interval, and each failure mode, determine the probability of
> an event.
>    Determining the probability is the fun part, where you make your domain
>    knowledge explicit and include all the factors into your model:
> cumulative load,
>    failure history, pressure, temperature, phase of the moon ...
>  - once you have a probability of failure, use the runif() function to
> give you
>    a uniformly distributed random number in [0, 1]. If the number is
> smaller than
>    your failure probability, accept the failure event, and record it.
>  - Repeat many times.
>
> Hope this helps.
> B.
>
>
>
>
> > On Jun 27, 2017, at 10:58 AM, sandeep Rana <sandykido at gmail.com> wrote:
> >
> > Hi friends,
> > I haven't done such a simulation before and any help would be greatly
> appreciated. I need your guidance.
> >
> > I need to simulate end to end data for Reliability/survival analysis of
> a Pump ,with correlation in place, that is at 'Transactional level' or at
> the granularity of time-minutes, where each observation is a reading
> captured via Pump's sensors each minute.
> > Once transactional data is prepared I Then need to summarise above data
> for reliability/ survival analysis.
> >
> > To begin with below is the transactional data format that i want prepare:
> > Pump-id| Timestamp | temp | vibration | suction pressure| discharge
> pressure | Flow
> >
> > Above transactional data has to be prepared with below failure modes
> > Defects :
> > (1)    Cavitation ? very high in frequency but low impact
> > (2)    Bearing Damage ? very low in frequency but high impact
> > (3)    Worn Shaft ? medium frequency but medium impact
> >
> > I have used survsim package but that's not what I need here.
> > Please help and guide.
> >
> > Regards,
> > Sandeep
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From friendly at yorku.ca  Tue Jul  4 18:46:46 2017
From: friendly at yorku.ca (Michael Friendly)
Date: Tue, 4 Jul 2017 18:46:46 +0200
Subject: [R] R and UBUNTU startup
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
Message-ID: <7e572f13-2392-003f-0e1c-0f29d8166133@yorku.ca>

On 7/04/17 11:15 AM, PIKAL Petr wrote:
> Dear all
> 
> I have 3 questions. Due to some reason I switched from Vista to Ubuntu on home PC. I was used to start with Rgui.exe. However I am not able to find it under Ubuntu and R starts as terminal (probably Rterm).
> 
> Question 1. Is Rgui.exe available on linux?
No, but you will find things nicer than Rgui by switching to R Studio, 
which you can use on all platforms.
> 
> In Windows doc folder I can find manuals, however I did not find doc folder in Ubuntu. I found somewhere that manuals need to be installed separately by make ....
> 
> Question 2. Is it necessary to install manuals or I made some mistake when installing from Ubuntu software repository.
Just a guess: did you try man R?
All R manuals should be installed by default,but I'm not sure where.

> 
> And question 3 is simple. Are there some kind of "Linux R for Windows dummies" available?
> 
> Best regards
> Petr
>


From dwinsemius at comcast.net  Tue Jul  4 20:03:26 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 4 Jul 2017 11:03:26 -0700
Subject: [R] R and UBUNTU startup
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA4D3@SRVEXCHCM301.precheza.cz>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
 <FA31455D-5A27-4CC2-8B70-1BB84C49CC82@dcn.davis.ca.us>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA4D3@SRVEXCHCM301.precheza.cz>
Message-ID: <2638CE0B-5712-4616-B7CB-A07ED1A40AE7@comcast.net>



Sent from my iPhone

> On Jul 4, 2017, at 4:58 AM, PIKAL Petr <petr.pikal at precheza.cz> wrote:
> 
> Hi
> 
>> -----Original Message-----
>> From: Jeff Newmiller [mailto:jdnewmil at dcn.davis.ca.us]
>> Sent: Tuesday, July 4, 2017 1:02 PM
>> To: r-help at r-project.org; PIKAL Petr <petr.pikal at precheza.cz>; r-help <r-
>> help at r-project.org>
>> Subject: Re: [R] R and UBUNTU startup
>> 
>> Q1. No.
>> 
>> Q2. What do you do? Did you follow the instructions at [1]? If you go to the top
>> level of the R help system you should be able to open the manuals. ?help
> 
> No. I installed from Ubuntu Software Center (by point and click method) as I am not very familiar with sudo terminal issues and I thought that following a way which is offered by Ubuntu is enough.

If you do that you get an outdated version of R. And I think you only get the base version although I'm not completely sure. I've gone through a similar transition myself recently although it was from OSX. I think you need to bite the bullet and use the method in the CRAN README. I decided to try RStudio. But rstudio will find whatever version is installed so that's a separate decision. 
>> 
>> Q3. Not that I know of. If you have difficulty with R on Linux then you should
>> focus on learning how to use Linux in general... and learn what X-Windows is.
> 
> Hm. I have some book about Linux from about 2005, which I think is quite old and I am not sure if almost 15 years old recommendations are still valid.

The Ask.Ubuntu website is useful as are the r-sig-debian Archives. 
> 
>> But just as with Windows, googling your problem will usually lead to stepwise
> 
> I searched all questions and especially question 1 but was not able to find such concise answer.
> 
> Anyway, thank you for all answers. I will need to find my way through Linux. Probably the most problematic will be to get rid of Windows habits and shortcuts.
> 
> Best regards
> Petr
> 
>> solutions. Note that most issues with R should not require entering your
>> password, though some supporting system features may require that you use
>> the package manager to install Ubuntu packages.
>> 
>> [1] https://cran.r-project.org/bin/linux/ubuntu/
>> --
>> Sent from my phone. Please excuse my brevity.
>> 
>>> On July 4, 2017 2:15:19 AM PDT, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>>> Dear all
>>> 
>>> I have 3 questions. Due to some reason I switched from Vista to Ubuntu
>>> on home PC. I was used to start with Rgui.exe. However I am not able to
>>> find it under Ubuntu and R starts as terminal (probably Rterm).
>>> 
>>> Question 1. Is Rgui.exe available on linux?
>>> 
>>> In Windows doc folder I can find manuals, however I did not find doc
>>> folder in Ubuntu. I found somewhere that manuals need to be installed
>>> separately by make ....
>>> 
>>> Question 2. Is it necessary to install manuals or I made some mis


From chocold12 at gmail.com  Tue Jul  4 20:31:55 2017
From: chocold12 at gmail.com (lily li)
Date: Tue, 4 Jul 2017 12:31:55 -0600
Subject: [R] about adding a column for water year
Message-ID: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>

Hi R users,
I have a question about adding a column for water year. The dataframe has
the structure below. But the wyear column just shows one year. Could anyone
help me with this problem? Thanks.

DF
year   month   day      time            flow
1972      1         1    1972-01-01       5
1972      1         2    1972-01-02       5.5
1972      1         3    1972-01-03       6
...
1985     12       31   1985-12-31       6


for(i in 1972:1985){
    if(DF$year==i & DF$month %in% 1:9){
      DF$wyear <- i {
    }else{
      DF$wyear < i-1
    }
  }
}

	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Tue Jul  4 21:20:24 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Tue, 4 Jul 2017 12:20:24 -0700
Subject: [R] about adding a column for water year
In-Reply-To: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>
References: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>
Message-ID: <CAGxFJbQ57eDok7fTrOANf4OtcEu8fjR7VJW3e=B9X=ih_B=V7A@mail.gmail.com>

Well, let's see:

1) You do not appear to understand basic flow control statements in R.

Note that (from ?if):

if(cond) expr
if(cond) cons.expr  else  alt.expr

where
"cond   A length-one logical vector that is not NA."

Your cond is a vector of length nrow(DF), so you don't want if, you
want ifelse().
Did you fail to show us your warning messages??

2. Revising your code and eliminating the extraneous brackets, one gets:

for(i in 1972:1985){
   ifelse(DF$year==i & DF$month %in% 1:9, DF$wyear <- i,
   DF$wyear < i-1)
}

But that doesn't work either, giving only 1985. Why? -- because the
assignment statement DF$wyear <- i  assigns the single value i to the
whole column. So the whole column gets the last value of 1985, which
is presumably what you saw but neglected to tell us.

3.  That can be fixed by ditching the loop and ising ifelse() properly:

DF$wyear <-ifelse(DF$month %in% 1:9,DF$year ,DF$year-1)

or even more succinctly, albeit with a trick (automatic coercion of
logical to numeric)

 DF$wyear <- DF$year - (DF$month %in% 10:12)


This is an example of vectorization, a powerful feature of R that
would be worthwhile for you to learn. Your initial use of a C like
for() loop should be avoided when possible, as it could be here.

If I have made an error in understanding what you are doing, please do
let us all know. I get it wrong from time to time.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 4, 2017 at 11:31 AM, lily li <chocold12 at gmail.com> wrote:
> Hi R users,
> I have a question about adding a column for water year. The dataframe has
> the structure below. But the wyear column just shows one year. Could anyone
> help me with this problem? Thanks.
>
> DF
> year   month   day      time            flow
> 1972      1         1    1972-01-01       5
> 1972      1         2    1972-01-02       5.5
> 1972      1         3    1972-01-03       6
> ...
> 1985     12       31   1985-12-31       6
>
>
> for(i in 1972:1985){
>     if(DF$year==i & DF$month %in% 1:9){
>       DF$wyear <- i {
>     }else{
>       DF$wyear < i-1
>     }
>   }
> }
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch.duncan at gmail.com  Tue Jul  4 21:39:27 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 4 Jul 2017 15:39:27 -0400
Subject: [R] R and UBUNTU startup
In-Reply-To: <7e572f13-2392-003f-0e1c-0f29d8166133@yorku.ca>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
 <7e572f13-2392-003f-0e1c-0f29d8166133@yorku.ca>
Message-ID: <6ddea984-ff60-5836-15e4-09e16edeb2fd@gmail.com>

On 04/07/2017 12:46 PM, Michael Friendly wrote:
> On 7/04/17 11:15 AM, PIKAL Petr wrote:
>> Dear all
>>
>> I have 3 questions. Due to some reason I switched from Vista to Ubuntu on home PC. I was used to start with Rgui.exe. However I am not able to find it under Ubuntu and R starts as terminal (probably Rterm).
>>
>> Question 1. Is Rgui.exe available on linux?
> No, but you will find things nicer than Rgui by switching to R Studio,
> which you can use on all platforms.
>>
>> In Windows doc folder I can find manuals, however I did not find doc folder in Ubuntu. I found somewhere that manuals need to be installed separately by make ....
>>
>> Question 2. Is it necessary to install manuals or I made some mistake when installing from Ubuntu software repository.
> Just a guess: did you try man R?
> All R manuals should be installed by default,but I'm not sure where.

Running help.start() from within R should get you access to the HTML 
versions.  The pdf versions aren't always built; it depends on how you 
do the build.

Duncan Murdoch

>
>>
>> And question 3 is simple. Are there some kind of "Linux R for Windows dummies" available?
>>
>> Best regards
>> Petr
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From chocold12 at gmail.com  Tue Jul  4 21:40:05 2017
From: chocold12 at gmail.com (lily li)
Date: Tue, 4 Jul 2017 13:40:05 -0600
Subject: [R] about adding a column for water year
In-Reply-To: <CAGxFJbQ57eDok7fTrOANf4OtcEu8fjR7VJW3e=B9X=ih_B=V7A@mail.gmail.com>
References: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>
 <CAGxFJbQ57eDok7fTrOANf4OtcEu8fjR7VJW3e=B9X=ih_B=V7A@mail.gmail.com>
Message-ID: <CAN5afy_qWFH0fBf3HVrE-8Wy6YBTJHw4Twd1eNONMFkQvm+p0g@mail.gmail.com>

Thanks, it works. Yes, I got the same error message when tried my original
code and Rui's code:
 In if (DF$year == i & DF$month %in% 1:9) { ... :
  the condition has length > 1 and only the first element will be used

Also, I think I made a mistake, it should be i+1 rather than i-1.
Otherwise, it has no problem.

On Tue, Jul 4, 2017 at 1:20 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Well, let's see:
>
> 1) You do not appear to understand basic flow control statements in R.
>
> Note that (from ?if):
>
> if(cond) expr
> if(cond) cons.expr  else  alt.expr
>
> where
> "cond   A length-one logical vector that is not NA."
>
> Your cond is a vector of length nrow(DF), so you don't want if, you
> want ifelse().
> Did you fail to show us your warning messages??
>
> 2. Revising your code and eliminating the extraneous brackets, one gets:
>
> for(i in 1972:1985){
>    ifelse(DF$year==i & DF$month %in% 1:9, DF$wyear <- i,
>    DF$wyear < i-1)
> }
>
> But that doesn't work either, giving only 1985. Why? -- because the
> assignment statement DF$wyear <- i  assigns the single value i to the
> whole column. So the whole column gets the last value of 1985, which
> is presumably what you saw but neglected to tell us.
>
> 3.  That can be fixed by ditching the loop and ising ifelse() properly:
>
> DF$wyear <-ifelse(DF$month %in% 1:9,DF$year ,DF$year-1)
>
> or even more succinctly, albeit with a trick (automatic coercion of
> logical to numeric)
>
>  DF$wyear <- DF$year - (DF$month %in% 10:12)
>
>
> This is an example of vectorization, a powerful feature of R that
> would be worthwhile for you to learn. Your initial use of a C like
> for() loop should be avoided when possible, as it could be here.
>
> If I have made an error in understanding what you are doing, please do
> let us all know. I get it wrong from time to time.
>
> Cheers,
> Bert
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Tue, Jul 4, 2017 at 11:31 AM, lily li <chocold12 at gmail.com> wrote:
> > Hi R users,
> > I have a question about adding a column for water year. The dataframe has
> > the structure below. But the wyear column just shows one year. Could
> anyone
> > help me with this problem? Thanks.
> >
> > DF
> > year   month   day      time            flow
> > 1972      1         1    1972-01-01       5
> > 1972      1         2    1972-01-02       5.5
> > 1972      1         3    1972-01-03       6
> > ...
> > 1985     12       31   1985-12-31       6
> >
> >
> > for(i in 1972:1985){
> >     if(DF$year==i & DF$month %in% 1:9){
> >       DF$wyear <- i {
> >     }else{
> >       DF$wyear < i-1
> >     }
> >   }
> > }
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ruipbarradas at sapo.pt  Tue Jul  4 20:17:24 2017
From: ruipbarradas at sapo.pt (Rui Barradas)
Date: Tue, 04 Jul 2017 19:17:24 +0100
Subject: [R] about adding a column for water year
In-Reply-To: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>
References: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>
Message-ID: <595BDBB4.9090002@sapo.pt>

Hello,

You have a '{' too many.

for(i in 1972:1985){
       if(DF$year==i & DF$month %in% 1:9){
         DF$wyear <- i
       }else{
         DF$wyear < i-1
       }
     }
  }

I believe this is it.

Hope this helps,

Rui Barradas

Em 04-07-2017 19:31, lily li escreveu:
> Hi R users,
> I have a question about adding a column for water year. The dataframe has
> the structure below. But the wyear column just shows one year. Could anyone
> help me with this problem? Thanks.
>
> DF
> year   month   day      time            flow
> 1972      1         1    1972-01-01       5
> 1972      1         2    1972-01-02       5.5
> 1972      1         3    1972-01-03       6
> ...
> 1985     12       31   1985-12-31       6
>
>
> for(i in 1972:1985){
>      if(DF$year==i & DF$month %in% 1:9){
>        DF$wyear <- i {
>      }else{
>        DF$wyear < i-1
>      }
>    }
> }
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From frainj at gmail.com  Tue Jul  4 22:28:57 2017
From: frainj at gmail.com (John C Frain)
Date: Tue, 4 Jul 2017 21:28:57 +0100
Subject: [R] R and UBUNTU startup
In-Reply-To: <6ddea984-ff60-5836-15e4-09e16edeb2fd@gmail.com>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FF9AA3E9@SRVEXCHCM301.precheza.cz>
 <7e572f13-2392-003f-0e1c-0f29d8166133@yorku.ca>
 <6ddea984-ff60-5836-15e4-09e16edeb2fd@gmail.com>
Message-ID: <CAHrK514PdFKUNEoa92svyJKFuFxO=cJGv0aSfgUWe_90SHor1A@mail.gmail.com>

If you want to keep your R installation up to date use the installation
instructions available for ubuntu at
https://cran.r-project.org/bin/linux/ubuntu/.  Follow the instructions
there and you will be able to use standard Ubuntu update procedures
afterwards. (Delete your old version first).  Download rstudio (32 or
64-bit version as required) from
https://www.rstudio.com/products/rstudio/download/.. Open in
software-centre and install.  You can keep rstudio up to date by
downloading the new version and repeating the process.

Verzani, Getting started with Rstudio, O'Reilly would be a good starting
point to learn RStudio.  PACKT Publishing have several other books on
Rstudio.  R an Rstudio are almost the same on windows and Linux.  I had an
earlier edition of ubuntu unleashed 2017.  You might have a look at the
material at https://itsfoss.com/5-free-ubuntu-books-for-beginners/.  You do
need to know how to manage files in linux.  Installing and updating
 software using apt-get is really simple.




John C Frain
3 Aranleigh Park
Rathfarnham
Dublin 14
Ireland
www.tcd.ie/Economics/staff/frainj/home.html
mailto:frainj at tcd.ie
mailto:frainj at gmail.com

On 4 July 2017 at 20:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 04/07/2017 12:46 PM, Michael Friendly wrote:
>
>> On 7/04/17 11:15 AM, PIKAL Petr wrote:
>>
>>> Dear all
>>>
>>> I have 3 questions. Due to some reason I switched from Vista to Ubuntu
>>> on home PC. I was used to start with Rgui.exe. However I am not able to
>>> find it under Ubuntu and R starts as terminal (probably Rterm).
>>>
>>> Question 1. Is Rgui.exe available on linux?
>>>
>> No, but you will find things nicer than Rgui by switching to R Studio,
>> which you can use on all platforms.
>>
>>>
>>> In Windows doc folder I can find manuals, however I did not find doc
>>> folder in Ubuntu. I found somewhere that manuals need to be installed
>>> separately by make ....
>>>
>>> Question 2. Is it necessary to install manuals or I made some mistake
>>> when installing from Ubuntu software repository.
>>>
>> Just a guess: did you try man R?
>> All R manuals should be installed by default,but I'm not sure where.
>>
>
> Running help.start() from within R should get you access to the HTML
> versions.  The pdf versions aren't always built; it depends on how you do
> the build.
>
> Duncan Murdoch
>
>
>
>>
>>> And question 3 is simple. Are there some kind of "Linux R for Windows
>>> dummies" available?
>>>
>>> Best regards
>>> Petr
>>>
>>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posti
> ng-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Tue Jul  4 22:51:05 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 04 Jul 2017 13:51:05 -0700
Subject: [R] about adding a column for water year
In-Reply-To: <595BDBB4.9090002@sapo.pt>
References: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>
 <595BDBB4.9090002@sapo.pt>
Message-ID: <69215CF0-592D-4E09-AFC6-EFE3194428C7@dcn.davis.ca.us>

Hardly. DF$wyear is a vector, but it is being treated as though it is a scalar. Read Bert's response. 
-- 
Sent from my phone. Please excuse my brevity.

On July 4, 2017 11:17:24 AM PDT, Rui Barradas <ruipbarradas at sapo.pt> wrote:
>Hello,
>
>You have a '{' too many.
>
>for(i in 1972:1985){
>       if(DF$year==i & DF$month %in% 1:9){
>         DF$wyear <- i
>       }else{
>         DF$wyear < i-1
>       }
>     }
>  }
>
>I believe this is it.
>
>Hope this helps,
>
>Rui Barradas
>
>Em 04-07-2017 19:31, lily li escreveu:
>> Hi R users,
>> I have a question about adding a column for water year. The dataframe
>has
>> the structure below. But the wyear column just shows one year. Could
>anyone
>> help me with this problem? Thanks.
>>
>> DF
>> year   month   day      time            flow
>> 1972      1         1    1972-01-01       5
>> 1972      1         2    1972-01-02       5.5
>> 1972      1         3    1972-01-03       6
>> ...
>> 1985     12       31   1985-12-31       6
>>
>>
>> for(i in 1972:1985){
>>      if(DF$year==i & DF$month %in% 1:9){
>>        DF$wyear <- i {
>>      }else{
>>        DF$wyear < i-1
>>      }
>>    }
>> }
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From drjimlemon at gmail.com  Wed Jul  5 00:00:46 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Wed, 5 Jul 2017 08:00:46 +1000
Subject: [R] about adding a column for water year
In-Reply-To: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>
References: <CAN5afy-fXtEHzVwYWkZWy+8jViyeuDvu8XQ6EKy6=-K9h_jj5Q@mail.gmail.com>
Message-ID: <CA+8X3fU6Ba8HukH0zG_yokCKhp=Ux0eBsA=9p+BQ=VO88h3DwA@mail.gmail.com>

Hi lily,
It might be easier doing it like this:

DF<-data.frame(year=rep(1972:1985,each=12),
 month=rep(1:12,14),day=rep(1,168))
DF$time<-paste(DF$year,DF$month,DF$day,sep="-")
DF$flow<-runif(168,4,7)
DF$wyear<-DF$year + (DF$month > 9)

Jim

On Wed, Jul 5, 2017 at 4:31 AM, lily li <chocold12 at gmail.com> wrote:
> Hi R users,
> I have a question about adding a column for water year. The dataframe has
> the structure below. But the wyear column just shows one year. Could anyone
> help me with this problem? Thanks.
>
> DF
> year   month   day      time            flow
> 1972      1         1    1972-01-01       5
> 1972      1         2    1972-01-02       5.5
> 1972      1         3    1972-01-03       6
> ...
> 1985     12       31   1985-12-31       6
>
>
> for(i in 1972:1985){
>     if(DF$year==i & DF$month %in% 1:9){
>       DF$wyear <- i {
>     }else{
>       DF$wyear < i-1
>     }
>   }
> }
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From agustin.navarro at gmail.com  Wed Jul  5 01:03:49 2017
From: agustin.navarro at gmail.com (Agustin Navarro)
Date: Tue, 4 Jul 2017 19:03:49 -0400
Subject: [R] Unable to install packages in R: Error in if (any(diff)) { :
	missing .....
Message-ID: <CAP=_+UbP6B9JkCOqoy8bBEj9BSqNt0ux0LMiC_dF0v8u_O5nEg@mail.gmail.com>

Unable to install packages in R: Error in if (any(diff)) { : missing value
where TRUE/FALSE needed

Sorry for my bad english

I need help in solving the following problem with R

When I try to install a package it end with the following error msg:


Error in if (any(diff)) { : missing value where TRUE/FALSE needed

the enviroment in windows 7 xp1 x64

R-3.4.1 was just installed

R was started with ?vanilla and --verbose

a complete console log and Sys.getenv() follwos:

|*****************************************************************


c:\Program Files\R\R-3.4.1\bin\x64>R.exe --vanilla --verbose

'verbose' and 'quietly' are both true; being verbose then ..

now dyn.load("c:/Program
Files/R/R-3.4.1/library/methods/libs/x64/methods.dll") ...

Garbage collection 1 = 0+0+1 (level 2) ...

5.8 Mbytes of cons cells used (31%)

1.6 Mbytes of vectors used (25%)


R version 3.4.1 (2017-06-30) -- "Single Candle"

Copyright (C) 2017 The R Foundation for Statistical Computing

Platform: x86_64-w64-mingw32/x64 (64-bit)


R is free software and comes with ABSOLUTELY NO WARRANTY.

You are welcome to redistribute it under certain conditions.

Type 'license()' or 'licence()' for distribution details.


Natural language support but running in an English locale


R is a collaborative project with many contributors.

Type 'contributors()' for more information and

'citation()' on how to cite R or R packages in publications.


Type 'demo()' for some demos, 'help()' for on-line help, or

'help.start()' for an HTML browser interface to help.

Type 'q()' to quit R.


'verbose' and 'quietly' are both true; being verbose then ..

'verbose' and 'quietly' are both true; being verbose then ..

Garbage collection 2 = 1+0+1 (level 0) ...

7.4 Mbytes of cons cells used (39%)

3.7 Mbytes of vectors used (61%)

now dyn.load("c:/Program Files/R/R-3.4.1/library/utils/libs/x64/utils.dll")
...

'verbose' and 'quietly' are both true; being verbose then ..

now dyn.load("c:/Program
Files/R/R-3.4.1/library/grDevices/libs/x64/grDevices.dll") ...

'verbose' and 'quietly' are both true; being verbose then ..

Garbage collection 3 = 2+0+1 (level 0) ...

11.9 Mbytes of cons cells used (63%)

4.7 Mbytes of vectors used (78%)

now dyn.load("c:/Program
Files/R/R-3.4.1/library/graphics/libs/x64/graphics.dll") ...

'verbose' and 'quietly' are both true; being verbose then ..

now dyn.load("c:/Program Files/R/R-3.4.1/library/stats/libs/x64/stats.dll")
...

Garbage collection 4 = 3+0+1 (level 0) ...

13.1 Mbytes of cons cells used (70%)

4.9 Mbytes of vectors used (82%)

ending setup_Rmainloop(): R_Interactive = 1 {main.c}

>R_ReplConsole(): before "for(;;)" {main.c}

> install.packages("ctv")

Garbage collection 5 = 3+1+1 (level 1) ...

13.2 Mbytes of cons cells used (70%)

3.8 Mbytes of vectors used (62%)

Installing package into 'C:/Users/anp/Documents/R/win-library/3.4'

(as 'lib' is unspecified)

--- Please select a CRAN mirror for use in this session ---

now dyn.load("c:/Program Files/R/R-3.4.1/library/tools/libs/x64/tools.dll")
...

Garbage collection 6 = 4+1+1 (level 0) ...

14.8 Mbytes of cons cells used (79%)

4.2 Mbytes of vectors used (69%)

Garbage collection 7 = 4+2+1 (level 1) ...

15.8 Mbytes of cons cells used (85%)

6.0 Mbytes of vectors used (99%)

Garbage collection 8 = 4+2+2 (level 2) ...

15.8 Mbytes of cons cells used (64%)

6.0 Mbytes of vectors used (65%)

Garbage collection 9 = 5+2+2 (level 0) ...

16.1 Mbytes of cons cells used (65%)

7.9 Mbytes of vectors used (85%)

Garbage collection 10 = 5+3+2 (level 1) ...

16.1 Mbytes of cons cells used (65%)

7.9 Mbytes of vectors used (85%)

Garbage collection 11 = 5+3+3 (level 2) ...

16.1 Mbytes of cons cells used (51%)

8.0 Mbytes of vectors used (60%)

Garbage collection 12 = 6+3+3 (level 0) ...

16.1 Mbytes of cons cells used (51%)

9.7 Mbytes of vectors used (73%)

Garbage collection 13 = 6+4+3 (level 1) ...

16.2 Mbytes of cons cells used (51%)

9.9 Mbytes of vectors used (74%)

Garbage collection 14 = 7+4+3 (level 0) ...

17.3 Mbytes of cons cells used (55%)

10.3 Mbytes of vectors used (77%)

Garbage collection 15 = 8+4+3 (level 0) ...

18.4 Mbytes of cons cells used (58%)

11.3 Mbytes of vectors used (85%)

Garbage collection 16 = 8+5+3 (level 1) ...

17.9 Mbytes of cons cells used (56%)

11.1 Mbytes of vectors used (83%)

Garbage collection 17 = 8+5+4 (level 2) ...

16.3 Mbytes of cons cells used (51%)

7.5 Mbytes of vectors used (56%)

Garbage collection 18 = 9+5+4 (level 0) ...

17.8 Mbytes of cons cells used (56%)

9.8 Mbytes of vectors used (74%)

Garbage collection 19 = 9+5+5 (level 2) ...

16.5 Mbytes of cons cells used (52%)

6.6 Mbytes of vectors used (49%)

Garbage collection 20 = 10+5+5 (level 0) ...

16.5 Mbytes of cons cells used (52%)

9.7 Mbytes of vectors used (73%)

Garbage collection 21 = 10+6+5 (level 1) ...

16.5 Mbytes of cons cells used (52%)

9.6 Mbytes of vectors used (72%)

Garbage collection 22 = 10+6+6 (level 2) ...

17.2 Mbytes of cons cells used (54%)

8.5 Mbytes of vectors used (51%)

Garbage collection 23 = 11+6+6 (level 0) ...

17.6 Mbytes of cons cells used (55%)

8.7 Mbytes of vectors used (52%)

Garbage collection 24 = 12+6+6 (level 0) ...

18.7 Mbytes of cons cells used (59%)

9.6 Mbytes of vectors used (58%)

Garbage collection 25 = 13+6+6 (level 0) ...

19.4 Mbytes of cons cells used (61%)

9.9 Mbytes of vectors used (60%)

Garbage collection 26 = 14+6+6 (level 0) ...

19.4 Mbytes of cons cells used (61%)

9.9 Mbytes of vectors used (60%)

Garbage collection 27 = 15+6+6 (level 0) ...

20.0 Mbytes of cons cells used (63%)

12.0 Mbytes of vectors used (72%)

trying URL '
https://cran.revolutionanalytics.com/bin/windows/contrib/3.4/ctv_0.8-2.zip'

Content type 'application/zip' length 380910 bytes (371 KB)

downloaded 371 KB


Error in if (any(diff)) { : missing value where TRUE/FALSE needed

>R_ReplConsole(): before "for(;;)" {main.c}

> Sys.getenv()

ALLUSERSPROFILE C:\ProgramData

APPDATA C:\Users\anp\AppData\Roaming

asl.log Destination=file

CommonProgramFiles C:\Program Files\Common Files

CommonProgramFiles(x86)

C:\Program Files (x86)\Common Files

CommonProgramW6432 C:\Program Files\Common Files

COMPUTERNAME ABRIL

ComSpec C:\Windows\system32\cmd.exe

ConsoleZBaseDir C:\Program Files\ConsoleZ.x64.1.18.1.17087\

ConsoleZSettingsDir C:\Users\anp\AppData\Roaming\Console\

ConsoleZSnippetsDir C:\Users\anp\AppData\Roaming\Console\Snippets\

ConsoleZVersion 1.18.1.17087

FP_NO_HOST_CHECK NO

HOME C:\Users\anp\Documents

HOMEDRIVE C:

HOMEPATH \Users\anp

JD2_HOME C:\Users\anp\AppData\Local\JDownloader 2.0

LOCALAPPDATA C:\Users\anp\AppData\Local

LOGONSERVER \\ABRIL

NUMBER_OF_PROCESSORS 2

OS Windows_NT

PATH
C:\ProgramData\Oracle\Java\javapath;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program

Files\Intel\DMIX;C:\Program

Files\Calibre2\;C:\Program Files

(x86)\Skype\Phone\;C:\bin;C:\ProgramData\Anaconda3;C:\ProgramData\Anaconda3\Scripts;C:\ProgramData\Anaconda3\Library\bin;;C:\Program

Files (x86)\Microsoft VS Code\bin;C:\Program

Files (x86)\GnuWin32\bin;C:\bin;C:\Program

Files (x86)\Midnight Commander;

PATHEXT .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC

PROCESSOR_ARCHITECTURE

AMD64

PROCESSOR_IDENTIFIER Intel64 Family 6 Model 23 Stepping 6,

GenuineIntel

PROCESSOR_LEVEL 6

PROCESSOR_REVISION 1706

ProgramData C:\ProgramData

ProgramFiles C:\Program Files

ProgramFiles(x86) C:\Program Files (x86)

ProgramW6432 C:\Program Files

PROMPT $P$G

PSModulePath C:\Windows\system32\WindowsPowerShell\v1.0\Modules\

PUBLIC C:\Users\Public

R_ARCH /x64

R_COMPILED_BY gcc 4.9.3

R_HOME c:/PROGRA~1/R/R-34~1.1

R_LIBS_USER C:\Users\anp\Documents/R/win-library/3.4

R_USER C:\Users\anp\Documents

SESSIONNAME Console

SystemDrive C:

SystemRoot C:\Windows

TEMP C:\Users\anp\AppData\Local\Temp

TMP C:\Users\anp\AppData\Local\Temp

USERDOMAIN abril

USERNAME anp

USERPROFILE C:\Users\anp

windir C:\Windows

windows_tracing_flags 3

windows_tracing_logfile

C:\BVTBin\Tests\installpackage\csilogfile.log

>

	[[alternative HTML version deleted]]


From msharp at TxBiomed.org  Wed Jul  5 03:56:34 2017
From: msharp at TxBiomed.org (Mark Sharp)
Date: Wed, 5 Jul 2017 01:56:34 +0000
Subject: [R] Please help(urgent) - How to simulate transactional data
 for reliability/survival analysis
In-Reply-To: <CANOG_FVm1bdY4Hk7f3WXOOpPRNyStNHNMYp6V51UfsvR8j1wPQ@mail.gmail.com>
References: <D2975E52-CE3D-4ECE-BDF3-8CC44C8CC444@gmail.com>
 <8B17F5C0-6AAE-435D-92EE-A8ADBE214FE3@utoronto.ca>
 <CANOG_FVm1bdY4Hk7f3WXOOpPRNyStNHNMYp6V51UfsvR8j1wPQ@mail.gmail.com>
Message-ID: <F597C7EC-AEEA-45C7-A4F9-F2348CDBDB1C@txbiomed.org>

A small example data set that illustrates your question will be of great value to those trying to help. This appears to be a transformation that you are wanting to do (timestamp to units of time) so a data representing what you have (dput() is handy for this) and one representing what you want to have with any guidance regarding how to use the other columns in you data set (e.g., the event(0/1)).

Mark
R. Mark Sharp, Ph.D.
msharp at TxBiomed.org





> On Jul 4, 2017, at 7:02 AM, Sunny Singha <sunnysingha.analytics at gmail.com> wrote:
>
> Thanks Boris and Bret,
> I was successful in simulating granular/transactional data.
> Now I need some guidance to transform the same data in format acceptable
> for survival analysis i.e below format:
>
> pump_id | event_episode_no. | event(0/1) | start | stop | time_to_dropout
>
> The challenge I'm experience is to generate the 'start' and 'stop' in units
> of minutes/days from single column of 'Timestamp' which is
> the column from transactional/granular data based on condition tagged in
> separate column, 'event 0/1, (i.e event ).
>
> Please guide how to do such transformation in 'R'.
>
> Regards,
> Sandeep
>
>
>
> On Wed, Jun 28, 2017 at 2:51 PM, Boris Steipe <boris.steipe at utoronto.ca>
> wrote:
>
>> In principle what you need to do is the following:
>>
>> - break down the time you wish to simulate into intervals.
>> - for each interval, and each failure mode, determine the probability of
>> an event.
>>   Determining the probability is the fun part, where you make your domain
>>   knowledge explicit and include all the factors into your model:
>> cumulative load,
>>   failure history, pressure, temperature, phase of the moon ...
>> - once you have a probability of failure, use the runif() function to
>> give you
>>   a uniformly distributed random number in [0, 1]. If the number is
>> smaller than
>>   your failure probability, accept the failure event, and record it.
>> - Repeat many times.
>>
>> Hope this helps.
>> B.
>>
>>
>>
>>
>>> On Jun 27, 2017, at 10:58 AM, sandeep Rana <sandykido at gmail.com> wrote:
>>>
>>> Hi friends,
>>> I haven't done such a simulation before and any help would be greatly
>> appreciated. I need your guidance.
>>>
>>> I need to simulate end to end data for Reliability/survival analysis of
>> a Pump ,with correlation in place, that is at 'Transactional level' or at
>> the granularity of time-minutes, where each observation is a reading
>> captured via Pump's sensors each minute.
>>> Once transactional data is prepared I Then need to summarise above data
>> for reliability/ survival analysis.
>>>
>>> To begin with below is the transactional data format that i want prepare:
>>> Pump-id| Timestamp | temp | vibration | suction pressure| discharge
>> pressure | Flow
>>>
>>> Above transactional data has to be prepared with below failure modes
>>> Defects :
>>> (1)    Cavitation ? very high in frequency but low impact
>>> (2)    Bearing Damage ? very low in frequency but high impact
>>> (3)    Worn Shaft ? medium frequency but medium impact
>>>
>>> I have used survsim package but that's not what I need here.
>>> Please help and guide.
>>>
>>> Regards,
>>> Sandeep
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/
>> posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/
>> posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

CONFIDENTIALITY NOTICE: This e-mail and any files and/or attachments transmitted, may contain privileged and confidential information and is intended solely for the exclusive use of the individual or entity to whom it is addressed. If you are not the intended recipient, you are hereby notified that any review, dissemination, distribution or copying of this e-mail and/or attachments is strictly prohibited. If you have received this e-mail in error, please immediately notify the sender stating that this transmission was misdirected; return the e-mail to sender; destroy all paper copies and delete all electronic copies from your system without disclosing its contents.

From sunnysingha.analytics at gmail.com  Wed Jul  5 08:03:03 2017
From: sunnysingha.analytics at gmail.com (Sunny Singha)
Date: Wed, 5 Jul 2017 11:33:03 +0530
Subject: [R] Please help(urgent) - How to simulate transactional data
 for reliability/survival analysis
In-Reply-To: <F597C7EC-AEEA-45C7-A4F9-F2348CDBDB1C@txbiomed.org>
References: <D2975E52-CE3D-4ECE-BDF3-8CC44C8CC444@gmail.com>
 <8B17F5C0-6AAE-435D-92EE-A8ADBE214FE3@utoronto.ca>
 <CANOG_FVm1bdY4Hk7f3WXOOpPRNyStNHNMYp6V51UfsvR8j1wPQ@mail.gmail.com>
 <F597C7EC-AEEA-45C7-A4F9-F2348CDBDB1C@txbiomed.org>
Message-ID: <CANOG_FX1PBEHSyeF59qXFR=QjpZ6P2Ui0xRiRkyjL-yfMSCpkw@mail.gmail.com>

Mark,
Below is the sampled simulated granular data format for pumps for
trial period of 3 months that I need to transform for survival
analysis:
3 months = (60*24*90) minutes i.e 129600 minutes

pump_id timings                events   vibration temprature flow
pump1 01-07-2017 00:00       0        3.443    69.6           139.806
pump1 01-07-2017 00:10       1        0.501    45.27         140.028
pump1 01-07-2017 00:20       0        2.031    52.9           137.698
pump1 01-07-2017 00:30       0        2.267    60.12         139.054
pump1 01-07-2017 00:40       1        2.267    60.12         139.054
pump1 01-07-2017 00:50       0        2.267    60.12         139.054
pump2 01-07-2017 00:00       0        3.443    69.6           139.806
pump2 01-07-2017 00:10       0        0.501    45.27         140.028
pump2 01-07-2017 00:20       0        2.031    52.9           137.698
pump2 01-07-2017 00:30       0        2.267    60.12         139.054
pump2 01-07-2017 00:40       1        2.267    60.12         139.054
pump2 01-07-2017 00:50       0        2.267    60.12         139.054

The above data set records observations and timings where 'pumps'
experienced failure, tagged as '1' in column 'events'.
In the above granular dataset the pump1 experiences 2 "event episodes."

Below is the desired transformed format. the covariates in this data
set will have the mean value:
pump_id      event_episodes      event_status      start(minutes)
stop(minutes)
pump1                          1                             1
          0                               10
pump1                          2                             1
         10                              40
pump1                          3                             0
         40                              129600
pump2                          1                             1
          0                               40
pump2                          2                             0
          0                               129600
.........
.........

The 'start' and 'stop' columns are evaluated from the 'timings'
columns. I need help in performing such transformation in 'R'.
Please guide and help.

Regards,
Sandeep

On Wed, Jul 5, 2017 at 7:26 AM, Mark Sharp <msharp at txbiomed.org> wrote:
> A small example data set that illustrates your question will be of great value to those trying to help. This appears to be a transformation that you are wanting to do (timestamp to units of time) so a data representing what you have (dput() is handy for this) and one representing what you want to have with any guidance regarding how to use the other columns in you data set (e.g., the event(0/1)).
>
> Mark
> R. Mark Sharp, Ph.D.
> msharp at TxBiomed.org
>
>
>
>
>
>> On Jul 4, 2017, at 7:02 AM, Sunny Singha <sunnysingha.analytics at gmail.com> wrote:
>>
>> Thanks Boris and Bret,
>> I was successful in simulating granular/transactional data.
>> Now I need some guidance to transform the same data in format acceptable
>> for survival analysis i.e below format:
>>
>> pump_id | event_episode_no. | event(0/1) | start | stop | time_to_dropout
>>
>> The challenge I'm experience is to generate the 'start' and 'stop' in units
>> of minutes/days from single column of 'Timestamp' which is
>> the column from transactional/granular data based on condition tagged in
>> separate column, 'event 0/1, (i.e event ).
>>
>> Please guide how to do such transformation in 'R'.
>>
>> Regards,
>> Sandeep
>>
>>
>>
>> On Wed, Jun 28, 2017 at 2:51 PM, Boris Steipe <boris.steipe at utoronto.ca>
>> wrote:
>>
>>> In principle what you need to do is the following:
>>>
>>> - break down the time you wish to simulate into intervals.
>>> - for each interval, and each failure mode, determine the probability of
>>> an event.
>>>   Determining the probability is the fun part, where you make your domain
>>>   knowledge explicit and include all the factors into your model:
>>> cumulative load,
>>>   failure history, pressure, temperature, phase of the moon ...
>>> - once you have a probability of failure, use the runif() function to
>>> give you
>>>   a uniformly distributed random number in [0, 1]. If the number is
>>> smaller than
>>>   your failure probability, accept the failure event, and record it.
>>> - Repeat many times.
>>>
>>> Hope this helps.
>>> B.
>>>
>>>
>>>
>>>
>>>> On Jun 27, 2017, at 10:58 AM, sandeep Rana <sandykido at gmail.com> wrote:
>>>>
>>>> Hi friends,
>>>> I haven't done such a simulation before and any help would be greatly
>>> appreciated. I need your guidance.
>>>>
>>>> I need to simulate end to end data for Reliability/survival analysis of
>>> a Pump ,with correlation in place, that is at 'Transactional level' or at
>>> the granularity of time-minutes, where each observation is a reading
>>> captured via Pump's sensors each minute.
>>>> Once transactional data is prepared I Then need to summarise above data
>>> for reliability/ survival analysis.
>>>>
>>>> To begin with below is the transactional data format that i want prepare:
>>>> Pump-id| Timestamp | temp | vibration | suction pressure| discharge
>>> pressure | Flow
>>>>
>>>> Above transactional data has to be prepared with below failure modes
>>>> Defects :
>>>> (1)    Cavitation ? very high in frequency but low impact
>>>> (2)    Bearing Damage ? very low in frequency but high impact
>>>> (3)    Worn Shaft ? medium frequency but medium impact
>>>>
>>>> I have used survsim package but that's not what I need here.
>>>> Please help and guide.
>>>>
>>>> Regards,
>>>> Sandeep
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/
>>> posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/
>>> posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> CONFIDENTIALITY NOTICE: This e-mail and any files and/or attachments transmitted, may contain privileged and confidential information and is intended solely for the exclusive use of the individual or entity to whom it is addressed. If you are not the intended recipient, you are hereby notified that any review, dissemination, distribution or copying of this e-mail and/or attachments is strictly prohibited. If you have received this e-mail in error, please immediately notify the sender stating that this transmission was misdirected; return the e-mail to sender; destroy all paper copies and delete all electronic copies from your system without disclosing its contents.


From peter.anthoni at kit.edu  Wed Jul  5 09:20:28 2017
From: peter.anthoni at kit.edu (Anthoni, Peter (IMK))
Date: Wed, 5 Jul 2017 07:20:28 +0000
Subject: [R] expand gridded matrix to higher resolution
Message-ID: <BB61AA75-620D-4D0C-9A9D-6127880DD9BA@kit.edu>

Hi all,
(if me email goes out as html, than my email client don't do as told, and I apologies already.)

We need to downscale climate data and therefore first need to expand the climate from 0.5deg to the higher resolution 10min, before we can add high resolution deviations. We basically need to have the original data at each gridcell replicated into 3x3 gridcells. 
A simple for loop can do this, but I could need a faster procedure. Anybody know a faster way? Is there package than can do what we need already?
I tried matrix with rep, but I am missing some magic there, since it doesn't do what we need. 
replicate might be promising, but then still need to rearrange the output into the column and row format we need. 

A simple example:
mm=matrix(1:15,nrow=3,byrow = T)
xmm=matrix(NA,nrow=nrow(mm)*3,ncol=ncol(mm)*3)
for(icol in 1:ncol(mm)) {
  for(irow in 1:nrow(mm)) {
    xicol=(icol-1)*3 +c(1:3)
    xirow=(irow-1)*3 +c(1:3)
    xmm[xirow,xicol]=mm[irow,icol]
  }
}
mm
> > mm
>      [,1] [,2] [,3] [,4] [,5]
> [1,]    1    2    3    4    5
> [2,]    6    7    8    9   10
> [3,]   11   12   13   14   15
> 
xmm
> > xmm
>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15]
>  [1,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>  [2,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>  [3,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>  [4,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>  [5,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>  [6,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>  [7,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>  [8,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>  [9,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15

I tried various rep with matrix, but don't get the right result.
xmm2=matrix(rep(rep(mm,each=3),times=3),nrow=nrow(mm)*3,ncol=ncol(mm)*3,byrow = F)
> identical(xmm,xmm2)
[1] FALSE

rr=replicate(3,rep(t(mm),each=3))
rr
> > rr
>       [,1] [,2] [,3]
>  [1,]    1    1    1
>  [2,]    1    1    1
>  [3,]    1    1    1
>  [4,]    2    2    2
>  [5,]    2    2    2
>  [6,]    2    2    2
>  [7,]    3    3    3
> ...
identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
> > identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
> [1] FALSE
 
Many thanks for any advice.

cheers
Peter


From chinyi at siswa.um.edu.my  Wed Jul  5 03:27:09 2017
From: chinyi at siswa.um.edu.my (SEB140004 Student)
Date: Wed, 5 Jul 2017 09:27:09 +0800
Subject: [R] Question about correlation
Message-ID: <CAFuv27VF=3F+-_RidNoANpQXtd=GLhEAA6oRYAb7WoTjeXa6_w@mail.gmail.com>

Greeting.

Dear Mr/Mrs/Miss,

OTU ID Health Disease
Bacterial 1 0.29 0.34
Bacterial 2 0.25 0.07
Bacterial 3 0.06 0.06
Bacterial 4 0.07 0.09
Bacterial 5 0.02 0.05
Above show the first 6 data sets, may I ask that the reason of R show the
error like "Error in cor(data) : 'x' must be numeric" ? And how to solve
it? Besides, isn't this data can conduct correlation matrix?

Moreover, isn't this data sets can be plot into network? If can, which
package should I use?

Thank you.

Best regards,
Kang Chin Yi

	[[alternative HTML version deleted]]


From drjimlemon at gmail.com  Wed Jul  5 11:56:06 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Wed, 5 Jul 2017 19:56:06 +1000
Subject: [R] Question about correlation
In-Reply-To: <CAFuv27VF=3F+-_RidNoANpQXtd=GLhEAA6oRYAb7WoTjeXa6_w@mail.gmail.com>
References: <CAFuv27VF=3F+-_RidNoANpQXtd=GLhEAA6oRYAb7WoTjeXa6_w@mail.gmail.com>
Message-ID: <CA+8X3fVG5nOC=nsGpVdvOevrdRNRyM9YFmXH0bP7wB_9FoheVw@mail.gmail.com>

Hi Chin Yi,
If you are trying to correlate "Health" with "Disease", i.e.

cydf<-read.table(text="OTU ID Health Disease
  Bacterial 1 0.29 0.34
  Bacterial 2 0.25 0.07
  Bacterial 3 0.06 0.06
  Bacterial 4 0.07 0.09
  Bacterial 5 0.02 0.05",
  header=TRUE)
print(cor(cydf$Health,cydf$Disease))
[1] 0.7103517

If you are getting that error, it probably means that either "Health"
or "Disease" or perhaps both have been read in as a factor. To test
this:

is.factor(cydf$Health)
[1] FALSE
> is.factor(cydf$Disease)
[1] FALSE

If either of these returns TRUE, that is almost certainly the problem.

Jim


On Wed, Jul 5, 2017 at 11:27 AM, SEB140004 Student
<chinyi at siswa.um.edu.my> wrote:
> Greeting.
>
> Dear Mr/Mrs/Miss,
>
> OTU ID Health Disease
> Bacterial 1 0.29 0.34
> Bacterial 2 0.25 0.07
> Bacterial 3 0.06 0.06
> Bacterial 4 0.07 0.09
> Bacterial 5 0.02 0.05
> Above show the first 6 data sets, may I ask that the reason of R show the
> error like "Error in cor(data) : 'x' must be numeric" ? And how to solve
> it? Besides, isn't this data can conduct correlation matrix?
>
> Moreover, isn't this data sets can be plot into network? If can, which
> package should I use?
>
> Thank you.
>
> Best regards,
> Kang Chin Yi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drjimlemon at gmail.com  Wed Jul  5 12:01:25 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Wed, 5 Jul 2017 20:01:25 +1000
Subject: [R] expand gridded matrix to higher resolution
In-Reply-To: <BB61AA75-620D-4D0C-9A9D-6127880DD9BA@kit.edu>
References: <BB61AA75-620D-4D0C-9A9D-6127880DD9BA@kit.edu>
Message-ID: <CA+8X3fUOq57bDR_g4+_Ftvs7HZ6aoNJds8jp9mKSqfv26mb3NA@mail.gmail.com>

Hi Peter,

apply(t(apply(mm,1,rep,each=3)),2,rep,each=3)

Jim

On Wed, Jul 5, 2017 at 5:20 PM, Anthoni, Peter (IMK)
<peter.anthoni at kit.edu> wrote:
> Hi all,
> (if me email goes out as html, than my email client don't do as told, and I apologies already.)
>
> We need to downscale climate data and therefore first need to expand the climate from 0.5deg to the higher resolution 10min, before we can add high resolution deviations. We basically need to have the original data at each gridcell replicated into 3x3 gridcells.
> A simple for loop can do this, but I could need a faster procedure. Anybody know a faster way? Is there package than can do what we need already?
> I tried matrix with rep, but I am missing some magic there, since it doesn't do what we need.
> replicate might be promising, but then still need to rearrange the output into the column and row format we need.
>
> A simple example:
> mm=matrix(1:15,nrow=3,byrow = T)
> xmm=matrix(NA,nrow=nrow(mm)*3,ncol=ncol(mm)*3)
> for(icol in 1:ncol(mm)) {
>   for(irow in 1:nrow(mm)) {
>     xicol=(icol-1)*3 +c(1:3)
>     xirow=(irow-1)*3 +c(1:3)
>     xmm[xirow,xicol]=mm[irow,icol]
>   }
> }
> mm
>> > mm
>>      [,1] [,2] [,3] [,4] [,5]
>> [1,]    1    2    3    4    5
>> [2,]    6    7    8    9   10
>> [3,]   11   12   13   14   15
>>
> xmm
>> > xmm
>>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15]
>>  [1,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>>  [2,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>>  [3,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>>  [4,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>>  [5,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>>  [6,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>>  [7,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>>  [8,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>>  [9,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>
> I tried various rep with matrix, but don't get the right result.
> xmm2=matrix(rep(rep(mm,each=3),times=3),nrow=nrow(mm)*3,ncol=ncol(mm)*3,byrow = F)
>> identical(xmm,xmm2)
> [1] FALSE
>
> rr=replicate(3,rep(t(mm),each=3))
> rr
>> > rr
>>       [,1] [,2] [,3]
>>  [1,]    1    1    1
>>  [2,]    1    1    1
>>  [3,]    1    1    1
>>  [4,]    2    2    2
>>  [5,]    2    2    2
>>  [6,]    2    2    2
>>  [7,]    3    3    3
>> ...
> identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
>> > identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
>> [1] FALSE
>
> Many thanks for any advice.
>
> cheers
> Peter
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From peter.anthoni at kit.edu  Wed Jul  5 12:21:14 2017
From: peter.anthoni at kit.edu (Anthoni, Peter (IMK))
Date: Wed, 5 Jul 2017 10:21:14 +0000
Subject: [R] expand gridded matrix to higher resolution
In-Reply-To: <CA+8X3fUOq57bDR_g4+_Ftvs7HZ6aoNJds8jp9mKSqfv26mb3NA@mail.gmail.com>
References: <BB61AA75-620D-4D0C-9A9D-6127880DD9BA@kit.edu>
 <CA+8X3fUOq57bDR_g4+_Ftvs7HZ6aoNJds8jp9mKSqfv26mb3NA@mail.gmail.com>
Message-ID: <30901E1F-C4AE-4D7E-AAD9-F4862D982075@kit.edu>

Hi Jim,

thanks that works like a charm.  

cheers
Peter



> On 5. Jul 2017, at 12:01, Jim Lemon <drjimlemon at gmail.com> wrote:
> 
> Hi Peter,
> 
> apply(t(apply(mm,1,rep,each=3)),2,rep,each=3)
> 
> Jim
> 
> On Wed, Jul 5, 2017 at 5:20 PM, Anthoni, Peter (IMK)
> <peter.anthoni at kit.edu> wrote:
>> Hi all,
>> (if me email goes out as html, than my email client don't do as told, and I apologies already.)
>> 
>> We need to downscale climate data and therefore first need to expand the climate from 0.5deg to the higher resolution 10min, before we can add high resolution deviations. We basically need to have the original data at each gridcell replicated into 3x3 gridcells.
>> A simple for loop can do this, but I could need a faster procedure. Anybody know a faster way? Is there package than can do what we need already?
>> I tried matrix with rep, but I am missing some magic there, since it doesn't do what we need.
>> replicate might be promising, but then still need to rearrange the output into the column and row format we need.
>> 
>> A simple example:
>> mm=matrix(1:15,nrow=3,byrow = T)
>> xmm=matrix(NA,nrow=nrow(mm)*3,ncol=ncol(mm)*3)
>> for(icol in 1:ncol(mm)) {
>>  for(irow in 1:nrow(mm)) {
>>    xicol=(icol-1)*3 +c(1:3)
>>    xirow=(irow-1)*3 +c(1:3)
>>    xmm[xirow,xicol]=mm[irow,icol]
>>  }
>> }
>> mm
>>>> mm
>>>     [,1] [,2] [,3] [,4] [,5]
>>> [1,]    1    2    3    4    5
>>> [2,]    6    7    8    9   10
>>> [3,]   11   12   13   14   15
>>> 
>> xmm
>>>> xmm
>>>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15]
>>> [1,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>>> [2,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>>> [3,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>>> [4,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>>> [5,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>>> [6,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>>> [7,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>>> [8,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>>> [9,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>> 
>> I tried various rep with matrix, but don't get the right result.
>> xmm2=matrix(rep(rep(mm,each=3),times=3),nrow=nrow(mm)*3,ncol=ncol(mm)*3,byrow = F)
>>> identical(xmm,xmm2)
>> [1] FALSE
>> 
>> rr=replicate(3,rep(t(mm),each=3))
>> rr
>>>> rr
>>>      [,1] [,2] [,3]
>>> [1,]    1    1    1
>>> [2,]    1    1    1
>>> [3,]    1    1    1
>>> [4,]    2    2    2
>>> [5,]    2    2    2
>>> [6,]    2    2    2
>>> [7,]    3    3    3
>>> ...
>> identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
>>>> identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
>>> [1] FALSE
>> 
>> Many thanks for any advice.
>> 
>> cheers
>> Peter
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Wed Jul  5 16:42:45 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Wed, 5 Jul 2017 07:42:45 -0700
Subject: [R] Please help(urgent) - How to simulate transactional data
 for reliability/survival analysis
In-Reply-To: <CANOG_FX1PBEHSyeF59qXFR=QjpZ6P2Ui0xRiRkyjL-yfMSCpkw@mail.gmail.com>
References: <D2975E52-CE3D-4ECE-BDF3-8CC44C8CC444@gmail.com>
 <8B17F5C0-6AAE-435D-92EE-A8ADBE214FE3@utoronto.ca>
 <CANOG_FVm1bdY4Hk7f3WXOOpPRNyStNHNMYp6V51UfsvR8j1wPQ@mail.gmail.com>
 <F597C7EC-AEEA-45C7-A4F9-F2348CDBDB1C@txbiomed.org>
 <CANOG_FX1PBEHSyeF59qXFR=QjpZ6P2Ui0xRiRkyjL-yfMSCpkw@mail.gmail.com>
Message-ID: <CAGxFJbQdmKk1pTyjwPd6pzhiyNT1-+YcgkqtmQT1t7TBWioxAA@mail.gmail.com>

Strictly speaking, this is reliability, not survival, data, since
failed pumps are apparently repaired and put back in service as new.
Also, it is not clear from your data whether there is interval
censoring: is the recorded "event" time (failure) the actual failure
time -- so no censoring -- or the time at which the pump has been
discovered to have failed, so that it is known to have failed in the
interval since the last time it was recorded, but exactly when is
unknown. Presumably there is also standard right censoring -- the pump
is still running when the testing period concludes.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 4, 2017 at 11:03 PM, Sunny Singha
<sunnysingha.analytics at gmail.com> wrote:
> Mark,
> Below is the sampled simulated granular data format for pumps for
> trial period of 3 months that I need to transform for survival
> analysis:
> 3 months = (60*24*90) minutes i.e 129600 minutes
>
> pump_id timings                events   vibration temprature flow
> pump1 01-07-2017 00:00       0        3.443    69.6           139.806
> pump1 01-07-2017 00:10       1        0.501    45.27         140.028
> pump1 01-07-2017 00:20       0        2.031    52.9           137.698
> pump1 01-07-2017 00:30       0        2.267    60.12         139.054
> pump1 01-07-2017 00:40       1        2.267    60.12         139.054
> pump1 01-07-2017 00:50       0        2.267    60.12         139.054
> pump2 01-07-2017 00:00       0        3.443    69.6           139.806
> pump2 01-07-2017 00:10       0        0.501    45.27         140.028
> pump2 01-07-2017 00:20       0        2.031    52.9           137.698
> pump2 01-07-2017 00:30       0        2.267    60.12         139.054
> pump2 01-07-2017 00:40       1        2.267    60.12         139.054
> pump2 01-07-2017 00:50       0        2.267    60.12         139.054
>
> The above data set records observations and timings where 'pumps'
> experienced failure, tagged as '1' in column 'events'.
> In the above granular dataset the pump1 experiences 2 "event episodes."
>
> Below is the desired transformed format. the covariates in this data
> set will have the mean value:
> pump_id      event_episodes      event_status      start(minutes)
> stop(minutes)
> pump1                          1                             1
>           0                               10
> pump1                          2                             1
>          10                              40
> pump1                          3                             0
>          40                              129600
> pump2                          1                             1
>           0                               40
> pump2                          2                             0
>           0                               129600
> .........
> .........
>
> The 'start' and 'stop' columns are evaluated from the 'timings'
> columns. I need help in performing such transformation in 'R'.
> Please guide and help.
>
> Regards,
> Sandeep
>
> On Wed, Jul 5, 2017 at 7:26 AM, Mark Sharp <msharp at txbiomed.org> wrote:
>> A small example data set that illustrates your question will be of great value to those trying to help. This appears to be a transformation that you are wanting to do (timestamp to units of time) so a data representing what you have (dput() is handy for this) and one representing what you want to have with any guidance regarding how to use the other columns in you data set (e.g., the event(0/1)).
>>
>> Mark
>> R. Mark Sharp, Ph.D.
>> msharp at TxBiomed.org
>>
>>
>>
>>
>>
>>> On Jul 4, 2017, at 7:02 AM, Sunny Singha <sunnysingha.analytics at gmail.com> wrote:
>>>
>>> Thanks Boris and Bret,
>>> I was successful in simulating granular/transactional data.
>>> Now I need some guidance to transform the same data in format acceptable
>>> for survival analysis i.e below format:
>>>
>>> pump_id | event_episode_no. | event(0/1) | start | stop | time_to_dropout
>>>
>>> The challenge I'm experience is to generate the 'start' and 'stop' in units
>>> of minutes/days from single column of 'Timestamp' which is
>>> the column from transactional/granular data based on condition tagged in
>>> separate column, 'event 0/1, (i.e event ).
>>>
>>> Please guide how to do such transformation in 'R'.
>>>
>>> Regards,
>>> Sandeep
>>>
>>>
>>>
>>> On Wed, Jun 28, 2017 at 2:51 PM, Boris Steipe <boris.steipe at utoronto.ca>
>>> wrote:
>>>
>>>> In principle what you need to do is the following:
>>>>
>>>> - break down the time you wish to simulate into intervals.
>>>> - for each interval, and each failure mode, determine the probability of
>>>> an event.
>>>>   Determining the probability is the fun part, where you make your domain
>>>>   knowledge explicit and include all the factors into your model:
>>>> cumulative load,
>>>>   failure history, pressure, temperature, phase of the moon ...
>>>> - once you have a probability of failure, use the runif() function to
>>>> give you
>>>>   a uniformly distributed random number in [0, 1]. If the number is
>>>> smaller than
>>>>   your failure probability, accept the failure event, and record it.
>>>> - Repeat many times.
>>>>
>>>> Hope this helps.
>>>> B.
>>>>
>>>>
>>>>
>>>>
>>>>> On Jun 27, 2017, at 10:58 AM, sandeep Rana <sandykido at gmail.com> wrote:
>>>>>
>>>>> Hi friends,
>>>>> I haven't done such a simulation before and any help would be greatly
>>>> appreciated. I need your guidance.
>>>>>
>>>>> I need to simulate end to end data for Reliability/survival analysis of
>>>> a Pump ,with correlation in place, that is at 'Transactional level' or at
>>>> the granularity of time-minutes, where each observation is a reading
>>>> captured via Pump's sensors each minute.
>>>>> Once transactional data is prepared I Then need to summarise above data
>>>> for reliability/ survival analysis.
>>>>>
>>>>> To begin with below is the transactional data format that i want prepare:
>>>>> Pump-id| Timestamp | temp | vibration | suction pressure| discharge
>>>> pressure | Flow
>>>>>
>>>>> Above transactional data has to be prepared with below failure modes
>>>>> Defects :
>>>>> (1)    Cavitation ? very high in frequency but low impact
>>>>> (2)    Bearing Damage ? very low in frequency but high impact
>>>>> (3)    Worn Shaft ? medium frequency but medium impact
>>>>>
>>>>> I have used survsim package but that's not what I need here.
>>>>> Please help and guide.
>>>>>
>>>>> Regards,
>>>>> Sandeep
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/
>>>> posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/
>>>> posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>> [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> CONFIDENTIALITY NOTICE: This e-mail and any files and/or attachments transmitted, may contain privileged and confidential information and is intended solely for the exclusive use of the individual or entity to whom it is addressed. If you are not the intended recipient, you are hereby notified that any review, dissemination, distribution or copying of this e-mail and/or attachments is strictly prohibited. If you have received this e-mail in error, please immediately notify the sender stating that this transmission was misdirected; return the e-mail to sender; destroy all paper copies and delete all electronic copies from your system without disclosing its contents.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Wed Jul  5 16:57:05 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Wed, 05 Jul 2017 07:57:05 -0700
Subject: [R] expand gridded matrix to higher resolution
In-Reply-To: <BB61AA75-620D-4D0C-9A9D-6127880DD9BA@kit.edu>
References: <BB61AA75-620D-4D0C-9A9D-6127880DD9BA@kit.edu>
Message-ID: <29646CA4-5A39-4F9E-9D17-FDABC57B5FD5@dcn.davis.ca.us>

You probably ought to be using the raster package. See the CRAN Spatial Task View.
-- 
Sent from my phone. Please excuse my brevity.

On July 5, 2017 12:20:28 AM PDT, "Anthoni, Peter (IMK)" <peter.anthoni at kit.edu> wrote:
>Hi all,
>(if me email goes out as html, than my email client don't do as told,
>and I apologies already.)
>
>We need to downscale climate data and therefore first need to expand
>the climate from 0.5deg to the higher resolution 10min, before we can
>add high resolution deviations. We basically need to have the original
>data at each gridcell replicated into 3x3 gridcells. 
>A simple for loop can do this, but I could need a faster procedure.
>Anybody know a faster way? Is there package than can do what we need
>already?
>I tried matrix with rep, but I am missing some magic there, since it
>doesn't do what we need. 
>replicate might be promising, but then still need to rearrange the
>output into the column and row format we need. 
>
>A simple example:
>mm=matrix(1:15,nrow=3,byrow = T)
>xmm=matrix(NA,nrow=nrow(mm)*3,ncol=ncol(mm)*3)
>for(icol in 1:ncol(mm)) {
>  for(irow in 1:nrow(mm)) {
>    xicol=(icol-1)*3 +c(1:3)
>    xirow=(irow-1)*3 +c(1:3)
>    xmm[xirow,xicol]=mm[irow,icol]
>  }
>}
>mm
>> > mm
>>      [,1] [,2] [,3] [,4] [,5]
>> [1,]    1    2    3    4    5
>> [2,]    6    7    8    9   10
>> [3,]   11   12   13   14   15
>> 
>xmm
>> > xmm
>>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
>[,13] [,14] [,15]
>>  [1,]    1    1    1    2    2    2    3    3    3     4     4     4 
>   5     5     5
>>  [2,]    1    1    1    2    2    2    3    3    3     4     4     4 
>   5     5     5
>>  [3,]    1    1    1    2    2    2    3    3    3     4     4     4 
>   5     5     5
>>  [4,]    6    6    6    7    7    7    8    8    8     9     9     9 
>  10    10    10
>>  [5,]    6    6    6    7    7    7    8    8    8     9     9     9 
>  10    10    10
>>  [6,]    6    6    6    7    7    7    8    8    8     9     9     9 
>  10    10    10
>>  [7,]   11   11   11   12   12   12   13   13   13    14    14    14 
>  15    15    15
>>  [8,]   11   11   11   12   12   12   13   13   13    14    14    14 
>  15    15    15
>>  [9,]   11   11   11   12   12   12   13   13   13    14    14    14 
>  15    15    15
>
>I tried various rep with matrix, but don't get the right result.
>xmm2=matrix(rep(rep(mm,each=3),times=3),nrow=nrow(mm)*3,ncol=ncol(mm)*3,byrow
>= F)
>> identical(xmm,xmm2)
>[1] FALSE
>
>rr=replicate(3,rep(t(mm),each=3))
>rr
>> > rr
>>       [,1] [,2] [,3]
>>  [1,]    1    1    1
>>  [2,]    1    1    1
>>  [3,]    1    1    1
>>  [4,]    2    2    2
>>  [5,]    2    2    2
>>  [6,]    2    2    2
>>  [7,]    3    3    3
>> ...
>identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
>> > identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
>> [1] FALSE
> 
>Many thanks for any advice.
>
>cheers
>Peter
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From msharp at TxBiomed.org  Wed Jul  5 17:40:01 2017
From: msharp at TxBiomed.org (Mark Sharp)
Date: Wed, 5 Jul 2017 15:40:01 +0000
Subject: [R] Please help(urgent) - How to simulate transactional data
 for reliability/survival analysis
In-Reply-To: <CANOG_FX1PBEHSyeF59qXFR=QjpZ6P2Ui0xRiRkyjL-yfMSCpkw@mail.gmail.com>
References: <D2975E52-CE3D-4ECE-BDF3-8CC44C8CC444@gmail.com>
 <8B17F5C0-6AAE-435D-92EE-A8ADBE214FE3@utoronto.ca>
 <CANOG_FVm1bdY4Hk7f3WXOOpPRNyStNHNMYp6V51UfsvR8j1wPQ@mail.gmail.com>
 <F597C7EC-AEEA-45C7-A4F9-F2348CDBDB1C@txbiomed.org>
 <CANOG_FX1PBEHSyeF59qXFR=QjpZ6P2Ui0xRiRkyjL-yfMSCpkw@mail.gmail.com>
Message-ID: <C58AC756-B882-409D-967B-D24A5AE1BD9E@TxBiomed.org>

I am trying to figure out the algorithm you are using to calculate event_episodes, event_status, and start_minutes.

Where does the 129600 come from?

Why is the start(minutes) 0 for the last row instead of 40?

Mark
R. Mark Sharp, Ph.D.
msharp at TxBiomed.org





> On Jul 5, 2017, at 1:03 AM, Sunny Singha <sunnysingha.analytics at gmail.com> wrote:
>
> Mark,
> Below is the sampled simulated granular data format for pumps for
> trial period of 3 months that I need to transform for survival
> analysis:
> 3 months = (60*24*90) minutes i.e 129600 minutes
>
> pump_id timings                events   vibration temprature flow
> pump1 01-07-2017 00:00       0        3.443    69.6           139.806
> pump1 01-07-2017 00:10       1        0.501    45.27         140.028
> pump1 01-07-2017 00:20       0        2.031    52.9           137.698
> pump1 01-07-2017 00:30       0        2.267    60.12         139.054
> pump1 01-07-2017 00:40       1        2.267    60.12         139.054
> pump1 01-07-2017 00:50       0        2.267    60.12         139.054
> pump2 01-07-2017 00:00       0        3.443    69.6           139.806
> pump2 01-07-2017 00:10       0        0.501    45.27         140.028
> pump2 01-07-2017 00:20       0        2.031    52.9           137.698
> pump2 01-07-2017 00:30       0        2.267    60.12         139.054
> pump2 01-07-2017 00:40       1        2.267    60.12         139.054
> pump2 01-07-2017 00:50       0        2.267    60.12         139.054
>
> The above data set records observations and timings where 'pumps'
> experienced failure, tagged as '1' in column 'events'.
> In the above granular dataset the pump1 experiences 2 "event episodes."
>
> Below is the desired transformed format. the covariates in this data
> set will have the mean value:
> pump_id      event_episodes      event_status      start(minutes)
> stop(minutes)
> pump1                          1                             1
>          0                               10
> pump1                          2                             1
>         10                              40
> pump1                          3                             0
>         40                              129600
> pump2                          1                             1
>          0                               40
> pump2                          2                             0
>          0                               129600
> .........
> .........
>
> The 'start' and 'stop' columns are evaluated from the 'timings'
> columns. I need help in performing such transformation in 'R'.
> Please guide and help.
>
> Regards,
> Sandeep
>
> On Wed, Jul 5, 2017 at 7:26 AM, Mark Sharp <msharp at txbiomed.org> wrote:
>> A small example data set that illustrates your question will be of great value to those trying to help. This appears to be a transformation that you are wanting to do (timestamp to units of time) so a data representing what you have (dput() is handy for this) and one representing what you want to have with any guidance regarding how to use the other columns in you data set (e.g., the event(0/1)).
>>
>> Mark
>> R. Mark Sharp, Ph.D.
>> msharp at TxBiomed.org
>>
>>
>>
>>
>>
>>> On Jul 4, 2017, at 7:02 AM, Sunny Singha <sunnysingha.analytics at gmail.com> wrote:
>>>
>>> Thanks Boris and Bret,
>>> I was successful in simulating granular/transactional data.
>>> Now I need some guidance to transform the same data in format acceptable
>>> for survival analysis i.e below format:
>>>
>>> pump_id | event_episode_no. | event(0/1) | start | stop | time_to_dropout
>>>
>>> The challenge I'm experience is to generate the 'start' and 'stop' in units
>>> of minutes/days from single column of 'Timestamp' which is
>>> the column from transactional/granular data based on condition tagged in
>>> separate column, 'event 0/1, (i.e event ).
>>>
>>> Please guide how to do such transformation in 'R'.
>>>
>>> Regards,
>>> Sandeep
>>>
>>>
>>>
>>> On Wed, Jun 28, 2017 at 2:51 PM, Boris Steipe <boris.steipe at utoronto.ca>
>>> wrote:
>>>
>>>> In principle what you need to do is the following:
>>>>
>>>> - break down the time you wish to simulate into intervals.
>>>> - for each interval, and each failure mode, determine the probability of
>>>> an event.
>>>>  Determining the probability is the fun part, where you make your domain
>>>>  knowledge explicit and include all the factors into your model:
>>>> cumulative load,
>>>>  failure history, pressure, temperature, phase of the moon ...
>>>> - once you have a probability of failure, use the runif() function to
>>>> give you
>>>>  a uniformly distributed random number in [0, 1]. If the number is
>>>> smaller than
>>>>  your failure probability, accept the failure event, and record it.
>>>> - Repeat many times.
>>>>
>>>> Hope this helps.
>>>> B.
>>>>
>>>>
>>>>
>>>>
>>>>> On Jun 27, 2017, at 10:58 AM, sandeep Rana <sandykido at gmail.com> wrote:
>>>>>
>>>>> Hi friends,
>>>>> I haven't done such a simulation before and any help would be greatly
>>>> appreciated. I need your guidance.
>>>>>
>>>>> I need to simulate end to end data for Reliability/survival analysis of
>>>> a Pump ,with correlation in place, that is at 'Transactional level' or at
>>>> the granularity of time-minutes, where each observation is a reading
>>>> captured via Pump's sensors each minute.
>>>>> Once transactional data is prepared I Then need to summarise above data
>>>> for reliability/ survival analysis.
>>>>>
>>>>> To begin with below is the transactional data format that i want prepare:
>>>>> Pump-id| Timestamp | temp | vibration | suction pressure| discharge
>>>> pressure | Flow
>>>>>
>>>>> Above transactional data has to be prepared with below failure modes
>>>>> Defects :
>>>>> (1)    Cavitation ? very high in frequency but low impact
>>>>> (2)    Bearing Damage ? very low in frequency but high impact
>>>>> (3)    Worn Shaft ? medium frequency but medium impact
>>>>>
>>>>> I have used survsim package but that's not what I need here.
>>>>> Please help and guide.
>>>>>
>>>>> Regards,
>>>>> Sandeep
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/
>>>> posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/
>>>> posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>
>>> [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> CONFIDENTIALITY NOTICE: This e-mail and any files and/or attachments transmitted, may contain privileged and confidential information and is intended solely for the exclusive use of the individual or entity to whom it is addressed. If you are not the intended recipient, you are hereby notified that any review, dissemination, distribution or copying of this e-mail and/or attachments is strictly prohibited. If you have received this e-mail in error, please immediately notify the sender stating that this transmission was misdirected; return the e-mail to sender; destroy all paper copies and delete all electronic copies from your system without disclosing its contents.

CONFIDENTIALITY NOTICE: This e-mail and any files and/or attachments transmitted, may contain privileged and confidential information and is intended solely for the exclusive use of the individual or entity to whom it is addressed. If you are not the intended recipient, you are hereby notified that any review, dissemination, distribution or copying of this e-mail and/or attachments is strictly prohibited. If you have received this e-mail in error, please immediately notify the sender stating that this transmission was misdirected; return the e-mail to sender; destroy all paper copies and delete all electronic copies from your system without disclosing its contents.

From goran.brostrom at umu.se  Wed Jul  5 19:38:02 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Wed, 5 Jul 2017 19:38:02 +0200
Subject: [R] Question about correlation
In-Reply-To: <CA+8X3fVG5nOC=nsGpVdvOevrdRNRyM9YFmXH0bP7wB_9FoheVw@mail.gmail.com>
References: <CAFuv27VF=3F+-_RidNoANpQXtd=GLhEAA6oRYAb7WoTjeXa6_w@mail.gmail.com>
 <CA+8X3fVG5nOC=nsGpVdvOevrdRNRyM9YFmXH0bP7wB_9FoheVw@mail.gmail.com>
Message-ID: <694bba15-fda9-2756-cd85-be3d83589cfd@umu.se>

On 2017-07-05 11:56, Jim Lemon wrote:
> Hi Chin Yi,
> If you are trying to correlate "Health" with "Disease", i.e.
> 
> cydf<-read.table(text="OTU ID Health Disease
>    Bacterial 1 0.29 0.34
>    Bacterial 2 0.25 0.07
>    Bacterial 3 0.06 0.06
>    Bacterial 4 0.07 0.09
>    Bacterial 5 0.02 0.05",
>    header=TRUE)
> print(cor(cydf$Health,cydf$Disease))
> [1] 0.7103517
> 
> If you are getting that error, it probably means that either "Health"
> or "Disease" or perhaps both have been read in as a factor. To test
> this:
> 
> is.factor(cydf$Health)
> [1] FALSE
>> is.factor(cydf$Disease)
> [1] FALSE
> 
> If either of these returns TRUE, that is almost certainly the problem.

Or maybe Chin Yi tried (as it seems)

 > cor(cydf)
Error in cor(cydf) : 'x' must be numeric

(with cydf == data): 'OTU' is not numeric.

Follow Jim's advice.

G?ran

> 
> Jim
> 
> 
> On Wed, Jul 5, 2017 at 11:27 AM, SEB140004 Student
> <chinyi at siswa.um.edu.my> wrote:
>> Greeting.
>>
>> Dear Mr/Mrs/Miss,
>>
>> OTU ID Health Disease
>> Bacterial 1 0.29 0.34
>> Bacterial 2 0.25 0.07
>> Bacterial 3 0.06 0.06
>> Bacterial 4 0.07 0.09
>> Bacterial 5 0.02 0.05
>> Above show the first 6 data sets, may I ask that the reason of R show the
>> error like "Error in cor(data) : 'x' must be numeric" ? And how to solve
>> it? Besides, isn't this data can conduct correlation matrix?
>>
>> Moreover, isn't this data sets can be plot into network? If can, which
>> package should I use?
>>
>> Thank you.
>>
>> Best regards,
>> Kang Chin Yi
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From tea3rd at gmail.com  Wed Jul  5 20:16:40 2017
From: tea3rd at gmail.com (Thomas Adams)
Date: Wed, 5 Jul 2017 14:16:40 -0400
Subject: [R] Help with reshape/reshape2 needed
Message-ID: <CAGxgkWjvJSQoTb1cvjgKH3qLCzrn+Ut8n5n3xCJjswPuZ1R4+g@mail.gmail.com>

Hi all:

I'm struggling with getting my data re-formatted using functions in
reshape/reshape2 to get from:

1957 0.862500000
1958 0.750000000
1959 0.300000000
1960 0.287500000
1963 0.675000000
1964 0.937500000
1965 0.025000000
1966 0.387500000
1969 0.087500000
1970 0.275000000
1973 0.500000000
1974 0.362500000
1976 0.925000000
1978 0.712500000
1979 0.337500000
1980 0.700000000
1981 0.425000000
1982 0.212500000
1983 0.312500000
1986 0.237500000
1958 0.643564356
1963 0.250000000
1968 0.211538462
1976 0.317307692
1981 0.673076923
1985 0.730769231
1986 0.057692308
1957 0.073394495
1966 0.742574257
1961 0.082568807
1964 0.165137615
1965 0.137614679
1959 0.128712871
1968 0.587155963
1969 0.660550459
1970 0.477064220
1971 0.513761468
1973 0.449541284
1974 0.128440367
1968 0.415841584
1977 0.009174312
1979 0.339449541
1981 0.596330275
1982 0.348623853
1984 0.146788991
1986 0.651376147
1959 0.451923077
1965 0.750000000
1962 0.326732673
1964 0.782178218
1970 0.336538462
1975 0.277227723
1978 0.712871287
1957 0.509615385
1960 0.490384615
1961 0.721153846
1966 0.298076923
1969 0.413461538
1971 0.500000000
1972 0.692307692
1974 0.653846154
1984 0.049504950
1978 0.442307692
1973 0.079207921
1983 0.355769231
1984 0.038461538
1979 0.237623762
1982 0.564356436

to:

1957                  1958               1959             1960 ...
1985           1986
0.509615385  0.750000000  0.451923077  0.287500000 ...
0.651376147
0.509615385

and so on. It's likely the column lengths will be different, so I'm
guessing padding with NAs will be needed. I have on the order of 1335 rows
with years spanning 1957 to 2016.

Thank you...
Tom

--

	[[alternative HTML version deleted]]


From ahmedatia80 at gmail.com  Wed Jul  5 20:23:39 2017
From: ahmedatia80 at gmail.com (Ahmed Attia)
Date: Wed, 5 Jul 2017 15:23:39 -0300
Subject: [R] Convert date to continuous variable in R
Message-ID: <CAG6S0O=5QEK=7d2wr5uudCDDXfqXAgbhQaaYkoj63kPw4tPAWQ@mail.gmail.com>

How can I convert date to continuous variable staring from 1. I tried
as.numeric but R starts counting from default January 1, 1970 while my data
start Oct 7, 2009.

I need to do this conversion to plot the date on two x-axes (1 and 3).
Ex;
Date LAI
10/7/2009 0
10/8/2009 0.004173
10/9/2009 0.009997
10/10/2009 0.009998
10/11/2009 0.009999
10/12/2009 0.009999
10/13/2009 0.009999
10/14/2009 0.009999
10/15/2009 0.009998
10/16/2009 0.009998
10/17/2009 0.009998
10/18/2009 0.009998
10/19/2009 0.009998
10/20/2009 0.009998

LAI_simulation$Date <- as.Date( LAI_simulation$Date, '%Y/%m/%d')
plot(LAI~Date, data=LAI_simulation)
LAI_simulation$Date<- as.numeric(LAI_simulation$Date,origin="2009-10-07")
#R does not see the origin
axis.Date(side=3,at=LAI_simulation$Date)




Ahmed Attia, Ph.D.
Agronomist & Soil Scientist

	[[alternative HTML version deleted]]


From cbenjami at BTBOCES.ORG  Wed Jul  5 20:24:21 2017
From: cbenjami at BTBOCES.ORG (Courtney Benjamin)
Date: Wed, 5 Jul 2017 18:24:21 +0000
Subject: [R] Svyglm Error
Message-ID: <1499279040187.70227@BTBOCES.ORG>

Greetings,

I am revisiting code from several different files I have saved from the past and all used to run flawlessly; now when I run any of the svyglm related functions, I am coming up with an error:

Error in model.frame.default(formula = F3ATTAINB ~ F1PARED, data = data,  :
  the ... list does not contain 4 elements
The following is a minimal reproducible example:
library(RCurl)
library(survey)

data <- getURL("https://raw.githubusercontent.com/cbenjamin1821/careertech-ed/master/elsq1adj.csv")
elsq1ch <- read.csv(text = data)

#Specifying the svyrepdesign object which applies the BRR weights
elsq1ch_brr<-svrepdesign(variables = elsq1ch[,1:16], repweights = elsq1ch[,18:217], weights = elsq1ch[,17], combined.weights = TRUE, type = "BRR")
elsq1ch_brr

##Resetting baseline levels for predictors
elsq1ch_brr <- update( elsq1ch_brr , F1HIMATH = relevel(F1HIMATH,"PreAlg or Less") )
elsq1ch_brr <- update( elsq1ch_brr , BYINCOME = relevel(BYINCOME,"0-25K") )
elsq1ch_brr <- update( elsq1ch_brr , F1RACE = relevel(F1RACE,"White") )
elsq1ch_brr <- update( elsq1ch_brr , F1SEX = relevel(F1SEX,"Male") )
elsq1ch_brr <- update( elsq1ch_brr , F1RTRCC = relevel(F1RTRCC,"Other") )

##Univariate testing for Other subset
Othpared <- svyglm(formula=F3ATTAINB~F1PARED,family="quasibinomial",design=subset(elsq1ch_brr,BYSCTRL==1&G10COHRT==1&F1RTRCC=="Other"),na.action=na.omit)
summary(Othpared)?


Any help in resolving this concern would be greatly appreciated.

Sincerely,

Courtney


Courtney Benjamin

Broome-Tioga BOCES

Automotive Technology II Teacher

Located at Gault Toyota

Doctoral Candidate-Educational Theory & Practice

State University of New York at Binghamton

cbenjami at btboces.org<mailto:cbenjami at btboces.org>

607-763-8633

	[[alternative HTML version deleted]]


From dcarlson at tamu.edu  Wed Jul  5 21:18:57 2017
From: dcarlson at tamu.edu (David L Carlson)
Date: Wed, 5 Jul 2017 19:18:57 +0000
Subject: [R] Convert date to continuous variable in R
In-Reply-To: <CAG6S0O=5QEK=7d2wr5uudCDDXfqXAgbhQaaYkoj63kPw4tPAWQ@mail.gmail.com>
References: <CAG6S0O=5QEK=7d2wr5uudCDDXfqXAgbhQaaYkoj63kPw4tPAWQ@mail.gmail.com>
Message-ID: <6ddab164dc8944df9be044237ed88d20@exch-2p-mbx-w2.ads.tamu.edu>

How about

> difftime(LAI_simulation$Date, LAI_simulation$Date[1], units="days")
Time differences in days
 [1]  0  1  2  3  4  5  6  7  8  9 10 11 12 13

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Ahmed Attia
Sent: Wednesday, July 5, 2017 1:24 PM
To: r-help <r-help at r-project.org>
Subject: [R] Convert date to continuous variable in R

How can I convert date to continuous variable staring from 1. I tried
as.numeric but R starts counting from default January 1, 1970 while my data
start Oct 7, 2009.

I need to do this conversion to plot the date on two x-axes (1 and 3).
Ex;
Date LAI
10/7/2009 0
10/8/2009 0.004173
10/9/2009 0.009997
10/10/2009 0.009998
10/11/2009 0.009999
10/12/2009 0.009999
10/13/2009 0.009999
10/14/2009 0.009999
10/15/2009 0.009998
10/16/2009 0.009998
10/17/2009 0.009998
10/18/2009 0.009998
10/19/2009 0.009998
10/20/2009 0.009998

LAI_simulation$Date <- as.Date( LAI_simulation$Date, '%Y/%m/%d')
plot(LAI~Date, data=LAI_simulation)
LAI_simulation$Date<- as.numeric(LAI_simulation$Date,origin="2009-10-07")
#R does not see the origin
axis.Date(side=3,at=LAI_simulation$Date)




Ahmed Attia, Ph.D.
Agronomist & Soil Scientist

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From ajdamico at gmail.com  Wed Jul  5 21:47:22 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Wed, 5 Jul 2017 15:47:22 -0400
Subject: [R] Svyglm Error
In-Reply-To: <1499279040187.70227@BTBOCES.ORG>
References: <1499279040187.70227@BTBOCES.ORG>
Message-ID: <CAOwvMDw0AQgPeqRg6Au=NLE0fX62GvQZng9KaGYuN0EQ3J1Hzg@mail.gmail.com>

hi, i am not hitting an error when i copy and paste your code into a fresh
console.  maybe compare your sessionInfo() to mine?


    > sessionInfo()
    R version 3.4.1 (2017-06-30)
    Platform: x86_64-w64-mingw32/x64 (64-bit)
    Running under: Windows Server 2008 R2 x64 (build 7601) Service Pack 1

    Matrix products: default

    locale:
    [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252    LC_MONETARY=English_United States.1252
LC_NUMERIC=C                           LC_TIME=English_United
States.1252

    attached base packages:
    [1] grid      stats     graphics  grDevices utils     datasets
methods   base

    other attached packages:
    [1] survey_3.32-1   survival_2.41-3 Matrix_1.2-10   RCurl_1.95-4.8
bitops_1.0-6

    loaded via a namespace (and not attached):
    [1] compiler_3.4.1  splines_3.4.1   lattice_0.20-35





On Wed, Jul 5, 2017 at 2:24 PM, Courtney Benjamin <cbenjami at btboces.org>
wrote:

> Greetings,
>
> I am revisiting code from several different files I have saved from the
> past and all used to run flawlessly; now when I run any of the svyglm
> related functions, I am coming up with an error:
>
> Error in model.frame.default(formula = F3ATTAINB ~ F1PARED, data = data,  :
>   the ... list does not contain 4 elements
> The following is a minimal reproducible example:
> library(RCurl)
> library(survey)
>
> data <- getURL("https://raw.githubusercontent.com/
> cbenjamin1821/careertech-ed/master/elsq1adj.csv")
> elsq1ch <- read.csv(text = data)
>
> #Specifying the svyrepdesign object which applies the BRR weights
> elsq1ch_brr<-svrepdesign(variables = elsq1ch[,1:16], repweights =
> elsq1ch[,18:217], weights = elsq1ch[,17], combined.weights = TRUE, type =
> "BRR")
> elsq1ch_brr
>
> ##Resetting baseline levels for predictors
> elsq1ch_brr <- update( elsq1ch_brr , F1HIMATH = relevel(F1HIMATH,"PreAlg
> or Less") )
> elsq1ch_brr <- update( elsq1ch_brr , BYINCOME = relevel(BYINCOME,"0-25K") )
> elsq1ch_brr <- update( elsq1ch_brr , F1RACE = relevel(F1RACE,"White") )
> elsq1ch_brr <- update( elsq1ch_brr , F1SEX = relevel(F1SEX,"Male") )
> elsq1ch_brr <- update( elsq1ch_brr , F1RTRCC = relevel(F1RTRCC,"Other") )
>
> ##Univariate testing for Other subset
> Othpared <- svyglm(formula=F3ATTAINB~F1PARED,family="quasibinomial"
> ,design=subset(elsq1ch_brr,BYSCTRL==1&G10COHRT==1&
> F1RTRCC=="Other"),na.action=na.omit)
> summary(Othpared)?
>
>
> Any help in resolving this concern would be greatly appreciated.
>
> Sincerely,
>
> Courtney
>
>
> Courtney Benjamin
>
> Broome-Tioga BOCES
>
> Automotive Technology II Teacher
>
> Located at Gault Toyota
>
> Doctoral Candidate-Educational Theory & Practice
>
> State University of New York at Binghamton
>
> cbenjami at btboces.org<mailto:cbenjami at btboces.org>
>
> 607-763-8633
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dcarlson at tamu.edu  Wed Jul  5 21:48:18 2017
From: dcarlson at tamu.edu (David L Carlson)
Date: Wed, 5 Jul 2017 19:48:18 +0000
Subject: [R] Help with reshape/reshape2 needed
In-Reply-To: <CAGxgkWjvJSQoTb1cvjgKH3qLCzrn+Ut8n5n3xCJjswPuZ1R4+g@mail.gmail.com>
References: <CAGxgkWjvJSQoTb1cvjgKH3qLCzrn+Ut8n5n3xCJjswPuZ1R4+g@mail.gmail.com>
Message-ID: <cc73062fe9904e7db023d39fed79c5d9@exch-2p-mbx-w2.ads.tamu.edu>

This does not use reshape/reshape2, but it is pretty straightforward. Assuming X is your example data:

> Y <- split(X[, 2], X[, 1])
> vals <- sapply(Y, length)
> pad <- max(vals) - vals
> Y2 <- lapply(seq_along(Y), function(x) c(Y[[x]], rep(NA, pad[x])))
> names(Y2) <- names(Y)
> X2 <- do.call(cbind, Y2)
> X2[, 1:6]
          1957      1958      1959      1960       1961      1962
[1,] 0.8625000 0.7500000 0.3000000 0.2875000 0.08256881 0.3267327
[2,] 0.0733945 0.6435644 0.1287129 0.4903846 0.72115385        NA
[3,] 0.5096154        NA 0.4519231        NA         NA        NA

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Thomas Adams
Sent: Wednesday, July 5, 2017 1:17 PM
To: r-help at r-project.org
Subject: [R] Help with reshape/reshape2 needed

Hi all:

I'm struggling with getting my data re-formatted using functions in
reshape/reshape2 to get from:

1957 0.862500000
1958 0.750000000
1959 0.300000000
1960 0.287500000
1963 0.675000000
1964 0.937500000
1965 0.025000000
1966 0.387500000
1969 0.087500000
1970 0.275000000
1973 0.500000000
1974 0.362500000
1976 0.925000000
1978 0.712500000
1979 0.337500000
1980 0.700000000
1981 0.425000000
1982 0.212500000
1983 0.312500000
1986 0.237500000
1958 0.643564356
1963 0.250000000
1968 0.211538462
1976 0.317307692
1981 0.673076923
1985 0.730769231
1986 0.057692308
1957 0.073394495
1966 0.742574257
1961 0.082568807
1964 0.165137615
1965 0.137614679
1959 0.128712871
1968 0.587155963
1969 0.660550459
1970 0.477064220
1971 0.513761468
1973 0.449541284
1974 0.128440367
1968 0.415841584
1977 0.009174312
1979 0.339449541
1981 0.596330275
1982 0.348623853
1984 0.146788991
1986 0.651376147
1959 0.451923077
1965 0.750000000
1962 0.326732673
1964 0.782178218
1970 0.336538462
1975 0.277227723
1978 0.712871287
1957 0.509615385
1960 0.490384615
1961 0.721153846
1966 0.298076923
1969 0.413461538
1971 0.500000000
1972 0.692307692
1974 0.653846154
1984 0.049504950
1978 0.442307692
1973 0.079207921
1983 0.355769231
1984 0.038461538
1979 0.237623762
1982 0.564356436

to:

1957                  1958               1959             1960 ...
1985           1986
0.509615385  0.750000000  0.451923077  0.287500000 ...
0.651376147
0.509615385

and so on. It's likely the column lengths will be different, so I'm
guessing padding with NAs will be needed. I have on the order of 1335 rows
with years spanning 1957 to 2016.

Thank you...
Tom

--

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From rkabacoff at wesleyan.edu  Wed Jul  5 20:05:47 2017
From: rkabacoff at wesleyan.edu (Kabacoff, Robert)
Date: Wed, 5 Jul 2017 18:05:47 +0000
Subject: [R] =?windows-1252?q?unable_to_collate_and_parse_R_files_for_pack?=
 =?windows-1252?q?age_=91colorspace=92?=
Message-ID: <6B3B42BEF661E64F8FA3D7FC38D32665184FE096@exchangewes8.wesad.wesleyan.edu>

When attempting to install the ?colorspace? package on RedHat Linux I get the following error. Any help would be appreciated.

Rob

Rob Kabacoff, Ph.D.
Professor, Quantitative Analysis Center
Wesleyan University


> install.packages("colorspace")
Installing package into ?/home/rkabacoff/R/x86_64-redhat-linux-gnu-library/3.3?
(as ?lib? is unspecified)

trying URL 'https://cran.mtu.edu/src/contrib/colorspace_1.3-2.tar.gz'
Content type 'application/x-gzip' length 293433 bytes (286 KB)
==================================================
downloaded 286 KB

* installing *source* package ?colorspace? ...
** package ?colorspace? successfully unpacked and MD5 sums checked
** libs
gcc -m64 -std=gnu99 -I/usr/include/R -DNDEBUG  -I/usr/local/include    -fpic  -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fpic -fPIC   -c colorspace.c -o colorspace.o
colorspace.c:589: warning: ?CheckGamma? defined but not used
gcc -m64 -std=gnu99 -shared -L/usr/lib64/R/lib -o colorspace.so colorspace.o -L/usr/lib64/R/lib -lR
installing to /home/rkabacoff/R/x86_64-redhat-linux-gnu-library/3.3/colorspace/libs
** R
Error in parse(outFile) :
  /home/rkabacoff/R/x86_64-redhat-linux-gnu-library/3.3/colorspace/R/colorspace:2:1: unexpected $end
ERROR: unable to collate and parse R files for package ?colorspace?
* removing ?/home/rkabacoff/R/x86_64-redhat-linux-gnu-library/3.3/colorspace?


> sessionInfo()
R version 3.3.2 (2016-10-31)
Platform: x86_64-redhat-linux-gnu (64-bit)
Running under: Oracle Linux Server 6.8

locale:
[1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
[3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
[5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
[7] LC_PAPER=en_US.UTF-8       LC_NAME=C
[9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.2

	[[alternative HTML version deleted]]


From tea3rd at gmail.com  Wed Jul  5 22:13:06 2017
From: tea3rd at gmail.com (Thomas Adams)
Date: Wed, 5 Jul 2017 16:13:06 -0400
Subject: [R] Help with reshape/reshape2 needed
In-Reply-To: <cc73062fe9904e7db023d39fed79c5d9@exch-2p-mbx-w2.ads.tamu.edu>
References: <CAGxgkWjvJSQoTb1cvjgKH3qLCzrn+Ut8n5n3xCJjswPuZ1R4+g@mail.gmail.com>
 <cc73062fe9904e7db023d39fed79c5d9@exch-2p-mbx-w2.ads.tamu.edu>
Message-ID: <CAGxgkWhNY-SRqKXsNWt3mv_tXD5Wz=3WTWQX5nZdaRcQMTYMDA@mail.gmail.com>

David,

That's just awesome! LOL -- no wonder I couldn't see how the reshape
functions could do this; you saved me MANY days!

Thank you so much!

Best,
Tom

On Wed, Jul 5, 2017 at 3:48 PM, David L Carlson <dcarlson at tamu.edu> wrote:

> This does not use reshape/reshape2, but it is pretty straightforward.
> Assuming X is your example data:
>
> > Y <- split(X[, 2], X[, 1])
> > vals <- sapply(Y, length)
> > pad <- max(vals) - vals
> > Y2 <- lapply(seq_along(Y), function(x) c(Y[[x]], rep(NA, pad[x])))
> > names(Y2) <- names(Y)
> > X2 <- do.call(cbind, Y2)
> > X2[, 1:6]
>           1957      1958      1959      1960       1961      1962
> [1,] 0.8625000 0.7500000 0.3000000 0.2875000 0.08256881 0.3267327
> [2,] 0.0733945 0.6435644 0.1287129 0.4903846 0.72115385        NA
> [3,] 0.5096154        NA 0.4519231        NA         NA        NA
>
> -------------------------------------
> David L Carlson
> Department of Anthropology
> Texas A&M University
> College Station, TX 77840-4352
>
> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Thomas
> Adams
> Sent: Wednesday, July 5, 2017 1:17 PM
> To: r-help at r-project.org
> Subject: [R] Help with reshape/reshape2 needed
>
> Hi all:
>
> I'm struggling with getting my data re-formatted using functions in
> reshape/reshape2 to get from:
>
> 1957 0.862500000
> 1958 0.750000000
> 1959 0.300000000
> 1960 0.287500000
> 1963 0.675000000
> 1964 0.937500000
> 1965 0.025000000
> 1966 0.387500000
> 1969 0.087500000
> 1970 0.275000000
> 1973 0.500000000
> 1974 0.362500000
> 1976 0.925000000
> 1978 0.712500000
> 1979 0.337500000
> 1980 0.700000000
> 1981 0.425000000
> 1982 0.212500000
> 1983 0.312500000
> 1986 0.237500000
> 1958 0.643564356
> 1963 0.250000000
> 1968 0.211538462
> 1976 0.317307692
> 1981 0.673076923
> 1985 0.730769231
> 1986 0.057692308
> 1957 0.073394495
> 1966 0.742574257
> 1961 0.082568807
> 1964 0.165137615
> 1965 0.137614679
> 1959 0.128712871
> 1968 0.587155963
> 1969 0.660550459
> 1970 0.477064220
> 1971 0.513761468
> 1973 0.449541284
> 1974 0.128440367
> 1968 0.415841584
> 1977 0.009174312
> 1979 0.339449541
> 1981 0.596330275
> 1982 0.348623853
> 1984 0.146788991
> 1986 0.651376147
> 1959 0.451923077
> 1965 0.750000000
> 1962 0.326732673
> 1964 0.782178218
> 1970 0.336538462
> 1975 0.277227723
> 1978 0.712871287
> 1957 0.509615385
> 1960 0.490384615
> 1961 0.721153846
> 1966 0.298076923
> 1969 0.413461538
> 1971 0.500000000
> 1972 0.692307692
> 1974 0.653846154
> 1984 0.049504950
> 1978 0.442307692
> 1973 0.079207921
> 1983 0.355769231
> 1984 0.038461538
> 1979 0.237623762
> 1982 0.564356436
>
> to:
>
> 1957                  1958               1959             1960 ...
> 1985           1986
> 0.509615385  0.750000000  0.451923077  0.287500000 ...
> 0.651376147
> 0.509615385
>
> and so on. It's likely the column lengths will be different, so I'm
> guessing padding with NAs will be needed. I have on the order of 1335 rows
> with years spanning 1957 to 2016.
>
> Thank you...
> Tom
>
> --
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



-- 
Thomas E Adams, III
1724 Sage Lane
Blacksburg, VA 24060
tea3rd at gmail.com (personal)
tea at terrapredictions.org (work)

1 (513) 739-9512 (cell)

	[[alternative HTML version deleted]]


From istazahn at gmail.com  Wed Jul  5 22:50:46 2017
From: istazahn at gmail.com (Ista Zahn)
Date: Wed, 5 Jul 2017 16:50:46 -0400
Subject: [R] Help with reshape/reshape2 needed
In-Reply-To: <CAGxgkWjvJSQoTb1cvjgKH3qLCzrn+Ut8n5n3xCJjswPuZ1R4+g@mail.gmail.com>
References: <CAGxgkWjvJSQoTb1cvjgKH3qLCzrn+Ut8n5n3xCJjswPuZ1R4+g@mail.gmail.com>
Message-ID: <CA+vqiLECHZRe20473CU2D0Jax153hhs4qzgKkKy16Q0yH4CbBQ@mail.gmail.com>

The reason it doesn't work easily with reshape/reshape2 is that the
order of the rows is not determined. Your answer could be

     1957      1958 ...      1985       1986
0.8625000 0.7500000 ... 0.7307692 0.23750000
0.0733945 0.6435644 ...        NA 0.05769231
0.5096154        NA ...        NA 0.65137615

or

     1957      1958 ...      1985       1986
0.0733945 0.6435644 ...        NA 0.05769231
0.8625000 0.7500000 ... 0.7307692 0.23750000
0.5096154        NA ...        NA 0.65137615

or

     1957      1958 ...      1985       1986
0.8625000 0.6435644 ...        NA 0.23750000
0.0733945         NA    0.7307692 0.05769231
0.5096154 0.7500000 ...        NA 0.65137615

or any other combination of orders. You might not care about the
order, but reshape does.

The usual way around it is to just make up an order variable, e.g.,
assuming your data.frame is named "example_data" and the columns are
named "year" and "score":

example_data <- do.call(rbind,
                        lapply(split(example_data,
                                     example_data$year),
                               transform,
                               obs = seq_along(year)))

dcast(example_data,
      obs ~ year,
      value.var = "score")

Best,
Ista


On Wed, Jul 5, 2017 at 2:16 PM, Thomas Adams <tea3rd at gmail.com> wrote:
> Hi all:
>
> I'm struggling with getting my data re-formatted using functions in
> reshape/reshape2 to get from:
>
> 1957 0.862500000
> 1958 0.750000000
> 1959 0.300000000
> 1960 0.287500000
> 1963 0.675000000
> 1964 0.937500000
> 1965 0.025000000
> 1966 0.387500000
> 1969 0.087500000
> 1970 0.275000000
> 1973 0.500000000
> 1974 0.362500000
> 1976 0.925000000
> 1978 0.712500000
> 1979 0.337500000
> 1980 0.700000000
> 1981 0.425000000
> 1982 0.212500000
> 1983 0.312500000
> 1986 0.237500000
> 1958 0.643564356
> 1963 0.250000000
> 1968 0.211538462
> 1976 0.317307692
> 1981 0.673076923
> 1985 0.730769231
> 1986 0.057692308
> 1957 0.073394495
> 1966 0.742574257
> 1961 0.082568807
> 1964 0.165137615
> 1965 0.137614679
> 1959 0.128712871
> 1968 0.587155963
> 1969 0.660550459
> 1970 0.477064220
> 1971 0.513761468
> 1973 0.449541284
> 1974 0.128440367
> 1968 0.415841584
> 1977 0.009174312
> 1979 0.339449541
> 1981 0.596330275
> 1982 0.348623853
> 1984 0.146788991
> 1986 0.651376147
> 1959 0.451923077
> 1965 0.750000000
> 1962 0.326732673
> 1964 0.782178218
> 1970 0.336538462
> 1975 0.277227723
> 1978 0.712871287
> 1957 0.509615385
> 1960 0.490384615
> 1961 0.721153846
> 1966 0.298076923
> 1969 0.413461538
> 1971 0.500000000
> 1972 0.692307692
> 1974 0.653846154
> 1984 0.049504950
> 1978 0.442307692
> 1973 0.079207921
> 1983 0.355769231
> 1984 0.038461538
> 1979 0.237623762
> 1982 0.564356436
>
> to:
>
> 1957                  1958               1959             1960 ...
> 1985           1986
> 0.509615385  0.750000000  0.451923077  0.287500000 ...
> 0.651376147
> 0.509615385
>
> and so on. It's likely the column lengths will be different, so I'm
> guessing padding with NAs will be needed. I have on the order of 1335 rows
> with years spanning 1957 to 2016.
>
> Thank you...
> Tom
>
> --
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From cbenjami at BTBOCES.ORG  Thu Jul  6 00:07:20 2017
From: cbenjami at BTBOCES.ORG (Courtney Benjamin)
Date: Wed, 5 Jul 2017 22:07:20 +0000
Subject: [R] Svyglm Error
In-Reply-To: <CAOwvMDw0AQgPeqRg6Au=NLE0fX62GvQZng9KaGYuN0EQ3J1Hzg@mail.gmail.com>
References: <1499279040187.70227@BTBOCES.ORG>,
 <CAOwvMDw0AQgPeqRg6Au=NLE0fX62GvQZng9KaGYuN0EQ3J1Hzg@mail.gmail.com>
Message-ID: <1499292419011.40369@BTBOCES.ORG>

?Problem solved; I did not have the most updated version of R.  When I updated it and ran the code, all worked well again.  Thanks very much for helping me solve the mistake of an R novice!



Courtney Benjamin

Broome-Tioga BOCES

Automotive Technology II Teacher

Located at Gault Toyota

Doctoral Candidate-Educational Theory & Practice

State University of New York at Binghamton

cbenjami at btboces.org<mailto:cbenjami at btboces.org>

607-763-8633

________________________________
From: Anthony Damico <ajdamico at gmail.com>
Sent: Wednesday, July 5, 2017 3:47 PM
To: Courtney Benjamin
Cc: r-help at r-project.org
Subject: Re: [R] Svyglm Error

hi, i am not hitting an error when i copy and paste your code into a fresh console.  maybe compare your sessionInfo() to mine?


    > sessionInfo()
    R version 3.4.1 (2017-06-30)
    Platform: x86_64-w64-mingw32/x64 (64-bit)
    Running under: Windows Server 2008 R2 x64 (build 7601) Service Pack 1

    Matrix products: default

    locale:
    [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252 LC_NUMERIC=C                           LC_TIME=English_United States.1252

    attached base packages:
    [1] grid      stats     graphics  grDevices utils     datasets  methods   base

    other attached packages:
    [1] survey_3.32-1   survival_2.41-3 Matrix_1.2-10   RCurl_1.95-4.8  bitops_1.0-6

    loaded via a namespace (and not attached):
    [1] compiler_3.4.1  splines_3.4.1   lattice_0.20-35





On Wed, Jul 5, 2017 at 2:24 PM, Courtney Benjamin <cbenjami at btboces.org<mailto:cbenjami at btboces.org>> wrote:
Greetings,

I am revisiting code from several different files I have saved from the past and all used to run flawlessly; now when I run any of the svyglm related functions, I am coming up with an error:

Error in model.frame.default(formula = F3ATTAINB ~ F1PARED, data = data,  :
  the ... list does not contain 4 elements
The following is a minimal reproducible example:
library(RCurl)
library(survey)

data <- getURL("https://raw.githubusercontent.com/cbenjamin1821/careertech-ed/master/elsq1adj.csv")
elsq1ch <- read.csv(text = data)

#Specifying the svyrepdesign object which applies the BRR weights
elsq1ch_brr<-svrepdesign(variables = elsq1ch[,1:16], repweights = elsq1ch[,18:217], weights = elsq1ch[,17], combined.weights = TRUE, type = "BRR")
elsq1ch_brr

##Resetting baseline levels for predictors
elsq1ch_brr <- update( elsq1ch_brr , F1HIMATH = relevel(F1HIMATH,"PreAlg or Less") )
elsq1ch_brr <- update( elsq1ch_brr , BYINCOME = relevel(BYINCOME,"0-25K") )
elsq1ch_brr <- update( elsq1ch_brr , F1RACE = relevel(F1RACE,"White") )
elsq1ch_brr <- update( elsq1ch_brr , F1SEX = relevel(F1SEX,"Male") )
elsq1ch_brr <- update( elsq1ch_brr , F1RTRCC = relevel(F1RTRCC,"Other") )

##Univariate testing for Other subset
Othpared <- svyglm(formula=F3ATTAINB~F1PARED,family="quasibinomial",design=subset(elsq1ch_brr,BYSCTRL==1&G10COHRT==1&F1RTRCC=="Other"),na.action=na.omit)
summary(Othpared)?


Any help in resolving this concern would be greatly appreciated.

Sincerely,

Courtney


Courtney Benjamin

Broome-Tioga BOCES

Automotive Technology II Teacher

Located at Gault Toyota

Doctoral Candidate-Educational Theory & Practice

State University of New York at Binghamton

cbenjami at btboces.org<mailto:cbenjami at btboces.org><mailto:cbenjami at btboces.org<mailto:cbenjami at btboces.org>>

607-763-8633<tel:607-763-8633>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From kristi.glover at hotmail.com  Thu Jul  6 00:13:03 2017
From: kristi.glover at hotmail.com (Kristi Glover)
Date: Wed, 5 Jul 2017 22:13:03 +0000
Subject: [R] How can I make the legend in ggplot2 the same height as my plot?
Message-ID: <MWHPR13MB0894545DF1F0124AD5882F11FAD40@MWHPR13MB0894.namprd13.prod.outlook.com>

Hi R Users,

I tried to increase the legend height in ggplot2, but it did not respond at all using the follwoing code. Do you have any suggestions for me?



dat<-data.frame(temperature)

P1<-ggplot(dat, aes(X, Y))

Scenario1<-P1+geom_point(aes(colour = value), size = 1)+ theme_bw()+ theme(axis.text.x = element_blank(),axis.text.y = element_blank())

Scenario1<-Scenario1+facet_wrap(~variable, ncol=2)+scale_color_gradientn(colours = rainbow(48))

Scenario1+guides(fill = guide_colorbar(bar width = 1.5, barheight = unit(10, "mm")))


Thanks,

KG


	[[alternative HTML version deleted]]


From drjimlemon at gmail.com  Thu Jul  6 00:23:53 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Thu, 6 Jul 2017 08:23:53 +1000
Subject: [R] Question about correlation
In-Reply-To: <694bba15-fda9-2756-cd85-be3d83589cfd@umu.se>
References: <CAFuv27VF=3F+-_RidNoANpQXtd=GLhEAA6oRYAb7WoTjeXa6_w@mail.gmail.com>
 <CA+8X3fVG5nOC=nsGpVdvOevrdRNRyM9YFmXH0bP7wB_9FoheVw@mail.gmail.com>
 <694bba15-fda9-2756-cd85-be3d83589cfd@umu.se>
Message-ID: <CA+8X3fW0cr5evUqk7q6-JP6DbAiRxaWU233K+tVWu4jhNCcAAQ@mail.gmail.com>

I think that Goran is right, I didn't take "cor(data)" literally.

Jim


On Thu, Jul 6, 2017 at 3:38 AM, G?ran Brostr?m <goran.brostrom at umu.se> wrote:
> On 2017-07-05 11:56, Jim Lemon wrote:
>>
>> Hi Chin Yi,
>> If you are trying to correlate "Health" with "Disease", i.e.
>>
>> cydf<-read.table(text="OTU ID Health Disease
>>    Bacterial 1 0.29 0.34
>>    Bacterial 2 0.25 0.07
>>    Bacterial 3 0.06 0.06
>>    Bacterial 4 0.07 0.09
>>    Bacterial 5 0.02 0.05",
>>    header=TRUE)
>> print(cor(cydf$Health,cydf$Disease))
>> [1] 0.7103517
>>
>> If you are getting that error, it probably means that either "Health"
>> or "Disease" or perhaps both have been read in as a factor. To test
>> this:
>>
>> is.factor(cydf$Health)
>> [1] FALSE
>>>
>>> is.factor(cydf$Disease)
>>
>> [1] FALSE
>>
>> If either of these returns TRUE, that is almost certainly the problem.
>
>
> Or maybe Chin Yi tried (as it seems)
>
>> cor(cydf)
> Error in cor(cydf) : 'x' must be numeric
>
> (with cydf == data): 'OTU' is not numeric.
>
> Follow Jim's advice.
>
> G?ran
>
>
>>
>> Jim
>>
>>
>> On Wed, Jul 5, 2017 at 11:27 AM, SEB140004 Student
>> <chinyi at siswa.um.edu.my> wrote:
>>>
>>> Greeting.
>>>
>>> Dear Mr/Mrs/Miss,
>>>
>>> OTU ID Health Disease
>>> Bacterial 1 0.29 0.34
>>> Bacterial 2 0.25 0.07
>>> Bacterial 3 0.06 0.06
>>> Bacterial 4 0.07 0.09
>>> Bacterial 5 0.02 0.05
>>> Above show the first 6 data sets, may I ask that the reason of R show the
>>> error like "Error in cor(data) : 'x' must be numeric" ? And how to solve
>>> it? Besides, isn't this data can conduct correlation matrix?
>>>
>>> Moreover, isn't this data sets can be plot into network? If can, which
>>> package should I use?
>>>
>>> Thank you.
>>>
>>> Best regards,
>>> Kang Chin Yi
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r.turner at auckland.ac.nz  Thu Jul  6 00:38:07 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 6 Jul 2017 10:38:07 +1200
Subject: [R] [FORGED] Re:  Question about correlation
In-Reply-To: <CA+8X3fW0cr5evUqk7q6-JP6DbAiRxaWU233K+tVWu4jhNCcAAQ@mail.gmail.com>
References: <CAFuv27VF=3F+-_RidNoANpQXtd=GLhEAA6oRYAb7WoTjeXa6_w@mail.gmail.com>
 <CA+8X3fVG5nOC=nsGpVdvOevrdRNRyM9YFmXH0bP7wB_9FoheVw@mail.gmail.com>
 <694bba15-fda9-2756-cd85-be3d83589cfd@umu.se>
 <CA+8X3fW0cr5evUqk7q6-JP6DbAiRxaWU233K+tVWu4jhNCcAAQ@mail.gmail.com>
Message-ID: <646397f2-b387-c747-02fd-d44e8ad65b6b@auckland.ac.nz>


On 06/07/17 10:23, Jim Lemon wrote:

> I think that Goran is right, I didn't take "cor(data)" literally.

See fortune(15).

cheers,

Rolf


-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From drjimlemon at gmail.com  Thu Jul  6 00:38:12 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Thu, 6 Jul 2017 08:38:12 +1000
Subject: [R] Help with reshape/reshape2 needed
In-Reply-To: <CA+vqiLECHZRe20473CU2D0Jax153hhs4qzgKkKy16Q0yH4CbBQ@mail.gmail.com>
References: <CAGxgkWjvJSQoTb1cvjgKH3qLCzrn+Ut8n5n3xCJjswPuZ1R4+g@mail.gmail.com>
 <CA+vqiLECHZRe20473CU2D0Jax153hhs4qzgKkKy16Q0yH4CbBQ@mail.gmail.com>
Message-ID: <CA+8X3fW5dM-k=188ErKUdRn6_e=iFZVNqFVueRXSkU4ZsBDJnw@mail.gmail.com>

Hi Tom,
Or perhaps:

#assume the data frame is named "tadf"
library(prettyR)
stretch_df(tadf,1,2)

Jim


On Thu, Jul 6, 2017 at 6:50 AM, Ista Zahn <istazahn at gmail.com> wrote:
> The reason it doesn't work easily with reshape/reshape2 is that the
> order of the rows is not determined. Your answer could be
>
>      1957      1958 ...      1985       1986
> 0.8625000 0.7500000 ... 0.7307692 0.23750000
> 0.0733945 0.6435644 ...        NA 0.05769231
> 0.5096154        NA ...        NA 0.65137615
>
> or
>
>      1957      1958 ...      1985       1986
> 0.0733945 0.6435644 ...        NA 0.05769231
> 0.8625000 0.7500000 ... 0.7307692 0.23750000
> 0.5096154        NA ...        NA 0.65137615
>
> or
>
>      1957      1958 ...      1985       1986
> 0.8625000 0.6435644 ...        NA 0.23750000
> 0.0733945         NA    0.7307692 0.05769231
> 0.5096154 0.7500000 ...        NA 0.65137615
>
> or any other combination of orders. You might not care about the
> order, but reshape does.
>
> The usual way around it is to just make up an order variable, e.g.,
> assuming your data.frame is named "example_data" and the columns are
> named "year" and "score":
>
> example_data <- do.call(rbind,
>                         lapply(split(example_data,
>                                      example_data$year),
>                                transform,
>                                obs = seq_along(year)))
>
> dcast(example_data,
>       obs ~ year,
>       value.var = "score")
>
> Best,
> Ista
>
>
> On Wed, Jul 5, 2017 at 2:16 PM, Thomas Adams <tea3rd at gmail.com> wrote:
>> Hi all:
>>
>> I'm struggling with getting my data re-formatted using functions in
>> reshape/reshape2 to get from:
>>
>> 1957 0.862500000
>> 1958 0.750000000
>> 1959 0.300000000
>> 1960 0.287500000
>> 1963 0.675000000
>> 1964 0.937500000
>> 1965 0.025000000
>> 1966 0.387500000
>> 1969 0.087500000
>> 1970 0.275000000
>> 1973 0.500000000
>> 1974 0.362500000
>> 1976 0.925000000
>> 1978 0.712500000
>> 1979 0.337500000
>> 1980 0.700000000
>> 1981 0.425000000
>> 1982 0.212500000
>> 1983 0.312500000
>> 1986 0.237500000
>> 1958 0.643564356
>> 1963 0.250000000
>> 1968 0.211538462
>> 1976 0.317307692
>> 1981 0.673076923
>> 1985 0.730769231
>> 1986 0.057692308
>> 1957 0.073394495
>> 1966 0.742574257
>> 1961 0.082568807
>> 1964 0.165137615
>> 1965 0.137614679
>> 1959 0.128712871
>> 1968 0.587155963
>> 1969 0.660550459
>> 1970 0.477064220
>> 1971 0.513761468
>> 1973 0.449541284
>> 1974 0.128440367
>> 1968 0.415841584
>> 1977 0.009174312
>> 1979 0.339449541
>> 1981 0.596330275
>> 1982 0.348623853
>> 1984 0.146788991
>> 1986 0.651376147
>> 1959 0.451923077
>> 1965 0.750000000
>> 1962 0.326732673
>> 1964 0.782178218
>> 1970 0.336538462
>> 1975 0.277227723
>> 1978 0.712871287
>> 1957 0.509615385
>> 1960 0.490384615
>> 1961 0.721153846
>> 1966 0.298076923
>> 1969 0.413461538
>> 1971 0.500000000
>> 1972 0.692307692
>> 1974 0.653846154
>> 1984 0.049504950
>> 1978 0.442307692
>> 1973 0.079207921
>> 1983 0.355769231
>> 1984 0.038461538
>> 1979 0.237623762
>> 1982 0.564356436
>>
>> to:
>>
>> 1957                  1958               1959             1960 ...
>> 1985           1986
>> 0.509615385  0.750000000  0.451923077  0.287500000 ...
>> 0.651376147
>> 0.509615385
>>
>> and so on. It's likely the column lengths will be different, so I'm
>> guessing padding with NAs will be needed. I have on the order of 1335 rows
>> with years spanning 1957 to 2016.
>>
>> Thank you...
>> Tom
>>
>> --
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drjimlemon at gmail.com  Thu Jul  6 00:46:45 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Thu, 6 Jul 2017 08:46:45 +1000
Subject: [R] Help with reshape/reshape2 needed
In-Reply-To: <CA+8X3fW5dM-k=188ErKUdRn6_e=iFZVNqFVueRXSkU4ZsBDJnw@mail.gmail.com>
References: <CAGxgkWjvJSQoTb1cvjgKH3qLCzrn+Ut8n5n3xCJjswPuZ1R4+g@mail.gmail.com>
 <CA+vqiLECHZRe20473CU2D0Jax153hhs4qzgKkKy16Q0yH4CbBQ@mail.gmail.com>
 <CA+8X3fW5dM-k=188ErKUdRn6_e=iFZVNqFVueRXSkU4ZsBDJnw@mail.gmail.com>
Message-ID: <CA+8X3fWUFeXMXvQkDy+DBgmhHmjEbQyqYHiB=gCXqBzoXDDOHA@mail.gmail.com>

Oops, that should have been:

stretch_df(tadf,"V1","V2")

Jim

On Thu, Jul 6, 2017 at 8:38 AM, Jim Lemon <drjimlemon at gmail.com> wrote:
> Hi Tom,
> Or perhaps:
>
> #assume the data frame is named "tadf"
> library(prettyR)
> stretch_df(tadf,1,2)
>
> Jim
>
>
> On Thu, Jul 6, 2017 at 6:50 AM, Ista Zahn <istazahn at gmail.com> wrote:
>> The reason it doesn't work easily with reshape/reshape2 is that the
>> order of the rows is not determined. Your answer could be
>>
>>      1957      1958 ...      1985       1986
>> 0.8625000 0.7500000 ... 0.7307692 0.23750000
>> 0.0733945 0.6435644 ...        NA 0.05769231
>> 0.5096154        NA ...        NA 0.65137615
>>
>> or
>>
>>      1957      1958 ...      1985       1986
>> 0.0733945 0.6435644 ...        NA 0.05769231
>> 0.8625000 0.7500000 ... 0.7307692 0.23750000
>> 0.5096154        NA ...        NA 0.65137615
>>
>> or
>>
>>      1957      1958 ...      1985       1986
>> 0.8625000 0.6435644 ...        NA 0.23750000
>> 0.0733945         NA    0.7307692 0.05769231
>> 0.5096154 0.7500000 ...        NA 0.65137615
>>
>> or any other combination of orders. You might not care about the
>> order, but reshape does.
>>
>> The usual way around it is to just make up an order variable, e.g.,
>> assuming your data.frame is named "example_data" and the columns are
>> named "year" and "score":
>>
>> example_data <- do.call(rbind,
>>                         lapply(split(example_data,
>>                                      example_data$year),
>>                                transform,
>>                                obs = seq_along(year)))
>>
>> dcast(example_data,
>>       obs ~ year,
>>       value.var = "score")
>>
>> Best,
>> Ista
>>
>>
>> On Wed, Jul 5, 2017 at 2:16 PM, Thomas Adams <tea3rd at gmail.com> wrote:
>>> Hi all:
>>>
>>> I'm struggling with getting my data re-formatted using functions in
>>> reshape/reshape2 to get from:
>>>
>>> 1957 0.862500000
>>> 1958 0.750000000
>>> 1959 0.300000000
>>> 1960 0.287500000
>>> 1963 0.675000000
>>> 1964 0.937500000
>>> 1965 0.025000000
>>> 1966 0.387500000
>>> 1969 0.087500000
>>> 1970 0.275000000
>>> 1973 0.500000000
>>> 1974 0.362500000
>>> 1976 0.925000000
>>> 1978 0.712500000
>>> 1979 0.337500000
>>> 1980 0.700000000
>>> 1981 0.425000000
>>> 1982 0.212500000
>>> 1983 0.312500000
>>> 1986 0.237500000
>>> 1958 0.643564356
>>> 1963 0.250000000
>>> 1968 0.211538462
>>> 1976 0.317307692
>>> 1981 0.673076923
>>> 1985 0.730769231
>>> 1986 0.057692308
>>> 1957 0.073394495
>>> 1966 0.742574257
>>> 1961 0.082568807
>>> 1964 0.165137615
>>> 1965 0.137614679
>>> 1959 0.128712871
>>> 1968 0.587155963
>>> 1969 0.660550459
>>> 1970 0.477064220
>>> 1971 0.513761468
>>> 1973 0.449541284
>>> 1974 0.128440367
>>> 1968 0.415841584
>>> 1977 0.009174312
>>> 1979 0.339449541
>>> 1981 0.596330275
>>> 1982 0.348623853
>>> 1984 0.146788991
>>> 1986 0.651376147
>>> 1959 0.451923077
>>> 1965 0.750000000
>>> 1962 0.326732673
>>> 1964 0.782178218
>>> 1970 0.336538462
>>> 1975 0.277227723
>>> 1978 0.712871287
>>> 1957 0.509615385
>>> 1960 0.490384615
>>> 1961 0.721153846
>>> 1966 0.298076923
>>> 1969 0.413461538
>>> 1971 0.500000000
>>> 1972 0.692307692
>>> 1974 0.653846154
>>> 1984 0.049504950
>>> 1978 0.442307692
>>> 1973 0.079207921
>>> 1983 0.355769231
>>> 1984 0.038461538
>>> 1979 0.237623762
>>> 1982 0.564356436
>>>
>>> to:
>>>
>>> 1957                  1958               1959             1960 ...
>>> 1985           1986
>>> 0.509615385  0.750000000  0.451923077  0.287500000 ...
>>> 0.651376147
>>> 0.509615385
>>>
>>> and so on. It's likely the column lengths will be different, so I'm
>>> guessing padding with NAs will be needed. I have on the order of 1335 rows
>>> with years spanning 1957 to 2016.
>>>
>>> Thank you...
>>> Tom
>>>
>>> --
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From cbenjami at BTBOCES.ORG  Wed Jul  5 20:24:21 2017
From: cbenjami at BTBOCES.ORG (Courtney Benjamin)
Date: Wed, 5 Jul 2017 18:24:21 +0000
Subject: [R] Svyglm Error
Message-ID: <1499279040187.70227@BTBOCES.ORG>

Greetings,

I am revisiting code from several different files I have saved from the past and all used to run flawlessly; now when I run any of the svyglm related functions, I am coming up with an error:

Error in model.frame.default(formula = F3ATTAINB ~ F1PARED, data = data,  :
  the ... list does not contain 4 elements
The following is a minimal reproducible example:
library(RCurl)
library(survey)

data <- getURL("https://raw.githubusercontent.com/cbenjamin1821/careertech-ed/master/elsq1adj.csv")
elsq1ch <- read.csv(text = data)

#Specifying the svyrepdesign object which applies the BRR weights
elsq1ch_brr<-svrepdesign(variables = elsq1ch[,1:16], repweights = elsq1ch[,18:217], weights = elsq1ch[,17], combined.weights = TRUE, type = "BRR")
elsq1ch_brr

##Resetting baseline levels for predictors
elsq1ch_brr <- update( elsq1ch_brr , F1HIMATH = relevel(F1HIMATH,"PreAlg or Less") )
elsq1ch_brr <- update( elsq1ch_brr , BYINCOME = relevel(BYINCOME,"0-25K") )
elsq1ch_brr <- update( elsq1ch_brr , F1RACE = relevel(F1RACE,"White") )
elsq1ch_brr <- update( elsq1ch_brr , F1SEX = relevel(F1SEX,"Male") )
elsq1ch_brr <- update( elsq1ch_brr , F1RTRCC = relevel(F1RTRCC,"Other") )

##Univariate testing for Other subset
Othpared <- svyglm(formula=F3ATTAINB~F1PARED,family="quasibinomial",design=subset(elsq1ch_brr,BYSCTRL==1&G10COHRT==1&F1RTRCC=="Other"),na.action=na.omit)
summary(Othpared)?


Any help in resolving this concern would be greatly appreciated.

Sincerely,

Courtney


Courtney Benjamin

Broome-Tioga BOCES

Automotive Technology II Teacher

Located at Gault Toyota

Doctoral Candidate-Educational Theory & Practice

State University of New York at Binghamton

cbenjami at btboces.org<mailto:cbenjami at btboces.org>

607-763-8633

	[[alternative HTML version deleted]]


From peter.anthoni at kit.edu  Thu Jul  6 08:42:18 2017
From: peter.anthoni at kit.edu (Anthoni, Peter (IMK))
Date: Thu, 6 Jul 2017 06:42:18 +0000
Subject: [R] expand gridded matrix to higher resolution
In-Reply-To: <29646CA4-5A39-4F9E-9D17-FDABC57B5FD5@dcn.davis.ca.us>
References: <BB61AA75-620D-4D0C-9A9D-6127880DD9BA@kit.edu>
 <29646CA4-5A39-4F9E-9D17-FDABC57B5FD5@dcn.davis.ca.us>
Message-ID: <073FE80D-E256-423D-96D6-DFFFC7C33C6B@kit.edu>

Hi Jeff,

thanks, the raster package disaggregate will do the trick as well.

library(raster)
rmm <- raster(ncols=5, nrows=3)
rmm[] <- matrix(1:15,nrow=3,byrow = T)
xrmm <- disaggregate(rmm, fact=c(3, 3))
> > as.matrix(rmm)
>      [,1] [,2] [,3] [,4] [,5]
> [1,]    1    2    3    4    5
> [2,]    6    7    8    9   10
> [3,]   11   12   13   14   15
> > as.matrix(xrmm)
>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15]
>  [1,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>  [2,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>  [3,]    1    1    1    2    2    2    3    3    3     4     4     4     5     5     5
>  [4,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>  [5,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>  [6,]    6    6    6    7    7    7    8    8    8     9     9     9    10    10    10
>  [7,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>  [8,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15
>  [9,]   11   11   11   12   12   12   13   13   13    14    14    14    15    15    15


the disaggregate as a bit faster than the tapply.

mmb=matrix(1:259200,nrow=720,ncol=360)
rmmb <- raster(ncols=360, nrows=720)
rmmb[] <- mmb[]
system.time(for(i in 1:10) {xmm=matrix(NA,nrow=nrow(mmb)*3,ncol=ncol(mmb)*3)
for(icol in 1:ncol(mmb)) {
  for(irow in 1:nrow(mmb)) {
    xicol=(icol-1)*3 +c(1:3)
    xirow=(irow-1)*3 +c(1:3)
    xmm[xirow,xicol]=mmb[irow,icol]
  }
}
})
system.time(for(i in 1:10) {apply(t(apply(mmb,1,rep,each=3)),2,rep,each=3)}) #ca. 10x faster
system.time(for(i in 1:10) {xrmmb <- disaggregate(rmmb, fact=c(3, 3))}) 

> > system.time(for(i in 1:10) {xmm=matrix(NA,nrow=nrow(mmb)*3,ncol=ncol(mmb)*3)
> + for(icol in 1:ncol(mmb)) {
> +   for(irow in 1:nrow(mmb)) {
> +     xicol=(icol-1)*3 +c(1:3)
> +     xirow=(irow-1)*3 +c(1:3)
> +     xmm[xirow,xicol]=mmb[irow,icol]
> +   }
> + }
> + })
>    user  system elapsed 
>   8.297   0.048   8.364 
> > system.time(for(i in 1:10) {apply(t(apply(mmb,1,rep,each=3)),2,rep,each=3)}) #ca. 10x faster
>    user  system elapsed 
>   0.785   0.093   0.881 
> > system.time(for(i in 1:10) {xrmmb <- disaggregate(rmmb, fact=c(3, 3))})
>    user  system elapsed 
>   0.583   0.147   0.731 

cheers
Peter



> On 5. Jul 2017, at 16:57, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> You probably ought to be using the raster package. See the CRAN Spatial Task View.
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> On July 5, 2017 12:20:28 AM PDT, "Anthoni, Peter (IMK)" <peter.anthoni at kit.edu> wrote:
>> Hi all,
>> (if me email goes out as html, than my email client don't do as told,
>> and I apologies already.)
>> 
>> We need to downscale climate data and therefore first need to expand
>> the climate from 0.5deg to the higher resolution 10min, before we can
>> add high resolution deviations. We basically need to have the original
>> data at each gridcell replicated into 3x3 gridcells. 
>> A simple for loop can do this, but I could need a faster procedure.
>> Anybody know a faster way? Is there package than can do what we need
>> already?
>> I tried matrix with rep, but I am missing some magic there, since it
>> doesn't do what we need. 
>> replicate might be promising, but then still need to rearrange the
>> output into the column and row format we need. 
>> 
>> A simple example:
>> mm=matrix(1:15,nrow=3,byrow = T)
>> xmm=matrix(NA,nrow=nrow(mm)*3,ncol=ncol(mm)*3)
>> for(icol in 1:ncol(mm)) {
>> for(irow in 1:nrow(mm)) {
>>   xicol=(icol-1)*3 +c(1:3)
>>   xirow=(irow-1)*3 +c(1:3)
>>   xmm[xirow,xicol]=mm[irow,icol]
>> }
>> }
>> mm
>>>> mm
>>>     [,1] [,2] [,3] [,4] [,5]
>>> [1,]    1    2    3    4    5
>>> [2,]    6    7    8    9   10
>>> [3,]   11   12   13   14   15
>>> 
>> xmm
>>>> xmm
>>>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
>> [,13] [,14] [,15]
>>> [1,]    1    1    1    2    2    2    3    3    3     4     4     4 
>>  5     5     5
>>> [2,]    1    1    1    2    2    2    3    3    3     4     4     4 
>>  5     5     5
>>> [3,]    1    1    1    2    2    2    3    3    3     4     4     4 
>>  5     5     5
>>> [4,]    6    6    6    7    7    7    8    8    8     9     9     9 
>> 10    10    10
>>> [5,]    6    6    6    7    7    7    8    8    8     9     9     9 
>> 10    10    10
>>> [6,]    6    6    6    7    7    7    8    8    8     9     9     9 
>> 10    10    10
>>> [7,]   11   11   11   12   12   12   13   13   13    14    14    14 
>> 15    15    15
>>> [8,]   11   11   11   12   12   12   13   13   13    14    14    14 
>> 15    15    15
>>> [9,]   11   11   11   12   12   12   13   13   13    14    14    14 
>> 15    15    15
>> 
>> I tried various rep with matrix, but don't get the right result.
>> xmm2=matrix(rep(rep(mm,each=3),times=3),nrow=nrow(mm)*3,ncol=ncol(mm)*3,byrow
>> = F)
>>> identical(xmm,xmm2)
>> [1] FALSE
>> 
>> rr=replicate(3,rep(t(mm),each=3))
>> rr
>>>> rr
>>>      [,1] [,2] [,3]
>>> [1,]    1    1    1
>>> [2,]    1    1    1
>>> [3,]    1    1    1
>>> [4,]    2    2    2
>>> [5,]    2    2    2
>>> [6,]    2    2    2
>>> [7,]    3    3    3
>>> ...
>> identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
>>>> identical(xmm,matrix(rr,ncol=15,nrow=9,byrow=T))
>>> [1] FALSE
>> 
>> Many thanks for any advice.
>> 
>> cheers
>> Peter
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From goran.brostrom at umu.se  Thu Jul  6 11:18:09 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Thu, 6 Jul 2017 11:18:09 +0200
Subject: [R] Question about correlation
In-Reply-To: <CAFuv27U=GLGavLgLWtnCSwMB7KvNryLjQ9stAmAJkSi1uPntPg@mail.gmail.com>
References: <CAFuv27VF=3F+-_RidNoANpQXtd=GLhEAA6oRYAb7WoTjeXa6_w@mail.gmail.com>
 <CA+8X3fVG5nOC=nsGpVdvOevrdRNRyM9YFmXH0bP7wB_9FoheVw@mail.gmail.com>
 <694bba15-fda9-2756-cd85-be3d83589cfd@umu.se>
 <CAFuv27U=GLGavLgLWtnCSwMB7KvNryLjQ9stAmAJkSi1uPntPg@mail.gmail.com>
Message-ID: <de2da1f9-3e6d-6adf-1702-0ef5d871d925@umu.se>

Please keep the conversation on the list: Others may be able to help you 
better than I can.

On 2017-07-06 10:38, SEB140004 Student wrote:
> Ya. I had successfully got the result. Thank you very much. :)
> 
> Isn't possible for me to obtain the network from the correlation matrix?

I know nothing about correlation networks, but by googling I found two R 
packages, ggraph and corrr, that may be of interest to you.

G?ran

> On Thu, Jul 6, 2017 at 1:38 AM, G?ran Brostr?m <goran.brostrom at umu.se 
> <mailto:goran.brostrom at umu.se>> wrote:
> 
>     On 2017-07-05 11:56, Jim Lemon wrote:
> 
>         Hi Chin Yi,
>         If you are trying to correlate "Health" with "Disease", i.e.
> 
>         cydf<-read.table(text="OTU ID Health Disease
>             Bacterial 1 0.29 0.34
>             Bacterial 2 0.25 0.07
>             Bacterial 3 0.06 0.06
>             Bacterial 4 0.07 0.09
>             Bacterial 5 0.02 0.05",
>             header=TRUE)
>         print(cor(cydf$Health,cydf$Disease))
>         [1] 0.7103517
> 
>         If you are getting that error, it probably means that either
>         "Health"
>         or "Disease" or perhaps both have been read in as a factor. To test
>         this:
> 
>         is.factor(cydf$Health)
>         [1] FALSE
> 
>             is.factor(cydf$Disease)
> 
>         [1] FALSE
> 
>         If either of these returns TRUE, that is almost certainly the
>         problem.
> 
> 
>     Or maybe Chin Yi tried (as it seems)
> 
>      > cor(cydf)
>     Error in cor(cydf) : 'x' must be numeric
> 
>     (with cydf == data): 'OTU' is not numeric.
> 
>     Follow Jim's advice.
> 
>     G?ran
> 
> 
> 
>         Jim
> 
> 
>         On Wed, Jul 5, 2017 at 11:27 AM, SEB140004 Student
>         <chinyi at siswa.um.edu.my <mailto:chinyi at siswa.um.edu.my>> wrote:
> 
>             Greeting.
> 
>             Dear Mr/Mrs/Miss,
> 
>             OTU ID Health Disease
>             Bacterial 1 0.29 0.34
>             Bacterial 2 0.25 0.07
>             Bacterial 3 0.06 0.06
>             Bacterial 4 0.07 0.09
>             Bacterial 5 0.02 0.05
>             Above show the first 6 data sets, may I ask that the reason
>             of R show the
>             error like "Error in cor(data) : 'x' must be numeric" ? And
>             how to solve
>             it? Besides, isn't this data can conduct correlation matrix?
> 
>             Moreover, isn't this data sets can be plot into network? If
>             can, which
>             package should I use?
> 
>             Thank you.
> 
>             Best regards,
>             Kang Chin Yi
> 
>                       [[alternative HTML version deleted]]
> 
>             ______________________________________________
>             R-help at r-project.org <mailto:R-help at r-project.org> mailing
>             list -- To UNSUBSCRIBE and more, see
>             https://stat.ethz.ch/mailman/listinfo/r-help
>             <https://stat.ethz.ch/mailman/listinfo/r-help>
>             PLEASE do read the posting guide
>             http://www.R-project.org/posting-guide.html
>             <http://www.R-project.org/posting-guide.html>
>             and provide commented, minimal, self-contained, reproducible
>             code.
> 
> 
>         ______________________________________________
>         R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>         -- To UNSUBSCRIBE and more, see
>         https://stat.ethz.ch/mailman/listinfo/r-help
>         <https://stat.ethz.ch/mailman/listinfo/r-help>
>         PLEASE do read the posting guide
>         http://www.R-project.org/posting-guide.html
>         <http://www.R-project.org/posting-guide.html>
>         and provide commented, minimal, self-contained, reproducible code.
> 
>


From Rainer at krugs.de  Thu Jul  6 12:28:18 2017
From: Rainer at krugs.de (Rainer Krug)
Date: Thu, 6 Jul 2017 12:28:18 +0200
Subject: [R] Plantuml package for R
Message-ID: <EA2C04C5-8C07-47B4-B147-B8428774CCFC@krugs.de>

Hi

I hope I can use this R mailing list for this but it seems appropriate.

I started writing a small package which enables me to create plantuml graphs from within R. It is working and available on GitHub at

https://github.com/rkrug/plantuml

It is at the moment very rudimentary and can either display the generated graph in an R graphic device or save them in a file, but it works nicely (and it takes care of the installation and download of plantuml.jar!).

I am looking for feedback and ideas in which direction this can move. Ideas are for example conversion of R types (lists, data.frames, ?) into graphs.


Please try it out and file suggestions, comments, bug reports on the GitHub issues tracker at https://github.com/rkrug/plantuml/issues

or if you have more general questions or suggestions, please discuss them here.

Thanks,

Rainer

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20170706/982e1709/attachment.sig>

From crosspide at hotmail.com  Thu Jul  6 16:12:21 2017
From: crosspide at hotmail.com (Cristina Pascual)
Date: Thu, 6 Jul 2017 14:12:21 +0000
Subject: [R] svm.formula versus svm.default - different results
Message-ID: <VI1PR0201MB2350443CE1A1C7D3C8A0266AA9D50@VI1PR0201MB2350.eurprd02.prod.outlook.com>

Dear community,


I'm performing svm-regression  with svm at library e1071.


As I wrote in another post: "svm e1071 call - different results", I get different results if I use the svm.default rather than the svm.formula, being better the ones at svm.formula


I've debugged both options.


While debugging the svm.formula, I've seen that when I reach the call:


ret <- svm.default(x,y, scale= scale, ..., na.action= na.action)


x arrives with the response included, as if svm.formula had not understood which is the response, and hadn't removed it from the overall data.


It doesn't happen if I debug the iris example at R documentation, maybe it is because this Iris one is a classification problem.


?am i writing properly the S3 object for svm.formula?

This is what I'm trying:

TYPE1

mod = svm(train[, 8] ~ . , data= train)
pred.svm <- predict (mod, train)
error.svm <-  train$revenues - pred.svm
pred.svm.test <- predict (mod, test)
svmPredictionRMSE <- rmse(error.svm)
0.05239259
error.svm.test <-  test$revenues - pred.svm.test
svmPredictionRMSE.test <- rmse(error.svm.test)
0.06932511

TYPE2

mod.1 = svm(train[, -8] , train[, 8])
pred.1.svm <- predict (mod.1, train[, -8])
error.1.svm <-  train$revenues - pred.1.svm
rmse(error.1.svm)
0.3695311
pred.1.svm.test <- predict (mod.1, test[, -8])
error.1.svm.test <-  test$revenues - pred.1.svm.test
rmse(error.1.svm.test)
0.412292

Find attached my data.

train.txt<http://r.789695.n4.nabble.com/file/n4740595/train.txt>

test.txt<http://r.789695.n4.nabble.com/file/n4740595/test.txt>


And rmse:

function(error)
{
         sqrt(mean(error^2, na.rm= TRUE))
}

Thanks in advance,

	[[alternative HTML version deleted]]


From ahmedatia80 at gmail.com  Thu Jul  6 16:42:55 2017
From: ahmedatia80 at gmail.com (Ahmed Attia)
Date: Thu, 6 Jul 2017 11:42:55 -0300
Subject: [R] Convert date to continuous variable in R
In-Reply-To: <95C9BA9C-6DDB-412D-AD61-28B44BCC1F23@llnl.gov>
References: <CAG6S0O=5QEK=7d2wr5uudCDDXfqXAgbhQaaYkoj63kPw4tPAWQ@mail.gmail.com>
 <95C9BA9C-6DDB-412D-AD61-28B44BCC1F23@llnl.gov>
Message-ID: <CAG6S0OnaFQn5hukvNFnnKhOsxRUuGvymrKXxL9t0xK3H=6OQ0A@mail.gmail.com>

Thanks it worked for me. I wanted to plot days since planting on
x-axis 1 and years on x-axis 3.

LAI_simulation$Date <- as.Date( LAI_simulation$Date, '%Y/%m/%d')
LAI_simulation$Date <- as.integer(LAI_simulation$Date - as.Date("2009-10-07"))
plot(LAI~Date,data=LAI_simulation,xlab="Days since Oct, 7,
2009",cex=0.3,cex.lab=1.2,xaxt="n",xaxs="i",yaxs="i",ylim=c(0,6))
axis(1,xlim=c(0,2200),xaxp=c(0,2200,11),cex.lab=1.2,cex.axis=0.8,xaxs="i")
LAI_simulation$Date<- as.Date(LAI_simulation$Date, origin="2009-10-07")
par(new=TRUE)
plot(LAI~Date, data=LAI_simulation,xlab="",ylab="",
     xaxt="n",type="p",cex=0.2,col=1,xaxs="i",yaxs="i",ylim=c(0,6))
axis.Date(side=3, at=seq(min(LAI_simulation$Date),
max(LAI_simulation$Date),by="year"), format="%Y",
xlab="xxx",cex.axis=0.9)
mtext("years",side=3,line=3,cex.lab=1.2)
Ahmed Attia, Ph.D.
Agronomist & Soil Scientist






On Wed, Jul 5, 2017 at 4:52 PM, MacQueen, Don <macqueen1 at llnl.gov> wrote:
> Not entirely sure what you really want the axis on the top to look like, but here's what I'd be likely to do:
>
> ## note, correction to format; in your example data year comes last
> LAI_simulation$Date <- as.Date( LAI_simulation$Date, '%m/%d/%Y')
>
> plot(LAI~Date, data=LAI_simulation)
>
> simdate <- as.numeric( LAI_simulation$Date - as.Date('2009-10-7') )
> ## or
> simdate <- difftime( LAI_simulation$Date, as.Date('2009-10-7') )
>
> ## then
> axis(3, pretty(simdate) )
>
>
> Converting LAI_simulation$Date to numeric, and then applying axis.Date() to it makes no sense to me, since the elapsed numbers of days are not dates.
>
> --
> Don MacQueen
>
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
>
>
> On 7/5/17, 11:23 AM, "Ahmed Attia" <ahmedatia80 at gmail.com> wrote:
>
>     How can I convert date to continuous variable staring from 1. I tried
>     as.numeric but R starts counting from default January 1, 1970 while my data
>     start Oct 7, 2009.
>
>     I need to do this conversion to plot the date on two x-axes (1 and 3).
>     Ex;
>     Date LAI
>     10/7/2009 0
>     10/8/2009 0.004173
>     10/9/2009 0.009997
>     10/10/2009 0.009998
>     10/11/2009 0.009999
>     10/12/2009 0.009999
>     10/13/2009 0.009999
>     10/14/2009 0.009999
>     10/15/2009 0.009998
>     10/16/2009 0.009998
>     10/17/2009 0.009998
>     10/18/2009 0.009998
>     10/19/2009 0.009998
>     10/20/2009 0.009998
>
>     LAI_simulation$Date <- as.Date( LAI_simulation$Date, '%Y/%m/%d')
>     plot(LAI~Date, data=LAI_simulation)
>     LAI_simulation$Date<- as.numeric(LAI_simulation$Date,origin="2009-10-07")
>     #R does not see the origin
>     axis.Date(side=3,at=LAI_simulation$Date)
>
>
>
>
>     Ahmed Attia, Ph.D.
>     Agronomist & Soil Scientist
>
>         [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>
>


From rbaer at atsu.edu  Thu Jul  6 16:43:49 2017
From: rbaer at atsu.edu (Robert Baer)
Date: Thu, 6 Jul 2017 09:43:49 -0500
Subject: [R] How can I make the legend in ggplot2 the same height as my
 plot?
In-Reply-To: <MWHPR13MB0894545DF1F0124AD5882F11FAD40@MWHPR13MB0894.namprd13.prod.outlook.com>
References: <MWHPR13MB0894545DF1F0124AD5882F11FAD40@MWHPR13MB0894.namprd13.prod.outlook.com>
Message-ID: <e6fea10b-f85a-f4a4-67cb-1c29aa3dacc8@atsu.edu>

Don't know what your data looks like, but you might  try:

p <-  Scenario1+guides(fill = guide_colorbar(bar width = 1.5, barheight 
= unit(10, "mm")))

print(p)


On 7/5/2017 5:13 PM, Kristi Glover wrote:
> Hi R Users,
>
> I tried to increase the legend height in ggplot2, but it did not respond at all using the follwoing code. Do you have any suggestions for me?
>
>
>
> dat<-data.frame(temperature)
>
> P1<-ggplot(dat, aes(X, Y))
>
> Scenario1<-P1+geom_point(aes(colour = value), size = 1)+ theme_bw()+ theme(axis.text.x = element_blank(),axis.text.y = element_blank())
>
> Scenario1<-Scenario1+facet_wrap(~variable, ncol=2)+scale_color_gradientn(colours = rainbow(48))
>
> Scenario1+guides(fill = guide_colorbar(bar width = 1.5, barheight = unit(10, "mm")))
>
>
> Thanks,
>
> KG
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From marine.regis at hotmail.fr  Thu Jul  6 17:14:19 2017
From: marine.regis at hotmail.fr (Marine Regis)
Date: Thu, 6 Jul 2017 15:14:19 +0000
Subject: [R] Generate simulated data respecting some conditions
Message-ID: <AM3PR07MB1185920F85810A0D891F5F99E2D50@AM3PR07MB1185.eurprd07.prod.outlook.com>

Hello,

Is it possible to generate simulated data that look like the attached figure?

The curve in the figure can be obtained from this equation respecting some conditions:



if(Temperature > T_min & Temperature < T_max){

   a*( Temperature -T_min)*( Temperature -T_max)

} else 0


T_min ~ Uniform(0, 24)

T_max ~ Uniform(25, 45)

-a ~ Gamma(1, 1)

Temperature <- seq(0, 45, by = 1)



Thank you very much for your help.

Have a nice day

Marine

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Untitled.png
Type: image/png
Size: 8165 bytes
Desc: Untitled.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20170706/7c40973b/attachment.png>

From jdnewmil at dcn.davis.ca.us  Thu Jul  6 17:52:38 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Thu, 06 Jul 2017 08:52:38 -0700
Subject: [R] Generate simulated data respecting some conditions
In-Reply-To: <AM3PR07MB1185920F85810A0D891F5F99E2D50@AM3PR07MB1185.eurprd07.prod.outlook.com>
References: <AM3PR07MB1185920F85810A0D891F5F99E2D50@AM3PR07MB1185.eurprd07.prod.outlook.com>
Message-ID: <022CB4B2-FB31-4692-ABD3-B118FA4DDAC1@dcn.davis.ca.us>

Yes, definitely. However, this is so close to being legal R code that I feel you have not made any effort to translate it yourself, and this is the "R-help" mailing list, not the "R-do-my-work-for-me" mailing list. Is this homework?  Have you read the "Introduction to R" document that is supplied with R? There are also many basic tutorials on the Internet and books available that would discuss the need to write R statements in an appropriate  order so later statements can use objects created by earlier statements.
-- 
Sent from my phone. Please excuse my brevity.

On July 6, 2017 8:14:19 AM PDT, Marine Regis <marine.regis at hotmail.fr> wrote:
>Hello,
>
>Is it possible to generate simulated data that look like the attached
>figure?
>
>The curve in the figure can be obtained from this equation respecting
>some conditions:
>
>
>
>if(Temperature > T_min & Temperature < T_max){
>
>   a*( Temperature -T_min)*( Temperature -T_max)
>
>} else 0
>
>
>T_min ~ Uniform(0, 24)
>
>T_max ~ Uniform(25, 45)
>
>-a ~ Gamma(1, 1)
>
>Temperature <- seq(0, 45, by = 1)
>
>
>
>Thank you very much for your help.
>
>Have a nice day
>
>Marine


From Ursula.Garczarek at cytel.com  Thu Jul  6 20:36:47 2017
From: Ursula.Garczarek at cytel.com (Ursula Garczarek)
Date: Thu, 6 Jul 2017 18:36:47 +0000
Subject: [R] Help documentation of "The Studentized range Distribution"
Message-ID: <7d0c904224f44ea193f2f55d09df8fe6@CYT000-EX01.cytel.com>

Dear all,
I wanted to compare Bonferroni vs TukeyHSD correction over a range of groups and group sizes, and wanted to use the function qtukey.

In the help documentation it says

qtukey(p, nmeans, df, nranges = 1, lower.tail = TRUE, log.p = FALSE)
Arguments
q

vector of quantiles.

p

vector of probabilities.

nmeans

sample size for range (same for each group).

df

degrees of freedom for s (see below).

nranges

number of groups whose maximum range is considered.

log.p

logical; if TRUE, probabilities p are given as log(p).

lower.tail

logical; if TRUE (default), probabilities are P[X ? x], otherwise, P[X > x].


But when I test it, "nmeans" actually should be the number of groups, and not "nrange" to fit with tables of the studentized range distribution.

Can that be - it should be a rather old procedure, so I wonder whether I get something completely wrong...

Regards,
Ursula













This email and any attachments are confidential and may ...{{dropped:8}}


From jfhenson1 at gmail.com  Thu Jul  6 22:04:59 2017
From: jfhenson1 at gmail.com (James Henson)
Date: Thu, 6 Jul 2017 15:04:59 -0500
Subject: [R] Bayes Factor
Message-ID: <CABPq8JPaP+L+bM3WmuVT7BzXBkVRe6+Jq8FZN-c7XhQA1avwxw@mail.gmail.com>

Hello R Community,
Subject: Bayes Factor
A Bayesian ANOVA of the form:
competitionBayesOut <- anovaBF(biomass ~ clipping, data = competition)
Returns the following Error message:
Error in (function (classes, fdef, mtable)  :
  unable to find an inherited method for function ?compare? for
signature ?"BFlinearModel", "missing", "tbl_df"?

My guess the problem is in the ?class?, which is:
[1] ?tbl_df?  ?tbl?  ?data.frame?
The data was imported via the ?readr? package through R Studio, and
then saved as a RData file.
My code is below, and the data is attached as a text file.

Thanks for your assistance.
Best regards,
James

# Plots for Interpreting One-Way ANOVA

library(digest)

library(DT)

datatable(competition)

# Characterize the data.

class(competition)

str(competition)

competition$clipping <- as.factor(competition$clipping)

competition$biomass <- as.numeric(competition$biomass)

str(competition)

#

tapply(competition$biomass, competition$clipping, mean)

tapply(competition$biomass, competition$clipping, sd)





# Bayesian Procedure for ANOVA



# Calculate Bayes Factors

library(BayesFactor)

competitionBayesOut <- anovaBF(biomass ~ clipping, data = competition)

# Run mcmc iterations

mcmcOut2 <- posterior(competitionBayesOut, iterations = 10000)

# boxplot of the posteriors for the groups

boxplot(as.matrix(mcmcOut2[,2:6]))

# Show the HDIs

summary(mcmcOut2)

# Calculate the Bayes Factor

competitionBayesOut



# Pairwise "post hoc" tests

library(rjags)

library(BEST)



# competitionare 'r5' vs. 'control'

plot(BESTmcmc(competition[competition$clpping=="r5",2],
competition[competition$clipping=="control",2]))

#

plot(BESTmcmc(competition[competition$clpping=="r10",2],
competition[competition$clipping=="control",2]))

# competitionare 'n10' vs. 'control'

plot(BESTmcmc(competition[competition$clipping=="n10",2],
competition[competition$clipping=="control",2]))

# competitionare 'n50' vs. 'control'

plot(BESTmcmc(competition[competition$clipping=="n50",2],
competition[competition$clipping=="control",2]))
-------------- next part --------------
clipping	biomass
n25	551
n25	457
n25	450
n25	731
n25	499
n25	632
n50	595
n50	580
n50	508
n50	583
n50	633
n50	517
r5	639
r5	615
r5	511
r5	573
r5	648
r5	677
control	417
control	449
control	517
control	438
control	415
control	555
r10	563
r10	631
r10	522
r10	613
r10	656
r10	679

From gangchen6 at gmail.com  Thu Jul  6 22:06:33 2017
From: gangchen6 at gmail.com (Gang Chen)
Date: Thu, 6 Jul 2017 16:06:33 -0400
Subject: [R] Efficient swapping
Message-ID: <CAHmzXO5=E+1RmmYzkEAMJxC58m6+=8UpvyTm8PbH-M=VSu4Czw@mail.gmail.com>

Suppose that we have the following dataframe:

set.seed(1)
(tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
TRUE), R2 = sample(LETTERS[1:5], 10, replace = TRUE)))

    x R1 R2
1   1  B  B
2   2  B  A
3   3  C  D
4   4  E  B
5   5  B  D
6   6  E  C
7   7  E  D
8   8  D  E
9   9  D  B
10 10  A  D

I want to do the following: if the difference between the level index
of factor R1 and that of factor R2 is an odd number, the levels of the
two factors need to be switched between them, which can be performed
through the following code:

for(ii in 1:dim(tmp)[1]) {
   kk <- which(levels(tmp$R2) %in% tmp[ii,'R2'], arr.ind = TRUE) -
which(levels(tmp$R1) %in% tmp[ii,'R1'], arr.ind = TRUE)
   if(kk%%2!=0) { # swap the their levels between the two factors
      qq <- tmp[ii,]$R1
      tmp[ii,]$R1 <- tmp[ii,]$R2
      tmp[ii,]$R2 <- qq
  }
}

More concise and efficient way to do this?

Thanks,
Gang


From istazahn at gmail.com  Thu Jul  6 23:16:23 2017
From: istazahn at gmail.com (Ista Zahn)
Date: Thu, 6 Jul 2017 17:16:23 -0400
Subject: [R] Efficient swapping
In-Reply-To: <CAHmzXO5=E+1RmmYzkEAMJxC58m6+=8UpvyTm8PbH-M=VSu4Czw@mail.gmail.com>
References: <CAHmzXO5=E+1RmmYzkEAMJxC58m6+=8UpvyTm8PbH-M=VSu4Czw@mail.gmail.com>
Message-ID: <CA+vqiLH=DqFDBmKgGx=LHN93N5QpZOb-40F53GJn8w76iTOVvg@mail.gmail.com>

How about

foo <- with(list(r1 = tmp$R1,
                 r2 = tmp$R2,
                 swapme = (as.numeric(tmp$R1) - as.numeric(tmp$R2)) %% 2 != 0),
{
    tmp[swapme, "R1"] <- r2[swapme]
    tmp[swapme, "R2"] <- r1[swapme]
    tmp
})

Best,
Ista

On Thu, Jul 6, 2017 at 4:06 PM, Gang Chen <gangchen6 at gmail.com> wrote:
> Suppose that we have the following dataframe:
>
> set.seed(1)
> (tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
> TRUE), R2 = sample(LETTERS[1:5], 10, replace = TRUE)))
>
>     x R1 R2
> 1   1  B  B
> 2   2  B  A
> 3   3  C  D
> 4   4  E  B
> 5   5  B  D
> 6   6  E  C
> 7   7  E  D
> 8   8  D  E
> 9   9  D  B
> 10 10  A  D
>
> I want to do the following: if the difference between the level index
> of factor R1 and that of factor R2 is an odd number, the levels of the
> two factors need to be switched between them, which can be performed
> through the following code:
>
> for(ii in 1:dim(tmp)[1]) {
>    kk <- which(levels(tmp$R2) %in% tmp[ii,'R2'], arr.ind = TRUE) -
> which(levels(tmp$R1) %in% tmp[ii,'R1'], arr.ind = TRUE)
>    if(kk%%2!=0) { # swap the their levels between the two factors
>       qq <- tmp[ii,]$R1
>       tmp[ii,]$R1 <- tmp[ii,]$R2
>       tmp[ii,]$R2 <- qq
>   }
> }
>
> More concise and efficient way to do this?
>
> Thanks,
> Gang
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jfhenson1 at gmail.com  Thu Jul  6 23:21:01 2017
From: jfhenson1 at gmail.com (James Henson)
Date: Thu, 6 Jul 2017 16:21:01 -0500
Subject: [R] Bayes Factor
Message-ID: <CABPq8JMkPs7=+Ssbuz6MW6QNwZ0zLgnGi+PLDRzgtkA-TEaOrg@mail.gmail.com>

Hello R Community;

Just posted a question about Bayes Factor.  But, just answered my own question.
What is needed is to convert a 'dplyr' data frame into a standard data frame.
competition2 <- data.frame(competition), where 'competition' is a
'dplyr' data frame with the following class structure.
[1] "tbl_df"  "tbl"  "data.frame".

Best regards,
James


From macqueen1 at llnl.gov  Fri Jul  7 00:23:15 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Thu, 6 Jul 2017 22:23:15 +0000
Subject: [R] Convert date to continuous variable in R
In-Reply-To: <CAG6S0OnaFQn5hukvNFnnKhOsxRUuGvymrKXxL9t0xK3H=6OQ0A@mail.gmail.com>
References: <CAG6S0O=5QEK=7d2wr5uudCDDXfqXAgbhQaaYkoj63kPw4tPAWQ@mail.gmail.com>
 <95C9BA9C-6DDB-412D-AD61-28B44BCC1F23@llnl.gov>
 <CAG6S0OnaFQn5hukvNFnnKhOsxRUuGvymrKXxL9t0xK3H=6OQ0A@mail.gmail.com>
Message-ID: <FA0251D7-DDDC-4666-8B8D-F17B11B3953A@llnl.gov>

Looks good, but there are some ways in which I think you?re making it more complicated than necessary.
Two calls to plot(), with plot.new() in between, is definitely not needed.
Recalculating LAI_simulation$Date three times should not be needed.


## create example data
day0 <- as.Date('2009-10-7')
mydat <- data.frame( date=seq(day0, by=1, len=6*365) , y=runif(6*365)  )

## plot
day0fmt <- format(day0, '%b %d, %Y')
daynum <- as.integer(mydat$date)
xn <- seq(0, length(daynum)+200, by=200)

plot(y ~ date, data=mydat, xaxt='n', xlab=paste('Days since',day0fmt) , ylab='My data')
axis.Date(3, mydat$date)
axis(1, at=day0+xn, lab=xn)
mtext('Year', line=2.5)


-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062


On 7/6/17, 7:42 AM, "Ahmed Attia" <ahmedatia80 at gmail.com> wrote:

    Thanks it worked for me. I wanted to plot days since planting on
    x-axis 1 and years on x-axis 3.
    
    LAI_simulation$Date <- as.Date( LAI_simulation$Date, '%Y/%m/%d')
    LAI_simulation$Date <- as.integer(LAI_simulation$Date - as.Date("2009-10-07"))
    plot(LAI~Date,data=LAI_simulation,xlab="Days since Oct, 7,
    2009",cex=0.3,cex.lab=1.2,xaxt="n",xaxs="i",yaxs="i",ylim=c(0,6))
    axis(1,xlim=c(0,2200),xaxp=c(0,2200,11),cex.lab=1.2,cex.axis=0.8,xaxs="i")
    LAI_simulation$Date<- as.Date(LAI_simulation$Date, origin="2009-10-07")
    par(new=TRUE)
    plot(LAI~Date, data=LAI_simulation,xlab="",ylab="",
         xaxt="n",type="p",cex=0.2,col=1,xaxs="i",yaxs="i",ylim=c(0,6))
    axis.Date(side=3, at=seq(min(LAI_simulation$Date),
    max(LAI_simulation$Date),by="year"), format="%Y",
    xlab="xxx",cex.axis=0.9)
    mtext("years",side=3,line=3,cex.lab=1.2)
    Ahmed Attia, Ph.D.
    Agronomist & Soil Scientist
    
    
    
    
    
    
    On Wed, Jul 5, 2017 at 4:52 PM, MacQueen, Don <macqueen1 at llnl.gov> wrote:
    > Not entirely sure what you really want the axis on the top to look like, but here's what I'd be likely to do:
    >
    > ## note, correction to format; in your example data year comes last
    > LAI_simulation$Date <- as.Date( LAI_simulation$Date, '%m/%d/%Y')
    >
    > plot(LAI~Date, data=LAI_simulation)
    >
    > simdate <- as.numeric( LAI_simulation$Date - as.Date('2009-10-7') )
    > ## or
    > simdate <- difftime( LAI_simulation$Date, as.Date('2009-10-7') )
    >
    > ## then
    > axis(3, pretty(simdate) )
    >
    >
    > Converting LAI_simulation$Date to numeric, and then applying axis.Date() to it makes no sense to me, since the elapsed numbers of days are not dates.
    >
    > --
    > Don MacQueen
    >
    > Lawrence Livermore National Laboratory
    > 7000 East Ave., L-627
    > Livermore, CA 94550
    > 925-423-1062
    >
    >
    > On 7/5/17, 11:23 AM, "Ahmed Attia" <ahmedatia80 at gmail.com> wrote:
    >
    >     How can I convert date to continuous variable staring from 1. I tried
    >     as.numeric but R starts counting from default January 1, 1970 while my data
    >     start Oct 7, 2009.
    >
    >     I need to do this conversion to plot the date on two x-axes (1 and 3).
    >     Ex;
    >     Date LAI
    >     10/7/2009 0
    >     10/8/2009 0.004173
    >     10/9/2009 0.009997
    >     10/10/2009 0.009998
    >     10/11/2009 0.009999
    >     10/12/2009 0.009999
    >     10/13/2009 0.009999
    >     10/14/2009 0.009999
    >     10/15/2009 0.009998
    >     10/16/2009 0.009998
    >     10/17/2009 0.009998
    >     10/18/2009 0.009998
    >     10/19/2009 0.009998
    >     10/20/2009 0.009998
    >
    >     LAI_simulation$Date <- as.Date( LAI_simulation$Date, '%Y/%m/%d')
    >     plot(LAI~Date, data=LAI_simulation)
    >     LAI_simulation$Date<- as.numeric(LAI_simulation$Date,origin="2009-10-07")
    >     #R does not see the origin
    >     axis.Date(side=3,at=LAI_simulation$Date)
    >
    >
    >
    >
    >     Ahmed Attia, Ph.D.
    >     Agronomist & Soil Scientist
    >
    >         [[alternative HTML version deleted]]
    >
    >     ______________________________________________
    >     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >     https://stat.ethz.ch/mailman/listinfo/r-help
    >     PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >     and provide commented, minimal, self-contained, reproducible code.
    >
    >
    


From gangchen6 at gmail.com  Fri Jul  7 00:54:13 2017
From: gangchen6 at gmail.com (Gang Chen)
Date: Thu, 6 Jul 2017 18:54:13 -0400
Subject: [R] Efficient swapping
In-Reply-To: <CA+vqiLH=DqFDBmKgGx=LHN93N5QpZOb-40F53GJn8w76iTOVvg@mail.gmail.com>
References: <CAHmzXO5=E+1RmmYzkEAMJxC58m6+=8UpvyTm8PbH-M=VSu4Czw@mail.gmail.com>
 <CA+vqiLH=DqFDBmKgGx=LHN93N5QpZOb-40F53GJn8w76iTOVvg@mail.gmail.com>
Message-ID: <CAHmzXO5r_SunZF2waWUvPZ-wey7V2X-pX-DxcShyko4TpmseKw@mail.gmail.com>

Thanks a lot, Ista! I really appreciate it.

How about a slightly different case as the following:

set.seed(1)
(tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
 TRUE), R2 = sample(LETTERS[2:6], 10, replace = TRUE)))

   x R1 R2
   1  C  B
   2  B  B
   3  C  E
   4  E  C
   5  E  B
   6  D  E
   7  E  E
   8  D  F
   9  C  D
  10  A  E

Notice that the factor levels between the two factors, R1 and R2,
slide by one level; that is, factor R1 does not have level F while
factor R2 does not have level A. I want to swap the factor levels
based on the combined levels of the two factors as shown below:

tl <- unique(c(levels(tmp$R1), levels(tmp$R2)))
for(ii in 1:dim(tmp)[1]) {
   kk <- which(tl %in% tmp[ii,'R2'], arr.ind = TRUE) - which(tl %in%
      tmp[ii,'R1'], arr.ind = TRUE)
   if(kk%%2!=0) { # swap the their levels between the two factors
      qq <- tmp[ii,]$R1
      tmp[ii,]$R1 <- tmp[ii,]$R2
      tmp[ii,]$R2 <- qq
  }
}

How to go about this case? Thanks!


On Thu, Jul 6, 2017 at 5:16 PM, Ista Zahn <istazahn at gmail.com> wrote:
> How about
>
> foo <- with(list(r1 = tmp$R1,
>                  r2 = tmp$R2,
>                  swapme = (as.numeric(tmp$R1) - as.numeric(tmp$R2)) %% 2 != 0),
> {
>     tmp[swapme, "R1"] <- r2[swapme]
>     tmp[swapme, "R2"] <- r1[swapme]
>     tmp
> })
>
> Best,
> Ista
>
> On Thu, Jul 6, 2017 at 4:06 PM, Gang Chen <gangchen6 at gmail.com> wrote:
>> Suppose that we have the following dataframe:
>>
>> set.seed(1)
>> (tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
>> TRUE), R2 = sample(LETTERS[1:5], 10, replace = TRUE)))
>>
>>     x R1 R2
>> 1   1  B  B
>> 2   2  B  A
>> 3   3  C  D
>> 4   4  E  B
>> 5   5  B  D
>> 6   6  E  C
>> 7   7  E  D
>> 8   8  D  E
>> 9   9  D  B
>> 10 10  A  D
>>
>> I want to do the following: if the difference between the level index
>> of factor R1 and that of factor R2 is an odd number, the levels of the
>> two factors need to be switched between them, which can be performed
>> through the following code:
>>
>> for(ii in 1:dim(tmp)[1]) {
>>    kk <- which(levels(tmp$R2) %in% tmp[ii,'R2'], arr.ind = TRUE) -
>> which(levels(tmp$R1) %in% tmp[ii,'R1'], arr.ind = TRUE)
>>    if(kk%%2!=0) { # swap the their levels between the two factors
>>       qq <- tmp[ii,]$R1
>>       tmp[ii,]$R1 <- tmp[ii,]$R2
>>       tmp[ii,]$R2 <- qq
>>   }
>> }
>>
>> More concise and efficient way to do this?
>>
>> Thanks,
>> Gang
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From istazahn at gmail.com  Fri Jul  7 01:43:00 2017
From: istazahn at gmail.com (Ista Zahn)
Date: Thu, 6 Jul 2017 19:43:00 -0400
Subject: [R] Efficient swapping
In-Reply-To: <CAHmzXO5r_SunZF2waWUvPZ-wey7V2X-pX-DxcShyko4TpmseKw@mail.gmail.com>
References: <CAHmzXO5=E+1RmmYzkEAMJxC58m6+=8UpvyTm8PbH-M=VSu4Czw@mail.gmail.com>
 <CA+vqiLH=DqFDBmKgGx=LHN93N5QpZOb-40F53GJn8w76iTOVvg@mail.gmail.com>
 <CAHmzXO5r_SunZF2waWUvPZ-wey7V2X-pX-DxcShyko4TpmseKw@mail.gmail.com>
Message-ID: <CA+vqiLGdZNDw4cYGN2x9TjMmJM-05X6zyVgTK1bqSuXPnK8NSA@mail.gmail.com>

Untested, but I expect that setting the levels to be the same across the
two factors

levels(tmp$R1) <- levels(tmp$R2) <- LETTERS[1:6]

and proceeding as before should be fine.

Best,
Ista

On Jul 6, 2017 6:54 PM, "Gang Chen" <gangchen6 at gmail.com> wrote:

Thanks a lot, Ista! I really appreciate it.

How about a slightly different case as the following:

set.seed(1)
(tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
 TRUE), R2 = sample(LETTERS[2:6], 10, replace = TRUE)))

   x R1 R2
   1  C  B
   2  B  B
   3  C  E
   4  E  C
   5  E  B
   6  D  E
   7  E  E
   8  D  F
   9  C  D
  10  A  E

Notice that the factor levels between the two factors, R1 and R2,
slide by one level; that is, factor R1 does not have level F while
factor R2 does not have level A. I want to swap the factor levels
based on the combined levels of the two factors as shown below:

tl <- unique(c(levels(tmp$R1), levels(tmp$R2)))
for(ii in 1:dim(tmp)[1]) {
   kk <- which(tl %in% tmp[ii,'R2'], arr.ind = TRUE) - which(tl %in%
      tmp[ii,'R1'], arr.ind = TRUE)
   if(kk%%2!=0) { # swap the their levels between the two factors
      qq <- tmp[ii,]$R1
      tmp[ii,]$R1 <- tmp[ii,]$R2
      tmp[ii,]$R2 <- qq
  }
}

How to go about this case? Thanks!


On Thu, Jul 6, 2017 at 5:16 PM, Ista Zahn <istazahn at gmail.com> wrote:
> How about
>
> foo <- with(list(r1 = tmp$R1,
>                  r2 = tmp$R2,
>                  swapme = (as.numeric(tmp$R1) - as.numeric(tmp$R2)) %% 2
!= 0),
> {
>     tmp[swapme, "R1"] <- r2[swapme]
>     tmp[swapme, "R2"] <- r1[swapme]
>     tmp
> })
>
> Best,
> Ista
>
> On Thu, Jul 6, 2017 at 4:06 PM, Gang Chen <gangchen6 at gmail.com> wrote:
>> Suppose that we have the following dataframe:
>>
>> set.seed(1)
>> (tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
>> TRUE), R2 = sample(LETTERS[1:5], 10, replace = TRUE)))
>>
>>     x R1 R2
>> 1   1  B  B
>> 2   2  B  A
>> 3   3  C  D
>> 4   4  E  B
>> 5   5  B  D
>> 6   6  E  C
>> 7   7  E  D
>> 8   8  D  E
>> 9   9  D  B
>> 10 10  A  D
>>
>> I want to do the following: if the difference between the level index
>> of factor R1 and that of factor R2 is an odd number, the levels of the
>> two factors need to be switched between them, which can be performed
>> through the following code:
>>
>> for(ii in 1:dim(tmp)[1]) {
>>    kk <- which(levels(tmp$R2) %in% tmp[ii,'R2'], arr.ind = TRUE) -
>> which(levels(tmp$R1) %in% tmp[ii,'R1'], arr.ind = TRUE)
>>    if(kk%%2!=0) { # swap the their levels between the two factors
>>       qq <- tmp[ii,]$R1
>>       tmp[ii,]$R1 <- tmp[ii,]$R2
>>       tmp[ii,]$R2 <- qq
>>   }
>> }
>>
>> More concise and efficient way to do this?
>>
>> Thanks,
>> Gang
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/
posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Fri Jul  7 03:09:06 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Thu, 06 Jul 2017 18:09:06 -0700
Subject: [R] Efficient swapping
In-Reply-To: <CA+vqiLGdZNDw4cYGN2x9TjMmJM-05X6zyVgTK1bqSuXPnK8NSA@mail.gmail.com>
References: <CAHmzXO5=E+1RmmYzkEAMJxC58m6+=8UpvyTm8PbH-M=VSu4Czw@mail.gmail.com>
 <CA+vqiLH=DqFDBmKgGx=LHN93N5QpZOb-40F53GJn8w76iTOVvg@mail.gmail.com>
 <CAHmzXO5r_SunZF2waWUvPZ-wey7V2X-pX-DxcShyko4TpmseKw@mail.gmail.com>
 <CA+vqiLGdZNDw4cYGN2x9TjMmJM-05X6zyVgTK1bqSuXPnK8NSA@mail.gmail.com>
Message-ID: <462A7259-361A-4327-BFD1-7D936AFE8BDA@dcn.davis.ca.us>

No, that would remap B to A. Convert to character before doing this, then back to factors. 
-- 
Sent from my phone. Please excuse my brevity.

On July 6, 2017 4:43:00 PM PDT, Ista Zahn <istazahn at gmail.com> wrote:
>Untested, but I expect that setting the levels to be the same across
>the
>two factors
>
>levels(tmp$R1) <- levels(tmp$R2) <- LETTERS[1:6]
>
>and proceeding as before should be fine.
>
>Best,
>Ista
>
>On Jul 6, 2017 6:54 PM, "Gang Chen" <gangchen6 at gmail.com> wrote:
>
>Thanks a lot, Ista! I really appreciate it.
>
>How about a slightly different case as the following:
>
>set.seed(1)
>(tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
> TRUE), R2 = sample(LETTERS[2:6], 10, replace = TRUE)))
>
>   x R1 R2
>   1  C  B
>   2  B  B
>   3  C  E
>   4  E  C
>   5  E  B
>   6  D  E
>   7  E  E
>   8  D  F
>   9  C  D
>  10  A  E
>
>Notice that the factor levels between the two factors, R1 and R2,
>slide by one level; that is, factor R1 does not have level F while
>factor R2 does not have level A. I want to swap the factor levels
>based on the combined levels of the two factors as shown below:
>
>tl <- unique(c(levels(tmp$R1), levels(tmp$R2)))
>for(ii in 1:dim(tmp)[1]) {
>   kk <- which(tl %in% tmp[ii,'R2'], arr.ind = TRUE) - which(tl %in%
>      tmp[ii,'R1'], arr.ind = TRUE)
>   if(kk%%2!=0) { # swap the their levels between the two factors
>      qq <- tmp[ii,]$R1
>      tmp[ii,]$R1 <- tmp[ii,]$R2
>      tmp[ii,]$R2 <- qq
>  }
>}
>
>How to go about this case? Thanks!
>
>
>On Thu, Jul 6, 2017 at 5:16 PM, Ista Zahn <istazahn at gmail.com> wrote:
>> How about
>>
>> foo <- with(list(r1 = tmp$R1,
>>                  r2 = tmp$R2,
>>                  swapme = (as.numeric(tmp$R1) - as.numeric(tmp$R2))
>%% 2
>!= 0),
>> {
>>     tmp[swapme, "R1"] <- r2[swapme]
>>     tmp[swapme, "R2"] <- r1[swapme]
>>     tmp
>> })
>>
>> Best,
>> Ista
>>
>> On Thu, Jul 6, 2017 at 4:06 PM, Gang Chen <gangchen6 at gmail.com>
>wrote:
>>> Suppose that we have the following dataframe:
>>>
>>> set.seed(1)
>>> (tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
>>> TRUE), R2 = sample(LETTERS[1:5], 10, replace = TRUE)))
>>>
>>>     x R1 R2
>>> 1   1  B  B
>>> 2   2  B  A
>>> 3   3  C  D
>>> 4   4  E  B
>>> 5   5  B  D
>>> 6   6  E  C
>>> 7   7  E  D
>>> 8   8  D  E
>>> 9   9  D  B
>>> 10 10  A  D
>>>
>>> I want to do the following: if the difference between the level
>index
>>> of factor R1 and that of factor R2 is an odd number, the levels of
>the
>>> two factors need to be switched between them, which can be performed
>>> through the following code:
>>>
>>> for(ii in 1:dim(tmp)[1]) {
>>>    kk <- which(levels(tmp$R2) %in% tmp[ii,'R2'], arr.ind = TRUE) -
>>> which(levels(tmp$R1) %in% tmp[ii,'R1'], arr.ind = TRUE)
>>>    if(kk%%2!=0) { # swap the their levels between the two factors
>>>       qq <- tmp[ii,]$R1
>>>       tmp[ii,]$R1 <- tmp[ii,]$R2
>>>       tmp[ii,]$R2 <- qq
>>>   }
>>> }
>>>
>>> More concise and efficient way to do this?
>>>
>>> Thanks,
>>> Gang
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/
>posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From yarmi1224 at hotmail.com  Fri Jul  7 03:55:39 2017
From: yarmi1224 at hotmail.com (=?big5?B?o2Mgoag=?=)
Date: Fri, 7 Jul 2017 01:55:39 +0000
Subject: [R] How does  findAssocs() calculate the correlation value ??
Message-ID: <HK2PR0301MB1187F028655B670E7D431271A4AA0@HK2PR0301MB1187.apcprd03.prod.outlook.com>

hi:

I want to know the math behind the "tm" package findAssocs().

I have found that someone had asked the question before, and have a good explanation by Rick.

?]http://r.789695.n4.nabble.com/findAssocs-td3845751.html?^


But I still don't understand how to calculate the correlation value between the two vectors.


For example:

# Correlation word2 with word3

   cor(c(0,1,1,1,1),c(0,0,1,1,1))
   [1] 0.6123724


How does it caculate  cor(c(0,1,1,1,1),c(0,0,1,1,1)) to get 0.6123724 ?


Eva

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Fri Jul  7 04:57:41 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Fri, 7 Jul 2017 14:57:41 +1200
Subject: [R] [FORGED] How does findAssocs() calculate the correlation
 value ??
In-Reply-To: <HK2PR0301MB1187F028655B670E7D431271A4AA0@HK2PR0301MB1187.apcprd03.prod.outlook.com>
References: <HK2PR0301MB1187F028655B670E7D431271A4AA0@HK2PR0301MB1187.apcprd03.prod.outlook.com>
Message-ID: <af73e7ef-3e00-49af-4590-1b32cafc2ea3@auckland.ac.nz>

On 07/07/17 13:55, ? ? wrote:
> hi:
> 
> I want to know the math behind the "tm" package findAssocs().
> 
> I have found that someone had asked the question before, and have a good explanation by Rick.
> 
> ?]http://r.789695.n4.nabble.com/findAssocs-td3845751.html?^
> 
> 
> But I still don't understand how to calculate the correlation value between the two vectors.
> 
> 
> For example:
> 
> # Correlation word2 with word3
> 
>     cor(c(0,1,1,1,1),c(0,0,1,1,1))
>     [1] 0.6123724
> 
> 
> How does it caculate  cor(c(0,1,1,1,1),c(0,0,1,1,1)) to get 0.6123724 ?

Look in any first year statistics text for the definition of correlation.

cheers,

Rolf Turner


-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From peter.anthoni at kit.edu  Fri Jul  7 10:42:18 2017
From: peter.anthoni at kit.edu (Anthoni, Peter (IMK))
Date: Fri, 7 Jul 2017 08:42:18 +0000
Subject: [R] Efficient swapping
In-Reply-To: <CAHmzXO5r_SunZF2waWUvPZ-wey7V2X-pX-DxcShyko4TpmseKw@mail.gmail.com>
References: <CAHmzXO5=E+1RmmYzkEAMJxC58m6+=8UpvyTm8PbH-M=VSu4Czw@mail.gmail.com>
 <CA+vqiLH=DqFDBmKgGx=LHN93N5QpZOb-40F53GJn8w76iTOVvg@mail.gmail.com>
 <CAHmzXO5r_SunZF2waWUvPZ-wey7V2X-pX-DxcShyko4TpmseKw@mail.gmail.com>
Message-ID: <1DC90A0A-6EEC-49C8-92C5-C9B8320BD5B3@kit.edu>

how about gdata functions?

set.seed(1)
(tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace = TRUE), R2 = sample(LETTERS[2:6], 10, replace = TRUE)))
tmp.orig=tmp

library(gdata)
bigMap=mapLevels(x=list(factor(tmp[,"R1"]),factor(tmp[,"R2"])),combine = T,codes=FALSE)
mapLevels(tmp[,"R1"]) = bigMap
mapLevels(tmp[,"R2"]) = bigMap
dd=as.integer(tmp[,"R2"])-as.integer(tmp[,"R1"])
odd=dd%%2!=0
swap=tmp[odd,"R2"]
tmp[odd,"R2"]=tmp[odd,"R1"]
tmp[odd,"R1"]=swap

cbind(tmp,odd,tmp.orig)

cheers
Peter



> On 7. Jul 2017, at 00:54, Gang Chen <gangchen6 at gmail.com> wrote:
> 
> Thanks a lot, Ista! I really appreciate it.
> 
> How about a slightly different case as the following:
> 
> set.seed(1)
> (tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
> TRUE), R2 = sample(LETTERS[2:6], 10, replace = TRUE)))
> 
>   x R1 R2
>   1  C  B
>   2  B  B
>   3  C  E
>   4  E  C
>   5  E  B
>   6  D  E
>   7  E  E
>   8  D  F
>   9  C  D
>  10  A  E
> 
> Notice that the factor levels between the two factors, R1 and R2,
> slide by one level; that is, factor R1 does not have level F while
> factor R2 does not have level A. I want to swap the factor levels
> based on the combined levels of the two factors as shown below:
> 
> tl <- unique(c(levels(tmp$R1), levels(tmp$R2)))
> for(ii in 1:dim(tmp)[1]) {
>   kk <- which(tl %in% tmp[ii,'R2'], arr.ind = TRUE) - which(tl %in%
>      tmp[ii,'R1'], arr.ind = TRUE)
>   if(kk%%2!=0) { # swap the their levels between the two factors
>      qq <- tmp[ii,]$R1
>      tmp[ii,]$R1 <- tmp[ii,]$R2
>      tmp[ii,]$R2 <- qq
>  }
> }
> 
> How to go about this case? Thanks!
> 
> 
> On Thu, Jul 6, 2017 at 5:16 PM, Ista Zahn <istazahn at gmail.com> wrote:
>> How about
>> 
>> foo <- with(list(r1 = tmp$R1,
>>                 r2 = tmp$R2,
>>                 swapme = (as.numeric(tmp$R1) - as.numeric(tmp$R2)) %% 2 != 0),
>> {
>>    tmp[swapme, "R1"] <- r2[swapme]
>>    tmp[swapme, "R2"] <- r1[swapme]
>>    tmp
>> })
>> 
>> Best,
>> Ista
>> 
>> On Thu, Jul 6, 2017 at 4:06 PM, Gang Chen <gangchen6 at gmail.com> wrote:
>>> Suppose that we have the following dataframe:
>>> 
>>> set.seed(1)
>>> (tmp <- data.frame(x = 1:10, R1 = sample(LETTERS[1:5], 10, replace =
>>> TRUE), R2 = sample(LETTERS[1:5], 10, replace = TRUE)))
>>> 
>>>    x R1 R2
>>> 1   1  B  B
>>> 2   2  B  A
>>> 3   3  C  D
>>> 4   4  E  B
>>> 5   5  B  D
>>> 6   6  E  C
>>> 7   7  E  D
>>> 8   8  D  E
>>> 9   9  D  B
>>> 10 10  A  D
>>> 
>>> I want to do the following: if the difference between the level index
>>> of factor R1 and that of factor R2 is an odd number, the levels of the
>>> two factors need to be switched between them, which can be performed
>>> through the following code:
>>> 
>>> for(ii in 1:dim(tmp)[1]) {
>>>   kk <- which(levels(tmp$R2) %in% tmp[ii,'R2'], arr.ind = TRUE) -
>>> which(levels(tmp$R1) %in% tmp[ii,'R1'], arr.ind = TRUE)
>>>   if(kk%%2!=0) { # swap the their levels between the two factors
>>>      qq <- tmp[ii,]$R1
>>>      tmp[ii,]$R1 <- tmp[ii,]$R2
>>>      tmp[ii,]$R2 <- qq
>>>  }
>>> }
>>> 
>>> More concise and efficient way to do this?
>>> 
>>> Thanks,
>>> Gang
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dhiv.shreya at gmail.com  Fri Jul  7 11:29:13 2017
From: dhiv.shreya at gmail.com (Dhivya Narayanasamy)
Date: Fri, 7 Jul 2017 14:59:13 +0530
Subject: [R] Scoring and Ranking Methods
Message-ID: <CACmggQtXcqxaPG7yyu8qJxF1-iU9kvg8bwN3QLWZN8qCLegzNA@mail.gmail.com>

Hi,

I am doing predictive modelling of Multivariate Time series Data of a Motor
in R using various models such as Arima, H2O.Randomforest, glmnet, lm and
few other models.

I created a function to select a model of our choice and do prediction.

Model1 <- function(){
  ..
  return()
}
Model2 <- function(){
  ...
  return()
}
 Model3 <- function(){
  ...
  return()
}
main <- function(n){
  if(n == 1) {
   Model1()
  }
  else if(n == 2){
    Model2()
  }
  else if(n == 3){
    Model3()
  }}
Now I am supposed to automate these models which gives RMSE and MAPE of
each model. I would like to provide scores (eg. out of 5) for each model
based on the performance. For example, if Arima gives a low RMSE than other
models, it will be scored high and the second lowest RMSE model will score
a less than Arima and so on.

And every time i run those models with different input Data [motor2, motor3
..], it must give the mean score of a model. what I mean to say is,

1. for motor1 it will give scores of each model, let's say *s1*.
2. for motor2 run it give scores of each model, and let's call it *s2*.
And i want a mean score of that model every time i run it with different
input. It is more like scoring and ranking method.

Are there any methods or packages in R that can give a glimpse of how it is
done? or any examples? Any suggestions would be very helpful.

Thank you.
Dhivya

	[[alternative HTML version deleted]]


From dais2 at rpi.edu  Thu Jul  6 23:19:47 2017
From: dais2 at rpi.edu (Dai, Shengyu)
Date: Thu, 06 Jul 2017 17:19:47 -0400
Subject: [R] R loop function in Tableau
Message-ID: <15947CD3-CD7B-4BB6-A994-D49D514DF0DE@rpi.edu>

Hi R helpers,

 

I hope this email finds you well.

 

I am having trouble with R loop function in Tableau. Please see the attachment of a simple dataset. The problem is to test whether the value of columns is match.

 

Because Tableau do not have iteration function, I coded ?if statement? in Tableau to realize the function, which is slow if having huge amount of data. I wonder to integrate Tableau with R studio to realize this functionality.

 

I did not find too much useful information online and I am asking helps for any examples of related low-level data calculation.

 

Thank you very much. Your helps and supports are really appreciated!

 

Best,

 

--

 

Shengyu (Freddy) Dai

Master of Science in Business Analytics

Lally School of Management

Rensselaer Polytechnic Institute

Mobile: (513)328-5659

 


From jrkrideau at yahoo.ca  Fri Jul  7 13:03:51 2017
From: jrkrideau at yahoo.ca (John Kane)
Date: Fri, 7 Jul 2017 11:03:51 +0000
Subject: [R] Factor vs character in a data.frame vs vector
References: <184884580.507511.1499425431478.ref@mail.yahoo.com>
Message-ID: <184884580.507511.1499425431478@mail.yahoo.com>

This is not? serious problem but I just wonder if someone can explain what is happening.
The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.? It's probably something simple that I have read and forgotten but I thought I'd ask.
Thanks

#================================================
dat1 <- data.frame(aa = letters[1:10])
str(dat1)
data.frame':????10 obs. of??1 variable:
 $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
bb = letters[1:10]
str(bb)
chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
#==============================================================


	[[alternative HTML version deleted]]


From marc_schwartz at me.com  Fri Jul  7 16:37:12 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Fri, 7 Jul 2017 09:37:12 -0500
Subject: [R] Factor vs character in a data.frame vs vector
In-Reply-To: <184884580.507511.1499425431478@mail.yahoo.com>
References: <184884580.507511.1499425431478.ref@mail.yahoo.com>
 <184884580.507511.1499425431478@mail.yahoo.com>
Message-ID: <36A7CFEC-57B6-4652-BC93-AB9E0EED14AF@me.com>


> On Jul 7, 2017, at 6:03 AM, John Kane via R-help <r-help at r-project.org> wrote:
> 
> This is not  serious problem but I just wonder if someone can explain what is happening.
> The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.  It's probably something simple that I have read and forgotten but I thought I'd ask.
> Thanks
> 
> #================================================
> dat1 <- data.frame(aa = letters[1:10])
> str(dat1)
> data.frame':    10 obs. of  1 variable:
> $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
> bb = letters[1:10]
> str(bb)
> chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
> #==============================================================
> 


See the 'stringsAsFactors' argument in ?data.frame.

dat1 <- data.frame(aa = letters[1:10], stringsAsFactors = FALSE)

> str(dat1)
'data.frame':	10 obs. of  1 variable:
 $ aa: chr  "a" "b" "c" "d" ...


Regards,

Marc Schwartz


From dwinsemius at comcast.net  Fri Jul  7 17:47:57 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 7 Jul 2017 08:47:57 -0700
Subject: [R] Scoring and Ranking Methods
In-Reply-To: <CACmggQtXcqxaPG7yyu8qJxF1-iU9kvg8bwN3QLWZN8qCLegzNA@mail.gmail.com>
References: <CACmggQtXcqxaPG7yyu8qJxF1-iU9kvg8bwN3QLWZN8qCLegzNA@mail.gmail.com>
Message-ID: <B6A35831-5E7D-407A-BB82-504F33E0F488@comcast.net>


> On Jul 7, 2017, at 2:29 AM, Dhivya Narayanasamy <dhiv.shreya at gmail.com> wrote:
> 
> Hi,
> 
> I am doing predictive modelling of Multivariate Time series Data of a Motor
> in R using various models such as Arima, H2O.Randomforest, glmnet, lm and
> few other models.
> 
> I created a function to select a model of our choice and do prediction.
> 
> Model1 <- function(){
>  ..
>  return()
> }

That looks like a prescription for serious disappointment. I seriously doubt that you have done any testing using similar code. You would have created a function that returns NULL. I get the sense that you need to study and work through the examples in the "Introduction to R" document.



> Model2 <- function(){
>  ...
>  return()
> }
> Model3 <- function(){
>  ...
>  return()
> }
> main <- function(n){
>  if(n == 1) {
>   Model1()
>  }
>  else if(n == 2){
>    Model2()
>  }
>  else if(n == 3){
>    Model3()
>  }}
> Now I am supposed to automate these models which gives RMSE and MAPE of
> each model. I would like to provide scores (eg. out of 5) for each model
> based on the performance. For example, if Arima gives a low RMSE than other
> models, it will be scored high and the second lowest RMSE model will score
> a less than Arima and so on.
> 
> And every time i run those models with different input Data [motor2, motor3
> ..], it must give the mean score of a model. what I mean to say is,
> 
> 1. for motor1 it will give scores of each model, let's say *s1*.
> 2. for motor2 run it give scores of each model, and let's call it *s2*.
> And i want a mean score of that model every time i run it with different
> input. It is more like scoring and ranking method.
> 
> Are there any methods or packages in R that can give a glimpse of how it is
> done? or any examples? Any suggestions would be very helpful.

The 'switch'-function can dispatch to different functions on the basis of the value of an indicator variable. 


> 
> Thank you.
> Dhivya
> 
> 	[[alternative HTML version deleted]]

Please read the Posting Guide. Rhelp is a plain text mailing list.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From dwinsemius at comcast.net  Fri Jul  7 17:57:50 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Fri, 7 Jul 2017 08:57:50 -0700
Subject: [R] R loop function in Tableau
In-Reply-To: <15947CD3-CD7B-4BB6-A994-D49D514DF0DE@rpi.edu>
References: <15947CD3-CD7B-4BB6-A994-D49D514DF0DE@rpi.edu>
Message-ID: <5B17A446-46C5-4371-94D3-A5C9A7CA6E7B@comcast.net>


> On Jul 6, 2017, at 2:19 PM, Dai, Shengyu <dais2 at rpi.edu> wrote:
> 
> Hi R helpers,
> 
> 
> 
> I hope this email finds you well.
> 
> 
> 
> I am having trouble with R loop function in Tableau.
> 

There is no "R loop function". (There is an R `for`-function.) If you are having trouble with code then it should be provided. If the problem is with the Tableau code then this is the wrong place. Tableau is not either free or open source. You would in that case need to contact Tableau or get assistance from your academic institution.

>  Please see the attachment of a simple dataset.

No data attached. Probably scrubbed by the mail server. Any data needs to be a .txt file.

> The problem is to test whether the value of columns is match.

There is a `match` function. It's vectorized, so may not need to be wrapped with a function that would provide looping.

> 
> Because Tableau do not have iteration function, I coded ?if statement? in Tableau to realize the function, which is slow if having huge amount of data. I wonder to integrate Tableau with R studio to realize this functionality.
> 
> 
> 
> I did not find too much useful information online and I am asking helps for any examples of related low-level data calculation.

That is then the fault of Tableau (if true), since there is a huge amount of online documentation for R. The Rhelp Archives and StackOverflow have thousands of worked examples of "low-level data calculation". I suspect with estimated probability approaching unity that StackOverflow will have questions tagged jointly with [r] and [tableau].


> 
> Thank you very much. Your helps and supports are really appreciated!
> 
> 
> 
> Best,
> 
> 
> 
> --
> 
> 
> 
> Shengyu (Freddy) Dai
> 
> Master of Science in Business Analytics
> 
> Lally School of Management
> 
> Rensselaer Polytechnic Institute
> 
> Mobile: (513)328-5659
> 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From frederik at ofb.net  Fri Jul  7 18:17:34 2017
From: frederik at ofb.net (frederik at ofb.net)
Date: Fri, 7 Jul 2017 09:17:34 -0700
Subject: [R] [Rd] italic font on cairo devices in R 3.4
In-Reply-To: <2093e0fa-f923-0822-60d2-7509d38224af@gmx.net>
 <597b749b-47f0-1d00-1fe3-907f927c6fdb@gmx.net>
Message-ID: <20170707161734.GA833@ofb.net>

Hi Ilia,

I'm running Arch Linux, R 3.4.0.

Here's my test.pdf from your minimal example: https://ptpb.pw/HxsA.pdf

It doesn't look pixelated to me...

Here's a post that I wrote when I solved my last font problem in R,
almost 2 years ago:

https://stackoverflow.com/a/40940331/5087283

I had to install some Microsoft font packages, which is sad, because
there are some perfectly good free fonts that R could be using
instead. It could be considered a bug that R requires Microsoft fonts,
at least by default. However, does this even fix your problem? I.e. if
you install the corresponding Debian Microsoft font packages, does the
text appear anti-aliased?

Frederick

On Fri, Jul 07, 2017 at 10:30:46AM +0200, Ilia Kats wrote:
> [cross-post from R-help]
> 
> Hi all,
> 
> I have the following problem: Since R 3.4.0, italic fonts rendered on Cairo
> devices appear pixelated. Here's a minimal example:
> cairo_pdf('test.pdf')
> plot(1:10, ylab=expression(italic(test)))
> dev.off()
> 
> The same problem occurs with bolditalic, but not bold. I am using Debian
> Stretch. Several friends tried the same on their machines, another Debian
> machine has the same problem. On MacOSX the output was not pixelated, but it
> wasn't italic either. Ubuntu 16.04.2 xenial works fine. My impression is
> that R somehow can't find the proper font to use and falls back to something
> weird. Ideas?
> 
> Note that I'm not subscribed to the list, so please CC me in replies.
> 
> Cheers, Ilia
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From frederik at ofb.net  Fri Jul  7 19:28:44 2017
From: frederik at ofb.net (frederik at ofb.net)
Date: Fri, 7 Jul 2017 10:28:44 -0700
Subject: [R] [Rd] italic font on cairo devices in R 3.4
In-Reply-To: <815d1e56-2fb9-1f7c-aa32-b15769cc72c8@gmx.net>
References: <20170707161734.GA833@ofb.net>
 <815d1e56-2fb9-1f7c-aa32-b15769cc72c8@gmx.net>
Message-ID: <20170707172844.GE833@ofb.net>

On Fri, Jul 07, 2017 at 07:08:52PM +0200, Ilia Kats wrote:
> Interesting. I did not have the package installed, but I did at some point
> extract Helvetica from some MacOSX font files and R was using that just fine
> until 3.3. This is how the plot looks in 3.4 (still using Helvetica):
> https://ptpb.pw/HikX.pdf . After removing Helvetica, installing the
> ttf-mscorefonts-installer package, and running fc-cache --force  the plot
> looks like this: https://ptpb.pw/CM8A.pdf

The second plot looks worse, in other words, and the Microsoft fonts
didn't help.

Maybe the Cairo device should be giving better warning messages.

Anyway it sounds like you are describing a regression so maybe someone
can track down the commit that created this problem.

Thanks,

Frederick


> Also note that the standard pdf device works fine: https://ptpb.pw/3Ml1.pdf
> , it's just the cairo devices (both pdf and svg) that have the issue.
> Unfortunately I need to use cairo_pdf due to unicode characters in axis
> labels.
> 
> Cheers, Ilia
> 
> 
> -------- Original Message --------
> Subject: Re: [Rd] italic font on cairo devices in R 3.4
> Date: 2017-07-07 18:17:34 +0200
> From: frederik
> To: Ilia Kats
> CC: r-devel, r-help
> > Hi Ilia,
> > 
> > I'm running Arch Linux, R 3.4.0.
> > 
> > Here's my test.pdf from your minimal example: https://ptpb.pw/HxsA.pdf
> > 
> > It doesn't look pixelated to me...
> > 
> > Here's a post that I wrote when I solved my last font problem in R,
> > almost 2 years ago:
> > 
> > https://stackoverflow.com/a/40940331/5087283
> > 
> > I had to install some Microsoft font packages, which is sad, because
> > there are some perfectly good free fonts that R could be using
> > instead. It could be considered a bug that R requires Microsoft fonts,
> > at least by default. However, does this even fix your problem? I.e. if
> > you install the corresponding Debian Microsoft font packages, does the
> > text appear anti-aliased?
> > 
> > Frederick
> > 
> > On Fri, Jul 07, 2017 at 10:30:46AM +0200, Ilia Kats wrote:
> > > [cross-post from R-help]
> > > 
> > > Hi all,
> > > 
> > > I have the following problem: Since R 3.4.0, italic fonts rendered on Cairo
> > > devices appear pixelated. Here's a minimal example:
> > > cairo_pdf('test.pdf')
> > > plot(1:10, ylab=expression(italic(test)))
> > > dev.off()
> > > 
> > > The same problem occurs with bolditalic, but not bold. I am using Debian
> > > Stretch. Several friends tried the same on their machines, another Debian
> > > machine has the same problem. On MacOSX the output was not pixelated, but it
> > > wasn't italic either. Ubuntu 16.04.2 xenial works fine. My impression is
> > > that R somehow can't find the proper font to use and falls back to something
> > > weird. Ideas?
> > > 
> > > Note that I'm not subscribed to the list, so please CC me in replies.
> > > 
> > > Cheers, Ilia
> > > 
> > > ______________________________________________
> > > R-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > > 
> 
> -- 
> The first is to ensure your partner understands that nature has root
> privileges - nature doesn't have to make sense.
> -- Telsa Gwynne
>


From mhulesova at gmail.com  Fri Jul  7 18:52:34 2017
From: mhulesova at gmail.com (=?utf-8?B?TWFydGluYSBIdWxlxaFvdsOh?=)
Date: Fri, 7 Jul 2017 16:52:34 +0000
Subject: [R] Beginner s quwry about cfa in lavaan
Message-ID: <HE1PR09MB044320C242C964B3ADB51037BDAA0@HE1PR09MB0443.eurprd09.prod.outlook.com>

Dear all,
I am trying to learn about R. As a Phd student, I would like to use R for Krippendorff s alpha and later for a series of CFA. Is there any good introduction to these kind of analyses, or could you recommend me some tutorials on youtube, for example? I am new to R, so I need something basic , starting from opening the R environment?.
Thank you .
Martina Hulesova

Odesl?no z m?ho Windows Phone

	[[alternative HTML version deleted]]


From ilia-kats at gmx.net  Fri Jul  7 19:08:52 2017
From: ilia-kats at gmx.net (Ilia Kats)
Date: Fri, 7 Jul 2017 19:08:52 +0200
Subject: [R] [Rd] italic font on cairo devices in R 3.4
In-Reply-To: <20170707161734.GA833@ofb.net>
References: <20170707161734.GA833@ofb.net>
Message-ID: <815d1e56-2fb9-1f7c-aa32-b15769cc72c8@gmx.net>

Interesting. I did not have the package installed, but I did at some 
point extract Helvetica from some MacOSX font files and R was using that 
just fine until 3.3. This is how the plot looks in 3.4 (still using 
Helvetica): https://ptpb.pw/HikX.pdf . After removing Helvetica, 
installing the ttf-mscorefonts-installer package, and running fc-cache 
--force  the plot looks like this: https://ptpb.pw/CM8A.pdf

Also note that the standard pdf device works fine: 
https://ptpb.pw/3Ml1.pdf , it's just the cairo devices (both pdf and 
svg) that have the issue. Unfortunately I need to use cairo_pdf due to 
unicode characters in axis labels.

Cheers, Ilia


-------- Original Message --------
Subject: Re: [Rd] italic font on cairo devices in R 3.4
Date: 2017-07-07 18:17:34 +0200
From: frederik
To: Ilia Kats
CC: r-devel, r-help
> Hi Ilia,
>
> I'm running Arch Linux, R 3.4.0.
>
> Here's my test.pdf from your minimal example: https://ptpb.pw/HxsA.pdf
>
> It doesn't look pixelated to me...
>
> Here's a post that I wrote when I solved my last font problem in R,
> almost 2 years ago:
>
> https://stackoverflow.com/a/40940331/5087283
>
> I had to install some Microsoft font packages, which is sad, because
> there are some perfectly good free fonts that R could be using
> instead. It could be considered a bug that R requires Microsoft fonts,
> at least by default. However, does this even fix your problem? I.e. if
> you install the corresponding Debian Microsoft font packages, does the
> text appear anti-aliased?
>
> Frederick
>
> On Fri, Jul 07, 2017 at 10:30:46AM +0200, Ilia Kats wrote:
>> [cross-post from R-help]
>>
>> Hi all,
>>
>> I have the following problem: Since R 3.4.0, italic fonts rendered on Cairo
>> devices appear pixelated. Here's a minimal example:
>> cairo_pdf('test.pdf')
>> plot(1:10, ylab=expression(italic(test)))
>> dev.off()
>>
>> The same problem occurs with bolditalic, but not bold. I am using Debian
>> Stretch. Several friends tried the same on their machines, another Debian
>> machine has the same problem. On MacOSX the output was not pixelated, but it
>> wasn't italic either. Ubuntu 16.04.2 xenial works fine. My impression is
>> that R somehow can't find the proper font to use and falls back to something
>> weird. Ideas?
>>
>> Note that I'm not subscribed to the list, so please CC me in replies.
>>
>> Cheers, Ilia
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>

-- 
The first is to ensure your partner understands that nature has root
privileges - nature doesn't have to make sense.
-- Telsa Gwynne


From bgunter.4567 at gmail.com  Sat Jul  8 01:43:12 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Fri, 7 Jul 2017 16:43:12 -0700
Subject: [R] Beginner s quwry about cfa in lavaan
In-Reply-To: <HE1PR09MB044320C242C964B3ADB51037BDAA0@HE1PR09MB0443.eurprd09.prod.outlook.com>
References: <HE1PR09MB044320C242C964B3ADB51037BDAA0@HE1PR09MB0443.eurprd09.prod.outlook.com>
Message-ID: <CAGxFJbQ3CgCFXLBGsz9e8y=VLw=9gQKTw7CsoDjy6Feu4=HBLA@mail.gmail.com>

Google is your friend.

Also rseek.org

Bert



On Jul 7, 2017 3:48 PM, "Martina Hule?ov?" <mhulesova at gmail.com> wrote:

> Dear all,
> I am trying to learn about R. As a Phd student, I would like to use R for
> Krippendorff s alpha and later for a series of CFA. Is there any good
> introduction to these kind of analyses, or could you recommend me some
> tutorials on youtube, for example? I am new to R, so I need something basic
> , starting from opening the R environment?.
> Thank you .
> Martina Hulesova
>
> Odesl?no z m?ho Windows Phone
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From marc_schwartz at me.com  Sat Jul  8 04:25:42 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Fri, 7 Jul 2017 21:25:42 -0500
Subject: [R] Factor vs character in a data.frame vs vector
In-Reply-To: <595896971.1101053.1499472199840@mail.yahoo.com>
References: <184884580.507511.1499425431478.ref@mail.yahoo.com>
 <184884580.507511.1499425431478@mail.yahoo.com>
 <36A7CFEC-57B6-4652-BC93-AB9E0EED14AF@me.com>
 <595896971.1101053.1499472199840@mail.yahoo.com>
Message-ID: <28B1CAA7-85EA-41A2-9373-172F52773C81@me.com>


> On Jul 7, 2017, at 7:03 PM, John Kane <jrkrideau at yahoo.ca> wrote:
> 
> Thanks Marc.
> It never occurred to me that I would need a ""stringsAsFactors" expression in a data.frame.  I could have sworn I never did before when mocking up some data but clearly I was wrong or there has been a change in R v. 3.4.1 which seems unlikely.


Welcome John.

Going back to the old NEWS files, the 'stringsAsFactors' argument for data.frame() appears in version 2.4.0, which was released on 2006-10-03.

It is possible that somewhere along the way, you set options(stringsAsFactors = FALSE) in your .Rprofile, which would change the default behavior. I know that some folks do that, as they do not like the default coercion to factors, both for data.frame() and for the read.table() family.

Other alternatives would be to use the 'colClasses' argument to explicitly set such vectors to character, or to use I(...) to create AsIs class columns.

Regards,

Marc


> 
> 
> 
> On Friday, July 7, 2017, 10:37:29 AM EDT, Marc Schwartz <marc_schwartz at me.com> wrote:
> 
> 
> 
> > On Jul 7, 2017, at 6:03 AM, John Kane via R-help <r-help at r-project.org> wrote:
> > 
> > This is not  serious problem but I just wonder if someone can explain what is happening.
> > The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.  It's probably something simple that I have read and forgotten but I thought I'd ask.
> > Thanks
> > 
> > #================================================
> > dat1 <- data.frame(aa = letters[1:10])
> > str(dat1)
> > data.frame':    10 obs. of  1 variable:
> > $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
> > bb = letters[1:10]
> > str(bb)
> > chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
> > #==============================================================
> > 
> 
> 
> See the 'stringsAsFactors' argument in ?data.frame.
> 
> dat1 <- data.frame(aa = letters[1:10], stringsAsFactors = FALSE)
> 
> 
> > str(dat1)
> 'data.frame':    10 obs. of  1 variable:
> 
> $ aa: chr  "a" "b" "c" "d" ...
> 
> 
> Regards,
> 
> Marc Schwartz
> 


From jrkrideau at yahoo.ca  Sat Jul  8 02:03:19 2017
From: jrkrideau at yahoo.ca (John Kane)
Date: Sat, 8 Jul 2017 00:03:19 +0000
Subject: [R] Factor vs character in a data.frame vs vector
In-Reply-To: <36A7CFEC-57B6-4652-BC93-AB9E0EED14AF@me.com>
References: <184884580.507511.1499425431478.ref@mail.yahoo.com>
 <184884580.507511.1499425431478@mail.yahoo.com>
 <36A7CFEC-57B6-4652-BC93-AB9E0EED14AF@me.com>
Message-ID: <595896971.1101053.1499472199840@mail.yahoo.com>

Thanks Marc. It never occurred to me that I would need a ""stringsAsFactors" expression in a data.frame.? I could have sworn I never did before when mocking up some data but clearly I was wrong or there has been a change in R v. 3.4.1 which seems unlikely.


On Friday, July 7, 2017, 10:37:29 AM EDT, Marc Schwartz <marc_schwartz at me.com> wrote:


> On Jul 7, 2017, at 6:03 AM, John Kane via R-help <r-help at r-project.org> wrote:
> 
> This is not? serious problem but I just wonder if someone can explain what is happening.
> The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.? It's probably something simple that I have read and forgotten but I thought I'd ask.
> Thanks
> 
> #================================================
> dat1 <- data.frame(aa = letters[1:10])
> str(dat1)
> data.frame':? ? 10 obs. of? 1 variable:
> $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
> bb = letters[1:10]
> str(bb)
> chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
> #==============================================================
> 


See the 'stringsAsFactors' argument in ?data.frame.

dat1 <- data.frame(aa = letters[1:10], stringsAsFactors = FALSE)

> str(dat1)
'data.frame':??? 10 obs. of? 1 variable:
 $ aa: chr? "a" "b" "c" "d" ...


Regards,

Marc Schwartz

	[[alternative HTML version deleted]]


From yixuan.qiu at cos.name  Sat Jul  8 07:11:10 2017
From: yixuan.qiu at cos.name (Yixuan Qiu)
Date: Sat, 8 Jul 2017 01:11:10 -0400
Subject: [R] [Rd] italic font on cairo devices in R 3.4
In-Reply-To: <815d1e56-2fb9-1f7c-aa32-b15769cc72c8@gmx.net>
References: <20170707161734.GA833@ofb.net>
 <815d1e56-2fb9-1f7c-aa32-b15769cc72c8@gmx.net>
Message-ID: <CAFr_7yFTMPers4D9P_vaPW5=R-qvRq0+_LDb56d3TewC7H4uLg@mail.gmail.com>

Hi Ilia,

You may want to have a try of the showtext package
(https://github.com/yixuan/showtext). Below is a quick example:

library(showtext)
showtext.auto()

pdf("test.pdf")
## Use the "sans" font family provided by the showtext package
## font == 3 means italic font face
plot(1, xlab = "Unicode characters: \u00C0 \u00C6 \u00D8",
    family = "sans", font.lab = 3)
dev.off()

## Same for SVG
svg("test.svg")
plot(1, xlab = "Unicode characters: \u00C0 \u00C6 \u00D8",
    family = "sans", font.lab = 3)
dev.off()


Best,
Yixuan


2017-07-07 13:08 GMT-04:00 Ilia Kats <ilia-kats at gmx.net>:
> Interesting. I did not have the package installed, but I did at some point
> extract Helvetica from some MacOSX font files and R was using that just fine
> until 3.3. This is how the plot looks in 3.4 (still using Helvetica):
> https://ptpb.pw/HikX.pdf . After removing Helvetica, installing the
> ttf-mscorefonts-installer package, and running fc-cache --force  the plot
> looks like this: https://ptpb.pw/CM8A.pdf
>
> Also note that the standard pdf device works fine: https://ptpb.pw/3Ml1.pdf
> , it's just the cairo devices (both pdf and svg) that have the issue.
> Unfortunately I need to use cairo_pdf due to unicode characters in axis
> labels.
>
> Cheers, Ilia
>




-- 
Yixuan Qiu <yixuan.qiu at cos.name>
Department of Statistics,
Purdue University


From ilia-kats at gmx.net  Sat Jul  8 09:05:41 2017
From: ilia-kats at gmx.net (Ilia Kats)
Date: Sat, 8 Jul 2017 09:05:41 +0200
Subject: [R] [Rd] italic font on cairo devices in R 3.4
In-Reply-To: <CAFr_7yFTMPers4D9P_vaPW5=R-qvRq0+_LDb56d3TewC7H4uLg@mail.gmail.com>
References: <20170707161734.GA833@ofb.net>
 <815d1e56-2fb9-1f7c-aa32-b15769cc72c8@gmx.net>
 <CAFr_7yFTMPers4D9P_vaPW5=R-qvRq0+_LDb56d3TewC7H4uLg@mail.gmail.com>
Message-ID: <88761c24-1910-e03e-19fc-1344ebe82664@gmx.net>

Cool, thanks, I didn't know about that. I'll give it a try. This still 
doesn't fix the root cause, though.

Cheers, Ilia



-------- Original Message --------
Subject: Re: [R] [Rd] italic font on cairo devices in R 3.4
Date: 2017-07-08 07:11:10 +0200
From: Yixuan Qiu
To: ilia-kats
CC: frederik, r-help
> Hi Ilia,
>
> You may want to have a try of the showtext package
> (https://github.com/yixuan/showtext). Below is a quick example:
>
> library(showtext)
> showtext.auto()
>
> pdf("test.pdf")
> ## Use the "sans" font family provided by the showtext package
> ## font == 3 means italic font face
> plot(1, xlab = "Unicode characters: \u00C0 \u00C6 \u00D8",
>      family = "sans", font.lab = 3)
> dev.off()
>
> ## Same for SVG
> svg("test.svg")
> plot(1, xlab = "Unicode characters: \u00C0 \u00C6 \u00D8",
>      family = "sans", font.lab = 3)
> dev.off()
>
>
> Best,
> Yixuan
>
>
> 2017-07-07 13:08 GMT-04:00 Ilia Kats <ilia-kats at gmx.net>:
>> Interesting. I did not have the package installed, but I did at some point
>> extract Helvetica from some MacOSX font files and R was using that just fine
>> until 3.3. This is how the plot looks in 3.4 (still using Helvetica):
>> https://ptpb.pw/HikX.pdf . After removing Helvetica, installing the
>> ttf-mscorefonts-installer package, and running fc-cache --force  the plot
>> looks like this: https://ptpb.pw/CM8A.pdf
>>
>> Also note that the standard pdf device works fine: https://ptpb.pw/3Ml1.pdf
>> , it's just the cairo devices (both pdf and svg) that have the issue.
>> Unfortunately I need to use cairo_pdf due to unicode characters in axis
>> labels.
>>
>> Cheers, Ilia
>>
>
>
>

-- 
[...] or some clown changed the chips on a board and not its name.
(Don't laugh! Look at the SMC etherpower for that.)
-- from /usr/src/linux/MAINTAINERS


From luigi.biagini at gmail.com  Sat Jul  8 12:11:53 2017
From: luigi.biagini at gmail.com (Luigi Biagini)
Date: Sat, 8 Jul 2017 12:11:53 +0200
Subject: [R] Zero inflated Binomial Lasso
Message-ID: <CA+iG1-6EYsb9ufpo5iY_KpvcHCW2C-rTyHR9++9UsaErjPNXnQ@mail.gmail.com>

Hi R helpers,
I have a problem on a zero-inflated binomial distribution.
I have many regressions and few observations for which I wanted to apply
the LASSO regression.
Is there a package that allows the ZIB-Lasso?
Thank you very much!

	[[alternative HTML version deleted]]


From alaios at yahoo.com  Sat Jul  8 15:12:23 2017
From: alaios at yahoo.com (Alaios)
Date: Sat, 8 Jul 2017 13:12:23 +0000 (UTC)
Subject: [R] scalable and dynamic color bar
References: <1064192022.1328873.1499519543866.ref@mail.yahoo.com>
Message-ID: <1064192022.1328873.1499519543866@mail.yahoo.com>

Hi,I am using rgl to plot 3d graphics. You can find below some executable code.
I would like to add a color bar that scales as the window size scale. The solution I currently have gives a color bar that gets pixelated once you maximize the window.
Can you suggest of alternatives?
ThanksAlex
	[[alternative HTML version deleted]]


From jrkrideau at yahoo.ca  Sat Jul  8 15:46:58 2017
From: jrkrideau at yahoo.ca (John Kane)
Date: Sat, 8 Jul 2017 13:46:58 +0000
Subject: [R] Factor vs character in a data.frame vs vector
In-Reply-To: <28B1CAA7-85EA-41A2-9373-172F52773C81@me.com>
References: <184884580.507511.1499425431478.ref@mail.yahoo.com>
 <184884580.507511.1499425431478@mail.yahoo.com>
 <36A7CFEC-57B6-4652-BC93-AB9E0EED14AF@me.com>
 <595896971.1101053.1499472199840@mail.yahoo.com>
 <28B1CAA7-85EA-41A2-9373-172F52773C81@me.com>
Message-ID: <1946758945.940039.1499521618473@mail.yahoo.com>

Clearly I have been doing something weird. Thanks >It is possible that somewhere along the way, you set options(stringsAsFactors = FALSE)No not in a long time. I found that it was great for any personal work but any time I tried to use someone' else's raw data, say from a text file, it would mess up the data so I regretfully removed it.
I remember reading a about the options(stringsAsFactors = TRUE) decision for read.table() but somehow missed or forgot it applied to a data.frame. It also still strikes me a bit perverse.
Thanks again.



On Friday, July 7, 2017, 10:25:45 PM EDT, Marc Schwartz <marc_schwartz at me.com> wrote:


> On Jul 7, 2017, at 7:03 PM, John Kane <jrkrideau at yahoo.ca> wrote:
> 
> Thanks Marc.
> It never occurred to me that I would need a ""stringsAsFactors" expression in a data.frame.? I could have sworn I never did before when mocking up some data but clearly I was wrong or there has been a change in R v. 3.4.1 which seems unlikely.


Welcome John.

Going back to the old NEWS files, the 'stringsAsFactors' argument for data.frame() appears in version 2.4.0, which was released on 2006-10-03.

It is possible that somewhere along the way, you set options(stringsAsFactors = FALSE) in your .Rprofile, which would change the default behavior. I know that some folks do that, as they do not like the default coercion to factors, both for data.frame() and for the read.table() family.

Other alternatives would be to use the 'colClasses' argument to explicitly set such vectors to character, or to use I(...) to create AsIs class columns.

Regards,

Marc


> 
> 
> 
> On Friday, July 7, 2017, 10:37:29 AM EDT, Marc Schwartz <marc_schwartz at me.com> wrote:
> 
> 
> 
> > On Jul 7, 2017, at 6:03 AM, John Kane via R-help <r-help at r-project.org> wrote:
> > 
> > This is not? serious problem but I just wonder if someone can explain what is happening.
> > The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.? It's probably something simple that I have read and forgotten but I thought I'd ask.
> > Thanks
> > 
> > #================================================
> > dat1 <- data.frame(aa = letters[1:10])
> > str(dat1)
> > data.frame':? ? 10 obs. of? 1 variable:
> > $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
> > bb = letters[1:10]
> > str(bb)
> > chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
> > #==============================================================
> > 
> 
> 
> See the 'stringsAsFactors' argument in ?data.frame.
> 
> dat1 <- data.frame(aa = letters[1:10], stringsAsFactors = FALSE)
> 
> 
> > str(dat1)
> 'data.frame':? ? 10 obs. of? 1 variable:
> 
> $ aa: chr? "a" "b" "c" "d" ...
> 
> 
> Regards,
> 
> Marc Schwartz
> 

	[[alternative HTML version deleted]]


From r.andomdev4+r at gmail.com  Sat Jul  8 10:07:51 2017
From: r.andomdev4+r at gmail.com (Tim Smith)
Date: Sat, 8 Jul 2017 09:07:51 +0100
Subject: [R] CRAN I-MR / Xbar-R / Xbar-S control chart package ?
Message-ID: <CA+HuS5Hcn3HntEqcCNbjnqBMAy32ddGuTB2rxBdfL_W+XSTMtA@mail.gmail.com>

Hi,

I've had a quick look through the package list, and unless I've missed
something, I can't seem to find anything that will do I-MR / Xbar-R /
Xbar-S control charts ?

Assuming there is something out there, can anyone point me in the
right direction ?

Thanks !

TIm


From ruipbarradas at sapo.pt  Sat Jul  8 21:53:36 2017
From: ruipbarradas at sapo.pt (Rui Barradas)
Date: Sat, 08 Jul 2017 20:53:36 +0100
Subject: [R] CRAN I-MR / Xbar-R / Xbar-S control chart package ?
In-Reply-To: <CA+HuS5Hcn3HntEqcCNbjnqBMAy32ddGuTB2rxBdfL_W+XSTMtA@mail.gmail.com>
References: <CA+HuS5Hcn3HntEqcCNbjnqBMAy32ddGuTB2rxBdfL_W+XSTMtA@mail.gmail.com>
Message-ID: <59613840.7040206@sapo.pt>

Hello,

I have no experience with I-MR charts but a google search found package 
qcc. Maybe it's what you're looking for.

Hope this helps,

Rui Barradas

Em 08-07-2017 09:07, Tim Smith escreveu:
> Hi,
>
> I've had a quick look through the package list, and unless I've missed
> something, I can't seem to find anything that will do I-MR / Xbar-R /
> Xbar-S control charts ?
>
> Assuming there is something out there, can anyone point me in the
> right direction ?
>
> Thanks !
>
> TIm
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From tea3rd at gmail.com  Sun Jul  9 17:21:13 2017
From: tea3rd at gmail.com (Thomas Adams)
Date: Sun, 9 Jul 2017 11:21:13 -0400
Subject: [R] Histogram plots in Lattice with spatialgrid dataframe data
Message-ID: <CAGxgkWgqQG_ZVq68XHp1Hec__QajmfP80f_Lhz+2_Ue_g=rRJQ@mail.gmail.com>

Hi all,

I can not seem to get what I want using the Lattice package to generate an
array of histograms of
spatialgrid dataframe data.

I can use the sp package and spplot to generate an array of maps that
display an array of spatialgrid dataframe data -- that's good. I have:

spplot(ann_bias,xlim=c(1423987.5,2614612.5),ylim=c(-5862637.5,-4624387.5),at=brks,col.regions=colp(length(brks)-1),main="NOAA/NWS
OHRFC Stage-3/MPE Precipitation Estimate Bias with respect to PRISM\n1997 -
2016")

Which works... I can also do histogram(ann_bias$bias1997), which works too.
I have also created a 'time-series' of boxplots successfully with these
data as well...

But if I try:

year<-c('1997','1998','1999','2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013','2014','2015','2016')
dat<-c(ann_bias$bias1997,ann_bias$bias1998,ann_bias$bias1999,ann_bias$bias2000,ann_bias$bias2001,ann_bias$bias2002,ann_bias$bias2003,ann_bias$bias2004,ann_bias$bias2005,ann_bias$bias2006,ann_bias$bias2007,ann_bias$bias2008,ann_bias$bias2009,ann_bias$bias2010,ann_bias$bias2011,ann_bias$bias2012,ann_bias$bias2013,ann_bias$bias2014,ann_bias$bias2015,ann_bias$bias2016)

> data<-data.frame(year=c(year),bias=c(dat))
> histogram(~ bias | year, data=data)

I get a lattice plot of histograms, where the years vary, but all the
histograms are identical, which I know they should not be. It seem that all
the data from the combined spatialgrid dataframes are being used and
repeated.

Obviously, I'm not constructing the data correctly. Can someone tell me
what I doing wrong. I've poured over this for a solid day, now...

Regards,
Tom

	[[alternative HTML version deleted]]


From peter.langfelder at gmail.com  Sun Jul  9 17:54:09 2017
From: peter.langfelder at gmail.com (Peter Langfelder)
Date: Sun, 9 Jul 2017 08:54:09 -0700
Subject: [R] Error in WGCNA package
In-Reply-To: <CAALWEk0kAoqaAk-W9oG72OrnKKozKdP_mwbvdhXjoTgntLTL8g@mail.gmail.com>
References: <CAALWEk0kAoqaAk-W9oG72OrnKKozKdP_mwbvdhXjoTgntLTL8g@mail.gmail.com>
Message-ID: <CA+hbrhVHnzkdJtQ+RHMcC7=egPH2W6n+xUKjJ5NL8mp5K3ERxw@mail.gmail.com>

First, please read WGCNA FAQ at
https://labs.genetics.ucla.edu/horvath/CoexpressionNetwork/Rpackages/WGCNA/faq.html
regarding using RNA-seq and other count data.

Second, if you insist on using WGCNA on raw count data (which I don't
recommend), use something like

storage.mode(datExpr) = "double"

and try again.

Peter

On Sun, Jul 9, 2017 at 2:29 AM, Ankush Sharma <ankush.sak at gmail.com> wrote:
> Dear all ,
>
> I would like to reconstruct coexpression networks from proteomic count data
> having integer values. Some internal function doesn't like to work well with
> integers.  How can this error be rectified?
>
>
>> adjacency = adjacency(datExpr, power = softPower, type = "signed");
> Error in cor(datExpr, use = "p") :
> REAL() can only be applied to a 'numeric', not a 'integer'
>
>
>
> Appreciate your help , Many thanks
>
> Best Regards,
> Ankush Sharma


From tea3rd at gmail.com  Sun Jul  9 21:32:32 2017
From: tea3rd at gmail.com (Thomas Adams)
Date: Sun, 9 Jul 2017 15:32:32 -0400
Subject: [R] Histogram plots in Lattice with spatialgrid dataframe data
In-Reply-To: <CAGxgkWgqQG_ZVq68XHp1Hec__QajmfP80f_Lhz+2_Ue_g=rRJQ@mail.gmail.com>
References: <CAGxgkWgqQG_ZVq68XHp1Hec__QajmfP80f_Lhz+2_Ue_g=rRJQ@mail.gmail.com>
Message-ID: <CAGxgkWh5dTkZLtbM=fijGa2hThjcPGPEa7GuR_+Dpx_N+hjeMg@mail.gmail.com>

Hello all,

After more digging I was able to find out how to do this. The answer came
from an example here:

https://stackoverflow.com/questions/3541713/how-to-plot-two-histograms-together-in-r


yr_1997<-data.frame(bias=ann_bias$bias1997)
yr_1998<-data.frame(bias=ann_bias$bias1998)
yr_1999<-data.frame(bias=ann_bias$bias1999)
yr_2000<-data.frame(bias=ann_bias$bias2000)
yr_2001<-data.frame(bias=ann_bias$bias2001)
yr_2002<-data.frame(bias=ann_bias$bias2002)
yr_2003<-data.frame(bias=ann_bias$bias2003)
yr_2004<-data.frame(bias=ann_bias$bias2004)
yr_2005<-data.frame(bias=ann_bias$bias2005)
yr_2006<-data.frame(bias=ann_bias$bias2006)
yr_2007<-data.frame(bias=ann_bias$bias2007)
yr_2008<-data.frame(bias=ann_bias$bias2008)
yr_2009<-data.frame(bias=ann_bias$bias2009)
yr_2010<-data.frame(bias=ann_bias$bias2010)
yr_2011<-data.frame(bias=ann_bias$bias2011)
yr_2012<-data.frame(bias=ann_bias$bias2012)
yr_2013<-data.frame(bias=ann_bias$bias2013)
yr_2014<-data.frame(bias=ann_bias$bias2014)
yr_2015<-data.frame(bias=ann_bias$bias2015)
yr_2016<-data.frame(bias=ann_bias$bias2016)


yr_1997$year<-'1997'
yr_1998$year<-'1998'
yr_1999$year<-'1999'
yr_2000$year<-'2000'
yr_2001$year<-'2001'
yr_2002$year<-'2002'
yr_2003$year<-'2003'
yr_2004$year<-'2004'
yr_2005$year<-'2005'
yr_2006$year<-'2006'
yr_2007$year<-'2007'
yr_2008$year<-'2008'
yr_2009$year<-'2009'
yr_2010$year<-'2010'
yr_2011$year<-'2011'
yr_2012$year<-'2012'
yr_2013$year<-'2013'
yr_2014$year<-'2014'
yr_2015$year<-'2015'
yr_2016$year<-'2016'


bias<-rbind(yr_1997,yr_1998,yr_1999,yr_2000,yr_2001,yr_2002,yr_2003,yr_2004,yr_2005,yr_2006,yr_2007,yr_2008,yr_2009,yr_2010,yr_2011,yr_2012,yr_2013,yr_2014,yr_2015,yr_2016)
histogram(~ bias | year, data=bias)

Cheers!
Tom


On Sun, Jul 9, 2017 at 11:21 AM, Thomas Adams <tea3rd at gmail.com> wrote:

> Hi all,
>
> I can not seem to get what I want using the Lattice package to generate an
> array of histograms of
> spatialgrid dataframe data.
>
> I can use the sp package and spplot to generate an array of maps that
> display an array of spatialgrid dataframe data -- that's good. I have:
>
> spplot(ann_bias,xlim=c(1423987.5,2614612.5),ylim=c(-
> 5862637.5,-4624387.5),at=brks,col.regions=colp(length(brks)-1),main="NOAA/NWS
> OHRFC Stage-3/MPE Precipitation Estimate Bias with respect to PRISM\n1997 -
> 2016")
>
> Which works... I can also do histogram(ann_bias$bias1997), which works
> too. I have also created a 'time-series' of boxplots successfully with
> these data as well...
>
> But if I try:
>
> year<-c('1997','1998','1999','2000','2001','2002','2003','
> 2004','2005','2006','2007','2008','2009','2010','2011','
> 2012','2013','2014','2015','2016')
> dat<-c(ann_bias$bias1997,ann_bias$bias1998,ann_bias$
> bias1999,ann_bias$bias2000,ann_bias$bias2001,ann_bias$
> bias2002,ann_bias$bias2003,ann_bias$bias2004,ann_bias$
> bias2005,ann_bias$bias2006,ann_bias$bias2007,ann_bias$
> bias2008,ann_bias$bias2009,ann_bias$bias2010,ann_bias$
> bias2011,ann_bias$bias2012,ann_bias$bias2013,ann_bias$
> bias2014,ann_bias$bias2015,ann_bias$bias2016)
>
> > data<-data.frame(year=c(year),bias=c(dat))
> > histogram(~ bias | year, data=data)
>
> I get a lattice plot of histograms, where the years vary, but all the
> histograms are identical, which I know they should not be. It seem that all
> the data from the combined spatialgrid dataframes are being used and
> repeated.
>
> Obviously, I'm not constructing the data correctly. Can someone tell me
> what I doing wrong. I've poured over this for a solid day, now...
>
> Regards,
> Tom
>
>

	[[alternative HTML version deleted]]


From ankush.sak at gmail.com  Sun Jul  9 11:29:09 2017
From: ankush.sak at gmail.com (Ankush Sharma)
Date: Sun, 9 Jul 2017 14:59:09 +0530
Subject: [R] Error in WGCNA package
Message-ID: <CAALWEk0kAoqaAk-W9oG72OrnKKozKdP_mwbvdhXjoTgntLTL8g@mail.gmail.com>

Dear all ,

I would like to reconstruct coexpression networks from proteomic count data
having integer values. Some internal function doesn't like to work well
with integers.  How can this error be rectified?


> adjacency = adjacency(datExpr, power = softPower, type = "signed");
Error in cor(datExpr, use = "p") :
REAL() can only be applied to a 'numeric', not a 'integer'



Appreciate your help , Many thanks

Best Regards,
Ankush Sharma

	[[alternative HTML version deleted]]


From kheirabadikh at gmail.com  Sun Jul  9 14:57:37 2017
From: kheirabadikh at gmail.com (Khabat Kheirabadi)
Date: Sun, 9 Jul 2017 17:27:37 +0430
Subject: [R] [R-pkgs] R package hypred: Simulation of genomic data in
	applied genetics
Message-ID: <CAJK-EsngVt107b=Er7mKEWbEgBhb6_t7PVYmRM3HcqtNg5=5eg@mail.gmail.com>

Dear Frank,

I hope everything is well with you. ?
?First of all?
?, I?
?'d like thank you for your nice genomic simulation program (*hypred *package)
and also for taking your time to answer my question. Dear Frank, I'm a PhD
student of animal breeding science from Iran. Unfortunately although I try
more time for running your package in order to simulate of a historical and
reference population based on hypred manual (step by step) but linkage
disequilibrium (LD) value was true (near 0.20) only when the generations
was less than 50. In other words when I try for more generations this value
increased subsequently. If it is possible please help me and let me know
how should I change your program for getting near true value of LD when
generation increased to 1000?





*Best regards,*
Khabat
*---------------------------------------------------------------------*
*PhD. Student of Animal Genetics & Breeding*
*Ramin University of Agriculture and Natural Resources, Ahwaz, Khuzestan,
Iran.*
Tel: 98-918-247-4501
Alternative email: K.Kheirabadi at outlook.com

	[[alternative HTML version deleted]]


From r.andomdev4+r at gmail.com  Sun Jul  9 15:45:48 2017
From: r.andomdev4+r at gmail.com (Tim Smith)
Date: Sun, 9 Jul 2017 14:45:48 +0100
Subject: [R] CRAN I-MR / Xbar-R / Xbar-S control chart package ?
In-Reply-To: <59613840.7040206@sapo.pt>
References: <CA+HuS5Hcn3HntEqcCNbjnqBMAy32ddGuTB2rxBdfL_W+XSTMtA@mail.gmail.com>
 <59613840.7040206@sapo.pt>
Message-ID: <CA+HuS5E3hsfALtd+UGtJs1fa7=GRARw+dwqn2rREaNgpmPDYtg@mail.gmail.com>

Interesting, thanks for that.  I came accross qcc but my quick scan of
the docs is that it only did xbars but maybe I need to re-read the
docs, I guess it does the individual plot versions (I-MR) too.

Tim

On 8 July 2017 at 20:53, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> Hello,
>
> I have no experience with I-MR charts but a google search found package qcc.
> Maybe it's what you're looking for.
>
> Hope this helps,
>
> Rui Barradas
>
>
> Em 08-07-2017 09:07, Tim Smith escreveu:
>>
>> Hi,
>>
>> I've had a quick look through the package list, and unless I've missed
>> something, I can't seem to find anything that will do I-MR / Xbar-R /
>> Xbar-S control charts ?
>>
>> Assuming there is something out there, can anyone point me in the
>> right direction ?
>>
>> Thanks !
>>
>> TIm
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>


From ursilla at libero.it  Sun Jul  9 20:59:45 2017
From: ursilla at libero.it (Orsola Costantini)
Date: Sun, 9 Jul 2017 14:59:45 -0400
Subject: [R] Help with ftable.svyby
Message-ID: <CAOGP_n9-J478xv7YP88eLdV0vK8H0f2TZcASUN_tN4yG7_wtcA@mail.gmail.com>

Hi all,

When I try the following with pkg Survey it returns the error below:

ftable(svyby(~INCOME, ~AGECL+RACECL, svymean, design=q50),
rownames=list(AGECL=c("<35", "35-44", "45-54", "55-64",
                                                    "65-74", ">=75"),
           RACECL=c("white non hispanic", "non white or hispanic"))

Error in rbind(matrix("", nrow = length(xcv), ncol = length(xrv)),
charQuote(makeNames(xrv)),  :
  number of columns of matrices must match (see arg 3)

When I do the follwing instead all is good. But it only works for small
subsets!

h<-svymean(~interaction(INCOME, AGECL, RACECL), q3)

fh<-ftable(h, rownames=list(AGECL=c("<35", "35-44", "45-54", "55-64",
                                                    "65-74", ">=75"),
           RACECL=c("white non his", "non white or hispanic")))


any idea why?

Thanks!!!

U.

	[[alternative HTML version deleted]]


From ajdamico at gmail.com  Sun Jul  9 21:52:09 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sun, 9 Jul 2017 15:52:09 -0400
Subject: [R] Help with ftable.svyby
In-Reply-To: <CAOGP_n9-J478xv7YP88eLdV0vK8H0f2TZcASUN_tN4yG7_wtcA@mail.gmail.com>
References: <CAOGP_n9-J478xv7YP88eLdV0vK8H0f2TZcASUN_tN4yG7_wtcA@mail.gmail.com>
Message-ID: <CAOwvMDxN=HfjUt0kq_rxcuGr8AiYFk1KHhV=mYjjHnx_XQrrUQ@mail.gmail.com>

try resetting your factor levels and re-run?

q50 <- update( q50 , INCOME = factor( INCOME ) , AGECL = factor( AGECL ) ,
RACECL = factor( RACECL ) )




On Sun, Jul 9, 2017 at 2:59 PM, Orsola Costantini via R-help <
r-help at r-project.org> wrote:

> Hi all,
>
> When I try the following with pkg Survey it returns the error below:
>
> ftable(svyby(~INCOME, ~AGECL+RACECL, svymean, design=q50),
> rownames=list(AGECL=c("<35", "35-44", "45-54", "55-64",
>                                                     "65-74", ">=75"),
>            RACECL=c("white non hispanic", "non white or hispanic"))
>
> Error in rbind(matrix("", nrow = length(xcv), ncol = length(xrv)),
> charQuote(makeNames(xrv)),  :
>   number of columns of matrices must match (see arg 3)
>
> When I do the follwing instead all is good. But it only works for small
> subsets!
>
> h<-svymean(~interaction(INCOME, AGECL, RACECL), q3)
>
> fh<-ftable(h, rownames=list(AGECL=c("<35", "35-44", "45-54", "55-64",
>                                                     "65-74", ">=75"),
>            RACECL=c("white non his", "non white or hispanic")))
>
>
> any idea why?
>
> Thanks!!!
>
> U.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ursilla at libero.it  Sun Jul  9 22:58:34 2017
From: ursilla at libero.it (Orsola Costantini)
Date: Sun, 9 Jul 2017 16:58:34 -0400
Subject: [R] Help with ftable.svyby
In-Reply-To: <CAOwvMDxN=HfjUt0kq_rxcuGr8AiYFk1KHhV=mYjjHnx_XQrrUQ@mail.gmail.com>
References: <CAOGP_n9-J478xv7YP88eLdV0vK8H0f2TZcASUN_tN4yG7_wtcA@mail.gmail.com>
 <CAOwvMDxN=HfjUt0kq_rxcuGr8AiYFk1KHhV=mYjjHnx_XQrrUQ@mail.gmail.com>
Message-ID: <CAOGP_n_C6CEHuABghV2XJXd91+uHGjye2A5epOo1GOnkR8WMww@mail.gmail.com>

Thanks, Anthony! It worked!!
Only, for future reference, I had to exclude INCOME from the reset (which
is the variable in the svymean function)
q50 <- update( q50 , AGECL = factor( AGECL ) , RACECL = factor( RACECL ) )



2017-07-09 15:52 GMT-04:00 Anthony Damico <ajdamico at gmail.com>:

> try resetting your factor levels and re-run?
>
> q50 <- update( q50 , INCOME = factor( INCOME ) , AGECL = factor( AGECL ) ,
> RACECL = factor( RACECL ) )
>
>
>
>
> On Sun, Jul 9, 2017 at 2:59 PM, Orsola Costantini via R-help <
> r-help at r-project.org> wrote:
>
>> Hi all,
>>
>> When I try the following with pkg Survey it returns the error below:
>>
>> ftable(svyby(~INCOME, ~AGECL+RACECL, svymean, design=q50),
>> rownames=list(AGECL=c("<35", "35-44", "45-54", "55-64",
>>                                                     "65-74", ">=75"),
>>            RACECL=c("white non hispanic", "non white or hispanic"))
>>
>> Error in rbind(matrix("", nrow = length(xcv), ncol = length(xrv)),
>> charQuote(makeNames(xrv)),  :
>>   number of columns of matrices must match (see arg 3)
>>
>> When I do the follwing instead all is good. But it only works for small
>> subsets!
>>
>> h<-svymean(~interaction(INCOME, AGECL, RACECL), q3)
>>
>> fh<-ftable(h, rownames=list(AGECL=c("<35", "35-44", "45-54", "55-64",
>>                                                     "65-74", ">=75"),
>>            RACECL=c("white non his", "non white or hispanic")))
>>
>>
>> any idea why?
>>
>> Thanks!!!
>>
>> U.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Mon Jul 10 04:16:23 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 09 Jul 2017 19:16:23 -0700
Subject: [R] Histogram plots in Lattice with spatialgrid dataframe data
In-Reply-To: <CAGxgkWh5dTkZLtbM=fijGa2hThjcPGPEa7GuR_+Dpx_N+hjeMg@mail.gmail.com>
References: <CAGxgkWgqQG_ZVq68XHp1Hec__QajmfP80f_Lhz+2_Ue_g=rRJQ@mail.gmail.com>
 <CAGxgkWh5dTkZLtbM=fijGa2hThjcPGPEa7GuR_+Dpx_N+hjeMg@mail.gmail.com>
Message-ID: <3C3E7C78-852D-4121-A5BE-7EF109805539@dcn.davis.ca.us>

Glad you found an answer, though it looks more self-educational than efficient (see suggestions below). In the future, follow the recommendations of the Posting Guide: use plain text, and provide a reproducible example. Some elaborations on what "reproducible" means are [1][2][3]. One issue here was that you did not include sample data to work with (I have assumed below that ann_bias has no other columns than the biasNNNN columns, which is not the usual case).

There are a number of ways to achieve the reshaping of your ann_bias data frame that are less painful than your approach. For example, the base R "stack" function:

bias2 <- stack( ann_bias )
names( bias2 ) <- c( "bias", "year )
levels( bias2$year ) <- sub( "bias", "", levels( bias2$year ) )

Or... if you are willing to venture into the tidyverse...

library(dplyr)
library(tidyr)
bias3  <- (   ann_bias
         %>% gather( year, bias )
         %>% mutate( year = factor( sub( "bias", "", year ) ) )
         )

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html

-- 
Sent from my phone. Please excuse my brevity.

On July 9, 2017 12:32:32 PM PDT, Thomas Adams <tea3rd at gmail.com> wrote:
>Hello all,
>
>After more digging I was able to find out how to do this. The answer
>came
>from an example here:
>
>https://stackoverflow.com/questions/3541713/how-to-plot-two-histograms-together-in-r
>
>
>yr_1997<-data.frame(bias=ann_bias$bias1997)
>yr_1998<-data.frame(bias=ann_bias$bias1998)
>yr_1999<-data.frame(bias=ann_bias$bias1999)
>yr_2000<-data.frame(bias=ann_bias$bias2000)
>yr_2001<-data.frame(bias=ann_bias$bias2001)
>yr_2002<-data.frame(bias=ann_bias$bias2002)
>yr_2003<-data.frame(bias=ann_bias$bias2003)
>yr_2004<-data.frame(bias=ann_bias$bias2004)
>yr_2005<-data.frame(bias=ann_bias$bias2005)
>yr_2006<-data.frame(bias=ann_bias$bias2006)
>yr_2007<-data.frame(bias=ann_bias$bias2007)
>yr_2008<-data.frame(bias=ann_bias$bias2008)
>yr_2009<-data.frame(bias=ann_bias$bias2009)
>yr_2010<-data.frame(bias=ann_bias$bias2010)
>yr_2011<-data.frame(bias=ann_bias$bias2011)
>yr_2012<-data.frame(bias=ann_bias$bias2012)
>yr_2013<-data.frame(bias=ann_bias$bias2013)
>yr_2014<-data.frame(bias=ann_bias$bias2014)
>yr_2015<-data.frame(bias=ann_bias$bias2015)
>yr_2016<-data.frame(bias=ann_bias$bias2016)
>
>
>yr_1997$year<-'1997'
>yr_1998$year<-'1998'
>yr_1999$year<-'1999'
>yr_2000$year<-'2000'
>yr_2001$year<-'2001'
>yr_2002$year<-'2002'
>yr_2003$year<-'2003'
>yr_2004$year<-'2004'
>yr_2005$year<-'2005'
>yr_2006$year<-'2006'
>yr_2007$year<-'2007'
>yr_2008$year<-'2008'
>yr_2009$year<-'2009'
>yr_2010$year<-'2010'
>yr_2011$year<-'2011'
>yr_2012$year<-'2012'
>yr_2013$year<-'2013'
>yr_2014$year<-'2014'
>yr_2015$year<-'2015'
>yr_2016$year<-'2016'
>
>
>bias<-rbind(yr_1997,yr_1998,yr_1999,yr_2000,yr_2001,yr_2002,yr_2003,yr_2004,yr_2005,yr_2006,yr_2007,yr_2008,yr_2009,yr_2010,yr_2011,yr_2012,yr_2013,yr_2014,yr_2015,yr_2016)
>histogram(~ bias | year, data=bias)
>
>Cheers!
>Tom
>
>
>On Sun, Jul 9, 2017 at 11:21 AM, Thomas Adams <tea3rd at gmail.com> wrote:
>
>> Hi all,
>>
>> I can not seem to get what I want using the Lattice package to
>generate an
>> array of histograms of
>> spatialgrid dataframe data.
>>
>> I can use the sp package and spplot to generate an array of maps that
>> display an array of spatialgrid dataframe data -- that's good. I
>have:
>>
>> spplot(ann_bias,xlim=c(1423987.5,2614612.5),ylim=c(-
>>
>5862637.5,-4624387.5),at=brks,col.regions=colp(length(brks)-1),main="NOAA/NWS
>> OHRFC Stage-3/MPE Precipitation Estimate Bias with respect to
>PRISM\n1997 -
>> 2016")
>>
>> Which works... I can also do histogram(ann_bias$bias1997), which
>works
>> too. I have also created a 'time-series' of boxplots successfully
>with
>> these data as well...
>>
>> But if I try:
>>
>> year<-c('1997','1998','1999','2000','2001','2002','2003','
>> 2004','2005','2006','2007','2008','2009','2010','2011','
>> 2012','2013','2014','2015','2016')
>> dat<-c(ann_bias$bias1997,ann_bias$bias1998,ann_bias$
>> bias1999,ann_bias$bias2000,ann_bias$bias2001,ann_bias$
>> bias2002,ann_bias$bias2003,ann_bias$bias2004,ann_bias$
>> bias2005,ann_bias$bias2006,ann_bias$bias2007,ann_bias$
>> bias2008,ann_bias$bias2009,ann_bias$bias2010,ann_bias$
>> bias2011,ann_bias$bias2012,ann_bias$bias2013,ann_bias$
>> bias2014,ann_bias$bias2015,ann_bias$bias2016)
>>
>> > data<-data.frame(year=c(year),bias=c(dat))
>> > histogram(~ bias | year, data=data)
>>
>> I get a lattice plot of histograms, where the years vary, but all the
>> histograms are identical, which I know they should not be. It seem
>that all
>> the data from the combined spatialgrid dataframes are being used and
>> repeated.
>>
>> Obviously, I'm not constructing the data correctly. Can someone tell
>me
>> what I doing wrong. I've poured over this for a solid day, now...
>>
>> Regards,
>> Tom
>>
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Mon Jul 10 05:04:44 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 09 Jul 2017 20:04:44 -0700
Subject: [R] Help documentation of "The Studentized range Distribution"
In-Reply-To: <7d0c904224f44ea193f2f55d09df8fe6@CYT000-EX01.cytel.com>
References: <7d0c904224f44ea193f2f55d09df8fe6@CYT000-EX01.cytel.com>
Message-ID: <BE5FA132-3F77-43D7-A2B9-6031D96B435F@dcn.davis.ca.us>

We cannot help you understand what you are doing if you do not show us what you are doing.  Here are some discussions about how to communicate questions about R [1][2][3].

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html
-- 
Sent from my phone. Please excuse my brevity.

On July 6, 2017 11:36:47 AM PDT, Ursula Garczarek <Ursula.Garczarek at cytel.com> wrote:
>Dear all,
>I wanted to compare Bonferroni vs TukeyHSD correction over a range of
>groups and group sizes, and wanted to use the function qtukey.
>
>In the help documentation it says
>
>qtukey(p, nmeans, df, nranges = 1, lower.tail = TRUE, log.p = FALSE)
>Arguments
>q
>
>vector of quantiles.
>
>p
>
>vector of probabilities.
>
>nmeans
>
>sample size for range (same for each group).
>
>df
>
>degrees of freedom for s (see below).
>
>nranges
>
>number of groups whose maximum range is considered.
>
>log.p
>
>logical; if TRUE, probabilities p are given as log(p).
>
>lower.tail
>
>logical; if TRUE (default), probabilities are P[X ? x], otherwise, P[X
>> x].
>
>
>But when I test it, "nmeans" actually should be the number of groups,
>and not "nrange" to fit with tables of the studentized range
>distribution.
>
>Can that be - it should be a rather old procedure, so I wonder whether
>I get something completely wrong...
>
>Regards,
>Ursula
>
>
>
>
>
>
>
>
>
>
>
>
>
>This email and any attachments are confidential and may
>...{{dropped:8}}


From tea3rd at gmail.com  Mon Jul 10 06:09:21 2017
From: tea3rd at gmail.com (Thomas Adams)
Date: Mon, 10 Jul 2017 00:09:21 -0400
Subject: [R] Histogram plots in Lattice with spatialgrid dataframe data
In-Reply-To: <3C3E7C78-852D-4121-A5BE-7EF109805539@dcn.davis.ca.us>
References: <CAGxgkWgqQG_ZVq68XHp1Hec__QajmfP80f_Lhz+2_Ue_g=rRJQ@mail.gmail.com>
 <CAGxgkWh5dTkZLtbM=fijGa2hThjcPGPEa7GuR_+Dpx_N+hjeMg@mail.gmail.com>
 <3C3E7C78-852D-4121-A5BE-7EF109805539@dcn.davis.ca.us>
Message-ID: <CAGxgkWjWV9m7JVRLtH68Y5zdnh3U3Z+pq4HqONMb5eQ7Zy7p-w@mail.gmail.com>

Jeff,

Thank you! I know what I did was very inelegant and I understand about
providing a reproducible example; I just could not do it with my data -- I
guess I was too lazy to make up a toy one. I apologize about the email
formatting.

I would never have known to use 'stack', 'levels' 'gather' and 'mutate' --
still very much learning... so, I appreciate what you provided. Thank you
so much!

Tom


On Sun, Jul 9, 2017 at 10:16 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Glad you found an answer, though it looks more self-educational than
> efficient (see suggestions below). In the future, follow the
> recommendations of the Posting Guide: use plain text, and provide a
> reproducible example. Some elaborations on what "reproducible" means are
> [1][2][3]. One issue here was that you did not include sample data to work
> with (I have assumed below that ann_bias has no other columns than the
> biasNNNN columns, which is not the usual case).
>
> There are a number of ways to achieve the reshaping of your ann_bias data
> frame that are less painful than your approach. For example, the base R
> "stack" function:
>
> bias2 <- stack( ann_bias )
> names( bias2 ) <- c( "bias", "year )
> levels( bias2$year ) <- sub( "bias", "", levels( bias2$year ) )
>
> Or... if you are willing to venture into the tidyverse...
>
> library(dplyr)
> library(tidyr)
> bias3  <- (   ann_bias
>          %>% gather( year, bias )
>          %>% mutate( year = factor( sub( "bias", "", year ) ) )
>          )
>
> [1] http://stackoverflow.com/questions/5963269/how-to-make-
> a-great-r-reproducible-example
>
> [2] http://adv-r.had.co.nz/Reproducibility.html
>
> [3] https://cran.r-project.org/web/packages/reprex/index.html
>
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 9, 2017 12:32:32 PM PDT, Thomas Adams <tea3rd at gmail.com> wrote:
> >Hello all,
> >
> >After more digging I was able to find out how to do this. The answer
> >came
> >from an example here:
> >
> >https://stackoverflow.com/questions/3541713/how-to-plot-
> two-histograms-together-in-r
> >
> >
> >yr_1997<-data.frame(bias=ann_bias$bias1997)
> >yr_1998<-data.frame(bias=ann_bias$bias1998)
> >yr_1999<-data.frame(bias=ann_bias$bias1999)
> >yr_2000<-data.frame(bias=ann_bias$bias2000)
> >yr_2001<-data.frame(bias=ann_bias$bias2001)
> >yr_2002<-data.frame(bias=ann_bias$bias2002)
> >yr_2003<-data.frame(bias=ann_bias$bias2003)
> >yr_2004<-data.frame(bias=ann_bias$bias2004)
> >yr_2005<-data.frame(bias=ann_bias$bias2005)
> >yr_2006<-data.frame(bias=ann_bias$bias2006)
> >yr_2007<-data.frame(bias=ann_bias$bias2007)
> >yr_2008<-data.frame(bias=ann_bias$bias2008)
> >yr_2009<-data.frame(bias=ann_bias$bias2009)
> >yr_2010<-data.frame(bias=ann_bias$bias2010)
> >yr_2011<-data.frame(bias=ann_bias$bias2011)
> >yr_2012<-data.frame(bias=ann_bias$bias2012)
> >yr_2013<-data.frame(bias=ann_bias$bias2013)
> >yr_2014<-data.frame(bias=ann_bias$bias2014)
> >yr_2015<-data.frame(bias=ann_bias$bias2015)
> >yr_2016<-data.frame(bias=ann_bias$bias2016)
> >
> >
> >yr_1997$year<-'1997'
> >yr_1998$year<-'1998'
> >yr_1999$year<-'1999'
> >yr_2000$year<-'2000'
> >yr_2001$year<-'2001'
> >yr_2002$year<-'2002'
> >yr_2003$year<-'2003'
> >yr_2004$year<-'2004'
> >yr_2005$year<-'2005'
> >yr_2006$year<-'2006'
> >yr_2007$year<-'2007'
> >yr_2008$year<-'2008'
> >yr_2009$year<-'2009'
> >yr_2010$year<-'2010'
> >yr_2011$year<-'2011'
> >yr_2012$year<-'2012'
> >yr_2013$year<-'2013'
> >yr_2014$year<-'2014'
> >yr_2015$year<-'2015'
> >yr_2016$year<-'2016'
> >
> >
> >bias<-rbind(yr_1997,yr_1998,yr_1999,yr_2000,yr_2001,yr_
> 2002,yr_2003,yr_2004,yr_2005,yr_2006,yr_2007,yr_2008,yr_
> 2009,yr_2010,yr_2011,yr_2012,yr_2013,yr_2014,yr_2015,yr_2016)
> >histogram(~ bias | year, data=bias)
> >
> >Cheers!
> >Tom
> >
> >
> >On Sun, Jul 9, 2017 at 11:21 AM, Thomas Adams <tea3rd at gmail.com> wrote:
> >
> >> Hi all,
> >>
> >> I can not seem to get what I want using the Lattice package to
> >generate an
> >> array of histograms of
> >> spatialgrid dataframe data.
> >>
> >> I can use the sp package and spplot to generate an array of maps that
> >> display an array of spatialgrid dataframe data -- that's good. I
> >have:
> >>
> >> spplot(ann_bias,xlim=c(1423987.5,2614612.5),ylim=c(-
> >>
> >5862637.5,-4624387.5),at=brks,col.regions=colp(length(
> brks)-1),main="NOAA/NWS
> >> OHRFC Stage-3/MPE Precipitation Estimate Bias with respect to
> >PRISM\n1997 -
> >> 2016")
> >>
> >> Which works... I can also do histogram(ann_bias$bias1997), which
> >works
> >> too. I have also created a 'time-series' of boxplots successfully
> >with
> >> these data as well...
> >>
> >> But if I try:
> >>
> >> year<-c('1997','1998','1999','2000','2001','2002','2003','
> >> 2004','2005','2006','2007','2008','2009','2010','2011','
> >> 2012','2013','2014','2015','2016')
> >> dat<-c(ann_bias$bias1997,ann_bias$bias1998,ann_bias$
> >> bias1999,ann_bias$bias2000,ann_bias$bias2001,ann_bias$
> >> bias2002,ann_bias$bias2003,ann_bias$bias2004,ann_bias$
> >> bias2005,ann_bias$bias2006,ann_bias$bias2007,ann_bias$
> >> bias2008,ann_bias$bias2009,ann_bias$bias2010,ann_bias$
> >> bias2011,ann_bias$bias2012,ann_bias$bias2013,ann_bias$
> >> bias2014,ann_bias$bias2015,ann_bias$bias2016)
> >>
> >> > data<-data.frame(year=c(year),bias=c(dat))
> >> > histogram(~ bias | year, data=data)
> >>
> >> I get a lattice plot of histograms, where the years vary, but all the
> >> histograms are identical, which I know they should not be. It seem
> >that all
> >> the data from the combined spatialgrid dataframes are being used and
> >> repeated.
> >>
> >> Obviously, I'm not constructing the data correctly. Can someone tell
> >me
> >> what I doing wrong. I've poured over this for a solid day, now...
> >>
> >> Regards,
> >> Tom
> >>
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr.pikal at precheza.cz  Mon Jul 10 08:13:17 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 10 Jul 2017 06:13:17 +0000
Subject: [R] Beginner s quwry about cfa in lavaan
In-Reply-To: <HE1PR09MB044320C242C964B3ADB51037BDAA0@HE1PR09MB0443.eurprd09.prod.outlook.com>
References: <HE1PR09MB044320C242C964B3ADB51037BDAA0@HE1PR09MB0443.eurprd09.prod.outlook.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8AC82@SRVEXCHCM301.precheza.cz>

Hi

Fo R basics best what you can do is to go through R intro document. Should be located in doc folder.

If you searched
r krippendorff alpha

you should find package irr, which maybe could do what you want (I am not an expert in this field).

Cheers
Petr

> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Martina
> Hule?ov?
> Sent: Friday, July 7, 2017 6:53 PM
> To: r-help at r-project.org
> Subject: [R] Beginner s quwry about cfa in lavaan
>
> Dear all,
> I am trying to learn about R. As a Phd student, I would like to use R for
> Krippendorff s alpha and later for a series of CFA. Is there any good
> introduction to these kind of analyses, or could you recommend me some
> tutorials on youtube, for example? I am new to R, so I need something basic ,
> starting from opening the R environment?.
> Thank you .
> Martina Hulesova
>
> Odesl?no z m?ho Windows Phone
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From Mohan.Radhakrishnan at cognizant.com  Mon Jul 10 09:03:59 2017
From: Mohan.Radhakrishnan at cognizant.com (Mohan.Radhakrishnan at cognizant.com)
Date: Mon, 10 Jul 2017 07:03:59 +0000
Subject: [R] Extract XMLAtrributeValue
Message-ID: <E1B160F4999FD6449524E16C2CB94E031F9340FC@CTSINCHNSXMBE.cts.com>

Hi,

I am trying to extract an attribute value which is like this.

(e.g) class="whQuestion"

The 'extract' function prints this. But I am not sure how to get "whQuestion" from that. The type of 'x' in extract
is "character"

[1] "XMLAttributeValue"
       class
"whQuestion"
attr(,"class")

extract <- function(x){
print(x)
}

filteredclasses <-
function(){
classes <- xpathSApply(doc = posts, path = "/*/Posts/Post/@class", extract)
}

Thanks,
Mohan
This e-mail and any files transmitted with it are for the sole use of the intended recipient(s) and may contain confidential and privileged information. If you are not the intended recipient(s), please reply to the sender and destroy all copies of the original message. Any unauthorized review, use, disclosure, dissemination, forwarding, printing or copying of this email, and/or any action taken in reliance on the contents of this e-mail is strictly prohibited and may be unlawful. Where permitted by applicable law, this e-mail and other e-mail communications sent to and from Cognizant e-mail addresses may be monitored.

	[[alternative HTML version deleted]]


From pmakananisa at sars.gov.za  Mon Jul 10 10:29:41 2017
From: pmakananisa at sars.gov.za (Mangalani Peter Makananisa)
Date: Mon, 10 Jul 2017 08:29:41 +0000
Subject: [R] dplyr help
Message-ID: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>

HI all,

Is it possible to use one column spread on multiple columns values.

example
spread( Key_col, value1:value7)

spreading Key_col to variable value1, value2, ....... Value7

Please advise,

Kind regards

Mangalani Peter Makananisa (5786)
South African Revenue Service (SARS) - HO
+2782 456 4669 / +2712 422 7357

Please Note: This email and its contents are subject to our email legal notice which can be viewed at http://www.sars.gov.za/Pages/Email-disclaimer.aspx

	[[alternative HTML version deleted]]


From petr.pikal at precheza.cz  Mon Jul 10 11:16:47 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 10 Jul 2017 09:16:47 +0000
Subject: [R] dplyr help
In-Reply-To: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>
References: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8C699@SRVEXCHCM301.precheza.cz>

Hi

something like

dcast(temp2, minuty~pokus)
?

> dput(temp2)
structure(list(pokus = structure(c(1L, 1L, 1L, 2L, 2L, 2L, 2L,
2L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 5L, 5L, 6L, 6L, 7L, 7L, 8L, 8L
), .Label = c("T42", "T43", "T44", "T45", "T46", "T47", "T48",
"T49"), class = "factor"), minuty = structure(c(2L, 3L, 4L, 2L,
3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 2L, 3L, 4L, 2L, 3L, 2L, 3L, 2L,
3L, 2L, 3L), .Label = c("180", "240", "300", "360", "420", "480"
), class = "factor")), .Names = c("pokus", "minuty"), row.names = c(NA,
-23L), class = "data.frame")

Cheers
Petr


> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Mangalani
> Peter Makananisa
> Sent: Monday, July 10, 2017 10:30 AM
> To: r-help at r-project.org
> Cc: Vito Ricci (vito_ricci at yahoo.com) <vito_ricci at yahoo.com>
> Subject: [R] dplyr help
>
> HI all,
>
> Is it possible to use one column spread on multiple columns values.
>
> example
> spread( Key_col, value1:value7)
>
> spreading Key_col to variable value1, value2, ....... Value7
>
> Please advise,
>
> Kind regards
>
> Mangalani Peter Makananisa (5786)
> South African Revenue Service (SARS) - HO
> +2782 456 4669 / +2712 422 7357
>
> Please Note: This email and its contents are subject to our email legal notice
> which can be viewed at http://www.sars.gov.za/Pages/Email-disclaimer.aspx
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From pdalgd at gmail.com  Mon Jul 10 11:46:04 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Mon, 10 Jul 2017 11:46:04 +0200
Subject: [R] Help documentation of "The Studentized range Distribution"
In-Reply-To: <BE5FA132-3F77-43D7-A2B9-6031D96B435F@dcn.davis.ca.us>
References: <7d0c904224f44ea193f2f55d09df8fe6@CYT000-EX01.cytel.com>
 <BE5FA132-3F77-43D7-A2B9-6031D96B435F@dcn.davis.ca.us>
Message-ID: <DC14D9CE-3D7D-4938-815B-DFCF04A47147@gmail.com>

Well, it is clear enough that the problem is in interpreting the documentation. However, when you claim you tested something, and found it inconsistent with tables, it would be advisable to back it up with examples!

The description in the help files and in the sources is admittedly confusing. The original paper has this, rather more clear, description in the abstract:

"We consider the probability distribution of the maximum of r statistics each distributed as the Studentized range of means calculated from c random samples of size n from normal populations. The rc samples are assumed to be mutually independent and a common pooled?within?samplevariance is used throughout."

So the connection is nranges == r, and nmeans == c. (n never actually factors in because sqrt(n) is part of the standardization)

For the typical application, r is 1 for the usual studentized range distribution. E.g. for two large groups:

> qtukey(.95,2,df=Inf)
[1] 2.771808

As there is only one difference to consider, this should be distributed like the absolute value of the difference between two standard normals, and yes: We get our old friend 1.96 from

> qtukey(.95,2,df=Inf)/sqrt(2)
[1] 1.959964

It is less than fortunate that the help file speaks of "sample size for range". It is marginally defensible, because it is about the standardized range of a sample _of means_, but it is likely to confuse the actual reader into believing that it has to do with the sample size for each mean.

-pd

> On 10 Jul 2017, at 05:04 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> We cannot help you understand what you are doing if you do not show us what you are doing.  Here are some discussions about how to communicate questions about R [1][2][3].
> 
> [1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
> 
> [2] http://adv-r.had.co.nz/Reproducibility.html
> 
> [3] https://cran.r-project.org/web/packages/reprex/index.html
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> On July 6, 2017 11:36:47 AM PDT, Ursula Garczarek <Ursula.Garczarek at cytel.com> wrote:
>> Dear all,
>> I wanted to compare Bonferroni vs TukeyHSD correction over a range of
>> groups and group sizes, and wanted to use the function qtukey.
>> 
>> In the help documentation it says
>> 
>> qtukey(p, nmeans, df, nranges = 1, lower.tail = TRUE, log.p = FALSE)
>> Arguments
>> q
>> 
>> vector of quantiles.
>> 
>> p
>> 
>> vector of probabilities.
>> 
>> nmeans
>> 
>> sample size for range (same for each group).
>> 
>> df
>> 
>> degrees of freedom for s (see below).
>> 
>> nranges
>> 
>> number of groups whose maximum range is considered.
>> 
>> log.p
>> 
>> logical; if TRUE, probabilities p are given as log(p).
>> 
>> lower.tail
>> 
>> logical; if TRUE (default), probabilities are P[X ? x], otherwise, P[X
>>> x].
>> 
>> 
>> But when I test it, "nmeans" actually should be the number of groups,
>> and not "nrange" to fit with tables of the studentized range
>> distribution.
>> 
>> Can that be - it should be a rather old procedure, so I wonder whether
>> I get something completely wrong...
>> 
>> Regards,
>> Ursula
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> This email and any attachments are confidential and may
>> ...{{dropped:8}}
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jdnewmil at dcn.davis.ca.us  Mon Jul 10 15:52:02 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Mon, 10 Jul 2017 06:52:02 -0700
Subject: [R] dplyr help
In-Reply-To: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>
References: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>
Message-ID: <71B23482-1DD8-4198-95CF-C057F88E17D8@dcn.davis.ca.us>

I am pretty sure that this is not a question about dplyr... it is a question about tidyr. Look at the help file ?tidyr::spread.

If I understand your question (I may not,  because you gave no example of input/output data), the answer is no, the column names come from the column named by the key parameter and the values that fill those columns come from the column named by the value parameter. Modify your data frame to contain both columns before using this function.

When the function is used outside a pipe chain there is also the first argument, the data frame that is being reshaped.

Please post using plain text in the future... this is a plain text mailing list,  and HTML email is what-you-see-is-not-what-we-see.
-- 
Sent from my phone. Please excuse my brevity.

On July 10, 2017 1:29:41 AM PDT, Mangalani Peter Makananisa <pmakananisa at sars.gov.za> wrote:
>HI all,
>
>Is it possible to use one column spread on multiple columns values.
>
>example
>spread( Key_col, value1:value7)
>
>spreading Key_col to variable value1, value2, ....... Value7
>
>Please advise,
>
>Kind regards
>
>Mangalani Peter Makananisa (5786)
>South African Revenue Service (SARS) - HO
>+2782 456 4669 / +2712 422 7357
>
>Please Note: This email and its contents are subject to our email legal
>notice which can be viewed at
>http://www.sars.gov.za/Pages/Email-disclaimer.aspx
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From petr.pikal at precheza.cz  Mon Jul 10 16:27:47 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 10 Jul 2017 14:27:47 +0000
Subject: [R] fit lognorm to cdf data
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D74F@SRVEXCHCM301.precheza.cz>

Dear all

I am struggling to fit data which form something like CDF by lognorm.

Here are my data:

proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
size <- c(0.144, 0.172, 0.272, 0.481, 0.583)
plot(size, proc, xlim=c(0,1), ylim=c(0,1))
fit<-nls(proc~SSfpl(size, 1, 0, xmid, scal), start=list(xmid=0.2, scal=.1))
lines(seq(0,1,.01), predict(fit, newdata=data.frame(sito=seq(0,1,.01))), col=2)

I tried to fit with SSfpl, which is let say close but probably not enough. I tried to find how to fit lognorm CDF to my data but did not find an easy solution.

Before I start to invent wheel I ask for some hints. I thought about using optim together with plnorm or to feed nls with lognorm function but maybe somebody already solved such task.

Best regards
Petr

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From davidsmi at microsoft.com  Mon Jul 10 16:57:12 2017
From: davidsmi at microsoft.com (David Smith)
Date: Mon, 10 Jul 2017 14:57:12 +0000
Subject: [R] Revolutions blog: June 2017 roundup
Message-ID: <BN6PR21MB049735C38A742F9B1D6EE021C8A90@BN6PR21MB0497.namprd21.prod.outlook.com>

Since 2008, Microsoft (formerly Revolution Analytics) staff and guests
have written about R every weekday at the Revolutions blog
(http://blog.revolutionanalytics.com) and every month I post a summary
of articles from the previous month of particular interest to readers
of r-help.

In case you missed them, here are some articles related to R from the
month of June:

R 3.4.1 "Single Candle" has been released:
http://blog.revolutionanalytics.com/2017/06/r-341-single-candle-released.html

The Scientific Computing Coordinator at the FDA explains how R is used at
the FDA and by sponsors for clinical trial submissions:
http://blog.revolutionanalytics.com/2017/06/r-fda.html

Several useful tips related to including images in Rmarkdown documents:
http://blog.revolutionanalytics.com/2017/06/rmarkdown-tricks.html

A review of one of R's best features -- its community:
http://blog.revolutionanalytics.com/2017/06/r-community.html

It's now possible to include interactive visualizations (such as those
created with plotly and htmlwidgets) in Power BI reports:
http://blog.revolutionanalytics.com/2017/06/interactive-r-visuals-in-power-bi.html

The Azure Data Science Virtual Machine for Windows now supports GPU-based
computations with Microsoft R, Tensorflow, and other included software:
http://blog.revolutionanalytics.com/2017/06/dsvm-update.html

The 2017 Burtch Works survey of data science software popularity shows R
leading, Python gaining, and SAS declining:
http://blog.revolutionanalytics.com/2017/06/burtch-works-survey-2017.html

A video presentation by Ali Zaidi on using the sparklyr package with
Microsoft R Server:
http://blog.revolutionanalytics.com/2017/06/sparklyr-r-server.html

The EARL conference in San Francisco featured applications of R at Pandora,
Pfizer, Amgen, Hitachi, and many other companies:
http://blog.revolutionanalytics.com/2017/06/applications-earl-sf-2017.html

A demo of real-time predictions from a model created with Microsoft R, at a
rate of one million predictions per second:
http://blog.revolutionanalytics.com/2017/06/real-time-predictions.html

The R Epidemics Consortium is a coalition of researchers developing
epidemiology resources for R:
http://blog.revolutionanalytics.com/2017/06/r-epidemics-consortium.html

Syberia is a on open-source framework for orchestrating R scripts in
production:
http://blog.revolutionanalytics.com/2017/06/syberia.html

A from-the-basics guide to accessing open APIs from R, from Locke Data:
http://blog.revolutionanalytics.com/2017/06/interfacing-with-apis.html

Highlights of talks from useR!2017 (recordings will be available in late
July):
http://blog.revolutionanalytics.com/2017/06/user2017-schedule.html

The doAzureParallel package provides a backend to "foreach" that spins up a
parallel-processing cluster on Azure incorporating low-cost low-priority
VMs:
http://blog.revolutionanalytics.com/2017/06/doazureparallel-updated.html

A tutorial on creating dot-density maps in R, an alternative to
choropleths:
http://blog.revolutionanalytics.com/2017/06/how-to-create-dot-density-maps-in-r.html

A free 13-page e-book on using Power BI with R:
http://blog.revolutionanalytics.com/2017/06/power-bi-free-e-book.html

Python edges out R for the first time in the 2017 KDnuggets poll of data
science software usage:
http://blog.revolutionanalytics.com/2017/06/python-and-r-top-2017-kdnuggets-rankings.html

The miner package encourages kids to learn to program in R while
manipulating the world of Minecraft with R functions:
http://blog.revolutionanalytics.com/2017/06/teach-kids-about-r-with-minecraft.html

And some general interest stories (not necessarily related to R):

* A NOAA visualization of 15 years of earthquakes around the globe:
  http://blog.revolutionanalytics.com/2017/06/because-its-friday-shake-that-globe.html

* The first Mario World level, created in augmented reality:
  http://blog.revolutionanalytics.com/2017/06/because-its-friday-mario-in-the-park.html

* The "official" ANSI specifications for a dry martini:
  http://blog.revolutionanalytics.com/2017/06/because-its-friday-dry-martini-specifications.html

* A comparison of urban metro systems, as mapped and to scale:
  http://blog.revolutionanalytics.com/2017/06/subway-maps-to-scale.html

* A disappearing dots illusion:
  http://blog.revolutionanalytics.com/2017/06/because-its-friday-disappearing-dots.html

As always, thanks for the comments and please keep sending suggestions to
me at davidsmi at microsoft.com or via Twitter (I'm @revodavid).

Cheers,
# David

-- 
David M Smith <davidsmi at microsoft.com>
R Community Lead, Microsoft? 
Tel: +1 (312) 9205766 (Chicago IL, USA)
Twitter: @revodavid | Blog: ?http://blog.revolutionanalytics.com


From alaios at yahoo.com  Mon Jul 10 11:07:45 2017
From: alaios at yahoo.com (Alaios)
Date: Mon, 10 Jul 2017 09:07:45 +0000 (UTC)
Subject: [R] add a color bar
References: <932064925.2341010.1499677665021.ref@mail.yahoo.com>
Message-ID: <932064925.2341010.1499677665021@mail.yahoo.com>

Hi all,the code you will find at the bottom of the screen creates a 3d diagram of antenna measurements. I am adding also to this Figure a color bar,and I wanted to ask you if I can add a color bar (which package?) that will scale as the windows is maximized. My current color bar is a bit too rought and gets pixelized each time I maximize the window.
Any suggestions?I would like to thank you for your replyRegardsAlex
	[[alternative HTML version deleted]]


From s.atasever at gmail.com  Mon Jul 10 13:17:13 2017
From: s.atasever at gmail.com (Sema Atasever)
Date: Mon, 10 Jul 2017 14:17:13 +0300
Subject: [R] PAM Clustering
Message-ID: <CAAir+CrgLEtGNij57c3TS9KuobYNfxpmUuOzvmzkXMsqXMwtJg@mail.gmail.com>

Dear Authorized Sir / Madam,

I have an R script file in which it includes PAM Clustering codes:

*when i ran R script i am getting this error:*
*Error in pam(d, 10) : x is not a numeric dataframe or matrix.*
*Execution halted*

How can i fix this error?

Thanks in advance.
?
 data.csv
<https://drive.google.com/file/d/0B4rY6f4kvHeCcVpLRTQ5VDhDNUk/view?usp=drive_web>
?

*pam.R*
data <- read.csv2("data.csv")
attach(data)
d=as.matrix(data)
library(cluster)
cluster.pam = pam(d,10)
table(cluster.pam$clustering)

filenameclu = paste("clusters", ".txt")
write.table(cluster.pam$clustering, file=filenameclu,sep=",")

	[[alternative HTML version deleted]]


From yogesh.mpi at googlemail.com  Mon Jul 10 15:24:46 2017
From: yogesh.mpi at googlemail.com (Yogesh Tiwari)
Date: Mon, 10 Jul 2017 18:54:46 +0530
Subject: [R] filtering of CO2 observation time series residuals using FFT
Message-ID: <CABShME0Lwei-bFgaD0HZfjEeDrN2VndiZGJ0L+_CujiF0MMaQQ@mail.gmail.com>

Hi,

I have CO2 observations time series, I can calculate residuals by removing
seasonal cycle and trend. But how to filter residuals using Fast Fourier
Transform (FFT) which transforms the data into the frequency domain. And
then apply a low pass filter function to the frequency data, then transform
the filtered data to the real domain using an inverse FFT.

Can anyone working on carbon cycle research, have R script which can do
above analysis.
You can take example of Mauna Loa CO2 time series and do filtering.

Great Thanks,

Best Regards,
Yogesh

	[[alternative HTML version deleted]]


From eliza_botto1 at outlook.com  Mon Jul 10 14:41:43 2017
From: eliza_botto1 at outlook.com (Eliza B)
Date: Mon, 10 Jul 2017 12:41:43 +0000
Subject: [R] helix spring in R
Message-ID: <DB4PR08MB0111EE1EBC86C4D3844BBF14ABA90@DB4PR08MB0111.eurprd08.prod.outlook.com>

Dear useRs,


Is there a way to draw helix spring in R of desired diameter and number of turns?


regards,


Eliza

	[[alternative HTML version deleted]]


From csilva at ipma.pt  Mon Jul 10 17:31:30 2017
From: csilva at ipma.pt (Cristina Silva)
Date: Mon, 10 Jul 2017 16:31:30 +0100
Subject: [R] Problems with time formats when importing data using
	readHTMLTable
Message-ID: <223271ad-2591-8329-1c3a-32e8fdd3f95c@ipma.pt>

Hi,

I am extracting positions data from the marine traffic website. The 
table has a "Timestamp" column which, in the browser, appears with the 
format yyyy-mm-dd HH:MM (UTC), e.g. 2017-07-10 14:04 (UTC).

When I import the table, the same date "2017-07-10 14:04 (UTC)" appears 
as "1499696500149969650021 minutes ago", This is the more recent date 
and time. Older records, as e.g. "2017-07-09 17:02 (UTC)" appear as e.g. 
"1499619726149961972621 hours, 59 minutes ago".

I don't know how to convert these data to the time formats used in R 
(POSIXct).

The script is very simple and worked before:

library(XML)
x <- readHTMLTable('url')

where the 'url' is the link to the website with the specification of the 
vessel.

I appreciate any help.

Cristina

-- 
Cristina Silva
Divis?o de Modela??o e Gest?o de Recursos Pesqueiros
Av. Dr. Alfredo Magalh?es Ramalho
1495-165 Lisboa
@: csilva at ipma.pt <mailto:csilva at ipma.pt>
#: +351 213027096 <phoneto:+351213027096>


	[[alternative HTML version deleted]]


From dcarlson at tamu.edu  Mon Jul 10 17:37:28 2017
From: dcarlson at tamu.edu (David L Carlson)
Date: Mon, 10 Jul 2017 15:37:28 +0000
Subject: [R] add a color bar
In-Reply-To: <932064925.2341010.1499677665021@mail.yahoo.com>
References: <932064925.2341010.1499677665021.ref@mail.yahoo.com>
 <932064925.2341010.1499677665021@mail.yahoo.com>
Message-ID: <009e43afe61445c7a2c608014ad18dae@exch-2p-mbx-w4.ads.tamu.edu>

The .png file I've attached will show you how to send plain text messages with Yahoo mail. This mailing list is text only so that it can be used by virtually any email client anywhere in the world. Your attachment did not make the trip. The list is picky about attachments and accepts some graphics files and plain text files. Just paste your code into your message or make sure it has a .txt extension. It should include reproducible data so that we can run it. If you cannot send all or part of your data, make something up that illustrates your problem.

Figures plotted on screen are limited to the resolution of a computer screen, pretty low. You probably want to plot to a graphics device that saves the file so that you can specify a higher resolution. The R command

?device

should get you started.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352



-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Alaios via R-help
Sent: Monday, July 10, 2017 4:08 AM
To: R-help Mailing List <r-help at r-project.org>
Subject: [R] add a color bar

Hi all,the code you will find at the bottom of the screen creates a 3d diagram of antenna measurements. I am adding also to this Figure a color bar,and I wanted to ask you if I can add a color bar (which package?) that will scale as the windows is maximized. My current color bar is a bit too rought and gets pixelized each time I maximize the window.
Any suggestions?I would like to thank you for your replyRegardsAlex
	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: YahooPlainText.png
Type: image/png
Size: 56243 bytes
Desc: YahooPlainText.png
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20170710/ba03bb54/attachment.png>

From ulrik.stervbo at gmail.com  Mon Jul 10 17:44:14 2017
From: ulrik.stervbo at gmail.com (Ulrik Stervbo)
Date: Mon, 10 Jul 2017 15:44:14 +0000
Subject: [R] PAM Clustering
In-Reply-To: <CAAir+CrgLEtGNij57c3TS9KuobYNfxpmUuOzvmzkXMsqXMwtJg@mail.gmail.com>
References: <CAAir+CrgLEtGNij57c3TS9KuobYNfxpmUuOzvmzkXMsqXMwtJg@mail.gmail.com>
Message-ID: <CAKVAULPDtcincvKj+NZWNDDtQgdpF75s7OmrT6b-gUQKGTa3yg@mail.gmail.com>

Hi Sema,

read.csv2 use ',' as the decimal separator. Since '.' is used in your file,
everything becomes a character which in turn makes pam complain that what
you pass to the function isn't numeric.

Use read.csv2("data.csv", dec = ".") and it should work.

You can also use class(d) to check the class of the matrix before you pass
it to pam().

See ?read.table for more options.

There is a base function called 'data', so naming a variable data is a poor
choice.

HTH
Ulrik

On Mon, 10 Jul 2017 at 17:25 Sema Atasever <s.atasever at gmail.com> wrote:

> Dear Authorized Sir / Madam,
>
> I have an R script file in which it includes PAM Clustering codes:
>
> *when i ran R script i am getting this error:*
> *Error in pam(d, 10) : x is not a numeric dataframe or matrix.*
> *Execution halted*
>
> How can i fix this error?
>
> Thanks in advance.
> ?
>  data.csv
> <
> https://drive.google.com/file/d/0B4rY6f4kvHeCcVpLRTQ5VDhDNUk/view?usp=drive_web
> >
> ?
>
> *pam.R*
> data <- read.csv2("data.csv")
> attach(data)
> d=as.matrix(data)
> library(cluster)
> cluster.pam = pam(d,10)
> table(cluster.pam$clustering)
>
> filenameclu = paste("clusters", ".txt")
> write.table(cluster.pam$clustering, file=filenameclu,sep=",")
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Mon Jul 10 17:49:55 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Mon, 10 Jul 2017 08:49:55 -0700
Subject: [R] helix spring in R
In-Reply-To: <DB4PR08MB0111EE1EBC86C4D3844BBF14ABA90@DB4PR08MB0111.eurprd08.prod.outlook.com>
References: <DB4PR08MB0111EE1EBC86C4D3844BBF14ABA90@DB4PR08MB0111.eurprd08.prod.outlook.com>
Message-ID: <8CDF5FE5-C16D-4FD5-BF7B-D965AA93C7EE@dcn.davis.ca.us>

This is an excellent opportunity for you to tell us why rseeek.org and Google search results did not address your needs, which may either answer your question without our help or help us to understand your needs better. 

I will also comment that a "spring" is usually more complex than just a "helix", since the pitch gets smaller near the ends, so adding this word may be hindering your chance if getting responses rather than helping.

And learn to post using plain text format. The more complex your question gets, the more important this nitpicky detail becomes. 
-- 
Sent from my phone. Please excuse my brevity.

On July 10, 2017 5:41:43 AM PDT, Eliza B <eliza_botto1 at outlook.com> wrote:
>Dear useRs,
>
>
>Is there a way to draw helix spring in R of desired diameter and number
>of turns?
>
>
>regards,
>
>
>Eliza
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From murdoch.duncan at gmail.com  Mon Jul 10 18:05:22 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 10 Jul 2017 12:05:22 -0400
Subject: [R] helix spring in R
In-Reply-To: <DB4PR08MB0111EE1EBC86C4D3844BBF14ABA90@DB4PR08MB0111.eurprd08.prod.outlook.com>
References: <DB4PR08MB0111EE1EBC86C4D3844BBF14ABA90@DB4PR08MB0111.eurprd08.prod.outlook.com>
Message-ID: <b686b2e9-ed53-17d2-cc45-812913249102@gmail.com>

On 10/07/2017 8:41 AM, Eliza B wrote:
> Dear useRs,
>
>
> Is there a way to draw helix spring in R of desired diameter and number of turns?

Yes, use rgl's cylinder3d function.  (Or lines3d if you don't want any 
volume.)

Duncan Murdoch


From jdnewmil at dcn.davis.ca.us  Mon Jul 10 18:18:05 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Mon, 10 Jul 2017 09:18:05 -0700
Subject: [R] Problems with time formats when importing data
	using	readHTMLTable
In-Reply-To: <223271ad-2591-8329-1c3a-32e8fdd3f95c@ipma.pt>
References: <223271ad-2591-8329-1c3a-32e8fdd3f95c@ipma.pt>
Message-ID: <117323A0-FFF3-4B1C-B087-13AA9128A097@dcn.davis.ca.us>

Not reproducible. [1][2][3] If our answers don't seem to apply to your situation, it will likely be because you did not explain your question clearly. 

Not plain text. This is a plain text mailing list,  and the best-case scenario when you let your email program send HTML is that what you saw is not what we see (worst case is your email is scrambled on our end).

Have you read the documentation for the function you are using? In particular, what about the colClasses argument? If you don't let readHTMLTable guess what the format is (have it read in as character data) then you have a fighting chance to get it right yourself, e.g.

as.POSIXct( "2017-07-10 14:04 (UTC)", format="%Y-%m-%d %H:%M (UTC)", tz="UTC" )

-----

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html
-- 
Sent from my phone. Please excuse my brevity.

On July 10, 2017 8:31:30 AM PDT, Cristina Silva <csilva at ipma.pt> wrote:
>Hi,
>
>I am extracting positions data from the marine traffic website. The 
>table has a "Timestamp" column which, in the browser, appears with the 
>format yyyy-mm-dd HH:MM (UTC), e.g. 2017-07-10 14:04 (UTC).
>
>When I import the table, the same date "2017-07-10 14:04 (UTC)" appears
>
>as "1499696500149969650021 minutes ago", This is the more recent date 
>and time. Older records, as e.g. "2017-07-09 17:02 (UTC)" appear as
>e.g. 
>"1499619726149961972621 hours, 59 minutes ago".
>
>I don't know how to convert these data to the time formats used in R 
>(POSIXct).
>
>The script is very simple and worked before:
>
>library(XML)
>x <- readHTMLTable('url')
>
>where the 'url' is the link to the website with the specification of
>the 
>vessel.
>
>I appreciate any help.
>
>Cristina
>
>-- 
>Cristina Silva
>Divis?o de Modela??o e Gest?o de Recursos Pesqueiros
>Av. Dr. Alfredo Magalh?es Ramalho
>1495-165 Lisboa
>@: csilva at ipma.pt <mailto:csilva at ipma.pt>
>#: +351 213027096 <phoneto:+351213027096>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Mon Jul 10 21:55:20 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Mon, 10 Jul 2017 12:55:20 -0700
Subject: [R] fit lognorm to cdf data
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D74F@SRVEXCHCM301.precheza.cz>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D74F@SRVEXCHCM301.precheza.cz>
Message-ID: <3F920C6F-0158-4E7A-9B50-03CEF2F39F16@dcn.davis.ca.us>

* fitdistr?

* it seems unusual (to me) to fit directly to the data with lognormal... fitting a normal to the log of the data seems more in keeping with the assumptions associated with that distribution.
-- 
Sent from my phone. Please excuse my brevity.

On July 10, 2017 7:27:47 AM PDT, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>Dear all
>
>I am struggling to fit data which form something like CDF by lognorm.
>
>Here are my data:
>
>proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
>size <- c(0.144, 0.172, 0.272, 0.481, 0.583)
>plot(size, proc, xlim=c(0,1), ylim=c(0,1))
>fit<-nls(proc~SSfpl(size, 1, 0, xmid, scal), start=list(xmid=0.2,
>scal=.1))
>lines(seq(0,1,.01), predict(fit,
>newdata=data.frame(sito=seq(0,1,.01))), col=2)
>
>I tried to fit with SSfpl, which is let say close but probably not
>enough. I tried to find how to fit lognorm CDF to my data but did not
>find an easy solution.
>
>Before I start to invent wheel I ask for some hints. I thought about
>using optim together with plnorm or to feed nls with lognorm function
>but maybe somebody already solved such task.
>
>Best regards
>Petr
>
>________________________________
>Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou
>ur?eny pouze jeho adres?t?m.
>Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav?
>neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho
>kopie vyma?te ze sv?ho syst?mu.
>Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento
>email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
>Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou
>modifikacemi ?i zpo?d?n?m p?enosu e-mailu.
>
>V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
>- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en?
>smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
>- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn?
>p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky
>ze strany p??jemce s dodatkem ?i odchylkou.
>- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve
>v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
>- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za
>spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn?
>zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly
>adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje,
>p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen?
>zn?m?.
>
>This e-mail and any documents attached to it may be confidential and
>are intended only for its intended recipients.
>If you received this e-mail by mistake, please immediately inform its
>sender. Delete the contents of this e-mail with all attachments and its
>copies from your system.
>If you are not the intended recipient of this e-mail, you are not
>authorized to use, disseminate, copy or disclose this e-mail in any
>manner.
>The sender of this e-mail shall not be liable for any possible damage
>caused by modifications of the e-mail or by delay with transfer of the
>email.
>
>In case that this e-mail forms part of business dealings:
>- the sender reserves the right to end negotiations about entering into
>a contract in any time, for any reason, and without stating any
>reasoning.
>- if the e-mail contains an offer, the recipient is entitled to
>immediately accept such offer; The sender of this e-mail (offer)
>excludes any acceptance of the offer on the part of the recipient
>containing any amendment or variation.
>- the sender insists on that the respective contract is concluded only
>upon an express mutual agreement on all its aspects.
>- the sender of this e-mail informs that he/she is not authorized to
>enter into any contracts on behalf of the company except for cases in
>which he/she is expressly authorized to do so in writing, and such
>authorization or power of attorney is submitted to the recipient or the
>person represented by the recipient, or the existence of such
>authorization is known to the recipient of the person represented by
>the recipient.
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From pdalgd at gmail.com  Tue Jul 11 01:10:30 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Tue, 11 Jul 2017 01:10:30 +0200
Subject: [R] fit lognorm to cdf data
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D74F@SRVEXCHCM301.precheza.cz>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D74F@SRVEXCHCM301.precheza.cz>
Message-ID: <487C89F9-45FB-4A69-9DCE-32A10936EEB9@gmail.com>

How about

proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
size <- c(0.144, 0.172, 0.272, 0.481, 0.583)
plot(size, proc, xlim=c(0,1), ylim=c(0,1))
fit<-nls(proc~plnorm(size, log(xmid), sdlog, lower=FALSE), start=list(xmid=0.2, sdlog=.1))
summary(fit)
lines(fitted(fit)~size)

-pd

> On 10 Jul 2017, at 16:27 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
> 
> Dear all
> 
> I am struggling to fit data which form something like CDF by lognorm.
> 
> Here are my data:
> 
> proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
> size <- c(0.144, 0.172, 0.272, 0.481, 0.583)
> plot(size, proc, xlim=c(0,1), ylim=c(0,1))
> fit<-nls(proc~SSfpl(size, 1, 0, xmid, scal), start=list(xmid=0.2, scal=.1))
> lines(seq(0,1,.01), predict(fit, newdata=data.frame(sito=seq(0,1,.01))), col=2)
> 
> I tried to fit with SSfpl, which is let say close but probably not enough. I tried to find how to fit lognorm CDF to my data but did not find an easy solution.
> 
> Before I start to invent wheel I ask for some hints. I thought about using optim together with plnorm or to feed nls with lognorm function but maybe somebody already solved such task.
> 
> Best regards
> Petr
> 
> ________________________________
> Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
> Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
> Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
> Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.
> 
> V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
> - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
> - a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
> - trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
> - odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.
> 
> This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
> If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
> If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
> The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.
> 
> In case that this e-mail forms part of business dealings:
> - the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
> - if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
> - the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
> - the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From Ursula.Garczarek at cytel.com  Mon Jul 10 19:12:45 2017
From: Ursula.Garczarek at cytel.com (Ursula Garczarek)
Date: Mon, 10 Jul 2017 17:12:45 +0000
Subject: [R] Help documentation of "The Studentized range Distribution"
In-Reply-To: <DC14D9CE-3D7D-4938-815B-DFCF04A47147@gmail.com>
References: <7d0c904224f44ea193f2f55d09df8fe6@CYT000-EX01.cytel.com>
 <BE5FA132-3F77-43D7-A2B9-6031D96B435F@dcn.davis.ca.us>
 <DC14D9CE-3D7D-4938-815B-DFCF04A47147@gmail.com>
Message-ID: <6a72429bb219460888fbc0f7f5b4261f@CYT000-EX01.cytel.com>

Dear Peter and Jeff,

I admit I was not precise in what I really wanted. It was more a report that the documentation is confusing, than really asking for help. Still, I was only 97% sure that it was not my fault, so I remained cautious.

So, my suggestion would be to say under the header usage just as it is now:

ptukey(q, nmeans, df, nranges = 1, lower.tail = TRUE, log.p = FALSE)
qtukey(p, nmeans, df, nranges = 1, lower.tail = TRUE, log.p = FALSE)

but in the description of parameters

qnow and future: vector of quantiles
pnow and future: vector of probabilities
nmeansnow: sample size for range (same for each group) future: number of means resp. groups of which the mean is compared
dfnow: degrees of freedom for s (see below)future: degrees of freedom for the estimation of the pooled variance
(Ursula's comment: "see below" is not true, I was looking for it...)
Nranges: now: number of groups whose maximum range is considered future: ????? (nmeans*(nmeans-1)/2)??????


The description for Nranges actually was putting me on the wrong foot as to me the description really sounds like what is really nmeans. I still am not sure what this parameter does, as in my context it does not seem to be necessary.

The example I worked through is in context of post-hoc testing in an one way balanced ANOVA and for all pairwise comparisons

With 5 groups, and n=10 subjects per group, and a significance level of a=0.95 one would use a critical value of

C = qtukey(0.95, nmeans=5, df = 5*(10-1)) /sqrt(2) = 4.01842 /sqrt(2)

(Example from SAS documentation on multiple comparison procedures)

I also checked against a tabulation in my old statistic books for more examples, and thus was pretty sure that nmeans is the number of means and nranges is something else, which you do not really specify for the post-hoc testing.


And my actual code so far is:
library(tidyverse)

g=2:10
alpha=c(0.025,0.05)
n=10:50
delta = 1
(grid <- expand.grid(alpha,g,n))

dt <- grid %>% as_tibble()
names(dt) <- c("Var1" = "alpha", "Var2" = "ngroups", "Var3" = "nIngroups")


dt <- dt %>% mutate(ctuk = 1/sqrt(2) * qtukey(1-alpha, ngroups, ngroups*(nIngroups-1)))
dt <- dt %>% mutate(cbon = qt(1-alpha/(ngroups*(ngroups-1)),ngroups*(nIngroups-1)))
dtwide <- dt %>% mutate(cnon = qt(1-alpha/2,ngroups*(nIngroups-1)))
dtlong <- dtwide %>% gather(method,cvalue,cnon,cbon,ctuk)

Hope this is better!

Kind regards,

Ursula

-----Original Message-----
From: peter dalgaard [mailto:pdalgd at gmail.com]
Sent: 10 July 2017 11:46
To: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Cc: R-help Mailing List <r-help at r-project.org>; Ursula Garczarek <Ursula.Garczarek at cytel.com>
Subject: Re: [R] Help documentation of "The Studentized range Distribution"

Well, it is clear enough that the problem is in interpreting the documentation. However, when you claim you tested something, and found it inconsistent with tables, it would be advisable to back it up with examples!

The description in the help files and in the sources is admittedly confusing. The original paper has this, rather more clear, description in the abstract:

"We consider the probability distribution of the maximum of r statistics each distributed as the Studentized range of means calculated from c random samples of size n from normal populations. The rc samples are assumed to be mutually independent and a common pooled?within?samplevariance is used throughout."

So the connection is nranges == r, and nmeans == c. (n never actually factors in because sqrt(n) is part of the standardization)

For the typical application, r is 1 for the usual studentized range distribution. E.g. for two large groups:

> qtukey(.95,2,df=Inf)
[1] 2.771808

As there is only one difference to consider, this should be distributed like the absolute value of the difference between two standard normals, and yes: We get our old friend 1.96 from

> qtukey(.95,2,df=Inf)/sqrt(2)
[1] 1.959964

It is less than fortunate that the help file speaks of "sample size for range". It is marginally defensible, because it is about the standardized range of a sample _of means_, but it is likely to confuse the actual reader into believing that it has to do with the sample size for each mean.

-pd

> On 10 Jul 2017, at 05:04 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> We cannot help you understand what you are doing if you do not show us what you are doing.  Here are some discussions about how to communicate questions about R [1][2][3].
>
> [1]
> http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-repro
> ducible-example
>
> [2] http://adv-r.had.co.nz/Reproducibility.html
>
> [3] https://cran.r-project.org/web/packages/reprex/index.html
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 6, 2017 11:36:47 AM PDT, Ursula Garczarek <Ursula.Garczarek at cytel.com> wrote:
>> Dear all,
>> I wanted to compare Bonferroni vs TukeyHSD correction over a range of
>> groups and group sizes, and wanted to use the function qtukey.
>>
>> In the help documentation it says
>>
>> qtukey(p, nmeans, df, nranges = 1, lower.tail = TRUE, log.p = FALSE)
>> Arguments q
>>
>> vector of quantiles.
>>
>> p
>>
>> vector of probabilities.
>>
>> nmeans
>>
>> sample size for range (same for each group).
>>
>> df
>>
>> degrees of freedom for s (see below).
>>
>> nranges
>>
>> number of groups whose maximum range is considered.
>>
>> log.p
>>
>> logical; if TRUE, probabilities p are given as log(p).
>>
>> lower.tail
>>
>> logical; if TRUE (default), probabilities are P[X   x], otherwise,
>> P[X
>>> x].
>>
>>
>> But when I test it, "nmeans" actually should be the number of groups,
>> and not "nrange" to fit with tables of the studentized range
>> distribution.
>>
>> Can that be - it should be a rather old procedure, so I wonder
>> whether I get something completely wrong...
>>
>> Regards,
>> Ursula
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> This email and any attachments are confidential and may
>> ...{{dropped:8}}
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com









This email and any attachments are confidential and may be legally privileged. If you received this e-mail in error, please notify the sender immediately by return e-mail and delete this message and any attachments. You may contact Cytel Inc by visiting www.cytel.com/about-us/.

From petr.pikal at precheza.cz  Tue Jul 11 07:16:39 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Tue, 11 Jul 2017 05:16:39 +0000
Subject: [R] fit lognorm to cdf data
In-Reply-To: <487C89F9-45FB-4A69-9DCE-32A10936EEB9@gmail.com>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D74F@SRVEXCHCM301.precheza.cz>
 <487C89F9-45FB-4A69-9DCE-32A10936EEB9@gmail.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D7B9@SRVEXCHCM301.precheza.cz>

Hi

Great. I did not think that such combination is posssible.

Thanks.
Petr

> -----Original Message-----
> From: peter dalgaard [mailto:pdalgd at gmail.com]
> Sent: Tuesday, July 11, 2017 1:11 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: r-help at r-project.org
> Subject: Re: [R] fit lognorm to cdf data
>
> How about
>
> proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
> size <- c(0.144, 0.172, 0.272, 0.481, 0.583)
> plot(size, proc, xlim=c(0,1), ylim=c(0,1))
> fit<-nls(proc~plnorm(size, log(xmid), sdlog, lower=FALSE), start=list(xmid=0.2,
> sdlog=.1))
> summary(fit)
> lines(fitted(fit)~size)
>
> -pd
>
> > On 10 Jul 2017, at 16:27 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Dear all
> >
> > I am struggling to fit data which form something like CDF by lognorm.
> >
> > Here are my data:
> >
> > proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
> > size <- c(0.144, 0.172, 0.272, 0.481, 0.583)
> > plot(size, proc, xlim=c(0,1), ylim=c(0,1))
> > fit<-nls(proc~SSfpl(size, 1, 0, xmid, scal), start=list(xmid=0.2, scal=.1))
> > lines(seq(0,1,.01), predict(fit, newdata=data.frame(sito=seq(0,1,.01))), col=2)
> >
> > I tried to fit with SSfpl, which is let say close but probably not enough. I tried
> to find how to fit lognorm CDF to my data but did not find an easy solution.
> >
> > Before I start to invent wheel I ask for some hints. I thought about using
> optim together with plnorm or to feed nls with lognorm function but maybe
> somebody already solved such task.
> >
> > Best regards
> > Petr
> >
> > ________________________________
> > Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou
> ur?eny pouze jeho adres?t?m.
> > Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen?
> jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze
> sv?ho syst?mu.
> > Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email
> jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
> > Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi
> ?i zpo?d?n?m p?enosu e-mailu.
> >
> > V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
> > - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a
> to z jak?hokoliv d?vodu i bez uveden? d?vodu.
> > - a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout;
> Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s
> dodatkem ?i odchylkou.
> > - trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m
> dosa?en?m shody na v?ech jej?ch n?le?itostech.
> > - odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost
> ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo
> p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto
> emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich
> existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.
> >
> > This e-mail and any documents attached to it may be confidential and are
> intended only for its intended recipients.
> > If you received this e-mail by mistake, please immediately inform its sender.
> Delete the contents of this e-mail with all attachments and its copies from your
> system.
> > If you are not the intended recipient of this e-mail, you are not authorized to
> use, disseminate, copy or disclose this e-mail in any manner.
> > The sender of this e-mail shall not be liable for any possible damage caused
> by modifications of the e-mail or by delay with transfer of the email.
> >
> > In case that this e-mail forms part of business dealings:
> > - the sender reserves the right to end negotiations about entering into a
> contract in any time, for any reason, and without stating any reasoning.
> > - if the e-mail contains an offer, the recipient is entitled to immediately
> accept such offer; The sender of this e-mail (offer) excludes any acceptance of
> the offer on the part of the recipient containing any amendment or variation.
> > - the sender insists on that the respective contract is concluded only upon an
> express mutual agreement on all its aspects.
> > - the sender of this e-mail informs that he/she is not authorized to enter into
> any contracts on behalf of the company except for cases in which he/she is
> expressly authorized to do so in writing, and such authorization or power of
> attorney is submitted to the recipient or the person represented by the
> recipient, or the existence of such authorization is known to the recipient of the
> person represented by the recipient.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>


________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From petr.pikal at precheza.cz  Tue Jul 11 07:29:19 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Tue, 11 Jul 2017 05:29:19 +0000
Subject: [R] fit lognorm to cdf data
In-Reply-To: <3F920C6F-0158-4E7A-9B50-03CEF2F39F16@dcn.davis.ca.us>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D74F@SRVEXCHCM301.precheza.cz>
 <3F920C6F-0158-4E7A-9B50-03CEF2F39F16@dcn.davis.ca.us>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D7E2@SRVEXCHCM301.precheza.cz>

Hi

I thought that fitdistr is used when I have original data, something like

dat <- rlnorm(1000)

but I have just five values (proc, size) as showed in my example. Actually those data are similar like results from sieving for which I can use package sievetest but as they do not follow Rosin Rammler distribution the results were unsatisfactory. Therefore I wanted to try fit lognormal for which Peter gave me answer.

Thanks.
Petr

> -----Original Message-----
> From: Jeff Newmiller [mailto:jdnewmil at dcn.davis.ca.us]
> Sent: Monday, July 10, 2017 9:55 PM
> To: r-help at r-project.org; PIKAL Petr <petr.pikal at precheza.cz>; r-help at r-
> project.org
> Subject: Re: [R] fit lognorm to cdf data
>
> * fitdistr?
>
> * it seems unusual (to me) to fit directly to the data with lognormal... fitting a
> normal to the log of the data seems more in keeping with the assumptions
> associated with that distribution.
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 10, 2017 7:27:47 AM PDT, PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >Dear all
> >
> >I am struggling to fit data which form something like CDF by lognorm.
> >
> >Here are my data:
> >
> >proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
> >size <- c(0.144, 0.172, 0.272, 0.481, 0.583) plot(size, proc,
> >xlim=c(0,1), ylim=c(0,1)) fit<-nls(proc~SSfpl(size, 1, 0, xmid, scal),
> >start=list(xmid=0.2,
> >scal=.1))
> >lines(seq(0,1,.01), predict(fit,
> >newdata=data.frame(sito=seq(0,1,.01))), col=2)
> >
> >I tried to fit with SSfpl, which is let say close but probably not
> >enough. I tried to find how to fit lognorm CDF to my data but did not
> >find an easy solution.
> >
> >Before I start to invent wheel I ask for some hints. I thought about
> >using optim together with plnorm or to feed nls with lognorm function
> >but maybe somebody already solved such task.
> >
> >Best regards
> >Petr
> >
> >________________________________

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From pmakananisa at sars.gov.za  Tue Jul 11 09:56:45 2017
From: pmakananisa at sars.gov.za (Mangalani Peter Makananisa)
Date: Tue, 11 Jul 2017 07:56:45 +0000
Subject: [R] dplyr help
In-Reply-To: <71B23482-1DD8-4198-95CF-C057F88E17D8@dcn.davis.ca.us>
References: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>
 <71B23482-1DD8-4198-95CF-C057F88E17D8@dcn.davis.ca.us>
Message-ID: <6c62d2f9d0f746b2be210be8868daa84@PTABREXC04.sars.gov.za>

Thank you very much for the support.  I have just used the reshape library and my problem was solved.

Kind regards,

Peter

-----Original Message-----
From: Jeff Newmiller [mailto:jdnewmil at dcn.davis.ca.us] 
Sent: 10 July 2017 03:52 PM
To: r-help at r-project.org; Mangalani Peter Makananisa; r-help at r-project.org
Cc: Vito Ricci (vito_ricci at yahoo.com)
Subject: Re: [R] dplyr help

I am pretty sure that this is not a question about dplyr... it is a question about tidyr. Look at the help file ?tidyr::spread.

If I understand your question (I may not,  because you gave no example of input/output data), the answer is no, the column names come from the column named by the key parameter and the values that fill those columns come from the column named by the value parameter. Modify your data frame to contain both columns before using this function.

When the function is used outside a pipe chain there is also the first argument, the data frame that is being reshaped.

Please post using plain text in the future... this is a plain text mailing list,  and HTML email is what-you-see-is-not-what-we-see.
--
Sent from my phone. Please excuse my brevity.

On July 10, 2017 1:29:41 AM PDT, Mangalani Peter Makananisa <pmakananisa at sars.gov.za> wrote:
>HI all,
>
>Is it possible to use one column spread on multiple columns values.
>
>example
>spread( Key_col, value1:value7)
>
>spreading Key_col to variable value1, value2, ....... Value7
>
>Please advise,
>
>Kind regards
>
>Mangalani Peter Makananisa (5786)
>South African Revenue Service (SARS) - HO
>+2782 456 4669 / +2712 422 7357
>
>Please Note: This email and its contents are subject to our email legal 
>notice which can be viewed at 
>http://www.sars.gov.za/Pages/Email-disclaimer.aspx
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

Please Note: This email and its contents are subject to our email legal notice which can be viewed at http://www.sars.gov.za/Pages/Email-disclaimer.aspx

	[[alternative HTML version deleted]]


From pmakananisa at sars.gov.za  Tue Jul 11 09:57:27 2017
From: pmakananisa at sars.gov.za (Mangalani Peter Makananisa)
Date: Tue, 11 Jul 2017 07:57:27 +0000
Subject: [R] dplyr help
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8C699@SRVEXCHCM301.precheza.cz>
References: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8C699@SRVEXCHCM301.precheza.cz>
Message-ID: <3f6f3d4703ad4f49b8cabaca25b50f18@PTABREXC04.sars.gov.za>

Thank you very much for the support.  I just used the reshape library and my problem was solved.

Kind regards,

Peter

-----Original Message-----
From: PIKAL Petr [mailto:petr.pikal at precheza.cz] 
Sent: 10 July 2017 11:17 AM
To: Mangalani Peter Makananisa; r-help at r-project.org
Cc: Vito Ricci (vito_ricci at yahoo.com)
Subject: RE: dplyr help

Hi

something like

dcast(temp2, minuty~pokus)
?

> dput(temp2)
structure(list(pokus = structure(c(1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 5L, 5L, 6L, 6L, 7L, 7L, 8L, 8L ), .Label = c("T42", "T43", "T44", "T45", "T46", "T47", "T48", "T49"), class = "factor"), minuty = structure(c(2L, 3L, 4L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 2L, 3L, 4L, 2L, 3L, 2L, 3L, 2L, 3L, 2L, 3L), .Label = c("180", "240", "300", "360", "420", "480"
), class = "factor")), .Names = c("pokus", "minuty"), row.names = c(NA, -23L), class = "data.frame")

Cheers
Petr


> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of 
> Mangalani Peter Makananisa
> Sent: Monday, July 10, 2017 10:30 AM
> To: r-help at r-project.org
> Cc: Vito Ricci (vito_ricci at yahoo.com) <vito_ricci at yahoo.com>
> Subject: [R] dplyr help
>
> HI all,
>
> Is it possible to use one column spread on multiple columns values.
>
> example
> spread( Key_col, value1:value7)
>
> spreading Key_col to variable value1, value2, ....... Value7
>
> Please advise,
>
> Kind regards
>
> Mangalani Peter Makananisa (5786)
> South African Revenue Service (SARS) - HO
> +2782 456 4669 / +2712 422 7357
>
> Please Note: This email and its contents are subject to our email 
> legal notice which can be viewed at 
> http://www.sars.gov.za/Pages/Email-disclaimer.aspx
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

Please Note: This email and its contents are subject to our email legal notice which can be viewed at http://www.sars.gov.za/Pages/Email-disclaimer.aspx

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Tue Jul 11 13:45:03 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 11 Jul 2017 04:45:03 -0700
Subject: [R] dplyr help
In-Reply-To: <6c62d2f9d0f746b2be210be8868daa84@PTABREXC04.sars.gov.za>
References: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>
 <71B23482-1DD8-4198-95CF-C057F88E17D8@dcn.davis.ca.us>
 <6c62d2f9d0f746b2be210be8868daa84@PTABREXC04.sars.gov.za>
Message-ID: <D3276DA3-8349-49A7-867A-EB15B9BF5AF1@dcn.davis.ca.us>

A better thanks would be to post the solution that met your needs... particularly since in spite of our efforts it appears we may not have understood your problem. A small sample data set generated with dput along with your code would be helpful in making sure others learn along with you. 
-- 
Sent from my phone. Please excuse my brevity.

On July 11, 2017 12:56:45 AM PDT, Mangalani Peter Makananisa <pmakananisa at sars.gov.za> wrote:
>Thank you very much for the support.  I have just used the reshape
>library and my problem was solved.
>
>Kind regards,
>
>Peter
>
>-----Original Message-----
>From: Jeff Newmiller [mailto:jdnewmil at dcn.davis.ca.us] 
>Sent: 10 July 2017 03:52 PM
>To: r-help at r-project.org; Mangalani Peter Makananisa;
>r-help at r-project.org
>Cc: Vito Ricci (vito_ricci at yahoo.com)
>Subject: Re: [R] dplyr help
>
>I am pretty sure that this is not a question about dplyr... it is a
>question about tidyr. Look at the help file ?tidyr::spread.
>
>If I understand your question (I may not,  because you gave no example
>of input/output data), the answer is no, the column names come from the
>column named by the key parameter and the values that fill those
>columns come from the column named by the value parameter. Modify your
>data frame to contain both columns before using this function.
>
>When the function is used outside a pipe chain there is also the first
>argument, the data frame that is being reshaped.
>
>Please post using plain text in the future... this is a plain text
>mailing list,  and HTML email is what-you-see-is-not-what-we-see.
>--
>Sent from my phone. Please excuse my brevity.
>
>On July 10, 2017 1:29:41 AM PDT, Mangalani Peter Makananisa
><pmakananisa at sars.gov.za> wrote:
>>HI all,
>>
>>Is it possible to use one column spread on multiple columns values.
>>
>>example
>>spread( Key_col, value1:value7)
>>
>>spreading Key_col to variable value1, value2, ....... Value7
>>
>>Please advise,
>>
>>Kind regards
>>
>>Mangalani Peter Makananisa (5786)
>>South African Revenue Service (SARS) - HO
>>+2782 456 4669 / +2712 422 7357
>>
>>Please Note: This email and its contents are subject to our email
>legal 
>>notice which can be viewed at 
>>http://www.sars.gov.za/Pages/Email-disclaimer.aspx
>>
>>	[[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>Please Note: This email and its contents are subject to our email legal
>notice which can be viewed at
>http://www.sars.gov.za/Pages/Email-disclaimer.aspx


From pdalgd at gmail.com  Tue Jul 11 15:24:31 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Tue, 11 Jul 2017 15:24:31 +0200
Subject: [R] fit lognorm to cdf data
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D7B9@SRVEXCHCM301.precheza.cz>
References: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D74F@SRVEXCHCM301.precheza.cz>
 <487C89F9-45FB-4A69-9DCE-32A10936EEB9@gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFA8D7B9@SRVEXCHCM301.precheza.cz>
Message-ID: <177CABB1-151F-4AE9-B99B-AFC35E9362A7@gmail.com>

You can have any expression on the RHS, and list the parameters to optimize over in start=. The only reason to restrict to SSfpl and friends is that they are SelfStarting, i.e., they contain methods to compute reasonable starting values, but you were giving start= anyway.

- pd

> On 11 Jul 2017, at 07:16 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
> 
> Hi
> 
> Great. I did not think that such combination is posssible.
> 
> Thanks.
> Petr
> 
>> -----Original Message-----
>> From: peter dalgaard [mailto:pdalgd at gmail.com]
>> Sent: Tuesday, July 11, 2017 1:11 AM
>> To: PIKAL Petr <petr.pikal at precheza.cz>
>> Cc: r-help at r-project.org
>> Subject: Re: [R] fit lognorm to cdf data
>> 
>> How about
>> 
>> proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
>> size <- c(0.144, 0.172, 0.272, 0.481, 0.583)
>> plot(size, proc, xlim=c(0,1), ylim=c(0,1))
>> fit<-nls(proc~plnorm(size, log(xmid), sdlog, lower=FALSE), start=list(xmid=0.2,
>> sdlog=.1))
>> summary(fit)
>> lines(fitted(fit)~size)
>> 
>> -pd
>> 
>>> On 10 Jul 2017, at 16:27 , PIKAL Petr <petr.pikal at precheza.cz> wrote:
>>> 
>>> Dear all
>>> 
>>> I am struggling to fit data which form something like CDF by lognorm.
>>> 
>>> Here are my data:
>>> 
>>> proc <- c(0.9, 0.84, 0.5, 0.16, 0.1)
>>> size <- c(0.144, 0.172, 0.272, 0.481, 0.583)
>>> plot(size, proc, xlim=c(0,1), ylim=c(0,1))
>>> fit<-nls(proc~SSfpl(size, 1, 0, xmid, scal), start=list(xmid=0.2, scal=.1))
>>> lines(seq(0,1,.01), predict(fit, newdata=data.frame(sito=seq(0,1,.01))), col=2)
>>> 
>>> I tried to fit with SSfpl, which is let say close but probably not enough. I tried
>> to find how to fit lognorm CDF to my data but did not find an easy solution.
>>> 
>>> Before I start to invent wheel I ask for some hints. I thought about using
>> optim together with plnorm or to feed nls with lognorm function but maybe
>> somebody already solved such task.
>>> 
>>> Best regards
>>> Petr
>>> 
>>> ________________________________
>>> Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou
>> ur?eny pouze jeho adres?t?m.
>>> Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen?
>> jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze
>> sv?ho syst?mu.
>>> Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email
>> jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
>>> Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi
>> ?i zpo?d?n?m p?enosu e-mailu.
>>> 
>>> V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
>>> - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a
>> to z jak?hokoliv d?vodu i bez uveden? d?vodu.
>>> - a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout;
>> Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s
>> dodatkem ?i odchylkou.
>>> - trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m
>> dosa?en?m shody na v?ech jej?ch n?le?itostech.
>>> - odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost
>> ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo
>> p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto
>> emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich
>> existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.
>>> 
>>> This e-mail and any documents attached to it may be confidential and are
>> intended only for its intended recipients.
>>> If you received this e-mail by mistake, please immediately inform its sender.
>> Delete the contents of this e-mail with all attachments and its copies from your
>> system.
>>> If you are not the intended recipient of this e-mail, you are not authorized to
>> use, disseminate, copy or disclose this e-mail in any manner.
>>> The sender of this e-mail shall not be liable for any possible damage caused
>> by modifications of the e-mail or by delay with transfer of the email.
>>> 
>>> In case that this e-mail forms part of business dealings:
>>> - the sender reserves the right to end negotiations about entering into a
>> contract in any time, for any reason, and without stating any reasoning.
>>> - if the e-mail contains an offer, the recipient is entitled to immediately
>> accept such offer; The sender of this e-mail (offer) excludes any acceptance of
>> the offer on the part of the recipient containing any amendment or variation.
>>> - the sender insists on that the respective contract is concluded only upon an
>> express mutual agreement on all its aspects.
>>> - the sender of this e-mail informs that he/she is not authorized to enter into
>> any contracts on behalf of the company except for cases in which he/she is
>> expressly authorized to do so in writing, and such authorization or power of
>> attorney is submitted to the recipient or the person represented by the
>> recipient, or the existence of such authorization is known to the recipient of the
>> person represented by the recipient.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-
>> guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> --
>> Peter Dalgaard, Professor,
>> Center for Statistics, Copenhagen Business School
>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>> Phone: (+45)38153501
>> Office: A 4.23
>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
> 
> 
> ________________________________
> Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
> Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
> Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
> Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.
> 
> V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
> - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
> - a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
> - trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
> - odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.
> 
> This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
> If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
> If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
> The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.
> 
> In case that this e-mail forms part of business dealings:
> - the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
> - if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
> - the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
> - the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From csilva at ipma.pt  Tue Jul 11 15:25:26 2017
From: csilva at ipma.pt (Cristina Silva)
Date: Tue, 11 Jul 2017 14:25:26 +0100
Subject: [R] Problems with time formats when importing data using
 readHTMLTable
In-Reply-To: <117323A0-FFF3-4B1C-B087-13AA9128A097@dcn.davis.ca.us>
References: <223271ad-2591-8329-1c3a-32e8fdd3f95c@ipma.pt>
 <117323A0-FFF3-4B1C-B087-13AA9128A097@dcn.davis.ca.us>
Message-ID: <bbb6a2c52adfc737bd699f03603a7f58@ipma.pt>

Dear Jeff,

I am sorry, I didn't notice that it was not plain text. I hope that it 
is now in the correct format. I explain the problem again, now with more 
detais.
I am collecting the track positions of our research vessel from 
www.marinetraffic.com.  In the page, the data appear in a table:

Timestamp     Source     Speed (kn)     Latitude (?) Longitude (?)     
Course (?)     Show on Map
2017-07-11 10:57 (UTC)    Terr-AIS     8.6    37.36228 -9.176811    200
2017-07-11 10:54 (UTC)    Terr-AIS     8.4    37.36875 -9.174048    200
2017-07-11 09:50 (UTC)    Terr-AIS     8    37.51499 -9.184502    149
2017-07-11 09:08 (UTC)    Terr-AIS     7.7    37.60513 -9.228263    169
2017-07-11 09:05 (UTC)    Terr-AIS     8    37.61168 -9.229627    167
2017-07-11 09:03 (UTC)    Terr-AIS     6.9    37.61626 -9.230456    132
2017-07-11 08:59 (UTC)    Terr-AIS     3.4    37.61758 -9.237928    101
2017-07-11 08:57 (UTC)    Terr-AIS     3.6    37.61808 -9.240235    116
2017-07-11 08:47 (UTC)    Terr-AIS     3.3    37.62267 -9.249762    112
2017-07-11 08:44 (UTC)    Terr-AIS     3.2    37.6241 -9.25348    115
2017-07-11 08:40 (UTC)    Terr-AIS     3.3    37.62557 -9.257295    112
2017-07-11 08:32 (UTC)    Terr-AIS     3.4    37.62903 -9.266028    111
2017-07-11 08:28 (UTC)    Terr-AIS     3.3    37.63051 -9.269725    114
2017-07-11 08:25 (UTC)    Terr-AIS     3.3    37.63207 -9.273642    120
2017-07-11 08:20 (UTC)    Terr-AIS     3.6    37.63395 -9.278254    118
2017-07-11 08:16 (UTC)    Terr-AIS     3.3    37.63586 -9.282853    116
2017-07-11 08:08 (UTC)    Terr-AIS     3.2    37.6392 -9.291157    118
2017-07-11 07:38 (UTC)    Sat-AIS
2017-07-11 06:58 (UTC)    Terr-AIS     3    37.68459 -9.321658    159
2017-07-11 06:53 (UTC)    Terr-AIS     3.3    37.68881 -9.324172    150

To get this table I had to copy manually from the webpage, paste in a 
text file, delete information on figures, links, etc. and then import to 
R. This works well, I read the csv file and have no problems with date 
formats. But instead of 20 records, I have to import e.g. 500 records, 
i.e. 10 pages of 50 records each, or more. I want to import these data 
in a more automated and quick procedure. I have done this before with no 
problems, but probably the webpage changed some permissions.

Here is the script used to get the data directly from the webpage into 
R, for a sample of 20 records (10 per page):

library(XML)
x <- list()
for (i in 1:2)
{
     x[i]<- 
readHTMLTable(paste('http://www.marinetraffic.com/en/ais/index/positions/all/shipid:318358/mmsi:263601000/shipname:NORUEGA/per_page:10/page:', 
i, sep=''))
}

ais <- do.call('rbind', x)
ais <- ais[,-7]

and I got the following table:

> ais
                                      Timestamp Source                   
       Speed (kn) Latitude (??) Longitude (??) Course (??)
1            149977066014997706604 minutes ago Terr-AIS                 
                8.6      37.36228 -9.176811         200
2            149977048714997704876 minutes ago Terr-AIS                 
                8.4      37.36875 -9.174048         200
3   149976661414997666141 hour, 11 minutes ago Terr-AIS                 
                8.0      37.51499 -9.184502         149
4   149976410714997641071 hour, 53 minutes ago Terr-AIS                 
                7.7      37.60513 -9.228263         169
5   149976392714997639271 hour, 56 minutes ago Terr-AIS                 
                8.0      37.61168 -9.229627         167
6   149976378014997637801 hour, 58 minutes ago Terr-AIS                 
                6.9      37.61626 -9.230456         132
7   149976354014997635402 hours, 2 minutes ago Terr-AIS                 
                3.4      37.61758 -9.237928         101
8   149976342014997634202 hours, 4 minutes ago Terr-AIS                 
                3.6      37.61808 -9.240235         116
9  149976286114997628612 hours, 14 minutes ago Terr-AIS                 
                3.3      37.62267 -9.249762         112
10 149976264714997626472 hours, 17 minutes ago Terr-AIS                 
                3.2       37.6241 -9.25348         115
11 149976243014997624302 hours, 21 minutes ago Terr-AIS                 
                3.3      37.62557 -9.257295         112
12 149976193714997619372 hours, 29 minutes ago Terr-AIS                 
                3.4      37.62903 -9.266028         111
13 149976172814997617282 hours, 32 minutes ago Terr-AIS                 
                3.3      37.63051 -9.269725         114
14 149976150714997615072 hours, 36 minutes ago Terr-AIS                 
                3.3      37.63207 -9.273642         120
15 149976124714997612472 hours, 40 minutes ago Terr-AIS                 
                3.6      37.63395 -9.278254         118
16 149976098714997609872 hours, 45 minutes ago Terr-AIS                 
                3.3      37.63586 -9.282853         116
17 149976051014997605102 hours, 53 minutes ago Terr-AIS                 
                3.2       37.6392 -9.291157         118
18 149975870414997587043 hours, 23 minutes ago  Sat-AIS Add to SAT 
Fleet for undelayed data          <NA> <NA>        <NA>
19  149975631414997563144 hours, 3 minutes ago Terr-AIS                 
                3.0      37.68459 -9.321658         159
20  149975598814997559884 hours, 8 minutes ago Terr-AIS                 
                3.3      37.68881 -9.324172         150

The records correspond exactly to the first table. I have tried to 
change the colClasses to character, but the results are always the same. 
My question is: how to change the Timestamp to a POSIXlt POSIXct format, 
either in the importing phase or within R?

I hope that the question is clear now.

Cristina


On Mon, 10 Jul 2017 09:18:05 -0700, Jeff Newmiller wrote:
> Not reproducible. [1][2][3] If our answers don't seem to apply to
> your situation, it will likely be because you did not explain your
> question clearly.
>
> Not plain text. This is a plain text mailing list,  and the best-case
> scenario when you let your email program send HTML is that what you
> saw is not what we see (worst case is your email is scrambled on our
> end).
>
> Have you read the documentation for the function you are using? In
> particular, what about the colClasses argument? If you don't let
> readHTMLTable guess what the format is (have it read in as character
> data) then you have a fighting chance to get it right yourself, e.g.
>
> as.POSIXct( "2017-07-10 14:04 (UTC)", format="%Y-%m-%d %H:%M (UTC)",
> tz="UTC" )
>
> -----
>
> [1]
> 
> http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>
> [2] http://adv-r.had.co.nz/Reproducibility.html
>
> [3] https://cran.r-project.org/web/packages/reprex/index.html
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 10, 2017 8:31:30 AM PDT, Cristina Silva <csilva at ipma.pt> 
> wrote:
>>Hi,
>>
>>I am extracting positions data from the marine traffic website. The
>>table has a "Timestamp" column which, in the browser, appears with 
>> the
>>format yyyy-mm-dd HH:MM (UTC), e.g. 2017-07-10 14:04 (UTC).
>>
>>When I import the table, the same date "2017-07-10 14:04 (UTC)" 
>> appears
>>
>>as "1499696500149969650021 minutes ago", This is the more recent date
>>and time. Older records, as e.g. "2017-07-09 17:02 (UTC)" appear as
>>e.g.
>>"1499619726149961972621 hours, 59 minutes ago".
>>
>>I don't know how to convert these data to the time formats used in R
>>(POSIXct).
>>
>>The script is very simple and worked before:
>>
>>library(XML)
>>x <- readHTMLTable('url')
>>
>>where the 'url' is the link to the website with the specification of
>>the
>>vessel.
>>
>>I appreciate any help.
>>
>>Cristina
>>
>>--
>>Cristina Silva
>>Divis?o de Modela??o e Gest?o de Recursos Pesqueiros
>>Av. Dr. Alfredo Magalh?es Ramalho
>>1495-165 Lisboa
>>@: csilva at ipma.pt <mailto:csilva at ipma.pt>
>>#: +351 213027096 <phoneto:+351213027096>
>>
>>
>>	[[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.

-- 
Cristina Silva
Divis?o de Modela??o e Gest?o de Recursos Pesqueiros
Avenida de Bras?lia
1449-006 Lisboa
@: csilva at ipma.pt
#: +351 213027096


From dwinsemius at comcast.net  Tue Jul 11 16:15:43 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 11 Jul 2017 07:15:43 -0700
Subject: [R] Problems with time formats when importing data using
	readHTMLTable
In-Reply-To: <bbb6a2c52adfc737bd699f03603a7f58@ipma.pt>
References: <223271ad-2591-8329-1c3a-32e8fdd3f95c@ipma.pt>
 <117323A0-FFF3-4B1C-B087-13AA9128A097@dcn.davis.ca.us>
 <bbb6a2c52adfc737bd699f03603a7f58@ipma.pt>
Message-ID: <DE27FD51-E12F-40B6-B708-3172C87A6239@comcast.net>


> On Jul 11, 2017, at 6:25 AM, Cristina Silva <csilva at ipma.pt> wrote:
> 
> Dear Jeff,
> 
> I am sorry, I didn't notice that it was not plain text. I hope that it is now in the correct format. I explain the problem again, now with more detais.
> I am collecting the track positions of our research vessel from www.marinetraffic.com.  In the page, the data appear in a table:
> 
> Timestamp     Source     Speed (kn)     Latitude (?) Longitude (?)     Course (?)     Show on Map
> 2017-07-11 10:57 (UTC)    Terr-AIS     8.6    37.36228 -9.176811    200
> 2017-07-11 10:54 (UTC)    Terr-AIS     8.4    37.36875 -9.174048    200
> 2017-07-11 09:50 (UTC)    Terr-AIS     8    37.51499 -9.184502    149
> 2017-07-11 09:08 (UTC)    Terr-AIS     7.7    37.60513 -9.228263    169
> 2017-07-11 09:05 (UTC)    Terr-AIS     8    37.61168 -9.229627    167
> 2017-07-11 09:03 (UTC)    Terr-AIS     6.9    37.61626 -9.230456    132
> 2017-07-11 08:59 (UTC)    Terr-AIS     3.4    37.61758 -9.237928    101
> 2017-07-11 08:57 (UTC)    Terr-AIS     3.6    37.61808 -9.240235    116
> 2017-07-11 08:47 (UTC)    Terr-AIS     3.3    37.62267 -9.249762    112
> 2017-07-11 08:44 (UTC)    Terr-AIS     3.2    37.6241 -9.25348    115
> 2017-07-11 08:40 (UTC)    Terr-AIS     3.3    37.62557 -9.257295    112
> 2017-07-11 08:32 (UTC)    Terr-AIS     3.4    37.62903 -9.266028    111
> 2017-07-11 08:28 (UTC)    Terr-AIS     3.3    37.63051 -9.269725    114
> 2017-07-11 08:25 (UTC)    Terr-AIS     3.3    37.63207 -9.273642    120
> 2017-07-11 08:20 (UTC)    Terr-AIS     3.6    37.63395 -9.278254    118
> 2017-07-11 08:16 (UTC)    Terr-AIS     3.3    37.63586 -9.282853    116
> 2017-07-11 08:08 (UTC)    Terr-AIS     3.2    37.6392 -9.291157    118
> 2017-07-11 07:38 (UTC)    Sat-AIS
> 2017-07-11 06:58 (UTC)    Terr-AIS     3    37.68459 -9.321658    159
> 2017-07-11 06:53 (UTC)    Terr-AIS     3.3    37.68881 -9.324172    150
> 
> To get this table I had to copy manually from the webpage, paste in a text file, delete information on figures, links, etc. and then import to R. This works well, I read the csv file and have no problems with date formats. But instead of 20 records, I have to import e.g. 500 records, i.e. 10 pages of 50 records each, or more. I want to import these data in a more automated and quick procedure. I have done this before with no problems, but probably the webpage changed some permissions.
> 
> Here is the script used to get the data directly from the webpage into R, for a sample of 20 records (10 per page):
> 
> library(XML)
> x <- list()
> for (i in 1:2)
> {
>    x[i]<- readHTMLTable(paste('http://www.marinetraffic.com/en/ais/index/positions/all/shipid:318358/mmsi:263601000/shipname:NORUEGA/per_page:10/page:', i, sep=''))
> }
> 
> ais <- do.call('rbind', x)
> ais <- ais[,-7]
> 
> and I got the following table:
> 
>> ais
>                                     Timestamp Source                         Speed (kn) Latitude (??) Longitude (??) Course (??)
> 1            149977066014997706604 minutes ago Terr-AIS                                8.6      37.36228 -9.176811         200

There's undoubtedly a way to extract the time info from this HTML code (but I'm not the one to provide that solution.) This is the first entry in the webpage source when viewed right now:

<td> 
<time class="toggle_time utc_time hide-me formatTime" data-overrideAbbreviation="empty" data-time="1499780737" data-timezone="0"><span>1499780737</span></time><time class="toggle_time my_time hide-me formatTime" data-overrideAbbreviation="MyT" data-time="1499780737" data-timezone="MyT"><span>1499780737</span></time><time class="toggle_time dif_time hide"><span>6 minutes ago</span></time>	</td>

So the POSIX-style time is givne twice (with no separator and then an offset in minutes is calculated. If I were given the records as you have them now I would extract the leading 10 digits and convert to POSIXct

as.POSIXct(as.numeric(gsub("(^.{10}).+","", Timestamp)), origin="1970-01-01")

as.POSIXct(as.numeric(gsub("(^.{10}).+","\\1", ais$Timestamp)), origin="1970-01-01")
 [1] "2017-07-11 07:09:57 PDT" "2017-07-11 06:45:37 PDT" "2017-07-11 06:40:34 PDT" "2017-07-11 06:34:46 PDT" "2017-07-11 06:32:26 PDT"
 [6] "2017-07-11 06:29:34 PDT" "2017-07-11 06:26:37 PDT" "2017-07-11 06:20:24 PDT" "2017-07-11 06:17:18 PDT" "2017-07-11 06:12:37 PDT"
[11] "2017-07-11 06:08:24 PDT" "2017-07-11 06:05:04 PDT" "2017-07-11 06:03:27 PDT" "2017-07-11 05:59:37 PDT" "2017-07-11 05:54:37 PDT"
[16] "2017-07-11 05:50:48 PDT" "2017-07-11 05:44:53 PDT" "2017-07-11 05:29:17 PDT" "2017-07-11 05:26:44 PDT" "2017-07-11 04:30:08 PDT"

-- David.



> 2            149977048714997704876 minutes ago Terr-AIS                                8.4      37.36875 -9.174048         200
> 3   149976661414997666141 hour, 11 minutes ago Terr-AIS                                8.0      37.51499 -9.184502         149
> 4   149976410714997641071 hour, 53 minutes ago Terr-AIS                                7.7      37.60513 -9.228263         169
> 5   149976392714997639271 hour, 56 minutes ago Terr-AIS                                8.0      37.61168 -9.229627         167
> 6   149976378014997637801 hour, 58 minutes ago Terr-AIS                                6.9      37.61626 -9.230456         132
> 7   149976354014997635402 hours, 2 minutes ago Terr-AIS                                3.4      37.61758 -9.237928         101
> 8   149976342014997634202 hours, 4 minutes ago Terr-AIS                                3.6      37.61808 -9.240235         116
> 9  149976286114997628612 hours, 14 minutes ago Terr-AIS                                3.3      37.62267 -9.249762         112
> 10 149976264714997626472 hours, 17 minutes ago Terr-AIS                                3.2       37.6241 -9.25348         115
> 11 149976243014997624302 hours, 21 minutes ago Terr-AIS                                3.3      37.62557 -9.257295         112
> 12 149976193714997619372 hours, 29 minutes ago Terr-AIS                                3.4      37.62903 -9.266028         111
> 13 149976172814997617282 hours, 32 minutes ago Terr-AIS                                3.3      37.63051 -9.269725         114
> 14 149976150714997615072 hours, 36 minutes ago Terr-AIS                                3.3      37.63207 -9.273642         120
> 15 149976124714997612472 hours, 40 minutes ago Terr-AIS                                3.6      37.63395 -9.278254         118
> 16 149976098714997609872 hours, 45 minutes ago Terr-AIS                                3.3      37.63586 -9.282853         116
> 17 149976051014997605102 hours, 53 minutes ago Terr-AIS                                3.2       37.6392 -9.291157         118
> 18 149975870414997587043 hours, 23 minutes ago  Sat-AIS Add to SAT Fleet for undelayed data          <NA> <NA>        <NA>
> 19  149975631414997563144 hours, 3 minutes ago Terr-AIS                                3.0      37.68459 -9.321658         159
> 20  149975598814997559884 hours, 8 minutes ago Terr-AIS                                3.3      37.68881 -9.324172         150
> 
> The records correspond exactly to the first table. I have tried to change the colClasses to character, but the results are always the same. My question is: how to change the Timestamp to a POSIXlt POSIXct format, either in the importing phase or within R?
> 
> I hope that the question is clear now.
> 
> Cristina
> 
> 
> On Mon, 10 Jul 2017 09:18:05 -0700, Jeff Newmiller wrote:
>> Not reproducible. [1][2][3] If our answers don't seem to apply to
>> your situation, it will likely be because you did not explain your
>> question clearly.
>> 
>> Not plain text. This is a plain text mailing list,  and the best-case
>> scenario when you let your email program send HTML is that what you
>> saw is not what we see (worst case is your email is scrambled on our
>> end).
>> 
>> Have you read the documentation for the function you are using? In
>> particular, what about the colClasses argument? If you don't let
>> readHTMLTable guess what the format is (have it read in as character
>> data) then you have a fighting chance to get it right yourself, e.g.
>> 
>> as.POSIXct( "2017-07-10 14:04 (UTC)", format="%Y-%m-%d %H:%M (UTC)",
>> tz="UTC" )
>> 
>> -----
>> 
>> [1]
>> http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>> 
>> [2] http://adv-r.had.co.nz/Reproducibility.html
>> 
>> [3] https://cran.r-project.org/web/packages/reprex/index.html
>> --
>> Sent from my phone. Please excuse my brevity.
>> 
>> On July 10, 2017 8:31:30 AM PDT, Cristina Silva <csilva at ipma.pt> wrote:
>>> Hi,
>>> 
>>> I am extracting positions data from the marine traffic website. The
>>> table has a "Timestamp" column which, in the browser, appears with the
>>> format yyyy-mm-dd HH:MM (UTC), e.g. 2017-07-10 14:04 (UTC).
>>> 
>>> When I import the table, the same date "2017-07-10 14:04 (UTC)" appears
>>> 
>>> as "1499696500149969650021 minutes ago", This is the more recent date
>>> and time. Older records, as e.g. "2017-07-09 17:02 (UTC)" appear as
>>> e.g.
>>> "1499619726149961972621 hours, 59 minutes ago".
>>> 
>>> I don't know how to convert these data to the time formats used in R
>>> (POSIXct).
>>> 
>>> The script is very simple and worked before:
>>> 
>>> library(XML)
>>> x <- readHTMLTable('url')
>>> 
>>> where the 'url' is the link to the website with the specification of
>>> the
>>> vessel.
>>> 
>>> I appreciate any help.
>>> 
>>> Cristina
>>> 
>>> --
>>> Cristina Silva
>>> Divis?o de Modela??o e Gest?o de Recursos Pesqueiros
>>> Av. Dr. Alfredo Magalh?es Ramalho
>>> 1495-165 Lisboa
>>> @: csilva at ipma.pt <mailto:csilva at ipma.pt>
>>> #: +351 213027096 <phoneto:+351213027096>
>>> 
>>> 
>>> 	[[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Cristina Silva
> Divis?o de Modela??o e Gest?o de Recursos Pesqueiros
> Avenida de Bras?lia
> 1449-006 Lisboa
> @: csilva at ipma.pt
> #: +351 213027096
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From csilva at ipma.pt  Tue Jul 11 19:00:20 2017
From: csilva at ipma.pt (Cristina Silva)
Date: Tue, 11 Jul 2017 18:00:20 +0100
Subject: [R] Problems with time formats when importing data using
 readHTMLTable
In-Reply-To: <DE27FD51-E12F-40B6-B708-3172C87A6239@comcast.net>
References: <223271ad-2591-8329-1c3a-32e8fdd3f95c@ipma.pt>
 <117323A0-FFF3-4B1C-B087-13AA9128A097@dcn.davis.ca.us>
 <bbb6a2c52adfc737bd699f03603a7f58@ipma.pt>
 <DE27FD51-E12F-40B6-B708-3172C87A6239@comcast.net>
Message-ID: <abc518091ddb0b31c9e52382409b5e88@ipma.pt>

Dear David,

Thank you very much. You have solved my problem, not of importing in 
the right format but the date conversion. It works for me, and if I 
specify the timezone tz='GMT', I get exactly the same time of the 
webpage.

Sincerely yours,

Cristina

On Tue, 11 Jul 2017 07:15:43 -0700, David Winsemius wrote:
>> On Jul 11, 2017, at 6:25 AM, Cristina Silva <csilva at ipma.pt> wrote:
>>
>> Dear Jeff,
>>
>> I am sorry, I didn't notice that it was not plain text. I hope that 
>> it is now in the correct format. I explain the problem again, now with 
>> more detais.
>> I am collecting the track positions of our research vessel from 
>> www.marinetraffic.com.  In the page, the data appear in a table:
>>
>> Timestamp     Source     Speed (kn)     Latitude (?) Longitude (?)   
>>  Course (?)     Show on Map
>> 2017-07-11 10:57 (UTC)    Terr-AIS     8.6    37.36228 -9.176811    
>> 200
>> 2017-07-11 10:54 (UTC)    Terr-AIS     8.4    37.36875 -9.174048    
>> 200
>> 2017-07-11 09:50 (UTC)    Terr-AIS     8    37.51499 -9.184502    
>> 149
>> 2017-07-11 09:08 (UTC)    Terr-AIS     7.7    37.60513 -9.228263    
>> 169
>> 2017-07-11 09:05 (UTC)    Terr-AIS     8    37.61168 -9.229627    
>> 167
>> 2017-07-11 09:03 (UTC)    Terr-AIS     6.9    37.61626 -9.230456    
>> 132
>> 2017-07-11 08:59 (UTC)    Terr-AIS     3.4    37.61758 -9.237928    
>> 101
>> 2017-07-11 08:57 (UTC)    Terr-AIS     3.6    37.61808 -9.240235    
>> 116
>> 2017-07-11 08:47 (UTC)    Terr-AIS     3.3    37.62267 -9.249762    
>> 112
>> 2017-07-11 08:44 (UTC)    Terr-AIS     3.2    37.6241 -9.25348    
>> 115
>> 2017-07-11 08:40 (UTC)    Terr-AIS     3.3    37.62557 -9.257295    
>> 112
>> 2017-07-11 08:32 (UTC)    Terr-AIS     3.4    37.62903 -9.266028    
>> 111
>> 2017-07-11 08:28 (UTC)    Terr-AIS     3.3    37.63051 -9.269725    
>> 114
>> 2017-07-11 08:25 (UTC)    Terr-AIS     3.3    37.63207 -9.273642    
>> 120
>> 2017-07-11 08:20 (UTC)    Terr-AIS     3.6    37.63395 -9.278254    
>> 118
>> 2017-07-11 08:16 (UTC)    Terr-AIS     3.3    37.63586 -9.282853    
>> 116
>> 2017-07-11 08:08 (UTC)    Terr-AIS     3.2    37.6392 -9.291157    
>> 118
>> 2017-07-11 07:38 (UTC)    Sat-AIS
>> 2017-07-11 06:58 (UTC)    Terr-AIS     3    37.68459 -9.321658    
>> 159
>> 2017-07-11 06:53 (UTC)    Terr-AIS     3.3    37.68881 -9.324172    
>> 150
>>
>> To get this table I had to copy manually from the webpage, paste in 
>> a text file, delete information on figures, links, etc. and then 
>> import to R. This works well, I read the csv file and have no problems 
>> with date formats. But instead of 20 records, I have to import e.g. 
>> 500 records, i.e. 10 pages of 50 records each, or more. I want to 
>> import these data in a more automated and quick procedure. I have done 
>> this before with no problems, but probably the webpage changed some 
>> permissions.
>>
>> Here is the script used to get the data directly from the webpage 
>> into R, for a sample of 20 records (10 per page):
>>
>> library(XML)
>> x <- list()
>> for (i in 1:2)
>> {
>>    x[i]<- 
>> readHTMLTable(paste('http://www.marinetraffic.com/en/ais/index/positions/all/shipid:318358/mmsi:263601000/shipname:NORUEGA/per_page:10/page:', 
>> i, sep=''))
>> }
>>
>> ais <- do.call('rbind', x)
>> ais <- ais[,-7]
>>
>> and I got the following table:
>>
>>> ais
>>                                     Timestamp Source                 
>>        Speed (kn) Latitude (??) Longitude (??) Course (??)
>> 1            149977066014997706604 minutes ago Terr-AIS              
>>                  8.6      37.36228 -9.176811         200
>
> There's undoubtedly a way to extract the time info from this HTML
> code (but I'm not the one to provide that solution.) This is the 
> first
> entry in the webpage source when viewed right now:
>
> <td>
> <time class="toggle_time utc_time hide-me formatTime"
> data-overrideAbbreviation="empty" data-time="1499780737"
> data-timezone="0"><span>1499780737</span></time><time
> class="toggle_time my_time hide-me formatTime"
> data-overrideAbbreviation="MyT" data-time="1499780737"
> data-timezone="MyT"><span>1499780737</span></time><time
> class="toggle_time dif_time hide"><span>6 minutes
> ago</span></time>	</td>
>
> So the POSIX-style time is givne twice (with no separator and then an
> offset in minutes is calculated. If I were given the records as you
> have them now I would extract the leading 10 digits and convert to
> POSIXct
>
> as.POSIXct(as.numeric(gsub("(^.{10}).+","", Timestamp)), 
> origin="1970-01-01")
>
> as.POSIXct(as.numeric(gsub("(^.{10}).+","\\1", ais$Timestamp)),
> origin="1970-01-01")
>  [1] "2017-07-11 07:09:57 PDT" "2017-07-11 06:45:37 PDT" "2017-07-11
> 06:40:34 PDT" "2017-07-11 06:34:46 PDT" "2017-07-11 06:32:26 PDT"
>  [6] "2017-07-11 06:29:34 PDT" "2017-07-11 06:26:37 PDT" "2017-07-11
> 06:20:24 PDT" "2017-07-11 06:17:18 PDT" "2017-07-11 06:12:37 PDT"
> [11] "2017-07-11 06:08:24 PDT" "2017-07-11 06:05:04 PDT" "2017-07-11
> 06:03:27 PDT" "2017-07-11 05:59:37 PDT" "2017-07-11 05:54:37 PDT"
> [16] "2017-07-11 05:50:48 PDT" "2017-07-11 05:44:53 PDT" "2017-07-11
> 05:29:17 PDT" "2017-07-11 05:26:44 PDT" "2017-07-11 04:30:08 PDT"
>
> -- David.
>
>
>
>> 2            149977048714997704876 minutes ago Terr-AIS              
>>                  8.4      37.36875 -9.174048         200
>> 3   149976661414997666141 hour, 11 minutes ago Terr-AIS              
>>                  8.0      37.51499 -9.184502         149
>> 4   149976410714997641071 hour, 53 minutes ago Terr-AIS              
>>                  7.7      37.60513 -9.228263         169
>> 5   149976392714997639271 hour, 56 minutes ago Terr-AIS              
>>                  8.0      37.61168 -9.229627         167
>> 6   149976378014997637801 hour, 58 minutes ago Terr-AIS              
>>                  6.9      37.61626 -9.230456         132
>> 7   149976354014997635402 hours, 2 minutes ago Terr-AIS              
>>                  3.4      37.61758 -9.237928         101
>> 8   149976342014997634202 hours, 4 minutes ago Terr-AIS              
>>                  3.6      37.61808 -9.240235         116
>> 9  149976286114997628612 hours, 14 minutes ago Terr-AIS              
>>                  3.3      37.62267 -9.249762         112
>> 10 149976264714997626472 hours, 17 minutes ago Terr-AIS              
>>                  3.2       37.6241 -9.25348         115
>> 11 149976243014997624302 hours, 21 minutes ago Terr-AIS              
>>                  3.3      37.62557 -9.257295         112
>> 12 149976193714997619372 hours, 29 minutes ago Terr-AIS              
>>                  3.4      37.62903 -9.266028         111
>> 13 149976172814997617282 hours, 32 minutes ago Terr-AIS              
>>                  3.3      37.63051 -9.269725         114
>> 14 149976150714997615072 hours, 36 minutes ago Terr-AIS              
>>                  3.3      37.63207 -9.273642         120
>> 15 149976124714997612472 hours, 40 minutes ago Terr-AIS              
>>                  3.6      37.63395 -9.278254         118
>> 16 149976098714997609872 hours, 45 minutes ago Terr-AIS              
>>                  3.3      37.63586 -9.282853         116
>> 17 149976051014997605102 hours, 53 minutes ago Terr-AIS              
>>                  3.2       37.6392 -9.291157         118
>> 18 149975870414997587043 hours, 23 minutes ago  Sat-AIS Add to SAT 
>> Fleet for undelayed data          <NA> <NA>        <NA>
>> 19  149975631414997563144 hours, 3 minutes ago Terr-AIS              
>>                  3.0      37.68459 -9.321658         159
>> 20  149975598814997559884 hours, 8 minutes ago Terr-AIS              
>>                  3.3      37.68881 -9.324172         150
>>
>> The records correspond exactly to the first table. I have tried to 
>> change the colClasses to character, but the results are always the 
>> same. My question is: how to change the Timestamp to a POSIXlt POSIXct 
>> format, either in the importing phase or within R?
>>
>> I hope that the question is clear now.
>>
>> Cristina
>>
>>
>> On Mon, 10 Jul 2017 09:18:05 -0700, Jeff Newmiller wrote:
>>> Not reproducible. [1][2][3] If our answers don't seem to apply to
>>> your situation, it will likely be because you did not explain your
>>> question clearly.
>>>
>>> Not plain text. This is a plain text mailing list,  and the 
>>> best-case
>>> scenario when you let your email program send HTML is that what you
>>> saw is not what we see (worst case is your email is scrambled on 
>>> our
>>> end).
>>>
>>> Have you read the documentation for the function you are using? In
>>> particular, what about the colClasses argument? If you don't let
>>> readHTMLTable guess what the format is (have it read in as 
>>> character
>>> data) then you have a fighting chance to get it right yourself, 
>>> e.g.
>>>
>>> as.POSIXct( "2017-07-10 14:04 (UTC)", format="%Y-%m-%d %H:%M 
>>> (UTC)",
>>> tz="UTC" )
>>>
>>> -----
>>>
>>> [1]
>>> 
>>> http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>>>
>>> [2] http://adv-r.had.co.nz/Reproducibility.html
>>>
>>> [3] https://cran.r-project.org/web/packages/reprex/index.html
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> On July 10, 2017 8:31:30 AM PDT, Cristina Silva <csilva at ipma.pt> 
>>> wrote:
>>>> Hi,
>>>>
>>>> I am extracting positions data from the marine traffic website. 
>>>> The
>>>> table has a "Timestamp" column which, in the browser, appears with 
>>>> the
>>>> format yyyy-mm-dd HH:MM (UTC), e.g. 2017-07-10 14:04 (UTC).
>>>>
>>>> When I import the table, the same date "2017-07-10 14:04 (UTC)" 
>>>> appears
>>>>
>>>> as "1499696500149969650021 minutes ago", This is the more recent 
>>>> date
>>>> and time. Older records, as e.g. "2017-07-09 17:02 (UTC)" appear 
>>>> as
>>>> e.g.
>>>> "1499619726149961972621 hours, 59 minutes ago".
>>>>
>>>> I don't know how to convert these data to the time formats used in 
>>>> R
>>>> (POSIXct).
>>>>
>>>> The script is very simple and worked before:
>>>>
>>>> library(XML)
>>>> x <- readHTMLTable('url')
>>>>
>>>> where the 'url' is the link to the website with the specification 
>>>> of
>>>> the
>>>> vessel.
>>>>
>>>> I appreciate any help.
>>>>
>>>> Cristina
>>>>

>
> David Winsemius
> Alameda, CA, USA

-- 
Cristina Silva
Divis?o de Modela??o e Gest?o de Recursos Pesqueiros
Avenida de Bras?lia
1449-006 Lisboa
@: csilva at ipma.pt
#: +351 213027096


From pmakananisa at sars.gov.za  Tue Jul 11 14:57:57 2017
From: pmakananisa at sars.gov.za (Mangalani Peter Makananisa)
Date: Tue, 11 Jul 2017 12:57:57 +0000
Subject: [R] dplyr help
In-Reply-To: <D3276DA3-8349-49A7-867A-EB15B9BF5AF1@dcn.davis.ca.us>
References: <53f69d07dc584f46875087d1d2f13082@PTABREXC04.sars.gov.za>
 <71B23482-1DD8-4198-95CF-C057F88E17D8@dcn.davis.ca.us>
 <6c62d2f9d0f746b2be210be8868daa84@PTABREXC04.sars.gov.za>
 <D3276DA3-8349-49A7-867A-EB15B9BF5AF1@dcn.davis.ca.us>
Message-ID: <38004e11e3ae4d61886b2e178d23595c@PTABREXC04.sars.gov.za>

Hi all,

I have just  used the reshape library and not dplyr to addressed the problem on the emails below, see the attached pdf document.

Regards,

Peter


-----Original Message-----
From: Jeff Newmiller [mailto:jdnewmil at dcn.davis.ca.us] 
Sent: 11 July 2017 01:45 PM
To: Mangalani Peter Makananisa; r-help at r-project.org
Cc: Vito Ricci (vito_ricci at yahoo.com)
Subject: RE: [R] dplyr help

A better thanks would be to post the solution that met your needs... particularly since in spite of our efforts it appears we may not have understood your problem. A small sample data set generated with dput along with your code would be helpful in making sure others learn along with you. 
--
Sent from my phone. Please excuse my brevity.

On July 11, 2017 12:56:45 AM PDT, Mangalani Peter Makananisa <pmakananisa at sars.gov.za> wrote:
>Thank you very much for the support.  I have just used the reshape 
>library and my problem was solved.
>
>Kind regards,
>
>Peter
>
>-----Original Message-----
>From: Jeff Newmiller [mailto:jdnewmil at dcn.davis.ca.us]
>Sent: 10 July 2017 03:52 PM
>To: r-help at r-project.org; Mangalani Peter Makananisa; 
>r-help at r-project.org
>Cc: Vito Ricci (vito_ricci at yahoo.com)
>Subject: Re: [R] dplyr help
>
>I am pretty sure that this is not a question about dplyr... it is a 
>question about tidyr. Look at the help file ?tidyr::spread.
>
>If I understand your question (I may not,  because you gave no example 
>of input/output data), the answer is no, the column names come from the 
>column named by the key parameter and the values that fill those 
>columns come from the column named by the value parameter. Modify your 
>data frame to contain both columns before using this function.
>
>When the function is used outside a pipe chain there is also the first 
>argument, the data frame that is being reshaped.
>
>Please post using plain text in the future... this is a plain text 
>mailing list,  and HTML email is what-you-see-is-not-what-we-see.
>--
>Sent from my phone. Please excuse my brevity.
>
>On July 10, 2017 1:29:41 AM PDT, Mangalani Peter Makananisa 
><pmakananisa at sars.gov.za> wrote:
>>HI all,
>>
>>Is it possible to use one column spread on multiple columns values.
>>
>>example
>>spread( Key_col, value1:value7)
>>
>>spreading Key_col to variable value1, value2, ....... Value7
>>
>>Please advise,
>>
>>Kind regards
>>
>>Mangalani Peter Makananisa (5786)
>>South African Revenue Service (SARS) - HO
>>+2782 456 4669 / +2712 422 7357
>>
>>Please Note: This email and its contents are subject to our email
>legal
>>notice which can be viewed at
>>http://www.sars.gov.za/Pages/Email-disclaimer.aspx
>>
>>	[[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide
>>http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>Please Note: This email and its contents are subject to our email legal 
>notice which can be viewed at 
>http://www.sars.gov.za/Pages/Email-disclaimer.aspx

Please Note: This email and its contents are subject to our email legal notice which can be viewed at http://www.sars.gov.za/Pages/Email-disclaimer.aspx
-------------- next part --------------
A non-text attachment was scrubbed...
Name: regw solution.pdf
Type: application/pdf
Size: 143443 bytes
Desc: regw solution.pdf
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20170711/7fc2edf2/attachment.pdf>

From pjmiller_57 at yahoo.com  Tue Jul 11 16:10:52 2017
From: pjmiller_57 at yahoo.com (Paul Miller)
Date: Tue, 11 Jul 2017 14:10:52 +0000 (UTC)
Subject: [R] Extracting sentences with combinations of target words/terms
 from cancer patient text medical records
In-Reply-To: <mailman.1.1499767201.10183.r-help@r-project.org>
References: <mailman.1.1499767201.10183.r-help@r-project.org>
Message-ID: <1870157674.3473342.1499782252997@mail.yahoo.com>

Hello All,

I need some help figuring out how to extract combinations of target words/terms from cancer patient text medical records. I've provided some sample data and code below to illustrate what I'm trying to do. At the moment, I'm trying to extract sentences that contain the word "breast" plus either "metastatic" or "stage IV". 

It's been some time since I used R and I feel a bit rusty. I wrote a function called "sentence_match" that seemed to work well when applied to a single piece of text. You can see that by running the section titled 

"Working code". I thought that it might be possible easily to apply my function to a data set (tibble or df) but that doesn't seem to be the case. My unsuccessful attempt to do this appears in the section titled "Non-working code". 

If someone could help me get my code up and running, that would be greatly appreciated. I'm using a lot of functions from Hadley Wickham's packages, but that's not particularly necessary. Although I have only a few entries in my sample data, my actual data are pretty large. Currently, I'm working with over a million records. Some records contain only a single sentence, but many have several paragraphs. One concern I had was that, even if I could get my code working, it would be too inefficient to handle that volume of data. 

Thanks,

Paul


library(tidyverse)
library(stringr)
library(lubridate)
 
sentence_match <- function(x){
  sentence_extract <- str_extract_all(sampletxt, boundary("sentence"), simplify = TRUE)
  sentence_number <- intersect(str_which(sentence_extract, "breast"), str_which(sentence_extract, "metastatic|stage IV"))
  sentence_match <- str_c(sentence_number, ": ", sentence_extract[sentence_number], collapse = "")
  sentence_match
}
 
#### Working code ####
 
sampletxt <- "This sentence contains the word metastatic and the word breast. This sentence contains no target words."

sentence_match(sampletxt)
 
#### Non-working code ####
 
sampletxt <-
  structure(
    list(
      PTNO = c(1, 2, 2, 2),
      DATE = structure(c(16436, 16436, 16832, 16845), class = "Date"),
      TYPE = c("Progress note", "CAT scan", "Progress note", "Progress note"),
      TVAR = c(
        "This sentence contains the word metastatic. This sentence contains the term stage IV.",
        "This sentence contains no target words. This sentence also contains no target words.",
        "This sentence contains the word metastatic and the word breast. This sentence contains no target words.",
        "This sentence contains the words breast and the term metastatic. This 
sentence contains the word breast and the term stage IV."
      )
    ),
    .Names = c("PTNO", "DATE", "TYPE", "TVAR"),
    class = c("tbl_df",
              "tbl", "data.frame"),
    row.names = c(NA,-4L)
  )
  
sampletxt2 <- group_by_at(sampletxt, vars(PTNO, DATE, TYPE))
sampletxt2 <- 
  sampletxt2 %>%
  mutate(
    EXTRACTED = sentence_match(TVAR)
  )


From alicee at sussex.ac.uk  Tue Jul 11 16:29:49 2017
From: alicee at sussex.ac.uk (Alice Eldridge)
Date: Tue, 11 Jul 2017 14:29:49 +0000
Subject: [R] Multivariate random forests in R - how to obtain variance
 explained for multiple responses in randomForestSRC package - or other
 package
Message-ID: <DC710164-584D-4D26-BB31-3AA59E1BF646@sussex.ac.uk>

Hello,
I am wanting to use MRF to do multivariate regression.
We are testing whether acoustic indices can predict structure (relative abundances) of vocalising avian community in UK and Ecuador.
There are 26 acoustic indices, 65 UK species and 95 Ecuadorian species.

I want to build a model for each ecozone (UK/ EC) using all species (relative abundance) as response matrix, and acoustic indices as predictors.

I?d then like to know:
- total variance explained & error
- variable importance (stable rank at least)
- proximity matrix

The interface for package randomForestSRC looks hopeful. You can specify a MRF like this:

> rfsrc(Multivar(y1, y2, ..., yd) ~ . , my.data, ?)

So for a data matrix containing 1984 observations of 26 Acoustic indices and 65 species (UN. CG etc) - uk_ai_sp - It seems you can build a multivariate regression model like this:

> uk_sp_ai.mrf <-rfsrc(Multivar(UN,CG,ZL,ML,MH,H.,PH,IP,RL,WK,CO,BZ,L,HG,LB,BO,TO.,SD,WP,CD,TD,CK,G.,GS,MG,J,JD,RN,RO,C.,GC,BT,GT,CT,MT,S.,SL,LT,CC,WW,BC,GW,LW,WH,RW,NH,TC,WR,SG,B.,ST,M.,SF,R,NG,DN,PW,MP,CH,GR,GO,BF,LN,Y,CB.) ~., data = uk_ai_sp, tree.err=TRUE, importance = "permute")


The model report looks sensible:

>uk_sp_ai.mrf

Sample size: 1984
Number of trees: 1000
Minimum terminal node size: 5
Average no. of terminal nodes: 506.754
No. of variables tried at each split: 9
Total no. of variables: 26
Total no. of responses: 65
User has requested response: UN
Analysis: mRF-R
Family: regr+
Splitting rule: mv.mse
% variance explained: 72.46
Error rate: 0.02

But I can?t see how to request the output (% variance explained and error) for all 65 responses ? only one response at a time (here UN)

If anyone has any experience of this package ? or how to achieve this in other packages I?d love to hear from you.
Hopefully I am missing something obvious.

Cheers,
Alice



---
Dr Alice Eldridge
Research Fellow
Sussex Humanities Lab,
School of Media, Film and Music
University of Sussex
Falmer
Brighton
BN1 9RG

alicee at sussex.ac.uk<mailto:alicee at sussex.ac.uk>
+44 (0) 1273 87 7486

http://www.algorithmiclistening.org/





	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Tue Jul 11 20:00:29 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Tue, 11 Jul 2017 11:00:29 -0700
Subject: [R] Extracting sentences with combinations of target
 words/terms from cancer patient text medical records
In-Reply-To: <1870157674.3473342.1499782252997@mail.yahoo.com>
References: <mailman.1.1499767201.10183.r-help@r-project.org>
 <1870157674.3473342.1499782252997@mail.yahoo.com>
Message-ID: <CAGxFJbQzkeYucH_V5q5SeWLS66g9bdtn7mt71O3ivJoDFEDQWA@mail.gmail.com>

Have you looked at the CRAN Natural Language Processing Task View? If not,
why not? If so, why were the resources described there inadequate?

Bert

On Jul 11, 2017 10:49 AM, "Paul Miller via R-help" <r-help at r-project.org>
wrote:

> Hello All,
>
> I need some help figuring out how to extract combinations of target
> words/terms from cancer patient text medical records. I've provided some
> sample data and code below to illustrate what I'm trying to do. At the
> moment, I'm trying to extract sentences that contain the word "breast" plus
> either "metastatic" or "stage IV".
>
> It's been some time since I used R and I feel a bit rusty. I wrote a
> function called "sentence_match" that seemed to work well when applied to a
> single piece of text. You can see that by running the section titled
>
> "Working code". I thought that it might be possible easily to apply my
> function to a data set (tibble or df) but that doesn't seem to be the case.
> My unsuccessful attempt to do this appears in the section titled
> "Non-working code".
>
> If someone could help me get my code up and running, that would be greatly
> appreciated. I'm using a lot of functions from Hadley Wickham's packages,
> but that's not particularly necessary. Although I have only a few entries
> in my sample data, my actual data are pretty large. Currently, I'm working
> with over a million records. Some records contain only a single sentence,
> but many have several paragraphs. One concern I had was that, even if I
> could get my code working, it would be too inefficient to handle that
> volume of data.
>
> Thanks,
>
> Paul
>
>
> library(tidyverse)
> library(stringr)
> library(lubridate)
>
> sentence_match <- function(x){
>   sentence_extract <- str_extract_all(sampletxt, boundary("sentence"),
> simplify = TRUE)
>   sentence_number <- intersect(str_which(sentence_extract, "breast"),
> str_which(sentence_extract, "metastatic|stage IV"))
>   sentence_match <- str_c(sentence_number, ": ", sentence_extract[sentence_number],
> collapse = "")
>   sentence_match
> }
>
> #### Working code ####
>
> sampletxt <- "This sentence contains the word metastatic and the word
> breast. This sentence contains no target words."
>
> sentence_match(sampletxt)
>
> #### Non-working code ####
>
> sampletxt <-
>   structure(
>     list(
>       PTNO = c(1, 2, 2, 2),
>       DATE = structure(c(16436, 16436, 16832, 16845), class = "Date"),
>       TYPE = c("Progress note", "CAT scan", "Progress note", "Progress
> note"),
>       TVAR = c(
>         "This sentence contains the word metastatic. This sentence
> contains the term stage IV.",
>         "This sentence contains no target words. This sentence also
> contains no target words.",
>         "This sentence contains the word metastatic and the word breast.
> This sentence contains no target words.",
>         "This sentence contains the words breast and the term metastatic.
> This
> sentence contains the word breast and the term stage IV."
>       )
>     ),
>     .Names = c("PTNO", "DATE", "TYPE", "TVAR"),
>     class = c("tbl_df",
>               "tbl", "data.frame"),
>     row.names = c(NA,-4L)
>   )
>
> sampletxt2 <- group_by_at(sampletxt, vars(PTNO, DATE, TYPE))
> sampletxt2 <-
>   sampletxt2 %>%
>   mutate(
>     EXTRACTED = sentence_match(TVAR)
>   )
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Wed Jul 12 00:07:29 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 11 Jul 2017 15:07:29 -0700
Subject: [R] Problems with time formats when importing data using
	readHTMLTable
In-Reply-To: <abc518091ddb0b31c9e52382409b5e88@ipma.pt>
References: <223271ad-2591-8329-1c3a-32e8fdd3f95c@ipma.pt>
 <117323A0-FFF3-4B1C-B087-13AA9128A097@dcn.davis.ca.us>
 <bbb6a2c52adfc737bd699f03603a7f58@ipma.pt>
 <DE27FD51-E12F-40B6-B708-3172C87A6239@comcast.net>
 <abc518091ddb0b31c9e52382409b5e88@ipma.pt>
Message-ID: <91E06112-0E4E-4887-BE08-986766488790@comcast.net>



Sent from my iPhone

> On Jul 11, 2017, at 10:00 AM, Cristina Silva <csilva at ipma.pt> wrote:
> 
> Dear David,
> 
> Thank you very much. You have solved my problem, not of importing in the right format but the date conversion. It works for me, and if I specify the timezone tz='GMT', I get exactly the same time of the webpage.
> 
R date times are a bit weird. To me , anyway. Input is in UTC, but default output is in your locale. So I usually wrap format around a result if I want UTC.

-- 
David

> Sincerely yours,
> 
> Cristina
> 
> On Tue, 11 Jul 2017 07:15:43 -0700, David Winsemius wrote:
>>> On Jul 11, 2017, at 6:25 AM, Cristina Silva <csilva at ipma.pt> wrote:
>>> 
>>> Dear Jeff,
>>> 
>>> I am sorry, I didn't notice that it was not plain text. I hope that it is now in the correct format. I explain the problem again, now with more detais.
>>> I am collecting the track positions of our research vessel from www.marinetraffic.com.  In the page, the data appear in a table:
>>> 
>>> Timestamp     Source     Speed (kn)     Latitude (?) Longitude (?)    Course (?)     Show on Map
>>> 2017-07-11 10:57 (UTC)    Terr-AIS     8.6    37.36228 -9.176811    200
>>> 2017-07-11 10:54 (UTC)    Terr-AIS     8.4    37.36875 -9.174048    200
>>> 2017-07-11 09:50 (UTC)    Terr-AIS     8    37.51499 -9.184502    149
>>> 2017-07-11 09:08 (UTC)    Terr-AIS     7.7    37.60513 -9.228263    169
>>> 2017-07-11 09:05 (UTC)    Terr-AIS     8    37.61168 -9.229627    167
>>> 2017-07-11 09:03 (UTC)    Terr-AIS     6.9    37.61626 -9.230456    132
>>> 2017-07-11 08:59 (UTC)    Terr-AIS     3.4    37.61758 -9.237928    101
>>> 2017-07-11 08:57 (UTC)    Terr-AIS     3.6    37.61808 -9.240235    116


From tanasa at gmail.com  Wed Jul 12 02:25:20 2017
From: tanasa at gmail.com (Bogdan Tanasa)
Date: Tue, 11 Jul 2017 17:25:20 -0700
Subject: [R] submitting R scripts with command_line_arguments to PBS HPC
	clusters
Message-ID: <CA+JEM02y8=W9U_49BkGsmJoyZjiGPnd7Te-QF+bUoAAnRaCqYg@mail.gmail.com>

Dear all,

please could you advise me on the following : I've written a R script that
reads 3 arguments from the command line, i.e. :

" args <- commandArgs(TRUE)
TUMOR <- args[1]
GERMLINE <- args[2]
CHR <- args[3] ".

when I submit the R script to a PBS HPC scheduler, I do the following
(below), but ... I am getting an error message.
(I am not posting the error message, because the R script I wrote works
fine when it is run from a regular terminal ..)

Please may I ask, how do you usually submit the R scripts with command line
arguments to PBS HPC schedulers ?

qsub -d $PWD -l nodes=1:ppn=4 -l vmem=10gb -m bea -M tanasa at gmail.com \
-v TUMOR="tumor.bam",GERMLINE="germline.bam",CHR="chr22" \
-e script.efile.chr22 \
-o script.ofile.chr22 \
script.R

Thank you very very much  !

-- bogdan

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Wed Jul 12 03:01:11 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 11 Jul 2017 18:01:11 -0700
Subject: [R] submitting R scripts with command_line_arguments to PBS
	HPC	clusters
In-Reply-To: <CA+JEM02y8=W9U_49BkGsmJoyZjiGPnd7Te-QF+bUoAAnRaCqYg@mail.gmail.com>
References: <CA+JEM02y8=W9U_49BkGsmJoyZjiGPnd7Te-QF+bUoAAnRaCqYg@mail.gmail.com>
Message-ID: <C6FD1065-DBAC-48A6-85EF-450D02C3A919@dcn.davis.ca.us>

This sounds like an operating system specific question, in that "submit the R script to a PBS HPC scheduler" would be the kind of action that would run R with very different environment variables and possibly different access credentials than your usual interactive terminal.  A thorough reading of the "Installation and Administration Guide" and some study of your HPC documentation are in order. 
-- 
Sent from my phone. Please excuse my brevity.

On July 11, 2017 5:25:20 PM PDT, Bogdan Tanasa <tanasa at gmail.com> wrote:
>Dear all,
>
>please could you advise me on the following : I've written a R script
>that
>reads 3 arguments from the command line, i.e. :
>
>" args <- commandArgs(TRUE)
>TUMOR <- args[1]
>GERMLINE <- args[2]
>CHR <- args[3] ".
>
>when I submit the R script to a PBS HPC scheduler, I do the following
>(below), but ... I am getting an error message.
>(I am not posting the error message, because the R script I wrote works
>fine when it is run from a regular terminal ..)
>
>Please may I ask, how do you usually submit the R scripts with command
>line
>arguments to PBS HPC schedulers ?
>
>qsub -d $PWD -l nodes=1:ppn=4 -l vmem=10gb -m bea -M tanasa at gmail.com \
>-v TUMOR="tumor.bam",GERMLINE="germline.bam",CHR="chr22" \
>-e script.efile.chr22 \
>-o script.ofile.chr22 \
>script.R
>
>Thank you very very much  !
>
>-- bogdan
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From peter.anthoni at kit.edu  Wed Jul 12 08:34:29 2017
From: peter.anthoni at kit.edu (Anthoni, Peter (IMK))
Date: Wed, 12 Jul 2017 06:34:29 +0000
Subject: [R] submitting R scripts with command_line_arguments to PBS	HPC
 clusters
In-Reply-To: <C6FD1065-DBAC-48A6-85EF-450D02C3A919@dcn.davis.ca.us>
References: <CA+JEM02y8=W9U_49BkGsmJoyZjiGPnd7Te-QF+bUoAAnRaCqYg@mail.gmail.com>
 <C6FD1065-DBAC-48A6-85EF-450D02C3A919@dcn.davis.ca.us>
Message-ID: <FCA7E31B-18A8-407D-BCCF-F96AF2B1A0B8@kit.edu>

Hi,

The problem is most likely, you need to call a R CMD BATCH with your arguments and the R-script inside of a shell script that you submit to your qsub.
Unfortunately we don't use qsub anymore so can't test it, but it should be as follows:

R-script eg. test.R:
> ##First read in the arguments listed at the command line
> args=(commandArgs(TRUE))
> 
> ##args is now a list of character vectors
> ## First check to see if arguments are passed.
> if(length(args)==0){
>   stop("no args specified")
> }
> ## Then cycle through each element of the list and evaluate the expressions.
> for(i in 1:length(args)){
>   print(args[[i]])
>   eval(parse(text=args[[i]]))
> }
> print(TUMOR)
> print(GERMLINE)
> print(CHR)


qsub shell script test.sh:  
> #!/bin/bash
> 
> #Note: the single quote '...' around the --args ... "..." "..." is important!
> R CMD BATCH --no-save --no-restore '--args TUMOR="tumor.bam" GERMLINE="germline.bam" CHR="chr22"' test.R test.Rout

then you submit with a qsub with all the options you specified the test.sh
qsub .... test.sh

cheers
Peter



> On 12. Jul 2017, at 03:01, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> This sounds like an operating system specific question, in that "submit the R script to a PBS HPC scheduler" would be the kind of action that would run R with very different environment variables and possibly different access credentials than your usual interactive terminal.  A thorough reading of the "Installation and Administration Guide" and some study of your HPC documentation are in order. 
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> On July 11, 2017 5:25:20 PM PDT, Bogdan Tanasa <tanasa at gmail.com> wrote:
>> Dear all,
>> 
>> please could you advise me on the following : I've written a R script
>> that
>> reads 3 arguments from the command line, i.e. :
>> 
>> " args <- commandArgs(TRUE)
>> TUMOR <- args[1]
>> GERMLINE <- args[2]
>> CHR <- args[3] ".
>> 
>> when I submit the R script to a PBS HPC scheduler, I do the following
>> (below), but ... I am getting an error message.
>> (I am not posting the error message, because the R script I wrote works
>> fine when it is run from a regular terminal ..)
>> 
>> Please may I ask, how do you usually submit the R scripts with command
>> line
>> arguments to PBS HPC schedulers ?
>> 
>> qsub -d $PWD -l nodes=1:ppn=4 -l vmem=10gb -m bea -M tanasa at gmail.com \
>> -v TUMOR="tumor.bam",GERMLINE="germline.bam",CHR="chr22" \
>> -e script.efile.chr22 \
>> -o script.ofile.chr22 \
>> script.R
>> 
>> Thank you very very much  !
>> 
>> -- bogdan
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tanasa at gmail.com  Wed Jul 12 08:37:11 2017
From: tanasa at gmail.com (Bogdan Tanasa)
Date: Tue, 11 Jul 2017 23:37:11 -0700
Subject: [R] submitting R scripts with command_line_arguments to PBS HPC
	clusters
In-Reply-To: <FCA7E31B-18A8-407D-BCCF-F96AF2B1A0B8@kit.edu>
References: <CA+JEM02y8=W9U_49BkGsmJoyZjiGPnd7Te-QF+bUoAAnRaCqYg@mail.gmail.com>
 <C6FD1065-DBAC-48A6-85EF-450D02C3A919@dcn.davis.ca.us>
 <FCA7E31B-18A8-407D-BCCF-F96AF2B1A0B8@kit.edu>
Message-ID: <CA+JEM00GR=rVjJzKJPO0nmOh88T_Srtd7piudoqMpR=JWAqHvw@mail.gmail.com>

Dear Peter, that is very very helpful, many thanks for your suggestions ;) !

On Tue, Jul 11, 2017 at 11:34 PM, Anthoni, Peter (IMK) <
peter.anthoni at kit.edu> wrote:

> Hi,
>
> The problem is most likely, you need to call a R CMD BATCH with your
> arguments and the R-script inside of a shell script that you submit to your
> qsub.
> Unfortunately we don't use qsub anymore so can't test it, but it should be
> as follows:
>
> R-script eg. test.R:
> > ##First read in the arguments listed at the command line
> > args=(commandArgs(TRUE))
> >
> > ##args is now a list of character vectors
> > ## First check to see if arguments are passed.
> > if(length(args)==0){
> >   stop("no args specified")
> > }
> > ## Then cycle through each element of the list and evaluate the
> expressions.
> > for(i in 1:length(args)){
> >   print(args[[i]])
> >   eval(parse(text=args[[i]]))
> > }
> > print(TUMOR)
> > print(GERMLINE)
> > print(CHR)
>
>
> qsub shell script test.sh:
> > #!/bin/bash
> >
> > #Note: the single quote '...' around the --args ... "..." "..." is
> important!
> > R CMD BATCH --no-save --no-restore '--args TUMOR="tumor.bam"
> GERMLINE="germline.bam" CHR="chr22"' test.R test.Rout
>
> then you submit with a qsub with all the options you specified the test.sh
> qsub .... test.sh
>
> cheers
> Peter
>
>
>
> > On 12. Jul 2017, at 03:01, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
> >
> > This sounds like an operating system specific question, in that "submit
> the R script to a PBS HPC scheduler" would be the kind of action that would
> run R with very different environment variables and possibly different
> access credentials than your usual interactive terminal.  A thorough
> reading of the "Installation and Administration Guide" and some study of
> your HPC documentation are in order.
> > --
> > Sent from my phone. Please excuse my brevity.
> >
> > On July 11, 2017 5:25:20 PM PDT, Bogdan Tanasa <tanasa at gmail.com> wrote:
> >> Dear all,
> >>
> >> please could you advise me on the following : I've written a R script
> >> that
> >> reads 3 arguments from the command line, i.e. :
> >>
> >> " args <- commandArgs(TRUE)
> >> TUMOR <- args[1]
> >> GERMLINE <- args[2]
> >> CHR <- args[3] ".
> >>
> >> when I submit the R script to a PBS HPC scheduler, I do the following
> >> (below), but ... I am getting an error message.
> >> (I am not posting the error message, because the R script I wrote works
> >> fine when it is run from a regular terminal ..)
> >>
> >> Please may I ask, how do you usually submit the R scripts with command
> >> line
> >> arguments to PBS HPC schedulers ?
> >>
> >> qsub -d $PWD -l nodes=1:ppn=4 -l vmem=10gb -m bea -M tanasa at gmail.com \
> >> -v TUMOR="tumor.bam",GERMLINE="germline.bam",CHR="chr22" \
> >> -e script.efile.chr22 \
> >> -o script.ofile.chr22 \
> >> script.R
> >>
> >> Thank you very very much  !
> >>
> >> -- bogdan
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From sigbert at wiwi.hu-berlin.de  Wed Jul 12 10:31:15 2017
From: sigbert at wiwi.hu-berlin.de (Sigbert Klinke)
Date: Wed, 12 Jul 2017 10:31:15 +0200
Subject: [R] devtools::check "hangs"
Message-ID: <261585bc-3b5c-a7c7-5aa5-529f0c0c77f8@wiwi.hu-berlin.de>

Hi,

checking my package with check from devtools leads to the output

Functions with \usage entries need to have the appropriate \alias
entries, and all their arguments documented.
The \usage entries must correspond to syntactically valid R code.
See chapter ?Writing R documentation files? in the ?Writing R
Extensions? manual.
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ...

and that is the last thing I get. Since I write shiny apps, it may 
happen that somewhere an example expects some input/interactivity and is 
not in \dontrun environment. How I can see which example currently is 
checked?

Thanks in advance

Sigbert

-- 
https://hu.berlin/sk
https://hu.berlin/mmstat3


From pmakananisa at sars.gov.za  Wed Jul 12 08:44:58 2017
From: pmakananisa at sars.gov.za (Mangalani Peter Makananisa)
Date: Wed, 12 Jul 2017 06:44:58 +0000
Subject: [R] Importing Big data to R
Message-ID: <2229cf672f984f1ebc5fc620e96adbba@PTABREXC04.sars.gov.za>

Dear R-Gurus,

I am trying to read in data with 24,349,113 rows to R-3.3.3 (64 bit) and have used  the library   "data.table"  and It managed to read 23,347,070 rows  and the remainder was 2,043 rows only.

Could you please advise me as to which library/R-commands is suitable to read the full data in to R?

Kind regards,

Mangalani Peter Makananisa (5786)
South African Revenue Service (SARS)
+2782 456 4669 / +2712 422 7357

Please Note: This email and its contents are subject to our email legal notice which can be viewed at http://www.sars.gov.za/Pages/Email-disclaimer.aspx

	[[alternative HTML version deleted]]


From kscng at connect.hku.hk  Wed Jul 12 07:47:51 2017
From: kscng at connect.hku.hk (Ng, Kelvin Sai-cheong)
Date: Wed, 12 Jul 2017 13:47:51 +0800
Subject: [R] How to formulate quadratic function with interaction terms for
 the PLS fitting model?
Message-ID: <CAM+VLr2ZHeZt2v0R==_v7XJEH=Y4o_uiQLF449Q5OEKtS3EkLg@mail.gmail.com>

Dear all,

I am using the pls package of R to perform partial least square on a set of
multivariate data.  Instead of fitting a linear model, I want to fit my
data with a quadratic function with interaction terms.  But I am not sure
how.  I will use an example to illustrate my problem:

Following the example in the PLS manual:
## Read data
 data(gasoline)
gasTrain <- gasoline[1:50,]
## Perform PLS
gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")

where octane ~ NIR is the model that this example is fitting with.

NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
reflectance measurements from 900 to 1700 nm.

Instead of fitting with octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ...
I want to fit the data with:
octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...

i.e. quadratic with interaction terms.

But I don't know how to formulate this.

May I have some help please?

Thanks,

Kelvin

	[[alternative HTML version deleted]]


From singh.shanu1988 at gmail.com  Wed Jul 12 12:03:32 2017
From: singh.shanu1988 at gmail.com (Shanu Singh)
Date: Wed, 12 Jul 2017 15:33:32 +0530
Subject: [R] Problem for installing cbPlatte on R Version 3.4.1
Message-ID: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>

Please solve the problem. on which R Version works cbplatte?


Regards
Shanu

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Wed Jul 12 12:32:55 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 12 Jul 2017 12:32:55 +0200
Subject: [R] devtools::check "hangs"
In-Reply-To: <261585bc-3b5c-a7c7-5aa5-529f0c0c77f8@wiwi.hu-berlin.de>
References: <261585bc-3b5c-a7c7-5aa5-529f0c0c77f8@wiwi.hu-berlin.de>
Message-ID: <b9857044-66eb-b306-598b-a87297d862d5@statistik.tu-dortmund.de>



On 12.07.2017 10:31, Sigbert Klinke wrote:
> Hi,
> 
> checking my package with check from devtools leads to the output
> 
> Functions with \usage entries need to have the appropriate \alias
> entries, and all their arguments documented.
> The \usage entries must correspond to syntactically valid R code.
> See chapter ?Writing R documentation files? in the ?Writing R
> Extensions? manual.
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ...

Take a look in the example log files in the corresponding check dir.

Best,
Uwe Ligges




> 
> and that is the last thing I get. Since I write shiny apps, it may 
> happen that somewhere an example expects some input/interactivity and is 
> not in \dontrun environment. How I can see which example currently is 
> checked?
> 
> Thanks in advance
> 
> Sigbert
>


From ligges at statistik.tu-dortmund.de  Wed Jul 12 12:34:32 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 12 Jul 2017 12:34:32 +0200
Subject: [R] Problem for installing cbPlatte on R Version 3.4.1
In-Reply-To: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>
References: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>
Message-ID: <abec0603-6ca5-4eb4-058d-791ccb5ae9fd@statistik.tu-dortmund.de>



On 12.07.2017 12:03, Shanu Singh wrote:
> Please solve the problem. on which R Version works cbplatte?

What is cbPlatte  or cbplatte (case matters).

Best,
Uwe Ligges

> 
> 
> Regards
> Shanu
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From singh.shanu1988 at gmail.com  Wed Jul 12 12:35:32 2017
From: singh.shanu1988 at gmail.com (Shanu Singh)
Date: Wed, 12 Jul 2017 16:05:32 +0530
Subject: [R] Problem for installing cbPlatte on R Version 3.4.1
In-Reply-To: <728722730.4260767.1499855248512@mail.yahoo.com>
References: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>
 <728722730.4260767.1499855248512@mail.yahoo.com>
Message-ID: <CAFic_U-3G+dk3uC0M+sLwCReXgmFQbUxGyE8x=4VaCdew8eb+w@mail.gmail.com>

Hi John,

Thanks for reply ! Sorry It was my mistake. It is *cbPalette. *Basically
its a R package.


Shanu

On Wed, Jul 12, 2017 at 3:57 PM, John Kane <jrkrideau at yahoo.ca> wrote:

> What is cbplatte? Where do we find it?
>
>
>
> On Wednesday, July 12, 2017, 6:20:38 AM EDT, Shanu Singh <
> singh.shanu1988 at gmail.com> wrote:
>
>
> Please solve the problem. on which R Version works cbplatte?
>
>
> Regards
> Shanu
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From singh.shanu1988 at gmail.com  Wed Jul 12 12:38:21 2017
From: singh.shanu1988 at gmail.com (Shanu Singh)
Date: Wed, 12 Jul 2017 16:08:21 +0530
Subject: [R] Problem for installing cbPlatte on R Version 3.4.1
In-Reply-To: <abec0603-6ca5-4eb4-058d-791ccb5ae9fd@statistik.tu-dortmund.de>
References: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>
 <abec0603-6ca5-4eb4-058d-791ccb5ae9fd@statistik.tu-dortmund.de>
Message-ID: <CAFic_U9uymDFH+esy+kUwTQUDVZWXaeH53-LgwubJT-8AWrVyA@mail.gmail.com>

Thanks for reply! sorry my my mistake It is *cbPalette*


*Shanu*

On Wed, Jul 12, 2017 at 4:04 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 12.07.2017 12:03, Shanu Singh wrote:
>
>> Please solve the problem. on which R Version works cbplatte?
>>
>
> What is cbPlatte  or cbplatte (case matters).
>
> Best,
> Uwe Ligges
>
>
>>
>> Regards
>> Shanu
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Wed Jul 12 12:38:36 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 12 Jul 2017 12:38:36 +0200
Subject: [R] Problem for installing cbPlatte on R Version 3.4.1
In-Reply-To: <CAFic_U-3G+dk3uC0M+sLwCReXgmFQbUxGyE8x=4VaCdew8eb+w@mail.gmail.com>
References: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>
 <728722730.4260767.1499855248512@mail.yahoo.com>
 <CAFic_U-3G+dk3uC0M+sLwCReXgmFQbUxGyE8x=4VaCdew8eb+w@mail.gmail.com>
Message-ID: <c8c8bd11-b6b0-4b11-9b61-24b08c294269@statistik.tu-dortmund.de>



On 12.07.2017 12:35, Shanu Singh wrote:
> Hi John,
> 
> Thanks for reply ! Sorry It was my mistake. It is *cbPalette. *Basically
> its a R package.

Come on.
- Where do you want to get thsi from?
- What have you tried to do so?

Please re-read the posting guide that helps to ask good questions.

Best,
Uwe Ligges



> 
> 
> Shanu
> 
> On Wed, Jul 12, 2017 at 3:57 PM, John Kane <jrkrideau at yahoo.ca> wrote:
> 
>> What is cbplatte? Where do we find it?
>>
>>
>>
>> On Wednesday, July 12, 2017, 6:20:38 AM EDT, Shanu Singh <
>> singh.shanu1988 at gmail.com> wrote:
>>
>>
>> Please solve the problem. on which R Version works cbplatte?
>>
>>
>> Regards
>> Shanu
>>
>>      [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/
>> posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jholtman at gmail.com  Wed Jul 12 12:39:08 2017
From: jholtman at gmail.com (jim holtman)
Date: Wed, 12 Jul 2017 06:39:08 -0400
Subject: [R] Importing Big data to R
In-Reply-To: <2229cf672f984f1ebc5fc620e96adbba@PTABREXC04.sars.gov.za>
References: <2229cf672f984f1ebc5fc620e96adbba@PTABREXC04.sars.gov.za>
Message-ID: <CAAxdm-4PF72ZAGJOQwYVQOPLpUKmvXmuqYMtAUUitQvr1cG+Gw@mail.gmail.com>

A little more information would be useful.  Why did it stop? Was there an
error message?  Can you show the commands/console log of what you did.
Provide information on how much memory your computer has on it.  When the
operation completed, how much memory was used.  An important aspect is how
many columns did the data have.  How big was the file on disk.  What other
objects were in memory at the same time.  The list can go on and on, so
more information would be useful to understand the problem.


Jim Holtman
Data Munger Guru

What is the problem that you are trying to solve?
Tell me what you want to do, not how you want to do it.

On Wed, Jul 12, 2017 at 2:44 AM, Mangalani Peter Makananisa <
pmakananisa at sars.gov.za> wrote:

> Dear R-Gurus,
>
> I am trying to read in data with 24,349,113 rows to R-3.3.3 (64 bit) and
> have used  the library   "data.table"  and It managed to read 23,347,070
> rows  and the remainder was 2,043 rows only.
>
> Could you please advise me as to which library/R-commands is suitable to
> read the full data in to R?
>
> Kind regards,
>
> Mangalani Peter Makananisa (5786)
> South African Revenue Service (SARS)
> +2782 456 4669 / +2712 422 7357
>
> Please Note: This email and its contents are subject to our email legal
> notice which can be viewed at http://www.sars.gov.za/Pages/
> Email-disclaimer.aspx
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Wed Jul 12 13:33:38 2017
From: pdalgd at gmail.com (Peter Dalgaard)
Date: Wed, 12 Jul 2017 13:33:38 +0200
Subject: [R] Importing Big data to R
In-Reply-To: <2229cf672f984f1ebc5fc620e96adbba@PTABREXC04.sars.gov.za>
References: <2229cf672f984f1ebc5fc620e96adbba@PTABREXC04.sars.gov.za>
Message-ID: <8A4D7AD5-591F-401C-AA4A-C17A903B22E3@gmail.com>


> On 12 Jul 2017, at 08:44 , Mangalani Peter Makananisa <pmakananisa at sars.gov.za> wrote:
> 
> Dear R-Gurus,
> 
> I am trying to read in data with 24,349,113 rows to R-3.3.3 (64 bit) and have used  the library   "data.table"  and It managed to read 23,347,070 rows  and the remainder was 2,043 rows only.

I make that 1002043 rows... (typo?). One possibility is that you are skipping lines because of something like quote characters in data or some input lines being one field short. You might also simply be running out of memory.

However,

1) data.table is a contributed package. Its maintainer may be a better point of contact.

2) if you hope to get advice from the R community at large, it would be useful to tell us what you did, what kind of data you try to read using which command, etc. And, as Jim Holtman already said: error messages, if any. 

-pd

> 
> Could you please advise me as to which library/R-commands is suitable to read the full data in to R?
> 
> Kind regards,
> 
> Mangalani Peter Makananisa (5786)
> South African Revenue Service (SARS)
> +2782 456 4669 / +2712 422 7357
> 
> Please Note: This email and its contents are subject to our email legal notice which can be viewed at http://www.sars.gov.za/Pages/Email-disclaimer.aspx
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ruipbarradas at sapo.pt  Wed Jul 12 14:02:30 2017
From: ruipbarradas at sapo.pt (Rui Barradas)
Date: Wed, 12 Jul 2017 13:02:30 +0100
Subject: [R] Problem for installing cbPlatte on R Version 3.4.1
In-Reply-To: <c8c8bd11-b6b0-4b11-9b61-24b08c294269@statistik.tu-dortmund.de>
References: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>
 <728722730.4260767.1499855248512@mail.yahoo.com>
 <CAFic_U-3G+dk3uC0M+sLwCReXgmFQbUxGyE8x=4VaCdew8eb+w@mail.gmail.com>
 <c8c8bd11-b6b0-4b11-9b61-24b08c294269@statistik.tu-dortmund.de>
Message-ID: <59660FD6.4080004@sapo.pt>

Hello,

Google is your friend.
The only reference to cbPalette I've found is in

http://www.cookbook-r.com/Graphs/Colors_%28ggplot2%29/

and it is defined as:

A colorblind-friendly palette

These are color-blind-friendly palettes, one with gray, and one with black.

To use with ggplot2, it is possible to store the palette in a variable, 
then use it later.

# The palette with grey:
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", 
"#0072B2", "#D55E00", "#CC79A7")

# The palette with black:
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", 
"#0072B2", "#D55E00", "#CC79A7")


The above is a copy and paste from that web page.

Hope this helps,

Rui Barradas


Em 12-07-2017 11:38, Uwe Ligges escreveu:
>
>
> On 12.07.2017 12:35, Shanu Singh wrote:
>> Hi John,
>>
>> Thanks for reply ! Sorry It was my mistake. It is *cbPalette. *Basically
>> its a R package.
>
> Come on.
> - Where do you want to get thsi from?
> - What have you tried to do so?
>
> Please re-read the posting guide that helps to ask good questions.
>
> Best,
> Uwe Ligges
>
>
>
>>
>>
>> Shanu
>>
>> On Wed, Jul 12, 2017 at 3:57 PM, John Kane <jrkrideau at yahoo.ca> wrote:
>>
>>> What is cbplatte? Where do we find it?
>>>
>>>
>>>
>>> On Wednesday, July 12, 2017, 6:20:38 AM EDT, Shanu Singh <
>>> singh.shanu1988 at gmail.com> wrote:
>>>
>>>
>>> Please solve the problem. on which R Version works cbplatte?
>>>
>>>
>>> Regards
>>> Shanu
>>>
>>>      [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/
>>> posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>     [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pjmiller_57 at yahoo.com  Wed Jul 12 14:48:47 2017
From: pjmiller_57 at yahoo.com (Paul Miller)
Date: Wed, 12 Jul 2017 12:48:47 +0000 (UTC)
Subject: [R] Extracting sentences with combinations of target
 words/terms from cancer patient text medical records
In-Reply-To: <CAGxFJbQzkeYucH_V5q5SeWLS66g9bdtn7mt71O3ivJoDFEDQWA@mail.gmail.com>
References: <mailman.1.1499767201.10183.r-help@r-project.org>
 <1870157674.3473342.1499782252997@mail.yahoo.com>
 <CAGxFJbQzkeYucH_V5q5SeWLS66g9bdtn7mt71O3ivJoDFEDQWA@mail.gmail.com>
Message-ID: <1125236823.4280258.1499863727620@mail.yahoo.com>

Hi Bert,

Thanks for your reply. It appears that I didn't replace the variable name "sampletxt" with the argument "x" in my function. I've corrected that and now my code seems to be working fine.

Paul

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>

Cc: R-help <r-help at r-project.org>
Sent: Tuesday, July 11, 2017 2:00 PM
Subject: Re: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records



Have you looked at the CRAN Natural Language Processing Task View? If not, why not? If so, why were the resources described there inadequate?

Bert


On Jul 11, 2017 10:49 AM, "Paul Miller via R-help" <r-help at r-project.org> wrote:

Hello All,
>
>I need some help figuring out how to extract combinations of target words/terms from cancer patient text medical records. I've provided some sample data and code below to illustrate what I'm trying to do. At the moment, I'm trying to extract sentences that contain the word "breast" plus either "metastatic" or "stage IV".
>
>It's been some time since I used R and I feel a bit rusty. I wrote a function called "sentence_match" that seemed to work well when applied to a single piece of text. You can see that by running the section titled
>
>"Working code". I thought that it might be possible easily to apply my function to a data set (tibble or df) but that doesn't seem to be the case. My unsuccessful attempt to do this appears in the section titled "Non-working code".
>
>If someone could help me get my code up and running, that would be greatly appreciated. I'm using a lot of functions from Hadley Wickham's packages, but that's not particularly necessary. Although I have only a few entries in my sample data, my actual data are pretty large. Currently, I'm working with over a million records. Some records contain only a single sentence, but many have several paragraphs. One concern I had was that, even if I could get my code working, it would be too inefficient to handle that volume of data.
>
>Thanks,
>
>Paul
>
>
>library(tidyverse)
>library(stringr)
>library(lubridate)
>
>sentence_match <- function(x){
>  sentence_extract <- str_extract_all(sampletxt, boundary("sentence"), simplify = TRUE)
>  sentence_number <- intersect(str_which(sentence_ extract, "breast"), str_which(sentence_extract, "metastatic|stage IV"))
>  sentence_match <- str_c(sentence_number, ": ", sentence_extract[sentence_ number], collapse = "")
>  sentence_match
>}
>
>#### Working code ####
>
>sampletxt <- "This sentence contains the word metastatic and the word breast. This sentence contains no target words."
>
>sentence_match(sampletxt)
>
>#### Non-working code ####
>
>sampletxt <-
>  structure(
>    list(
>      PTNO = c(1, 2, 2, 2),
>      DATE = structure(c(16436, 16436, 16832, 16845), class = "Date"),
>      TYPE = c("Progress note", "CAT scan", "Progress note", "Progress note"),
>      TVAR = c(
>        "This sentence contains the word metastatic. This sentence contains the term stage IV.",
>        "This sentence contains no target words. This sentence also contains no target words.",
>        "This sentence contains the word metastatic and the word breast. This sentence contains no target words.",
>        "This sentence contains the words breast and the term metastatic. This
>sentence contains the word breast and the term stage IV."
>      )
>    ),
>    .Names = c("PTNO", "DATE", "TYPE", "TVAR"),
>    class = c("tbl_df",
>              "tbl", "data.frame"),
>    row.names = c(NA,-4L)
>  )
>
>sampletxt2 <- group_by_at(sampletxt, vars(PTNO, DATE, TYPE))
>sampletxt2 <-
>  sampletxt2 %>%
>  mutate(
>    EXTRACTED = sentence_match(TVAR)
>  )
>
>______________________________ ________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/ listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/ posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>


From jrkrideau at yahoo.ca  Wed Jul 12 12:27:28 2017
From: jrkrideau at yahoo.ca (John Kane)
Date: Wed, 12 Jul 2017 10:27:28 +0000 (UTC)
Subject: [R] Problem for installing cbPlatte on R Version 3.4.1
In-Reply-To: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>
References: <CAFic_U8RuPTNPZQsmgkiV1aho3ZJvLGLxdqh5fZkjms6+c-b8w@mail.gmail.com>
Message-ID: <728722730.4260767.1499855248512@mail.yahoo.com>

What is cbplatte? Where do we find it?



On Wednesday, July 12, 2017, 6:20:38 AM EDT, Shanu Singh <singh.shanu1988 at gmail.com> wrote:

Please solve the problem. on which R Version works cbplatte?


Regards
Shanu

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From rmcgehee at walleyetrading.net  Wed Jul 12 18:46:49 2017
From: rmcgehee at walleyetrading.net (Robert McGehee)
Date: Wed, 12 Jul 2017 16:46:49 +0000
Subject: [R] Extracting sentences with combinations of target
 words/terms from cancer patient text medical records
In-Reply-To: <1125236823.4280258.1499863727620@mail.yahoo.com>
References: <mailman.1.1499767201.10183.r-help@r-project.org>
 <1870157674.3473342.1499782252997@mail.yahoo.com>
 <CAGxFJbQzkeYucH_V5q5SeWLS66g9bdtn7mt71O3ivJoDFEDQWA@mail.gmail.com>
 <1125236823.4280258.1499863727620@mail.yahoo.com>
Message-ID: <30D28A63376088428E8318DD67FD407F7BA053@ny-mailstore1.walleyetrading.net>

Hi Paul,
Sounds like you have your answer, but for fun I thought I'd try solving your problem using only a regular expression query and base R. I believe this works:
 
> txt <- "Patient had stage IV breast cancer. Nothing matches this sentence. Metastatic and breast match this sentence. French bike champion takes stage IV victory in Tour de France."

> pattern <- "([^.?!]*(?=[^.?!]*\\bbreast\\b)(?=[^.?!]*\\b(metastatic|stage IV)\\b)(?=[\\s.?!])[^.?!]*[.?!])"

> regmatches(txt, gregexpr(pattern, txt, perl=TRUE, ignore.case=TRUE))[[1]]
[1] "Patient had stage IV breast cancer."        
[2] " Metastatic and breast match this sentence."

Cheers, Robert

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Paul Miller via R-help
Sent: Wednesday, July 12, 2017 8:49 AM
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records

Hi Bert,

Thanks for your reply. It appears that I didn't replace the variable name "sampletxt" with the argument "x" in my function. I've corrected that and now my code seems to be working fine.

Paul

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>

Cc: R-help <r-help at r-project.org>
Sent: Tuesday, July 11, 2017 2:00 PM
Subject: Re: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records



Have you looked at the CRAN Natural Language Processing Task View? If not, why not? If so, why were the resources described there inadequate?

Bert


On Jul 11, 2017 10:49 AM, "Paul Miller via R-help" <r-help at r-project.org> wrote:

Hello All,
>
>I need some help figuring out how to extract combinations of target words/terms from cancer patient text medical records. I've provided some sample data and code below to illustrate what I'm trying to do. At the moment, I'm trying to extract sentences that contain the word "breast" plus either "metastatic" or "stage IV".
>
>It's been some time since I used R and I feel a bit rusty. I wrote a function called "sentence_match" that seemed to work well when applied to a single piece of text. You can see that by running the section titled
>
>"Working code". I thought that it might be possible easily to apply my function to a data set (tibble or df) but that doesn't seem to be the case. My unsuccessful attempt to do this appears in the section titled "Non-working code".
>
>If someone could help me get my code up and running, that would be greatly appreciated. I'm using a lot of functions from Hadley Wickham's packages, but that's not particularly necessary. Although I have only a few entries in my sample data, my actual data are pretty large. Currently, I'm working with over a million records. Some records contain only a single sentence, but many have several paragraphs. One concern I had was that, even if I could get my code working, it would be too inefficient to handle that volume of data.
>
>Thanks,
>
>Paul
>
>
>library(tidyverse)
>library(stringr)
>library(lubridate)
>
>sentence_match <- function(x){
>  sentence_extract <- str_extract_all(sampletxt, boundary("sentence"), simplify = TRUE)
>  sentence_number <- intersect(str_which(sentence_ extract, "breast"), str_which(sentence_extract, "metastatic|stage IV"))
>  sentence_match <- str_c(sentence_number, ": ", sentence_extract[sentence_ number], collapse = "")
>  sentence_match
>}
>
>#### Working code ####
>
>sampletxt <- "This sentence contains the word metastatic and the word breast. This sentence contains no target words."
>
>sentence_match(sampletxt)
>
>#### Non-working code ####
>
>sampletxt <-
>  structure(
>    list(
>      PTNO = c(1, 2, 2, 2),
>      DATE = structure(c(16436, 16436, 16832, 16845), class = "Date"),
>      TYPE = c("Progress note", "CAT scan", "Progress note", "Progress note"),
>      TVAR = c(
>        "This sentence contains the word metastatic. This sentence contains the term stage IV.",
>        "This sentence contains no target words. This sentence also contains no target words.",
>        "This sentence contains the word metastatic and the word breast. This sentence contains no target words.",
>        "This sentence contains the words breast and the term metastatic. This
>sentence contains the word breast and the term stage IV."
>      )
>    ),
>    .Names = c("PTNO", "DATE", "TYPE", "TVAR"),
>    class = c("tbl_df",
>              "tbl", "data.frame"),
>    row.names = c(NA,-4L)
>  )
>
>sampletxt2 <- group_by_at(sampletxt, vars(PTNO, DATE, TYPE))
>sampletxt2 <-
>  sampletxt2 %>%
>  mutate(
>    EXTRACTED = sentence_match(TVAR)
>  )
>
>______________________________ ________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/ listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/ posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From kmoreho1 at swarthmore.edu  Wed Jul 12 16:53:30 2017
From: kmoreho1 at swarthmore.edu (Kirsten Morehouse)
Date: Wed, 12 Jul 2017 10:53:30 -0400
Subject: [R] How to make a figure plotting p-values by range of different
 adjustment values?
Message-ID: <CAN1UO=vLbYM-u0nN7R8rg-rpQqj1e2SfrQRkVadCGROr6tT6Ww@mail.gmail.com>

Hi all,

Thank you for taking the time to read my message. I'm trying to make a
figure that plots p-values by a range of different adjustment values.

(Using the **logit** function in package **car**)

My Statistical analyses were conducted on probability estimates ranging
from 0% to 100%. As it's not ideal to run linear models on percentages that
are bounded between 0 and 1, these estimates were logit transformed.

However, this introduces a researcher degree of freedom. In Package
**Car**, the logit transformation code is

        logit(p = doc$value, adjust = 0.025)

    logit definition/Description

    Compute the logit transformation of proportions or percentages.

    Usage

         logit(p, percents=range.p[2] > 1, adjust)

    Arguments

    p  a numeric vector or array of proportions or percentages.
    percents TRUE for percentages.
    adjust   adjustment factor to avoid proportions of 0 or 1; defaults to
0 if there are no such proportions in the data, and to .025 if there are.)

I chose the default adjustment factor of .025, but I need to determine at
what point my values are greater than .05 to show I did not choose an
ajustment value that makes my results significant.

Ultimately, I want to find the range of adjustment factors do we get P <
0.05?And at what point do we get P > 0.05?

    ## The final product I'm looking for is a figure with the following
features:
      ## 1) Adjustment factor on the x-axis
      ## 2) P value on the y-axis

    Does anyone know how to do this? Thank you so much in advance.

	[[alternative HTML version deleted]]


From mark.hogue at srs.gov  Wed Jul 12 22:02:42 2017
From: mark.hogue at srs.gov (mark.hogue at srs.gov)
Date: Wed, 12 Jul 2017 16:02:42 -0400
Subject: [R] metRology package
Message-ID: <OFA8433D8B.F9773A9F-ON8525815B.006C917D-8525815B.006E1C96@srs.gov>

I'm having trouble with a simple application with metRology. I need to 
estimate the uncertainty of the density thickness of seven sheets of film. 
This is calculated from measurements of mass, length and width of 
rectangular samples of film.

It's not too hard to calculate the whole thing with a little Monte Carlo 
loop. I get about 0.07 with this:

        #sample area
        L<-5*2.54 #cm
        W<-8*2.54 #cm
        #sample mass
        m<-0.2543*1000 #mg
        #uncertainties
        L.u<-(1/16)*2.54 #cm (nearest 16th inch)
        W.u<-(1/16)*2.54 #cm 
        m.u<-0.006*1000 #mg scale calibration data 

        denth<-c(0,0,0)
        singth<-c(0,0,0)
        for(i in 1:1e5) {
          #denth[i]<-7*dt+sum(rnorm(7,0,dt.u))
          for(j in 1:7)
 singth[j]<-(m+rnorm(1,0,m.u))/((L+rnorm(1,0,L.u))*(W+rnorm(1,0,W.u)))
          denth[i]<-sum(singth)
        }
        sd(denth) #0.07279882

Now with the metRology package, I get a much higher number, which is 
actually the seven times the uncertainty of one layer:

        require(metRology)
        d.set<-list(mass=m,Length=L,Width=W)
        d.set.u<-list(m.u,L.u,W.u)

        dent<-expression(7*(mass/(Length*Width)))
        uncert(obj=dent, x=d.set, u=d.set.u, method="GUM")

I've tried other ways of defining the expression and every method option. 
I suspect the expression is the problem area, but if so, I really need to 
know how to get it right for harder problems. Thanks in advance for any 
suggestions.

- Mark

	[[alternative HTML version deleted]]


From Frances.OseiBonsu at lasalle.com  Wed Jul 12 22:35:52 2017
From: Frances.OseiBonsu at lasalle.com (OseiBonsu, Frances)
Date: Wed, 12 Jul 2017 20:35:52 +0000
Subject: [R] Question on Simultaneous Equations & Forecasting
Message-ID: <BLUPR08MB34259C265FC491E574DEFC7FAAF0@BLUPR08MB342.namprd08.prod.outlook.com>

Hello,

I have estimated a simultaneous equation model (similar to Klein's model) in R using the system.fit package.

I have an identity equation, along with three other equations. Do you know how to explicitly identify the identity equation in R?

I am also trying to forecast the dependent variables in the simultaneous equation model, while incorporating the identity equation in the forecasts. Is there a way to do this in R?

The only way that I have been able to forecast the dependent variables has been by getting the predictions of each variable, converting them to time series uni-variables, and forecasting each variable individually.

Any help would be appreciated.

Best Regards,

Frances Osei-Bonsu
Summer Analyst, Research and Strategy
LaSalle Investment Management
333 West Wacker Drive, Suite 2300, Chicago IL 60606
Email frances.oseibonsu at lasalle.com<mailto:frances.oseibonsu at lasalle.com>
Tel +1 312 897 4024
lasalle.com<http://www.lasalle.com/>



This email is for the use of the intended recipient(s) only. If you have received this email in error, please notify the sender immediately and then delete it. If you are not the intended recipient, you must not keep, use, disclose, copy or distribute this email without the author's prior permission. We have taken precautions to minimize the risk of transmitting software viruses, but we advise you to carry out your own virus checks on any attachment to this message. We cannot accept liability for any loss or damage caused by software viruses. The information contained in this communication may be confidential and may be subject to the attorney-client privilege. If you are the intended recipient and you do not wish to receive similar electronic messages from us in the future then please respond to the sender to this effect.

	[[alternative HTML version deleted]]


From drjimlemon at gmail.com  Thu Jul 13 02:49:11 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Thu, 13 Jul 2017 10:49:11 +1000
Subject: [R] How to make a figure plotting p-values by range of
 different adjustment values?
In-Reply-To: <CAN1UO=vLbYM-u0nN7R8rg-rpQqj1e2SfrQRkVadCGROr6tT6Ww@mail.gmail.com>
References: <CAN1UO=vLbYM-u0nN7R8rg-rpQqj1e2SfrQRkVadCGROr6tT6Ww@mail.gmail.com>
Message-ID: <CA+8X3fWSe3_Z86PqesVwH0-076TnafX3K8gwrHPzKrdWsUptTw@mail.gmail.com>

Hi Kirsten,
Perhaps this will help:

set.seed(3)
kmdf<-data.frame(group=rep(1:4,each=20),
 prop=c(runif(20,0.25,1),runif(20,0.2,0.92),
 runif(20,0.15,0.84),runif(20,0.1,0.77)))
km.glm<-glm(prop~group,kmdf,family=quasibinomial(link="logit"))
summary(km.glm)
pval<-0.00845
padjs<-NA
npadj<-1
# assume you have five comparisons in this family
for(method in p.adjust.methods) {
 padjs[npadj]<-p.adjust(pval,method=method,n=5)
 npadj<-npadj+1
}
plot(padjs,xaxt="n",main="P plot",xlab="Method",ylab="adjusted p values")
abline(h=0.05,col="lightgray")
library(plotrix)
staxlab(1,at=1:8,labels=p.adjust.methods)

Jim


On Thu, Jul 13, 2017 at 12:53 AM, Kirsten Morehouse
<kmoreho1 at swarthmore.edu> wrote:
> Hi all,
>
> Thank you for taking the time to read my message. I'm trying to make a
> figure that plots p-values by a range of different adjustment values.
>
> (Using the **logit** function in package **car**)
>
> My Statistical analyses were conducted on probability estimates ranging
> from 0% to 100%. As it's not ideal to run linear models on percentages that
> are bounded between 0 and 1, these estimates were logit transformed.
>
> However, this introduces a researcher degree of freedom. In Package
> **Car**, the logit transformation code is
>
>         logit(p = doc$value, adjust = 0.025)
>
>     logit definition/Description
>
>     Compute the logit transformation of proportions or percentages.
>
>     Usage
>
>          logit(p, percents=range.p[2] > 1, adjust)
>
>     Arguments
>
>     p  a numeric vector or array of proportions or percentages.
>     percents TRUE for percentages.
>     adjust   adjustment factor to avoid proportions of 0 or 1; defaults to
> 0 if there are no such proportions in the data, and to .025 if there are.)
>
> I chose the default adjustment factor of .025, but I need to determine at
> what point my values are greater than .05 to show I did not choose an
> ajustment value that makes my results significant.
>
> Ultimately, I want to find the range of adjustment factors do we get P <
> 0.05?And at what point do we get P > 0.05?
>
>     ## The final product I'm looking for is a figure with the following
> features:
>       ## 1) Adjustment factor on the x-axis
>       ## 2) P value on the y-axis
>
>     Does anyone know how to do this? Thank you so much in advance.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From chocold12 at gmail.com  Thu Jul 13 03:46:45 2017
From: chocold12 at gmail.com (lily li)
Date: Wed, 12 Jul 2017 19:46:45 -0600
Subject: [R] about plotting a special case
Message-ID: <CAN5afy8nBxmCaELhLBRaQD2-L3MisY0sef52-uho9cLJkycENQ@mail.gmail.com>

Hi R users,

I have a question about plotting. There is the dataframe below, while each
row represents a record. If I want to plot on a A-B plot, i.e., x-axis
represents A, while y-axis represents B values. However, I want to plot the
mean value from records 1-10 as one point, while the 10th and 90th
percentiles represent the error bars, such as one point in the attached
example. I don't know how to do this, and then add a legend.
After the above step, if I have a dataframe DF2 with the same structure but
different values than DF1, how to show the point on the same figure, but
use different colors or symbols? Thanks for any advices.

DF1

        A  B  C
1     65 21 54
2     66 23 55
3     54 24 56
4     44 23 53
5     67 22 52
6     66 21 50
7     45 20 51
8     56 19 57
9     40 25 58
10   39 24 53
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sample.pdf
Type: application/pdf
Size: 6784 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20170712/82301a81/attachment.pdf>

From drjimlemon at gmail.com  Thu Jul 13 04:25:39 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Thu, 13 Jul 2017 12:25:39 +1000
Subject: [R] about plotting a special case
In-Reply-To: <CAN5afy8nBxmCaELhLBRaQD2-L3MisY0sef52-uho9cLJkycENQ@mail.gmail.com>
References: <CAN5afy8nBxmCaELhLBRaQD2-L3MisY0sef52-uho9cLJkycENQ@mail.gmail.com>
Message-ID: <CA+8X3fXjqgx_VLhVe9EYagL-6Yu+RL6ZDW9if0rdxeTqWJLEtA@mail.gmail.com>

Hi lily,
Here is the first plot:

plot(DF1$A,DF1$B,pch=19,col="red")
meanA<-mean(DF1$A)
meanB<-mean(DF1$B)
points(meanA,meanB,pch=18,col="red")
q1090<-quantile(DF1$B,probs=c(0.1,0.9))
library(plotrix)
dispersion(meanA,meanB,q1090[2],q1090[1],
 intervals=FALSE,col="red")

The same code will work for a second data frame, except that you would
use "points" instead of "plot" and change the color. You may also have
to specify xlim and ylim in the first call to "plot" so that all
values are on the plot.

Jim



On Thu, Jul 13, 2017 at 11:46 AM, lily li <chocold12 at gmail.com> wrote:
> Hi R users,
>
> I have a question about plotting. There is the dataframe below, while each
> row represents a record. If I want to plot on a A-B plot, i.e., x-axis
> represents A, while y-axis represents B values. However, I want to plot the
> mean value from records 1-10 as one point, while the 10th and 90th
> percentiles represent the error bars, such as one point in the attached
> example. I don't know how to do this, and then add a legend.
> After the above step, if I have a dataframe DF2 with the same structure but
> different values than DF1, how to show the point on the same figure, but
> use different colors or symbols? Thanks for any advices.
>
> DF1
>
>         A  B  C
> 1     65 21 54
> 2     66 23 55
> 3     54 24 56
> 4     44 23 53
> 5     67 22 52
> 6     66 21 50
> 7     45 20 51
> 8     56 19 57
> 9     40 25 58
> 10   39 24 53
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From chocold12 at gmail.com  Thu Jul 13 05:32:25 2017
From: chocold12 at gmail.com (lily li)
Date: Wed, 12 Jul 2017 21:32:25 -0600
Subject: [R] about plotting a special case
In-Reply-To: <CA+8X3fXjqgx_VLhVe9EYagL-6Yu+RL6ZDW9if0rdxeTqWJLEtA@mail.gmail.com>
References: <CAN5afy8nBxmCaELhLBRaQD2-L3MisY0sef52-uho9cLJkycENQ@mail.gmail.com>
 <CA+8X3fXjqgx_VLhVe9EYagL-6Yu+RL6ZDW9if0rdxeTqWJLEtA@mail.gmail.com>
Message-ID: <CAN5afy-iKX8sNwkaqCrerHVmm-dvvmxyuKTMC8+YnhxD8-x9OA@mail.gmail.com>

Thanks, Jim. The code works, but I don't understand why you use q1090 <-
quantile(DF1$B, probs=c()), rather than DF1$A? Also, how to add a legend
for both points DF1 and DF2?

On Wed, Jul 12, 2017 at 8:25 PM, Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi lily,
> Here is the first plot:
>
> plot(DF1$A,DF1$B,pch=19,col="red")
> meanA<-mean(DF1$A)
> meanB<-mean(DF1$B)
> points(meanA,meanB,pch=18,col="red")
> q1090<-quantile(DF1$B,probs=c(0.1,0.9))
> library(plotrix)
> dispersion(meanA,meanB,q1090[2],q1090[1],
>  intervals=FALSE,col="red")
>
> The same code will work for a second data frame, except that you would
> use "points" instead of "plot" and change the color. You may also have
> to specify xlim and ylim in the first call to "plot" so that all
> values are on the plot.
>
> Jim
>
>
>
> On Thu, Jul 13, 2017 at 11:46 AM, lily li <chocold12 at gmail.com> wrote:
> > Hi R users,
> >
> > I have a question about plotting. There is the dataframe below, while
> each
> > row represents a record. If I want to plot on a A-B plot, i.e., x-axis
> > represents A, while y-axis represents B values. However, I want to plot
> the
> > mean value from records 1-10 as one point, while the 10th and 90th
> > percentiles represent the error bars, such as one point in the attached
> > example. I don't know how to do this, and then add a legend.
> > After the above step, if I have a dataframe DF2 with the same structure
> but
> > different values than DF1, how to show the point on the same figure, but
> > use different colors or symbols? Thanks for any advices.
> >
> > DF1
> >
> >         A  B  C
> > 1     65 21 54
> > 2     66 23 55
> > 3     54 24 56
> > 4     44 23 53
> > 5     67 22 52
> > 6     66 21 50
> > 7     45 20 51
> > 8     56 19 57
> > 9     40 25 58
> > 10   39 24 53
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drjimlemon at gmail.com  Thu Jul 13 06:02:24 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Thu, 13 Jul 2017 14:02:24 +1000
Subject: [R] about plotting a special case
In-Reply-To: <CAN5afy-iKX8sNwkaqCrerHVmm-dvvmxyuKTMC8+YnhxD8-x9OA@mail.gmail.com>
References: <CAN5afy8nBxmCaELhLBRaQD2-L3MisY0sef52-uho9cLJkycENQ@mail.gmail.com>
 <CA+8X3fXjqgx_VLhVe9EYagL-6Yu+RL6ZDW9if0rdxeTqWJLEtA@mail.gmail.com>
 <CAN5afy-iKX8sNwkaqCrerHVmm-dvvmxyuKTMC8+YnhxD8-x9OA@mail.gmail.com>
Message-ID: <CA+8X3fWY9N0tBE0SQm_T74qSQLDEtqgv_q6vv4p73K1a8Tc=tg@mail.gmail.com>

values A and B have different ranges. Therefore you would want
horizontal error bars for the B mean. The dispersion function doesn't
do horizontal error bars, so you can use plotCI also in plotrix. Here
is an example with two databases:

DF2<-read.table(text="A  B  C
     62 22 54
     69 24 55
     51 28 56
     47 25 53
     70 21 52
     61 23 50
     40 19 51
     58 18 57
     38 24 58
     37 27 53",header=TRUE)
plot(DF1$A,DF1$B,xlim=range(c(DF1$A,DF2$A)),
 ylim=range(c(DF1$B,DF2$B)),pch=19,col="red")
meanA<-mean(DF1$A)
meanB<-mean(DF1$B)
points(meanA,meanB,pch=18,col="red")
q1090<-quantile(DF1$B,probs=c(0.1,0.9))
plotCI(meanA,meanB,ui=q1090[2],li=q1090[1],err="x",
  add=TRUE,col="red")
points(DF2$A,DF2$B,pch=19,col="green")
meanA<-mean(DF2$A)
meanB<-mean(DF2$B)
points(meanA,meanB,pch=18,col="green")
q1090<-quantile(DF2$B,probs=c(0.1,0.9))
plotCI(meanA,meanB,ui=q1090[2],li=q1090[1],err="x",
 add=TRUE,col="red")
# click at the upper left corner of the legend
legend(locator(1),legend=c("DF1","DF2"),pch=19,
 col=c("red","green"))

Jim

On Thu, Jul 13, 2017 at 1:32 PM, lily li <chocold12 at gmail.com> wrote:
> Thanks, Jim. The code works, but I don't understand why you use q1090 <-
> quantile(DF1$B, probs=c()), rather than DF1$A? Also, how to add a legend for
> both points DF1 and DF2?
>
> On Wed, Jul 12, 2017 at 8:25 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi lily,
>> Here is the first plot:
>>
>> plot(DF1$A,DF1$B,pch=19,col="red")
>> meanA<-mean(DF1$A)
>> meanB<-mean(DF1$B)
>> points(meanA,meanB,pch=18,col="red")
>> q1090<-quantile(DF1$B,probs=c(0.1,0.9))
>> library(plotrix)
>> dispersion(meanA,meanB,q1090[2],q1090[1],
>>  intervals=FALSE,col="red")
>>
>> The same code will work for a second data frame, except that you would
>> use "points" instead of "plot" and change the color. You may also have
>> to specify xlim and ylim in the first call to "plot" so that all
>> values are on the plot.
>>
>> Jim
>>
>>
>>
>> On Thu, Jul 13, 2017 at 11:46 AM, lily li <chocold12 at gmail.com> wrote:
>> > Hi R users,
>> >
>> > I have a question about plotting. There is the dataframe below, while
>> > each
>> > row represents a record. If I want to plot on a A-B plot, i.e., x-axis
>> > represents A, while y-axis represents B values. However, I want to plot
>> > the
>> > mean value from records 1-10 as one point, while the 10th and 90th
>> > percentiles represent the error bars, such as one point in the attached
>> > example. I don't know how to do this, and then add a legend.
>> > After the above step, if I have a dataframe DF2 with the same structure
>> > but
>> > different values than DF1, how to show the point on the same figure, but
>> > use different colors or symbols? Thanks for any advices.
>> >
>> > DF1
>> >
>> >         A  B  C
>> > 1     65 21 54
>> > 2     66 23 55
>> > 3     54 24 56
>> > 4     44 23 53
>> > 5     67 22 52
>> > 6     66 21 50
>> > 7     45 20 51
>> > 8     56 19 57
>> > 9     40 25 58
>> > 10   39 24 53
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>
>


From kscng at connect.hku.hk  Thu Jul 13 03:58:39 2017
From: kscng at connect.hku.hk (Ng, Kelvin Sai-cheong)
Date: Thu, 13 Jul 2017 09:58:39 +0800
Subject: [R] Quadratic function with interaction terms for the PLS fitting
	model?
Message-ID: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>

Dear all,

I am using the pls package of R to perform partial least square on a set of
multivariate data.  Instead of fitting a linear model, I want to fit my
data with a quadratic function with interaction terms.  But I am not sure
how.  I will use an example to illustrate my problem:

Following the example in the PLS manual:
## Read data
 data(gasoline)
gasTrain <- gasoline[1:50,]
## Perform PLS
gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")

where octane ~ NIR is the model that this example is fitting with.

NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
reflectance measurements from 900 to 1700 nm.

Instead of fitting with predict.octane[i] = a[0] * NIR[0,i] + a[1] *
NIR[1,i] + ...
I want to fit the data with:
predict.octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...

i.e. quadratic with interaction terms.

But I don't know how to formulate this.

May I have some help please?

Thanks,

Kelvin

	[[alternative HTML version deleted]]


From rosspjchapman at gmail.com  Thu Jul 13 07:29:12 2017
From: rosspjchapman at gmail.com (Ross Chapman)
Date: Thu, 13 Jul 2017 15:29:12 +1000
Subject: [R] bnlearn and cpquery
Message-ID: <007401d2fb98$f830e380$e892aa80$@gmail.com>

Hi all

 

I have built a Bayesian network using discrete data using the bnlearn
package.

 

When I try to run the cpquery function on this data it returns NaN for some
some cases.

 

Running the cpquery in debug mode for such a case (n=10^5, method="lw")
creates the following output:

 

generated a grand total of 1e+05 samples.

  > event has a probability mass of 14982.37 out of NaN (p = NaN).

[1] NaN

 

 

The cpquery command takes the following structure:

 

cpquery(fullFitted,event=(C1_class=="Med"),

        evidence=list(GK_class = "ModHi",

                      GTh_class = "Lo",

                      GU_class = "Lo",

                      El_class = "Hi",

                      E50_class = "Med",

                      E150_class = "Med"

        ) ,

        n=10^5,   method =  "lw", debug=TRUE)

 

Similarly, when I try to run the predict method on the same data, it returns
the following warning:

 

Warning message:
In map.prediction(node = node, fitted = object, data = data, n =
extra.args$n,  :
  dropping 38073 observations because generated samples are NAs.

 

 

Could you advise me why these queries are generating NaN values, and how
they might be resolved.

 

The session info is as follows:

 

sessionInfo()
R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)
 
Matrix products: default
 
locale:
[1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252
LC_MONETARY=English_Australia.1252
[4] LC_NUMERIC=C                       LC_TIME=English_Australia.1252    
 
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
 
other attached packages:
[1] bnlearn_4.2
 
loaded via a namespace (and not attached):
[1] compiler_3.4.1 tools_3.4.1   

 

 

Many thanks in advance

 

Ross

 


	[[alternative HTML version deleted]]


From Bernhard_Pfaff at fra.invesco.com  Thu Jul 13 10:06:09 2017
From: Bernhard_Pfaff at fra.invesco.com (Pfaff, Bernhard Dr.)
Date: Thu, 13 Jul 2017 08:06:09 +0000
Subject: [R] Question on Simultaneous Equations & Forecasting
In-Reply-To: <BLUPR08MB34259C265FC491E574DEFC7FAAF0@BLUPR08MB342.namprd08.prod.outlook.com>
References: <BLUPR08MB34259C265FC491E574DEFC7FAAF0@BLUPR08MB342.namprd08.prod.outlook.com>
Message-ID: <FCD9A33C859ACC469587CB09DD5C6C712EA5DFFB@GBLONXMB13.corp.amvescap.net>

Hi Frances,

I have not touched the system.fit package for quite some time, but to solve your problem the following two pointers might be helpful:

1) Recast your model in the revised form, i.e., include your identity directly into your reaction functions, if possible.
2) For solving your model, you can employ the Gau?-Seidel method (see https://en.wikipedia.org/wiki/Gauss%E2%80%93Seidel_method).
This has not only the advantage of generating forecasts, in terms of your exogenous variables, but you can also compute 'dynamic ex post' forecasts. This is probably the most powerful testing for dynamic simultaneous equation systems, given that you provide only your predetermined variables as starting values and then apply the Gauss-Seidel method (recursively) in-sample. The progressions of your endogenous variables should then not depart too much from your observed in-sample endogenous variables, i.e., you are assessing the stability of your model. Because forecast-errors cumulate over time in a dynamic ex-post forecast, this is a rather good and stringent model-test.

Incidentally, when you use simultaneous equation models on a larger scale (say, between 200-300 equations, like medium-sized macroeconomic models), the only route to go for, is by estimating your reaction equations separately and then putting all your pieces - including identities and/or technical equations - together in a format suitable for applying the Gauss-Seidel method. Hence, forget about 2SLS or 3SLS and Haavelmo-bias.

Best wishes,
Bernhard   

-----Urspr?ngliche Nachricht-----
Von: R-help [mailto:r-help-bounces at r-project.org] Im Auftrag von OseiBonsu, Frances
Gesendet: Mittwoch, 12. Juli 2017 22:36
An: r-help at r-project.org
Betreff: [EXT] [R] Question on Simultaneous Equations & Forecasting

Hello,

I have estimated a simultaneous equation model (similar to Klein's model) in R using the system.fit package.

I have an identity equation, along with three other equations. Do you know how to explicitly identify the identity equation in R?

I am also trying to forecast the dependent variables in the simultaneous equation model, while incorporating the identity equation in the forecasts. Is there a way to do this in R?

The only way that I have been able to forecast the dependent variables has been by getting the predictions of each variable, converting them to time series uni-variables, and forecasting each variable individually.

Any help would be appreciated.

Best Regards,

Frances Osei-Bonsu
Summer Analyst, Research and Strategy
LaSalle Investment Management
333 West Wacker Drive, Suite 2300, Chicago IL 60606 Email frances.oseibonsu at lasalle.com<mailto:frances.oseibonsu at lasalle.com>
Tel +1 312 897 4024
lasalle.com<http://www.lasalle.com/>



This email is for the use of the intended recipient(s) only. If you have received this email in error, please notify the sender immediately and then delete it. If you are not the intended recipient, you must not keep, use, disclose, copy or distribute this email without the author's prior permission. We have taken precautions to minimize the risk of transmitting software viruses, but we advise you to carry out your own virus checks on any attachment to this message. We cannot accept liability for any loss or damage caused by software viruses. The information contained in this communication may be confidential and may be subject to the attorney-client privilege. If you are the intended recipient and you do not wish to receive similar electronic messages from us in the future then please respond to the sender to this effect.

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
*****************************************************************
Confidentiality Note: The information contained in this ...{{dropped:10}}


From drjimlemon at gmail.com  Thu Jul 13 10:35:25 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Thu, 13 Jul 2017 18:35:25 +1000
Subject: [R] about plotting a special case
In-Reply-To: <CAN5afy8FRjrOjdV4rfZ9uY7x6hy2qr6LUGPXmiuuvvt8BPNWqg@mail.gmail.com>
References: <CAN5afy8nBxmCaELhLBRaQD2-L3MisY0sef52-uho9cLJkycENQ@mail.gmail.com>
 <CA+8X3fXjqgx_VLhVe9EYagL-6Yu+RL6ZDW9if0rdxeTqWJLEtA@mail.gmail.com>
 <CAN5afy-iKX8sNwkaqCrerHVmm-dvvmxyuKTMC8+YnhxD8-x9OA@mail.gmail.com>
 <CA+8X3fWY9N0tBE0SQm_T74qSQLDEtqgv_q6vv4p73K1a8Tc=tg@mail.gmail.com>
 <CAN5afy8FRjrOjdV4rfZ9uY7x6hy2qr6LUGPXmiuuvvt8BPNWqg@mail.gmail.com>
Message-ID: <CA+8X3fXjbvz51=ePMm4_8jEru+JiTAXWt_-XMfGTBVjrKKLeGQ@mail.gmail.com>

If you want colors mapped to the _values_ in DF1$C, there are a number
of ways to do it:

Color_unq<-color.scale(DF1$C,c(1,0),c(0,0,c(0,1))

This will produce colors from the lowest values (red) through the
highest (blue). See the help page for color.scale to get different
colors. With this you can use color.legend to add a mapping of the
values and colors.

If you just want different colors, say 20, you can do things like:

Color_unq<-rainbow(20)
Color_unq<-colors(distinct=TRUE)[1:20]

Jim

On Thu, Jul 13, 2017 at 4:22 PM, lily li <chocold12 at gmail.com> wrote:
> Hi Jim,
>
> How to generate unique (all different) colors for the same dataframe? I use
> the code below, but found that there are same colors. Thanks again.
>
> Color= as.factor(DF1$C)
> Color.unq = unique(Color)
> points(DF1$A,DF1$B, col=Color.unq, pch=19)
>
>
> On Wed, Jul 12, 2017 at 10:02 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> values A and B have different ranges. Therefore you would want
>> horizontal error bars for the B mean. The dispersion function doesn't
>> do horizontal error bars, so you can use plotCI also in plotrix. Here
>> is an example with two databases:
>>
>> DF2<-read.table(text="A  B  C
>>      62 22 54
>>      69 24 55
>>      51 28 56
>>      47 25 53
>>      70 21 52
>>      61 23 50
>>      40 19 51
>>      58 18 57
>>      38 24 58
>>      37 27 53",header=TRUE)
>> plot(DF1$A,DF1$B,xlim=range(c(DF1$A,DF2$A)),
>>  ylim=range(c(DF1$B,DF2$B)),pch=19,col="red")
>> meanA<-mean(DF1$A)
>> meanB<-mean(DF1$B)
>> points(meanA,meanB,pch=18,col="red")
>> q1090<-quantile(DF1$B,probs=c(0.1,0.9))
>> plotCI(meanA,meanB,ui=q1090[2],li=q1090[1],err="x",
>>   add=TRUE,col="red")
>> points(DF2$A,DF2$B,pch=19,col="green")
>> meanA<-mean(DF2$A)
>> meanB<-mean(DF2$B)
>> points(meanA,meanB,pch=18,col="green")
>> q1090<-quantile(DF2$B,probs=c(0.1,0.9))
>> plotCI(meanA,meanB,ui=q1090[2],li=q1090[1],err="x",
>>  add=TRUE,col="red")
>> # click at the upper left corner of the legend
>> legend(locator(1),legend=c("DF1","DF2"),pch=19,
>>  col=c("red","green"))
>>
>> Jim
>>
>> On Thu, Jul 13, 2017 at 1:32 PM, lily li <chocold12 at gmail.com> wrote:
>> > Thanks, Jim. The code works, but I don't understand why you use q1090 <-
>> > quantile(DF1$B, probs=c()), rather than DF1$A? Also, how to add a legend
>> > for
>> > both points DF1 and DF2?
>> >
>> > On Wed, Jul 12, 2017 at 8:25 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
>> >>
>> >> Hi lily,
>> >> Here is the first plot:
>> >>
>> >> plot(DF1$A,DF1$B,pch=19,col="red")
>> >> meanA<-mean(DF1$A)
>> >> meanB<-mean(DF1$B)
>> >> points(meanA,meanB,pch=18,col="red")
>> >> q1090<-quantile(DF1$B,probs=c(0.1,0.9))
>> >> library(plotrix)
>> >> dispersion(meanA,meanB,q1090[2],q1090[1],
>> >>  intervals=FALSE,col="red")
>> >>
>> >> The same code will work for a second data frame, except that you would
>> >> use "points" instead of "plot" and change the color. You may also have
>> >> to specify xlim and ylim in the first call to "plot" so that all
>> >> values are on the plot.
>> >>
>> >> Jim
>> >>
>> >>
>> >>
>> >> On Thu, Jul 13, 2017 at 11:46 AM, lily li <chocold12 at gmail.com> wrote:
>> >> > Hi R users,
>> >> >
>> >> > I have a question about plotting. There is the dataframe below, while
>> >> > each
>> >> > row represents a record. If I want to plot on a A-B plot, i.e.,
>> >> > x-axis
>> >> > represents A, while y-axis represents B values. However, I want to
>> >> > plot
>> >> > the
>> >> > mean value from records 1-10 as one point, while the 10th and 90th
>> >> > percentiles represent the error bars, such as one point in the
>> >> > attached
>> >> > example. I don't know how to do this, and then add a legend.
>> >> > After the above step, if I have a dataframe DF2 with the same
>> >> > structure
>> >> > but
>> >> > different values than DF1, how to show the point on the same figure,
>> >> > but
>> >> > use different colors or symbols? Thanks for any advices.
>> >> >
>> >> > DF1
>> >> >
>> >> >         A  B  C
>> >> > 1     65 21 54
>> >> > 2     66 23 55
>> >> > 3     54 24 56
>> >> > 4     44 23 53
>> >> > 5     67 22 52
>> >> > 6     66 21 50
>> >> > 7     45 20 51
>> >> > 8     56 19 57
>> >> > 9     40 25 58
>> >> > 10   39 24 53
>> >> >
>> >> > ______________________________________________
>> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> > https://stat.ethz.ch/mailman/listinfo/r-help
>> >> > PLEASE do read the posting guide
>> >> > http://www.R-project.org/posting-guide.html
>> >> > and provide commented, minimal, self-contained, reproducible code.
>> >
>> >
>
>


From bhh at xs4all.nl  Thu Jul 13 10:52:34 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Thu, 13 Jul 2017 10:52:34 +0200
Subject: [R] Question on Simultaneous Equations & Forecasting
In-Reply-To: <FCD9A33C859ACC469587CB09DD5C6C712EA5DFFB@GBLONXMB13.corp.amvescap.net>
References: <BLUPR08MB34259C265FC491E574DEFC7FAAF0@BLUPR08MB342.namprd08.prod.outlook.com>
 <FCD9A33C859ACC469587CB09DD5C6C712EA5DFFB@GBLONXMB13.corp.amvescap.net>
Message-ID: <903FCEBB-2C06-4BA3-8AB8-2ACE576AB110@xs4all.nl>

Frances,

I would not advise Gauss-Seidel for non linear models. Can be quite tricky, slow and diverge.

You can write your model as a non linear system of equations and use one of the nonlinear solvers.
See the section "Root Finding" in the task view NumericalMathematics suggesting three packages (BB, nleqslv and ktsolve). These package are certainly able to handle medium sized models.
(https://cran.r-project.org/web/views/NumericalMathematics.html)

Write a function with the system of equations with each equation written as 

 y[..] <- lefthandside - (righthandside)

You can then include identities naturally.

You would have to make the model dynamic but that shouldn't be too difficult using vector indexing.

Berend Hasselman

> On 13 Jul 2017, at 10:06, Pfaff, Bernhard Dr. <Bernhard_Pfaff at fra.invesco.com> wrote:
> 
> Hi Frances,
> 
> I have not touched the system.fit package for quite some time, but to solve your problem the following two pointers might be helpful:
> 
> 1) Recast your model in the revised form, i.e., include your identity directly into your reaction functions, if possible.
> 2) For solving your model, you can employ the Gau?-Seidel method (see https://en.wikipedia.org/wiki/Gauss%E2%80%93Seidel_method).
> This has not only the advantage of generating forecasts, in terms of your exogenous variables, but you can also compute 'dynamic ex post' forecasts. This is probably the most powerful testing for dynamic simultaneous equation systems, given that you provide only your predetermined variables as starting values and then apply the Gauss-Seidel method (recursively) in-sample. The progressions of your endogenous variables should then not depart too much from your observed in-sample endogenous variables, i.e., you are assessing the stability of your model. Because forecast-errors cumulate over time in a dynamic ex-post forecast, this is a rather good and stringent model-test.
> 
> Incidentally, when you use simultaneous equation models on a larger scale (say, between 200-300 equations, like medium-sized macroeconomic models), the only route to go for, is by estimating your reaction equations separately and then putting all your pieces - including identities and/or technical equations - together in a format suitable for applying the Gauss-Seidel method. Hence, forget about 2SLS or 3SLS and Haavelmo-bias.
> 
> Best wishes,
> Bernhard   
> 
> -----Urspr?ngliche Nachricht-----
> Von: R-help [mailto:r-help-bounces at r-project.org] Im Auftrag von OseiBonsu, Frances
> Gesendet: Mittwoch, 12. Juli 2017 22:36
> An: r-help at r-project.org
> Betreff: [EXT] [R] Question on Simultaneous Equations & Forecasting
> 
> Hello,
> 
> I have estimated a simultaneous equation model (similar to Klein's model) in R using the system.fit package.
> 
> I have an identity equation, along with three other equations. Do you know how to explicitly identify the identity equation in R?
> 
> I am also trying to forecast the dependent variables in the simultaneous equation model, while incorporating the identity equation in the forecasts. Is there a way to do this in R?
> 
> The only way that I have been able to forecast the dependent variables has been by getting the predictions of each variable, converting them to time series uni-variables, and forecasting each variable individually.
> 
> Any help would be appreciated.
> 
> Best Regards,
> 
> Frances Osei-Bonsu
> Summer Analyst, Research and Strategy
> LaSalle Investment Management
> 333 West Wacker Drive, Suite 2300, Chicago IL 60606 Email frances.oseibonsu at lasalle.com<mailto:frances.oseibonsu at lasalle.com>
> Tel +1 312 897 4024
> lasalle.com<http://www.lasalle.com/>
> 
> 
> 
> This email is for the use of the intended recipient(s) only. If you have received this email in error, please notify the sender immediately and then delete it. If you are not the intended recipient, you must not keep, use, disclose, copy or distribute this email without the author's prior permission. We have taken precautions to minimize the risk of transmitting software viruses, but we advise you to carry out your own virus checks on any attachment to this message. We cannot accept liability for any loss or damage caused by software viruses. The information contained in this communication may be confidential and may be subject to the attorney-client privilege. If you are the intended recipient and you do not wish to receive similar electronic messages from us in the future then please respond to the sender to this effect.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> *****************************************************************
> Confidentiality Note: The information contained in this ...{{dropped:10}}
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From marco.scutari at gmail.com  Thu Jul 13 11:35:11 2017
From: marco.scutari at gmail.com (Marco Scutari)
Date: Thu, 13 Jul 2017 10:35:11 +0100
Subject: [R] bnlearn and cpquery
In-Reply-To: <007401d2fb98$f830e380$e892aa80$@gmail.com>
References: <007401d2fb98$f830e380$e892aa80$@gmail.com>
Message-ID: <CA+RJqXVUjoNMC1rfC-LRv43ar0=VK4b=V6KkP_wXNxDnnw3diw@mail.gmail.com>

Dear Ross,

This usually happen because you have parameters with a value of NaN in your
network, because the data you estimate the network from are sparse and you
are using maximum likelihood estimates. You should either 1) use simpler
networks for which you can estimate all conditional distributions from the
data or 2) use posterior estimates for the parameters.

Cheers,
    Marco


On 13 July 2017 at 06:29, Ross Chapman <rosspjchapman at gmail.com> wrote:

> Hi all
>
>
>
> I have built a Bayesian network using discrete data using the bnlearn
> package.
>
>
>
> When I try to run the cpquery function on this data it returns NaN for some
> some cases.
>
>
>
> Running the cpquery in debug mode for such a case (n=10^5, method="lw")
> creates the following output:
>
>
>
> generated a grand total of 1e+05 samples.
>
>   > event has a probability mass of 14982.37 out of NaN (p = NaN).
>
> [1] NaN
>
>
>
>
>
> The cpquery command takes the following structure:
>
>
>
> cpquery(fullFitted,event=(C1_class=="Med"),
>
>         evidence=list(GK_class = "ModHi",
>
>                       GTh_class = "Lo",
>
>                       GU_class = "Lo",
>
>                       El_class = "Hi",
>
>                       E50_class = "Med",
>
>                       E150_class = "Med"
>
>         ) ,
>
>         n=10^5,   method =  "lw", debug=TRUE)
>
>
>
> Similarly, when I try to run the predict method on the same data, it
> returns
> the following warning:
>
>
>
> Warning message:
> In map.prediction(node = node, fitted = object, data = data, n =
> extra.args$n,  :
>   dropping 38073 observations because generated samples are NAs.
>
>
>
>
>
> Could you advise me why these queries are generating NaN values, and how
> they might be resolved.
>
>
>
> The session info is as follows:
>
>
>
> sessionInfo()
> R version 3.4.1 (2017-06-30)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows >= 8 x64 (build 9200)
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252
> LC_MONETARY=English_Australia.1252
> [4] LC_NUMERIC=C                       LC_TIME=English_Australia.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] bnlearn_4.2
>
> loaded via a namespace (and not attached):
> [1] compiler_3.4.1 tools_3.4.1
>
>
>
>
>
> Many thanks in advance
>
>
>
> Ross
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



-- 
Marco Scutari, Ph.D.
Lecturer in Statistics, Department of Statistics
University of Oxford, United Kingdom

	[[alternative HTML version deleted]]


From Bernhard_Pfaff at fra.invesco.com  Thu Jul 13 12:55:38 2017
From: Bernhard_Pfaff at fra.invesco.com (Pfaff, Bernhard Dr.)
Date: Thu, 13 Jul 2017 10:55:38 +0000
Subject: [R] Question on Simultaneous Equations & Forecasting
In-Reply-To: <903FCEBB-2C06-4BA3-8AB8-2ACE576AB110@xs4all.nl>
References: <BLUPR08MB34259C265FC491E574DEFC7FAAF0@BLUPR08MB342.namprd08.prod.outlook.com>
 <FCD9A33C859ACC469587CB09DD5C6C712EA5DFFB@GBLONXMB13.corp.amvescap.net>
 <903FCEBB-2C06-4BA3-8AB8-2ACE576AB110@xs4all.nl>
Message-ID: <FCD9A33C859ACC469587CB09DD5C6C712EA5E07C@GBLONXMB13.corp.amvescap.net>

Who was speaking about non-linear models in the first place???
The Klein-Model(s) and pretty much all simultaneous equation models encountered in macro-econometrics are linear and/or can contain linear approximations to non-linear relationships, e.g., production functions of the Cobb-Douglas type. 

Best,
Bernhard

-----Urspr?ngliche Nachricht-----
Von: Berend Hasselman [mailto:bhh at xs4all.nl] 
Gesendet: Donnerstag, 13. Juli 2017 10:53
An: OseiBonsu, Frances
Cc: Pfaff, Bernhard Dr.; r-help at r-project.org
Betreff: [EXT] Re: [R] Question on Simultaneous Equations & Forecasting

Frances,

I would not advise Gauss-Seidel for non linear models. Can be quite tricky, slow and diverge.

You can write your model as a non linear system of equations and use one of the nonlinear solvers.
See the section "Root Finding" in the task view NumericalMathematics suggesting three packages (BB, nleqslv and ktsolve). These package are certainly able to handle medium sized models.
(https://cran.r-project.org/web/views/NumericalMathematics.html)

Write a function with the system of equations with each equation written as 

 y[..] <- lefthandside - (righthandside)

You can then include identities naturally.

You would have to make the model dynamic but that shouldn't be too difficult using vector indexing.

Berend Hasselman

> On 13 Jul 2017, at 10:06, Pfaff, Bernhard Dr. <Bernhard_Pfaff at fra.invesco.com> wrote:
> 
> Hi Frances,
> 
> I have not touched the system.fit package for quite some time, but to solve your problem the following two pointers might be helpful:
> 
> 1) Recast your model in the revised form, i.e., include your identity directly into your reaction functions, if possible.
> 2) For solving your model, you can employ the Gau?-Seidel method (see https://en.wikipedia.org/wiki/Gauss%E2%80%93Seidel_method).
> This has not only the advantage of generating forecasts, in terms of your exogenous variables, but you can also compute 'dynamic ex post' forecasts. This is probably the most powerful testing for dynamic simultaneous equation systems, given that you provide only your predetermined variables as starting values and then apply the Gauss-Seidel method (recursively) in-sample. The progressions of your endogenous variables should then not depart too much from your observed in-sample endogenous variables, i.e., you are assessing the stability of your model. Because forecast-errors cumulate over time in a dynamic ex-post forecast, this is a rather good and stringent model-test.
> 
> Incidentally, when you use simultaneous equation models on a larger scale (say, between 200-300 equations, like medium-sized macroeconomic models), the only route to go for, is by estimating your reaction equations separately and then putting all your pieces - including identities and/or technical equations - together in a format suitable for applying the Gauss-Seidel method. Hence, forget about 2SLS or 3SLS and Haavelmo-bias.
> 
> Best wishes,
> Bernhard   
> 
> -----Urspr?ngliche Nachricht-----
> Von: R-help [mailto:r-help-bounces at r-project.org] Im Auftrag von 
> OseiBonsu, Frances
> Gesendet: Mittwoch, 12. Juli 2017 22:36
> An: r-help at r-project.org
> Betreff: [EXT] [R] Question on Simultaneous Equations & Forecasting
> 
> Hello,
> 
> I have estimated a simultaneous equation model (similar to Klein's model) in R using the system.fit package.
> 
> I have an identity equation, along with three other equations. Do you know how to explicitly identify the identity equation in R?
> 
> I am also trying to forecast the dependent variables in the simultaneous equation model, while incorporating the identity equation in the forecasts. Is there a way to do this in R?
> 
> The only way that I have been able to forecast the dependent variables has been by getting the predictions of each variable, converting them to time series uni-variables, and forecasting each variable individually.
> 
> Any help would be appreciated.
> 
> Best Regards,
> 
> Frances Osei-Bonsu
> Summer Analyst, Research and Strategy
> LaSalle Investment Management
> 333 West Wacker Drive, Suite 2300, Chicago IL 60606 Email 
> frances.oseibonsu at lasalle.com<mailto:frances.oseibonsu at lasalle.com>
> Tel +1 312 897 4024
> lasalle.com<http://www.lasalle.com/>
> 
> 
> 
> This email is for the use of the intended recipient(s) only. If you have received this email in error, please notify the sender immediately and then delete it. If you are not the intended recipient, you must not keep, use, disclose, copy or distribute this email without the author's prior permission. We have taken precautions to minimize the risk of transmitting software viruses, but we advise you to carry out your own virus checks on any attachment to this message. We cannot accept liability for any loss or damage caused by software viruses. The information contained in this communication may be confidential and may be subject to the attorney-client privilege. If you are the intended recipient and you do not wish to receive similar electronic messages from us in the future then please respond to the sender to this effect.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> *****************************************************************
> Confidentiality Note: The information contained in this 
> ...{{dropped:10}}
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From V.Padmanabhan at itc.in  Thu Jul 13 13:12:45 2017
From: V.Padmanabhan at itc.in (Vijayan Padmanabhan)
Date: Thu, 13 Jul 2017 16:42:45 +0530
Subject: [R] Help with R script
Message-ID: <OF555EBA0E.8DF25FA1-ON6525815C.003CB1D2-6525815C.003D97C4@itc.in>


Dear R-help Group


Scenario 1:
I have a text file running to 1000 of lines...that
is like as follows:

[922] "FieldName: Wk3PackSubMonth"

 [923] "FieldValue: Apr"

 [924] "FieldName: Wk3PackSubYear"

 [925] "FieldValue: 2017"

 [926] "FieldName: Wk3Code1"

 [927] "FieldValue: "

 [928] "FieldValue: K4"

 [929] "FieldName: Wk3Code2"

 [930] "FieldValue: "

 [931] "FieldValue: Q49"


I want this to be programmatically corrected to
read as follows: (All consecutive lines starting
with FieldValue is cleaned to retain only one
line)

[922] "FieldName: Wk3PackSubMonth"

 [923] "FieldValue: Apr"

 [924] "FieldName: Wk3PackSubYear"

 [925] "FieldValue: 2017"

 [926] "FieldName: Wk3Code1"

 [927] "FieldValue: K4"

 [928] "FieldName: Wk3Code2"

 [929] "FieldValue: Q49"

Scenario 2:
In the same file, in some instances, the lines
could be as follows: in this case, wherever a line
is beginning with FieldName and the subsequent
line is not displaying a FieldValue, I would want
to programmatically identify such lines and insert
FieldValue (as blank).

[941] "FieldName: Wk3Code6"

 [942] "FieldValue: "

 [943] "FieldName: Wk3Code7"

 [944] "FieldValue: "

 [945] "FieldName: Wk3PackWSColorStiffRemarkCode1"

 [946] "FieldName: Wk3PackWSColorWrappRemarkCode1"

 [947] "FieldName:
Wk3PackWSDelamiStiffRemarkCode1"


ie in the above, it should be replaced as

[941] "FieldName: Wk3Code6"

 [942] "FieldValue: "

 [943] "FieldName: Wk3Code7"

 [944] "FieldValue: "

 [945] "FieldName: Wk3PackWSColorStiffRemarkCode1"
 [946] "FieldValue: "

 [947] "FieldName: Wk3PackWSColorWrappRemarkCode1"
 [948] "FieldValue: "

 [949] "FieldName:
Wk3PackWSDelamiStiffRemarkCode1"
 [950] "FieldValue: "


Can anybod suggest how to acheive this in R?

Thanks for your time.
Regards
VP



Disclaimer:\ This Communication is for the exclusive use...{{dropped:8}}


From bhh at xs4all.nl  Thu Jul 13 13:14:29 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Thu, 13 Jul 2017 13:14:29 +0200
Subject: [R] Question on Simultaneous Equations & Forecasting
In-Reply-To: <FCD9A33C859ACC469587CB09DD5C6C712EA5E07C@GBLONXMB13.corp.amvescap.net>
References: <BLUPR08MB34259C265FC491E574DEFC7FAAF0@BLUPR08MB342.namprd08.prod.outlook.com>
 <FCD9A33C859ACC469587CB09DD5C6C712EA5DFFB@GBLONXMB13.corp.amvescap.net>
 <903FCEBB-2C06-4BA3-8AB8-2ACE576AB110@xs4all.nl>
 <FCD9A33C859ACC469587CB09DD5C6C712EA5E07C@GBLONXMB13.corp.amvescap.net>
Message-ID: <153760B6-E2E7-45F4-BE4A-062C2CCEC6BA@xs4all.nl>


> On 13 Jul 2017, at 12:55, Pfaff, Bernhard Dr. <Bernhard_Pfaff at fra.invesco.com> wrote:
> 
> Who was speaking about non-linear models in the first place???
> The Klein-Model(s) and pretty much all simultaneous equation models encountered in macro-econometrics are linear

That's really not true. Klein model is linear but Oseibonsu did not say that explicitly.
"Klein like" can just mean same size or same variables.

> and/or can contain linear approximations to non-linear relationships, e.g., production functions of the Cobb-Douglas type. 
> 

One can indeed sometimes approximate without too much harm. But not always.

Berend

> Best,
> Bernhard
> 
> -----Urspr?ngliche Nachricht-----
> Von: Berend Hasselman [mailto:bhh at xs4all.nl] 
> Gesendet: Donnerstag, 13. Juli 2017 10:53
> An: OseiBonsu, Frances
> Cc: Pfaff, Bernhard Dr.; r-help at r-project.org
> Betreff: [EXT] Re: [R] Question on Simultaneous Equations & Forecasting
> 
> Frances,
> 
> I would not advise Gauss-Seidel for non linear models. Can be quite tricky, slow and diverge.
> 
> You can write your model as a non linear system of equations and use one of the nonlinear solvers.
> See the section "Root Finding" in the task view NumericalMathematics suggesting three packages (BB, nleqslv and ktsolve). These package are certainly able to handle medium sized models.
> (https://cran.r-project.org/web/views/NumericalMathematics.html)
> 
> Write a function with the system of equations with each equation written as 
> 
> y[..] <- lefthandside - (righthandside)
> 
> You can then include identities naturally.
> 
> You would have to make the model dynamic but that shouldn't be too difficult using vector indexing.
> 
> Berend Hasselman
> 
>> On 13 Jul 2017, at 10:06, Pfaff, Bernhard Dr. <Bernhard_Pfaff at fra.invesco.com> wrote:
>> 
>> Hi Frances,
>> 
>> I have not touched the system.fit package for quite some time, but to solve your problem the following two pointers might be helpful:
>> 
>> 1) Recast your model in the revised form, i.e., include your identity directly into your reaction functions, if possible.
>> 2) For solving your model, you can employ the Gau?-Seidel method (see https://en.wikipedia.org/wiki/Gauss%E2%80%93Seidel_method).
>> This has not only the advantage of generating forecasts, in terms of your exogenous variables, but you can also compute 'dynamic ex post' forecasts. This is probably the most powerful testing for dynamic simultaneous equation systems, given that you provide only your predetermined variables as starting values and then apply the Gauss-Seidel method (recursively) in-sample. The progressions of your endogenous variables should then not depart too much from your observed in-sample endogenous variables, i.e., you are assessing the stability of your model. Because forecast-errors cumulate over time in a dynamic ex-post forecast, this is a rather good and stringent model-test.
>> 
>> Incidentally, when you use simultaneous equation models on a larger scale (say, between 200-300 equations, like medium-sized macroeconomic models), the only route to go for, is by estimating your reaction equations separately and then putting all your pieces - including identities and/or technical equations - together in a format suitable for applying the Gauss-Seidel method. Hence, forget about 2SLS or 3SLS and Haavelmo-bias.
>> 
>> Best wishes,
>> Bernhard   
>> 
>> -----Urspr?ngliche Nachricht-----
>> Von: R-help [mailto:r-help-bounces at r-project.org] Im Auftrag von 
>> OseiBonsu, Frances
>> Gesendet: Mittwoch, 12. Juli 2017 22:36
>> An: r-help at r-project.org
>> Betreff: [EXT] [R] Question on Simultaneous Equations & Forecasting
>> 
>> Hello,
>> 
>> I have estimated a simultaneous equation model (similar to Klein's model) in R using the system.fit package.
>> 
>> I have an identity equation, along with three other equations. Do you know how to explicitly identify the identity equation in R?
>> 
>> I am also trying to forecast the dependent variables in the simultaneous equation model, while incorporating the identity equation in the forecasts. Is there a way to do this in R?
>> 
>> The only way that I have been able to forecast the dependent variables has been by getting the predictions of each variable, converting them to time series uni-variables, and forecasting each variable individually.
>> 
>> Any help would be appreciated.
>> 
>> Best Regards,
>> 
>> Frances Osei-Bonsu
>> Summer Analyst, Research and Strategy
>> LaSalle Investment Management
>> 333 West Wacker Drive, Suite 2300, Chicago IL 60606 Email 
>> frances.oseibonsu at lasalle.com<mailto:frances.oseibonsu at lasalle.com>
>> Tel +1 312 897 4024
>> lasalle.com<http://www.lasalle.com/>
>> 
>> 
>> 
>> This email is for the use of the intended recipient(s) only. If you have received this email in error, please notify the sender immediately and then delete it. If you are not the intended recipient, you must not keep, use, disclose, copy or distribute this email without the author's prior permission. We have taken precautions to minimize the risk of transmitting software viruses, but we advise you to carry out your own virus checks on any attachment to this message. We cannot accept liability for any loss or damage caused by software viruses. The information contained in this communication may be confidential and may be subject to the attorney-client privilege. If you are the intended recipient and you do not wish to receive similar electronic messages from us in the future then please respond to the sender to this effect.
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> *****************************************************************
>> Confidentiality Note: The information contained in this 
>> ...{{dropped:10}}
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 


From S.Ellison at LGCGroup.com  Thu Jul 13 15:11:41 2017
From: S.Ellison at LGCGroup.com (S Ellison)
Date: Thu, 13 Jul 2017 14:11:41 +0100
Subject: [R] metRology package
In-Reply-To: <OFA8433D8B.F9773A9F-ON8525815B.006C917D-8525815B.006E1C96@srs.gov>
References: <OFA8433D8B.F9773A9F-ON8525815B.006C917D-8525815B.006E1C96@srs.gov>
Message-ID: <1A8C1289955EF649A09086A153E267240BD2D6C762@GBTEDVPEXCMB04.corp.lgc-group.com>

> I'm having trouble with a simple application with metRology. 

Well, what you probably need is to contact the maintainer  of the metRology package.
Fortunately that's me.

An immediate problem that I have is that I don't quite understand what you're doing (in the measurement), so I may need to get back to you off list to understand that more fully. However, an immediate issue is that uncert() in metrology assumes it's getting scalars, and when you said

> dent<-expression(7*(mass/(Length*Width)))
> uncert(obj=dent, x=d.set, u=d.set.u, method="GUM")

you have asked for the uncertainty of seven times the mass per unit area. That would 'obviously' be around seven times the uncertainty of a single mass per unit area. If you wanted the latter, you'd probably need to have _mean_ mass ,Length and Width with standard uncertainties (or, better, covariance matrix, given that the three values aren't independent) for the _means_.

I'll need to spend a bit of time understanding why your own code came out differently; once I've had time to look at that I'll get back to you off list.

Steve Ellison

> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of
> mark.hogue at srs.gov
> Sent: 12 July 2017 21:03
> To: r-help at r-project.org
> Subject: [R] metRology package
> 
> I'm having trouble with a simple application with metRology. I need to
> estimate the uncertainty of the density thickness of seven sheets of film.
> This is calculated from measurements of mass, length and width of
> rectangular samples of film.
> 
> It's not too hard to calculate the whole thing with a little Monte Carlo loop. I
> get about 0.07 with this:
> 
>         #sample area
>         L<-5*2.54 #cm
>         W<-8*2.54 #cm
>         #sample mass
>         m<-0.2543*1000 #mg
>         #uncertainties
>         L.u<-(1/16)*2.54 #cm (nearest 16th inch)
>         W.u<-(1/16)*2.54 #cm
>         m.u<-0.006*1000 #mg scale calibration data
> 
>         denth<-c(0,0,0)
>         singth<-c(0,0,0)
>         for(i in 1:1e5) {
>           #denth[i]<-7*dt+sum(rnorm(7,0,dt.u))
>           for(j in 1:7)
>  singth[j]<-(m+rnorm(1,0,m.u))/((L+rnorm(1,0,L.u))*(W+rnorm(1,0,W.u)))
>           denth[i]<-sum(singth)
>         }
>         sd(denth) #0.07279882
> 
> Now with the metRology package, I get a much higher number, which is
> actually the seven times the uncertainty of one layer:
> 
>         require(metRology)
>         d.set<-list(mass=m,Length=L,Width=W)
>         d.set.u<-list(m.u,L.u,W.u)
> 
>         dent<-expression(7*(mass/(Length*Width)))
>         uncert(obj=dent, x=d.set, u=d.set.u, method="GUM")
> 
> I've tried other ways of defining the expression and every method option.
> I suspect the expression is the problem area, but if so, I really need to know
> how to get it right for harder problems. Thanks in advance for any
> suggestions.
> 
> - Mark
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


*******************************************************************
This email and any attachments are confidential. Any use...{{dropped:8}}


From edward.visel at gmail.com  Mon Jul 10 19:06:23 2017
From: edward.visel at gmail.com (Edward Visel)
Date: Mon, 10 Jul 2017 13:06:23 -0400
Subject: [R] [R-pkgs] New package: passport
Message-ID: <CALFkR3huvsXkmwDGJWMhzY=C7tXm4zejJ_ZABw-QMeMZeCNoQg@mail.gmail.com>

Hi!

I'm happy to announce the debut of my first package on CRAN, `passport`, to
help your country name and code data travel smoothly between formats.

`passport` brings simple utilities for parsing irregular country names to
standardized codes using local regex, or for anything geocodable, the Data
Science Toolkit or Google geocoding APIs.

Once the data is standardized, it has fast converters for moving between
names and codes, offering a range of standardized namesets including from
Unicode's Common Locale Data Repository (http://cldr.unicode.org/), which
offers common-sense, usable standardizations in languages from Afrikaans to
Zulu, with short and alternate variants.

tl;dr: If you need your data to say "South Korea" instead of "Korea, Rep.",
try `passport`.

Links:
- Website: https://alistaire47.github.io/passport//index.html
- GitHub: https://github.com/alistaire47/passport
- CRAN: https://cran.r-project.org/package=passport

I hope it's useful!

Best,
Edward

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From eglenn at mit.edu  Tue Jul 11 20:59:36 2017
From: eglenn at mit.edu (Ezra Haber Glenn)
Date: Tue, 11 Jul 2017 14:59:36 -0400
Subject: [R] [R-pkgs] acs version 2.1.0 update: download and analyze data
 from the US Census in R
Message-ID: <86zica6bqf.wl-eglenn@mit.edu>


We are pleased to announce the release of version 2.1.0 of the "acs"
package, now available on CRAN
<http://cran.r-project.org/web/packages/acs/index.html>.

The package allows users to download, manipulate, analyze, and present
demographic data from the U.S. Census, with special tools and methods
to simplify the tasks of working with estimates and standard errors
contained in data from the American Community Survey (ACS).  

Important: version 2.1.0 of the package is a "minor update" in terms
of features, but it includes a number of low-level tweaks necessary to
accommodate upcoming changes in the Census API, including a shift to
https transfer.  Current users are strongly encouraged to update as
soon as possible to avoid problems at the end of the summer.

Other minor changes include (a) removing plyr from a "dependency" and
simply importing the required "rbind.fill" function, and (b) updating
cbind/rbind options to be consistent with S3 methods.

For more information on the package and the update, please visit:
<http://eglenn.scripts.mit.edu/citystate/2016/03/acs-version-2-0-now-on-cran>,
and the "Working with acs.R" user guide at
<http://dusp.mit.edu/sites/dusp.mit.edu/files/attachments/publications/working_with_acs_R_v_2.0.pdf>.

--
Ezra Haber Glenn, AICP
Department of Urban Studies and Planning
Massachusetts Institute of Technology
77 Massachusetts Ave., Room 7-346
Cambridge, MA 02139
eglenn at mit.edu 
http://dusp.mit.edu/faculty/ezra-glenn
617.253.2024 (w)
617.721.7131 (c)

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From luigi.biagini at gmail.com  Thu Jul 13 12:07:27 2017
From: luigi.biagini at gmail.com (Luigi Biagini)
Date: Thu, 13 Jul 2017 12:07:27 +0200
Subject: [R] How to formulate quadratic function with interaction terms
 for the PLS fitting model?
Message-ID: <CA+iG1-6MBiLpZ5EcT6iTg-9=K2wR=Wz=AroBi71MoHTBw1qYZw@mail.gmail.com>

I have two ideas about it.

1-
i) Entering variables in quadratic form is done with the command I
(variable ^ 2) -
plsr (octane ~ NIR + I (nir ^ 2), ncomp = 10, data = gasTrain, validation =
"LOO"
You could also use a new variable NIR_sq <- (NIR) ^ 2

ii) To insert a square variable, use syntax I (x ^ 2) - it is very
important to insert I before the parentheses.

iii) If you want to make the interaction between x and x ^ 2 use the
command ":" -> x: I(x ^ 2)

iv) For multiple interactions between x and x ^ 2 use the command "*" -> x
*I (x ^ 2)

i) plsr (octane ~ NIR + NIR_sq, ncomp = 10, data = gasTrain, validation =
"LOO") I (x ^ 2)
ii)p lsr (octane ~ NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation
= "LOO") I (x ^ 2)
iii)p lsr (octane ~ NIR : I(NIR^2), ncomp = 10, data = gasTrain, validation
= "LOO") I (x ^ 2)
iv)p lsr (octane ~ NIR * I(NIR^2), ncomp = 10, data = gasTrain, validation
= "LOO") I (x ^ 2)

2 - For your regression, did you plan to use MARS instead of PLS?




Dear all,
> I am using the pls package of R to perform partial least square on a set of
> multivariate data.  Instead of fitting a linear model, I want to fit my
> data with a quadratic function with interaction terms.  But I am not sure
> how.  I will use an example to illustrate my problem:
> Following the example in the PLS manual:
> ## Read data
>  data(gasoline)
> gasTrain <- gasoline[1:50,]
> ## Perform PLS
> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
> where octane ~ NIR is the model that this example is fitting with.
> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
> reflectance measurements from 900 to 1700 nm.
> Instead of fitting with octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ...
> I want to fit the data with:
> octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
> i.e. quadratic with interaction terms.
> But I don't know how to formulate this.
> May I have some help please?
> Thanks,
> Kelvin

	[[alternative HTML version deleted]]


From ulrik.stervbo at gmail.com  Thu Jul 13 15:47:20 2017
From: ulrik.stervbo at gmail.com (Ulrik Stervbo)
Date: Thu, 13 Jul 2017 13:47:20 +0000
Subject: [R] Help with R script
In-Reply-To: <OF555EBA0E.8DF25FA1-ON6525815C.003CB1D2-6525815C.003D97C4@itc.in>
References: <OF555EBA0E.8DF25FA1-ON6525815C.003CB1D2-6525815C.003D97C4@itc.in>
Message-ID: <CAKVAULPP7nf0BuWQN8evp_f+kD3G+8DZE1b=wiZ1PJNUzx131g@mail.gmail.com>

Hi Vijayan,

one way going about it *could* be this:

library(dplyr)
library(tidyr)
library(purrr)

ex_dat <- c("FName: fname1", "Fval: Fval1.name1", "Fval: ", "FName:
fname2", "Fval: Fval2.name2", "FName: fname3")

data.frame(x = ex_dat) %>%
  separate(x, c("F1", "F2"), sep = ": ") %>%
  filter(F2 != "") %>%
  group_by(F1) %>%
  mutate(indx = row_number()) %>%
  spread(F1, F2, fill = "") %>%
  gather(F1, F2, FName, Fval) %>%
  arrange(indx) %>%
  mutate(x = paste(F1, F2, sep = ": ")) %>%
  select(x) %>%
  flatten_chr()

It is not particularly nice or clever, but it gets the job done using R.

HTH
Ulrik

On Thu, 13 Jul 2017 at 13:13 Vijayan Padmanabhan <V.Padmanabhan at itc.in>
wrote:

>
> Dear R-help Group
>
>
> Scenario 1:
> I have a text file running to 1000 of lines...that
> is like as follows:
>
> [922] "FieldName: Wk3PackSubMonth"
>
>  [923] "FieldValue: Apr"
>
>  [924] "FieldName: Wk3PackSubYear"
>
>  [925] "FieldValue: 2017"
>
>  [926] "FieldName: Wk3Code1"
>
>  [927] "FieldValue: "
>
>  [928] "FieldValue: K4"
>
>  [929] "FieldName: Wk3Code2"
>
>  [930] "FieldValue: "
>
>  [931] "FieldValue: Q49"
>
>
> I want this to be programmatically corrected to
> read as follows: (All consecutive lines starting
> with FieldValue is cleaned to retain only one
> line)
>
> [922] "FieldName: Wk3PackSubMonth"
>
>  [923] "FieldValue: Apr"
>
>  [924] "FieldName: Wk3PackSubYear"
>
>  [925] "FieldValue: 2017"
>
>  [926] "FieldName: Wk3Code1"
>
>  [927] "FieldValue: K4"
>
>  [928] "FieldName: Wk3Code2"
>
>  [929] "FieldValue: Q49"
>
> Scenario 2:
> In the same file, in some instances, the lines
> could be as follows: in this case, wherever a line
> is beginning with FieldName and the subsequent
> line is not displaying a FieldValue, I would want
> to programmatically identify such lines and insert
> FieldValue (as blank).
>
> [941] "FieldName: Wk3Code6"
>
>  [942] "FieldValue: "
>
>  [943] "FieldName: Wk3Code7"
>
>  [944] "FieldValue: "
>
>  [945] "FieldName: Wk3PackWSColorStiffRemarkCode1"
>
>  [946] "FieldName: Wk3PackWSColorWrappRemarkCode1"
>
>  [947] "FieldName:
> Wk3PackWSDelamiStiffRemarkCode1"
>
>
> ie in the above, it should be replaced as
>
> [941] "FieldName: Wk3Code6"
>
>  [942] "FieldValue: "
>
>  [943] "FieldName: Wk3Code7"
>
>  [944] "FieldValue: "
>
>  [945] "FieldName: Wk3PackWSColorStiffRemarkCode1"
>  [946] "FieldValue: "
>
>  [947] "FieldName: Wk3PackWSColorWrappRemarkCode1"
>  [948] "FieldValue: "
>
>  [949] "FieldName:
> Wk3PackWSDelamiStiffRemarkCode1"
>  [950] "FieldValue: "
>
>
> Can anybod suggest how to acheive this in R?
>
> Thanks for your time.
> Regards
> VP
>
>
>
> Disclaimer:\ This Communication is for the exclusive use...{{dropped:8}}
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Thu Jul 13 16:18:41 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Thu, 13 Jul 2017 07:18:41 -0700
Subject: [R] Question on Simultaneous Equations & Forecasting
In-Reply-To: <153760B6-E2E7-45F4-BE4A-062C2CCEC6BA@xs4all.nl>
References: <BLUPR08MB34259C265FC491E574DEFC7FAAF0@BLUPR08MB342.namprd08.prod.outlook.com>
 <FCD9A33C859ACC469587CB09DD5C6C712EA5DFFB@GBLONXMB13.corp.amvescap.net>
 <903FCEBB-2C06-4BA3-8AB8-2ACE576AB110@xs4all.nl>
 <FCD9A33C859ACC469587CB09DD5C6C712EA5E07C@GBLONXMB13.corp.amvescap.net>
 <153760B6-E2E7-45F4-BE4A-062C2CCEC6BA@xs4all.nl>
Message-ID: <CAGxFJbS0pMAQmhaMnPSRhBHCjG_ykT7gj=RPSP+NWBPw7Aw+Uw@mail.gmail.com>

If you want to continue this discussion, I think you need to take it
offlist, as it seems to be primarily about methodology, not R
programming.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 13, 2017 at 4:14 AM, Berend Hasselman <bhh at xs4all.nl> wrote:
>
>> On 13 Jul 2017, at 12:55, Pfaff, Bernhard Dr. <Bernhard_Pfaff at fra.invesco.com> wrote:
>>
>> Who was speaking about non-linear models in the first place???
>> The Klein-Model(s) and pretty much all simultaneous equation models encountered in macro-econometrics are linear
>
> That's really not true. Klein model is linear but Oseibonsu did not say that explicitly.
> "Klein like" can just mean same size or same variables.
>
>> and/or can contain linear approximations to non-linear relationships, e.g., production functions of the Cobb-Douglas type.
>>
>
> One can indeed sometimes approximate without too much harm. But not always.
>
> Berend
>
>> Best,
>> Bernhard
>>
>> -----Urspr?ngliche Nachricht-----
>> Von: Berend Hasselman [mailto:bhh at xs4all.nl]
>> Gesendet: Donnerstag, 13. Juli 2017 10:53
>> An: OseiBonsu, Frances
>> Cc: Pfaff, Bernhard Dr.; r-help at r-project.org
>> Betreff: [EXT] Re: [R] Question on Simultaneous Equations & Forecasting
>>
>> Frances,
>>
>> I would not advise Gauss-Seidel for non linear models. Can be quite tricky, slow and diverge.
>>
>> You can write your model as a non linear system of equations and use one of the nonlinear solvers.
>> See the section "Root Finding" in the task view NumericalMathematics suggesting three packages (BB, nleqslv and ktsolve). These package are certainly able to handle medium sized models.
>> (https://cran.r-project.org/web/views/NumericalMathematics.html)
>>
>> Write a function with the system of equations with each equation written as
>>
>> y[..] <- lefthandside - (righthandside)
>>
>> You can then include identities naturally.
>>
>> You would have to make the model dynamic but that shouldn't be too difficult using vector indexing.
>>
>> Berend Hasselman
>>
>>> On 13 Jul 2017, at 10:06, Pfaff, Bernhard Dr. <Bernhard_Pfaff at fra.invesco.com> wrote:
>>>
>>> Hi Frances,
>>>
>>> I have not touched the system.fit package for quite some time, but to solve your problem the following two pointers might be helpful:
>>>
>>> 1) Recast your model in the revised form, i.e., include your identity directly into your reaction functions, if possible.
>>> 2) For solving your model, you can employ the Gau?-Seidel method (see https://en.wikipedia.org/wiki/Gauss%E2%80%93Seidel_method).
>>> This has not only the advantage of generating forecasts, in terms of your exogenous variables, but you can also compute 'dynamic ex post' forecasts. This is probably the most powerful testing for dynamic simultaneous equation systems, given that you provide only your predetermined variables as starting values and then apply the Gauss-Seidel method (recursively) in-sample. The progressions of your endogenous variables should then not depart too much from your observed in-sample endogenous variables, i.e., you are assessing the stability of your model. Because forecast-errors cumulate over time in a dynamic ex-post forecast, this is a rather good and stringent model-test.
>>>
>>> Incidentally, when you use simultaneous equation models on a larger scale (say, between 200-300 equations, like medium-sized macroeconomic models), the only route to go for, is by estimating your reaction equations separately and then putting all your pieces - including identities and/or technical equations - together in a format suitable for applying the Gauss-Seidel method. Hence, forget about 2SLS or 3SLS and Haavelmo-bias.
>>>
>>> Best wishes,
>>> Bernhard
>>>
>>> -----Urspr?ngliche Nachricht-----
>>> Von: R-help [mailto:r-help-bounces at r-project.org] Im Auftrag von
>>> OseiBonsu, Frances
>>> Gesendet: Mittwoch, 12. Juli 2017 22:36
>>> An: r-help at r-project.org
>>> Betreff: [EXT] [R] Question on Simultaneous Equations & Forecasting
>>>
>>> Hello,
>>>
>>> I have estimated a simultaneous equation model (similar to Klein's model) in R using the system.fit package.
>>>
>>> I have an identity equation, along with three other equations. Do you know how to explicitly identify the identity equation in R?
>>>
>>> I am also trying to forecast the dependent variables in the simultaneous equation model, while incorporating the identity equation in the forecasts. Is there a way to do this in R?
>>>
>>> The only way that I have been able to forecast the dependent variables has been by getting the predictions of each variable, converting them to time series uni-variables, and forecasting each variable individually.
>>>
>>> Any help would be appreciated.
>>>
>>> Best Regards,
>>>
>>> Frances Osei-Bonsu
>>> Summer Analyst, Research and Strategy
>>> LaSalle Investment Management
>>> 333 West Wacker Drive, Suite 2300, Chicago IL 60606 Email
>>> frances.oseibonsu at lasalle.com<mailto:frances.oseibonsu at lasalle.com>
>>> Tel +1 312 897 4024
>>> lasalle.com<http://www.lasalle.com/>
>>>
>>>
>>>
>>> This email is for the use of the intended recipient(s) only. If you have received this email in error, please notify the sender immediately and then delete it. If you are not the intended recipient, you must not keep, use, disclose, copy or distribute this email without the author's prior permission. We have taken precautions to minimize the risk of transmitting software viruses, but we advise you to carry out your own virus checks on any attachment to this message. We cannot accept liability for any loss or damage caused by software viruses. The information contained in this communication may be confidential and may be subject to the attorney-client privilege. If you are the intended recipient and you do not wish to receive similar electronic messages from us in the future then please respond to the sender to this effect.
>>>
>>>      [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> *****************************************************************
>>> Confidentiality Note: The information contained in this
>>> ...{{dropped:10}}
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Thu Jul 13 16:43:56 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Thu, 13 Jul 2017 07:43:56 -0700
Subject: [R] How to formulate quadratic function with interaction terms
 for the PLS fitting model?
In-Reply-To: <CA+iG1-6MBiLpZ5EcT6iTg-9=K2wR=Wz=AroBi71MoHTBw1qYZw@mail.gmail.com>
References: <CA+iG1-6MBiLpZ5EcT6iTg-9=K2wR=Wz=AroBi71MoHTBw1qYZw@mail.gmail.com>
Message-ID: <CAGxFJbRp9LcLs0h0MWuz8nHYE5fJuHJbH=jZNV9qdwPewpw96w@mail.gmail.com>

Below.

-- Bert
Bert Gunter



On Thu, Jul 13, 2017 at 3:07 AM, Luigi Biagini <luigi.biagini at gmail.com> wrote:
> I have two ideas about it.
>
> 1-
> i) Entering variables in quadratic form is done with the command I
> (variable ^ 2) -
> plsr (octane ~ NIR + I (nir ^ 2), ncomp = 10, data = gasTrain, validation =
> "LOO"
> You could also use a new variable NIR_sq <- (NIR) ^ 2
>
> ii) To insert a square variable, use syntax I (x ^ 2) - it is very
> important to insert I before the parentheses.

True, but better I believe: see ?poly.
e.g. poly(cbind(x1,x2,x3), degree = 2, raw = TRUE) is a full quadratic
polynomial in x1,x2,x3 .


>
> iii) If you want to make the interaction between x and x ^ 2 use the
> command ":" -> x: I(x ^ 2)
>
> iv) For multiple interactions between x and x ^ 2 use the command "*" -> x
> *I (x ^ 2)
>
> i) plsr (octane ~ NIR + NIR_sq, ncomp = 10, data = gasTrain, validation =
> "LOO") I (x ^ 2)
> ii)p lsr (octane ~ NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation
> = "LOO") I (x ^ 2)
> iii)p lsr (octane ~ NIR : I(NIR^2), ncomp = 10, data = gasTrain, validation
> = "LOO") I (x ^ 2)
> iv)p lsr (octane ~ NIR * I(NIR^2), ncomp = 10, data = gasTrain, validation
> = "LOO") I (x ^ 2)
>
> 2 - For your regression, did you plan to use MARS instead of PLS?
>
>
>
>
> Dear all,
>> I am using the pls package of R to perform partial least square on a set of
>> multivariate data.  Instead of fitting a linear model, I want to fit my
>> data with a quadratic function with interaction terms.  But I am not sure
>> how.  I will use an example to illustrate my problem:
>> Following the example in the PLS manual:
>> ## Read data
>>  data(gasoline)
>> gasTrain <- gasoline[1:50,]
>> ## Perform PLS
>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>> where octane ~ NIR is the model that this example is fitting with.
>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>> reflectance measurements from 900 to 1700 nm.
>> Instead of fitting with octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ...
>> I want to fit the data with:
>> octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>> i.e. quadratic with interaction terms.
>> But I don't know how to formulate this.
>> May I have some help please?
>> Thanks,
>> Kelvin
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From macqueen1 at llnl.gov  Thu Jul 13 16:48:33 2017
From: macqueen1 at llnl.gov (MacQueen, Don)
Date: Thu, 13 Jul 2017 14:48:33 +0000
Subject: [R] Help with R script
In-Reply-To: <CAKVAULPP7nf0BuWQN8evp_f+kD3G+8DZE1b=wiZ1PJNUzx131g@mail.gmail.com>
References: <OF555EBA0E.8DF25FA1-ON6525815C.003CB1D2-6525815C.003D97C4@itc.in>
 <CAKVAULPP7nf0BuWQN8evp_f+kD3G+8DZE1b=wiZ1PJNUzx131g@mail.gmail.com>
Message-ID: <63453C4D-7D4F-4A5E-B25A-D4466CA34E40@llnl.gov>

Using Ulrik?s example data (and assuming I understand what is wanted), here is what I would do:

ex.dat <- c("FName: fname1", "Fval: Fval1.name1", "Fval: ", "FName: fname2", "Fval: Fval2.name2", "FName: fname3")
tst <- data.frame(x = ex.dat, stringsAsFactors=FALSE)

sp <- strsplit(tst$x, ':', fixed=TRUE)
chk <- unlist(lapply(sp, function(txt) txt[2] != ' '))
newtst <- tst[chk,,drop=FALSE]

This both assumes and requires that ALL of the rows are structured as in the example data in the original question.
For example:
  if any row is missing the ?:?, it will fail.
  If the ?:? is not followed by a space character it may fail (I have not checked)

-Don

-- 
Don MacQueen

Lawrence Livermore National Laboratory
7000 East Ave., L-627
Livermore, CA 94550
925-423-1062


On 7/13/17, 6:47 AM, "R-help on behalf of Ulrik Stervbo" <r-help-bounces at r-project.org on behalf of ulrik.stervbo at gmail.com> wrote:

    Hi Vijayan,
    
    one way going about it *could* be this:
    
    library(dplyr)
    library(tidyr)
    library(purrr)
    
    ex_dat <- c("FName: fname1", "Fval: Fval1.name1", "Fval: ", "FName:
    fname2", "Fval: Fval2.name2", "FName: fname3")
    
    data.frame(x = ex_dat) %>%
      separate(x, c("F1", "F2"), sep = ": ") %>%
      filter(F2 != "") %>%
      group_by(F1) %>%
      mutate(indx = row_number()) %>%
      spread(F1, F2, fill = "") %>%
      gather(F1, F2, FName, Fval) %>%
      arrange(indx) %>%
      mutate(x = paste(F1, F2, sep = ": ")) %>%
      select(x) %>%
      flatten_chr()
    
    It is not particularly nice or clever, but it gets the job done using R.
    
    HTH
    Ulrik
    
    On Thu, 13 Jul 2017 at 13:13 Vijayan Padmanabhan <V.Padmanabhan at itc.in>
    wrote:
    
    >
    > Dear R-help Group
    >
    >
    > Scenario 1:
    > I have a text file running to 1000 of lines...that
    > is like as follows:
    >
    > [922] "FieldName: Wk3PackSubMonth"
    >
    >  [923] "FieldValue: Apr"
    >
    >  [924] "FieldName: Wk3PackSubYear"
    >
    >  [925] "FieldValue: 2017"
    >
    >  [926] "FieldName: Wk3Code1"
    >
    >  [927] "FieldValue: "
    >
    >  [928] "FieldValue: K4"
    >
    >  [929] "FieldName: Wk3Code2"
    >
    >  [930] "FieldValue: "
    >
    >  [931] "FieldValue: Q49"
    >
    >
    > I want this to be programmatically corrected to
    > read as follows: (All consecutive lines starting
    > with FieldValue is cleaned to retain only one
    > line)
    >
    > [922] "FieldName: Wk3PackSubMonth"
    >
    >  [923] "FieldValue: Apr"
    >
    >  [924] "FieldName: Wk3PackSubYear"
    >
    >  [925] "FieldValue: 2017"
    >
    >  [926] "FieldName: Wk3Code1"
    >
    >  [927] "FieldValue: K4"
    >
    >  [928] "FieldName: Wk3Code2"
    >
    >  [929] "FieldValue: Q49"
    >
    > Scenario 2:
    > In the same file, in some instances, the lines
    > could be as follows: in this case, wherever a line
    > is beginning with FieldName and the subsequent
    > line is not displaying a FieldValue, I would want
    > to programmatically identify such lines and insert
    > FieldValue (as blank).
    >
    > [941] "FieldName: Wk3Code6"
    >
    >  [942] "FieldValue: "
    >
    >  [943] "FieldName: Wk3Code7"
    >
    >  [944] "FieldValue: "
    >
    >  [945] "FieldName: Wk3PackWSColorStiffRemarkCode1"
    >
    >  [946] "FieldName: Wk3PackWSColorWrappRemarkCode1"
    >
    >  [947] "FieldName:
    > Wk3PackWSDelamiStiffRemarkCode1"
    >
    >
    > ie in the above, it should be replaced as
    >
    > [941] "FieldName: Wk3Code6"
    >
    >  [942] "FieldValue: "
    >
    >  [943] "FieldName: Wk3Code7"
    >
    >  [944] "FieldValue: "
    >
    >  [945] "FieldName: Wk3PackWSColorStiffRemarkCode1"
    >  [946] "FieldValue: "
    >
    >  [947] "FieldName: Wk3PackWSColorWrappRemarkCode1"
    >  [948] "FieldValue: "
    >
    >  [949] "FieldName:
    > Wk3PackWSDelamiStiffRemarkCode1"
    >  [950] "FieldValue: "
    >
    >
    > Can anybod suggest how to acheive this in R?
    >
    > Thanks for your time.
    > Regards
    > VP
    >
    >
    >
    > Disclaimer:\ This Communication is for the exclusive use...{{dropped:8}}
    >
    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.
    >
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    https://stat.ethz.ch/mailman/listinfo/r-help
    PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    and provide commented, minimal, self-contained, reproducible code.
    


From kmoreho1 at swarthmore.edu  Thu Jul 13 16:52:09 2017
From: kmoreho1 at swarthmore.edu (Kirsten Morehouse)
Date: Thu, 13 Jul 2017 10:52:09 -0400
Subject: [R] How to make a figure plotting p-values by range of
 different adjustment values?
In-Reply-To: <CA+8X3fWSe3_Z86PqesVwH0-076TnafX3K8gwrHPzKrdWsUptTw@mail.gmail.com>
References: <CAN1UO=vLbYM-u0nN7R8rg-rpQqj1e2SfrQRkVadCGROr6tT6Ww@mail.gmail.com>
 <CA+8X3fWSe3_Z86PqesVwH0-076TnafX3K8gwrHPzKrdWsUptTw@mail.gmail.com>
Message-ID: <CAN1UO=uURAutHKkJCACqjx2K76AO9DK3cAhN7bO_tvgnaLUM1w@mail.gmail.com>

Hi Jim,

Thanks for your help, I really appreciate it.

Perhaps I'm misunderstanding, but does this formula run different ajustment
values for this function?

  logit(p = doc$value, adjust = 0.025)

I'm looking to plot the p-values of different adjustment values.

Thanks so much,

Kirsten

On Wed, Jul 12, 2017 at 8:49 PM, Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Kirsten,
> Perhaps this will help:
>
> set.seed(3)
> kmdf<-data.frame(group=rep(1:4,each=20),
>  prop=c(runif(20,0.25,1),runif(20,0.2,0.92),
>  runif(20,0.15,0.84),runif(20,0.1,0.77)))
> km.glm<-glm(prop~group,kmdf,family=quasibinomial(link="logit"))
> summary(km.glm)
> pval<-0.00845
> padjs<-NA
> npadj<-1
> # assume you have five comparisons in this family
> for(method in p.adjust.methods) {
>  padjs[npadj]<-p.adjust(pval,method=method,n=5)
>  npadj<-npadj+1
> }
> plot(padjs,xaxt="n",main="P plot",xlab="Method",ylab="adjusted p values")
> abline(h=0.05,col="lightgray")
> library(plotrix)
> staxlab(1,at=1:8,labels=p.adjust.methods)
>
> Jim
>
>
> On Thu, Jul 13, 2017 at 12:53 AM, Kirsten Morehouse
> <kmoreho1 at swarthmore.edu> wrote:
> > Hi all,
> >
> > Thank you for taking the time to read my message. I'm trying to make a
> > figure that plots p-values by a range of different adjustment values.
> >
> > (Using the **logit** function in package **car**)
> >
> > My Statistical analyses were conducted on probability estimates ranging
> > from 0% to 100%. As it's not ideal to run linear models on percentages
> that
> > are bounded between 0 and 1, these estimates were logit transformed.
> >
> > However, this introduces a researcher degree of freedom. In Package
> > **Car**, the logit transformation code is
> >
> >         logit(p = doc$value, adjust = 0.025)
> >
> >     logit definition/Description
> >
> >     Compute the logit transformation of proportions or percentages.
> >
> >     Usage
> >
> >          logit(p, percents=range.p[2] > 1, adjust)
> >
> >     Arguments
> >
> >     p  a numeric vector or array of proportions or percentages.
> >     percents TRUE for percentages.
> >     adjust   adjustment factor to avoid proportions of 0 or 1; defaults
> to
> > 0 if there are no such proportions in the data, and to .025 if there
> are.)
> >
> > I chose the default adjustment factor of .025, but I need to determine at
> > what point my values are greater than .05 to show I did not choose an
> > ajustment value that makes my results significant.
> >
> > Ultimately, I want to find the range of adjustment factors do we get P <
> > 0.05?And at what point do we get P > 0.05?
> >
> >     ## The final product I'm looking for is a figure with the following
> > features:
> >       ## 1) Adjustment factor on the x-axis
> >       ## 2) P value on the y-axis
> >
> >     Does anyone know how to do this? Thank you so much in advance.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Thu Jul 13 19:15:55 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 13 Jul 2017 10:15:55 -0700
Subject: [R] Quadratic function with interaction terms for the PLS
	fitting model?
In-Reply-To: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
References: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
Message-ID: <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>


> On Jul 12, 2017, at 6:58 PM, Ng, Kelvin Sai-cheong <kscng at connect.hku.hk> wrote:
> 
> Dear all,
> 
> I am using the pls package of R to perform partial least square on a set of
> multivariate data.  Instead of fitting a linear model, I want to fit my
> data with a quadratic function with interaction terms.  But I am not sure
> how.  I will use an example to illustrate my problem:
> 
> Following the example in the PLS manual:
> ## Read data
> data(gasoline)
> gasTrain <- gasoline[1:50,]
> ## Perform PLS
> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
> 
> where octane ~ NIR is the model that this example is fitting with.
> 
> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
> reflectance measurements from 900 to 1700 nm.
> 
> Instead of fitting with predict.octane[i] = a[0] * NIR[0,i] + a[1] *
> NIR[1,i] + ...
> I want to fit the data with:
> predict.octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
> 
> i.e. quadratic with interaction terms.
> 
> But I don't know how to formulate this.

I did not see any terms in the model that I would have called interaction terms. I'm seeing a desire for a polynomial function in NIR. For that purpose, one might see if you get satisfactory results with:

gas1 <- plsr(octane ~NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation = "LOO")
gas1

I first tried using poly(NIR, 2) on the RHS and it threw an error, which raises concerns in my mind that this may not be a proper model. I have no experience with the use of plsr or its underlying theory, so the fact that this is not throwing an error is no guarantee of validity. Using this construction in ordinary least squares regression has dangers with inferential statistics because of the correlation of the linear and squared terms as well as likely violation of homoscedasticity.

-- 
David.


> 
> May I have some help please?
> 
> Thanks,
> 
> Kelvin
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From bgunter.4567 at gmail.com  Thu Jul 13 19:43:53 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Thu, 13 Jul 2017 10:43:53 -0700
Subject: [R] Quadratic function with interaction terms for the PLS
	fitting model?
In-Reply-To: <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>
References: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
 <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>
Message-ID: <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>

poly(NIR, degree = 2) will work if NIR is a matrix, not a data.frame.
The degree argument apparently  *must* be explicitly named if NIR is
not a numeric vector. AFAICS, this is unclear or unstated in ?poly.


-- Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 13, 2017 at 10:15 AM, David Winsemius
<dwinsemius at comcast.net> wrote:
>
>> On Jul 12, 2017, at 6:58 PM, Ng, Kelvin Sai-cheong <kscng at connect.hku.hk> wrote:
>>
>> Dear all,
>>
>> I am using the pls package of R to perform partial least square on a set of
>> multivariate data.  Instead of fitting a linear model, I want to fit my
>> data with a quadratic function with interaction terms.  But I am not sure
>> how.  I will use an example to illustrate my problem:
>>
>> Following the example in the PLS manual:
>> ## Read data
>> data(gasoline)
>> gasTrain <- gasoline[1:50,]
>> ## Perform PLS
>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>
>> where octane ~ NIR is the model that this example is fitting with.
>>
>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>> reflectance measurements from 900 to 1700 nm.
>>
>> Instead of fitting with predict.octane[i] = a[0] * NIR[0,i] + a[1] *
>> NIR[1,i] + ...
>> I want to fit the data with:
>> predict.octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>
>> i.e. quadratic with interaction terms.
>>
>> But I don't know how to formulate this.
>
> I did not see any terms in the model that I would have called interaction terms. I'm seeing a desire for a polynomial function in NIR. For that purpose, one might see if you get satisfactory results with:
>
> gas1 <- plsr(octane ~NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation = "LOO")
> gas1
>
> I first tried using poly(NIR, 2) on the RHS and it threw an error, which raises concerns in my mind that this may not be a proper model. I have no experience with the use of plsr or its underlying theory, so the fact that this is not throwing an error is no guarantee of validity. Using this construction in ordinary least squares regression has dangers with inferential statistics because of the correlation of the linear and squared terms as well as likely violation of homoscedasticity.
>
> --
> David.
>
>
>>
>> May I have some help please?
>>
>> Thanks,
>>
>> Kelvin
>>
>>       [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> David Winsemius
> Alameda, CA, USA
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From marc_schwartz at me.com  Thu Jul 13 20:17:09 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 13 Jul 2017 13:17:09 -0500
Subject: [R] Quadratic function with interaction terms for the
 PLS	fitting model?
In-Reply-To: <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>
References: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
 <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>
 <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>
Message-ID: <8484FB25-2150-442B-917B-6CE95E6A4A97@me.com>

Bert,

The 'degree' argument follows the "..." argument in the function declaration:

  poly(x, ..., degree = 1, coefs = NULL, raw = FALSE, simple = FALSE)

Generally, any arguments after the "..." must be explicitly named, but as per the Details section of ?poly:

"Although formally degree should be named (as it follows ...), an unnamed second argument of length 1 will be interpreted as the degree, such that poly(x, 3) can be used in formulas."

The issue of having to explicitly name arguments that follow the three dots has come up over the years, but I cannot recall where that is documented in the manuals.

Regards,

Marc



> On Jul 13, 2017, at 12:43 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> poly(NIR, degree = 2) will work if NIR is a matrix, not a data.frame.
> The degree argument apparently  *must* be explicitly named if NIR is
> not a numeric vector. AFAICS, this is unclear or unstated in ?poly.
> 
> 
> -- Bert
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Thu, Jul 13, 2017 at 10:15 AM, David Winsemius
> <dwinsemius at comcast.net> wrote:
>> 
>>> On Jul 12, 2017, at 6:58 PM, Ng, Kelvin Sai-cheong <kscng at connect.hku.hk> wrote:
>>> 
>>> Dear all,
>>> 
>>> I am using the pls package of R to perform partial least square on a set of
>>> multivariate data.  Instead of fitting a linear model, I want to fit my
>>> data with a quadratic function with interaction terms.  But I am not sure
>>> how.  I will use an example to illustrate my problem:
>>> 
>>> Following the example in the PLS manual:
>>> ## Read data
>>> data(gasoline)
>>> gasTrain <- gasoline[1:50,]
>>> ## Perform PLS
>>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>> 
>>> where octane ~ NIR is the model that this example is fitting with.
>>> 
>>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>>> reflectance measurements from 900 to 1700 nm.
>>> 
>>> Instead of fitting with predict.octane[i] = a[0] * NIR[0,i] + a[1] *
>>> NIR[1,i] + ...
>>> I want to fit the data with:
>>> predict.octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>> 
>>> i.e. quadratic with interaction terms.
>>> 
>>> But I don't know how to formulate this.
>> 
>> I did not see any terms in the model that I would have called interaction terms. I'm seeing a desire for a polynomial function in NIR. For that purpose, one might see if you get satisfactory results with:
>> 
>> gas1 <- plsr(octane ~NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation = "LOO")
>> gas1
>> 
>> I first tried using poly(NIR, 2) on the RHS and it threw an error, which raises concerns in my mind that this may not be a proper model. I have no experience with the use of plsr or its underlying theory, so the fact that this is not throwing an error is no guarantee of validity. Using this construction in ordinary least squares regression has dangers with inferential statistics because of the correlation of the linear and squared terms as well as likely violation of homoscedasticity.
>> 
>> --
>> David.
>> 
>> 
>>> 
>>> May I have some help please?
>>> 
>>> Thanks,
>>> 
>>> Kelvin
>>> 
>>>      [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> David Winsemius
>> Alameda, CA, USA
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Thu Jul 13 20:34:36 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Thu, 13 Jul 2017 11:34:36 -0700
Subject: [R] Quadratic function with interaction terms for the PLS
	fitting model?
In-Reply-To: <8484FB25-2150-442B-917B-6CE95E6A4A97@me.com>
References: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
 <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>
 <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>
 <8484FB25-2150-442B-917B-6CE95E6A4A97@me.com>
Message-ID: <CAGxFJbRQerDTfWKr=V1u=XrRNGb55RJoGxgGRC5GYeGHeb_pfQ@mail.gmail.com>

Marc:

1. I am aware of the need to explicitly name arguments after ... --
see the R Language definition where this can be inferred from the
argument matching rules.

2. I am aware of the stated exception for poly(). However:

> x1 <- runif(20)
> x2 <- runif(20)
> mx <- cbind(x1,x2)
> poly(mx,2)
Error in poly(dots[[i]], degree, raw = raw, simple = raw) :
  'degree' must be less than number of unique points

> poly(mx, degree = 2)
             1.0           2.0         0.1          1.1         0.2
 [1,] -0.2984843  0.0402593349 -0.07095761  0.021179734 -0.22909595
 [2,]  0.2512177  0.2172530896  0.29620999  0.074413206  0.14508422
 [3,]  0.2775652  0.3085750335 -0.13955410 -0.038735366 -0.13729529
 [4,] -0.4090782  0.4032189266 -0.14737858  0.060289370 -0.12358925
 [5,] -0.1631886 -0.2221937915 -0.26690975  0.043556631  0.16814432
 [6,]  0.1770952  0.0009863446  0.25380650  0.044947925  0.02737265
 [7,] -0.2108146 -0.1525957018  0.34023304 -0.071726094  0.28787441
 [8,]  0.2693983  0.2794576400  0.04697126  0.012653979 -0.26792015
 [9,]  0.2014353  0.0653896008 -0.37013148 -0.074557536  0.54445808
[10,] -0.1002967 -0.2761638672 -0.29389518  0.029476714  0.25539539
[11,]  0.1132090 -0.1372916959  0.21619808  0.024475573 -0.06074932
[12,] -0.1116108 -0.2696398425 -0.14592886  0.016287234 -0.12617869
[13,]  0.1792535  0.0064357827 -0.04948750 -0.008870809 -0.24736773
[14,] -0.1167216 -0.2662346206 -0.20209364  0.023588696 -0.00923419
[15,] -0.4258838  0.4700591049  0.08836730 -0.037634205 -0.24586894
[16,]  0.1047271 -0.1523001267 -0.21491954 -0.022507896  0.02225837
[17,] -0.1985753 -0.1728455549  0.32036901 -0.063617358  0.22084868
[18,]  0.1844006  0.0196368680  0.32321195  0.059600465  0.23017961
[19,]  0.1009775 -0.1586846110 -0.08282554 -0.008363512 -0.21685556
[20,]  0.1753745 -0.0033219134  0.09871464  0.017312033 -0.23746062
attr(,"degree")
[1] 1 2 1 2 2
attr(,"coefs")
attr(,"coefs")[[1]]
attr(,"coefs")[[1]]$alpha
[1] 0.5477073 0.4154115

attr(,"coefs")[[1]]$norm2
[1]  1.00000000 20.00000000  1.55009761  0.08065872

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 13, 2017 at 11:17 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
> Bert,
>
> The 'degree' argument follows the "..." argument in the function declaration:
>
>   poly(x, ..., degree = 1, coefs = NULL, raw = FALSE, simple = FALSE)
>
> Generally, any arguments after the "..." must be explicitly named, but as per the Details section of ?poly:
>
> "Although formally degree should be named (as it follows ...), an unnamed second argument of length 1 will be interpreted as the degree, such that poly(x, 3) can be used in formulas."
>
> The issue of having to explicitly name arguments that follow the three dots has come up over the years, but I cannot recall where that is documented in the manuals.
>
> Regards,
>
> Marc
>
>
>
>> On Jul 13, 2017, at 12:43 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> poly(NIR, degree = 2) will work if NIR is a matrix, not a data.frame.
>> The degree argument apparently  *must* be explicitly named if NIR is
>> not a numeric vector. AFAICS, this is unclear or unstated in ?poly.
>>
>>
>> -- Bert
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Thu, Jul 13, 2017 at 10:15 AM, David Winsemius
>> <dwinsemius at comcast.net> wrote:
>>>
>>>> On Jul 12, 2017, at 6:58 PM, Ng, Kelvin Sai-cheong <kscng at connect.hku.hk> wrote:
>>>>
>>>> Dear all,
>>>>
>>>> I am using the pls package of R to perform partial least square on a set of
>>>> multivariate data.  Instead of fitting a linear model, I want to fit my
>>>> data with a quadratic function with interaction terms.  But I am not sure
>>>> how.  I will use an example to illustrate my problem:
>>>>
>>>> Following the example in the PLS manual:
>>>> ## Read data
>>>> data(gasoline)
>>>> gasTrain <- gasoline[1:50,]
>>>> ## Perform PLS
>>>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>>>
>>>> where octane ~ NIR is the model that this example is fitting with.
>>>>
>>>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>>>> reflectance measurements from 900 to 1700 nm.
>>>>
>>>> Instead of fitting with predict.octane[i] = a[0] * NIR[0,i] + a[1] *
>>>> NIR[1,i] + ...
>>>> I want to fit the data with:
>>>> predict.octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>>>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>>>
>>>> i.e. quadratic with interaction terms.
>>>>
>>>> But I don't know how to formulate this.
>>>
>>> I did not see any terms in the model that I would have called interaction terms. I'm seeing a desire for a polynomial function in NIR. For that purpose, one might see if you get satisfactory results with:
>>>
>>> gas1 <- plsr(octane ~NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation = "LOO")
>>> gas1
>>>
>>> I first tried using poly(NIR, 2) on the RHS and it threw an error, which raises concerns in my mind that this may not be a proper model. I have no experience with the use of plsr or its underlying theory, so the fact that this is not throwing an error is no guarantee of validity. Using this construction in ordinary least squares regression has dangers with inferential statistics because of the correlation of the linear and squared terms as well as likely violation of homoscedasticity.
>>>
>>> --
>>> David.
>>>
>>>
>>>>
>>>> May I have some help please?
>>>>
>>>> Thanks,
>>>>
>>>> Kelvin
>>>>
>>>>      [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> David Winsemius
>>> Alameda, CA, USA
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From marc_schwartz at me.com  Thu Jul 13 21:41:12 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 13 Jul 2017 14:41:12 -0500
Subject: [R] Quadratic function with interaction terms for the PLS
 fitting model?
In-Reply-To: <CAGxFJbRQerDTfWKr=V1u=XrRNGb55RJoGxgGRC5GYeGHeb_pfQ@mail.gmail.com>
References: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
 <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>
 <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>
 <8484FB25-2150-442B-917B-6CE95E6A4A97@me.com>
 <CAGxFJbRQerDTfWKr=V1u=XrRNGb55RJoGxgGRC5GYeGHeb_pfQ@mail.gmail.com>
Message-ID: <D75497A7-CA38-48CE-8908-1F3902C64E7B@me.com>

Hi Bert,

Ok, to your initial point, the key nuance is that if 'x' is a vector, you can leave the 'degree' argument unnamed, however, if 'x' is a matrix, you cannot. That aspect of the behavior does not seem to change if poly() is called stand alone or, as suggested in ?poly, within a formula to be parsed.

Working on tracing through the code using debug(), the error is triggered with 'mx', when the following code is called within poly(), where 'x' within the function call is 'mx'. Note that my 'mx' was generated using new calls to rnorm():

if (is.matrix(x)) {
    m <- unclass(as.data.frame(cbind(x, ...)))
    return(do.call(polym, c(m, degree = degree, raw = raw, list(coefs = coefs))))
}

'm' ends up being:

Browse[2]> m
$x1
 [1] 0.11551124 0.36245863 0.44844573 0.89193967 0.91431981 0.16244275
 [7] 0.28070518 0.34013156 0.26561721 0.52915461 0.88164507 0.42485427
[13] 0.48844831 0.60092526 0.01493797 0.41814162 0.31549893 0.19483697
[19] 0.16003496 0.52635862

$x2
 [1] 0.89119433 0.02665353 0.03954367 0.37604374 0.05604632 0.86123698
 [7] 0.11106261 0.15707524 0.32433273 0.62476982 0.70646979 0.78843108
[13] 0.63674970 0.17091172 0.65220425 0.64087676 0.56903083 0.21398002
[19] 0.02820857 0.47113431

$V3
 [1] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2

attr(,"row.names")
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20


On the third 'loop' over the list elements in 'm' via do.call(), m$V3 is passed to polym() as its 'x' argument:

Browse[3]> x
 [1] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
Browse[3]> degree
[1] 2
Browse[3]> length(unique(x))
[1] 1


The following check is triggered and, of course, fails with the error message:

if (degree >= length(unique(x))) stop("'degree' must be less than number of unique points")

Thus, in effect, the following is being called:

> polym(rep(2, 20), degree = 2)
Error in poly(dots[[1L]], degree, raw = raw, simple = raw && nd > 1) : 
  'degree' must be less than number of unique points


It would seem reasonable that the help for poly() could make it explicitly clear that if 'x' is not a vector, but is a matrix, that 'degree' must be explicitly named.

Regards,

Marc


> On Jul 13, 2017, at 1:34 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Marc:
> 
> 1. I am aware of the need to explicitly name arguments after ... --
> see the R Language definition where this can be inferred from the
> argument matching rules.
> 
> 2. I am aware of the stated exception for poly(). However:
> 
>> x1 <- runif(20)
>> x2 <- runif(20)
>> mx <- cbind(x1,x2)
>> poly(mx,2)
> Error in poly(dots[[i]], degree, raw = raw, simple = raw) :
>  'degree' must be less than number of unique points
> 
>> poly(mx, degree = 2)
>             1.0           2.0         0.1          1.1         0.2
> [1,] -0.2984843  0.0402593349 -0.07095761  0.021179734 -0.22909595
> [2,]  0.2512177  0.2172530896  0.29620999  0.074413206  0.14508422
> [3,]  0.2775652  0.3085750335 -0.13955410 -0.038735366 -0.13729529
> [4,] -0.4090782  0.4032189266 -0.14737858  0.060289370 -0.12358925
> [5,] -0.1631886 -0.2221937915 -0.26690975  0.043556631  0.16814432
> [6,]  0.1770952  0.0009863446  0.25380650  0.044947925  0.02737265
> [7,] -0.2108146 -0.1525957018  0.34023304 -0.071726094  0.28787441
> [8,]  0.2693983  0.2794576400  0.04697126  0.012653979 -0.26792015
> [9,]  0.2014353  0.0653896008 -0.37013148 -0.074557536  0.54445808
> [10,] -0.1002967 -0.2761638672 -0.29389518  0.029476714  0.25539539
> [11,]  0.1132090 -0.1372916959  0.21619808  0.024475573 -0.06074932
> [12,] -0.1116108 -0.2696398425 -0.14592886  0.016287234 -0.12617869
> [13,]  0.1792535  0.0064357827 -0.04948750 -0.008870809 -0.24736773
> [14,] -0.1167216 -0.2662346206 -0.20209364  0.023588696 -0.00923419
> [15,] -0.4258838  0.4700591049  0.08836730 -0.037634205 -0.24586894
> [16,]  0.1047271 -0.1523001267 -0.21491954 -0.022507896  0.02225837
> [17,] -0.1985753 -0.1728455549  0.32036901 -0.063617358  0.22084868
> [18,]  0.1844006  0.0196368680  0.32321195  0.059600465  0.23017961
> [19,]  0.1009775 -0.1586846110 -0.08282554 -0.008363512 -0.21685556
> [20,]  0.1753745 -0.0033219134  0.09871464  0.017312033 -0.23746062
> attr(,"degree")
> [1] 1 2 1 2 2
> attr(,"coefs")
> attr(,"coefs")[[1]]
> attr(,"coefs")[[1]]$alpha
> [1] 0.5477073 0.4154115
> 
> attr(,"coefs")[[1]]$norm2
> [1]  1.00000000 20.00000000  1.55009761  0.08065872
> 
> Cheers,
> Bert
> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Thu, Jul 13, 2017 at 11:17 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>> Bert,
>> 
>> The 'degree' argument follows the "..." argument in the function declaration:
>> 
>>  poly(x, ..., degree = 1, coefs = NULL, raw = FALSE, simple = FALSE)
>> 
>> Generally, any arguments after the "..." must be explicitly named, but as per the Details section of ?poly:
>> 
>> "Although formally degree should be named (as it follows ...), an unnamed second argument of length 1 will be interpreted as the degree, such that poly(x, 3) can be used in formulas."
>> 
>> The issue of having to explicitly name arguments that follow the three dots has come up over the years, but I cannot recall where that is documented in the manuals.
>> 
>> Regards,
>> 
>> Marc
>> 
>> 
>> 
>>> On Jul 13, 2017, at 12:43 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> 
>>> poly(NIR, degree = 2) will work if NIR is a matrix, not a data.frame.
>>> The degree argument apparently  *must* be explicitly named if NIR is
>>> not a numeric vector. AFAICS, this is unclear or unstated in ?poly.
>>> 
>>> 
>>> -- Bert
>>> 
>>> Bert Gunter
>>> 
>>> "The trouble with having an open mind is that people keep coming along
>>> and sticking things into it."
>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>> 
>>> 
>>> On Thu, Jul 13, 2017 at 10:15 AM, David Winsemius
>>> <dwinsemius at comcast.net> wrote:
>>>> 
>>>>> On Jul 12, 2017, at 6:58 PM, Ng, Kelvin Sai-cheong <kscng at connect.hku.hk> wrote:
>>>>> 
>>>>> Dear all,
>>>>> 
>>>>> I am using the pls package of R to perform partial least square on a set of
>>>>> multivariate data.  Instead of fitting a linear model, I want to fit my
>>>>> data with a quadratic function with interaction terms.  But I am not sure
>>>>> how.  I will use an example to illustrate my problem:
>>>>> 
>>>>> Following the example in the PLS manual:
>>>>> ## Read data
>>>>> data(gasoline)
>>>>> gasTrain <- gasoline[1:50,]
>>>>> ## Perform PLS
>>>>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>>>> 
>>>>> where octane ~ NIR is the model that this example is fitting with.
>>>>> 
>>>>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>>>>> reflectance measurements from 900 to 1700 nm.
>>>>> 
>>>>> Instead of fitting with predict.octane[i] = a[0] * NIR[0,i] + a[1] *
>>>>> NIR[1,i] + ...
>>>>> I want to fit the data with:
>>>>> predict.octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>>>>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>>>> 
>>>>> i.e. quadratic with interaction terms.
>>>>> 
>>>>> But I don't know how to formulate this.
>>>> 
>>>> I did not see any terms in the model that I would have called interaction terms. I'm seeing a desire for a polynomial function in NIR. For that purpose, one might see if you get satisfactory results with:
>>>> 
>>>> gas1 <- plsr(octane ~NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation = "LOO")
>>>> gas1
>>>> 
>>>> I first tried using poly(NIR, 2) on the RHS and it threw an error, which raises concerns in my mind that this may not be a proper model. I have no experience with the use of plsr or its underlying theory, so the fact that this is not throwing an error is no guarantee of validity. Using this construction in ordinary least squares regression has dangers with inferential statistics because of the correlation of the linear and squared terms as well as likely violation of homoscedasticity.
>>>> 
>>>> --
>>>> David.
>>>> 
>>>> 
>>>>> 
>>>>> May I have some help please?
>>>>> 
>>>>> Thanks,
>>>>> 
>>>>> Kelvin


From rmcgehee at walleyetrading.net  Thu Jul 13 22:23:36 2017
From: rmcgehee at walleyetrading.net (Robert McGehee)
Date: Thu, 13 Jul 2017 20:23:36 +0000
Subject: [R] Extracting sentences with combinations of target
 words/terms from cancer patient text medical records
In-Reply-To: <1456393470.785563.1499972447167@mail.yahoo.com>
References: <mailman.1.1499767201.10183.r-help@r-project.org>
 <1870157674.3473342.1499782252997@mail.yahoo.com>
 <CAGxFJbQzkeYucH_V5q5SeWLS66g9bdtn7mt71O3ivJoDFEDQWA@mail.gmail.com>
 <1125236823.4280258.1499863727620@mail.yahoo.com>
 <30D28A63376088428E8318DD67FD407F7BA053@ny-mailstore1.walleyetrading.net>
 <1456393470.785563.1499972447167@mail.yahoo.com>
Message-ID: <30D28A63376088428E8318DD67FD407F7BBABB@ny-mailstore1.walleyetrading.net>

Hi Paul,
No need to collapse the information into a single text string, gregexpr() can take a vector of strings (sentences in your case). You can split your sentences up, number them how you want, then search for your pattern either via regex or via these extra packages you use which probably use the PCRE regex library anyway. However, as this is basically what you did, I'm not sure why you're not happy with your existing approach.



-----Original Message-----
From: Paul Miller [mailto:pjmiller_57 at yahoo.com] 
Sent: Thursday, July 13, 2017 3:01 PM
To: Robert McGehee <rmcgehee at walleyetrading.net>
Cc: r-help at r-project.org
Subject: Re: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records

Hi Robert,

Thank you for your reply. An attempt to solve this via a regular expression query is particularly helpful. Unfortunately, I don't have much time to play around with this just now. Ultimately though, I think I would like to implement a solution something along the lines of what you have done. I have a book on regular expressions that I am now starting to read. In the meantime, the code I'm using is a good way to assess the feasibility of some ideas I'd like to implement.

The advantage of your approach I think is that it makes fewer passes through the data. That should make it a lot faster and more efficient than what I've done. I'm currently working with a little more than 2.5 million text records and I think that number will only rise. So efficiency really should matter. 

I've pasted the latest version of my sample code below. This shows how I'd like to add the result of the text search as a column in a data frame. It also shows how I'd like to append the sentence number to each identified sentence. The single colon that appears where there is no match is not by design. It's something that I need to tidy.

My sense is that if I used your regular expression as written, I'd lose the information about the sentence number when I added the result as a column in my data frame. Presumably, I'd need to collapse the information into a single text string, and then the numbering would be lost. If you were going to get the sentence numbers as well, without making several passes through the data like my code does, how would you go about it?

Thanks,

Paul


library(tidyverse)
library(stringr)
library(lubridate)
 
sentence_match <- function(x){
  sentence_extract <- str_extract_all(x, boundary("sentence"), simplify = TRUE)
  sentence_number <- intersect(str_which(sentence_extract, "breast"), str_which(sentence_extract, "metastatic|stage IV"))
  sentence_match <- str_c(sentence_number, ": ", sentence_extract[sentence_number], collapse = "")
  sentence_match
}
 
sampletxt <-
  structure(
    list(
      PTNO = c(1, 2, 2, 2),
      DATE = structure(c(16436, 16436, 16832, 16845), class = "Date"),
      TYPE = c("Progress note", "CAT scan", "Progress note", "Progress note"),
      TVAR = c(
        "This sentence contains the word metastatic. This sentence contains the term stage IV.",
        "This sentence contains no target words. This sentence also contains no target words.",
        "This sentence contains the word metastatic and the word breast. This sentence contains no target words.",
        "This sentence contains the words breast and the term metastatic. This 
sentence contains the word breast and the term stage IV."
      )
    ),
    .Names = c("PTNO", "DATE", "TYPE", "TVAR"),
    class = c("tbl_df",
              "tbl", "data.frame"),
    row.names = c(NA,-4L)
  )
 
sampletxt$EXTRACTED <- sapply(sampletxt$TVAR, sentence_match)
sampletxt$EXTRACTED
 
> sampletxt$EXTRACTED
[1] ": 
"                                                                                                                                  
[2] ": 
"                                                                                                                                  
[3] "1: This sentence 
contains the word metastatic and the word breast. 
"                                                                 
[4] "1: This sentence contains the words breast and the term metastatic. 2: This sentence contains the word breast and the term stage IV."

________________________________
From: Robert McGehee <rmcgehee at walleyetrading.net>
To: Paul Miller <pjmiller_57 at yahoo.com>; Bert Gunter <bgunter.4567 at gmail.com> 
Cc: "r-help at r-project.org" <r-help at r-project.org>
Sent: Wednesday, July 12, 2017 12:47 PM
Subject: RE: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records



Hi Paul,
Sounds like you have your answer, but for fun I thought I'd try solving your problem using only a regular expression query and base R. I believe this works:

> txt <- "Patient had stage IV breast cancer. Nothing matches this sentence. Metastatic and breast match this sentence. French bike champion takes stage IV victory in Tour de France."

> pattern <- "([^.?!]*(?=[^.?!]*\\bbreast\\b)(?=[^.?!]*\\b(metastatic|stage IV)\\b)(?=[\\s.?!])[^.?!]*[.?!])"

> regmatches(txt, gregexpr(pattern, txt, perl=TRUE, ignore.case=TRUE))[[1]]
[1] "Patient had stage IV breast cancer."        
[2] " Metastatic and breast match this sentence."

Cheers, Robert

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Paul Miller via R-help
Sent: Wednesday, July 12, 2017 8:49 AM
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records

Hi Bert,

Thanks for your reply. It appears that I didn't replace the variable name "sampletxt" with the argument "x" in my function. I've corrected that and now my code seems to be working fine.

Paul

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>

Cc: R-help <r-help at r-project.org>
Sent: Tuesday, July 11, 2017 2:00 PM
Subject: Re: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records



Have you looked at the CRAN Natural Language Processing Task View? If not, why not? If so, why were the resources described there inadequate?

Bert


On Jul 11, 2017 10:49 AM, "Paul Miller via R-help" <r-help at r-project.org> wrote:

Hello All,
>
>I need some help figuring out how to extract combinations of target words/terms from cancer patient text medical records. I've provided some sample data and code below to illustrate what I'm trying to do. At the moment, I'm trying to extract sentences that contain the word "breast" plus either "metastatic" or "stage IV".
>
>It's been some time since I used R and I feel a bit rusty. I wrote a function called "sentence_match" that seemed to work well when applied to a single piece of text. You can see that by running the section titled
>
>"Working code". I thought that it might be possible easily to apply my function to a data set (tibble or df) but that doesn't seem to be the case. My unsuccessful attempt to do this appears in the section titled "Non-working code".
>
>If someone could help me get my code up and running, that would be greatly appreciated. I'm using a lot of functions from Hadley Wickham's packages, but that's not particularly necessary. Although I have only a few entries in my sample data, my actual data are pretty large. Currently, I'm working with over a million records. Some records contain only a single sentence, but many have several paragraphs. One concern I had was that, even if I could get my code working, it would be too inefficient to handle that volume of data.
>
>Thanks,
>
>Paul
>
>
>library(tidyverse)
>library(stringr)
>library(lubridate)
>
>sentence_match <- function(x){
>  sentence_extract <- str_extract_all(sampletxt, boundary("sentence"), simplify = TRUE)
>  sentence_number <- intersect(str_which(sentence_ extract, "breast"), str_which(sentence_extract, "metastatic|stage IV"))
>  sentence_match <- str_c(sentence_number, ": ", sentence_extract[sentence_ number], collapse = "")
>  sentence_match
>}
>
>#### Working code ####
>
>sampletxt <- "This sentence contains the word metastatic and the word breast. This sentence contains no target words."
>
>sentence_match(sampletxt)
>
>#### Non-working code ####
>
>sampletxt <-
>  structure(
>    list(
>      PTNO = c(1, 2, 2, 2),
>      DATE = structure(c(16436, 16436, 16832, 16845), class = "Date"),
>      TYPE = c("Progress note", "CAT scan", "Progress note", "Progress note"),
>      TVAR = c(
>        "This sentence contains the word metastatic. This sentence contains the term stage IV.",
>        "This sentence contains no target words. This sentence also contains no target words.",
>        "This sentence contains the word metastatic and the word breast. This sentence contains no target words.",
>        "This sentence contains the words breast and the term metastatic. This
>sentence contains the word breast and the term stage IV."
>      )
>    ),
>    .Names = c("PTNO", "DATE", "TYPE", "TVAR"),
>    class = c("tbl_df",
>              "tbl", "data.frame"),
>    row.names = c(NA,-4L)
>  )
>
>sampletxt2 <- group_by_at(sampletxt, vars(PTNO, DATE, TYPE))
>sampletxt2 <-
>  sampletxt2 %>%
>  mutate(
>    EXTRACTED = sentence_match(TVAR)
>  )
>
>______________________________ ________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/ listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/ posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From bgunter.4567 at gmail.com  Thu Jul 13 22:30:57 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Thu, 13 Jul 2017 13:30:57 -0700
Subject: [R] Quadratic function with interaction terms for the PLS
	fitting model?
In-Reply-To: <D75497A7-CA38-48CE-8908-1F3902C64E7B@me.com>
References: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
 <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>
 <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>
 <8484FB25-2150-442B-917B-6CE95E6A4A97@me.com>
 <CAGxFJbRQerDTfWKr=V1u=XrRNGb55RJoGxgGRC5GYeGHeb_pfQ@mail.gmail.com>
 <D75497A7-CA38-48CE-8908-1F3902C64E7B@me.com>
Message-ID: <CAGxFJbQhwp=Ofe1We0=etUiv0+7gxNuk5Q-SwMfvzFF+uf4xNA@mail.gmail.com>

> It would seem reasonable that the help for poly() could make it explicitly clear that if 'x' is not a vector, but is a matrix, that 'degree' must be explicitly named.
>
> Regards,
>
> Marc
>

Exactly.  As written, there is no reason to believe that the stated
exception to the ... argument matching rule does not also apply to x a
matrix.

-- Bert


From joseph.rickert at rstudio.com  Thu Jul 13 22:33:48 2017
From: joseph.rickert at rstudio.com (Joseph Rickert)
Date: Thu, 13 Jul 2017 13:33:48 -0700
Subject: [R] R Consortium R Users Survey
Message-ID: <28A846DA-599A-4A4E-8EEE-6475A97A85C8@rstudio.com>

Hello All,

The R Consortium is attempting to survey R users worldwide. We would like to know some basic information: How people use R, What they think of the way R is developing, What other languages they use, etc. You can read more about its purpose in a recent post <https://www.r-consortium.org/blog/2017/06/29/take-the-r-consortiums-survey-on-r> by Hadley Wickham and myself on the R Consortium blog. When the analysis is complete we will share the results of the survey.

We would very much appreciate it if you could pass on the link to the survey <http://bit.ly/2tuO4NF> and encourage everyone to participate.

We intend to make this survey an annual event. We hope that it will become a means to further strengthen the bonds of the R Community.

Thank you and best regards,


Joseph B. Rickert 
RStudio R Community Ambassador
R Consortium Director
Cell: 408.489.0566 <tel:(408)%20489-0566>
	[[alternative HTML version deleted]]


From pjmiller_57 at yahoo.com  Thu Jul 13 21:00:47 2017
From: pjmiller_57 at yahoo.com (Paul Miller)
Date: Thu, 13 Jul 2017 19:00:47 +0000 (UTC)
Subject: [R] Extracting sentences with combinations of target
 words/terms from cancer patient text medical records
In-Reply-To: <30D28A63376088428E8318DD67FD407F7BA053@ny-mailstore1.walleyetrading.net>
References: <mailman.1.1499767201.10183.r-help@r-project.org>
 <1870157674.3473342.1499782252997@mail.yahoo.com>
 <CAGxFJbQzkeYucH_V5q5SeWLS66g9bdtn7mt71O3ivJoDFEDQWA@mail.gmail.com>
 <1125236823.4280258.1499863727620@mail.yahoo.com>
 <30D28A63376088428E8318DD67FD407F7BA053@ny-mailstore1.walleyetrading.net>
Message-ID: <1456393470.785563.1499972447167@mail.yahoo.com>

Hi Robert,

Thank you for your reply. An attempt to solve this via a regular expression query is particularly helpful. Unfortunately, I don't have much time to play around with this just now. Ultimately though, I think I would like to implement a solution something along the lines of what you have done. I have a book on regular expressions that I am now starting to read. In the meantime, the code I'm using is a good way to assess the feasibility of some ideas I'd like to implement.

The advantage of your approach I think is that it makes fewer passes through the data. That should make it a lot faster and more efficient than what I've done. I'm currently working with a little more than 2.5 million text records and I think that number will only rise. So efficiency really should matter. 

I've pasted the latest version of my sample code below. This shows how I'd like to add the result of the text search as a column in a data frame. It also shows how I'd like to append the sentence number to each identified sentence. The single colon that appears where there is no match is not by design. It's something that I need to tidy.

My sense is that if I used your regular expression as written, I'd lose the information about the sentence number when I added the result as a column in my data frame. Presumably, I'd need to collapse the information into a single text string, and then the numbering would be lost. If you were going to get the sentence numbers as well, without making several passes through the data like my code does, how would you go about it?

Thanks,

Paul


library(tidyverse)
library(stringr)
library(lubridate)
 
sentence_match <- function(x){
  sentence_extract <- str_extract_all(x, boundary("sentence"), simplify = TRUE)
  sentence_number <- intersect(str_which(sentence_extract, "breast"), str_which(sentence_extract, "metastatic|stage IV"))
  sentence_match <- str_c(sentence_number, ": ", sentence_extract[sentence_number], collapse = "")
  sentence_match
}
 
sampletxt <-
  structure(
    list(
      PTNO = c(1, 2, 2, 2),
      DATE = structure(c(16436, 16436, 16832, 16845), class = "Date"),
      TYPE = c("Progress note", "CAT scan", "Progress note", "Progress note"),
      TVAR = c(
        "This sentence contains the word metastatic. This sentence contains the term stage IV.",
        "This sentence contains no target words. This sentence also contains no target words.",
        "This sentence contains the word metastatic and the word breast. This sentence contains no target words.",
        "This sentence contains the words breast and the term metastatic. This 
sentence contains the word breast and the term stage IV."
      )
    ),
    .Names = c("PTNO", "DATE", "TYPE", "TVAR"),
    class = c("tbl_df",
              "tbl", "data.frame"),
    row.names = c(NA,-4L)
  )
 
sampletxt$EXTRACTED <- sapply(sampletxt$TVAR, sentence_match)
sampletxt$EXTRACTED
 
> sampletxt$EXTRACTED
[1] ": 
"                                                                                                                                  
[2] ": 
"                                                                                                                                  
[3] "1: This sentence 
contains the word metastatic and the word breast. 
"                                                                 
[4] "1: This sentence contains the words breast and the term metastatic. 2: This sentence contains the word breast and the term stage IV."

________________________________
From: Robert McGehee <rmcgehee at walleyetrading.net>

Cc: "r-help at r-project.org" <r-help at r-project.org>
Sent: Wednesday, July 12, 2017 12:47 PM
Subject: RE: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records



Hi Paul,
Sounds like you have your answer, but for fun I thought I'd try solving your problem using only a regular expression query and base R. I believe this works:

> txt <- "Patient had stage IV breast cancer. Nothing matches this sentence. Metastatic and breast match this sentence. French bike champion takes stage IV victory in Tour de France."

> pattern <- "([^.?!]*(?=[^.?!]*\\bbreast\\b)(?=[^.?!]*\\b(metastatic|stage IV)\\b)(?=[\\s.?!])[^.?!]*[.?!])"

> regmatches(txt, gregexpr(pattern, txt, perl=TRUE, ignore.case=TRUE))[[1]]
[1] "Patient had stage IV breast cancer."        
[2] " Metastatic and breast match this sentence."

Cheers, Robert

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Paul Miller via R-help
Sent: Wednesday, July 12, 2017 8:49 AM
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records

Hi Bert,

Thanks for your reply. It appears that I didn't replace the variable name "sampletxt" with the argument "x" in my function. I've corrected that and now my code seems to be working fine.

Paul

________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>

Cc: R-help <r-help at r-project.org>
Sent: Tuesday, July 11, 2017 2:00 PM
Subject: Re: [R] Extracting sentences with combinations of target words/terms from cancer patient text medical records



Have you looked at the CRAN Natural Language Processing Task View? If not, why not? If so, why were the resources described there inadequate?

Bert


On Jul 11, 2017 10:49 AM, "Paul Miller via R-help" <r-help at r-project.org> wrote:

Hello All,
>
>I need some help figuring out how to extract combinations of target words/terms from cancer patient text medical records. I've provided some sample data and code below to illustrate what I'm trying to do. At the moment, I'm trying to extract sentences that contain the word "breast" plus either "metastatic" or "stage IV".
>
>It's been some time since I used R and I feel a bit rusty. I wrote a function called "sentence_match" that seemed to work well when applied to a single piece of text. You can see that by running the section titled
>
>"Working code". I thought that it might be possible easily to apply my function to a data set (tibble or df) but that doesn't seem to be the case. My unsuccessful attempt to do this appears in the section titled "Non-working code".
>
>If someone could help me get my code up and running, that would be greatly appreciated. I'm using a lot of functions from Hadley Wickham's packages, but that's not particularly necessary. Although I have only a few entries in my sample data, my actual data are pretty large. Currently, I'm working with over a million records. Some records contain only a single sentence, but many have several paragraphs. One concern I had was that, even if I could get my code working, it would be too inefficient to handle that volume of data.
>
>Thanks,
>
>Paul
>
>
>library(tidyverse)
>library(stringr)
>library(lubridate)
>
>sentence_match <- function(x){
>  sentence_extract <- str_extract_all(sampletxt, boundary("sentence"), simplify = TRUE)
>  sentence_number <- intersect(str_which(sentence_ extract, "breast"), str_which(sentence_extract, "metastatic|stage IV"))
>  sentence_match <- str_c(sentence_number, ": ", sentence_extract[sentence_ number], collapse = "")
>  sentence_match
>}
>
>#### Working code ####
>
>sampletxt <- "This sentence contains the word metastatic and the word breast. This sentence contains no target words."
>
>sentence_match(sampletxt)
>
>#### Non-working code ####
>
>sampletxt <-
>  structure(
>    list(
>      PTNO = c(1, 2, 2, 2),
>      DATE = structure(c(16436, 16436, 16832, 16845), class = "Date"),
>      TYPE = c("Progress note", "CAT scan", "Progress note", "Progress note"),
>      TVAR = c(
>        "This sentence contains the word metastatic. This sentence contains the term stage IV.",
>        "This sentence contains no target words. This sentence also contains no target words.",
>        "This sentence contains the word metastatic and the word breast. This sentence contains no target words.",
>        "This sentence contains the words breast and the term metastatic. This
>sentence contains the word breast and the term stage IV."
>      )
>    ),
>    .Names = c("PTNO", "DATE", "TYPE", "TVAR"),
>    class = c("tbl_df",
>              "tbl", "data.frame"),
>    row.names = c(NA,-4L)
>  )
>
>sampletxt2 <- group_by_at(sampletxt, vars(PTNO, DATE, TYPE))
>sampletxt2 <-
>  sampletxt2 %>%
>  mutate(
>    EXTRACTED = sentence_match(TVAR)
>  )
>
>______________________________ ________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/ listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/ posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From drjimlemon at gmail.com  Fri Jul 14 00:40:54 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Fri, 14 Jul 2017 08:40:54 +1000
Subject: [R] How to make a figure plotting p-values by range of
 different adjustment values?
In-Reply-To: <CAN1UO=uURAutHKkJCACqjx2K76AO9DK3cAhN7bO_tvgnaLUM1w@mail.gmail.com>
References: <CAN1UO=vLbYM-u0nN7R8rg-rpQqj1e2SfrQRkVadCGROr6tT6Ww@mail.gmail.com>
 <CA+8X3fWSe3_Z86PqesVwH0-076TnafX3K8gwrHPzKrdWsUptTw@mail.gmail.com>
 <CAN1UO=uURAutHKkJCACqjx2K76AO9DK3cAhN7bO_tvgnaLUM1w@mail.gmail.com>
Message-ID: <CA+8X3fU6Bt+MX4Zn7PtwL7S2-EeHd16S+1d2NgzXdBZOMG0J9A@mail.gmail.com>

Hi Kirsten,
Yes, the adjustment in the "car" package is different from the
p.adjust function in the "stats" package. I used the latter as I
thought you only needed a way to plot different p-values against the
various adjustment methods. Just create a vector of method names that
you have used and pass that to "staxlab" to label each p-value along
the x-axis.

Jim


On Fri, Jul 14, 2017 at 12:52 AM, Kirsten Morehouse
<kmoreho1 at swarthmore.edu> wrote:
> Hi Jim,
>
> Thanks for your help, I really appreciate it.
>
> Perhaps I'm misunderstanding, but does this formula run different ajustment
> values for this function?
>
>   logit(p = doc$value, adjust = 0.025)
>
> I'm looking to plot the p-values of different adjustment values.
>
> Thanks so much,
>
> Kirsten
>
> On Wed, Jul 12, 2017 at 8:49 PM, Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi Kirsten,
>> Perhaps this will help:
>>
>> set.seed(3)
>> kmdf<-data.frame(group=rep(1:4,each=20),
>>  prop=c(runif(20,0.25,1),runif(20,0.2,0.92),
>>  runif(20,0.15,0.84),runif(20,0.1,0.77)))
>> km.glm<-glm(prop~group,kmdf,family=quasibinomial(link="logit"))
>> summary(km.glm)
>> pval<-0.00845
>> padjs<-NA
>> npadj<-1
>> # assume you have five comparisons in this family
>> for(method in p.adjust.methods) {
>>  padjs[npadj]<-p.adjust(pval,method=method,n=5)
>>  npadj<-npadj+1
>> }
>> plot(padjs,xaxt="n",main="P plot",xlab="Method",ylab="adjusted p values")
>> abline(h=0.05,col="lightgray")
>> library(plotrix)
>> staxlab(1,at=1:8,labels=p.adjust.methods)
>>
>> Jim
>>
>>
>> On Thu, Jul 13, 2017 at 12:53 AM, Kirsten Morehouse
>> <kmoreho1 at swarthmore.edu> wrote:
>> > Hi all,
>> >
>> > Thank you for taking the time to read my message. I'm trying to make a
>> > figure that plots p-values by a range of different adjustment values.
>> >
>> > (Using the **logit** function in package **car**)
>> >
>> > My Statistical analyses were conducted on probability estimates ranging
>> > from 0% to 100%. As it's not ideal to run linear models on percentages
>> > that
>> > are bounded between 0 and 1, these estimates were logit transformed.
>> >
>> > However, this introduces a researcher degree of freedom. In Package
>> > **Car**, the logit transformation code is
>> >
>> >         logit(p = doc$value, adjust = 0.025)
>> >
>> >     logit definition/Description
>> >
>> >     Compute the logit transformation of proportions or percentages.
>> >
>> >     Usage
>> >
>> >          logit(p, percents=range.p[2] > 1, adjust)
>> >
>> >     Arguments
>> >
>> >     p  a numeric vector or array of proportions or percentages.
>> >     percents TRUE for percentages.
>> >     adjust   adjustment factor to avoid proportions of 0 or 1; defaults
>> > to
>> > 0 if there are no such proportions in the data, and to .025 if there
>> > are.)
>> >
>> > I chose the default adjustment factor of .025, but I need to determine
>> > at
>> > what point my values are greater than .05 to show I did not choose an
>> > ajustment value that makes my results significant.
>> >
>> > Ultimately, I want to find the range of adjustment factors do we get P <
>> > 0.05?And at what point do we get P > 0.05?
>> >
>> >     ## The final product I'm looking for is a figure with the following
>> > features:
>> >       ## 1) Adjustment factor on the x-axis
>> >       ## 2) P value on the y-axis
>> >
>> >     Does anyone know how to do this? Thank you so much in advance.
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>
>


From dwinsemius at comcast.net  Fri Jul 14 01:36:28 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Thu, 13 Jul 2017 16:36:28 -0700
Subject: [R] Quadratic function with interaction terms for the PLS
	fitting model?
In-Reply-To: <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>
References: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
 <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>
 <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>
Message-ID: <1636ACE6-35AF-4A24-A995-E8B6DEDC5285@comcast.net>


> On Jul 13, 2017, at 10:43 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> poly(NIR, degree = 2) will work if NIR is a matrix, not a data.frame.
> The degree argument apparently  *must* be explicitly named if NIR is
> not a numeric vector. AFAICS, this is unclear or unstated in ?poly.

I still get the same error with:

library(pld)
data(gasoline)
gasTrain <- gasoline[1:50,]
gas1 <- plsr(octane ~ poly(as.matrix(NIR), 2), ncomp = 10, data = gasTrain, validation = "LOO")


Error in rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) : 
  invalid 'times' value

> gas1 <- plsr(octane ~ poly(as.matrix(gasTrain$NIR), degree=2), ncomp = 10, data = gasTrain, validation = "CV")
Error in rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) : 
  invalid 'times' value

> str(as.matrix(gasTrain$NIR))
 AsIs [1:50, 1:401] -0.0502 -0.0442 -0.0469 -0.0467 -0.0509 ...
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:50] "1" "2" "3" "4" ...
  ..$ : chr [1:401] "900 nm" "902 nm" "904 nm" "906 nm" ...

So tried to strip the RHS down to a "simple" matrix

> gas1 <- plsr(octane ~ poly(matrix(gasTrain$NIR, nrow=nrow(gasTrain$NIR) ), degree=2), ncomp = 10, data = gasTrain, validation = "CV")
Error in rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) : 
  invalid 'times' value

I guess it reflects my lack of understanding of poly (which parallels my lack of understanding of PLS.)
-- 
David.
> 
> 
> -- Bert
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Thu, Jul 13, 2017 at 10:15 AM, David Winsemius
> <dwinsemius at comcast.net> wrote:
>> 
>>> On Jul 12, 2017, at 6:58 PM, Ng, Kelvin Sai-cheong <kscng at connect.hku.hk> wrote:
>>> 
>>> Dear all,
>>> 
>>> I am using the pls package of R to perform partial least square on a set of
>>> multivariate data.  Instead of fitting a linear model, I want to fit my
>>> data with a quadratic function with interaction terms.  But I am not sure
>>> how.  I will use an example to illustrate my problem:
>>> 
>>> Following the example in the PLS manual:
>>> ## Read data
>>> data(gasoline)
>>> gasTrain <- gasoline[1:50,]
>>> ## Perform PLS
>>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>> 
>>> where octane ~ NIR is the model that this example is fitting with.
>>> 
>>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>>> reflectance measurements from 900 to 1700 nm.
>>> 
>>> Instead of fitting with predict.octane[i] = a[0] * NIR[0,i] + a[1] *
>>> NIR[1,i] + ...
>>> I want to fit the data with:
>>> predict.octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>> 
>>> i.e. quadratic with interaction terms.
>>> 
>>> But I don't know how to formulate this.
>> 
>> I did not see any terms in the model that I would have called interaction terms. I'm seeing a desire for a polynomial function in NIR. For that purpose, one might see if you get satisfactory results with:
>> 
>> gas1 <- plsr(octane ~NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation = "LOO")
>> gas1
>> 
>> I first tried using poly(NIR, 2) on the RHS and it threw an error, which raises concerns in my mind that this may not be a proper model. I have no experience with the use of plsr or its underlying theory, so the fact that this is not throwing an error is no guarantee of validity. Using this construction in ordinary least squares regression has dangers with inferential statistics because of the correlation of the linear and squared terms as well as likely violation of homoscedasticity.
>> 
>> --
>> David.
>> 
>> 
>>> 
>>> May I have some help please?
>>> 
>>> Thanks,
>>> 
>>> Kelvin
>>> 
>>>      [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> David Winsemius
>> Alameda, CA, USA
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From bgunter.4567 at gmail.com  Fri Jul 14 03:12:46 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Thu, 13 Jul 2017 18:12:46 -0700
Subject: [R] Quadratic function with interaction terms for the PLS
	fitting model?
In-Reply-To: <1636ACE6-35AF-4A24-A995-E8B6DEDC5285@comcast.net>
References: <CAM+VLr2jQwj+QGds8hnP=zJRveM-cv1qXPUUpaY8w7=FjNXKiQ@mail.gmail.com>
 <1D4600BD-A69B-4237-9376-DD9A18B38A8F@comcast.net>
 <CAGxFJbSSnOZW-_r_j4qxKgJQSS7Z2y+Vcv8DguREsD+nCwXDmQ@mail.gmail.com>
 <1636ACE6-35AF-4A24-A995-E8B6DEDC5285@comcast.net>
Message-ID: <CAGxFJbRsrE0No1=3FeJmLfBhhGo9ToZpBt_xKLC10W91T_1dPA@mail.gmail.com>

David et.al.:

It's a problem with poly (or rather with how it is being misused)

> mx <- as.matrix(gasoline[1:50,"NIR"])
> str(mx)
 AsIs [1:50, 1:401] -0.0502 -0.0442 -0.0469 -0.0467 -0.0509 ...
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:50] "1" "2" "3" "4" ...
  ..$ : chr [1:401] "900 nm" "902 nm" "904 nm" "906 nm" ...

> poly(mx[,1:5],2)  ## only 5 columns
Error in poly(dots[[i]], degree, raw = raw, simple = raw) :
  'degree' must be less than number of unique points
> out <- poly(mx[,1:5], degree =2)
> dim(out)
[1] 50 20
## So this is same issue as before. But:

> out <- poly(mx[,1:30],degree = 2)

## 30 columns means 30*30 =900 2nd degree terms, but there are at most 50
## orthogonal vectors for the 50 -d space; ergo, poly() chokes rather
gracelessly, which is what you saw, with the following output:

rsession(2093,0x7fffe0c113c0) malloc: ***
mach_vm_map(size=823564528381952) failed (error code=3)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
rsession(2093,0x7fffe0c113c0) malloc: ***
mach_vm_map(size=823564528381952) failed (error code=3)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
Error: cannot allocate vector of size 767004.2 Gb

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 13, 2017 at 4:36 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>
>> On Jul 13, 2017, at 10:43 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> poly(NIR, degree = 2) will work if NIR is a matrix, not a data.frame.
>> The degree argument apparently  *must* be explicitly named if NIR is
>> not a numeric vector. AFAICS, this is unclear or unstated in ?poly.
>
> I still get the same error with:
>
> library(pld)
> data(gasoline)
> gasTrain <- gasoline[1:50,]
> gas1 <- plsr(octane ~ poly(as.matrix(NIR), 2), ncomp = 10, data = gasTrain, validation = "LOO")
>
>
> Error in rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) :
>   invalid 'times' value
>
>> gas1 <- plsr(octane ~ poly(as.matrix(gasTrain$NIR), degree=2), ncomp = 10, data = gasTrain, validation = "CV")
> Error in rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) :
>   invalid 'times' value
>
>> str(as.matrix(gasTrain$NIR))
>  AsIs [1:50, 1:401] -0.0502 -0.0442 -0.0469 -0.0467 -0.0509 ...
>  - attr(*, "dimnames")=List of 2
>   ..$ : chr [1:50] "1" "2" "3" "4" ...
>   ..$ : chr [1:401] "900 nm" "902 nm" "904 nm" "906 nm" ...
>
> So tried to strip the RHS down to a "simple" matrix
>
>> gas1 <- plsr(octane ~ poly(matrix(gasTrain$NIR, nrow=nrow(gasTrain$NIR) ), degree=2), ncomp = 10, data = gasTrain, validation = "CV")
> Error in rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) :
>   invalid 'times' value
>
> I guess it reflects my lack of understanding of poly (which parallels my lack of understanding of PLS.)
> --
> David.
>>
>>
>> -- Bert
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Thu, Jul 13, 2017 at 10:15 AM, David Winsemius
>> <dwinsemius at comcast.net> wrote:
>>>
>>>> On Jul 12, 2017, at 6:58 PM, Ng, Kelvin Sai-cheong <kscng at connect.hku.hk> wrote:
>>>>
>>>> Dear all,
>>>>
>>>> I am using the pls package of R to perform partial least square on a set of
>>>> multivariate data.  Instead of fitting a linear model, I want to fit my
>>>> data with a quadratic function with interaction terms.  But I am not sure
>>>> how.  I will use an example to illustrate my problem:
>>>>
>>>> Following the example in the PLS manual:
>>>> ## Read data
>>>> data(gasoline)
>>>> gasTrain <- gasoline[1:50,]
>>>> ## Perform PLS
>>>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>>>
>>>> where octane ~ NIR is the model that this example is fitting with.
>>>>
>>>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>>>> reflectance measurements from 900 to 1700 nm.
>>>>
>>>> Instead of fitting with predict.octane[i] = a[0] * NIR[0,i] + a[1] *
>>>> NIR[1,i] + ...
>>>> I want to fit the data with:
>>>> predict.octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>>>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>>>
>>>> i.e. quadratic with interaction terms.
>>>>
>>>> But I don't know how to formulate this.
>>>
>>> I did not see any terms in the model that I would have called interaction terms. I'm seeing a desire for a polynomial function in NIR. For that purpose, one might see if you get satisfactory results with:
>>>
>>> gas1 <- plsr(octane ~NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation = "LOO")
>>> gas1
>>>
>>> I first tried using poly(NIR, 2) on the RHS and it threw an error, which raises concerns in my mind that this may not be a proper model. I have no experience with the use of plsr or its underlying theory, so the fact that this is not throwing an error is no guarantee of validity. Using this construction in ordinary least squares regression has dangers with inferential statistics because of the correlation of the linear and squared terms as well as likely violation of homoscedasticity.
>>>
>>> --
>>> David.
>>>
>>>
>>>>
>>>> May I have some help please?
>>>>
>>>> Thanks,
>>>>
>>>> Kelvin
>>>>
>>>>      [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> David Winsemius
>>> Alameda, CA, USA
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
> David Winsemius
> Alameda, CA, USA
>


From chinyi at siswa.um.edu.my  Fri Jul 14 05:08:10 2017
From: chinyi at siswa.um.edu.my (SEB140004 Student)
Date: Fri, 14 Jul 2017 11:08:10 +0800
Subject: [R] Conduct Network Analysis
Message-ID: <CAFuv27Whc+bzEe8AdWV1EigD_-yLJANx=_UpBkqkaRbC=kEXBg@mail.gmail.com>

Greeting.

Dear Mr/Mrs/Miss,

I want to create a network by using R but I only have a table that contain
OTU ID and the abundance value of two samples ONLY.

Isn't possible? If can, which package can be used?
Greatly appreciated to any suggestions and helps.

Thank you.

Best regards,
Kang Chin Yi

	[[alternative HTML version deleted]]


From ulrik.stervbo at gmail.com  Fri Jul 14 07:09:39 2017
From: ulrik.stervbo at gmail.com (Ulrik Stervbo)
Date: Fri, 14 Jul 2017 05:09:39 +0000
Subject: [R] Help with R script
In-Reply-To: <63453C4D-7D4F-4A5E-B25A-D4466CA34E40@llnl.gov>
References: <OF555EBA0E.8DF25FA1-ON6525815C.003CB1D2-6525815C.003D97C4@itc.in>
 <CAKVAULPP7nf0BuWQN8evp_f+kD3G+8DZE1b=wiZ1PJNUzx131g@mail.gmail.com>
 <63453C4D-7D4F-4A5E-B25A-D4466CA34E40@llnl.gov>
Message-ID: <CAKVAULPi9J-eHEWe_r+k5tPRV+utA6CAZs-np4hik0rG=3NA0A@mail.gmail.com>

@Don your solution does not solve Vijayan's scenario 2. I used spread and
gather for that.

An alternative solution to insert mising Fval - picking up with Don's
newtst - is

newtst <- c("FName: fname1", "Fval: Fval1.name1", "FName: fname2", "Fval:
Fval2.name2", "FName: fname3", "FName: fname4", "Fval: fval4.fname4")

newtst_new <- vector(mode = "character", length = sum(grepl("FName",
newtst)) * 2)
newtst_len <- length(newtst)
i <- 1
j <- 1
while(i <= newtst_len){
  if(grepl("FName", newtst[i]) & grepl("Fval", newtst[i + 1])){
    newtst_new[c(j, j + 1)] <- newtst[c(i, i + 1)]
    i <- i + 2
  }else{
    newtst_new[c(j, j + 1)] <- c(newtst[c(i)], "Fval: ")
    i <- i + 1
  }
  j <- j + 2

}
newtst_new

which is also not very pretty.

HTH
Ulrik

On Thu, 13 Jul 2017 at 16:48 MacQueen, Don <macqueen1 at llnl.gov> wrote:

> Using Ulrik?s example data (and assuming I understand what is wanted),
> here is what I would do:
>
> ex.dat <- c("FName: fname1", "Fval: Fval1.name1", "Fval: ", "FName:
> fname2", "Fval: Fval2.name2", "FName: fname3")
> tst <- data.frame(x = ex.dat, stringsAsFactors=FALSE)
>
> sp <- strsplit(tst$x, ':', fixed=TRUE)
> chk <- unlist(lapply(sp, function(txt) txt[2] != ' '))
> newtst <- tst[chk,,drop=FALSE]
>
> This both assumes and requires that ALL of the rows are structured as in
> the example data in the original question.
> For example:
>   if any row is missing the ?:?, it will fail.
>   If the ?:? is not followed by a space character it may fail (I have not
> checked)
>
> -Don
>
> --
> Don MacQueen
>
> Lawrence Livermore National Laboratory
> 7000 East Ave., L-627
> Livermore, CA 94550
> 925-423-1062
>
>
> On 7/13/17, 6:47 AM, "R-help on behalf of Ulrik Stervbo" <
> r-help-bounces at r-project.org on behalf of ulrik.stervbo at gmail.com> wrote:
>
>     Hi Vijayan,
>
>     one way going about it *could* be this:
>
>     library(dplyr)
>     library(tidyr)
>     library(purrr)
>
>     ex_dat <- c("FName: fname1", "Fval: Fval1.name1", "Fval: ", "FName:
>     fname2", "Fval: Fval2.name2", "FName: fname3")
>
>     data.frame(x = ex_dat) %>%
>       separate(x, c("F1", "F2"), sep = ": ") %>%
>       filter(F2 != "") %>%
>       group_by(F1) %>%
>       mutate(indx = row_number()) %>%
>       spread(F1, F2, fill = "") %>%
>       gather(F1, F2, FName, Fval) %>%
>       arrange(indx) %>%
>       mutate(x = paste(F1, F2, sep = ": ")) %>%
>       select(x) %>%
>       flatten_chr()
>
>     It is not particularly nice or clever, but it gets the job done using
> R.
>
>     HTH
>     Ulrik
>
>     On Thu, 13 Jul 2017 at 13:13 Vijayan Padmanabhan <V.Padmanabhan at itc.in
> >
>     wrote:
>
>     >
>     > Dear R-help Group
>     >
>     >
>     > Scenario 1:
>     > I have a text file running to 1000 of lines...that
>     > is like as follows:
>     >
>     > [922] "FieldName: Wk3PackSubMonth"
>     >
>     >  [923] "FieldValue: Apr"
>     >
>     >  [924] "FieldName: Wk3PackSubYear"
>     >
>     >  [925] "FieldValue: 2017"
>     >
>     >  [926] "FieldName: Wk3Code1"
>     >
>     >  [927] "FieldValue: "
>     >
>     >  [928] "FieldValue: K4"
>     >
>     >  [929] "FieldName: Wk3Code2"
>     >
>     >  [930] "FieldValue: "
>     >
>     >  [931] "FieldValue: Q49"
>     >
>     >
>     > I want this to be programmatically corrected to
>     > read as follows: (All consecutive lines starting
>     > with FieldValue is cleaned to retain only one
>     > line)
>     >
>     > [922] "FieldName: Wk3PackSubMonth"
>     >
>     >  [923] "FieldValue: Apr"
>     >
>     >  [924] "FieldName: Wk3PackSubYear"
>     >
>     >  [925] "FieldValue: 2017"
>     >
>     >  [926] "FieldName: Wk3Code1"
>     >
>     >  [927] "FieldValue: K4"
>     >
>     >  [928] "FieldName: Wk3Code2"
>     >
>     >  [929] "FieldValue: Q49"
>     >
>     > Scenario 2:
>     > In the same file, in some instances, the lines
>     > could be as follows: in this case, wherever a line
>     > is beginning with FieldName and the subsequent
>     > line is not displaying a FieldValue, I would want
>     > to programmatically identify such lines and insert
>     > FieldValue (as blank).
>     >
>     > [941] "FieldName: Wk3Code6"
>     >
>     >  [942] "FieldValue: "
>     >
>     >  [943] "FieldName: Wk3Code7"
>     >
>     >  [944] "FieldValue: "
>     >
>     >  [945] "FieldName: Wk3PackWSColorStiffRemarkCode1"
>     >
>     >  [946] "FieldName: Wk3PackWSColorWrappRemarkCode1"
>     >
>     >  [947] "FieldName:
>     > Wk3PackWSDelamiStiffRemarkCode1"
>     >
>     >
>     > ie in the above, it should be replaced as
>     >
>     > [941] "FieldName: Wk3Code6"
>     >
>     >  [942] "FieldValue: "
>     >
>     >  [943] "FieldName: Wk3Code7"
>     >
>     >  [944] "FieldValue: "
>     >
>     >  [945] "FieldName: Wk3PackWSColorStiffRemarkCode1"
>     >  [946] "FieldValue: "
>     >
>     >  [947] "FieldName: Wk3PackWSColorWrappRemarkCode1"
>     >  [948] "FieldValue: "
>     >
>     >  [949] "FieldName:
>     > Wk3PackWSDelamiStiffRemarkCode1"
>     >  [950] "FieldValue: "
>     >
>     >
>     > Can anybod suggest how to acheive this in R?
>     >
>     > Thanks for your time.
>     > Regards
>     > VP
>     >
>     >
>     >
>     > Disclaimer:\ This Communication is for the exclusive
> use...{{dropped:8}}
>     >
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
>     > http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible code.
>     >
>
>         [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>     and provide commented, minimal, self-contained, reproducible code.
>
>
>

	[[alternative HTML version deleted]]


From rosspjchapman at gmail.com  Fri Jul 14 09:22:40 2017
From: rosspjchapman at gmail.com (Ross Chapman)
Date: Fri, 14 Jul 2017 17:22:40 +1000
Subject: [R] bnlearn and cpquery
In-Reply-To: <CA+RJqXVUjoNMC1rfC-LRv43ar0=VK4b=V6KkP_wXNxDnnw3diw@mail.gmail.com>
References: <007401d2fb98$f830e380$e892aa80$@gmail.com>
 <CA+RJqXVUjoNMC1rfC-LRv43ar0=VK4b=V6KkP_wXNxDnnw3diw@mail.gmail.com>
Message-ID: <003601d2fc71$fce44cd0$f6ace670$@gmail.com>

Dear Marco,

 

Thanks for your helpful comments.

 

Using the posterior estimates seems to have fixed the problem.

 

Ross

 

From: Marco Scutari [mailto:marco.scutari at gmail.com] 
Sent: Thursday, 13 July 2017 7:35 PM
To: Ross Chapman <rosspjchapman at gmail.com>
Cc: r-help <r-help at r-project.org>
Subject: Re: [R] bnlearn and cpquery

 

 

Dear Ross,

This usually happen because you have parameters with a value of NaN in your network, because the data you estimate the network from are sparse and you are using maximum likelihood estimates. You should either 1) use simpler networks for which you can estimate all conditional distributions from the data or 2) use posterior estimates for the parameters.

 

Cheers,

    Marco

 

On 13 July 2017 at 06:29, Ross Chapman <rosspjchapman at gmail.com <mailto:rosspjchapman at gmail.com> > wrote:

Hi all



I have built a Bayesian network using discrete data using the bnlearn
package.



When I try to run the cpquery function on this data it returns NaN for some
some cases.



Running the cpquery in debug mode for such a case (n=10^5, method="lw")
creates the following output:



generated a grand total of 1e+05 samples.

  > event has a probability mass of 14982.37 out of NaN (p = NaN).

[1] NaN





The cpquery command takes the following structure:



cpquery(fullFitted,event=(C1_class=="Med"),

        evidence=list(GK_class = "ModHi",

                      GTh_class = "Lo",

                      GU_class = "Lo",

                      El_class = "Hi",

                      E50_class = "Med",

                      E150_class = "Med"

        ) ,

        n=10^5,   method =  "lw", debug=TRUE)



Similarly, when I try to run the predict method on the same data, it returns
the following warning:



Warning message:
In map.prediction(node = node, fitted = object, data = data, n =
extra.args$n,  :
  dropping 38073 observations because generated samples are NAs.





Could you advise me why these queries are generating NaN values, and how
they might be resolved.



The session info is as follows:



sessionInfo()
R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252
LC_MONETARY=English_Australia.1252
[4] LC_NUMERIC=C                       LC_TIME=English_Australia.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] bnlearn_4.2

loaded via a namespace (and not attached):
[1] compiler_3.4.1 tools_3.4.1





Many thanks in advance



Ross




        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.




-- 

Marco Scutari, Ph.D.
Lecturer in Statistics, Department of Statistics
University of Oxford, United Kingdom


	[[alternative HTML version deleted]]


From Rainer at krugs.de  Fri Jul 14 12:27:29 2017
From: Rainer at krugs.de (Rainer Krug)
Date: Fri, 14 Jul 2017 12:27:29 +0200
Subject: [R] Conduct Network Analysis
In-Reply-To: <CAFuv27Whc+bzEe8AdWV1EigD_-yLJANx=_UpBkqkaRbC=kEXBg@mail.gmail.com>
References: <CAFuv27Whc+bzEe8AdWV1EigD_-yLJANx=_UpBkqkaRbC=kEXBg@mail.gmail.com>
Message-ID: <B443AD5D-A5C2-4D71-AB82-E1B4118DDE32@krugs.de>

I don?t know anything about network analysis, but I really guess that more information is needed to give an answer.

Cheers,

Rainer

> On 14 Jul 2017, at 05:08, SEB140004 Student <chinyi at siswa.um.edu.my> wrote:
> 
> Greeting.
> 
> Dear Mr/Mrs/Miss,
> 
> I want to create a network by using R but I only have a table that contain
> OTU ID and the abundance value of two samples ONLY.
> 
> Isn't possible? If can, which package can be used?
> Greatly appreciated to any suggestions and helps.
> 
> Thank you.
> 
> Best regards,
> Kang Chin Yi
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20170714/519cb35b/attachment.sig>

From boris.steipe at utoronto.ca  Fri Jul 14 12:28:58 2017
From: boris.steipe at utoronto.ca (Boris Steipe)
Date: Fri, 14 Jul 2017 06:28:58 -0400
Subject: [R] Conduct Network Analysis
In-Reply-To: <CAFuv27Whc+bzEe8AdWV1EigD_-yLJANx=_UpBkqkaRbC=kEXBg@mail.gmail.com>
References: <CAFuv27Whc+bzEe8AdWV1EigD_-yLJANx=_UpBkqkaRbC=kEXBg@mail.gmail.com>
Message-ID: <6A92B612-E32D-4C20-805D-BF63C66C7177@utoronto.ca>

Have a look at the functions available in the igraph package.


B.







> On Jul 13, 2017, at 11:08 PM, SEB140004 Student <chinyi at siswa.um.edu.my> wrote:
> 
> Greeting.
> 
> Dear Mr/Mrs/Miss,
> 
> I want to create a network by using R but I only have a table that contain
> OTU ID and the abundance value of two samples ONLY.
> 
> Isn't possible? If can, which package can be used?
> Greatly appreciated to any suggestions and helps.
> 
> Thank you.
> 
> Best regards,
> Kang Chin Yi
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tring at gvdnet.dk  Fri Jul 14 13:42:14 2017
From: tring at gvdnet.dk (Troels Ring)
Date: Fri, 14 Jul 2017 13:42:14 +0200
Subject: [R] setwd in windows
Message-ID: <af4b3388-d4c2-fbe5-23b7-3207c2e3abd7@gvdnet.dk>

Dear friends - windows R 3.3.3 - sorry to ask a simple question - but I 
cannot make setwd work properly in scripts

In the example below I have made a directory in C (firstdir) and a 
directory in that (secdir) and the intention is to change directory to 
the second from the first - it works when I put the entire path but not 
the tilde - what am I missing? I was around rwf 2.14 as per the help to 
setwd - to define the HOME - and redefine it. As I read 2.14 R_USER is 
used for HOME when set. To no avail.

Best wishes

Troels

getwd()
#[1] "C:/firstdir"
  Sys.getenv("R_USER")
#"C:\\Users\\Bruger\\Documents"
dir()
#[1] "chdir.R" "secdir"
setwd("~/secdir")
error in setwd("~/secdir") : cannot change working directory
setwd("C:/firstdir/secdir")
getwd()
#"C:/firstdir/secdir"
setwd("C:/firstdir")
Sys.setenv(R_USER = "C:/firstdir")
Sys.getenv("R_USER")
setwd("~/secdir")


      2.14 What are HOME and working directories?

Several places in the documentation use these terms.

The working directory is the directory from which|Rgui|or|Rterm|was 
launched, unless a shortcut was used when it is given by the ?Start in? 
field of the shortcut?s properties. You can find this from R code by the 
call|getwd()|.

The home directory is set as follows: If environment variable|R_USER|is 
set, its value is used. Otherwise if environment variable|HOME|is set, 
its value is used. After those two user-controllable settings, R tries 
to find system-defined home directories. It first tries to use the 
Windows "personal" directory (typicallyC:\Users\username\Documents). If 
that fails, if both environment variables|HOMEDRIVE|and|HOMEPATH|are set 
(and they normally are), the value is${HOMEDRIVE}${HOMEPATH}. If all of 
these fail, the current working directory is used.




	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Fri Jul 14 13:54:42 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 14 Jul 2017 13:54:42 +0200
Subject: [R] setwd in windows
In-Reply-To: <af4b3388-d4c2-fbe5-23b7-3207c2e3abd7@gvdnet.dk>
References: <af4b3388-d4c2-fbe5-23b7-3207c2e3abd7@gvdnet.dk>
Message-ID: <9C4699C2-A356-4855-AE0F-F63441AAC252@gmail.com>

I am not sure what is going on here. The example seems incomplete. At any rate:

(a) I would be wary of changing my home directory mid-session. That is usually just not done.

(b) For a relative directory change, is anything wrong with setwd("./secdir") ?

-pd

> On 14 Jul 2017, at 13:42 , Troels Ring <tring at gvdnet.dk> wrote:
> 
> Dear friends - windows R 3.3.3 - sorry to ask a simple question - but I 
> cannot make setwd work properly in scripts
> 
> In the example below I have made a directory in C (firstdir) and a 
> directory in that (secdir) and the intention is to change directory to 
> the second from the first - it works when I put the entire path but not 
> the tilde - what am I missing? I was around rwf 2.14 as per the help to 
> setwd - to define the HOME - and redefine it. As I read 2.14 R_USER is 
> used for HOME when set. To no avail.
> 
> Best wishes
> 
> Troels
> 
> getwd()
> #[1] "C:/firstdir"
>  Sys.getenv("R_USER")
> #"C:\\Users\\Bruger\\Documents"
> dir()
> #[1] "chdir.R" "secdir"
> setwd("~/secdir")
> error in setwd("~/secdir") : cannot change working directory
> setwd("C:/firstdir/secdir")
> getwd()
> #"C:/firstdir/secdir"
> setwd("C:/firstdir")
> Sys.setenv(R_USER = "C:/firstdir")
> Sys.getenv("R_USER")
> setwd("~/secdir")
> 
> 
>      2.14 What are HOME and working directories?
> 
> Several places in the documentation use these terms.
> 
> The working directory is the directory from which|Rgui|or|Rterm|was 
> launched, unless a shortcut was used when it is given by the ?Start in? 
> field of the shortcut?s properties. You can find this from R code by the 
> call|getwd()|.
> 
> The home directory is set as follows: If environment variable|R_USER|is 
> set, its value is used. Otherwise if environment variable|HOME|is set, 
> its value is used. After those two user-controllable settings, R tries 
> to find system-defined home directories. It first tries to use the 
> Windows "personal" directory (typicallyC:\Users\username\Documents). If 
> that fails, if both environment variables|HOMEDRIVE|and|HOMEPATH|are set 
> (and they normally are), the value is${HOMEDRIVE}${HOMEPATH}. If all of 
> these fail, the current working directory is used.
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From V.Padmanabhan at itc.in  Fri Jul 14 13:59:49 2017
From: V.Padmanabhan at itc.in (Vijayan Padmanabhan)
Date: Fri, 14 Jul 2017 17:29:49 +0530
Subject: [R] Help with R script
In-Reply-To: <CAKVAULPi9J-eHEWe_r+k5tPRV+utA6CAZs-np4hik0rG=3NA0A@mail.gmail.com>
References: <OF555EBA0E.8DF25FA1-ON6525815C.003CB1D2-6525815C.003D97C4@itc.in>
 <CAKVAULPP7nf0BuWQN8evp_f+kD3G+8DZE1b=wiZ1PJNUzx131g@mail.gmail.com>
 <63453C4D-7D4F-4A5E-B25A-D4466CA34E40@llnl.gov>
 <CAKVAULPi9J-eHEWe_r+k5tPRV+utA6CAZs-np4hik0rG=3NA0A@mail.gmail.com>
Message-ID: <OF271DCE9A.4E84582D-ON6525815D.0041BDC3-6525815D.0041E6DF@itc.in>

Thanks Ulrik and MacQueen
I am taking inputs from both your options to
arrive at the solution that will work for my
specific requirements..
Will post my final solution once I succeed..which
could help others with similar challenge in their
work..
Appreciate both your time shared on suggesting
these solutions..

Thanks & Regards
VP




From:	Ulrik Stervbo
            <ulrik.stervbo at gmail.com>
To:	"MacQueen, Don" <macqueen1 at llnl.gov>,
            Vijayan Padmanabhan
            <V.Padmanabhan at itc.in>,
            "r-help at r-project.org"
            <r-help at r-project.org>
Date:	14-07-2017 10:39
Subject:	Re: [R] Help with R script



@Don your solution does not solve Vijayan's
scenario 2. I used spread and gather for that.

An alternative solution to insert mising Fval -
picking up with Don's newtst - is

newtst <- c("FName: fname1", "Fval: Fval1.name1",
"FName: fname2", "Fval: Fval2.name2", "FName:
fname3", "FName: fname4", "Fval: fval4.fname4")

newtst_new <- vector(mode = "character", length =
sum(grepl("FName", newtst)) * 2)
newtst_len <- length(newtst)
i <- 1
j <- 1
while(i <= newtst_len){
? if(grepl("FName", newtst[i]) & grepl("Fval",
newtst[i + 1])){
? ? newtst_new[c(j, j + 1)] <- newtst[c(i, i + 1)]
? ? i <- i + 2
? }else{
? ? newtst_new[c(j, j + 1)] <- c(newtst[c(i)],
"Fval: ")
? ? i <- i + 1
? }
? j <- j + 2

}
newtst_new

which is also not very pretty.

HTH
Ulrik

On Thu, 13 Jul 2017 at 16:48 MacQueen, Don <
macqueen1 at llnl.gov> wrote:
  Using Ulrik?s example data (and assuming I
  understand what is wanted), here is what I would
  do:

  ex.dat <- c("FName: fname1", "Fval:
  Fval1.name1", "Fval: ", "FName: fname2", "Fval:
  Fval2.name2", "FName: fname3")
  tst <- data.frame(x = ex.dat,
  stringsAsFactors=FALSE)

  sp <- strsplit(tst$x, ':', fixed=TRUE)
  chk <- unlist(lapply(sp, function(txt) txt[2] !=
  ' '))
  newtst <- tst[chk,,drop=FALSE]

  This both assumes and requires that ALL of the
  rows are structured as in the example data in
  the original question.
  For example:
  ? if any row is missing the ?:?, it will fail.
  ? If the ?:? is not followed by a space
  character it may fail (I have not checked)

  -Don

  --
  Don MacQueen

  Lawrence Livermore National Laboratory
  7000 East Ave., L-627
  Livermore, CA 94550
  925-423-1062


  On 7/13/17, 6:47 AM, "R-help on behalf of Ulrik
  Stervbo" <r-help-bounces at r-project.org on behalf
  of ulrik.stervbo at gmail.com> wrote:

  ? ? Hi Vijayan,

  ? ? one way going about it *could* be this:

  ? ? library(dplyr)
  ? ? library(tidyr)
  ? ? library(purrr)

  ? ? ex_dat <- c("FName: fname1", "Fval:
  Fval1.name1", "Fval: ", "FName:
  ? ? fname2", "Fval: Fval2.name2", "FName:
  fname3")

  ? ? data.frame(x = ex_dat) %>%
  ? ? ? separate(x, c("F1", "F2"), sep = ": ") %>%
  ? ? ? filter(F2 != "") %>%
  ? ? ? group_by(F1) %>%
  ? ? ? mutate(indx = row_number()) %>%
  ? ? ? spread(F1, F2, fill = "") %>%
  ? ? ? gather(F1, F2, FName, Fval) %>%
  ? ? ? arrange(indx) %>%
  ? ? ? mutate(x = paste(F1, F2, sep = ": ")) %>%
  ? ? ? select(x) %>%
  ? ? ? flatten_chr()

  ? ? It is not particularly nice or clever, but
  it gets the job done using R.

  ? ? HTH
  ? ? Ulrik

  ? ? On Thu, 13 Jul 2017 at 13:13 Vijayan
  Padmanabhan <V.Padmanabhan at itc.in>
  ? ? wrote:

  ? ? >
  ? ? > Dear R-help Group
  ? ? >
  ? ? >
  ? ? > Scenario 1:
  ? ? > I have a text file running to 1000 of
  lines...that
  ? ? > is like as follows:
  ? ? >
  ? ? > [922] "FieldName: Wk3PackSubMonth"
  ? ? >
  ? ? >? [923] "FieldValue: Apr"
  ? ? >
  ? ? >? [924] "FieldName: Wk3PackSubYear"
  ? ? >
  ? ? >? [925] "FieldValue: 2017"
  ? ? >
  ? ? >? [926] "FieldName: Wk3Code1"
  ? ? >
  ? ? >? [927] "FieldValue: "
  ? ? >
  ? ? >? [928] "FieldValue: K4"
  ? ? >
  ? ? >? [929] "FieldName: Wk3Code2"
  ? ? >
  ? ? >? [930] "FieldValue: "
  ? ? >
  ? ? >? [931] "FieldValue: Q49"
  ? ? >
  ? ? >
  ? ? > I want this to be programmatically
  corrected to
  ? ? > read as follows: (All consecutive lines
  starting
  ? ? > with FieldValue is cleaned to retain only
  one
  ? ? > line)
  ? ? >
  ? ? > [922] "FieldName: Wk3PackSubMonth"
  ? ? >
  ? ? >? [923] "FieldValue: Apr"
  ? ? >
  ? ? >? [924] "FieldName: Wk3PackSubYear"
  ? ? >
  ? ? >? [925] "FieldValue: 2017"
  ? ? >
  ? ? >? [926] "FieldName: Wk3Code1"
  ? ? >
  ? ? >? [927] "FieldValue: K4"
  ? ? >
  ? ? >? [928] "FieldName: Wk3Code2"
  ? ? >
  ? ? >? [929] "FieldValue: Q49"
  ? ? >
  ? ? > Scenario 2:
  ? ? > In the same file, in some instances, the
  lines
  ? ? > could be as follows: in this case,
  wherever a line
  ? ? > is beginning with FieldName and the
  subsequent
  ? ? > line is not displaying a FieldValue, I
  would want
  ? ? > to programmatically identify such lines
  and insert
  ? ? > FieldValue (as blank).
  ? ? >
  ? ? > [941] "FieldName: Wk3Code6"
  ? ? >
  ? ? >? [942] "FieldValue: "
  ? ? >
  ? ? >? [943] "FieldName: Wk3Code7"
  ? ? >
  ? ? >? [944] "FieldValue: "
  ? ? >
  ? ? >? [945] "FieldName:
  Wk3PackWSColorStiffRemarkCode1"
  ? ? >
  ? ? >? [946] "FieldName:
  Wk3PackWSColorWrappRemarkCode1"
  ? ? >
  ? ? >? [947] "FieldName:
  ? ? > Wk3PackWSDelamiStiffRemarkCode1"
  ? ? >
  ? ? >
  ? ? > ie in the above, it should be replaced as
  ? ? >
  ? ? > [941] "FieldName: Wk3Code6"
  ? ? >
  ? ? >? [942] "FieldValue: "
  ? ? >
  ? ? >? [943] "FieldName: Wk3Code7"
  ? ? >
  ? ? >? [944] "FieldValue: "
  ? ? >
  ? ? >? [945] "FieldName:
  Wk3PackWSColorStiffRemarkCode1"
  ? ? >? [946] "FieldValue: "
  ? ? >
  ? ? >? [947] "FieldName:
  Wk3PackWSColorWrappRemarkCode1"
  ? ? >? [948] "FieldValue: "
  ? ? >
  ? ? >? [949] "FieldName:
  ? ? > Wk3PackWSDelamiStiffRemarkCode1"
  ? ? >? [950] "FieldValue: "
  ? ? >
  ? ? >
  ? ? > Can anybod suggest how to acheive this in
  R?
  ? ? >
  ? ? > Thanks for your time.
  ? ? > Regards
  ? ? > VP
  ? ? >
  ? ? >
  ? ? >
  ? ? > Disclaimer:\ This Communication is for the
  exclusive use...{{dropped:8}}
  ? ? >
  ? ? >
  ______________________________________________
  ? ? > R-help at r-project.org mailing list -- To
  UNSUBSCRIBE and more, see
  ? ? >
  https://stat.ethz.ch/mailman/listinfo/r-help
  ? ? > PLEASE do read the posting guide
  ? ? >
  http://www.R-project.org/posting-guide.html
  ? ? > and provide commented, minimal,
  self-contained, reproducible code.
  ? ? >

  ? ? ? ? [[alternative HTML version deleted]]


  ______________________________________________
  ? ? R-help at r-project.org mailing list -- To
  UNSUBSCRIBE and more, see
  ? ? https://stat.ethz.ch/mailman/listinfo/r-help
  ? ? PLEASE do read the posting guide
  http://www.R-project.org/posting-guide.html
  ? ? and provide commented, minimal,
  self-contained, reproducible code.


Disclaimer:
This Communication is for the exclusive use of the intended recipient(s) and shall not attach any liability on the originator or ITC Ltd./its Subsidiaries/its Group Companies.
If you are the addressee, the contents of this email are intended for your use only and it shall not be forwarded to any third party, without first obtaining written authorization from the originator or ITC Ltd./its Subsidiaries/its Group Companies.
It may contain information which is confidential and legally privileged and the same shall not be used or dealt with by any third party in any manner whatsoever without the specific consent of ITC Ltd./its Subsidiaries/its Group Companies.
If this Email is received in error, please contact the System Administrator of ITC Limited at webmaster at itc.in by quoting the name of the sender and the Email address to which it has been sent and then delete it.
Please note that ITC Ltd/its subsidiaries/its Group Companies accept no responsibility for viruses and it is your responsibility to scan or otherwise check this Email and any attachments.
Please be advised that Email communications will not result in an agreement binding ITC Ltd/its subsidiaries/its Group Companies. Such contracts should be executed separately and only by managers authorized in this behalf.

From tring at gvdnet.dk  Fri Jul 14 14:06:29 2017
From: tring at gvdnet.dk (Troels Ring)
Date: Fri, 14 Jul 2017 14:06:29 +0200
Subject: [R] setwd in windows
In-Reply-To: <af4b3388-d4c2-fbe5-23b7-3207c2e3abd7@gvdnet.dk>
References: <af4b3388-d4c2-fbe5-23b7-3207c2e3abd7@gvdnet.dk>
Message-ID: <b99a5783-ae24-cfc4-f467-ec1240aad489@gvdnet.dk>

Fine - no nothing is wrong with setwd("./secdir") but I got the other 
code with the tilde as a supplementum and wondered why I couldn't make 
it work. I believe R_USER was successfully renamed - and per the faq 
thought it should work as specified.

Small problem though

Troels


Den 14-07-2017 kl. 13:54 skrev peter dalgaard:
> I am not sure what is going on here. The example seems incomplete. At any rate:
>
> (a) I would be wary of changing my home directory mid-session. That is usually just not done.
>
> (b) For a relative directory change, is anything wrong with setwd("./secdir") ?
>
> -pd
>
>> On 14 Jul 2017, at 13:42 , Troels Ring <tring at gvdnet.dk> wrote:
>>
>> Dear friends - windows R 3.3.3 - sorry to ask a simple question - but I
>> cannot make setwd work properly in scripts
>>
>> In the example below I have made a directory in C (firstdir) and a
>> directory in that (secdir) and the intention is to change directory to
>> the second from the first - it works when I put the entire path but not
>> the tilde - what am I missing? I was around rwf 2.14 as per the help to
>> setwd - to define the HOME - and redefine it. As I read 2.14 R_USER is
>> used for HOME when set. To no avail.
>>
>> Best wishes
>>
>> Troels
>>
>> getwd()
>> #[1] "C:/firstdir"
>>   Sys.getenv("R_USER")
>> #"C:\\Users\\Bruger\\Documents"
>> dir()
>> #[1] "chdir.R" "secdir"
>> setwd("~/secdir")
>> error in setwd("~/secdir") : cannot change working directory
>> setwd("C:/firstdir/secdir")
>> getwd()
>> #"C:/firstdir/secdir"
>> setwd("C:/firstdir")
>> Sys.setenv(R_USER = "C:/firstdir")
>> Sys.getenv("R_USER")
>> setwd("~/secdir")
>>
>>
>>       2.14 What are HOME and working directories?
>>
>> Several places in the documentation use these terms.
>>
>> The working directory is the directory from which|Rgui|or|Rterm|was
>> launched, unless a shortcut was used when it is given by the ?Start in?
>> field of the shortcut?s properties. You can find this from R code by the
>> call|getwd()|.
>>
>> The home directory is set as follows: If environment variable|R_USER|is
>> set, its value is used. Otherwise if environment variable|HOME|is set,
>> its value is used. After those two user-controllable settings, R tries
>> to find system-defined home directories. It first tries to use the
>> Windows "personal" directory (typicallyC:\Users\username\Documents). If
>> that fails, if both environment variables|HOMEDRIVE|and|HOMEPATH|are set
>> (and they normally are), the value is${HOMEDRIVE}${HOMEPATH}. If all of
>> these fail, the current working directory is used.
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From murdoch.duncan at gmail.com  Fri Jul 14 14:39:36 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 14 Jul 2017 08:39:36 -0400
Subject: [R] setwd in windows
In-Reply-To: <af4b3388-d4c2-fbe5-23b7-3207c2e3abd7@gvdnet.dk>
References: <af4b3388-d4c2-fbe5-23b7-3207c2e3abd7@gvdnet.dk>
Message-ID: <2e437097-6869-d496-ba1b-7e7c05dbf68e@gmail.com>

On 14/07/2017 7:42 AM, Troels Ring wrote:
> Dear friends - windows R 3.3.3 - sorry to ask a simple question - but I
> cannot make setwd work properly in scripts
>
> In the example below I have made a directory in C (firstdir) and a
> directory in that (secdir) and the intention is to change directory to
> the second from the first - it works when I put the entire path but not
> the tilde - what am I missing? I was around rwf 2.14 as per the help to
> setwd - to define the HOME - and redefine it. As I read 2.14 R_USER is
> used for HOME when set. To no avail.

The tilde is a Unix shell convention, it's not supported by Windows.  R 
emulates it, but you should expect some differences (as there are 
between Unix flavours).

To see what "~/secdir" is interpreted as, call path.expand().

On my system with Windows 10 in a VM:

 > path.expand("~/secdir")
[1] "C:\\Users\\murdoch\\Documents/secdir"
 > Sys.setenv(R_USER = "C:/firstdir")
 > path.expand("~/secdir")
[1] "C:\\Users\\murdoch\\Documents/secdir"

R sets the home directory during startup, it doesn't consult the R_USER 
variable every time it needs it.

Duncan Murdoch


>
> Best wishes
>
> Troels
>
> getwd()
> #[1] "C:/firstdir"
>   Sys.getenv("R_USER")
> #"C:\\Users\\Bruger\\Documents"
> dir()
> #[1] "chdir.R" "secdir"
> setwd("~/secdir")
> error in setwd("~/secdir") : cannot change working directory
> setwd("C:/firstdir/secdir")
> getwd()
> #"C:/firstdir/secdir"
> setwd("C:/firstdir")
> Sys.setenv(R_USER = "C:/firstdir")
> Sys.getenv("R_USER")
> setwd("~/secdir")
>
>
>       2.14 What are HOME and working directories?
>
> Several places in the documentation use these terms.
>
> The working directory is the directory from which|Rgui|or|Rterm|was
> launched, unless a shortcut was used when it is given by the ?Start in?
> field of the shortcut?s properties. You can find this from R code by the
> call|getwd()|.
>
> The home directory is set as follows: If environment variable|R_USER|is
> set, its value is used. Otherwise if environment variable|HOME|is set,
> its value is used. After those two user-controllable settings, R tries
> to find system-defined home directories. It first tries to use the
> Windows "personal" directory (typicallyC:\Users\username\Documents). If
> that fails, if both environment variables|HOMEDRIVE|and|HOMEPATH|are set
> (and they normally are), the value is${HOMEDRIVE}${HOMEPATH}. If all of
> these fail, the current working directory is used.
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From dan.abner99 at gmail.com  Fri Jul 14 16:10:59 2017
From: dan.abner99 at gmail.com (Dan Abner)
Date: Fri, 14 Jul 2017 09:10:59 -0500
Subject: [R] Efficient Binning
Message-ID: <CAPRGo-m42SKcMcEYAkSuf2T_+jzxc8ifbNQgF1jkVHghNhcpdQ@mail.gmail.com>

Hi all,

I have a situation where I have 16 bins. I generate a random number and
then want to know which bin number the random number falls in. Right now, I
am using a serious of 16 if() else {} statements which get very complicated
with the embedded curly braces. Is there a more efficient (i.e., easier)
way to go about this?


boundaries<-(0:16)/16
rand<-runif(1)

Which bin number (1:16) does rand fall in?

Thanks,

Dan

	[[alternative HTML version deleted]]


From marc_schwartz at me.com  Fri Jul 14 16:18:47 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Fri, 14 Jul 2017 09:18:47 -0500
Subject: [R] Efficient Binning
In-Reply-To: <CAPRGo-m42SKcMcEYAkSuf2T_+jzxc8ifbNQgF1jkVHghNhcpdQ@mail.gmail.com>
References: <CAPRGo-m42SKcMcEYAkSuf2T_+jzxc8ifbNQgF1jkVHghNhcpdQ@mail.gmail.com>
Message-ID: <B19F8820-8A48-4513-A8FB-B3D5DDA16BA3@me.com>


> On Jul 14, 2017, at 9:10 AM, Dan Abner <dan.abner99 at gmail.com> wrote:
> 
> Hi all,
> 
> I have a situation where I have 16 bins. I generate a random number and
> then want to know which bin number the random number falls in. Right now, I
> am using a serious of 16 if() else {} statements which get very complicated
> with the embedded curly braces. Is there a more efficient (i.e., easier)
> way to go about this?
> 
> 
> boundaries<-(0:16)/16
> rand<-runif(1)
> 
> Which bin number (1:16) does rand fall in?
> 
> Thanks,
> 
> Dan


See ?findInterval

> findInterval(rand, boundaries)
[1] 6

There are various function arguments as well, relative to how to deal with the interval boundaries, as described on the help page.

Regards,

Marc Schwartz


From jdnewmil at dcn.davis.ca.us  Fri Jul 14 17:50:26 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Fri, 14 Jul 2017 08:50:26 -0700
Subject: [R] Efficient Binning
In-Reply-To: <CAPRGo-m42SKcMcEYAkSuf2T_+jzxc8ifbNQgF1jkVHghNhcpdQ@mail.gmail.com>
References: <CAPRGo-m42SKcMcEYAkSuf2T_+jzxc8ifbNQgF1jkVHghNhcpdQ@mail.gmail.com>
Message-ID: <C600C6B0-E12E-422D-8BD5-2E8140A9B2AD@dcn.davis.ca.us>

?cut

cut( 0.51, boundaries )

You can also use as.integer to convert the resulting factor to an integer. 
-- 
Sent from my phone. Please excuse my brevity.

On July 14, 2017 7:10:59 AM PDT, Dan Abner <dan.abner99 at gmail.com> wrote:
>Hi all,
>
>I have a situation where I have 16 bins. I generate a random number and
>then want to know which bin number the random number falls in. Right
>now, I
>am using a serious of 16 if() else {} statements which get very
>complicated
>with the embedded curly braces. Is there a more efficient (i.e.,
>easier)
>way to go about this?
>
>
>boundaries<-(0:16)/16
>rand<-runif(1)
>
>Which bin number (1:16) does rand fall in?
>
>Thanks,
>
>Dan
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From gabriella.csima at metoffice.gov.uk  Fri Jul 14 11:43:31 2017
From: gabriella.csima at metoffice.gov.uk (Csima, Gabriella)
Date: Fri, 14 Jul 2017 09:43:31 +0000
Subject: [R] Making 2 dimensional vector from the 3 dimensional one
Message-ID: <B25998D917106F4CAA03D318FF6712863B02AA65@EXXCMPD1DAG1.cmpd1.metoffice.gov.uk>

Hi All,
I want to make a 1 dimension vector from the first two dimensions of a 3 dimension array, so make a 2 dimension vector from a 3-dimension one, with "fusing" (making as.vector) the first two dimensions.
It seems to be very easy, but I cannot find the solution, I mean it would very strange, that I would do taking the single 1 dimensional vectors from the 3 dimensional one, make one vector from the first two vectors and make two dimension from the original 3rd one and this new one, but  I think there would be an easier way that I do not find.
Could you help me, please?
Thanks very much,
Gabi


	[[alternative HTML version deleted]]


From rainer_krug at icloud.com  Fri Jul 14 12:23:26 2017
From: rainer_krug at icloud.com (Rainer Krug)
Date: Fri, 14 Jul 2017 12:23:26 +0200
Subject: [R] Conduct Network Analysis
In-Reply-To: <CAFuv27Whc+bzEe8AdWV1EigD_-yLJANx=_UpBkqkaRbC=kEXBg@mail.gmail.com>
References: <CAFuv27Whc+bzEe8AdWV1EigD_-yLJANx=_UpBkqkaRbC=kEXBg@mail.gmail.com>
Message-ID: <FE6256D1-3C69-4CC5-929C-9570B4F525CF@icloud.com>

I don?t know anything about network analysis, but I really guess that more information is needed to give an answer.

Cheers,

Rainer

> On 14 Jul 2017, at 05:08, SEB140004 Student <chinyi at siswa.um.edu.my> wrote:
> 
> Greeting.
> 
> Dear Mr/Mrs/Miss,
> 
> I want to create a network by using R but I only have a table that contain
> OTU ID and the abundance value of two samples ONLY.
> 
> Isn't possible? If can, which package can be used?
> Greatly appreciated to any suggestions and helps.
> 
> Thank you.
> 
> Best regards,
> Kang Chin Yi
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r.turner at auckland.ac.nz  Fri Jul 14 23:57:14 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 15 Jul 2017 09:57:14 +1200
Subject: [R] Making 2 dimensional vector from the 3 dimensional one
In-Reply-To: <B25998D917106F4CAA03D318FF6712863B02AA65@EXXCMPD1DAG1.cmpd1.metoffice.gov.uk>
References: <B25998D917106F4CAA03D318FF6712863B02AA65@EXXCMPD1DAG1.cmpd1.metoffice.gov.uk>
Message-ID: <d6de5bb4-e7e0-2829-5041-6b03e23760c3@auckland.ac.nz>


On 14/07/17 21:43, Csima, Gabriella wrote:

> Hi All,
> I want to make a 1 dimension vector from the first two dimensions of a 3 dimension array, so make a 2 dimension vector from a 3-dimension one, with "fusing" (making as.vector) the first two dimensions.
> It seems to be very easy, but I cannot find the solution, I mean it would very strange, that I would do taking the single 1 dimensional vectors from the 3 dimensional one, make one vector from the first two vectors and make two dimension from the original 3rd one and this new one, but  I think there would be an easier way that I do not find.
> Could you help me, please?
> Thanks very much,

(1) Please avoid posting in HTML (although no great harm was done in 
this instance).  This is a plain text mailing list, and HTML often makes 
a mess.

(2) Spend some time learning R (e.g. read "An Introduction to R" from 
the R web site).  In particular learn about array indexing.

(3) It is not *at all* clear to me what you actually want to do.  A 
simple example of what you've got and what you want to get would help.

(4) What on earth do you mean by "a 1 dimension vector"?  A
1 dimensional vector is a scalar.  I can't believe that this is actually 
what you are talking about.  Please clarify.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From drjimlemon at gmail.com  Fri Jul 14 23:59:32 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Sat, 15 Jul 2017 07:59:32 +1000
Subject: [R] Making 2 dimensional vector from the 3 dimensional one
In-Reply-To: <B25998D917106F4CAA03D318FF6712863B02AA65@EXXCMPD1DAG1.cmpd1.metoffice.gov.uk>
References: <B25998D917106F4CAA03D318FF6712863B02AA65@EXXCMPD1DAG1.cmpd1.metoffice.gov.uk>
Message-ID: <CA+8X3fWFuTf0-S7QSr16Zfb1ZW3ZwKVfkD-7xR7f+PVLm06Q6w@mail.gmail.com>

Hi Gabi,
Let's say you have something like this:

gc_array<-array(1:27,c(3,3,3))
> gc_array
, , 1

    [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9

, , 2

    [,1] [,2] [,3]
[1,]   10   13   16
[2,]   11   14   17
[3,]   12   15   18

, , 3

    [,1] [,2] [,3]
[1,]   19   22   25
[2,]   20   23   26
[3,]   21   24   27

You seem to want to collapse this into a two dimensional array using
the values in the three dimensional array. For instance, if you want
to collapse in the third dimension by summing the values in each 2D
"slice":

> gc_array[,,1]+gc_array[,,2]+gc_array[,,3]
    [,1] [,2] [,3]
[1,]   30   39   48
[2,]   33   42   51
[3,]   36   45   54

The problem is working out whether the result means what you want. If
the first two dimensions were geographic coordinates and the third
contained a series of measurements over time, then you would have the
aggregate of those measures over time. Is this what you are trying to
do?

Jim

On Fri, Jul 14, 2017 at 7:43 PM, Csima, Gabriella
<gabriella.csima at metoffice.gov.uk> wrote:
> Hi All,
> I want to make a 1 dimension vector from the first two dimensions of a 3 dimension array, so make a 2 dimension vector from a 3-dimension one, with "fusing" (making as.vector) the first two dimensions.
> It seems to be very easy, but I cannot find the solution, I mean it would very strange, that I would do taking the single 1 dimensional vectors from the 3 dimensional one, make one vector from the first two vectors and make two dimension from the original 3rd one and this new one, but  I think there would be an easier way that I do not find.
> Could you help me, please?
> Thanks very much,
> Gabi
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Sat Jul 15 00:04:34 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Fri, 14 Jul 2017 15:04:34 -0700
Subject: [R] Making 2 dimensional vector from the 3 dimensional one
In-Reply-To: <B25998D917106F4CAA03D318FF6712863B02AA65@EXXCMPD1DAG1.cmpd1.metoffice.gov.uk>
References: <B25998D917106F4CAA03D318FF6712863B02AA65@EXXCMPD1DAG1.cmpd1.metoffice.gov.uk>
Message-ID: <CAGxFJbTeAkOKqoj0DWGyyzbqTuvR04Zc2qfRdYpis9T7XNGW6g@mail.gmail.com>

Like this ?

y <- array(1:24, dim = 2:4)
yy <- array(y, dim = c(6,4))


> y
, , 1

     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

, , 2

     [,1] [,2] [,3]
[1,]    7    9   11
[2,]    8   10   12

, , 3

     [,1] [,2] [,3]
[1,]   13   15   17
[2,]   14   16   18

, , 4

     [,1] [,2] [,3]
[1,]   19   21   23
[2,]   20   22   24

> yy
     [,1] [,2] [,3] [,4]
[1,]    1    7   13   19
[2,]    2    8   14   20
[3,]    3    9   15   21
[4,]    4   10   16   22
[5,]    5   11   17   23
[6,]    6   12   18   24


Explanation: An array is simply a vector with a "dim" attribute,
inexed in column major order.  See an Intro to R (ships with R) or any
good R tutorial (e.g. on the web) for details.


Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jul 14, 2017 at 2:43 AM, Csima, Gabriella
<gabriella.csima at metoffice.gov.uk> wrote:
> Hi All,
> I want to make a 1 dimension vector from the first two dimensions of a 3 dimension array, so make a 2 dimension vector from a 3-dimension one, with "fusing" (making as.vector) the first two dimensions.
> It seems to be very easy, but I cannot find the solution, I mean it would very strange, that I would do taking the single 1 dimensional vectors from the 3 dimensional one, make one vector from the first two vectors and make two dimension from the original 3rd one and this new one, but  I think there would be an easier way that I do not find.
> Could you help me, please?
> Thanks very much,
> Gabi
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From aegerton at huntingtonunderwriting.com  Sat Jul 15 04:44:55 2017
From: aegerton at huntingtonunderwriting.com (HUL-Anthony Egerton)
Date: Sat, 15 Jul 2017 10:44:55 +0800
Subject: [R] One Dimensional Monte Carlo Simulation
In-Reply-To: <7477891F-9C64-41A8-B85C-D59C99047D1B@huntingtonunderwriting.com>
References: <7477891F-9C64-41A8-B85C-D59C99047D1B@huntingtonunderwriting.com>
Message-ID: <0891F2E3-585D-4433-ADF9-F4CF2D2C20FF@huntingtonunderwriting.com>

Further to my email below, I have just realised that I forgot to include the specification of L and R.

Hence, the code needs to include the following additional lines at the start;-

L<-7.5e6
R<-2.5e6

Apologies for any confusion caused!

Best regards,

Tony


> On 12 Jul 2017, at 10:03 AM, HUL-Anthony Egerton <aegerton at huntingtonunderwriting.com> wrote:
> 
> I am trying to code a basic Monte Carlo Simulation in R where a Poisson distribution generates a frequency output that is then input into a Lognormal distribution, which produces a different, independent severity for each incidence. The individual incidences are then summed to produce an aggregate amount per period/iteration. 
> 
> Here is the code;-
> 
> scale<-15.08707 
> shape<-0.8592507 
> lambda.risk<-1.75 
> L<-7.5e5 
> R<-2.5e6 
> iterations<-replicate(10000,{ 
>  claims1<-0 
>  claims2<-0 
>  claims3<-0 
>  claims4<-0 
>  claims5<-0 
> claims6<-0 
>  claims7<-0 
>  claims<-c(claims1,claims2,claims3,claims4,claims5,claims6,claims7)
>  freq<-(qpois(runif(1),lambda.risk)) 
>  sev<-pmin(L,pmax(0,(qlnorm(runif(1),scale,shape)-R))) 
>  if(freq>=1){claims1<-sev} 
>  sev<-pmin(L,pmax(0,(qlnorm(runif(1),scale,shape)-R))) 
>  if(freq>=2){claims2<-sev} 
>  sev<-pmin(L,pmax(0,(qlnorm(runif(1),scale,shape)-R))) 
>  if (freq>=3) {claims3<-sev} 
>  sev<-pmin(L,pmax(0,(qlnorm(runif(1),scale,shape)-R))) 
>  if (freq>=4) {claims4<-sev} 
>  sev<-pmin(L,pmax(0,(qlnorm(runif(1),scale,shape)-R))) 
>  if (freq>=5) {claims5<-sev} 
>  sev<-pmin(L,pmax(0,(qlnorm(runif(1),scale,shape)-R))) 
>  if (freq>=6) {claims6<-sev} 
>  sev<-pmin(L,pmax(0,(qlnorm(runif(1),scale,shape)-R))) 
>  if (freq>=7) {claims7<-sev} 
>  claims<-c(claims1,claims2,claims3,claims4,claims5,claims6,claims7) 
>  min(22.5e6,sum(claims)) 
> })
> 
> I am new to R, but am sure that there must be a simpler way to code this process. 
> 
> Furthermore, as the Poisson lambda increases, there is a need to include provision for potentially more incidences, which will require a manual expansion of the code to claims8, claims9 etc.
> 
> Can you assist, please?
> 
> Best regards,
> 
> Anthony A H Egerton MA MBA ACII
> ??????
> HUNTINGTON UNDERWRITING LIMITED
> Labuan FT, Malaysia
> 
> 
> 
> CONFIDENTIALITY NOTE: 
>  
> The information contained in this email message may be legally privileged and contain confidential information and is intended only for the use of the individual or entity to whom it is addressed. If the reader of this message is not the intended recipient, you are hereby notified that any dissemination, distribution or copy of this message is strictly prohibited. If you have received this email in error, please immediately delete this message.
> 
> Begin forwarded message:
> 
>> From: r-help-request at r-project.org
>> Date: 8 July 2017 at 6:00:02 PM SGT
>> To: r-help at r-project.org
>> Subject: R-help Digest, Vol 173, Issue 8
>> Reply-To: r-help at r-project.org
>> 
>> Send R-help mailing list submissions to
>>    r-help at r-project.org
>> 
>> To subscribe or unsubscribe via the World Wide Web, visit
>>    https://stat.ethz.ch/mailman/listinfo/r-help
>> or, via email, send a message with subject or body 'help' to
>>    r-help-request at r-project.org
>> 
>> You can reach the person managing the list at
>>    r-help-owner at r-project.org
>> 
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of R-help digest..."
>> 
>> 
>> Today's Topics:
>> 
>>   1. R loop function in Tableau (Dai, Shengyu)
>>   2. Factor vs character in a data.frame vs vector (John Kane)
>>   3. Re: Factor vs character in a data.frame vs vector (Marc Schwartz)
>>   4. Re: Scoring and Ranking Methods (David Winsemius)
>>   5. Re: R loop function in Tableau (David Winsemius)
>>   6. Re: [Rd] italic font on cairo devices in R 3.4 (frederik at ofb.net)
>>   7. Re: [Rd] italic font on cairo devices in R 3.4 (frederik at ofb.net)
>>   8. Beginner s quwry about cfa in lavaan (Martina Hule?ov?)
>>   9. Re: [Rd] italic font on cairo devices in R 3.4 (Ilia Kats)
>>  10. Re: Beginner s quwry about cfa in lavaan (Bert Gunter)
>>  11. Re: Factor vs character in a data.frame vs vector (Marc Schwartz)
>>  12. Re: Factor vs character in a data.frame vs vector (John Kane)
>>  13. Re: [Rd] italic font on cairo devices in R 3.4 (Yixuan Qiu)
>> 
>> 
>> ----------------------------------------------------------------------
>> 
>> Message: 1
>> Date: Thu, 06 Jul 2017 17:19:47 -0400
>> From: "Dai, Shengyu" <dais2 at rpi.edu>
>> To: <r-help at r-project.org>
>> Subject: [R] R loop function in Tableau
>> Message-ID: <15947CD3-CD7B-4BB6-A994-D49D514DF0DE at rpi.edu>
>> Content-Type: text/plain;    charset="UTF-8"
>> 
>> Hi R helpers,
>> 
>> 
>> 
>> I hope this email finds you well.
>> 
>> 
>> 
>> I am having trouble with R loop function in Tableau. Please see the attachment of a simple dataset. The problem is to test whether the value of columns is match.
>> 
>> 
>> 
>> Because Tableau do not have iteration function, I coded ?if statement? in Tableau to realize the function, which is slow if having huge amount of data. I wonder to integrate Tableau with R studio to realize this functionality.
>> 
>> 
>> 
>> I did not find too much useful information online and I am asking helps for any examples of related low-level data calculation.
>> 
>> 
>> 
>> Thank you very much. Your helps and supports are really appreciated!
>> 
>> 
>> 
>> Best,
>> 
>> 
>> 
>> --
>> 
>> 
>> 
>> Shengyu (Freddy) Dai
>> 
>> Master of Science in Business Analytics
>> 
>> Lally School of Management
>> 
>> Rensselaer Polytechnic Institute
>> 
>> Mobile: (513)328-5659
>> 
>> 
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 2
>> Date: Fri, 7 Jul 2017 11:03:51 +0000
>> From: John Kane <jrkrideau at yahoo.ca>
>> To: R R-help <r-help at stat.math.ethz.ch>
>> Subject: [R] Factor vs character in a data.frame vs vector
>> Message-ID: <184884580.507511.1499425431478 at mail.yahoo.com>
>> Content-Type: text/plain; charset="UTF-8"
>> 
>> This is not? serious problem but I just wonder if someone can explain what is happening.
>> The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.? It's probably something simple that I have read and forgotten but I thought I'd ask.
>> Thanks
>> 
>> #================================================
>> dat1 <- data.frame(aa = letters[1:10])
>> str(dat1)
>> data.frame':????10 obs. of??1 variable:
>> $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
>> bb = letters[1:10]
>> str(bb)
>> chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
>> #==============================================================
>> 
>> 
>>    [[alternative HTML version deleted]]
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 3
>> Date: Fri, 7 Jul 2017 09:37:12 -0500
>> From: Marc Schwartz <marc_schwartz at me.com>
>> To: John Kane <jrkrideau at yahoo.ca>
>> Cc: R R-help <r-help at stat.math.ethz.ch>
>> Subject: Re: [R] Factor vs character in a data.frame vs vector
>> Message-ID: <36A7CFEC-57B6-4652-BC93-AB9E0EED14AF at me.com>
>> Content-Type: text/plain; charset="us-ascii"
>> 
>> 
>>> On Jul 7, 2017, at 6:03 AM, John Kane via R-help <r-help at r-project.org> wrote:
>>> 
>>> This is not  serious problem but I just wonder if someone can explain what is happening.
>>> The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.  It's probably something simple that I have read and forgotten but I thought I'd ask.
>>> Thanks
>>> 
>>> #================================================
>>> dat1 <- data.frame(aa = letters[1:10])
>>> str(dat1)
>>> data.frame':    10 obs. of  1 variable:
>>> $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
>>> bb = letters[1:10]
>>> str(bb)
>>> chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
>>> #==============================================================
>>> 
>> 
>> 
>> See the 'stringsAsFactors' argument in ?data.frame.
>> 
>> dat1 <- data.frame(aa = letters[1:10], stringsAsFactors = FALSE)
>> 
>>> str(dat1)
>> 'data.frame':    10 obs. of  1 variable:
>> $ aa: chr  "a" "b" "c" "d" ...
>> 
>> 
>> Regards,
>> 
>> Marc Schwartz
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 4
>> Date: Fri, 7 Jul 2017 08:47:57 -0700
>> From: David Winsemius <dwinsemius at comcast.net>
>> To: Dhivya Narayanasamy <dhiv.shreya at gmail.com>
>> Cc: r-help mailing list <r-help at r-project.org>
>> Subject: Re: [R] Scoring and Ranking Methods
>> Message-ID: <B6A35831-5E7D-407A-BB82-504F33E0F488 at comcast.net>
>> Content-Type: text/plain; charset=us-ascii
>> 
>> 
>>> On Jul 7, 2017, at 2:29 AM, Dhivya Narayanasamy <dhiv.shreya at gmail.com> wrote:
>>> 
>>> Hi,
>>> 
>>> I am doing predictive modelling of Multivariate Time series Data of a Motor
>>> in R using various models such as Arima, H2O.Randomforest, glmnet, lm and
>>> few other models.
>>> 
>>> I created a function to select a model of our choice and do prediction.
>>> 
>>> Model1 <- function(){
>>> ..
>>> return()
>>> }
>> 
>> That looks like a prescription for serious disappointment. I seriously doubt that you have done any testing using similar code. You would have created a function that returns NULL. I get the sense that you need to study and work through the examples in the "Introduction to R" document.
>> 
>> 
>> 
>>> Model2 <- function(){
>>> ...
>>> return()
>>> }
>>> Model3 <- function(){
>>> ...
>>> return()
>>> }
>>> main <- function(n){
>>> if(n == 1) {
>>>  Model1()
>>> }
>>> else if(n == 2){
>>>   Model2()
>>> }
>>> else if(n == 3){
>>>   Model3()
>>> }}
>>> Now I am supposed to automate these models which gives RMSE and MAPE of
>>> each model. I would like to provide scores (eg. out of 5) for each model
>>> based on the performance. For example, if Arima gives a low RMSE than other
>>> models, it will be scored high and the second lowest RMSE model will score
>>> a less than Arima and so on.
>>> 
>>> And every time i run those models with different input Data [motor2, motor3
>>> ..], it must give the mean score of a model. what I mean to say is,
>>> 
>>> 1. for motor1 it will give scores of each model, let's say *s1*.
>>> 2. for motor2 run it give scores of each model, and let's call it *s2*.
>>> And i want a mean score of that model every time i run it with different
>>> input. It is more like scoring and ranking method.
>>> 
>>> Are there any methods or packages in R that can give a glimpse of how it is
>>> done? or any examples? Any suggestions would be very helpful.
>> 
>> The 'switch'-function can dispatch to different functions on the basis of the value of an indicator variable. 
>> 
>> 
>>> 
>>> Thank you.
>>> Dhivya
>>> 
>>>    [[alternative HTML version deleted]]
>> 
>> Please read the Posting Guide. Rhelp is a plain text mailing list.
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> David Winsemius
>> Alameda, CA, USA
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 5
>> Date: Fri, 7 Jul 2017 08:57:50 -0700
>> From: David Winsemius <dwinsemius at comcast.net>
>> To: "Dai, Shengyu" <dais2 at rpi.edu>
>> Cc: r-help at r-project.org
>> Subject: Re: [R] R loop function in Tableau
>> Message-ID: <5B17A446-46C5-4371-94D3-A5C9A7CA6E7B at comcast.net>
>> Content-Type: text/plain; charset=utf-8
>> 
>> 
>>> On Jul 6, 2017, at 2:19 PM, Dai, Shengyu <dais2 at rpi.edu> wrote:
>>> 
>>> Hi R helpers,
>>> 
>>> 
>>> 
>>> I hope this email finds you well.
>>> 
>>> 
>>> 
>>> I am having trouble with R loop function in Tableau.
>>> 
>> 
>> There is no "R loop function". (There is an R `for`-function.) If you are having trouble with code then it should be provided. If the problem is with the Tableau code then this is the wrong place. Tableau is not either free or open source. You would in that case need to contact Tableau or get assistance from your academic institution.
>> 
>>> Please see the attachment of a simple dataset.
>> 
>> No data attached. Probably scrubbed by the mail server. Any data needs to be a .txt file.
>> 
>>> The problem is to test whether the value of columns is match.
>> 
>> There is a `match` function. It's vectorized, so may not need to be wrapped with a function that would provide looping.
>> 
>>> 
>>> Because Tableau do not have iteration function, I coded ?if statement? in Tableau to realize the function, which is slow if having huge amount of data. I wonder to integrate Tableau with R studio to realize this functionality.
>>> 
>>> 
>>> 
>>> I did not find too much useful information online and I am asking helps for any examples of related low-level data calculation.
>> 
>> That is then the fault of Tableau (if true), since there is a huge amount of online documentation for R. The Rhelp Archives and StackOverflow have thousands of worked examples of "low-level data calculation". I suspect with estimated probability approaching unity that StackOverflow will have questions tagged jointly with [r] and [tableau].
>> 
>> 
>>> 
>>> Thank you very much. Your helps and supports are really appreciated!
>>> 
>>> 
>>> 
>>> Best,
>>> 
>>> 
>>> 
>>> --
>>> 
>>> 
>>> 
>>> Shengyu (Freddy) Dai
>>> 
>>> Master of Science in Business Analytics
>>> 
>>> Lally School of Management
>>> 
>>> Rensselaer Polytechnic Institute
>>> 
>>> Mobile: (513)328-5659
>>> 
>>> 
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> David Winsemius
>> Alameda, CA, USA
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 6
>> Date: Fri, 7 Jul 2017 09:17:34 -0700
>> From: frederik at ofb.net
>> To: Ilia Kats <ilia-kats at gmx.net>
>> Cc: r-devel at r-project.org, r-help at r-project.org
>> Subject: Re: [R] [Rd] italic font on cairo devices in R 3.4
>> Message-ID: <20170707161734.GA833 at ofb.net>
>> Content-Type: text/plain; charset=us-ascii
>> 
>> Hi Ilia,
>> 
>> I'm running Arch Linux, R 3.4.0.
>> 
>> Here's my test.pdf from your minimal example: https://ptpb.pw/HxsA.pdf
>> 
>> It doesn't look pixelated to me...
>> 
>> Here's a post that I wrote when I solved my last font problem in R,
>> almost 2 years ago:
>> 
>> https://stackoverflow.com/a/40940331/5087283
>> 
>> I had to install some Microsoft font packages, which is sad, because
>> there are some perfectly good free fonts that R could be using
>> instead. It could be considered a bug that R requires Microsoft fonts,
>> at least by default. However, does this even fix your problem? I.e. if
>> you install the corresponding Debian Microsoft font packages, does the
>> text appear anti-aliased?
>> 
>> Frederick
>> 
>>> On Fri, Jul 07, 2017 at 10:30:46AM +0200, Ilia Kats wrote:
>>> [cross-post from R-help]
>>> 
>>> Hi all,
>>> 
>>> I have the following problem: Since R 3.4.0, italic fonts rendered on Cairo
>>> devices appear pixelated. Here's a minimal example:
>>> cairo_pdf('test.pdf')
>>> plot(1:10, ylab=expression(italic(test)))
>>> dev.off()
>>> 
>>> The same problem occurs with bolditalic, but not bold. I am using Debian
>>> Stretch. Several friends tried the same on their machines, another Debian
>>> machine has the same problem. On MacOSX the output was not pixelated, but it
>>> wasn't italic either. Ubuntu 16.04.2 xenial works fine. My impression is
>>> that R somehow can't find the proper font to use and falls back to something
>>> weird. Ideas?
>>> 
>>> Note that I'm not subscribed to the list, so please CC me in replies.
>>> 
>>> Cheers, Ilia
>>> 
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>> 
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 7
>> Date: Fri, 7 Jul 2017 10:28:44 -0700
>> From: frederik at ofb.net
>> To: Ilia Kats <ilia-kats at gmx.net>
>> Cc: r-devel at r-project.org, r-help at r-project.org
>> Subject: Re: [R] [Rd] italic font on cairo devices in R 3.4
>> Message-ID: <20170707172844.GE833 at ofb.net>
>> Content-Type: text/plain; charset=us-ascii
>> 
>>> On Fri, Jul 07, 2017 at 07:08:52PM +0200, Ilia Kats wrote:
>>> Interesting. I did not have the package installed, but I did at some point
>>> extract Helvetica from some MacOSX font files and R was using that just fine
>>> until 3.3. This is how the plot looks in 3.4 (still using Helvetica):
>>> https://ptpb.pw/HikX.pdf . After removing Helvetica, installing the
>>> ttf-mscorefonts-installer package, and running fc-cache --force  the plot
>>> looks like this: https://ptpb.pw/CM8A.pdf
>> 
>> The second plot looks worse, in other words, and the Microsoft fonts
>> didn't help.
>> 
>> Maybe the Cairo device should be giving better warning messages.
>> 
>> Anyway it sounds like you are describing a regression so maybe someone
>> can track down the commit that created this problem.
>> 
>> Thanks,
>> 
>> Frederick
>> 
>> 
>>> Also note that the standard pdf device works fine: https://ptpb.pw/3Ml1.pdf
>>> , it's just the cairo devices (both pdf and svg) that have the issue.
>>> Unfortunately I need to use cairo_pdf due to unicode characters in axis
>>> labels.
>>> 
>>> Cheers, Ilia
>>> 
>>> 
>>> -------- Original Message --------
>>> Subject: Re: [Rd] italic font on cairo devices in R 3.4
>>> Date: 2017-07-07 18:17:34 +0200
>>> From: frederik
>>> To: Ilia Kats
>>> CC: r-devel, r-help
>>>> Hi Ilia,
>>>> 
>>>> I'm running Arch Linux, R 3.4.0.
>>>> 
>>>> Here's my test.pdf from your minimal example: https://ptpb.pw/HxsA.pdf
>>>> 
>>>> It doesn't look pixelated to me...
>>>> 
>>>> Here's a post that I wrote when I solved my last font problem in R,
>>>> almost 2 years ago:
>>>> 
>>>> https://stackoverflow.com/a/40940331/5087283
>>>> 
>>>> I had to install some Microsoft font packages, which is sad, because
>>>> there are some perfectly good free fonts that R could be using
>>>> instead. It could be considered a bug that R requires Microsoft fonts,
>>>> at least by default. However, does this even fix your problem? I.e. if
>>>> you install the corresponding Debian Microsoft font packages, does the
>>>> text appear anti-aliased?
>>>> 
>>>> Frederick
>>>> 
>>>>> On Fri, Jul 07, 2017 at 10:30:46AM +0200, Ilia Kats wrote:
>>>>> [cross-post from R-help]
>>>>> 
>>>>> Hi all,
>>>>> 
>>>>> I have the following problem: Since R 3.4.0, italic fonts rendered on Cairo
>>>>> devices appear pixelated. Here's a minimal example:
>>>>> cairo_pdf('test.pdf')
>>>>> plot(1:10, ylab=expression(italic(test)))
>>>>> dev.off()
>>>>> 
>>>>> The same problem occurs with bolditalic, but not bold. I am using Debian
>>>>> Stretch. Several friends tried the same on their machines, another Debian
>>>>> machine has the same problem. On MacOSX the output was not pixelated, but it
>>>>> wasn't italic either. Ubuntu 16.04.2 xenial works fine. My impression is
>>>>> that R somehow can't find the proper font to use and falls back to something
>>>>> weird. Ideas?
>>>>> 
>>>>> Note that I'm not subscribed to the list, so please CC me in replies.
>>>>> 
>>>>> Cheers, Ilia
>>>>> 
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>> 
>>> 
>>> -- 
>>> The first is to ensure your partner understands that nature has root
>>> privileges - nature doesn't have to make sense.
>>> -- Telsa Gwynne
>>> 
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 8
>> Date: Fri, 7 Jul 2017 16:52:34 +0000
>> From: Martina Hule?ov? <mhulesova at gmail.com>
>> To: "r-help at r-project.org" <r-help at r-project.org>
>> Subject: [R] Beginner s quwry about cfa in lavaan
>> Message-ID:
>>    <HE1PR09MB044320C242C964B3ADB51037BDAA0 at HE1PR09MB0443.eurprd09.prod.outlook.com>
>>    
>> Content-Type: text/plain; charset="UTF-8"
>> 
>> Dear all,
>> I am trying to learn about R. As a Phd student, I would like to use R for Krippendorff s alpha and later for a series of CFA. Is there any good introduction to these kind of analyses, or could you recommend me some tutorials on youtube, for example? I am new to R, so I need something basic , starting from opening the R environment?.
>> Thank you .
>> Martina Hulesova
>> 
>> Odesl?no z m?ho Windows Phone
>> 
>>    [[alternative HTML version deleted]]
>> 
>> 
>> ------------------------------
>> 
>> Message: 9
>> Date: Fri, 7 Jul 2017 19:08:52 +0200
>> From: Ilia Kats <ilia-kats at gmx.net>
>> To: frederik at ofb.net
>> Cc: r-devel at r-project.org, r-help at r-project.org
>> Subject: Re: [R] [Rd] italic font on cairo devices in R 3.4
>> Message-ID: <815d1e56-2fb9-1f7c-aa32-b15769cc72c8 at gmx.net>
>> Content-Type: text/plain; charset=utf-8; format=flowed
>> 
>> Interesting. I did not have the package installed, but I did at some 
>> point extract Helvetica from some MacOSX font files and R was using that 
>> just fine until 3.3. This is how the plot looks in 3.4 (still using 
>> Helvetica): https://ptpb.pw/HikX.pdf . After removing Helvetica, 
>> installing the ttf-mscorefonts-installer package, and running fc-cache 
>> --force  the plot looks like this: https://ptpb.pw/CM8A.pdf
>> 
>> Also note that the standard pdf device works fine: 
>> https://ptpb.pw/3Ml1.pdf , it's just the cairo devices (both pdf and 
>> svg) that have the issue. Unfortunately I need to use cairo_pdf due to 
>> unicode characters in axis labels.
>> 
>> Cheers, Ilia
>> 
>> 
>> -------- Original Message --------
>> Subject: Re: [Rd] italic font on cairo devices in R 3.4
>> Date: 2017-07-07 18:17:34 +0200
>> From: frederik
>> To: Ilia Kats
>> CC: r-devel, r-help
>>> Hi Ilia,
>>> 
>>> I'm running Arch Linux, R 3.4.0.
>>> 
>>> Here's my test.pdf from your minimal example: https://ptpb.pw/HxsA.pdf
>>> 
>>> It doesn't look pixelated to me...
>>> 
>>> Here's a post that I wrote when I solved my last font problem in R,
>>> almost 2 years ago:
>>> 
>>> https://stackoverflow.com/a/40940331/5087283
>>> 
>>> I had to install some Microsoft font packages, which is sad, because
>>> there are some perfectly good free fonts that R could be using
>>> instead. It could be considered a bug that R requires Microsoft fonts,
>>> at least by default. However, does this even fix your problem? I.e. if
>>> you install the corresponding Debian Microsoft font packages, does the
>>> text appear anti-aliased?
>>> 
>>> Frederick
>>> 
>>>> On Fri, Jul 07, 2017 at 10:30:46AM +0200, Ilia Kats wrote:
>>>> [cross-post from R-help]
>>>> 
>>>> Hi all,
>>>> 
>>>> I have the following problem: Since R 3.4.0, italic fonts rendered on Cairo
>>>> devices appear pixelated. Here's a minimal example:
>>>> cairo_pdf('test.pdf')
>>>> plot(1:10, ylab=expression(italic(test)))
>>>> dev.off()
>>>> 
>>>> The same problem occurs with bolditalic, but not bold. I am using Debian
>>>> Stretch. Several friends tried the same on their machines, another Debian
>>>> machine has the same problem. On MacOSX the output was not pixelated, but it
>>>> wasn't italic either. Ubuntu 16.04.2 xenial works fine. My impression is
>>>> that R somehow can't find the proper font to use and falls back to something
>>>> weird. Ideas?
>>>> 
>>>> Note that I'm not subscribed to the list, so please CC me in replies.
>>>> 
>>>> Cheers, Ilia
>>>> 
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>> 
>> 
>> -- 
>> The first is to ensure your partner understands that nature has root
>> privileges - nature doesn't have to make sense.
>> -- Telsa Gwynne
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 10
>> Date: Fri, 7 Jul 2017 16:43:12 -0700
>> From: Bert Gunter <bgunter.4567 at gmail.com>
>> To: Martina Hule?ov? <mhulesova at gmail.com>
>> Cc: r-help at r-project.org
>> Subject: Re: [R] Beginner s quwry about cfa in lavaan
>> Message-ID:
>>    <CAGxFJbQ3CgCFXLBGsz9e8y=VLw=9gQKTw7CsoDjy6Feu4=HBLA at mail.gmail.com>
>> Content-Type: text/plain; charset="UTF-8"
>> 
>> Google is your friend.
>> 
>> Also rseek.org
>> 
>> Bert
>> 
>> 
>> 
>>> On Jul 7, 2017 3:48 PM, "Martina Hule?ov?" <mhulesova at gmail.com> wrote:
>>> 
>>> Dear all,
>>> I am trying to learn about R. As a Phd student, I would like to use R for
>>> Krippendorff s alpha and later for a series of CFA. Is there any good
>>> introduction to these kind of analyses, or could you recommend me some
>>> tutorials on youtube, for example? I am new to R, so I need something basic
>>> , starting from opening the R environment?.
>>> Thank you .
>>> Martina Hulesova
>>> 
>>> Odesl?no z m?ho Windows Phone
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/
>>> posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>>    [[alternative HTML version deleted]]
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 11
>> Date: Fri, 7 Jul 2017 21:25:42 -0500
>> From: Marc Schwartz <marc_schwartz at me.com>
>> To: John Kane <jrkrideau at yahoo.ca>
>> Cc: R R-help <r-help at stat.math.ethz.ch>
>> Subject: Re: [R] Factor vs character in a data.frame vs vector
>> Message-ID: <28B1CAA7-85EA-41A2-9373-172F52773C81 at me.com>
>> Content-Type: text/plain; charset="us-ascii"
>> 
>> 
>>> On Jul 7, 2017, at 7:03 PM, John Kane <jrkrideau at yahoo.ca> wrote:
>>> 
>>> Thanks Marc.
>>> It never occurred to me that I would need a ""stringsAsFactors" expression in a data.frame.  I could have sworn I never did before when mocking up some data but clearly I was wrong or there has been a change in R v. 3.4.1 which seems unlikely.
>> 
>> 
>> Welcome John.
>> 
>> Going back to the old NEWS files, the 'stringsAsFactors' argument for data.frame() appears in version 2.4.0, which was released on 2006-10-03.
>> 
>> It is possible that somewhere along the way, you set options(stringsAsFactors = FALSE) in your .Rprofile, which would change the default behavior. I know that some folks do that, as they do not like the default coercion to factors, both for data.frame() and for the read.table() family.
>> 
>> Other alternatives would be to use the 'colClasses' argument to explicitly set such vectors to character, or to use I(...) to create AsIs class columns.
>> 
>> Regards,
>> 
>> Marc
>> 
>> 
>>> 
>>> 
>>> 
>>> On Friday, July 7, 2017, 10:37:29 AM EDT, Marc Schwartz <marc_schwartz at me.com> wrote:
>>> 
>>> 
>>> 
>>>> On Jul 7, 2017, at 6:03 AM, John Kane via R-help <r-help at r-project.org> wrote:
>>>> 
>>>> This is not  serious problem but I just wonder if someone can explain what is happening.
>>>> The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.  It's probably something simple that I have read and forgotten but I thought I'd ask.
>>>> Thanks
>>>> 
>>>> #================================================
>>>> dat1 <- data.frame(aa = letters[1:10])
>>>> str(dat1)
>>>> data.frame':    10 obs. of  1 variable:
>>>> $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
>>>> bb = letters[1:10]
>>>> str(bb)
>>>> chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
>>>> #==============================================================
>>>> 
>>> 
>>> 
>>> See the 'stringsAsFactors' argument in ?data.frame.
>>> 
>>> dat1 <- data.frame(aa = letters[1:10], stringsAsFactors = FALSE)
>>> 
>>> 
>>>> str(dat1)
>>> 'data.frame':    10 obs. of  1 variable:
>>> 
>>> $ aa: chr  "a" "b" "c" "d" ...
>>> 
>>> 
>>> Regards,
>>> 
>>> Marc Schwartz
>>> 
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 12
>> Date: Sat, 8 Jul 2017 00:03:19 +0000
>> From: John Kane <jrkrideau at yahoo.ca>
>> To: Marc Schwartz <marc_schwartz at me.com>
>> Cc: R R-help <r-help at stat.math.ethz.ch>
>> Subject: Re: [R] Factor vs character in a data.frame vs vector
>> Message-ID: <595896971.1101053.1499472199840 at mail.yahoo.com>
>> Content-Type: text/plain; charset="UTF-8"
>> 
>> Thanks Marc. It never occurred to me that I would need a ""stringsAsFactors" expression in a data.frame.? I could have sworn I never did before when mocking up some data but clearly I was wrong or there has been a change in R v. 3.4.1 which seems unlikely.
>> 
>> 
>> On Friday, July 7, 2017, 10:37:29 AM EDT, Marc Schwartz <marc_schwartz at me.com> wrote:
>> 
>> 
>>> On Jul 7, 2017, at 6:03 AM, John Kane via R-help <r-help at r-project.org> wrote:
>>> 
>>> This is not? serious problem but I just wonder if someone can explain what is happening.
>>> The same command within a dataframe is giving me a factor and as a plain vector is giving me a character.? It's probably something simple that I have read and forgotten but I thought I'd ask.
>>> Thanks
>>> 
>>> #================================================
>>> dat1 <- data.frame(aa = letters[1:10])
>>> str(dat1)
>>> data.frame':? ? 10 obs. of? 1 variable:
>>> $ aa....letters.1.10.: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10#=============================================================
>>> bb = letters[1:10]
>>> str(bb)
>>> chr [1:10] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
>>> #==============================================================
>>> 
>> 
>> 
>> See the 'stringsAsFactors' argument in ?data.frame.
>> 
>> dat1 <- data.frame(aa = letters[1:10], stringsAsFactors = FALSE)
>> 
>>> str(dat1)
>> 'data.frame':??? 10 obs. of? 1 variable:
>> $ aa: chr? "a" "b" "c" "d" ...
>> 
>> 
>> Regards,
>> 
>> Marc Schwartz
>> 
>>    [[alternative HTML version deleted]]
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 13
>> Date: Sat, 8 Jul 2017 01:11:10 -0400
>> From: Yixuan Qiu <yixuan.qiu at cos.name>
>> To: ilia-kats at gmx.net
>> Cc: frederik at ofb.net, r-help <r-help at r-project.org>
>> Subject: Re: [R] [Rd] italic font on cairo devices in R 3.4
>> Message-ID:
>>    <CAFr_7yFTMPers4D9P_vaPW5=R-qvRq0+_LDb56d3TewC7H4uLg at mail.gmail.com>
>> Content-Type: text/plain; charset="UTF-8"
>> 
>> Hi Ilia,
>> 
>> You may want to have a try of the showtext package
>> (https://github.com/yixuan/showtext). Below is a quick example:
>> 
>> library(showtext)
>> showtext.auto()
>> 
>> pdf("test.pdf")
>> ## Use the "sans" font family provided by the showtext package
>> ## font == 3 means italic font face
>> plot(1, xlab = "Unicode characters: \u00C0 \u00C6 \u00D8",
>>    family = "sans", font.lab = 3)
>> dev.off()
>> 
>> ## Same for SVG
>> svg("test.svg")
>> plot(1, xlab = "Unicode characters: \u00C0 \u00C6 \u00D8",
>>    family = "sans", font.lab = 3)
>> dev.off()
>> 
>> 
>> Best,
>> Yixuan
>> 
>> 
>> 2017-07-07 13:08 GMT-04:00 Ilia Kats <ilia-kats at gmx.net>:
>>> Interesting. I did not have the package installed, but I did at some point
>>> extract Helvetica from some MacOSX font files and R was using that just fine
>>> until 3.3. This is how the plot looks in 3.4 (still using Helvetica):
>>> https://ptpb.pw/HikX.pdf . After removing Helvetica, installing the
>>> ttf-mscorefonts-installer package, and running fc-cache --force  the plot
>>> looks like this: https://ptpb.pw/CM8A.pdf
>>> 
>>> Also note that the standard pdf device works fine: https://ptpb.pw/3Ml1.pdf
>>> , it's just the cairo devices (both pdf and svg) that have the issue.
>>> Unfortunately I need to use cairo_pdf due to unicode characters in axis
>>> labels.
>>> 
>>> Cheers, Ilia
>>> 
>> 
>> 
>> 
>> 
>> -- 
>> Yixuan Qiu <yixuan.qiu at cos.name>
>> Department of Statistics,
>> Purdue University
>> 
>> 
>> 
>> ------------------------------
>> 
>> Subject: Digest Footer
>> 
>> _______________________________________________
>> R-help at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ------------------------------
>> 
>> End of R-help Digest, Vol 173, Issue 8
>> **************************************

	[[alternative HTML version deleted]]


From ajdamico at gmail.com  Sat Jul 15 13:35:21 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sat, 15 Jul 2017 07:35:21 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
Message-ID: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>

hello, the last line of the code below causes a segfault for me on 3.4.1.
i think i should submit to https://bugs.r-project.org/  unless others have
advice?  thanks





install.packages( "devtools" )
devtools::install_github("ajdamico/lodown")
devtools::install_github("jimhester/archive")


file_folder <- file.path( tempdir() , "file_folder" )

tf <- tempfile()

# large download!  cachaca saves on your local disk if already downloaded
lodown::cachaca( '
http://download.inep.gov.br/microdados/microdados_enem2009.rar' , tf , mode
= 'wb' )

archive::archive_extract( tf , dir = normalizePath( file_folder ) )

unzipped_files <- list.files( file_folder , recursive = TRUE , full.names =
TRUE  )

infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )

# works
R.utils::countLines( infile )

# works with warning
my_file <- readLines( infile , skipNul = TRUE )

# crash
my_file <- readLines( infile )


# run just before crash
sessionInfo()
# R version 3.4.1 (2017-06-30)
# Platform: x86_64-w64-mingw32/x64 (64-bit)
# Running under: Windows 10 x64 (build 15063)

# Matrix products: default

# locale:
# [1] LC_COLLATE=English_United States.1252
# [2] LC_CTYPE=English_United States.1252
# [3] LC_MONETARY=English_United States.1252
# [4] LC_NUMERIC=C
# [5] LC_TIME=English_United States.1252

# attached base packages:
# [1] stats     graphics  grDevices utils     datasets  methods   base

# loaded via a namespace (and not attached):
 # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1           withr_1.0.2
 # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
memoise_1.1.0
 # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12      lodown_0.1.0
# [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2    R.oo_1.21.0
# [17] archive_0.0.0.9000

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Sat Jul 15 15:17:23 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 15 Jul 2017 09:17:23 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
Message-ID: <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>

On 15/07/2017 7:35 AM, Anthony Damico wrote:
> hello, the last line of the code below causes a segfault for me on 3.4.1.
> i think i should submit to https://bugs.r-project.org/  unless others have
> advice?  thanks

Segfaults are usually worth reporting as bugs.  Try to come up with a 
self-contained example, not using the lodown and archive packages.  I 
imagine you can do this by uploading the file you downloaded, or enough 
of a subset of it to trigger the segfault.  If you can't do that, then 
likely the bug is with one of those packages, not with R.

Duncan Murdoch

>
>
>
>
>
> install.packages( "devtools" )
> devtools::install_github("ajdamico/lodown")
> devtools::install_github("jimhester/archive")
>
>
> file_folder <- file.path( tempdir() , "file_folder" )
>
> tf <- tempfile()
>
> # large download!  cachaca saves on your local disk if already downloaded
> lodown::cachaca( '
> http://download.inep.gov.br/microdados/microdados_enem2009.rar' , tf , mode
> = 'wb' )
>
> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>
> unzipped_files <- list.files( file_folder , recursive = TRUE , full.names =
> TRUE  )
>
> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>
> # works
> R.utils::countLines( infile )
>
> # works with warning
> my_file <- readLines( infile , skipNul = TRUE )
>
> # crash
> my_file <- readLines( infile )
>
>
> # run just before crash
> sessionInfo()
> # R version 3.4.1 (2017-06-30)
> # Platform: x86_64-w64-mingw32/x64 (64-bit)
> # Running under: Windows 10 x64 (build 15063)
>
> # Matrix products: default
>
> # locale:
> # [1] LC_COLLATE=English_United States.1252
> # [2] LC_CTYPE=English_United States.1252
> # [3] LC_MONETARY=English_United States.1252
> # [4] LC_NUMERIC=C
> # [5] LC_TIME=English_United States.1252
>
> # attached base packages:
> # [1] stats     graphics  grDevices utils     datasets  methods   base
>
> # loaded via a namespace (and not attached):
>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1           withr_1.0.2
>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
> memoise_1.1.0
>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12      lodown_0.1.0
> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2    R.oo_1.21.0
> # [17] archive_0.0.0.9000
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From ajdamico at gmail.com  Sat Jul 15 16:32:32 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sat, 15 Jul 2017 10:32:32 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
Message-ID: <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>

hi, thanks Dr. Murdoch


i'd appreciate if anyone on r-help could help me narrow this down?  i
believe the segfault occurs because there's a single line with 4GB and also
embedded nuls, but i am not sure how to artificially construct that?


the lodown package can be removed from my example..  it is just for file
download cacheing, so `lodown::cachaca` can be replaced with
`download.file`  my current example requires a huge download, so sort of
painful to repeat but i'm pretty confident that's not the issue.


the archive::archive_extract() function unzips a (probably corrupt) .RAR
file and creates a text file with 80,937 lines.  this file is 4GB:

    > file.size(infile)
    [1] 4078192743


i am pretty sure that nearly all of that 4GB is contained on a single line
in the file.  here's what happens when i create a file connection and scan
through..

    > file_con <- file( infile , 'r' )
    >
    > first_80936_lines <- readLines( file_con , n = 80936 )
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "1000023930632009"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "36F2924009PAULO"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "AFONSO"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "BA11"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "00000"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "00"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "2924009PAULO"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "AFONSO"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "BA1111"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "467.20"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "346.10"
    > scan( w , n = 1 , what = character() )
    Read 1 item
    [1] "414.40"
    > scan( w , n = 1 , what = character() )
    Error in scan(w, n = 1, what = character()) :
      could not allocate memory (2048 Mb) in C function
'R_AllocStringBuffer'



making a huge single-line file does not reproduce the problem, i think the
embedded nuls have something to do with it--


    # WARNING do not run with less than 64GB RAM
    tf <- tempfile()
    a <- rep( "a" , 1000000000 )
    b <- paste( a , collapse = '' )
    writeLines( b , tf ) ; rm( b ) ; gc()
    d <- readLines( tf )



On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>
>> hello, the last line of the code below causes a segfault for me on 3.4.1.
>> i think i should submit to https://bugs.r-project.org/  unless others
>> have
>> advice?  thanks
>>
>
> Segfaults are usually worth reporting as bugs.  Try to come up with a
> self-contained example, not using the lodown and archive packages.  I
> imagine you can do this by uploading the file you downloaded, or enough of
> a subset of it to trigger the segfault.  If you can't do that, then likely
> the bug is with one of those packages, not with R.
>
> Duncan Murdoch
>
>
>>
>>
>>
>>
>> install.packages( "devtools" )
>> devtools::install_github("ajdamico/lodown")
>> devtools::install_github("jimhester/archive")
>>
>>
>> file_folder <- file.path( tempdir() , "file_folder" )
>>
>> tf <- tempfile()
>>
>> # large download!  cachaca saves on your local disk if already downloaded
>> lodown::cachaca( '
>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' , tf ,
>> mode
>> = 'wb' )
>>
>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>
>> unzipped_files <- list.files( file_folder , recursive = TRUE , full.names
>> =
>> TRUE  )
>>
>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>
>> # works
>> R.utils::countLines( infile )
>>
>> # works with warning
>> my_file <- readLines( infile , skipNul = TRUE )
>>
>> # crash
>> my_file <- readLines( infile )
>>
>>
>> # run just before crash
>> sessionInfo()
>> # R version 3.4.1 (2017-06-30)
>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>> # Running under: Windows 10 x64 (build 15063)
>>
>> # Matrix products: default
>>
>> # locale:
>> # [1] LC_COLLATE=English_United States.1252
>> # [2] LC_CTYPE=English_United States.1252
>> # [3] LC_MONETARY=English_United States.1252
>> # [4] LC_NUMERIC=C
>> # [5] LC_TIME=English_United States.1252
>>
>> # attached base packages:
>> # [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> # loaded via a namespace (and not attached):
>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>  withr_1.0.2
>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>> memoise_1.1.0
>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>> lodown_0.1.0
>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>> R.oo_1.21.0
>> # [17] archive_0.0.0.9000
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>

	[[alternative HTML version deleted]]


From motyocska at yahoo.com  Sat Jul 15 13:01:06 2017
From: motyocska at yahoo.com (Andras Farkas)
Date: Sat, 15 Jul 2017 11:01:06 +0000 (UTC)
Subject: [R] select from data frame
References: <563240903.959259.1500116466430.ref@mail.yahoo.com>
Message-ID: <563240903.959259.1500116466430@mail.yahoo.com>

Dear All,

wonder if you could please assist with the following 

df<-data.frame(ID=c(1,1,1,2,2,3,3,4,4,5,5),samples=c("A","B","C","A","C","A","D","C","B","A","C"))

from this data frame the goal is to extract the value of 3 from the ID column based on the logic that the ID=3 in the data frame has NO row that would pair 3 with either "B", AND/OR "C" in the samples column...


much appreciate your help...

thanks,
 Andras


From ajdamico at gmail.com  Sat Jul 15 17:33:50 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sat, 15 Jul 2017 11:33:50 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
Message-ID: <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>

hi, i realized that the segfault happens on the text file in a new R
session.  so, creating the segfault-generating text file requires a
contributed package, but prompting the actual segfault does not -- pretty
sure that means this is a base R bug?  submitted here:
https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully i am
not doing something remarkably stupid.  the text file itself is 4GB so
cannot upload it to bugzilla, and from the R_AllocStringBugger error in the
previous message, i think most or all of it needs to be there to trigger
the segfault.  thanks!


On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com> wrote:

> hi, thanks Dr. Murdoch
>
>
> i'd appreciate if anyone on r-help could help me narrow this down?  i
> believe the segfault occurs because there's a single line with 4GB and also
> embedded nuls, but i am not sure how to artificially construct that?
>
>
> the lodown package can be removed from my example..  it is just for file
> download cacheing, so `lodown::cachaca` can be replaced with
> `download.file`  my current example requires a huge download, so sort of
> painful to repeat but i'm pretty confident that's not the issue.
>
>
> the archive::archive_extract() function unzips a (probably corrupt) .RAR
> file and creates a text file with 80,937 lines.  this file is 4GB:
>
>     > file.size(infile)
>     [1] 4078192743 <(407)%20819-2743>
>
>
> i am pretty sure that nearly all of that 4GB is contained on a single line
> in the file.  here's what happens when i create a file connection and scan
> through..
>
>     > file_con <- file( infile , 'r' )
>     >
>     > first_80936_lines <- readLines( file_con , n = 80936 )
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "1000023930632009"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "36F2924009PAULO"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "AFONSO"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "BA11"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "00000"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "00"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "2924009PAULO"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "AFONSO"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "BA1111"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "467.20"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "346.10"
>     > scan( w , n = 1 , what = character() )
>     Read 1 item
>     [1] "414.40"
>     > scan( w , n = 1 , what = character() )
>     Error in scan(w, n = 1, what = character()) :
>       could not allocate memory (2048 Mb) in C function
> 'R_AllocStringBuffer'
>
>
>
> making a huge single-line file does not reproduce the problem, i think the
> embedded nuls have something to do with it--
>
>
>     # WARNING do not run with less than 64GB RAM
>     tf <- tempfile()
>     a <- rep( "a" , 1000000000 )
>     b <- paste( a , collapse = '' )
>     writeLines( b , tf ) ; rm( b ) ; gc()
>     d <- readLines( tf )
>
>
>
> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>
>>> hello, the last line of the code below causes a segfault for me on 3.4.1.
>>> i think i should submit to https://bugs.r-project.org/  unless others
>>> have
>>> advice?  thanks
>>>
>>
>> Segfaults are usually worth reporting as bugs.  Try to come up with a
>> self-contained example, not using the lodown and archive packages.  I
>> imagine you can do this by uploading the file you downloaded, or enough of
>> a subset of it to trigger the segfault.  If you can't do that, then likely
>> the bug is with one of those packages, not with R.
>>
>> Duncan Murdoch
>>
>>
>>>
>>>
>>>
>>>
>>> install.packages( "devtools" )
>>> devtools::install_github("ajdamico/lodown")
>>> devtools::install_github("jimhester/archive")
>>>
>>>
>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>
>>> tf <- tempfile()
>>>
>>> # large download!  cachaca saves on your local disk if already downloaded
>>> lodown::cachaca( '
>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' , tf ,
>>> mode
>>> = 'wb' )
>>>
>>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>>
>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>> full.names =
>>> TRUE  )
>>>
>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>>
>>> # works
>>> R.utils::countLines( infile )
>>>
>>> # works with warning
>>> my_file <- readLines( infile , skipNul = TRUE )
>>>
>>> # crash
>>> my_file <- readLines( infile )
>>>
>>>
>>> # run just before crash
>>> sessionInfo()
>>> # R version 3.4.1 (2017-06-30)
>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>> # Running under: Windows 10 x64 (build 15063)
>>>
>>> # Matrix products: default
>>>
>>> # locale:
>>> # [1] LC_COLLATE=English_United States.1252
>>> # [2] LC_CTYPE=English_United States.1252
>>> # [3] LC_MONETARY=English_United States.1252
>>> # [4] LC_NUMERIC=C
>>> # [5] LC_TIME=English_United States.1252
>>>
>>> # attached base packages:
>>> # [1] stats     graphics  grDevices utils     datasets  methods   base
>>>
>>> # loaded via a namespace (and not attached):
>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>  withr_1.0.2
>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>> memoise_1.1.0
>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>> lodown_0.1.0
>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>> R.oo_1.21.0
>>> # [17] archive_0.0.0.9000
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>> ng-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>
>

	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Sat Jul 15 17:54:55 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Sat, 15 Jul 2017 08:54:55 -0700
Subject: [R] select from data frame
In-Reply-To: <563240903.959259.1500116466430@mail.yahoo.com>
References: <563240903.959259.1500116466430.ref@mail.yahoo.com>
 <563240903.959259.1500116466430@mail.yahoo.com>
Message-ID: <75738441-23E0-4A39-A017-7F2657300425@comcast.net>


> On Jul 15, 2017, at 4:01 AM, Andras Farkas via R-help <r-help at r-project.org> wrote:
> 
> Dear All,
> 
> wonder if you could please assist with the following 
> 
> df<-data.frame(ID=c(1,1,1,2,2,3,3,4,4,5,5),samples=c("A","B","C","A","C","A","D","C","B","A","C"))
> 
> from this data frame the goal is to extract the value of 3 from the ID column based on the logic that the ID=3 in the data frame has NO row that would pair 3 with either "B", AND/OR "C" in the samples column...
> 

This returns a vector that determines if either of those characters are in the character values of that factor column you created. Coercing to character is needed because leaving samples as a factor generated an invalid factor level warning and gave useless results.

 with( df, ave( as.character(samples), ID, FUN=function(x) {!any(x %in% c("B","C"))}))
 [1] "FALSE" "FALSE" "FALSE" "FALSE" "FALSE" "TRUE"  "TRUE"  "FALSE" "FALSE"
[10] "FALSE" "FALSE"

You can then use it to extract and consolidate to a single value (although wrapping with as.logical was needed because `ave` returned character class values):

 unique( df$ID[ as.logical(   # fails without this since "FALSE" != FALSE
                    with( df, 
                       ave( as.character(samples), ID, FUN=function(x) {!any(x %in% c("B","C"))})))
              ] )
#[1] 3

The same sort of logic could also be constructed with a for-loop:

> for (x in unique(df$ID) ) { if ( !any( df$samples[df$ID==x] %in% c("b","C")) ) print(x) }
[1] 3

Although you are warned that for-loops do not return values and you might need to make an assignment rather than just printing.

-- 

David Winsemius
Alameda, CA, USA


From murdoch.duncan at gmail.com  Sat Jul 15 18:01:43 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 15 Jul 2017 12:01:43 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
Message-ID: <9af4bb2c-2161-5342-a73c-ea2e13af3406@gmail.com>

On 15/07/2017 11:33 AM, Anthony Damico wrote:
> hi, i realized that the segfault happens on the text file in a new R
> session.  so, creating the segfault-generating text file requires a
> contributed package, but prompting the actual segfault does not --
> pretty sure that means this is a base R bug?  submitted here:
> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully i
> am not doing something remarkably stupid.  the text file itself is 4GB
> so cannot upload it to bugzilla, and from the R_AllocStringBugger error
> in the previous message, i think most or all of it needs to be there to
> trigger the segfault.  thanks!

Hopefully someone can debug it with the info you provided.

Duncan Murdoch

>
> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com
> <mailto:ajdamico at gmail.com>> wrote:
>
>     hi, thanks Dr. Murdoch
>
>
>     i'd appreciate if anyone on r-help could help me narrow this down?
>     i believe the segfault occurs because there's a single line with 4GB
>     and also embedded nuls, but i am not sure how to artificially
>     construct that?
>
>
>     the lodown package can be removed from my example..  it is just for
>     file download cacheing, so `lodown::cachaca` can be replaced with
>     `download.file`  my current example requires a huge download, so
>     sort of painful to repeat but i'm pretty confident that's not the issue.
>
>
>     the archive::archive_extract() function unzips a (probably corrupt)
>     .RAR file and creates a text file with 80,937 lines.  this file is 4GB:
>
>         > file.size(infile)
>         [1] 4078192743 <tel:(407)%20819-2743>
>
>
>     i am pretty sure that nearly all of that 4GB is contained on a
>     single line in the file.  here's what happens when i create a file
>     connection and scan through..
>
>         > file_con <- file( infile , 'r' )
>         >
>         > first_80936_lines <- readLines( file_con , n = 80936 )
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "1000023930632009"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "36F2924009PAULO"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "AFONSO"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "BA11"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "00000"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "00"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "2924009PAULO"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "AFONSO"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "BA1111"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "467.20"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "346.10"
>         > scan( w , n = 1 , what = character() )
>         Read 1 item
>         [1] "414.40"
>         > scan( w , n = 1 , what = character() )
>         Error in scan(w, n = 1, what = character()) :
>           could not allocate memory (2048 Mb) in C function
>     'R_AllocStringBuffer'
>
>
>
>     making a huge single-line file does not reproduce the problem, i
>     think the embedded nuls have something to do with it--
>
>
>         # WARNING do not run with less than 64GB RAM
>         tf <- tempfile()
>         a <- rep( "a" , 1000000000 )
>         b <- paste( a , collapse = '' )
>         writeLines( b , tf ) ; rm( b ) ; gc()
>         d <- readLines( tf )
>
>
>
>     On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch
>     <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>
>         On 15/07/2017 7:35 AM, Anthony Damico wrote:
>
>             hello, the last line of the code below causes a segfault for
>             me on 3.4.1.
>             i think i should submit to https://bugs.r-project.org/
>             unless others have
>             advice?  thanks
>
>
>         Segfaults are usually worth reporting as bugs.  Try to come up
>         with a self-contained example, not using the lodown and archive
>         packages.  I imagine you can do this by uploading the file you
>         downloaded, or enough of a subset of it to trigger the
>         segfault.  If you can't do that, then likely the bug is with one
>         of those packages, not with R.
>
>         Duncan Murdoch
>
>
>
>
>
>
>             install.packages( "devtools" )
>             devtools::install_github("ajdamico/lodown")
>             devtools::install_github("jimhester/archive")
>
>
>             file_folder <- file.path( tempdir() , "file_folder" )
>
>             tf <- tempfile()
>
>             # large download!  cachaca saves on your local disk if
>             already downloaded
>             lodown::cachaca( '
>             http://download.inep.gov.br/microdados/microdados_enem2009.rar
>             <http://download.inep.gov.br/microdados/microdados_enem2009.rar>'
>             , tf , mode
>             = 'wb' )
>
>             archive::archive_extract( tf , dir = normalizePath(
>             file_folder ) )
>
>             unzipped_files <- list.files( file_folder , recursive = TRUE
>             , full.names =
>             TRUE  )
>
>             infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value
>             = TRUE )
>
>             # works
>             R.utils::countLines( infile )
>
>             # works with warning
>             my_file <- readLines( infile , skipNul = TRUE )
>
>             # crash
>             my_file <- readLines( infile )
>
>
>             # run just before crash
>             sessionInfo()
>             # R version 3.4.1 (2017-06-30)
>             # Platform: x86_64-w64-mingw32/x64 (64-bit)
>             # Running under: Windows 10 x64 (build 15063)
>
>             # Matrix products: default
>
>             # locale:
>             # [1] LC_COLLATE=English_United States.1252
>             # [2] LC_CTYPE=English_United States.1252
>             # [3] LC_MONETARY=English_United States.1252
>             # [4] LC_NUMERIC=C
>             # [5] LC_TIME=English_United States.1252
>
>             # attached base packages:
>             # [1] stats     graphics  grDevices utils     datasets
>             methods   base
>
>             # loaded via a namespace (and not attached):
>              # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>                withr_1.0.2
>              # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>             memoise_1.1.0
>              # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>                 lodown_0.1.0
>             # [13] R.utils_2.5.0      rlang_0.1.1
>             devtools_1.13.2    R.oo_1.21.0
>             # [17] archive_0.0.0.9000
>
>                     [[alternative HTML version deleted]]
>
>             ______________________________________________
>             R-help at r-project.org <mailto:R-help at r-project.org> mailing
>             list -- To UNSUBSCRIBE and more, see
>             https://stat.ethz.ch/mailman/listinfo/r-help
>             <https://stat.ethz.ch/mailman/listinfo/r-help>
>             PLEASE do read the posting guide
>             http://www.R-project.org/posting-guide.html
>             <http://www.R-project.org/posting-guide.html>
>             and provide commented, minimal, self-contained, reproducible
>             code.
>
>
>
>


From bgunter.4567 at gmail.com  Sat Jul 15 18:23:02 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Sat, 15 Jul 2017 09:23:02 -0700
Subject: [R] select from data frame
In-Reply-To: <75738441-23E0-4A39-A017-7F2657300425@comcast.net>
References: <563240903.959259.1500116466430.ref@mail.yahoo.com>
 <563240903.959259.1500116466430@mail.yahoo.com>
 <75738441-23E0-4A39-A017-7F2657300425@comcast.net>
Message-ID: <CAGxFJbRMr3Qs_Zfu63BJEJge332ha_aE776d+WVmfDuPm8m5TA@mail.gmail.com>

If I understand correctly, no looping (ave(), for()) or type casting
(as.character()) is needed -- indexing and matching suffice:

> with(df, ID[!ID %in% unique(ID[samples %in% c("B","C") ])])
[1] 3 3



Cheers,

Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jul 15, 2017 at 8:54 AM, David Winsemius <dwinsemius at comcast.net> wrote:
>
>> On Jul 15, 2017, at 4:01 AM, Andras Farkas via R-help <r-help at r-project.org> wrote:
>>
>> Dear All,
>>
>> wonder if you could please assist with the following
>>
>> df<-data.frame(ID=c(1,1,1,2,2,3,3,4,4,5,5),samples=c("A","B","C","A","C","A","D","C","B","A","C"))
>>
>> from this data frame the goal is to extract the value of 3 from the ID column based on the logic that the ID=3 in the data frame has NO row that would pair 3 with either "B", AND/OR "C" in the samples column...
>>
>
> This returns a vector that determines if either of those characters are in the character values of that factor column you created. Coercing to character is needed because leaving samples as a factor generated an invalid factor level warning and gave useless results.
>
>  with( df, ave( as.character(samples), ID, FUN=function(x) {!any(x %in% c("B","C"))}))
>  [1] "FALSE" "FALSE" "FALSE" "FALSE" "FALSE" "TRUE"  "TRUE"  "FALSE" "FALSE"
> [10] "FALSE" "FALSE"
>
> You can then use it to extract and consolidate to a single value (although wrapping with as.logical was needed because `ave` returned character class values):
>
>  unique( df$ID[ as.logical(   # fails without this since "FALSE" != FALSE
>                     with( df,
>                        ave( as.character(samples), ID, FUN=function(x) {!any(x %in% c("B","C"))})))
>               ] )
> #[1] 3
>
> The same sort of logic could also be constructed with a for-loop:
>
>> for (x in unique(df$ID) ) { if ( !any( df$samples[df$ID==x] %in% c("b","C")) ) print(x) }
> [1] 3
>
> Although you are warned that for-loops do not return values and you might need to make an assignment rather than just printing.
>
> --
>
> David Winsemius
> Alameda, CA, USA
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Sat Jul 15 22:14:14 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sat, 15 Jul 2017 13:14:14 -0700 (PDT)
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>

I am not able to reproduce this on a Linux platform:

#######################3
fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem 2009/DADOS_ENEM_2009.txt"
sessionInfo()
## R version 3.4.1 (2017-06-30)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 14.04.5 LTS
##
## Matrix products: default
## BLAS: /usr/lib/libblas/libblas.so.3.0
## LAPACK: /usr/lib/lapack/liblapack.so.3.0
##
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
##
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base
##
## loaded via a namespace (and not attached):
## [1] compiler_3.4.1
tools::md5sum( fn1 )
## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem 2009/DADOS_ENEM_2009.txt
##                                                "83e61c96092285b60d7bf6b0dbc7072e"
dat <- readLines( fn1 )
length( dat )
## [1] 4148721

No segfault occurs.

On Sat, 15 Jul 2017, Anthony Damico wrote:

> hi, i realized that the segfault happens on the text file in a new R
> session.  so, creating the segfault-generating text file requires a
> contributed package, but prompting the actual segfault does not -- pretty
> sure that means this is a base R bug?  submitted here:
> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully i am
> not doing something remarkably stupid.  the text file itself is 4GB so
> cannot upload it to bugzilla, and from the R_AllocStringBugger error in the
> previous message, i think most or all of it needs to be there to trigger
> the segfault.  thanks!
>
>
> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com> wrote:
>
>> hi, thanks Dr. Murdoch
>>
>>
>> i'd appreciate if anyone on r-help could help me narrow this down?  i
>> believe the segfault occurs because there's a single line with 4GB and also
>> embedded nuls, but i am not sure how to artificially construct that?
>>
>>
>> the lodown package can be removed from my example..  it is just for file
>> download cacheing, so `lodown::cachaca` can be replaced with
>> `download.file`  my current example requires a huge download, so sort of
>> painful to repeat but i'm pretty confident that's not the issue.
>>
>>
>> the archive::archive_extract() function unzips a (probably corrupt) .RAR
>> file and creates a text file with 80,937 lines.  this file is 4GB:
>>
>>    > file.size(infile)
>>     [1] 4078192743 <(407)%20819-2743>
>>
>>
>> i am pretty sure that nearly all of that 4GB is contained on a single line
>> in the file.  here's what happens when i create a file connection and scan
>> through..
>>
>>    > file_con <- file( infile , 'r' )
>>    >
>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "1000023930632009"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "36F2924009PAULO"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "AFONSO"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "BA11"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "00000"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "00"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "2924009PAULO"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "AFONSO"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "BA1111"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "467.20"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "346.10"
>>    > scan( w , n = 1 , what = character() )
>>     Read 1 item
>>     [1] "414.40"
>>    > scan( w , n = 1 , what = character() )
>>     Error in scan(w, n = 1, what = character()) :
>>       could not allocate memory (2048 Mb) in C function
>> 'R_AllocStringBuffer'
>>
>>
>>
>> making a huge single-line file does not reproduce the problem, i think the
>> embedded nuls have something to do with it--
>>
>>
>>     # WARNING do not run with less than 64GB RAM
>>     tf <- tempfile()
>>     a <- rep( "a" , 1000000000 )
>>     b <- paste( a , collapse = '' )
>>     writeLines( b , tf ) ; rm( b ) ; gc()
>>     d <- readLines( tf )
>>
>>
>>
>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
>> wrote:
>>
>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>>
>>>> hello, the last line of the code below causes a segfault for me on 3.4.1.
>>>> i think i should submit to https://bugs.r-project.org/  unless others
>>>> have
>>>> advice?  thanks
>>>>
>>>
>>> Segfaults are usually worth reporting as bugs.  Try to come up with a
>>> self-contained example, not using the lodown and archive packages.  I
>>> imagine you can do this by uploading the file you downloaded, or enough of
>>> a subset of it to trigger the segfault.  If you can't do that, then likely
>>> the bug is with one of those packages, not with R.
>>>
>>> Duncan Murdoch
>>>
>>>
>>>>
>>>>
>>>>
>>>>
>>>> install.packages( "devtools" )
>>>> devtools::install_github("ajdamico/lodown")
>>>> devtools::install_github("jimhester/archive")
>>>>
>>>>
>>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>>
>>>> tf <- tempfile()
>>>>
>>>> # large download!  cachaca saves on your local disk if already downloaded
>>>> lodown::cachaca( '
>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' , tf ,
>>>> mode
>>>> = 'wb' )
>>>>
>>>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>>>
>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>>> full.names =
>>>> TRUE  )
>>>>
>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>>>
>>>> # works
>>>> R.utils::countLines( infile )
>>>>
>>>> # works with warning
>>>> my_file <- readLines( infile , skipNul = TRUE )
>>>>
>>>> # crash
>>>> my_file <- readLines( infile )
>>>>
>>>>
>>>> # run just before crash
>>>> sessionInfo()
>>>> # R version 3.4.1 (2017-06-30)
>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>> # Running under: Windows 10 x64 (build 15063)
>>>>
>>>> # Matrix products: default
>>>>
>>>> # locale:
>>>> # [1] LC_COLLATE=English_United States.1252
>>>> # [2] LC_CTYPE=English_United States.1252
>>>> # [3] LC_MONETARY=English_United States.1252
>>>> # [4] LC_NUMERIC=C
>>>> # [5] LC_TIME=English_United States.1252
>>>>
>>>> # attached base packages:
>>>> # [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>
>>>> # loaded via a namespace (and not attached):
>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>>  withr_1.0.2
>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>>> memoise_1.1.0
>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>>> lodown_0.1.0
>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>>> R.oo_1.21.0
>>>> # [17] archive_0.0.0.9000
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>> ng-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>
>>>
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From murdoch.duncan at gmail.com  Sat Jul 15 22:14:58 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 15 Jul 2017 16:14:58 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
Message-ID: <3b0a81fb-9c8c-052b-3948-b793ca0dc513@gmail.com>

On 15/07/2017 11:33 AM, Anthony Damico wrote:
> hi, i realized that the segfault happens on the text file in a new R
> session.  so, creating the segfault-generating text file requires a
> contributed package, but prompting the actual segfault does not --
> pretty sure that means this is a base R bug?  submitted here:
> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully i
> am not doing something remarkably stupid.  the text file itself is 4GB
> so cannot upload it to bugzilla, and from the R_AllocStringBugger error
> in the previous message, i think most or all of it needs to be there to
> trigger the segfault.  thanks!

I don't want to download the big file or install the archive package. 
Could you run the code below on the bad file?  If you're right and it's 
only nulls that matter, this might allow me to create a file that 
triggers the bug.

f <-  # put the filename of the bad file here

con <- file(f, open="rb")
zeros <- numeric()
repeat {
   bytes <- readBin(con, "int", 1000000, size=1)
   zeros <- c(zeros, count + which(bytes == 0))
   count <- count + length(bytes)
   if (length(bytes) < 1000000) break
}
close(con)
cat("File length=", count, "\n")
cat("Nulls:\n")
zeros

Here's some code to recreate a file of the same length with nulls in the 
same places, and spaces everywhere else:

size <- count
f2 <- tempfile()
con <- file(f2, open="wb")
count <- 0
while (count < size) {
   nonzeros <- min(c(size - count, 1000000, zeros - 1))
   if (nonzeros) {
     writeBin(rep(32L, nonzeros), con, size = 1)
     count <- count + nonzeros
   }
   zeros <- zeros - nonzeros
   if (length(zeros) && min(zeros) == 1) {
     writeBin(0L, con, size = 1)
     count <- count + 1
     zeros <- zeros[-1] - 1
   }
}
close(con)

Duncan Murdoch


From bgunter.4567 at gmail.com  Sun Jul 16 00:05:25 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Sat, 15 Jul 2017 15:05:25 -0700
Subject: [R] select from data frame
In-Reply-To: <CAGxFJbRMr3Qs_Zfu63BJEJge332ha_aE776d+WVmfDuPm8m5TA@mail.gmail.com>
References: <563240903.959259.1500116466430.ref@mail.yahoo.com>
 <563240903.959259.1500116466430@mail.yahoo.com>
 <75738441-23E0-4A39-A017-7F2657300425@comcast.net>
 <CAGxFJbRMr3Qs_Zfu63BJEJge332ha_aE776d+WVmfDuPm8m5TA@mail.gmail.com>
Message-ID: <CAGxFJbSJs0DpegMWE0Z8Nyyx4yKeRhSbv7uX5+bMzBYpvXJG2w@mail.gmail.com>

...
and here is a slightly cleaner and more transparent way of doing the
same thing (setdiff() does the matching)

> with(df, setdiff(ID,ID[samples %in% c("B","C") ]))
[1] 3

-- Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jul 15, 2017 at 9:23 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> If I understand correctly, no looping (ave(), for()) or type casting
> (as.character()) is needed -- indexing and matching suffice:
>
>> with(df, ID[!ID %in% unique(ID[samples %in% c("B","C") ])])
> [1] 3 3
>
>
>
> Cheers,
>
> Bert
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sat, Jul 15, 2017 at 8:54 AM, David Winsemius <dwinsemius at comcast.net> wrote:
>>
>>> On Jul 15, 2017, at 4:01 AM, Andras Farkas via R-help <r-help at r-project.org> wrote:
>>>
>>> Dear All,
>>>
>>> wonder if you could please assist with the following
>>>
>>> df<-data.frame(ID=c(1,1,1,2,2,3,3,4,4,5,5),samples=c("A","B","C","A","C","A","D","C","B","A","C"))
>>>
>>> from this data frame the goal is to extract the value of 3 from the ID column based on the logic that the ID=3 in the data frame has NO row that would pair 3 with either "B", AND/OR "C" in the samples column...
>>>
>>
>> This returns a vector that determines if either of those characters are in the character values of that factor column you created. Coercing to character is needed because leaving samples as a factor generated an invalid factor level warning and gave useless results.
>>
>>  with( df, ave( as.character(samples), ID, FUN=function(x) {!any(x %in% c("B","C"))}))
>>  [1] "FALSE" "FALSE" "FALSE" "FALSE" "FALSE" "TRUE"  "TRUE"  "FALSE" "FALSE"
>> [10] "FALSE" "FALSE"
>>
>> You can then use it to extract and consolidate to a single value (although wrapping with as.logical was needed because `ave` returned character class values):
>>
>>  unique( df$ID[ as.logical(   # fails without this since "FALSE" != FALSE
>>                     with( df,
>>                        ave( as.character(samples), ID, FUN=function(x) {!any(x %in% c("B","C"))})))
>>               ] )
>> #[1] 3
>>
>> The same sort of logic could also be constructed with a for-loop:
>>
>>> for (x in unique(df$ID) ) { if ( !any( df$samples[df$ID==x] %in% c("b","C")) ) print(x) }
>> [1] 3
>>
>> Although you are warned that for-loops do not return values and you might need to make an assignment rather than just printing.
>>
>> --
>>
>> David Winsemius
>> Alameda, CA, USA
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Sun Jul 16 00:29:15 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sat, 15 Jul 2017 15:29:15 -0700 (PDT)
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
Message-ID: <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>

I am not able to reproduce your segfault on a Windows 7 platform either:

##########################
fn1 <- "d:/DADOS_ENEM_2009.txt"
sessionInfo()
## R version 3.4.1 (2017-06-30)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 7 x64 (build 7601) Service Pack 1
##
## Matrix products: default
##
## locale:
## [1] LC_COLLATE=English_United States.1252
## [2] LC_CTYPE=English_United States.1252
## [3] LC_MONETARY=English_United States.1252
## [4] LC_NUMERIC=C
## [5] LC_TIME=English_United States.1252
##
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base
##
## loaded via a namespace (and not attached):
## [1] compiler_3.4.1
tools::md5sum( fn1 )
##             d:/DADOS_ENEM_2009.txt
## "83e61c96092285b60d7bf6b0dbc7072e"
dat <- readLines( fn1 )
length( dat )
## [1] 4148721


On Sat, 15 Jul 2017, Jeff Newmiller wrote:

> I am not able to reproduce this on a Linux platform:
>
> #######################3
> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem 
> 2009/DADOS_ENEM_2009.txt"
> sessionInfo()
> ## R version 3.4.1 (2017-06-30)
> ## Platform: x86_64-pc-linux-gnu (64-bit)
> ## Running under: Ubuntu 14.04.5 LTS
> ##
> ## Matrix products: default
> ## BLAS: /usr/lib/libblas/libblas.so.3.0
> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
> ##
> ## locale:
> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> ##
> ## attached base packages:
> ## [1] stats     graphics  grDevices utils     datasets  methods   base
> ##
> ## loaded via a namespace (and not attached):
> ## [1] compiler_3.4.1
> tools::md5sum( fn1 )
> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem 2009/DADOS_ENEM_2009.txt
> ##                                                "83e61c96092285b60d7bf6b0dbc7072e"
> dat <- readLines( fn1 )
> length( dat )
> ## [1] 4148721
>
> No segfault occurs.
>
> On Sat, 15 Jul 2017, Anthony Damico wrote:
>
>> hi, i realized that the segfault happens on the text file in a new R
>> session.  so, creating the segfault-generating text file requires a
>> contributed package, but prompting the actual segfault does not -- pretty
>> sure that means this is a base R bug?  submitted here:
>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully i am
>> not doing something remarkably stupid.  the text file itself is 4GB so
>> cannot upload it to bugzilla, and from the R_AllocStringBugger error in the
>> previous message, i think most or all of it needs to be there to trigger
>> the segfault.  thanks!
>> 
>> 
>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com> 
>> wrote:
>> 
>>> hi, thanks Dr. Murdoch
>>> 
>>> 
>>> i'd appreciate if anyone on r-help could help me narrow this down?  i
>>> believe the segfault occurs because there's a single line with 4GB and 
>>> also
>>> embedded nuls, but i am not sure how to artificially construct that?
>>> 
>>> 
>>> the lodown package can be removed from my example..  it is just for file
>>> download cacheing, so `lodown::cachaca` can be replaced with
>>> `download.file`  my current example requires a huge download, so sort of
>>> painful to repeat but i'm pretty confident that's not the issue.
>>> 
>>> 
>>> the archive::archive_extract() function unzips a (probably corrupt) .RAR
>>> file and creates a text file with 80,937 lines.  this file is 4GB:
>>>
>>>    > file.size(infile)
>>>     [1] 4078192743 <(407)%20819-2743>
>>> 
>>> 
>>> i am pretty sure that nearly all of that 4GB is contained on a single line
>>> in the file.  here's what happens when i create a file connection and scan
>>> through..
>>>
>>>    > file_con <- file( infile , 'r' )
>>>    >
>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "1000023930632009"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "36F2924009PAULO"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "AFONSO"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "BA11"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "00000"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "00"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "2924009PAULO"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "AFONSO"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "BA1111"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "467.20"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "346.10"
>>>    > scan( w , n = 1 , what = character() )
>>>     Read 1 item
>>>     [1] "414.40"
>>>    > scan( w , n = 1 , what = character() )
>>>     Error in scan(w, n = 1, what = character()) :
>>>       could not allocate memory (2048 Mb) in C function
>>> 'R_AllocStringBuffer'
>>> 
>>> 
>>> 
>>> making a huge single-line file does not reproduce the problem, i think the
>>> embedded nuls have something to do with it--
>>> 
>>>
>>>     # WARNING do not run with less than 64GB RAM
>>>     tf <- tempfile()
>>>     a <- rep( "a" , 1000000000 )
>>>     b <- paste( a , collapse = '' )
>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>>>     d <- readLines( tf )
>>> 
>>> 
>>> 
>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
>>> wrote:
>>> 
>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>>> 
>>>>> hello, the last line of the code below causes a segfault for me on 
>>>>> 3.4.1.
>>>>> i think i should submit to https://bugs.r-project.org/  unless others
>>>>> have
>>>>> advice?  thanks
>>>>> 
>>>> 
>>>> Segfaults are usually worth reporting as bugs.  Try to come up with a
>>>> self-contained example, not using the lodown and archive packages.  I
>>>> imagine you can do this by uploading the file you downloaded, or enough 
>>>> of
>>>> a subset of it to trigger the segfault.  If you can't do that, then 
>>>> likely
>>>> the bug is with one of those packages, not with R.
>>>> 
>>>> Duncan Murdoch
>>>> 
>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> install.packages( "devtools" )
>>>>> devtools::install_github("ajdamico/lodown")
>>>>> devtools::install_github("jimhester/archive")
>>>>> 
>>>>> 
>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>>> 
>>>>> tf <- tempfile()
>>>>> 
>>>>> # large download!  cachaca saves on your local disk if already 
>>>>> downloaded
>>>>> lodown::cachaca( '
>>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' , tf ,
>>>>> mode
>>>>> = 'wb' )
>>>>> 
>>>>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>>>> 
>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>>>> full.names =
>>>>> TRUE  )
>>>>> 
>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>>>> 
>>>>> # works
>>>>> R.utils::countLines( infile )
>>>>> 
>>>>> # works with warning
>>>>> my_file <- readLines( infile , skipNul = TRUE )
>>>>> 
>>>>> # crash
>>>>> my_file <- readLines( infile )
>>>>> 
>>>>> 
>>>>> # run just before crash
>>>>> sessionInfo()
>>>>> # R version 3.4.1 (2017-06-30)
>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>>> # Running under: Windows 10 x64 (build 15063)
>>>>> 
>>>>> # Matrix products: default
>>>>> 
>>>>> # locale:
>>>>> # [1] LC_COLLATE=English_United States.1252
>>>>> # [2] LC_CTYPE=English_United States.1252
>>>>> # [3] LC_MONETARY=English_United States.1252
>>>>> # [4] LC_NUMERIC=C
>>>>> # [5] LC_TIME=English_United States.1252
>>>>> 
>>>>> # attached base packages:
>>>>> # [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>> 
>>>>> # loaded via a namespace (and not attached):
>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>>>  withr_1.0.2
>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>>>> memoise_1.1.0
>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>>>> lodown_0.1.0
>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>>>> R.oo_1.21.0
>>>>> # [17] archive_0.0.0.9000
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>> 
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>>> ng-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>> 
>>>>> 
>>>> 
>>> 
>>
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                      Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From wdunlap at tibco.com  Sun Jul 16 01:28:03 2017
From: wdunlap at tibco.com (William Dunlap)
Date: Sat, 15 Jul 2017 16:28:03 -0700
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
Message-ID: <CAF8bMcb5WFz4VeLJhBHVtCswS7EgXfjHmFSthp22pNnEuHxW8g@mail.gmail.com>

I see the problem on Windows 10, R-3.4.0, R.exe.  It is not compiled for
debugging but gdb gives some information when I attach the debugger after
the 'R..has stopped working' popup appears.  I don't know how reliable it
is:

(gdb) info threads
  Id   Target Id         Frame
* 4    Thread 11848.0x1500 0x00007ffe38dc8861 in ntdll!DbgBreakPoint ()
from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
  3    Thread 11848.0x2e90 0x00007ffe38dc87e4 in
ntdll!ZwWaitForWorkViaWorkerFactory ()
   from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
  2    Thread 11848.0x3618 0x00007ffe38dc5154 in
ntdll!ZwWaitForSingleObject ()
   from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
  1    Thread 11848.0x1808 0x000000006c77de3b in Rf_con_pushback () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
(gdb) thread 1
[Switching to thread 1 (Thread 11848.0x1808)]
#0  0x000000006c77de3b in Rf_con_pushback () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
(gdb) where
#0  0x000000006c77de3b in Rf_con_pushback () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#1  0x000000006c7d8919 in R_initAssignSymbols () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#2  0x000000006c7ef961 in Rf_eval () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#3  0x000000006c7f1b70 in R_cmpfun1 () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#4  0x000000006c7f1ef2 in Rf_applyClosure () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#5  0x000000006c7efaf7 in Rf_eval () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#6  0x000000006c7f3816 in R_execMethod () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#7  0x000000006c7efcdf in Rf_eval () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#8  0x000000006c81053c in Rf_ReplIteration () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#9  0x000000006c810902 in Rf_ReplIteration () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#10 0x000000006c810992 in run_Rmainloop () from
/cygdrive/c/R/R-3.4.0/bin/x64/R.dll
#11 0x000000000040171c in ?? ()
#12 0x000000000040155a in ?? ()
#13 0x00000000004013e8 in ?? ()
#14 0x000000000040151b in ?? ()
#15 0x00007ffe37868102 in KERNEL32!BaseThreadInitThunk () from
/cygdrive/c/WINDOWS/system32/KERNEL32.DLL
#16 0x00007ffe38d7c5b4 in ntdll!RtlUserThreadStart () from
/cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
#17 0x0000000000000000 in ?? ()
Backtrace stopped: previous frame inner to this frame (corrupt stack?)
(gdb)

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Sat, Jul 15, 2017 at 3:29 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> I am not able to reproduce your segfault on a Windows 7 platform either:
>
> ##########################
> fn1 <- "d:/DADOS_ENEM_2009.txt"
> sessionInfo()
> ## R version 3.4.1 (2017-06-30)
> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
> ##
> ## Matrix products: default
> ##
> ## locale:
> ## [1] LC_COLLATE=English_United States.1252
> ## [2] LC_CTYPE=English_United States.1252
> ## [3] LC_MONETARY=English_United States.1252
> ## [4] LC_NUMERIC=C
> ## [5] LC_TIME=English_United States.1252
> ##
> ## attached base packages:
> ## [1] stats     graphics  grDevices utils     datasets  methods   base
> ##
> ## loaded via a namespace (and not attached):
> ## [1] compiler_3.4.1
> tools::md5sum( fn1 )
> ##             d:/DADOS_ENEM_2009.txt
> ## "83e61c96092285b60d7bf6b0dbc7072e"
> dat <- readLines( fn1 )
> length( dat )
> ## [1] 4148721
>
>
> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
>
> I am not able to reproduce this on a Linux platform:
>>
>> #######################3
>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>> 2009/DADOS_ENEM_2009.txt"
>> sessionInfo()
>> ## R version 3.4.1 (2017-06-30)
>> ## Platform: x86_64-pc-linux-gnu (64-bit)
>> ## Running under: Ubuntu 14.04.5 LTS
>> ##
>> ## Matrix products: default
>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
>> ##
>> ## locale:
>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> ##
>> ## attached base packages:
>> ## [1] stats     graphics  grDevices utils     datasets  methods   base
>> ##
>> ## loaded via a namespace (and not attached):
>> ## [1] compiler_3.4.1
>> tools::md5sum( fn1 )
>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>> 2009/DADOS_ENEM_2009.txt
>> ##
>> "83e61c96092285b60d7bf6b0dbc7072e"
>> dat <- readLines( fn1 )
>> length( dat )
>> ## [1] 4148721
>>
>> No segfault occurs.
>>
>> On Sat, 15 Jul 2017, Anthony Damico wrote:
>>
>> hi, i realized that the segfault happens on the text file in a new R
>>> session.  so, creating the segfault-generating text file requires a
>>> contributed package, but prompting the actual segfault does not -- pretty
>>> sure that means this is a base R bug?  submitted here:
>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully i
>>> am
>>> not doing something remarkably stupid.  the text file itself is 4GB so
>>> cannot upload it to bugzilla, and from the R_AllocStringBugger error in
>>> the
>>> previous message, i think most or all of it needs to be there to trigger
>>> the segfault.  thanks!
>>>
>>>
>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com>
>>> wrote:
>>>
>>> hi, thanks Dr. Murdoch
>>>>
>>>>
>>>> i'd appreciate if anyone on r-help could help me narrow this down?  i
>>>> believe the segfault occurs because there's a single line with 4GB and
>>>> also
>>>> embedded nuls, but i am not sure how to artificially construct that?
>>>>
>>>>
>>>> the lodown package can be removed from my example..  it is just for file
>>>> download cacheing, so `lodown::cachaca` can be replaced with
>>>> `download.file`  my current example requires a huge download, so sort of
>>>> painful to repeat but i'm pretty confident that's not the issue.
>>>>
>>>>
>>>> the archive::archive_extract() function unzips a (probably corrupt) .RAR
>>>> file and creates a text file with 80,937 lines.  this file is 4GB:
>>>>
>>>>    > file.size(infile)
>>>>     [1] 4078192743 <(407)%20819-2743>
>>>>
>>>>
>>>> i am pretty sure that nearly all of that 4GB is contained on a single
>>>> line
>>>> in the file.  here's what happens when i create a file connection and
>>>> scan
>>>> through..
>>>>
>>>>    > file_con <- file( infile , 'r' )
>>>>    >
>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "1000023930632009"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "36F2924009PAULO"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "AFONSO"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "BA11"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "00000"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "00"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "2924009PAULO"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "AFONSO"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "BA1111"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "467.20"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "346.10"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "414.40"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Error in scan(w, n = 1, what = character()) :
>>>>       could not allocate memory (2048 Mb) in C function
>>>> 'R_AllocStringBuffer'
>>>>
>>>>
>>>>
>>>> making a huge single-line file does not reproduce the problem, i think
>>>> the
>>>> embedded nuls have something to do with it--
>>>>
>>>>
>>>>     # WARNING do not run with less than 64GB RAM
>>>>     tf <- tempfile()
>>>>     a <- rep( "a" , 1000000000 )
>>>>     b <- paste( a , collapse = '' )
>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>>>>     d <- readLines( tf )
>>>>
>>>>
>>>>
>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
>>>> murdoch.duncan at gmail.com>
>>>> wrote:
>>>>
>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>>>>
>>>>> hello, the last line of the code below causes a segfault for me on
>>>>>> 3.4.1.
>>>>>> i think i should submit to https://bugs.r-project.org/  unless others
>>>>>> have
>>>>>> advice?  thanks
>>>>>>
>>>>>>
>>>>> Segfaults are usually worth reporting as bugs.  Try to come up with a
>>>>> self-contained example, not using the lodown and archive packages.  I
>>>>> imagine you can do this by uploading the file you downloaded, or
>>>>> enough of
>>>>> a subset of it to trigger the segfault.  If you can't do that, then
>>>>> likely
>>>>> the bug is with one of those packages, not with R.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>
>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> install.packages( "devtools" )
>>>>>> devtools::install_github("ajdamico/lodown")
>>>>>> devtools::install_github("jimhester/archive")
>>>>>>
>>>>>>
>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>>>>
>>>>>> tf <- tempfile()
>>>>>>
>>>>>> # large download!  cachaca saves on your local disk if already
>>>>>> downloaded
>>>>>> lodown::cachaca( '
>>>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' , tf
>>>>>> ,
>>>>>> mode
>>>>>> = 'wb' )
>>>>>>
>>>>>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>>>>>
>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>>>>> full.names =
>>>>>> TRUE  )
>>>>>>
>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>>>>>
>>>>>> # works
>>>>>> R.utils::countLines( infile )
>>>>>>
>>>>>> # works with warning
>>>>>> my_file <- readLines( infile , skipNul = TRUE )
>>>>>>
>>>>>> # crash
>>>>>> my_file <- readLines( infile )
>>>>>>
>>>>>>
>>>>>> # run just before crash
>>>>>> sessionInfo()
>>>>>> # R version 3.4.1 (2017-06-30)
>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>>>> # Running under: Windows 10 x64 (build 15063)
>>>>>>
>>>>>> # Matrix products: default
>>>>>>
>>>>>> # locale:
>>>>>> # [1] LC_COLLATE=English_United States.1252
>>>>>> # [2] LC_CTYPE=English_United States.1252
>>>>>> # [3] LC_MONETARY=English_United States.1252
>>>>>> # [4] LC_NUMERIC=C
>>>>>> # [5] LC_TIME=English_United States.1252
>>>>>>
>>>>>> # attached base packages:
>>>>>> # [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>
>>>>>> # loaded via a namespace (and not attached):
>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>>>>  withr_1.0.2
>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>>>>> memoise_1.1.0
>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>>>>> lodown_0.1.0
>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>>>>> R.oo_1.21.0
>>>>>> # [17] archive_0.0.0.9000
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>>>> ng-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>> ng-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>> ------------------------------------------------------------
>> ---------------
>> Jeff Newmiller                        The     .....       .....  Go
>> Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>> Go...
>>                                      Live:   OO#.. Dead: OO#..  Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#.
>> rocks...1k
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> ------------------------------------------------------------
> ---------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
> Go...
>                                       Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posti
> ng-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From chocold12 at gmail.com  Sun Jul 16 07:43:01 2017
From: chocold12 at gmail.com (lily li)
Date: Sat, 15 Jul 2017 23:43:01 -0600
Subject: [R] About doing figures
Message-ID: <CAN5afy8iJ4y1ktGT-+mtk241j5J3T+zZJ+HjtEhZGWtSp4BCXw@mail.gmail.com>

Hi R users,

I still have the problem about plotting. I wanted to put the datasets on
one figure, x-axis represents values B, y-axis represents values C, while
different colors label column A. Each record uses a circle on the figure,
while hollow circles represent DF=1 and solid circles represent DF=2. I put
my code below, but the A labels do not correspond to the true record, so I
don't know what is the problem. Thanks for your help.

dfm
dfm1= subset(dfm, DF==1)
dfm2= subset(dfm, DF==2)
plot(c(15:30),seq(from=0,to=60,by=4),pch=19,col=NULL,xlab='Value
B',ylab='Value C')
Color = as.factor(dfm1$A)
colordist = grDevices::colors()[grep('gr(a|e)y', grDevices::colors(),
invert = T)] # for unique colors
Color.unq = sample(colordist,length(Color))

points(dfm1[,3],dfm1[,4],col=Color.unq,pch=1)
points(dfm2[,3],dfm2[,4],col=Color.unq,pch=19)
legend('bottom',as.character(Color.unq),col=Color.unq,lwd=rep(2,length(Color.unq)),cex=.6,ncol=5)
legend('bottom',as.character(Color),col=Color.unq,lwd=3,cex=.6,ncol=5,text.width=c(9.55,9.6,9.55))

dfm is the dataframe below.

DF   A  B  C
1     65 21 54
1     66 23 55
1     54 24 56
1     44 23 53
1     67 22 52
1     66 21 50
1     45 20 51
1     56 19 57
1     40 25 58
1     39 24 53
2     65 25 52
2     66 20 50
2     54 21 48
2     44 30 49
2     67 27 50
2     66 20 30
2     45 25 56
2     56 14 51
2     40 29 48
2     39 29 23

	[[alternative HTML version deleted]]


From michael.reed at reagan.com  Sun Jul 16 05:49:14 2017
From: michael.reed at reagan.com (michael.reed at reagan.com)
Date: Sat, 15 Jul 2017 22:49:14 -0500 (CDT)
Subject: [R]  Arranging column data to create plots
Message-ID: <1500176954.167624315@webmail.reagan.com>

Dear All,

I need some help arranging data that was imported.

The imported data frame looks something like this (the actual file is huge, so this is example data)

DF:
IDKey  X1  Y1  X2  Y2  X3  Y3  X4  Y4
Name1  21  15  25  10
Name2  15  18  35  24  27  45
Name3  17  21  30  22  15  40  32  55 

I would like to create a new data frame with the following

NewDF:
IDKey   X   Y
Name1  21  15
Name1  25  10
Name2  15  18
Name2  35  24
Name2  27  45
Name3  17  21
Name3  30  22
Name3  15  40
Name3  32  55

With the data like this I think I can do the following

ggplot(NewDF, aes(x=X, y=Y, color=IDKey) + geom_line

and get 3 lines with the various number of points.

The point is that each of the XY pairs is a data point tied to NameX.  I would like to rearrange the data so I can plot the points/lines by the IDKey.  There will be at least 2 points, but the number of points for each IDKey can be as many as 4.

I have tried using the gather() function from the tidyverse package, but I can't make it work.  The issue is that I believe I need two separate gather statements (one for X, another for Y) to consolidate the data.  This causes the pairs to not stay together and the data becomes jumbled.

Thoughts
Thanks for your help

Michael E. Reed



From kscng at connect.hku.hk  Sun Jul 16 08:31:37 2017
From: kscng at connect.hku.hk (Ng, Kelvin Sai-cheong)
Date: Sun, 16 Jul 2017 14:31:37 +0800
Subject: [R] How to formulate quadratic function with interaction terms
 for the PLS fitting model?
In-Reply-To: <CAGxFJbRp9LcLs0h0MWuz8nHYE5fJuHJbH=jZNV9qdwPewpw96w@mail.gmail.com>
References: <CA+iG1-6MBiLpZ5EcT6iTg-9=K2wR=Wz=AroBi71MoHTBw1qYZw@mail.gmail.com>
 <CAGxFJbRp9LcLs0h0MWuz8nHYE5fJuHJbH=jZNV9qdwPewpw96w@mail.gmail.com>
Message-ID: <CAM+VLr3=-3KLg0z5D3MOWjWybHcG=PQNi=S=aoft+NKi0g9jHw@mail.gmail.com>

I see.  Thank you for the help.


On Thu, Jul 13, 2017 at 10:43 PM, Bert Gunter <bgunter.4567 at gmail.com>
wrote:

> Below.
>
> -- Bert
> Bert Gunter
>
>
>
> On Thu, Jul 13, 2017 at 3:07 AM, Luigi Biagini <luigi.biagini at gmail.com>
> wrote:
> > I have two ideas about it.
> >
> > 1-
> > i) Entering variables in quadratic form is done with the command I
> > (variable ^ 2) -
> > plsr (octane ~ NIR + I (nir ^ 2), ncomp = 10, data = gasTrain,
> validation =
> > "LOO"
> > You could also use a new variable NIR_sq <- (NIR) ^ 2
> >
> > ii) To insert a square variable, use syntax I (x ^ 2) - it is very
> > important to insert I before the parentheses.
>
> True, but better I believe: see ?poly.
> e.g. poly(cbind(x1,x2,x3), degree = 2, raw = TRUE) is a full quadratic
> polynomial in x1,x2,x3 .
>
>
> >
> > iii) If you want to make the interaction between x and x ^ 2 use the
> > command ":" -> x: I(x ^ 2)
> >
> > iv) For multiple interactions between x and x ^ 2 use the command "*" ->
> x
> > *I (x ^ 2)
> >
> > i) plsr (octane ~ NIR + NIR_sq, ncomp = 10, data = gasTrain, validation =
> > "LOO") I (x ^ 2)
> > ii)p lsr (octane ~ NIR + I(NIR^2), ncomp = 10, data = gasTrain,
> validation
> > = "LOO") I (x ^ 2)
> > iii)p lsr (octane ~ NIR : I(NIR^2), ncomp = 10, data = gasTrain,
> validation
> > = "LOO") I (x ^ 2)
> > iv)p lsr (octane ~ NIR * I(NIR^2), ncomp = 10, data = gasTrain,
> validation
> > = "LOO") I (x ^ 2)
> >
> > 2 - For your regression, did you plan to use MARS instead of PLS?
> >
> >
> >
> >
> > Dear all,
> >> I am using the pls package of R to perform partial least square on a
> set of
> >> multivariate data.  Instead of fitting a linear model, I want to fit my
> >> data with a quadratic function with interaction terms.  But I am not
> sure
> >> how.  I will use an example to illustrate my problem:
> >> Following the example in the PLS manual:
> >> ## Read data
> >>  data(gasoline)
> >> gasTrain <- gasoline[1:50,]
> >> ## Perform PLS
> >> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation =
> "LOO")
> >> where octane ~ NIR is the model that this example is fitting with.
> >> NIR is a collective of variables, i.e. NIR spectra consists of 401
> diffuse
> >> reflectance measurements from 900 to 1700 nm.
> >> Instead of fitting with octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] +
> ...
> >> I want to fit the data with:
> >> octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
> >> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
> >> i.e. quadratic with interaction terms.
> >> But I don't know how to formulate this.
> >> May I have some help please?
> >> Thanks,
> >> Kelvin
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ulrik.stervbo at gmail.com  Sun Jul 16 10:34:09 2017
From: ulrik.stervbo at gmail.com (Ulrik Stervbo)
Date: Sun, 16 Jul 2017 08:34:09 +0000
Subject: [R] Arranging column data to create plots
In-Reply-To: <1500176954.167624315@webmail.reagan.com>
References: <1500176954.167624315@webmail.reagan.com>
Message-ID: <CAKVAULMyT+hEqSarzDKEKus2GXP8x17-E2n8JW+NJ0QxG7Kj4Q@mail.gmail.com>

Hi Michael,

Try gather from the tidyr package

HTH
Ulrik

Michael Reed via R-help <r-help at r-project.org> schrieb am So., 16. Juli
2017, 10:19:

> Dear All,
>
> I need some help arranging data that was imported.
>
> The imported data frame looks something like this (the actual file is
> huge, so this is example data)
>
> DF:
> IDKey  X1  Y1  X2  Y2  X3  Y3  X4  Y4
> Name1  21  15  25  10
> Name2  15  18  35  24  27  45
> Name3  17  21  30  22  15  40  32  55
>
> I would like to create a new data frame with the following
>
> NewDF:
> IDKey   X   Y
> Name1  21  15
> Name1  25  10
> Name2  15  18
> Name2  35  24
> Name2  27  45
> Name3  17  21
> Name3  30  22
> Name3  15  40
> Name3  32  55
>
> With the data like this I think I can do the following
>
> ggplot(NewDF, aes(x=X, y=Y, color=IDKey) + geom_line
>
> and get 3 lines with the various number of points.
>
> The point is that each of the XY pairs is a data point tied to NameX.  I
> would like to rearrange the data so I can plot the points/lines by the
> IDKey.  There will be at least 2 points, but the number of points for each
> IDKey can be as many as 4.
>
> I have tried using the gather() function from the tidyverse package, but I
> can't make it work.  The issue is that I believe I need two separate gather
> statements (one for X, another for Y) to consolidate the data.  This causes
> the pairs to not stay together and the data becomes jumbled.
>
> Thoughts
> Thanks for your help
>
> Michael E. Reed
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drjimlemon at gmail.com  Sun Jul 16 10:50:00 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Sun, 16 Jul 2017 18:50:00 +1000
Subject: [R] About doing figures
In-Reply-To: <CAN5afy8iJ4y1ktGT-+mtk241j5J3T+zZJ+HjtEhZGWtSp4BCXw@mail.gmail.com>
References: <CAN5afy8iJ4y1ktGT-+mtk241j5J3T+zZJ+HjtEhZGWtSp4BCXw@mail.gmail.com>
Message-ID: <CA+8X3fWQMRgsqeqz_V=P9wZ=ZK=fAo9BAU61e8OPY206wdQf9Q@mail.gmail.com>

Hi lily,
As I have no idea of what the "true record" is, I can only guess.
Maybe this will help:

# get some fairly distinct colors
rainbow_colors<-rainbow(9)
# this should sort the numbers in dfm$A
dfm$Acolor<-factor(dfm$A)
plot(dfm$B,dfm$C,pch=ifelse(dfm$DF==1,1,19),
 col=rainbow_colors[as.numeric(dfm$Acolor)])
legend("bottom",legend=sort(unique(dfm$A)),
 fill=rainbow_colors)
legend(25,35,c("DF=1","DF=2"),pch=c(1,19))

Jim


On Sun, Jul 16, 2017 at 3:43 PM, lily li <chocold12 at gmail.com> wrote:
> Hi R users,
>
> I still have the problem about plotting. I wanted to put the datasets on
> one figure, x-axis represents values B, y-axis represents values C, while
> different colors label column A. Each record uses a circle on the figure,
> while hollow circles represent DF=1 and solid circles represent DF=2. I put
> my code below, but the A labels do not correspond to the true record, so I
> don't know what is the problem. Thanks for your help.
>
> dfm
> dfm1= subset(dfm, DF==1)
> dfm2= subset(dfm, DF==2)
> plot(c(15:30),seq(from=0,to=60,by=4),pch=19,col=NULL,xlab='Value
> B',ylab='Value C')
> Color = as.factor(dfm1$A)
> colordist = grDevices::colors()[grep('gr(a|e)y', grDevices::colors(),
> invert = T)] # for unique colors
> Color.unq = sample(colordist,length(Color))
>
> points(dfm1[,3],dfm1[,4],col=Color.unq,pch=1)
> points(dfm2[,3],dfm2[,4],col=Color.unq,pch=19)
> legend('bottom',as.character(Color.unq),col=Color.unq,lwd=rep(2,length(Color.unq)),cex=.6,ncol=5)
> legend('bottom',as.character(Color),col=Color.unq,lwd=3,cex=.6,ncol=5,text.width=c(9.55,9.6,9.55))
>
> dfm is the dataframe below.
>
> DF   A  B  C
> 1     65 21 54
> 1     66 23 55
> 1     54 24 56
> 1     44 23 53
> 1     67 22 52
> 1     66 21 50
> 1     45 20 51
> 1     56 19 57
> 1     40 25 58
> 1     39 24 53
> 2     65 25 52
> 2     66 20 50
> 2     54 21 48
> 2     44 30 49
> 2     67 27 50
> 2     66 20 30
> 2     45 25 56
> 2     56 14 51
> 2     40 29 48
> 2     39 29 23
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ajdamico at gmail.com  Sun Jul 16 12:17:19 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sun, 16 Jul 2017 06:17:19 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <3b0a81fb-9c8c-052b-3948-b793ca0dc513@gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <3b0a81fb-9c8c-052b-3948-b793ca0dc513@gmail.com>
Message-ID: <CAOwvMDzUEJg7KHYqLmcjWktMVXZ5EemznQoRo_uW8sPbcDN_iw@mail.gmail.com>

thank you for taking the time to write this.  i set it running last night
and it's still going -- if it doesn't finish by tomorrow, i will try to
find a site to host the problem file and add that link to the bug report so
the archive package can be avoided at least.  i'm sorry for the bother

On Sat, Jul 15, 2017 at 4:14 PM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 15/07/2017 11:33 AM, Anthony Damico wrote:
>
>> hi, i realized that the segfault happens on the text file in a new R
>> session.  so, creating the segfault-generating text file requires a
>> contributed package, but prompting the actual segfault does not --
>> pretty sure that means this is a base R bug?  submitted here:
>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully i
>> am not doing something remarkably stupid.  the text file itself is 4GB
>> so cannot upload it to bugzilla, and from the R_AllocStringBugger error
>> in the previous message, i think most or all of it needs to be there to
>> trigger the segfault.  thanks!
>>
>
> I don't want to download the big file or install the archive package.
> Could you run the code below on the bad file?  If you're right and it's
> only nulls that matter, this might allow me to create a file that triggers
> the bug.
>
> f <-  # put the filename of the bad file here
>
> con <- file(f, open="rb")
> zeros <- numeric()
> repeat {
>   bytes <- readBin(con, "int", 1000000, size=1)
>   zeros <- c(zeros, count + which(bytes == 0))
>   count <- count + length(bytes)
>   if (length(bytes) < 1000000) break
> }
> close(con)
> cat("File length=", count, "\n")
> cat("Nulls:\n")
> zeros
>
> Here's some code to recreate a file of the same length with nulls in the
> same places, and spaces everywhere else:
>
> size <- count
> f2 <- tempfile()
> con <- file(f2, open="wb")
> count <- 0
> while (count < size) {
>   nonzeros <- min(c(size - count, 1000000, zeros - 1))
>   if (nonzeros) {
>     writeBin(rep(32L, nonzeros), con, size = 1)
>     count <- count + nonzeros
>   }
>   zeros <- zeros - nonzeros
>   if (length(zeros) && min(zeros) == 1) {
>     writeBin(0L, con, size = 1)
>     count <- count + 1
>     zeros <- zeros[-1] - 1
>   }
> }
> close(con)
>
> Duncan Murdoch
>
>
>
>

	[[alternative HTML version deleted]]


From ajdamico at gmail.com  Sun Jul 16 12:21:21 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sun, 16 Jul 2017 06:21:21 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
Message-ID: <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>

hi, thank you for attempting this. it looks like your unix machine unzipped
the txt file without corruption -- if you copied over the same txt file to
windows 7, i don't think that would reproduce the problem?  i think it
needs to be the corrupted text file where   R.utils::countLines( txtfile
)   gives 809367.  i am able to reproduce on two distinct windows machines
but no guarantee i'm not doing something dumb

On Sat, Jul 15, 2017 at 6:29 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> I am not able to reproduce your segfault on a Windows 7 platform either:
>
> ##########################
> fn1 <- "d:/DADOS_ENEM_2009.txt"
> sessionInfo()
> ## R version 3.4.1 (2017-06-30)
> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
> ##
> ## Matrix products: default
> ##
> ## locale:
> ## [1] LC_COLLATE=English_United States.1252
> ## [2] LC_CTYPE=English_United States.1252
> ## [3] LC_MONETARY=English_United States.1252
> ## [4] LC_NUMERIC=C
> ## [5] LC_TIME=English_United States.1252
> ##
> ## attached base packages:
> ## [1] stats     graphics  grDevices utils     datasets  methods   base
> ##
> ## loaded via a namespace (and not attached):
> ## [1] compiler_3.4.1
> tools::md5sum( fn1 )
> ##             d:/DADOS_ENEM_2009.txt
> ## "83e61c96092285b60d7bf6b0dbc7072e"
> dat <- readLines( fn1 )
> length( dat )
> ## [1] 4148721
>
>
> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
>
> I am not able to reproduce this on a Linux platform:
>>
>> #######################3
>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>> 2009/DADOS_ENEM_2009.txt"
>> sessionInfo()
>> ## R version 3.4.1 (2017-06-30)
>> ## Platform: x86_64-pc-linux-gnu (64-bit)
>> ## Running under: Ubuntu 14.04.5 LTS
>> ##
>> ## Matrix products: default
>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
>> ##
>> ## locale:
>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> ##
>> ## attached base packages:
>> ## [1] stats     graphics  grDevices utils     datasets  methods   base
>> ##
>> ## loaded via a namespace (and not attached):
>> ## [1] compiler_3.4.1
>> tools::md5sum( fn1 )
>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>> 2009/DADOS_ENEM_2009.txt
>> ##
>> "83e61c96092285b60d7bf6b0dbc7072e"
>> dat <- readLines( fn1 )
>> length( dat )
>> ## [1] 4148721
>>
>> No segfault occurs.
>>
>> On Sat, 15 Jul 2017, Anthony Damico wrote:
>>
>> hi, i realized that the segfault happens on the text file in a new R
>>> session.  so, creating the segfault-generating text file requires a
>>> contributed package, but prompting the actual segfault does not -- pretty
>>> sure that means this is a base R bug?  submitted here:
>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully i
>>> am
>>> not doing something remarkably stupid.  the text file itself is 4GB so
>>> cannot upload it to bugzilla, and from the R_AllocStringBugger error in
>>> the
>>> previous message, i think most or all of it needs to be there to trigger
>>> the segfault.  thanks!
>>>
>>>
>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com>
>>> wrote:
>>>
>>> hi, thanks Dr. Murdoch
>>>>
>>>>
>>>> i'd appreciate if anyone on r-help could help me narrow this down?  i
>>>> believe the segfault occurs because there's a single line with 4GB and
>>>> also
>>>> embedded nuls, but i am not sure how to artificially construct that?
>>>>
>>>>
>>>> the lodown package can be removed from my example..  it is just for file
>>>> download cacheing, so `lodown::cachaca` can be replaced with
>>>> `download.file`  my current example requires a huge download, so sort of
>>>> painful to repeat but i'm pretty confident that's not the issue.
>>>>
>>>>
>>>> the archive::archive_extract() function unzips a (probably corrupt) .RAR
>>>> file and creates a text file with 80,937 lines.  this file is 4GB:
>>>>
>>>>    > file.size(infile)
>>>>     [1] 4078192743 <(407)%20819-2743>
>>>>
>>>>
>>>> i am pretty sure that nearly all of that 4GB is contained on a single
>>>> line
>>>> in the file.  here's what happens when i create a file connection and
>>>> scan
>>>> through..
>>>>
>>>>    > file_con <- file( infile , 'r' )
>>>>    >
>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "1000023930632009"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "36F2924009PAULO"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "AFONSO"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "BA11"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "00000"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "00"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "2924009PAULO"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "AFONSO"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "BA1111"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "467.20"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "346.10"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Read 1 item
>>>>     [1] "414.40"
>>>>    > scan( w , n = 1 , what = character() )
>>>>     Error in scan(w, n = 1, what = character()) :
>>>>       could not allocate memory (2048 Mb) in C function
>>>> 'R_AllocStringBuffer'
>>>>
>>>>
>>>>
>>>> making a huge single-line file does not reproduce the problem, i think
>>>> the
>>>> embedded nuls have something to do with it--
>>>>
>>>>
>>>>     # WARNING do not run with less than 64GB RAM
>>>>     tf <- tempfile()
>>>>     a <- rep( "a" , 1000000000 )
>>>>     b <- paste( a , collapse = '' )
>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>>>>     d <- readLines( tf )
>>>>
>>>>
>>>>
>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
>>>> murdoch.duncan at gmail.com>
>>>> wrote:
>>>>
>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>>>>
>>>>> hello, the last line of the code below causes a segfault for me on
>>>>>> 3.4.1.
>>>>>> i think i should submit to https://bugs.r-project.org/  unless others
>>>>>> have
>>>>>> advice?  thanks
>>>>>>
>>>>>>
>>>>> Segfaults are usually worth reporting as bugs.  Try to come up with a
>>>>> self-contained example, not using the lodown and archive packages.  I
>>>>> imagine you can do this by uploading the file you downloaded, or
>>>>> enough of
>>>>> a subset of it to trigger the segfault.  If you can't do that, then
>>>>> likely
>>>>> the bug is with one of those packages, not with R.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>
>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> install.packages( "devtools" )
>>>>>> devtools::install_github("ajdamico/lodown")
>>>>>> devtools::install_github("jimhester/archive")
>>>>>>
>>>>>>
>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>>>>
>>>>>> tf <- tempfile()
>>>>>>
>>>>>> # large download!  cachaca saves on your local disk if already
>>>>>> downloaded
>>>>>> lodown::cachaca( '
>>>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' , tf
>>>>>> ,
>>>>>> mode
>>>>>> = 'wb' )
>>>>>>
>>>>>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>>>>>
>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>>>>> full.names =
>>>>>> TRUE  )
>>>>>>
>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>>>>>
>>>>>> # works
>>>>>> R.utils::countLines( infile )
>>>>>>
>>>>>> # works with warning
>>>>>> my_file <- readLines( infile , skipNul = TRUE )
>>>>>>
>>>>>> # crash
>>>>>> my_file <- readLines( infile )
>>>>>>
>>>>>>
>>>>>> # run just before crash
>>>>>> sessionInfo()
>>>>>> # R version 3.4.1 (2017-06-30)
>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>>>> # Running under: Windows 10 x64 (build 15063)
>>>>>>
>>>>>> # Matrix products: default
>>>>>>
>>>>>> # locale:
>>>>>> # [1] LC_COLLATE=English_United States.1252
>>>>>> # [2] LC_CTYPE=English_United States.1252
>>>>>> # [3] LC_MONETARY=English_United States.1252
>>>>>> # [4] LC_NUMERIC=C
>>>>>> # [5] LC_TIME=English_United States.1252
>>>>>>
>>>>>> # attached base packages:
>>>>>> # [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>>>
>>>>>> # loaded via a namespace (and not attached):
>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>>>>  withr_1.0.2
>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>>>>> memoise_1.1.0
>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>>>>> lodown_0.1.0
>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>>>>> R.oo_1.21.0
>>>>>> # [17] archive_0.0.0.9000
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>>>> ng-guide.html
>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>> ng-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>> ------------------------------------------------------------
>> ---------------
>> Jeff Newmiller                        The     .....       .....  Go
>> Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>> Go...
>>                                      Live:   OO#.. Dead: OO#..  Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#.
>> rocks...1k
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> ------------------------------------------------------------
> ---------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
> Go...
>                                       Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> ------------------------------------------------------------
> ---------------
>

	[[alternative HTML version deleted]]


From ajdamico at gmail.com  Sun Jul 16 12:31:08 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sun, 16 Jul 2017 06:31:08 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
 <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>
Message-ID: <CAOwvMDwV5Uo5cr6GccNPA21-dvs8=RTT-jCnXD-XPpQSJNsqnQ@mail.gmail.com>

sorry, typo, 80937 not 809367

On Sun, Jul 16, 2017 at 6:21 AM, Anthony Damico <ajdamico at gmail.com> wrote:

> hi, thank you for attempting this. it looks like your unix machine
> unzipped the txt file without corruption -- if you copied over the same txt
> file to windows 7, i don't think that would reproduce the problem?  i think
> it needs to be the corrupted text file where   R.utils::countLines( txtfile
> )   gives 809367.  i am able to reproduce on two distinct windows machines
> but no guarantee i'm not doing something dumb
>
> On Sat, Jul 15, 2017 at 6:29 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
>> I am not able to reproduce your segfault on a Windows 7 platform either:
>>
>> ##########################
>> fn1 <- "d:/DADOS_ENEM_2009.txt"
>> sessionInfo()
>> ## R version 3.4.1 (2017-06-30)
>> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
>> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
>> ##
>> ## Matrix products: default
>> ##
>> ## locale:
>> ## [1] LC_COLLATE=English_United States.1252
>> ## [2] LC_CTYPE=English_United States.1252
>> ## [3] LC_MONETARY=English_United States.1252
>> ## [4] LC_NUMERIC=C
>> ## [5] LC_TIME=English_United States.1252
>> ##
>> ## attached base packages:
>> ## [1] stats     graphics  grDevices utils     datasets  methods   base
>> ##
>> ## loaded via a namespace (and not attached):
>> ## [1] compiler_3.4.1
>> tools::md5sum( fn1 )
>> ##             d:/DADOS_ENEM_2009.txt
>> ## "83e61c96092285b60d7bf6b0dbc7072e"
>> dat <- readLines( fn1 )
>> length( dat )
>> ## [1] 4148721
>>
>>
>> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
>>
>> I am not able to reproduce this on a Linux platform:
>>>
>>> #######################3
>>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>>> 2009/DADOS_ENEM_2009.txt"
>>> sessionInfo()
>>> ## R version 3.4.1 (2017-06-30)
>>> ## Platform: x86_64-pc-linux-gnu (64-bit)
>>> ## Running under: Ubuntu 14.04.5 LTS
>>> ##
>>> ## Matrix products: default
>>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
>>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
>>> ##
>>> ## locale:
>>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>> ##
>>> ## attached base packages:
>>> ## [1] stats     graphics  grDevices utils     datasets  methods   base
>>> ##
>>> ## loaded via a namespace (and not attached):
>>> ## [1] compiler_3.4.1
>>> tools::md5sum( fn1 )
>>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>>> 2009/DADOS_ENEM_2009.txt
>>> ##
>>> "83e61c96092285b60d7bf6b0dbc7072e"
>>> dat <- readLines( fn1 )
>>> length( dat )
>>> ## [1] 4148721
>>>
>>> No segfault occurs.
>>>
>>> On Sat, 15 Jul 2017, Anthony Damico wrote:
>>>
>>> hi, i realized that the segfault happens on the text file in a new R
>>>> session.  so, creating the segfault-generating text file requires a
>>>> contributed package, but prompting the actual segfault does not --
>>>> pretty
>>>> sure that means this is a base R bug?  submitted here:
>>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully
>>>> i am
>>>> not doing something remarkably stupid.  the text file itself is 4GB so
>>>> cannot upload it to bugzilla, and from the R_AllocStringBugger error in
>>>> the
>>>> previous message, i think most or all of it needs to be there to trigger
>>>> the segfault.  thanks!
>>>>
>>>>
>>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com>
>>>> wrote:
>>>>
>>>> hi, thanks Dr. Murdoch
>>>>>
>>>>>
>>>>> i'd appreciate if anyone on r-help could help me narrow this down?  i
>>>>> believe the segfault occurs because there's a single line with 4GB and
>>>>> also
>>>>> embedded nuls, but i am not sure how to artificially construct that?
>>>>>
>>>>>
>>>>> the lodown package can be removed from my example..  it is just for
>>>>> file
>>>>> download cacheing, so `lodown::cachaca` can be replaced with
>>>>> `download.file`  my current example requires a huge download, so sort
>>>>> of
>>>>> painful to repeat but i'm pretty confident that's not the issue.
>>>>>
>>>>>
>>>>> the archive::archive_extract() function unzips a (probably corrupt)
>>>>> .RAR
>>>>> file and creates a text file with 80,937 lines.  this file is 4GB:
>>>>>
>>>>>    > file.size(infile)
>>>>>     [1] 4078192743 <(407)%20819-2743>
>>>>>
>>>>>
>>>>> i am pretty sure that nearly all of that 4GB is contained on a single
>>>>> line
>>>>> in the file.  here's what happens when i create a file connection and
>>>>> scan
>>>>> through..
>>>>>
>>>>>    > file_con <- file( infile , 'r' )
>>>>>    >
>>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "1000023930632009"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "36F2924009PAULO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "AFONSO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "BA11"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "00000"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "00"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "2924009PAULO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "AFONSO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "BA1111"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "467.20"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "346.10"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "414.40"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Error in scan(w, n = 1, what = character()) :
>>>>>       could not allocate memory (2048 Mb) in C function
>>>>> 'R_AllocStringBuffer'
>>>>>
>>>>>
>>>>>
>>>>> making a huge single-line file does not reproduce the problem, i think
>>>>> the
>>>>> embedded nuls have something to do with it--
>>>>>
>>>>>
>>>>>     # WARNING do not run with less than 64GB RAM
>>>>>     tf <- tempfile()
>>>>>     a <- rep( "a" , 1000000000 )
>>>>>     b <- paste( a , collapse = '' )
>>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>>>>>     d <- readLines( tf )
>>>>>
>>>>>
>>>>>
>>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
>>>>> murdoch.duncan at gmail.com>
>>>>> wrote:
>>>>>
>>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>>>>>
>>>>>> hello, the last line of the code below causes a segfault for me on
>>>>>>> 3.4.1.
>>>>>>> i think i should submit to https://bugs.r-project.org/  unless
>>>>>>> others
>>>>>>> have
>>>>>>> advice?  thanks
>>>>>>>
>>>>>>>
>>>>>> Segfaults are usually worth reporting as bugs.  Try to come up with a
>>>>>> self-contained example, not using the lodown and archive packages.  I
>>>>>> imagine you can do this by uploading the file you downloaded, or
>>>>>> enough of
>>>>>> a subset of it to trigger the segfault.  If you can't do that, then
>>>>>> likely
>>>>>> the bug is with one of those packages, not with R.
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>>
>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> install.packages( "devtools" )
>>>>>>> devtools::install_github("ajdamico/lodown")
>>>>>>> devtools::install_github("jimhester/archive")
>>>>>>>
>>>>>>>
>>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>>>>>
>>>>>>> tf <- tempfile()
>>>>>>>
>>>>>>> # large download!  cachaca saves on your local disk if already
>>>>>>> downloaded
>>>>>>> lodown::cachaca( '
>>>>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' ,
>>>>>>> tf ,
>>>>>>> mode
>>>>>>> = 'wb' )
>>>>>>>
>>>>>>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>>>>>>
>>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>>>>>> full.names =
>>>>>>> TRUE  )
>>>>>>>
>>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>>>>>>
>>>>>>> # works
>>>>>>> R.utils::countLines( infile )
>>>>>>>
>>>>>>> # works with warning
>>>>>>> my_file <- readLines( infile , skipNul = TRUE )
>>>>>>>
>>>>>>> # crash
>>>>>>> my_file <- readLines( infile )
>>>>>>>
>>>>>>>
>>>>>>> # run just before crash
>>>>>>> sessionInfo()
>>>>>>> # R version 3.4.1 (2017-06-30)
>>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>>>>> # Running under: Windows 10 x64 (build 15063)
>>>>>>>
>>>>>>> # Matrix products: default
>>>>>>>
>>>>>>> # locale:
>>>>>>> # [1] LC_COLLATE=English_United States.1252
>>>>>>> # [2] LC_CTYPE=English_United States.1252
>>>>>>> # [3] LC_MONETARY=English_United States.1252
>>>>>>> # [4] LC_NUMERIC=C
>>>>>>> # [5] LC_TIME=English_United States.1252
>>>>>>>
>>>>>>> # attached base packages:
>>>>>>> # [1] stats     graphics  grDevices utils     datasets  methods
>>>>>>>  base
>>>>>>>
>>>>>>> # loaded via a namespace (and not attached):
>>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>>>>>  withr_1.0.2
>>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>>>>>> memoise_1.1.0
>>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>>>>>> lodown_0.1.0
>>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>>>>>> R.oo_1.21.0
>>>>>>> # [17] archive_0.0.0.9000
>>>>>>>
>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>>>>> ng-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>> ng-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>
>>> ------------------------------------------------------------
>>> ---------------
>>> Jeff Newmiller                        The     .....       .....  Go
>>> Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>>> Go...
>>>                                      Live:   OO#.. Dead: OO#..  Playing
>>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>>> /Software/Embedded Controllers)               .OO#.       .OO#.
>>> rocks...1k
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>> ng-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>> ------------------------------------------------------------
>> ---------------
>> Jeff Newmiller                        The     .....       .....  Go
>> Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>> Go...
>>                                       Live:   OO#.. Dead: OO#..  Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#.
>> rocks...1k
>> ------------------------------------------------------------
>> ---------------
>>
>
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Sun Jul 16 12:34:41 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 16 Jul 2017 06:34:41 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDzUEJg7KHYqLmcjWktMVXZ5EemznQoRo_uW8sPbcDN_iw@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <3b0a81fb-9c8c-052b-3948-b793ca0dc513@gmail.com>
 <CAOwvMDzUEJg7KHYqLmcjWktMVXZ5EemznQoRo_uW8sPbcDN_iw@mail.gmail.com>
Message-ID: <da291507-b4e9-ad8d-a896-a8b8e5fa5838@gmail.com>

On 16/07/2017 6:17 AM, Anthony Damico wrote:
> thank you for taking the time to write this.  i set it running last
> night and it's still going -- if it doesn't finish by tomorrow, i will
> try to find a site to host the problem file and add that link to the bug
> report so the archive package can be avoided at least.  i'm sorry for
> the bother
>

How big is that text file?  I wouldn't expect my script to take more 
than a few minutes even on a huge file.

My script might have a bug...

Duncan Murdoch

> On Sat, Jul 15, 2017 at 4:14 PM, Duncan Murdoch
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>
>     On 15/07/2017 11:33 AM, Anthony Damico wrote:
>
>         hi, i realized that the segfault happens on the text file in a new R
>         session.  so, creating the segfault-generating text file requires a
>         contributed package, but prompting the actual segfault does not --
>         pretty sure that means this is a base R bug?  submitted here:
>         https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311
>         <https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311>
>         hopefully i
>         am not doing something remarkably stupid.  the text file itself
>         is 4GB
>         so cannot upload it to bugzilla, and from the
>         R_AllocStringBugger error
>         in the previous message, i think most or all of it needs to be
>         there to
>         trigger the segfault.  thanks!
>
>
>     I don't want to download the big file or install the archive
>     package. Could you run the code below on the bad file?  If you're
>     right and it's only nulls that matter, this might allow me to create
>     a file that triggers the bug.
>
>     f <-  # put the filename of the bad file here
>
>     con <- file(f, open="rb")
>     zeros <- numeric()
>     repeat {
>       bytes <- readBin(con, "int", 1000000, size=1)
>       zeros <- c(zeros, count + which(bytes == 0))
>       count <- count + length(bytes)
>       if (length(bytes) < 1000000) break
>     }
>     close(con)
>     cat("File length=", count, "\n")
>     cat("Nulls:\n")
>     zeros
>
>     Here's some code to recreate a file of the same length with nulls in
>     the same places, and spaces everywhere else:
>
>     size <- count
>     f2 <- tempfile()
>     con <- file(f2, open="wb")
>     count <- 0
>     while (count < size) {
>       nonzeros <- min(c(size - count, 1000000, zeros - 1))
>       if (nonzeros) {
>         writeBin(rep(32L, nonzeros), con, size = 1)
>         count <- count + nonzeros
>       }
>       zeros <- zeros - nonzeros
>       if (length(zeros) && min(zeros) == 1) {
>         writeBin(0L, con, size = 1)
>         count <- count + 1
>         zeros <- zeros[-1] - 1
>       }
>     }
>     close(con)
>
>     Duncan Murdoch
>
>
>
>


From ajdamico at gmail.com  Sun Jul 16 12:40:38 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sun, 16 Jul 2017 06:40:38 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <da291507-b4e9-ad8d-a896-a8b8e5fa5838@gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <3b0a81fb-9c8c-052b-3948-b793ca0dc513@gmail.com>
 <CAOwvMDzUEJg7KHYqLmcjWktMVXZ5EemznQoRo_uW8sPbcDN_iw@mail.gmail.com>
 <da291507-b4e9-ad8d-a896-a8b8e5fa5838@gmail.com>
Message-ID: <CAOwvMDzQeOG0VdvR6kD32_L_0=PPH4WR4doQgOBcSs5=8aG80w@mail.gmail.com>

hi, the text file that prompts the segfault is 4gb but only 80,937 lines

> file.info( "S:/temp/crash.txt")
                        size isdir mode               mtime
ctime               atime exe
S:/temp/crash.txt 4078192743 FALSE  666 2017-07-15 17:24:35 2017-07-15
17:19:47 2017-07-15 17:19:47  no




On Sun, Jul 16, 2017 at 6:34 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 16/07/2017 6:17 AM, Anthony Damico wrote:
>
>> thank you for taking the time to write this.  i set it running last
>> night and it's still going -- if it doesn't finish by tomorrow, i will
>> try to find a site to host the problem file and add that link to the bug
>> report so the archive package can be avoided at least.  i'm sorry for
>> the bother
>>
>>
> How big is that text file?  I wouldn't expect my script to take more than
> a few minutes even on a huge file.
>
> My script might have a bug...
>
> Duncan Murdoch
>
> On Sat, Jul 15, 2017 at 4:14 PM, Duncan Murdoch
>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>>     On 15/07/2017 11:33 AM, Anthony Damico wrote:
>>
>>         hi, i realized that the segfault happens on the text file in a
>> new R
>>         session.  so, creating the segfault-generating text file requires
>> a
>>         contributed package, but prompting the actual segfault does not --
>>         pretty sure that means this is a base R bug?  submitted here:
>>         https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311
>>         <https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311>
>>         hopefully i
>>         am not doing something remarkably stupid.  the text file itself
>>         is 4GB
>>         so cannot upload it to bugzilla, and from the
>>         R_AllocStringBugger error
>>         in the previous message, i think most or all of it needs to be
>>         there to
>>         trigger the segfault.  thanks!
>>
>>
>>     I don't want to download the big file or install the archive
>>     package. Could you run the code below on the bad file?  If you're
>>     right and it's only nulls that matter, this might allow me to create
>>     a file that triggers the bug.
>>
>>     f <-  # put the filename of the bad file here
>>
>>     con <- file(f, open="rb")
>>     zeros <- numeric()
>>     repeat {
>>       bytes <- readBin(con, "int", 1000000, size=1)
>>       zeros <- c(zeros, count + which(bytes == 0))
>>       count <- count + length(bytes)
>>       if (length(bytes) < 1000000) break
>>     }
>>     close(con)
>>     cat("File length=", count, "\n")
>>     cat("Nulls:\n")
>>     zeros
>>
>>     Here's some code to recreate a file of the same length with nulls in
>>     the same places, and spaces everywhere else:
>>
>>     size <- count
>>     f2 <- tempfile()
>>     con <- file(f2, open="wb")
>>     count <- 0
>>     while (count < size) {
>>       nonzeros <- min(c(size - count, 1000000, zeros - 1))
>>       if (nonzeros) {
>>         writeBin(rep(32L, nonzeros), con, size = 1)
>>         count <- count + nonzeros
>>       }
>>       zeros <- zeros - nonzeros
>>       if (length(zeros) && min(zeros) == 1) {
>>         writeBin(0L, con, size = 1)
>>         count <- count + 1
>>         zeros <- zeros[-1] - 1
>>       }
>>     }
>>     close(con)
>>
>>     Duncan Murdoch
>>
>>
>>
>>
>>
>

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Sun Jul 16 16:10:41 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 16 Jul 2017 07:10:41 -0700
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
 <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>
Message-ID: <563F4EC8-23B0-4D35-8710-F420E67115F3@dcn.davis.ca.us>

So you are saying there are two problems... one that produces a corrupt file from a valid compressed file, and one that segfaults when presented with that corrupt file? Can you please confirm the file name and run md5sum on it and share the result so we can tell when the file problem has been reproduced?
-- 
Sent from my phone. Please excuse my brevity.

On July 16, 2017 3:21:21 AM PDT, Anthony Damico <ajdamico at gmail.com> wrote:
>hi, thank you for attempting this. it looks like your unix machine
>unzipped
>the txt file without corruption -- if you copied over the same txt file
>to
>windows 7, i don't think that would reproduce the problem?  i think it
>needs to be the corrupted text file where   R.utils::countLines(
>txtfile
>)   gives 809367.  i am able to reproduce on two distinct windows
>machines
>but no guarantee i'm not doing something dumb
>
>On Sat, Jul 15, 2017 at 6:29 PM, Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> I am not able to reproduce your segfault on a Windows 7 platform
>either:
>>
>> ##########################
>> fn1 <- "d:/DADOS_ENEM_2009.txt"
>> sessionInfo()
>> ## R version 3.4.1 (2017-06-30)
>> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
>> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
>> ##
>> ## Matrix products: default
>> ##
>> ## locale:
>> ## [1] LC_COLLATE=English_United States.1252
>> ## [2] LC_CTYPE=English_United States.1252
>> ## [3] LC_MONETARY=English_United States.1252
>> ## [4] LC_NUMERIC=C
>> ## [5] LC_TIME=English_United States.1252
>> ##
>> ## attached base packages:
>> ## [1] stats     graphics  grDevices utils     datasets  methods  
>base
>> ##
>> ## loaded via a namespace (and not attached):
>> ## [1] compiler_3.4.1
>> tools::md5sum( fn1 )
>> ##             d:/DADOS_ENEM_2009.txt
>> ## "83e61c96092285b60d7bf6b0dbc7072e"
>> dat <- readLines( fn1 )
>> length( dat )
>> ## [1] 4148721
>>
>>
>> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
>>
>> I am not able to reproduce this on a Linux platform:
>>>
>>> #######################3
>>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>>> 2009/DADOS_ENEM_2009.txt"
>>> sessionInfo()
>>> ## R version 3.4.1 (2017-06-30)
>>> ## Platform: x86_64-pc-linux-gnu (64-bit)
>>> ## Running under: Ubuntu 14.04.5 LTS
>>> ##
>>> ## Matrix products: default
>>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
>>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
>>> ##
>>> ## locale:
>>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>> ##
>>> ## attached base packages:
>>> ## [1] stats     graphics  grDevices utils     datasets  methods  
>base
>>> ##
>>> ## loaded via a namespace (and not attached):
>>> ## [1] compiler_3.4.1
>>> tools::md5sum( fn1 )
>>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>>> 2009/DADOS_ENEM_2009.txt
>>> ##
>>> "83e61c96092285b60d7bf6b0dbc7072e"
>>> dat <- readLines( fn1 )
>>> length( dat )
>>> ## [1] 4148721
>>>
>>> No segfault occurs.
>>>
>>> On Sat, 15 Jul 2017, Anthony Damico wrote:
>>>
>>> hi, i realized that the segfault happens on the text file in a new R
>>>> session.  so, creating the segfault-generating text file requires a
>>>> contributed package, but prompting the actual segfault does not --
>pretty
>>>> sure that means this is a base R bug?  submitted here:
>>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311 
>hopefully i
>>>> am
>>>> not doing something remarkably stupid.  the text file itself is 4GB
>so
>>>> cannot upload it to bugzilla, and from the R_AllocStringBugger
>error in
>>>> the
>>>> previous message, i think most or all of it needs to be there to
>trigger
>>>> the segfault.  thanks!
>>>>
>>>>
>>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico
><ajdamico at gmail.com>
>>>> wrote:
>>>>
>>>> hi, thanks Dr. Murdoch
>>>>>
>>>>>
>>>>> i'd appreciate if anyone on r-help could help me narrow this down?
> i
>>>>> believe the segfault occurs because there's a single line with 4GB
>and
>>>>> also
>>>>> embedded nuls, but i am not sure how to artificially construct
>that?
>>>>>
>>>>>
>>>>> the lodown package can be removed from my example..  it is just
>for file
>>>>> download cacheing, so `lodown::cachaca` can be replaced with
>>>>> `download.file`  my current example requires a huge download, so
>sort of
>>>>> painful to repeat but i'm pretty confident that's not the issue.
>>>>>
>>>>>
>>>>> the archive::archive_extract() function unzips a (probably
>corrupt) .RAR
>>>>> file and creates a text file with 80,937 lines.  this file is 4GB:
>>>>>
>>>>>    > file.size(infile)
>>>>>     [1] 4078192743 <(407)%20819-2743>
>>>>>
>>>>>
>>>>> i am pretty sure that nearly all of that 4GB is contained on a
>single
>>>>> line
>>>>> in the file.  here's what happens when i create a file connection
>and
>>>>> scan
>>>>> through..
>>>>>
>>>>>    > file_con <- file( infile , 'r' )
>>>>>    >
>>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "1000023930632009"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "36F2924009PAULO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "AFONSO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "BA11"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "00000"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "00"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "2924009PAULO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "AFONSO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "BA1111"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "467.20"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "346.10"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "414.40"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Error in scan(w, n = 1, what = character()) :
>>>>>       could not allocate memory (2048 Mb) in C function
>>>>> 'R_AllocStringBuffer'
>>>>>
>>>>>
>>>>>
>>>>> making a huge single-line file does not reproduce the problem, i
>think
>>>>> the
>>>>> embedded nuls have something to do with it--
>>>>>
>>>>>
>>>>>     # WARNING do not run with less than 64GB RAM
>>>>>     tf <- tempfile()
>>>>>     a <- rep( "a" , 1000000000 )
>>>>>     b <- paste( a , collapse = '' )
>>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>>>>>     d <- readLines( tf )
>>>>>
>>>>>
>>>>>
>>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
>>>>> murdoch.duncan at gmail.com>
>>>>> wrote:
>>>>>
>>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>>>>>
>>>>>> hello, the last line of the code below causes a segfault for me
>on
>>>>>>> 3.4.1.
>>>>>>> i think i should submit to https://bugs.r-project.org/  unless
>others
>>>>>>> have
>>>>>>> advice?  thanks
>>>>>>>
>>>>>>>
>>>>>> Segfaults are usually worth reporting as bugs.  Try to come up
>with a
>>>>>> self-contained example, not using the lodown and archive
>packages.  I
>>>>>> imagine you can do this by uploading the file you downloaded, or
>>>>>> enough of
>>>>>> a subset of it to trigger the segfault.  If you can't do that,
>then
>>>>>> likely
>>>>>> the bug is with one of those packages, not with R.
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>>
>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> install.packages( "devtools" )
>>>>>>> devtools::install_github("ajdamico/lodown")
>>>>>>> devtools::install_github("jimhester/archive")
>>>>>>>
>>>>>>>
>>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>>>>>
>>>>>>> tf <- tempfile()
>>>>>>>
>>>>>>> # large download!  cachaca saves on your local disk if already
>>>>>>> downloaded
>>>>>>> lodown::cachaca( '
>>>>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar'
>, tf
>>>>>>> ,
>>>>>>> mode
>>>>>>> = 'wb' )
>>>>>>>
>>>>>>> archive::archive_extract( tf , dir = normalizePath( file_folder
>) )
>>>>>>>
>>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>>>>>> full.names =
>>>>>>> TRUE  )
>>>>>>>
>>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value =
>TRUE )
>>>>>>>
>>>>>>> # works
>>>>>>> R.utils::countLines( infile )
>>>>>>>
>>>>>>> # works with warning
>>>>>>> my_file <- readLines( infile , skipNul = TRUE )
>>>>>>>
>>>>>>> # crash
>>>>>>> my_file <- readLines( infile )
>>>>>>>
>>>>>>>
>>>>>>> # run just before crash
>>>>>>> sessionInfo()
>>>>>>> # R version 3.4.1 (2017-06-30)
>>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>>>>> # Running under: Windows 10 x64 (build 15063)
>>>>>>>
>>>>>>> # Matrix products: default
>>>>>>>
>>>>>>> # locale:
>>>>>>> # [1] LC_COLLATE=English_United States.1252
>>>>>>> # [2] LC_CTYPE=English_United States.1252
>>>>>>> # [3] LC_MONETARY=English_United States.1252
>>>>>>> # [4] LC_NUMERIC=C
>>>>>>> # [5] LC_TIME=English_United States.1252
>>>>>>>
>>>>>>> # attached base packages:
>>>>>>> # [1] stats     graphics  grDevices utils     datasets  methods 
> base
>>>>>>>
>>>>>>> # loaded via a namespace (and not attached):
>>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>>>>>  withr_1.0.2
>>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>>>>>> memoise_1.1.0
>>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>>>>>> lodown_0.1.0
>>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>>>>>> R.oo_1.21.0
>>>>>>> # [17] archive_0.0.0.9000
>>>>>>>
>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>>>>> ng-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible
>code.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>> ng-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>
>>> ------------------------------------------------------------
>>> ---------------
>>> Jeff Newmiller                        The     .....       .....  Go
>>> Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#. 
>Live
>>> Go...
>>>                                      Live:   OO#.. Dead: OO#.. 
>Playing
>>> Research Engineer (Solar/Batteries            O.O#.       #.O#. 
>with
>>> /Software/Embedded Controllers)               .OO#.       .OO#.
>>> rocks...1k
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>> ng-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>> ------------------------------------------------------------
>> ---------------
>> Jeff Newmiller                        The     .....       .....  Go
>Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>> Go...
>>                                       Live:   OO#.. Dead: OO#.. 
>Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#. 
>rocks...1k
>> ------------------------------------------------------------
>> ---------------
>>


From dwinsemius at comcast.net  Sun Jul 16 16:36:20 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 16 Jul 2017 07:36:20 -0700
Subject: [R] How to formulate quadratic function with interaction terms
	for the PLS fitting model?
In-Reply-To: <CAGxFJbRp9LcLs0h0MWuz8nHYE5fJuHJbH=jZNV9qdwPewpw96w@mail.gmail.com>
References: <CA+iG1-6MBiLpZ5EcT6iTg-9=K2wR=Wz=AroBi71MoHTBw1qYZw@mail.gmail.com>
 <CAGxFJbRp9LcLs0h0MWuz8nHYE5fJuHJbH=jZNV9qdwPewpw96w@mail.gmail.com>
Message-ID: <51286F3E-EB8A-4077-9806-92792537EE4F@comcast.net>


> On Jul 13, 2017, at 7:43 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Below.
> 
> -- Bert
> Bert Gunter
> 
> 
> 
> On Thu, Jul 13, 2017 at 3:07 AM, Luigi Biagini <luigi.biagini at gmail.com> wrote:
>> I have two ideas about it.
>> 
>> 1-
>> i) Entering variables in quadratic form is done with the command I
>> (variable ^ 2) -
>> plsr (octane ~ NIR + I (nir ^ 2), ncomp = 10, data = gasTrain, validation =
>> "LOO"
>> You could also use a new variable NIR_sq <- (NIR) ^ 2
>> 
>> ii) To insert a square variable, use syntax I (x ^ 2) - it is very
>> important to insert I before the parentheses.
> 
> True, but better I believe: see ?poly.
> e.g. poly(cbind(x1,x2,x3), degree = 2, raw = TRUE) is a full quadratic
> polynomial in x1,x2,x3 .
> 

Is there any real difference between 

octane ~ NIR * I(NIR^2)
octane ~ NIR * poly(NIR, degree=2, raw=TRUE)

?
(I though that adding raw = TRUE prevented the beneficial process of centering the second degree terms.)
__ 
David
> 
>> 
>> iii) If you want to make the interaction between x and x ^ 2 use the
>> command ":" -> x: I(x ^ 2)
>> 
>> iv) For multiple interactions between x and x ^ 2 use the command "*" -> x
>> *I (x ^ 2)
>> 
>> i) plsr (octane ~ NIR + NIR_sq, ncomp = 10, data = gasTrain, validation =
>> "LOO") I (x ^ 2)
>> ii)p lsr (octane ~ NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation
>> = "LOO") I (x ^ 2)
>> iii)p lsr (octane ~ NIR : I(NIR^2), ncomp = 10, data = gasTrain, validation
>> = "LOO") I (x ^ 2)
>> iv)p lsr (octane ~ NIR * I(NIR^2), ncomp = 10, data = gasTrain, validation
>> = "LOO") I (x ^ 2)
>> 
>> 2 - For your regression, did you plan to use MARS instead of PLS?
>> 
>> 
>> 
>> 
>> Dear all,
>>> I am using the pls package of R to perform partial least square on a set of
>>> multivariate data.  Instead of fitting a linear model, I want to fit my
>>> data with a quadratic function with interaction terms.  But I am not sure
>>> how.  I will use an example to illustrate my problem:
>>> Following the example in the PLS manual:
>>> ## Read data
>>> data(gasoline)
>>> gasTrain <- gasoline[1:50,]
>>> ## Perform PLS
>>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>> where octane ~ NIR is the model that this example is fitting with.
>>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>>> reflectance measurements from 900 to 1700 nm.
>>> Instead of fitting with octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ...
>>> I want to fit the data with:
>>> octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>> i.e. quadratic with interaction terms.
>>> But I don't know how to formulate this.
>>> May I have some help please?
>>> Thanks,
>>> Kelvin
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From chocold12 at gmail.com  Sun Jul 16 17:28:27 2017
From: chocold12 at gmail.com (lily li)
Date: Sun, 16 Jul 2017 09:28:27 -0600
Subject: [R] About doing figures
In-Reply-To: <CA+8X3fWQMRgsqeqz_V=P9wZ=ZK=fAo9BAU61e8OPY206wdQf9Q@mail.gmail.com>
References: <CAN5afy8iJ4y1ktGT-+mtk241j5J3T+zZJ+HjtEhZGWtSp4BCXw@mail.gmail.com>
 <CA+8X3fWQMRgsqeqz_V=P9wZ=ZK=fAo9BAU61e8OPY206wdQf9Q@mail.gmail.com>
Message-ID: <CAN5afy8DCE2Ni6PFF0JfymQPhqy+a6xBL=RKarpqD7YfDtxW6A@mail.gmail.com>

Hi Jim,

For true color, I meant that the points in the figure do not correspond to
the values from the dataframe. Also, why to use rainbow(9) here? And the
legend is straight in the middle, is it possible to reformat it to the very
bottom? Thanks again.

On Sun, Jul 16, 2017 at 2:50 AM, Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi lily,
> As I have no idea of what the "true record" is, I can only guess.
> Maybe this will help:
>
> # get some fairly distinct colors
> rainbow_colors<-rainbow(9)
> # this should sort the numbers in dfm$A
> dfm$Acolor<-factor(dfm$A)
> plot(dfm$B,dfm$C,pch=ifelse(dfm$DF==1,1,19),
>  col=rainbow_colors[as.numeric(dfm$Acolor)])
> legend("bottom",legend=sort(unique(dfm$A)),
>  fill=rainbow_colors)
> legend(25,35,c("DF=1","DF=2"),pch=c(1,19))
>
> Jim
>
>
> On Sun, Jul 16, 2017 at 3:43 PM, lily li <chocold12 at gmail.com> wrote:
> > Hi R users,
> >
> > I still have the problem about plotting. I wanted to put the datasets on
> > one figure, x-axis represents values B, y-axis represents values C, while
> > different colors label column A. Each record uses a circle on the figure,
> > while hollow circles represent DF=1 and solid circles represent DF=2. I
> put
> > my code below, but the A labels do not correspond to the true record, so
> I
> > don't know what is the problem. Thanks for your help.
> >
> > dfm
> > dfm1= subset(dfm, DF==1)
> > dfm2= subset(dfm, DF==2)
> > plot(c(15:30),seq(from=0,to=60,by=4),pch=19,col=NULL,xlab='Value
> > B',ylab='Value C')
> > Color = as.factor(dfm1$A)
> > colordist = grDevices::colors()[grep('gr(a|e)y', grDevices::colors(),
> > invert = T)] # for unique colors
> > Color.unq = sample(colordist,length(Color))
> >
> > points(dfm1[,3],dfm1[,4],col=Color.unq,pch=1)
> > points(dfm2[,3],dfm2[,4],col=Color.unq,pch=19)
> > legend('bottom',as.character(Color.unq),col=Color.unq,lwd=
> rep(2,length(Color.unq)),cex=.6,ncol=5)
> > legend('bottom',as.character(Color),col=Color.unq,lwd=3,
> cex=.6,ncol=5,text.width=c(9.55,9.6,9.55))
> >
> > dfm is the dataframe below.
> >
> > DF   A  B  C
> > 1     65 21 54
> > 1     66 23 55
> > 1     54 24 56
> > 1     44 23 53
> > 1     67 22 52
> > 1     66 21 50
> > 1     45 20 51
> > 1     56 19 57
> > 1     40 25 58
> > 1     39 24 53
> > 2     65 25 52
> > 2     66 20 50
> > 2     54 21 48
> > 2     44 30 49
> > 2     67 27 50
> > 2     66 20 30
> > 2     45 25 56
> > 2     56 14 51
> > 2     40 29 48
> > 2     39 29 23
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From chocold12 at gmail.com  Sun Jul 16 17:30:58 2017
From: chocold12 at gmail.com (lily li)
Date: Sun, 16 Jul 2017 09:30:58 -0600
Subject: [R] About doing figures
In-Reply-To: <CAN5afy8DCE2Ni6PFF0JfymQPhqy+a6xBL=RKarpqD7YfDtxW6A@mail.gmail.com>
References: <CAN5afy8iJ4y1ktGT-+mtk241j5J3T+zZJ+HjtEhZGWtSp4BCXw@mail.gmail.com>
 <CA+8X3fWQMRgsqeqz_V=P9wZ=ZK=fAo9BAU61e8OPY206wdQf9Q@mail.gmail.com>
 <CAN5afy8DCE2Ni6PFF0JfymQPhqy+a6xBL=RKarpqD7YfDtxW6A@mail.gmail.com>
Message-ID: <CAN5afy9Vi3jOG30FJOm48GG6xu+enbY0KDdnF3V9umsCn-0brQ@mail.gmail.com>

For more than 10 records, how to reformat the colors? Also, how to show the
first legend only, but at the bottom, while the second legend in your code
is not necessary? In all, the same A values have the same color, but
different symbols in DF==1 and DF==2.
Thanks for your help.

On Sun, Jul 16, 2017 at 9:28 AM, lily li <chocold12 at gmail.com> wrote:

> Hi Jim,
>
> For true color, I meant that the points in the figure do not correspond to
> the values from the dataframe. Also, why to use rainbow(9) here? And the
> legend is straight in the middle, is it possible to reformat it to the very
> bottom? Thanks again.
>
> On Sun, Jul 16, 2017 at 2:50 AM, Jim Lemon <drjimlemon at gmail.com> wrote:
>
>> Hi lily,
>> As I have no idea of what the "true record" is, I can only guess.
>> Maybe this will help:
>>
>> # get some fairly distinct colors
>> rainbow_colors<-rainbow(9)
>> # this should sort the numbers in dfm$A
>> dfm$Acolor<-factor(dfm$A)
>> plot(dfm$B,dfm$C,pch=ifelse(dfm$DF==1,1,19),
>>  col=rainbow_colors[as.numeric(dfm$Acolor)])
>> legend("bottom",legend=sort(unique(dfm$A)),
>>  fill=rainbow_colors)
>> legend(25,35,c("DF=1","DF=2"),pch=c(1,19))
>>
>> Jim
>>
>>
>> On Sun, Jul 16, 2017 at 3:43 PM, lily li <chocold12 at gmail.com> wrote:
>> > Hi R users,
>> >
>> > I still have the problem about plotting. I wanted to put the datasets on
>> > one figure, x-axis represents values B, y-axis represents values C,
>> while
>> > different colors label column A. Each record uses a circle on the
>> figure,
>> > while hollow circles represent DF=1 and solid circles represent DF=2. I
>> put
>> > my code below, but the A labels do not correspond to the true record,
>> so I
>> > don't know what is the problem. Thanks for your help.
>> >
>> > dfm
>> > dfm1= subset(dfm, DF==1)
>> > dfm2= subset(dfm, DF==2)
>> > plot(c(15:30),seq(from=0,to=60,by=4),pch=19,col=NULL,xlab='Value
>> > B',ylab='Value C')
>> > Color = as.factor(dfm1$A)
>> > colordist = grDevices::colors()[grep('gr(a|e)y', grDevices::colors(),
>> > invert = T)] # for unique colors
>> > Color.unq = sample(colordist,length(Color))
>> >
>> > points(dfm1[,3],dfm1[,4],col=Color.unq,pch=1)
>> > points(dfm2[,3],dfm2[,4],col=Color.unq,pch=19)
>> > legend('bottom',as.character(Color.unq),col=Color.unq,lwd=re
>> p(2,length(Color.unq)),cex=.6,ncol=5)
>> > legend('bottom',as.character(Color),col=Color.unq,lwd=3,cex=
>> .6,ncol=5,text.width=c(9.55,9.6,9.55))
>> >
>> > dfm is the dataframe below.
>> >
>> > DF   A  B  C
>> > 1     65 21 54
>> > 1     66 23 55
>> > 1     54 24 56
>> > 1     44 23 53
>> > 1     67 22 52
>> > 1     66 21 50
>> > 1     45 20 51
>> > 1     56 19 57
>> > 1     40 25 58
>> > 1     39 24 53
>> > 2     65 25 52
>> > 2     66 20 50
>> > 2     54 21 48
>> > 2     44 30 49
>> > 2     67 27 50
>> > 2     66 20 30
>> > 2     45 25 56
>> > 2     56 14 51
>> > 2     40 29 48
>> > 2     39 29 23
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>
>

	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Sun Jul 16 17:47:04 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Sun, 16 Jul 2017 08:47:04 -0700
Subject: [R] How to formulate quadratic function with interaction terms
 for the PLS fitting model?
In-Reply-To: <51286F3E-EB8A-4077-9806-92792537EE4F@comcast.net>
References: <CA+iG1-6MBiLpZ5EcT6iTg-9=K2wR=Wz=AroBi71MoHTBw1qYZw@mail.gmail.com>
 <CAGxFJbRp9LcLs0h0MWuz8nHYE5fJuHJbH=jZNV9qdwPewpw96w@mail.gmail.com>
 <51286F3E-EB8A-4077-9806-92792537EE4F@comcast.net>
Message-ID: <CAGxFJbRdFy94M788iNnU3afjOgGN-y+qyVXo9L8w5-qPaj6GcA@mail.gmail.com>

??
If I haven't misunderstood, they are completely different!

1) NIR must be a matrix, or poly(NIR,...) will fail.
2) Due to the previously identified bug in poly, degree must be
explicitly given as poly(NIR, degree =2,raw = TRUE).

Now consider the following example:

> df <-matrix(runif(60),ncol=3)
> y <- runif(20)
> mdl1 <-lm(y~df*I(df^2))
> mdl2 <-lm(y~df*poly(df,degree=2,raw=TRUE))
> length(coef(mdl1))
[1] 16
> length(coef(mdl2))
[1] 40

Explanation:
In mdl1, I(df^2) gives the squared values of the 3 columns of df. The
formula df*I(df^2) gives the 3 (linear) terms of df, the 3 pure
quadratics of I(df^2), the 9 cubic terms obtained by crossing these,
and the constant coefficient = 16 coefs.

In mdl2,  the poly() expression gives 9 variiables: 3 linear, 3 pure
quadratic, 3 interactions (1.2, 1.3, 2.3) of these.  The df*poly()
term would then give the 3 linear terms of df, the 9 terms of poly(),
the crossings between these, and the constant coef = 40 coefs. Many of
these will be NA since terms are repeated (e.g. the 3 linear terms of
poly() and df) and therefore cannot be estimated.

Have I totally misunderstood what you meant or committed some other blunder?


Cheers,
Bert
Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jul 16, 2017 at 7:36 AM, David Winsemius <dwinsemius at comcast.net> wrote:
>
>> On Jul 13, 2017, at 7:43 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> Below.
>>
>> -- Bert
>> Bert Gunter
>>
>>
>>
>> On Thu, Jul 13, 2017 at 3:07 AM, Luigi Biagini <luigi.biagini at gmail.com> wrote:
>>> I have two ideas about it.
>>>
>>> 1-
>>> i) Entering variables in quadratic form is done with the command I
>>> (variable ^ 2) -
>>> plsr (octane ~ NIR + I (nir ^ 2), ncomp = 10, data = gasTrain, validation =
>>> "LOO"
>>> You could also use a new variable NIR_sq <- (NIR) ^ 2
>>>
>>> ii) To insert a square variable, use syntax I (x ^ 2) - it is very
>>> important to insert I before the parentheses.
>>
>> True, but better I believe: see ?poly.
>> e.g. poly(cbind(x1,x2,x3), degree = 2, raw = TRUE) is a full quadratic
>> polynomial in x1,x2,x3 .
>>
>
> Is there any real difference between
>
> octane ~ NIR * I(NIR^2)
> octane ~ NIR * poly(NIR, degree=2, raw=TRUE)
>
> ?
> (I though that adding raw = TRUE prevented the beneficial process of centering the second degree terms.)
> __
> David
>>
>>>
>>> iii) If you want to make the interaction between x and x ^ 2 use the
>>> command ":" -> x: I(x ^ 2)
>>>
>>> iv) For multiple interactions between x and x ^ 2 use the command "*" -> x
>>> *I (x ^ 2)
>>>
>>> i) plsr (octane ~ NIR + NIR_sq, ncomp = 10, data = gasTrain, validation =
>>> "LOO") I (x ^ 2)
>>> ii)p lsr (octane ~ NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation
>>> = "LOO") I (x ^ 2)
>>> iii)p lsr (octane ~ NIR : I(NIR^2), ncomp = 10, data = gasTrain, validation
>>> = "LOO") I (x ^ 2)
>>> iv)p lsr (octane ~ NIR * I(NIR^2), ncomp = 10, data = gasTrain, validation
>>> = "LOO") I (x ^ 2)
>>>
>>> 2 - For your regression, did you plan to use MARS instead of PLS?
>>>
>>>
>>>
>>>
>>> Dear all,
>>>> I am using the pls package of R to perform partial least square on a set of
>>>> multivariate data.  Instead of fitting a linear model, I want to fit my
>>>> data with a quadratic function with interaction terms.  But I am not sure
>>>> how.  I will use an example to illustrate my problem:
>>>> Following the example in the PLS manual:
>>>> ## Read data
>>>> data(gasoline)
>>>> gasTrain <- gasoline[1:50,]
>>>> ## Perform PLS
>>>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>>> where octane ~ NIR is the model that this example is fitting with.
>>>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>>>> reflectance measurements from 900 to 1700 nm.
>>>> Instead of fitting with octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ...
>>>> I want to fit the data with:
>>>> octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>>>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>>> i.e. quadratic with interaction terms.
>>>> But I don't know how to formulate this.
>>>> May I have some help please?
>>>> Thanks,
>>>> Kelvin
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> David Winsemius
> Alameda, CA, USA
>


From ajdamico at gmail.com  Sun Jul 16 18:37:17 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Sun, 16 Jul 2017 12:37:17 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <563F4EC8-23B0-4D35-8710-F420E67115F3@dcn.davis.ca.us>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
 <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>
 <563F4EC8-23B0-4D35-8710-F420E67115F3@dcn.davis.ca.us>
Message-ID: <CAOwvMDwCWpYGkr+FzciYAiOdvYd5Nb3Mtg3WKd7X9mK84h346g@mail.gmail.com>

hi, yep, there are two problems -- but i think only the segfault is within
the scope of a base R issue?  i need to look closer at the corrupted
decompression and figure out whether i should talk to the brazilian
government agency that creates that .rar file or open an issue with the
archive package maintainer.  my goal in this thread is only to figure out
how to replicate the goofy text file so the r team can turn it into an
error instead of a segfault.

the original example i sent stores the .txt file somewhere inside the
tempdir(), but when i copy it over elsewhere on my machine, the md5sum()
gives the same result.  thanks again for looking at this

    > tools::md5sum(infile)

C:\\Users\\AnthonyD\\AppData\\Local\\Temp\\RtmpIBy7qt/file_folder/Microdados
ENEM 2009/Dados Enem 2009/DADOS_ENEM_2009.txt
    "30beb57419486108e98d42ec7a2f8b19"


    > tools::md5sum( "S:/temp/crash.txt" )
                     S:/temp/crash.txt
    "30beb57419486108e98d42ec7a2f8b19"




On Sun, Jul 16, 2017 at 10:10 AM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> So you are saying there are two problems... one that produces a corrupt
> file from a valid compressed file, and one that segfaults when presented
> with that corrupt file? Can you please confirm the file name and run md5sum
> on it and share the result so we can tell when the file problem has been
> reproduced?
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 16, 2017 3:21:21 AM PDT, Anthony Damico <ajdamico at gmail.com>
> wrote:
> >hi, thank you for attempting this. it looks like your unix machine
> >unzipped
> >the txt file without corruption -- if you copied over the same txt file
> >to
> >windows 7, i don't think that would reproduce the problem?  i think it
> >needs to be the corrupted text file where   R.utils::countLines(
> >txtfile
> >)   gives 809367.  i am able to reproduce on two distinct windows
> >machines
> >but no guarantee i'm not doing something dumb
> >
> >On Sat, Jul 15, 2017 at 6:29 PM, Jeff Newmiller
> ><jdnewmil at dcn.davis.ca.us>
> >wrote:
> >
> >> I am not able to reproduce your segfault on a Windows 7 platform
> >either:
> >>
> >> ##########################
> >> fn1 <- "d:/DADOS_ENEM_2009.txt"
> >> sessionInfo()
> >> ## R version 3.4.1 (2017-06-30)
> >> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
> >> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
> >> ##
> >> ## Matrix products: default
> >> ##
> >> ## locale:
> >> ## [1] LC_COLLATE=English_United States.1252
> >> ## [2] LC_CTYPE=English_United States.1252
> >> ## [3] LC_MONETARY=English_United States.1252
> >> ## [4] LC_NUMERIC=C
> >> ## [5] LC_TIME=English_United States.1252
> >> ##
> >> ## attached base packages:
> >> ## [1] stats     graphics  grDevices utils     datasets  methods
> >base
> >> ##
> >> ## loaded via a namespace (and not attached):
> >> ## [1] compiler_3.4.1
> >> tools::md5sum( fn1 )
> >> ##             d:/DADOS_ENEM_2009.txt
> >> ## "83e61c96092285b60d7bf6b0dbc7072e"
> >> dat <- readLines( fn1 )
> >> length( dat )
> >> ## [1] 4148721
> >>
> >>
> >> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
> >>
> >> I am not able to reproduce this on a Linux platform:
> >>>
> >>> #######################3
> >>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
> >>> 2009/DADOS_ENEM_2009.txt"
> >>> sessionInfo()
> >>> ## R version 3.4.1 (2017-06-30)
> >>> ## Platform: x86_64-pc-linux-gnu (64-bit)
> >>> ## Running under: Ubuntu 14.04.5 LTS
> >>> ##
> >>> ## Matrix products: default
> >>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
> >>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
> >>> ##
> >>> ## locale:
> >>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> >>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> >>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> >>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> >>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> >>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >>> ##
> >>> ## attached base packages:
> >>> ## [1] stats     graphics  grDevices utils     datasets  methods
> >base
> >>> ##
> >>> ## loaded via a namespace (and not attached):
> >>> ## [1] compiler_3.4.1
> >>> tools::md5sum( fn1 )
> >>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
> >>> 2009/DADOS_ENEM_2009.txt
> >>> ##
> >>> "83e61c96092285b60d7bf6b0dbc7072e"
> >>> dat <- readLines( fn1 )
> >>> length( dat )
> >>> ## [1] 4148721
> >>>
> >>> No segfault occurs.
> >>>
> >>> On Sat, 15 Jul 2017, Anthony Damico wrote:
> >>>
> >>> hi, i realized that the segfault happens on the text file in a new R
> >>>> session.  so, creating the segfault-generating text file requires a
> >>>> contributed package, but prompting the actual segfault does not --
> >pretty
> >>>> sure that means this is a base R bug?  submitted here:
> >>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311
> >hopefully i
> >>>> am
> >>>> not doing something remarkably stupid.  the text file itself is 4GB
> >so
> >>>> cannot upload it to bugzilla, and from the R_AllocStringBugger
> >error in
> >>>> the
> >>>> previous message, i think most or all of it needs to be there to
> >trigger
> >>>> the segfault.  thanks!
> >>>>
> >>>>
> >>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico
> ><ajdamico at gmail.com>
> >>>> wrote:
> >>>>
> >>>> hi, thanks Dr. Murdoch
> >>>>>
> >>>>>
> >>>>> i'd appreciate if anyone on r-help could help me narrow this down?
> > i
> >>>>> believe the segfault occurs because there's a single line with 4GB
> >and
> >>>>> also
> >>>>> embedded nuls, but i am not sure how to artificially construct
> >that?
> >>>>>
> >>>>>
> >>>>> the lodown package can be removed from my example..  it is just
> >for file
> >>>>> download cacheing, so `lodown::cachaca` can be replaced with
> >>>>> `download.file`  my current example requires a huge download, so
> >sort of
> >>>>> painful to repeat but i'm pretty confident that's not the issue.
> >>>>>
> >>>>>
> >>>>> the archive::archive_extract() function unzips a (probably
> >corrupt) .RAR
> >>>>> file and creates a text file with 80,937 lines.  this file is 4GB:
> >>>>>
> >>>>>    > file.size(infile)
> >>>>>     [1] 4078192743 <(407)%20819-2743>
> >>>>>
> >>>>>
> >>>>> i am pretty sure that nearly all of that 4GB is contained on a
> >single
> >>>>> line
> >>>>> in the file.  here's what happens when i create a file connection
> >and
> >>>>> scan
> >>>>> through..
> >>>>>
> >>>>>    > file_con <- file( infile , 'r' )
> >>>>>    >
> >>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "1000023930632009"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "36F2924009PAULO"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "AFONSO"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "BA11"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "00000"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "00"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "2924009PAULO"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "AFONSO"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "BA1111"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "467.20"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "346.10"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Read 1 item
> >>>>>     [1] "414.40"
> >>>>>    > scan( w , n = 1 , what = character() )
> >>>>>     Error in scan(w, n = 1, what = character()) :
> >>>>>       could not allocate memory (2048 Mb) in C function
> >>>>> 'R_AllocStringBuffer'
> >>>>>
> >>>>>
> >>>>>
> >>>>> making a huge single-line file does not reproduce the problem, i
> >think
> >>>>> the
> >>>>> embedded nuls have something to do with it--
> >>>>>
> >>>>>
> >>>>>     # WARNING do not run with less than 64GB RAM
> >>>>>     tf <- tempfile()
> >>>>>     a <- rep( "a" , 1000000000 )
> >>>>>     b <- paste( a , collapse = '' )
> >>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
> >>>>>     d <- readLines( tf )
> >>>>>
> >>>>>
> >>>>>
> >>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
> >>>>> murdoch.duncan at gmail.com>
> >>>>> wrote:
> >>>>>
> >>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
> >>>>>>
> >>>>>> hello, the last line of the code below causes a segfault for me
> >on
> >>>>>>> 3.4.1.
> >>>>>>> i think i should submit to https://bugs.r-project.org/  unless
> >others
> >>>>>>> have
> >>>>>>> advice?  thanks
> >>>>>>>
> >>>>>>>
> >>>>>> Segfaults are usually worth reporting as bugs.  Try to come up
> >with a
> >>>>>> self-contained example, not using the lodown and archive
> >packages.  I
> >>>>>> imagine you can do this by uploading the file you downloaded, or
> >>>>>> enough of
> >>>>>> a subset of it to trigger the segfault.  If you can't do that,
> >then
> >>>>>> likely
> >>>>>> the bug is with one of those packages, not with R.
> >>>>>>
> >>>>>> Duncan Murdoch
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>> install.packages( "devtools" )
> >>>>>>> devtools::install_github("ajdamico/lodown")
> >>>>>>> devtools::install_github("jimhester/archive")
> >>>>>>>
> >>>>>>>
> >>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
> >>>>>>>
> >>>>>>> tf <- tempfile()
> >>>>>>>
> >>>>>>> # large download!  cachaca saves on your local disk if already
> >>>>>>> downloaded
> >>>>>>> lodown::cachaca( '
> >>>>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar'
> >, tf
> >>>>>>> ,
> >>>>>>> mode
> >>>>>>> = 'wb' )
> >>>>>>>
> >>>>>>> archive::archive_extract( tf , dir = normalizePath( file_folder
> >) )
> >>>>>>>
> >>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
> >>>>>>> full.names =
> >>>>>>> TRUE  )
> >>>>>>>
> >>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value =
> >TRUE )
> >>>>>>>
> >>>>>>> # works
> >>>>>>> R.utils::countLines( infile )
> >>>>>>>
> >>>>>>> # works with warning
> >>>>>>> my_file <- readLines( infile , skipNul = TRUE )
> >>>>>>>
> >>>>>>> # crash
> >>>>>>> my_file <- readLines( infile )
> >>>>>>>
> >>>>>>>
> >>>>>>> # run just before crash
> >>>>>>> sessionInfo()
> >>>>>>> # R version 3.4.1 (2017-06-30)
> >>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
> >>>>>>> # Running under: Windows 10 x64 (build 15063)
> >>>>>>>
> >>>>>>> # Matrix products: default
> >>>>>>>
> >>>>>>> # locale:
> >>>>>>> # [1] LC_COLLATE=English_United States.1252
> >>>>>>> # [2] LC_CTYPE=English_United States.1252
> >>>>>>> # [3] LC_MONETARY=English_United States.1252
> >>>>>>> # [4] LC_NUMERIC=C
> >>>>>>> # [5] LC_TIME=English_United States.1252
> >>>>>>>
> >>>>>>> # attached base packages:
> >>>>>>> # [1] stats     graphics  grDevices utils     datasets  methods
> > base
> >>>>>>>
> >>>>>>> # loaded via a namespace (and not attached):
> >>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
> >>>>>>>  withr_1.0.2
> >>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
> >>>>>>> memoise_1.1.0
> >>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
> >>>>>>> lodown_0.1.0
> >>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
> >>>>>>> R.oo_1.21.0
> >>>>>>> # [17] archive_0.0.0.9000
> >>>>>>>
> >>>>>>>         [[alternative HTML version deleted]]
> >>>>>>>
> >>>>>>> ______________________________________________
> >>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> >see
> >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
> >>>>>>> ng-guide.html
> >>>>>>> and provide commented, minimal, self-contained, reproducible
> >code.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>
> >>>>>
> >>>>         [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>> PLEASE do read the posting guide http://www.R-project.org/posti
> >>>> ng-guide.html
> >>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>
> >>>>
> >>> ------------------------------------------------------------
> >>> ---------------
> >>> Jeff Newmiller                        The     .....       .....  Go
> >>> Live...
> >>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.
> >Live
> >>> Go...
> >>>                                      Live:   OO#.. Dead: OO#..
> >Playing
> >>> Research Engineer (Solar/Batteries            O.O#.       #.O#.
> >with
> >>> /Software/Embedded Controllers)               .OO#.       .OO#.
> >>> rocks...1k
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posti
> >>> ng-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>>
> >> ------------------------------------------------------------
> >> ---------------
> >> Jeff Newmiller                        The     .....       .....  Go
> >Live...
> >> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
> >> Go...
> >>                                       Live:   OO#.. Dead: OO#..
> >Playing
> >> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> >> /Software/Embedded Controllers)               .OO#.       .OO#.
> >rocks...1k
> >> ------------------------------------------------------------
> >> ---------------
> >>
>

	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Sun Jul 16 18:52:34 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 16 Jul 2017 09:52:34 -0700
Subject: [R] How to formulate quadratic function with interaction terms
	for the PLS fitting model?
In-Reply-To: <CAGxFJbRdFy94M788iNnU3afjOgGN-y+qyVXo9L8w5-qPaj6GcA@mail.gmail.com>
References: <CA+iG1-6MBiLpZ5EcT6iTg-9=K2wR=Wz=AroBi71MoHTBw1qYZw@mail.gmail.com>
 <CAGxFJbRp9LcLs0h0MWuz8nHYE5fJuHJbH=jZNV9qdwPewpw96w@mail.gmail.com>
 <51286F3E-EB8A-4077-9806-92792537EE4F@comcast.net>
 <CAGxFJbRdFy94M788iNnU3afjOgGN-y+qyVXo9L8w5-qPaj6GcA@mail.gmail.com>
Message-ID: <AFDCE6FB-3353-4C7C-BD81-3F90DE3BDC06@comcast.net>


> On Jul 16, 2017, at 8:47 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> ??
> If I haven't misunderstood, they are completely different!
> 
> 1) NIR must be a matrix, or poly(NIR,...) will fail.
> 2) Due to the previously identified bug in poly, degree must be
> explicitly given as poly(NIR, degree =2,raw = TRUE).
> 
> Now consider the following example:
> 
>> df <-matrix(runif(60),ncol=3)
>> y <- runif(20)
>> mdl1 <-lm(y~df*I(df^2))
>> mdl2 <-lm(y~df*poly(df,degree=2,raw=TRUE))
>> length(coef(mdl1))
> [1] 16
>> length(coef(mdl2))
> [1] 40
> 
> Explanation:
> In mdl1, I(df^2) gives the squared values of the 3 columns of df. The
> formula df*I(df^2) gives the 3 (linear) terms of df, the 3 pure
> quadratics of I(df^2), the 9 cubic terms obtained by crossing these,
> and the constant coefficient = 16 coefs.
> 
> In mdl2,  the poly() expression gives 9 variiables: 3 linear, 3 pure
> quadratic, 3 interactions (1.2, 1.3, 2.3) of these.  The df*poly()
> term would then give the 3 linear terms of df, the 9 terms of poly(),
> the crossings between these, and the constant coef = 40 coefs. Many of
> these will be NA since terms are repeated (e.g. the 3 linear terms of
> poly() and df) and therefore cannot be estimated.
> 
> Have I totally misunderstood what you meant or committed some other blunder?


I was thinking about different model specifications, but clearly I had failed to test my assumptions and will need to do more study:

> df <-matrix(runif(60),ncol=3)
> y <- runif(20)
> mdl1 <-lm(y~ df +I(df^2) )
> mdl2 <-lm(y~  poly(df,degree=2,raw=TRUE))
> mdl1

Call:
lm(formula = y ~ df + I(df^2))

Coefficients:
(Intercept)          df1          df2          df3     I(df^2)1     I(df^2)2     I(df^2)3  
     1.3382      -1.1431      -1.7894      -1.2675       0.9686       1.6605       1.0411  

> mdl2

Call:
lm(formula = y ~ poly(df, degree = 2, raw = TRUE))

Coefficients:
                          (Intercept)  poly(df, degree = 2, raw = TRUE)1.0.0  
                              1.28217                               -0.98032  
poly(df, degree = 2, raw = TRUE)2.0.0  poly(df, degree = 2, raw = TRUE)0.1.0  
                              0.89955                               -1.89019  
poly(df, degree = 2, raw = TRUE)1.1.0  poly(df, degree = 2, raw = TRUE)0.2.0  
                              0.09528                                1.63065  
poly(df, degree = 2, raw = TRUE)0.0.1  poly(df, degree = 2, raw = TRUE)1.0.1  
                             -1.03744                               -0.29368  
poly(df, degree = 2, raw = TRUE)0.1.1  poly(df, degree = 2, raw = TRUE)0.0.2  
                              0.09357                                0.93400  

> length(coef(mdl2))
[1] 10

I had been reason from my experience with atomic vectors. Clearly poly() handles matrices differently than the combination of `+.formula` with `I`. Thanks for furthering my education:

> df <-data.frame(y = runif(20), x=runif(20) )
> 
> (mdl1 <-lm(y~x +I(x^2) ,data=df) )

Call:
lm(formula = y ~ x + I(x^2), data = df)

Coefficients:
(Intercept)            x       I(x^2)  
     0.6435      -1.4477       1.8282  

> (mdl2 <-lm(y~  poly(x,degree=2,raw=TRUE), data=df) )

Call:
lm(formula = y ~ poly(x, degree = 2, raw = TRUE), data = df)

Coefficients:
                     (Intercept)  poly(x, degree = 2, raw = TRUE)1  
                          0.6435                           -1.4477  
poly(x, degree = 2, raw = TRUE)2  
                          1.8282  


Best;
David.


> 
> Cheers,
> Bert
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Sun, Jul 16, 2017 at 7:36 AM, David Winsemius <dwinsemius at comcast.net> wrote:
>> 
>>> On Jul 13, 2017, at 7:43 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>> 
>>> Below.
>>> 
>>> -- Bert
>>> Bert Gunter
>>> 
>>> 
>>> 
>>> On Thu, Jul 13, 2017 at 3:07 AM, Luigi Biagini <luigi.biagini at gmail.com> wrote:
>>>> I have two ideas about it.
>>>> 
>>>> 1-
>>>> i) Entering variables in quadratic form is done with the command I
>>>> (variable ^ 2) -
>>>> plsr (octane ~ NIR + I (nir ^ 2), ncomp = 10, data = gasTrain, validation =
>>>> "LOO"
>>>> You could also use a new variable NIR_sq <- (NIR) ^ 2
>>>> 
>>>> ii) To insert a square variable, use syntax I (x ^ 2) - it is very
>>>> important to insert I before the parentheses.
>>> 
>>> True, but better I believe: see ?poly.
>>> e.g. poly(cbind(x1,x2,x3), degree = 2, raw = TRUE) is a full quadratic
>>> polynomial in x1,x2,x3 .
>>> 
>> 
>> Is there any real difference between
>> 
>> octane ~ NIR * I(NIR^2)
>> octane ~ NIR * poly(NIR, degree=2, raw=TRUE)
>> 
>> ?
>> (I though that adding raw = TRUE prevented the beneficial process of centering the second degree terms.)
>> __
>> David
>>> 
>>>> 
>>>> iii) If you want to make the interaction between x and x ^ 2 use the
>>>> command ":" -> x: I(x ^ 2)
>>>> 
>>>> iv) For multiple interactions between x and x ^ 2 use the command "*" -> x
>>>> *I (x ^ 2)
>>>> 
>>>> i) plsr (octane ~ NIR + NIR_sq, ncomp = 10, data = gasTrain, validation =
>>>> "LOO") I (x ^ 2)
>>>> ii)p lsr (octane ~ NIR + I(NIR^2), ncomp = 10, data = gasTrain, validation
>>>> = "LOO") I (x ^ 2)
>>>> iii)p lsr (octane ~ NIR : I(NIR^2), ncomp = 10, data = gasTrain, validation
>>>> = "LOO") I (x ^ 2)
>>>> iv)p lsr (octane ~ NIR * I(NIR^2), ncomp = 10, data = gasTrain, validation
>>>> = "LOO") I (x ^ 2)
>>>> 
>>>> 2 - For your regression, did you plan to use MARS instead of PLS?
>>>> 
>>>> 
>>>> 
>>>> 
>>>> Dear all,
>>>>> I am using the pls package of R to perform partial least square on a set of
>>>>> multivariate data.  Instead of fitting a linear model, I want to fit my
>>>>> data with a quadratic function with interaction terms.  But I am not sure
>>>>> how.  I will use an example to illustrate my problem:
>>>>> Following the example in the PLS manual:
>>>>> ## Read data
>>>>> data(gasoline)
>>>>> gasTrain <- gasoline[1:50,]
>>>>> ## Perform PLS
>>>>> gas1 <- plsr(octane ~ NIR, ncomp = 10, data = gasTrain, validation = "LOO")
>>>>> where octane ~ NIR is the model that this example is fitting with.
>>>>> NIR is a collective of variables, i.e. NIR spectra consists of 401 diffuse
>>>>> reflectance measurements from 900 to 1700 nm.
>>>>> Instead of fitting with octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ...
>>>>> I want to fit the data with:
>>>>> octane[i] = a[0] * NIR[0,i] + a[1] * NIR[1,i] + ... +
>>>>> b[0]*NIR[0,i]*NIR[0,i] + b[1] * NIR[0,i]*NIR[1,i] + ...
>>>>> i.e. quadratic with interaction terms.
>>>>> But I don't know how to formulate this.
>>>>> May I have some help please?
>>>>> Thanks,
>>>>> Kelvin
>>>> 
>>>>       [[alternative HTML version deleted]]
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> David Winsemius
>> Alameda, CA, USA
>> 

David Winsemius
Alameda, CA, USA


From motyocska at yahoo.com  Sun Jul 16 13:12:03 2017
From: motyocska at yahoo.com (Andras Farkas)
Date: Sun, 16 Jul 2017 11:12:03 +0000 (UTC)
Subject: [R] select from data frame
In-Reply-To: <CAGxFJbSJs0DpegMWE0Z8Nyyx4yKeRhSbv7uX5+bMzBYpvXJG2w@mail.gmail.com>
References: <563240903.959259.1500116466430.ref@mail.yahoo.com>
 <563240903.959259.1500116466430@mail.yahoo.com>
 <75738441-23E0-4A39-A017-7F2657300425@comcast.net>
 <CAGxFJbRMr3Qs_Zfu63BJEJge332ha_aE776d+WVmfDuPm8m5TA@mail.gmail.com>
 <CAGxFJbSJs0DpegMWE0Z8Nyyx4yKeRhSbv7uX5+bMzBYpvXJG2w@mail.gmail.com>
Message-ID: <1469283769.1339143.1500203523395@mail.yahoo.com>

thank you David and Bert, these solutions will work for me...?Andras? 

    On Saturday, July 15, 2017 6:05 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
 

 ...
and here is a slightly cleaner and more transparent way of doing the
same thing (setdiff() does the matching)

> with(df, setdiff(ID,ID[samples %in% c("B","C") ]))
[1] 3

-- Bert



Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sat, Jul 15, 2017 at 9:23 AM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> If I understand correctly, no looping (ave(), for()) or type casting
> (as.character()) is needed -- indexing and matching suffice:
>
>> with(df, ID[!ID %in% unique(ID[samples %in% c("B","C") ])])
> [1] 3 3
>
>
>
> Cheers,
>
> Bert
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sat, Jul 15, 2017 at 8:54 AM, David Winsemius <dwinsemius at comcast.net> wrote:
>>
>>> On Jul 15, 2017, at 4:01 AM, Andras Farkas via R-help <r-help at r-project.org> wrote:
>>>
>>> Dear All,
>>>
>>> wonder if you could please assist with the following
>>>
>>> df<-data.frame(ID=c(1,1,1,2,2,3,3,4,4,5,5),samples=c("A","B","C","A","C","A","D","C","B","A","C"))
>>>
>>> from this data frame the goal is to extract the value of 3 from the ID column based on the logic that the ID=3 in the data frame has NO row that would pair 3 with either "B", AND/OR "C" in the samples column...
>>>
>>
>> This returns a vector that determines if either of those characters are in the character values of that factor column you created. Coercing to character is needed because leaving samples as a factor generated an invalid factor level warning and gave useless results.
>>
>>? with( df, ave( as.character(samples), ID, FUN=function(x) {!any(x %in% c("B","C"))}))
>>? [1] "FALSE" "FALSE" "FALSE" "FALSE" "FALSE" "TRUE"? "TRUE"? "FALSE" "FALSE"
>> [10] "FALSE" "FALSE"
>>
>> You can then use it to extract and consolidate to a single value (although wrapping with as.logical was needed because `ave` returned character class values):
>>
>>? unique( df$ID[ as.logical(? # fails without this since "FALSE" != FALSE
>>? ? ? ? ? ? ? ? ? ? with( df,
>>? ? ? ? ? ? ? ? ? ? ? ? ave( as.character(samples), ID, FUN=function(x) {!any(x %in% c("B","C"))})))
>>? ? ? ? ? ? ? ] )
>> #[1] 3
>>
>> The same sort of logic could also be constructed with a for-loop:
>>
>>> for (x in unique(df$ID) ) { if ( !any( df$samples[df$ID==x] %in% c("b","C")) ) print(x) }
>> [1] 3
>>
>> Although you are warned that for-loops do not return values and you might need to make an assignment rather than just printing.
>>
>> --
>>
>> David Winsemius
>> Alameda, CA, USA
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

   
	[[alternative HTML version deleted]]


From snada.g14 at gmail.com  Sun Jul 16 15:36:22 2017
From: snada.g14 at gmail.com (Nada Gh)
Date: Sun, 16 Jul 2017 16:36:22 +0300
Subject: [R] label sunflower point
Message-ID: <CAKNiqew1K=Z9PDAmZt9YrfgaQ+ao9vuMw+oBRjMLtoPeq_npLw@mail.gmail.com>

Hi,

I create a plot using sunflowerplot, I need to highlight one point to show
its importance. What suggestion you have to accomplish this?

Thanks,
Aden

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Sun Jul 16 20:22:09 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 16 Jul 2017 11:22:09 -0700
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDwCWpYGkr+FzciYAiOdvYd5Nb3Mtg3WKd7X9mK84h346g@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
 <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>
 <563F4EC8-23B0-4D35-8710-F420E67115F3@dcn.davis.ca.us>
 <CAOwvMDwCWpYGkr+FzciYAiOdvYd5Nb3Mtg3WKd7X9mK84h346g@mail.gmail.com>
Message-ID: <9A0296EC-4120-40E5-8365-0EAE03F54F7D@dcn.davis.ca.us>

I am stuck. The archive package won't compile for me on Ubuntu, and the CRANextra repo seems to be down so I cannot install packages on Windows right now. Perhaps you can zip the corrupt text file and put it online somewhere? Don't use the archive package to pack it since there seem to be issues with that tool on your machine. 

I would discourage you from harassing the Brazilian government about their RAR file because the RAR file seems fine (no NUL characters appear in the text file) when extracted using the file-roller archive tool on Ubuntu.
-- 
Sent from my phone. Please excuse my brevity.

On July 16, 2017 9:37:17 AM PDT, Anthony Damico <ajdamico at gmail.com> wrote:
>hi, yep, there are two problems -- but i think only the segfault is
>within
>the scope of a base R issue?  i need to look closer at the corrupted
>decompression and figure out whether i should talk to the brazilian
>government agency that creates that .rar file or open an issue with the
>archive package maintainer.  my goal in this thread is only to figure
>out
>how to replicate the goofy text file so the r team can turn it into an
>error instead of a segfault.
>
>the original example i sent stores the .txt file somewhere inside the
>tempdir(), but when i copy it over elsewhere on my machine, the
>md5sum()
>gives the same result.  thanks again for looking at this
>
>    > tools::md5sum(infile)
>
>C:\\Users\\AnthonyD\\AppData\\Local\\Temp\\RtmpIBy7qt/file_folder/Microdados
>ENEM 2009/Dados Enem 2009/DADOS_ENEM_2009.txt
>    "30beb57419486108e98d42ec7a2f8b19"
>
>
>    > tools::md5sum( "S:/temp/crash.txt" )
>                     S:/temp/crash.txt
>    "30beb57419486108e98d42ec7a2f8b19"
>
>
>
>
>On Sun, Jul 16, 2017 at 10:10 AM, Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> So you are saying there are two problems... one that produces a
>corrupt
>> file from a valid compressed file, and one that segfaults when
>presented
>> with that corrupt file? Can you please confirm the file name and run
>md5sum
>> on it and share the result so we can tell when the file problem has
>been
>> reproduced?
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> On July 16, 2017 3:21:21 AM PDT, Anthony Damico <ajdamico at gmail.com>
>> wrote:
>> >hi, thank you for attempting this. it looks like your unix machine
>> >unzipped
>> >the txt file without corruption -- if you copied over the same txt
>file
>> >to
>> >windows 7, i don't think that would reproduce the problem?  i think
>it
>> >needs to be the corrupted text file where   R.utils::countLines(
>> >txtfile
>> >)   gives 809367.  i am able to reproduce on two distinct windows
>> >machines
>> >but no guarantee i'm not doing something dumb
>> >
>> >On Sat, Jul 15, 2017 at 6:29 PM, Jeff Newmiller
>> ><jdnewmil at dcn.davis.ca.us>
>> >wrote:
>> >
>> >> I am not able to reproduce your segfault on a Windows 7 platform
>> >either:
>> >>
>> >> ##########################
>> >> fn1 <- "d:/DADOS_ENEM_2009.txt"
>> >> sessionInfo()
>> >> ## R version 3.4.1 (2017-06-30)
>> >> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
>> >> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
>> >> ##
>> >> ## Matrix products: default
>> >> ##
>> >> ## locale:
>> >> ## [1] LC_COLLATE=English_United States.1252
>> >> ## [2] LC_CTYPE=English_United States.1252
>> >> ## [3] LC_MONETARY=English_United States.1252
>> >> ## [4] LC_NUMERIC=C
>> >> ## [5] LC_TIME=English_United States.1252
>> >> ##
>> >> ## attached base packages:
>> >> ## [1] stats     graphics  grDevices utils     datasets  methods
>> >base
>> >> ##
>> >> ## loaded via a namespace (and not attached):
>> >> ## [1] compiler_3.4.1
>> >> tools::md5sum( fn1 )
>> >> ##             d:/DADOS_ENEM_2009.txt
>> >> ## "83e61c96092285b60d7bf6b0dbc7072e"
>> >> dat <- readLines( fn1 )
>> >> length( dat )
>> >> ## [1] 4148721
>> >>
>> >>
>> >> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
>> >>
>> >> I am not able to reproduce this on a Linux platform:
>> >>>
>> >>> #######################3
>> >>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>> >>> 2009/DADOS_ENEM_2009.txt"
>> >>> sessionInfo()
>> >>> ## R version 3.4.1 (2017-06-30)
>> >>> ## Platform: x86_64-pc-linux-gnu (64-bit)
>> >>> ## Running under: Ubuntu 14.04.5 LTS
>> >>> ##
>> >>> ## Matrix products: default
>> >>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
>> >>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
>> >>> ##
>> >>> ## locale:
>> >>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> >>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>> >>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>> >>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>> >>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> >>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> >>> ##
>> >>> ## attached base packages:
>> >>> ## [1] stats     graphics  grDevices utils     datasets  methods
>> >base
>> >>> ##
>> >>> ## loaded via a namespace (and not attached):
>> >>> ## [1] compiler_3.4.1
>> >>> tools::md5sum( fn1 )
>> >>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>> >>> 2009/DADOS_ENEM_2009.txt
>> >>> ##
>> >>> "83e61c96092285b60d7bf6b0dbc7072e"
>> >>> dat <- readLines( fn1 )
>> >>> length( dat )
>> >>> ## [1] 4148721
>> >>>
>> >>> No segfault occurs.
>> >>>
>> >>> On Sat, 15 Jul 2017, Anthony Damico wrote:
>> >>>
>> >>> hi, i realized that the segfault happens on the text file in a
>new R
>> >>>> session.  so, creating the segfault-generating text file
>requires a
>> >>>> contributed package, but prompting the actual segfault does not
>--
>> >pretty
>> >>>> sure that means this is a base R bug?  submitted here:
>> >>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311
>> >hopefully i
>> >>>> am
>> >>>> not doing something remarkably stupid.  the text file itself is
>4GB
>> >so
>> >>>> cannot upload it to bugzilla, and from the R_AllocStringBugger
>> >error in
>> >>>> the
>> >>>> previous message, i think most or all of it needs to be there to
>> >trigger
>> >>>> the segfault.  thanks!
>> >>>>
>> >>>>
>> >>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico
>> ><ajdamico at gmail.com>
>> >>>> wrote:
>> >>>>
>> >>>> hi, thanks Dr. Murdoch
>> >>>>>
>> >>>>>
>> >>>>> i'd appreciate if anyone on r-help could help me narrow this
>down?
>> > i
>> >>>>> believe the segfault occurs because there's a single line with
>4GB
>> >and
>> >>>>> also
>> >>>>> embedded nuls, but i am not sure how to artificially construct
>> >that?
>> >>>>>
>> >>>>>
>> >>>>> the lodown package can be removed from my example..  it is just
>> >for file
>> >>>>> download cacheing, so `lodown::cachaca` can be replaced with
>> >>>>> `download.file`  my current example requires a huge download,
>so
>> >sort of
>> >>>>> painful to repeat but i'm pretty confident that's not the
>issue.
>> >>>>>
>> >>>>>
>> >>>>> the archive::archive_extract() function unzips a (probably
>> >corrupt) .RAR
>> >>>>> file and creates a text file with 80,937 lines.  this file is
>4GB:
>> >>>>>
>> >>>>>    > file.size(infile)
>> >>>>>     [1] 4078192743 <(407)%20819-2743>
>> >>>>>
>> >>>>>
>> >>>>> i am pretty sure that nearly all of that 4GB is contained on a
>> >single
>> >>>>> line
>> >>>>> in the file.  here's what happens when i create a file
>connection
>> >and
>> >>>>> scan
>> >>>>> through..
>> >>>>>
>> >>>>>    > file_con <- file( infile , 'r' )
>> >>>>>    >
>> >>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "1000023930632009"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "36F2924009PAULO"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "AFONSO"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "BA11"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "00000"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "00"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "2924009PAULO"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "AFONSO"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "BA1111"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "467.20"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "346.10"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Read 1 item
>> >>>>>     [1] "414.40"
>> >>>>>    > scan( w , n = 1 , what = character() )
>> >>>>>     Error in scan(w, n = 1, what = character()) :
>> >>>>>       could not allocate memory (2048 Mb) in C function
>> >>>>> 'R_AllocStringBuffer'
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>> making a huge single-line file does not reproduce the problem,
>i
>> >think
>> >>>>> the
>> >>>>> embedded nuls have something to do with it--
>> >>>>>
>> >>>>>
>> >>>>>     # WARNING do not run with less than 64GB RAM
>> >>>>>     tf <- tempfile()
>> >>>>>     a <- rep( "a" , 1000000000 )
>> >>>>>     b <- paste( a , collapse = '' )
>> >>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>> >>>>>     d <- readLines( tf )
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
>> >>>>> murdoch.duncan at gmail.com>
>> >>>>> wrote:
>> >>>>>
>> >>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>> >>>>>>
>> >>>>>> hello, the last line of the code below causes a segfault for
>me
>> >on
>> >>>>>>> 3.4.1.
>> >>>>>>> i think i should submit to https://bugs.r-project.org/ 
>unless
>> >others
>> >>>>>>> have
>> >>>>>>> advice?  thanks
>> >>>>>>>
>> >>>>>>>
>> >>>>>> Segfaults are usually worth reporting as bugs.  Try to come up
>> >with a
>> >>>>>> self-contained example, not using the lodown and archive
>> >packages.  I
>> >>>>>> imagine you can do this by uploading the file you downloaded,
>or
>> >>>>>> enough of
>> >>>>>> a subset of it to trigger the segfault.  If you can't do that,
>> >then
>> >>>>>> likely
>> >>>>>> the bug is with one of those packages, not with R.
>> >>>>>>
>> >>>>>> Duncan Murdoch
>> >>>>>>
>> >>>>>>
>> >>>>>>
>> >>>>>>>
>> >>>>>>>
>> >>>>>>>
>> >>>>>>> install.packages( "devtools" )
>> >>>>>>> devtools::install_github("ajdamico/lodown")
>> >>>>>>> devtools::install_github("jimhester/archive")
>> >>>>>>>
>> >>>>>>>
>> >>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>> >>>>>>>
>> >>>>>>> tf <- tempfile()
>> >>>>>>>
>> >>>>>>> # large download!  cachaca saves on your local disk if
>already
>> >>>>>>> downloaded
>> >>>>>>> lodown::cachaca( '
>> >>>>>>>
>http://download.inep.gov.br/microdados/microdados_enem2009.rar'
>> >, tf
>> >>>>>>> ,
>> >>>>>>> mode
>> >>>>>>> = 'wb' )
>> >>>>>>>
>> >>>>>>> archive::archive_extract( tf , dir = normalizePath(
>file_folder
>> >) )
>> >>>>>>>
>> >>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE
>,
>> >>>>>>> full.names =
>> >>>>>>> TRUE  )
>> >>>>>>>
>> >>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value =
>> >TRUE )
>> >>>>>>>
>> >>>>>>> # works
>> >>>>>>> R.utils::countLines( infile )
>> >>>>>>>
>> >>>>>>> # works with warning
>> >>>>>>> my_file <- readLines( infile , skipNul = TRUE )
>> >>>>>>>
>> >>>>>>> # crash
>> >>>>>>> my_file <- readLines( infile )
>> >>>>>>>
>> >>>>>>>
>> >>>>>>> # run just before crash
>> >>>>>>> sessionInfo()
>> >>>>>>> # R version 3.4.1 (2017-06-30)
>> >>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>> >>>>>>> # Running under: Windows 10 x64 (build 15063)
>> >>>>>>>
>> >>>>>>> # Matrix products: default
>> >>>>>>>
>> >>>>>>> # locale:
>> >>>>>>> # [1] LC_COLLATE=English_United States.1252
>> >>>>>>> # [2] LC_CTYPE=English_United States.1252
>> >>>>>>> # [3] LC_MONETARY=English_United States.1252
>> >>>>>>> # [4] LC_NUMERIC=C
>> >>>>>>> # [5] LC_TIME=English_United States.1252
>> >>>>>>>
>> >>>>>>> # attached base packages:
>> >>>>>>> # [1] stats     graphics  grDevices utils     datasets 
>methods
>> > base
>> >>>>>>>
>> >>>>>>> # loaded via a namespace (and not attached):
>> >>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>> >>>>>>>  withr_1.0.2
>> >>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>> >>>>>>> memoise_1.1.0
>> >>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>> >>>>>>> lodown_0.1.0
>> >>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>> >>>>>>> R.oo_1.21.0
>> >>>>>>> # [17] archive_0.0.0.9000
>> >>>>>>>
>> >>>>>>>         [[alternative HTML version deleted]]
>> >>>>>>>
>> >>>>>>> ______________________________________________
>> >>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>> >see
>> >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>>>>> PLEASE do read the posting guide
>http://www.R-project.org/posti
>> >>>>>>> ng-guide.html
>> >>>>>>> and provide commented, minimal, self-contained, reproducible
>> >code.
>> >>>>>>>
>> >>>>>>>
>> >>>>>>>
>> >>>>>>
>> >>>>>
>> >>>>         [[alternative HTML version deleted]]
>> >>>>
>> >>>> ______________________________________________
>> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>see
>> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>>> PLEASE do read the posting guide http://www.R-project.org/posti
>> >>>> ng-guide.html
>> >>>> and provide commented, minimal, self-contained, reproducible
>code.
>> >>>>
>> >>>>
>> >>> ------------------------------------------------------------
>> >>> ---------------
>> >>> Jeff Newmiller                        The     .....       ..... 
>Go
>> >>> Live...
>> >>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.
>> >Live
>> >>> Go...
>> >>>                                      Live:   OO#.. Dead: OO#..
>> >Playing
>> >>> Research Engineer (Solar/Batteries            O.O#.       #.O#.
>> >with
>> >>> /Software/Embedded Controllers)               .OO#.       .OO#.
>> >>> rocks...1k
>> >>>
>> >>> ______________________________________________
>> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >>> PLEASE do read the posting guide http://www.R-project.org/posti
>> >>> ng-guide.html
>> >>> and provide commented, minimal, self-contained, reproducible
>code.
>> >>>
>> >>>
>> >> ------------------------------------------------------------
>> >> ---------------
>> >> Jeff Newmiller                        The     .....       ..... 
>Go
>> >Live...
>> >> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#. 
>Live
>> >> Go...
>> >>                                       Live:   OO#.. Dead: OO#..
>> >Playing
>> >> Research Engineer (Solar/Batteries            O.O#.       #.O#. 
>with
>> >> /Software/Embedded Controllers)               .OO#.       .OO#.
>> >rocks...1k
>> >> ------------------------------------------------------------
>> >> ---------------
>> >>
>>


From dwinsemius at comcast.net  Sun Jul 16 20:23:21 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 16 Jul 2017 11:23:21 -0700
Subject: [R] label sunflower point
In-Reply-To: <CAKNiqew1K=Z9PDAmZt9YrfgaQ+ao9vuMw+oBRjMLtoPeq_npLw@mail.gmail.com>
References: <CAKNiqew1K=Z9PDAmZt9YrfgaQ+ao9vuMw+oBRjMLtoPeq_npLw@mail.gmail.com>
Message-ID: <27E02D44-CBCB-475F-9A5A-5F9369A8B39F@comcast.net>


> On Jul 16, 2017, at 6:36 AM, Nada Gh <snada.g14 at gmail.com> wrote:
> 
> Hi,
> 
> I create a plot using sunflowerplot, I need to highlight one point to show
> its importance. What suggestion you have to accomplish this?
> 
> Thanks,
> Aden
> 
> 	[[alternative HTML version deleted]]

Please read the Posting Guide. You are expected to provide example data and code. Also, Rhelp is a plain text mailing list and you are sending HTML-formatted messages.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From jdnewmil at dcn.davis.ca.us  Sun Jul 16 23:07:14 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 16 Jul 2017 14:07:14 -0700 (PDT)
Subject: [R] Arranging column data to create plots
In-Reply-To: <1500176954.167624315@webmail.reagan.com>
References: <1500176954.167624315@webmail.reagan.com>
Message-ID: <alpine.BSF.2.00.1707161357090.25724@pedal.dcn.davis.ca.us>

On Sat, 15 Jul 2017, Michael Reed via R-help wrote:

> Dear All,
>
> I need some help arranging data that was imported.

It would be helpful if you were to use dput to give us the sample data 
since you say you have already imported it.

> The imported data frame looks something like this (the actual file is 
> huge, so this is example data)
>
> DF:
> IDKey  X1  Y1  X2  Y2  X3  Y3  X4  Y4
> Name1  21  15  25  10
> Name2  15  18  35  24  27  45
> Name3  17  21  30  22  15  40  32  55

That data is missing in X3 etc, but would be NA in an actual data frame, 
so I don't know if my workaround was the same as your workaround. Dput
would have clarified the starting point.

> I would like to create a new data frame with the following
>
> NewDF:
> IDKey   X   Y
> Name1  21  15
> Name1  25  10
> Name2  15  18
> Name2  35  24
> Name2  27  45
> Name3  17  21
> Name3  30  22
> Name3  15  40
> Name3  32  55
>
> With the data like this I think I can do the following
>
> ggplot(NewDF, aes(x=X, y=Y, color=IDKey) + geom_line

You are missing parentheses. If you use the reprex library to test your 
examples before posting them, you can be sure your simple errors don't 
send us off on wild goose chases.

> and get 3 lines with the various number of points.
>
> The point is that each of the XY pairs is a data point tied to NameX. 
> I would like to rearrange the data so I can plot the points/lines by the 
> IDKey.  There will be at least 2 points, but the number of points for 
> each IDKey can be as many as 4.
>
> I have tried using the gather() function from the tidyverse package, but

The tidyverse package is a virtual package that pulls in many packages.

> I can't make it work.  The issue is that I believe I need two separate 
> gather statements (one for X, another for Y) to consolidate the data. 
> This causes the pairs to not stay together and the data becomes jumbled.

No, what you need is a gather-spread.

######
library(dplyr)
library(tidyr)

DF <- read.table( text=
"IDKey  X1  Y1  X2  Y2  X3  Y3  X4  Y4
Name1   21  15  25  10  NA  NA  NA  NA
Name2   15  18  35  24  27  45  NA  NA
Name3   17  21  30  22  15  40  32  55
", header=TRUE, as.is=TRUE )

NewDF <- (   dta
          %>% gather( XY, value, -IDKey )
          %>% separate( XY, c( "Coord", "Num" ), 1 )
          %>% spread( Coord, value )
          %>% filter( !is.na( X ) & !is.na( Y ) )
          )
######

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From jdnewmil at dcn.davis.ca.us  Sun Jul 16 23:48:51 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 16 Jul 2017 14:48:51 -0700 (PDT)
Subject: [R] Arranging column data to create plots
In-Reply-To: <alpine.BSF.2.00.1707161357090.25724@pedal.dcn.davis.ca.us>
References: <1500176954.167624315@webmail.reagan.com>
 <alpine.BSF.2.00.1707161357090.25724@pedal.dcn.davis.ca.us>
Message-ID: <alpine.BSF.2.00.1707161443280.25724@pedal.dcn.davis.ca.us>

Correction at the end.

On Sun, 16 Jul 2017, Jeff Newmiller wrote:

> On Sat, 15 Jul 2017, Michael Reed via R-help wrote:
>
>> Dear All,
>> 
>> I need some help arranging data that was imported.
>
> It would be helpful if you were to use dput to give us the sample data since 
> you say you have already imported it.
>
>> The imported data frame looks something like this (the actual file is huge, 
>> so this is example data)
>> 
>> DF:
>> IDKey  X1  Y1  X2  Y2  X3  Y3  X4  Y4
>> Name1  21  15  25  10
>> Name2  15  18  35  24  27  45
>> Name3  17  21  30  22  15  40  32  55
>
> That data is missing in X3 etc, but would be NA in an actual data frame, so I 
> don't know if my workaround was the same as your workaround. Dput
> would have clarified the starting point.
>
>> I would like to create a new data frame with the following
>> 
>> NewDF:
>> IDKey   X   Y
>> Name1  21  15
>> Name1  25  10
>> Name2  15  18
>> Name2  35  24
>> Name2  27  45
>> Name3  17  21
>> Name3  30  22
>> Name3  15  40
>> Name3  32  55
>> 
>> With the data like this I think I can do the following
>> 
>> ggplot(NewDF, aes(x=X, y=Y, color=IDKey) + geom_line
>
> You are missing parentheses. If you use the reprex library to test your 
> examples before posting them, you can be sure your simple errors don't send 
> us off on wild goose chases.
>
>> and get 3 lines with the various number of points.
>> 
>> The point is that each of the XY pairs is a data point tied to NameX. I 
>> would like to rearrange the data so I can plot the points/lines by the 
>> IDKey.  There will be at least 2 points, but the number of points for each 
>> IDKey can be as many as 4.
>> 
>> I have tried using the gather() function from the tidyverse package, but
>
> The tidyverse package is a virtual package that pulls in many packages.
>
>> I can't make it work.  The issue is that I believe I need two separate 
>> gather statements (one for X, another for Y) to consolidate the data. This 
>> causes the pairs to not stay together and the data becomes jumbled.
>
> No, what you need is a gather-spread.
>
> ######
> library(dplyr)
> library(tidyr)
>
> DF <- read.table( text=
> "IDKey  X1  Y1  X2  Y2  X3  Y3  X4  Y4
> Name1   21  15  25  10  NA  NA  NA  NA
> Name2   15  18  35  24  27  45  NA  NA
> Name3   17  21  30  22  15  40  32  55
> ", header=TRUE, as.is=TRUE )
>
> NewDF <- (   dta
>         %>% gather( XY, value, -IDKey )
>         %>% separate( XY, c( "Coord", "Num" ), 1 )
>         %>% spread( Coord, value )
>         %>% filter( !is.na( X ) & !is.na( Y ) )
>         )
> ######

Sorry, should have practiced what I preached...

##########
library(dplyr)
#>
#> Attaching package: 'dplyr'
#> The following objects are masked from 'package:stats':
#>
#>     filter, lag
#> The following objects are masked from 'package:base':
#>
#>     intersect, setdiff, setequal, union
library(tidyr)

DF <- structure(list(IDKey = c("Name1", "Name2", "Name3"), X1 = c(21L, 
15L, 17L), Y1 = c(15L, 18L, 21L), X2 = c(25L, 35L, 30L), Y2 = c(10L, 24L, 
22L), X3 = c(NA, 27L, 15L), Y3 = c(NA, 45L, 40L), X4 = c(NA, NA, 32L), Y4 
= c(NA, NA, 55L)), .Names = c("IDKey", "X1", "Y1", "X2", "Y2", "X3", "Y3", 
"X4", "Y4"), class = "data.frame", row.names = c(NA, -3L))

NewDF <- (   DF
          %>% gather( XY, value, -IDKey )
          %>% separate( XY, c( "Coord", "Num" ), 1 )
          %>% spread( Coord, value )
          %>% filter( !is.na( X ) & !is.na( Y ) )
          )
NewDF
#>   IDKey Num  X  Y
#> 1 Name1   1 21 15
#> 2 Name1   2 25 10
#> 3 Name2   1 15 18
#> 4 Name2   2 35 24
#> 5 Name2   3 27 45
#> 6 Name3   1 17 21
#> 7 Name3   2 30 22
#> 8 Name3   3 15 40
#> 9 Name3   4 32 55
##########

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From drjimlemon at gmail.com  Mon Jul 17 00:33:50 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Mon, 17 Jul 2017 08:33:50 +1000
Subject: [R] About doing figures
In-Reply-To: <CAN5afy9Vi3jOG30FJOm48GG6xu+enbY0KDdnF3V9umsCn-0brQ@mail.gmail.com>
References: <CAN5afy8iJ4y1ktGT-+mtk241j5J3T+zZJ+HjtEhZGWtSp4BCXw@mail.gmail.com>
 <CA+8X3fWQMRgsqeqz_V=P9wZ=ZK=fAo9BAU61e8OPY206wdQf9Q@mail.gmail.com>
 <CAN5afy8DCE2Ni6PFF0JfymQPhqy+a6xBL=RKarpqD7YfDtxW6A@mail.gmail.com>
 <CAN5afy9Vi3jOG30FJOm48GG6xu+enbY0KDdnF3V9umsCn-0brQ@mail.gmail.com>
Message-ID: <CA+8X3fXXr113iGsOoT6J_sUZXEGYr3FfXe9fqiRxnLraJgbMhQ@mail.gmail.com>

Hi lily,
To answer your questions more or less in order:

rainbow() is an easy way to get a small number of distinct colors. You
only had nine unique values in "dfm$A". Obviously it gets harder to
distinguish colors when you have more of them, so just increasing the
number that rainbow() returns will eventually make some of the colors
hard to distinguish. You can use any method of getting distinct colors
that you want, but simply indexing into colors() does not guarantee
you will get distinct colors.

As you had used the "ncol" argument in your example, I thought you
knew how to stretch out the legend horizontally. I only added the
second legend as a suggestion. How does the viewer know about the
symbols and DF?

Jim


On Mon, Jul 17, 2017 at 1:30 AM, lily li <chocold12 at gmail.com> wrote:
> For more than 10 records, how to reformat the colors? Also, how to show the
> first legend only, but at the bottom, while the second legend in your code
> is not necessary? In all, the same A values have the same color, but
> different symbols in DF==1 and DF==2.
> Thanks for your help.
>
> On Sun, Jul 16, 2017 at 9:28 AM, lily li <chocold12 at gmail.com> wrote:
>>
>> Hi Jim,
>>
>> For true color, I meant that the points in the figure do not correspond to
>> the values from the dataframe. Also, why to use rainbow(9) here? And the
>> legend is straight in the middle, is it possible to reformat it to the very
>> bottom? Thanks again.
>>
>> On Sun, Jul 16, 2017 at 2:50 AM, Jim Lemon <drjimlemon at gmail.com> wrote:
>>>
>>> Hi lily,
>>> As I have no idea of what the "true record" is, I can only guess.
>>> Maybe this will help:
>>>
>>> # get some fairly distinct colors
>>> rainbow_colors<-rainbow(9)
>>> # this should sort the numbers in dfm$A
>>> dfm$Acolor<-factor(dfm$A)
>>> plot(dfm$B,dfm$C,pch=ifelse(dfm$DF==1,1,19),
>>>  col=rainbow_colors[as.numeric(dfm$Acolor)])
>>> legend("bottom",legend=sort(unique(dfm$A)),
>>>  fill=rainbow_colors)
>>> legend(25,35,c("DF=1","DF=2"),pch=c(1,19))
>>>
>>> Jim
>>>
>>>
>>> On Sun, Jul 16, 2017 at 3:43 PM, lily li <chocold12 at gmail.com> wrote:
>>> > Hi R users,
>>> >
>>> > I still have the problem about plotting. I wanted to put the datasets
>>> > on
>>> > one figure, x-axis represents values B, y-axis represents values C,
>>> > while
>>> > different colors label column A. Each record uses a circle on the
>>> > figure,
>>> > while hollow circles represent DF=1 and solid circles represent DF=2. I
>>> > put
>>> > my code below, but the A labels do not correspond to the true record,
>>> > so I
>>> > don't know what is the problem. Thanks for your help.
>>> >
>>> > dfm
>>> > dfm1= subset(dfm, DF==1)
>>> > dfm2= subset(dfm, DF==2)
>>> > plot(c(15:30),seq(from=0,to=60,by=4),pch=19,col=NULL,xlab='Value
>>> > B',ylab='Value C')
>>> > Color = as.factor(dfm1$A)
>>> > colordist = grDevices::colors()[grep('gr(a|e)y', grDevices::colors(),
>>> > invert = T)] # for unique colors
>>> > Color.unq = sample(colordist,length(Color))
>>> >
>>> > points(dfm1[,3],dfm1[,4],col=Color.unq,pch=1)
>>> > points(dfm2[,3],dfm2[,4],col=Color.unq,pch=19)
>>> >
>>> > legend('bottom',as.character(Color.unq),col=Color.unq,lwd=rep(2,length(Color.unq)),cex=.6,ncol=5)
>>> >
>>> > legend('bottom',as.character(Color),col=Color.unq,lwd=3,cex=.6,ncol=5,text.width=c(9.55,9.6,9.55))
>>> >
>>> > dfm is the dataframe below.
>>> >
>>> > DF   A  B  C
>>> > 1     65 21 54
>>> > 1     66 23 55
>>> > 1     54 24 56
>>> > 1     44 23 53
>>> > 1     67 22 52
>>> > 1     66 21 50
>>> > 1     45 20 51
>>> > 1     56 19 57
>>> > 1     40 25 58
>>> > 1     39 24 53
>>> > 2     65 25 52
>>> > 2     66 20 50
>>> > 2     54 21 48
>>> > 2     44 30 49
>>> > 2     67 27 50
>>> > 2     66 20 30
>>> > 2     45 25 56
>>> > 2     56 14 51
>>> > 2     40 29 48
>>> > 2     39 29 23
>>> >
>>> >         [[alternative HTML version deleted]]
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> > http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>
>>
>


From jeremiejuste at gmail.com  Mon Jul 17 07:27:40 2017
From: jeremiejuste at gmail.com (Jeremie Juste)
Date: Mon, 17 Jul 2017 07:27:40 +0200
Subject: [R] Matrix logical operator
Message-ID: <87h8ybocoj.fsf@freegnu.noherd.org>


Hello,

I have some trouble understanding why !b &&TRUE is TRUE. Do you have an idea?


> b <- matrix(c(0,1,1,0,1,0),2)

> !b
      [,1]  [,2]  [,3]
[1,]  TRUE FALSE FALSE
[2,] FALSE  TRUE  TRUE
> !b &&TRUE
[1] TRUE


Best regards,

Jeremie


From bhh at xs4all.nl  Mon Jul 17 07:47:55 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Mon, 17 Jul 2017 07:47:55 +0200
Subject: [R] Matrix logical operator
In-Reply-To: <87h8ybocoj.fsf@freegnu.noherd.org>
References: <87h8ybocoj.fsf@freegnu.noherd.org>
Message-ID: <1570B633-ED14-47C6-9CFB-7908C9567006@xs4all.nl>


> On 17 Jul 2017, at 07:27, Jeremie Juste <jeremiejuste at gmail.com> wrote:
> 
> 
> Hello,
> 
> I have some trouble understanding why !b &&TRUE is TRUE. Do you have an idea?
> 
> 
>> b <- matrix(c(0,1,1,0,1,0),2)
> 
>> !b
>      [,1]  [,2]  [,3]
> [1,]  TRUE FALSE FALSE
> [2,] FALSE  TRUE  TRUE
>> !b &&TRUE
> [1] TRUE
> 

Read the help for &&. You can see it like this: ?`&&`
Try

!b[1] && TRUE

and

!b[2] && TRUE


Berend hasselman

> Best regards,
> 
> Jeremie
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ajdamico at gmail.com  Mon Jul 17 14:00:48 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Mon, 17 Jul 2017 08:00:48 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <9A0296EC-4120-40E5-8365-0EAE03F54F7D@dcn.davis.ca.us>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
 <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>
 <563F4EC8-23B0-4D35-8710-F420E67115F3@dcn.davis.ca.us>
 <CAOwvMDwCWpYGkr+FzciYAiOdvYd5Nb3Mtg3WKd7X9mK84h346g@mail.gmail.com>
 <9A0296EC-4120-40E5-8365-0EAE03F54F7D@dcn.davis.ca.us>
Message-ID: <CAOwvMDy0BtwTfZoqB1JyVh26j9ib3yXJS8kETDMq=sUu6RRM+A@mail.gmail.com>

hi, thanks again for taking the time.  since corrupted compression prompted
the segfault for me in the first place, i've just posted the text file
as-is.  it's a 2.4GB file so to be avoided on a metered internet
connection.  i've updated the bugzilla report at
https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311 with more
relevant info.  these lines of code crash both windows R 3.4.1 and also
linux R 3.3.3 for me.  thanks again


    # consider changing `tempfile()` to a permanent location
    # so you don't lose the large downloaded file after the crash
    tf <- tempfile()
    download.file( "https://sisyphus.project.cwi.nl/r-bug-17311-crash.txt"
, tf , mode = 'wb' )
    sessionInfo()
    x <- readLines( tf )




On Sun, Jul 16, 2017 at 2:22 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> I am stuck. The archive package won't compile for me on Ubuntu, and the
> CRANextra repo seems to be down so I cannot install packages on Windows
> right now. Perhaps you can zip the corrupt text file and put it online
> somewhere? Don't use the archive package to pack it since there seem to be
> issues with that tool on your machine.
>
> I would discourage you from harassing the Brazilian government about their
> RAR file because the RAR file seems fine (no NUL characters appear in the
> text file) when extracted using the file-roller archive tool on Ubuntu.
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 16, 2017 9:37:17 AM PDT, Anthony Damico <ajdamico at gmail.com>
> wrote:
> >hi, yep, there are two problems -- but i think only the segfault is
> >within
> >the scope of a base R issue?  i need to look closer at the corrupted
> >decompression and figure out whether i should talk to the brazilian
> >government agency that creates that .rar file or open an issue with the
> >archive package maintainer.  my goal in this thread is only to figure
> >out
> >how to replicate the goofy text file so the r team can turn it into an
> >error instead of a segfault.
> >
> >the original example i sent stores the .txt file somewhere inside the
> >tempdir(), but when i copy it over elsewhere on my machine, the
> >md5sum()
> >gives the same result.  thanks again for looking at this
> >
> >    > tools::md5sum(infile)
> >
> >C:\\Users\\AnthonyD\\AppData\\Local\\Temp\\RtmpIBy7qt/file_
> folder/Microdados
> >ENEM 2009/Dados Enem 2009/DADOS_ENEM_2009.txt
> >    "30beb57419486108e98d42ec7a2f8b19"
> >
> >
> >    > tools::md5sum( "S:/temp/crash.txt" )
> >                     S:/temp/crash.txt
> >    "30beb57419486108e98d42ec7a2f8b19"
> >
> >
> >
> >
> >On Sun, Jul 16, 2017 at 10:10 AM, Jeff Newmiller
> ><jdnewmil at dcn.davis.ca.us>
> >wrote:
> >
> >> So you are saying there are two problems... one that produces a
> >corrupt
> >> file from a valid compressed file, and one that segfaults when
> >presented
> >> with that corrupt file? Can you please confirm the file name and run
> >md5sum
> >> on it and share the result so we can tell when the file problem has
> >been
> >> reproduced?
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
> >> On July 16, 2017 3:21:21 AM PDT, Anthony Damico <ajdamico at gmail.com>
> >> wrote:
> >> >hi, thank you for attempting this. it looks like your unix machine
> >> >unzipped
> >> >the txt file without corruption -- if you copied over the same txt
> >file
> >> >to
> >> >windows 7, i don't think that would reproduce the problem?  i think
> >it
> >> >needs to be the corrupted text file where   R.utils::countLines(
> >> >txtfile
> >> >)   gives 809367.  i am able to reproduce on two distinct windows
> >> >machines
> >> >but no guarantee i'm not doing something dumb
> >> >
> >> >On Sat, Jul 15, 2017 at 6:29 PM, Jeff Newmiller
> >> ><jdnewmil at dcn.davis.ca.us>
> >> >wrote:
> >> >
> >> >> I am not able to reproduce your segfault on a Windows 7 platform
> >> >either:
> >> >>
> >> >> ##########################
> >> >> fn1 <- "d:/DADOS_ENEM_2009.txt"
> >> >> sessionInfo()
> >> >> ## R version 3.4.1 (2017-06-30)
> >> >> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
> >> >> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
> >> >> ##
> >> >> ## Matrix products: default
> >> >> ##
> >> >> ## locale:
> >> >> ## [1] LC_COLLATE=English_United States.1252
> >> >> ## [2] LC_CTYPE=English_United States.1252
> >> >> ## [3] LC_MONETARY=English_United States.1252
> >> >> ## [4] LC_NUMERIC=C
> >> >> ## [5] LC_TIME=English_United States.1252
> >> >> ##
> >> >> ## attached base packages:
> >> >> ## [1] stats     graphics  grDevices utils     datasets  methods
> >> >base
> >> >> ##
> >> >> ## loaded via a namespace (and not attached):
> >> >> ## [1] compiler_3.4.1
> >> >> tools::md5sum( fn1 )
> >> >> ##             d:/DADOS_ENEM_2009.txt
> >> >> ## "83e61c96092285b60d7bf6b0dbc7072e"
> >> >> dat <- readLines( fn1 )
> >> >> length( dat )
> >> >> ## [1] 4148721
> >> >>
> >> >>
> >> >> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
> >> >>
> >> >> I am not able to reproduce this on a Linux platform:
> >> >>>
> >> >>> #######################3
> >> >>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
> >> >>> 2009/DADOS_ENEM_2009.txt"
> >> >>> sessionInfo()
> >> >>> ## R version 3.4.1 (2017-06-30)
> >> >>> ## Platform: x86_64-pc-linux-gnu (64-bit)
> >> >>> ## Running under: Ubuntu 14.04.5 LTS
> >> >>> ##
> >> >>> ## Matrix products: default
> >> >>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
> >> >>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
> >> >>> ##
> >> >>> ## locale:
> >> >>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> >> >>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> >> >>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> >> >>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> >> >>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> >> >>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> >> >>> ##
> >> >>> ## attached base packages:
> >> >>> ## [1] stats     graphics  grDevices utils     datasets  methods
> >> >base
> >> >>> ##
> >> >>> ## loaded via a namespace (and not attached):
> >> >>> ## [1] compiler_3.4.1
> >> >>> tools::md5sum( fn1 )
> >> >>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
> >> >>> 2009/DADOS_ENEM_2009.txt
> >> >>> ##
> >> >>> "83e61c96092285b60d7bf6b0dbc7072e"
> >> >>> dat <- readLines( fn1 )
> >> >>> length( dat )
> >> >>> ## [1] 4148721
> >> >>>
> >> >>> No segfault occurs.
> >> >>>
> >> >>> On Sat, 15 Jul 2017, Anthony Damico wrote:
> >> >>>
> >> >>> hi, i realized that the segfault happens on the text file in a
> >new R
> >> >>>> session.  so, creating the segfault-generating text file
> >requires a
> >> >>>> contributed package, but prompting the actual segfault does not
> >--
> >> >pretty
> >> >>>> sure that means this is a base R bug?  submitted here:
> >> >>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311
> >> >hopefully i
> >> >>>> am
> >> >>>> not doing something remarkably stupid.  the text file itself is
> >4GB
> >> >so
> >> >>>> cannot upload it to bugzilla, and from the R_AllocStringBugger
> >> >error in
> >> >>>> the
> >> >>>> previous message, i think most or all of it needs to be there to
> >> >trigger
> >> >>>> the segfault.  thanks!
> >> >>>>
> >> >>>>
> >> >>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico
> >> ><ajdamico at gmail.com>
> >> >>>> wrote:
> >> >>>>
> >> >>>> hi, thanks Dr. Murdoch
> >> >>>>>
> >> >>>>>
> >> >>>>> i'd appreciate if anyone on r-help could help me narrow this
> >down?
> >> > i
> >> >>>>> believe the segfault occurs because there's a single line with
> >4GB
> >> >and
> >> >>>>> also
> >> >>>>> embedded nuls, but i am not sure how to artificially construct
> >> >that?
> >> >>>>>
> >> >>>>>
> >> >>>>> the lodown package can be removed from my example..  it is just
> >> >for file
> >> >>>>> download cacheing, so `lodown::cachaca` can be replaced with
> >> >>>>> `download.file`  my current example requires a huge download,
> >so
> >> >sort of
> >> >>>>> painful to repeat but i'm pretty confident that's not the
> >issue.
> >> >>>>>
> >> >>>>>
> >> >>>>> the archive::archive_extract() function unzips a (probably
> >> >corrupt) .RAR
> >> >>>>> file and creates a text file with 80,937 lines.  this file is
> >4GB:
> >> >>>>>
> >> >>>>>    > file.size(infile)
> >> >>>>>     [1] 4078192743 <(407)%20819-2743>
> >> >>>>>
> >> >>>>>
> >> >>>>> i am pretty sure that nearly all of that 4GB is contained on a
> >> >single
> >> >>>>> line
> >> >>>>> in the file.  here's what happens when i create a file
> >connection
> >> >and
> >> >>>>> scan
> >> >>>>> through..
> >> >>>>>
> >> >>>>>    > file_con <- file( infile , 'r' )
> >> >>>>>    >
> >> >>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "1000023930632009"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "36F2924009PAULO"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "AFONSO"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "BA11"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "00000"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "00"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "2924009PAULO"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "AFONSO"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "BA1111"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "467.20"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "346.10"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Read 1 item
> >> >>>>>     [1] "414.40"
> >> >>>>>    > scan( w , n = 1 , what = character() )
> >> >>>>>     Error in scan(w, n = 1, what = character()) :
> >> >>>>>       could not allocate memory (2048 Mb) in C function
> >> >>>>> 'R_AllocStringBuffer'
> >> >>>>>
> >> >>>>>
> >> >>>>>
> >> >>>>> making a huge single-line file does not reproduce the problem,
> >i
> >> >think
> >> >>>>> the
> >> >>>>> embedded nuls have something to do with it--
> >> >>>>>
> >> >>>>>
> >> >>>>>     # WARNING do not run with less than 64GB RAM
> >> >>>>>     tf <- tempfile()
> >> >>>>>     a <- rep( "a" , 1000000000 )
> >> >>>>>     b <- paste( a , collapse = '' )
> >> >>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
> >> >>>>>     d <- readLines( tf )
> >> >>>>>
> >> >>>>>
> >> >>>>>
> >> >>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
> >> >>>>> murdoch.duncan at gmail.com>
> >> >>>>> wrote:
> >> >>>>>
> >> >>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
> >> >>>>>>
> >> >>>>>> hello, the last line of the code below causes a segfault for
> >me
> >> >on
> >> >>>>>>> 3.4.1.
> >> >>>>>>> i think i should submit to https://bugs.r-project.org/
> >unless
> >> >others
> >> >>>>>>> have
> >> >>>>>>> advice?  thanks
> >> >>>>>>>
> >> >>>>>>>
> >> >>>>>> Segfaults are usually worth reporting as bugs.  Try to come up
> >> >with a
> >> >>>>>> self-contained example, not using the lodown and archive
> >> >packages.  I
> >> >>>>>> imagine you can do this by uploading the file you downloaded,
> >or
> >> >>>>>> enough of
> >> >>>>>> a subset of it to trigger the segfault.  If you can't do that,
> >> >then
> >> >>>>>> likely
> >> >>>>>> the bug is with one of those packages, not with R.
> >> >>>>>>
> >> >>>>>> Duncan Murdoch
> >> >>>>>>
> >> >>>>>>
> >> >>>>>>
> >> >>>>>>>
> >> >>>>>>>
> >> >>>>>>>
> >> >>>>>>> install.packages( "devtools" )
> >> >>>>>>> devtools::install_github("ajdamico/lodown")
> >> >>>>>>> devtools::install_github("jimhester/archive")
> >> >>>>>>>
> >> >>>>>>>
> >> >>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
> >> >>>>>>>
> >> >>>>>>> tf <- tempfile()
> >> >>>>>>>
> >> >>>>>>> # large download!  cachaca saves on your local disk if
> >already
> >> >>>>>>> downloaded
> >> >>>>>>> lodown::cachaca( '
> >> >>>>>>>
> >http://download.inep.gov.br/microdados/microdados_enem2009.rar'
> >> >, tf
> >> >>>>>>> ,
> >> >>>>>>> mode
> >> >>>>>>> = 'wb' )
> >> >>>>>>>
> >> >>>>>>> archive::archive_extract( tf , dir = normalizePath(
> >file_folder
> >> >) )
> >> >>>>>>>
> >> >>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE
> >,
> >> >>>>>>> full.names =
> >> >>>>>>> TRUE  )
> >> >>>>>>>
> >> >>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value =
> >> >TRUE )
> >> >>>>>>>
> >> >>>>>>> # works
> >> >>>>>>> R.utils::countLines( infile )
> >> >>>>>>>
> >> >>>>>>> # works with warning
> >> >>>>>>> my_file <- readLines( infile , skipNul = TRUE )
> >> >>>>>>>
> >> >>>>>>> # crash
> >> >>>>>>> my_file <- readLines( infile )
> >> >>>>>>>
> >> >>>>>>>
> >> >>>>>>> # run just before crash
> >> >>>>>>> sessionInfo()
> >> >>>>>>> # R version 3.4.1 (2017-06-30)
> >> >>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
> >> >>>>>>> # Running under: Windows 10 x64 (build 15063)
> >> >>>>>>>
> >> >>>>>>> # Matrix products: default
> >> >>>>>>>
> >> >>>>>>> # locale:
> >> >>>>>>> # [1] LC_COLLATE=English_United States.1252
> >> >>>>>>> # [2] LC_CTYPE=English_United States.1252
> >> >>>>>>> # [3] LC_MONETARY=English_United States.1252
> >> >>>>>>> # [4] LC_NUMERIC=C
> >> >>>>>>> # [5] LC_TIME=English_United States.1252
> >> >>>>>>>
> >> >>>>>>> # attached base packages:
> >> >>>>>>> # [1] stats     graphics  grDevices utils     datasets
> >methods
> >> > base
> >> >>>>>>>
> >> >>>>>>> # loaded via a namespace (and not attached):
> >> >>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
> >> >>>>>>>  withr_1.0.2
> >> >>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
> >> >>>>>>> memoise_1.1.0
> >> >>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
> >> >>>>>>> lodown_0.1.0
> >> >>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
> >> >>>>>>> R.oo_1.21.0
> >> >>>>>>> # [17] archive_0.0.0.9000
> >> >>>>>>>
> >> >>>>>>>         [[alternative HTML version deleted]]
> >> >>>>>>>
> >> >>>>>>> ______________________________________________
> >> >>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> >> >see
> >> >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >> >>>>>>> PLEASE do read the posting guide
> >http://www.R-project.org/posti
> >> >>>>>>> ng-guide.html
> >> >>>>>>> and provide commented, minimal, self-contained, reproducible
> >> >code.
> >> >>>>>>>
> >> >>>>>>>
> >> >>>>>>>
> >> >>>>>>
> >> >>>>>
> >> >>>>         [[alternative HTML version deleted]]
> >> >>>>
> >> >>>> ______________________________________________
> >> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> >see
> >> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >> >>>> PLEASE do read the posting guide http://www.R-project.org/posti
> >> >>>> ng-guide.html
> >> >>>> and provide commented, minimal, self-contained, reproducible
> >code.
> >> >>>>
> >> >>>>
> >> >>> ------------------------------------------------------------
> >> >>> ---------------
> >> >>> Jeff Newmiller                        The     .....       .....
> >Go
> >> >>> Live...
> >> >>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.
> >> >Live
> >> >>> Go...
> >> >>>                                      Live:   OO#.. Dead: OO#..
> >> >Playing
> >> >>> Research Engineer (Solar/Batteries            O.O#.       #.O#.
> >> >with
> >> >>> /Software/Embedded Controllers)               .OO#.       .OO#.
> >> >>> rocks...1k
> >> >>>
> >> >>> ______________________________________________
> >> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >> >>> PLEASE do read the posting guide http://www.R-project.org/posti
> >> >>> ng-guide.html
> >> >>> and provide commented, minimal, self-contained, reproducible
> >code.
> >> >>>
> >> >>>
> >> >> ------------------------------------------------------------
> >> >> ---------------
> >> >> Jeff Newmiller                        The     .....       .....
> >Go
> >> >Live...
> >> >> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.
> >Live
> >> >> Go...
> >> >>                                       Live:   OO#.. Dead: OO#..
> >> >Playing
> >> >> Research Engineer (Solar/Batteries            O.O#.       #.O#.
> >with
> >> >> /Software/Embedded Controllers)               .OO#.       .OO#.
> >> >rocks...1k
> >> >> ------------------------------------------------------------
> >> >> ---------------
> >> >>
> >>
>

	[[alternative HTML version deleted]]


From friendly at yorku.ca  Mon Jul 17 15:46:01 2017
From: friendly at yorku.ca (Michael Friendly)
Date: Mon, 17 Jul 2017 09:46:01 -0400
Subject: [R] label sunflower point
In-Reply-To: <CAKNiqew1K=Z9PDAmZt9YrfgaQ+ao9vuMw+oBRjMLtoPeq_npLw@mail.gmail.com>
References: <CAKNiqew1K=Z9PDAmZt9YrfgaQ+ao9vuMw+oBRjMLtoPeq_npLw@mail.gmail.com>
Message-ID: <395ed52c-328b-0237-7dc7-c3ac676c211e@yorku.ca>

On 7/16/2017 9:36 AM, Nada Gh wrote:
> Hi,
> 
> I create a plot using sunflowerplot, I need to highlight one point to show
> its importance. What suggestion you have to accomplish this?
> 
> Thanks,

In general, the way to answer such a question for yourself is to read 
the documentation for arguments related to observation plot attributes,
then, if necessary, read the source code.

The col= argument of sunflowerplot is passed to points(), and seg.col= 
is passed to segments, so you could try creating a vector of these, with 
a different value for the point you want to highlight.

-Michael


From jdnewmil at dcn.davis.ca.us  Mon Jul 17 16:23:25 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Mon, 17 Jul 2017 07:23:25 -0700
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDy0BtwTfZoqB1JyVh26j9ib3yXJS8kETDMq=sUu6RRM+A@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
 <CAOwvMDy0Jja8URfP1oZqZ4cNuUwkY1bPjvLo5ca99xGQjpen2A@mail.gmail.com>
 <563F4EC8-23B0-4D35-8710-F420E67115F3@dcn.davis.ca.us>
 <CAOwvMDwCWpYGkr+FzciYAiOdvYd5Nb3Mtg3WKd7X9mK84h346g@mail.gmail.com>
 <9A0296EC-4120-40E5-8365-0EAE03F54F7D@dcn.davis.ca.us>
 <CAOwvMDy0BtwTfZoqB1JyVh26j9ib3yXJS8kETDMq=sUu6RRM+A@mail.gmail.com>
Message-ID: <2EA83673-0116-4CE9-ACED-0F5956904E9F@dcn.davis.ca.us>

I'll pass. Just because some non-CRAN "archive" package has bugs or your disk storage is flaky does not mean that any of dozens or hundreds of other compression tools (e.g. the built-in Windows "Send to compressed folder" pop-up menu) won't get it right, and we would know if it did fail because of the md5sum.
-- 
Sent from my phone. Please excuse my brevity.

On July 17, 2017 5:00:48 AM PDT, Anthony Damico <ajdamico at gmail.com> wrote:
>hi, thanks again for taking the time.  since corrupted compression
>prompted
>the segfault for me in the first place, i've just posted the text file
>as-is.  it's a 2.4GB file so to be avoided on a metered internet
>connection.  i've updated the bugzilla report at
>https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311 with more
>relevant info.  these lines of code crash both windows R 3.4.1 and also
>linux R 3.3.3 for me.  thanks again
>
>
>    # consider changing `tempfile()` to a permanent location
>    # so you don't lose the large downloaded file after the crash
>    tf <- tempfile()
> download.file( "https://sisyphus.project.cwi.nl/r-bug-17311-crash.txt"
>, tf , mode = 'wb' )
>    sessionInfo()
>    x <- readLines( tf )
>
>
>
>
>On Sun, Jul 16, 2017 at 2:22 PM, Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> I am stuck. The archive package won't compile for me on Ubuntu, and
>the
>> CRANextra repo seems to be down so I cannot install packages on
>Windows
>> right now. Perhaps you can zip the corrupt text file and put it
>online
>> somewhere? Don't use the archive package to pack it since there seem
>to be
>> issues with that tool on your machine.
>>
>> I would discourage you from harassing the Brazilian government about
>their
>> RAR file because the RAR file seems fine (no NUL characters appear in
>the
>> text file) when extracted using the file-roller archive tool on
>Ubuntu.
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> On July 16, 2017 9:37:17 AM PDT, Anthony Damico <ajdamico at gmail.com>
>> wrote:
>> >hi, yep, there are two problems -- but i think only the segfault is
>> >within
>> >the scope of a base R issue?  i need to look closer at the corrupted
>> >decompression and figure out whether i should talk to the brazilian
>> >government agency that creates that .rar file or open an issue with
>the
>> >archive package maintainer.  my goal in this thread is only to
>figure
>> >out
>> >how to replicate the goofy text file so the r team can turn it into
>an
>> >error instead of a segfault.
>> >
>> >the original example i sent stores the .txt file somewhere inside
>the
>> >tempdir(), but when i copy it over elsewhere on my machine, the
>> >md5sum()
>> >gives the same result.  thanks again for looking at this
>> >
>> >    > tools::md5sum(infile)
>> >
>> >C:\\Users\\AnthonyD\\AppData\\Local\\Temp\\RtmpIBy7qt/file_
>> folder/Microdados
>> >ENEM 2009/Dados Enem 2009/DADOS_ENEM_2009.txt
>> >    "30beb57419486108e98d42ec7a2f8b19"
>> >
>> >
>> >    > tools::md5sum( "S:/temp/crash.txt" )
>> >                     S:/temp/crash.txt
>> >    "30beb57419486108e98d42ec7a2f8b19"
>> >
>> >
>> >
>> >
>> >On Sun, Jul 16, 2017 at 10:10 AM, Jeff Newmiller
>> ><jdnewmil at dcn.davis.ca.us>
>> >wrote:
>> >
>> >> So you are saying there are two problems... one that produces a
>> >corrupt
>> >> file from a valid compressed file, and one that segfaults when
>> >presented
>> >> with that corrupt file? Can you please confirm the file name and
>run
>> >md5sum
>> >> on it and share the result so we can tell when the file problem
>has
>> >been
>> >> reproduced?
>> >> --
>> >> Sent from my phone. Please excuse my brevity.
>> >>
>> >> On July 16, 2017 3:21:21 AM PDT, Anthony Damico
><ajdamico at gmail.com>
>> >> wrote:
>> >> >hi, thank you for attempting this. it looks like your unix
>machine
>> >> >unzipped
>> >> >the txt file without corruption -- if you copied over the same
>txt
>> >file
>> >> >to
>> >> >windows 7, i don't think that would reproduce the problem?  i
>think
>> >it
>> >> >needs to be the corrupted text file where   R.utils::countLines(
>> >> >txtfile
>> >> >)   gives 809367.  i am able to reproduce on two distinct windows
>> >> >machines
>> >> >but no guarantee i'm not doing something dumb
>> >> >
>> >> >On Sat, Jul 15, 2017 at 6:29 PM, Jeff Newmiller
>> >> ><jdnewmil at dcn.davis.ca.us>
>> >> >wrote:
>> >> >
>> >> >> I am not able to reproduce your segfault on a Windows 7
>platform
>> >> >either:
>> >> >>
>> >> >> ##########################
>> >> >> fn1 <- "d:/DADOS_ENEM_2009.txt"
>> >> >> sessionInfo()
>> >> >> ## R version 3.4.1 (2017-06-30)
>> >> >> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
>> >> >> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
>> >> >> ##
>> >> >> ## Matrix products: default
>> >> >> ##
>> >> >> ## locale:
>> >> >> ## [1] LC_COLLATE=English_United States.1252
>> >> >> ## [2] LC_CTYPE=English_United States.1252
>> >> >> ## [3] LC_MONETARY=English_United States.1252
>> >> >> ## [4] LC_NUMERIC=C
>> >> >> ## [5] LC_TIME=English_United States.1252
>> >> >> ##
>> >> >> ## attached base packages:
>> >> >> ## [1] stats     graphics  grDevices utils     datasets 
>methods
>> >> >base
>> >> >> ##
>> >> >> ## loaded via a namespace (and not attached):
>> >> >> ## [1] compiler_3.4.1
>> >> >> tools::md5sum( fn1 )
>> >> >> ##             d:/DADOS_ENEM_2009.txt
>> >> >> ## "83e61c96092285b60d7bf6b0dbc7072e"
>> >> >> dat <- readLines( fn1 )
>> >> >> length( dat )
>> >> >> ## [1] 4148721
>> >> >>
>> >> >>
>> >> >> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
>> >> >>
>> >> >> I am not able to reproduce this on a Linux platform:
>> >> >>>
>> >> >>> #######################3
>> >> >>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados
>Enem
>> >> >>> 2009/DADOS_ENEM_2009.txt"
>> >> >>> sessionInfo()
>> >> >>> ## R version 3.4.1 (2017-06-30)
>> >> >>> ## Platform: x86_64-pc-linux-gnu (64-bit)
>> >> >>> ## Running under: Ubuntu 14.04.5 LTS
>> >> >>> ##
>> >> >>> ## Matrix products: default
>> >> >>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
>> >> >>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
>> >> >>> ##
>> >> >>> ## locale:
>> >> >>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>> >> >>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>> >> >>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>> >> >>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>> >> >>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> >> >>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>> >> >>> ##
>> >> >>> ## attached base packages:
>> >> >>> ## [1] stats     graphics  grDevices utils     datasets 
>methods
>> >> >base
>> >> >>> ##
>> >> >>> ## loaded via a namespace (and not attached):
>> >> >>> ## [1] compiler_3.4.1
>> >> >>> tools::md5sum( fn1 )
>> >> >>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>> >> >>> 2009/DADOS_ENEM_2009.txt
>> >> >>> ##
>> >> >>> "83e61c96092285b60d7bf6b0dbc7072e"
>> >> >>> dat <- readLines( fn1 )
>> >> >>> length( dat )
>> >> >>> ## [1] 4148721
>> >> >>>
>> >> >>> No segfault occurs.
>> >> >>>
>> >> >>> On Sat, 15 Jul 2017, Anthony Damico wrote:
>> >> >>>
>> >> >>> hi, i realized that the segfault happens on the text file in a
>> >new R
>> >> >>>> session.  so, creating the segfault-generating text file
>> >requires a
>> >> >>>> contributed package, but prompting the actual segfault does
>not
>> >--
>> >> >pretty
>> >> >>>> sure that means this is a base R bug?  submitted here:
>> >> >>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311
>> >> >hopefully i
>> >> >>>> am
>> >> >>>> not doing something remarkably stupid.  the text file itself
>is
>> >4GB
>> >> >so
>> >> >>>> cannot upload it to bugzilla, and from the
>R_AllocStringBugger
>> >> >error in
>> >> >>>> the
>> >> >>>> previous message, i think most or all of it needs to be there
>to
>> >> >trigger
>> >> >>>> the segfault.  thanks!
>> >> >>>>
>> >> >>>>
>> >> >>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico
>> >> ><ajdamico at gmail.com>
>> >> >>>> wrote:
>> >> >>>>
>> >> >>>> hi, thanks Dr. Murdoch
>> >> >>>>>
>> >> >>>>>
>> >> >>>>> i'd appreciate if anyone on r-help could help me narrow this
>> >down?
>> >> > i
>> >> >>>>> believe the segfault occurs because there's a single line
>with
>> >4GB
>> >> >and
>> >> >>>>> also
>> >> >>>>> embedded nuls, but i am not sure how to artificially
>construct
>> >> >that?
>> >> >>>>>
>> >> >>>>>
>> >> >>>>> the lodown package can be removed from my example..  it is
>just
>> >> >for file
>> >> >>>>> download cacheing, so `lodown::cachaca` can be replaced with
>> >> >>>>> `download.file`  my current example requires a huge
>download,
>> >so
>> >> >sort of
>> >> >>>>> painful to repeat but i'm pretty confident that's not the
>> >issue.
>> >> >>>>>
>> >> >>>>>
>> >> >>>>> the archive::archive_extract() function unzips a (probably
>> >> >corrupt) .RAR
>> >> >>>>> file and creates a text file with 80,937 lines.  this file
>is
>> >4GB:
>> >> >>>>>
>> >> >>>>>    > file.size(infile)
>> >> >>>>>     [1] 4078192743 <(407)%20819-2743>
>> >> >>>>>
>> >> >>>>>
>> >> >>>>> i am pretty sure that nearly all of that 4GB is contained on
>a
>> >> >single
>> >> >>>>> line
>> >> >>>>> in the file.  here's what happens when i create a file
>> >connection
>> >> >and
>> >> >>>>> scan
>> >> >>>>> through..
>> >> >>>>>
>> >> >>>>>    > file_con <- file( infile , 'r' )
>> >> >>>>>    >
>> >> >>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "1000023930632009"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "36F2924009PAULO"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "AFONSO"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "BA11"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "00000"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "00"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "2924009PAULO"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "AFONSO"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "BA1111"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "467.20"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "346.10"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Read 1 item
>> >> >>>>>     [1] "414.40"
>> >> >>>>>    > scan( w , n = 1 , what = character() )
>> >> >>>>>     Error in scan(w, n = 1, what = character()) :
>> >> >>>>>       could not allocate memory (2048 Mb) in C function
>> >> >>>>> 'R_AllocStringBuffer'
>> >> >>>>>
>> >> >>>>>
>> >> >>>>>
>> >> >>>>> making a huge single-line file does not reproduce the
>problem,
>> >i
>> >> >think
>> >> >>>>> the
>> >> >>>>> embedded nuls have something to do with it--
>> >> >>>>>
>> >> >>>>>
>> >> >>>>>     # WARNING do not run with less than 64GB RAM
>> >> >>>>>     tf <- tempfile()
>> >> >>>>>     a <- rep( "a" , 1000000000 )
>> >> >>>>>     b <- paste( a , collapse = '' )
>> >> >>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>> >> >>>>>     d <- readLines( tf )
>> >> >>>>>
>> >> >>>>>
>> >> >>>>>
>> >> >>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
>> >> >>>>> murdoch.duncan at gmail.com>
>> >> >>>>> wrote:
>> >> >>>>>
>> >> >>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>> >> >>>>>>
>> >> >>>>>> hello, the last line of the code below causes a segfault
>for
>> >me
>> >> >on
>> >> >>>>>>> 3.4.1.
>> >> >>>>>>> i think i should submit to https://bugs.r-project.org/
>> >unless
>> >> >others
>> >> >>>>>>> have
>> >> >>>>>>> advice?  thanks
>> >> >>>>>>>
>> >> >>>>>>>
>> >> >>>>>> Segfaults are usually worth reporting as bugs.  Try to come
>up
>> >> >with a
>> >> >>>>>> self-contained example, not using the lodown and archive
>> >> >packages.  I
>> >> >>>>>> imagine you can do this by uploading the file you
>downloaded,
>> >or
>> >> >>>>>> enough of
>> >> >>>>>> a subset of it to trigger the segfault.  If you can't do
>that,
>> >> >then
>> >> >>>>>> likely
>> >> >>>>>> the bug is with one of those packages, not with R.
>> >> >>>>>>
>> >> >>>>>> Duncan Murdoch
>> >> >>>>>>
>> >> >>>>>>
>> >> >>>>>>
>> >> >>>>>>>
>> >> >>>>>>>
>> >> >>>>>>>
>> >> >>>>>>> install.packages( "devtools" )
>> >> >>>>>>> devtools::install_github("ajdamico/lodown")
>> >> >>>>>>> devtools::install_github("jimhester/archive")
>> >> >>>>>>>
>> >> >>>>>>>
>> >> >>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>> >> >>>>>>>
>> >> >>>>>>> tf <- tempfile()
>> >> >>>>>>>
>> >> >>>>>>> # large download!  cachaca saves on your local disk if
>> >already
>> >> >>>>>>> downloaded
>> >> >>>>>>> lodown::cachaca( '
>> >> >>>>>>>
>> >http://download.inep.gov.br/microdados/microdados_enem2009.rar'
>> >> >, tf
>> >> >>>>>>> ,
>> >> >>>>>>> mode
>> >> >>>>>>> = 'wb' )
>> >> >>>>>>>
>> >> >>>>>>> archive::archive_extract( tf , dir = normalizePath(
>> >file_folder
>> >> >) )
>> >> >>>>>>>
>> >> >>>>>>> unzipped_files <- list.files( file_folder , recursive =
>TRUE
>> >,
>> >> >>>>>>> full.names =
>> >> >>>>>>> TRUE  )
>> >> >>>>>>>
>> >> >>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files ,
>value =
>> >> >TRUE )
>> >> >>>>>>>
>> >> >>>>>>> # works
>> >> >>>>>>> R.utils::countLines( infile )
>> >> >>>>>>>
>> >> >>>>>>> # works with warning
>> >> >>>>>>> my_file <- readLines( infile , skipNul = TRUE )
>> >> >>>>>>>
>> >> >>>>>>> # crash
>> >> >>>>>>> my_file <- readLines( infile )
>> >> >>>>>>>
>> >> >>>>>>>
>> >> >>>>>>> # run just before crash
>> >> >>>>>>> sessionInfo()
>> >> >>>>>>> # R version 3.4.1 (2017-06-30)
>> >> >>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>> >> >>>>>>> # Running under: Windows 10 x64 (build 15063)
>> >> >>>>>>>
>> >> >>>>>>> # Matrix products: default
>> >> >>>>>>>
>> >> >>>>>>> # locale:
>> >> >>>>>>> # [1] LC_COLLATE=English_United States.1252
>> >> >>>>>>> # [2] LC_CTYPE=English_United States.1252
>> >> >>>>>>> # [3] LC_MONETARY=English_United States.1252
>> >> >>>>>>> # [4] LC_NUMERIC=C
>> >> >>>>>>> # [5] LC_TIME=English_United States.1252
>> >> >>>>>>>
>> >> >>>>>>> # attached base packages:
>> >> >>>>>>> # [1] stats     graphics  grDevices utils     datasets
>> >methods
>> >> > base
>> >> >>>>>>>
>> >> >>>>>>> # loaded via a namespace (and not attached):
>> >> >>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>> >> >>>>>>>  withr_1.0.2
>> >> >>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>> >> >>>>>>> memoise_1.1.0
>> >> >>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>> >> >>>>>>> lodown_0.1.0
>> >> >>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1       
>devtools_1.13.2
>> >> >>>>>>> R.oo_1.21.0
>> >> >>>>>>> # [17] archive_0.0.0.9000
>> >> >>>>>>>
>> >> >>>>>>>         [[alternative HTML version deleted]]
>> >> >>>>>>>
>> >> >>>>>>> ______________________________________________
>> >> >>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>more,
>> >> >see
>> >> >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> >>>>>>> PLEASE do read the posting guide
>> >http://www.R-project.org/posti
>> >> >>>>>>> ng-guide.html
>> >> >>>>>>> and provide commented, minimal, self-contained,
>reproducible
>> >> >code.
>> >> >>>>>>>
>> >> >>>>>>>
>> >> >>>>>>>
>> >> >>>>>>
>> >> >>>>>
>> >> >>>>         [[alternative HTML version deleted]]
>> >> >>>>
>> >> >>>> ______________________________________________
>> >> >>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>> >see
>> >> >>>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> >>>> PLEASE do read the posting guide
>http://www.R-project.org/posti
>> >> >>>> ng-guide.html
>> >> >>>> and provide commented, minimal, self-contained, reproducible
>> >code.
>> >> >>>>
>> >> >>>>
>> >> >>> ------------------------------------------------------------
>> >> >>> ---------------
>> >> >>> Jeff Newmiller                        The     .....      
>.....
>> >Go
>> >> >>> Live...
>> >> >>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.      
>##.#.
>> >> >Live
>> >> >>> Go...
>> >> >>>                                      Live:   OO#.. Dead: OO#..
>> >> >Playing
>> >> >>> Research Engineer (Solar/Batteries            O.O#.      
>#.O#.
>> >> >with
>> >> >>> /Software/Embedded Controllers)               .OO#.      
>.OO#.
>> >> >>> rocks...1k
>> >> >>>
>> >> >>> ______________________________________________
>> >> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>see
>> >> >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> >> >>> PLEASE do read the posting guide
>http://www.R-project.org/posti
>> >> >>> ng-guide.html
>> >> >>> and provide commented, minimal, self-contained, reproducible
>> >code.
>> >> >>>
>> >> >>>
>> >> >> ------------------------------------------------------------
>> >> >> ---------------
>> >> >> Jeff Newmiller                        The     .....       .....
>> >Go
>> >> >Live...
>> >> >> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.
>> >Live
>> >> >> Go...
>> >> >>                                       Live:   OO#.. Dead: OO#..
>> >> >Playing
>> >> >> Research Engineer (Solar/Batteries            O.O#.       #.O#.
>> >with
>> >> >> /Software/Embedded Controllers)               .OO#.       .OO#.
>> >> >rocks...1k
>> >> >> ------------------------------------------------------------
>> >> >> ---------------
>> >> >>
>> >>
>>


From wdunlap at tibco.com  Mon Jul 17 17:36:55 2017
From: wdunlap at tibco.com (William Dunlap)
Date: Mon, 17 Jul 2017 08:36:55 -0700
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAF8bMcb5WFz4VeLJhBHVtCswS7EgXfjHmFSthp22pNnEuHxW8g@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
 <CAF8bMcb5WFz4VeLJhBHVtCswS7EgXfjHmFSthp22pNnEuHxW8g@mail.gmail.com>
Message-ID: <CAF8bMca8s9ZLCZaUfv01fOuCQAzLbzEwmhusgPNOsR5fptU0Fg@mail.gmail.com>

The original file had a lot of trailing null bytes so I tried making a
similar file with:

tf <- tempfile(); file <- file(tf, "wb")
for(i in 1:(2^15-1))writeBin(rep(as.raw(32:127), len=2^16), file)
for(i in 1:(2^15-1))writeBin(rep(as.raw(0L), len=2^16), file)
close(file)
log2(file.size(tf))
#[1] 31.99996

Reading this with readLines() caused R-3.4.0 to segfault in Rf_con_pushback
with the same gdb traceback I saw when reading the original file.


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Sat, Jul 15, 2017 at 4:28 PM, William Dunlap <wdunlap at tibco.com> wrote:

> I see the problem on Windows 10, R-3.4.0, R.exe.  It is not compiled for
> debugging but gdb gives some information when I attach the debugger after
> the 'R..has stopped working' popup appears.  I don't know how reliable it
> is:
>
> (gdb) info threads
>   Id   Target Id         Frame
> * 4    Thread 11848.0x1500 0x00007ffe38dc8861 in ntdll!DbgBreakPoint ()
> from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
>   3    Thread 11848.0x2e90 0x00007ffe38dc87e4 in ntdll!ZwWaitForWorkViaWorkerFactory
> ()
>    from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
>   2    Thread 11848.0x3618 0x00007ffe38dc5154 in
> ntdll!ZwWaitForSingleObject ()
>    from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
>   1    Thread 11848.0x1808 0x000000006c77de3b in Rf_con_pushback () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> (gdb) thread 1
> [Switching to thread 1 (Thread 11848.0x1808)]
> #0  0x000000006c77de3b in Rf_con_pushback () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> (gdb) where
> #0  0x000000006c77de3b in Rf_con_pushback () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> #1  0x000000006c7d8919 in R_initAssignSymbols () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> #2  0x000000006c7ef961 in Rf_eval () from /cygdrive/c/R/R-3.4.0/bin/x64/
> R.dll
> #3  0x000000006c7f1b70 in R_cmpfun1 () from /cygdrive/c/R/R-3.4.0/bin/x64/
> R.dll
> #4  0x000000006c7f1ef2 in Rf_applyClosure () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> #5  0x000000006c7efaf7 in Rf_eval () from /cygdrive/c/R/R-3.4.0/bin/x64/
> R.dll
> #6  0x000000006c7f3816 in R_execMethod () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> #7  0x000000006c7efcdf in Rf_eval () from /cygdrive/c/R/R-3.4.0/bin/x64/
> R.dll
> #8  0x000000006c81053c in Rf_ReplIteration () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> #9  0x000000006c810902 in Rf_ReplIteration () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> #10 0x000000006c810992 in run_Rmainloop () from
> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
> #11 0x000000000040171c in ?? ()
> #12 0x000000000040155a in ?? ()
> #13 0x00000000004013e8 in ?? ()
> #14 0x000000000040151b in ?? ()
> #15 0x00007ffe37868102 in KERNEL32!BaseThreadInitThunk () from
> /cygdrive/c/WINDOWS/system32/KERNEL32.DLL
> #16 0x00007ffe38d7c5b4 in ntdll!RtlUserThreadStart () from
> /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
> #17 0x0000000000000000 in ?? ()
> Backtrace stopped: previous frame inner to this frame (corrupt stack?)
> (gdb)
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Sat, Jul 15, 2017 at 3:29 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
>> I am not able to reproduce your segfault on a Windows 7 platform either:
>>
>> ##########################
>> fn1 <- "d:/DADOS_ENEM_2009.txt"
>> sessionInfo()
>> ## R version 3.4.1 (2017-06-30)
>> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
>> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
>> ##
>> ## Matrix products: default
>> ##
>> ## locale:
>> ## [1] LC_COLLATE=English_United States.1252
>> ## [2] LC_CTYPE=English_United States.1252
>> ## [3] LC_MONETARY=English_United States.1252
>> ## [4] LC_NUMERIC=C
>> ## [5] LC_TIME=English_United States.1252
>> ##
>> ## attached base packages:
>> ## [1] stats     graphics  grDevices utils     datasets  methods   base
>> ##
>> ## loaded via a namespace (and not attached):
>> ## [1] compiler_3.4.1
>> tools::md5sum( fn1 )
>> ##             d:/DADOS_ENEM_2009.txt
>> ## "83e61c96092285b60d7bf6b0dbc7072e"
>> dat <- readLines( fn1 )
>> length( dat )
>> ## [1] 4148721
>>
>>
>> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
>>
>> I am not able to reproduce this on a Linux platform:
>>>
>>> #######################3
>>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>>> 2009/DADOS_ENEM_2009.txt"
>>> sessionInfo()
>>> ## R version 3.4.1 (2017-06-30)
>>> ## Platform: x86_64-pc-linux-gnu (64-bit)
>>> ## Running under: Ubuntu 14.04.5 LTS
>>> ##
>>> ## Matrix products: default
>>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
>>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
>>> ##
>>> ## locale:
>>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>> ##
>>> ## attached base packages:
>>> ## [1] stats     graphics  grDevices utils     datasets  methods   base
>>> ##
>>> ## loaded via a namespace (and not attached):
>>> ## [1] compiler_3.4.1
>>> tools::md5sum( fn1 )
>>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>>> 2009/DADOS_ENEM_2009.txt
>>> ##
>>> "83e61c96092285b60d7bf6b0dbc7072e"
>>> dat <- readLines( fn1 )
>>> length( dat )
>>> ## [1] 4148721
>>>
>>> No segfault occurs.
>>>
>>> On Sat, 15 Jul 2017, Anthony Damico wrote:
>>>
>>> hi, i realized that the segfault happens on the text file in a new R
>>>> session.  so, creating the segfault-generating text file requires a
>>>> contributed package, but prompting the actual segfault does not --
>>>> pretty
>>>> sure that means this is a base R bug?  submitted here:
>>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully
>>>> i am
>>>> not doing something remarkably stupid.  the text file itself is 4GB so
>>>> cannot upload it to bugzilla, and from the R_AllocStringBugger error in
>>>> the
>>>> previous message, i think most or all of it needs to be there to trigger
>>>> the segfault.  thanks!
>>>>
>>>>
>>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com>
>>>> wrote:
>>>>
>>>> hi, thanks Dr. Murdoch
>>>>>
>>>>>
>>>>> i'd appreciate if anyone on r-help could help me narrow this down?  i
>>>>> believe the segfault occurs because there's a single line with 4GB and
>>>>> also
>>>>> embedded nuls, but i am not sure how to artificially construct that?
>>>>>
>>>>>
>>>>> the lodown package can be removed from my example..  it is just for
>>>>> file
>>>>> download cacheing, so `lodown::cachaca` can be replaced with
>>>>> `download.file`  my current example requires a huge download, so sort
>>>>> of
>>>>> painful to repeat but i'm pretty confident that's not the issue.
>>>>>
>>>>>
>>>>> the archive::archive_extract() function unzips a (probably corrupt)
>>>>> .RAR
>>>>> file and creates a text file with 80,937 lines.  this file is 4GB:
>>>>>
>>>>>    > file.size(infile)
>>>>>     [1] 4078192743 <(407)%20819-2743>
>>>>>
>>>>>
>>>>> i am pretty sure that nearly all of that 4GB is contained on a single
>>>>> line
>>>>> in the file.  here's what happens when i create a file connection and
>>>>> scan
>>>>> through..
>>>>>
>>>>>    > file_con <- file( infile , 'r' )
>>>>>    >
>>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "1000023930632009"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "36F2924009PAULO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "AFONSO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "BA11"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "00000"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "00"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "2924009PAULO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "AFONSO"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "BA1111"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "467.20"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "346.10"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Read 1 item
>>>>>     [1] "414.40"
>>>>>    > scan( w , n = 1 , what = character() )
>>>>>     Error in scan(w, n = 1, what = character()) :
>>>>>       could not allocate memory (2048 Mb) in C function
>>>>> 'R_AllocStringBuffer'
>>>>>
>>>>>
>>>>>
>>>>> making a huge single-line file does not reproduce the problem, i think
>>>>> the
>>>>> embedded nuls have something to do with it--
>>>>>
>>>>>
>>>>>     # WARNING do not run with less than 64GB RAM
>>>>>     tf <- tempfile()
>>>>>     a <- rep( "a" , 1000000000 )
>>>>>     b <- paste( a , collapse = '' )
>>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>>>>>     d <- readLines( tf )
>>>>>
>>>>>
>>>>>
>>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
>>>>> murdoch.duncan at gmail.com>
>>>>> wrote:
>>>>>
>>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>>>>>
>>>>>> hello, the last line of the code below causes a segfault for me on
>>>>>>> 3.4.1.
>>>>>>> i think i should submit to https://bugs.r-project.org/  unless
>>>>>>> others
>>>>>>> have
>>>>>>> advice?  thanks
>>>>>>>
>>>>>>>
>>>>>> Segfaults are usually worth reporting as bugs.  Try to come up with a
>>>>>> self-contained example, not using the lodown and archive packages.  I
>>>>>> imagine you can do this by uploading the file you downloaded, or
>>>>>> enough of
>>>>>> a subset of it to trigger the segfault.  If you can't do that, then
>>>>>> likely
>>>>>> the bug is with one of those packages, not with R.
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>>
>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> install.packages( "devtools" )
>>>>>>> devtools::install_github("ajdamico/lodown")
>>>>>>> devtools::install_github("jimhester/archive")
>>>>>>>
>>>>>>>
>>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>>>>>
>>>>>>> tf <- tempfile()
>>>>>>>
>>>>>>> # large download!  cachaca saves on your local disk if already
>>>>>>> downloaded
>>>>>>> lodown::cachaca( '
>>>>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' ,
>>>>>>> tf ,
>>>>>>> mode
>>>>>>> = 'wb' )
>>>>>>>
>>>>>>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>>>>>>
>>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>>>>>> full.names =
>>>>>>> TRUE  )
>>>>>>>
>>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>>>>>>
>>>>>>> # works
>>>>>>> R.utils::countLines( infile )
>>>>>>>
>>>>>>> # works with warning
>>>>>>> my_file <- readLines( infile , skipNul = TRUE )
>>>>>>>
>>>>>>> # crash
>>>>>>> my_file <- readLines( infile )
>>>>>>>
>>>>>>>
>>>>>>> # run just before crash
>>>>>>> sessionInfo()
>>>>>>> # R version 3.4.1 (2017-06-30)
>>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>>>>> # Running under: Windows 10 x64 (build 15063)
>>>>>>>
>>>>>>> # Matrix products: default
>>>>>>>
>>>>>>> # locale:
>>>>>>> # [1] LC_COLLATE=English_United States.1252
>>>>>>> # [2] LC_CTYPE=English_United States.1252
>>>>>>> # [3] LC_MONETARY=English_United States.1252
>>>>>>> # [4] LC_NUMERIC=C
>>>>>>> # [5] LC_TIME=English_United States.1252
>>>>>>>
>>>>>>> # attached base packages:
>>>>>>> # [1] stats     graphics  grDevices utils     datasets  methods
>>>>>>>  base
>>>>>>>
>>>>>>> # loaded via a namespace (and not attached):
>>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>>>>>  withr_1.0.2
>>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>>>>>> memoise_1.1.0
>>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>>>>>> lodown_0.1.0
>>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>>>>>> R.oo_1.21.0
>>>>>>> # [17] archive_0.0.0.9000
>>>>>>>
>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>>>>> ng-guide.html
>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>> ng-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>
>>> ------------------------------------------------------------
>>> ---------------
>>> Jeff Newmiller                        The     .....       .....  Go
>>> Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>>> Go...
>>>                                      Live:   OO#.. Dead: OO#..  Playing
>>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>>> /Software/Embedded Controllers)               .OO#.       .OO#.
>>> rocks...1k
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>> ng-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>> ------------------------------------------------------------
>> ---------------
>> Jeff Newmiller                        The     .....       .....  Go
>> Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>> Go...
>>                                       Live:   OO#.. Dead: OO#..  Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#.
>> rocks...1k
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>

	[[alternative HTML version deleted]]


From ajdamico at gmail.com  Mon Jul 17 17:50:30 2017
From: ajdamico at gmail.com (Anthony Damico)
Date: Mon, 17 Jul 2017 11:50:30 -0400
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAF8bMca8s9ZLCZaUfv01fOuCQAzLbzEwmhusgPNOsR5fptU0Fg@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <alpine.BSF.2.00.1707151310490.68122@pedal.dcn.davis.ca.us>
 <alpine.BSF.2.00.1707151522560.73310@pedal.dcn.davis.ca.us>
 <CAF8bMcb5WFz4VeLJhBHVtCswS7EgXfjHmFSthp22pNnEuHxW8g@mail.gmail.com>
 <CAF8bMca8s9ZLCZaUfv01fOuCQAzLbzEwmhusgPNOsR5fptU0Fg@mail.gmail.com>
Message-ID: <CAOwvMDz0V=Gstd28BeD-wUW9HYhUTpfjtdPLBdOjKxvszn19kQ@mail.gmail.com>

awesome, thank you! looks like folks on bugzilla have also reproduced and
submitted a patch, so i am happy. thanks all

On Mon, Jul 17, 2017 at 11:36 AM, William Dunlap <wdunlap at tibco.com> wrote:

> The original file had a lot of trailing null bytes so I tried making a
> similar file with:
>
> tf <- tempfile(); file <- file(tf, "wb")
> for(i in 1:(2^15-1))writeBin(rep(as.raw(32:127), len=2^16), file)
> for(i in 1:(2^15-1))writeBin(rep(as.raw(0L), len=2^16), file)
> close(file)
> log2(file.size(tf))
> #[1] 31.99996
>
> Reading this with readLines() caused R-3.4.0 to segfault in
> Rf_con_pushback with the same gdb traceback I saw when reading the original
> file.
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Sat, Jul 15, 2017 at 4:28 PM, William Dunlap <wdunlap at tibco.com> wrote:
>
>> I see the problem on Windows 10, R-3.4.0, R.exe.  It is not compiled for
>> debugging but gdb gives some information when I attach the debugger after
>> the 'R..has stopped working' popup appears.  I don't know how reliable it
>> is:
>>
>> (gdb) info threads
>>   Id   Target Id         Frame
>> * 4    Thread 11848.0x1500 0x00007ffe38dc8861 in ntdll!DbgBreakPoint ()
>> from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
>>   3    Thread 11848.0x2e90 0x00007ffe38dc87e4 in
>> ntdll!ZwWaitForWorkViaWorkerFactory ()
>>    from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
>>   2    Thread 11848.0x3618 0x00007ffe38dc5154 in
>> ntdll!ZwWaitForSingleObject ()
>>    from /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
>>   1    Thread 11848.0x1808 0x000000006c77de3b in Rf_con_pushback () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> (gdb) thread 1
>> [Switching to thread 1 (Thread 11848.0x1808)]
>> #0  0x000000006c77de3b in Rf_con_pushback () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> (gdb) where
>> #0  0x000000006c77de3b in Rf_con_pushback () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> #1  0x000000006c7d8919 in R_initAssignSymbols () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> #2  0x000000006c7ef961 in Rf_eval () from /cygdrive/c/R/R-3.4.0/bin/x64/
>> R.dll
>> #3  0x000000006c7f1b70 in R_cmpfun1 () from /cygdrive/c/R/R-3.4.0/bin/x64/
>> R.dll
>> #4  0x000000006c7f1ef2 in Rf_applyClosure () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> #5  0x000000006c7efaf7 in Rf_eval () from /cygdrive/c/R/R-3.4.0/bin/x64/
>> R.dll
>> #6  0x000000006c7f3816 in R_execMethod () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> #7  0x000000006c7efcdf in Rf_eval () from /cygdrive/c/R/R-3.4.0/bin/x64/
>> R.dll
>> #8  0x000000006c81053c in Rf_ReplIteration () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> #9  0x000000006c810902 in Rf_ReplIteration () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> #10 0x000000006c810992 in run_Rmainloop () from
>> /cygdrive/c/R/R-3.4.0/bin/x64/R.dll
>> #11 0x000000000040171c in ?? ()
>> #12 0x000000000040155a in ?? ()
>> #13 0x00000000004013e8 in ?? ()
>> #14 0x000000000040151b in ?? ()
>> #15 0x00007ffe37868102 in KERNEL32!BaseThreadInitThunk () from
>> /cygdrive/c/WINDOWS/system32/KERNEL32.DLL
>> #16 0x00007ffe38d7c5b4 in ntdll!RtlUserThreadStart () from
>> /cygdrive/c/WINDOWS/SYSTEM32/ntdll.dll
>> #17 0x0000000000000000 in ?? ()
>> Backtrace stopped: previous frame inner to this frame (corrupt stack?)
>> (gdb)
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Sat, Jul 15, 2017 at 3:29 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us
>> > wrote:
>>
>>> I am not able to reproduce your segfault on a Windows 7 platform either:
>>>
>>> ##########################
>>> fn1 <- "d:/DADOS_ENEM_2009.txt"
>>> sessionInfo()
>>> ## R version 3.4.1 (2017-06-30)
>>> ## Platform: x86_64-w64-mingw32/x64 (64-bit)
>>> ## Running under: Windows 7 x64 (build 7601) Service Pack 1
>>> ##
>>> ## Matrix products: default
>>> ##
>>> ## locale:
>>> ## [1] LC_COLLATE=English_United States.1252
>>> ## [2] LC_CTYPE=English_United States.1252
>>> ## [3] LC_MONETARY=English_United States.1252
>>> ## [4] LC_NUMERIC=C
>>> ## [5] LC_TIME=English_United States.1252
>>> ##
>>> ## attached base packages:
>>> ## [1] stats     graphics  grDevices utils     datasets  methods   base
>>> ##
>>> ## loaded via a namespace (and not attached):
>>> ## [1] compiler_3.4.1
>>> tools::md5sum( fn1 )
>>> ##             d:/DADOS_ENEM_2009.txt
>>> ## "83e61c96092285b60d7bf6b0dbc7072e"
>>> dat <- readLines( fn1 )
>>> length( dat )
>>> ## [1] 4148721
>>>
>>>
>>> On Sat, 15 Jul 2017, Jeff Newmiller wrote:
>>>
>>> I am not able to reproduce this on a Linux platform:
>>>>
>>>> #######################3
>>>> fn1 <- "/home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>>>> 2009/DADOS_ENEM_2009.txt"
>>>> sessionInfo()
>>>> ## R version 3.4.1 (2017-06-30)
>>>> ## Platform: x86_64-pc-linux-gnu (64-bit)
>>>> ## Running under: Ubuntu 14.04.5 LTS
>>>> ##
>>>> ## Matrix products: default
>>>> ## BLAS: /usr/lib/libblas/libblas.so.3.0
>>>> ## LAPACK: /usr/lib/lapack/liblapack.so.3.0
>>>> ##
>>>> ## locale:
>>>> ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>>> ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>>> ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>>> ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>>> ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>>> ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>>> ##
>>>> ## attached base packages:
>>>> ## [1] stats     graphics  grDevices utils     datasets  methods   base
>>>> ##
>>>> ## loaded via a namespace (and not attached):
>>>> ## [1] compiler_3.4.1
>>>> tools::md5sum( fn1 )
>>>> ## /home/jdnewmil/Downloads/Microdados ENEM 2009/Dados Enem
>>>> 2009/DADOS_ENEM_2009.txt
>>>> ##
>>>> "83e61c96092285b60d7bf6b0dbc7072e"
>>>> dat <- readLines( fn1 )
>>>> length( dat )
>>>> ## [1] 4148721
>>>>
>>>> No segfault occurs.
>>>>
>>>> On Sat, 15 Jul 2017, Anthony Damico wrote:
>>>>
>>>> hi, i realized that the segfault happens on the text file in a new R
>>>>> session.  so, creating the segfault-generating text file requires a
>>>>> contributed package, but prompting the actual segfault does not --
>>>>> pretty
>>>>> sure that means this is a base R bug?  submitted here:
>>>>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311  hopefully
>>>>> i am
>>>>> not doing something remarkably stupid.  the text file itself is 4GB so
>>>>> cannot upload it to bugzilla, and from the R_AllocStringBugger error
>>>>> in the
>>>>> previous message, i think most or all of it needs to be there to
>>>>> trigger
>>>>> the segfault.  thanks!
>>>>>
>>>>>
>>>>> On Sat, Jul 15, 2017 at 10:32 AM, Anthony Damico <ajdamico at gmail.com>
>>>>> wrote:
>>>>>
>>>>> hi, thanks Dr. Murdoch
>>>>>>
>>>>>>
>>>>>> i'd appreciate if anyone on r-help could help me narrow this down?  i
>>>>>> believe the segfault occurs because there's a single line with 4GB
>>>>>> and also
>>>>>> embedded nuls, but i am not sure how to artificially construct that?
>>>>>>
>>>>>>
>>>>>> the lodown package can be removed from my example..  it is just for
>>>>>> file
>>>>>> download cacheing, so `lodown::cachaca` can be replaced with
>>>>>> `download.file`  my current example requires a huge download, so sort
>>>>>> of
>>>>>> painful to repeat but i'm pretty confident that's not the issue.
>>>>>>
>>>>>>
>>>>>> the archive::archive_extract() function unzips a (probably corrupt)
>>>>>> .RAR
>>>>>> file and creates a text file with 80,937 lines.  this file is 4GB:
>>>>>>
>>>>>>    > file.size(infile)
>>>>>>     [1] 4078192743 <(407)%20819-2743>
>>>>>>
>>>>>>
>>>>>> i am pretty sure that nearly all of that 4GB is contained on a single
>>>>>> line
>>>>>> in the file.  here's what happens when i create a file connection and
>>>>>> scan
>>>>>> through..
>>>>>>
>>>>>>    > file_con <- file( infile , 'r' )
>>>>>>    >
>>>>>>    > first_80936_lines <- readLines( file_con , n = 80936 )
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "1000023930632009"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "36F2924009PAULO"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "AFONSO"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "BA11"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "00000"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "00"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "2924009PAULO"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "AFONSO"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "BA1111"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "467.20"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "346.10"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Read 1 item
>>>>>>     [1] "414.40"
>>>>>>    > scan( w , n = 1 , what = character() )
>>>>>>     Error in scan(w, n = 1, what = character()) :
>>>>>>       could not allocate memory (2048 Mb) in C function
>>>>>> 'R_AllocStringBuffer'
>>>>>>
>>>>>>
>>>>>>
>>>>>> making a huge single-line file does not reproduce the problem, i
>>>>>> think the
>>>>>> embedded nuls have something to do with it--
>>>>>>
>>>>>>
>>>>>>     # WARNING do not run with less than 64GB RAM
>>>>>>     tf <- tempfile()
>>>>>>     a <- rep( "a" , 1000000000 )
>>>>>>     b <- paste( a , collapse = '' )
>>>>>>     writeLines( b , tf ) ; rm( b ) ; gc()
>>>>>>     d <- readLines( tf )
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Sat, Jul 15, 2017 at 9:17 AM, Duncan Murdoch <
>>>>>> murdoch.duncan at gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>> On 15/07/2017 7:35 AM, Anthony Damico wrote:
>>>>>>>
>>>>>>> hello, the last line of the code below causes a segfault for me on
>>>>>>>> 3.4.1.
>>>>>>>> i think i should submit to https://bugs.r-project.org/  unless
>>>>>>>> others
>>>>>>>> have
>>>>>>>> advice?  thanks
>>>>>>>>
>>>>>>>>
>>>>>>> Segfaults are usually worth reporting as bugs.  Try to come up with a
>>>>>>> self-contained example, not using the lodown and archive packages.  I
>>>>>>> imagine you can do this by uploading the file you downloaded, or
>>>>>>> enough of
>>>>>>> a subset of it to trigger the segfault.  If you can't do that, then
>>>>>>> likely
>>>>>>> the bug is with one of those packages, not with R.
>>>>>>>
>>>>>>> Duncan Murdoch
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> install.packages( "devtools" )
>>>>>>>> devtools::install_github("ajdamico/lodown")
>>>>>>>> devtools::install_github("jimhester/archive")
>>>>>>>>
>>>>>>>>
>>>>>>>> file_folder <- file.path( tempdir() , "file_folder" )
>>>>>>>>
>>>>>>>> tf <- tempfile()
>>>>>>>>
>>>>>>>> # large download!  cachaca saves on your local disk if already
>>>>>>>> downloaded
>>>>>>>> lodown::cachaca( '
>>>>>>>> http://download.inep.gov.br/microdados/microdados_enem2009.rar' ,
>>>>>>>> tf ,
>>>>>>>> mode
>>>>>>>> = 'wb' )
>>>>>>>>
>>>>>>>> archive::archive_extract( tf , dir = normalizePath( file_folder ) )
>>>>>>>>
>>>>>>>> unzipped_files <- list.files( file_folder , recursive = TRUE ,
>>>>>>>> full.names =
>>>>>>>> TRUE  )
>>>>>>>>
>>>>>>>> infile <- grep( "DADOS(.*)\\.txt$" , unzipped_files , value = TRUE )
>>>>>>>>
>>>>>>>> # works
>>>>>>>> R.utils::countLines( infile )
>>>>>>>>
>>>>>>>> # works with warning
>>>>>>>> my_file <- readLines( infile , skipNul = TRUE )
>>>>>>>>
>>>>>>>> # crash
>>>>>>>> my_file <- readLines( infile )
>>>>>>>>
>>>>>>>>
>>>>>>>> # run just before crash
>>>>>>>> sessionInfo()
>>>>>>>> # R version 3.4.1 (2017-06-30)
>>>>>>>> # Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>>>>>> # Running under: Windows 10 x64 (build 15063)
>>>>>>>>
>>>>>>>> # Matrix products: default
>>>>>>>>
>>>>>>>> # locale:
>>>>>>>> # [1] LC_COLLATE=English_United States.1252
>>>>>>>> # [2] LC_CTYPE=English_United States.1252
>>>>>>>> # [3] LC_MONETARY=English_United States.1252
>>>>>>>> # [4] LC_NUMERIC=C
>>>>>>>> # [5] LC_TIME=English_United States.1252
>>>>>>>>
>>>>>>>> # attached base packages:
>>>>>>>> # [1] stats     graphics  grDevices utils     datasets  methods
>>>>>>>>  base
>>>>>>>>
>>>>>>>> # loaded via a namespace (and not attached):
>>>>>>>>  # [1] httr_1.2.1         compiler_3.4.1     R6_2.2.1
>>>>>>>>  withr_1.0.2
>>>>>>>>  # [5] tibble_1.3.3       curl_2.6           Rcpp_0.12.11
>>>>>>>> memoise_1.1.0
>>>>>>>>  # [9] R.methodsS3_1.7.1  git2r_0.18.0       digest_0.6.12
>>>>>>>> lodown_0.1.0
>>>>>>>> # [13] R.utils_2.5.0      rlang_0.1.1        devtools_1.13.2
>>>>>>>> R.oo_1.21.0
>>>>>>>> # [17] archive_0.0.0.9000
>>>>>>>>
>>>>>>>>         [[alternative HTML version deleted]]
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>>>>>> ng-guide.html
>>>>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>>> ng-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>>
>>>> ------------------------------------------------------------
>>>> ---------------
>>>> Jeff Newmiller                        The     .....       .....  Go
>>>> Live...
>>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>>>> Go...
>>>>                                      Live:   OO#.. Dead: OO#..  Playing
>>>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>>>> /Software/Embedded Controllers)               .OO#.       .OO#.
>>>> rocks...1k
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>>> ng-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>
>>> ------------------------------------------------------------
>>> ---------------
>>> Jeff Newmiller                        The     .....       .....  Go
>>> Live...
>>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>>> Go...
>>>                                       Live:   OO#.. Dead: OO#..  Playing
>>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>>> /Software/Embedded Controllers)               .OO#.       .OO#.
>>> rocks...1k
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posti
>>> ng-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>

	[[alternative HTML version deleted]]


From Mike.Conklin at gfk.com  Mon Jul 17 18:20:28 2017
From: Mike.Conklin at gfk.com (Conklin, Mike (GfK))
Date: Mon, 17 Jul 2017 16:20:28 +0000
Subject: [R] dbplyr error updating database
Message-ID: <8074cce682b941cbb4b0f0dacd905ddc@IPXW-EXPCM02.gfk.com>

I am trying to use a shiny app to update records in an sqlite database.  I keep running into the following error:

unable to find an inherited method for function 'dbSendQuery' for signature '"src_dbi", "character"'

The query I am trying to send is:
[1] "update kpquestions set mrisupercat = 'Demographics - Respondent' , set mricategory = 'Respondent - Age' , where VariableNumber = 2;"

Then I get this in my console window (and my browser connection to the locally running shiny app closes - although the app remains listening on the port)

Warning: Error in <Anonymous>: unable to find an inherited method for function 'dbSendQuery' for signature '"src_dbi", "character"'
Stack trace (innermost first):
    67: <Anonymous>
    66: dbSendQuery
    65: observeEventHandler [/home/mconklin/tmpdir/CodeKPVars/server.R#76]
     1: runApp
Auto-disconnecting SQLiteConnection
Auto-disconnecting SQLiteConnection

The specific chunk of server code being run is:

     kpnew<-src_sqlite("/var/sqlite/KPProfile2")
      stmnt<-paste0("update kpquestions set mrisupercat = '",input$supercat,"' , set mricategory = '",input$subcat, "' , where VariableNumber = ",input$vnum, ";")
      print(stmnt)
      dbSendQuery(kpnew,stmnt)

the print(stmnt)  can be read above

sessionInfo() results
R version 3.4.0 (2017-04-21)
Platform: x86_64-redhat-linux-gnu (64-bit)
Running under: Red Hat Enterprise Linux

Matrix products: default
BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so

locale:
[1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                  LC_ADDRESS=C
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] bindrcpp_0.2         shinydashboard_0.6.1 labelled_1.0.0       haven_1.1.0
 [5] tidyr_0.6.3          dplyr_0.7.1          dbplyr_1.1.0         readr_1.1.1
 [9] shiny_1.0.3          RSQLite_2.0

loaded via a namespace (and not attached):
[1] Rcpp_0.12.11     bindr_0.1        magrittr_1.5     hms_0.3          bit_1.1-12
 [6] xtable_1.8-2     R6_2.2.2         rlang_0.1.1      blob_1.1.0       tools_3.4.0
[11] DBI_0.7          htmltools_0.3.6  bit64_0.9-7      assertthat_0.2.0 digest_0.6.12
[16] tibble_1.3.3     memoise_1.1.0    glue_1.1.1       mime_0.5         compiler_3.4.0
[21] forcats_0.2.0    jsonlite_1.5     httpuv_1.3.5     pkgconfig_2.0.1


>




Any help would be appreciated




--
W. Michael Conklin
Executive Vice President
Marketing & Data Sciences - North America
GfK | 8401 Golden Valley Road | Minneapolis | MN | 55427
mike.conklin at gfk.com<mailto:mike.conklin at gfk.com>
T +1 763 417 4545 | M +1 612 567 8287
www.gfk.com<http://www.gfk.com/>


	[[alternative HTML version deleted]]


From marine.regis at hotmail.fr  Tue Jul 18 00:55:00 2017
From: marine.regis at hotmail.fr (Marine Regis)
Date: Mon, 17 Jul 2017 22:55:00 +0000
Subject: [R] How to apply a system of ordinary differential equations to
 a cell grid?
In-Reply-To: <7D9087F2-C6D5-446E-984C-65B757069986@comcast.net>
References: <HE1PR07MB11947F77F8138EF94D16A84FE2DA0@HE1PR07MB1194.eurprd07.prod.outlook.com>,
 <7D9087F2-C6D5-446E-984C-65B757069986@comcast.net>
Message-ID: <VI1PR07MB3503834DD6FB5A18909BAFDEE2A00@VI1PR07MB3503.eurprd07.prod.outlook.com>

It seems that the method `iteration` in the function `ode` can be useful in my case:

> Method "iteration" is special in that here the function func should
> return the new value of the state variables rather than the rate of
> change. This can be used for individual based models, for difference
> equations, or in those cases where the integration is performed within
> func).

I have tested the method but I don't understand why it doesn't work with one time step:

    solve_sir_model <- function (times, parameters) {

      sir_model <- function (times, states, parameters) {

        with(as.list(c(states, parameters)), {

          dSdt <- -beta*S*I
          dIdt <- beta*S*I-gamma*I
          dRdt <- gamma*I
          dNdt <- dSdt + dIdt + dRdt

          return(list(c(dSdt, dIdt, dRdt, dNdt)))

        })
      }

      states <- c(S = 99, I = 1, R = 0, N = 100)
      return(ode(y = states, times = times, func = sir_model, parms = parameters, method = "iteration"))
    }

    require(deSolve)
    output <- as.data.frame(solve_sir_model(times = 0, parameters = c(beta = 400, gamma = 28)))

 Error in iteration(y, times, func, parms, ...) :
   times should be equally spaced In addition: Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf

Thank you very much for your help.
Marine



________________________________
De : David Winsemius <dwinsemius at comcast.net>
Envoy? : mercredi 21 juin 2017 22:30
? : Marine Regis
Cc : r-help at r-project.org
Objet : Re: [R] How to apply a system of ordinary differential equations to a cell grid?


> On Jun 21, 2017, at 12:48 PM, Marine Regis <marine.regis at hotmail.fr> wrote:
>
> Hello,
>
> I am developing an agent-based model to simulate the spread of infectious diseases in heterogeneous landscapes composed of habitat polygons (or clumps of connected cells). To simplify the model, I consider a habitat grid (or raster) containing the polygon ID of each cell. In addition, I have epidemiological parameters associated with each polygon ID. At each time step, the parameter values change in the polygon. Thus, the data frame ?landscape? (see below) is updated at each time step. Here is an example at t = 0:
>
> landscape <- data.frame(polygon_ID = seq(1, 10, by = 1),
>                        beta = sample(c(100, 200, 400, 600), 10, replace = TRUE),
>                        gamma = sample(c(25, 26, 27, 28), 10, replace = TRUE))
>
> To study the disease dynamics, I also am developing a compartmental model based on a system of ordinary differential equations (ODEs). Here is an example to represent the system of ODEs:
>
> solve_sir_model <- function (times, parameters) {
>
>  sir_model <- function (times, states, parameters) {
>
>    with(as.list(c(states, parameters)), {
>
>      dSdt <- -beta*S*I
>      dIdt <- beta*S*I-gamma*I
>      dRdt <- gamma*I
>      dNdt <- dSdt + dIdt + dRdt
>
>      return(list(c(dSdt, dIdt, dRdt, dNdt)))
>
>    })
>  }
>
>  states <- c(S = 99, I = 1, R = 0, N = 100)
>  return(ode(y = states, times = times, func = sir_model, parms = parameters))
> }
>
> require(deSolve)
> output <- as.data.frame(solve_sir_model(times = seq(0, 5, by = 1), parameters = c(beta = 400, gamma = 28)))
>
> Here is my question: at each time step, is it possible to apply the system of ODEs to each habitat polygon (thus each row) in the data frame ?landscape?? I am using lsoda as an ODE solver. Do I need to use another solver to apply the ODEs at each time step?
>
> Thank you very much for your advice.
> Have a nice day
> Marine
>

There's also ode.2D in the same package {deSolve} and it's help page has a 2-d diffusion example that might be cognate.

>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
R-help -- Main R Mailing List: Primary help - Homepage - SfS<https://stat.ethz.ch/mailman/listinfo/r-help>
stat.ethz.ch
The main R mailing list, for announcements about the development of R and the availability of new code, questions and answers about problems and solutions using R ...



> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


	[[alternative HTML version deleted]]


From jp.beckmcs at gmail.com  Tue Jul 18 04:58:19 2017
From: jp.beckmcs at gmail.com (Jesadaporn Pupantragul)
Date: Tue, 18 Jul 2017 09:58:19 +0700
Subject: [R] A problem with order() function in R
Message-ID: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>

Hello r-help
I am learning R and use R-studio.
I create vector x <- c(19,17,23,11) and use function order(x).
The result show [1]  4 2 1 3. Why it doesn't show [1] 3 2 4 1.
Follow picture that i attach.
Thank you for you answer.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot (5).png
Type: image/png
Size: 68434 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20170718/2df88884/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot (6).png
Type: image/png
Size: 145778 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20170718/2df88884/attachment-0001.png>

From drjimlemon at gmail.com  Tue Jul 18 07:03:44 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Tue, 18 Jul 2017 15:03:44 +1000
Subject: [R] A problem with order() function in R
In-Reply-To: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
References: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
Message-ID: <CA+8X3fV=O70EGtj4HudLJ401v1fE1ZGNWhtb=C8bFRFK08Bp+w@mail.gmail.com>

Hi Jesadaporn,
Try:

order(x,decreasing=TRUE)

Jim

On Tue, Jul 18, 2017 at 12:58 PM, Jesadaporn Pupantragul
<jp.beckmcs at gmail.com> wrote:
> Hello r-help
> I am learning R and use R-studio.
> I create vector x <- c(19,17,23,11) and use function order(x).
> The result show [1]  4 2 1 3. Why it doesn't show [1] 3 2 4 1.
> Follow picture that i attach.
> Thank you for you answer.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Tue Jul 18 07:06:09 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Mon, 17 Jul 2017 22:06:09 -0700
Subject: [R] A problem with order() function in R
In-Reply-To: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
References: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
Message-ID: <CAGxFJbT6ts+bG75zsw+qK6hj2b1=4G0tjpO_ZT44sc0izJhp7Q@mail.gmail.com>

You need to study ?order and perhaps also subscripting. If that isn't
sufficient, I suggest you consult one of the many R web tutorials that
cover this.

Perhaps this will help:

x[order(x)]  gives x in sorted order, which is what you woud get with
sort(x). Indeed, the code implementing sort.default(x) is essentially
x[order(x)] !

Cheers,
Bert
Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jul 17, 2017 at 7:58 PM, Jesadaporn Pupantragul
<jp.beckmcs at gmail.com> wrote:
> Hello r-help
> I am learning R and use R-studio.
> I create vector x <- c(19,17,23,11) and use function order(x).
> The result show [1]  4 2 1 3. Why it doesn't show [1] 3 2 4 1.
> Follow picture that i attach.
> Thank you for you answer.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r.turner at auckland.ac.nz  Tue Jul 18 07:12:21 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Tue, 18 Jul 2017 17:12:21 +1200
Subject: [R] [FORGED]  A problem with order() function in R
In-Reply-To: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
References: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
Message-ID: <9fb57e28-c8dd-2745-e749-e9f29883db56@auckland.ac.nz>

On 18/07/17 14:58, Jesadaporn Pupantragul wrote:
> Hello r-help
> I am learning R and use R-studio.
> I create vector x <- c(19,17,23,11) and use function order(x).
> The result show [1]  4 2 1 3. Why it doesn't show [1] 3 2 4 1.
> Follow picture that i attach.
> Thank you for you answer.

Perhaps this will give you some insight:

o <- order(x)
x[o]

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From peter.langfelder at gmail.com  Tue Jul 18 07:32:24 2017
From: peter.langfelder at gmail.com (Peter Langfelder)
Date: Mon, 17 Jul 2017 22:32:24 -0700
Subject: [R] A problem with order() function in R
In-Reply-To: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
References: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
Message-ID: <CA+hbrhXBaf0GEq+UU8qEyeK3Zxdf3kpWkXU4q-eU9Z7+nhyA5A@mail.gmail.com>

I think you want rank, not order.

> x <- c(19,17,23,11)
> order(x)
[1] 4 2 1 3
> rank(x)
[1] 3 2 4 1

See help(order) and help(rank) for the difference.

Peter

On Mon, Jul 17, 2017 at 7:58 PM, Jesadaporn Pupantragul
<jp.beckmcs at gmail.com> wrote:
> Hello r-help
> I am learning R and use R-studio.
> I create vector x <- c(19,17,23,11) and use function order(x).
> The result show [1]  4 2 1 3. Why it doesn't show [1] 3 2 4 1.
> Follow picture that i attach.
> Thank you for you answer.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jwd at surewest.net  Tue Jul 18 07:52:26 2017
From: jwd at surewest.net (John)
Date: Mon, 17 Jul 2017 22:52:26 -0700
Subject: [R] A problem with order() function in R
In-Reply-To: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
References: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
Message-ID: <20170717225226.2566372e@Draco.localdomain>

On Tue, 18 Jul 2017 09:58:19 +0700
Jesadaporn Pupantragul <jp.beckmcs at gmail.com> wrote:

> Hello r-help
> I am learning R and use R-studio.
> I create vector x <- c(19,17,23,11) and use function order(x).
> The result show [1]  4 2 1 3. Why it doesn't show [1] 3 2 4 1.
> Follow picture that i attach.
> Thank you for you answer.

You might want to ask why you would ever see "[1] 3 2 4 1" as a result
of order(). A descending order would yield [1] 3 1 2 4.

JDougherty


From ranjanagirish30 at gmail.com  Tue Jul 18 09:37:18 2017
From: ranjanagirish30 at gmail.com (Ranjana Girish)
Date: Tue, 18 Jul 2017 13:07:18 +0530
Subject: [R] Help-Multi class classification for large datasets
Message-ID: <CAF5P65nxYNBXGvfP5B8bbzEhGfeS9DF0gc1d1oSNz2uzzwhW0A@mail.gmail.com>

Hai all,

We are working on Multi-class Classification. Currently up to 1.1 million
records Ranger package in R is able to handle. Training time on 128 GB RAM
is 12 days, which is not a practically feasible method to proceed further.

In future we will have dataset of dimension 10 million records, we are in
search for a package or framework which can handle 10 million records with
at least 12000 features.


The package or framework we are searching should handle all the below tasks:

1. Pre-processing of words in corpus( Stopword removal, stemming, remove
special character)
2. Construct document term matrix
3. Feature selection process like chi square, information gain, Gain ration.
4. Random forest classification etc

Kindly let us know the package or framework which can scale up to 10
million rows and 12 columns.

	[[alternative HTML version deleted]]


From JaiswalSK at tut.ac.za  Tue Jul 18 11:08:04 2017
From: JaiswalSK at tut.ac.za (Sanjay Kumar Jaiswal)
Date: Tue, 18 Jul 2017 09:08:04 +0000
Subject: [R]  Redundancy canonical analysis plot problem in 3D using VEGAN,
 RGL, SCATTERPLOT3D and SFSMISC
Message-ID: <1920dd26dfc342cdbb8d27d8ea3c6657@PTA-EMBX01-V.tut.ac.za>

Hello Sir

I am getting problem in plotting in CCA . Could you please help me? I wrote the below command but I don't know why it is taking only first 5 env data rather than all 9.

> strain.data <- read.xlsx("Dee rhiz.xlsx", sheetName="strain", header = T, row.names = 1)
> env.data <- read.xlsx("Dee rhiz.xlsx", sheetName="env", header = T, row.names = 1)
> strain.cca <- cca(strain.data ~ Ph+TotalN+Organicmatter+Ca+K+Na+P+Cu+Mn, data=env.data)
> strain.cca
Call: cca(formula = strain.data ~ Ph + TotalN + Organicmatter + Ca + K + Na + P
+ Cu + Mn, data = env.data)

              Inertia Proportion Rank
Total               5          1
Constrained         5          1    5
Unconstrained       0          0    0
Inertia is mean squared contingency coefficient
Some constraints were aliased because they were collinear (redundant)

Eigenvalues for constrained axes:
CCA1 CCA2 CCA3 CCA4 CCA5
   1    1    1    1    1


> plot(strain.cca)

> summary (strain.cca)



Call:

cca(formula = strain.data ~ Ph + TotalN + Organicmatter + Ca +      K + Na + P + Cu + Mn, data = env.data)



Partitioning of mean squared contingency coefficient:

              Inertia Proportion

Total               5          1

Constrained         5          1

Unconstrained       0          0



Eigenvalues, and their contribution to the mean squared contingency coefficient



Importance of components:

                      CCA1 CCA2 CCA3 CCA4 CCA5

Eigenvalue             1.0  1.0  1.0  1.0  1.0 0

Proportion Explained   0.2  0.2  0.2  0.2  0.2 0

Cumulative Proportion  0.2  0.4  0.6  0.8  1.0 1



Accumulated constrained eigenvalues

Importance of components:

                      CCA1 CCA2 CCA3 CCA4 CCA5

Eigenvalue             1.0  1.0  1.0  1.0  1.0

Proportion Explained   0.2  0.2  0.2  0.2  0.2

Cumulative Proportion  0.2  0.4  0.6  0.8  1.0


Biplot scores for constraining variables



                  CCA1     CCA2    CCA3    CCA4     CCA5

Ph             0.29757  0.85775 -0.3364  0.2242 -0.11088

TotalN        -0.01537 -0.67797  0.6132  0.2831  0.28985

Organicmatter  0.14618  0.06462  0.8320  0.3515  0.39827

Ca             0.08310 -0.41940  0.3858  0.8116  0.09834

K              0.37548  0.38360  0.6849 -0.4172  0.26222


________________________________

----------------------------------------------------------------------------------
Tshwane University of Technology
----------------------------------------------------------------------------------
This email is sent and received in terms of the Electronic
Communications Policy of Tshwane University of Technology.
In line with this policy, this email is private, privileged and
confidential. The full text of the Electronic Mail Disclaimer
can be seen on the TUT web site at
http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
or obtained by phoning (012) 382-5911

________________________________

----------------------------------------------------------------------------------
Tshwane University of Technology
----------------------------------------------------------------------------------
This email is sent and received in terms of the Electronic
Communications Policy of Tshwane University of Technology.
In line with this policy, this email is private, privileged and
confidential. The full text of the Electronic Mail Disclaimer
can be seen on the TUT web site at
http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
or obtained by phoning (012) 382-5911

	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Tue Jul 18 16:42:47 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Tue, 18 Jul 2017 07:42:47 -0700
Subject: [R] Help-Multi class classification for large datasets
In-Reply-To: <CAF5P65nxYNBXGvfP5B8bbzEhGfeS9DF0gc1d1oSNz2uzzwhW0A@mail.gmail.com>
References: <CAF5P65nxYNBXGvfP5B8bbzEhGfeS9DF0gc1d1oSNz2uzzwhW0A@mail.gmail.com>
Message-ID: <CAGxFJbTikEBvwH-+Oxs3W-d2EELr64yk1rxpHE=VHq=OVV2T=A@mail.gmail.com>

You may get some help here, but you should also do your own homework
by looking at the CRAN Machine Learning Task view here:

https://cran.r-project.org/web/views/MachineLearning.html


Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 18, 2017 at 12:37 AM, Ranjana Girish
<ranjanagirish30 at gmail.com> wrote:
> Hai all,
>
> We are working on Multi-class Classification. Currently up to 1.1 million
> records Ranger package in R is able to handle. Training time on 128 GB RAM
> is 12 days, which is not a practically feasible method to proceed further.
>
> In future we will have dataset of dimension 10 million records, we are in
> search for a package or framework which can handle 10 million records with
> at least 12000 features.
>
>
> The package or framework we are searching should handle all the below tasks:
>
> 1. Pre-processing of words in corpus( Stopword removal, stemming, remove
> special character)
> 2. Construct document term matrix
> 3. Feature selection process like chi square, information gain, Gain ration.
> 4. Random forest classification etc
>
> Kindly let us know the package or framework which can scale up to 10
> million rows and 12 columns.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dcarlson at tamu.edu  Tue Jul 18 17:24:50 2017
From: dcarlson at tamu.edu (David L Carlson)
Date: Tue, 18 Jul 2017 15:24:50 +0000
Subject: [R] Redundancy canonical analysis plot problem in 3D using
 VEGAN, RGL, SCATTERPLOT3D and SFSMISC
In-Reply-To: <1920dd26dfc342cdbb8d27d8ea3c6657@PTA-EMBX01-V.tut.ac.za>
References: <1920dd26dfc342cdbb8d27d8ea3c6657@PTA-EMBX01-V.tut.ac.za>
Message-ID: <d27873b19b284938b4313f289f3e30be@exch-2p-mbx-t2.ads.tamu.edu>

We don't have enough information to replicate your results, but the warning in the output is suggestive: "Some constraints were aliased because they were collinear (redundant)".

Are some of your columns perfectly correlated with other columns? This could easily happen if there are more columns than rows.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Sanjay Kumar Jaiswal
Sent: Tuesday, July 18, 2017 4:08 AM
To: r-help at r-project.org
Subject: [R] Redundancy canonical analysis plot problem in 3D using VEGAN, RGL, SCATTERPLOT3D and SFSMISC

Hello Sir

I am getting problem in plotting in CCA . Could you please help me? I wrote the below command but I don't know why it is taking only first 5 env data rather than all 9.

> strain.data <- read.xlsx("Dee rhiz.xlsx", sheetName="strain", header = T, row.names = 1)
> env.data <- read.xlsx("Dee rhiz.xlsx", sheetName="env", header = T, row.names = 1)
> strain.cca <- cca(strain.data ~ Ph+TotalN+Organicmatter+Ca+K+Na+P+Cu+Mn, data=env.data)
> strain.cca
Call: cca(formula = strain.data ~ Ph + TotalN + Organicmatter + Ca + K + Na + P
+ Cu + Mn, data = env.data)

              Inertia Proportion Rank
Total               5          1
Constrained         5          1    5
Unconstrained       0          0    0
Inertia is mean squared contingency coefficient
Some constraints were aliased because they were collinear (redundant)

Eigenvalues for constrained axes:
CCA1 CCA2 CCA3 CCA4 CCA5
   1    1    1    1    1


> plot(strain.cca)

> summary (strain.cca)



Call:

cca(formula = strain.data ~ Ph + TotalN + Organicmatter + Ca +      K + Na + P + Cu + Mn, data = env.data)



Partitioning of mean squared contingency coefficient:

              Inertia Proportion

Total               5          1

Constrained         5          1

Unconstrained       0          0



Eigenvalues, and their contribution to the mean squared contingency coefficient



Importance of components:

                      CCA1 CCA2 CCA3 CCA4 CCA5

Eigenvalue             1.0  1.0  1.0  1.0  1.0 0

Proportion Explained   0.2  0.2  0.2  0.2  0.2 0

Cumulative Proportion  0.2  0.4  0.6  0.8  1.0 1



Accumulated constrained eigenvalues

Importance of components:

                      CCA1 CCA2 CCA3 CCA4 CCA5

Eigenvalue             1.0  1.0  1.0  1.0  1.0

Proportion Explained   0.2  0.2  0.2  0.2  0.2

Cumulative Proportion  0.2  0.4  0.6  0.8  1.0


Biplot scores for constraining variables



                  CCA1     CCA2    CCA3    CCA4     CCA5

Ph             0.29757  0.85775 -0.3364  0.2242 -0.11088

TotalN        -0.01537 -0.67797  0.6132  0.2831  0.28985

Organicmatter  0.14618  0.06462  0.8320  0.3515  0.39827

Ca             0.08310 -0.41940  0.3858  0.8116  0.09834

K              0.37548  0.38360  0.6849 -0.4172  0.26222


________________________________

----------------------------------------------------------------------------------
Tshwane University of Technology
----------------------------------------------------------------------------------
This email is sent and received in terms of the Electronic
Communications Policy of Tshwane University of Technology.
In line with this policy, this email is private, privileged and
confidential. The full text of the Electronic Mail Disclaimer
can be seen on the TUT web site at
http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
or obtained by phoning (012) 382-5911

________________________________

----------------------------------------------------------------------------------
Tshwane University of Technology
----------------------------------------------------------------------------------
This email is sent and received in terms of the Electronic
Communications Policy of Tshwane University of Technology.
In line with this policy, this email is private, privileged and
confidential. The full text of the Electronic Mail Disclaimer
can be seen on the TUT web site at
http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
or obtained by phoning (012) 382-5911

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From wdunlap at tibco.com  Tue Jul 18 17:25:02 2017
From: wdunlap at tibco.com (William Dunlap)
Date: Tue, 18 Jul 2017 08:25:02 -0700
Subject: [R] A problem with order() function in R
In-Reply-To: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
References: <CAKJUD8p5nTHcHUDbR=w-8E97Hey4uhFJpf1=KB-9QjaLeUfOBA@mail.gmail.com>
Message-ID: <CAF8bMcZ5xhg-31=RW+Cv7oMTJj075+Ay2xx59mTGwOknNW02_w@mail.gmail.com>

The definition of 'order' is that x[order(x)] is in increasing order.  E.g.,
  > x <- c(19,17,23,11)
  > order(x)
  [1] 4 2 1 3
  > x[order(x)]
  [1] 11 17 19 23
You may be looking for what 'rank' does:
  > rank(x)
  [1] 3 2 4 1
(If x has no ties, then rank(x) is order(order(x)).)


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Mon, Jul 17, 2017 at 7:58 PM, Jesadaporn Pupantragul <
jp.beckmcs at gmail.com> wrote:

> Hello r-help
> I am learning R and use R-studio.
> I create vector x <- c(19,17,23,11) and use function order(x).
> The result show [1]  4 2 1 3. Why it doesn't show [1] 3 2 4 1.
> Follow picture that i attach.
> Thank you for you answer.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Tue Jul 18 17:38:19 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 18 Jul 2017 08:38:19 -0700
Subject: [R] Redundancy canonical analysis plot problem in 3D using
	VEGAN, RGL, SCATTERPLOT3D and SFSMISC
In-Reply-To: <1920dd26dfc342cdbb8d27d8ea3c6657@PTA-EMBX01-V.tut.ac.za>
References: <1920dd26dfc342cdbb8d27d8ea3c6657@PTA-EMBX01-V.tut.ac.za>
Message-ID: <104CF120-5372-488E-B3D8-518A5A897779@dcn.davis.ca.us>

I don't know much about what you are doing with your data,  but I do know that your example is not reproducible  [1][2][3].

It is very important to be clear both to yourself and to anyone you ask to help you what your data are like. Details like what the column names are, whether they are numeric, character, factor, etc., can completely alter the result. The dput() function can be used to share just enough of your data or a simulated version of it so that we can run your statements also, or point out that your data were imported incorrectly in the first place. 

Also, do read the Posting Guide mentioned in the footer of this email. This is a plain text mailing list so what you saw when you sent it (HTML formatted) is not what we saw (see below)... but if you post in plain text format we are much more likely to solve your problem without back and forth about what you really meant. 

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette)
-- 
Sent from my phone. Please excuse my brevity.

On July 18, 2017 2:08:04 AM PDT, Sanjay Kumar Jaiswal <JaiswalSK at tut.ac.za> wrote:
>Hello Sir
>
>I am getting problem in plotting in CCA . Could you please help me? I
>wrote the below command but I don't know why it is taking only first 5
>env data rather than all 9.
>
>> strain.data <- read.xlsx("Dee rhiz.xlsx", sheetName="strain", header
>= T, row.names = 1)
>> env.data <- read.xlsx("Dee rhiz.xlsx", sheetName="env", header = T,
>row.names = 1)
>> strain.cca <- cca(strain.data ~
>Ph+TotalN+Organicmatter+Ca+K+Na+P+Cu+Mn, data=env.data)
>> strain.cca
>Call: cca(formula = strain.data ~ Ph + TotalN + Organicmatter + Ca + K
>+ Na + P
>+ Cu + Mn, data = env.data)
>
>              Inertia Proportion Rank
>Total               5          1
>Constrained         5          1    5
>Unconstrained       0          0    0
>Inertia is mean squared contingency coefficient
>Some constraints were aliased because they were collinear (redundant)
>
>Eigenvalues for constrained axes:
>CCA1 CCA2 CCA3 CCA4 CCA5
>   1    1    1    1    1
>
>
>> plot(strain.cca)
>
>> summary (strain.cca)
>
>
>
>Call:
>
>cca(formula = strain.data ~ Ph + TotalN + Organicmatter + Ca +      K +
>Na + P + Cu + Mn, data = env.data)
>
>
>
>Partitioning of mean squared contingency coefficient:
>
>              Inertia Proportion
>
>Total               5          1
>
>Constrained         5          1
>
>Unconstrained       0          0
>
>
>
>Eigenvalues, and their contribution to the mean squared contingency
>coefficient
>
>
>
>Importance of components:
>
>                      CCA1 CCA2 CCA3 CCA4 CCA5
>
>Eigenvalue             1.0  1.0  1.0  1.0  1.0 0
>
>Proportion Explained   0.2  0.2  0.2  0.2  0.2 0
>
>Cumulative Proportion  0.2  0.4  0.6  0.8  1.0 1
>
>
>
>Accumulated constrained eigenvalues
>
>Importance of components:
>
>                      CCA1 CCA2 CCA3 CCA4 CCA5
>
>Eigenvalue             1.0  1.0  1.0  1.0  1.0
>
>Proportion Explained   0.2  0.2  0.2  0.2  0.2
>
>Cumulative Proportion  0.2  0.4  0.6  0.8  1.0
>
>
>Biplot scores for constraining variables
>
>
>
>                  CCA1     CCA2    CCA3    CCA4     CCA5
>
>Ph             0.29757  0.85775 -0.3364  0.2242 -0.11088
>
>TotalN        -0.01537 -0.67797  0.6132  0.2831  0.28985
>
>Organicmatter  0.14618  0.06462  0.8320  0.3515  0.39827
>
>Ca             0.08310 -0.41940  0.3858  0.8116  0.09834
>
>K              0.37548  0.38360  0.6849 -0.4172  0.26222
>
>
>________________________________
>
>----------------------------------------------------------------------------------
>Tshwane University of Technology
>----------------------------------------------------------------------------------
>This email is sent and received in terms of the Electronic
>Communications Policy of Tshwane University of Technology.
>In line with this policy, this email is private, privileged and
>confidential. The full text of the Electronic Mail Disclaimer
>can be seen on the TUT web site at
>http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
>or obtained by phoning (012) 382-5911
>
>________________________________
>
>----------------------------------------------------------------------------------
>Tshwane University of Technology
>----------------------------------------------------------------------------------
>This email is sent and received in terms of the Electronic
>Communications Policy of Tshwane University of Technology.
>In line with this policy, this email is private, privileged and
>confidential. The full text of the Electronic Mail Disclaimer
>can be seen on the TUT web site at
>http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
>or obtained by phoning (012) 382-5911
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From maechler at stat.math.ethz.ch  Tue Jul 18 18:21:28 2017
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 18 Jul 2017 18:21:28 +0200
Subject: [R] readLines without skipNul=TRUE causes crash
In-Reply-To: <CAOwvMDzQeOG0VdvR6kD32_L_0=PPH4WR4doQgOBcSs5=8aG80w@mail.gmail.com>
References: <CAOwvMDxuoVc5p_bd4e=rW1xkxcoV_5bEw=cA=PrmF_B_Pk+kqQ@mail.gmail.com>
 <547194a3-f9ff-093b-2325-2a775fa83bbb@gmail.com>
 <CAOwvMDwUVGu+4GwUE8xzJzgmSOKfC0vEVQMw1b6oHaDYzbgriQ@mail.gmail.com>
 <CAOwvMDxMi5wWrZ7g5A3cH8URdTULXGeMsesw-vkn5GcHR5aRDw@mail.gmail.com>
 <3b0a81fb-9c8c-052b-3948-b793ca0dc513@gmail.com>
 <CAOwvMDzUEJg7KHYqLmcjWktMVXZ5EemznQoRo_uW8sPbcDN_iw@mail.gmail.com>
 <da291507-b4e9-ad8d-a896-a8b8e5fa5838@gmail.com>
 <CAOwvMDzQeOG0VdvR6kD32_L_0=PPH4WR4doQgOBcSs5=8aG80w@mail.gmail.com>
Message-ID: <22894.13704.493730.346637@stat.math.ethz.ch>

>>>>> Anthony Damico <ajdamico at gmail.com>
>>>>>     on Sun, 16 Jul 2017 06:40:38 -0400 writes:

    > hi, the text file that prompts the segfault is 4gb but only 80,937 lines
    >> file.info( "S:/temp/crash.txt")
    > size isdir mode               mtime
    > ctime               atime exe
    > S:/temp/crash.txt 4078192743 FALSE  666 2017-07-15 17:24:35 2017-07-15
    > 17:19:47 2017-07-15 17:19:47  no


    > On Sun, Jul 16, 2017 at 6:34 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
    > wrote:

    >> On 16/07/2017 6:17 AM, Anthony Damico wrote:
    >> 
    >>> thank you for taking the time to write this.  i set it running last
    >>> night and it's still going -- if it doesn't finish by tomorrow, i will
    >>> try to find a site to host the problem file and add that link to the bug
    >>> report so the archive package can be avoided at least.  i'm sorry for
    >>> the bother
    >>> 
    >>> 
    >> How big is that text file?  I wouldn't expect my script to take more than
    >> a few minutes even on a huge file.
    >> 
    >> My script might have a bug...
    >> 
    >> Duncan Murdoch
    >> 
    >> On Sat, Jul 15, 2017 at 4:14 PM, Duncan Murdoch
    >>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
    >>> 
    >>> On 15/07/2017 11:33 AM, Anthony Damico wrote:
    >>> 
    >>> hi, i realized that the segfault happens on the text file in a
    >>> new R
    >>> session.  so, creating the segfault-generating text file requires
    >>> a
    >>> contributed package, but prompting the actual segfault does not --
    >>> pretty sure that means this is a base R bug?  submitted here:
    >>> https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311
    >>> <https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311>
    >>> hopefully i am not doing something remarkably stupid.  the text file itself
    >>> is 4GB
    >>> so cannot upload it to bugzilla, and from the
    >>> R_AllocStringBugger error
    >>> in the previous message, i think most or all of it needs to be
    >>> there to
    >>> trigger the segfault.  thanks!

In the mean time, communication has continued a bit at the bugzilla bug tracker
(https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17311 ), and
as you can read there, the bug is fixed now, also thanks to an
initial patch proposal by Hannes M?hleisen.

Martin Maechler
ETH Zurich (and R Core)


From bogaso.christofer at gmail.com  Tue Jul 18 18:48:15 2017
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 18 Jul 2017 22:18:15 +0530
Subject: [R] Creating/Reading a complex string in R
Message-ID: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>

Hi again,

Let say I have below string (arbitrary)

<html>
  <head>
    <script type="text/javascript"     <script type="text/javascript">
      mystatement('current', {'pac':['']});
      mystatement;


I want to pass above string to some R variable for further analysis.
So I have tried below :

String = '<html>
  <head>
    <script type="text/javascript"     <script type="text/javascript">
      mystatement('current', {'pac':['']});
      mystatement;'

It is not clearly working as I am getting below error :

> String = '<html>

+   <head>

+     <script type="text/javascript"     <script type="text/javascript">

+       mystatement('current', {'pac':['']});

Error: unexpected symbol in:

"    <script type="text/javascript"     <script type="text/javascript">

      mystatement('current"

>       mystatement;'

Error: object 'mystatement' not found

>


Any pointer how to create my string 'String' based on above would be
highly appreciated.

Thanks for your time.


From rmh at temple.edu  Tue Jul 18 18:57:26 2017
From: rmh at temple.edu (Richard M. Heiberger)
Date: Tue, 18 Jul 2017 12:57:26 -0400
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
Message-ID: <CAGx1TMDR=O4brzkLXW_FW+a_5KfOkPsiO0yZOAQADU-BuO1cLA@mail.gmail.com>

your string opens with single quote ', and has a single quote ' in the middle.
R sees that as the end of the string.  You will need to escape the
interior ' with
\'
See ?Quotes
for details.


On Tue, Jul 18, 2017 at 12:48 PM, Christofer Bogaso
<bogaso.christofer at gmail.com> wrote:
> Hi again,
>
> Let say I have below string (arbitrary)
>
> <html>
>   <head>
>     <script type="text/javascript"     <script type="text/javascript">
>       mystatement('current', {'pac':['']});
>       mystatement;
>
>
> I want to pass above string to some R variable for further analysis.
> So I have tried below :
>
> String = '<html>
>   <head>
>     <script type="text/javascript"     <script type="text/javascript">
>       mystatement('current', {'pac':['']});
>       mystatement;'
>
> It is not clearly working as I am getting below error :
>
>> String = '<html>
>
> +   <head>
>
> +     <script type="text/javascript"     <script type="text/javascript">
>
> +       mystatement('current', {'pac':['']});
>
> Error: unexpected symbol in:
>
> "    <script type="text/javascript"     <script type="text/javascript">
>
>       mystatement('current"
>
>>       mystatement;'
>
> Error: object 'mystatement' not found
>
>>
>
>
> Any pointer how to create my string 'String' based on above would be
> highly appreciated.
>
> Thanks for your time.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From john.archie.mckown at gmail.com  Tue Jul 18 18:57:58 2017
From: john.archie.mckown at gmail.com (John McKown)
Date: Tue, 18 Jul 2017 11:57:58 -0500
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
Message-ID: <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>

Try:

String = '<html>
  <head>
    <script type="text/javascript"     <script type="text/javascript">
      mystatement(\'current\', {\'pac\':[\'\']});
      mystatement;'


To embed a single ' mark in a string delimited by ' marks, you must
"escape" them by prefixing them with a back-slash \.



R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-redhat-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

>
> String = '<html>
+   <head>
+     <script type="text/javascript"     <script type="text/javascript">
+       mystatement(\'current\', {\'pac\':[\'\']});
+       mystatement;'
> String
[1] "<html>\n  <head>\n    <script type=\"text/javascript\"     <script
type=\"text/javascript\">\n      mystatement('current', {'pac':['']});\n
   mystatement;"



On Tue, Jul 18, 2017 at 11:48 AM, Christofer Bogaso <
bogaso.christofer at gmail.com> wrote:

> Hi again,
>
> Let say I have below string (arbitrary)
>
> <html>
>   <head>
>     <script type="text/javascript"     <script type="text/javascript">
>       mystatement('current', {'pac':['']});
>       mystatement;
>
>
> I want to pass above string to some R variable for further analysis.
> So I have tried below :
>
> String = '<html>
>   <head>
>     <script type="text/javascript"     <script type="text/javascript">
>       mystatement('current', {'pac':['']});
>       mystatement;'
>
> It is not clearly working as I am getting below error :
>
> > String = '<html>
>
> +   <head>
>
> +     <script type="text/javascript"     <script type="text/javascript">
>
> +       mystatement('current', {'pac':['']});
>
> Error: unexpected symbol in:
>
> "    <script type="text/javascript"     <script type="text/javascript">
>
>       mystatement('current"
>
> >       mystatement;'
>
> Error: object 'mystatement' not found
>
> >
>
>
> Any pointer how to create my string 'String' based on above would be
> highly appreciated.
>
> Thanks for your time.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



-- 
Veni, Vidi, VISA: I came, I saw, I did a little shopping.

Maranatha! <><
John McKown

	[[alternative HTML version deleted]]


From bogaso.christofer at gmail.com  Tue Jul 18 19:05:17 2017
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 18 Jul 2017 22:35:17 +0530
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
 <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>
Message-ID: <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>

Thanks for your pointer.

Is there any way in R how to replace " ' " with " /' " programmatically?

My actual string is quite lengthy, so changing it manually may not be
possible. I am aware of gsub() function, however not sure I can apply
it directly on my original string.

Regards,

On Tue, Jul 18, 2017 at 10:27 PM, John McKown
<john.archie.mckown at gmail.com> wrote:
> Try:
>
> String = '<html>
>   <head>
>     <script type="text/javascript"     <script type="text/javascript">
>       mystatement(\'current\', {\'pac\':[\'\']});
>       mystatement;'
>
>
> To embed a single ' mark in a string delimited by ' marks, you must "escape"
> them by prefixing them with a back-slash \.
>
>
>
> R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
> Copyright (C) 2017 The R Foundation for Statistical Computing
> Platform: x86_64-redhat-linux-gnu (64-bit)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
>   Natural language support but running in an English locale
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
>
>>
>> String = '<html>
> +   <head>
> +     <script type="text/javascript"     <script type="text/javascript">
> +       mystatement(\'current\', {\'pac\':[\'\']});
> +       mystatement;'
>> String
> [1] "<html>\n  <head>\n    <script type=\"text/javascript\"     <script
> type=\"text/javascript\">\n      mystatement('current', {'pac':['']});\n
> mystatement;"
>
>
>
> On Tue, Jul 18, 2017 at 11:48 AM, Christofer Bogaso
> <bogaso.christofer at gmail.com> wrote:
>>
>> Hi again,
>>
>> Let say I have below string (arbitrary)
>>
>> <html>
>>   <head>
>>     <script type="text/javascript"     <script type="text/javascript">
>>       mystatement('current', {'pac':['']});
>>       mystatement;
>>
>>
>> I want to pass above string to some R variable for further analysis.
>> So I have tried below :
>>
>> String = '<html>
>>   <head>
>>     <script type="text/javascript"     <script type="text/javascript">
>>       mystatement('current', {'pac':['']});
>>       mystatement;'
>>
>> It is not clearly working as I am getting below error :
>>
>> > String = '<html>
>>
>> +   <head>
>>
>> +     <script type="text/javascript"     <script type="text/javascript">
>>
>> +       mystatement('current', {'pac':['']});
>>
>> Error: unexpected symbol in:
>>
>> "    <script type="text/javascript"     <script type="text/javascript">
>>
>>       mystatement('current"
>>
>> >       mystatement;'
>>
>> Error: object 'mystatement' not found
>>
>> >
>>
>>
>> Any pointer how to create my string 'String' based on above would be
>> highly appreciated.
>>
>> Thanks for your time.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
> --
> Veni, Vidi, VISA: I came, I saw, I did a little shopping.
>
> Maranatha! <><
> John McKown


From john.archie.mckown at gmail.com  Tue Jul 18 19:49:21 2017
From: john.archie.mckown at gmail.com (John McKown)
Date: Tue, 18 Jul 2017 12:49:21 -0500
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
 <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>
 <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
Message-ID: <CAAJSdjisvFoyoCzOjOR6tcKsuV-tDPG3RikQY1gWKjaZAtDWFg@mail.gmail.com>

On Tue, Jul 18, 2017 at 12:05 PM, Christofer Bogaso <
bogaso.christofer at gmail.com> wrote:

> Thanks for your pointer.
>
> Is there any way in R how to replace " ' " with " /' " programmatically?
>
> My actual string is quite lengthy, so changing it manually may not be
> possible. I am aware of gsub() function, however not sure I can apply
> it directly on my original string.
>
> Regards,
>
>
?I guess your string value is in a file? And you'd like to update the file
contents. You didn't say which OS you're on. I'm a Linux person, and the
simplest for me would be:

sed -i -r "s/'/\\'/g" myfile.txt? #note the \\ becomes a single \ in the
output. weird.

Or just edit the file in your favorite editor. In mine, vim, it would be
the command ":g/'/s/\\'/g" (the command is within the " marks).
You are correct that you could use gsub(). But you can't just paste your
string into an R program as is, as you have already seen. You'd need to put
it into a file. Then read that file into a program (perhaps an R program
using gsub()) to write the updated string to another file. Which contents
you could then cut'n'paste into your original R file.
something like:

#!/usr/bin/Rscript
#
files <- commandArgs(trailingOnly=TRUE);
#
for (infile in files) {
        x=readLines(infile);
        y=gsub("'","\\\\'",x);
        ofile=paste0(infile,".new");
        writeLines(y,ofile);
}



-- 
Veni, Vidi, VISA: I came, I saw, I did a little shopping.

Maranatha! <><
John McKown

	[[alternative HTML version deleted]]


From sourabhbal at gmail.com  Tue Jul 18 21:33:57 2017
From: sourabhbal at gmail.com (Sourabh Bal)
Date: Wed, 19 Jul 2017 01:03:57 +0530
Subject: [R] linear trend JJAS spatial data (1979-2005)
Message-ID: <CAKjNfsLchUVM-f6VSaGdkc_JS8_buWdCpQt0KxVWnd6s7+QT4Q@mail.gmail.com>

Hello,

I have a netcdf file for summer monsoon rainfall gridded data over Indian
region. How can I find the linear trend in R?

regards

Sourabh Bal


Dr. Sourabh Bal
Assistant Professor
Department of Physics
Swami Vivekananda Institute of Science and Technology
Kolkata 700145

	[[alternative HTML version deleted]]


From olivier.crouzet at univ-nantes.fr  Tue Jul 18 22:16:25 2017
From: olivier.crouzet at univ-nantes.fr (Olivier Crouzet)
Date: Tue, 18 Jul 2017 22:16:25 +0200
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
 <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>
 <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
Message-ID: <20170718221625.e0adb4261ce43bfb12690764@univ-nantes.fr>

On Tue, 18 Jul 2017 22:35:17 +0530
Christofer Bogaso <bogaso.christofer at gmail.com> wrote:

> Thanks for your pointer.
> 
> Is there any way in R how to replace " ' " with " /' "
> programmatically?
> 

Hi,

perhaps you should simply read the content of a corresponding text
file? There's a simple way using the readr package. Using this
package, you can store the content of a whole file as a
single string. I haven't used it... but if you do choose this way, you
should investigate how it stores / mangages end-of-lines.

#install.packages(readr)
library(readr)
temp <- read_file('file.txt')

You can then process the string that is contained in the temp variable
as you wish to.

Olivier.

> My actual string is quite lengthy, so changing it manually may not be
> possible. I am aware of gsub() function, however not sure I can apply
> it directly on my original string.
> 
> Regards,
> 
> On Tue, Jul 18, 2017 at 10:27 PM, John McKown
> <john.archie.mckown at gmail.com> wrote:
> > Try:
> >
> > String = '<html>
> >   <head>
> >     <script type="text/javascript"     <script
> > type="text/javascript"> mystatement(\'current\', {\'pac\':[\'\']});
> >       mystatement;'
> >
> >
> > To embed a single ' mark in a string delimited by ' marks, you must
> > "escape" them by prefixing them with a back-slash \.
> >
> >
> >
> > R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
> > Copyright (C) 2017 The R Foundation for Statistical Computing
> > Platform: x86_64-redhat-linux-gnu (64-bit)
> >
> > R is free software and comes with ABSOLUTELY NO WARRANTY.
> > You are welcome to redistribute it under certain conditions.
> > Type 'license()' or 'licence()' for distribution details.
> >
> >   Natural language support but running in an English locale
> >
> > R is a collaborative project with many contributors.
> > Type 'contributors()' for more information and
> > 'citation()' on how to cite R or R packages in publications.
> >
> > Type 'demo()' for some demos, 'help()' for on-line help, or
> > 'help.start()' for an HTML browser interface to help.
> > Type 'q()' to quit R.
> >
> >>
> >> String = '<html>
> > +   <head>
> > +     <script type="text/javascript"     <script
> > type="text/javascript">
> > +       mystatement(\'current\', {\'pac\':[\'\']});
> > +       mystatement;'
> >> String
> > [1] "<html>\n  <head>\n    <script type=\"text/javascript\"
> > <script type=\"text/javascript\">\n      mystatement('current',
> > {'pac':['']});\n mystatement;"
> >
> >
> >
> > On Tue, Jul 18, 2017 at 11:48 AM, Christofer Bogaso
> > <bogaso.christofer at gmail.com> wrote:
> >>
> >> Hi again,
> >>
> >> Let say I have below string (arbitrary)
> >>
> >> <html>
> >>   <head>
> >>     <script type="text/javascript"     <script
> >> type="text/javascript"> mystatement('current', {'pac':['']});
> >>       mystatement;
> >>
> >>
> >> I want to pass above string to some R variable for further
> >> analysis. So I have tried below :
> >>
> >> String = '<html>
> >>   <head>
> >>     <script type="text/javascript"     <script
> >> type="text/javascript"> mystatement('current', {'pac':['']});
> >>       mystatement;'
> >>
> >> It is not clearly working as I am getting below error :
> >>
> >> > String = '<html>
> >>
> >> +   <head>
> >>
> >> +     <script type="text/javascript"     <script
> >> type="text/javascript">
> >>
> >> +       mystatement('current', {'pac':['']});
> >>
> >> Error: unexpected symbol in:
> >>
> >> "    <script type="text/javascript"     <script
> >> type="text/javascript">
> >>
> >>       mystatement('current"
> >>
> >> >       mystatement;'
> >>
> >> Error: object 'mystatement' not found
> >>
> >> >
> >>
> >>
> >> Any pointer how to create my string 'String' based on above would
> >> be highly appreciated.
> >>
> >> Thanks for your time.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> >
> >
> >
> > --
> > Veni, Vidi, VISA: I came, I saw, I did a little shopping.
> >
> > Maranatha! <><
> > John McKown
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html and provide commented,
> minimal, self-contained, reproducible code.


-- 
  Olivier Crouzet, PhD
  /Assistant Professor/
  @LLING - Laboratoire de Linguistique de Nantes
    UMR6310 CNRS / Universit? de Nantes
  /Guest Researcher/
  @UMCG (University Medical Center Groningen)
    ENT department
    Rijksuniversiteit Groningen


From ep19772 at gmail.com  Wed Jul 19 00:36:16 2017
From: ep19772 at gmail.com (Eridk Poliruyt)
Date: Tue, 18 Jul 2017 23:36:16 +0100
Subject: [R] STL - time series seasonal decomposition sensitive to data
	points?
Message-ID: <CAGkGB676uEwBX53452qtibTkB61zjwUhAxNjG=9ecCkfxo_FUQ@mail.gmail.com>

Hi all,

I am trying to analyse a time series data and want to make trend-season
decomposition using STL approach in R. However I found the decomposition
result seems to be sensitive to data points even with the robust option.

More specifically, suppose I have a few years of monthly data. Using stl, I
got a decomposition T1 + S1 + R1. Then I deleted the most recent two or
three data points, the resulted decomposition T2 + S2 + R2 are totally
different from the one with full data, especially for the beginning of time
series which is weird. I would have expected that wouldn't be changed much
due to the local nature of STL.

May I ask for any thoughts and help on this issue? Many thanks!

Best regards,
Eric

	[[alternative HTML version deleted]]


From amaengwork at gmail.com  Wed Jul 19 00:43:48 2017
From: amaengwork at gmail.com (Ahreum Maeng)
Date: Tue, 18 Jul 2017 17:43:48 -0500
Subject: [R] lme4 question
Message-ID: <CAGNwpw3AvbdDmceDj8g69Wp2t9ocg8hfHXDkL0M83gG3H28WRg@mail.gmail.com>

Hello,

I am trying to run the following model:

domi ~ type*ratio+((1|id)+(0+type|id)+(1|face_id)+(1|car_id))

My question is whether the data coding for "face_id" and "car_id" variables
is correct.
As you see on the following sample data structure, "type" is repeated
measure where 1=car, 0=face. Thus, I coded "face_id" as "0" when the type
is 1 (car) and coded "car_id" as "0" when type is 0 (face). Would it be a
right way to deal with this repeated measure issue?

?id type    face_id   car_id ratio    domi
1   1        0       1 high     3.14
2   1        0       2 medi    4.67
3   1        0       3 low      4.23
4   1        0       4 low     7 ?
?1   0        1       0 high     3.00
2   0        2       0 medi    4.77
3   0        3       0 low      4.25
4   0        4       0 low     7.12 ??

T
?hank you so much for your help in advance and I look forward to hearing
from you.

Thanks,
Ahreum?

	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Wed Jul 19 02:28:10 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Tue, 18 Jul 2017 17:28:10 -0700
Subject: [R] lme4 question
In-Reply-To: <CAGNwpw3AvbdDmceDj8g69Wp2t9ocg8hfHXDkL0M83gG3H28WRg@mail.gmail.com>
References: <CAGNwpw3AvbdDmceDj8g69Wp2t9ocg8hfHXDkL0M83gG3H28WRg@mail.gmail.com>
Message-ID: <5DDB0761-5236-444D-8A86-8467A3458B07@comcast.net>

Not really the correct mailing list. Please read the Posting Guide and re-submit a plain text version to R-SIG-mixed-models

https://stat.ethz.ch/mailman/listinfo/r-sig-mixed-models


-- David.
> On Jul 18, 2017, at 3:43 PM, Ahreum Maeng <amaengwork at gmail.com> wrote:
> 
> Hello,
> 
> I am trying to run the following model:
> 
> domi ~ type*ratio+((1|id)+(0+type|id)+(1|face_id)+(1|car_id))
> 
> My question is whether the data coding for "face_id" and "car_id" variables
> is correct.

I don't know if that can be answered. Better would be to submit the results of:

 dput(sample_data_object)


> As you see on the following sample data structure, "type" is repeated
> measure where 1=car, 0=face. Thus, I coded "face_id" as "0" when the type
> is 1 (car) and coded "car_id" as "0" when type is 0 (face). Would it be a
> right way to deal with this repeated measure issue?
> 
> ?id type    face_id   car_id ratio    domi
> 1   1        0       1 high     3.14
> 2   1        0       2 medi    4.67
> 3   1        0       3 low      4.23
> 4   1        0       4 low     7 ?
> ?1   0        1       0 high     3.00
> 2   0        2       0 medi    4.77
> 3   0        3       0 low      4.25
> 4   0        4       0 low     7.12 ??
> 
> T
> ?hank you so much for your help in advance and I look forward to hearing
> from you.
> 
> Thanks,
> Ahreum?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From bgunter.4567 at gmail.com  Wed Jul 19 03:23:46 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Tue, 18 Jul 2017 18:23:46 -0700
Subject: [R] lme4 question
In-Reply-To: <CAGNwpw3AvbdDmceDj8g69Wp2t9ocg8hfHXDkL0M83gG3H28WRg@mail.gmail.com>
References: <CAGNwpw3AvbdDmceDj8g69Wp2t9ocg8hfHXDkL0M83gG3H28WRg@mail.gmail.com>
Message-ID: <CAGxFJbRmt3oypLto=SbdoPu_yTOcP6Va4EhksYcuTmnOYkQJig@mail.gmail.com>

Better to post on the mixed models list, r-sig-mixed-models rather than here.

And post in plain text,not html.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jul 18, 2017 at 3:43 PM, Ahreum Maeng <amaengwork at gmail.com> wrote:
> Hello,
>
> I am trying to run the following model:
>
> domi ~ type*ratio+((1|id)+(0+type|id)+(1|face_id)+(1|car_id))
>
> My question is whether the data coding for "face_id" and "car_id" variables
> is correct.
> As you see on the following sample data structure, "type" is repeated
> measure where 1=car, 0=face. Thus, I coded "face_id" as "0" when the type
> is 1 (car) and coded "car_id" as "0" when type is 0 (face). Would it be a
> right way to deal with this repeated measure issue?
>
> id type    face_id   car_id ratio    domi
> 1   1        0       1 high     3.14
> 2   1        0       2 medi    4.67
> 3   1        0       3 low      4.23
> 4   1        0       4 low     7
> 1   0        1       0 high     3.00
> 2   0        2       0 medi    4.77
> 3   0        3       0 low      4.25
> 4   0        4       0 low     7.12
>
> T
> hank you so much for your help in advance and I look forward to hearing
> from you.
>
> Thanks,
> Ahreum
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dcarlson at tamu.edu  Wed Jul 19 04:11:17 2017
From: dcarlson at tamu.edu (David L Carlson)
Date: Wed, 19 Jul 2017 02:11:17 +0000
Subject: [R] Redundancy canonical analysis plot problem in 3D using
 VEGAN, RGL, SCATTERPLOT3D and SFSMISC
In-Reply-To: <0006e64f72444594878f298a5cfd613b@PTA-EMBX01-V.tut.ac.za>
References: <1920dd26dfc342cdbb8d27d8ea3c6657@PTA-EMBX01-V.tut.ac.za>
 <d27873b19b284938b4313f289f3e30be@exch-2p-mbx-t2.ads.tamu.edu>
 <0006e64f72444594878f298a5cfd613b@PTA-EMBX01-V.tut.ac.za>
Message-ID: <3f019e2ae4574bbebf0bc4f789d3378f@exch-2p-mbx-t2.ads.tamu.edu>

We need to keep the discussion on the list. When I run your code, there are several problems.

strain.data <- read.xlsx("Dee rhiz.xlsx", sheetName ="strain", header = T, row.names = 1)

str(strain.data)  # lists 9 columns at the end with all NAs

strain.data1 <- (strain.data, sqrt.dist = TRUE) # this is not a valid R line. I get
Error: unexpected ',' in "strain.data1 <- (strain.data,"

strain.cca1 <- cca(log1p(strain.data) ~ Ph + TotalN + Organicmatter + Ca + K + Na + P + Cu +  Mn, env.data) # More errors resulting from all the NA values
Error in Math.data.frame(strain.data) : 
  non-numeric variable in data frame: NA..1NA..2NA..3NA..4NA..5NA..6NA..7NA..8NA..9

You have only 6 observations. In strain.data, since each column has a single 1 and the other 5 rows are 0's. Assuming that the columns are taxa, each taxon is found at only one site. I suspect there is a problem with your data or with the way you have coded the data. 

David L Carlson

-----Original Message-----
From: Sanjay Kumar Jaiswal [mailto:JaiswalSK at tut.ac.za] 
Sent: Tuesday, July 18, 2017 4:27 PM
To: David L Carlson <dcarlson at tamu.edu>
Subject: RE: [R] Redundancy canonical analysis plot problem in 3D using VEGAN, RGL, SCATTERPLOT3D and SFSMISC

Dear Sir

I am attaching herewith data which I used to analyse. Please correct the command if you find anything wrong with it. I am sending herewith command line too. Please see it and suggest me. I will be very grateful for the same.

getwd()
setwd("C:\\Users\\sanju\\Documents\\Dee")
library(xlsx)
strain.data <- read.xlsx("Dee rhiz.xlsx", sheetName="strain", header = T, row.names = 1)
strain.data1 <- (strain.data, sqrt.dist = TRUE)
env.data <- read.xlsx("Dee rhiz.xlsx", sheetName="env", header = T, row.names = 1)
library(vegan)
strain.cca1 <- cca(log1p(strain.data) ~ Ph + TotalN + Organicmatter + Ca + K + Na + P + Cu +  Mn, env.data)
strain.cca1
strain.cca1plot <- plot(strain.cca1, type = "n", scaling = 3)
text(strain.cca1, display = "cn")
points(strain.cca1, display = "sites", pch=21, col="black", bg="grey", cex=1.2)
text(strain.cca1, "species", col="black", cex=0.8)
summary(strain.cca1)


Regards
Sanjay



-----Original Message-----
From: David L Carlson [mailto:dcarlson at tamu.edu]
Sent: 18 July 2017 20:55
To: Sanjay Kumar Jaiswal; r-help at r-project.org
Subject: RE: [R] Redundancy canonical analysis plot problem in 3D using VEGAN, RGL, SCATTERPLOT3D and SFSMISC

We don't have enough information to replicate your results, but the warning in the output is suggestive: "Some constraints were aliased because they were collinear (redundant)".

Are some of your columns perfectly correlated with other columns? This could easily happen if there are more columns than rows.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Sanjay Kumar Jaiswal
Sent: Tuesday, July 18, 2017 4:08 AM
To: r-help at r-project.org
Subject: [R] Redundancy canonical analysis plot problem in 3D using VEGAN, RGL, SCATTERPLOT3D and SFSMISC

Hello Sir

I am getting problem in plotting in CCA . Could you please help me? I wrote the below command but I don't know why it is taking only first 5 env data rather than all 9.

> strain.data <- read.xlsx("Dee rhiz.xlsx", sheetName="strain", header =
> T, row.names = 1) env.data <- read.xlsx("Dee rhiz.xlsx",
> sheetName="env", header = T, row.names = 1) strain.cca <-
> cca(strain.data ~ Ph+TotalN+Organicmatter+Ca+K+Na+P+Cu+Mn,
> data=env.data) strain.cca
Call: cca(formula = strain.data ~ Ph + TotalN + Organicmatter + Ca + K + Na + P
+ Cu + Mn, data = env.data)

              Inertia Proportion Rank
Total               5          1
Constrained         5          1    5
Unconstrained       0          0    0
Inertia is mean squared contingency coefficient Some constraints were aliased because they were collinear (redundant)

Eigenvalues for constrained axes:
CCA1 CCA2 CCA3 CCA4 CCA5
   1    1    1    1    1


> plot(strain.cca)

> summary (strain.cca)



Call:

cca(formula = strain.data ~ Ph + TotalN + Organicmatter + Ca +      K + Na + P + Cu + Mn, data = env.data)



Partitioning of mean squared contingency coefficient:

              Inertia Proportion

Total               5          1

Constrained         5          1

Unconstrained       0          0



Eigenvalues, and their contribution to the mean squared contingency coefficient



Importance of components:

                      CCA1 CCA2 CCA3 CCA4 CCA5

Eigenvalue             1.0  1.0  1.0  1.0  1.0 0

Proportion Explained   0.2  0.2  0.2  0.2  0.2 0

Cumulative Proportion  0.2  0.4  0.6  0.8  1.0 1



Accumulated constrained eigenvalues

Importance of components:

                      CCA1 CCA2 CCA3 CCA4 CCA5

Eigenvalue             1.0  1.0  1.0  1.0  1.0

Proportion Explained   0.2  0.2  0.2  0.2  0.2

Cumulative Proportion  0.2  0.4  0.6  0.8  1.0


Biplot scores for constraining variables



                  CCA1     CCA2    CCA3    CCA4     CCA5

Ph             0.29757  0.85775 -0.3364  0.2242 -0.11088

TotalN        -0.01537 -0.67797  0.6132  0.2831  0.28985

Organicmatter  0.14618  0.06462  0.8320  0.3515  0.39827

Ca             0.08310 -0.41940  0.3858  0.8116  0.09834

K              0.37548  0.38360  0.6849 -0.4172  0.26222


________________________________

----------------------------------------------------------------------------------
Tshwane University of Technology
----------------------------------------------------------------------------------
This email is sent and received in terms of the Electronic Communications Policy of Tshwane University of Technology.
In line with this policy, this email is private, privileged and confidential. The full text of the Electronic Mail Disclaimer can be seen on the TUT web site at http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
or obtained by phoning (012) 382-5911

________________________________

----------------------------------------------------------------------------------
Tshwane University of Technology
----------------------------------------------------------------------------------
This email is sent and received in terms of the Electronic Communications Policy of Tshwane University of Technology.
In line with this policy, this email is private, privileged and confidential. The full text of the Electronic Mail Disclaimer can be seen on the TUT web site at http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
or obtained by phoning (012) 382-5911

[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

________________________________

----------------------------------------------------------------------------------
Tshwane University of Technology
----------------------------------------------------------------------------------
This email is sent and received in terms of the Electronic
Communications Policy of Tshwane University of Technology.
In line with this policy, this email is private, privileged and
confidential. The full text of the Electronic Mail Disclaimer
can be seen on the TUT web site at
http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
or obtained by phoning (012) 382-5911

________________________________

----------------------------------------------------------------------------------
Tshwane University of Technology
----------------------------------------------------------------------------------
This email is sent and received in terms of the Electronic
Communications Policy of Tshwane University of Technology.
In line with this policy, this email is private, privileged and
confidential. The full text of the Electronic Mail Disclaimer
can be seen on the TUT web site at
http://www.tut.ac.za/Other/disclaimer/Pages/default.aspx
or obtained by phoning (012) 382-5911


From anabelen.marin4 at um.es  Wed Jul 19 09:19:16 2017
From: anabelen.marin4 at um.es (=?UTF-8?B?QW5hIEJlbMOpbiBNYXLDrW4=?=)
Date: Wed, 19 Jul 2017 09:19:16 +0200
Subject: [R] Problem in shiny writing a .txt file
Message-ID: <0f89513e-0e8d-92af-3564-a98be0d58b83@um.es>

Hi all!

I'm developing a shiny app and I have problems when I wanna write a .txt 
file.

First of all, I change the directory in order to work in a temporal one:

wd   <- tempdir()
setwd( wd )
res.path <- paste0( wd, "/OUT/" )
dir.create( res.path )

Just before calling the function that fails, I remove, if exist, the old 
files of the directory:

file.remove( paste0( res.path, dir( res.path ) ) )

Then, I call f.texto, whose code is as follows:

f.texto <- function( l, res, a ){
   myfile <- res
   write( paste( "SAIC50. ", a, ", ", date(), sep = "" ), file = paste( 
res.path, myfile, sep = "" ) )
   write( "----------------------------------", file = paste (res.path, 
myfile, sep = ""), append = T )
   write( "\r\n", file = paste( res.path, myfile, sep = "" ), append = T )
   write( l[[6]], file = paste( res.path, myfile, sep = "" ), append = T )
   write( "\r\n", file = paste( res.path, myfile, sep = "" ), append = T )
}

and I get the next error the first time I run the app and choose the 
wanted option  (then, the error disappears):

Error in file: cannot open the connection.

Warning message:

In file(file, ifelse(append, "a", "w")) :

cannot open the file 
'/tmp/RtmpSQOYnV/OUT/Resultado-ajuste5-ic50-2017-07-19.txt': No such 
file or director

It's like the first time running the app, the file is not created with 
the command /write("...", file = "...") in spite of the option append is 
false. /

Thanks for your help,

Anab.


	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Wed Jul 19 11:31:58 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 19 Jul 2017 21:31:58 +1200
Subject: [R] Problem in shiny writing a .txt file
In-Reply-To: <0f89513e-0e8d-92af-3564-a98be0d58b83@um.es>
References: <0f89513e-0e8d-92af-3564-a98be0d58b83@um.es>
Message-ID: <f8a108d9-fec3-e2dc-0799-6a7c721b48b3@auckland.ac.nz>


On 19/07/17 19:19, Ana Bel?n Mar?n wrote:

> Hi all!
> 
> I'm developing a shiny app and I have problems when I wanna write a .txt
> file.

<SNIP>

" ... when I *want to* write ..."

The language of this mailing list is *English*, not Valspeak.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From ulrik.stervbo at gmail.com  Wed Jul 19 11:58:17 2017
From: ulrik.stervbo at gmail.com (Ulrik Stervbo)
Date: Wed, 19 Jul 2017 09:58:17 +0000
Subject: [R] Problem in shiny writing a .txt file
In-Reply-To: <f8a108d9-fec3-e2dc-0799-6a7c721b48b3@auckland.ac.nz>
References: <0f89513e-0e8d-92af-3564-a98be0d58b83@um.es>
 <f8a108d9-fec3-e2dc-0799-6a7c721b48b3@auckland.ac.nz>
Message-ID: <CAKVAULMWRCWd=Kh33XhPb0bEaD6X5m4zTuF9Op5u9S=wNEmo5Q@mail.gmail.com>

Hi Ana,

The path is most likely wrong.

How does f.texto() know the res.path? Do you manage to remove the old path
and create a new one but f.texto() doesn't know?

Not reasons for your problem, but curious: Why do you change the working
directory? What is the intention behind appending dir(res.path) to
res.path? Why don't you create a vector with the lines and use writeline()
in f.texto() instead of opening and closing the file several times?

HTH
Ulrik

On Wed, 19 Jul 2017 at 11:32 Rolf Turner <r.turner at auckland.ac.nz> wrote:

>
> On 19/07/17 19:19, Ana Bel?n Mar?n wrote:
>
> > Hi all!
> >
> > I'm developing a shiny app and I have problems when I wanna write a .txt
> > file.
>
> <SNIP>
>
> " ... when I *want to* write ..."
>
> The language of this mailing list is *English*, not Valspeak.
>
> cheers,
>
> Rolf Turner
>
> --
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276 <+64%209-373%207599>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From mrguilfoyle at gmail.com  Wed Jul 19 12:16:26 2017
From: mrguilfoyle at gmail.com (Mathew Guilfoyle)
Date: Wed, 19 Jul 2017 12:16:26 +0200
Subject: [R] Problem in shiny writing a .txt file
In-Reply-To: <0f89513e-0e8d-92af-3564-a98be0d58b83@um.es>
References: <0f89513e-0e8d-92af-3564-a98be0d58b83@um.es>
Message-ID: <529C2FF4-005C-453A-81B4-48B578144EBC@gmail.com>

Is res.path usually empty? If the res.path directory is empty (i.e. dir(res.path) is an empty vector) the file.remove operation will remove the directory.  This behaviour is documented in the help for file.remove.  When your subsequent function tries to write to that directory it does not exist hence the error. 

wd = tempdir()
res.path = paste0(wd,'/OUT/')
dir.create(res.path)
#this will delete the directory as res.path is empty
file.remove(paste0(res.path,dir(res.path))) 

dir.create(res.path)
file.create(paste0(res.path,'test.txt')
#this will delete the test.txt file and leave the directory in place
file.remove(paste0(res.path,dir(res.path))) 

Does your function work if you don't do the file.remove beforehand?

HTH

> On 19 Jul 2017, at 09:19, Ana Bel?n Mar?n <anabelen.marin4 at um.es> wrote:
> 
> Hi all!
> 
> I'm developing a shiny app and I have problems when I wanna write a .txt 
> file.
> 
> First of all, I change the directory in order to work in a temporal one:
> 
> wd   <- tempdir()
> setwd( wd )
> res.path <- paste0( wd, "/OUT/" )
> dir.create( res.path )
> 
> Just before calling the function that fails, I remove, if exist, the old 
> files of the directory:
> 
> file.remove( paste0( res.path, dir( res.path ) ) )
> 
> Then, I call f.texto, whose code is as follows:
> 
> f.texto <- function( l, res, a ){
>   myfile <- res
>   write( paste( "SAIC50. ", a, ", ", date(), sep = "" ), file = paste( 
> res.path, myfile, sep = "" ) )
>   write( "----------------------------------", file = paste (res.path, 
> myfile, sep = ""), append = T )
>   write( "\r\n", file = paste( res.path, myfile, sep = "" ), append = T )
>   write( l[[6]], file = paste( res.path, myfile, sep = "" ), append = T )
>   write( "\r\n", file = paste( res.path, myfile, sep = "" ), append = T )
> }
> 
> and I get the next error the first time I run the app and choose the 
> wanted option  (then, the error disappears):
> 
> Error in file: cannot open the connection.
> 
> Warning message:
> 
> In file(file, ifelse(append, "a", "w")) :
> 
> cannot open the file 
> '/tmp/RtmpSQOYnV/OUT/Resultado-ajuste5-ic50-2017-07-19.txt': No such 
> file or director
> 
> It's like the first time running the app, the file is not created with 
> the command /write("...", file = "...") in spite of the option append is 
> false. /
> 
> Thanks for your help,
> 
> Anab.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From friendly at yorku.ca  Wed Jul 19 14:38:52 2017
From: friendly at yorku.ca (Michael Friendly)
Date: Wed, 19 Jul 2017 08:38:52 -0400
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
 <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>
 <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
Message-ID: <ecb19519-2533-8a87-1a02-29ea6012f1e9@yorku.ca>

It was suggested to quote your string with *backticks* (` ... `) rather 
than single quotes.

String <- `<html>
      <head>
      ...
`

On 7/18/2017 1:05 PM, Christofer Bogaso wrote:
> Thanks for your pointer.
> 
> Is there any way in R how to replace " ' " with " /' " programmatically?
> 
> My actual string is quite lengthy, so changing it manually may not be
> possible. I am aware of gsub() function, however not sure I can apply
> it directly on my original string.
> 
> Regards,
> 
> On Tue, Jul 18, 2017 at 10:27 PM, John McKown
> <john.archie.mckown at gmail.com> wrote:
>> Try:
>>
>> String = '<html>
>>    <head>
>>      <script type="text/javascript"     <script type="text/javascript">
>>        mystatement(\'current\', {\'pac\':[\'\']});
>>        mystatement;'
>>
>>
>> To embed a single ' mark in a string delimited by ' marks, you must "escape"
>> them by prefixing them with a back-slash \.
>>
>>
>>
>> R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
>> Copyright (C) 2017 The R Foundation for Statistical Computing
>> Platform: x86_64-redhat-linux-gnu (64-bit)
>>
>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>> You are welcome to redistribute it under certain conditions.
>> Type 'license()' or 'licence()' for distribution details.
>>
>>    Natural language support but running in an English locale
>>
>> R is a collaborative project with many contributors.
>> Type 'contributors()' for more information and
>> 'citation()' on how to cite R or R packages in publications.
>>
>> Type 'demo()' for some demos, 'help()' for on-line help, or
>> 'help.start()' for an HTML browser interface to help.
>> Type 'q()' to quit R.
>>
>>>
>>> String = '<html>
>> +   <head>
>> +     <script type="text/javascript"     <script type="text/javascript">
>> +       mystatement(\'current\', {\'pac\':[\'\']});
>> +       mystatement;'
>>> String
>> [1] "<html>\n  <head>\n    <script type=\"text/javascript\"     <script
>> type=\"text/javascript\">\n      mystatement('current', {'pac':['']});\n
>> mystatement;"
>>
>>
>>
>> On Tue, Jul 18, 2017 at 11:48 AM, Christofer Bogaso
>> <bogaso.christofer at gmail.com> wrote:
>>>
>>> Hi again,
>>>
>>> Let say I have below string (arbitrary)
>>>
>>> <html>
>>>    <head>
>>>      <script type="text/javascript"     <script type="text/javascript">
>>>        mystatement('current', {'pac':['']});
>>>        mystatement;
>>>
>>>
>>> I want to pass above string to some R variable for further analysis.
>>> So I have tried below :
>>>
>>> String = '<html>
>>>    <head>
>>>      <script type="text/javascript"     <script type="text/javascript">
>>>        mystatement('current', {'pac':['']});
>>>        mystatement;'
>>>
>>> It is not clearly working as I am getting below error :
>>>
>>>> String = '<html>
>>>
>>> +   <head>
>>>
>>> +     <script type="text/javascript"     <script type="text/javascript">
>>>
>>> +       mystatement('current', {'pac':['']});
>>>
>>> Error: unexpected symbol in:
>>>
>>> "    <script type="text/javascript"     <script type="text/javascript">
>>>
>>>        mystatement('current"
>>>
>>>>        mystatement;'
>>>
>>> Error: object 'mystatement' not found
>>>
>>>>
>>>
>>>
>>> Any pointer how to create my string 'String' based on above would be
>>> highly appreciated.
>>>
>>> Thanks for your time.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>>
>> --
>> Veni, Vidi, VISA: I came, I saw, I did a little shopping.
>>
>> Maranatha! <><
>> John McKown
>


From dwinsemius at comcast.net  Wed Jul 19 17:17:22 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Wed, 19 Jul 2017 08:17:22 -0700
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <ecb19519-2533-8a87-1a02-29ea6012f1e9@yorku.ca>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
 <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>
 <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
 <ecb19519-2533-8a87-1a02-29ea6012f1e9@yorku.ca>
Message-ID: <13DE8F4C-E376-40BE-96D6-F6C92951036A@comcast.net>


> On Jul 19, 2017, at 5:38 AM, Michael Friendly <friendly at yorku.ca> wrote:
> 
> It was suggested to quote your string with *backticks* (` ... `) rather than single quotes.
> 
> String <- `<html>
>     <head>
>     ...
> `

That failed for me. The parser considered it a language object, an R name. Here's what I needed to do:

> string <- `"this string has both "'" and '"'`
Error: object '"this string has both "'" and '"'' not found
> string <- deparse(`"this string has both "'" and '"'`)
Error in deparse(`"this string has both "'" and '"'`) : 
  object '"this string has both "'" and '"'' not found

But success with:


> string <- deparse(substitute(`"this string has both "'" and '"'`))

> string
[1] "\"this string has both \"'\" and '\"'"

With linefeed:

> string <- deparse(substitute(`"this string ...
+  has both "'" and '"'`))
> string
[1] "\"this string ...\n has both \"'\" and '\"'"



> On 7/18/2017 1:05 PM, Christofer Bogaso wrote:
>> Thanks for your pointer.
>> Is there any way in R how to replace " ' " with " /' " programmatically?

Forward-slashes are not going to have any desirable effect. They are not the R escape-character.

Best of luck. I do not think we yet know in what form this "string" exists at the moment. And it's not clear whether your use case requires keeping these lines all in one element of a character vector. Generally `readLines` and `scan` (and by extension all the read.* variants) wiill interpret the line-feeds as end of line.

> cat(string, file="test.txt")

> readLines("test.txt")     # will retrieve a two-element character vector.
[1] "\"this string ..."        " has both \"'\" and '\"'"
Warning message:
In readLines("test.txt") : incomplete final line found on 'test.txt'

-- 
David.

>> My actual string is quite lengthy, so changing it manually may not be
>> possible. I am aware of gsub() function, however not sure I can apply
>> it directly on my original string.
>> Regards,
>> On Tue, Jul 18, 2017 at 10:27 PM, John McKown
>> <john.archie.mckown at gmail.com> wrote:
>>> Try:
>>> 
>>> String = '<html>
>>>   <head>
>>>     <script type="text/javascript"     <script type="text/javascript">
>>>       mystatement(\'current\', {\'pac\':[\'\']});
>>>       mystatement;'
>>> 
>>> 
>>> To embed a single ' mark in a string delimited by ' marks, you must "escape"
>>> them by prefixing them with a back-slash \.
>>> 
>>> 
>>> 
>>> R version 3.4.0 (2017-04-21) -- "You Stupid Darkness"
>>> Copyright (C) 2017 The R Foundation for Statistical Computing
>>> Platform: x86_64-redhat-linux-gnu (64-bit)
>>> 
>>> R is free software and comes with ABSOLUTELY NO WARRANTY.
>>> You are welcome to redistribute it under certain conditions.
>>> Type 'license()' or 'licence()' for distribution details.
>>> 
>>>   Natural language support but running in an English locale
>>> 
>>> R is a collaborative project with many contributors.
>>> Type 'contributors()' for more information and
>>> 'citation()' on how to cite R or R packages in publications.
>>> 
>>> Type 'demo()' for some demos, 'help()' for on-line help, or
>>> 'help.start()' for an HTML browser interface to help.
>>> Type 'q()' to quit R.
>>> 
>>>> 
>>>> String = '<html>
>>> +   <head>
>>> +     <script type="text/javascript"     <script type="text/javascript">
>>> +       mystatement(\'current\', {\'pac\':[\'\']});
>>> +       mystatement;'
>>>> String
>>> [1] "<html>\n  <head>\n    <script type=\"text/javascript\"     <script
>>> type=\"text/javascript\">\n      mystatement('current', {'pac':['']});\n
>>> mystatement;"
>>> 
>>> 
>>> 
>>> On Tue, Jul 18, 2017 at 11:48 AM, Christofer Bogaso
>>> <bogaso.christofer at gmail.com> wrote:
>>>> 
>>>> Hi again,
>>>> 
>>>> Let say I have below string (arbitrary)
>>>> 
>>>> <html>
>>>>   <head>
>>>>     <script type="text/javascript"     <script type="text/javascript">
>>>>       mystatement('current', {'pac':['']});
>>>>       mystatement;
>>>> 
>>>> 
>>>> I want to pass above string to some R variable for further analysis.
>>>> So I have tried below :
>>>> 
>>>> String = '<html>
>>>>   <head>
>>>>     <script type="text/javascript"     <script type="text/javascript">
>>>>       mystatement('current', {'pac':['']});
>>>>       mystatement;'
>>>> 
>>>> It is not clearly working as I am getting below error :
>>>> 
>>>>> String = '<html>
>>>> 
>>>> +   <head>
>>>> 
>>>> +     <script type="text/javascript"     <script type="text/javascript">
>>>> 
>>>> +       mystatement('current', {'pac':['']});
>>>> 
>>>> Error: unexpected symbol in:
>>>> 
>>>> "    <script type="text/javascript"     <script type="text/javascript">
>>>> 
>>>>       mystatement('current"
>>>> 
>>>>>       mystatement;'
>>>> 
>>>> Error: object 'mystatement' not found
>>>> 
>>>>> 
>>>> 
>>>> 
>>>> Any pointer how to create my string 'String' based on above would be
>>>> highly appreciated.
>>>> 
>>>> Thanks for your time.
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>>> 
>>> 
>>> 
>>> --
>>> Veni, Vidi, VISA: I came, I saw, I did a little shopping.
>>> 
>>> Maranatha! <><
>>> John McKown
>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

David Winsemius
Alameda, CA, USA


From jdnewmil at dcn.davis.ca.us  Wed Jul 19 17:41:22 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Wed, 19 Jul 2017 08:41:22 -0700
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <13DE8F4C-E376-40BE-96D6-F6C92951036A@comcast.net>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
 <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>
 <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
 <ecb19519-2533-8a87-1a02-29ea6012f1e9@yorku.ca>
 <13DE8F4C-E376-40BE-96D6-F6C92951036A@comcast.net>
Message-ID: <6F867372-AEBD-407F-8000-5630B2670F7F@dcn.davis.ca.us>

I think the whole premise of this question is flawed. If you want to work with this string as data,  then read it in from a separate file using readLines. If it is fixed data that you want to be part of your program, then invest the effort to escape the odd characters and be done with it. But using backticks is a bad idea because they ate not just another kind of quote. 
-- 
Sent from my phone. Please excuse my brevity.

On July 19, 2017 8:17:22 AM PDT, David Winsemius <dwinsemius at comcast.net> wrote:
>
>> On Jul 19, 2017, at 5:38 AM, Michael Friendly <friendly at yorku.ca>
>wrote:
>> 
>> It was suggested to quote your string with *backticks* (` ... `)
>rather than single quotes.
>> 
>> String <- `<html>
>>     <head>
>>     ...
>> `
>
>That failed for me. The parser considered it a language object, an R
>name. Here's what I needed to do:
>
>> string <- `"this string has both "'" and '"'`
>Error: object '"this string has both "'" and '"'' not found
>> string <- deparse(`"this string has both "'" and '"'`)
>Error in deparse(`"this string has both "'" and '"'`) : 
>  object '"this string has both "'" and '"'' not found
>
>But success with:
>
>
>> string <- deparse(substitute(`"this string has both "'" and '"'`))
>
>> string
>[1] "\"this string has both \"'\" and '\"'"
>
>With linefeed:
>
>> string <- deparse(substitute(`"this string ...
>+  has both "'" and '"'`))
>> string
>[1] "\"this string ...\n has both \"'\" and '\"'"
>
>
>
>> On 7/18/2017 1:05 PM, Christofer Bogaso wrote:
>>> Thanks for your pointer.
>>> Is there any way in R how to replace " ' " with " /' "
>programmatically?
>
>Forward-slashes are not going to have any desirable effect. They are
>not the R escape-character.
>
>Best of luck. I do not think we yet know in what form this "string"
>exists at the moment. And it's not clear whether your use case requires
>keeping these lines all in one element of a character vector. Generally
>`readLines` and `scan` (and by extension all the read.* variants) wiill
>interpret the line-feeds as end of line.
>
>> cat(string, file="test.txt")
>
>> readLines("test.txt")     # will retrieve a two-element character
>vector.
>[1] "\"this string ..."        " has both \"'\" and '\"'"
>Warning message:
>In readLines("test.txt") : incomplete final line found on 'test.txt'


From murdoch.duncan at gmail.com  Wed Jul 19 18:05:06 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 19 Jul 2017 12:05:06 -0400
Subject: [R] Creating/Reading a complex string in R
In-Reply-To: <6F867372-AEBD-407F-8000-5630B2670F7F@dcn.davis.ca.us>
References: <CA+dpOJmYDOY7J=nfw+SOh2naMbXQvVkGu_CT8gfO5UGjrxXiaA@mail.gmail.com>
 <CAAJSdjj0Fvwr=t2ngfnGM5ZcuBXRKdFUzmeP3iGkK_tmbDH3Vw@mail.gmail.com>
 <CA+dpOJmncabn2bFGy8U6PGUXSXWVV8-_Zu4=8qWDozaHu6cwqg@mail.gmail.com>
 <ecb19519-2533-8a87-1a02-29ea6012f1e9@yorku.ca>
 <13DE8F4C-E376-40BE-96D6-F6C92951036A@comcast.net>
 <6F867372-AEBD-407F-8000-5630B2670F7F@dcn.davis.ca.us>
Message-ID: <542176d6-da7b-31c9-1549-f2cb3eadae98@gmail.com>

On 19/07/2017 11:41 AM, Jeff Newmiller wrote:
> I think the whole premise of this question is flawed. If you want to work with this string as data,  then read it in from a separate file using readLines. If it is fixed data that you want to be part of your program, then invest the effort to escape the odd characters and be done with it. But using backticks is a bad idea because they ate not just another kind of quote.
>

I agree.

Duncan Murdoch


From snada.g14 at gmail.com  Wed Jul 19 20:08:54 2017
From: snada.g14 at gmail.com (Nada Gh)
Date: Wed, 19 Jul 2017 21:08:54 +0300
Subject: [R] label sunflower point
In-Reply-To: <395ed52c-328b-0237-7dc7-c3ac676c211e@yorku.ca>
References: <CAKNiqew1K=Z9PDAmZt9YrfgaQ+ao9vuMw+oBRjMLtoPeq_npLw@mail.gmail.com>
 <395ed52c-328b-0237-7dc7-c3ac676c211e@yorku.ca>
Message-ID: <CAKNiqeyNLeDReWpqRbYq0X5e7Dayp=GSvuESjp0ztYzs8cqqow@mail.gmail.com>

Thank you all!

On Mon, Jul 17, 2017 at 4:46 PM, Michael Friendly <friendly at yorku.ca> wrote:
> On 7/16/2017 9:36 AM, Nada Gh wrote:
>>
>> Hi,
>>
>> I create a plot using sunflowerplot, I need to highlight one point to show
>> its importance. What suggestion you have to accomplish this?
>>
>> Thanks,
>
>
> In general, the way to answer such a question for yourself is to read the
> documentation for arguments related to observation plot attributes,
> then, if necessary, read the source code.
>
> The col= argument of sunflowerplot is passed to points(), and seg.col= is
> passed to segments, so you could try creating a vector of these, with a
> different value for the point you want to highlight.
>
> -Michael
>
>


From ep19772 at gmail.com  Wed Jul 19 20:34:38 2017
From: ep19772 at gmail.com (Eridk Poliruyt)
Date: Wed, 19 Jul 2017 19:34:38 +0100
Subject: [R] STL - time series seasonal decomposition sensitive to data
	points?
Message-ID: <CAGkGB679kECdoJ5EGcpy6SwQ48zmWcC+2FkexHid0EiBHmmidQ@mail.gmail.com>

Hi all,

I am trying to analyse a time series data and want to make
trend-season decomposition using STL approach in R. However I found
the decomposition result seems to be sensitive to data points even
with the robust option.

More specifically, suppose I have a few years of monthly data. Using
stl, I got a decomposition T1 + S1 + R1. Then I deleted the most
recent two or three data points, the resulted decomposition T2 + S2 +
R2 are totally different from the one with full data, especially for
the beginning of time series which is weird. I would have expected
that wouldn't be changed much due to the local nature of STL.

May I ask for any thoughts and help on this issue? Many thanks!

Best regards,
Eric


From rosita21 at gmail.com  Wed Jul 19 16:51:04 2017
From: rosita21 at gmail.com (Rosa Oliveira)
Date: Wed, 19 Jul 2017 15:51:04 +0100
Subject: [R] spaghetti plot - urgent
Message-ID: <FF2ED0D7-C003-4EB0-B3C7-D2C63A4946EA@gmail.com>

Hi everyone, 

I?m trying to do a spaghetti plot and I know I?m doing all wrong, It must be.

What I need:

15 subjects, each with measurements over 5 different times (t1, ..., t5), and the variable that I need to represent in the spaguetti plot is given by:

PCR = b0 + b1 * ti + epsilon

B0, - baseline of each subject
B1 - trajectory of each subject over time (so multiply by t)
Epsilon - error associated with each subject

Regression model with mixed effects.

Thus, I generated b0, b1, epsilon and time created sequence.

But I need to do spaguetti plot of the outcome and I can not understand how much I search the publications.

Sorry for the stupidity, but I do not even know how to do it and I need it with the utmost urgency to finish a publication proposal :(

Follows what I tried to do :( :( :( 


library(ggplot2)
library(reshape)
library(lattice)
library(gtable)
library(grid)


set.seed(9027)

n.longitudinal.observations  = 5 			  # number of PCR measures (per subject) in the hospital period
subjects                    	     = 15                      # Number of simulations (1 per subject in the study)

beta0_7_gerar                      = rnorm(subjects, mean = 1, sd = .5)		
beta0_7                                = as.data.frame(matrix(beta0_7_gerar,nrow=subjects,ncol=1))      # beta 0 - input variable used to calculate PCR (the outcome)  
beta1_7_gerar                     = rnorm(subjects, mean = -1, sd = .5)
beta1_7                               = as.data.frame(matrix(beta1_7_gerar,nrow=subjects,ncol=1) )      # beta 1 - input variable used to calculate PCR (the outcome)

tj_gerar                                = seq.int(1, n.longitudinal.observations, 1)
epsilon_7_gerar                  = rnorm(5*subjects, mean = 0, sd = .1)
epsilon_7                             = as.data.frame(matrix(epsilon_7_gerar,nrow=subjects,ncol=1) )   # epsilon_7 - input variable used to calculate PCR (the outcome) - associated with each subject

tj                                          = as.data.frame(matrix(tj_gerar,nrow=subjects,ncol=1) )		      # time 

point7 <- cbind(beta0_7, beta1_7, tj, epsilon_7) 
point7
point7 <- as.data.frame(point7)

colnames(point7) = c("beta0_7","beta1_7","time", "epsilon_7")


y_point7 <- point7$beta0_7 + point7$beta1_7*point7$time + point7 $epsilon_7		(the outcome of the study - PCR)
y_point7

require(ggplot2)

png('test.png')
p = ggplot(y_point7, aes(time, y_point7)) + geom_line()
print(p)
dev.off()
savehistory()






OR:

In the last part I also tried:


ID = rep(1:3, each = 5)


point7 <- cbind(ID,beta0_7, beta1_7, tj, epsilon_7) 
point7
point7 <- as.data.frame(point7)

colnames(point7) = c("ID","beta0_7","beta1_7","time", "epsilon_7")





y_point7 <- point7$beta0_7 + point7$beta1_7*point7$time + point7 $epsilon_7
y_point7

crp7 <- y_point7

head(point7, n = 15)


ggplot(aes(x = tj_gerar, y = crp7), data = point7) +
  geom_line(aes(group = ID), color = "gray") + 
  geom_smooth(aes(group = 1), method = "lm", size = 3, color = "red", se = FALSE) +
  theme_bw()

But none of these worked :(

I was looking to have something like:


Being the outcome PCR and the year the times (1, 2, 3, 4, 5).

Can someone help me please?


Thanks,

Best Rosa 




From sezenismail at gmail.com  Wed Jul 19 20:51:07 2017
From: sezenismail at gmail.com (Ismail SEZEN)
Date: Wed, 19 Jul 2017 21:51:07 +0300
Subject: [R] STL - time series seasonal decomposition sensitive to data
 points?
In-Reply-To: <CAGkGB679kECdoJ5EGcpy6SwQ48zmWcC+2FkexHid0EiBHmmidQ@mail.gmail.com>
References: <CAGkGB679kECdoJ5EGcpy6SwQ48zmWcC+2FkexHid0EiBHmmidQ@mail.gmail.com>
Message-ID: <C9EFADBB-76A7-4EC6-B2BA-E1CC7D5F26DB@gmail.com>


> On 19 Jul 2017, at 21:34, Eridk Poliruyt <ep19772 at gmail.com> wrote:
> 
> Hi all,
> 
> I am trying to analyse a time series data and want to make
> trend-season decomposition using STL approach in R. However I found
> the decomposition result seems to be sensitive to data points even
> with the robust option.
> 
> More specifically, suppose I have a few years of monthly data. Using
> stl, I got a decomposition T1 + S1 + R1. Then I deleted the most
> recent two or three data points, the resulted decomposition T2 + S2 +
> R2 are totally different from the one with full data, especially for
> the beginning of time series which is weird. I would have expected
> that wouldn't be changed much due to the local nature of STL.
> 
> May I ask for any thoughts and help on this issue? Many thanks!
> 
> Best regards,
> Eric

Hello Eridk,

First of all, [1] might be a better place to ask a statistical questions. 
Second,  (with my limited knowledge) STL simply assumes a steady periodicity and amplitude in the seasonal component. Your data (we don?t know what your data is) might not obey this rule and perhaps it?s not a good approach. Nevertheless, please, create an as much as minimal example to illustrate the situation, ask your question at [1] and please share a link to the question here. Thus, you increase the chance to get an urgent answer and I can also follow the answers to your question.

best,
ismail

1- https://stats.stackexchange.com

From jdnewmil at dcn.davis.ca.us  Wed Jul 19 21:03:30 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Wed, 19 Jul 2017 12:03:30 -0700
Subject: [R] STL - time series seasonal decomposition sensitive to
	data	points?
In-Reply-To: <CAGkGB679kECdoJ5EGcpy6SwQ48zmWcC+2FkexHid0EiBHmmidQ@mail.gmail.com>
References: <CAGkGB679kECdoJ5EGcpy6SwQ48zmWcC+2FkexHid0EiBHmmidQ@mail.gmail.com>
Message-ID: <F9214799-3EF9-424F-90A6-E92668C87417@dcn.davis.ca.us>

I think this looks like a question about statistics. I suggest you review the documentation for the functions you are using and study the references to better understand the algorithms you are using. If you think the algorithms are not behaving according to theory and the packages are part of the base R software distribution, then you should come back here with a reproducible example. [1][2][3]

If you think the algorithms are misbehaving and packages you are using are contributed then you should probably correspond with the package maintainer. 

But most likely you just need to ask your statistics question in a statistics forum rather this R language forum. 

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette)
-- 
Sent from my phone. Please excuse my brevity.

On July 19, 2017 11:34:38 AM PDT, Eridk Poliruyt <ep19772 at gmail.com> wrote:
>Hi all,
>
>I am trying to analyse a time series data and want to make
>trend-season decomposition using STL approach in R. However I found
>the decomposition result seems to be sensitive to data points even
>with the robust option.
>
>More specifically, suppose I have a few years of monthly data. Using
>stl, I got a decomposition T1 + S1 + R1. Then I deleted the most
>recent two or three data points, the resulted decomposition T2 + S2 +
>R2 are totally different from the one with full data, especially for
>the beginning of time series which is weird. I would have expected
>that wouldn't be changed much due to the local nature of STL.
>
>May I ask for any thoughts and help on this issue? Many thanks!
>
>Best regards,
>Eric
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From ulrik.stervbo at gmail.com  Wed Jul 19 21:28:04 2017
From: ulrik.stervbo at gmail.com (Ulrik Stervbo)
Date: Wed, 19 Jul 2017 19:28:04 +0000
Subject: [R] spaghetti plot - urgent
In-Reply-To: <FF2ED0D7-C003-4EB0-B3C7-D2C63A4946EA@gmail.com>
References: <FF2ED0D7-C003-4EB0-B3C7-D2C63A4946EA@gmail.com>
Message-ID: <CAKVAULOQM6z6BksOfZO7yFW_Pi+Cte6YBV359B_84umFP0_zXw@mail.gmail.com>

Hi Rosa,

You pass a vector to ggplot, which expects a data.frame. I am sure you
meant to do this:

point7$y_point7 <- point7$beta0_7 + point7$beta1_7*point7$time + point7
$epsilon_7

ggplot(point7, aes(time, y_point7)) + geom_line()

HTH
Ulrik


On Wed, 19 Jul 2017 at 20:37 Rosa Oliveira <rosita21 at gmail.com> wrote:

> Hi everyone,
>
> I?m trying to do a spaghetti plot and I know I?m doing all wrong, It must
> be.
>
> What I need:
>
> 15 subjects, each with measurements over 5 different times (t1, ..., t5),
> and the variable that I need to represent in the spaguetti plot is given by:
>
> PCR = b0 + b1 * ti + epsilon
>
> B0, - baseline of each subject
> B1 - trajectory of each subject over time (so multiply by t)
> Epsilon - error associated with each subject
>
> Regression model with mixed effects.
>
> Thus, I generated b0, b1, epsilon and time created sequence.
>
> But I need to do spaguetti plot of the outcome and I can not understand
> how much I search the publications.
>
> Sorry for the stupidity, but I do not even know how to do it and I need it
> with the utmost urgency to finish a publication proposal :(
>
> Follows what I tried to do :( :( :(
>
>
> library(ggplot2)
> library(reshape)
> library(lattice)
> library(gtable)
> library(grid)
>
>
> set.seed(9027)
>
> n.longitudinal.observations  = 5                          # number of PCR
> measures (per subject) in the hospital period
> subjects                             = 15                      # Number of
> simulations (1 per subject in the study)
>
> beta0_7_gerar                      = rnorm(subjects, mean = 1, sd = .5)
> beta0_7                                =
> as.data.frame(matrix(beta0_7_gerar,nrow=subjects,ncol=1))      # beta 0 -
> input variable used to calculate PCR (the outcome)
> beta1_7_gerar                     = rnorm(subjects, mean = -1, sd = .5)
> beta1_7                               =
> as.data.frame(matrix(beta1_7_gerar,nrow=subjects,ncol=1) )      # beta 1 -
> input variable used to calculate PCR (the outcome)
>
> tj_gerar                                = seq.int(1,
> n.longitudinal.observations, 1)
> epsilon_7_gerar                  = rnorm(5*subjects, mean = 0, sd = .1)
> epsilon_7                             =
> as.data.frame(matrix(epsilon_7_gerar,nrow=subjects,ncol=1) )   # epsilon_7
> - input variable used to calculate PCR (the outcome) - associated with each
> subject
>
> tj                                          =
> as.data.frame(matrix(tj_gerar,nrow=subjects,ncol=1) )                   #
> time
>
> point7 <- cbind(beta0_7, beta1_7, tj, epsilon_7)
> point7
> point7 <- as.data.frame(point7)
>
> colnames(point7) = c("beta0_7","beta1_7","time", "epsilon_7")
>
>
> y_point7 <- point7$beta0_7 + point7$beta1_7*point7$time + point7
> $epsilon_7             (the outcome of the study - PCR)
> y_point7
>
> require(ggplot2)
>
> png('test.png')
> p = ggplot(y_point7, aes(time, y_point7)) + geom_line()
> print(p)
> dev.off()
> savehistory()
>
>
>
>
>
>
> OR:
>
> In the last part I also tried:
>
>
> ID = rep(1:3, each = 5)
>
>
> point7 <- cbind(ID,beta0_7, beta1_7, tj, epsilon_7)
> point7
> point7 <- as.data.frame(point7)
>
> colnames(point7) = c("ID","beta0_7","beta1_7","time", "epsilon_7")
>
>
>
>
>
> y_point7 <- point7$beta0_7 + point7$beta1_7*point7$time + point7 $epsilon_7
> y_point7
>
> crp7 <- y_point7
>
> head(point7, n = 15)
>
>
> ggplot(aes(x = tj_gerar, y = crp7), data = point7) +
>   geom_line(aes(group = ID), color = "gray") +
>   geom_smooth(aes(group = 1), method = "lm", size = 3, color = "red", se =
> FALSE) +
>   theme_bw()
>
> But none of these worked :(
>
> I was looking to have something like:
>
>
> Being the outcome PCR and the year the times (1, 2, 3, 4, 5).
>
> Can someone help me please?
>
>
> Thanks,
>
> Best Rosa
>
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Thu Jul 20 14:33:34 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 20 Jul 2017 14:33:34 +0200
Subject: [R] Precision of values > 53 bits
In-Reply-To: <A4E5A0B016B8CB41A485FC629B633CED4A3168E2F6@GOLD.corp.lgc-group.com>
References: <50EE9EC9.80206@atsec.com>
 <A4E5A0B016B8CB41A485FC629B633CED4A3168E2F6@GOLD.corp.lgc-group.com>
Message-ID: <11EF5076-7BB6-40D9-B05C-54B067844DB0@gmail.com>


> On 10 Jan 2013, at 15:56 , S Ellison <S.Ellison at lgcgroup.com> wrote:
> 
> 
> 
>> I am working with large numbers and identified that R looses 
>> precision for such high numbers.
> Yes. R uses standard 32-bit double precision.


Well, for large values of 32... such as 64.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From larry.martell at gmail.com  Thu Jul 20 14:53:14 2017
From: larry.martell at gmail.com (Larry Martell)
Date: Thu, 20 Jul 2017 08:53:14 -0400
Subject: [R] Installing rpy2 on Red Hat 6
Message-ID: <CACwCsY71_zwTD99TvDr7CAJuC1BmV=m0dg=wVXWjDYmqNT-nEA@mail.gmail.com>

I need to install rpy2 on RHEL6. The version of R in the 6 repos is
3.0, and rpy2 does not work with that version. I installed R 3.3.3
following the directions here:
https://oguya.ch/posts/2017-03-18-building-R-on-rhel-6/. But even with
3.3.3 it's still failing. Using pip it fails with:

/usr/local/lib64/R/lib/libR.a(CommandLineArgs.o): could not read
symbols: Bad value

and installing from source it fails with:

/usr/bin/ld: cannot find -lr_utils

Anyone know how I can get rpy2 working on RHEL6?

(I did post to the rpy mailing list and also on SO, but did not get
any answers.)


From marc_schwartz at me.com  Thu Jul 20 16:53:48 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 20 Jul 2017 09:53:48 -0500
Subject: [R] Installing rpy2 on Red Hat 6
In-Reply-To: <CACwCsY71_zwTD99TvDr7CAJuC1BmV=m0dg=wVXWjDYmqNT-nEA@mail.gmail.com>
References: <CACwCsY71_zwTD99TvDr7CAJuC1BmV=m0dg=wVXWjDYmqNT-nEA@mail.gmail.com>
Message-ID: <2E22F292-5316-46BF-B976-A8FD7FC1570D@me.com>


> On Jul 20, 2017, at 7:53 AM, Larry Martell <larry.martell at gmail.com> wrote:
> 
> I need to install rpy2 on RHEL6. The version of R in the 6 repos is
> 3.0, and rpy2 does not work with that version. I installed R 3.3.3
> following the directions here:
> https://oguya.ch/posts/2017-03-18-building-R-on-rhel-6/. But even with
> 3.3.3 it's still failing. Using pip it fails with:
> 
> /usr/local/lib64/R/lib/libR.a(CommandLineArgs.o): could not read
> symbols: Bad value
> 
> and installing from source it fails with:
> 
> /usr/bin/ld: cannot find -lr_utils
> 
> Anyone know how I can get rpy2 working on RHEL6?
> 
> (I did post to the rpy mailing list and also on SO, but did not get
> any answers.)
> 


Hi,

For future reference, posts regarding R and RHEL/Fedora and derivatives should to go R-SIG-Fedora:

  https://stat.ethz.ch/mailman/listinfo/r-sig-fedora

From looking at the EPEL repo for RHEL 6:

  http://mirror.sjc02.svwh.net/fedora-epel/6/x86_64/

there are R 3.4.0 RPMS there since May. So:

  sudo yum install R

should get you R 3.4.0 if you have the EPEL repos properly configured.

From a review of the rpy2 page, it would seem that 3.2+ should be ok. If so, I would recommend installing the R RPMS for 3.4.0 from the EPEL and save yourself the hassle and potential issues of building from source.

Regards,

Marc Schwartz


  

From nilesh.dighe at monsanto.com  Thu Jul 20 17:55:48 2017
From: nilesh.dighe at monsanto.com (DIGHE, NILESH [AG/2362])
Date: Thu, 20 Jul 2017 15:55:48 +0000
Subject: [R] dynamically create columns using a function
Message-ID: <BN3PR0101MB1219A71AAD78081D8112D746E2A70@BN3PR0101MB1219.prod.exchangelabs.com>

Hi,
I am writing a function to dynamically create column names and fill those columns with some basic calculations.  My function "demo_fn" takes argument "blup_datacut" and I like to use the contents of those arguments to dynamically create new columns in my dataset. Please note that I have another function called "calc_gg" within the function "demo_fn". Both functions are pasted below.
I have a for loop within my function and it appears to only create new column for the last value in the argument "blup_datacut" which makes me think that I am not storing the values coming out of for_loop correctly. I have "expected_results", dataset, & functions pasted below to reproduce my problem and expected results.
Any help will be greatly appreciate.


# dataset
dem<- structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"), TEST_SET_NAME = c("A",
"A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,
1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,
1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"
)), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1", "YLD_BE_REG2",
"IS_GG"), class = "data.frame", row.names = c(NA, -6L))

# function demo_fn

demo_fn<- function (dat, blup_datacut = c("REG1", "REG2"))

{

    for (i in seq_along(blup_datacut)) {

        col_name_gg <- paste("GG", blup_datacut[i], sep = "_")

        col_mean_gg <- paste("YLD_BE", blup_datacut[i], sep = "_")

        dat2 <- calc_gg(dataset = dat, col = col_mean_gg, col_name = col_name_gg)

    }

    dat2

}


# function calc_gg

Calc_gg<- function (dataset, col, col_name)

{

    mutate_call = lazyeval::interp(~round(((a - mean(a[IS_GG ==

        "YES"], na.rm = TRUE))/mean(a[IS_GG == "YES"], na.rm = TRUE)) *

        100, 1), a = as.name(col))

    dataset %>% group_by(TEST_SET_NAME) %>% mutate_(.dots = setNames(list(mutate_call),

        col_name)) %>% ungroup()

}


# run function
results_demo<- demo_fn(dat =  dem)

# expected results

structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"), TEST_SET_NAME = c("A",

"A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,

1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,

1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"

), GG_REG1 = c(6.2, 5.3, 0, 0.5, 0.8, 0), GG_REG2 = c(5.6, 1.4,

0, -0.5, -2.2, 0)), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1",

"YLD_BE_REG2", "IS_GG", "GG_REG1", "GG_REG2"), row.names = c(NA,

-6L), class = "data.frame")

Thanks.
Nilesh
This email and any attachments were sent from a Monsanto email account and may contain confidential and/or privileged information. If you are not the intended recipient, please contact the sender and delete this email and any attachments immediately. Any unauthorized use, including disclosing, printing, storing, copying or distributing this email, is prohibited. All emails and attachments sent to or from Monsanto email accounts may be subject to monitoring, reading, and archiving by Monsanto, including its affiliates and subsidiaries, as permitted by applicable law. Thank you.

	[[alternative HTML version deleted]]


From ted.harding at wlandres.net  Thu Jul 20 19:30:56 2017
From: ted.harding at wlandres.net (Ted Harding)
Date: Thu, 20 Jul 2017 18:30:56 +0100
Subject: [R] Precision of values > 53 bits
In-Reply-To: <11EF5076-7BB6-40D9-B05C-54B067844DB0@gmail.com>
References: <50EE9EC9.80206@atsec.com>
 <A4E5A0B016B8CB41A485FC629B633CED4A3168E2F6@GOLD.corp.lgc-group.com>
 <11EF5076-7BB6-40D9-B05C-54B067844DB0@gmail.com>
Message-ID: <1500571856.3886.36.camel@deb2.fort.knox.uk>

On Thu, 2017-07-20 at 14:33 +0200, peter dalgaard wrote:
> > On 10 Jan 2013, at 15:56 , S Ellison <S.Ellison at lgcgroup.com> wrote:
> > 
> > 
> > 
> >> I am working with large numbers and identified that R looses 
> >> precision for such high numbers.
> > Yes. R uses standard 32-bit double precision.
> 
> 
> Well, for large values of 32... such as 64.

Hmmm ... Peter, as one of your compatriots (guess who) once solemnly
said to me:

  2 plus 2 is never equal to 5 -- not even for large values of 2.

Best wishes,
Ted.


From elie.canonicimerle at gmail.com  Fri Jul 21 10:43:36 2017
From: elie.canonicimerle at gmail.com (Elie Canonici Merle)
Date: Fri, 21 Jul 2017 10:43:36 +0200
Subject: [R] dynamically create columns using a function
In-Reply-To: <BN3PR0101MB1219A71AAD78081D8112D746E2A70@BN3PR0101MB1219.prod.exchangelabs.com>
References: <BN3PR0101MB1219A71AAD78081D8112D746E2A70@BN3PR0101MB1219.prod.exchangelabs.com>
Message-ID: <CAN7gcRPexN88cc8LANcGGU1z4pB7g-zCJL13biejrWSKresn_g@mail.gmail.com>

Hi,
I don't know about the lazyeval package or what you are trying to do but to
answer the main question "How to create columns dynamically using a
function?" I would do something like that:

# dataset
dem <- structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"),
TEST_SET_NAME = c("A",
"A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,
1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,
1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"
)), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1", "YLD_BE_REG2",
"IS_GG"), class = "data.frame", row.names = c(NA, -6L))



demo_fn<- function (data, f, names) {
    for (i in names) {
        data <- f(data, i)
    }
    data
}

f <- function(data, name) {
    col_work <- paste("YLD_BE", name, sep = "_")
    col_name_result <- paste("GG", name, sep = "_")
    #do something interesting, here I am simply copying the column
    data[col_name_result] <- data[col_work]
    data
}

demo_fn(dem, f, c("REG1", "REG2"))




If you are working with large datasets it might not be the best solution as
my understanding is that this method involves a lot of copying.

Hope it helps,

Elie Canonici Merle

2017-07-20 17:55 GMT+02:00 DIGHE, NILESH [AG/2362] <
nilesh.dighe at monsanto.com>:

> Hi,
> I am writing a function to dynamically create column names and fill those
> columns with some basic calculations.  My function "demo_fn" takes argument
> "blup_datacut" and I like to use the contents of those arguments to
> dynamically create new columns in my dataset. Please note that I have
> another function called "calc_gg" within the function "demo_fn". Both
> functions are pasted below.
> I have a for loop within my function and it appears to only create new
> column for the last value in the argument "blup_datacut" which makes me
> think that I am not storing the values coming out of for_loop correctly. I
> have "expected_results", dataset, & functions pasted below to reproduce my
> problem and expected results.
> Any help will be greatly appreciate.
>
>
> # dataset
> dem<- structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"),
> TEST_SET_NAME = c("A",
> "A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,
> 1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,
> 1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"
> )), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1", "YLD_BE_REG2",
> "IS_GG"), class = "data.frame", row.names = c(NA, -6L))
>
> # function demo_fn
>
> demo_fn<- function (dat, blup_datacut = c("REG1", "REG2"))
>
> {
>
>     for (i in seq_along(blup_datacut)) {
>
>         col_name_gg <- paste("GG", blup_datacut[i], sep = "_")
>
>         col_mean_gg <- paste("YLD_BE", blup_datacut[i], sep = "_")
>
>         dat2 <- calc_gg(dataset = dat, col = col_mean_gg, col_name =
> col_name_gg)
>
>     }
>
>     dat2
>
> }
>
>
> # function calc_gg
>
> Calc_gg<- function (dataset, col, col_name)
>
> {
>
>     mutate_call = lazyeval::interp(~round(((a - mean(a[IS_GG ==
>
>         "YES"], na.rm = TRUE))/mean(a[IS_GG == "YES"], na.rm = TRUE)) *
>
>         100, 1), a = as.name(col))
>
>     dataset %>% group_by(TEST_SET_NAME) %>% mutate_(.dots =
> setNames(list(mutate_call),
>
>         col_name)) %>% ungroup()
>
> }
>
>
> # run function
> results_demo<- demo_fn(dat =  dem)
>
> # expected results
>
> structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"), TEST_SET_NAME =
> c("A",
>
> "A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,
>
> 1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,
>
> 1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"
>
> ), GG_REG1 = c(6.2, 5.3, 0, 0.5, 0.8, 0), GG_REG2 = c(5.6, 1.4,
>
> 0, -0.5, -2.2, 0)), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1",
>
> "YLD_BE_REG2", "IS_GG", "GG_REG1", "GG_REG2"), row.names = c(NA,
>
> -6L), class = "data.frame")
>
> Thanks.
> Nilesh
> This email and any attachments were sent from a Monsanto email account and
> may contain confidential and/or privileged information. If you are not the
> intended recipient, please contact the sender and delete this email and any
> attachments immediately. Any unauthorized use, including disclosing,
> printing, storing, copying or distributing this email, is prohibited. All
> emails and attachments sent to or from Monsanto email accounts may be
> subject to monitoring, reading, and archiving by Monsanto, including its
> affiliates and subsidiaries, as permitted by applicable law. Thank you.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From nilesh.dighe at monsanto.com  Fri Jul 21 15:00:40 2017
From: nilesh.dighe at monsanto.com (DIGHE, NILESH [AG/2362])
Date: Fri, 21 Jul 2017 13:00:40 +0000
Subject: [R] dynamically create columns using a function
In-Reply-To: <CAN7gcRPexN88cc8LANcGGU1z4pB7g-zCJL13biejrWSKresn_g@mail.gmail.com>
References: <BN3PR0101MB1219A71AAD78081D8112D746E2A70@BN3PR0101MB1219.prod.exchangelabs.com>
 <CAN7gcRPexN88cc8LANcGGU1z4pB7g-zCJL13biejrWSKresn_g@mail.gmail.com>
Message-ID: <BY1PR0101MB1224725AB1BD3DB9F7A1EB4BE2A40@BY1PR0101MB1224.prod.exchangelabs.com>

Hi Elie,

Thanks for your time and efforts. I plugged in the calculation I wanted to do in the code you provided and got I wanted perfectly. Below is the solution to my original problem.

# dataset

dem<- structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"), TEST_SET_NAME = c("A",
"A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,
1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,
1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"
)), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1", "YLD_BE_REG2",
"IS_GG"), class = "data.frame", row.names = c(NA, -6L))

# function calc_gg

calc_gg<- function (dataset, col, col_name)

{

    mutate_call = lazyeval::interp(~round(((a - mean(a[IS_GG ==

        "YES"], na.rm = TRUE))/mean(a[IS_GG == "YES"], na.rm = TRUE)) *

        100, 1), a = as.name(col))

    dataset %>% group_by(TEST_SET_NAME) %>% mutate_(.dots = setNames(list(mutate_call),

        col_name)) %>% ungroup()

}


# function f

f<- function (dat, blup_datacut)

{

    col_name_gg <- paste("GG", blup_datacut, sep = "_")

    col_mean_gg <- paste("YLD_BE", blup_datacut, sep = "_")

    dat2 <- calc_gg(dataset = dat, col = col_mean_gg, col_name = col_name_gg)

    dat2

}

# function demo_fn

demo_fn<- function (dat, f, blup_datacut)

{

    for (i in blup_datacut) {

        dat <- f(dat, i)

    }

    dat

}

# get expected results by applying functions
demo_fn(dem, f, c("REG1", "REG2"))


Best Regards,
Nilesh
From: Elie Canonici Merle [mailto:elie.canonicimerle at gmail.com]
Sent: Friday, July 21, 2017 3:44 AM
To: DIGHE, NILESH [AG/2362] <nilesh.dighe at monsanto.com>
Cc: r-help at r-project.org
Subject: Re: [R] dynamically create columns using a function

Hi,
I don't know about the lazyeval package or what you are trying to do but to answer the main question "How to create columns dynamically using a function?" I would do something like that:

# dataset
dem <- structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"), TEST_SET_NAME = c("A",
"A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,
1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,
1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"
)), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1", "YLD_BE_REG2",
"IS_GG"), class = "data.frame", row.names = c(NA, -6L))



demo_fn<- function (data, f, names) {
    for (i in names) {
        data <- f(data, i)
    }
    data
}

f <- function(data, name) {
    col_work <- paste("YLD_BE", name, sep = "_")
    col_name_result <- paste("GG", name, sep = "_")
    #do something interesting, here I am simply copying the column
    data[col_name_result] <- data[col_work]
    data
}

demo_fn(dem, f, c("REG1", "REG2"))




If you are working with large datasets it might not be the best solution as my understanding is that this method involves a lot of copying.

Hope it helps,

Elie Canonici Merle

2017-07-20 17:55 GMT+02:00 DIGHE, NILESH [AG/2362] <nilesh.dighe at monsanto.com<mailto:nilesh.dighe at monsanto.com>>:
Hi,
I am writing a function to dynamically create column names and fill those columns with some basic calculations.  My function "demo_fn" takes argument "blup_datacut" and I like to use the contents of those arguments to dynamically create new columns in my dataset. Please note that I have another function called "calc_gg" within the function "demo_fn". Both functions are pasted below.
I have a for loop within my function and it appears to only create new column for the last value in the argument "blup_datacut" which makes me think that I am not storing the values coming out of for_loop correctly. I have "expected_results", dataset, & functions pasted below to reproduce my problem and expected results.
Any help will be greatly appreciate.


# dataset
dem<- structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"), TEST_SET_NAME = c("A",
"A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,
1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,
1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"
)), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1", "YLD_BE_REG2",
"IS_GG"), class = "data.frame", row.names = c(NA, -6L))

# function demo_fn

demo_fn<- function (dat, blup_datacut = c("REG1", "REG2"))

{

    for (i in seq_along(blup_datacut)) {

        col_name_gg <- paste("GG", blup_datacut[i], sep = "_")

        col_mean_gg <- paste("YLD_BE", blup_datacut[i], sep = "_")

        dat2 <- calc_gg(dataset = dat, col = col_mean_gg, col_name = col_name_gg)

    }

    dat2

}


# function calc_gg

Calc_gg<- function (dataset, col, col_name)

{

    mutate_call = lazyeval::interp(~round(((a - mean(a[IS_GG ==

        "YES"], na.rm = TRUE))/mean(a[IS_GG == "YES"], na.rm = TRUE)) *

        100, 1), a = as.name<http://as.name>(col))

    dataset %>% group_by(TEST_SET_NAME) %>% mutate_(.dots = setNames(list(mutate_call),

        col_name)) %>% ungroup()

}


# run function
results_demo<- demo_fn(dat =  dem)

# expected results

structure(list(id = c("L1", "L2", "L3", "M1", "M2", "M3"), TEST_SET_NAME = c("A",

"A", "A", "B", "B", "B"), YLD_BE_REG1 = c(1467L, 1455L, 1382L,

1463L, 1466L, 1455L), YLD_BE_REG2 = c(1501L, 1441L, 1421L, 1482L,

1457L, 1490L), IS_GG = c("NO", "NO", "YES", "NO", "NO", "YES"

), GG_REG1 = c(6.2, 5.3, 0, 0.5, 0.8, 0), GG_REG2 = c(5.6, 1.4,

0, -0.5, -2.2, 0)), .Names = c("id", "TEST_SET_NAME", "YLD_BE_REG1",

"YLD_BE_REG2", "IS_GG", "GG_REG1", "GG_REG2"), row.names = c(NA,

-6L), class = "data.frame")

Thanks.
Nilesh
This email and any attachments were sent from a Monsanto email account and may contain confidential and/or privileged information. If you are not the intended recipient, please contact the sender and delete this email and any attachments immediately. Any unauthorized use, including disclosing, printing, storing, copying or distributing this email, is prohibited. All emails and attachments sent to or from Monsanto email accounts may be subject to monitoring, reading, and archiving by Monsanto, including its affiliates and subsidiaries, as permitted by applicable law. Thank you.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

This email and any attachments were sent from a Monsanto email account and may contain confidential and/or privileged information. If you are not the intended recipient, please contact the sender and delete this email and any attachments immediately. Any unauthorized use, including disclosing, printing, storing, copying or distributing this email, is prohibited. All emails and attachments sent to or from Monsanto email accounts may be subject to monitoring, reading, and archiving by Monsanto, including its affiliates and subsidiaries, as permitted by applicable law. Thank you.

	[[alternative HTML version deleted]]


From marc_grt at yahoo.fr  Fri Jul 21 16:05:41 2017
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Fri, 21 Jul 2017 16:05:41 +0200
Subject: [R] axis() after image.plot() does not work except if points() is
 inserted between
Message-ID: <0981fda7-811d-3595-abbb-f470bc2459c6@yahoo.fr>

It is known (several discussions on internet) that axis() cannot be used 
after fields:::image.plot() (axis() shows nothing).

However, if points(1.5, 1.5, type="p") is inserted before the axis() 
finctions, it works.

I have investigated what points(1.5, 1.5, type="p") is doing to allow 
axis to work and I don't find a solution. par() options are identical 
(p1 and p2 are identical).

Has someone a solution ?

Thanks

Marc

library(fields)
p0 <- par(no.readonly=TRUE)
image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
            ylab="Columns", cex.lab = 0.5, zlim=c(min(D, 
na.rm=TRUE),max(D, na.rm=TRUE)),
            las=1, axes=FALSE)
p1 <- par(no.readonly=TRUE)

# if you remove this points() function, axis will show nothing.

points(1.5, 1.5, type="p")
p2 <- par(no.readonly=TRUE)

##########
axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
cex.axis=0.5)

identical(p1, p2)


From harold.petithomme at meteo.fr  Fri Jul 21 16:18:11 2017
From: harold.petithomme at meteo.fr (Harold Petithomme)
Date: Fri, 21 Jul 2017 16:18:11 +0200 (CEST)
Subject: [R] Problem with mclapply in package parallel
In-Reply-To: <1120200380.16010826.1500631167675.JavaMail.root@meteo.fr>
Message-ID: <534769768.16082233.1500646691101.JavaMail.root@meteo.fr>

Dear fellow R users,

I am experiencing some problem using function mclapply from recommended R package parallel. This problem is a bit "deep in source code" (maybe r-devel list would be more appropriate ?).

Actually, I have noticed on a specific Linux HPC system that the various readChild() calls in mclapply did not end the children processes, as would be expected (ie compared to what happens on some other Linux machines that I am used to use). Trying to localize the problem, I have recompiled R (R-3.2.5, Intel compilers) after having the 'MC_DEBUG' macro activated in C file src/fork.c. It seems that global variable child_can_exit (declared as static int) is waited for change in function mc_exit but this never happens due to compiler's optimization configuration. A solution might be to declare variable child_can_exit as "static int volatile"; my tests work fine indeed.

This is what I have done locally (ie no system-wide installation of this patched R) for my use. Do some users have already noticed this problem ? What can be done for patching recent R versions, if appropriate ?

Supplemental info at R 'make' step and then run :
Machine : Linux [macname] 2.6.32-642.15.1.el6.x86_64 #1 SMP Mon Feb 20 02:26:38 EST 2017 x86_64 x86_64 x86_64 GNU/Linux
Compiler : Intel(R) C Intel(R) 64 Compiler for applications running on Intel(R) 64, Version 16.0.1.150
Compiling : icc -std=gnu99 -I../../../../include -DNDEBUG -I../../../include -I../../../../src/include -DHAVE_CONFIG_H -I/usr/local/include    -fpic  -g -O2 -std=c99  -c fork.c -o fork.o
icc: command line warning #10121: overriding '-std=gnu99' with '-std=c99'
Linkin' : icc -std=gnu99 -shared -L/usr/local/lib64 -o parallel.so init.o rngstream.o fork.o
Running : mclapply's simple example under R-3.2.5

Thank you for advice or discussion.
Kind regards,
Harold Petithomme


********************************************************* 
Harold PETITHOMME 
Equipe Donn?es de Pr?vision (DPREVI/COMPAS/DOP) 

M?t?o France - Direction de la Production 
42, avenue G. Coriolis. 
31057 Toulouse Cedex 
France 

Tel : (33/0)5.61.07.82.85 
Fax : (33/0)5.61.07.86.09 
E-mail : harold.petithomme at meteo.fr 
********************************************************* 


From larry.martell at gmail.com  Fri Jul 21 17:17:04 2017
From: larry.martell at gmail.com (Larry Martell)
Date: Fri, 21 Jul 2017 11:17:04 -0400
Subject: [R] Installing rpy2 on Red Hat 6
In-Reply-To: <2E22F292-5316-46BF-B976-A8FD7FC1570D@me.com>
References: <CACwCsY71_zwTD99TvDr7CAJuC1BmV=m0dg=wVXWjDYmqNT-nEA@mail.gmail.com>
 <2E22F292-5316-46BF-B976-A8FD7FC1570D@me.com>
Message-ID: <CACwCsY4t4BBQ0oTANzUtss-FayLjYTq8HceYnwULQUP4RhkE0Q@mail.gmail.com>

On Thu, Jul 20, 2017 at 10:53 AM, Marc Schwartz <marc_schwartz at me.com> wrote:
>
>> On Jul 20, 2017, at 7:53 AM, Larry Martell <larry.martell at gmail.com> wrote:
>>
>> I need to install rpy2 on RHEL6. The version of R in the 6 repos is
>> 3.0, and rpy2 does not work with that version. I installed R 3.3.3
>> following the directions here:
>> https://oguya.ch/posts/2017-03-18-building-R-on-rhel-6/. But even with
>> 3.3.3 it's still failing. Using pip it fails with:
>>
>> /usr/local/lib64/R/lib/libR.a(CommandLineArgs.o): could not read
>> symbols: Bad value
>>
>> and installing from source it fails with:
>>
>> /usr/bin/ld: cannot find -lr_utils
>>
>> Anyone know how I can get rpy2 working on RHEL6?
>>
>> (I did post to the rpy mailing list and also on SO, but did not get
>> any answers.)
>>
>
>
> Hi,
>
> For future reference, posts regarding R and RHEL/Fedora and derivatives should to go R-SIG-Fedora:
>
>   https://stat.ethz.ch/mailman/listinfo/r-sig-fedora

Sorry, I did not know about that list. I have subscribed and I will
move the discussion there.

>
> From looking at the EPEL repo for RHEL 6:
>
>   http://mirror.sjc02.svwh.net/fedora-epel/6/x86_64/
>
> there are R 3.4.0 RPMS there since May. So:
>
>   sudo yum install R
>
> should get you R 3.4.0 if you have the EPEL repos properly configured.
>
> From a review of the rpy2 page, it would seem that 3.2+ should be ok. If so, I would recommend installing the R RPMS for 3.4.0 from the EPEL and save yourself the hassle and potential issues of building from source.


From stephen66 at gmail.com  Fri Jul 21 21:22:36 2017
From: stephen66 at gmail.com (Stephen HonKit Wong)
Date: Fri, 21 Jul 2017 12:22:36 -0700
Subject: [R]  a difficult situation, how to do this using base function.
Message-ID: <CAF4LHoj4VDada0rb=uKLtPMdgTeDG+hp04BPbjARBHWOXCx==w@mail.gmail.com>

Hello,

I have a following dataframe with many rows.
data.frame(match.start=c(5,10,100,200),range.coordinates=c("1000-1050","1500-1555","5000-5050,6000-6180","100-150,200-260,600-900"))

match.start       range.coordinates
           5               1000-1050
          10               1500-1555
         100               5000-5050,6000-6180
         200              100-150,200-260,600-900

I want to test for each row element in column "match.start" (e.g. 100 on
3rd row) if it is less than the accumulated range (e.g. for 5000-5050,
6000-6180, the accumulated range is: 50, 230), then update the match start
as 6000+ (100-50) = 6050. The result is put on third column.

match.start         range.coordinates   match.start.updated
          5                   1000-1050                                 1005
         10                 1500-1555                                  1510
        100       5000-5050,6000-6180                         6050
        200   100-150,200-260,600-900                        690

Many thanks.

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Sat Jul 22 02:38:12 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Fri, 21 Jul 2017 17:38:12 -0700 (PDT)
Subject: [R] a difficult situation, how to do this using base function.
In-Reply-To: <CAF4LHoj4VDada0rb=uKLtPMdgTeDG+hp04BPbjARBHWOXCx==w@mail.gmail.com>
References: <CAF4LHoj4VDada0rb=uKLtPMdgTeDG+hp04BPbjARBHWOXCx==w@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1707211724240.36321@pedal.dcn.davis.ca.us>

This is a plain text email list. Please learn how to explain this to your 
email client because what YOU saw before you sent it is not what WE saw 
after it bounced through the mailing list, and that can lead to 
misunderstandings.

If at all possible you should try to augment your table with an additional 
table to contain the range.coordinates, or replace the range.coordinates 
column with a list of tables. I have parsed your format into tables on the 
fly, but this is inefficient and fragile.

######
DF <- data.frame( match.start=c( 5, 10, 100, 200 )
                 , range.coordinates = c( "1000-1050"
                                        , "1500-1555"
                                        , "5000-5050,6000-6180"
                                        , "100-150,200-260,600-900"
                                        )
                 , stringsAsFactors = FALSE
                 )
lookupFunction <- function( ms, rc ) {
   rcdf <- as.data.frame( lapply( as.data.frame( t( as.data.frame(
     strsplit( strsplit( rc, ",", fixed=TRUE )[[ 1 ]], "-" ) ) ),
     stringsAsFactors=FALSE ), as.numeric ) )
   rcdf$V3 <- with( rcdf, cumsum( V2-V1 ) )
   rcq <- c( 0, rcdf$V3 )
   idx <- findInterval( ms, rcdf$V3 ) + 1
   rcdf$V1[ idx ] + ms - rcq[ idx ]
}

DF$match.start.updated <-
    unlist( lapply( seq.int( nrow( DF ) )
                  , function( i ) {
                       lookupFunction( DF$match.start[ i ]
                                     , DF$range.coordinates[ i ]
                                     )
                    }
                  )
         )
######

On Fri, 21 Jul 2017, Stephen HonKit Wong wrote:

> Hello,
>
> I have a following dataframe with many rows.
> data.frame(match.start=c(5,10,100,200),range.coordinates=c("1000-1050","1500-1555","5000-5050,6000-6180","100-150,200-260,600-900"))
>
> match.start       range.coordinates
>           5               1000-1050
>          10               1500-1555
>         100               5000-5050,6000-6180
>         200              100-150,200-260,600-900
>
> I want to test for each row element in column "match.start" (e.g. 100 on
> 3rd row) if it is less than the accumulated range (e.g. for 5000-5050,
> 6000-6180, the accumulated range is: 50, 230), then update the match start
> as 6000+ (100-50) = 6050. The result is put on third column.
>
> match.start         range.coordinates   match.start.updated
>          5                   1000-1050                                 1005
>         10                 1500-1555                                  1510
>        100       5000-5050,6000-6180                         6050
>        200   100-150,200-260,600-900                        690
>
> Many thanks.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From bgunter.4567 at gmail.com  Sat Jul 22 02:41:17 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Fri, 21 Jul 2017 17:41:17 -0700
Subject: [R] a difficult situation, how to do this using base function.
In-Reply-To: <C0604631-62D5-4BA4-9A2C-51E7803914D1@gmail.com>
References: <CAF4LHoj4VDada0rb=uKLtPMdgTeDG+hp04BPbjARBHWOXCx==w@mail.gmail.com>
 <CAGxFJbShiw6-Eu0sSch9AxtsCnWqNGQBnv-t8m3Y2H-23a4qXw@mail.gmail.com>
 <C0604631-62D5-4BA4-9A2C-51E7803914D1@gmail.com>
Message-ID: <CAGxFJbSFKz7pixfq5o+r+1qJ6+AWf7mMwMQG2fjbRanN3nKq8w@mail.gmail.com>

1. Please always reply to the list, especially here so that others can
see your clarification.

2. What happens if your match.start value exceeds all the cumulative
sums?? -- you seem to imply that this cannot happen.

Your minimal example, while a little confusing (to me) and in html --
this can get mangled in this plain text list, though seemingly not
here -- was very helpful. Essential even . Here is a solution that
seems to work:

WARNING: There are a zillion ways that one might do this. Mine may be
far from the most efficient or the most elegant or the most clear. I
hope it is understandable.

The chief task here is to parse your second column so that it is
numeric and your logic can be applied to it. Due to its simply
structured format, I chose to do this by simply converting the dashes
to commas and using strsplit() to split the single string into a
character vector of numeric values that then can be converted to
numerics. Like this:


df <-data.frame(match.start=c(5,10,100,200),range.coordinates=c("1000-1050","1500-1555","5000-5050,6000-6180","100-150,200-260,600-900"))

## Note the following to convert the default factor to a character
vector. This is essnetial!
df[,2]<- as.character(df[,2])

numex <-gsub("-",",",df[,2],fixed=TRUE) ## convert dashes

## convert to a list of numeric vectors
numex <-lapply(strsplit(numex,",",fixed = TRUE),as.numeric)

## Here's what you get:

> numex
[[1]]
[1] 1000 1050

[[2]]
[1] 1500 1555

[[3]]
[1] 5000 5050 6000 6180

[[4]]
[1] 100 150 200 260 600 900

Because of the fixed format, we know that the even numbered indices in
each vector are for the upper values of the range, and the odd indices
are the lower values. I just break these out in a convenient form -- a
2 column matrix, the first column giving the lower value and the
second the cumulative ranges:

> numex <- lapply(numex,function(x){
+    i <- seq_along(x)
+    odds <- i %% 2 == 1
+    evens <- i %% 2 == 0
+    cbind(x[odds],cumsum(x[evens] - x[odds]))
+ })

## Giving:

> numex
[[1]]
     [,1] [,2]
[1,] 1000   50

[[2]]
     [,1] [,2]
[1,] 1500   55

[[3]]
     [,1] [,2]
[1,] 5000   50
[2,] 6000  230

[[4]]
     [,1] [,2]
[1,]  100   50
[2,]  200  110
[3,]  600  410

Now I just apply your logic row by row (i.e. index by index) to get
the desired column:

df$updated <- sapply( seq_len(nrow(df)),function(i){
   test <- numex[[i]]
   val <- df[i,1]
   if(nrow(test) ==1 ) test[1,1]+val
   else {
      wm <- which(val < test[,2])[1]
      test[wm,1]+val - test[wm-1,2]
   }
})

> df$updated
[1] 1005 1510 6050  690


Cheers,
Bert




On Fri, Jul 21, 2017 at 4:24 PM, Honkit Wong <stephen66 at gmail.com> wrote:
> Sorry for confusion, it was right, it should be: 600+(200-60-50)=690.
> 60 and 50 are from difference of previous two ranges. Thanks! Any clue?
>
> Stephen (Hon-Kit) Wong
>
>> On Jul 21, 2017, at 4:13 PM, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> Shouldn't your last value in match.start.updated = 710, i.e. 600 + 60 + 50  ??
>>
>> If not, you will need to explain yourself more clearly (for me, anyway).
>>
>> Cheers,
>> Bert
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Fri, Jul 21, 2017 at 12:22 PM, Stephen HonKit Wong
>> <stephen66 at gmail.com> wrote:
>>> Hello,
>>>
>>> I have a following dataframe with many rows.
>>> data.frame(match.start=c(5,10,100,200),range.coordinates=c("1000-1050","1500-1555","5000-5050,6000-6180","100-150,200-260,600-900"))
>>>
>>> match.start       range.coordinates
>>>           5               1000-1050
>>>          10               1500-1555
>>>         100               5000-5050,6000-6180
>>>         200              100-150,200-260,600-900
>>>
>>> I want to test for each row element in column "match.start" (e.g. 100 on
>>> 3rd row) if it is less than the accumulated range (e.g. for 5000-5050,
>>> 6000-6180, the accumulated range is: 50, 230), then update the match start
>>> as 6000+ (100-50) = 6050. The result is put on third column.
>>>
>>> match.start         range.coordinates   match.start.updated
>>>          5                   1000-1050                                 1005
>>>         10                 1500-1555                                  1510
>>>        100       5000-5050,6000-6180                         6050
>>>        200   100-150,200-260,600-900                        690
>>>
>>> Many thanks.
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.


From roslinaump at gmail.com  Sat Jul 22 03:49:05 2017
From: roslinaump at gmail.com (roslinazairimah zakaria)
Date: Sat, 22 Jul 2017 09:49:05 +0800
Subject: [R] 3-day moving average for block maxima
Message-ID: <CANTvJZ+qvo-VJLCifOyOvLUP53Wr1cdH3w5MaukEmPkJGhvNyQ@mail.gmail.com>

Dear r-users,

I would like to construct 3-day moving average for block maxima series.

I tried this:

bmthree <- lapply(split(dt, dt$Year), function(x) max(sapply(1:(nrow(x)-2),
                    function(i) with(x, mean(Amount[i:(i+2)],na.rm=TRUE)))))
bmthree

and got the following output.

$`1971`
[1] 70.81667

$`1972`
[1] 68.94553

$`1973`
[1] 102.7236

$`1974`
[1] 73.6625

$`1975`
[1] 92.98889

$`1976`
[1] 95.8125

$`1977`
[1] 31.33974

$`1978`
[1] 141

$`1979`
[1] 71.4

$`1980`
[1] 115.9667

$`1981`
[1] 66.73718

$`1982`
[1] 189.5

$`1983`
[1] 183.1

$`1984`
[1] 131.5667

$`1985`
[1] 96.83333

$`1986`
[1] 267.9667

$`1987`
[1] 113.6667

$`1988`
[1] 246.6667

$`1989`
[1] 83.33333

$`1990`
[1] 79.5

$`1991`
[1] 138.3333

$`1992`
[1] 117

$`1993`
[1] 99.66667

$`1994`
[1] 205.3333

$`1995`
[1] 142.6667

$`1996`
[1] 106.6667

$`1997`
[1] 112.5

$`1998`
[1] 62.66667

$`1999`
[1] 100.6333

$`2000`
[1] 146.1333

$`2001`
[1] 171.7333

$`2002`
[1] 78.33333

$`2003`
[1] 100.5667

$`2004`
[1] 115.0667

$`2005`
[1] 163.8667

$`2006`
[1] 79.93333

$`2007`
[1] 130.6667

$`2008`
[1] 156.5

$`2009`
[1] 162.1667

$`2010`
[1] 99.33333
$`2011`
[1] 162.8333

$`2012`
[1] 247.6667

How do I tweak the code so that I can see the moving average for the block
maxima before the maximum for that particular year is chosen.

Year                  Month              Day Amount
 Moving average 3-day BM
1971 1 1 55.81429 47.63658
1971 1 2 49.01818 34.95606
1971 1 3 38.07727
1971 1 4 17.77273

This is my data:

> dput(try.dt)
structure(list(Year = c(1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L), Month = c(1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L,
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L,
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L,
5L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L,
6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L,
6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L,
7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L,
7L, 7L, 7L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L,
8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L,
8L, 8L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L,
9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L,
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L,
10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L,
10L, 10L, 10L, 10L, 10L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L,
11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L,
11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 12L, 12L, 12L, 12L,
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L,
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L,
12L), Day = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L,
13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L,
26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L,
9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L,
22L, 23L, 24L, 25L, 26L, 27L, 28L, 1L, 2L, 3L, 4L, 5L, 6L, 7L,
8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L,
21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L,
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L,
17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L,
30L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L,
14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L,
27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L,
10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L,
23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 1L, 2L, 3L, 4L, 5L, 6L,
7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L,
20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L,
2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L,
16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L,
29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L,
12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L,
25L, 26L, 27L, 28L, 29L, 30L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L,
9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L,
22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L,
4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L,
18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L,
1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L,
15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L,
28L, 29L, 30L, 31L), Amount = c(55.81428571, 49.01818182, 38.07727273,
17.77272727, 6.913636364, 5.163636364, 2.995454545, 4.540909091,
3.09047619, 3.959090909, 4.080952381, 0.513636364, 0.727272727,
0.940909091, 0.036363636, 0.672727273, 0.338095238, 1.163636364,
1.745454545, 1.004545455, 0.386363636, 0.359090909, 1.463636364,
0.640909091, 0.054545455, 3.768181818, 0.027272727, 0.027272727,
1.904545455, 8.261904762, 12.21363636, 12.48181818, 0.059090909,
2.468181818, 0.659090909, 0.157142857, 0.6, 0.477272727, 0.818181818,
0.05, 0.118181818, 0.527272727, 0.331818182, 0.004545455, 1.9,
2.018181818, 0.795454545, 2.118181818, 0.345454545, 0.045454545,
6.481818182, 13.45454545, 21.48636364, 23.98181818, 3.877272727,
3.945454545, 2.423809524, 0.672727273, 4.565, 11.625, 25.74761905,
14.51428571, 2.471428571, 0.085714286, 1.523809524, 0.652380952,
1.085714286, 0.485714286, 0.576190476, 0.1, 0.038095238, 1.361904762,
38.17619048, 102.1761905, 54.28095238, 20.2, 17.28095238, 25.53809524,
7.419047619, 0.576190476, 0.061904762, 0.061904762, 1.533333333,
0.028571429, 0.023809524, 0.057142857, 0.638095238, 0.70952381,
0.171428571, 0.014285714, 0.014285714, 0.557142857, 0.019047619,
1.090909091, 0.027272727, 0, 1.254545455, 0, 0.031818182, 0.418181818,
0.086363636, 0.186363636, 0.227272727, 0.009090909, 0.009090909,
0.981818182, 0.4, 0, 0, 0, 0, 0, 0, 0, 1.55, 0.327272727, 0.009090909,
1.413636364, 5.023809524, 11.11, 12.68181818, 12.63636364, 5.877272727,
1.018181818, 2.495454545, 3.25, 3.527272727, 1.177272727, 0.6,
1.836363636, 8.45, 6.745454545, 7.677272727, 1.177272727, 7.961904762,
6.786363636, 5.763636364, 4.047619048, 3.961904762, 7.933333333,
3.233333333, 1.114285714, 2.033333333, 6.257142857, 6.386363636,
2.327272727, 16.09090909, 13.87727273, 4.277272727, 1.036363636,
1.454545455, 1.086363636, 6.495454545, 4.136363636, 2.663636364,
10.49545455, 6.422727273, 2.881818182, 6.695454545, 1.631818182,
0.277272727, 3.686363636, 2.718181818, 1.281818182, 4.381818182,
0.759090909, 7.236363636, 8.195454545, 3.572727273, 3.395454545,
1.072727273, 3.827272727, 2.486363636, 0.481818182, 1.163636364,
1.5, 2.731818182, 2.568181818, 11.87727273, 12.60909091, 3.747826087,
2.204347826, 2.634782609, 1, 2.582608696, 1.213043478, 0.043478261,
0.930434783, 3.443478261, 0.743478261, 2.252173913, 2.117391304,
7.2, 9.730434783, 1.047826087, 0.213043478, 4.613043478, 6.77826087,
7.97826087, 19.52173913, 14.10434783, 3.652173913, 1.039130435,
3.873913043, 5.543478261, 2.717391304, 4.295652174, 5.417391304,
6.234782609, 7.556521739, 2.356521739, 7.413043478, 6.647826087,
5.139130435, 8.856521739, 8.4, 4.113043478, 10.20454545, 8.443478261,
3.886956522, 7.856521739, 6.047826087, 5.154166667, 4.241666667,
1.041666667, 0.820833333, 3.220833333, 1.0375, 4.545833333, 2.825,
4.769565217, 11.84782609, 5.773913043, 10.46521739, 7.77826087,
1.134782609, 1.17826087, 4.504347826, 7.247826087, 9.956521739,
13.77826087, 9.265217391, 0.534782609, 1.217391304, 1.72173913,
0.904347826, 0.426086957, 5.965217391, 2.191304348, 1.569565217,
7.360869565, 1.17826087, 6.417391304, 10.84782609, 9.508695652,
8.691304348, 15.5, 2.447826087, 2.739130435, 5.082608696, 10.53913043,
11.5826087, 2.143478261, 4.67826087, 4.969565217, 1.030434783,
3.073913043, 3.77826087, 0.952173913, 2.952173913, 3.669565217,
2.282608696, 2.740909091, 8.3, 3.67826087, 6.456521739, 8.952173913,
1.469565217, 2.147826087, 10.14782609, 9.008695652, 10.81304348,
6.460869565, 11.65652174, 9.195652174, 7.973913043, 15.65652174,
18.86956522, 6.930434783, 11.56086957, 12.99545455, 13.13913043,
19.23043478, 8.995652174, 5.556521739, 27.07391304, 20.94347826,
4.826086957, 5.586956522, 4.126086957, 7.1, 9.404545455, 6.47826087,
6.426086957, 12.35217391, 8.652173913, 4.752173913, 4.926086957,
2.304347826, 7.930434783, 9.782608696, 1.831818182, 1.877272727,
3.19047619, 9.940909091, 4.222727273, 21, 16.38636364, 10.56363636,
8.422727273, 7.533333333, 47.19090909, 101.9181818, 63.34090909,
24.98181818, 12.72272727, 7.4, 4.672727273, 8.104545455, 8.4,
7.473913043, 3.226086957, 15.87391304, 7.834782609, 6.773913043,
15.12608696, 36.89047619, 65.66521739, 53.70434783, 42.76956522,
48.49130435, 29.59130435, 28.59130435, 22.25652174, 15.08695652,
26.23913043, 21.17391304, 30.31818182, 28.59130435, 9.817391304,
14.02608696, 6.708695652, 11.74782609, 17.5375, 25.8826087, 12.55217391,
13.10869565, 5.02173913, 11.50869565, 5.195652174, 3.409090909,
0.340909091, 6.231818182, 0.004545455, 0.03)), .Names = c("Year",
"Month", "Day", "Amount"), row.names = 8402:8766, class = "data.frame")


Thank you very much for your help.
-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370 <+60%209-549%202370>; Fax. No.+609-5492766
<+60%209-549%202766>*

*Email: roslinazairimah at ump.edu.my
<roslinazairimah at ump.edu.my>; roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]


From rosita21 at gmail.com  Sat Jul 22 10:00:47 2017
From: rosita21 at gmail.com (Rosa Oliveira)
Date: Sat, 22 Jul 2017 08:00:47 +0000
Subject: [R] spaghetti plot - urgent
In-Reply-To: <CAKVAULOQM6z6BksOfZO7yFW_Pi+Cte6YBV359B_84umFP0_zXw@mail.gmail.com>
References: <FF2ED0D7-C003-4EB0-B3C7-D2C63A4946EA@gmail.com>
 <CAKVAULOQM6z6BksOfZO7yFW_Pi+Cte6YBV359B_84umFP0_zXw@mail.gmail.com>
Message-ID: <CAB630FEm-eYR_xZ1rTE=Jv1FBREAs7aKxTw-XiiDzODCQxdrcQ@mail.gmail.com>

Thanks for the tip! Ulrik, I've solved the problem with a different
code....

Best ;)

Ulrik Stervbo <ulrik.stervbo at gmail.com> escreveu em qua, 19/07/2017 ?s
20:28 :

> Hi Rosa,
>
> You pass a vector to ggplot, which expects a data.frame. I am sure you
> meant to do this:
>
> point7$y_point7 <- point7$beta0_7 + point7$beta1_7*point7$time + point7
> $epsilon_7
>
> ggplot(point7, aes(time, y_point7)) + geom_line()
>
> HTH
> Ulrik
>
>
> On Wed, 19 Jul 2017 at 20:37 Rosa Oliveira <rosita21 at gmail.com> wrote:
>
>> Hi everyone,
>>
>> I?m trying to do a spaghetti plot and I know I?m doing all wrong, It must
>> be.
>>
>> What I need:
>>
>> 15 subjects, each with measurements over 5 different times (t1, ..., t5),
>> and the variable that I need to represent in the spaguetti plot is given by:
>>
>> PCR = b0 + b1 * ti + epsilon
>>
>> B0, - baseline of each subject
>> B1 - trajectory of each subject over time (so multiply by t)
>> Epsilon - error associated with each subject
>>
>> Regression model with mixed effects.
>>
>> Thus, I generated b0, b1, epsilon and time created sequence.
>>
>> But I need to do spaguetti plot of the outcome and I can not understand
>> how much I search the publications.
>>
>> Sorry for the stupidity, but I do not even know how to do it and I need
>> it with the utmost urgency to finish a publication proposal :(
>>
>> Follows what I tried to do :( :( :(
>>
>>
>> library(ggplot2)
>> library(reshape)
>> library(lattice)
>> library(gtable)
>> library(grid)
>>
>>
>> set.seed(9027)
>>
>> n.longitudinal.observations  = 5                          # number of PCR
>> measures (per subject) in the hospital period
>> subjects                             = 15                      # Number
>> of simulations (1 per subject in the study)
>>
>> beta0_7_gerar                      = rnorm(subjects, mean = 1, sd = .5)
>> beta0_7                                =
>> as.data.frame(matrix(beta0_7_gerar,nrow=subjects,ncol=1))      # beta 0 -
>> input variable used to calculate PCR (the outcome)
>> beta1_7_gerar                     = rnorm(subjects, mean = -1, sd = .5)
>> beta1_7                               =
>> as.data.frame(matrix(beta1_7_gerar,nrow=subjects,ncol=1) )      # beta 1 -
>> input variable used to calculate PCR (the outcome)
>>
>> tj_gerar                                = seq.int(1,
>> n.longitudinal.observations, 1)
>> epsilon_7_gerar                  = rnorm(5*subjects, mean = 0, sd = .1)
>> epsilon_7                             =
>> as.data.frame(matrix(epsilon_7_gerar,nrow=subjects,ncol=1) )   # epsilon_7
>> - input variable used to calculate PCR (the outcome) - associated with each
>> subject
>>
>> tj                                          =
>> as.data.frame(matrix(tj_gerar,nrow=subjects,ncol=1) )                   #
>> time
>>
>> point7 <- cbind(beta0_7, beta1_7, tj, epsilon_7)
>> point7
>> point7 <- as.data.frame(point7)
>>
>> colnames(point7) = c("beta0_7","beta1_7","time", "epsilon_7")
>>
>>
>> y_point7 <- point7$beta0_7 + point7$beta1_7*point7$time + point7
>> $epsilon_7             (the outcome of the study - PCR)
>> y_point7
>>
>> require(ggplot2)
>>
>> png('test.png')
>> p = ggplot(y_point7, aes(time, y_point7)) + geom_line()
>> print(p)
>> dev.off()
>> savehistory()
>>
>>
>>
>>
>>
>>
>> OR:
>>
>> In the last part I also tried:
>>
>>
>> ID = rep(1:3, each = 5)
>>
>>
>> point7 <- cbind(ID,beta0_7, beta1_7, tj, epsilon_7)
>> point7
>> point7 <- as.data.frame(point7)
>>
>> colnames(point7) = c("ID","beta0_7","beta1_7","time", "epsilon_7")
>>
>>
>>
>>
>>
>> y_point7 <- point7$beta0_7 + point7$beta1_7*point7$time + point7
>> $epsilon_7
>> y_point7
>>
>> crp7 <- y_point7
>>
>> head(point7, n = 15)
>>
>>
>> ggplot(aes(x = tj_gerar, y = crp7), data = point7) +
>>   geom_line(aes(group = ID), color = "gray") +
>>   geom_smooth(aes(group = 1), method = "lm", size = 3, color = "red", se
>> = FALSE) +
>>   theme_bw()
>>
>> But none of these worked :(
>>
>> I was looking to have something like:
>>
>>
>> Being the outcome PCR and the year the times (1, 2, 3, 4, 5).
>>
>> Can someone help me please?
>>
>>
>> Thanks,
>>
>> Best Rosa
>>
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
> --
Enviado do Gmail Mobile

	[[alternative HTML version deleted]]


From luweitest at address.invalid  Sat Jul 22 18:48:48 2017
From: luweitest at address.invalid (Lu Wei)
Date: Sun, 23 Jul 2017 00:48:48 +0800
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
Message-ID: <okvvm4$ssh$1@blaine.gmane.org>

Greetings,

I am a new use of R, starting from R-commander.

I find that the default quantile-comparison (Q-Q plot) of R-commander
has no group option, and I happened to notice RcmdrPlugin.plotByGroup in
the packages list. As the name is so explicit, I installed it, loaded
it, R-commander restarted, but the 3 menu item under Graphs->plot by
group are all greyed out. What could be wrong?

-- 
Regards,
Lu Wei
PGP key ID: 0x A12F EF75 92CC E1EA


From jfox at mcmaster.ca  Sun Jul 23 00:21:35 2017
From: jfox at mcmaster.ca (Fox, John)
Date: Sat, 22 Jul 2017 22:21:35 +0000
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
In-Reply-To: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
References: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>

Dear Lu Wei,

I'm the author of the Rcmdr package but not of RcmdrPlugin.plotByGroup, so if there really is a problem -- which isn't apparent from your message -- then you may wish to contact the package author.

First, as a general matter, menu items in the Rcmdr are grayed out if they're inappropriate in the current context. Rcmdr plug-in authors can use the same mechanism. So, for example, most menu items are grayed out before you read a data set, and menu items that require a categorical variable will be grayed out if there are no factors (or character variables or logical variables) in the active data set.

Second, Rcmdr plug-in packages aren't loaded by the library("Rcmdr") command. You can load a plug-in from the Rcmdr Tools menu; and many (but not all) Rcmdr plug-in packages can be loaded directly via the library() command, in which case the Rcmdr package is also loaded. I don't know whether library("RcmdrPlugin.plotByGroup") will work, but you can try it.

I hope this helps,
 John

--------------------------------------
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: socserv.mcmaster.ca/jfox




> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Lu Wei
> Sent: Saturday, July 22, 2017 12:49 PM
> To: r-help at stat.math.ethz.ch
> Subject: [R] cannot use package RcmdrPlugin.plotByGroup
> 
> Greetings,
> 
> I am a new use of R, starting from R-commander.
> 
> I find that the default quantile-comparison (Q-Q plot) of R-commander
> has no group option, and I happened to notice RcmdrPlugin.plotByGroup in
> the packages list. As the name is so explicit, I installed it, loaded
> it, R-commander restarted, but the 3 menu item under Graphs->plot by
> group are all greyed out. What could be wrong?
> 
> --
> Regards,
> Lu Wei
> PGP key ID: 0x A12F EF75 92CC E1EA
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Sun Jul 23 04:14:06 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sat, 22 Jul 2017 19:14:06 -0700 (PDT)
Subject: [R] 3-day moving average for block maxima
In-Reply-To: <CANTvJZ+qvo-VJLCifOyOvLUP53Wr1cdH3w5MaukEmPkJGhvNyQ@mail.gmail.com>
References: <CANTvJZ+qvo-VJLCifOyOvLUP53Wr1cdH3w5MaukEmPkJGhvNyQ@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.1707221859150.8322@pedal.dcn.davis.ca.us>

Thank you for the dput, but you roll the dice each time you fail to learn 
how to post using plain text that we may not find your email readable or 
even intact. Please learn to post plain text email on this mailing list.

# The following assumes you have no missing days in your time sequence.
# There are better solutions in packages if that is not true for your data
# (e.g. zoo or data.table)
# The filter function looks backward, while your example appears 
# to look foward from the "current" value. The filter function presumes 
# that near the beginning the "previous" values are missing, which causes
# it to generate NA values, which I remove and tack on the NAs at the end.
# (It would be misleading to put in alternate calculations at the end 
# because those would be different than all the rest.)
dt$`Moving Average` <- c( filter( dt$Amount
                                 , rep(1/3,3)
                                 , sides = 1
                                 )[ -(1:2) ]
                         , NA
                         , NA
                         )
dta <- aggregate( list( Max3dMA = dt$`Moving Average` )
                 , dt[ , "Year", drop=FALSE ]
                 , FUN = max
                 , na.rm = TRUE
                 )

On Sat, 22 Jul 2017, roslinazairimah zakaria wrote:

> Dear r-users,
>
> I would like to construct 3-day moving average for block maxima series.
>
> I tried this:
>
> bmthree <- lapply(split(dt, dt$Year), function(x) max(sapply(1:(nrow(x)-2),
>                    function(i) with(x, mean(Amount[i:(i+2)],na.rm=TRUE)))))
> bmthree
>
> and got the following output.
>
> $`1971`
> [1] 70.81667
>
> $`1972`
> [1] 68.94553
>
> $`1973`
> [1] 102.7236
>
> $`1974`
> [1] 73.6625
>
> $`1975`
> [1] 92.98889
>
> $`1976`
> [1] 95.8125
>
> $`1977`
> [1] 31.33974
>
> $`1978`
> [1] 141
>
> $`1979`
> [1] 71.4
>
> $`1980`
> [1] 115.9667
>
> $`1981`
> [1] 66.73718
>
> $`1982`
> [1] 189.5
>
> $`1983`
> [1] 183.1
>
> $`1984`
> [1] 131.5667
>
> $`1985`
> [1] 96.83333
>
> $`1986`
> [1] 267.9667
>
> $`1987`
> [1] 113.6667
>
> $`1988`
> [1] 246.6667
>
> $`1989`
> [1] 83.33333
>
> $`1990`
> [1] 79.5
>
> $`1991`
> [1] 138.3333
>
> $`1992`
> [1] 117
>
> $`1993`
> [1] 99.66667
>
> $`1994`
> [1] 205.3333
>
> $`1995`
> [1] 142.6667
>
> $`1996`
> [1] 106.6667
>
> $`1997`
> [1] 112.5
>
> $`1998`
> [1] 62.66667
>
> $`1999`
> [1] 100.6333
>
> $`2000`
> [1] 146.1333
>
> $`2001`
> [1] 171.7333
>
> $`2002`
> [1] 78.33333
>
> $`2003`
> [1] 100.5667
>
> $`2004`
> [1] 115.0667
>
> $`2005`
> [1] 163.8667
>
> $`2006`
> [1] 79.93333
>
> $`2007`
> [1] 130.6667
>
> $`2008`
> [1] 156.5
>
> $`2009`
> [1] 162.1667
>
> $`2010`
> [1] 99.33333
> $`2011`
> [1] 162.8333
>
> $`2012`
> [1] 247.6667
>
> How do I tweak the code so that I can see the moving average for the block
> maxima before the maximum for that particular year is chosen.
>
> Year                  Month              Day Amount
> Moving average 3-day BM
> 1971 1 1 55.81429 47.63658
> 1971 1 2 49.01818 34.95606
> 1971 1 3 38.07727
> 1971 1 4 17.77273
>
> This is my data:
>
>> dput(try.dt)
> structure(list(Year = c(1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L,
> 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L, 1971L), Month = c(1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L,
> 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L,
> 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L,
> 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L,
> 5L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L,
> 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L,
> 6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L,
> 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L,
> 7L, 7L, 7L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L,
> 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L,
> 8L, 8L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L,
> 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L,
> 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L,
> 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L,
> 10L, 10L, 10L, 10L, 10L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L,
> 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L,
> 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 12L, 12L, 12L, 12L,
> 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L,
> 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L,
> 12L), Day = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L,
> 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L,
> 26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L,
> 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L,
> 22L, 23L, 24L, 25L, 26L, 27L, 28L, 1L, 2L, 3L, 4L, 5L, 6L, 7L,
> 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L,
> 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L,
> 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L,
> 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L,
> 30L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L,
> 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L,
> 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L,
> 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L,
> 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 1L, 2L, 3L, 4L, 5L, 6L,
> 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L,
> 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L,
> 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L,
> 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L,
> 29L, 30L, 31L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L,
> 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L,
> 25L, 26L, 27L, 28L, 29L, 30L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L,
> 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L,
> 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 1L, 2L, 3L,
> 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L,
> 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L,
> 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L,
> 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L,
> 28L, 29L, 30L, 31L), Amount = c(55.81428571, 49.01818182, 38.07727273,
> 17.77272727, 6.913636364, 5.163636364, 2.995454545, 4.540909091,
> 3.09047619, 3.959090909, 4.080952381, 0.513636364, 0.727272727,
> 0.940909091, 0.036363636, 0.672727273, 0.338095238, 1.163636364,
> 1.745454545, 1.004545455, 0.386363636, 0.359090909, 1.463636364,
> 0.640909091, 0.054545455, 3.768181818, 0.027272727, 0.027272727,
> 1.904545455, 8.261904762, 12.21363636, 12.48181818, 0.059090909,
> 2.468181818, 0.659090909, 0.157142857, 0.6, 0.477272727, 0.818181818,
> 0.05, 0.118181818, 0.527272727, 0.331818182, 0.004545455, 1.9,
> 2.018181818, 0.795454545, 2.118181818, 0.345454545, 0.045454545,
> 6.481818182, 13.45454545, 21.48636364, 23.98181818, 3.877272727,
> 3.945454545, 2.423809524, 0.672727273, 4.565, 11.625, 25.74761905,
> 14.51428571, 2.471428571, 0.085714286, 1.523809524, 0.652380952,
> 1.085714286, 0.485714286, 0.576190476, 0.1, 0.038095238, 1.361904762,
> 38.17619048, 102.1761905, 54.28095238, 20.2, 17.28095238, 25.53809524,
> 7.419047619, 0.576190476, 0.061904762, 0.061904762, 1.533333333,
> 0.028571429, 0.023809524, 0.057142857, 0.638095238, 0.70952381,
> 0.171428571, 0.014285714, 0.014285714, 0.557142857, 0.019047619,
> 1.090909091, 0.027272727, 0, 1.254545455, 0, 0.031818182, 0.418181818,
> 0.086363636, 0.186363636, 0.227272727, 0.009090909, 0.009090909,
> 0.981818182, 0.4, 0, 0, 0, 0, 0, 0, 0, 1.55, 0.327272727, 0.009090909,
> 1.413636364, 5.023809524, 11.11, 12.68181818, 12.63636364, 5.877272727,
> 1.018181818, 2.495454545, 3.25, 3.527272727, 1.177272727, 0.6,
> 1.836363636, 8.45, 6.745454545, 7.677272727, 1.177272727, 7.961904762,
> 6.786363636, 5.763636364, 4.047619048, 3.961904762, 7.933333333,
> 3.233333333, 1.114285714, 2.033333333, 6.257142857, 6.386363636,
> 2.327272727, 16.09090909, 13.87727273, 4.277272727, 1.036363636,
> 1.454545455, 1.086363636, 6.495454545, 4.136363636, 2.663636364,
> 10.49545455, 6.422727273, 2.881818182, 6.695454545, 1.631818182,
> 0.277272727, 3.686363636, 2.718181818, 1.281818182, 4.381818182,
> 0.759090909, 7.236363636, 8.195454545, 3.572727273, 3.395454545,
> 1.072727273, 3.827272727, 2.486363636, 0.481818182, 1.163636364,
> 1.5, 2.731818182, 2.568181818, 11.87727273, 12.60909091, 3.747826087,
> 2.204347826, 2.634782609, 1, 2.582608696, 1.213043478, 0.043478261,
> 0.930434783, 3.443478261, 0.743478261, 2.252173913, 2.117391304,
> 7.2, 9.730434783, 1.047826087, 0.213043478, 4.613043478, 6.77826087,
> 7.97826087, 19.52173913, 14.10434783, 3.652173913, 1.039130435,
> 3.873913043, 5.543478261, 2.717391304, 4.295652174, 5.417391304,
> 6.234782609, 7.556521739, 2.356521739, 7.413043478, 6.647826087,
> 5.139130435, 8.856521739, 8.4, 4.113043478, 10.20454545, 8.443478261,
> 3.886956522, 7.856521739, 6.047826087, 5.154166667, 4.241666667,
> 1.041666667, 0.820833333, 3.220833333, 1.0375, 4.545833333, 2.825,
> 4.769565217, 11.84782609, 5.773913043, 10.46521739, 7.77826087,
> 1.134782609, 1.17826087, 4.504347826, 7.247826087, 9.956521739,
> 13.77826087, 9.265217391, 0.534782609, 1.217391304, 1.72173913,
> 0.904347826, 0.426086957, 5.965217391, 2.191304348, 1.569565217,
> 7.360869565, 1.17826087, 6.417391304, 10.84782609, 9.508695652,
> 8.691304348, 15.5, 2.447826087, 2.739130435, 5.082608696, 10.53913043,
> 11.5826087, 2.143478261, 4.67826087, 4.969565217, 1.030434783,
> 3.073913043, 3.77826087, 0.952173913, 2.952173913, 3.669565217,
> 2.282608696, 2.740909091, 8.3, 3.67826087, 6.456521739, 8.952173913,
> 1.469565217, 2.147826087, 10.14782609, 9.008695652, 10.81304348,
> 6.460869565, 11.65652174, 9.195652174, 7.973913043, 15.65652174,
> 18.86956522, 6.930434783, 11.56086957, 12.99545455, 13.13913043,
> 19.23043478, 8.995652174, 5.556521739, 27.07391304, 20.94347826,
> 4.826086957, 5.586956522, 4.126086957, 7.1, 9.404545455, 6.47826087,
> 6.426086957, 12.35217391, 8.652173913, 4.752173913, 4.926086957,
> 2.304347826, 7.930434783, 9.782608696, 1.831818182, 1.877272727,
> 3.19047619, 9.940909091, 4.222727273, 21, 16.38636364, 10.56363636,
> 8.422727273, 7.533333333, 47.19090909, 101.9181818, 63.34090909,
> 24.98181818, 12.72272727, 7.4, 4.672727273, 8.104545455, 8.4,
> 7.473913043, 3.226086957, 15.87391304, 7.834782609, 6.773913043,
> 15.12608696, 36.89047619, 65.66521739, 53.70434783, 42.76956522,
> 48.49130435, 29.59130435, 28.59130435, 22.25652174, 15.08695652,
> 26.23913043, 21.17391304, 30.31818182, 28.59130435, 9.817391304,
> 14.02608696, 6.708695652, 11.74782609, 17.5375, 25.8826087, 12.55217391,
> 13.10869565, 5.02173913, 11.50869565, 5.195652174, 3.409090909,
> 0.340909091, 6.231818182, 0.004545455, 0.03)), .Names = c("Year",
> "Month", "Day", "Amount"), row.names = 8402:8766, class = "data.frame")
>
>
> Thank you very much for your help.
> -- 
> *Roslinazairimah Zakaria*
> *Tel: +609-5492370 <+60%209-549%202370>; Fax. No.+609-5492766
> <+60%209-549%202766>*
>
> *Email: roslinazairimah at ump.edu.my
> <roslinazairimah at ump.edu.my>; roslinaump at gmail.com <roslinaump at gmail.com>*
> Faculty of Industrial Sciences & Technology
> University Malaysia Pahang
> Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From chocold12 at gmail.com  Sun Jul 23 05:28:38 2017
From: chocold12 at gmail.com (lily li)
Date: Sat, 22 Jul 2017 21:28:38 -0600
Subject: [R] about installing smwrGraphs package
Message-ID: <CAN5afy-9+BsSJnby=3hnsJtdwTy+pc4y6QeGuf-fBkDQHOZsEw@mail.gmail.com>

Hi R users,

I'm trying to install the package, but got the error and don't know how to
fix it. Can anyone help me? Thanks very much.

install.packages("smwrGraphs", repos=c("http://owi.usgs.gov/R","
http://cran.us.r-project.org"), dependencies = TRUE)

Error in install.packages : Line starting '<html> ...' is malformed!

	[[alternative HTML version deleted]]


From luweitest at gmail.com  Sun Jul 23 06:27:13 2017
From: luweitest at gmail.com (Lu Wei)
Date: Sun, 23 Jul 2017 12:27:13 +0800
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>
References: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>
Message-ID: <ol18jc$ifo$1@blaine.gmane.org>

On 2017-7-23 6:21, Fox, John wrote:
> Dear Lu Wei,
> 
> I'm the author of the Rcmdr package but not of
> RcmdrPlugin.plotByGroup, so if there really is a problem -- which
> isn't apparent from your message -- then you may wish to contact the
> package author.
> 
> First, as a general matter, menu items in the Rcmdr are grayed out if
> they're inappropriate in the current context. Rcmdr plug-in authors
> can use the same mechanism. So, for example, most menu items are
> grayed out before you read a data set, and menu items that require a
> categorical variable will be grayed out if there are no factors (or
> character variables or logical variables) in the active data set.
> ...

Thanks for the reply. I change to another data set and the menu is
available. I did not know the type of variable -- I am a newbie who is
searching a quick solution, that's why I try R-commander. But after some
test I find that plugin's output is not exactly what I want.

I am seeking a way to visualize data by plotting grouped box and
distribution chart. The latter may be called Q-Q chart, which I just
learned from R, though it seems not exactly the same as I have seen
below. I hope the groups are in the same chart for comparison, like this:
http://cubeupload.com/im/WFc4CC.png

or even plot a set of variables:
http://cubeupload.com/im/wK69NN.jpg

These charts are produced by Minitab. The norm-axis is not the same as
Q-Q chart in R, but I think they are equivalent. Is it right?

I hope you or the author of RcmdrPlugin.plotByGroup could implement the
feature in the picture I posted. This "distribution chart" or Q-Q chart
is the most I want from a statistic tool, since it gives full
information of experiment data, and putting groups together in a chart
for comparison is the ultimate judgement.

Thank you for making R an easy tool to learn and use. Great job.

-- 
Regards,
Lu Wei
PGP key ID: 0x A12F EF75 92CC E1EA


From r-subscribe at mail.ru  Sun Jul 23 04:46:01 2017
From: r-subscribe at mail.ru (=?UTF-8?B?aVBhZA==?=)
Date: Sun, 23 Jul 2017 05:46:01 +0300
Subject: [R] =?utf-8?q?R=3A_How_to_multiplying_y-axis_ticks_value_by_100?=
 =?utf-8?q?=3F?=
Message-ID: <1500777961.295534354@f433.i.mail.ru>

R: how multiplying y-axis ticks value by 100 (without put the % symbol next to the number) here:?
plot (CI.overall, curvlab=c("Discharge", "Death"), xlab="Days", las=1)?
P.S. So instead 0.00, 0.20 etc. the 0, 20 etc.
Thank you in advance, Nic

	[[alternative HTML version deleted]]


From bsmith030465 at gmail.com  Sun Jul 23 14:11:32 2017
From: bsmith030465 at gmail.com (Brian Smith)
Date: Sun, 23 Jul 2017 08:11:32 -0400
Subject: [R] par(mfrow) for heatmap plots
Message-ID: <CAEQKoCGC8M5=YeD+RSqQK28GxAAy8RzyFrVzWyYLb4q54A2Pvw@mail.gmail.com>

Hi,

I was trying to use par(mfrow) to put 4 heatmaps on a single page. However,
I get one plot per page and not one page with 4 plots. What should I
modify? Test code is given below:

test = matrix(rnorm(60), 20, 3)

pdf(file='test.pdf',width=10,height=8)
par(mfrow=c(2,2))
heatmap(test)
heatmap(test)
heatmap(test)
heatmap(test)
dev.off()

thanks!

	[[alternative HTML version deleted]]


From jfox at mcmaster.ca  Sun Jul 23 14:41:16 2017
From: jfox at mcmaster.ca (Fox, John)
Date: Sun, 23 Jul 2017 12:41:16 +0000
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
In-Reply-To: <32062_1500788018_v6N5Xb8H027269_ol18jc$ifo$1@blaine.gmane.org>
References: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>
 <32062_1500788018_v6N5Xb8H027269_ol18jc$ifo$1@blaine.gmane.org>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC83669D26C@FHSDB4H16-2.csu.mcmaster.ca>

Dear Lu Wei,

> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Lu Wei
> Sent: Sunday, July 23, 2017 12:27 AM
> To: r-help at stat.math.ethz.ch
> Subject: Re: [R] cannot use package RcmdrPlugin.plotByGroup
> 
> On 2017-7-23 6:21, Fox, John wrote:
> > Dear Lu Wei,
> >
> > I'm the author of the Rcmdr package but not of
> > RcmdrPlugin.plotByGroup, so if there really is a problem -- which
> > isn't apparent from your message -- then you may wish to contact the
> > package author.
> >
> > First, as a general matter, menu items in the Rcmdr are grayed out if
> > they're inappropriate in the current context. Rcmdr plug-in authors
> > can use the same mechanism. So, for example, most menu items are
> > grayed out before you read a data set, and menu items that require a
> > categorical variable will be grayed out if there are no factors (or
> > character variables or logical variables) in the active data set.
> > ...
> 
> Thanks for the reply. I change to another data set and the menu is available. I
> did not know the type of variable -- I am a newbie who is searching a quick
> solution, that's why I try R-commander. 

The Rcmdr comes with an introductory manual, accessible via "Help > Introduction to the R Commander". This and a lot of other information is in the manual, and you might try reading it.

> But after some test I find that plugin's
> output is not exactly what I want.
> 
> I am seeking a way to visualize data by plotting grouped box and distribution
> chart. The latter may be called Q-Q chart, which I just learned from R, though it
> seems not exactly the same as I have seen below. I hope the groups are in the
> same chart for comparison, like this:
> http://cubeupload.com/im/WFc4CC.png
> 
> or even plot a set of variables:
> http://cubeupload.com/im/wK69NN.jpg
> 
> These charts are produced by Minitab. The norm-axis is not the same as Q-Q
> chart in R, but I think they are equivalent. Is it right?

I'm afraid that I can't say because I don't read Chinese. It looks like quantiles of some sort are on the vertical axis, which is labelled as percentiles rather than with values of the variable; if these are quantiles of the standard normal distribution, then the graphs are normal QQ plots. In the Rcmdr, normal quantiles appear on the horizontal axis, which is more common, and the scale is labelled with values of the variable.

> 
> I hope you or the author of RcmdrPlugin.plotByGroup could implement the
> feature in the picture I posted. This "distribution chart" or Q-Q chart is the most
> I want from a statistic tool, since it gives full information of experiment data,
> and putting groups together in a chart for comparison is the ultimate
> judgement.

The Rcmdr uses the qqPlot() function in the car package. In the next version of the car package, qqPlot() will be able to plot by groups, and when that happens, I'll incorporate the feature in the Rcmdr.

More generally, however, if you learn to write R commands you'll be able to make customized plots. It would be easy to duplicate the plots that you show, for example.

Best,
 John

> 
> Thank you for making R an easy tool to learn and use. Great job.	 
> 
> --
> Regards,
> Lu Wei
> PGP key ID: 0x A12F EF75 92CC E1EA
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From lists at dewey.myzen.co.uk  Sun Jul 23 15:05:46 2017
From: lists at dewey.myzen.co.uk (Michael Dewey)
Date: Sun, 23 Jul 2017 14:05:46 +0100
Subject: [R] par(mfrow) for heatmap plots
In-Reply-To: <CAEQKoCGC8M5=YeD+RSqQK28GxAAy8RzyFrVzWyYLb4q54A2Pvw@mail.gmail.com>
References: <CAEQKoCGC8M5=YeD+RSqQK28GxAAy8RzyFrVzWyYLb4q54A2Pvw@mail.gmail.com>
Message-ID: <df7cc8b4-c027-1a3e-1f3c-6e4ebc9ab1d6@dewey.myzen.co.uk>

Dear Brian

If you look at ?heatmap and the second paragraph of the Note you will 
see that it is behaving according to its documentation.

On 23/07/2017 13:11, Brian Smith wrote:
> Hi,
>
> I was trying to use par(mfrow) to put 4 heatmaps on a single page. However,
> I get one plot per page and not one page with 4 plots. What should I
> modify? Test code is given below:
>
> test = matrix(rnorm(60), 20, 3)
>
> pdf(file='test.pdf',width=10,height=8)
> par(mfrow=c(2,2))
> heatmap(test)
> heatmap(test)
> heatmap(test)
> heatmap(test)
> dev.off()
>
> thanks!
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ---
> This email has been checked for viruses by AVG.
> http://www.avg.com
>
>

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From jdnewmil at dcn.davis.ca.us  Sun Jul 23 15:12:39 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 23 Jul 2017 06:12:39 -0700
Subject: [R] par(mfrow) for heatmap plots
In-Reply-To: <CAEQKoCGC8M5=YeD+RSqQK28GxAAy8RzyFrVzWyYLb4q54A2Pvw@mail.gmail.com>
References: <CAEQKoCGC8M5=YeD+RSqQK28GxAAy8RzyFrVzWyYLb4q54A2Pvw@mail.gmail.com>
Message-ID: <8A788C74-0397-4DD1-A935-3FB91C28D953@dcn.davis.ca.us>

The answer is "don't do that" because that function abuses par. Use lattice or ggplot2 with grid graphics to plot multiple heatmaps.

https://stackoverflow.com/questions/15114347/to-display-two-heatmaps-in-same-pdf-side-by-side-in-r
-- 
Sent from my phone. Please excuse my brevity.

On July 23, 2017 5:11:32 AM PDT, Brian Smith <bsmith030465 at gmail.com> wrote:
>Hi,
>
>I was trying to use par(mfrow) to put 4 heatmaps on a single page.
>However,
>I get one plot per page and not one page with 4 plots. What should I
>modify? Test code is given below:
>
>test = matrix(rnorm(60), 20, 3)
>
>pdf(file='test.pdf',width=10,height=8)
>par(mfrow=c(2,2))
>heatmap(test)
>heatmap(test)
>heatmap(test)
>heatmap(test)
>dev.off()
>
>thanks!
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From gavan.mcgrath at uwa.edu.au  Sun Jul 23 16:08:28 2017
From: gavan.mcgrath at uwa.edu.au (Gavan McGrath)
Date: Sun, 23 Jul 2017 14:08:28 +0000
Subject: [R] BayesianTools update prior
Message-ID: <SY3PR01MB186622E4A331975232A911D1CEBA0@SY3PR01MB1866.ausprd01.prod.outlook.com>

Hi,

Using the example in ?VSEM in the package BayesianTools I'm attempting to iteratively update the prior but find the plotTimeSeriesResults produces the following errors when I extend the VSEM example in BayesianTools.  With the Code below (the errors) I get:
"  Error in quantile.default(x, probs = quantiles[i]) :
  missing values and NaN's not allowed if 'na.rm' is FALSE"

The error appears to come from the function getPredictiveIntervals, specifically the lines:
for (i in 1:nrow(predDistr)) {
            predDistr[i, ] = error(mean = pred[i, ], par = parMatrix[i,
                ])
        }
predInt = getCredibleIntervals(sampleMatrix = predDistr,
            quantiles = quantiles)

I suspect lower and upper bounds on the parameters are not being enforced leading to a negative standard deviation being passed to rnorm?.
Any suggestions on how to proceed would be welcome.

Code:
#run the example in ?VSEM first then:

newPrior = createPriorDensity(out, method = "multivariate",
                              eps = 1e-10,
                              lower = refPars$lower[parSel],
                              upper = refPars$upper[parSel])

bayesianSetup <- createBayesianSetup(likelihood = likelihood,
    prior = newPrior,
    names = rownames(refPars)[parSel] )


out <- runMCMC(bayesianSetup = bayesianSetup, settings = settings)
plotTimeSeriesResults(sampler = out,
                      model = createPredictions,
                      observed = obs,
                      error = createError,
                      prior = TRUE,
                      main = "Prior predictive")

	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Sun Jul 23 17:07:29 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Sun, 23 Jul 2017 08:07:29 -0700
Subject: [R] BayesianTools update prior
In-Reply-To: <SY3PR01MB186622E4A331975232A911D1CEBA0@SY3PR01MB1866.ausprd01.prod.outlook.com>
References: <SY3PR01MB186622E4A331975232A911D1CEBA0@SY3PR01MB1866.ausprd01.prod.outlook.com>
Message-ID: <CAGxFJbT7F1FCWqTMB6G=38c+acYX2WAP1pQ=kA7QuoeM3Kkupg@mail.gmail.com>

If you fail to get a satisfactory reply here because this is a
specialized package, you should probably contact the maintainer (see
?maintainer), who may not monitor this list.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jul 23, 2017 at 7:08 AM, Gavan McGrath <gavan.mcgrath at uwa.edu.au> wrote:
> Hi,
>
> Using the example in ?VSEM in the package BayesianTools I'm attempting to iteratively update the prior but find the plotTimeSeriesResults produces the following errors when I extend the VSEM example in BayesianTools.  With the Code below (the errors) I get:
> "  Error in quantile.default(x, probs = quantiles[i]) :
>   missing values and NaN's not allowed if 'na.rm' is FALSE"
>
> The error appears to come from the function getPredictiveIntervals, specifically the lines:
> for (i in 1:nrow(predDistr)) {
>             predDistr[i, ] = error(mean = pred[i, ], par = parMatrix[i,
>                 ])
>         }
> predInt = getCredibleIntervals(sampleMatrix = predDistr,
>             quantiles = quantiles)
>
> I suspect lower and upper bounds on the parameters are not being enforced leading to a negative standard deviation being passed to rnorm?.
> Any suggestions on how to proceed would be welcome.
>
> Code:
> #run the example in ?VSEM first then:
>
> newPrior = createPriorDensity(out, method = "multivariate",
>                               eps = 1e-10,
>                               lower = refPars$lower[parSel],
>                               upper = refPars$upper[parSel])
>
> bayesianSetup <- createBayesianSetup(likelihood = likelihood,
>     prior = newPrior,
>     names = rownames(refPars)[parSel] )
>
>
> out <- runMCMC(bayesianSetup = bayesianSetup, settings = settings)
> plotTimeSeriesResults(sampler = out,
>                       model = createPredictions,
>                       observed = obs,
>                       error = createError,
>                       prior = TRUE,
>                       main = "Prior predictive")
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ligges at statistik.tu-dortmund.de  Sun Jul 23 18:31:11 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 23 Jul 2017 18:31:11 +0200
Subject: [R] about installing smwrGraphs package
In-Reply-To: <CAN5afy-9+BsSJnby=3hnsJtdwTy+pc4y6QeGuf-fBkDQHOZsEw@mail.gmail.com>
References: <CAN5afy-9+BsSJnby=3hnsJtdwTy+pc4y6QeGuf-fBkDQHOZsEw@mail.gmail.com>
Message-ID: <a767433c-ed11-ed67-d67d-f50544b5eba4@statistik.tu-dortmund.de>



On 23.07.2017 05:28, lily li wrote:
> Hi R users,
> 
> I'm trying to install the package, but got the error and don't know how to
> fix it. Can anyone help me? Thanks very much.
> 
> install.packages("smwrGraphs", repos=c("http://owi.usgs.gov/R","

I guess "http://owi.usgs.gov/R" does not provide standard repositories 
for R?

Best,
Uwe Ligges




> http://cran.us.r-project.org"), dependencies = TRUE)
> 
> Error in install.packages : Line starting '<html> ...' is malformed!
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From tea3rd at gmail.com  Sun Jul 23 19:12:26 2017
From: tea3rd at gmail.com (Thomas Adams)
Date: Sun, 23 Jul 2017 13:12:26 -0400
Subject: [R] about installing smwrGraphs package
In-Reply-To: <a767433c-ed11-ed67-d67d-f50544b5eba4@statistik.tu-dortmund.de>
References: <CAN5afy-9+BsSJnby=3hnsJtdwTy+pc4y6QeGuf-fBkDQHOZsEw@mail.gmail.com>
 <a767433c-ed11-ed67-d67d-f50544b5eba4@statistik.tu-dortmund.de>
Message-ID: <CAGxgkWiZp+pkW398TkiC+wTyZMaGup+y8TJvTCvFYCk02q5vrw@mail.gmail.com>

Lily,

This:
https://cran.r-project.org/web/packages/githubinstall/vignettes/githubinstall.html
will probably be useful to you.

Best,
Tom

On Sun, Jul 23, 2017 at 12:31 PM, Uwe Ligges <
ligges at statistik.tu-dortmund.de> wrote:

>
>
> On 23.07.2017 05:28, lily li wrote:
>
>> Hi R users,
>>
>> I'm trying to install the package, but got the error and don't know how to
>> fix it. Can anyone help me? Thanks very much.
>>
>> install.packages("smwrGraphs", repos=c("http://owi.usgs.gov/R","
>>
>
> I guess "http://owi.usgs.gov/R" does not provide standard repositories
> for R?
>
> Best,
> Uwe Ligges
>
>
>
>
> http://cran.us.r-project.org"), dependencies = TRUE)
>>
>> Error in install.packages : Line starting '<html> ...' is malformed!
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posti
>> ng-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posti
> ng-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Sun Jul 23 20:33:10 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Sun, 23 Jul 2017 20:33:10 +0200
Subject: [R] about installing smwrGraphs package
In-Reply-To: <a767433c-ed11-ed67-d67d-f50544b5eba4@statistik.tu-dortmund.de>
References: <CAN5afy-9+BsSJnby=3hnsJtdwTy+pc4y6QeGuf-fBkDQHOZsEw@mail.gmail.com>
 <a767433c-ed11-ed67-d67d-f50544b5eba4@statistik.tu-dortmund.de>
Message-ID: <1C3FFF5F-DF46-48DC-81FB-306C9C831223@gmail.com>


> On 23 Jul 2017, at 18:31 , Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 23.07.2017 05:28, lily li wrote:
>> Hi R users,
>> I'm trying to install the package, but got the error and don't know how to
>> fix it. Can anyone help me? Thanks very much.
>> install.packages("smwrGraphs", repos=c("http://owi.usgs.gov/R","
> 
> I guess "http://owi.usgs.gov/R" does not provide standard repositories for R?

Possibly, but this seems to work for me (on a Mac):

install.packages("smwrGraphs", repos=c("https://owi.usgs.gov/R",
CRAN="https://cloud.r-project.org"), dependencies = TRUE)

Note: (a) HTTPS: (b) standard CRAN repo (cran.us does not do HTTPS??) (c) no newline in URL. Not sure that the named form is necessary, and things seem to work with plain HTTP too, but that is bad form.

-pd


> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
>> http://cran.us.r-project.org"), dependencies = TRUE)
>> Error in install.packages : Line starting '<html> ...' is malformed!
>> 	[[alternative HTML version deleted]]
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From pifferdavide at gmail.com  Sun Jul 23 20:43:44 2017
From: pifferdavide at gmail.com (Davide Piffer)
Date: Sun, 23 Jul 2017 21:43:44 +0300
Subject: [R] matching element of a vector to i-2nd element
Message-ID: <CAOq2dy7W758cS4+UtVPFH60U5tzsqtTa1aEU1TnOn7yYChE=Xg@mail.gmail.com>

I have a df with a vector v. For each element of the vector, I want to
know whether the i-2nd element is the same as the ith element. For
example:
given
v=c(A,C,D,C) the result should be:
FALSE,FALSE,FALSE,TRUE.

I attempted something using indexing in a for loop such as (bad,
incorrect example):
 for (i in v){
  if [i]==[i-2] print T
else print F
}

However, this is obviously wrong.
Can someone provide a nice way to solve this?


From sagarsinghaniya33 at gmail.com  Sun Jul 23 14:49:01 2017
From: sagarsinghaniya33 at gmail.com (Sagar Dhiman)
Date: Sun, 23 Jul 2017 18:19:01 +0530
Subject: [R] I have been unable to run R from within QGIS on my Mac
Message-ID: <CAAXTYkytFL7Dik78xT28+aDGDC1chkQRiaUvDx5W7r3DrxixWA@mail.gmail.com>

I have tried to run R from within QGIS, But it show error "Missing
dependency.This algorithm cannot be run :-(

This algorithm requires R to be run.Unfortunately, it seems that R is
not installedin your system, or it is not correctly configured to be
used from QGIS
Click here to know more about how to install and configure R to be
used with QGIS"

	[[alternative HTML version deleted]]


From luweitest at gmail.com  Sun Jul 23 17:28:16 2017
From: luweitest at gmail.com (Lu Wei)
Date: Sun, 23 Jul 2017 23:28:16 +0800
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC83669D26C@FHSDB4H16-2.csu.mcmaster.ca>
References: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>
 <32062_1500788018_v6N5Xb8H027269_ol18jc$ifo$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D26C@FHSDB4H16-2.csu.mcmaster.ca>
Message-ID: <ol2far$fls$1@blaine.gmane.org>

On 2017-7-23 20:41, Fox, John wrote:> ...
> The Rcmdr uses the qqPlot() function in the car package. In the next
> version of the car package, qqPlot() will be able to plot by groups,
> and when that happens, I'll incorporate the feature in the Rcmdr.
> 
> More generally, however, if you learn to write R commands you'll be
> able to make customized plots. It would be easy to duplicate the
> plots that you show, for example.
> 
> 
Thanks you for the suggestions. It seems I will use R often afterwards, so I will study the manuals and commands little by little. I do not reject the command line geek style, but the beginning steps and basic functions should be easy. Your Rcmdr offered this to new users; without it, I won't begin to learn and use R.

Your observations of my posted image are correct. So that is my expectation of grouped QQ plot. I hope it will come to Rcmdr soon. Also, thanks Google, I find a way to do that:
http://www.sthda.com/english/wiki/ggplot2-qq-plot-quantile-quantile-graph-quick-start-guide-r-software-and-data-visualization
That shape or color grouping in one chart is exactly what I need. Although I don't quite understand the commands used, I think I can copy and modify the commands a little to do my work. Could you incorporate it in the Rcmdr? Maybe consider it in your spare time. 

-- 
Best regards,
Lu Wei
PGP key ID: 0x A12F EF75 92CC E1EA


From bgunter.4567 at gmail.com  Sun Jul 23 21:00:35 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Sun, 23 Jul 2017 12:00:35 -0700
Subject: [R] matching element of a vector to i-2nd element
In-Reply-To: <CAOq2dy7W758cS4+UtVPFH60U5tzsqtTa1aEU1TnOn7yYChE=Xg@mail.gmail.com>
References: <CAOq2dy7W758cS4+UtVPFH60U5tzsqtTa1aEU1TnOn7yYChE=Xg@mail.gmail.com>
Message-ID: <CAGxFJbR_Upw+yxtLNymmPZfqzbaZk4+EFogX=oLJdhCOv9Gaow@mail.gmail.com>

Homework?? There is a no homework policy on this list.

Cheers,
Bert
Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jul 23, 2017 at 11:43 AM, Davide Piffer <pifferdavide at gmail.com> wrote:
> I have a df with a vector v. For each element of the vector, I want to
> know whether the i-2nd element is the same as the ith element. For
> example:
> given
> v=c(A,C,D,C) the result should be:
> FALSE,FALSE,FALSE,TRUE.
>
> I attempted something using indexing in a for loop such as (bad,
> incorrect example):
>  for (i in v){
>   if [i]==[i-2] print T
> else print F
> }
>
> However, this is obviously wrong.
> Can someone provide a nice way to solve this?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pifferdavide at gmail.com  Sun Jul 23 21:04:00 2017
From: pifferdavide at gmail.com (Davide Piffer)
Date: Sun, 23 Jul 2017 22:04:00 +0300
Subject: [R] matching element of a vector to i-2nd element
In-Reply-To: <CAGxFJbR_Upw+yxtLNymmPZfqzbaZk4+EFogX=oLJdhCOv9Gaow@mail.gmail.com>
References: <CAOq2dy7W758cS4+UtVPFH60U5tzsqtTa1aEU1TnOn7yYChE=Xg@mail.gmail.com>
 <CAGxFJbR_Upw+yxtLNymmPZfqzbaZk4+EFogX=oLJdhCOv9Gaow@mail.gmail.com>
Message-ID: <CAOq2dy6F38y64+76mKdH3B434nNspF=NYR9hc949qwEsVG_V4A@mail.gmail.com>

No homework. Just a genuine question

On 23 July 2017 at 22:00, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> Homework?? There is a no homework policy on this list.
>
> Cheers,
> Bert
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sun, Jul 23, 2017 at 11:43 AM, Davide Piffer <pifferdavide at gmail.com> wrote:
>> I have a df with a vector v. For each element of the vector, I want to
>> know whether the i-2nd element is the same as the ith element. For
>> example:
>> given
>> v=c(A,C,D,C) the result should be:
>> FALSE,FALSE,FALSE,TRUE.
>>
>> I attempted something using indexing in a for loop such as (bad,
>> incorrect example):
>>  for (i in v){
>>   if [i]==[i-2] print T
>> else print F
>> }
>>
>> However, this is obviously wrong.
>> Can someone provide a nice way to solve this?
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Sun Jul 23 21:11:15 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Sun, 23 Jul 2017 12:11:15 -0700
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
In-Reply-To: <ol2far$fls$1@blaine.gmane.org>
References: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>
 <32062_1500788018_v6N5Xb8H027269_ol18jc$ifo$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D26C@FHSDB4H16-2.csu.mcmaster.ca>
 <ol2far$fls$1@blaine.gmane.org>
Message-ID: <CAGxFJbSS86cSfovPFhtDYf=gW15cgRbBTtE0XP=Gp_wyob9PUg@mail.gmail.com>

On Sun, Jul 23, 2017 at 8:28 AM, Lu Wei <luweitest at gmail.com> wrote:
> On 2017-7-23 20:41, Fox, John wrote:> ...
>> The Rcmdr uses the qqPlot() function in the car package. In the next
>> version of the car package, qqPlot() will be able to plot by groups,
>> and when that happens, I'll incorporate the feature in the Rcmdr.
>>
>> More generally, however, if you learn to write R commands you'll be
>> able to make customized plots. It would be easy to duplicate the
>> plots that you show, for example.
>>
>>
> Thanks you for the suggestions. It seems I will use R often afterwards, so I will study the manuals and commands little by little. I do not reject the command line geek style, but the beginning steps and basic functions should be easy. Your Rcmdr offered this to new users; without it, I won't begin to learn and use R.

!!!
See here (or search on your own) for basic R tutorials to help you begin:

https://www.rstudio.com/online-learning/#R

-- Cheers,
Bert


>
> Your observations of my posted image are correct. So that is my expectation of grouped QQ plot. I hope it will come to Rcmdr soon. Also, thanks Google, I find a way to do that:
> http://www.sthda.com/english/wiki/ggplot2-qq-plot-quantile-quantile-graph-quick-start-guide-r-software-and-data-visualization
> That shape or color grouping in one chart is exactly what I need. Although I don't quite understand the commands used, I think I can copy and modify the commands a little to do my work. Could you incorporate it in the Rcmdr? Maybe consider it in your spare time.
>
> --
> Best regards,
> Lu Wei
> PGP key ID: 0x A12F EF75 92CC E1EA
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From hpages at fredhutch.org  Sun Jul 23 21:19:28 2017
From: hpages at fredhutch.org (=?ISO-8859-1?Q?Herv=E9_Pag=E8s?=)
Date: Sun, 23 Jul 2017 12:19:28 -0700
Subject: [R] matching element of a vector to i-2nd element
In-Reply-To: <CAOq2dy7W758cS4+UtVPFH60U5tzsqtTa1aEU1TnOn7yYChE=Xg@mail.gmail.com>
References: <CAOq2dy7W758cS4+UtVPFH60U5tzsqtTa1aEU1TnOn7yYChE=Xg@mail.gmail.com>
Message-ID: <5974F6C0.2090803@fredhutch.org>

Hi,

On 07/23/2017 11:43 AM, Davide Piffer wrote:
> I have a df with a vector v. For each element of the vector, I want to
> know whether the i-2nd element is the same as the ith element. For
> example:
> given
> v=c(A,C,D,C) the result should be:
> FALSE,FALSE,FALSE,TRUE.
>
> I attempted something using indexing in a for loop such as (bad,
> incorrect example):
>   for (i in v){
>    if [i]==[i-2] print T
> else print F
> }
>
> However, this is obviously wrong.

Why don't you provide code that is actually valid R code so we
can run it. Then we can see if it does the right thing or not.

> Can someone provide a nice way to solve this?

Does this do what you want?

   isSameAsPrevious <- function(v, k=1) c(rep(FALSE, k), head(v,n=-k) == 
tail(v, n=-k))

Then:

 > isSameAsPrevious(v, 2)
[1] FALSE FALSE FALSE  TRUE

H.


>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=YfPp2NbGMLV4frEpzG4QQFssqMnld91RlQHDdWcvFtw&s=-KVWCgOZsuCGKiZ7aXq4jhZBw97MrEzg19X8yFD60l8&e=
> PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=YfPp2NbGMLV4frEpzG4QQFssqMnld91RlQHDdWcvFtw&s=HGLgncA6cBilW_DkIzjBEizqo1AmvlshmOHQr4td1vc&e=
> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Herv? Pag?s

Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M1-B514
P.O. Box 19024
Seattle, WA 98109-1024

E-mail: hpages at fredhutch.org
Phone:  (206) 667-5791
Fax:    (206) 667-1319


From jdnewmil at dcn.davis.ca.us  Sun Jul 23 21:44:31 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 23 Jul 2017 12:44:31 -0700
Subject: [R] I have been unable to run R from within QGIS on my Mac
In-Reply-To: <CAAXTYkytFL7Dik78xT28+aDGDC1chkQRiaUvDx5W7r3DrxixWA@mail.gmail.com>
References: <CAAXTYkytFL7Dik78xT28+aDGDC1chkQRiaUvDx5W7r3DrxixWA@mail.gmail.com>
Message-ID: <B7A3213D-42A3-4846-89EA-15A1C1AF7CB7@dcn.davis.ca.us>

This is not the QGIS (whatever that is) support forum. Perhaps you should return to basics and confirm that you have installed R and can start R yourself, without asking QGIS to do it. If you can do that,  perhaps you should "click here" as the error message suggests. If you can start R yourself and the QGIS "click here" button is not helpful enough then you should be asking in whatever QGIS support channels there are. If you cannot start R yourself then please read the R mailing lists Posting Guide mentioned below and tell us exactly what you did to start R and on which operating system you are trying these steps that did not work. Note that there is an R Installation and Administration manual supplied with R that would likely be helpful as well. 
-- 
Sent from my phone. Please excuse my brevity.

On July 23, 2017 5:49:01 AM PDT, Sagar Dhiman <sagarsinghaniya33 at gmail.com> wrote:
>I have tried to run R from within QGIS, But it show error "Missing
>dependency.This algorithm cannot be run :-(
>
>This algorithm requires R to be run.Unfortunately, it seems that R is
>not installedin your system, or it is not correctly configured to be
>used from QGIS
>Click here to know more about how to install and configure R to be
>used with QGIS"
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Sun Jul 23 21:50:53 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 23 Jul 2017 12:50:53 -0700
Subject: [R] matching element of a vector to i-2nd element
In-Reply-To: <CAOq2dy6F38y64+76mKdH3B434nNspF=NYR9hc949qwEsVG_V4A@mail.gmail.com>
References: <CAOq2dy7W758cS4+UtVPFH60U5tzsqtTa1aEU1TnOn7yYChE=Xg@mail.gmail.com>
 <CAGxFJbR_Upw+yxtLNymmPZfqzbaZk4+EFogX=oLJdhCOv9Gaow@mail.gmail.com>
 <CAOq2dy6F38y64+76mKdH3B434nNspF=NYR9hc949qwEsVG_V4A@mail.gmail.com>
Message-ID: <07F16B79-D0B7-4976-8336-8818ABD147F3@dcn.davis.ca.us>

You can compare the elements that make sense to compare, and fill in the ones that don't make sense to compare yourself using the c function. 

Hint: no looping or if function are necessary.  

v[ seq( 2, length( v ) ] == v[ seq.int( length( v ) - 2 ) ]
-- 
Sent from my phone. Please excuse my brevity.

On July 23, 2017 12:04:00 PM PDT, Davide Piffer <pifferdavide at gmail.com> wrote:
>No homework. Just a genuine question
>
>On 23 July 2017 at 22:00, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> Homework?? There is a no homework policy on this list.
>>
>> Cheers,
>> Bert
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming
>along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Sun, Jul 23, 2017 at 11:43 AM, Davide Piffer
><pifferdavide at gmail.com> wrote:
>>> I have a df with a vector v. For each element of the vector, I want
>to
>>> know whether the i-2nd element is the same as the ith element. For
>>> example:
>>> given
>>> v=c(A,C,D,C) the result should be:
>>> FALSE,FALSE,FALSE,TRUE.
>>>
>>> I attempted something using indexing in a for loop such as (bad,
>>> incorrect example):
>>>  for (i in v){
>>>   if [i]==[i-2] print T
>>> else print F
>>> }
>>>
>>> However, this is obviously wrong.
>>> Can someone provide a nice way to solve this?
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From pifferdavide at gmail.com  Sun Jul 23 22:23:38 2017
From: pifferdavide at gmail.com (Davide Piffer)
Date: Sun, 23 Jul 2017 23:23:38 +0300
Subject: [R] matching element of a vector to i-2nd element
In-Reply-To: <5974F6C0.2090803@fredhutch.org>
References: <CAOq2dy7W758cS4+UtVPFH60U5tzsqtTa1aEU1TnOn7yYChE=Xg@mail.gmail.com>
 <5974F6C0.2090803@fredhutch.org>
Message-ID: <CAOq2dy4jP=jt-r7VkfLrmD5x2vk3qEu5pMY-LwcNt6b4AK1EiQ@mail.gmail.com>

Thanks a lot, Herve'. This worked!

On 23 July 2017 at 22:19, Herv? Pag?s <hpages at fredhutch.org> wrote:
> Hi,
>
> On 07/23/2017 11:43 AM, Davide Piffer wrote:
>>
>> I have a df with a vector v. For each element of the vector, I want to
>> know whether the i-2nd element is the same as the ith element. For
>> example:
>> given
>> v=c(A,C,D,C) the result should be:
>> FALSE,FALSE,FALSE,TRUE.
>>
>> I attempted something using indexing in a for loop such as (bad,
>> incorrect example):
>>   for (i in v){
>>    if [i]==[i-2] print T
>> else print F
>> }
>>
>> However, this is obviously wrong.
>
>
> Why don't you provide code that is actually valid R code so we
> can run it. Then we can see if it does the right thing or not.
>
>> Can someone provide a nice way to solve this?
>
>
> Does this do what you want?
>
>   isSameAsPrevious <- function(v, k=1) c(rep(FALSE, k), head(v,n=-k) ==
> tail(v, n=-k))
>
> Then:
>
>> isSameAsPrevious(v, 2)
> [1] FALSE FALSE FALSE  TRUE
>
> H.
>
>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>
>> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=YfPp2NbGMLV4frEpzG4QQFssqMnld91RlQHDdWcvFtw&s=-KVWCgOZsuCGKiZ7aXq4jhZBw97MrEzg19X8yFD60l8&e=
>> PLEASE do read the posting guide
>> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=YfPp2NbGMLV4frEpzG4QQFssqMnld91RlQHDdWcvFtw&s=HGLgncA6cBilW_DkIzjBEizqo1AmvlshmOHQr4td1vc&e=
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> --
> Herv? Pag?s
>
> Program in Computational Biology
> Division of Public Health Sciences
> Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N, M1-B514
> P.O. Box 19024
> Seattle, WA 98109-1024
>
> E-mail: hpages at fredhutch.org
> Phone:  (206) 667-5791
> Fax:    (206) 667-1319


From paul at stat.auckland.ac.nz  Mon Jul 24 01:03:52 2017
From: paul at stat.auckland.ac.nz (Paul Murrell)
Date: Mon, 24 Jul 2017 11:03:52 +1200
Subject: [R] [FORGED] Re:  par(mfrow) for heatmap plots
In-Reply-To: <8A788C74-0397-4DD1-A935-3FB91C28D953@dcn.davis.ca.us>
References: <CAEQKoCGC8M5=YeD+RSqQK28GxAAy8RzyFrVzWyYLb4q54A2Pvw@mail.gmail.com>
 <8A788C74-0397-4DD1-A935-3FB91C28D953@dcn.davis.ca.us>
Message-ID: <426a2bd8-efdb-7de3-f391-9eb66f998764@stat.auckland.ac.nz>

Hi

If you are really wedded to heatmap(), you could also use 
'gridGraphics', something like this ...

library(gridGraphics)
grid.newpage()
pushViewport(viewport(0, .5, .5, .5, just=c("left", "bottom")))
grid.echo(function() { heatmap(test) }, newpage=FALSE)
popViewport()
pushViewport(viewport(.5, 0, .5, .5, just=c("left", "bottom")))
grid.echo(function() { heatmap(test) }, newpage=FALSE)
popViewport()

Paul

On 24/07/17 01:12, Jeff Newmiller wrote:
> The answer is "don't do that" because that function abuses par. Use lattice or ggplot2 with grid graphics to plot multiple heatmaps.
> 
> https://stackoverflow.com/questions/15114347/to-display-two-heatmaps-in-same-pdf-side-by-side-in-r
> 

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From drjimlemon at gmail.com  Mon Jul 24 01:56:11 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Mon, 24 Jul 2017 09:56:11 +1000
Subject: [R] R: How to multiplying y-axis ticks value by 100?
In-Reply-To: <1500777961.295534354@f433.i.mail.ru>
References: <1500777961.295534354@f433.i.mail.ru>
Message-ID: <CA+8X3fWN+vFGZduvsCBS6t_sDQrO_mXcGntSk+tqubpybw-OQw@mail.gmail.com>

Hi Nic,
Have a look at axis.mult in the plotrix package.

Jim


On Sun, Jul 23, 2017 at 12:46 PM, iPad via R-help <r-help at r-project.org> wrote:
> R: how multiplying y-axis ticks value by 100 (without put the % symbol next to the number) here:
> plot (CI.overall, curvlab=c("Discharge", "Death"), xlab="Days", las=1)
> P.S. So instead 0.00, 0.20 etc. the 0, 20 etc.
> Thank you in advance, Nic
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From drjimlemon at gmail.com  Mon Jul 24 05:17:10 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Mon, 24 Jul 2017 13:17:10 +1000
Subject: [R] axis() after image.plot() does not work except if points()
 is inserted between
In-Reply-To: <0981fda7-811d-3595-abbb-f470bc2459c6@yahoo.fr>
References: <0981fda7-811d-3595-abbb-f470bc2459c6@yahoo.fr>
Message-ID: <CA+8X3fX+DzTyA+39SwZMGUDH_AJp5RDjtvqY7nuPvCFxNwMkyA@mail.gmail.com>

Hi marc,
Try:

par("usr")

before and after the call to points and see if it changes.

Jim


On Sat, Jul 22, 2017 at 12:05 AM, Marc Girondot via R-help
<r-help at r-project.org> wrote:
> It is known (several discussions on internet) that axis() cannot be used
> after fields:::image.plot() (axis() shows nothing).
>
> However, if points(1.5, 1.5, type="p") is inserted before the axis()
> finctions, it works.
>
> I have investigated what points(1.5, 1.5, type="p") is doing to allow axis
> to work and I don't find a solution. par() options are identical (p1 and p2
> are identical).
>
> Has someone a solution ?
>
> Thanks
>
> Marc
>
> library(fields)
> p0 <- par(no.readonly=TRUE)
> image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>            ylab="Columns", cex.lab = 0.5, zlim=c(min(D, na.rm=TRUE),max(D,
> na.rm=TRUE)),
>            las=1, axes=FALSE)
> p1 <- par(no.readonly=TRUE)
>
> # if you remove this points() function, axis will show nothing.
>
> points(1.5, 1.5, type="p")
> p2 <- par(no.readonly=TRUE)
>
> ##########
> axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
> axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1,
> cex.axis=0.5)
>
> identical(p1, p2)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From chocold12 at gmail.com  Mon Jul 24 02:38:50 2017
From: chocold12 at gmail.com (lily li)
Date: Sun, 23 Jul 2017 18:38:50 -0600
Subject: [R] about installing smwrGraphs package
In-Reply-To: <1C3FFF5F-DF46-48DC-81FB-306C9C831223@gmail.com>
References: <CAN5afy-9+BsSJnby=3hnsJtdwTy+pc4y6QeGuf-fBkDQHOZsEw@mail.gmail.com>
 <a767433c-ed11-ed67-d67d-f50544b5eba4@statistik.tu-dortmund.de>
 <1C3FFF5F-DF46-48DC-81FB-306C9C831223@gmail.com>
Message-ID: <CAN5afy_tGc=p4u5y8vx10OoqOQDtZgkQ7_kJLs5x+QJP_Rw9Lw@mail.gmail.com>

It is working now. I don't know where's the problem. thanks for your help.

On Sun, Jul 23, 2017 at 12:33 PM, peter dalgaard <pdalgd at gmail.com> wrote:

>
> > On 23 Jul 2017, at 18:31 , Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
> >
> >
> >
> > On 23.07.2017 05:28, lily li wrote:
> >> Hi R users,
> >> I'm trying to install the package, but got the error and don't know how
> to
> >> fix it. Can anyone help me? Thanks very much.
> >> install.packages("smwrGraphs", repos=c("http://owi.usgs.gov/R","
> >
> > I guess "http://owi.usgs.gov/R" does not provide standard repositories
> for R?
>
> Possibly, but this seems to work for me (on a Mac):
>
> install.packages("smwrGraphs", repos=c("https://owi.usgs.gov/R",
> CRAN="https://cloud.r-project.org"), dependencies = TRUE)
>
> Note: (a) HTTPS: (b) standard CRAN repo (cran.us does not do HTTPS??) (c)
> no newline in URL. Not sure that the named form is necessary, and things
> seem to work with plain HTTP too, but that is bad form.
>
> -pd
>
>
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> >
> >> http://cran.us.r-project.org"), dependencies = TRUE)
> >> Error in install.packages : Line starting '<html> ...' is malformed!
> >>      [[alternative HTML version deleted]]
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From marc_grt at yahoo.fr  Mon Jul 24 09:35:06 2017
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Mon, 24 Jul 2017 09:35:06 +0200
Subject: [R] axis() after image.plot() does not work except if points()
 is inserted between
In-Reply-To: <CA+8X3fX+DzTyA+39SwZMGUDH_AJp5RDjtvqY7nuPvCFxNwMkyA@mail.gmail.com>
References: <0981fda7-811d-3595-abbb-f470bc2459c6@yahoo.fr>
 <CA+8X3fX+DzTyA+39SwZMGUDH_AJp5RDjtvqY7nuPvCFxNwMkyA@mail.gmail.com>
Message-ID: <31fa883f-a6f9-c9c9-0cea-1c9ada850ebc@yahoo.fr>

Thanks for the proposition. As you see bellow, par("usr") is the same 
before and after the points() (the full code is bellow):
....
 > par("usr")
[1] -0.2500000  1.2500000 -0.1666667  1.1666667
 > # if you remove this points() function, axis will show nothing.
 >
 > points(1.5, 1.5, type="p")
 > p2 <- par(no.readonly=TRUE)
 > par("usr")
[1] -0.2500000  1.2500000 -0.1666667  1.1666667
...

I can reproduce it in Ubuntu and MacosX R Gui and Rstudio (R 3.4.1).

Marc

Here is the code:
library(fields)
par(mar=c(5,4.5,4,7))
D <- matrix(c(10, 20, 25, 30, 12, 22, 32, 35, 13, 25, 38, 40), nrow=3)

p0 <- par(no.readonly=TRUE)
image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
            ylab="Columns", cex.lab = 0.5, zlim=c(min(D, na.rm=TRUE),max(D,
na.rm=TRUE)),
            las=1, axes=FALSE)
p1 <- par(no.readonly=TRUE)

par("usr")
par("xpd")

# if you remove this points() function, axis will show nothing.

points(1.5, 1.5, type="p")
p2 <- par(no.readonly=TRUE)
par("usr")
par("xpd")

##########
axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1,
      cex.axis=0.5)

identical(p1, p2)




Le 24/07/2017 ? 05:17, Jim Lemon a ?crit :
> Hi marc,
> Try:
>
> par("usr")
>
> before and after the call to points and see if it changes.
>
> Jim
>
>
> On Sat, Jul 22, 2017 at 12:05 AM, Marc Girondot via R-help
> <r-help at r-project.org> wrote:
>> It is known (several discussions on internet) that axis() cannot be used
>> after fields:::image.plot() (axis() shows nothing).
>>
>> However, if points(1.5, 1.5, type="p") is inserted before the axis()
>> finctions, it works.
>>
>> I have investigated what points(1.5, 1.5, type="p") is doing to allow axis
>> to work and I don't find a solution. par() options are identical (p1 and p2
>> are identical).
>>
>> Has someone a solution ?
>>
>> Thanks
>>
>> Marc
>>
>> library(fields)
>> p0 <- par(no.readonly=TRUE)
>> image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>>             ylab="Columns", cex.lab = 0.5, zlim=c(min(D, na.rm=TRUE),max(D,
>> na.rm=TRUE)),
>>             las=1, axes=FALSE)
>> p1 <- par(no.readonly=TRUE)
>>
>> # if you remove this points() function, axis will show nothing.
>>
>> points(1.5, 1.5, type="p")
>> p2 <- par(no.readonly=TRUE)
>>
>> ##########
>> axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
>> axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1,
>> cex.axis=0.5)
>>
>> identical(p1, p2)
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From kmoreho1 at swarthmore.edu  Mon Jul 24 14:23:57 2017
From: kmoreho1 at swarthmore.edu (Kirsten Morehouse)
Date: Mon, 24 Jul 2017 08:23:57 -0400
Subject: [R] Ifelse statements and combining columns
Message-ID: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>

Hi everyone,

I'm having some trouble with my ifelse statements.

I'm trying to put 12 conditions within 3 groups. Here is the code I have so
far:

dat$cond <- ifelse(test = dat$cond == "cond1" | dat$cond == "cond2"  |
dat$cond == "cond3" dat$cond == "cond4"
                   yes = "Uniform"
                   no = ifelse(test = dat$cond == "cond5" | dat$cond ==
"cond6") | dat$cond == "cond7" dat$cond == "cond8"
                   yes = "Biased Low"
                   no = "Biased High" )


I keep getting an error statement about an invalid ). I've tried several
permutations to fix, but without luck.

Also, can anyone help me bind columns together? I've tried:

 cbind[, c(15:25)] but get the error:  object of type 'closure' is not
subsettable

Thank you in advance!

Kirsten

	[[alternative HTML version deleted]]


From jfox at mcmaster.ca  Mon Jul 24 14:29:10 2017
From: jfox at mcmaster.ca (Fox, John)
Date: Mon, 24 Jul 2017 12:29:10 +0000
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
In-Reply-To: <28715_1500835938_v6NIqHSL018589_ol2far$fls$1@blaine.gmane.org>
References: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>
 <32062_1500788018_v6N5Xb8H027269_ol18jc$ifo$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D26C@FHSDB4H16-2.csu.mcmaster.ca>
 <28715_1500835938_v6NIqHSL018589_ol2far$fls$1@blaine.gmane.org>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC83669D6C3@FHSDB4H16-2.csu.mcmaster.ca>

Dear Lu Wei,

> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Lu Wei
> Sent: Sunday, July 23, 2017 11:28 AM
> To: r-help at stat.math.ethz.ch
> Subject: Re: [R] cannot use package RcmdrPlugin.plotByGroup
> 
> On 2017-7-23 20:41, Fox, John wrote:> ...
> > The Rcmdr uses the qqPlot() function in the car package. In the next
> > version of the car package, qqPlot() will be able to plot by groups,
> > and when that happens, I'll incorporate the feature in the Rcmdr.
> >
> > More generally, however, if you learn to write R commands you'll be
> > able to make customized plots. It would be easy to duplicate the plots
> > that you show, for example.
> >
> >
> Thanks you for the suggestions. It seems I will use R often afterwards, so I will
> study the manuals and commands little by little. I do not reject the command
> line geek style, but the beginning steps and basic functions should be easy.
> Your Rcmdr offered this to new users; without it, I won't begin to learn and use
> R.
> 
> Your observations of my posted image are correct. So that is my expectation of
> grouped QQ plot. I hope it will come to Rcmdr soon. Also, thanks Google, I find
> a way to do that:
> http://www.sthda.com/english/wiki/ggplot2-qq-plot-quantile-quantile-graph-
> quick-start-guide-r-software-and-data-visualization
> That shape or color grouping in one chart is exactly what I need. Although I
> don't quite understand the commands used, I think I can copy and modify the
> commands a little to do my work. Could you incorporate it in the Rcmdr?
> Maybe consider it in your spare time.

As I already said, qqPlot() in the next version of the car package will be able to plot by groups; the graphs will be in separate panels, will have a common y-axis by default, and will show a confidence envelope. They will not look like the graphs that you created, and as a general matter the Rcmdr doesn't provide customized graphs, which are much easier to draw using R commands than in a GUI. This addition will not happen soon.

Best,
 John

> 
> --
> Best regards,
> Lu Wei
> PGP key ID: 0x A12F EF75 92CC E1EA
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ruipbarradas at sapo.pt  Mon Jul 24 14:52:00 2017
From: ruipbarradas at sapo.pt (Rui Barradas)
Date: Mon, 24 Jul 2017 13:52:00 +0100
Subject: [R] Ifelse statements and combining columns
In-Reply-To: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
References: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
Message-ID: <5975ED70.8030500@sapo.pt>

Hello,

Your ifelse statement is a mess. I cannot make sense of it. Let me try 
to explain where I've lost it.

dat$cond <- ifelse(test = dat$cond == "cond1"
This is already very bad, do you mean dat$cond == "cond1" ?
Maybe you mean that condition OR the others below, but then there's one 
'|' missing, just before the last condition.

| dat$cond == "cond2"  |
    dat$cond == "cond3" dat$cond == "cond4"

After this your code should have a comma. It's missing.
Maybe you can tell us in plain english the conditions your ifelse should 
process.

Hope this helps,

Rui Barradas

Em 24-07-2017 13:23, Kirsten Morehouse escreveu:
> Hi everyone,
>
> I'm having some trouble with my ifelse statements.
>
> I'm trying to put 12 conditions within 3 groups. Here is the code I have so
> far:
>
> dat$cond <- ifelse(test = dat$cond == "cond1" | dat$cond == "cond2"  |
> dat$cond == "cond3" dat$cond == "cond4"
>                     yes = "Uniform"
>                     no = ifelse(test = dat$cond == "cond5" | dat$cond ==
> "cond6") | dat$cond == "cond7" dat$cond == "cond8"
>                     yes = "Biased Low"
>                     no = "Biased High" )
>
>
> I keep getting an error statement about an invalid ). I've tried several
> permutations to fix, but without luck.
>
> Also, can anyone help me bind columns together? I've tried:
>
>   cbind[, c(15:25)] but get the error:  object of type 'closure' is not
> subsettable
>
> Thank you in advance!
>
> Kirsten
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewmil at dcn.davis.ca.us  Mon Jul 24 14:57:58 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Mon, 24 Jul 2017 05:57:58 -0700
Subject: [R] Ifelse statements and combining columns
In-Reply-To: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
References: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
Message-ID: <550ACC59-9CE0-400C-8EA6-A523BC195FE7@dcn.davis.ca.us>

Not a reproducible example, so a bit of guessing here, but

a) don't try to assign results to variables inside the ifelse. That is,  remove all the single-equals signs and "test" variables. If you really need to conditionally assign variables then use "if"... but chances are good you don't need that. 

b) "closure" is effectively another word for"function"... functions like cbind are called with argument lists delimited by parentheses, not brackets, and having a missing argument to the cbind function will be of no use. 
-- 
Sent from my phone. Please excuse my brevity.

On July 24, 2017 5:23:57 AM PDT, Kirsten Morehouse <kmoreho1 at swarthmore.edu> wrote:
>Hi everyone,
>
>I'm having some trouble with my ifelse statements.
>
>I'm trying to put 12 conditions within 3 groups. Here is the code I
>have so
>far:
>
>dat$cond <- ifelse(test = dat$cond == "cond1" | dat$cond == "cond2"  |
>dat$cond == "cond3" dat$cond == "cond4"
>                   yes = "Uniform"
>                   no = ifelse(test = dat$cond == "cond5" | dat$cond ==
>"cond6") | dat$cond == "cond7" dat$cond == "cond8"
>                   yes = "Biased Low"
>                   no = "Biased High" )
>
>
>I keep getting an error statement about an invalid ). I've tried
>several
>permutations to fix, but without luck.
>
>Also, can anyone help me bind columns together? I've tried:
>
> cbind[, c(15:25)] but get the error:  object of type 'closure' is not
>subsettable
>
>Thank you in advance!
>
>Kirsten
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From murdoch.duncan at gmail.com  Mon Jul 24 17:05:30 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 24 Jul 2017 11:05:30 -0400
Subject: [R] Ifelse statements and combining columns
In-Reply-To: <550ACC59-9CE0-400C-8EA6-A523BC195FE7@dcn.davis.ca.us>
References: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
 <550ACC59-9CE0-400C-8EA6-A523BC195FE7@dcn.davis.ca.us>
Message-ID: <2c1f0702-8a4c-eefa-ab32-9384875e3ea5@gmail.com>

On 24/07/2017 8:57 AM, Jeff Newmiller wrote:
> Not a reproducible example, so a bit of guessing here, but
>
> a) don't try to assign results to variables inside the ifelse. That is,  remove all the single-equals signs and "test" variables. If you really need to conditionally assign variables then use "if"... but chances are good you don't need that.

Those weren't assignments.  The arguments to ifelse() are named "test", 
"yes", and "no".

You're right though that the expressions were messed up.  Commas are 
missing between arguments, and the parentheses don't appear to be in the 
right place.

One suggestion for Kirsten:  instead of

dat$cond == "cond1" | dat$cond == "cond2"  |
dat$cond == "cond3" | dat$cond == "cond4"

it is shorter and a bit clearer to write

dat$cond %in% c("cond1", "cond2", "cond3", "cond4")

or maybe even

dat$cond %in% paste0("cond", 1:4)

Duncan Murdoch

> b) "closure" is effectively another word for"function"... functions like cbind are called with argument lists delimited by parentheses, not brackets, and having a missing argument to the cbind function will be of no use.
>


From luweitest at gmail.com  Mon Jul 24 14:49:43 2017
From: luweitest at gmail.com (Lu Wei)
Date: Mon, 24 Jul 2017 20:49:43 +0800
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
In-Reply-To: <CAGxFJbSS86cSfovPFhtDYf=gW15cgRbBTtE0XP=Gp_wyob9PUg@mail.gmail.com>
References: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>
 <32062_1500788018_v6N5Xb8H027269_ol18jc$ifo$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D26C@FHSDB4H16-2.csu.mcmaster.ca>
 <ol2far$fls$1@blaine.gmane.org>
 <CAGxFJbSS86cSfovPFhtDYf=gW15cgRbBTtE0XP=Gp_wyob9PUg@mail.gmail.com>
Message-ID: <ol4qdo$p9v$1@blaine.gmane.org>

On 2017-7-24 3:11, Bert Gunter wrote:
> 
> !!!
> See here (or search on your own) for basic R tutorials to help you begin:
> 
> https://www.rstudio.com/online-learning/#R
> 
Very informative page, thank you.

-- 
Regards,
Lu Wei
PGP key ID: 0x A12F EF75 92CC E1EA


From koustavpal.devel at gmail.com  Mon Jul 24 15:31:56 2017
From: koustavpal.devel at gmail.com (Koustav Pal)
Date: Mon, 24 Jul 2017 15:31:56 +0200
Subject: [R] Ifelse statements and combining columns
In-Reply-To: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
References: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
Message-ID: <CAGgS1=mHFhkBhJ0-5+9M9pCt_b=SaWfKmBr5NVn6P4zA=QMzZQ@mail.gmail.com>

That ifelse statement is a mess, it is missing brackets, comma separators
between arguments and & or | between conditions. The bracket error points
towards the invalid bracket you had in the second ifelse since it expects
and yes and a no argument alongside conditions.

ifelse(test = (dat$cond == "cond1" | dat$cond == "cond2"  | dat$cond ==
"cond3" | dat$cond == "cond4"),yes = "Uniform" , no =
ifelse(test = (dat$cond == "cond5" | dat$cond =="cond6" | dat$cond ==
"cond7" | dat$cond == "cond8"), yes = "Biased Low" ,no = "Biased High"))

This should be what you want.


cbind is a function, therefor it is not subsettable.

if you are passing 2 arguments to cbind then cbind takes the form
cbind(c(1:n),c(1:n)) and constructs a matrix of dimension 2 x n. For
unequal vectors the shorter vector will be recycled.


On 24 July 2017 at 14:23, Kirsten Morehouse <kmoreho1 at swarthmore.edu> wrote:

> Hi everyone,
>
> I'm having some trouble with my ifelse statements.
>
> I'm trying to put 12 conditions within 3 groups. Here is the code I have so
> far:
>
> dat$cond <- ifelse(test = dat$cond == "cond1" | dat$cond == "cond2"  |
> dat$cond == "cond3" dat$cond == "cond4"
>                    yes = "Uniform"
>                    no = ifelse(test = dat$cond == "cond5" | dat$cond ==
> "cond6") | dat$cond == "cond7" dat$cond == "cond8"
>                    yes = "Biased Low"
>                    no = "Biased High" )
>
>
> I keep getting an error statement about an invalid ). I've tried several
> permutations to fix, but without luck.
>
> Also, can anyone help me bind columns together? I've tried:
>
>  cbind[, c(15:25)] but get the error:  object of type 'closure' is not
> subsettable
>
> Thank you in advance!
>
> Kirsten
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From luweitest at gmail.com  Mon Jul 24 15:57:08 2017
From: luweitest at gmail.com (Lu Wei)
Date: Mon, 24 Jul 2017 21:57:08 +0800
Subject: [R] cannot use package RcmdrPlugin.plotByGroup
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC83669D6C3@FHSDB4H16-2.csu.mcmaster.ca>
References: <11733_1500760543_v6MLtf3G025589_okvvm4$ssh$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D16C@FHSDB4H16-2.csu.mcmaster.ca>
 <32062_1500788018_v6N5Xb8H027269_ol18jc$ifo$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D26C@FHSDB4H16-2.csu.mcmaster.ca>
 <28715_1500835938_v6NIqHSL018589_ol2far$fls$1@blaine.gmane.org>
 <ACD1644AA6C67E4FBD0C350625508EC83669D6C3@FHSDB4H16-2.csu.mcmaster.ca>
Message-ID: <ol4uc0$4e9$1@blaine.gmane.org>

On 2017-7-24 20:29, Fox, John wrote:
> ... As I already said, qqPlot() in the next version of the car
> package will be able to plot by groups; the graphs will be in
> separate panels, will have a common y-axis by default, and will show
> a confidence envelope. They will not look like the graphs that you
> created, and as a general matter the Rcmdr doesn't provide customized
> graphs, which are much easier to draw using R commands than in a GUI.
> This addition will not happen soon.
> 
Understood. That will be a good feature!

-- 
Regards,
Lu Wei
PGP key ID: 0x A12F EF75 92CC E1EA


From mashranga at yahoo.com  Mon Jul 24 15:59:13 2017
From: mashranga at yahoo.com (Mohammad Tanvir Ahamed)
Date: Mon, 24 Jul 2017 13:59:13 +0000 (UTC)
Subject: [R] Compare output of Violin plot from ggplot2 and vioplot . Need
 Explanation
References: <1495229087.3919529.1500904753072.ref@mail.yahoo.com>
Message-ID: <1495229087.3919529.1500904753072@mail.yahoo.com>

Hi,?

I have made violin plot with both ggplot2 and vioplot package with same data.?
The results and code are as follows.?

################### ?Loading data?
data.melt <- dget("https://gubox.box.com/shared/static/rirth0eym114afwyjxwe128sjzipzdym.txt")

################### ?Violin plot by library(vioplot)
library(vioplot)
data.use_11<- data.melt$value[data.melt$ident == 0]
data.use_12<- data.melt$value[data.melt$ident == 1]
data.use_13<- data.melt$value[data.melt$ident == 2]
data.use_14<- data.melt$value[data.melt$ident == 3]
data.use_15<- data.melt$value[data.melt$ident == 4]
data.use_16<- data.melt$value[data.melt$ident == 5]
data.use_17<- data.melt$value[data.melt$ident == 6]
data.use_18<- data.melt$value[data.melt$ident == 7]
data.use_19<- data.melt$value[data.melt$ident == 8]
data.use_110<- data.melt$value[data.melt$ident == 9]
vioplot(data.use_11,data.use_12,data.use_13,data.use_14,data.use_15,
? ? ? ? ? ? ? ?data.use_16, data.use_17,data.use_18,data.use_19,data.use_110, h = 0.2, drawRect = FALSE)
## Violin plot?
https://i.stack.imgur.com/0taf3.jpg



##################### Violin plot by library(ggplot2)
library(ggplot2)
p ?<- ggplot(data.melt,aes(factor(ident),value))
p2 <- p + geom_violin(scale="width",adjust=adjust.use,trim=TRUE,aes(fill=factor(ident)))
p2
## Violin plot?
https://i.stack.imgur.com/gg6Sh.jpg



##################### Questions
In those both figure, scale on x-axis (1 to 9 and 0 to 9) both are same . They are the same event. ?
I was expecting the above 2 figures should be same (Same density presentation). But why the density representation of both picture are different ?
Can any one please explain ??

I thought , scale parameter in geom_violin (ggplot2) plot could be a reason and ?the explanation of scale parameter said in the package. But i am not clear what they are saying

scale :?
if "area" (default), all violins have the same area (before trimming the tails). If "count", areas are scaled proportionally to the number of observations. If "width", all violins have the same maximum width.

Can any one please explain what this scale parameter do and why two plot is different ???? ?Thanks !!?


Regards.............
Tanvir Ahamed 
Stockholm, Sweden???? |??mashranga at yahoo.com 
	[[alternative HTML version deleted]]


From marco.prado.bs at gmail.com  Mon Jul 24 20:49:36 2017
From: marco.prado.bs at gmail.com (Marco Silva)
Date: Mon, 24 Jul 2017 15:49:36 -0300
Subject: [R] I have been unable to run R from within QGIS on my Mac
In-Reply-To: <CAAXTYkytFL7Dik78xT28+aDGDC1chkQRiaUvDx5W7r3DrxixWA@mail.gmail.com>
References: <CAAXTYkytFL7Dik78xT28+aDGDC1chkQRiaUvDx5W7r3DrxixWA@mail.gmail.com>
Message-ID: <1500922073-sup-4640@ubatuba>

Excerpts from Sagar Dhiman's message of 2017-07-23 18:19:01 +0530:
> I have tried to run R from within QGIS, But it show error "Missing
> dependency.This algorithm cannot be run :-(
> 
> This algorithm requires R to be run.Unfortunately, it seems that R is
> not installedin your system, or it is not correctly configured to be
> used from QGIS
> Click here to know more about how to install and configure R to be
> used with QGIS"
> 
>     [[alternative HTML version deleted]]
> 

Maybe you should ask in a QGIS forum, your QGIS question. But, just
maybe.

-- 
Marco Arthur @ (M)arco Creatives


From r-subscribe at mail.ru  Mon Jul 24 22:06:01 2017
From: r-subscribe at mail.ru (=?UTF-8?B?VGVk?=)
Date: Mon, 24 Jul 2017 23:06:01 +0300
Subject: [R]
 =?utf-8?q?R=3A_How_to_multiplying_y-axis_ticks_value_by_100?=
 =?utf-8?q?=3F?=
In-Reply-To: <CA+8X3fWN+vFGZduvsCBS6t_sDQrO_mXcGntSk+tqubpybw-OQw@mail.gmail.com>
References: <1500777961.295534354@f433.i.mail.ru>
 <CA+8X3fWN+vFGZduvsCBS6t_sDQrO_mXcGntSk+tqubpybw-OQw@mail.gmail.com>
Message-ID: <1500926761.389626817@f510.i.mail.ru>


Many thanks, Jim!!!
----
>Jim Lemon < drjimlemon at gmail.com >:
>Have a look at axis.mult in the plotrix package.
>Jim
----
>>iPad via R-help <  r-help at r-project.org > wrote:
>> How to multiplying y-axis ticks value by 100 (without put the % symbol next to the number) here:
>> plot (CI.overall, curvlab=c("Discharge", "Death"), xlab="Days", las=1)
>> P.S. So instead 0.00, 0.20 etc. the 0, 20 etc.
?______________________________________________
>>  R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>  https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide  http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


--

	[[alternative HTML version deleted]]


From jltalley57 at gmail.com  Tue Jul 25 01:17:03 2017
From: jltalley57 at gmail.com (Jack Talley)
Date: Mon, 24 Jul 2017 19:17:03 -0400
Subject: [R] Loading Rcmdr
Message-ID: <CAPaNK7U3ctOmE=8LM173kkVhD3hBhF2fUM8m0Y2Ev_6b2CG0hw@mail.gmail.com>

With the lastest version of R 3.4.1 I have not been able to loard Rcmdr.
Advice please.

Thank you,

Jack Talley, PhD

	[[alternative HTML version deleted]]


From msharp at TxBiomed.org  Tue Jul 25 06:50:49 2017
From: msharp at TxBiomed.org (Mark Sharp)
Date: Tue, 25 Jul 2017 04:50:49 +0000
Subject: [R] Loading Rcmdr
In-Reply-To: <CAPaNK7U3ctOmE=8LM173kkVhD3hBhF2fUM8m0Y2Ev_6b2CG0hw@mail.gmail.com>
References: <CAPaNK7U3ctOmE=8LM173kkVhD3hBhF2fUM8m0Y2Ev_6b2CG0hw@mail.gmail.com>
Message-ID: <DC7D5920-FE4D-4962-A9D4-8A8DDBCC73C0@txbiomed.org>

Jack,

I do not use Rcmdr, but I installed the binary package version 2.3-2. It came right up when I then ran the following at the prompt (console output is appended without edits):
> sessionInfo();library("Rcmdr");sessionInfo()
R version 3.4.1 (2017-06-30)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Sierra 10.12.6

Matrix products: default
BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.4.1
Loading required package: splines
Loading required package: RcmdrMisc
Loading required package: car
Loading required package: sandwich

Rcmdr Version 2.3-2

R version 3.4.1 (2017-06-30)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Sierra 10.12.6

Matrix products: default
BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Rcmdr_2.3-2     RcmdrMisc_1.0-5 sandwich_2.3-4  car_2.1-5

loaded via a namespace (and not attached):
 [1] zoo_1.8-0           lattice_0.20-35     tcltk_3.4.1         colorspace_1.3-2
 [5] htmltools_0.3.6     mgcv_1.8-17         base64enc_0.1-3     relimp_1.0-5
 [9] survival_2.41-3     rlang_0.1.1.9000    e1071_1.6-8         nloptr_1.0.4
[13] foreign_0.8-69      RColorBrewer_1.1-2  readxl_1.0.0        plyr_1.8.4
[17] stringr_1.2.0       MatrixModels_0.4-1  cellranger_1.1.0    munsell_0.4.3
[21] gtable_0.2.0        htmlwidgets_0.9     latticeExtra_0.6-28 knitr_1.16
[25] SparseM_1.77        class_7.3-14        quantreg_5.33       pbkrtest_0.4-7
[29] parallel_3.4.1      htmlTable_1.9       Rcpp_0.12.12        acepack_1.4.1
[33] tcltk2_1.2-11       scales_0.4.1        backports_1.1.0     checkmate_1.8.3
[37] Hmisc_4.0-3         abind_1.4-5         lme4_1.1-13         gridExtra_2.2.1
[41] ggplot2_2.2.1       digest_0.6.12       stringi_1.1.5       grid_3.4.1
[45] tools_3.4.1         magrittr_1.5        lazyeval_0.2.0      tibble_1.3.3
[49] Formula_1.2-2       cluster_2.0.6       MASS_7.3-47         Matrix_1.2-10
[53] data.table_1.10.4   minqa_1.2.4         rpart_4.1-11        nnet_7.3-12
[57] nlme_3.1-131        compiler_3.4.1
> R. Mark Sharp, Ph.D.
msharp at TxBiomed.org





> On Jul 24, 2017, at 6:17 PM, Jack Talley <jltalley57 at gmail.com> wrote:
>
> With the lastest version of R 3.4.1 I have not been able to loard Rcmdr.
> Advice please.
>
> Thank you,
>
> Jack Talley, PhD
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

CONFIDENTIALITY NOTICE: This e-mail and any files and/or...{{dropped:10}}


From jdnewmil at dcn.davis.ca.us  Tue Jul 25 06:58:04 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Mon, 24 Jul 2017 21:58:04 -0700
Subject: [R] Loading Rcmdr
In-Reply-To: <CAPaNK7U3ctOmE=8LM173kkVhD3hBhF2fUM8m0Y2Ev_6b2CG0hw@mail.gmail.com>
References: <CAPaNK7U3ctOmE=8LM173kkVhD3hBhF2fUM8m0Y2Ev_6b2CG0hw@mail.gmail.com>
Message-ID: <EB634241-A698-48BF-88A3-ABF8885BDFF6@dcn.davis.ca.us>

I don't know anything about Rcmdr, but perhaps you are forgetting or never knew that each x.y minor version starts a new package library,  so any packages you had installed in the preceding minor version have to be reinstalled.
-- 
Sent from my phone. Please excuse my brevity.

On July 24, 2017 4:17:03 PM PDT, Jack Talley <jltalley57 at gmail.com> wrote:
>With the lastest version of R 3.4.1 I have not been able to loard
>Rcmdr.
>Advice please.
>
>Thank you,
>
>Jack Talley, PhD
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Tue Jul 25 07:25:00 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Mon, 24 Jul 2017 22:25:00 -0700
Subject: [R] Precision of values > 53 bits
In-Reply-To: <11EF5076-7BB6-40D9-B05C-54B067844DB0@gmail.com>
References: <50EE9EC9.80206@atsec.com>
 <A4E5A0B016B8CB41A485FC629B633CED4A3168E2F6@GOLD.corp.lgc-group.com>
 <11EF5076-7BB6-40D9-B05C-54B067844DB0@gmail.com>
Message-ID: <B3741104-B2DB-4CC4-B998-9A7D9EA0B079@dcn.davis.ca.us>

What an impressively zombified thread. Though wondering how 53 bits were supposed to fit into 32 might just warrant revivification.
-- 
Sent from my phone. Please excuse my brevity.

On July 20, 2017 5:33:34 AM PDT, peter dalgaard <pdalgd at gmail.com> wrote:
>
>> On 10 Jan 2013, at 15:56 , S Ellison <S.Ellison at lgcgroup.com> wrote:
>> 
>> 
>> 
>>> I am working with large numbers and identified that R looses 
>>> precision for such high numbers.
>> Yes. R uses standard 32-bit double precision.
>
>
>Well, for large values of 32... such as 64.


From petr.pikal at precheza.cz  Tue Jul 25 09:01:11 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Tue, 25 Jul 2017 07:01:11 +0000
Subject: [R] Ifelse statements and combining columns
In-Reply-To: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
References: <CAN1UO=v2SjHYZVhse7tRTR6boiuDJuw4RgDVRG8OfyvCCO6YvA@mail.gmail.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA7312@SRVEXCHCM301.precheza.cz>

Hi

I may be completely wrong, but if your data was factor you could easily change its levels without any ifelse stuff.

Some sample data
> dat<-factor(paste("cond", sample(1:7, 20, replace=T), sep=""))
> dat
 [1] cond2 cond1 cond7 cond5 cond7 cond7 cond3 cond4 cond2 cond4 cond2 cond2
[13] cond6 cond2 cond3 cond6 cond2 cond4 cond6 cond4
Levels: cond1 cond2 cond3 cond4 cond5 cond6 cond7

Changing levels
> levels(dat)<- c(rep("uniform", 4), rep("BiasedLow",2), rep("BisaedHigh", 2))
> dat
 [1] uniform    uniform    BisaedHigh BiasedLow  BisaedHigh BisaedHigh
 [7] uniform    uniform    uniform    uniform    uniform    uniform
[13] BiasedLow  uniform    uniform    BiasedLow  uniform    uniform
[19] BiasedLow  uniform
Levels: uniform BiasedLow BisaedHigh

Cheers
Petr


> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Kirsten
> Morehouse
> Sent: Monday, July 24, 2017 2:24 PM
> To: R-help <r-help at r-project.org>
> Subject: [R] Ifelse statements and combining columns
>
> Hi everyone,
>
> I'm having some trouble with my ifelse statements.
>
> I'm trying to put 12 conditions within 3 groups. Here is the code I have so
> far:
>
> dat$cond <- ifelse(test = dat$cond == "cond1" | dat$cond == "cond2"  |
> dat$cond == "cond3" dat$cond == "cond4"
>                    yes = "Uniform"
>                    no = ifelse(test = dat$cond == "cond5" | dat$cond ==
> "cond6") | dat$cond == "cond7" dat$cond == "cond8"
>                    yes = "Biased Low"
>                    no = "Biased High" )
>
>
> I keep getting an error statement about an invalid ). I've tried several
> permutations to fix, but without luck.
>
> Also, can anyone help me bind columns together? I've tried:
>
>  cbind[, c(15:25)] but get the error:  object of type 'closure' is not subsettable
>
> Thank you in advance!
>
> Kirsten
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From pdalgd at gmail.com  Tue Jul 25 12:03:00 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Tue, 25 Jul 2017 12:03:00 +0200
Subject: [R] Precision of values > 53 bits
In-Reply-To: <B3741104-B2DB-4CC4-B998-9A7D9EA0B079@dcn.davis.ca.us>
References: <50EE9EC9.80206@atsec.com>
 <A4E5A0B016B8CB41A485FC629B633CED4A3168E2F6@GOLD.corp.lgc-group.com>
 <11EF5076-7BB6-40D9-B05C-54B067844DB0@gmail.com>
 <B3741104-B2DB-4CC4-B998-9A7D9EA0B079@dcn.davis.ca.us>
Message-ID: <9FC8B3A7-74D1-4485-B25C-9DE1792853A3@gmail.com>

This got revived by a long-standing bug in Mail.app on Mac: If you sort mails newest-last, it may unpredictably scroll back, often by several years. If you happen to have a large mailbox with some old unread mails in it, say from a mailing list, and don't pay attention to the date....

-pd
 
> On 25 Jul 2017, at 07:25 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> What an impressively zombified thread. Though wondering how 53 bits were supposed to fit into 32 might just warrant revivification.
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> On July 20, 2017 5:33:34 AM PDT, peter dalgaard <pdalgd at gmail.com> wrote:
>> 
>>> On 10 Jan 2013, at 15:56 , S Ellison <S.Ellison at lgcgroup.com> wrote:
>>> 
>>> 
>>> 
>>>> I am working with large numbers and identified that R looses 
>>>> precision for such high numbers.
>>> Yes. R uses standard 32-bit double precision.
>> 
>> 
>> Well, for large values of 32... such as 64.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From maechler at stat.math.ethz.ch  Tue Jul 25 13:03:08 2017
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 25 Jul 2017 13:03:08 +0200
Subject: [R] axis() after image.plot() does not work except if points()
 is inserted between
In-Reply-To: <31fa883f-a6f9-c9c9-0cea-1c9ada850ebc@yahoo.fr>
References: <0981fda7-811d-3595-abbb-f470bc2459c6@yahoo.fr>
 <CA+8X3fX+DzTyA+39SwZMGUDH_AJp5RDjtvqY7nuPvCFxNwMkyA@mail.gmail.com>
 <31fa883f-a6f9-c9c9-0cea-1c9ada850ebc@yahoo.fr>
Message-ID: <22903.9580.641776.632203@stat.math.ethz.ch>

>>>>> Marc Girondot via R-help <r-help at r-project.org>
>>>>>     on Mon, 24 Jul 2017 09:35:06 +0200 writes:

    > Thanks for the proposition. As you see bellow, par("usr") is the same 
    > before and after the points() (the full code is bellow):
    > ....
    >> par("usr")
    > [1] -0.2500000  1.2500000 -0.1666667  1.1666667
    >> # if you remove this points() function, axis will show nothing.
    >> 
    >> points(1.5, 1.5, type="p")
    >> p2 <- par(no.readonly=TRUE)
    >> par("usr")
    > [1] -0.2500000  1.2500000 -0.1666667  1.1666667
    > ...

    > I can reproduce it in Ubuntu and MacosX R Gui and Rstudio (R 3.4.1).

    > Marc

    > Here is the code:
    > library(fields)
    > par(mar=c(5,4.5,4,7))
    > D <- matrix(c(10, 20, 25, 30, 12, 22, 32, 35, 13, 25, 38, 40), nrow=3)

    > p0 <- par(no.readonly=TRUE)
    > image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
    >           ylab="Columns", cex.lab = 0.5, 
    >           zlim=c(min(D, na.rm=TRUE),max(D, na.rm=TRUE)),
    >           las=1, axes=FALSE)
    > p1 <- par(no.readonly=TRUE)

    > par("usr")
    > par("xpd")

    > # if you remove this points() function, axis will show nothing.

    > points(1.5, 1.5, type="p")
    > p2 <- par(no.readonly=TRUE)
    > par("usr")
    > par("xpd")

    > ##########
    > axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
    > axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1,
    > cex.axis=0.5)

    > identical(p1, p2)

Have you ever carefully read the detailed help page about image.plot()?
   
I haven't, but a cursory reading already shows me that the
author of the function did this partly on purpose:

  > Side Effects:
  > 
  >      After exiting, the plotting region may be changed to make it
  >      possible to add more features to the plot. To be explicit,
  >      ?par()\$plt? may be changed to reflect a smaller plotting region
  >      that has accommodated room for the legend subplot.

Unfortunately, there it does _not_ mention the following :

>From looking at its code, and then re-reading parts of the help page,
I see that there is a 'graphics.reset' argument which you can
set to TRUE in such a case:

 image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
           ylab="Columns", cex.lab = 0.5, 
           zlim= range(D, na.rm=TRUE),
	   graphics.reset = TRUE, # <<<<< the solution
           las=1, axes=FALSE)

Also note that
     zlim = range(D ...)
is infinitely more elegant than
     zlim = c(min((D, ...), max(D, ...)))


Martin Maechler
ETH Zurich (and R core)


From aranjan1645 at gmail.com  Tue Jul 25 12:43:11 2017
From: aranjan1645 at gmail.com (Ashish Ranjan)
Date: Tue, 25 Jul 2017 16:13:11 +0530
Subject: [R] To Supporting graphpad prism in R,
	add external library to poratbleR
Message-ID: <CAA74hp4ArCu5500=kSmzygkE9Ten3Vu2DY57_68-CEhrJhEQ6g@mail.gmail.com>

Hi Team,

Please suggest me on below :-

1).are There any linux based library for dplyr and tidyr? I could find
these r-libraries for windows and Mac but not for linux. 2). is it possible
to add external library to portableR zip(http://nafiux.github.io/portableR/)
file if yes then how to add external library to poratbleR zip file?

In our application AWS lambda invoking the R-script by using portableR zip
file.we want to add new external dplyr library to this poratbleR zip file.


Thanks

Ashish Ranjan

	[[alternative HTML version deleted]]


From jfox at mcmaster.ca  Tue Jul 25 14:56:16 2017
From: jfox at mcmaster.ca (Fox, John)
Date: Tue, 25 Jul 2017 12:56:16 +0000
Subject: [R] Loading Rcmdr
In-Reply-To: <23946_1500957181_v6P4QaEN028833_CAPaNK7U3ctOmE=8LM173kkVhD3hBhF2fUM8m0Y2Ev_6b2CG0hw@mail.gmail.com>
References: <23946_1500957181_v6P4QaEN028833_CAPaNK7U3ctOmE=8LM173kkVhD3hBhF2fUM8m0Y2Ev_6b2CG0hw@mail.gmail.com>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC83669DACA@FHSDB4H16-2.csu.mcmaster.ca>

Dear Jack,

There's not enough information here to know what the problem might be. Please see < https://www.r-project.org/help.html>, in particular the section on asking for help, and follow the link to the posting guide.

At a minimum, explain what you did and what happened. It's generally informative to provide the results of Sys.info() and sessionInfo() .

Best,
 John

-----------------------------
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: socserv.mcmaster.ca/jfox



> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Jack Talley
> Sent: Monday, July 24, 2017 7:17 PM
> To: r-help at r-project.org
> Subject: [R] Loading Rcmdr
> 
> With the lastest version of R 3.4.1 I have not been able to loard Rcmdr.
> Advice please.
> 
> Thank you,
> 
> Jack Talley, PhD
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Tue Jul 25 15:39:04 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 25 Jul 2017 06:39:04 -0700
Subject: [R] To Supporting graphpad prism in R,
	add external library to poratbleR
In-Reply-To: <CAA74hp4ArCu5500=kSmzygkE9Ten3Vu2DY57_68-CEhrJhEQ6g@mail.gmail.com>
References: <CAA74hp4ArCu5500=kSmzygkE9Ten3Vu2DY57_68-CEhrJhEQ6g@mail.gmail.com>
Message-ID: <C856EDD4-CFE8-47CA-A0CA-842C304F7797@dcn.davis.ca.us>

1) Definitely yes. They are on CRAN. Just type

install.packages( c("dplyr", "tidyr" ) )

at the R console.

2) Don't know, but most likely the answer is yes. Since all R packages on Linux are compiled by R when installed, you either need to activate your virtual machine, compile the packages, and save the state for future use, or you have to build the package library on another compatible architecture and copy the library into the VM image. I suggest you read the portableR documentation and the R Installation and Administration manual. 
-- 
Sent from my phone. Please excuse my brevity.

On July 25, 2017 3:43:11 AM PDT, Ashish Ranjan <aranjan1645 at gmail.com> wrote:
>Hi Team,
>
>Please suggest me on below :-
>
>1).are There any linux based library for dplyr and tidyr? I could find
>these r-libraries for windows and Mac but not for linux. 2). is it
>possible
>to add external library to portableR
>zip(http://nafiux.github.io/portableR/)
>file if yes then how to add external library to poratbleR zip file?
>
>In our application AWS lambda invoking the R-script by using portableR
>zip
>file.we want to add new external dplyr library to this poratbleR zip
>file.
>
>
>Thanks
>
>Ashish Ranjan
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From jdnewmil at dcn.davis.ca.us  Tue Jul 25 17:02:31 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Tue, 25 Jul 2017 08:02:31 -0700
Subject: [R] To Supporting graphpad prism in R,
	add external library to poratbleR
In-Reply-To: <CAA74hp52+6ai3BoU_-wGkUsws+6x_k8YTEX67EcEdduy7BFzoA@mail.gmail.com>
References: <CAA74hp4ArCu5500=kSmzygkE9Ten3Vu2DY57_68-CEhrJhEQ6g@mail.gmail.com>
 <C856EDD4-CFE8-47CA-A0CA-842C304F7797@dcn.davis.ca.us>
 <CAA74hp52+6ai3BoU_-wGkUsws+6x_k8YTEX67EcEdduy7BFzoA@mail.gmail.com>
Message-ID: <0C093E8C-F8F6-4452-989F-9BA883B623B8@dcn.davis.ca.us>

I really don't know about this special-purpose distribution of R... you should probably contact the developer. 

From the error, I wonder whether you followed the instructions on the portableR  web page link that you quoted. Do you have the directories referred to there in place? 
-- 
Sent from my phone. Please excuse my brevity.

On July 25, 2017 7:27:31 AM PDT, Ashish Ranjan <aranjan1645 at gmail.com> wrote:
>Hi Jeff,
>
>1). I have tried install.packages( c("dplyr", "tidyr" ) ) into the
>r-script
>file got below error:-
>
>> install.packages( c("dplyr", "tidyr" ) )
>Installing packages into
>?/tmp/1776492876238396447/lib/portableR-master/site-library?
>(as ?lib? is unspecified)
>Error in install.packages(c("dplyr", "tidyr")) :
>  This version of R is not set up to install source packages
>If it was installed from an RPM, you may need the R-devel RPM
>Execution halted
>
>2). I have also tried these steps in R-console (install.packages(
>c("dplyr", "tidyr" ) )), able to install these library into linux based
>R
>machine. after that tried to copy the lib folder to my portable R site
>library folder got the various error but i have resolved many now
>getting
>below error which unable to resolve
>
>Error in dyn.load(file, DLLpath = DLLpath, ...) :
>  unable to load shared object
>'/tmp/3971881046757600243/lib/portableR-master/site-library/Rcpp/libs/Rcpp.so':
>/usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required
>by
>/tmp/3971881046757600243/lib/portableR-master/site-library/Rcpp/libs/Rcpp.so)
>Error: package or namespace load failed for ?dplyr?
>Execution halted
>
>
>Thanks
>Ashish Ranjan
>
>
>
>On Tue, Jul 25, 2017 at 7:09 PM, Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> 1) Definitely yes. They are on CRAN. Just type
>>
>> install.packages( c("dplyr", "tidyr" ) )
>>
>> at the R console.
>>
>> 2) Don't know, but most likely the answer is yes. Since all R
>packages on
>> Linux are compiled by R when installed, you either need to activate
>your
>> virtual machine, compile the packages, and save the state for future
>use,
>> or you have to build the package library on another compatible
>architecture
>> and copy the library into the VM image. I suggest you read the
>portableR
>> documentation and the R Installation and Administration manual.
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> On July 25, 2017 3:43:11 AM PDT, Ashish Ranjan
><aranjan1645 at gmail.com>
>> wrote:
>> >Hi Team,
>> >
>> >Please suggest me on below :-
>> >
>> >1).are There any linux based library for dplyr and tidyr? I could
>find
>> >these r-libraries for windows and Mac but not for linux. 2). is it
>> >possible
>> >to add external library to portableR
>> >zip(http://nafiux.github.io/portableR/)
>> >file if yes then how to add external library to poratbleR zip file?
>> >
>> >In our application AWS lambda invoking the R-script by using
>portableR
>> >zip
>> >file.we want to add new external dplyr library to this poratbleR zip
>> >file.
>> >
>> >
>> >Thanks
>> >
>> >Ashish Ranjan
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> >______________________________________________
>> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >https://stat.ethz.ch/mailman/listinfo/r-help
>> >PLEASE do read the posting guide
>> >http://www.R-project.org/posting-guide.html
>> >and provide commented, minimal, self-contained, reproducible code.
>>


From aranjan1645 at gmail.com  Tue Jul 25 16:27:31 2017
From: aranjan1645 at gmail.com (Ashish Ranjan)
Date: Tue, 25 Jul 2017 19:57:31 +0530
Subject: [R] To Supporting graphpad prism in R,
	add external library to poratbleR
In-Reply-To: <C856EDD4-CFE8-47CA-A0CA-842C304F7797@dcn.davis.ca.us>
References: <CAA74hp4ArCu5500=kSmzygkE9Ten3Vu2DY57_68-CEhrJhEQ6g@mail.gmail.com>
 <C856EDD4-CFE8-47CA-A0CA-842C304F7797@dcn.davis.ca.us>
Message-ID: <CAA74hp52+6ai3BoU_-wGkUsws+6x_k8YTEX67EcEdduy7BFzoA@mail.gmail.com>

Hi Jeff,

1). I have tried install.packages( c("dplyr", "tidyr" ) ) into the r-script
file got below error:-

> install.packages( c("dplyr", "tidyr" ) )
Installing packages into
?/tmp/1776492876238396447/lib/portableR-master/site-library?
(as ?lib? is unspecified)
Error in install.packages(c("dplyr", "tidyr")) :
  This version of R is not set up to install source packages
If it was installed from an RPM, you may need the R-devel RPM
Execution halted

2). I have also tried these steps in R-console (install.packages(
c("dplyr", "tidyr" ) )), able to install these library into linux based R
machine. after that tried to copy the lib folder to my portable R site
library folder got the various error but i have resolved many now getting
below error which unable to resolve

Error in dyn.load(file, DLLpath = DLLpath, ...) :
  unable to load shared object
'/tmp/3971881046757600243/lib/portableR-master/site-library/Rcpp/libs/Rcpp.so':
  /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (required
by
/tmp/3971881046757600243/lib/portableR-master/site-library/Rcpp/libs/Rcpp.so)
Error: package or namespace load failed for ?dplyr?
Execution halted


Thanks
Ashish Ranjan



On Tue, Jul 25, 2017 at 7:09 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> 1) Definitely yes. They are on CRAN. Just type
>
> install.packages( c("dplyr", "tidyr" ) )
>
> at the R console.
>
> 2) Don't know, but most likely the answer is yes. Since all R packages on
> Linux are compiled by R when installed, you either need to activate your
> virtual machine, compile the packages, and save the state for future use,
> or you have to build the package library on another compatible architecture
> and copy the library into the VM image. I suggest you read the portableR
> documentation and the R Installation and Administration manual.
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 25, 2017 3:43:11 AM PDT, Ashish Ranjan <aranjan1645 at gmail.com>
> wrote:
> >Hi Team,
> >
> >Please suggest me on below :-
> >
> >1).are There any linux based library for dplyr and tidyr? I could find
> >these r-libraries for windows and Mac but not for linux. 2). is it
> >possible
> >to add external library to portableR
> >zip(http://nafiux.github.io/portableR/)
> >file if yes then how to add external library to poratbleR zip file?
> >
> >In our application AWS lambda invoking the R-script by using portableR
> >zip
> >file.we want to add new external dplyr library to this poratbleR zip
> >file.
> >
> >
> >Thanks
> >
> >Ashish Ranjan
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ahmedatia80 at gmail.com  Tue Jul 25 19:18:29 2017
From: ahmedatia80 at gmail.com (Ahmed Attia)
Date: Tue, 25 Jul 2017 14:18:29 -0300
Subject: [R] Using nls.lm to fit a non-continuous dates range
Message-ID: <CAG6S0OnZ1b73iaXVRWA5iFx1voC2ruBOER3R-yv4PJE1_yiCUw@mail.gmail.com>

Dear  R users,

Can I fit nls.lm to a non-continuous date data. looked at previous
examples but still not able to fit the model to my data. There are 25
rows of observations as below;

df <- data.frame(Date=as.Date(rownames(df),'%m/%d/%Y'),Y=df$height)
df$days <- as.numeric(df$Date - df[1,]$Date)
head(df)
 Date         Y         days
1 2009-12-01 0.2631250    0
2 2010-01-08 0.4436012   38
3 2010-02-04 0.7151786   65
4 2010-03-03 1.1379762   92
5 2010-04-05 1.7986866  125
6 2010-05-04 2.2982635  154

The following code, tried different values of the list, did not work.

f <- function(parS, xx) {parS$a + parS$b*log(parS$tc - xx)}
     resids <- function(p, observed, xx) {df$Y - f(p,xx)}
     nls.out <- nls.lm(par=list(a=1,b=-0.001,tc=25), fn = resids,
              observed = df$Y, xx = df$days)

and the following error is always produced.

Warning messages:
1: In log(parS$c - xx) : NaNs produced
2: In log(parS$c - xx) : NaNs produced
3: In log(parS$c - xx) : NaNs produced
4: In log(parS$c - xx) : NaNs produced
5: In log(parS$c - xx) : NaNs produced

then the nls.out should integrated in nls.final as proposed by jlhoward

# use output of L-M algorithm as starting estimates in nls(...)
par <- nls.out$par
nls.final <- nls(Y~a+b*log(tc-days),data=df,
                 start=c(a=par$a, b=par$b, tc=par$tc))

summary(nls.final)      # display statistics of the fit
# append fitted values to df
df$pred <- predict(nls.final)

Also attempting to fit a selfstart model

a_start<-8
b_start<-2*log(2)/a_start
m<-nls(df$Y~a*exp(-b*df$days),start=list(a=a_start,b=b_start))
Error in nls(df$Y ~ a * exp(-b * df$days), start = list(a = a_start, b
= b_start)) :
  parameters without starting value in 'data': Y, days

Could you please help

Thank you

Ahmed Attia, Ph.D.
Agronomist & Soil Scientist


From erinm.hodgess at gmail.com  Tue Jul 25 22:54:00 2017
From: erinm.hodgess at gmail.com (Erin Hodgess)
Date: Tue, 25 Jul 2017 15:54:00 -0500
Subject: [R] trouble with Rmpi and a new version of R on Windows.
Message-ID: <CACxE24m2mG_dD-H0Ehj8uxZot+duDqkHsgCMBOgM9M7Ps+X0Ng@mail.gmail.com>

I want to put version R-3.4.1 on my Windows desktop in the office.  I have
had other versions of R on that computer and used Rmpi on them.  I deleted
all of the versions, deleted all of the directories, however, when I try to
start R (3.4.1), I get  Rmpi not found.  Can't start R.

Has anyone seen this, please?

Thanks,
Erin




-- 
Erin Hodgess
Associate Professor
Department of Mathematical and Statistics
University of Houston - Downtown
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From marc_grt at yahoo.fr  Wed Jul 26 11:29:06 2017
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Wed, 26 Jul 2017 11:29:06 +0200
Subject: [R] axis() after image.plot() does not work except if points()
 is inserted between
In-Reply-To: <22903.9580.641776.632203@stat.math.ethz.ch>
References: <0981fda7-811d-3595-abbb-f470bc2459c6@yahoo.fr>
 <CA+8X3fX+DzTyA+39SwZMGUDH_AJp5RDjtvqY7nuPvCFxNwMkyA@mail.gmail.com>
 <31fa883f-a6f9-c9c9-0cea-1c9ada850ebc@yahoo.fr>
 <22903.9580.641776.632203@stat.math.ethz.ch>
Message-ID: <9953664d-f505-ff53-d809-924a39bd843b@yahoo.fr>

Thanks... I agree that the problem was explained in the documentation 
but I can't find a way to have axis() working even manipulating 
par("plt") or with graphics.reset = TRUE:
- adding graphics.reset=TRUE does not allow axis() to be shown;
- I see that par()$plt is involved but it is the not sufficient to 
explain why axis() works because if it is changed by hand, axes are not 
shown.

Thanks for the trick about range(). I didn't notice that it has also a 
na.rm option. It is more elegant.

Here is the code showing the various propositions and checks:


library(fields)
D <- matrix(c(10, 20, 25, 30, 12, 22, 32, 35, 13, 25, 38, 40), nrow=3)
(pplt <- par()$plt)
#### [1] 0.08844944 0.95469663 0.14253275 0.88541485

# original problem. Axis() not shown

image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
            ylab="Columns", cex.lab = 0.5, zlim=range(D, na.rm=TRUE),
            las=1, axes=FALSE)
# Check the value of par()$plt; it is indeed modified
par()$plt
#### [1] 0.08844944 0.86408989 0.14253275 0.88541485
# axis() does not work
axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
cex.axis=0.5)

# I restore par("plt") to it original value
par(plt=pplt)

# graphics.reset = TRUE. Axis() not shown

par()$plt
### [1] 0.08844944 0.95469663 0.14253275 0.88541485
image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
            ylab="Columns", cex.lab = 0.5, zlim=range(D, na.rm=TRUE),
            las=1, axes=FALSE, graphics.reset = TRUE)
# Check an effect on par()$plt. Indeed with graphics.reset = TRUE 
par()$plt is restored
par()$plt
### [1] 0.08844944 0.95469663 0.14253275 0.88541485
# But the axes at not shown
axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
cex.axis=0.5)

# Check an effect of points() on par()$plt
# There is an effect
# axes are shown

par()$plt
### [1] 0.08844944 0.95469663 0.14253275 0.88541485
image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
            ylab="Columns", cex.lab = 0.5, zlim=range(D, na.rm=TRUE),
            las=1, axes=FALSE)
points(1.5, 1.5, type="p")
par()$plt
### [1] 0.08844944 0.86408989 0.14253275 0.88541485
axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
cex.axis=0.5)

# Try to reproduce the effect of points() on par()$plt
# axes are not shown. Then points() is doing something else !

image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
            ylab="Columns", cex.lab = 0.5, zlim=range(D, na.rm=TRUE),
            las=1, axes=FALSE)
par(plt=c(0.08844944, 0.86408989, 0.14253275, 0.88541485))
axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
cex.axis=0.5)
# check that par("plt") is correctly setup
par()$plt
### [1] 0.08844944 0.86408989 0.14253275 0.88541485

I think that it will remain a mystery !
At least the trick with points() is working.

Thanks
Marc


Le 25/07/2017 ? 13:03, Martin Maechler a ?crit :
>>>>>> Marc Girondot via R-help <r-help at r-project.org>
>>>>>>      on Mon, 24 Jul 2017 09:35:06 +0200 writes:
>      > Thanks for the proposition. As you see bellow, par("usr") is the same
>      > before and after the points() (the full code is bellow):
>      > ....
>      >> par("usr")
>      > [1] -0.2500000  1.2500000 -0.1666667  1.1666667
>      >> # if you remove this points() function, axis will show nothing.
>      >>
>      >> points(1.5, 1.5, type="p")
>      >> p2 <- par(no.readonly=TRUE)
>      >> par("usr")
>      > [1] -0.2500000  1.2500000 -0.1666667  1.1666667
>      > ...
>
>      > I can reproduce it in Ubuntu and MacosX R Gui and Rstudio (R 3.4.1).
>
>      > Marc
>
>      > Here is the code:
>      > library(fields)
>      > par(mar=c(5,4.5,4,7))
>      > D <- matrix(c(10, 20, 25, 30, 12, 22, 32, 35, 13, 25, 38, 40), nrow=3)
>
>      > p0 <- par(no.readonly=TRUE)
>      > image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>      >           ylab="Columns", cex.lab = 0.5,
>      >           zlim=c(min(D, na.rm=TRUE),max(D, na.rm=TRUE)),
>      >           las=1, axes=FALSE)
>      > p1 <- par(no.readonly=TRUE)
>
>      > par("usr")
>      > par("xpd")
>
>      > # if you remove this points() function, axis will show nothing.
>
>      > points(1.5, 1.5, type="p")
>      > p2 <- par(no.readonly=TRUE)
>      > par("usr")
>      > par("xpd")
>
>      > ##########
>      > axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
>      > axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1,
>      > cex.axis=0.5)
>
>      > identical(p1, p2)
>
> Have you ever carefully read the detailed help page about image.plot()?
>     
> I haven't, but a cursory reading already shows me that the
> author of the function did this partly on purpose:
>
>    > Side Effects:
>    >
>    >      After exiting, the plotting region may be changed to make it
>    >      possible to add more features to the plot. To be explicit,
>    >      ?par()\$plt? may be changed to reflect a smaller plotting region
>    >      that has accommodated room for the legend subplot.
>
> Unfortunately, there it does _not_ mention the following :
>
> >From looking at its code, and then re-reading parts of the help page,
> I see that there is a 'graphics.reset' argument which you can
> set to TRUE in such a case:
>
>   image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>             ylab="Columns", cex.lab = 0.5,
>             zlim= range(D, na.rm=TRUE),
> 	   graphics.reset = TRUE, # <<<<< the solution
>             las=1, axes=FALSE)
>
> Also note that
>       zlim = range(D ...)
> is infinitely more elegant than
>       zlim = c(min((D, ...), max(D, ...)))
>
>
> Martin Maechler
> ETH Zurich (and R core)
>


From chalabi.elahe at yahoo.de  Wed Jul 26 13:48:58 2017
From: chalabi.elahe at yahoo.de (Elahe chalabi)
Date: Wed, 26 Jul 2017 11:48:58 +0000 (UTC)
Subject: [R] fill out a PDF form in R
References: <903140830.1693203.1501069738544.ref@mail.yahoo.com>
Message-ID: <903140830.1693203.1501069738544@mail.yahoo.com>

Hi all,

I would like to get ideas about how to fill out a PDF form in R and to know if it's possible or not. I could not find something helpful in Internet.

Does anyone know a good link for that or have experience in this?
Thanks for any help!

Elahe


From ulrik.stervbo at gmail.com  Wed Jul 26 14:01:52 2017
From: ulrik.stervbo at gmail.com (Ulrik Stervbo)
Date: Wed, 26 Jul 2017 12:01:52 +0000
Subject: [R] fill out a PDF form in R
In-Reply-To: <903140830.1693203.1501069738544@mail.yahoo.com>
References: <903140830.1693203.1501069738544.ref@mail.yahoo.com>
 <903140830.1693203.1501069738544@mail.yahoo.com>
Message-ID: <CAKVAULMyfW9Nj_hniY31A-=cmGgtnxKgJXMpqENMvrwFuqpZ4A@mail.gmail.com>

Hi Elahe,

I have no clue, but maybe you can dump the data fields using pdftk, and
work with those in R.

HTH
Ulrik

On Wed, 26 Jul 2017 at 13:50 Elahe chalabi via R-help <r-help at r-project.org>
wrote:

> Hi all,
>
> I would like to get ideas about how to fill out a PDF form in R and to
> know if it's possible or not. I could not find something helpful in
> Internet.
>
> Does anyone know a good link for that or have experience in this?
> Thanks for any help!
>
> Elahe
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ulrik.stervbo at gmail.com  Wed Jul 26 14:03:52 2017
From: ulrik.stervbo at gmail.com (Ulrik Stervbo)
Date: Wed, 26 Jul 2017 12:03:52 +0000
Subject: [R] fill out a PDF form in R
In-Reply-To: <CAKVAULMyfW9Nj_hniY31A-=cmGgtnxKgJXMpqENMvrwFuqpZ4A@mail.gmail.com>
References: <903140830.1693203.1501069738544.ref@mail.yahoo.com>
 <903140830.1693203.1501069738544@mail.yahoo.com>
 <CAKVAULMyfW9Nj_hniY31A-=cmGgtnxKgJXMpqENMvrwFuqpZ4A@mail.gmail.com>
Message-ID: <CAKVAULMzz6sVCtytp6U-7RThHcV-myhcWbaAft5VKBs3YN7aJA@mail.gmail.com>

On second thought, you could also use pdftk to fill out the pdf form with
data generated in R.

On Wed, 26 Jul 2017 at 14:01 Ulrik Stervbo <ulrik.stervbo at gmail.com> wrote:

> Hi Elahe,
>
> I have no clue, but maybe you can dump the data fields using pdftk, and
> work with those in R.
>
> HTH
> Ulrik
>
> On Wed, 26 Jul 2017 at 13:50 Elahe chalabi via R-help <
> r-help at r-project.org> wrote:
>
>> Hi all,
>>
>> I would like to get ideas about how to fill out a PDF form in R and to
>> know if it's possible or not. I could not find something helpful in
>> Internet.
>>
>> Does anyone know a good link for that or have experience in this?
>> Thanks for any help!
>>
>> Elahe
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From jpolo at mail.usf.edu  Wed Jul 26 16:14:38 2017
From: jpolo at mail.usf.edu (john polo)
Date: Wed, 26 Jul 2017 09:14:38 -0500
Subject: [R] How long to wait for process?
Message-ID: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>

UseRs,

I have a dataframe with 2547 rows and several hundred columns in R 
3.1.3. I am trying to run a small logistic regression with a subset of 
the data.

know_fin ~ 
comp_grp2+age+gender+education+employment+income+ideol+home_lot+home+county

     > str(knowf3)
     'data.frame':   2033 obs. of  18 variables:
     $ userid    : Factor w/ 2542 levels "FNCNM1639","FNCNM1642",..: 
1857 157 965 1967 164 315 849 1017 699 189 ...
     $ round_id   : Factor w/ 1 level "Round 11": 1 1 1 1 1 1 1 1 1 1 ...
     $ age       : int  67 66 44 27 32 67 36 76 70 66 ...
     $ county: Factor w/ 80 levels "Adair","Alfalfa",..: 75 75 75 75 75 
75 64 64 64 64 ...
     $ gender    : Factor w/ 2 levels "0","1": 1 2 1 1 2 1 2 1 2 2 ...
     $ education : Factor w/ 8 levels "1","2","3","4",..: 6 7 6 8 2 4 2 
4 2 6 ...
     $ employment: Factor w/ 9 levels "1","2","3","4",..: 8 4 4 4 3 8 5 
8 4 4 ...
     $ income    : num  550000 80000 90000 19000 42000 30000 18000 50000 
800000 10000 ...
     $ home: num  0 0 0 0 0 0 0 0 0 0 ...
     $ ideol     : Factor w/ 7 levels "1","2","3","4",..: 2 7 4 3 2 4 2 
3 2 6 ...
     $ home_lot  : Factor w/ 3 levels "1","2","3": 2 2 2 2 2 2 3 3 1 2 ...
     $ hispanic  : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ...
     $ comp_grp2 : Factor w/ 16 levels "Cr_Gr","Cr_Ot",..: 13 13 13 13 
13 13 10 10 10 10 ...
     $ know_fin : Factor w/ 3 levels "0","1","2": 2 2 2 2 2 2 2 2 2 2 ...


With the regular glm() function, I get a warning about "perfect or 
quasi-perfect separation"[1]. I looked for a method to deal with this 
and a penalized GLM is an accepted method[2]. This is implemented in 
logistf(). I used the default settings for the function.

Just before I run the model, memory.size() for my session is ~4500 (MB). 
memory.limit() is ~25500. When I start the model, R immediately becomes 
non-responsive. This is in a Windows environment and in Task Manager, 
the instance of R is, and has been, using ~13% of CPU aand ~4997 MB of 
RAM. It's been ~24 hours now in that state and I don't have any idea of 
how long this should take. If I run the same model in the same setting 
with the base glm(), the model runs in about 60 seconds. Is there a way 
to know if the process is going to produce something useful after all 
this time or if it's hanging on some kind of problem?


   [1]: 
https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression#68917
   [2]: 
https://academic.oup.com/biomet/article-abstract/80/1/27/228364/Bias-reduction-of-maximum-likelihood-estimates


-- 
Men occasionally stumble
over the truth, but most of them
pick themselves up and hurry off
as if nothing had happened.
-- Winston Churchill


From bgunter.4567 at gmail.com  Wed Jul 26 16:49:13 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Wed, 26 Jul 2017 07:49:13 -0700
Subject: [R] How long to wait for process?
In-Reply-To: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>
References: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>
Message-ID: <CAGxFJbSU+bb7BTXBSq-+eH86u3VSsUBr_WAHS8uRNCL=Pb7wEg@mail.gmail.com>

Dunno. You might wish to email the maintainer (see ?maintainer), who
may not monitor this list, if you do not get a satisfactory reply
here.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jul 26, 2017 at 7:14 AM, john polo <jpolo at mail.usf.edu> wrote:
> UseRs,
>
> I have a dataframe with 2547 rows and several hundred columns in R 3.1.3. I
> am trying to run a small logistic regression with a subset of the data.
>
> know_fin ~
> comp_grp2+age+gender+education+employment+income+ideol+home_lot+home+county
>
>     > str(knowf3)
>     'data.frame':   2033 obs. of  18 variables:
>     $ userid    : Factor w/ 2542 levels "FNCNM1639","FNCNM1642",..: 1857 157
> 965 1967 164 315 849 1017 699 189 ...
>     $ round_id   : Factor w/ 1 level "Round 11": 1 1 1 1 1 1 1 1 1 1 ...
>     $ age       : int  67 66 44 27 32 67 36 76 70 66 ...
>     $ county: Factor w/ 80 levels "Adair","Alfalfa",..: 75 75 75 75 75 75 64
> 64 64 64 ...
>     $ gender    : Factor w/ 2 levels "0","1": 1 2 1 1 2 1 2 1 2 2 ...
>     $ education : Factor w/ 8 levels "1","2","3","4",..: 6 7 6 8 2 4 2 4 2 6
> ...
>     $ employment: Factor w/ 9 levels "1","2","3","4",..: 8 4 4 4 3 8 5 8 4 4
> ...
>     $ income    : num  550000 80000 90000 19000 42000 30000 18000 50000
> 800000 10000 ...
>     $ home: num  0 0 0 0 0 0 0 0 0 0 ...
>     $ ideol     : Factor w/ 7 levels "1","2","3","4",..: 2 7 4 3 2 4 2 3 2 6
> ...
>     $ home_lot  : Factor w/ 3 levels "1","2","3": 2 2 2 2 2 2 3 3 1 2 ...
>     $ hispanic  : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ...
>     $ comp_grp2 : Factor w/ 16 levels "Cr_Gr","Cr_Ot",..: 13 13 13 13 13 13
> 10 10 10 10 ...
>     $ know_fin : Factor w/ 3 levels "0","1","2": 2 2 2 2 2 2 2 2 2 2 ...
>
>
> With the regular glm() function, I get a warning about "perfect or
> quasi-perfect separation"[1]. I looked for a method to deal with this and a
> penalized GLM is an accepted method[2]. This is implemented in logistf(). I
> used the default settings for the function.
>
> Just before I run the model, memory.size() for my session is ~4500 (MB).
> memory.limit() is ~25500. When I start the model, R immediately becomes
> non-responsive. This is in a Windows environment and in Task Manager, the
> instance of R is, and has been, using ~13% of CPU aand ~4997 MB of RAM. It's
> been ~24 hours now in that state and I don't have any idea of how long this
> should take. If I run the same model in the same setting with the base
> glm(), the model runs in about 60 seconds. Is there a way to know if the
> process is going to produce something useful after all this time or if it's
> hanging on some kind of problem?
>
>
>   [1]:
> https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression#68917
>   [2]:
> https://academic.oup.com/biomet/article-abstract/80/1/27/228364/Bias-reduction-of-maximum-likelihood-estimates
>
>
> --
> Men occasionally stumble
> over the truth, but most of them
> pick themselves up and hurry off
> as if nothing had happened.
> -- Winston Churchill
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r-packages at r-project.org  Wed Jul 26 14:14:57 2017
From: r-packages at r-project.org (brodie gaslam via R-packages)
Date: Wed, 26 Jul 2017 12:14:57 +0000
Subject: [R] [R-pkgs] New Package vetr: Enforce Structural Requirements for
	S3	Objects
References: <557430534.1245032.1501071297432.ref@mail.yahoo.com>
Message-ID: <557430534.1245032.1501071297432@mail.yahoo.com>

`vetr` implements a declarative template-based approach to verify that objects
meet structural requirements, and auto-composes error messages when they do not.
This package is intended to simplify a more formal use of S3 objects.

The template concept is borrowed from `vapply`:

>> vet(numeric(1L), 1:3)
>? [1] "`1:3` should be length 1 (is 3)"
>> vet(numeric(1L), "hello")
>? [1] "`\"hello\"` should be type \"numeric\" (is \"character\")"
>> vet(numeric(1L), 42)
>? [1] TRUE

There is no limit on template complexity:

>> vet(matrix(integer(), ncol=3), matrix(1:12, 3))
>? [1] "`matrix(1:12, 3)` should have 3 columns (has 4)"
>
>> iris.template <- abstract(iris)
>> levels(iris$Species)[3] <- 'sibirica'
>> vet(iris.template, iris[1:10,])
>? [1] "`levels((iris[1:10, ])$Species)[3]` should be \"virginica\"
>? (is \"sibirica\")"

`vetr` implements programmable non-standard evaluation via recursive
substitution of language objects:

>> a <- quote(integer() && . > 0)
>> b <- quote(logical(1L) && !anyNA(.))
>> c <- quote(a || b)
>> vet(c, -1)
>? [1] "At least one of these should pass:"
>? [2] "? - `-1 > 0` is not TRUE (FALSE)"
>? [3] "? - `-1` should be type \"logical\" (is \"double\")"

Performance is comparable to `stopifnot` for simple checks, and is faster for
complex (template based) ones.? There is a mode that further streamlines
parameter vetting in functions.

The package is still under development, but the features should be mostly
stable.? Feedback welcome <https://github.com/brodieG/vetr>.

Best regards,


Brodie
	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages

From dimitri.liakhovitski at gmail.com  Thu Jul 27 14:24:52 2017
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Thu, 27 Jul 2017 08:24:52 -0400
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
Message-ID: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>

Hello!

I am trying to understand how ggplot2's geom_bar treats NAs.
The help file says:

library(ggplot2)
?geom_bar
na.rm: If FALSE, the default, missing values are removed with a warning. If
TRUE, missing values are silently removed.

I am trying it out:
md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3], rep(NA,
3)))
str(md); levels(md$a)

ggplot(data = md, mapping = aes(x = a)) +
  geom_bar(na.rm = F)
It runs without warnings and generates counts for each factor level AS WELL
AS the NAs. Makes sense.

Now, I don't want the NAs to be counted. So, I run:
ggplot(data = md, mapping = aes(x = a)) +
  geom_bar(na.rm = T)

But I still have NAs in the picture. Why?
What am I missing?

Thank you!
-- 
Dimitri Liakhovitski

	[[alternative HTML version deleted]]


From friendly at yorku.ca  Thu Jul 27 15:08:37 2017
From: friendly at yorku.ca (Michael Friendly)
Date: Thu, 27 Jul 2017 09:08:37 -0400
Subject: [R] How long to wait for process?
In-Reply-To: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>
References: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>
Message-ID: <2fe90889-9ead-e956-68dc-9b81b5bfb584@yorku.ca>

Rather than go to a penalized GLM, you might be better off investigating 
the sources of quasi-perfect separation and simplifying the model to 
avoid or reduce it.  In your data set you have several factors with 
large number of levels, making the data sparse for all their combinations.

Like multicolinearity, near perfect separation is a data problem, and is 
often better solved by careful thought about the model, rather than 
wrapping the data in a computationally intensive band aid.

-Michael

On 7/26/2017 10:14 AM, john polo wrote:
> UseRs,
> 
> I have a dataframe with 2547 rows and several hundred columns in R 
> 3.1.3. I am trying to run a small logistic regression with a subset of 
> the data.
> 
> know_fin ~ 
> comp_grp2+age+gender+education+employment+income+ideol+home_lot+home+county
> 
>      > str(knowf3)
>      'data.frame':   2033 obs. of  18 variables:
>      $ userid    : Factor w/ 2542 levels "FNCNM1639","FNCNM1642",..: 
> 1857 157 965 1967 164 315 849 1017 699 189 ...
>      $ round_id   : Factor w/ 1 level "Round 11": 1 1 1 1 1 1 1 1 1 1 ...
>      $ age       : int  67 66 44 27 32 67 36 76 70 66 ...
>      $ county: Factor w/ 80 levels "Adair","Alfalfa",..: 75 75 75 75 75 
> 75 64 64 64 64 ...
>      $ gender    : Factor w/ 2 levels "0","1": 1 2 1 1 2 1 2 1 2 2 ...
>      $ education : Factor w/ 8 levels "1","2","3","4",..: 6 7 6 8 2 4 2 
> 4 2 6 ...
>      $ employment: Factor w/ 9 levels "1","2","3","4",..: 8 4 4 4 3 8 5 
> 8 4 4 ...
>      $ income    : num  550000 80000 90000 19000 42000 30000 18000 50000 
> 800000 10000 ...
>      $ home: num  0 0 0 0 0 0 0 0 0 0 ...
>      $ ideol     : Factor w/ 7 levels "1","2","3","4",..: 2 7 4 3 2 4 2 
> 3 2 6 ...
>      $ home_lot  : Factor w/ 3 levels "1","2","3": 2 2 2 2 2 2 3 3 1 2 ...
>      $ hispanic  : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ...
>      $ comp_grp2 : Factor w/ 16 levels "Cr_Gr","Cr_Ot",..: 13 13 13 13 
> 13 13 10 10 10 10 ...
>      $ know_fin : Factor w/ 3 levels "0","1","2": 2 2 2 2 2 2 2 2 2 2 ...
> 
> 
> With the regular glm() function, I get a warning about "perfect or 
> quasi-perfect separation"[1]. I looked for a method to deal with this 
> and a penalized GLM is an accepted method[2]. This is implemented in 
> logistf(). I used the default settings for the function.
> 
> Just before I run the model, memory.size() for my session is ~4500 (MB). 
> memory.limit() is ~25500. When I start the model, R immediately becomes 
> non-responsive. This is in a Windows environment and in Task Manager, 
> the instance of R is, and has been, using ~13% of CPU aand ~4997 MB of 
> RAM. It's been ~24 hours now in that state and I don't have any idea of 
> how long this should take. If I run the same model in the same setting 
> with the base glm(), the model runs in about 60 seconds. Is there a way 
> to know if the process is going to produce something useful after all 
> this time or if it's hanging on some kind of problem?
> 
> 
>    [1]: 
> https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression#68917 
> 
>    [2]: 
> https://academic.oup.com/biomet/article-abstract/80/1/27/228364/Bias-reduction-of-maximum-likelihood-estimates 
> 
> 
>


From jpolo at mail.usf.edu  Thu Jul 27 15:26:42 2017
From: jpolo at mail.usf.edu (john polo)
Date: Thu, 27 Jul 2017 08:26:42 -0500
Subject: [R] How long to wait for process?
In-Reply-To: <2fe90889-9ead-e956-68dc-9b81b5bfb584@yorku.ca>
References: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>
 <2fe90889-9ead-e956-68dc-9b81b5bfb584@yorku.ca>
Message-ID: <dd797511-8e30-50e5-8457-9c7035770e9f@mail.usf.edu>

Michael,

Thank you for the suggestion. I will take your advice and look more 
critically at the covariates.

John

On 7/27/2017 8:08 AM, Michael Friendly wrote:
> Rather than go to a penalized GLM, you might be better off 
> investigating the sources of quasi-perfect separation and simplifying 
> the model to avoid or reduce it.  In your data set you have several 
> factors with large number of levels, making the data sparse for all 
> their combinations.
>
> Like multicolinearity, near perfect separation is a data problem, and 
> is often better solved by careful thought about the model, rather than 
> wrapping the data in a computationally intensive band aid.
>
> -Michael
>
> On 7/26/2017 10:14 AM, john polo wrote:
>> UseRs,
>>
>> I have a dataframe with 2547 rows and several hundred columns in R 
>> 3.1.3. I am trying to run a small logistic regression with a subset 
>> of the data.
>>
>> know_fin ~ 
>> comp_grp2+age+gender+education+employment+income+ideol+home_lot+home+county
>>
>>      > str(knowf3)
>>      'data.frame':   2033 obs. of  18 variables:
>>      $ userid    : Factor w/ 2542 levels "FNCNM1639","FNCNM1642",..: 
>> 1857 157 965 1967 164 315 849 1017 699 189 ...
>>      $ round_id   : Factor w/ 1 level "Round 11": 1 1 1 1 1 1 1 1 1 1 
>> ...
>>      $ age       : int  67 66 44 27 32 67 36 76 70 66 ...
>>      $ county: Factor w/ 80 levels "Adair","Alfalfa",..: 75 75 75 75 
>> 75 75 64 64 64 64 ...
>>      $ gender    : Factor w/ 2 levels "0","1": 1 2 1 1 2 1 2 1 2 2 ...
>>      $ education : Factor w/ 8 levels "1","2","3","4",..: 6 7 6 8 2 4 
>> 2 4 2 6 ...
>>      $ employment: Factor w/ 9 levels "1","2","3","4",..: 8 4 4 4 3 8 
>> 5 8 4 4 ...
>>      $ income    : num  550000 80000 90000 19000 42000 30000 18000 
>> 50000 800000 10000 ...
>>      $ home: num  0 0 0 0 0 0 0 0 0 0 ...
>>      $ ideol     : Factor w/ 7 levels "1","2","3","4",..: 2 7 4 3 2 4 
>> 2 3 2 6 ...
>>      $ home_lot  : Factor w/ 3 levels "1","2","3": 2 2 2 2 2 2 3 3 1 
>> 2 ...
>>      $ hispanic  : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ...
>>      $ comp_grp2 : Factor w/ 16 levels "Cr_Gr","Cr_Ot",..: 13 13 13 
>> 13 13 13 10 10 10 10 ...
>>      $ know_fin : Factor w/ 3 levels "0","1","2": 2 2 2 2 2 2 2 2 2 2 
>> ...
>>
>>
>> With the regular glm() function, I get a warning about "perfect or 
>> quasi-perfect separation"[1]. I looked for a method to deal with this 
>> and a penalized GLM is an accepted method[2]. This is implemented in 
>> logistf(). I used the default settings for the function.
>>
>> Just before I run the model, memory.size() for my session is ~4500 
>> (MB). memory.limit() is ~25500. When I start the model, R immediately 
>> becomes non-responsive. This is in a Windows environment and in Task 
>> Manager, the instance of R is, and has been, using ~13% of CPU aand 
>> ~4997 MB of RAM. It's been ~24 hours now in that state and I don't 
>> have any idea of how long this should take. If I run the same model 
>> in the same setting with the base glm(), the model runs in about 60 
>> seconds. Is there a way to know if the process is going to produce 
>> something useful after all this time or if it's hanging on some kind 
>> of problem?
>>
>>
>>    [1]: 
>> https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression#68917 
>>
>>    [2]: 
>> https://academic.oup.com/biomet/article-abstract/80/1/27/228364/Bias-reduction-of-maximum-likelihood-estimates 
>>
>>
>>
>


-- 
Men occasionally stumble
over the truth, but most of them
pick themselves up and hurry off
as if nothing had happened.
-- Winston Churchill


From marc_schwartz at me.com  Thu Jul 27 15:54:01 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 27 Jul 2017 08:54:01 -0500
Subject: [R] How long to wait for process?
In-Reply-To: <dd797511-8e30-50e5-8457-9c7035770e9f@mail.usf.edu>
References: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>
 <2fe90889-9ead-e956-68dc-9b81b5bfb584@yorku.ca>
 <dd797511-8e30-50e5-8457-9c7035770e9f@mail.usf.edu>
Message-ID: <9342C540-4D27-4318-9965-C812400067FF@me.com>

Hi,

Late to the thread here, but I noted that your dependent variable 'know_fin' has 3 levels in the str() output below.

Since you did not provide a full c&p of your glm() call, we can only presume that you did specify 'family = binomial' in the call. 

Is the dataset 'knowf3' the result of a subsetting operation, such that there are only two of the three levels of 'know_fin' retained in the records used in the glm() call, or are there actually 3 levels in the dataset used in the glm() call? 

If the latter, that will of course be problematic and from a quick check here, glm(..., family = binomial) does not issue a warning or error in the case where the dependent variable has >2 levels.

Regards,

Marc Schwartz


> On Jul 27, 2017, at 8:26 AM, john polo <jpolo at mail.usf.edu> wrote:
> 
> Michael,
> 
> Thank you for the suggestion. I will take your advice and look more critically at the covariates.
> 
> John
> 
> On 7/27/2017 8:08 AM, Michael Friendly wrote:
>> Rather than go to a penalized GLM, you might be better off investigating the sources of quasi-perfect separation and simplifying the model to avoid or reduce it.  In your data set you have several factors with large number of levels, making the data sparse for all their combinations.
>> 
>> Like multicolinearity, near perfect separation is a data problem, and is often better solved by careful thought about the model, rather than wrapping the data in a computationally intensive band aid.
>> 
>> -Michael
>> 
>> On 7/26/2017 10:14 AM, john polo wrote:
>>> UseRs,
>>> 
>>> I have a dataframe with 2547 rows and several hundred columns in R 3.1.3. I am trying to run a small logistic regression with a subset of the data.
>>> 
>>> know_fin ~ comp_grp2+age+gender+education+employment+income+ideol+home_lot+home+county
>>> 
>>>     > str(knowf3)
>>>     'data.frame':   2033 obs. of  18 variables:
>>>     $ userid    : Factor w/ 2542 levels "FNCNM1639","FNCNM1642",..: 1857 157 965 1967 164 315 849 1017 699 189 ...
>>>     $ round_id   : Factor w/ 1 level "Round 11": 1 1 1 1 1 1 1 1 1 1 ...
>>>     $ age       : int  67 66 44 27 32 67 36 76 70 66 ...
>>>     $ county: Factor w/ 80 levels "Adair","Alfalfa",..: 75 75 75 75 75 75 64 64 64 64 ...
>>>     $ gender    : Factor w/ 2 levels "0","1": 1 2 1 1 2 1 2 1 2 2 ...
>>>     $ education : Factor w/ 8 levels "1","2","3","4",..: 6 7 6 8 2 4 2 4 2 6 ...
>>>     $ employment: Factor w/ 9 levels "1","2","3","4",..: 8 4 4 4 3 8 5 8 4 4 ...
>>>     $ income    : num  550000 80000 90000 19000 42000 30000 18000 50000 800000 10000 ...
>>>     $ home: num  0 0 0 0 0 0 0 0 0 0 ...
>>>     $ ideol     : Factor w/ 7 levels "1","2","3","4",..: 2 7 4 3 2 4 2 3 2 6 ...
>>>     $ home_lot  : Factor w/ 3 levels "1","2","3": 2 2 2 2 2 2 3 3 1 2 ...
>>>     $ hispanic  : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ...
>>>     $ comp_grp2 : Factor w/ 16 levels "Cr_Gr","Cr_Ot",..: 13 13 13 13 13 13 10 10 10 10 ...
>>>     $ know_fin : Factor w/ 3 levels "0","1","2": 2 2 2 2 2 2 2 2 2 2 ...
>>> 
>>> 
>>> With the regular glm() function, I get a warning about "perfect or quasi-perfect separation"[1]. I looked for a method to deal with this and a penalized GLM is an accepted method[2]. This is implemented in logistf(). I used the default settings for the function.
>>> 
>>> Just before I run the model, memory.size() for my session is ~4500 (MB). memory.limit() is ~25500. When I start the model, R immediately becomes non-responsive. This is in a Windows environment and in Task Manager, the instance of R is, and has been, using ~13% of CPU aand ~4997 MB of RAM. It's been ~24 hours now in that state and I don't have any idea of how long this should take. If I run the same model in the same setting with the base glm(), the model runs in about 60 seconds. Is there a way to know if the process is going to produce something useful after all this time or if it's hanging on some kind of problem?
>>> 
>>> 
>>>   [1]: https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression#68917 
>>>   [2]: https://academic.oup.com/biomet/article-abstract/80/1/27/228364/Bias-reduction-of-maximum-likelihood-estimates 
>>> 
>>> 
>> 


From jpolo at mail.usf.edu  Thu Jul 27 16:14:57 2017
From: jpolo at mail.usf.edu (john polo)
Date: Thu, 27 Jul 2017 09:14:57 -0500
Subject: [R] How long to wait for process?
In-Reply-To: <9342C540-4D27-4318-9965-C812400067FF@me.com>
References: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>
 <2fe90889-9ead-e956-68dc-9b81b5bfb584@yorku.ca>
 <dd797511-8e30-50e5-8457-9c7035770e9f@mail.usf.edu>
 <9342C540-4D27-4318-9965-C812400067FF@me.com>
Message-ID: <89cf92c8-04cb-f127-8a33-1f2d3d6d3e89@mail.usf.edu>

Marc,

Sorry for the lack of info on my part. Yes, I did use 'family = 
binomial' and I did drop the 3rd level before running the model. I think 
the str(<subset>) that I wrote into my original email might not have 
been my final step before using glm. Thank you for reminding of the 
potential problem.

I think Michael Friendly's idea is probably the solution I need to 
consider. I am simplifying my factors a little bit and revising which I 
will keep.


best,
John

On 7/27/2017 8:54 AM, Marc Schwartz wrote:
> Hi,
>
> Late to the thread here, but I noted that your dependent variable 'know_fin' has 3 levels in the str() output below.
>
> Since you did not provide a full c&p of your glm() call, we can only presume that you did specify 'family = binomial' in the call.
>
> Is the dataset 'knowf3' the result of a subsetting operation, such that there are only two of the three levels of 'know_fin' retained in the records used in the glm() call, or are there actually 3 levels in the dataset used in the glm() call?
>
> If the latter, that will of course be problematic and from a quick check here, glm(..., family = binomial) does not issue a warning or error in the case where the dependent variable has >2 levels.
>
> Regards,
>
> Marc Schwartz
>
>
>> On Jul 27, 2017, at 8:26 AM, john polo<jpolo at mail.usf.edu>  wrote:
>>
>> Michael,
>>
>> Thank you for the suggestion. I will take your advice and look more critically at the covariates.
>>
>> John
>>
>> On 7/27/2017 8:08 AM, Michael Friendly wrote:
>>> Rather than go to a penalized GLM, you might be better off investigating the sources of quasi-perfect separation and simplifying the model to avoid or reduce it.  In your data set you have several factors with large number of levels, making the data sparse for all their combinations.
>>>
>>> Like multicolinearity, near perfect separation is a data problem, and is often better solved by careful thought about the model, rather than wrapping the data in a computationally intensive band aid.
>>>
>>> -Michael
>>>
>>> On 7/26/2017 10:14 AM, john polo wrote:
>>>> UseRs,
>>>>
>>>> I have a dataframe with 2547 rows and several hundred columns in R 3.1.3. I am trying to run a small logistic regression with a subset of the data.
>>>>
>>>> know_fin ~ comp_grp2+age+gender+education+employment+income+ideol+home_lot+home+county
>>>>
>>>>      > str(knowf3)
>>>>      'data.frame':   2033 obs. of  18 variables:
>>>>      $ userid    : Factor w/ 2542 levels "FNCNM1639","FNCNM1642",..: 1857 157 965 1967 164 315 849 1017 699 189 ...
>>>>      $ round_id   : Factor w/ 1 level "Round 11": 1 1 1 1 1 1 1 1 1 1 ...
>>>>      $ age       : int  67 66 44 27 32 67 36 76 70 66 ...
>>>>      $ county: Factor w/ 80 levels "Adair","Alfalfa",..: 75 75 75 75 75 75 64 64 64 64 ...
>>>>      $ gender    : Factor w/ 2 levels "0","1": 1 2 1 1 2 1 2 1 2 2 ...
>>>>      $ education : Factor w/ 8 levels "1","2","3","4",..: 6 7 6 8 2 4 2 4 2 6 ...
>>>>      $ employment: Factor w/ 9 levels "1","2","3","4",..: 8 4 4 4 3 8 5 8 4 4 ...
>>>>      $ income    : num  550000 80000 90000 19000 42000 30000 18000 50000 800000 10000 ...
>>>>      $ home: num  0 0 0 0 0 0 0 0 0 0 ...
>>>>      $ ideol     : Factor w/ 7 levels "1","2","3","4",..: 2 7 4 3 2 4 2 3 2 6 ...
>>>>      $ home_lot  : Factor w/ 3 levels "1","2","3": 2 2 2 2 2 2 3 3 1 2 ...
>>>>      $ hispanic  : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ...
>>>>      $ comp_grp2 : Factor w/ 16 levels "Cr_Gr","Cr_Ot",..: 13 13 13 13 13 13 10 10 10 10 ...
>>>>      $ know_fin : Factor w/ 3 levels "0","1","2": 2 2 2 2 2 2 2 2 2 2 ...
>>>>
>>>>
>>>> With the regular glm() function, I get a warning about "perfect or quasi-perfect separation"[1]. I looked for a method to deal with this and a penalized GLM is an accepted method[2]. This is implemented in logistf(). I used the default settings for the function.
>>>>
>>>> Just before I run the model, memory.size() for my session is ~4500 (MB). memory.limit() is ~25500. When I start the model, R immediately becomes non-responsive. This is in a Windows environment and in Task Manager, the instance of R is, and has been, using ~13% of CPU aand ~4997 MB of RAM. It's been ~24 hours now in that state and I don't have any idea of how long this should take. If I run the same model in the same setting with the base glm(), the model runs in about 60 seconds. Is there a way to know if the process is going to produce something useful after all this time or if it's hanging on some kind of problem?
>>>>
>>>>
>>>>    [1]:https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression#68917  
>>>>    [2]:https://academic.oup.com/biomet/article-abstract/80/1/27/228364/Bias-reduction-of-maximum-likelihood-estimates  
>>>>
>>>>


-- 
Men occasionally stumble
over the truth, but most of them
pick themselves up and hurry off
as if nothing had happened.
-- Winston Churchill


From marc_schwartz at me.com  Thu Jul 27 16:32:20 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Thu, 27 Jul 2017 09:32:20 -0500
Subject: [R] How long to wait for process?
In-Reply-To: <89cf92c8-04cb-f127-8a33-1f2d3d6d3e89@mail.usf.edu>
References: <6be13c72-ae43-2c1e-dd3f-60126615b47a@mail.usf.edu>
 <2fe90889-9ead-e956-68dc-9b81b5bfb584@yorku.ca>
 <dd797511-8e30-50e5-8457-9c7035770e9f@mail.usf.edu>
 <9342C540-4D27-4318-9965-C812400067FF@me.com>
 <89cf92c8-04cb-f127-8a33-1f2d3d6d3e89@mail.usf.edu>
Message-ID: <B7453173-F103-4CFA-AE08-CD9F1A1362BF@me.com>

Hi John,

Not a problem, just wanted to be sure that there was not additional confounding due to these issues.

You may be aware that a subsetting operation to remove records in a data frame does not by default remove the unwanted levels from the factor that was filtered:

iris.new <- subset(iris, Species == "setosa")

> str(iris.new)
'data.frame':	50 obs. of  5 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...

> levels(iris.new$Species)
[1] "setosa"     "versicolor" "virginica" 

> table(iris.new$Species)

    setosa versicolor  virginica 
        50          0          0 


You can see that Species retains all 3 original levels, even though only one is actually present in the records in the new data frame.

Thus, your output below may very well be post the filtering of 'know_fin' to 2 levels.

Regards,

Marc


> On Jul 27, 2017, at 9:14 AM, john polo <jpolo at mail.usf.edu> wrote:
> 
> Marc,
> 
> Sorry for the lack of info on my part. Yes, I did use 'family = binomial' and I did drop the 3rd level before running the model. I think the str(<subset>) that I wrote into my original email might not have been my final step before using glm. Thank you for reminding of the potential problem.
> 
> I think Michael Friendly's idea is probably the solution I need to consider. I am simplifying my factors a little bit and revising which I will keep.
> 
> 
> best,
> John
> 
> On 7/27/2017 8:54 AM, Marc Schwartz wrote:
>> Hi,
>> 
>> Late to the thread here, but I noted that your dependent variable 'know_fin' has 3 levels in the str() output below.
>> 
>> Since you did not provide a full c&p of your glm() call, we can only presume that you did specify 'family = binomial' in the call.
>> 
>> Is the dataset 'knowf3' the result of a subsetting operation, such that there are only two of the three levels of 'know_fin' retained in the records used in the glm() call, or are there actually 3 levels in the dataset used in the glm() call?
>> 
>> If the latter, that will of course be problematic and from a quick check here, glm(..., family = binomial) does not issue a warning or error in the case where the dependent variable has >2 levels.
>> 
>> Regards,
>> 
>> Marc Schwartz
>> 
>> 
>>> On Jul 27, 2017, at 8:26 AM, john polo<jpolo at mail.usf.edu>  wrote:
>>> 
>>> Michael,
>>> 
>>> Thank you for the suggestion. I will take your advice and look more critically at the covariates.
>>> 
>>> John
>>> 
>>> On 7/27/2017 8:08 AM, Michael Friendly wrote:
>>>> Rather than go to a penalized GLM, you might be better off investigating the sources of quasi-perfect separation and simplifying the model to avoid or reduce it.  In your data set you have several factors with large number of levels, making the data sparse for all their combinations.
>>>> 
>>>> Like multicolinearity, near perfect separation is a data problem, and is often better solved by careful thought about the model, rather than wrapping the data in a computationally intensive band aid.
>>>> 
>>>> -Michael
>>>> 
>>>> On 7/26/2017 10:14 AM, john polo wrote:
>>>>> UseRs,
>>>>> 
>>>>> I have a dataframe with 2547 rows and several hundred columns in R 3.1.3. I am trying to run a small logistic regression with a subset of the data.
>>>>> 
>>>>> know_fin ~ comp_grp2+age+gender+education+employment+income+ideol+home_lot+home+county
>>>>> 
>>>>>     > str(knowf3)
>>>>>     'data.frame':   2033 obs. of  18 variables:
>>>>>     $ userid    : Factor w/ 2542 levels "FNCNM1639","FNCNM1642",..: 1857 157 965 1967 164 315 849 1017 699 189 ...
>>>>>     $ round_id   : Factor w/ 1 level "Round 11": 1 1 1 1 1 1 1 1 1 1 ...
>>>>>     $ age       : int  67 66 44 27 32 67 36 76 70 66 ...
>>>>>     $ county: Factor w/ 80 levels "Adair","Alfalfa",..: 75 75 75 75 75 75 64 64 64 64 ...
>>>>>     $ gender    : Factor w/ 2 levels "0","1": 1 2 1 1 2 1 2 1 2 2 ...
>>>>>     $ education : Factor w/ 8 levels "1","2","3","4",..: 6 7 6 8 2 4 2 4 2 6 ...
>>>>>     $ employment: Factor w/ 9 levels "1","2","3","4",..: 8 4 4 4 3 8 5 8 4 4 ...
>>>>>     $ income    : num  550000 80000 90000 19000 42000 30000 18000 50000 800000 10000 ...
>>>>>     $ home: num  0 0 0 0 0 0 0 0 0 0 ...
>>>>>     $ ideol     : Factor w/ 7 levels "1","2","3","4",..: 2 7 4 3 2 4 2 3 2 6 ...
>>>>>     $ home_lot  : Factor w/ 3 levels "1","2","3": 2 2 2 2 2 2 3 3 1 2 ...
>>>>>     $ hispanic  : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ...
>>>>>     $ comp_grp2 : Factor w/ 16 levels "Cr_Gr","Cr_Ot",..: 13 13 13 13 13 13 10 10 10 10 ...
>>>>>     $ know_fin : Factor w/ 3 levels "0","1","2": 2 2 2 2 2 2 2 2 2 2 ...
>>>>> 
>>>>> 
>>>>> With the regular glm() function, I get a warning about "perfect or quasi-perfect separation"[1]. I looked for a method to deal with this and a penalized GLM is an accepted method[2]. This is implemented in logistf(). I used the default settings for the function.
>>>>> 
>>>>> Just before I run the model, memory.size() for my session is ~4500 (MB). memory.limit() is ~25500. When I start the model, R immediately becomes non-responsive. This is in a Windows environment and in Task Manager, the instance of R is, and has been, using ~13% of CPU aand ~4997 MB of RAM. It's been ~24 hours now in that state and I don't have any idea of how long this should take. If I run the same model in the same setting with the base glm(), the model runs in about 60 seconds. Is there a way to know if the process is going to produce something useful after all this time or if it's hanging on some kind of problem?
>>>>> 
>>>>> 
>>>>>   [1]:https://stats.stackexchange.com/questions/11109/how-to-deal-with-perfect-separation-in-logistic-regression#68917     [2]:https://academic.oup.com/biomet/article-abstract/80/1/27/228364/Bias-reduction-of-maximum-likelihood-estimates  
>>>>> 
> 
> 
> -- 
> Men occasionally stumble
> over the truth, but most of them
> pick themselves up and hurry off
> as if nothing had happened.
> -- Winston Churchill
> 


From dimitri.liakhovitski at gmail.com  Thu Jul 27 16:49:47 2017
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Thu, 27 Jul 2017 10:49:47 -0400
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
In-Reply-To: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
References: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
Message-ID: <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>

To clarify: my question is not about "who could I exclude NAs from being
counted" - I know how to do that.
My question is: Why na.rm = T is not working for geom_bar in this case?

On Thu, Jul 27, 2017 at 8:24 AM, Dimitri Liakhovitski <
dimitri.liakhovitski at gmail.com> wrote:

> Hello!
>
> I am trying to understand how ggplot2's geom_bar treats NAs.
> The help file says:
>
> library(ggplot2)
> ?geom_bar
> na.rm: If FALSE, the default, missing values are removed with a warning.
> If TRUE, missing values are silently removed.
>
> I am trying it out:
> md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3], rep(NA,
> 3)))
> str(md); levels(md$a)
>
> ggplot(data = md, mapping = aes(x = a)) +
>   geom_bar(na.rm = F)
> It runs without warnings and generates counts for each factor level AS
> WELL AS the NAs. Makes sense.
>
> Now, I don't want the NAs to be counted. So, I run:
> ggplot(data = md, mapping = aes(x = a)) +
>   geom_bar(na.rm = T)
>
> But I still have NAs in the picture. Why?
> What am I missing?
>
> Thank you!
> --
> Dimitri Liakhovitski
>



-- 
Dimitri Liakhovitski

	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Thu Jul 27 16:57:23 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Thu, 27 Jul 2017 07:57:23 -0700
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
In-Reply-To: <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
References: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
 <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
Message-ID: <CAGxFJbStt7E4T+sgM3a4qb2YHA2mr3Dmj9m_=hFX6Q7_2hMEcg@mail.gmail.com>

Just a thought:

Did you try na.rm = TRUE  in case you have an object named "T" in scope?

-- Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jul 27, 2017 at 7:49 AM, Dimitri Liakhovitski
<dimitri.liakhovitski at gmail.com> wrote:
> To clarify: my question is not about "who could I exclude NAs from being
> counted" - I know how to do that.
> My question is: Why na.rm = T is not working for geom_bar in this case?
>
> On Thu, Jul 27, 2017 at 8:24 AM, Dimitri Liakhovitski <
> dimitri.liakhovitski at gmail.com> wrote:
>
>> Hello!
>>
>> I am trying to understand how ggplot2's geom_bar treats NAs.
>> The help file says:
>>
>> library(ggplot2)
>> ?geom_bar
>> na.rm: If FALSE, the default, missing values are removed with a warning.
>> If TRUE, missing values are silently removed.
>>
>> I am trying it out:
>> md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3], rep(NA,
>> 3)))
>> str(md); levels(md$a)
>>
>> ggplot(data = md, mapping = aes(x = a)) +
>>   geom_bar(na.rm = F)
>> It runs without warnings and generates counts for each factor level AS
>> WELL AS the NAs. Makes sense.
>>
>> Now, I don't want the NAs to be counted. So, I run:
>> ggplot(data = md, mapping = aes(x = a)) +
>>   geom_bar(na.rm = T)
>>
>> But I still have NAs in the picture. Why?
>> What am I missing?
>>
>> Thank you!
>> --
>> Dimitri Liakhovitski
>>
>
>
>
> --
> Dimitri Liakhovitski
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dimitri.liakhovitski at gmail.com  Thu Jul 27 17:18:03 2017
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Thu, 27 Jul 2017 11:18:03 -0400
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
In-Reply-To: <CAGxFJbStt7E4T+sgM3a4qb2YHA2mr3Dmj9m_=hFX6Q7_2hMEcg@mail.gmail.com>
References: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
 <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
 <CAGxFJbStt7E4T+sgM3a4qb2YHA2mr3Dmj9m_=hFX6Q7_2hMEcg@mail.gmail.com>
Message-ID: <CAN2xGJZ3OH3fme1cdkD95KwyoUHYWBCw3YBFaZwoQ-hcaAqJUw@mail.gmail.com>

Thank you, Bert!

I do NOT have an object named "T" in scope (I checked - and besides, it
would never occur to me to use this name).
TRUE or T results in the same unexpected behavior:

ggplot(data = md, mapping = aes(x = a)) +
  geom_bar(na.rm = TRUE)



On Thu, Jul 27, 2017 at 10:57 AM, Bert Gunter <bgunter.4567 at gmail.com>
wrote:

> Just a thought:
>
> Did you try na.rm = TRUE  in case you have an object named "T" in scope?
>
> -- Bert
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Thu, Jul 27, 2017 at 7:49 AM, Dimitri Liakhovitski
> <dimitri.liakhovitski at gmail.com> wrote:
> > To clarify: my question is not about "who could I exclude NAs from being
> > counted" - I know how to do that.
> > My question is: Why na.rm = T is not working for geom_bar in this case?
> >
> > On Thu, Jul 27, 2017 at 8:24 AM, Dimitri Liakhovitski <
> > dimitri.liakhovitski at gmail.com> wrote:
> >
> >> Hello!
> >>
> >> I am trying to understand how ggplot2's geom_bar treats NAs.
> >> The help file says:
> >>
> >> library(ggplot2)
> >> ?geom_bar
> >> na.rm: If FALSE, the default, missing values are removed with a warning.
> >> If TRUE, missing values are silently removed.
> >>
> >> I am trying it out:
> >> md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3], rep(NA,
> >> 3)))
> >> str(md); levels(md$a)
> >>
> >> ggplot(data = md, mapping = aes(x = a)) +
> >>   geom_bar(na.rm = F)
> >> It runs without warnings and generates counts for each factor level AS
> >> WELL AS the NAs. Makes sense.
> >>
> >> Now, I don't want the NAs to be counted. So, I run:
> >> ggplot(data = md, mapping = aes(x = a)) +
> >>   geom_bar(na.rm = T)
> >>
> >> But I still have NAs in the picture. Why?
> >> What am I missing?
> >>
> >> Thank you!
> >> --
> >> Dimitri Liakhovitski
> >>
> >
> >
> >
> > --
> > Dimitri Liakhovitski
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>



-- 
Dimitri Liakhovitski

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Thu Jul 27 17:18:59 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Thu, 27 Jul 2017 08:18:59 -0700
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
In-Reply-To: <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
References: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
 <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
Message-ID: <9A2CBC05-3701-4E28-BCDF-944B5FF61C73@dcn.davis.ca.us>

I suspect this is by design. Questions about "why" should probably cc the contributed package maintainer(s).
-- 
Sent from my phone. Please excuse my brevity.

On July 27, 2017 7:49:47 AM PDT, Dimitri Liakhovitski <dimitri.liakhovitski at gmail.com> wrote:
>To clarify: my question is not about "who could I exclude NAs from
>being
>counted" - I know how to do that.
>My question is: Why na.rm = T is not working for geom_bar in this case?
>
>On Thu, Jul 27, 2017 at 8:24 AM, Dimitri Liakhovitski <
>dimitri.liakhovitski at gmail.com> wrote:
>
>> Hello!
>>
>> I am trying to understand how ggplot2's geom_bar treats NAs.
>> The help file says:
>>
>> library(ggplot2)
>> ?geom_bar
>> na.rm: If FALSE, the default, missing values are removed with a
>warning.
>> If TRUE, missing values are silently removed.
>>
>> I am trying it out:
>> md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3],
>rep(NA,
>> 3)))
>> str(md); levels(md$a)
>>
>> ggplot(data = md, mapping = aes(x = a)) +
>>   geom_bar(na.rm = F)
>> It runs without warnings and generates counts for each factor level
>AS
>> WELL AS the NAs. Makes sense.
>>
>> Now, I don't want the NAs to be counted. So, I run:
>> ggplot(data = md, mapping = aes(x = a)) +
>>   geom_bar(na.rm = T)
>>
>> But I still have NAs in the picture. Why?
>> What am I missing?
>>
>> Thank you!
>> --
>> Dimitri Liakhovitski
>>


From dimitri.liakhovitski at gmail.com  Thu Jul 27 17:24:33 2017
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Thu, 27 Jul 2017 11:24:33 -0400
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
In-Reply-To: <9A2CBC05-3701-4E28-BCDF-944B5FF61C73@dcn.davis.ca.us>
References: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
 <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
 <9A2CBC05-3701-4E28-BCDF-944B5FF61C73@dcn.davis.ca.us>
Message-ID: <CAN2xGJZUHs9rwy7ug-3NpDk2tFAas88Uc7UZJUSCe37e2=dqPQ@mail.gmail.com>

Good point. cc'ing Hadley.

Well geom_bar help page clearly states:
na.rm: If FALSE, the default, missing values are removed with a warning. If
TRUE, missing values are silently removed.

But they are not being removed in my example - silently or loudly.

On Thu, Jul 27, 2017 at 11:18 AM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> I suspect this is by design. Questions about "why" should probably cc the
> contributed package maintainer(s).
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 27, 2017 7:49:47 AM PDT, Dimitri Liakhovitski <
> dimitri.liakhovitski at gmail.com> wrote:
> >To clarify: my question is not about "who could I exclude NAs from
> >being
> >counted" - I know how to do that.
> >My question is: Why na.rm = T is not working for geom_bar in this case?
> >
> >On Thu, Jul 27, 2017 at 8:24 AM, Dimitri Liakhovitski <
> >dimitri.liakhovitski at gmail.com> wrote:
> >
> >> Hello!
> >>
> >> I am trying to understand how ggplot2's geom_bar treats NAs.
> >> The help file says:
> >>
> >> library(ggplot2)
> >> ?geom_bar
> >> na.rm: If FALSE, the default, missing values are removed with a
> >warning.
> >> If TRUE, missing values are silently removed.
> >>
> >> I am trying it out:
> >> md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3],
> >rep(NA,
> >> 3)))
> >> str(md); levels(md$a)
> >>
> >> ggplot(data = md, mapping = aes(x = a)) +
> >>   geom_bar(na.rm = F)
> >> It runs without warnings and generates counts for each factor level
> >AS
> >> WELL AS the NAs. Makes sense.
> >>
> >> Now, I don't want the NAs to be counted. So, I run:
> >> ggplot(data = md, mapping = aes(x = a)) +
> >>   geom_bar(na.rm = T)
> >>
> >> But I still have NAs in the picture. Why?
> >> What am I missing?
> >>
> >> Thank you!
> >> --
> >> Dimitri Liakhovitski
> >>
>



-- 
Dimitri Liakhovitski

	[[alternative HTML version deleted]]


From sandoz at free.fr  Thu Jul 27 17:01:12 2017
From: sandoz at free.fr (sandoz at free.fr)
Date: Thu, 27 Jul 2017 17:01:12 +0200 (CEST)
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
 value = integer(0))  with mlogit
In-Reply-To: <1352163946.21189601.1501167471360.JavaMail.root@spooler3-g27.priv.proxad.net>
Message-ID: <1033380241.21205219.1501167672580.JavaMail.root@spooler3-g27.priv.proxad.net>

Hi,
Please  help about the error I am getting after the h1.dat<- line :
this line worked with much more independant variables and bigger data.
This time I want to work with just 2 variables cteD & cteTh.
What is wrong ?

> setwd("C:/Rstudio/Trot")
> library(mlogit)
> horse1.data<-read.csv("cte2.csv")
> h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")

Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0)) : 
  le tableau de remplacement a 0 lignes, le tableau remplac? en a 26


> mul1.model<-mlogit(win~cteD+cteTh|0|0,data=h1.dat)
Error in mlogit(win ~ cteD + cteTh | 0 | 0, data = h1.dat) : 
  object 'h1.dat' not found


> head(horse.data,27)
   raceid.nbChev.cteD.cteTh.win
1              1;9;29.6;23.8;no
2                1;9;5.3;6.7;no
3              1;9;10.9;11.5;no
4               1;9;8.2;6.7;yes
5              1;9;17.8;18.2;no
6                  1;9;26;30;no
7                1;9;4.4;5.7;no
8                  1;9;4.9;6;no
9                1;9;4.5;6.9;no
10            2;17;32.1;48.3;no
11             2;17;8.8;24.5;no
12            2;17;36.7;18.3;no
13            2;17;6.7;11.8;yes
14            2;17;10.3;12.8;no
15            2;17;61.6;68.5;no
16              2;17;2.5;6.7;no
17            2;17;27.7;30.9;no
18             2;17;8.4;10.5;no
19            2;17;56.5;40.7;no
20            2;17;95.5;11.9;no
21             2;17;12.7;6.4;no
22            2;17;19.6;14.2;no
23           2;17;269.6;67.2;no
24             2;17;300;75.6;no
25            2;17;300;114.3;no
26            2;17;36.3;16.9;no


From jdnewmil at dcn.davis.ca.us  Thu Jul 27 17:53:21 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Thu, 27 Jul 2017 08:53:21 -0700
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
In-Reply-To: <CAN2xGJZ3OH3fme1cdkD95KwyoUHYWBCw3YBFaZwoQ-hcaAqJUw@mail.gmail.com>
References: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
 <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
 <CAGxFJbStt7E4T+sgM3a4qb2YHA2mr3Dmj9m_=hFX6Q7_2hMEcg@mail.gmail.com>
 <CAN2xGJZ3OH3fme1cdkD95KwyoUHYWBCw3YBFaZwoQ-hcaAqJUw@mail.gmail.com>
Message-ID: <50AE3670-0DE2-4FB5-8ACD-F76176AEEE4B@dcn.davis.ca.us>

I think you should be more suspicious of yourself, Dimitri. A letter T variable can easily arise in the problem domain when you are not thinking of logical values at all, at which point your cavalier use of T as a synonym for TRUE can suddenly become a bug.
-- 
Sent from my phone. Please excuse my brevity.

On July 27, 2017 8:18:03 AM PDT, Dimitri Liakhovitski <dimitri.liakhovitski at gmail.com> wrote:
>Thank you, Bert!
>
>I do NOT have an object named "T" in scope (I checked - and besides, it
>would never occur to me to use this name).
>TRUE or T results in the same unexpected behavior:
>
>ggplot(data = md, mapping = aes(x = a)) +
>  geom_bar(na.rm = TRUE)
>
>
>
>On Thu, Jul 27, 2017 at 10:57 AM, Bert Gunter <bgunter.4567 at gmail.com>
>wrote:
>
>> Just a thought:
>>
>> Did you try na.rm = TRUE  in case you have an object named "T" in
>scope?
>>
>> -- Bert
>>
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming
>along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Thu, Jul 27, 2017 at 7:49 AM, Dimitri Liakhovitski
>> <dimitri.liakhovitski at gmail.com> wrote:
>> > To clarify: my question is not about "who could I exclude NAs from
>being
>> > counted" - I know how to do that.
>> > My question is: Why na.rm = T is not working for geom_bar in this
>case?
>> >
>> > On Thu, Jul 27, 2017 at 8:24 AM, Dimitri Liakhovitski <
>> > dimitri.liakhovitski at gmail.com> wrote:
>> >
>> >> Hello!
>> >>
>> >> I am trying to understand how ggplot2's geom_bar treats NAs.
>> >> The help file says:
>> >>
>> >> library(ggplot2)
>> >> ?geom_bar
>> >> na.rm: If FALSE, the default, missing values are removed with a
>warning.
>> >> If TRUE, missing values are silently removed.
>> >>
>> >> I am trying it out:
>> >> md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3],
>rep(NA,
>> >> 3)))
>> >> str(md); levels(md$a)
>> >>
>> >> ggplot(data = md, mapping = aes(x = a)) +
>> >>   geom_bar(na.rm = F)
>> >> It runs without warnings and generates counts for each factor
>level AS
>> >> WELL AS the NAs. Makes sense.
>> >>
>> >> Now, I don't want the NAs to be counted. So, I run:
>> >> ggplot(data = md, mapping = aes(x = a)) +
>> >>   geom_bar(na.rm = T)
>> >>
>> >> But I still have NAs in the picture. Why?
>> >> What am I missing?
>> >>
>> >> Thank you!
>> >> --
>> >> Dimitri Liakhovitski
>> >>
>> >
>> >
>> >
>> > --
>> > Dimitri Liakhovitski
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/
>> posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>


From dimitri.liakhovitski at gmail.com  Thu Jul 27 17:58:55 2017
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Thu, 27 Jul 2017 11:58:55 -0400
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
In-Reply-To: <50AE3670-0DE2-4FB5-8ACD-F76176AEEE4B@dcn.davis.ca.us>
References: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
 <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
 <CAGxFJbStt7E4T+sgM3a4qb2YHA2mr3Dmj9m_=hFX6Q7_2hMEcg@mail.gmail.com>
 <CAN2xGJZ3OH3fme1cdkD95KwyoUHYWBCw3YBFaZwoQ-hcaAqJUw@mail.gmail.com>
 <50AE3670-0DE2-4FB5-8ACD-F76176AEEE4B@dcn.davis.ca.us>
Message-ID: <CAN2xGJZG0zaDhO-E1mm8WyYwxbKx=GGMdUGUfFe9mtJiqcgA5Q@mail.gmail.com>

?hanks for the advice, Jeff. Will keep it in mind.
But I am anal - I shy away from using letters and words that "look
familiar" to me in R (such as mean, sd, T, etc.)
But still, it's a good advice.

On Thu, Jul 27, 2017 at 11:53 AM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> I think you should be more suspicious of yourself, Dimitri. A letter T
> variable can easily arise in the problem domain when you are not thinking
> of logical values at all, at which point your cavalier use of T as a
> synonym for TRUE can suddenly become a bug.
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 27, 2017 8:18:03 AM PDT, Dimitri Liakhovitski <
> dimitri.liakhovitski at gmail.com> wrote:
> >Thank you, Bert!
> >
> >I do NOT have an object named "T" in scope (I checked - and besides, it
> >would never occur to me to use this name).
> >TRUE or T results in the same unexpected behavior:
> >
> >ggplot(data = md, mapping = aes(x = a)) +
> >  geom_bar(na.rm = TRUE)
> >
> >
> >
> >On Thu, Jul 27, 2017 at 10:57 AM, Bert Gunter <bgunter.4567 at gmail.com>
> >wrote:
> >
> >> Just a thought:
> >>
> >> Did you try na.rm = TRUE  in case you have an object named "T" in
> >scope?
> >>
> >> -- Bert
> >>
> >>
> >> Bert Gunter
> >>
> >> "The trouble with having an open mind is that people keep coming
> >along
> >> and sticking things into it."
> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>
> >>
> >> On Thu, Jul 27, 2017 at 7:49 AM, Dimitri Liakhovitski
> >> <dimitri.liakhovitski at gmail.com> wrote:
> >> > To clarify: my question is not about "who could I exclude NAs from
> >being
> >> > counted" - I know how to do that.
> >> > My question is: Why na.rm = T is not working for geom_bar in this
> >case?
> >> >
> >> > On Thu, Jul 27, 2017 at 8:24 AM, Dimitri Liakhovitski <
> >> > dimitri.liakhovitski at gmail.com> wrote:
> >> >
> >> >> Hello!
> >> >>
> >> >> I am trying to understand how ggplot2's geom_bar treats NAs.
> >> >> The help file says:
> >> >>
> >> >> library(ggplot2)
> >> >> ?geom_bar
> >> >> na.rm: If FALSE, the default, missing values are removed with a
> >warning.
> >> >> If TRUE, missing values are silently removed.
> >> >>
> >> >> I am trying it out:
> >> >> md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3],
> >rep(NA,
> >> >> 3)))
> >> >> str(md); levels(md$a)
> >> >>
> >> >> ggplot(data = md, mapping = aes(x = a)) +
> >> >>   geom_bar(na.rm = F)
> >> >> It runs without warnings and generates counts for each factor
> >level AS
> >> >> WELL AS the NAs. Makes sense.
> >> >>
> >> >> Now, I don't want the NAs to be counted. So, I run:
> >> >> ggplot(data = md, mapping = aes(x = a)) +
> >> >>   geom_bar(na.rm = T)
> >> >>
> >> >> But I still have NAs in the picture. Why?
> >> >> What am I missing?
> >> >>
> >> >> Thank you!
> >> >> --
> >> >> Dimitri Liakhovitski
> >> >>
> >> >
> >> >
> >> >
> >> > --
> >> > Dimitri Liakhovitski
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide http://www.R-project.org/
> >> posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
> >>
>



-- 
Dimitri Liakhovitski

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Thu Jul 27 18:03:41 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Thu, 27 Jul 2017 09:03:41 -0700
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
	value = integer(0))  with mlogit
In-Reply-To: <1033380241.21205219.1501167672580.JavaMail.root@spooler3-g27.priv.proxad.net>
References: <1033380241.21205219.1501167672580.JavaMail.root@spooler3-g27.priv.proxad.net>
Message-ID: <4DC6A46A-A109-415F-9995-D964FB581835@dcn.davis.ca.us>

Looks like you need to pay attention to how you read in your data.  In general, you should always execute one statement at a time until you know your script is working.  All the errors after the first one are unhelpful to you or us. 

If you actually pay attention to what is in your horse.data data frame after you have read it in, the columns did not get separated out. The "csv" in in read.csv stands for "comma", and your file appears to use semicolons. Read the help for read.csv using

?read.csv

and use the sep=";" argument. You should always use the str() function to look at your data and make sure it looks reasonable before you start trying to give it to other functions to analyze.
-- 
Sent from my phone. Please excuse my brevity.

On July 27, 2017 8:01:12 AM PDT, sandoz at free.fr wrote:
>Hi,
>Please  help about the error I am getting after the h1.dat<- line :
>this line worked with much more independant variables and bigger data.
>This time I want to work with just 2 variables cteD & cteTh.
>What is wrong ?
>
>> setwd("C:/Rstudio/Trot")
>> library(mlogit)
>> horse1.data<-read.csv("cte2.csv")
>>
>h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")
>
>Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0)) : 
>  le tableau de remplacement a 0 lignes, le tableau remplac? en a 26
>
>
>> mul1.model<-mlogit(win~cteD+cteTh|0|0,data=h1.dat)
>Error in mlogit(win ~ cteD + cteTh | 0 | 0, data = h1.dat) : 
>  object 'h1.dat' not found
>
>
>> head(horse.data,27)
>   raceid.nbChev.cteD.cteTh.win
>1              1;9;29.6;23.8;no
>2                1;9;5.3;6.7;no
>3              1;9;10.9;11.5;no
>4               1;9;8.2;6.7;yes
>5              1;9;17.8;18.2;no
>6                  1;9;26;30;no
>7                1;9;4.4;5.7;no
>8                  1;9;4.9;6;no
>9                1;9;4.5;6.9;no
>10            2;17;32.1;48.3;no
>11             2;17;8.8;24.5;no
>12            2;17;36.7;18.3;no
>13            2;17;6.7;11.8;yes
>14            2;17;10.3;12.8;no
>15            2;17;61.6;68.5;no
>16              2;17;2.5;6.7;no
>17            2;17;27.7;30.9;no
>18             2;17;8.4;10.5;no
>19            2;17;56.5;40.7;no
>20            2;17;95.5;11.9;no
>21             2;17;12.7;6.4;no
>22            2;17;19.6;14.2;no
>23           2;17;269.6;67.2;no
>24             2;17;300;75.6;no
>25            2;17;300;114.3;no
>26            2;17;36.3;16.9;no
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From dimitri.liakhovitski at gmail.com  Thu Jul 27 20:43:30 2017
From: dimitri.liakhovitski at gmail.com (Dimitri Liakhovitski)
Date: Thu, 27 Jul 2017 14:43:30 -0400
Subject: [R] na.rm = T treatment by ggplot2's geom_bar
In-Reply-To: <CAN2xGJZG0zaDhO-E1mm8WyYwxbKx=GGMdUGUfFe9mtJiqcgA5Q@mail.gmail.com>
References: <CAN2xGJbewqTFDcCg8p0EtgmprjZorsiiEvH72Fz-f+fSEhU96w@mail.gmail.com>
 <CAN2xGJbJHQ5QkT7L8qZ_2qNTGbpG54qYERv3-wDuMxDhHh2zoQ@mail.gmail.com>
 <CAGxFJbStt7E4T+sgM3a4qb2YHA2mr3Dmj9m_=hFX6Q7_2hMEcg@mail.gmail.com>
 <CAN2xGJZ3OH3fme1cdkD95KwyoUHYWBCw3YBFaZwoQ-hcaAqJUw@mail.gmail.com>
 <50AE3670-0DE2-4FB5-8ACD-F76176AEEE4B@dcn.davis.ca.us>
 <CAN2xGJZG0zaDhO-E1mm8WyYwxbKx=GGMdUGUfFe9mtJiqcgA5Q@mail.gmail.com>
Message-ID: <CAN2xGJb--R3cV3HMySSv-xE9=SLtHVHJT3se+i8z8h-tQSO0Yw@mail.gmail.com>

Important to notice: this seems to be an issue only with an unordered
factor on the X axis. When the variable is numeric or an ordered factor,
then it works as described in Help.

On Thu, Jul 27, 2017 at 11:58 AM, Dimitri Liakhovitski <
dimitri.liakhovitski at gmail.com> wrote:

> ?hanks for the advice, Jeff. Will keep it in mind.
> But I am anal - I shy away from using letters and words that "look
> familiar" to me in R (such as mean, sd, T, etc.)
> But still, it's a good advice.
>
> On Thu, Jul 27, 2017 at 11:53 AM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us
> > wrote:
>
>> I think you should be more suspicious of yourself, Dimitri. A letter T
>> variable can easily arise in the problem domain when you are not thinking
>> of logical values at all, at which point your cavalier use of T as a
>> synonym for TRUE can suddenly become a bug.
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> On July 27, 2017 8:18:03 AM PDT, Dimitri Liakhovitski <
>> dimitri.liakhovitski at gmail.com> wrote:
>> >Thank you, Bert!
>> >
>> >I do NOT have an object named "T" in scope (I checked - and besides, it
>> >would never occur to me to use this name).
>> >TRUE or T results in the same unexpected behavior:
>> >
>> >ggplot(data = md, mapping = aes(x = a)) +
>> >  geom_bar(na.rm = TRUE)
>> >
>> >
>> >
>> >On Thu, Jul 27, 2017 at 10:57 AM, Bert Gunter <bgunter.4567 at gmail.com>
>> >wrote:
>> >
>> >> Just a thought:
>> >>
>> >> Did you try na.rm = TRUE  in case you have an object named "T" in
>> >scope?
>> >>
>> >> -- Bert
>> >>
>> >>
>> >> Bert Gunter
>> >>
>> >> "The trouble with having an open mind is that people keep coming
>> >along
>> >> and sticking things into it."
>> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>> >>
>> >>
>> >> On Thu, Jul 27, 2017 at 7:49 AM, Dimitri Liakhovitski
>> >> <dimitri.liakhovitski at gmail.com> wrote:
>> >> > To clarify: my question is not about "who could I exclude NAs from
>> >being
>> >> > counted" - I know how to do that.
>> >> > My question is: Why na.rm = T is not working for geom_bar in this
>> >case?
>> >> >
>> >> > On Thu, Jul 27, 2017 at 8:24 AM, Dimitri Liakhovitski <
>> >> > dimitri.liakhovitski at gmail.com> wrote:
>> >> >
>> >> >> Hello!
>> >> >>
>> >> >> I am trying to understand how ggplot2's geom_bar treats NAs.
>> >> >> The help file says:
>> >> >>
>> >> >> library(ggplot2)
>> >> >> ?geom_bar
>> >> >> na.rm: If FALSE, the default, missing values are removed with a
>> >warning.
>> >> >> If TRUE, missing values are silently removed.
>> >> >>
>> >> >> I am trying it out:
>> >> >> md <- data.frame(a = c(letters[1:5], letters[1:4], letters[1:3],
>> >rep(NA,
>> >> >> 3)))
>> >> >> str(md); levels(md$a)
>> >> >>
>> >> >> ggplot(data = md, mapping = aes(x = a)) +
>> >> >>   geom_bar(na.rm = F)
>> >> >> It runs without warnings and generates counts for each factor
>> >level AS
>> >> >> WELL AS the NAs. Makes sense.
>> >> >>
>> >> >> Now, I don't want the NAs to be counted. So, I run:
>> >> >> ggplot(data = md, mapping = aes(x = a)) +
>> >> >>   geom_bar(na.rm = T)
>> >> >>
>> >> >> But I still have NAs in the picture. Why?
>> >> >> What am I missing?
>> >> >>
>> >> >> Thank you!
>> >> >> --
>> >> >> Dimitri Liakhovitski
>> >> >>
>> >> >
>> >> >
>> >> >
>> >> > --
>> >> > Dimitri Liakhovitski
>> >> >
>> >> >         [[alternative HTML version deleted]]
>> >> >
>> >> > ______________________________________________
>> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> >> > https://stat.ethz.ch/mailman/listinfo/r-help
>> >> > PLEASE do read the posting guide http://www.R-project.org/
>> >> posting-guide.html
>> >> > and provide commented, minimal, self-contained, reproducible code.
>> >>
>>
>
>
>
> --
> Dimitri Liakhovitski
>



-- 
Dimitri Liakhovitski

	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Thu Jul 27 21:36:13 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 27 Jul 2017 21:36:13 +0200
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
 value = integer(0))  with mlogit
In-Reply-To: <4DC6A46A-A109-415F-9995-D964FB581835@dcn.davis.ca.us>
References: <1033380241.21205219.1501167672580.JavaMail.root@spooler3-g27.priv.proxad.net>
 <4DC6A46A-A109-415F-9995-D964FB581835@dcn.davis.ca.us>
Message-ID: <367E754D-895D-4D0E-B162-887319EA2181@gmail.com>


> On 27 Jul 2017, at 18:03 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> Looks like you need to pay attention to how you read in your data.  In general, you should always execute one statement at a time until you know your script is working.  All the errors after the first one are unhelpful to you or us. 
> 
> If you actually pay attention to what is in your horse.data data frame after you have read it in, the columns did not get separated out. The "csv" in in read.csv stands for "comma", and your file appears to use semicolons. Read the help for read.csv using
> 
> ?read.csv
> 
> and use the sep=";" argument. You should always use the str() function to look at your data and make sure it looks reasonable before you start trying to give it to other functions to analyze.

Or use read.csv2 which exists for that reason. (It may be "c" for comma, but in locales that use comma as the decimal point it is replaced by the semicolon, as you'll find out if you save an Excel file as CSV in, say, France. This is due to some idiotic decisions from early 1990s, but there you are...) 

-pd


> -- 
> Sent from my phone. Please excuse my brevity.
> 
> On July 27, 2017 8:01:12 AM PDT, sandoz at free.fr wrote:
>> Hi,
>> Please  help about the error I am getting after the h1.dat<- line :
>> this line worked with much more independant variables and bigger data.
>> This time I want to work with just 2 variables cteD & cteTh.
>> What is wrong ?
>> 
>>> setwd("C:/Rstudio/Trot")
>>> library(mlogit)
>>> horse1.data<-read.csv("cte2.csv")
>>> 
>> h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")
>> 
>> Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0)) : 
>> le tableau de remplacement a 0 lignes, le tableau remplac? en a 26
>> 
>> 
>>> mul1.model<-mlogit(win~cteD+cteTh|0|0,data=h1.dat)
>> Error in mlogit(win ~ cteD + cteTh | 0 | 0, data = h1.dat) : 
>> object 'h1.dat' not found
>> 
>> 
>>> head(horse.data,27)
>>  raceid.nbChev.cteD.cteTh.win
>> 1              1;9;29.6;23.8;no
>> 2                1;9;5.3;6.7;no
>> 3              1;9;10.9;11.5;no
>> 4               1;9;8.2;6.7;yes
>> 5              1;9;17.8;18.2;no
>> 6                  1;9;26;30;no
>> 7                1;9;4.4;5.7;no
>> 8                  1;9;4.9;6;no
>> 9                1;9;4.5;6.9;no
>> 10            2;17;32.1;48.3;no
>> 11             2;17;8.8;24.5;no
>> 12            2;17;36.7;18.3;no
>> 13            2;17;6.7;11.8;yes
>> 14            2;17;10.3;12.8;no
>> 15            2;17;61.6;68.5;no
>> 16              2;17;2.5;6.7;no
>> 17            2;17;27.7;30.9;no
>> 18             2;17;8.4;10.5;no
>> 19            2;17;56.5;40.7;no
>> 20            2;17;95.5;11.9;no
>> 21             2;17;12.7;6.4;no
>> 22            2;17;19.6;14.2;no
>> 23           2;17;269.6;67.2;no
>> 24             2;17;300;75.6;no
>> 25            2;17;300;114.3;no
>> 26            2;17;36.3;16.9;no
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From jdnewmil at dcn.davis.ca.us  Thu Jul 27 22:14:31 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Thu, 27 Jul 2017 13:14:31 -0700
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
	value = integer(0))  with mlogit
In-Reply-To: <367E754D-895D-4D0E-B162-887319EA2181@gmail.com>
References: <1033380241.21205219.1501167672580.JavaMail.root@spooler3-g27.priv.proxad.net>
 <4DC6A46A-A109-415F-9995-D964FB581835@dcn.davis.ca.us>
 <367E754D-895D-4D0E-B162-887319EA2181@gmail.com>
Message-ID: <1F108F79-1A10-4F6A-BA70-2F5B02698D40@dcn.davis.ca.us>

True, except that the head of their file had periods in the numbers. 
-- 
Sent from my phone. Please excuse my brevity.

On July 27, 2017 12:36:13 PM PDT, peter dalgaard <pdalgd at gmail.com> wrote:
>
>> On 27 Jul 2017, at 18:03 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>wrote:
>> 
>> Looks like you need to pay attention to how you read in your data. 
>In general, you should always execute one statement at a time until you
>know your script is working.  All the errors after the first one are
>unhelpful to you or us. 
>> 
>> If you actually pay attention to what is in your horse.data data
>frame after you have read it in, the columns did not get separated out.
>The "csv" in in read.csv stands for "comma", and your file appears to
>use semicolons. Read the help for read.csv using
>> 
>> ?read.csv
>> 
>> and use the sep=";" argument. You should always use the str()
>function to look at your data and make sure it looks reasonable before
>you start trying to give it to other functions to analyze.
>
>Or use read.csv2 which exists for that reason. (It may be "c" for
>comma, but in locales that use comma as the decimal point it is
>replaced by the semicolon, as you'll find out if you save an Excel file
>as CSV in, say, France. This is due to some idiotic decisions from
>early 1990s, but there you are...) 
>
>-pd
>
>
>> -- 
>> Sent from my phone. Please excuse my brevity.
>> 
>> On July 27, 2017 8:01:12 AM PDT, sandoz at free.fr wrote:
>>> Hi,
>>> Please  help about the error I am getting after the h1.dat<- line :
>>> this line worked with much more independant variables and bigger
>data.
>>> This time I want to work with just 2 variables cteD & cteTh.
>>> What is wrong ?
>>> 
>>>> setwd("C:/Rstudio/Trot")
>>>> library(mlogit)
>>>> horse1.data<-read.csv("cte2.csv")
>>>> 
>>>
>h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")
>>> 
>>> Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0)) : 
>>> le tableau de remplacement a 0 lignes, le tableau remplac? en a 26
>>> 
>>> 
>>>> mul1.model<-mlogit(win~cteD+cteTh|0|0,data=h1.dat)
>>> Error in mlogit(win ~ cteD + cteTh | 0 | 0, data = h1.dat) : 
>>> object 'h1.dat' not found
>>> 
>>> 
>>>> head(horse.data,27)
>>>  raceid.nbChev.cteD.cteTh.win
>>> 1              1;9;29.6;23.8;no
>>> 2                1;9;5.3;6.7;no
>>> 3              1;9;10.9;11.5;no
>>> 4               1;9;8.2;6.7;yes
>>> 5              1;9;17.8;18.2;no
>>> 6                  1;9;26;30;no
>>> 7                1;9;4.4;5.7;no
>>> 8                  1;9;4.9;6;no
>>> 9                1;9;4.5;6.9;no
>>> 10            2;17;32.1;48.3;no
>>> 11             2;17;8.8;24.5;no
>>> 12            2;17;36.7;18.3;no
>>> 13            2;17;6.7;11.8;yes
>>> 14            2;17;10.3;12.8;no
>>> 15            2;17;61.6;68.5;no
>>> 16              2;17;2.5;6.7;no
>>> 17            2;17;27.7;30.9;no
>>> 18             2;17;8.4;10.5;no
>>> 19            2;17;56.5;40.7;no
>>> 20            2;17;95.5;11.9;no
>>> 21             2;17;12.7;6.4;no
>>> 22            2;17;19.6;14.2;no
>>> 23           2;17;269.6;67.2;no
>>> 24             2;17;300;75.6;no
>>> 25            2;17;300;114.3;no
>>> 26            2;17;36.3;16.9;no
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From ruipbarradas at sapo.pt  Thu Jul 27 22:39:58 2017
From: ruipbarradas at sapo.pt (Rui Barradas)
Date: Thu, 27 Jul 2017 21:39:58 +0100
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
 value = integer(0))  with mlogit
In-Reply-To: <367E754D-895D-4D0E-B162-887319EA2181@gmail.com>
References: <1033380241.21205219.1501167672580.JavaMail.root@spooler3-g27.priv.proxad.net>
 <4DC6A46A-A109-415F-9995-D964FB581835@dcn.davis.ca.us>
 <367E754D-895D-4D0E-B162-887319EA2181@gmail.com>
Message-ID: <597A4F9E.20606@sapo.pt>

Hello,

Inline.

Em 27-07-2017 20:36, peter dalgaard escreveu:
>
>> On 27 Jul 2017, at 18:03 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> Looks like you need to pay attention to how you read in your data.  In general, you should always execute one statement at a time until you know your script is working.  All the errors after the first one are unhelpful to you or us.
>>
>> If you actually pay attention to what is in your horse.data data frame after you have read it in, the columns did not get separated out. The "csv" in in read.csv stands for "comma", and your file appears to use semicolons. Read the help for read.csv using
>>
>> ?read.csv
>>
>> and use the sep=";" argument. You should always use the str() function to look at your data and make sure it looks reasonable before you start trying to give it to other functions to analyze.
>
> Or use read.csv2 which exists for that reason. (It may be "c" for comma, but in locales that use comma as the decimal point it is replaced by the semicolon, as you'll find out if you save an Excel file as CSV in, say, France. This is due to some idiotic decisions from early 1990s, but there you are...)

Idiotic? In Portugal that is also true and it "allows" us to use the 
comma as a decimals marker, as you've said. I would use it, with or 
without someone else's decision.

Rui Barradas

>
> -pd
>
>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> On July 27, 2017 8:01:12 AM PDT, sandoz at free.fr wrote:
>>> Hi,
>>> Please  help about the error I am getting after the h1.dat<- line :
>>> this line worked with much more independant variables and bigger data.
>>> This time I want to work with just 2 variables cteD & cteTh.
>>> What is wrong ?
>>>
>>>> setwd("C:/Rstudio/Trot")
>>>> library(mlogit)
>>>> horse1.data<-read.csv("cte2.csv")
>>>>
>>> h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")
>>>
>>> Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0)) :
>>> le tableau de remplacement a 0 lignes, le tableau remplac? en a 26
>>>
>>>
>>>> mul1.model<-mlogit(win~cteD+cteTh|0|0,data=h1.dat)
>>> Error in mlogit(win ~ cteD + cteTh | 0 | 0, data = h1.dat) :
>>> object 'h1.dat' not found
>>>
>>>
>>>> head(horse.data,27)
>>>   raceid.nbChev.cteD.cteTh.win
>>> 1              1;9;29.6;23.8;no
>>> 2                1;9;5.3;6.7;no
>>> 3              1;9;10.9;11.5;no
>>> 4               1;9;8.2;6.7;yes
>>> 5              1;9;17.8;18.2;no
>>> 6                  1;9;26;30;no
>>> 7                1;9;4.4;5.7;no
>>> 8                  1;9;4.9;6;no
>>> 9                1;9;4.5;6.9;no
>>> 10            2;17;32.1;48.3;no
>>> 11             2;17;8.8;24.5;no
>>> 12            2;17;36.7;18.3;no
>>> 13            2;17;6.7;11.8;yes
>>> 14            2;17;10.3;12.8;no
>>> 15            2;17;61.6;68.5;no
>>> 16              2;17;2.5;6.7;no
>>> 17            2;17;27.7;30.9;no
>>> 18             2;17;8.4;10.5;no
>>> 19            2;17;56.5;40.7;no
>>> 20            2;17;95.5;11.9;no
>>> 21             2;17;12.7;6.4;no
>>> 22            2;17;19.6;14.2;no
>>> 23           2;17;269.6;67.2;no
>>> 24             2;17;300;75.6;no
>>> 25            2;17;300;114.3;no
>>> 26            2;17;36.3;16.9;no
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From pdalgd at gmail.com  Fri Jul 28 01:00:23 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 28 Jul 2017 01:00:23 +0200
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
 value = integer(0)) with mlogit
In-Reply-To: <597A4F9E.20606@sapo.pt>
References: <1033380241.21205219.1501167672580.JavaMail.root@spooler3-g27.priv.proxad.net>
 <4DC6A46A-A109-415F-9995-D964FB581835@dcn.davis.ca.us>
 <367E754D-895D-4D0E-B162-887319EA2181@gmail.com> <597A4F9E.20606@sapo.pt>
Message-ID: <7BD200C2-1C11-4DC4-938F-4D9B511AC19E@gmail.com>

It's ancient history, but the idiocy was to take a perfectly fine[*] standard file format and make it use locale dependent number formats, instead of just standardizing on the US format for data transfer purposes.

-pd

[*] OK, less than perfect, given quoting issues and various other stuff...   

> On 27 Jul 2017, at 22:39 , Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
> Hello,
> 
> Inline.
> 
> Em 27-07-2017 20:36, peter dalgaard escreveu:
>> 
>>> On 27 Jul 2017, at 18:03 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>> 
>>> Looks like you need to pay attention to how you read in your data.  In general, you should always execute one statement at a time until you know your script is working.  All the errors after the first one are unhelpful to you or us.
>>> 
>>> If you actually pay attention to what is in your horse.data data frame after you have read it in, the columns did not get separated out. The "csv" in in read.csv stands for "comma", and your file appears to use semicolons. Read the help for read.csv using
>>> 
>>> ?read.csv
>>> 
>>> and use the sep=";" argument. You should always use the str() function to look at your data and make sure it looks reasonable before you start trying to give it to other functions to analyze.
>> 
>> Or use read.csv2 which exists for that reason. (It may be "c" for comma, but in locales that use comma as the decimal point it is replaced by the semicolon, as you'll find out if you save an Excel file as CSV in, say, France. This is due to some idiotic decisions from early 1990s, but there you are...)
> 
> Idiotic? In Portugal that is also true and it "allows" us to use the comma as a decimals marker, as you've said. I would use it, with or without someone else's decision.
> 
> Rui Barradas
> 
>> 
>> -pd
>> 
>> 
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>> 
>>> On July 27, 2017 8:01:12 AM PDT, sandoz at free.fr wrote:
>>>> Hi,
>>>> Please  help about the error I am getting after the h1.dat<- line :
>>>> this line worked with much more independant variables and bigger data.
>>>> This time I want to work with just 2 variables cteD & cteTh.
>>>> What is wrong ?
>>>> 
>>>>> setwd("C:/Rstudio/Trot")
>>>>> library(mlogit)
>>>>> horse1.data<-read.csv("cte2.csv")
>>>>> 
>>>> h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")
>>>> 
>>>> Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0)) :
>>>> le tableau de remplacement a 0 lignes, le tableau remplac? en a 26
>>>> 
>>>> 
>>>>> mul1.model<-mlogit(win~cteD+cteTh|0|0,data=h1.dat)
>>>> Error in mlogit(win ~ cteD + cteTh | 0 | 0, data = h1.dat) :
>>>> object 'h1.dat' not found
>>>> 
>>>> 
>>>>> head(horse.data,27)
>>>>  raceid.nbChev.cteD.cteTh.win
>>>> 1              1;9;29.6;23.8;no
>>>> 2                1;9;5.3;6.7;no
>>>> 3              1;9;10.9;11.5;no
>>>> 4               1;9;8.2;6.7;yes
>>>> 5              1;9;17.8;18.2;no
>>>> 6                  1;9;26;30;no
>>>> 7                1;9;4.4;5.7;no
>>>> 8                  1;9;4.9;6;no
>>>> 9                1;9;4.5;6.9;no
>>>> 10            2;17;32.1;48.3;no
>>>> 11             2;17;8.8;24.5;no
>>>> 12            2;17;36.7;18.3;no
>>>> 13            2;17;6.7;11.8;yes
>>>> 14            2;17;10.3;12.8;no
>>>> 15            2;17;61.6;68.5;no
>>>> 16              2;17;2.5;6.7;no
>>>> 17            2;17;27.7;30.9;no
>>>> 18             2;17;8.4;10.5;no
>>>> 19            2;17;56.5;40.7;no
>>>> 20            2;17;95.5;11.9;no
>>>> 21             2;17;12.7;6.4;no
>>>> 22            2;17;19.6;14.2;no
>>>> 23           2;17;269.6;67.2;no
>>>> 24             2;17;300;75.6;no
>>>> 25            2;17;300;114.3;no
>>>> 26            2;17;36.3;16.9;no
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From paul at stat.auckland.ac.nz  Fri Jul 28 05:32:43 2017
From: paul at stat.auckland.ac.nz (Paul Murrell)
Date: Fri, 28 Jul 2017 15:32:43 +1200
Subject: [R] [FORGED] Re: axis() after image.plot() does not work except
 if points() is inserted between
In-Reply-To: <9953664d-f505-ff53-d809-924a39bd843b@yahoo.fr>
References: <0981fda7-811d-3595-abbb-f470bc2459c6@yahoo.fr>
 <CA+8X3fX+DzTyA+39SwZMGUDH_AJp5RDjtvqY7nuPvCFxNwMkyA@mail.gmail.com>
 <31fa883f-a6f9-c9c9-0cea-1c9ada850ebc@yahoo.fr>
 <22903.9580.641776.632203@stat.math.ethz.ch>
 <9953664d-f505-ff53-d809-924a39bd843b@yahoo.fr>
Message-ID: <af81d761-7674-5dfd-46e0-f4ca7c6aec9f@stat.auckland.ac.nz>

Hi

I believe this is a clipping bug in the 'graphics' package.

A simpler version of the problem is this ...

plot(1:10)
mtext("margin-label", side=2, at=9, las=1, line=1, adj=0)
par(mfg=c(1,1))
## Only the text within the plot region is drawn
mtext("margin-label", side=2, at=9, las=1, line=1, adj=0, col="red")

I have committed a fix to the development version of R (r72982).

Paul

On 26/07/17 21:29, Marc Girondot via R-help wrote:
> Thanks... I agree that the problem was explained in the documentation 
> but I can't find a way to have axis() working even manipulating 
> par("plt") or with graphics.reset = TRUE:
> - adding graphics.reset=TRUE does not allow axis() to be shown;
> - I see that par()$plt is involved but it is the not sufficient to 
> explain why axis() works because if it is changed by hand, axes are not 
> shown.
> 
> Thanks for the trick about range(). I didn't notice that it has also a 
> na.rm option. It is more elegant.
> 
> Here is the code showing the various propositions and checks:
> 
> 
> library(fields)
> D <- matrix(c(10, 20, 25, 30, 12, 22, 32, 35, 13, 25, 38, 40), nrow=3)
> (pplt <- par()$plt)
> #### [1] 0.08844944 0.95469663 0.14253275 0.88541485
> 
> # original problem. Axis() not shown
> 
> image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>             ylab="Columns", cex.lab = 0.5, zlim=range(D, na.rm=TRUE),
>             las=1, axes=FALSE)
> # Check the value of par()$plt; it is indeed modified
> par()$plt
> #### [1] 0.08844944 0.86408989 0.14253275 0.88541485
> # axis() does not work
> axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
> axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
> cex.axis=0.5)
> 
> # I restore par("plt") to it original value
> par(plt=pplt)
> 
> # graphics.reset = TRUE. Axis() not shown
> 
> par()$plt
> ### [1] 0.08844944 0.95469663 0.14253275 0.88541485
> image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>             ylab="Columns", cex.lab = 0.5, zlim=range(D, na.rm=TRUE),
>             las=1, axes=FALSE, graphics.reset = TRUE)
> # Check an effect on par()$plt. Indeed with graphics.reset = TRUE 
> par()$plt is restored
> par()$plt
> ### [1] 0.08844944 0.95469663 0.14253275 0.88541485
> # But the axes at not shown
> axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
> axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
> cex.axis=0.5)
> 
> # Check an effect of points() on par()$plt
> # There is an effect
> # axes are shown
> 
> par()$plt
> ### [1] 0.08844944 0.95469663 0.14253275 0.88541485
> image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>             ylab="Columns", cex.lab = 0.5, zlim=range(D, na.rm=TRUE),
>             las=1, axes=FALSE)
> points(1.5, 1.5, type="p")
> par()$plt
> ### [1] 0.08844944 0.86408989 0.14253275 0.88541485
> axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
> axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
> cex.axis=0.5)
> 
> # Try to reproduce the effect of points() on par()$plt
> # axes are not shown. Then points() is doing something else !
> 
> image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>             ylab="Columns", cex.lab = 0.5, zlim=range(D, na.rm=TRUE),
>             las=1, axes=FALSE)
> par(plt=c(0.08844944, 0.86408989, 0.14253275, 0.88541485))
> axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, cex.axis=0.5)
> axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1, 
> cex.axis=0.5)
> # check that par("plt") is correctly setup
> par()$plt
> ### [1] 0.08844944 0.86408989 0.14253275 0.88541485
> 
> I think that it will remain a mystery !
> At least the trick with points() is working.
> 
> Thanks
> Marc
> 
> 
> Le 25/07/2017 ? 13:03, Martin Maechler a ?crit :
>>>>>>> Marc Girondot via R-help <r-help at r-project.org>
>>>>>>>      on Mon, 24 Jul 2017 09:35:06 +0200 writes:
>>      > Thanks for the proposition. As you see bellow, par("usr") is 
>> the same
>>      > before and after the points() (the full code is bellow):
>>      > ....
>>      >> par("usr")
>>      > [1] -0.2500000  1.2500000 -0.1666667  1.1666667
>>      >> # if you remove this points() function, axis will show nothing.
>>      >>
>>      >> points(1.5, 1.5, type="p")
>>      >> p2 <- par(no.readonly=TRUE)
>>      >> par("usr")
>>      > [1] -0.2500000  1.2500000 -0.1666667  1.1666667
>>      > ...
>>
>>      > I can reproduce it in Ubuntu and MacosX R Gui and Rstudio (R 
>> 3.4.1).
>>
>>      > Marc
>>
>>      > Here is the code:
>>      > library(fields)
>>      > par(mar=c(5,4.5,4,7))
>>      > D <- matrix(c(10, 20, 25, 30, 12, 22, 32, 35, 13, 25, 38, 40), 
>> nrow=3)
>>
>>      > p0 <- par(no.readonly=TRUE)
>>      > image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>>      >           ylab="Columns", cex.lab = 0.5,
>>      >           zlim=c(min(D, na.rm=TRUE),max(D, na.rm=TRUE)),
>>      >           las=1, axes=FALSE)
>>      > p1 <- par(no.readonly=TRUE)
>>
>>      > par("usr")
>>      > par("xpd")
>>
>>      > # if you remove this points() function, axis will show nothing.
>>
>>      > points(1.5, 1.5, type="p")
>>      > p2 <- par(no.readonly=TRUE)
>>      > par("usr")
>>      > par("xpd")
>>
>>      > ##########
>>      > axis(1, at=seq(from=0, to=1, length=nrow(D)), labels=0:2, 
>> cex.axis=0.5)
>>      > axis(2, at=seq(from=0, to=1, length=ncol(D)), labels=0:3, las=1,
>>      > cex.axis=0.5)
>>
>>      > identical(p1, p2)
>>
>> Have you ever carefully read the detailed help page about image.plot()?
>> I haven't, but a cursory reading already shows me that the
>> author of the function did this partly on purpose:
>>
>>    > Side Effects:
>>    >
>>    >      After exiting, the plotting region may be changed to make it
>>    >      possible to add more features to the plot. To be explicit,
>>    >      ?par()\$plt? may be changed to reflect a smaller plotting 
>> region
>>    >      that has accommodated room for the legend subplot.
>>
>> Unfortunately, there it does _not_ mention the following :
>>
>> >From looking at its code, and then re-reading parts of the help page,
>> I see that there is a 'graphics.reset' argument which you can
>> set to TRUE in such a case:
>>
>>   image.plot(D, col=rev(heat.colors(128)),bty="n", xlab="Lines",
>>             ylab="Columns", cex.lab = 0.5,
>>             zlim= range(D, na.rm=TRUE),
>>        graphics.reset = TRUE, # <<<<< the solution
>>             las=1, axes=FALSE)
>>
>> Also note that
>>       zlim = range(D ...)
>> is infinitely more elegant than
>>       zlim = c(min((D, ...), max(D, ...)))
>>
>>
>> Martin Maechler
>> ETH Zurich (and R core)
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From VijayaKumar.Regati at m3bi.com  Fri Jul 28 07:54:08 2017
From: VijayaKumar.Regati at m3bi.com (Vijaya Kumar Regati)
Date: Fri, 28 Jul 2017 05:54:08 +0000
Subject: [R] R Programming help needed - Returning dataframes + 2 Variables
 dynamically
Message-ID: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>

Hi,


Can someone please help me on below issue I am facing :


I am trying to play with returning a dataframe+2 variables using a fn.
But facing an issue :

Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default

This is the code I am using :


x <- 0
y <- 0

Logic_fn <- function(x,y){
x <- x + 1
y < y + 1
test_data <- rbind(x,y)
test_data <- data.frame(test_data)
return(test_data)
return(c(x,y))
}

for ( i in 1:1) {
  test_data <- Logic_fn(c(x,y))
test_data[1]
test_data[2]
test_data

}

With Regards,
Vijaya Kumar Regati


Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.

	[[alternative HTML version deleted]]


From bhh at xs4all.nl  Fri Jul 28 08:45:20 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Fri, 28 Jul 2017 08:45:20 +0200
Subject: [R] R Programming help needed - Returning dataframes + 2
 Variables dynamically
In-Reply-To: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
References: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
Message-ID: <EDE72229-2F4C-410C-A731-69CF17272ACB@xs4all.nl>


> On 28 Jul 2017, at 07:54, Vijaya Kumar Regati <VijayaKumar.Regati at m3bi.com> wrote:
> 
> Hi,
> 
> 
> Can someone please help me on below issue I am facing :
> 
> 
> I am trying to play with returning a dataframe+2 variables using a fn.
> But facing an issue :
> 
> Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default
> 
> This is the code I am using :
> 
> 
> x <- 0
> y <- 0
> 
> Logic_fn <- function(x,y){
> x <- x + 1
> y < y + 1

Why only <?
Shouldn't that be <- ?

> test_data <- rbind(x,y)
> test_data <- data.frame(test_data)
> return(test_data)
> return(c(x,y))
> }
> 
> for ( i in 1:1) {
>  test_data <- Logic_fn(c(x,y))

Use Logic_fn(x,y) instead of c(x,y), which is wrong.

> test_data[1]
> test_data[2]
> test_data
> 
> }

You'll get other errors but you should really try to do some more analysing/debugging yourself.


Berend hasselman


From jdnewmil at dcn.davis.ca.us  Fri Jul 28 08:45:37 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Thu, 27 Jul 2017 23:45:37 -0700
Subject: [R] R Programming help needed - Returning dataframes + 2
	Variables dynamically
In-Reply-To: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
References: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
Message-ID: <908EFCF2-0C6A-429B-9E7E-2D928F1FC458@dcn.davis.ca.us>

A function MUST return one object.

That one object may consist of a list of objects, but you have to separate the parts out after the function call yourself. 
-- 
Sent from my phone. Please excuse my brevity.

On July 27, 2017 10:54:08 PM PDT, Vijaya Kumar Regati <VijayaKumar.Regati at m3bi.com> wrote:
>Hi,
>
>
>Can someone please help me on below issue I am facing :
>
>
>I am trying to play with returning a dataframe+2 variables using a fn.
>But facing an issue :
>
>Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default
>
>This is the code I am using :
>
>
>x <- 0
>y <- 0
>
>Logic_fn <- function(x,y){
>x <- x + 1
>y < y + 1
>test_data <- rbind(x,y)
>test_data <- data.frame(test_data)
>return(test_data)
>return(c(x,y))
>}
>
>for ( i in 1:1) {
>  test_data <- Logic_fn(c(x,y))
>test_data[1]
>test_data[2]
>test_data
>
>}
>
>With Regards,
>Vijaya Kumar Regati
>
>
>Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments)
>are confidential, may contain proprietary or privileged information and
>is intended for the named recipient(s) only. If you are not the
>intended recipient, any disclosures, use, review, distribution,
>printing or copying of the information contained in this e-mail message
>and/or attachments to it are strictly prohibited. If you have received
>this email in error, please notify the sender by return e-mail or
>telephone immediately and permanently delete the message and any
>attachments.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From koustavpal.devel at gmail.com  Fri Jul 28 08:55:54 2017
From: koustavpal.devel at gmail.com (Koustav Pal)
Date: Fri, 28 Jul 2017 08:55:54 +0200
Subject: [R] R Programming help needed - Returning dataframes + 2
 Variables dynamically
In-Reply-To: <CAGgS1=mzOd4fNhf=BqOXve5ZqKjJWqSm5O6RJxK1_BiQvJMPHg@mail.gmail.com>
References: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
 <CAGgS1=nLY390X+s-LDv7dn4k632zTP=nDOkBriYScfFoLUtfig@mail.gmail.com>
 <CAGgS1=mzOd4fNhf=BqOXve5ZqKjJWqSm5O6RJxK1_BiQvJMPHg@mail.gmail.com>
Message-ID: <CAGgS1==OSK35CZMFD0fpMM5stdT7nPffF+216SsjHxZbSQzTnQ@mail.gmail.com>

c() is used for constructing vectors. Or in other words using the method
c(x,y) provides a vector of length 2 (hopefully). Therefore, you are
pushing a single vector to your function and not two arguments as you want.

It should be Logic_fn(x,y) not Logic_fn(c(x,y)).

Furthermore, i would recommend reading up on how function constructs work.
Two return statements within a function are redundant because the function
will exit after the first return statement, and anything else just creates
more ambiguity. If you want to return the x y variables as well, you should
use a list like so, list(test_data, x, y) and then retrieve information
from the list like this Boo[[1]].....

Finally i would also like to point out that you should note R's behaviour
unless explicitly stated while calling the function is to assign the first
argument to the first declared variable and the second to the second. So,
if you called Logic_fn(y,x), then y will be assigned to x and x to y. So to
avoid such a scenario you can mention it explicitly as Logic_fn(y=y,x=x).


On Jul 28, 2017 8:39 AM, "Vijaya Kumar Regati" <VijayaKumar.Regati at m3bi.com>
wrote:

Hi,


Can someone please help me on below issue I am facing :


I am trying to play with returning a dataframe+2 variables using a fn.
But facing an issue :

Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default

This is the code I am using :


x <- 0
y <- 0

Logic_fn <- function(x,y){
x <- x + 1
y < y + 1
test_data <- rbind(x,y)
test_data <- data.frame(test_data)
return(test_data)
return(c(x,y))
}

for ( i in 1:1) {
  test_data <- Logic_fn(c(x,y))
test_data[1]
test_data[2]
test_data

}

With Regards,
Vijaya Kumar Regati


Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are
confidential, may contain proprietary or privileged information and is
intended for the named recipient(s) only. If you are not the intended
recipient, any disclosures, use, review, distribution, printing or copying
of the information contained in this e-mail message and/or attachments to
it are strictly prohibited. If you have received this email in error,
please notify the sender by return e-mail or telephone immediately and
permanently delete the message and any attachments.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From lixiaomei0921 at gmail.com  Fri Jul 28 10:02:01 2017
From: lixiaomei0921 at gmail.com (li xiaomei)
Date: Fri, 28 Jul 2017 20:02:01 +1200
Subject: [R] Fail to install package in R
Message-ID: <CAFJYbvrd4DRuqrQC6oT2upo4oRCc+BEusNhseK7=-KGu2RON9g@mail.gmail.com>

Hi R
     I tried to install some packages in R(R.3.4.1,or R.3.0.8), but I
failed to install to, it reminds me: utils:::menuInstallLocal()
     Can you help me to fix it? I attached all of the packages I need to
install. Please help me, I have to use it to finish my homework, hence it
is urgent for me.

Thanks
Ellen
28/7/2017

	[[alternative HTML version deleted]]


From VijayaKumar.Regati at m3bi.com  Fri Jul 28 10:13:42 2017
From: VijayaKumar.Regati at m3bi.com (Vijaya Kumar Regati)
Date: Fri, 28 Jul 2017 08:13:42 +0000
Subject: [R] R Programming help needed - Returning dataframes + 2
 Variables dynamically
In-Reply-To: <CAGgS1==OSK35CZMFD0fpMM5stdT7nPffF+216SsjHxZbSQzTnQ@mail.gmail.com>
References: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
 <CAGgS1=nLY390X+s-LDv7dn4k632zTP=nDOkBriYScfFoLUtfig@mail.gmail.com>
 <CAGgS1=mzOd4fNhf=BqOXve5ZqKjJWqSm5O6RJxK1_BiQvJMPHg@mail.gmail.com>,
 <CAGgS1==OSK35CZMFD0fpMM5stdT7nPffF+216SsjHxZbSQzTnQ@mail.gmail.com>
Message-ID: <SIXPR02MB0861164B07985D49EE442B67AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>

Hi,


That was very useful information. Thanks.

But still I am not able to get the desired output with updated code.

Kindly help if you have any further thoughts ...

Updated code :
x <- 0
y <- 0

Logic_fn <- function(x,y){

print("Passed Values")
print(x)
print(y)
x <- x + 1
y <- y + 1

print("After addition :")
print(x)
print(y)

test_data <- rbind(x,y)
test_data <- data.frame(test_data)
return(list(x,y,test_data))
}

for ( i in 1:1 ) {
test_data <- Logic_fn(x,y)
print("Returned Values :")
print(x)
print(y)
}


Wrong output :
[1] "Passed Values"
[1] 0
[1] 0
[1] "After addition :"
[1] 1
[1] 1
[1] "Returned Values :"
[1] 0
[1] 0


With Regards,
Vijaya Kumar Regati
Technical Lead, M3bi India Private Ltd
Work: 040-67064732

________________________________
From: Koustav Pal <koustavpal.devel at gmail.com>
Sent: Friday, July 28, 2017 12:25:54 PM
To: Vijaya Kumar Regati
Cc: vijaykr.sas at gmail.com; r-help at R-project.org
Subject: Re: [R] R Programming help needed - Returning dataframes + 2 Variables dynamically

c() is used for constructing vectors. Or in other words using the method c(x,y) provides a vector of length 2 (hopefully). Therefore, you are pushing a single vector to your function and not two arguments as you want.

It should be Logic_fn(x,y) not Logic_fn(c(x,y)).

Furthermore, i would recommend reading up on how function constructs work. Two return statements within a function are redundant because the function will exit after the first return statement, and anything else just creates more ambiguity. If you want to return the x y variables as well, you should use a list like so, list(test_data, x, y) and then retrieve information from the list like this Boo[[1]].....

Finally i would also like to point out that you should note R's behaviour unless explicitly stated while calling the function is to assign the first argument to the first declared variable and the second to the second. So, if you called Logic_fn(y,x), then y will be assigned to x and x to y. So to avoid such a scenario you can mention it explicitly as Logic_fn(y=y,x=x).


On Jul 28, 2017 8:39 AM, "Vijaya Kumar Regati" <VijayaKumar.Regati at m3bi.com<mailto:VijayaKumar.Regati at m3bi.com>> wrote:
Hi,


Can someone please help me on below issue I am facing :


I am trying to play with returning a dataframe+2 variables using a fn.
But facing an issue :

Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default

This is the code I am using :


x <- 0
y <- 0

Logic_fn <- function(x,y){
x <- x + 1
y < y + 1
test_data <- rbind(x,y)
test_data <- data.frame(test_data)
return(test_data)
return(c(x,y))
}

for ( i in 1:1) {
  test_data <- Logic_fn(c(x,y))
test_data[1]
test_data[2]
test_data

}

With Regards,
Vijaya Kumar Regati


Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.

	[[alternative HTML version deleted]]


From bhh at xs4all.nl  Fri Jul 28 11:00:27 2017
From: bhh at xs4all.nl (Berend Hasselman)
Date: Fri, 28 Jul 2017 11:00:27 +0200
Subject: [R] R Programming help needed - Returning dataframes + 2
 Variables dynamically
In-Reply-To: <SIXPR02MB0861164B07985D49EE442B67AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
References: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
 <CAGgS1=nLY390X+s-LDv7dn4k632zTP=nDOkBriYScfFoLUtfig@mail.gmail.com>
 <CAGgS1=mzOd4fNhf=BqOXve5ZqKjJWqSm5O6RJxK1_BiQvJMPHg@mail.gmail.com>
 <CAGgS1==OSK35CZMFD0fpMM5stdT7nPffF+216SsjHxZbSQzTnQ@mail.gmail.com>
 <SIXPR02MB0861164B07985D49EE442B67AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
Message-ID: <6A956AF9-B218-4A56-8307-0C90805A4A5B@xs4all.nl>


> On 28 Jul 2017, at 10:13, Vijaya Kumar Regati <VijayaKumar.Regati at m3bi.com> wrote:
> 
> Hi,
> 
> 
> That was very useful information. Thanks.
> 
> But still I am not able to get the desired output with updated code.
> 
> Kindly help if you have any further thoughts ...
> 
> Updated code :
> x <- 0
> y <- 0
> 
> Logic_fn <- function(x,y){
> 
> print("Passed Values")
> print(x)
> print(y)
> x <- x + 1
> y <- y + 1
> 
> print("After addition :")
> print(x)
> print(y)
> 
> test_data <- rbind(x,y)
> test_data <- data.frame(test_data)
> return(list(x,y,test_data))
> }
> 
> for ( i in 1:1 ) {
> test_data <- Logic_fn(x,y)
> print("Returned Values :")
> print(x)
> print(y)
> }
> 

You should print test_data.
You are now printing the original values of x and y.

R cannot read your mind and know that x and y are part of the return list.
Why does the function return x and y? Isn't returning test_data sufficient?


Berend Hasselman
> 
> Wrong output :
> [1] "Passed Values"
> [1] 0
> [1] 0
> [1] "After addition :"
> [1] 1
> [1] 1
> [1] "Returned Values :"
> [1] 0
> [1] 0
> 
> 
> With Regards,
> Vijaya Kumar Regati
> Technical Lead, M3bi India Private Ltd
> Work: 040-67064732
> 
> ________________________________
> From: Koustav Pal <koustavpal.devel at gmail.com>
> Sent: Friday, July 28, 2017 12:25:54 PM
> To: Vijaya Kumar Regati
> Cc: vijaykr.sas at gmail.com; r-help at R-project.org
> Subject: Re: [R] R Programming help needed - Returning dataframes + 2 Variables dynamically
> 
> c() is used for constructing vectors. Or in other words using the method c(x,y) provides a vector of length 2 (hopefully). Therefore, you are pushing a single vector to your function and not two arguments as you want.
> 
> It should be Logic_fn(x,y) not Logic_fn(c(x,y)).
> 
> Furthermore, i would recommend reading up on how function constructs work. Two return statements within a function are redundant because the function will exit after the first return statement, and anything else just creates more ambiguity. If you want to return the x y variables as well, you should use a list like so, list(test_data, x, y) and then retrieve information from the list like this Boo[[1]].....
> 
> Finally i would also like to point out that you should note R's behaviour unless explicitly stated while calling the function is to assign the first argument to the first declared variable and the second to the second. So, if you called Logic_fn(y,x), then y will be assigned to x and x to y. So to avoid such a scenario you can mention it explicitly as Logic_fn(y=y,x=x).
> 
> 
> On Jul 28, 2017 8:39 AM, "Vijaya Kumar Regati" <VijayaKumar.Regati at m3bi.com<mailto:VijayaKumar.Regati at m3bi.com>> wrote:
> Hi,
> 
> 
> Can someone please help me on below issue I am facing :
> 
> 
> I am trying to play with returning a dataframe+2 variables using a fn.
> But facing an issue :
> 
> Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default
> 
> This is the code I am using :
> 
> 
> x <- 0
> y <- 0
> 
> Logic_fn <- function(x,y){
> x <- x + 1
> y < y + 1
> test_data <- rbind(x,y)
> test_data <- data.frame(test_data)
> return(test_data)
> return(c(x,y))
> }
> 
> for ( i in 1:1) {
>  test_data <- Logic_fn(c(x,y))
> test_data[1]
> test_data[2]
> test_data
> 
> }
> 
> With Regards,
> Vijaya Kumar Regati
> 
> 
> Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.
> 
>        [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From mrguilfoyle at gmail.com  Fri Jul 28 11:08:42 2017
From: mrguilfoyle at gmail.com (Mathew Guilfoyle)
Date: Fri, 28 Jul 2017 10:08:42 +0100
Subject: [R] R Programming help needed - Returning dataframes + 2
	Variables dynamically
In-Reply-To: <SIXPR02MB0861164B07985D49EE442B67AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
References: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
 <CAGgS1=nLY390X+s-LDv7dn4k632zTP=nDOkBriYScfFoLUtfig@mail.gmail.com>
 <CAGgS1=mzOd4fNhf=BqOXve5ZqKjJWqSm5O6RJxK1_BiQvJMPHg@mail.gmail.com>
 <CAGgS1==OSK35CZMFD0fpMM5stdT7nPffF+216SsjHxZbSQzTnQ@mail.gmail.com>
 <SIXPR02MB0861164B07985D49EE442B67AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
Message-ID: <86A75BE5-47EA-4874-B8A0-958436CF2C3C@gmail.com>

The returned values are in the list you assign to test_data, the original x and y are not modified, i.e the returned value for x will be test_data[[1]] and for y will be test_data[[2]].  Using the same variable names in the function and test is perhaps what is leading to confusion.

> On 28 Jul 2017, at 09:13, Vijaya Kumar Regati <VijayaKumar.Regati at m3bi.com> wrote:
> 
> Hi,
> 
> 
> That was very useful information. Thanks.
> 
> But still I am not able to get the desired output with updated code.
> 
> Kindly help if you have any further thoughts ...
> 
> Updated code :
> x <- 0
> y <- 0
> 
> Logic_fn <- function(x,y){
> 
> print("Passed Values")
> print(x)
> print(y)
> x <- x + 1
> y <- y + 1
> 
> print("After addition :")
> print(x)
> print(y)
> 
> test_data <- rbind(x,y)
> test_data <- data.frame(test_data)
> return(list(x,y,test_data))
> }
> 
> for ( i in 1:1 ) {
> test_data <- Logic_fn(x,y)
> print("Returned Values :")
> print(x)
> print(y)
> }
> 
> 
> Wrong output :
> [1] "Passed Values"
> [1] 0
> [1] 0
> [1] "After addition :"
> [1] 1
> [1] 1
> [1] "Returned Values :"
> [1] 0
> [1] 0
> 
> 
> With Regards,
> Vijaya Kumar Regati
> Technical Lead, M3bi India Private Ltd
> Work: 040-67064732
> 
> ________________________________
> From: Koustav Pal <koustavpal.devel at gmail.com>
> Sent: Friday, July 28, 2017 12:25:54 PM
> To: Vijaya Kumar Regati
> Cc: vijaykr.sas at gmail.com; r-help at R-project.org
> Subject: Re: [R] R Programming help needed - Returning dataframes + 2 Variables dynamically
> 
> c() is used for constructing vectors. Or in other words using the method c(x,y) provides a vector of length 2 (hopefully). Therefore, you are pushing a single vector to your function and not two arguments as you want.
> 
> It should be Logic_fn(x,y) not Logic_fn(c(x,y)).
> 
> Furthermore, i would recommend reading up on how function constructs work. Two return statements within a function are redundant because the function will exit after the first return statement, and anything else just creates more ambiguity. If you want to return the x y variables as well, you should use a list like so, list(test_data, x, y) and then retrieve information from the list like this Boo[[1]].....
> 
> Finally i would also like to point out that you should note R's behaviour unless explicitly stated while calling the function is to assign the first argument to the first declared variable and the second to the second. So, if you called Logic_fn(y,x), then y will be assigned to x and x to y. So to avoid such a scenario you can mention it explicitly as Logic_fn(y=y,x=x).
> 
> 
> On Jul 28, 2017 8:39 AM, "Vijaya Kumar Regati" <VijayaKumar.Regati at m3bi.com<mailto:VijayaKumar.Regati at m3bi.com>> wrote:
> Hi,
> 
> 
> Can someone please help me on below issue I am facing :
> 
> 
> I am trying to play with returning a dataframe+2 variables using a fn.
> But facing an issue :
> 
> Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default
> 
> This is the code I am using :
> 
> 
> x <- 0
> y <- 0
> 
> Logic_fn <- function(x,y){
> x <- x + 1
> y < y + 1
> test_data <- rbind(x,y)
> test_data <- data.frame(test_data)
> return(test_data)
> return(c(x,y))
> }
> 
> for ( i in 1:1) {
>  test_data <- Logic_fn(c(x,y))
> test_data[1]
> test_data[2]
> test_data
> 
> }
> 
> With Regards,
> Vijaya Kumar Regati
> 
> 
> Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.
> 
>        [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr.pikal at precheza.cz  Fri Jul 28 11:14:12 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Fri, 28 Jul 2017 09:14:12 +0000
Subject: [R] Fail to install package in R
In-Reply-To: <CAFJYbvrd4DRuqrQC6oT2upo4oRCc+BEusNhseK7=-KGu2RON9g@mail.gmail.com>
References: <CAFJYbvrd4DRuqrQC6oT2upo4oRCc+BEusNhseK7=-KGu2RON9g@mail.gmail.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA7CB4@SRVEXCHCM301.precheza.cz>

Hi

If this is urgent why do you provide only limited information.

Windows x Linux x Mac?
Installing from CRN, github elsewhere?
Installing from within R or with OS?
Error messages?

Cheers
Petr



> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of li xiaomei
> Sent: Friday, July 28, 2017 10:02 AM
> To: r-help at r-project.org
> Subject: [R] Fail to install package in R
>
> Hi R
>      I tried to install some packages in R(R.3.4.1,or R.3.0.8), but I failed to install
> to, it reminds me: utils:::menuInstallLocal()
>      Can you help me to fix it? I attached all of the packages I need to install.
> Please help me, I have to use it to finish my homework, hence it is urgent for
> me.
>
> Thanks
> Ellen
> 28/7/2017
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From koustavpal.devel at gmail.com  Fri Jul 28 11:30:13 2017
From: koustavpal.devel at gmail.com (Koustav Pal)
Date: Fri, 28 Jul 2017 11:30:13 +0200
Subject: [R] R Programming help needed - Returning dataframes + 2
 Variables dynamically
In-Reply-To: <86A75BE5-47EA-4874-B8A0-958436CF2C3C@gmail.com>
References: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
 <CAGgS1=nLY390X+s-LDv7dn4k632zTP=nDOkBriYScfFoLUtfig@mail.gmail.com>
 <CAGgS1=mzOd4fNhf=BqOXve5ZqKjJWqSm5O6RJxK1_BiQvJMPHg@mail.gmail.com>
 <CAGgS1==OSK35CZMFD0fpMM5stdT7nPffF+216SsjHxZbSQzTnQ@mail.gmail.com>
 <SIXPR02MB0861164B07985D49EE442B67AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
 <86A75BE5-47EA-4874-B8A0-958436CF2C3C@gmail.com>
Message-ID: <CAGgS1=kEQja-ku4tnC34NP4xrqUrso7-phAQxMCD22Wud55oLA@mail.gmail.com>

When you pass a variable to a function only the value is passed on, the
variable itself remains unchanged. Updated x and y values will be in
test_data[[1]] and test_data[[2]] respectively.

-----------------------------------------------------------------------------------
Koustav Pal,
PhD student in Computational Biology,
Francesco Ferrari's group,
IFOM - The FIRC Institute of Molecular Oncology
Milan, Italy.

On 28 July 2017 at 11:08, Mathew Guilfoyle <mrguilfoyle at gmail.com> wrote:

> The returned values are in the list you assign to test_data, the original
> x and y are not modified, i.e the returned value for x will be
> test_data[[1]] and for y will be test_data[[2]].  Using the same variable
> names in the function and test is perhaps what is leading to confusion.
>
> > On 28 Jul 2017, at 09:13, Vijaya Kumar Regati <
> VijayaKumar.Regati at m3bi.com> wrote:
> >
> > Hi,
> >
> >
> > That was very useful information. Thanks.
> >
> > But still I am not able to get the desired output with updated code.
> >
> > Kindly help if you have any further thoughts ...
> >
> > Updated code :
> > x <- 0
> > y <- 0
> >
> > Logic_fn <- function(x,y){
> >
> > print("Passed Values")
> > print(x)
> > print(y)
> > x <- x + 1
> > y <- y + 1
> >
> > print("After addition :")
> > print(x)
> > print(y)
> >
> > test_data <- rbind(x,y)
> > test_data <- data.frame(test_data)
> > return(list(x,y,test_data))
> > }
> >
> > for ( i in 1:1 ) {
> > test_data <- Logic_fn(x,y)
> > print("Returned Values :")
> > print(x)
> > print(y)
> > }
> >
> >
> > Wrong output :
> > [1] "Passed Values"
> > [1] 0
> > [1] 0
> > [1] "After addition :"
> > [1] 1
> > [1] 1
> > [1] "Returned Values :"
> > [1] 0
> > [1] 0
> >
> >
> > With Regards,
> > Vijaya Kumar Regati
> > Technical Lead, M3bi India Private Ltd
> > Work: 040-67064732
> >
> > ________________________________
> > From: Koustav Pal <koustavpal.devel at gmail.com>
> > Sent: Friday, July 28, 2017 12:25:54 PM
> > To: Vijaya Kumar Regati
> > Cc: vijaykr.sas at gmail.com; r-help at R-project.org
> > Subject: Re: [R] R Programming help needed - Returning dataframes + 2
> Variables dynamically
> >
> > c() is used for constructing vectors. Or in other words using the method
> c(x,y) provides a vector of length 2 (hopefully). Therefore, you are
> pushing a single vector to your function and not two arguments as you want.
> >
> > It should be Logic_fn(x,y) not Logic_fn(c(x,y)).
> >
> > Furthermore, i would recommend reading up on how function constructs
> work. Two return statements within a function are redundant because the
> function will exit after the first return statement, and anything else just
> creates more ambiguity. If you want to return the x y variables as well,
> you should use a list like so, list(test_data, x, y) and then retrieve
> information from the list like this Boo[[1]].....
> >
> > Finally i would also like to point out that you should note R's
> behaviour unless explicitly stated while calling the function is to assign
> the first argument to the first declared variable and the second to the
> second. So, if you called Logic_fn(y,x), then y will be assigned to x and x
> to y. So to avoid such a scenario you can mention it explicitly as
> Logic_fn(y=y,x=x).
> >
> >
> > On Jul 28, 2017 8:39 AM, "Vijaya Kumar Regati" <
> VijayaKumar.Regati at m3bi.com<mailto:VijayaKumar.Regati at m3bi.com>> wrote:
> > Hi,
> >
> >
> > Can someone please help me on below issue I am facing :
> >
> >
> > I am trying to play with returning a dataframe+2 variables using a fn.
> > But facing an issue :
> >
> > Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default
> >
> > This is the code I am using :
> >
> >
> > x <- 0
> > y <- 0
> >
> > Logic_fn <- function(x,y){
> > x <- x + 1
> > y < y + 1
> > test_data <- rbind(x,y)
> > test_data <- data.frame(test_data)
> > return(test_data)
> > return(c(x,y))
> > }
> >
> > for ( i in 1:1) {
> >  test_data <- Logic_fn(c(x,y))
> > test_data[1]
> > test_data[2]
> > test_data
> >
> > }
> >
> > With Regards,
> > Vijaya Kumar Regati
> >
> >
> > Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments)
> are confidential, may contain proprietary or privileged information and is
> intended for the named recipient(s) only. If you are not the intended
> recipient, any disclosures, use, review, distribution, printing or copying
> of the information contained in this e-mail message and/or attachments to
> it are strictly prohibited. If you have received this email in error,
> please notify the sender by return e-mail or telephone immediately and
> permanently delete the message and any attachments.
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To
> UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> > Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments)
> are confidential, may contain proprietary or privileged information and is
> intended for the named recipient(s) only. If you are not the intended
> recipient, any disclosures, use, review, distribution, printing or copying
> of the information contained in this e-mail message and/or attachments to
> it are strictly prohibited. If you have received this email in error,
> please notify the sender by return e-mail or telephone immediately and
> permanently delete the message and any attachments.
> >
> >    [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From 1039537736 at qq.com  Fri Jul 28 13:15:51 2017
From: 1039537736 at qq.com (=?gb18030?B?zMbV8bOs?=)
Date: Fri, 28 Jul 2017 19:15:51 +0800
Subject: [R] Need help on the Lasso cox model with discrete time
Message-ID: <tencent_4C9C2FA432A5A9C673520FC9@qq.com>

Hi everyone,
  
 We have been trying to construct a Lasso-cox model with discrete time. We  conducted follow-up examinations on the epileptic attack after tumor surgical  resection among glioma patients. The patients are followed-up in the 6/12/24  months after surgical resection, which makes the epilepsy-free time discrete  (6/12/24 months). We calcluated many features from the T2-images collected   prior to surgical resection. We aimed to used the image features to conducted a  cox proportional hazards analysis on the epilepsy-free time by R.  Hereby, We  have three questions:
 1. Is the cox proportional hazards analysis appropriate for our  study?
 2. The epilepsy-free time is discrete. We suppose that we need to conduct a  cox analysis with discrete time. Is that right?
 3. We acquired quite a lot of image features, which makes the feature  selection imperative. We have planned to use the Lasso penalty for feature  selection. We notice that the 'coxnet'/'glmnet'/'penalized' package could be  used to construct the Lasso-cox model. Are they still appropriate for the cox  analysis with discrete time?
  
 Sorry for the poor English expression. 
 We're still new to R. We're very grateful for any help. 
 Thank you very much!
  
 Best Regard,
 Zhenchao Tang
  
 CAS Key Laboratory of Molecular Imaging, Institute of Automation,Beijing  100190, China
	[[alternative HTML version deleted]]


From petr.pikal at precheza.cz  Fri Jul 28 14:24:19 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Fri, 28 Jul 2017 12:24:19 +0000
Subject: [R] FW:  Fail to install package in R
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA7DE6@SRVEXCHCM301.precheza.cz>
References: <CAFJYbvrd4DRuqrQC6oT2upo4oRCc+BEusNhseK7=-KGu2RON9g@mail.gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA7CB4@SRVEXCHCM301.precheza.cz>
 <CAFJYbvqC1__rEXZh_=Y=US=a3wpvkVGQAO7rMc2RS4Qpnh_mdQ@mail.gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA7DE6@SRVEXCHCM301.precheza.cz>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA7E0E@SRVEXCHCM301.precheza.cz>

CC to R-help

From: PIKAL Petr
Sent: Friday, July 28, 2017 2:20 PM
To: 'li xiaomei' <lixiaomei0921 at gmail.com>
Cc: r-help at r-project.org
Subject: RE: [R] Fail to install package in R

Hi

You should keep conversation within the list, others could bring better answers.

I still do not see any error message. I found this answer to seemingly same question.

http://r.789695.n4.nabble.com/utils-menuInstallLocal-td4630933.html

Did you selected some mirror and a package name to continue installation process?

Best way is to use
install.packages(?package name?)

directly within R environment. It is the smoothest way and it usually installs all required dependent packages.

There could be also issues if you installed R with administrator rights so as with write permissions.

Cheers
Petr


From: li xiaomei [mailto:lixiaomei0921 at gmail.com]
Sent: Friday, July 28, 2017 11:41 AM
To: PIKAL Petr <petr.pikal at precheza.cz<mailto:petr.pikal at precheza.cz>>
Subject: Re: [R] Fail to install package in R

Hi Pikal,

Sorry about that. My install environment is:
Windows 10, install from within R, zip files stored in one of the drive of my computer,and error messages as follows:



Thanks
Ellen
28/7/2017

On Fri, Jul 28, 2017 at 9:14 PM, PIKAL Petr <petr.pikal at precheza.cz<mailto:petr.pikal at precheza.cz>> wrote:
Hi

If this is urgent why do you provide only limited information.

Windows x Linux x Mac?
Installing from CRN, github elsewhere?
Installing from within R or with OS?
Error messages?

Cheers
Petr



> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>] On Behalf Of li xiaomei
> Sent: Friday, July 28, 2017 10:02 AM
> To: r-help at r-project.org<mailto:r-help at r-project.org>
> Subject: [R] Fail to install package in R
>
> Hi R
>      I tried to install some packages in R(R.3.4.1,or R.3.0.8), but I failed to install
> to, it reminds me: utils:::menuInstallLocal()
>      Can you help me to fix it? I attached all of the packages I need to install.
> Please help me, I have to use it to finish my homework, hence it is urgent for
> me.
>
> Thanks
> Ellen
> 28/7/2017
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________



________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

	[[alternative HTML version deleted]]


From ruipbarradas at sapo.pt  Fri Jul 28 14:33:08 2017
From: ruipbarradas at sapo.pt (Rui Barradas)
Date: Fri, 28 Jul 2017 13:33:08 +0100
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
 value = integer(0))  with mlogit
In-Reply-To: <1125095572.25521811.1501244054826.JavaMail.root@spooler3-g27.priv.proxad.net>
References: <1125095572.25521811.1501244054826.JavaMail.root@spooler3-g27.priv.proxad.net>
Message-ID: <597B2F04.5070502@sapo.pt>

Hello,

There's a typo in your call to mlogit.data, it should be 
alt.var="nbChev", not alt.var="noChev".
Then the error is different. You should check the call arguments to see 
if they make sense.

Hope this helps,

Rui Barradas

Em 28-07-2017 13:14, sandoz at free.fr escreveu:
> I   re post my question with the csv problem fixed.
>
> Can someone explain the error below?
> sandoz
>
>> library(mlogit)
>> horse1.data<-read.csv("cte2.csv", header=TRUE, sep=";")
>> h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="noChev",shape="long")
> #mul1.model<-mlogit(win~cteD+cteTh|0|0,data=h1.dat)
> #summary(mul1.model)
>
> Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0)) :
>    le tableau de remplacement a 0 lignes, le tableau remplac? en a 26
>
>> head(horse1.data,27)
>    raceid nbChev  cteD cteTh win
> 1       1      9  29.6  23.8  no
> 2       1      9   5.3   6.7  no
> 3       1      9  10.9  11.5  no
> 4       1      9   8.2   6.7 yes
> 5       1      9  17.8  18.2  no
> 6       1      9  26.0  30.0  no
> 7       1      9   4.4   5.7  no
> 8       1      9   4.9   6.0  no
> 9       1      9   4.5   6.9  no
> 10      2     17  32.1  48.3  no
> 11      2     17   8.8  24.5  no
> 12      2     17  36.7  18.3  no
> 13      2     17   6.7  11.8 yes
> 14      2     17  10.3  12.8  no
> 15      2     17  61.6  68.5  no
> 16      2     17   2.5   6.7  no
> 17      2     17  27.7  30.9  no
> 18      2     17   8.4  10.5  no
> 19      2     17  56.5  40.7  no
> 20      2     17  95.5  11.9  no
> 21      2     17  12.7   6.4  no
> 22      2     17  19.6  14.2  no
> 23      2     17 269.6  67.2  no
> 24      2     17 300.0  75.6  no
> 25      2     17 300.0 114.3  no
> 26      2     17  36.3  16.9  no
>
>> str(horse1.data)
> 'data.frame':	26 obs. of  5 variables:
>   $ raceid: int  1 1 1 1 1 1 1 1 1 2 ...
>   $ nbChev: int  9 9 9 9 9 9 9 9 9 17 ...
>   $ cteD  : num  29.6 5.3 10.9 8.2 17.8 26 4.4 4.9 4.5 32.1 ...
>   $ cteTh : num  23.8 6.7 11.5 6.7 18.2 30 5.7 6 6.9 48.3 ...
>   $ win   : Factor w/ 2 levels "no","yes": 1 1 1 2 1 1 1 1 1 1 ...
>
> below the cte2.csv url
> https://www.dropbox.com/s/wv7nq8tk9k87le5/cte2.csv?dl=0
>
>
> ----- Mail original -----
> De: "Rui Barradas" <ruipbarradas at sapo.pt>
> ?: "peter dalgaard" <pdalgd at gmail.com>, "Jeff Newmiller" <jdnewmil at dcn.davis.ca.us>
> Cc: r-help at r-project.org
> Envoy?: Jeudi 27 Juillet 2017 22:39:58
> Objet: Re: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0))  with mlogit
>
> Hello,
>
> Inline.
>
> Em 27-07-2017 20:36, peter dalgaard escreveu:
>>
>>> On 27 Jul 2017, at 18:03 , Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>>
>>> Looks like you need to pay attention to how you read in your data.  In general, you should always execute one statement at a time until you know your script is working.  All the errors after the first one are unhelpful to you or us.
>>>
>>> If you actually pay attention to what is in your horse.data data frame after you have read it in, the columns did not get separated out. The "csv" in in read.csv stands for "comma", and your file appears to use semicolons. Read the help for read.csv using
>>>
>>> ?read.csv
>>>
>>> and use the sep=";" argument. You should always use the str() function to look at your data and make sure it looks reasonable before you start trying to give it to other functions to analyze.
>>
>> Or use read.csv2 which exists for that reason. (It may be "c" for comma, but in locales that use comma as the decimal point it is replaced by the semicolon, as you'll find out if you save an Excel file as CSV in, say, France. This is due to some idiotic decisions from early 1990s, but there you are...)
>
> Idiotic? In Portugal that is also true and it "allows" us to use the
> comma as a decimals marker, as you've said. I would use it, with or
> without someone else's decision.
>
> Rui Barradas
>
>>
>> -pd
>>
>>
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> On July 27, 2017 8:01:12 AM PDT, sandoz at free.fr wrote:
>>>> Hi,
>>>> Please  help about the error I am getting after the h1.dat<- line :
>>>> this line worked with much more independant variables and bigger data.
>>>> This time I want to work with just 2 variables cteD & cteTh.
>>>> What is wrong ?
>>>>
>>>>> setwd("C:/Rstudio/Trot")
>>>>> library(mlogit)
>>>>> horse1.data<-read.csv("cte2.csv")
>>>>>
>>>> h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")
>>>>
>>>> Error in `[[<-.data.frame`(`*tmp*`, alt.name, value = integer(0)) :
>>>> le tableau de remplacement a 0 lignes, le tableau remplac? en a 26
>>>>
>>>>
>>>>> mul1.model<-mlogit(win~cteD+cteTh|0|0,data=h1.dat)
>>>> Error in mlogit(win ~ cteD + cteTh | 0 | 0, data = h1.dat) :
>>>> object 'h1.dat' not found
>>>>
>>>>
>>>>> head(horse.data,27)
>>>>    raceid.nbChev.cteD.cteTh.win
>>>> 1              1;9;29.6;23.8;no
>>>> 2                1;9;5.3;6.7;no
>>>> 3              1;9;10.9;11.5;no
>>>> 4               1;9;8.2;6.7;yes
>>>> 5              1;9;17.8;18.2;no
>>>> 6                  1;9;26;30;no
>>>> 7                1;9;4.4;5.7;no
>>>> 8                  1;9;4.9;6;no
>>>> 9                1;9;4.5;6.9;no
>>>> 10            2;17;32.1;48.3;no
>>>> 11             2;17;8.8;24.5;no
>>>> 12            2;17;36.7;18.3;no
>>>> 13            2;17;6.7;11.8;yes
>>>> 14            2;17;10.3;12.8;no
>>>> 15            2;17;61.6;68.5;no
>>>> 16              2;17;2.5;6.7;no
>>>> 17            2;17;27.7;30.9;no
>>>> 18             2;17;8.4;10.5;no
>>>> 19            2;17;56.5;40.7;no
>>>> 20            2;17;95.5;11.9;no
>>>> 21             2;17;12.7;6.4;no
>>>> 22            2;17;19.6;14.2;no
>>>> 23           2;17;269.6;67.2;no
>>>> 24             2;17;300;75.6;no
>>>> 25            2;17;300;114.3;no
>>>> 26            2;17;36.3;16.9;no
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From tomdharray at gmail.com  Fri Jul 28 14:56:22 2017
From: tomdharray at gmail.com (Tom D. Harray)
Date: Fri, 28 Jul 2017 08:56:22 -0400
Subject: [R] R-Package for Recursive Partitioning without Classification or
	Regression
Message-ID: <CAM9RCO9Aymkqm2DME3iG7rnF3cvX1q_e-9X=86kF+Y_np3aquQ@mail.gmail.com>

Hello,

I have a question related to recursive partitioning, but I cannot find
an answer, likely because I don't know how to properly word my Google
search query.


All recursive partitioning examples, which I can find, are used for
either classification or regression trees like

   library(tree)
   data(iris)
   tree(Species ~ Sepal.Width + Petal.Width, data = iris)

which implies building a model. However, I would like to split data
like clustering similar to decision tree methods, because I have
nothing to predict.


My question is: Is there a package, which I can use to partition my
data without classification or regression so that it resembles
clustering methods?


Thanks and regards,

Dirk


From bgunter.4567 at gmail.com  Fri Jul 28 16:48:11 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Fri, 28 Jul 2017 07:48:11 -0700
Subject: [R] R Programming help needed - Returning dataframes + 2
 Variables dynamically
In-Reply-To: <SIXPR02MB0861164B07985D49EE442B67AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
References: <SIXPR02MB086159F1284DA7D5316AA802AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
 <CAGgS1=nLY390X+s-LDv7dn4k632zTP=nDOkBriYScfFoLUtfig@mail.gmail.com>
 <CAGgS1=mzOd4fNhf=BqOXve5ZqKjJWqSm5O6RJxK1_BiQvJMPHg@mail.gmail.com>
 <CAGgS1==OSK35CZMFD0fpMM5stdT7nPffF+216SsjHxZbSQzTnQ@mail.gmail.com>
 <SIXPR02MB0861164B07985D49EE442B67AEBF0@SIXPR02MB0861.apcprd02.prod.outlook.com>
Message-ID: <CAGxFJbRY47roLQYH4FPMq6KVGJUdCJU9mOEjT4i13-XfRqb=FQ@mail.gmail.com>

You really really need to stop posting and spend some time with a good
R tutorial or two (there are many good ones on the web). While this
list can certainly provide you some help, it cannot and is not meant
to substitute for you doing such basic homework on your own.

At least IMHO.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jul 28, 2017 at 1:13 AM, Vijaya Kumar Regati
<VijayaKumar.Regati at m3bi.com> wrote:
> Hi,
>
>
> That was very useful information. Thanks.
>
> But still I am not able to get the desired output with updated code.
>
> Kindly help if you have any further thoughts ...
>
> Updated code :
> x <- 0
> y <- 0
>
> Logic_fn <- function(x,y){
>
> print("Passed Values")
> print(x)
> print(y)
> x <- x + 1
> y <- y + 1
>
> print("After addition :")
> print(x)
> print(y)
>
> test_data <- rbind(x,y)
> test_data <- data.frame(test_data)
> return(list(x,y,test_data))
> }
>
> for ( i in 1:1 ) {
> test_data <- Logic_fn(x,y)
> print("Returned Values :")
> print(x)
> print(y)
> }
>
>
> Wrong output :
> [1] "Passed Values"
> [1] 0
> [1] 0
> [1] "After addition :"
> [1] 1
> [1] 1
> [1] "Returned Values :"
> [1] 0
> [1] 0
>
>
> With Regards,
> Vijaya Kumar Regati
> Technical Lead, M3bi India Private Ltd
> Work: 040-67064732
>
> ________________________________
> From: Koustav Pal <koustavpal.devel at gmail.com>
> Sent: Friday, July 28, 2017 12:25:54 PM
> To: Vijaya Kumar Regati
> Cc: vijaykr.sas at gmail.com; r-help at R-project.org
> Subject: Re: [R] R Programming help needed - Returning dataframes + 2 Variables dynamically
>
> c() is used for constructing vectors. Or in other words using the method c(x,y) provides a vector of length 2 (hopefully). Therefore, you are pushing a single vector to your function and not two arguments as you want.
>
> It should be Logic_fn(x,y) not Logic_fn(c(x,y)).
>
> Furthermore, i would recommend reading up on how function constructs work. Two return statements within a function are redundant because the function will exit after the first return statement, and anything else just creates more ambiguity. If you want to return the x y variables as well, you should use a list like so, list(test_data, x, y) and then retrieve information from the list like this Boo[[1]].....
>
> Finally i would also like to point out that you should note R's behaviour unless explicitly stated while calling the function is to assign the first argument to the first declared variable and the second to the second. So, if you called Logic_fn(y,x), then y will be assigned to x and x to y. So to avoid such a scenario you can mention it explicitly as Logic_fn(y=y,x=x).
>
>
> On Jul 28, 2017 8:39 AM, "Vijaya Kumar Regati" <VijayaKumar.Regati at m3bi.com<mailto:VijayaKumar.Regati at m3bi.com>> wrote:
> Hi,
>
>
> Can someone please help me on below issue I am facing :
>
>
> I am trying to play with returning a dataframe+2 variables using a fn.
> But facing an issue :
>
> Error in Logic_fn(c(x, y)) : argument "y" is missing, with no default
>
> This is the code I am using :
>
>
> x <- 0
> y <- 0
>
> Logic_fn <- function(x,y){
> x <- x + 1
> y < y + 1
> test_data <- rbind(x,y)
> test_data <- data.frame(test_data)
> return(test_data)
> return(c(x,y))
> }
>
> for ( i in 1:1) {
>   test_data <- Logic_fn(c(x,y))
> test_data[1]
> test_data[2]
> test_data
>
> }
>
> With Regards,
> Vijaya Kumar Regati
>
>
> Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> Disclaimer: IMPORTANT NOTICE: This e-mail (including any attachments) are confidential, may contain proprietary or privileged information and is intended for the named recipient(s) only. If you are not the intended recipient, any disclosures, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this email in error, please notify the sender by return e-mail or telephone immediately and permanently delete the message and any attachments.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Fri Jul 28 16:55:39 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Fri, 28 Jul 2017 07:55:39 -0700
Subject: [R] R-Package for Recursive Partitioning without Classification
 or Regression
In-Reply-To: <CAM9RCO9Aymkqm2DME3iG7rnF3cvX1q_e-9X=86kF+Y_np3aquQ@mail.gmail.com>
References: <CAM9RCO9Aymkqm2DME3iG7rnF3cvX1q_e-9X=86kF+Y_np3aquQ@mail.gmail.com>
Message-ID: <CAGxFJbSe9cdSV2f4+X2N7Zi7YJc11P2yPOt3Rfrbssyde+wbBQ@mail.gmail.com>

Tom:

Recursive partitioning requires a response variable because splitting
criteria are based on node purity/homogeneity (by various criteria) of
the responses.

So why did you not just search on "clustering" (e.g. at rseek.org)?
And in particular, have you looked at the CRAN task view on clustering
here:

https://cran.r-project.org/web/views/Cluster.html

If nothing there satisfies your needs, you may need to clarify your query.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jul 28, 2017 at 5:56 AM, Tom D. Harray <tomdharray at gmail.com> wrote:
> Hello,
>
> I have a question related to recursive partitioning, but I cannot find
> an answer, likely because I don't know how to properly word my Google
> search query.
>
>
> All recursive partitioning examples, which I can find, are used for
> either classification or regression trees like
>
>    library(tree)
>    data(iris)
>    tree(Species ~ Sepal.Width + Petal.Width, data = iris)
>
> which implies building a model. However, I would like to split data
> like clustering similar to decision tree methods, because I have
> nothing to predict.
>
>
> My question is: Is there a package, which I can use to partition my
> data without classification or regression so that it resembles
> clustering methods?
>
>
> Thanks and regards,
>
> Dirk
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From rosita21 at gmail.com  Fri Jul 28 17:07:23 2017
From: rosita21 at gmail.com (Rosa Oliveira)
Date: Fri, 28 Jul 2017 16:07:23 +0100
Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and
 colour different subjects in longitudinal data with different colours
Message-ID: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>

I am trying to make a x-axis and y-axis titles with both a special character and a subscript. I am not being able to do this. I think its just a placing of my parenthesis, but I've tried (seemingly) everything.

Even more, when I try the blog users code it works.

 

Is it because I?m using longitudinal data?

 

Even more. Is it possible to colour each one of the 15 lines with a different colour?



 


library(ggplot2)
library(reshape)
library(lattice)
library(gtable)
library(grid)

attach(mtcars)

beta0 = rnorm (15, 1, .5)
beta1 = rnorm (15, -1, .5)

tempo = seq(1:5)

CRP7raw = matrix(NA, 15, 5)
CRP7 = matrix(NA, 15, 5)
CRP98raw = matrix(NA, 15, 5)
CRP98 = matrix(NA, 15, 5)

crp <- for (i in 1:15) {
  CRP7raw[i,] = beta0[i] + beta1[i] * tempo 
  CRP7[i,] =    CRP7raw[i,] + rnorm(5, 0, 2.14)
  
  CRP98raw[i,] = beta0[i] + beta1[i] * tempo 
  CRP98[i,] =    CRP98raw[i,] + rnorm(5, 0, .1)
                        }


# plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) , 
#      xlab="Day in ICU", 
#      ylab="CRP (mg/dL)",
#      sub = mtext(expression(paste(lambda)))
# 
# CRP7graph <- apply(CRP7, 1, lines, col="gray")






# plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5), 
#      xlab="Day in ICU", 
#      ylab="CRP (mg/dL)")
# CRP98graph <- apply(CRP98, 1, lines, col="gray")

par(mfrow=c(1,2)) 

plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) , 
     xlab="t_i", 
     ylab="y_ij",
     sub = "lambda = 0.7")
     
     CRP7graph <- apply(CRP7, 1, lines, col="gray")
     
        
     plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5), 
          xlab="Day in ICU", 
          ylab="CRP (mg/dL",
          sub = "lambda = 0.98")
     CRP98graph <- apply(CRP98, 1, lines, col="gray")

     
	[[alternative HTML version deleted]]


From hannah.hlx at gmail.com  Fri Jul 28 17:17:30 2017
From: hannah.hlx at gmail.com (li li)
Date: Fri, 28 Jul 2017 11:17:30 -0400
Subject: [R] problem with "unique" function
Message-ID: <CAHLnndb1iKL6nBbPSLOTTtuHSsG8+LUxaWYRNmPrOaimk9pf6w@mail.gmail.com>

I have the joint distribution of three discrete random variables z1, z2 and
z3 which is captured by "z"
and "prob" as described below.

For example, the probability for z1=0.46667, z2=-1 and z3=-1 is 2.752e-13.
Also, the probability adds up to 1.

> head(z)           z1      z2      z3
[1,] -0.46667 -1.0000 -1.0000
[2,] -0.33333 -0.9333 -0.9333
[3,] -0.20000 -0.8667 -0.8667
[4,] -0.06667 -0.8000 -0.8000
[5,]  0.06667 -0.7333 -0.7333
[6,]  0.20000 -0.6667 -0.6667> prob[1:5][1] 2.752e-13 3.210e-12
1.348e-11 2.656e-11 2.656e-11> sum(prob)[1] 1


I want to put the distribution into a joint probability table. I use the
following code. But the probability no longer adds up to 1.

> z1 <- sort(unique(z[,1])); z2 <- sort(unique(z[,2]));  z3 <- sort(unique(z[,3]))> P <- array(0, dim=c(length(z1),length(z2),length(z3)), dimnames=list(A=z1, H=z2, M=z3))> > for (i in 1:(dim(z)[1])){+     ind <- z[i,]+     P[dimnames(P)$A==ind[1], dimnames(P)$H==ind[2], dimnames(P)$M==ind[3]] <- prob[i]     + }> sum(P)[1] 37.5


The problem is when we look z1 as below, there are lot of repeated values.

> unique(z[,1]) [1] -0.46667 -0.33333 -0.20000 -0.06667  0.06667  0.20000  0.33333  0.46667 -0.53333 -0.40000
[11] -0.26667 -0.13333  0.00000  0.13333  0.26667  0.40000  0.53333
-0.60000 -0.06667  0.06667
[21]  0.60000 -0.66667 -0.13333  0.13333  0.66667 -0.73333 -0.60000
-0.20000  0.20000  0.60000
[31]  0.73333 -0.80000 -0.53333 -0.26667  0.26667  0.53333  0.80000
-0.86667 -0.46667 -0.33333
[41]  0.33333  0.46667  0.86667 -0.93333 -0.40000  0.40000  0.93333
-1.00000 -0.46667 -0.33333
[51]  0.33333  0.46667  1.00000 -0.53333 -0.26667  0.26667  0.53333
-0.20000  0.20000 -0.66667
[61] -0.13333  0.13333  0.66667 -0.73333 -0.06667  0.06667  0.73333
-0.20000  0.20000 -0.13333
[71]  0.13333 -0.06667  0.06667 -0.06667  0.06667



Is there a way to fix this? Any idea and suggestions? Thanks very much!!

   Hanna

	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Fri Jul 28 18:09:50 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Fri, 28 Jul 2017 09:09:50 -0700
Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and
 colour different subjects in longitudinal data with different colours
In-Reply-To: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
References: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
Message-ID: <CAGxFJbSDNqY1a0eNSTp_-td69VSp4mhpANLOpQuOfMkt+AAr1A@mail.gmail.com>

1. Why all the library calls to ggplot and lattice if you are using
only basic graphics?

2.  Note that:
sub = mtext(expression(paste(lambda)))

is not the same as your
sub = "lambda = 0.7"


Not sure why you think it is.

In any case, you need to learn about R's "plotmath" capabilities for
constructing mathematical annotation in plot labelling. See ?plotmath.
Better yet, as this is complex and rather difficult,  do a web search
for "R plotmath tutorials" (perhaps in rseek.org) to get you started.


Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jul 28, 2017 at 8:07 AM, Rosa Oliveira <rosita21 at gmail.com> wrote:
> I am trying to make a x-axis and y-axis titles with both a special character and a subscript. I am not being able to do this. I think its just a placing of my parenthesis, but I've tried (seemingly) everything.
>
> Even more, when I try the blog users code it works.
>
>
>
> Is it because I?m using longitudinal data?
>
>
>
> Even more. Is it possible to colour each one of the 15 lines with a different colour?
>
>
>
>
>
>
> library(ggplot2)
> library(reshape)
> library(lattice)
> library(gtable)
> library(grid)
>
> attach(mtcars)
>
> beta0 = rnorm (15, 1, .5)
> beta1 = rnorm (15, -1, .5)
>
> tempo = seq(1:5)
>
> CRP7raw = matrix(NA, 15, 5)
> CRP7 = matrix(NA, 15, 5)
> CRP98raw = matrix(NA, 15, 5)
> CRP98 = matrix(NA, 15, 5)
>
> crp <- for (i in 1:15) {
>   CRP7raw[i,] = beta0[i] + beta1[i] * tempo
>   CRP7[i,] =    CRP7raw[i,] + rnorm(5, 0, 2.14)
>
>   CRP98raw[i,] = beta0[i] + beta1[i] * tempo
>   CRP98[i,] =    CRP98raw[i,] + rnorm(5, 0, .1)
>                         }
>
>
> # plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
> #      xlab="Day in ICU",
> #      ylab="CRP (mg/dL)",
> #      sub = mtext(expression(paste(lambda)))
> #
> # CRP7graph <- apply(CRP7, 1, lines, col="gray")
>
>
>
>
>
>
> # plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5),
> #      xlab="Day in ICU",
> #      ylab="CRP (mg/dL)")
> # CRP98graph <- apply(CRP98, 1, lines, col="gray")
>
> par(mfrow=c(1,2))
>
> plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
>      xlab="t_i",
>      ylab="y_ij",
>      sub = "lambda = 0.7")
>
>      CRP7graph <- apply(CRP7, 1, lines, col="gray")
>
>
>      plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5),
>           xlab="Day in ICU",
>           ylab="CRP (mg/dL",
>           sub = "lambda = 0.98")
>      CRP98graph <- apply(CRP98, 1, lines, col="gray")
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Fri Jul 28 18:10:59 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Fri, 28 Jul 2017 09:10:59 -0700
Subject: [R] problem with "unique" function
In-Reply-To: <CAHLnndb1iKL6nBbPSLOTTtuHSsG8+LUxaWYRNmPrOaimk9pf6w@mail.gmail.com>
References: <CAHLnndb1iKL6nBbPSLOTTtuHSsG8+LUxaWYRNmPrOaimk9pf6w@mail.gmail.com>
Message-ID: <CAGxFJbRWU=pCokhA9vsCn3cJG=p0X=ziN8jk3vW854TJW8pz2g@mail.gmail.com>

A mess, as you persist in using html.

-- Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jul 28, 2017 at 8:17 AM, li li <hannah.hlx at gmail.com> wrote:
> I have the joint distribution of three discrete random variables z1, z2 and
> z3 which is captured by "z"
> and "prob" as described below.
>
> For example, the probability for z1=0.46667, z2=-1 and z3=-1 is 2.752e-13.
> Also, the probability adds up to 1.
>
>> head(z)           z1      z2      z3
> [1,] -0.46667 -1.0000 -1.0000
> [2,] -0.33333 -0.9333 -0.9333
> [3,] -0.20000 -0.8667 -0.8667
> [4,] -0.06667 -0.8000 -0.8000
> [5,]  0.06667 -0.7333 -0.7333
> [6,]  0.20000 -0.6667 -0.6667> prob[1:5][1] 2.752e-13 3.210e-12
> 1.348e-11 2.656e-11 2.656e-11> sum(prob)[1] 1
>
>
> I want to put the distribution into a joint probability table. I use the
> following code. But the probability no longer adds up to 1.
>
>> z1 <- sort(unique(z[,1])); z2 <- sort(unique(z[,2]));  z3 <- sort(unique(z[,3]))> P <- array(0, dim=c(length(z1),length(z2),length(z3)), dimnames=list(A=z1, H=z2, M=z3))> > for (i in 1:(dim(z)[1])){+     ind <- z[i,]+     P[dimnames(P)$A==ind[1], dimnames(P)$H==ind[2], dimnames(P)$M==ind[3]] <- prob[i]     + }> sum(P)[1] 37.5
>
>
> The problem is when we look z1 as below, there are lot of repeated values.
>
>> unique(z[,1]) [1] -0.46667 -0.33333 -0.20000 -0.06667  0.06667  0.20000  0.33333  0.46667 -0.53333 -0.40000
> [11] -0.26667 -0.13333  0.00000  0.13333  0.26667  0.40000  0.53333
> -0.60000 -0.06667  0.06667
> [21]  0.60000 -0.66667 -0.13333  0.13333  0.66667 -0.73333 -0.60000
> -0.20000  0.20000  0.60000
> [31]  0.73333 -0.80000 -0.53333 -0.26667  0.26667  0.53333  0.80000
> -0.86667 -0.46667 -0.33333
> [41]  0.33333  0.46667  0.86667 -0.93333 -0.40000  0.40000  0.93333
> -1.00000 -0.46667 -0.33333
> [51]  0.33333  0.46667  1.00000 -0.53333 -0.26667  0.26667  0.53333
> -0.20000  0.20000 -0.66667
> [61] -0.13333  0.13333  0.66667 -0.73333 -0.06667  0.06667  0.73333
> -0.20000  0.20000 -0.13333
> [71]  0.13333 -0.06667  0.06667 -0.06667  0.06667
>
>
>
> Is there a way to fix this? Any idea and suggestions? Thanks very much!!
>
>    Hanna
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From pdalgd at gmail.com  Fri Jul 28 18:15:18 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 28 Jul 2017 18:15:18 +0200
Subject: [R] problem with "unique" function
In-Reply-To: <CAHLnndb1iKL6nBbPSLOTTtuHSsG8+LUxaWYRNmPrOaimk9pf6w@mail.gmail.com>
References: <CAHLnndb1iKL6nBbPSLOTTtuHSsG8+LUxaWYRNmPrOaimk9pf6w@mail.gmail.com>
Message-ID: <527DF440-BEF9-40E3-AEA3-0BD71DB7C4A5@gmail.com>

Most likely, previous computations have ended up giving slightly different values of say 0.13333. A pragmatic way out is to round to, say, 5 digits before applying unique. In this particular case, it seems like all numbers are multiples of 1/30, so another idea could be to multiply by 30, round, and divide by 30.

-pd

> On 28 Jul 2017, at 17:17 , li li <hannah.hlx at gmail.com> wrote:
> 
> I have the joint distribution of three discrete random variables z1, z2 and
> z3 which is captured by "z"
> and "prob" as described below.
> 
> For example, the probability for z1=0.46667, z2=-1 and z3=-1 is 2.752e-13.
> Also, the probability adds up to 1.
> 
>> head(z)           z1      z2      z3
> [1,] -0.46667 -1.0000 -1.0000
> [2,] -0.33333 -0.9333 -0.9333
> [3,] -0.20000 -0.8667 -0.8667
> [4,] -0.06667 -0.8000 -0.8000
> [5,]  0.06667 -0.7333 -0.7333
> [6,]  0.20000 -0.6667 -0.6667> prob[1:5][1] 2.752e-13 3.210e-12
> 1.348e-11 2.656e-11 2.656e-11> sum(prob)[1] 1
> 
> 
> I want to put the distribution into a joint probability table. I use the
> following code. But the probability no longer adds up to 1.
> 
>> z1 <- sort(unique(z[,1])); z2 <- sort(unique(z[,2]));  z3 <- sort(unique(z[,3]))> P <- array(0, dim=c(length(z1),length(z2),length(z3)), dimnames=list(A=z1, H=z2, M=z3))> > for (i in 1:(dim(z)[1])){+     ind <- z[i,]+     P[dimnames(P)$A==ind[1], dimnames(P)$H==ind[2], dimnames(P)$M==ind[3]] <- prob[i]     + }> sum(P)[1] 37.5
> 
> 
> The problem is when we look z1 as below, there are lot of repeated values.
> 
>> unique(z[,1]) [1] -0.46667 -0.33333 -0.20000 -0.06667  0.06667  0.20000  0.33333  0.46667 -0.53333 -0.40000
> [11] -0.26667 -0.13333  0.00000  0.13333  0.26667  0.40000  0.53333
> -0.60000 -0.06667  0.06667
> [21]  0.60000 -0.66667 -0.13333  0.13333  0.66667 -0.73333 -0.60000
> -0.20000  0.20000  0.60000
> [31]  0.73333 -0.80000 -0.53333 -0.26667  0.26667  0.53333  0.80000
> -0.86667 -0.46667 -0.33333
> [41]  0.33333  0.46667  0.86667 -0.93333 -0.40000  0.40000  0.93333
> -1.00000 -0.46667 -0.33333
> [51]  0.33333  0.46667  1.00000 -0.53333 -0.26667  0.26667  0.53333
> -0.20000  0.20000 -0.66667
> [61] -0.13333  0.13333  0.66667 -0.73333 -0.06667  0.06667  0.73333
> -0.20000  0.20000 -0.13333
> [71]  0.13333 -0.06667  0.06667 -0.06667  0.06667
> 
> 
> 
> Is there a way to fix this? Any idea and suggestions? Thanks very much!!
> 
>   Hanna
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From hannah.hlx at gmail.com  Fri Jul 28 19:09:19 2017
From: hannah.hlx at gmail.com (li li)
Date: Fri, 28 Jul 2017 13:09:19 -0400
Subject: [R] problem with "unique" function
In-Reply-To: <527DF440-BEF9-40E3-AEA3-0BD71DB7C4A5@gmail.com>
References: <CAHLnndb1iKL6nBbPSLOTTtuHSsG8+LUxaWYRNmPrOaimk9pf6w@mail.gmail.com>
 <527DF440-BEF9-40E3-AEA3-0BD71DB7C4A5@gmail.com>
Message-ID: <CAHLnndZ3tggoY5fDvw=pyNo49DxNy1+9yKK2b9SizYNeABTAZw@mail.gmail.com>

Thank you Peter. Rounding fixed the problem.


2017-07-28 12:15 GMT-04:00 peter dalgaard <pdalgd at gmail.com>:

> Most likely, previous computations have ended up giving slightly different
> values of say 0.13333. A pragmatic way out is to round to, say, 5 digits
> before applying unique. In this particular case, it seems like all numbers
> are multiples of 1/30, so another idea could be to multiply by 30, round,
> and divide by 30.
>
> -pd
>
> > On 28 Jul 2017, at 17:17 , li li <hannah.hlx at gmail.com> wrote:
> >
> > I have the joint distribution of three discrete random variables z1, z2
> and
> > z3 which is captured by "z"
> > and "prob" as described below.
> >
> > For example, the probability for z1=0.46667, z2=-1 and z3=-1 is
> 2.752e-13.
> > Also, the probability adds up to 1.
> >
> >> head(z)           z1      z2      z3
> > [1,] -0.46667 -1.0000 -1.0000
> > [2,] -0.33333 -0.9333 -0.9333
> > [3,] -0.20000 -0.8667 -0.8667
> > [4,] -0.06667 -0.8000 -0.8000
> > [5,]  0.06667 -0.7333 -0.7333
> > [6,]  0.20000 -0.6667 -0.6667> prob[1:5][1] 2.752e-13 3.210e-12
> > 1.348e-11 2.656e-11 2.656e-11> sum(prob)[1] 1
> >
> >
> > I want to put the distribution into a joint probability table. I use the
> > following code. But the probability no longer adds up to 1.
> >
> >> z1 <- sort(unique(z[,1])); z2 <- sort(unique(z[,2]));  z3 <-
> sort(unique(z[,3]))> P <- array(0, dim=c(length(z1),length(z2),length(z3)),
> dimnames=list(A=z1, H=z2, M=z3))> > for (i in 1:(dim(z)[1])){+     ind <-
> z[i,]+     P[dimnames(P)$A==ind[1], dimnames(P)$H==ind[2],
> dimnames(P)$M==ind[3]] <- prob[i]     + }> sum(P)[1] 37.5
> >
> >
> > The problem is when we look z1 as below, there are lot of repeated
> values.
> >
> >> unique(z[,1]) [1] -0.46667 -0.33333 -0.20000 -0.06667  0.06667
> 0.20000  0.33333  0.46667 -0.53333 -0.40000
> > [11] -0.26667 -0.13333  0.00000  0.13333  0.26667  0.40000  0.53333
> > -0.60000 -0.06667  0.06667
> > [21]  0.60000 -0.66667 -0.13333  0.13333  0.66667 -0.73333 -0.60000
> > -0.20000  0.20000  0.60000
> > [31]  0.73333 -0.80000 -0.53333 -0.26667  0.26667  0.53333  0.80000
> > -0.86667 -0.46667 -0.33333
> > [41]  0.33333  0.46667  0.86667 -0.93333 -0.40000  0.40000  0.93333
> > -1.00000 -0.46667 -0.33333
> > [51]  0.33333  0.46667  1.00000 -0.53333 -0.26667  0.26667  0.53333
> > -0.20000  0.20000 -0.66667
> > [61] -0.13333  0.13333  0.66667 -0.73333 -0.06667  0.06667  0.73333
> > -0.20000  0.20000 -0.13333
> > [71]  0.13333 -0.06667  0.06667 -0.06667  0.06667
> >
> >
> >
> > Is there a way to fix this? Any idea and suggestions? Thanks very much!!
> >
> >   Hanna
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Sat Jul 29 00:11:26 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Fri, 28 Jul 2017 15:11:26 -0700
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
	value = integer(0))  with mlogit
In-Reply-To: <1677677064.27523092.1501271896275.JavaMail.root@spooler3-g27.priv.proxad.net>
References: <1677677064.27523092.1501271896275.JavaMail.root@spooler3-g27.priv.proxad.net>
Message-ID: <C865EE32-474C-4169-97D5-85CEB5EC97A5@dcn.davis.ca.us>

I don't know either. Perhaps someone else on the list who uses that _contributed_ package will know. 

Please be aware that it is both possible and preferred that you make reproducible examples so others can troubleshoot. See any of [1][2][3]

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette)
-- 
Sent from my phone. Please excuse my brevity.

On July 28, 2017 12:58:16 PM PDT, sandoz at free.fr wrote:
>
>
>I don't understand why the 2 int columns are associated to make a row
>name 
>
>> horse1.data<-read.csv("cte2.csv", header=TRUE, sep=";")
>>
>h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")
>Error in `row.names<-.data.frame`(`*tmp*`, value = c("1.9", "1.9",
>"1.9",  : 
>  duplicate 'row.names' are not allowed
>In addition: Warning message:
>non-unique values when setting 'row.names': ?1.9?, ?2.17? 
>> head(horse1.data,27)
>   raceid nbChev  cteD cteTh win
>1       1      9  29.6  23.8  no
>2       1      9   5.3   6.7  no
>3       1      9  10.9  11.5  no
>4       1      9   8.2   6.7 yes
>5       1      9  17.8  18.2  no
>6       1      9  26.0  30.0  no
>7       1      9   4.4   5.7  no
>8       1      9   4.9   6.0  no
>9       1      9   4.5   6.9  no
>10      2     17  32.1  48.3  no
>11      2     17   8.8  24.5  no
>12      2     17  36.7  18.3  no
>13      2     17   6.7  11.8 yes
>14      2     17  10.3  12.8  no
>15      2     17  61.6  68.5  no
>16      2     17   2.5   6.7  no
>17      2     17  27.7  30.9  no
>18      2     17   8.4  10.5  no
>19      2     17  56.5  40.7  no
>20      2     17  95.5  11.9  no
>21      2     17  12.7   6.4  no
>22      2     17  19.6  14.2  no
>23      2     17 269.6  67.2  no
>24      2     17 300.0  75.6  no
>25      2     17 300.0 114.3  no
>26      2     17  36.3  16.9  no
>
>> str(horse1.data)
>'data.frame':	26 obs. of  5 variables:
> $ raceid: int  1 1 1 1 1 1 1 1 1 2 ...
> $ nbChev: int  9 9 9 9 9 9 9 9 9 17 ...
> $ cteD  : num  29.6 5.3 10.9 8.2 17.8 26 4.4 4.9 4.5 32.1 ...
> $ cteTh : num  23.8 6.7 11.5 6.7 18.2 30 5.7 6 6.9 48.3 ...
> $ win   : Factor w/ 2 levels "no","yes": 1 1 1 2 1 1 1 1 1 1 ...
>
>----- Mail original -----
>De: "Jeff Newmiller" <jdnewmil at dcn.davis.ca.us>
>?: sandoz at free.fr
>Envoy?: Vendredi 28 Juillet 2017 18:42:33
>Objet: Re: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name, value =
>integer(0))  with mlogit
>
>The str(horse1.data) shows two columns are factors that should have
>been numeric. You need to investigate your data quality. If there are
>indicators for unknown values like NA or - in those columns then you
>can use the na.string argument to read.csv to automatically convert
>those markers to NA in R. If you don't know what NA is, go find a
>tutorial or read the Introduction to R document supplied with R. 
>
>You might also find that some of the numbers have commas or unexpected
>characters in them... you might have to remove improperly formatted
>data in a text editor or use the R sub function to clean it up. 


From jdnewmil at dcn.davis.ca.us  Sat Jul 29 00:52:23 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Fri, 28 Jul 2017 15:52:23 -0700
Subject: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name,
	value = integer(0))  with mlogit
In-Reply-To: <1187427024.27964139.1501281336863.JavaMail.root@spooler3-g27.priv.proxad.net>
References: <1187427024.27964139.1501281336863.JavaMail.root@spooler3-g27.priv.proxad.net>
Message-ID: <89BE02E8-C09B-4093-BA8B-A4B649764B56@dcn.davis.ca.us>

Doesn't help when you only reply to me. Use reply-all.
-- 
Sent from my phone. Please excuse my brevity.

On July 28, 2017 3:35:36 PM PDT, sandoz at free.fr wrote:
>below the cte2.csv url for those willing to check this error :
>
>https://www.dropbox.com/s/wv7nq8tk9k87le5/cte2.csv?dl=0
>
>
>
>----- Mail original -----
>De: "Jeff Newmiller" <jdnewmil at dcn.davis.ca.us>
>?: sandoz at free.fr, "R-help" <r-help at r-project.org>
>Envoy?: Samedi 29 Juillet 2017 00:11:26
>Objet: Re: [R] Error in `[[<-.data.frame`(`*tmp*`, alt.name, value =
>integer(0))  with mlogit
>
>I don't know either. Perhaps someone else on the list who uses that
>_contributed_ package will know. 
>
>Please be aware that it is both possible and preferred that you make
>reproducible examples so others can troubleshoot. See any of [1][2][3]
>
>[1]
>http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example
>
>[2] http://adv-r.had.co.nz/Reproducibility.html
>
>[3] https://cran.r-project.org/web/packages/reprex/index.html (read the
>vignette)


From sandoz at free.fr  Sat Jul 29 01:39:36 2017
From: sandoz at free.fr (sandoz at free.fr)
Date: Sat, 29 Jul 2017 01:39:36 +0200 (CEST)
Subject: [R] Error in `row.names<-.data.frame`(`*tmp*`, value = c("1.9",
 "1.9", "1.9", :   duplicate 'row.names' are not allowed
In-Reply-To: <2100937923.28069714.1501285032243.JavaMail.root@spooler3-g27.priv.proxad.net>
Message-ID: <1810920635.28070998.1501285176474.JavaMail.root@spooler3-g27.priv.proxad.net>

 Hi,
Can someone explain this error below,
I don't understand why the 2 int columns are associated to make a row name

> horse1.data<-read.csv("cte2.csv", header=TRUE, sep=";")
> h1.dat<-mlogit.data(data=horse1.data,choice="win",chid.var="raceid",alt.var="nbChev",shape="long")
Error in `row.names<-.data.frame`(`*tmp*`, value = c("1.9", "1.9", "1.9",  :
  duplicate 'row.names' are not allowed
In addition: Warning message:
non-unique values when setting 'row.names': ?1.9?, ?2.17?

> head(horse1.data,27)
   raceid nbChev  cteD cteTh win
1       1      9  29.6  23.8  no
2       1      9   5.3   6.7  no
3       1      9  10.9  11.5  no
4       1      9   8.2   6.7 yes
5       1      9  17.8  18.2  no
6       1      9  26.0  30.0  no
7       1      9   4.4   5.7  no
8       1      9   4.9   6.0  no
9       1      9   4.5   6.9  no
10      2     17  32.1  48.3  no
11      2     17   8.8  24.5  no
12      2     17  36.7  18.3  no
13      2     17   6.7  11.8 yes
14      2     17  10.3  12.8  no
15      2     17  61.6  68.5  no
16      2     17   2.5   6.7  no
17      2     17  27.7  30.9  no
18      2     17   8.4  10.5  no
19      2     17  56.5  40.7  no
20      2     17  95.5  11.9  no
21      2     17  12.7   6.4  no
22      2     17  19.6  14.2  no
23      2     17 269.6  67.2  no
24      2     17 300.0  75.6  no
25      2     17 300.0 114.3  no
26      2     17  36.3  16.9  no

> str(horse1.data)
'data.frame':        26 obs. of  5 variables:
 $ raceid: int  1 1 1 1 1 1 1 1 1 2 ...
 $ nbChev: int  9 9 9 9 9 9 9 9 9 17 ...
 $ cteD  : num  29.6 5.3 10.9 8.2 17.8 26 4.4 4.9 4.5 32.1 ...
 $ cteTh : num  23.8 6.7 11.5 6.7 18.2 30 5.7 6 6.9 48.3 ...
 $ win   : Factor w/ 2 levels "no","yes": 1 1 1 2 1 1 1 1 1 1 ...

below the .csv file url for those willing to reproduce the error
https://www.dropbox.com/s/wv7nq8tk9k87le5/cte2.csv?dl=0

sandoz


From tr206 at kent.ac.uk  Sat Jul 29 16:11:00 2017
From: tr206 at kent.ac.uk (T.Riedle)
Date: Sat, 29 Jul 2017 14:11:00 +0000
Subject: [R] rugarch package: VaRTest()
Message-ID: <1501337638031.60420@kent.ac.uk>

Dear all,

I want to backtest my Value at Risk output using the VaRTest() function in the rugarch package. I do not understand if the numeric vector of VaR which needs to be calculated is in negative or positive terms. Usually VaR is expressed in positive terms.



Do I have to use positive values for VaR in the VaRTest() formula?



Thanks for your help.





	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Sat Jul 29 23:29:38 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 29 Jul 2017 23:29:38 +0200
Subject: [R] rugarch package: VaRTest()
In-Reply-To: <1501337638031.60420@kent.ac.uk>
References: <1501337638031.60420@kent.ac.uk>
Message-ID: <B7434D65-7EBC-47B8-8518-C504FB77D725@gmail.com>

If you run the example on the help page (example() won't work, but just copy/paste it) it certainly looks like the intention is that VaR is a left-tail thing, so usually negative. E.g.

> sum(actual < VaR)
[1] 74
> summary(VaR)
     Index                          VaR          
 Min.   :1991-02-27 00:00:00   Min.   :-0.04919  
 1st Qu.:1992-08-19 18:00:00   1st Qu.:-0.02765  
 Median :1994-02-10 12:00:00   Median :-0.02368  
 Mean   :1994-02-12 12:01:36   Mean   :-0.02492  
 3rd Qu.:1995-08-08 06:00:00   3rd Qu.:-0.02109  
 Max.   :1997-01-30 00:00:00   Max.   :-0.01594  

this is somewhat contrary to conventional definition where VaR is an _upper_ quantile in a _loss_ distribution, which of course differs from the _return_ distribution by sign and a multiplication with the invested amount. I gather, however, that the conventions are not too solid and may e.g. vary between textbooks.

-pd  

> On 29 Jul 2017, at 16:11 , T.Riedle <tr206 at kent.ac.uk> wrote:
> 
> Dear all,
> 
> I want to backtest my Value at Risk output using the VaRTest() function in the rugarch package. I do not understand if the numeric vector of VaR which needs to be calculated is in negative or positive terms. Usually VaR is expressed in positive terms.
> 
> 
> 
> Do I have to use positive values for VaR in the VaRTest() formula?
> 
> 
> 
> Thanks for your help.
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From r-subscribe at mail.ru  Sun Jul 30 05:47:51 2017
From: r-subscribe at mail.ru (=?UTF-8?B?VGVk?=)
Date: Sun, 30 Jul 2017 06:47:51 +0300
Subject: [R] =?utf-8?q?How_export_data_set_=28available_in_the_package=29_?=
 =?utf-8?q?from_R=3F?=
Message-ID: <1501386471.595015750@f393.i.mail.ru>

"Data set flchain available in the survival? package". ?How can?I get?it (from R)? as Excel file? Thanks!

	[[alternative HTML version deleted]]


From rbertematti at gmail.com  Sun Jul 30 06:26:48 2017
From: rbertematti at gmail.com (Staff)
Date: Sat, 29 Jul 2017 23:26:48 -0500
Subject: [R] Kalman filter for a time series
Message-ID: <CALLPWLis3pKkgf+Y6zuLJW6JpuOewO85ryeY-Gvrsj3XUJJ1CQ@mail.gmail.com>

I found an example at
http://www.bearcave.com/finance/random_r_hacks/kalman_smooth.html shown
below.  But it seems the structSSM function has been removed from KFAS
library so it won't run.  Does anyone know how to fix the code so that it
runs?



library(KFAS)
library(tseries)
library(timeSeries)
library(zoo)
library(quantmod)

getDailyPrices = function( tickerSym, startDate, endDate )
{
  prices = get.hist.quote( instrument = tickerSym, start = startDate,
end = endDate,
                       quote="AdjClose", provider="yahoo",
                       compression="d",  quiet=T)

  prices.ts = ts(prices)
  return( prices.ts )
}

kalmanFilter = function( x )
{
  t = x
  if (class(t) != "ts") {
    t = ts(t)
  }
  ssModel = structSSM( y = t, distribution="Gaussian")
  ssFit = fitSSM(inits=c(0.5*log(var(t)), 0.5*log(var(t))), model = ssModel )
  kfs = KFS( ssFit$model, smoothing="state", nsim=length(t))
  vals = kfs$a
  lastVal = vals[ length(vals)]
  return(lastVal)
}

Start = "2011-01-01"
End   = "2012-12-31"
SandP = "^GSPC"

windowWidth = 20
tsLength = 100

SAndP.ts = getDailyPrices( SandP, Start, End )
SAndP.ts = SAndP.ts[1:tsLength]
SAndP.smoothed = rollapply( data=SAndP.ts, width=windowWidth, FUN=kalmanFilter)

par(mfrow=c(1,1))
prices = coredata( SAndP.ts[windowWidth:length(SAndP.ts)])
plot(prices, col="blue", type="l")
lines(coredata(SAndP.smoothed), col="magenta")
par(mfrow=c(1,1))

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Sun Jul 30 08:27:35 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sat, 29 Jul 2017 23:27:35 -0700
Subject: [R] How export data set (available in the package) from R?
In-Reply-To: <1501386471.595015750@f393.i.mail.ru>
References: <1501386471.595015750@f393.i.mail.ru>
Message-ID: <25071290-5E35-4B7B-BE76-41F698E086B2@dcn.davis.ca.us>

Read the help file for the survival package. Probably use the data function to retrieve it,  and write it out using the write.table function. 
-- 
Sent from my phone. Please excuse my brevity.

On July 29, 2017 8:47:51 PM PDT, Ted via R-help <r-help at r-project.org> wrote:
>"Data set flchain available in the survival? package". ?How can?I
>get?it (from R)? as Excel file? Thanks!
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From hasan.diwan at gmail.com  Sun Jul 30 08:35:43 2017
From: hasan.diwan at gmail.com (Hasan Diwan)
Date: Sat, 29 Jul 2017 23:35:43 -0700
Subject: [R] How export data set (available in the package) from R?
In-Reply-To: <25071290-5E35-4B7B-BE76-41F698E086B2@dcn.davis.ca.us>
References: <1501386471.595015750@f393.i.mail.ru>
 <25071290-5E35-4B7B-BE76-41F698E086B2@dcn.davis.ca.us>
Message-ID: <CAP+bYWBT_Cexzbixj3PmnYY4OZ+6TLNph9aXwxcCg1oqOZabLQ@mail.gmail.com>

write.csv(flchain, 'flchain.csv') should import into Excel without
problems. -- H

On 29 July 2017 at 23:27, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:

> Read the help file for the survival package. Probably use the data
> function to retrieve it,  and write it out using the write.table function.
> --
> Sent from my phone. Please excuse my brevity.
>
> On July 29, 2017 8:47:51 PM PDT, Ted via R-help <r-help at r-project.org>
> wrote:
> >"Data set flchain available in the survival  package".  How can I
> >get it (from R)  as Excel file? Thanks!
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>



-- 
OpenPGP:
https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1
If you wish to request my time, please do so using
http://bit.ly/hd1ScheduleRequest.
Si vous voudrais faire connnaisance, allez a
http://bit.ly/hd1ScheduleRequest.

<https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1>Sent
from my mobile device
Envoye de mon portable

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Sun Jul 30 12:15:12 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 30 Jul 2017 22:15:12 +1200
Subject: [R] [FORGED] How export data set (available in the package)
 from R?
In-Reply-To: <1501386471.595015750@f393.i.mail.ru>
References: <1501386471.595015750@f393.i.mail.ru>
Message-ID: <d9fcc98f-1229-03bc-9b69-2c40d9d69f44@auckland.ac.nz>

On 30/07/17 15:47, Ted via R-help wrote:
> "Data set flchain available in the survival  package".  How can I get it (from R)  as Excel file? Thanks!

The best advice is *DON'T*!!!

I.e. Don't use Excel.  Ever.  Unless you really *want* to create chaos 
and havoc, and let slip the dogs of war.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From spencer.graves at effectivedefense.org  Sun Jul 30 14:10:38 2017
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Sun, 30 Jul 2017 07:10:38 -0500
Subject: [R] Kalman filter for a time series
In-Reply-To: <CALLPWLis3pKkgf+Y6zuLJW6JpuOewO85ryeY-Gvrsj3XUJJ1CQ@mail.gmail.com>
References: <CALLPWLis3pKkgf+Y6zuLJW6JpuOewO85ryeY-Gvrsj3XUJJ1CQ@mail.gmail.com>
Message-ID: <3e36c79f-821e-f5d2-f05b-0b186530c5fc@effectivedefense.org>



On 2017-07-29 11:26 PM, Staff wrote:
> I found an example at
> http://www.bearcave.com/finance/random_r_hacks/kalman_smooth.html


       That example is signed by "Ian Kaplan".  There's a box at the 
bottom of the page for you to email him.


> shown
> below.  But it seems the structSSM function has been removed from KFAS
> library


       or it never was part of KFAS.  I don't know.


> so it won't run.  Does anyone know how to fix the code so that it
> runs?


       Have you tried the vignette with KFAS?


       Hope this helps.
       Spencer Graves
>
> library(KFAS)
> library(tseries)
> library(timeSeries)
> library(zoo)
> library(quantmod)
>
> getDailyPrices = function( tickerSym, startDate, endDate )
> {
>    prices = get.hist.quote( instrument = tickerSym, start = startDate,
> end = endDate,
>                         quote="AdjClose", provider="yahoo",
>                         compression="d",  quiet=T)
>
>    prices.ts = ts(prices)
>    return( prices.ts )
> }
>
> kalmanFilter = function( x )
> {
>    t = x
>    if (class(t) != "ts") {
>      t = ts(t)
>    }
>    ssModel = structSSM( y = t, distribution="Gaussian")
>    ssFit = fitSSM(inits=c(0.5*log(var(t)), 0.5*log(var(t))), model = ssModel )
>    kfs = KFS( ssFit$model, smoothing="state", nsim=length(t))
>    vals = kfs$a
>    lastVal = vals[ length(vals)]
>    return(lastVal)
> }
>
> Start = "2011-01-01"
> End   = "2012-12-31"
> SandP = "^GSPC"
>
> windowWidth = 20
> tsLength = 100
>
> SAndP.ts = getDailyPrices( SandP, Start, End )
> SAndP.ts = SAndP.ts[1:tsLength]
> SAndP.smoothed = rollapply( data=SAndP.ts, width=windowWidth, FUN=kalmanFilter)
>
> par(mfrow=c(1,1))
> prices = coredata( SAndP.ts[windowWidth:length(SAndP.ts)])
> plot(prices, col="blue", type="l")
> lines(coredata(SAndP.smoothed), col="magenta")
> par(mfrow=c(1,1))
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From roy.mendelssohn at noaa.gov  Sun Jul 30 16:17:20 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Sun, 30 Jul 2017 07:17:20 -0700
Subject: [R] Kalman filter for a time series
In-Reply-To: <CALLPWLis3pKkgf+Y6zuLJW6JpuOewO85ryeY-Gvrsj3XUJJ1CQ@mail.gmail.com>
References: <CALLPWLis3pKkgf+Y6zuLJW6JpuOewO85ryeY-Gvrsj3XUJJ1CQ@mail.gmail.com>
Message-ID: <34D0F9EC-CDC4-4E02-9D8D-1336E99DB4BA@noaa.gov>

> structSSM

Is no longer part of KFAS.  All you needed to do was:

library(KFAS)
?KFAS

and you would have seen that if you went to the index.  A structural state space model is now built up from its components,  much like in LM.   Look at;

?SSModel

-Roy

> On Jul 29, 2017, at 9:26 PM, Staff <rbertematti at gmail.com> wrote:
> 
> I found an example at
> http://www.bearcave.com/finance/random_r_hacks/kalman_smooth.html shown
> below.  But it seems the structSSM function has been removed from KFAS
> library so it won't run.  Does anyone know how to fix the code so that it
> runs?
> 
> 
> 
> library(KFAS)
> library(tseries)
> library(timeSeries)
> library(zoo)
> library(quantmod)
> 
> getDailyPrices = function( tickerSym, startDate, endDate )
> {
>  prices = get.hist.quote( instrument = tickerSym, start = startDate,
> end = endDate,
>                       quote="AdjClose", provider="yahoo",
>                       compression="d",  quiet=T)
> 
>  prices.ts = ts(prices)
>  return( prices.ts )
> }
> 
> kalmanFilter = function( x )
> {
>  t = x
>  if (class(t) != "ts") {
>    t = ts(t)
>  }
>  ssModel = structSSM( y = t, distribution="Gaussian")
>  ssFit = fitSSM(inits=c(0.5*log(var(t)), 0.5*log(var(t))), model = ssModel )
>  kfs = KFS( ssFit$model, smoothing="state", nsim=length(t))
>  vals = kfs$a
>  lastVal = vals[ length(vals)]
>  return(lastVal)
> }
> 
> Start = "2011-01-01"
> End   = "2012-12-31"
> SandP = "^GSPC"
> 
> windowWidth = 20
> tsLength = 100
> 
> SAndP.ts = getDailyPrices( SandP, Start, End )
> SAndP.ts = SAndP.ts[1:tsLength]
> SAndP.smoothed = rollapply( data=SAndP.ts, width=windowWidth, FUN=kalmanFilter)
> 
> par(mfrow=c(1,1))
> prices = coredata( SAndP.ts[windowWidth:length(SAndP.ts)])
> plot(prices, col="blue", type="l")
> lines(coredata(SAndP.smoothed), col="magenta")
> par(mfrow=c(1,1))
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From dwinsemius at comcast.net  Sun Jul 30 17:11:56 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 30 Jul 2017 08:11:56 -0700
Subject: [R] Kalman filter for a time series
In-Reply-To: <3e36c79f-821e-f5d2-f05b-0b186530c5fc@effectivedefense.org>
References: <CALLPWLis3pKkgf+Y6zuLJW6JpuOewO85ryeY-Gvrsj3XUJJ1CQ@mail.gmail.com>
 <3e36c79f-821e-f5d2-f05b-0b186530c5fc@effectivedefense.org>
Message-ID: <62689532-2A1B-4E63-A013-24DB4A262D30@comcast.net>


> On Jul 30, 2017, at 5:10 AM, Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
> 
> 
> On 2017-07-29 11:26 PM, Staff wrote:
>> I found an example at
>> http://www.bearcave.com/finance/random_r_hacks/kalman_smooth.html
> 
>      That example is signed by "Ian Kaplan".  There's a box at the bottom of the page for you to email him.
> 
>> shown
>> below.  But it seems the structSSM function has been removed from KFAS
>> library
> 
>      or it never was part of KFAS.  I don't know.

It was part of KFAS. Searching with Google finds both the code as well as postings to Rhelp and Freelancer.com with requests (some for pay) to write replacements. 

> 
>> so it won't run.  Does anyone know how to fix the code so that it
>> runs?
> 
>      Have you tried the vignette with KFAS?

Indeed. The section on structural time series implies that the functionality of the structSSM function has been replaced with three functions: SSMtrend, SSMcycle, and SSMseasonal.

If you (meaning Staff, not Spencer) are not up to the task of making the transition to the new version of KFAS, then perhaps you should hire a consultant who can provide both code and sufficient documentation that you will be able to understand what is "under the hood".

Best;
David.
> 
> 
>      Hope this helps.
>      Spencer Graves
>> 
>> library(KFAS)
>> library(tseries)
snipped
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From milan.cisty at stuba.sk  Sun Jul 30 17:22:11 2017
From: milan.cisty at stuba.sk (Milan Cisty)
Date: Sun, 30 Jul 2017 17:22:11 +0200
Subject: [R] greek letters do not work in expression
In-Reply-To: <mailman.1.1501408801.35105.r-help@r-project.org>
References: <mailman.1.1501408801.35105.r-help@r-project.org>
Message-ID: <web-70469666@stuba.sk>

Dear all,
I appreciate suggestions for following problem. I wrote to RStudio:
plot(c(1,20),c(1,20), xlab = expression(paste(alfa)))
or the same happen when I wrote:
plot(c(1,20),c(1,20), xlab = expression(alfa))
what happen is, that description under x label is exactly "alpha", not greek
letter alfa (?).
Please where should I search problem, or what information to sent to list for
identification of this problem?
Thanks,
Milan


From ligges at statistik.tu-dortmund.de  Sun Jul 30 17:25:04 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 30 Jul 2017 17:25:04 +0200
Subject: [R] greek letters do not work in expression
In-Reply-To: <web-70469666@stuba.sk>
References: <mailman.1.1501408801.35105.r-help@r-project.org>
 <web-70469666@stuba.sk>
Message-ID: <ba3a9d8a-73d0-0b41-6871-52551d735227@statistik.tu-dortmund.de>



On 30.07.2017 17:22, Milan Cisty wrote:
> Dear all,
> I appreciate suggestions for following problem. I wrote to RStudio:
> plot(c(1,20),c(1,20), xlab = expression(paste(alfa)))
> or the same happen when I wrote:
> plot(c(1,20),c(1,20), xlab = expression(alfa))

Write "alpha", not "alfa".

Best,
Uwe Ligges


> what happen is, that description under x label is exactly "alpha", not greek
> letter alfa (?).
> Please where should I search problem, or what information to sent to list for
> identification of this problem?
> Thanks,
> Milan
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From marc_schwartz at me.com  Sun Jul 30 17:25:42 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Sun, 30 Jul 2017 10:25:42 -0500
Subject: [R] greek letters do not work in expression
In-Reply-To: <web-70469666@stuba.sk>
References: <mailman.1.1501408801.35105.r-help@r-project.org>
 <web-70469666@stuba.sk>
Message-ID: <50359617-B08D-4325-A629-A750B873DE70@me.com>


> On Jul 30, 2017, at 10:22 AM, Milan Cisty <milan.cisty at stuba.sk> wrote:
> 
> Dear all,
> I appreciate suggestions for following problem. I wrote to RStudio:
> plot(c(1,20),c(1,20), xlab = expression(paste(alfa)))
> or the same happen when I wrote:
> plot(c(1,20),c(1,20), xlab = expression(alfa))
> what happen is, that description under x label is exactly "alpha", not greek
> letter alfa (?).
> Please where should I search problem, or what information to sent to list for
> identification of this problem?
> Thanks,
> Milan


Try using 'alpha' rather than 'alfa':

  plot(c(1,20),c(1,20), xlab = expression(alpha))

Regards,

Marc Schwartz


From nooshin_ahmadi_b at yahoo.com  Sun Jul 30 16:22:11 2017
From: nooshin_ahmadi_b at yahoo.com (Nooshin Ahmadi)
Date: Sun, 30 Jul 2017 14:22:11 +0000 (UTC)
Subject: [R] problem in run cmsaf script
References: <1134683761.2015799.1501424531459.ref@mail.yahoo.com>
Message-ID: <1134683761.2015799.1501424531459@mail.yahoo.com>

Hi
I work with cmsaf package and have a script for prepare data in R.
I run this script and have some error like this:Error in if (startdate < dates[1]) (dums <- 1) : 
  missing value where TRUE/FALSE needed
In addition: Warning messages:
1: running command 'tar.exe -tf "D:/CM SAF/ORD24552.tar"' had status 2 
2: In eval(ei, envir) : NAs introduced by coercion
3: In eval(ei, envir) : NAs introduced by coercion
4: In eval(ei, envir) : NAs introduced by coercion
5: running command 'tar.exe -tf "D:/CM SAF/ORD24552.tar"' had status 2 
6: In eval(ei, envir) : NAs introduced by coercion

I dont know how to solve this problem.Can you help me? 
I attached this script.

Best Regards
Nooshin

From rbertematti at gmail.com  Sun Jul 30 17:09:38 2017
From: rbertematti at gmail.com (Staff)
Date: Sun, 30 Jul 2017 10:09:38 -0500
Subject: [R] Kalman filter for a time series
In-Reply-To: <34D0F9EC-CDC4-4E02-9D8D-1336E99DB4BA@noaa.gov>
References: <CALLPWLis3pKkgf+Y6zuLJW6JpuOewO85ryeY-Gvrsj3XUJJ1CQ@mail.gmail.com>
 <34D0F9EC-CDC4-4E02-9D8D-1336E99DB4BA@noaa.gov>
Message-ID: <CALLPWLgcVYdahP+bmtK2jf7Ored0Tu5HCZkJm2tEd9GkGK10uA@mail.gmail.com>

Exactly.  I'm doing:

x=c(1:length(t))
ssModel = SSModel( t~x, distribution="gaussian",H=NA)

but it is not plotting the Kalman filter line and not giving any errors.
I'm not sure what more the model needs?



On Sun, Jul 30, 2017 at 9:17 AM, Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> > structSSM
>
> Is no longer part of KFAS.  All you needed to do was:
>
> library(KFAS)
> ?KFAS
>
> and you would have seen that if you went to the index.  A structural state
> space model is now built up from its components,  much like in LM.   Look
> at;
>
> ?SSModel
>
> -Roy
>
> > On Jul 29, 2017, at 9:26 PM, Staff <rbertematti at gmail.com> wrote:
> >
> > I found an example at
> > http://www.bearcave.com/finance/random_r_hacks/kalman_smooth.html shown
> > below.  But it seems the structSSM function has been removed from KFAS
> > library so it won't run.  Does anyone know how to fix the code so that it
> > runs?
> >
> >
> >
> > library(KFAS)
> > library(tseries)
> > library(timeSeries)
> > library(zoo)
> > library(quantmod)
> >
> > getDailyPrices = function( tickerSym, startDate, endDate )
> > {
> >  prices = get.hist.quote( instrument = tickerSym, start = startDate,
> > end = endDate,
> >                       quote="AdjClose", provider="yahoo",
> >                       compression="d",  quiet=T)
> >
> >  prices.ts = ts(prices)
> >  return( prices.ts )
> > }
> >
> > kalmanFilter = function( x )
> > {
> >  t = x
> >  if (class(t) != "ts") {
> >    t = ts(t)
> >  }
> >  ssModel = structSSM( y = t, distribution="Gaussian")
> >  ssFit = fitSSM(inits=c(0.5*log(var(t)), 0.5*log(var(t))), model =
> ssModel )
> >  kfs = KFS( ssFit$model, smoothing="state", nsim=length(t))
> >  vals = kfs$a
> >  lastVal = vals[ length(vals)]
> >  return(lastVal)
> > }
> >
> > Start = "2011-01-01"
> > End   = "2012-12-31"
> > SandP = "^GSPC"
> >
> > windowWidth = 20
> > tsLength = 100
> >
> > SAndP.ts = getDailyPrices( SandP, Start, End )
> > SAndP.ts = SAndP.ts[1:tsLength]
> > SAndP.smoothed = rollapply( data=SAndP.ts, width=windowWidth,
> FUN=kalmanFilter)
> >
> > par(mfrow=c(1,1))
> > prices = coredata( SAndP.ts[windowWidth:length(SAndP.ts)])
> > plot(prices, col="blue", type="l")
> > lines(coredata(SAndP.smoothed), col="magenta")
> > par(mfrow=c(1,1))
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/
> posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
>

	[[alternative HTML version deleted]]


From rbertematti at gmail.com  Sun Jul 30 17:19:16 2017
From: rbertematti at gmail.com (Staff)
Date: Sun, 30 Jul 2017 10:19:16 -0500
Subject: [R] Kalman filter for a time series
In-Reply-To: <62689532-2A1B-4E63-A013-24DB4A262D30@comcast.net>
References: <CALLPWLis3pKkgf+Y6zuLJW6JpuOewO85ryeY-Gvrsj3XUJJ1CQ@mail.gmail.com>
 <3e36c79f-821e-f5d2-f05b-0b186530c5fc@effectivedefense.org>
 <62689532-2A1B-4E63-A013-24DB4A262D30@comcast.net>
Message-ID: <CALLPWLhRJaP7Hi=91LSVLP66aPvx7rNeM4O8YeRUQbtqahiLcA@mail.gmail.com>

Thanks David, that's the clue I needed.  Since x monotonically increases,
all I needed to do was:

ssModel = SSModel( t ~ SSMtrend(degree=1, Q=matrix(NA)), H=matrix(NA),
distribution="gaussian")





On Sun, Jul 30, 2017 at 10:11 AM, David Winsemius <dwinsemius at comcast.net>
wrote:

>
> > On Jul 30, 2017, at 5:10 AM, Spencer Graves <spencer.graves@
> effectivedefense.org> wrote:
> >
> >
> >
> > On 2017-07-29 11:26 PM, Staff wrote:
> >> I found an example at
> >> http://www.bearcave.com/finance/random_r_hacks/kalman_smooth.html
> >
> >      That example is signed by "Ian Kaplan".  There's a box at the
> bottom of the page for you to email him.
> >
> >> shown
> >> below.  But it seems the structSSM function has been removed from KFAS
> >> library
> >
> >      or it never was part of KFAS.  I don't know.
>
> It was part of KFAS. Searching with Google finds both the code as well as
> postings to Rhelp and Freelancer.com with requests (some for pay) to write
> replacements.
>
> >
> >> so it won't run.  Does anyone know how to fix the code so that it
> >> runs?
> >
> >      Have you tried the vignette with KFAS?
>
> Indeed. The section on structural time series implies that the
> functionality of the structSSM function has been replaced with three
> functions: SSMtrend, SSMcycle, and SSMseasonal.
>
> If you (meaning Staff, not Spencer) are not up to the task of making the
> transition to the new version of KFAS, then perhaps you should hire a
> consultant who can provide both code and sufficient documentation that you
> will be able to understand what is "under the hood".
>
> Best;
> David.
> >
> >
> >      Hope this helps.
> >      Spencer Graves
> >>
> >> library(KFAS)
> >> library(tseries)
> snipped
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
>
> David Winsemius
> Alameda, CA, USA
>
> 'Any technology distinguishable from magic is insufficiently advanced.'
>  -Gehm's Corollary to Clarke's Third Law
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From jdnewmil at dcn.davis.ca.us  Sun Jul 30 18:58:43 2017
From: jdnewmil at dcn.davis.ca.us (Jeff Newmiller)
Date: Sun, 30 Jul 2017 09:58:43 -0700
Subject: [R] problem in run cmsaf script
In-Reply-To: <1134683761.2015799.1501424531459@mail.yahoo.com>
References: <1134683761.2015799.1501424531459.ref@mail.yahoo.com>
 <1134683761.2015799.1501424531459@mail.yahoo.com>
Message-ID: <73455662-5C1F-4B3B-8774-1E4989D2DB75@dcn.davis.ca.us>

1) Very few attachment types are permitted on the R mailing lists. Study the Posting Guide and for best results put code and data within the body of your email. 

2) This is not the debug-my-script mailing list, it is the R-help mailing list, which means helping you understand one or a few statements at a time. We don't have a sample of your data (or your code per above), so we cannot look for the clues you don't know enough to show us. Please read about reproducible examples [1][2][3] and use those suggestions to help us help you, In particular you can use the reprex package [3] to confirm that we will see your problem.

3) You may not have a tar program on your computer... one way to get that for Windows is to install the Windows RTools supplemental software if you haven't already. If lack of external software is your problem then this probably isn't the right place to get help. 

4) You may be dealing with a contributed package that was never intended to run on Windows, and thus may need to do your analysis on the platform supported by the package maintainer or be prepared to modify the package for use on Windows.

5) The package notes [4] include a warning that the functions don't have much error checking... for package-specific support you need to contact the package maintainer.

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

[3] https://cran.r-project.org/web/packages/reprex/index.html (read the vignette)

[4] https://cran.r-project.org/web/packages/cmsaf/index.html
-- 
Sent from my phone. Please excuse my brevity.

On July 30, 2017 7:22:11 AM PDT, Nooshin Ahmadi via R-help <r-help at r-project.org> wrote:
>Hi
>I work with cmsaf package and have a script for prepare data in R.
>I run this script and have some error like this:Error in if (startdate
>< dates[1]) (dums <- 1) : 
>  missing value where TRUE/FALSE needed
>In addition: Warning messages:
>1: running command 'tar.exe -tf "D:/CM SAF/ORD24552.tar"' had status 2 
>2: In eval(ei, envir) : NAs introduced by coercion
>3: In eval(ei, envir) : NAs introduced by coercion
>4: In eval(ei, envir) : NAs introduced by coercion
>5: running command 'tar.exe -tf "D:/CM SAF/ORD24552.tar"' had status 2 
>6: In eval(ei, envir) : NAs introduced by coercion
>
>I dont know how to solve this problem.Can you help me? 
>I attached this script.
>
>Best Regards
>Nooshin
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.


From kristi.glover at hotmail.com  Sun Jul 30 20:28:09 2017
From: kristi.glover at hotmail.com (Kristi Glover)
Date: Sun, 30 Jul 2017 18:28:09 +0000
Subject: [R] Add Anova statistics in each figure
Message-ID: <BN6PR13MB0883654BBFADF8ACE77693F7FABD0@BN6PR13MB0883.namprd13.prod.outlook.com>

Hi R Users,

I created interaction plots in ggplot2 and  was trying to add output of two way ANOVA  models, especially only interaction  ( example treatment*control F(XX, XX) = xxx, p = xxx) into figures, but i was not able to add. Would you mind to help on how I can add information into each figure? I have attached the example data and the code that I used for this.


dat<-structure(list(Sites = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L,

1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,

2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

2L, 2L, 2L, 2L, 2L, 2L), .Label = c("Site1", "Site2"), class = "factor"),

    Period = structure(c(2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 1L,

    1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,

    2L, 2L, 2L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 2L, 2L, 2L, 2L,

    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 1L, 2L, 2L,

    1L, 1L, 2L, 2L, 1L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 1L, 2L,

    2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L,

    2L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L,

    2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 2L, 2L,

    1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,

    2L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L,

    2L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 2L,

    1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L,

    1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L,

    2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,

    2L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,

    1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L,

    1L, 1L, 1L), .Label = c("After", "Before"), class = "factor"),

    Group = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L,

    2L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

    2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 1L,

    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,

    2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L,

    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,

    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,

    2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,

    1L, 1L), .Label = c("Control", "Treatment"), class = "factor"),

    Env1 = c(-23.99, 0, -23.4, -24.77, 4.92, 4.94, 4.96, 4.93,

    4.97, 4.99, 5.06, -12.12, 5.2, 0, 0, 5.07, 5.09, 0, 5.07,

    0, 5, 0, -27.63, 4.44, 0, 0, 0, 4.33, 4.33, 0, 5.07, 5.07,

    5.03, 5.01, 0, 0, 4.97, 0, 4.98, 5.07, 0, 5.08, 0, 0, 4.91,

    -35.98, 0, 0, 0, 5.2, 0, 4.89, 5.07, 0, 4.96, 4.86, 4.96,

    0, 4.95, 5.07, 0, 0, -34.07, 5.06, 4.98, 4.94, 0, 4.95, 5.07,

    0, 0, 0, -38.32, -31.91, -29.75, 0, 0, 4.69, 4.48, 0, 0,

    4.57, 4.78, 0, 0, 4.74, 5.02, 4.87, 0, 0, 0, 4.65, -52.2,

    0, -32.11, 5.05, 0, 5.03, 5.13, 0, 0, 0, -33.75, 4.84, 4.74,

    0, 4.82, -32.98, 5.04, 0, 0, 4.95, 5.18, 5.18, 0, 0, 4.57,

    4.84, 4.74, 0, 4.78, 0, 4.78, 4.36, 4.45, 3.68, 0, 4.16,

    4.61, 0, 4.63, 0, 0, -28.65, 4.96, 4.42, 0, 0, 0, 0, 0, 4.89,

    4.96, 4.93, 0, 0, 4.96, 0, 0, 0, 0, 4.42, 0, 0, 0, 4.82,

    0, 0, 0, -34.71, 0, 4.59, 0, 4.86, 0, 0, 4.75, 0, 0, 4.65,

    4.8, 0, 0, 4.87, 4.86, 0, 0, 0, 4.83, 0, 4.85, 0, 4.48, 4.38,

    0, 0, 4.53, 0, 4.79, 0, 0, 0, 4.7, 0, 4.84, 0, 0, 0, 4.35,

    4.72, 4.72, 4.65, 4.65, 4.39, 4.73, 4.62, 0, 4.76, 0, 5,

    0, 4.86, 0, -13.38, 0, 4.73, 0, 0, 0, 4.58, 4.76, 0, 0, 0,

    0, 4.68, 4.74, 0, 0, 0, 4.83, 0, 0, 0, 0, 0, 0), Env2 = c(-5.89,

    0, -4.13, -8.88, 2.79, -0.31, -1.21, -3.72, -0.52, -6.52,

    -10.28, -0.27, -21.27, 0, 0, -5.62, -11.49, 0, -4.85, 0,

    -0.8, 0, -5.4, 0.63, 0, 0, 0, -10.92, -9.41, 0, -9.62, -9.15,

    -4.32, -5.63, 0, 0, -6.07, 0, -3.34, -11.85, 0, -10.36, 0,

    0, -5.29, 3, 0, 0, 0, -16.94, 0, 1.47, -8.51, 0, -3.07, -3.51,

    -4.79, 0, -2.11, -20.19, 0, 0, -9.91, -16.85, -1.4, -3.96,

    0, -3.83, -7.14, 0, 0, 0, -1.58, -2.42, -1.56, 0, 0, 4.45,

    23.76, 0, 0, 15.1, 5.86, 0, 0, 8.26, -9.56, 6.43, 0, 0, 0,

    -1.93, 7.2, 0, 0.39, -6.75, 0, -4.4, -9.39, 0, 0, 0, 2.41,

    3.23, 2.71, 0, -1, -3.54, -7.19, 0, 0, -5.68, -13.39, -15.14,

    0, 0, 0.8, 7.74, 5.58, 0, -7.4, 0, 2.63, 10.5, 8.66, 4.49,

    0, 4.87, 16.63, 0, 9.14, 0, 0, 24.56, -8.22, 5.91, 0, 0,

    0, 0, 0, -8.03, -7.54, -1.83, 0, 0, 0.67, 0, 0, 0, 0, 7.6,

    0, 0, 0, -4.54, 0, 0, 0, -5.3, 0, 3.09, 0, 1.35, 0, 0, 12.39,

    0, 0, 3.66, 5.77, 0, 0, 6, 3.98, 0, 0, 0, -2, 0, 0.99, 0,

    10.58, 7.31, 0, 0, 5.32, 0, 9.73, 0, 0, 0, 7.23, 0, 8.53,

    0, 0, 0, 22.69, 0.22, 8.5, 15.74, 13.91, 17.44, 14.93, 13.69,

    0, -6.28, 0, -5.07, 0, -2.03, 0, 3.01, 0, 11.02, 0, 0, 0,

    16.53, 7.34, 0, 0, 0, 0, -8.31, 3.31, 0, 0, 0, -2.33, 0,

    0, 0, 0, 0, 0)), .Names = c("Sites", "Period", "Group", "Env1",

"Env2"), class = "data.frame", row.names = c(NA, -237L))


long<-melt(dat, id=c('Sites', 'Period', 'Group'))

head(long)

df<-ddply(long, c("Period", "Group","variable"), summarise,

N    = length(value),

mean = mean(value, na.rm=TRUE),

sd   = sd(value, na.rm=TRUE),

se   = sd / sqrt(N))

df$Period1 <- factor(df$Period, levels=c("Before", "After"))

gp <- ggplot(df, aes(x=Period1, y=mean, colour=Group, group=Group))

gp<-gp + geom_line(aes(linetype=Group), size=.6) +

     geom_point(aes(shape=Group), size=3) +

     geom_errorbar(aes(ymax=mean+se, ymin=mean-se), width=.1)

gp+facet_grid(.~variable)


###two way anova interactions analysis

# since I do have

long$newFactor<-paste(long$Sites,long$variable)

models <- dlply(long, "newFactor", function(df)

  lm(value ~ Group*Period, data = long))

summary(models)

But I could not  add the information of the interaction (F and its P values) in each above figures. Would you mind to hep me. It will be highly appreciated.
Thanks


	[[alternative HTML version deleted]]


From dwinsemius at comcast.net  Sun Jul 30 21:51:59 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 30 Jul 2017 12:51:59 -0700
Subject: [R] greek letters do not work in expression
In-Reply-To: <ba3a9d8a-73d0-0b41-6871-52551d735227@statistik.tu-dortmund.de>
References: <mailman.1.1501408801.35105.r-help@r-project.org>
 <web-70469666@stuba.sk>
 <ba3a9d8a-73d0-0b41-6871-52551d735227@statistik.tu-dortmund.de>
Message-ID: <9C67B97E-17F0-4E05-9DB6-A6C1E7E8EC3F@comcast.net>


> On Jul 30, 2017, at 8:25 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 30.07.2017 17:22, Milan Cisty wrote:
>> Dear all,
>> I appreciate suggestions for following problem. I wrote to RStudio:
>> plot(c(1,20),c(1,20), xlab = expression(paste(alfa)))
>> or the same happen when I wrote:
>> plot(c(1,20),c(1,20), xlab = expression(alfa))
> 
> Write "alpha", not "alfa".

To Misty;

This makes me wonder if the internationalization of the R documentation is overly "aggressive" in changing the spelling of "Greek" letters to conform to local spellings. Does your ?plotmath page spell the first letter in the Greek alphabet as "alfa".


> 
> Best,
> Uwe Ligges
> 
--

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From msuzen at gmail.com  Sun Jul 30 22:43:58 2017
From: msuzen at gmail.com (Suzen, Mehmet)
Date: Sun, 30 Jul 2017 22:43:58 +0200
Subject: [R] How export data set (available in the package) from R?
In-Reply-To: <1501386471.595015750@f393.i.mail.ru>
References: <1501386471.595015750@f393.i.mail.ru>
Message-ID: <CAPtbhHyyA6PSR66RA0-iKU_5PgwSJBrbVPQVANu0W7GZZ0NMbw@mail.gmail.com>

I also suggest you Hadley's optimized package for interoperating xls
files with R:

https://github.com/tidyverse/readxl
https://cran.r-project.org/web/packages/readxl/index.html


From ruipbarradas at sapo.pt  Sun Jul 30 22:45:51 2017
From: ruipbarradas at sapo.pt (Rui Barradas)
Date: Sun, 30 Jul 2017 21:45:51 +0100
Subject: [R] greek letters do not work in expression
In-Reply-To: <9C67B97E-17F0-4E05-9DB6-A6C1E7E8EC3F@comcast.net>
References: <mailman.1.1501408801.35105.r-help@r-project.org>
 <web-70469666@stuba.sk>
 <ba3a9d8a-73d0-0b41-6871-52551d735227@statistik.tu-dortmund.de>
 <9C67B97E-17F0-4E05-9DB6-A6C1E7E8EC3F@comcast.net>
Message-ID: <597E457F.3030501@sapo.pt>

Hello,

Inline.

Em 30-07-2017 20:51, David Winsemius escreveu:
>
>> On Jul 30, 2017, at 8:25 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>>
>>
>> On 30.07.2017 17:22, Milan Cisty wrote:
>>> Dear all,
>>> I appreciate suggestions for following problem. I wrote to RStudio:
>>> plot(c(1,20),c(1,20), xlab = expression(paste(alfa)))
>>> or the same happen when I wrote:
>>> plot(c(1,20),c(1,20), xlab = expression(alfa))
>>
>> Write "alpha", not "alfa".
>
> To Misty;
>
> This makes me wonder if the internationalization of the R documentation is overly "aggressive" in changing the spelling of "Greek" letters to conform to local spellings. Does your ?plotmath page spell the first letter in the Greek alphabet as "alfa".

In portuguese we write alfa but the R documentation spells

alpha -- omega 	Greek symbols

Rui Barradas
>
>
>>
>> Best,
>> Uwe Ligges
>>
> --
>
> David Winsemius
> Alameda, CA, USA
>
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From mathewanalytics at gmail.com  Sun Jul 30 23:06:57 2017
From: mathewanalytics at gmail.com (Abraham Mathew)
Date: Sun, 30 Jul 2017 14:06:57 -0700
Subject: [R]  How to replace match words whith colum name of data frame?
Message-ID: <CABbYstfu0_6kzNiDTz4cOraOVCnyh7t2rN9KADRzuW3b98X0nQ@mail.gmail.com>

Try the stringr package.

This should work

chemical=c("basic", "alkalin", "alkali", "acid",  " ph ", "hss")
chemical_match <- str_c(chemical, collapse = "|")
chemical_match

concept_df$match[str_detect(concept_df$concept, chemical_match)] <-
"chemical"
concept_df

> concept_df
                concept    match
1           butan acid  chemical
2  nano diamond particl    FALSE
3      slurri\ncomposit    FALSE
4     composit ph polis chemical
5      inorgan particl     FALSE
6          grind liquid    FALSE
7         liquid formul    FALSE
8           nanoparticl    FALSE
9    size abras particl    FALSE
10     agent malic acid chemical


-- 


*Abraham MathewData Ninja and Statistical Modeler*



*Minneapolis, MN720-648-0108 at abmathewksAnalytics_Blog
<https://mathewanalytics.wordpress.com/>*

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Sun Jul 30 23:40:35 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 30 Jul 2017 23:40:35 +0200
Subject: [R] greek letters do not work in expression
In-Reply-To: <9C67B97E-17F0-4E05-9DB6-A6C1E7E8EC3F@comcast.net>
References: <mailman.1.1501408801.35105.r-help@r-project.org>
 <web-70469666@stuba.sk>
 <ba3a9d8a-73d0-0b41-6871-52551d735227@statistik.tu-dortmund.de>
 <9C67B97E-17F0-4E05-9DB6-A6C1E7E8EC3F@comcast.net>
Message-ID: <372f9aab-96e2-509b-a065-05cc241b7b5a@statistik.tu-dortmund.de>

There is no internationalization of help pages, only of messages.

Best,
Uwe

On 30.07.2017 21:51, David Winsemius wrote:
> 
>> On Jul 30, 2017, at 8:25 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>>
>>
>> On 30.07.2017 17:22, Milan Cisty wrote:
>>> Dear all,
>>> I appreciate suggestions for following problem. I wrote to RStudio:
>>> plot(c(1,20),c(1,20), xlab = expression(paste(alfa)))
>>> or the same happen when I wrote:
>>> plot(c(1,20),c(1,20), xlab = expression(alfa))
>>
>> Write "alpha", not "alfa".
> 
> To Misty;
> 
> This makes me wonder if the internationalization of the R documentation is overly "aggressive" in changing the spelling of "Greek" letters to conform to local spellings. Does your ?plotmath page spell the first letter in the Greek alphabet as "alfa".
> 
> 
>>
>> Best,
>> Uwe Ligges
>>
> --
> 
> David Winsemius
> Alameda, CA, USA
> 
> 'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law
> 
> 
> 
> 
>


From dwinsemius at comcast.net  Mon Jul 31 00:57:25 2017
From: dwinsemius at comcast.net (David Winsemius)
Date: Sun, 30 Jul 2017 15:57:25 -0700
Subject: [R] Add Anova statistics in each figure
In-Reply-To: <BN6PR13MB0883654BBFADF8ACE77693F7FABD0@BN6PR13MB0883.namprd13.prod.outlook.com>
References: <BN6PR13MB0883654BBFADF8ACE77693F7FABD0@BN6PR13MB0883.namprd13.prod.outlook.com>
Message-ID: <B591E6D5-F1A6-47B6-9E4E-91D256D7C88C@comcast.net>


> On Jul 30, 2017, at 11:28 AM, Kristi Glover <kristi.glover at hotmail.com> wrote:
> 
> Hi R Users,
> 
> I created interaction plots in ggplot2 and  was trying to add output of two way ANOVA  models, especially only interaction  ( example treatment*control F(XX, XX) = xxx, p = xxx) into figures, but i was not able to add. Would you mind to help on how I can add information into each figure? I have attached the example data and the code that I used for this.
> 
> 
> dat<-structure(list(Sites = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
> 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
> 
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
> 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("Site1", "Site2"), class = "factor"),
> 
>    Period = structure(c(2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 1L,
> 
>    1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L,
> 
>    2L, 2L, 2L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 2L, 2L, 2L, 2L,
> 
>    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 1L, 2L, 2L,
> 
>    1L, 1L, 2L, 2L, 1L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L, 1L, 2L,
> 
>    2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L,
> 
>    2L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 2L,
> 
>    2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 2L, 2L,
> 
>    1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
> 
>    2L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L,
> 
>    2L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 2L,
> 
>    1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L,
> 
>    1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L,
> 
>    2L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
> 
>    2L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
> 
>    1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L,
> 
>    1L, 1L, 1L), .Label = c("After", "Before"), class = "factor"),
> 
>    Group = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
>    2L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
>    2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 1L,
> 
>    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,
> 
>    2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L,
> 
>    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
> 
>    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 
>    2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 
>    1L, 1L), .Label = c("Control", "Treatment"), class = "factor"),
> 
>    Env1 = c(-23.99, 0, -23.4, -24.77, 4.92, 4.94, 4.96, 4.93,
> 
>    4.97, 4.99, 5.06, -12.12, 5.2, 0, 0, 5.07, 5.09, 0, 5.07,
> 
>    0, 5, 0, -27.63, 4.44, 0, 0, 0, 4.33, 4.33, 0, 5.07, 5.07,
> 
>    5.03, 5.01, 0, 0, 4.97, 0, 4.98, 5.07, 0, 5.08, 0, 0, 4.91,
> 
>    -35.98, 0, 0, 0, 5.2, 0, 4.89, 5.07, 0, 4.96, 4.86, 4.96,
> 
>    0, 4.95, 5.07, 0, 0, -34.07, 5.06, 4.98, 4.94, 0, 4.95, 5.07,
> 
>    0, 0, 0, -38.32, -31.91, -29.75, 0, 0, 4.69, 4.48, 0, 0,
> 
>    4.57, 4.78, 0, 0, 4.74, 5.02, 4.87, 0, 0, 0, 4.65, -52.2,
> 
>    0, -32.11, 5.05, 0, 5.03, 5.13, 0, 0, 0, -33.75, 4.84, 4.74,
> 
>    0, 4.82, -32.98, 5.04, 0, 0, 4.95, 5.18, 5.18, 0, 0, 4.57,
> 
>    4.84, 4.74, 0, 4.78, 0, 4.78, 4.36, 4.45, 3.68, 0, 4.16,
> 
>    4.61, 0, 4.63, 0, 0, -28.65, 4.96, 4.42, 0, 0, 0, 0, 0, 4.89,
> 
>    4.96, 4.93, 0, 0, 4.96, 0, 0, 0, 0, 4.42, 0, 0, 0, 4.82,
> 
>    0, 0, 0, -34.71, 0, 4.59, 0, 4.86, 0, 0, 4.75, 0, 0, 4.65,
> 
>    4.8, 0, 0, 4.87, 4.86, 0, 0, 0, 4.83, 0, 4.85, 0, 4.48, 4.38,
> 
>    0, 0, 4.53, 0, 4.79, 0, 0, 0, 4.7, 0, 4.84, 0, 0, 0, 4.35,
> 
>    4.72, 4.72, 4.65, 4.65, 4.39, 4.73, 4.62, 0, 4.76, 0, 5,
> 
>    0, 4.86, 0, -13.38, 0, 4.73, 0, 0, 0, 4.58, 4.76, 0, 0, 0,
> 
>    0, 4.68, 4.74, 0, 0, 0, 4.83, 0, 0, 0, 0, 0, 0), Env2 = c(-5.89,
> 
>    0, -4.13, -8.88, 2.79, -0.31, -1.21, -3.72, -0.52, -6.52,
> 
>    -10.28, -0.27, -21.27, 0, 0, -5.62, -11.49, 0, -4.85, 0,
> 
>    -0.8, 0, -5.4, 0.63, 0, 0, 0, -10.92, -9.41, 0, -9.62, -9.15,
> 
>    -4.32, -5.63, 0, 0, -6.07, 0, -3.34, -11.85, 0, -10.36, 0,
> 
>    0, -5.29, 3, 0, 0, 0, -16.94, 0, 1.47, -8.51, 0, -3.07, -3.51,
> 
>    -4.79, 0, -2.11, -20.19, 0, 0, -9.91, -16.85, -1.4, -3.96,
> 
>    0, -3.83, -7.14, 0, 0, 0, -1.58, -2.42, -1.56, 0, 0, 4.45,
> 
>    23.76, 0, 0, 15.1, 5.86, 0, 0, 8.26, -9.56, 6.43, 0, 0, 0,
> 
>    -1.93, 7.2, 0, 0.39, -6.75, 0, -4.4, -9.39, 0, 0, 0, 2.41,
> 
>    3.23, 2.71, 0, -1, -3.54, -7.19, 0, 0, -5.68, -13.39, -15.14,
> 
>    0, 0, 0.8, 7.74, 5.58, 0, -7.4, 0, 2.63, 10.5, 8.66, 4.49,
> 
>    0, 4.87, 16.63, 0, 9.14, 0, 0, 24.56, -8.22, 5.91, 0, 0,
> 
>    0, 0, 0, -8.03, -7.54, -1.83, 0, 0, 0.67, 0, 0, 0, 0, 7.6,
> 
>    0, 0, 0, -4.54, 0, 0, 0, -5.3, 0, 3.09, 0, 1.35, 0, 0, 12.39,
> 
>    0, 0, 3.66, 5.77, 0, 0, 6, 3.98, 0, 0, 0, -2, 0, 0.99, 0,
> 
>    10.58, 7.31, 0, 0, 5.32, 0, 9.73, 0, 0, 0, 7.23, 0, 8.53,
> 
>    0, 0, 0, 22.69, 0.22, 8.5, 15.74, 13.91, 17.44, 14.93, 13.69,
> 
>    0, -6.28, 0, -5.07, 0, -2.03, 0, 3.01, 0, 11.02, 0, 0, 0,
> 
>    16.53, 7.34, 0, 0, 0, 0, -8.31, 3.31, 0, 0, 0, -2.33, 0,
> 
>    0, 0, 0, 0, 0)), .Names = c("Sites", "Period", "Group", "Env1",
> 
> "Env2"), class = "data.frame", row.names = c(NA, -237L))
> 
> 
> long<-melt(dat, id=c('Sites', 'Period', 'Group'))
> 
> head(long)
> 
> df<-ddply(long, c("Period", "Group","variable"), summarise,
> 
> N    = length(value),
> 
> mean = mean(value, na.rm=TRUE),
> 
> sd   = sd(value, na.rm=TRUE),
> 
> se   = sd / sqrt(N))
> 
> df$Period1 <- factor(df$Period, levels=c("Before", "After"))
> 
> gp <- ggplot(df, aes(x=Period1, y=mean, colour=Group, group=Group))
> 
> gp<-gp + geom_line(aes(linetype=Group), size=.6) +
> 
>     geom_point(aes(shape=Group), size=3) +
> 
>     geom_errorbar(aes(ymax=mean+se, ymin=mean-se), width=.1)
> 
> gp+facet_grid(.~variable)
> 
> 
> ###two way anova interactions analysis
> 
> # since I do have
> 
> long$newFactor<-paste(long$Sites,long$variable)
> 
> models <- dlply(long, "newFactor", function(df)
> 
>  lm(value ~ Group*Period, data = long))
> 
> summary(models)

All of those items in the `models`-object are the same.

What part of these models do you propose to add to the plot?

models[[1]]

Call:
lm(formula = value ~ Group * Period, data = long)

Coefficients:
                (Intercept)               GroupTreatment  
                     0.2130                      -1.2245  
               PeriodBefore  GroupTreatment:PeriodBefore  
                    -0.4174                       2.4311  



> 
> But I could not  add the information of the interaction (F and its P values) in each above figures. Would you mind to hep me. It will be highly appreciated.

summary(models[[1]])

Call:
lm(formula = value ~ Group * Period, data = long)

Residuals:
    Min      1Q  Median      3Q     Max 
-51.996  -1.002   0.204   4.429  24.347 

Coefficients:
                            Estimate Std. Error t value Pr(>|t|)
(Intercept)                   0.2130     0.6581   0.324    0.746
GroupTreatment               -1.2245     1.1627  -1.053    0.293
PeriodBefore                 -0.4174     0.8654  -0.482    0.630
GroupTreatment:PeriodBefore   2.4311     1.5701   1.548    0.122

Residual standard error: 7.787 on 470 degrees of freedom
Multiple R-squared:  0.005522,	Adjusted R-squared:  -0.0008256 
F-statistic: 0.8699 on 3 and 470 DF,  p-value: 0.4565

> Thanks
> 
> 
> 	[[alternative HTML version deleted]]

It didn't make a difference in this posting but you should learn to post in plain text. HTML formatted posting are often mangled.
> 
--

David Winsemius
Alameda, CA, USA

'Any technology distinguishable from magic is insufficiently advanced.'   -Gehm's Corollary to Clarke's Third Law


From marc_grt at yahoo.fr  Mon Jul 31 08:25:43 2017
From: marc_grt at yahoo.fr (Marc Girondot)
Date: Mon, 31 Jul 2017 08:25:43 +0200
Subject: [R] [FORGED] Re: axis() after image.plot() does not work except
 if points() is inserted between
In-Reply-To: <af81d761-7674-5dfd-46e0-f4ca7c6aec9f@stat.auckland.ac.nz>
References: <0981fda7-811d-3595-abbb-f470bc2459c6@yahoo.fr>
 <CA+8X3fX+DzTyA+39SwZMGUDH_AJp5RDjtvqY7nuPvCFxNwMkyA@mail.gmail.com>
 <31fa883f-a6f9-c9c9-0cea-1c9ada850ebc@yahoo.fr>
 <22903.9580.641776.632203@stat.math.ethz.ch>
 <9953664d-f505-ff53-d809-924a39bd843b@yahoo.fr>
 <af81d761-7674-5dfd-46e0-f4ca7c6aec9f@stat.auckland.ac.nz>
Message-ID: <b2b91555-8182-5bec-8c98-aa0921bdca15@yahoo.fr>

Le 28/07/2017 ? 05:32, Paul Murrell a ?crit :
> plot(1:10)
> mtext("margin-label", side=2, at=9, las=1, line=1, adj=0)
> par(mfg=c(1,1))
> ## Only the text within the plot region is drawn
> mtext("margin-label", side=2, at=9, las=1, line=1, adj=0, col="red")
>
It works also for axis(). Thanks a lot.

Marc


From Achim.Zeileis at uibk.ac.at  Fri Jul 28 17:03:02 2017
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Fri, 28 Jul 2017 17:03:02 +0200 (CEST)
Subject: [R] R-Package for Recursive Partitioning without Classification
 or Regression
In-Reply-To: <CAM9RCO9Aymkqm2DME3iG7rnF3cvX1q_e-9X=86kF+Y_np3aquQ@mail.gmail.com>
References: <CAM9RCO9Aymkqm2DME3iG7rnF3cvX1q_e-9X=86kF+Y_np3aquQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.20.1707281656130.16832@paninaro>



On Fri, 28 Jul 2017, Tom D. Harray wrote:

> Hello,
>
> I have a question related to recursive partitioning, but I cannot find
> an answer, likely because I don't know how to properly word my Google
> search query.

I think you are looking for "divisive hierarchical clustering" which is 
the more commonly used term for clustering based on recursive 
partitioning. The classical implementation for this would be diana() from 
the "cluster" package. The "Cluster" task view at 
https://CRAN.R-project.org/view=Cluster also lists "isopam" and 
http://search.r-project.org/cgi-bin/namazu.cgi?query=divisive+clustering&idxname=functions&idxname=views
also gives a few further leads.

> All recursive partitioning examples, which I can find, are used for
> either classification or regression trees like
>
>   library(tree)
>   data(iris)
>   tree(Species ~ Sepal.Width + Petal.Width, data = iris)
>
> which implies building a model. However, I would like to split data
> like clustering similar to decision tree methods, because I have
> nothing to predict.

But do you want to split along observed variables or not? If not, then 
you're in a unsupervised clustering situation (see my comment above). But 
if you want to split along covariates, then this is supervised and you're 
possibly looking for a multivariate regression tree?

Hope that helps,
Z

> My question is: Is there a package, which I can use to partition my
> data without classification or regression so that it resembles
> clustering methods?
>
>
> Thanks and regards,
>
> Dirk
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From dcarlson at tamu.edu  Fri Jul 28 17:09:26 2017
From: dcarlson at tamu.edu (David L Carlson)
Date: Fri, 28 Jul 2017 15:09:26 +0000
Subject: [R] R-Package for Recursive Partitioning without Classification
 or	Regression
In-Reply-To: <CAM9RCO9Aymkqm2DME3iG7rnF3cvX1q_e-9X=86kF+Y_np3aquQ@mail.gmail.com>
References: <CAM9RCO9Aymkqm2DME3iG7rnF3cvX1q_e-9X=86kF+Y_np3aquQ@mail.gmail.com>
Message-ID: <ad5a183dce874cc9ab52c3bf45f60c84@exch-2p-mbx-t2.ads.tamu.edu>

I think that diana() or mona() in package cluster are what you are looking for. The computational burdens of polythetic divisive clustering methods as they are called are substantial so the available methods use shortcuts that should provide good, but not necessarily optimal results.

-------------------------------------
David L Carlson
Department of Anthropology
Texas A&M University
College Station, TX 77840-4352

-----Original Message-----
From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Tom D. Harray
Sent: Friday, July 28, 2017 7:56 AM
To: r-help at r-project.org
Subject: [R] R-Package for Recursive Partitioning without Classification or Regression

Hello,

I have a question related to recursive partitioning, but I cannot find
an answer, likely because I don't know how to properly word my Google
search query.


All recursive partitioning examples, which I can find, are used for
either classification or regression trees like

   library(tree)
   data(iris)
   tree(Species ~ Sepal.Width + Petal.Width, data = iris)

which implies building a model. However, I would like to split data
like clustering similar to decision tree methods, because I have
nothing to predict.


My question is: Is there a package, which I can use to partition my
data without classification or regression so that it resembles
clustering methods?


Thanks and regards,

Dirk

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From r-subscribe at mail.ru  Mon Jul 31 09:33:22 2017
From: r-subscribe at mail.ru (=?UTF-8?B?VGVkIEJlZ2lubmVy?=)
Date: Mon, 31 Jul 2017 10:33:22 +0300
Subject: [R]
 =?utf-8?q?How_=28in_general=29_take_out_data_sets_=28availabl?=
 =?utf-8?q?e_in_the_packages=29=3F?=
In-Reply-To: <CAPtbhHyyA6PSR66RA0-iKU_5PgwSJBrbVPQVANu0W7GZZ0NMbw@mail.gmail.com>
References: <1501386471.595015750@f393.i.mail.ru>
 <CAPtbhHyyA6PSR66RA0-iKU_5PgwSJBrbVPQVANu0W7GZZ0NMbw@mail.gmail.com>
Message-ID: <1501486402.636802073@f184.i.mail.ru>


Suzen, thank you very much for your so useful information (I will try to understand it)!
And my sincere gratitude to the moderator!
>"Suzen, Mehmet" < msuzen at gmail.com >:
>I also suggest you Hadley's optimized package for interoperating xls
>files with R:
>https://github.com/tidyverse/readxl
>https://cran.r-project.org/web/packages/readxl/index.html





	[[alternative HTML version deleted]]


From petr.pikal at precheza.cz  Mon Jul 31 10:48:12 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 31 Jul 2017 08:48:12 +0000
Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and
 colour different subjects in longitudinal data with different colours
In-Reply-To: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
References: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA83E4@SRVEXCHCM301.precheza.cz>

Hi Rosa

something like

plot(1,1, sub=expression(lambda^"2"))

So with your example, do you want something like

plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
      xlab="Day in ICU",
      ylab="CRP (mg/dL)",
      sub = mtext(expression(lambda^2)))

 CRP7graph <- apply(CRP7, 1, lines, col="gray")

Cheers
Petr


> -----Original Message-----
> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Rosa Oliveira
> Sent: Friday, July 28, 2017 5:07 PM
> To: r-help mailing list <r-help at r-project.org>; R-help at r-project.org
> Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and colour
> different subjects in longitudinal data with different colours
>
> I am trying to make a x-axis and y-axis titles with both a special character and a
> subscript. I am not being able to do this. I think its just a placing of my
> parenthesis, but I've tried (seemingly) everything.
>
> Even more, when I try the blog users code it works.
>
>
>
> Is it because I?m using longitudinal data?
>
>
>
> Even more. Is it possible to colour each one of the 15 lines with a different
> colour?
>
>
>
>
>
>
> library(ggplot2)
> library(reshape)
> library(lattice)
> library(gtable)
> library(grid)
>
> attach(mtcars)
>
> beta0 = rnorm (15, 1, .5)
> beta1 = rnorm (15, -1, .5)
>
> tempo = seq(1:5)
>
> CRP7raw = matrix(NA, 15, 5)
> CRP7 = matrix(NA, 15, 5)
> CRP98raw = matrix(NA, 15, 5)
> CRP98 = matrix(NA, 15, 5)
>
> crp <- for (i in 1:15) {
>   CRP7raw[i,] = beta0[i] + beta1[i] * tempo
>   CRP7[i,] =    CRP7raw[i,] + rnorm(5, 0, 2.14)
>
>   CRP98raw[i,] = beta0[i] + beta1[i] * tempo
>   CRP98[i,] =    CRP98raw[i,] + rnorm(5, 0, .1)
>                         }
>
>
> # plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
> #      xlab="Day in ICU",
> #      ylab="CRP (mg/dL)",
> #      sub = mtext(expression(paste(lambda)))
> #
> # CRP7graph <- apply(CRP7, 1, lines, col="gray")
>
>
>
>
>
>
> # plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5),
> #      xlab="Day in ICU",
> #      ylab="CRP (mg/dL)")
> # CRP98graph <- apply(CRP98, 1, lines, col="gray")
>
> par(mfrow=c(1,2))
>
> plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
>      xlab="t_i",
>      ylab="y_ij",
>      sub = "lambda = 0.7")
>
>      CRP7graph <- apply(CRP7, 1, lines, col="gray")
>
>
>      plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5),
>           xlab="Day in ICU",
>           ylab="CRP (mg/dL",
>           sub = "lambda = 0.98")
>      CRP98graph <- apply(CRP98, 1, lines, col="gray")
>
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From maechler at stat.math.ethz.ch  Mon Jul 31 10:52:01 2017
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 31 Jul 2017 10:52:01 +0200
Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and
 colour different subjects in longitudinal data with different colours
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA83E4@SRVEXCHCM301.precheza.cz>
References: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA83E4@SRVEXCHCM301.precheza.cz>
Message-ID: <22910.61361.920703.720165@stat.math.ethz.ch>


> Hi Rosa
> something like

> plot(1,1, sub=expression(lambda^"2"))

> So with your example, do you want something like

> plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
>       xlab="Day in ICU",
>       ylab="CRP (mg/dL)",
>       sub = mtext(expression(lambda^2)))

OOps!   Either  plot( ...,  sub = *)
        or	plot( ... ) ; mtext(*)

but not both!

>  CRP7graph <- apply(CRP7, 1, lines, col="gray")

> Cheers
> Petr


> > -----Original Message-----
> > From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Rosa Oliveira
> > Sent: Friday, July 28, 2017 5:07 PM
> > To: r-help mailing list <r-help at r-project.org>; R-help at r-project.org
> > Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and colour
> > different subjects in longitudinal data with different colours
> >
> > I am trying to make a x-axis and y-axis titles with both a special character and a
> > subscript. I am not being able to do this. I think its just a placing of my
> > parenthesis, but I've tried (seemingly) everything.
> >
> > Even more, when I try the blog users code it works.
> >
> >
> >
> > Is it because I?m using longitudinal data?
> >
> >
> >
> > Even more. Is it possible to colour each one of the 15 lines with a different
> > colour?
> >
> >
> >
> >
> >
> >
> > library(ggplot2)
> > library(reshape)
> > library(lattice)
> > library(gtable)
> > library(grid)
> >
> > attach(mtcars)
> >
> > beta0 = rnorm (15, 1, .5)
> > beta1 = rnorm (15, -1, .5)
> >
> > tempo = seq(1:5)
> >
> > CRP7raw = matrix(NA, 15, 5)
> > CRP7 = matrix(NA, 15, 5)
> > CRP98raw = matrix(NA, 15, 5)
> > CRP98 = matrix(NA, 15, 5)
> >
> > crp <- for (i in 1:15) {
> >   CRP7raw[i,] = beta0[i] + beta1[i] * tempo
> >   CRP7[i,] =    CRP7raw[i,] + rnorm(5, 0, 2.14)
> >
> >   CRP98raw[i,] = beta0[i] + beta1[i] * tempo
> >   CRP98[i,] =    CRP98raw[i,] + rnorm(5, 0, .1)
> >                         }
> >
> >
> > # plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
> > #      xlab="Day in ICU",
> > #      ylab="CRP (mg/dL)",
> > #      sub = mtext(expression(paste(lambda)))
> > #
> > # CRP7graph <- apply(CRP7, 1, lines, col="gray")
> >
> >
> >
> >
> >
> >
> > # plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5),
> > #      xlab="Day in ICU",
> > #      ylab="CRP (mg/dL)")
> > # CRP98graph <- apply(CRP98, 1, lines, col="gray")
> >
> > par(mfrow=c(1,2))
> >
> > plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
> >      xlab="t_i",
> >      ylab="y_ij",
> >      sub = "lambda = 0.7")
> >
> >      CRP7graph <- apply(CRP7, 1, lines, col="gray")
> >
> >
> >      plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5),
> >           xlab="Day in ICU",
> >           ylab="CRP (mg/dL",
> >           sub = "lambda = 0.98")
> >      CRP98graph <- apply(CRP98, 1, lines, col="gray")
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

> ________________________________
> Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
> Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
> Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
> Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

> V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
> - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
> - a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
> - trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
> - odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

> This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
> If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
> If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
> The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

> In case that this e-mail forms part of business dealings:
> - the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
> - if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
> - the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
> - the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr.pikal at precheza.cz  Mon Jul 31 11:11:18 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 31 Jul 2017 09:11:18 +0000
Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and
 colour different subjects in longitudinal data with different colours
In-Reply-To: <22910.61361.920703.720165@stat.math.ethz.ch>
References: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA83E4@SRVEXCHCM301.precheza.cz>
 <22910.61361.920703.720165@stat.math.ethz.ch>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA8454@SRVEXCHCM301.precheza.cz>

Hi Martin

see in line

> -----Original Message-----
> From: Martin Maechler [mailto:maechler at stat.math.ethz.ch]
> Sent: Monday, July 31, 2017 10:52 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: Rosa Oliveira <rosita21 at gmail.com>; r-help mailing list <r-help at r-
> project.org>
> Subject: Re: [R] Superscript and subscrib R for legend x-axis and y-axis and
> colour different subjects in longitudinal data with different colours
>
>
> > Hi Rosa
> > something like
>
> > plot(1,1, sub=expression(lambda^"2"))
>
> > So with your example, do you want something like
>
> > plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
> >       xlab="Day in ICU",
> >       ylab="CRP (mg/dL)",
> >       sub = mtext(expression(lambda^2)))
>
> OOps!   Either  plot( ...,  sub = *)
>         or    plot( ... ) ; mtext(*)
>
> but not both!

You are right, I used a code from OP and did not much think about it. Strangely enough, the code worked without any complain. Probably mtext is "stronger" than sub and overrides it.

Cheers
Petr

>
> >  CRP7graph <- apply(CRP7, 1, lines, col="gray")
>
> > Cheers
> > Petr
>
>
> > > -----Original Message-----
> > > From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Rosa
> > > Oliveira
> > > Sent: Friday, July 28, 2017 5:07 PM
> > > To: r-help mailing list <r-help at r-project.org>; R-help at r-project.org
> > > Subject: [R] Superscript and subscrib R for legend x-axis and y-axis
> > > and colour different subjects in longitudinal data with different
> > > colours
> > >
> > > I am trying to make a x-axis and y-axis titles with both a special
> > > character and a subscript. I am not being able to do this. I think
> > > its just a placing of my parenthesis, but I've tried (seemingly) everything.
> > >
> > > Even more, when I try the blog users code it works.
> > >
> > >
> > >
> > > Is it because I?m using longitudinal data?
> > >
> > >
> > >
> > > Even more. Is it possible to colour each one of the 15 lines with a
> > > different colour?
> > >
> > >
> > >
> > >
> > >
> > >
> > > library(ggplot2)
> > > library(reshape)
> > > library(lattice)
> > > library(gtable)
> > > library(grid)
> > >
> > > attach(mtcars)
> > >
> > > beta0 = rnorm (15, 1, .5)
> > > beta1 = rnorm (15, -1, .5)
> > >
> > > tempo = seq(1:5)
> > >
> > > CRP7raw = matrix(NA, 15, 5)
> > > CRP7 = matrix(NA, 15, 5)
> > > CRP98raw = matrix(NA, 15, 5)
> > > CRP98 = matrix(NA, 15, 5)
> > >
> > > crp <- for (i in 1:15) {
> > >   CRP7raw[i,] = beta0[i] + beta1[i] * tempo
> > >   CRP7[i,] =    CRP7raw[i,] + rnorm(5, 0, 2.14)
> > >
> > >   CRP98raw[i,] = beta0[i] + beta1[i] * tempo
> > >   CRP98[i,] =    CRP98raw[i,] + rnorm(5, 0, .1)
> > >                         }
> > >
> > >
> > > # plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
> > > #      xlab="Day in ICU",
> > > #      ylab="CRP (mg/dL)",
> > > #      sub = mtext(expression(paste(lambda)))
> > > #
> > > # CRP7graph <- apply(CRP7, 1, lines, col="gray")
> > >
> > >
> > >
> > >
> > >
> > >
> > > # plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5),
> > > #      xlab="Day in ICU",
> > > #      ylab="CRP (mg/dL)")
> > > # CRP98graph <- apply(CRP98, 1, lines, col="gray")
> > >
> > > par(mfrow=c(1,2))
> > >
> > > plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5) ,
> > >      xlab="t_i",
> > >      ylab="y_ij",
> > >      sub = "lambda = 0.7")
> > >
> > >      CRP7graph <- apply(CRP7, 1, lines, col="gray")
> > >
> > >
> > >      plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5), ylim=c(-10,5),
> > >           xlab="Day in ICU",
> > >           ylab="CRP (mg/dL",
> > >           sub = "lambda = 0.98")
> > >      CRP98graph <- apply(CRP98, 1, lines, col="gray")
> > >
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
>

________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

From maechler at stat.math.ethz.ch  Mon Jul 31 11:28:59 2017
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 31 Jul 2017 11:28:59 +0200
Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and
 colour different subjects in longitudinal data with different colours
In-Reply-To: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA8454@SRVEXCHCM301.precheza.cz>
References: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA83E4@SRVEXCHCM301.precheza.cz>
 <22910.61361.920703.720165@stat.math.ethz.ch>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA8454@SRVEXCHCM301.precheza.cz>
Message-ID: <22910.63579.796345.377975@stat.math.ethz.ch>

>>>>> PIKAL Petr <petr.pikal at precheza.cz>
>>>>>     on Mon, 31 Jul 2017 09:11:18 +0000 writes:

    > Hi Martin see in line

    >> -----Original Message----- From: Martin Maechler
    >> [mailto:maechler at stat.math.ethz.ch] Sent: Monday, July
    >> 31, 2017 10:52 AM To: PIKAL Petr <petr.pikal at precheza.cz>
    >> Cc: Rosa Oliveira <rosita21 at gmail.com>; r-help mailing
    >> list <r-help at r-
    project.org> 
    >> Subject: Re: [R] Superscript and subscrib R for legend
    >> x-axis and y-axis and colour different subjects in
    >> longitudinal data with different colours
    >> 
    >> 
    >> > Hi Rosa > something like
    >> 
    >> > plot(1,1, sub=expression(lambda^"2"))
    >> 
    >> > So with your example, do you want something like
    >> 
    >> > plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
    >> ylim=c(-10,5) , > xlab="Day in ICU", > ylab="CRP
    >> (mg/dL)", > sub = mtext(expression(lambda^2)))
    >> 
    >> OOps!  Either plot( ..., sub = *) or plot( ... ) ;
    >> mtext(*)
    >> 
    >> but not both!

    > You are right, I used a code from OP and did not much
    > think about it. Strangely enough, the code worked without
    > any complain. Probably mtext is "stronger" than sub and
    > overrides it.

Well, well, "the magic of R"  .....
Not quite:  mtext(..) is a valid function call that is evaluated
before plot() finishes; then it returns NULL invisibly, and
'plot(*, sub=NULL)' does nothing "coincidentally" (but for good
reasons)

Martin

    > Cheers Petr

    >> 
    >> > CRP7graph <- apply(CRP7, 1, lines, col="gray")
    >> 
    >> > Cheers > Petr
    >> 
    >> 
    >> > > -----Original Message----- > > From: R-help
    >> [mailto:r-help-bounces at r-project.org] On Behalf Of Rosa >
    >> > Oliveira > > Sent: Friday, July 28, 2017 5:07 PM > >
    >> To: r-help mailing list <r-help at r-project.org>;
    >> R-help at r-project.org > > Subject: [R] Superscript and
    >> subscrib R for legend x-axis and y-axis > > and colour
    >> different subjects in longitudinal data with different >
    >> > colours
    >> > >
    >> > > I am trying to make a x-axis and y-axis titles with
    >> both a special > > character and a subscript. I am not
    >> being able to do this. I think > > its just a placing of
    >> my parenthesis, but I've tried (seemingly) everything.
    >> > >
    >> > > Even more, when I try the blog users code it works.
    >> > >
    >> > >
    >> > >
    >> > > Is it because I?m using longitudinal data?
    >> > >
    >> > >
    >> > >
    >> > > Even more. Is it possible to colour each one of the
    >> 15 lines with a > > different colour?
    >> > >
    >> > >
    >> > >
    >> > >
    >> > >
    >> > >
    >> > > library(ggplot2) > > library(reshape) > >
    >> library(lattice) > > library(gtable) > > library(grid)
    >> > >
    >> > > attach(mtcars)
    >> > >
    >> > > beta0 = rnorm (15, 1, .5) > > beta1 = rnorm (15, -1,
    >> .5)
    >> > >
    >> > > tempo = seq(1:5)
    >> > >
    >> > > CRP7raw = matrix(NA, 15, 5) > > CRP7 = matrix(NA, 15,
    >> 5) > > CRP98raw = matrix(NA, 15, 5) > > CRP98 =
    >> matrix(NA, 15, 5)
    >> > >
    >> > > crp <- for (i in 1:15) { > > CRP7raw[i,] = beta0[i] +
    >> beta1[i] * tempo > > CRP7[i,] = CRP7raw[i,] + rnorm(5, 0,
    >> 2.14)
    >> > >
    >> > > CRP98raw[i,] = beta0[i] + beta1[i] * tempo > >
    >> CRP98[i,] = CRP98raw[i,] + rnorm(5, 0, .1) > > }
    >> > >
    >> > >
    >> > > # plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
    >> ylim=c(-10,5) , > > # xlab="Day in ICU", > > # ylab="CRP
    >> (mg/dL)", > > # sub = mtext(expression(paste(lambda)))
    >> > > #
    >> > > # CRP7graph <- apply(CRP7, 1, lines, col="gray")
    >> > >
    >> > >
    >> > >
    >> > >
    >> > >
    >> > >
    >> > > # plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5),
    >> ylim=c(-10,5), > > # xlab="Day in ICU", > > # ylab="CRP
    >> (mg/dL)") > > # CRP98graph <- apply(CRP98, 1, lines,
    >> col="gray")
    >> > >
    >> > > par(mfrow=c(1,2))
    >> > >
    >> > > plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
    >> ylim=c(-10,5) , > > xlab="t_i", > > ylab="y_ij", > > sub
    >> = "lambda = 0.7")
    >> > >
    >> > > CRP7graph <- apply(CRP7, 1, lines, col="gray")
    >> > >
    >> > >
    >> > > plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5),
    >> ylim=c(-10,5), > > xlab="Day in ICU", > > ylab="CRP
    >> (mg/dL", > > sub = "lambda = 0.98") > > CRP98graph <-
    >> apply(CRP98, 1, lines, col="gray")
    >> > >
    >> > >
    >> > > [[alternative HTML version deleted]]
    >> > >
    >> > > ______________________________________________ > >
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >> more, see > >
    >> https://stat.ethz.ch/mailman/listinfo/r-help > > PLEASE
    >> do read the posting guide > >
    >> http://www.R-project.org/posting-guide.html > > and
    >> provide commented, minimal, self-contained, reproducible
    >> code.
    >> 

    > ________________________________ Tento e-mail a jak?koliv
    > k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny
    > pouze jeho adres?t?m.  Jestli?e jste obdr?el(a) tento
    > e-mail omylem, informujte laskav? neprodlen? jeho
    > odes?latele. Obsah tohoto emailu i s p??lohami a jeho
    > kopie vyma?te ze sv?ho syst?mu.  Nejste-li zam??len?m
    > adres?tem tohoto emailu, nejste opr?vn?ni tento email
    > jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
    > Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu
    > zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

    > V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
    > - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o
    > uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden?
    > d?vodu.  - a obsahuje-li nab?dku, je adres?t opr?vn?n
    > nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu
    > (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s
    > dodatkem ?i odchylkou.  - trv? odes?latel na tom, ?e
    > p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m
    > shody na v?ech jej?ch n?le?itostech.  - odes?latel tohoto
    > emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost
    > ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn?
    > zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln?
    > moc byly adres?tovi tohoto emailu p??padn? osob?, kterou
    > adres?t zastupuje, p?edlo?eny nebo jejich existence je
    > adres?tovi ?i osob? j?m zastoupen? zn?m?.

    > This e-mail and any documents attached to it may be
    > confidential and are intended only for its intended
    > recipients.  If you received this e-mail by mistake,
    > please immediately inform its sender. Delete the contents
    > of this e-mail with all attachments and its copies from
    > your system.  If you are not the intended recipient of
    > this e-mail, you are not authorized to use, disseminate,
    > copy or disclose this e-mail in any manner.  The sender of
    > this e-mail shall not be liable for any possible damage
    > caused by modifications of the e-mail or by delay with
    > transfer of the email.

    > In case that this e-mail forms part of business dealings:
    > - the sender reserves the right to end negotiations about
    > entering into a contract in any time, for any reason, and
    > without stating any reasoning.  - if the e-mail contains
    > an offer, the recipient is entitled to immediately accept
    > such offer; The sender of this e-mail (offer) excludes any
    > acceptance of the offer on the part of the recipient
    > containing any amendment or variation.  - the sender
    > insists on that the respective contract is concluded only
    > upon an express mutual agreement on all its aspects.  -
    > the sender of this e-mail informs that he/she is not
    > authorized to enter into any contracts on behalf of the
    > company except for cases in which he/she is expressly
    > authorized to do so in writing, and such authorization or
    > power of attorney is submitted to the recipient or the
    > person represented by the recipient, or the existence of
    > such authorization is known to the recipient of the person
    > represented by the recipient.


From rosita21 at gmail.com  Mon Jul 31 11:46:33 2017
From: rosita21 at gmail.com (Rosa Oliveira)
Date: Mon, 31 Jul 2017 10:46:33 +0100
Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and
 colour different subjects in longitudinal data with different colours
In-Reply-To: <22910.63579.796345.377975@stat.math.ethz.ch>
References: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA83E4@SRVEXCHCM301.precheza.cz>
 <22910.61361.920703.720165@stat.math.ethz.ch>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA8454@SRVEXCHCM301.precheza.cz>
 <22910.63579.796345.377975@stat.math.ethz.ch>
Message-ID: <31AF1458-5DFC-476C-B9F1-6C0A24FD7848@gmail.com>

Hi, everyone,

Before everything, thanks. Lots of thanks ;)!!!!

I don?t think you understood everything I need to do.

I want to write t_i instead of "Day in ICU? [i subscript for t] and y_ij instead of "CRP (mg/dL)? [ij superscript for y]. The label of the axis? :( 


Can you help me on that task?

Thanks!!!!! 

Best,
Rosa Oliveira


> On 31 Jul 2017, at 10:28, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> 
>>>>>> PIKAL Petr <petr.pikal at precheza.cz <mailto:petr.pikal at precheza.cz>>
>>>>>>    on Mon, 31 Jul 2017 09:11:18 +0000 writes:
> 
>> Hi Martin see in line
> 
>>> -----Original Message----- From: Martin Maechler
>>> [mailto:maechler at stat.math.ethz.ch] Sent: Monday, July
>>> 31, 2017 10:52 AM To: PIKAL Petr <petr.pikal at precheza.cz>
>>> Cc: Rosa Oliveira <rosita21 at gmail.com>; r-help mailing
>>> list <r-help at r-
>    project.org> 
>>> Subject: Re: [R] Superscript and subscrib R for legend
>>> x-axis and y-axis and colour different subjects in
>>> longitudinal data with different colours
>>> 
>>> 
>>>> Hi Rosa > something like
>>> 
>>>> plot(1,1, sub=expression(lambda^"2"))
>>> 
>>>> So with your example, do you want something like
>>> 
>>>> plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
>>> ylim=c(-10,5) , > xlab="Day in ICU", > ylab="CRP
>>> (mg/dL)", > sub = mtext(expression(lambda^2)))
>>> 
>>> OOps!  Either plot( ..., sub = *) or plot( ... ) ;
>>> mtext(*)
>>> 
>>> but not both!
> 
>> You are right, I used a code from OP and did not much
>> think about it. Strangely enough, the code worked without
>> any complain. Probably mtext is "stronger" than sub and
>> overrides it.
> 
> Well, well, "the magic of R"  .....
> Not quite:  mtext(..) is a valid function call that is evaluated
> before plot() finishes; then it returns NULL invisibly, and
> 'plot(*, sub=NULL)' does nothing "coincidentally" (but for good
> reasons)
> 
> Martin
> 
>> Cheers Petr
> 
>>> 
>>>> CRP7graph <- apply(CRP7, 1, lines, col="gray")
>>> 
>>>> Cheers > Petr
>>> 
>>> 
>>>>> -----Original Message----- > > From: R-help
>>> [mailto:r-help-bounces at r-project.org] On Behalf Of Rosa >
>>>> Oliveira > > Sent: Friday, July 28, 2017 5:07 PM > >
>>> To: r-help mailing list <r-help at r-project.org>;
>>> R-help at r-project.org > > Subject: [R] Superscript and
>>> subscrib R for legend x-axis and y-axis > > and colour
>>> different subjects in longitudinal data with different >
>>>> colours
>>>>> 
>>>>> I am trying to make a x-axis and y-axis titles with
>>> both a special > > character and a subscript. I am not
>>> being able to do this. I think > > its just a placing of
>>> my parenthesis, but I've tried (seemingly) everything.
>>>>> 
>>>>> Even more, when I try the blog users code it works.
>>>>> 
>>>>> 
>>>>> 
>>>>> Is it because I?m using longitudinal data?
>>>>> 
>>>>> 
>>>>> 
>>>>> Even more. Is it possible to colour each one of the
>>> 15 lines with a > > different colour?
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> library(ggplot2) > > library(reshape) > >
>>> library(lattice) > > library(gtable) > > library(grid)
>>>>> 
>>>>> attach(mtcars)
>>>>> 
>>>>> beta0 = rnorm (15, 1, .5) > > beta1 = rnorm (15, -1,
>>> .5)
>>>>> 
>>>>> tempo = seq(1:5)
>>>>> 
>>>>> CRP7raw = matrix(NA, 15, 5) > > CRP7 = matrix(NA, 15,
>>> 5) > > CRP98raw = matrix(NA, 15, 5) > > CRP98 =
>>> matrix(NA, 15, 5)
>>>>> 
>>>>> crp <- for (i in 1:15) { > > CRP7raw[i,] = beta0[i] +
>>> beta1[i] * tempo > > CRP7[i,] = CRP7raw[i,] + rnorm(5, 0,
>>> 2.14)
>>>>> 
>>>>> CRP98raw[i,] = beta0[i] + beta1[i] * tempo > >
>>> CRP98[i,] = CRP98raw[i,] + rnorm(5, 0, .1) > > }
>>>>> 
>>>>> 
>>>>> # plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
>>> ylim=c(-10,5) , > > # xlab="Day in ICU", > > # ylab="CRP
>>> (mg/dL)", > > # sub = mtext(expression(paste(lambda)))
>>>>> #
>>>>> # CRP7graph <- apply(CRP7, 1, lines, col="gray")
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> # plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5),
>>> ylim=c(-10,5), > > # xlab="Day in ICU", > > # ylab="CRP
>>> (mg/dL)") > > # CRP98graph <- apply(CRP98, 1, lines,
>>> col="gray")
>>>>> 
>>>>> par(mfrow=c(1,2))
>>>>> 
>>>>> plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
>>> ylim=c(-10,5) , > > xlab="t_i", > > ylab="y_ij", > > sub
>>> = "lambda = 0.7")
>>>>> 
>>>>> CRP7graph <- apply(CRP7, 1, lines, col="gray")
>>>>> 
>>>>> 
>>>>> plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5),
>>> ylim=c(-10,5), > > xlab="Day in ICU", > > ylab="CRP
>>> (mg/dL", > > sub = "lambda = 0.98") > > CRP98graph <-
>>> apply(CRP98, 1, lines, col="gray")
>>>>> 
>>>>> 
>>>>> [[alternative HTML version deleted]]
>>>>> 
>>>>> ______________________________________________ > >
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>>> more, see > >
>>> https://stat.ethz.ch/mailman/listinfo/r-help > > PLEASE
>>> do read the posting guide > >
>>> http://www.R-project.org/posting-guide.html > > and
>>> provide commented, minimal, self-contained, reproducible
>>> code.
>>> 
> 
>> ________________________________ Tento e-mail a jak?koliv
>> k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny
>> pouze jeho adres?t?m.  Jestli?e jste obdr?el(a) tento
>> e-mail omylem, informujte laskav? neprodlen? jeho
>> odes?latele. Obsah tohoto emailu i s p??lohami a jeho
>> kopie vyma?te ze sv?ho syst?mu.  Nejste-li zam??len?m
>> adres?tem tohoto emailu, nejste opr?vn?ni tento email
>> jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
>> Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu
>> zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.
> 
>> V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
>> - vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o
>> uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden?
>> d?vodu.  - a obsahuje-li nab?dku, je adres?t opr?vn?n
>> nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu
>> (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s
>> dodatkem ?i odchylkou.  - trv? odes?latel na tom, ?e
>> p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m
>> shody na v?ech jej?ch n?le?itostech.  - odes?latel tohoto
>> emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost
>> ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn?
>> zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln?
>> moc byly adres?tovi tohoto emailu p??padn? osob?, kterou
>> adres?t zastupuje, p?edlo?eny nebo jejich existence je
>> adres?tovi ?i osob? j?m zastoupen? zn?m?.
> 
>> This e-mail and any documents attached to it may be
>> confidential and are intended only for its intended
>> recipients.  If you received this e-mail by mistake,
>> please immediately inform its sender. Delete the contents
>> of this e-mail with all attachments and its copies from
>> your system.  If you are not the intended recipient of
>> this e-mail, you are not authorized to use, disseminate,
>> copy or disclose this e-mail in any manner.  The sender of
>> this e-mail shall not be liable for any possible damage
>> caused by modifications of the e-mail or by delay with
>> transfer of the email.
> 
>> In case that this e-mail forms part of business dealings:
>> - the sender reserves the right to end negotiations about
>> entering into a contract in any time, for any reason, and
>> without stating any reasoning.  - if the e-mail contains
>> an offer, the recipient is entitled to immediately accept
>> such offer; The sender of this e-mail (offer) excludes any
>> acceptance of the offer on the part of the recipient
>> containing any amendment or variation.  - the sender
>> insists on that the respective contract is concluded only
>> upon an express mutual agreement on all its aspects.  -
>> the sender of this e-mail informs that he/she is not
>> authorized to enter into any contracts on behalf of the
>> company except for cases in which he/she is expressly
>> authorized to do so in writing, and such authorization or
>> power of attorney is submitted to the recipient or the
>> person represented by the recipient, or the existence of
>> such authorization is known to the recipient of the person
>> represented by the recipient.


	[[alternative HTML version deleted]]


From lorenzo.isella at gmail.com  Mon Jul 31 12:51:15 2017
From: lorenzo.isella at gmail.com (Lorenzo Isella)
Date: Mon, 31 Jul 2017 12:51:15 +0200
Subject: [R] Access Data Base Reading on Linux Platform
Message-ID: <CAE-ioUz3SUrV81gh7KAHXdT_bkYvvxugUGW4R00Fx1tC0r_SkQ@mail.gmail.com>

Dear All,
I am really far from a database expert (I do prefer flat files as long as
that is reasonable), but I have to deal with an accdb database (Microsoft
Access new format). It all stems from the fact that I run R almost
exclusively on Debian platforms.
I did a bit of googling

http://r.789695.n4.nabble.com/How-to-load-data-from-accdb-into-R-td4656613.html

http://rprogramming.net/connect-to-ms-access-in-r/

https://www.r-bloggers.com/getting-access-data-into-r/

but it seems you cannot go very far unless you can install some microsoft
drivers on your platform.
Hence, my two questions

1) Can I read (I do not need write permissions) an accdb database on linux
using R without resorting to WINE?

2) If 1) is cumbersome, to what R friendly format (excluding for now a csv
dump) I can convert the data base? If this is doable entirely in Linux?
Otherwise, worse comes to worse, how to make this one time conversion from
Windows? I read there are ways from Access to convert everything to mdb,
which should be more R friendly, but I need the opinion of someone more
experienced than me here.

Many thanks

Lorenzo

	[[alternative HTML version deleted]]


From marc_schwartz at me.com  Mon Jul 31 14:11:00 2017
From: marc_schwartz at me.com (Marc Schwartz)
Date: Mon, 31 Jul 2017 07:11:00 -0500
Subject: [R] Access Data Base Reading on Linux Platform
In-Reply-To: <CAE-ioUz3SUrV81gh7KAHXdT_bkYvvxugUGW4R00Fx1tC0r_SkQ@mail.gmail.com>
References: <CAE-ioUz3SUrV81gh7KAHXdT_bkYvvxugUGW4R00Fx1tC0r_SkQ@mail.gmail.com>
Message-ID: <AA73A5A3-49F5-416E-9487-84C4FA9DBC51@me.com>


> On Jul 31, 2017, at 5:51 AM, Lorenzo Isella <lorenzo.isella at gmail.com> wrote:
> 
> Dear All,
> I am really far from a database expert (I do prefer flat files as long as
> that is reasonable), but I have to deal with an accdb database (Microsoft
> Access new format). It all stems from the fact that I run R almost
> exclusively on Debian platforms.
> I did a bit of googling
> 
> http://r.789695.n4.nabble.com/How-to-load-data-from-accdb-into-R-td4656613.html
> 
> http://rprogramming.net/connect-to-ms-access-in-r/
> 
> https://www.r-bloggers.com/getting-access-data-into-r/
> 
> but it seems you cannot go very far unless you can install some microsoft
> drivers on your platform.
> Hence, my two questions
> 
> 1) Can I read (I do not need write permissions) an accdb database on linux
> using R without resorting to WINE?
> 
> 2) If 1) is cumbersome, to what R friendly format (excluding for now a csv
> dump) I can convert the data base? If this is doable entirely in Linux?
> Otherwise, worse comes to worse, how to make this one time conversion from
> Windows? I read there are ways from Access to convert everything to mdb,
> which should be more R friendly, but I need the opinion of someone more
> experienced than me here.
> 
> Many thanks
> 
> Lorenzo


Hi,

As an FYI for future reference, there is a dedicated R and DB list here:

  https://stat.ethz.ch/mailman/listinfo/r-sig-db

That being said, you are likely better off trying to get the data either in MS Excel formats, for which there are cross-platform R packages on CRAN that can help read the XLS/XLSX data or get CSV files which are easily read in R.

There is a utility called MDBTools (https://github.com/brianb/mdbtools), but it only supports the older MDB file format.

A couple of alternatives would be:

Use MDBOpener.com (http://www.mdbopener.com), which provides an online conversion tool where you can then export the data from the ACCDB file to either Excel or CSV files, if the source of the data cannot do it for you.  

Use Jackcess (http://jackcess.sourceforge.net) which is a Java based library to create an application which could be called within R. This would be more cumbersome that the aforementioned options and would depend upon how much work you want to do to avoid the Excel or CSV based approach.


I have not used any of the above, so cannot speak for either ease of use or the validity of the tools.

There is also a general resource here:

  https://www.lifewire.com/accdb-file-2619459

The OpenOffice/LibreOffice based options listed there are likely more work than they are worth.

Regards,

Marc Schwartz


From petr.pikal at precheza.cz  Mon Jul 31 14:44:46 2017
From: petr.pikal at precheza.cz (PIKAL Petr)
Date: Mon, 31 Jul 2017 12:44:46 +0000
Subject: [R] Superscript and subscrib R for legend x-axis and y-axis and
 colour different subjects in longitudinal data with different colours
In-Reply-To: <31AF1458-5DFC-476C-B9F1-6C0A24FD7848@gmail.com>
References: <4A645DB1-55B1-4163-A813-07C605D26644@gmail.com>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA83E4@SRVEXCHCM301.precheza.cz>
 <22910.61361.920703.720165@stat.math.ethz.ch>
 <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA8454@SRVEXCHCM301.precheza.cz>
 <22910.63579.796345.377975@stat.math.ethz.ch>
 <31AF1458-5DFC-476C-B9F1-6C0A24FD7848@gmail.com>
Message-ID: <6E8D8DFDE5FA5D4ABCB8508389D1BF88FFAA864D@SRVEXCHCM301.precheza.cz>

Hi


From: Rosa Oliveira [mailto:rosita21 at gmail.com]
Sent: Monday, July 31, 2017 11:47 AM
To: Martin Maechler <maechler at stat.math.ethz.ch>
Cc: PIKAL Petr <petr.pikal at precheza.cz>; r-help mailing list <r-help at r-project.org>
Subject: Re: [R] Superscript and subscrib R for legend x-axis and y-axis and colour different subjects in longitudinal data with different colours

Hi, everyone,

Before everything, thanks. Lots of thanks ;)!!!!

I don?t think you understood everything I need to do.

Most probably because you did not tell precisely what you really want.

I want to write t_i instead of "Day in ICU? [i subscript for t] and y_ij instead of "CRP (mg/dL)? [ij superscript for y]. The label of the axis? :(

So something like that.
plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
ylim=c(-10,5) ,
xlab=expression("t"[i]),
ylab=expression("y"^ij))
mtext(expression(lambda^2))

Cheers
Petr

Can you help me on that task?

Thanks!!!!!

Best,
Rosa Oliveira


On 31 Jul 2017, at 10:28, Martin Maechler <maechler at stat.math.ethz.ch<mailto:maechler at stat.math.ethz.ch>> wrote:

PIKAL Petr <petr.pikal at precheza.cz<mailto:petr.pikal at precheza.cz>>
   on Mon, 31 Jul 2017 09:11:18 +0000 writes:


Hi Martin see in line


-----Original Message----- From: Martin Maechler
[mailto:maechler at stat.math.ethz.ch] Sent: Monday, July
31, 2017 10:52 AM To: PIKAL Petr <petr.pikal at precheza.cz<mailto:petr.pikal at precheza.cz>>
Cc: Rosa Oliveira <rosita21 at gmail.com<mailto:rosita21 at gmail.com>>; r-help mailing
list <r-help at r-
   project.org<http://project.org>>

Subject: Re: [R] Superscript and subscrib R for legend
x-axis and y-axis and colour different subjects in
longitudinal data with different colours



Hi Rosa > something like


plot(1,1, sub=expression(lambda^"2"))


So with your example, do you want something like


plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
ylim=c(-10,5) , > xlab="Day in ICU", > ylab="CRP
(mg/dL)", > sub = mtext(expression(lambda^2)))

OOps!  Either plot( ..., sub = *) or plot( ... ) ;
mtext(*)

but not both!


You are right, I used a code from OP and did not much
think about it. Strangely enough, the code worked without
any complain. Probably mtext is "stronger" than sub and
overrides it.

Well, well, "the magic of R"  .....
Not quite:  mtext(..) is a valid function call that is evaluated
before plot() finishes; then it returns NULL invisibly, and
'plot(*, sub=NULL)' does nothing "coincidentally" (but for good
reasons)

Martin


Cheers Petr




CRP7graph <- apply(CRP7, 1, lines, col="gray")


Cheers > Petr



-----Original Message----- > > From: R-help
[mailto:r-help-bounces at r-project.org] On Behalf Of Rosa >

Oliveira > > Sent: Friday, July 28, 2017 5:07 PM > >
To: r-help mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>;
R-help at r-project.org<mailto:R-help at r-project.org> > > Subject: [R] Superscript and
subscrib R for legend x-axis and y-axis > > and colour
different subjects in longitudinal data with different >

colours


I am trying to make a x-axis and y-axis titles with
both a special > > character and a subscript. I am not
being able to do this. I think > > its just a placing of
my parenthesis, but I've tried (seemingly) everything.


Even more, when I try the blog users code it works.



Is it because I?m using longitudinal data?



Even more. Is it possible to colour each one of the
15 lines with a > > different colour?







library(ggplot2) > > library(reshape) > >
library(lattice) > > library(gtable) > > library(grid)


attach(mtcars)

beta0 = rnorm (15, 1, .5) > > beta1 = rnorm (15, -1,
.5)


tempo = seq(1:5)

CRP7raw = matrix(NA, 15, 5) > > CRP7 = matrix(NA, 15,
5) > > CRP98raw = matrix(NA, 15, 5) > > CRP98 =
matrix(NA, 15, 5)


crp <- for (i in 1:15) { > > CRP7raw[i,] = beta0[i] +
beta1[i] * tempo > > CRP7[i,] = CRP7raw[i,] + rnorm(5, 0,
2.14)


CRP98raw[i,] = beta0[i] + beta1[i] * tempo > >
CRP98[i,] = CRP98raw[i,] + rnorm(5, 0, .1) > > }



# plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
ylim=c(-10,5) , > > # xlab="Day in ICU", > > # ylab="CRP
(mg/dL)", > > # sub = mtext(expression(paste(lambda)))

#
# CRP7graph <- apply(CRP7, 1, lines, col="gray")






# plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5),
ylim=c(-10,5), > > # xlab="Day in ICU", > > # ylab="CRP
(mg/dL)") > > # CRP98graph <- apply(CRP98, 1, lines,
col="gray")


par(mfrow=c(1,2))

plot(c(1:5), CRP7raw[1,], type = "n", xlim=c(1,5),
ylim=c(-10,5) , > > xlab="t_i", > > ylab="y_ij", > > sub
= "lambda = 0.7")


CRP7graph <- apply(CRP7, 1, lines, col="gray")


plot(c(1:5), CRP98raw[1,], type = "n", xlim=c(1,5),
ylim=c(-10,5), > > xlab="Day in ICU", > > ylab="CRP
(mg/dL", > > sub = "lambda = 0.98") > > CRP98graph <-
apply(CRP98, 1, lines, col="gray")



[[alternative HTML version deleted]]

______________________________________________ > >
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and
more, see > >
https://stat.ethz.ch/mailman/listinfo/r-help > > PLEASE
do read the posting guide > >
http://www.R-project.org/posting-guide.html > > and
provide commented, minimal, self-contained, reproducible
code.


________________________________ Tento e-mail a jak?koliv
k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny
pouze jeho adres?t?m.  Jestli?e jste obdr?el(a) tento
e-mail omylem, informujte laskav? neprodlen? jeho
odes?latele. Obsah tohoto emailu i s p??lohami a jeho
kopie vyma?te ze sv?ho syst?mu.  Nejste-li zam??len?m
adres?tem tohoto emailu, nejste opr?vn?ni tento email
jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu
zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.


V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o
uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden?
d?vodu.  - a obsahuje-li nab?dku, je adres?t opr?vn?n
nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu
(nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s
dodatkem ?i odchylkou.  - trv? odes?latel na tom, ?e
p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m
shody na v?ech jej?ch n?le?itostech.  - odes?latel tohoto
emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost
??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn?
zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln?
moc byly adres?tovi tohoto emailu p??padn? osob?, kterou
adres?t zastupuje, p?edlo?eny nebo jejich existence je
adres?tovi ?i osob? j?m zastoupen? zn?m?.


This e-mail and any documents attached to it may be
confidential and are intended only for its intended
recipients.  If you received this e-mail by mistake,
please immediately inform its sender. Delete the contents
of this e-mail with all attachments and its copies from
your system.  If you are not the intended recipient of
this e-mail, you are not authorized to use, disseminate,
copy or disclose this e-mail in any manner.  The sender of
this e-mail shall not be liable for any possible damage
caused by modifications of the e-mail or by delay with
transfer of the email.


In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about
entering into a contract in any time, for any reason, and
without stating any reasoning.  - if the e-mail contains
an offer, the recipient is entitled to immediately accept
such offer; The sender of this e-mail (offer) excludes any
acceptance of the offer on the part of the recipient
containing any amendment or variation.  - the sender
insists on that the respective contract is concluded only
upon an express mutual agreement on all its aspects.  -
the sender of this e-mail informs that he/she is not
authorized to enter into any contracts on behalf of the
company except for cases in which he/she is expressly
authorized to do so in writing, and such authorization or
power of attorney is submitted to the recipient or the
person represented by the recipient, or the existence of
such authorization is known to the recipient of the person
represented by the recipient.


________________________________
Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a jsou ur?eny pouze jeho adres?t?m.
Jestli?e jste obdr?el(a) tento e-mail omylem, informujte laskav? neprodlen? jeho odes?latele. Obsah tohoto emailu i s p??lohami a jeho kopie vyma?te ze sv?ho syst?mu.
Nejste-li zam??len?m adres?tem tohoto emailu, nejste opr?vn?ni tento email jakkoliv u??vat, roz?i?ovat, kop?rovat ?i zve?ej?ovat.
Odes?latel e-mailu neodpov?d? za eventu?ln? ?kodu zp?sobenou modifikacemi ?i zpo?d?n?m p?enosu e-mailu.

V p??pad?, ?e je tento e-mail sou??st? obchodn?ho jedn?n?:
- vyhrazuje si odes?latel pr?vo ukon?it kdykoliv jedn?n? o uzav?en? smlouvy, a to z jak?hokoliv d?vodu i bez uveden? d?vodu.
- a obsahuje-li nab?dku, je adres?t opr?vn?n nab?dku bezodkladn? p?ijmout; Odes?latel tohoto e-mailu (nab?dky) vylu?uje p?ijet? nab?dky ze strany p??jemce s dodatkem ?i odchylkou.
- trv? odes?latel na tom, ?e p??slu?n? smlouva je uzav?ena teprve v?slovn?m dosa?en?m shody na v?ech jej?ch n?le?itostech.
- odes?latel tohoto emailu informuje, ?e nen? opr?vn?n uzav?rat za spole?nost ??dn? smlouvy s v?jimkou p??pad?, kdy k tomu byl p?semn? zmocn?n nebo p?semn? pov??en a takov? pov??en? nebo pln? moc byly adres?tovi tohoto emailu p??padn? osob?, kterou adres?t zastupuje, p?edlo?eny nebo jejich existence je adres?tovi ?i osob? j?m zastoupen? zn?m?.

This e-mail and any documents attached to it may be confidential and are intended only for its intended recipients.
If you received this e-mail by mistake, please immediately inform its sender. Delete the contents of this e-mail with all attachments and its copies from your system.
If you are not the intended recipient of this e-mail, you are not authorized to use, disseminate, copy or disclose this e-mail in any manner.
The sender of this e-mail shall not be liable for any possible damage caused by modifications of the e-mail or by delay with transfer of the email.

In case that this e-mail forms part of business dealings:
- the sender reserves the right to end negotiations about entering into a contract in any time, for any reason, and without stating any reasoning.
- if the e-mail contains an offer, the recipient is entitled to immediately accept such offer; The sender of this e-mail (offer) excludes any acceptance of the offer on the part of the recipient containing any amendment or variation.
- the sender insists on that the respective contract is concluded only upon an express mutual agreement on all its aspects.
- the sender of this e-mail informs that he/she is not authorized to enter into any contracts on behalf of the company except for cases in which he/she is expressly authorized to do so in writing, and such authorization or power of attorney is submitted to the recipient or the person represented by the recipient, or the existence of such authorization is known to the recipient of the person represented by the recipient.

	[[alternative HTML version deleted]]


From rain8dome9 at gmail.com  Mon Jul 31 14:07:23 2017
From: rain8dome9 at gmail.com (Dimlak Gorkehgz)
Date: Mon, 31 Jul 2017 19:07:23 +0700
Subject: [R] How automatic Y on install y/n prompts?
Message-ID: <CANwytP8K_KAnZS-2CkY5AzhnhCmVxZu_OTum_BynAWs0jyP61w@mail.gmail.com>

I am testing most of the models caret supports on a bunch of PCs.
Unfortunately caret "suggested" packages do not include most of the model
packages available to caret. Every time a new version of R comes out I have
to sit in front of each PC and wait for each prompt to press the 1 button
and Enter. Is there an option I could set to tell R or Rstudio to just
install anything asked for? A for every a/s/n prompt too.

	[[alternative HTML version deleted]]


From bgunter.4567 at gmail.com  Mon Jul 31 19:45:07 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Mon, 31 Jul 2017 10:45:07 -0700
Subject: [R] How automatic Y on install y/n prompts?
In-Reply-To: <CANwytP8K_KAnZS-2CkY5AzhnhCmVxZu_OTum_BynAWs0jyP61w@mail.gmail.com>
References: <CANwytP8K_KAnZS-2CkY5AzhnhCmVxZu_OTum_BynAWs0jyP61w@mail.gmail.com>
Message-ID: <CAGxFJbRKUXDpUCyCK6YrmT4bz0TOpb=sqBecQLq9Rz605bgUkA@mail.gmail.com>

?install.packages

and pay attention to the "dependencies" argument.

Th RStudio interface does not appear to allow for "suggests" packages
(correction appreciated if this is wrong) , which the command line
makes available.

HTH.

Cheers,
Bert


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jul 31, 2017 at 5:07 AM, Dimlak Gorkehgz <rain8dome9 at gmail.com> wrote:
> I am testing most of the models caret supports on a bunch of PCs.
> Unfortunately caret "suggested" packages do not include most of the model
> packages available to caret. Every time a new version of R comes out I have
> to sit in front of each PC and wait for each prompt to press the 1 button
> and Enter. Is there an option I could set to tell R or Rstudio to just
> install anything asked for? A for every a/s/n prompt too.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From Riaan.VanDerWalt at nwu.ac.za  Mon Jul 31 22:47:33 2017
From: Riaan.VanDerWalt at nwu.ac.za (Riaan Van Der Walt)
Date: Mon, 31 Jul 2017 22:47:33 +0200
Subject: [R] find similar words in text
References: <597F9765020000D0004FDA85@v-pgw-nlx2.p.nwu.ac.za>
Message-ID: <597F9765020000D0004FDA85@v-pgw-nlx2.p.nwu.ac.za>

I am new to R.
Busy with Text Analysis.
 
Need a script to find e.g 
 
whale, whales, whale's, whaler, whalers, whaling,... in Moby Dick
 
Riaan

From boris.steipe at utoronto.ca  Mon Jul 31 23:37:21 2017
From: boris.steipe at utoronto.ca (Boris Steipe)
Date: Mon, 31 Jul 2017 17:37:21 -0400
Subject: [R] find similar words in text
In-Reply-To: <597F9765020000D0004FDA85@v-pgw-nlx2.p.nwu.ac.za>
References: <597F9765020000D0004FDA85@v-pgw-nlx2.p.nwu.ac.za>
 <597F9765020000D0004FDA85@v-pgw-nlx2.p.nwu.ac.za>
Message-ID: <243B1BB0-540F-4988-9952-AA6DD7503057@utoronto.ca>

You need a stemming algorithm. See here:
  https://cran.r-project.org/web/views/NaturalLanguageProcessing.html

Myself, I've had good experience with Rstem.

B.





> On Jul 31, 2017, at 4:47 PM, Riaan Van Der Walt <Riaan.VanDerWalt at nwu.ac.za> wrote:
> 
> I am new to R.
> Busy with Text Analysis.
> 
> Need a script to find e.g 
> 
> whale, whales, whale's, whaler, whalers, whaling,... in Moby Dick
> 
> Riaan
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter.4567 at gmail.com  Mon Jul 31 23:38:55 2017
From: bgunter.4567 at gmail.com (Bert Gunter)
Date: Mon, 31 Jul 2017 14:38:55 -0700
Subject: [R] find similar words in text
In-Reply-To: <597F9765020000D0004FDA85@v-pgw-nlx2.p.nwu.ac.za>
References: <597F9765020000D0004FDA85@v-pgw-nlx2.p.nwu.ac.za>
 <597F9765020000D0004FDA85@v-pgw-nlx2.p.nwu.ac.za>
Message-ID: <CAGxFJbTA0JPc-9_fkm+jpCZDXVx+sqASFw4jYfa5AXjkis_CNA@mail.gmail.com>

**Before** posting:

1. Search: e.g. "text processing R"

2. Check CRAN Task views:
e.g. "Natural Language Processing"
https://cran.r-project.org/web/views/NaturalLanguageProcessing.html

3. Use R's search facility:  e.g. help.search("character") which would
lead you to ?grep among others, which might suggest something like

grep("whal",strsplit(yourtext, split = " ", fixed = TRUE), fixed = TRUE)

... although this is likely too simple minded for a text as large as
Moby Dick. But it depends on what you want to do.

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jul 31, 2017 at 1:47 PM, Riaan Van Der Walt
<Riaan.VanDerWalt at nwu.ac.za> wrote:
> I am new to R.
> Busy with Text Analysis.
>
> Need a script to find e.g
>
> whale, whales, whale's, whaler, whalers, whaling,... in Moby Dick
>
> Riaan
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


